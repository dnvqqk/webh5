var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)t.hasOwnProperty(e)&&(a[e]=t[e])};return function(t,e){function r(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();!function(){function a(t,e,r){function o(s,i){if(!e[s]){if(!t[s]){var l="function"==typeof require&&require;if(!i&&l)return l(s,!0);if(n)return n(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=e[s]={exports:{}};t[s][0].call(h.exports,function(a){return o(t[s][1][a]||a)},h,h.exports,a,t,e,r)}return e[s].exports}for(var n="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}return a}()({1:[function(a,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function a(){}return a.init=function(){},a.width=1136,a.height=640,a.scaleMode="exactfit",a.screenMode="showall",a.alignV="center",a.alignH="middle",a.startScene="",a.sceneRoot="",a.debug=!1,a.stat=!1,a.physicsDebug=!1,a.exportSceneToJson=!0,a}();e.default=r,r.init()},{}],2:[function(a,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("./GameConfig"),o=a("./wmyUtilsH5/Wmy_Load_Mag");new(function(){function a(){window.Laya3D?Laya3D.init(r.default.width,r.default.height):Laya.init(r.default.width,r.default.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=r.default.scaleMode,Laya.stage.screenMode=r.default.screenMode,Laya.stage.screenMode=Laya.Stage.SCREEN_HORIZONTAL,Laya.URL.exportSceneToJson=r.default.exportSceneToJson,(r.default.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),r.default.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),r.default.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json?"+Date.now(),Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}return a.prototype.onVersionLoaded=function(){Laya.stage.addChild(fairygui.GRoot.inst.displayObject),o.Wmy_Load_Mag.getThis.onLoadWetData("res/loadInfo.txt",Laya.Handler.create(this,this.onLoadLoad))},a.prototype.onLoadLoad=function(){var a=o.Wmy_Load_Mag.getThis.getResObj("load");null!=a&&o.Wmy_Load_Mag.getThis.onload(a,new Laya.Handler(this,this.onLoadMain))},a.prototype.onLoadMain=function(){this._loadView=fairygui.UIPackage.createObject("load","Load").asCom,fairygui.GRoot.inst.addChild(this._loadView),this._bar=this._loadView.getChild("bar").asProgress,this._bar.value=1},a}())},{"./GameConfig":1,"./wmyUtilsH5/Wmy_Load_Mag":3}],3:[function(a,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function a(){this._wetData={},this.resUrl="",this._resDataArr=[],this._callbackOk=[],this._callbackProgress=[]}return Object.defineProperty(a,"getThis",{get:function(){return null==a._this&&(a._this=new a),a._this},enumerable:!0,configurable:!0}),a.prototype.getWetData=function(a){return this._wetData[a]},a.prototype.setWetData=function(t,e){if(""==this.resUrl){this.resUrl=e;var r=null;try{r=JSON.parse(t)}catch(a){}try{var o=r[0].assetUrl;!a.isDebug&&document.URL.indexOf("file:///")>=0&&(o=""),a.assetUrl=o}catch(a){}}null==e&&(e=this.resUrl),this._wetData[e]=t},a.prototype.getResObj=function(a,t){var e;if(null==t&&(t=this.resUrl),null==(e=this.getWetData(t)))return console.log("空数据"),null;var r=null;if(e instanceof Array&&(r=e),null==r)try{r=JSON.parse(e)}catch(a){return console.log("加载材料数据错误",e),null}for(var o=null,n=0;n<r.length;n++){var s=r[n];if(s.resName==a){o=s;break}}return o},a.prototype.onLoadWetData=function(a,t){if(""!=a){if(null==this.getWetData(a)){return Laya.loader.load(a,new Laya.Handler(this,function(e){this.setWetData(e,a),t.runWith([this._wetData[a]])}))}t.runWith([this.getWetData(a)])}},a.prototype.onload=function(t,e,r){var o=t.resName;if(null!=this._resDataArr[o])this._resDataArr[o].runWith([this._resDataArr[o]]);else{if(null!=this._callbackOk[o])return this._callbackOk[o].push(e),void(null!=r&&this._callbackProgress[o].push(r));this._callbackOk[o]=[],this._callbackOk[o].push(e),this._callbackProgress[o]=[],null!=r&&this._callbackProgress[o].push(r);var n=t.Resres,s={},i=t.resData;if(null!=i&&""!=i)try{s=JSON.parse(i)}catch(a){console.log("加载材料数据错误",i)}for(var l,u=[],h=0;h<n.length;h++){var d=n[h].resUrl;d=Laya.ResourceVersion.addVersionPrefix(d);var c=a.assetUrl+d;c.indexOf(".txt")>=0?(u.push({url:c,type:Laya.Loader.BUFFER}),l=c):c.indexOf(".jpg")>=0||c.indexOf(".png")>=0?u.push({url:c,type:Laya.Loader.IMAGE}):c.indexOf(".mp3")>=0||c.indexOf(".wav")>=0?u.push({url:c,type:Laya.Loader.SOUND}):u.push({url:c})}Laya.loader.load(u,Laya.Handler.create(this,this.onAssetConmplete,[o,l,s]),Laya.Handler.create(this,this.onAssetProgress,[o],!1))}},a.prototype.onload3d=function(t,e,r){var o=t.resName;if(null!=this._resDataArr[o])this._resDataArr[o].runWith([this._resDataArr[o]]);else{if(null!=this._callbackOk[o])return this._callbackOk[o].push(e),void(null!=r&&this._callbackProgress[o].push(r));this._callbackOk[o]=[],this._callbackOk[o].push(e),this._callbackProgress[o]=[],null!=r&&this._callbackProgress[o].push(r);var n=t.Resres,s={},i=t.resData;if(null!=i&&""!=i)try{s=JSON.parse(i)}catch(a){console.log("加载材料数据错误",i)}for(var l=[],u=[],h=0;h<n.length;h++){var d=n[h].resUrl,c=a.assetUrl+d;d.indexOf(".ls")>=0&&(l.push({url:c}),u.push(c))}s.urlList=u}},a.prototype.onAssetProgress=function(a,t){for(var e=this._callbackProgress[a],r=0;r<e.length;r++){e[r].runWith([t])}},a.prototype.onAssetConmplete=function(a,t,e){var r=this._callbackOk[a];if(null!=t){var o=Laya.loader.getRes(t),n=Laya.ResourceVersion.addVersionPrefix(t).split(".")[0];fairygui.UIPackage.addPackage(n,o);var s=n.split("/");e.bName=s[s.length-1],this._resDataArr[a]=e}for(var i=0;i<r.length;i++){r[i].runWith([e])}this._callbackOk[a]=null,this._callbackProgress[a]=null},a.prototype.onAutoLoadAll=function(a,t){var e=this.getWetData(this.resUrl);if(null==e)return console.log("空数据"),null;var r=null;if(e instanceof Array&&(r=e),null==r)try{r=JSON.parse(e)}catch(a){return console.log("加载材料数据错误",e),null}this._autoLoadrCallbackOk=a,this._autoLoadrCallbackProgress=t,this._autoLoadInfoArr={},this._autoLoadInfoArr.num=0,this._autoLoadInfoArr.cNum=0,this._autoLoadInfoArr.uiArr=[],this._autoLoadInfoArr.u3dArr=[];for(var o=0;o<r.length;o++){var n=r[o],s=n.resName,i=n.type;null!=s&&""!=s&&null!=i&&""!=i&&this.onAutoLoadObj(i,s)}},a.prototype.onAutoLoadObj=function(t,e){var r=this.getResObj(e);if(null!=r){var o=this._autoLoadInfoArr.num;if(this._autoLoadInfoArr[o]={},this._autoLoadInfoArr[o].n=e,this._autoLoadInfoArr[o].t=t,"ui"==t)this.onload(r,new Laya.Handler(this,this.onLoadOk,[o]),new Laya.Handler(this,this.onLoading,[o])),this._autoLoadInfoArr.num+=1;else if("mats"==t){for(var n=r.Resres,s=[],i=0;i<n.length;i++){var l=(h=n[i]).resUrl,u=a.assetUrl+l;s.push(u)}this._autoLoadInfoArr.num+=1}else if("cubeMap"==t)for(var n=r.Resres,i=0;i<n.length;i++){var h=n[i],l=h.resUrl,u=a.assetUrl+l;Laya.TextureCube.load(u,null)}else"u3d"==t?(this.onload3d(r,new Laya.Handler(this,this.onLoadOk,[o]),new Laya.Handler(this,this.onLoading,[o])),this._autoLoadInfoArr.num+=1):"audio"==t&&(this.onload(r,new Laya.Handler(this,this.onLoadOk,[o]),new Laya.Handler(this,this.onLoading,[o])),this._autoLoadInfoArr.num+=1)}},a.prototype.getCube=function(t,e){var r=this.getResObj(t);if(null!=r){for(var o=r.Resres,n=[],s=0;s<o.length;s++){var i=o[s].resUrl,l=a.assetUrl+i;Laya.TextureCube.load(l,new Laya.Handler(this,function(a){n[s]=a,e.runWith([a,s])}))}return n}},a.prototype.onLoading=function(a,t){this._autoLoadInfoArr[a].p=t;for(var e=this._autoLoadInfoArr.num,r=0,o=0;o<e;o++){var n=this._autoLoadInfoArr[o].p;null!=n&&(r+=n)}var s=r/this._autoLoadInfoArr.num*100;isNaN(s)&&(s=0),null!=this._autoLoadrCallbackProgress&&this._autoLoadrCallbackProgress.runWith([s])},a.prototype.onLoadOk=function(a,t){this._autoLoadInfoArr.cNum+=1,"ui"==this._autoLoadInfoArr[a].t?this._autoLoadInfoArr.uiArr.push(t):"u3d"==this._autoLoadInfoArr[a].t&&this._autoLoadInfoArr.u3dArr.push(t),this._autoLoadInfoArr.cNum>=this._autoLoadInfoArr.num&&null!=this._autoLoadrCallbackOk&&this._autoLoadrCallbackOk.runWith([this._autoLoadInfoArr.uiArr,this._autoLoadInfoArr.u3dArr])},a.isDebug=!1,a.assetUrl="",a}();e.Wmy_Load_Mag=r},{}]},{},[2]);