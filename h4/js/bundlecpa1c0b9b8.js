var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function i(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();!function(){function t(e,a,i){function n(s,o){if(!a[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var u=a[s]={exports:{}};e[s][0].call(u.exports,function(t){return n(e[s][1][t]||t)},u,u.exports,t,e,a,i)}return a[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}return t}()({1:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(){}return t.init=function(){},t.width=1136,t.height=640,t.scaleMode="fixedwidth",t.screenMode="none",t.startScene="",t.sceneRoot="",t.debug=!1,t.stat=!1,t.physicsDebug=!1,t.exportSceneToJson=!0,t}();a.default=i,i.init()},{}],2:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("./GameConfig"),n=t("./wmyUtilsH5/Wmy_Load_Mag"),r=t("./wmyUtilsH5/d3/WmyUtils3D"),s=t("./z_game/GameCamera"),o=t("./z_game/PlayerKz"),l=t("./z_game/EnemyKz");new(function(){function t(){window.Laya3D?Laya3D.init(i.default.width,i.default.height):Laya.init(i.default.width,i.default.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.stage.scaleMode=Laya.Stage.SCALE_SHOWALL,Laya.stage.alignH="center",Laya.stage.alignV="middle";var t="";null!=window&&null!=window.wmyVTime&&(t=window.wmyVTime),Laya.URL.basePath="https://web.dnvqqk.com/h4/",Laya.ResourceVersion.enable("version.json"+t,Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}return t.prototype.onVersionLoaded=function(){Laya.stage.addChild(fairygui.GRoot.inst.displayObject);var t=Laya.ResourceVersion.addVersionPrefix("res/loadInfo.json");n.Wmy_Load_Mag.getThis.onLoadWetData(t,Laya.Handler.create(this,this.onLoadLoad))},t.prototype.onLoadLoad=function(){var t=n.Wmy_Load_Mag.getThis.getResObj("load");null!=t&&n.Wmy_Load_Mag.getThis.onload(t,new Laya.Handler(this,this.onLoadMain))},t.prototype.onLoadMain=function(){this._loadView=fairygui.UIPackage.createObject("load","Load").asCom,fairygui.GRoot.inst.addChild(this._loadView),this._bar=this._loadView.getChild("bar").asProgress,n.Wmy_Load_Mag.getThis.onAutoLoadAll(new Laya.Handler(this,this.onLoadOk),new Laya.Handler(this,this.onLoading))},t.prototype.onLoading=function(t){this._bar.value=t},t.prototype.onLoadOk=function(t,e){var a=this;this._u3dArr=e,Laya.timer.once(400,this,function(){a.onMain(),fairygui.GRoot.inst.removeChild(a._loadView),a._loadView=null,a._bar=null});var i=e[0].urlList[0];this.scene3D=Laya.loader.getRes(i),r.WmyUtils3D.setShaderAll(this.scene3D,"res/mats/","res/shaders/"),Laya.Shader3D.compileShader("PARTICLESHURIKEN",0,3,69214344,14),Laya.Shader3D.compileShader("PARTICLESHURIKEN",0,3,100671488,14),Laya.Shader3D.compileShader("PARTICLESHURIKEN",0,3,69763208,14)},t.prototype.onMain=function(){this._mainView=fairygui.UIPackage.createObject("main","Main").asCom,fairygui.GRoot.inst.addChild(this._mainView),Laya.stage.addChildAt(this.scene3D,0);var t=r.WmyUtils3D.getObj3d(this.scene3D,"Camera").addComponent(s.GameCamera),e=r.WmyUtils3D.getObj3d(this.scene3D,"hit_Player1");e.addComponent(o.PlayerKz),t.onSetTarget(e);r.WmyUtils3D.getObj3d(this.scene3D,"hit_Enemy").addComponent(l.EnemyKz)},t}())},{"./GameConfig":1,"./wmyUtilsH5/Wmy_Load_Mag":4,"./wmyUtilsH5/d3/WmyUtils3D":10,"./z_game/EnemyKz":18,"./z_game/GameCamera":19,"./z_game/PlayerKz":21}],3:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(t){function e(){var e=t.call(this)||this;return e._eventList=new Array,Laya.stage.on(laya.events.Event.MOUSE_DOWN,e,e.__onTouchDown),Laya.stage.on(laya.events.Event.MOUSE_UP,e,e.__onTouchUp),Laya.stage.on(laya.events.Event.MOUSE_MOVE,e,e.__OnMouseMOVE),Laya.stage.on(Laya.Event.RESIZE,e,e.__onResize),e}return __extends(e,t),Object.defineProperty(e,"getThis",{get:function(){return null==e._this&&(e._this=new e),e._this},enumerable:!0,configurable:!0}),e.prototype.convertColorToColorFiltersMatrix=function(t,a,i,n){return e.COLOR_FILTERS_MATRIX[0]=t,e.COLOR_FILTERS_MATRIX[6]=a,e.COLOR_FILTERS_MATRIX[12]=i,e.COLOR_FILTERS_MATRIX[18]=n||1,e.COLOR_FILTERS_MATRIX},e.prototype.applyColorFilters=function(t,e){t.filters=null,16777215!=e&&(t.filters=[new Laya.ColorFilter(this.convertColorToColorFiltersMatrix((e>>16&255)/255,(e>>8&255)/255,(255&e)/255))])},e.prototype.applyColorFilters1=function(t,e,a,i,n){t.filters=null,(e<1||a<1||i<1||n<1)&&(t.filters=[new Laya.ColorFilter(this.convertColorToColorFiltersMatrix(e,a,i,n))])},e.prototype.isPc=function(){return!(this.versions().android||this.versions().iPhone||this.versions().ios)&&(this.versions().iPad,!0)},e.prototype.versions=function(){var t=navigator.userAgent;navigator.appVersion;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/)||!!t.match(/AppleWebKit/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari")}},e.getUrlV=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return a?decodeURIComponent(a[2]):null},e.prototype.onNavigate=function(t,e){void 0===e&&(e=!1),e?window.location.replace(t):window.location.href=t},e.prototype.__onTouchDown=function(t){this._eventList.indexOf(t)<0&&this._eventList.push(t)},e.prototype.__onTouchUp=function(t){this._eventList.indexOf(t)>=0&&this._eventList.splice(this._eventList.indexOf(t),1)},e.prototype.__onResize=function(){this._eventList.forEach(function(t){t.type=Laya.Event.MOUSE_UP,Laya.stage.event(Laya.Event.MOUSE_UP,t)}),this._eventList=new Array},e.prototype.__OnMouseMOVE=function(t){(t.stageX<=10||t.stageX>=Laya.stage.width-10||t.stageY<=10||t.stageY>=Laya.stage.height-10)&&(t.type=Laya.Event.MOUSE_UP,Laya.stage.event(Laya.Event.MOUSE_UP,t))},e.onNumTo=function(t,e){return void 0===e&&(e=2),(t+"").indexOf(".")>=0&&(t=parseFloat(t.toFixed(e))),t},e.getR_XY=function(t,e){var a=e*Math.PI/180,i=t*Math.cos(a),n=t*Math.sin(a);return new Laya.Point(i,n)},e.string2buffer=function(t){for(var e="",a=0;a<t.length;a++)""===e?e=t.charCodeAt(a).toString(16):e+=","+t.charCodeAt(a).toString(16);return new Uint8Array(e.match(/[\da-f]{2}/gi).map(function(t){return parseInt(t,16)})).buffer},e.replaceAll=function(t,e,a){var i="";return(i=t.replace(e,a)).indexOf(e)>=0&&(i=this.replaceAll(i,e,a)),i},e.toCase=function(t,e){void 0===e&&(e=!1);return e?t.toUpperCase():t.toLowerCase()},e.getDistance=function(t,e){var a=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y),n=Math.sqrt(Math.pow(a,2)+Math.pow(i,2));return n=parseFloat(n.toFixed(2))},e.getXyToR=function(t,e){var a=Math.atan2(t,e),i=180/Math.PI*a;return i=this.onNumTo(i)},e.storage=function(t,e,a){void 0===e&&(e="?"),void 0===a&&(a=!0);var i=a?localStorage:sessionStorage;if("?"==e){return i.getItem(t)}return null!=e?(i.setItem(t,e),e):(i.removeItem(t),null)},e.playFuiSound=function(t,e,a,i,n){if(void 0===e&&(e=.2),void 0===i&&(i=0),void 0===n&&(n=1),!(e<=0)){var r=fairygui.UIPackage.getItemByURL(t).file;Laya.SoundManager.playSound(r,n,a,null,i),Laya.SoundManager.setSoundVolume(e,r)}},e.COLOR_FILTERS_MATRIX=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],e}(laya.events.EventDispatcher);a.WmyUtils=i},{}],4:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("./WmyUtils"),n=t("./d3/WmyLoad3d"),r=t("./d3/WmyLoadMats"),s=function(){function t(){this._wetData={},this.resUrl="",this._resDataArr=[],this._callbackOk=[],this._callbackProgress=[]}return Object.defineProperty(t,"getThis",{get:function(){return null==t._this&&(t._this=new t),t._this},enumerable:!0,configurable:!0}),t.prototype.getWetData=function(t){return this._wetData[t]},t.prototype.setWetData=function(t,e){if(""==this.resUrl){this.resUrl=e;try{JSON.parse(t)}catch(t){}}null==e&&(e=this.resUrl),this._wetData[e]=t},t.prototype.getResObj=function(t,e){var a;if(null==e&&(e=this.resUrl),null==(a=this.getWetData(e)))return console.log("空数据"),null;var i=null;if(a instanceof Array&&(i=a),null==i)try{i=JSON.parse(a)}catch(t){return console.log("加载材料数据错误",a),null}for(var n=null,r=0;r<i.length;r++){var s=i[r];if(s.resName==t){n=s;break}}return n},t.prototype.onLoadWetData=function(t,e){if(""!=t){if(null==this.getWetData(t)){return Laya.loader.load(t,new Laya.Handler(this,function(a){this.setWetData(a,t),e.runWith([this._wetData[t]])}))}e.runWith([this.getWetData(t)])}},t.prototype.onload=function(t,e,a){var n=t.resName;if(null!=this._resDataArr[n])this._resDataArr[n].runWith([this._resDataArr[n]]);else{if(null!=this._callbackOk[n])return this._callbackOk[n].push(e),void(null!=a&&this._callbackProgress[n].push(a));this._callbackOk[n]=[],this._callbackOk[n].push(e),this._callbackProgress[n]=[],null!=a&&this._callbackProgress[n].push(a);var r=t.Resres,s={},o=t.resData;if(null!=o&&""!=o)try{s=JSON.parse(o)}catch(t){console.log("加载材料数据错误",o)}for(var l,h=[],u=0;u<r.length;u++){var c=r[u].resUrl,_=c=i.WmyUtils.toCase(c);_.indexOf(".txt")>=0?(h.push({url:_,type:Laya.Loader.BUFFER}),l=c):_.indexOf(".jpg")>=0||_.indexOf(".png")>=0?h.push({url:_,type:Laya.Loader.IMAGE}):_.indexOf(".mp3")>=0||_.indexOf(".wav")>=0?h.push({url:_,type:Laya.Loader.SOUND}):h.push({url:_})}Laya.loader.load(h,Laya.Handler.create(this,this.onAssetConmplete,[n,l,s]),Laya.Handler.create(this,this.onAssetProgress,[n],!1))}},t.prototype.onload3d=function(t,e,a){var i=t.resName;if(null!=this._resDataArr[i])this._resDataArr[i].runWith([this._resDataArr[i]]);else{if(null!=this._callbackOk[i])return this._callbackOk[i].push(e),void(null!=a&&this._callbackProgress[i].push(a));this._callbackOk[i]=[],this._callbackOk[i].push(e),this._callbackProgress[i]=[],null!=a&&this._callbackProgress[i].push(a);var r=t.Resres,s={},o=t.resData;if(null!=o&&""!=o)try{s=JSON.parse(o)}catch(t){console.log("加载材料数据错误",o)}for(var l=[],h=[],u=0;u<r.length;u++){var c=r[u].resUrl,_=c;c.indexOf(".ls")>=0&&(l.push({url:_}),h.push(_))}s.urlList=h,n.WmyLoad3d.getThis.onload3d(l,Laya.Handler.create(this,this.onAssetConmplete,[i,void 0,s]),Laya.Handler.create(this,this.onAssetProgress,[i],!1))}},t.prototype.onAssetProgress=function(t,e){for(var a=this._callbackProgress[t],i=0;i<a.length;i++){a[i].runWith([e])}},t.prototype.onAssetConmplete=function(t,e,a){var i=this._callbackOk[t];if(null!=e){var n=Laya.loader.getRes(e),r=e.replace(".txt","");fairygui.UIPackage.addPackage(r,n);var s=r.split("/");a.bName=s[s.length-1],this._resDataArr[t]=a}for(var o=0;o<i.length;o++){i[o].runWith([a])}this._callbackOk[t]=null,this._callbackProgress[t]=null},t.prototype.onAutoLoadAll=function(t,e){var a=this.getWetData(this.resUrl);if(null==a)return console.log("空数据"),null;var i=null;if(a instanceof Array&&(i=a),null==i)try{i=JSON.parse(a)}catch(t){return console.log("加载材料数据错误",a),null}this._autoLoadrCallbackOk=t,this._autoLoadrCallbackProgress=e,this._autoLoadInfoArr={},this._autoLoadInfoArr.num=0,this._autoLoadInfoArr.cNum=0,this._autoLoadInfoArr.uiArr=[],this._autoLoadInfoArr.u3dArr=[];for(var n=0;n<i.length;n++){var r=i[n],s=r.resName,o=r.type;null!=s&&""!=s&&null!=o&&""!=o&&this.onAutoLoadObj(o,s)}},t.prototype.onAutoLoadObj=function(t,e){var a=this.getResObj(e);if(null!=a){var i=this._autoLoadInfoArr.num;if(this._autoLoadInfoArr[i]={},this._autoLoadInfoArr[i].n=e,this._autoLoadInfoArr[i].t=t,"ui"==t)this.onload(a,new Laya.Handler(this,this.onLoadOk,[i]),new Laya.Handler(this,this.onLoading,[i])),this._autoLoadInfoArr.num+=1;else if("mats"==t){for(var n=a.Resres,s=[],o=0;o<n.length;o++){var l=(u=n[o]).resUrl,h=l=Laya.ResourceVersion.addVersionPrefix(l);s.push(h)}r.WmyLoadMats.getThis.onload3d(s,new Laya.Handler(this,this.onLoadOk,[i]),new Laya.Handler(this,this.onLoading,[i])),this._autoLoadInfoArr.num+=1}else if("cubeMap"==t)for(var n=a.Resres,o=0;o<n.length;o++){var u=n[o],h=l=u.resUrl;Laya.TextureCube.load(h,null)}else"u3d"==t?(this.onload3d(a,new Laya.Handler(this,this.onLoadOk,[i]),new Laya.Handler(this,this.onLoading,[i])),this._autoLoadInfoArr.num+=1):"audio"==t&&(this.onload(a,new Laya.Handler(this,this.onLoadOk,[i]),new Laya.Handler(this,this.onLoading,[i])),this._autoLoadInfoArr.num+=1)}},t.prototype.getCube=function(t,e){var a=this.getResObj(t);if(null!=a){for(var i=a.Resres,n=[],r=0;r<i.length;r++){var s=i[r].resUrl,o=s=Laya.ResourceVersion.addVersionPrefix(s);Laya.TextureCube.load(o,new Laya.Handler(this,function(t){n[r]=t,e.runWith([t,r])}))}return n}},t.prototype.onLoading=function(t,e){this._autoLoadInfoArr[t].p=e;for(var a=this._autoLoadInfoArr.num,i=0,n=0;n<a;n++){var r=this._autoLoadInfoArr[n].p;null!=r&&(i+=r)}var s=i/this._autoLoadInfoArr.num*100;isNaN(s)&&(s=0),null!=this._autoLoadrCallbackProgress&&this._autoLoadrCallbackProgress.runWith([s])},t.prototype.onLoadOk=function(t,e){this._autoLoadInfoArr.cNum+=1,"ui"==this._autoLoadInfoArr[t].t?this._autoLoadInfoArr.uiArr.push(e):"u3d"==this._autoLoadInfoArr[t].t&&this._autoLoadInfoArr.u3dArr.push(e),this._autoLoadInfoArr.cNum>=this._autoLoadInfoArr.num&&null!=this._autoLoadrCallbackOk&&this._autoLoadrCallbackOk.runWith([this._autoLoadInfoArr.uiArr,this._autoLoadInfoArr.u3dArr])},t}();a.Wmy_Load_Mag=s},{"./WmyUtils":3,"./d3/WmyLoad3d":6,"./d3/WmyLoadMats":7}],5:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("../WmyUtils"),n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._aniName="",e}return __extends(e,t),Object.defineProperty(e,"Event_playComplete",{get:function(){return"WmyAnimator3d.playComplete"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Event_playEvent",{get:function(){return"WmyAnimator3d.playEvent"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Event_playQh",{get:function(){return"WmyAnimator3d.playQh"},enumerable:!0,configurable:!0}),e.prototype.onPlayQh=function(t){return this._playQh=t,this},Object.defineProperty(e.prototype,"mySprite3D",{get:function(){return this._mySprite3D},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controllerLaye",{get:function(){return this._controllerLaye},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playState",{get:function(){return this._playState},enumerable:!0,configurable:!0}),e.prototype._onAdded=function(){this._mySprite3D=this.owner,this._animator=this.mySprite3D.getComponent(Laya.Animator),this._controllerLaye=this._animator.getControllerLayer(),this._playState=this._animator.getCurrentAnimatorPlayState();var t=this._animator.getDefaultState();this.onAnimator(t.name)},Object.defineProperty(e.prototype,"aniName",{get:function(){return this._aniName},enumerable:!0,configurable:!0}),e.prototype.onAnimator=function(t,a,i,n,r){var s=this;if(void 0===a&&(a=!1),void 0===i&&(i=0),null!=this._animator&&(this._aniName!=t||a)){var o=this._aniName;if(this._aniName=t,""!=o&&""!=t&&t!=o){var l=[this.aniName,o];this.mySprite3D.event(e.Event_playQh,l),null!=this._playQh&&this._playQh.runWith(l),Laya.timer.clearAll(this)}return Laya.timer.once(i,this,function(){a?s._animator.play(t,0,0):s._animator.crossFade(t,.05);var e=s._controllerLaye._statesMap[t];s.onPlayCompleteEvent(e,n),s.onPlayEvent(e,r)}),this}},e.prototype.onPlayCompleteEvent=function(t,a){var i=this,n=t._clip.duration();n*=1/t.speed*1e3;var r=function(){var t=[i.aniName];i.mySprite3D.event(e.Event_playComplete,t),null!=a&&a.runWith([t])};t._clip.islooping?Laya.timer.loop(n,this,r):Laya.timer.once(n,this,r)},e.prototype.onPlayEvent=function(t,a){for(var n=this,r=1/t.speed*1e3,s=0;s<t._clip._events.length;s++){var o=t._clip._events[s],l=i.WmyUtils.onNumTo(o.time,2)*r,h=function(t){var i=[n.aniName,t];n.mySprite3D.event(e.Event_playEvent,i),null!=a&&a.runWith([i])};t._clip.islooping?Laya.timer.loop(l,this,h,[o]):Laya.timer.once(l,this,h,[o])}},e}(Laya.Script3D);a.WmyAnimator3d=n},{"../WmyUtils":3}],6:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(){this._mArr=[],this._mNum=0,this._mP=0,this._mP2=0}return Object.defineProperty(t,"getThis",{get:function(){return null==t._this&&(t._this=new t),t._this},enumerable:!0,configurable:!0}),t.prototype.onload3d=function(t,e,a){var i=this;this._urlList=[],this._callbackOk=e,this._callbackProgress=a;for(var n=0;n<t.length;n++){var r=t[n],s={};s.url=r.url,this._urlList.push(s),r.url=Laya.ResourceVersion.addVersionPrefix(r.url)}var o=0;Laya.loader.create(t,new Laya.Handler(null,function(){null!=i._callbackOk&&i._callbackOk.run()}),Laya.Handler.create(null,function(t){(o+=.01)>1&&(o=1),null!=i._callbackProgress&&i._callbackProgress.runWith([o])},null,!1))},t.prototype.__onlsUrlArrOk=function(t){for(s=0;s<t.length;s++){var e=t[s].url,a=e.split("/"),i=e.replace(a[a.length-1],""),n=Laya.loader.getRes(e),r=JSON.parse(n);this.__tiQuUrl(r.data,i)}for(var s=0;s<this._mArr.length;s++)e=this._mArr[s],Laya.loader.create(e,Laya.Handler.create(this,this.__onArrOk),Laya.Handler.create(this,this.__onArrP))},t.prototype.__onArrP=function(t){(e=t*(this._mNum+1))>this._mP&&(this._mP=e),this._mP2=this._mP/this._mArr.length;var e=.98*this._mP2;null!=this._callbackProgress&&this._callbackProgress.runWith([e])},t.prototype.__onArrOk=function(){var t=this;this._mNum+=1,this._mNum>=this._mArr.length&&Laya.loader.create(this._urlList,Laya.Handler.create(this,function(){null!=t._callbackOk&&t._callbackOk.run()}))},t.prototype.__tiQuUrl=function(t,e){if(void 0===e&&(e=""),null!=t.props&&null!=t.props.meshPath){var a=e+t.props.meshPath;this._mArr.indexOf(a)<0&&this._mArr.push(a);var i=t.props.materials;if(null!=i)for(var n=0;n<i.length;n++){var r=e+i[n].path;this._mArr.indexOf(r)<0&&this._mArr.push(r)}}if(null!=t.components){var s=t.components;if(s.length>0)for(var o=0;o<s.length;o++){var l=s[o];if(null!=l.avatar){var h=e+l.avatar.path;this._mArr.indexOf(h)<0&&this._mArr.push(h)}if(null!=l.layers)for(var u=l.layers,c=0;c<u.length;c++)for(var _=u[c].states,p=0;p<_.length;p++){var d=e+_[p].clipPath;this._mArr.indexOf(d)<0&&this._mArr.push(d)}}}var y=t.child;if(null!=y&&y.length>0)for(var f=0;f<y.length;f++)this.__tiQuUrl(y[f],e)},t}();a.WmyLoad3d=i},{}],7:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(){this._matsUrlArr=[],this._matOk=!1,this._matNum=0,this._matP=0,this._matP2=0}return Object.defineProperty(t,"getThis",{get:function(){return null==t._this&&(t._this=new t),t._this},enumerable:!0,configurable:!0}),t.prototype.onload3d=function(t,e,a){this._callbackOk=e,this._callbackProgress=a,Laya.loader.load(t,Laya.Handler.create(this,this.__onUrlArrOk,[t]))},t.prototype.__onUrlArrOk=function(t){for(h=0;h<t.length;h++)for(var e=t[h],a=Laya.loader.getRes(e),i=e.split("/"),n=e.replace(i[i.length-1],""),r=a.mats,s=0;s<r.length;s++){var o=r[s];if(""!=o.targetName){var l=n+o.matUrl;this._matsUrlArr.push(l)}}for(var h=0;h<this._matsUrlArr.length;h++)e=this._matsUrlArr[h],Laya.loader.create(e,Laya.Handler.create(this,this.__onMatArrOk),Laya.Handler.create(this,this.__onMatArrP))},t.prototype.__onMatArrP=function(t){var e=t*(this._matNum+1);e>this._matP&&(this._matP=e),this._matP2=this._matP/this._matsUrlArr.length,null!=this._callbackProgress&&this._callbackProgress.runWith([this._matP2])},t.prototype.__onMatArrOk=function(){this._matNum+=1,this._matNum>=this._matsUrlArr.length&&null!=this._callbackOk&&this._callbackOk.run()},t}();a.WmyLoadMats=i},{}],8:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveSpeed=.03,e.jumpSpeed=6,e.isU=!1,e.isD=!1,e.isL=!1,e.isR=!1,e.isLockMove=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"isGrounded",{get:function(){return null!=this.character&&this.character.isGrounded},enumerable:!0,configurable:!0}),e.prototype.onAwake=function(){this.mySprite3D=this.owner,this.scene3D=this.mySprite3D.scene;var t=this.mySprite3D.getComponent(Laya.PhysicsCollider);t.enabled=!1;var e=t.colliderShape;this.character=this.mySprite3D.addComponent(Laya.CharacterController);var a=new Laya.CapsuleColliderShape(e.radius,e.length,e.orientation);a.localOffset=e.localOffset,this.character.colliderShape=a,this.character.jumpSpeed=this.jumpSpeed,this.character.gravity=new Laya.Vector3(0,-14,0)},e.prototype.onUpdate=function(){var t=this.moveSpeed,e=new Laya.Vector3,a=this.character.isGrounded;this.isLockMove||(this.isU&&this.isD||a&&(this.isU?e.z=-t:this.isD&&(e.z=t)),this.isL&&this.isR||(this.isL?e.x=-t:this.isR&&(e.x=t)),this.character.move(e))},e.prototype.move=function(t,e){var a=this;void 0===e&&(e=0),this.isLockMove=!0,this.character.move(t),Laya.timer.once(1e3*e,this,function(){a.isLockMove=!1})},e}(Laya.Script);a.WmyPhysicsWorld_Character=i},{}],9:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(){}return t.setShader=function(t,e,a,i,n){void 0===i&&(i=!1);var r,s;s=t instanceof Laya.SkinnedMeshSprite3D?(r=t.skinnedMeshRenderer).sharedMaterial:(r=t.meshRenderer).sharedMaterial,i&&(s=s.clone(),r.sharedMaterial=s);for(var o in e)try{s[o]=e[o]}catch(t){}return Laya.loader.load(a,Laya.Handler.create(this,this.shaderConmplete,[s,n])),s},t.shaderConmplete=function(t,e,a){if(null!=a){var i=null;try{i=Laya.Utils.parseXMLFromString(a)}catch(t){return}var n,r,s,o,l,h,u=i.documentElement,c=this.getAttributesValue(u,"name"),_={},p=this.getNode(u,"attributeMap"),d=this.getNodeArr(p,"data");for(n=0;n<d.length;n++)r=d[n],s=this.getAttributesValue(r,"name"),o=this.getAttributesValue(r,"v0"),_[s]=this.getV(o,"int");var y={},f=this.getNode(u,"uniformMap"),m=this.getNodeArr(f,"data"),v=t.wmyValues;if(null!=v&&null!=v.cube){var g=v.cube;null!=e&&null!=e.cubeFun&&e.cubeFun(t,g)}for(n=0;n<m.length;n++){h=null,r=m[n],s=this.getAttributesValue(r,"name"),o=this.getAttributesValue(r,"v0"),l=this.getAttributesValue(r,"v1");var L=[];if(L[0]=this.getV(o,"int"),L[1]=this.getV(l,"int"),y[s]=L,null!=v&&(h=v[s]),null!=h)if(4==(h=h.split(",")).length)t._shaderValues.setVector(L[0],new Laya.Vector4(parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])));else if(3==h.length)t._shaderValues.setVector(L[0],new Laya.Vector3(parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])));else if(2==h.length)t._shaderValues.setVector(L[0],new Laya.Vector2(parseFloat(h[0]),parseFloat(h[1])));else if(1==h.length)if(isNaN(parseFloat(h[0]))){if("tex"==h[0]+""){var b=t[s];t._shaderValues.setTexture(L[0],b)}}else t._shaderValues.setNumber(L[0],parseFloat(h[0]))}var w=Laya.SkinnedMeshSprite3D.shaderDefines,O=Laya.BlinnPhongMaterial.shaderDefines;null!=e&&(null!=e.spriteDefines&&(w=e.spriteDefines),null!=e.materialDefines&&(O=e.materialDefines));var T=Laya.Shader3D.add(c,_,y,w,O),A=this.getNode(u,"SubShader"),P=this.getNode(u,"renderMode");if(null!=P){var M=this.getAttributesValue(P,"v");null!=M&&(t.renderMode=this.getV(M))}var k=this.getNodeArr(A,"Pass");for(n=0;n<k.length;n++){var W=k[n],E=this.getNode(W,"VERTEX").textContent;E=E.replace(/(\r)/g,"");var S=this.getNode(W,"FRAGMENT").textContent;if(S=S.replace(/(\r)/g,""),n>0){var C=t.getRenderState(0).clone();t._renderStates.push(C)}var x=this.getNode(W,"cull");if(null!=x){var D=this.getAttributesValue(x,"v");null!=D&&(t.getRenderState(n).cull=this.getV(D))}T.addShaderPass(E,S)}t._shader=T}},t.getV=function(t,e){void 0===e&&(e="null");var a,i,n;for("Laya"===(a=t.split("."))[0]?i=Laya:"laya"===a[0]&&(i=laya),n=1;n<a.length;n++)i=i[a[n]];return null!=i?i:"null"!=e?"int"==e?parseInt(t):t:null},t.colorStringToUint=function(t){return Number("0x"+t.replace("#",""))},t.getAttributesValue=function(t,e){for(var a=null,i=t.attributes,n=0;n<i.length;n++){var r=i[n];if(r.name==e){a=r.nodeValue;break}}return a},t.getNode=function(t,e){for(var a=t.childNodes,i=null,n=0;n<a.length;n++){var r=a[n];if(r.nodeName==e){i=r;break}}return i},t.getNodeArr=function(t,e){for(var a=t.childNodes,i=[],n=0;n<a.length;n++){var r=a[n];r.nodeName==e&&i.push(r)}return i},t}();a.WmyShaderMsg=i},{}],10:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("../Wmy_Load_Mag"),n=t("./WmyShaderMsg"),r=function(){function t(){}return t.getObj3d=function(t,e){if(null==t)return null;if(t.name==e)return t;for(var a=0;a<t._children.length;a++){var i=t._children[a];if(i._children.length<=0){if(i.name==e)return i}else{var n=this.getObj3d(i,e);if(null!=n)return n}}return null},t.getChildrenComponent=function(t,e,a){if(null==t)return null;null==a&&(a=[]);var i=t.getComponent(e);null==i&&t instanceof e&&(i=t),null!=i&&a.push(i);for(var n=0;n<t._children.length;n++){var r=t._children[n];this.getChildrenComponent(r,e,a)}return a},t.setShaderAll=function(e,a,r){var s=this,o=a+"wmyMats.json",l=r;Laya.loader.load(o,Laya.Handler.create(this,function(a,r,o){for(var l=o.mats,h=0;h<l.length;h++){var u=l[h];if(""!=u.targetName){var c=t.getObj3d(e,u.targetName);if(null!=c){var _=a+u.matUrl,p=r+u.shaderName+".txt";Laya.BaseMaterial.load(_,Laya.Handler.create(s,function(t,e,a){var r={};r.cubeFun=function(t,e){i.Wmy_Load_Mag.getThis.getCube(e,new Laya.Handler(s,function(e,a){0==a&&t._shaderValues.setTexture(Laya.Scene3D.REFLECTIONTEXTURE,e)}))},n.WmyShaderMsg.setShader(t,a,e,!1,r)},[c,p]))}}}},[a,l]),null,Laya.Loader.JSON)},t.aniPlay=function(t,e,a){var i=this.getObj3d(t,e).getComponent(Laya.Animator);return i.play(a),i},t.onShadow=function(t,e,a,i,n){void 0===e&&(e=512),void 0===a&&(a=1),void 0===i&&(i=100),void 0===n&&(n=!0),t.shadow=n,t.shadowDistance=i,t.shadowResolution=e,t.shadowPCFType=a},t.onCastShadow=function(t,e,a,i){if(void 0===e&&(e=0),void 0===a&&(a=!0),void 0===i&&(i=!0),t instanceof Laya.MeshSprite3D){var n=t;0==e?n.meshRenderer.receiveShadow=a:1==e?n.meshRenderer.castShadow=a:2==e&&(n.meshRenderer.receiveShadow=a,n.meshRenderer.castShadow=a)}if(t instanceof Laya.SkinnedMeshSprite3D){var r=t;0==e?r.skinnedMeshRenderer.receiveShadow=a:1==e&&(r.skinnedMeshRenderer.castShadow=a)}if(i)for(var s=0;s<t.numChildren;s++){var o=t.getChildAt(s);this.onCastShadow(o,e,a)}},t.rgb2hex=function(t,e,a){return("#"+this.hex(t)+this.hex(e)+this.hex(a)).toUpperCase()},t.hex=function(t){return t=this.onNumTo(t),("0"+parseInt(t).toString(16)).slice(-2)},t.onNumTo=function(t){return(t+"").indexOf(".")>=0&&(t=parseFloat(t.toFixed(2))),t},t.lerpF=function(t,e,a){return t+(e-t)*a},t}();a.WmyUtils3D=r},{"../Wmy_Load_Mag":4,"./WmyShaderMsg":9}],11:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("./WEaseType"),n=function(){function t(){}return t.evaluate=function(e,a,n,s,o){switch(e){case i.WEaseType.Linear:return a/n;case i.WEaseType.SineIn:return 1-Math.cos(a/n*t._PiOver2);case i.WEaseType.SineOut:return Math.sin(a/n*t._PiOver2);case i.WEaseType.SineInOut:return-.5*(Math.cos(Math.PI*a/n)-1);case i.WEaseType.QuadIn:return(a/=n)*a;case i.WEaseType.QuadOut:return-(a/=n)*(a-2);case i.WEaseType.QuadInOut:return(a/=.5*n)<1?.5*a*a:-.5*(--a*(a-2)-1);case i.WEaseType.CubicIn:return(a/=n)*a*a;case i.WEaseType.CubicOut:return(a=a/n-1)*a*a+1;case i.WEaseType.CubicInOut:return(a/=.5*n)<1?.5*a*a*a:.5*((a-=2)*a*a+2);case i.WEaseType.QuartIn:return(a/=n)*a*a*a;case i.WEaseType.QuartOut:return-((a=a/n-1)*a*a*a-1);case i.WEaseType.QuartInOut:return(a/=.5*n)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2);case i.WEaseType.QuintIn:return(a/=n)*a*a*a*a;case i.WEaseType.QuintOut:return(a=a/n-1)*a*a*a*a+1;case i.WEaseType.QuintInOut:return(a/=.5*n)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2);case i.WEaseType.ExpoIn:return 0==a?0:Math.pow(2,10*(a/n-1));case i.WEaseType.ExpoOut:return a==n?1:1-Math.pow(2,-10*a/n);case i.WEaseType.ExpoInOut:return 0==a?0:a==n?1:(a/=.5*n)<1?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*--a));case i.WEaseType.CircIn:return-(Math.sqrt(1-(a/=n)*a)-1);case i.WEaseType.CircOut:return Math.sqrt(1-(a=a/n-1)*a);case i.WEaseType.CircInOut:return(a/=.5*n)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1);case i.WEaseType.ElasticIn:var l;return 0==a?0:1==(a/=n)?1:(0==o&&(o=.3*n),s<1?(s=1,l=o/4):l=o/t._TwoPi*Math.asin(1/s),-s*Math.pow(2,10*(a-=1))*Math.sin((a*n-l)*t._TwoPi/o));case i.WEaseType.ElasticOut:var h;return 0==a?0:1==(a/=n)?1:(0==o&&(o=.3*n),s<1?(s=1,h=o/4):h=o/t._TwoPi*Math.asin(1/s),s*Math.pow(2,-10*a)*Math.sin((a*n-h)*t._TwoPi/o)+1);case i.WEaseType.ElasticInOut:var u;return 0==a?0:2==(a/=.5*n)?1:(0==o&&(o=n*(.3*1.5)),s<1?(s=1,u=o/4):u=o/t._TwoPi*Math.asin(1/s),a<1?s*Math.pow(2,10*(a-=1))*Math.sin((a*n-u)*t._TwoPi/o)*-.5:s*Math.pow(2,-10*(a-=1))*Math.sin((a*n-u)*t._TwoPi/o)*.5+1);case i.WEaseType.BackIn:return(a/=n)*a*((s+1)*a-s);case i.WEaseType.BackOut:return(a=a/n-1)*a*((s+1)*a+s)+1;case i.WEaseType.BackInOut:return(a/=.5*n)<1?a*a*((1+(s*=1.525))*a-s)*.5:.5*((a-=2)*a*((1+(s*=1.525))*a+s)+2);case i.WEaseType.BounceIn:return r.easeIn(a,n);case i.WEaseType.BounceOut:return r.easeOut(a,n);case i.WEaseType.BounceInOut:return r.easeInOut(a,n);default:return-(a/=n)*(a-2)}},t._PiOver2=.5*Math.PI,t._TwoPi=2*Math.PI,t}();a.WEaseManager=n;var r=function(){function t(){}return t.easeIn=function(e,a){return 1-t.easeOut(a-e,a)},t.easeOut=function(t,e){return(t/=e)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.easeInOut=function(e,a){return e<.5*a?.5*t.easeIn(2*e,a):.5*t.easeOut(2*e-a,a)+.5},t}();a.Bounce=r},{"./WEaseType":12}],12:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(){}return t.Linear=0,t.SineIn=1,t.SineOut=2,t.SineInOut=3,t.QuadIn=4,t.QuadOut=5,t.QuadInOut=6,t.CubicIn=7,t.CubicOut=8,t.CubicInOut=9,t.QuartIn=10,t.QuartOut=11,t.QuartInOut=12,t.QuintIn=13,t.QuintOut=14,t.QuintInOut=15,t.ExpoIn=16,t.ExpoOut=17,t.ExpoInOut=18,t.CircIn=19,t.CircOut=20,t.CircInOut=21,t.ElasticIn=22,t.ElasticOut=23,t.ElasticInOut=24,t.BackIn=25,t.BackOut=26,t.BackInOut=27,t.BounceIn=28,t.BounceOut=29,t.BounceInOut=30,t.Custom=31,t}();a.WEaseType=i},{}],13:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("./WTweenManager"),n=function(){function t(){}return t.to=function(t,e,a){return i.WTweenManager.createTween()._to(t,e,a)},t.to2=function(t,e,a,n,r){return i.WTweenManager.createTween()._to2(t,e,a,n,r)},t.to3=function(t,e,a,n,r,s,o){return i.WTweenManager.createTween()._to3(t,e,a,n,r,s,o)},t.to4=function(t,e,a,n,r,s,o,l,h){return i.WTweenManager.createTween()._to4(t,e,a,n,r,s,o,l,h)},t.toColor=function(t,e,a){return i.WTweenManager.createTween()._toColor(t,e,a)},t.delayedCall=function(t){return i.WTweenManager.createTween().setDelay(t)},t.shake=function(t,e,a,n){return i.WTweenManager.createTween()._shake(t,e,a,n)},t.isTweening=function(t,e){return i.WTweenManager.isTweening(t,e)},t.kill=function(t,e,a){void 0===e&&(e=!1),void 0===a&&(a=null),i.WTweenManager.killTweens(t,!1,null)},t.getTween=function(t,e){return void 0===e&&(e=null),i.WTweenManager.getTween(t,e)},t.catchCallbackExceptions=!0,t}();a.WTween=n},{"./WTweenManager":14}],14:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("./WTweener"),n=function(){function t(){}return t.createTween=function(){t._inited||(Laya.timer.frameLoop(1,null,this.update),t._inited=!0);var e;return(e=t._tweenerPool.length>0?t._tweenerPool.pop():new i.WTweener)._init(),t._activeTweens[t._totalActiveTweens++]=e,t._totalActiveTweens==t._activeTweens.length&&(t._activeTweens.length=t._activeTweens.length+Math.ceil(.5*t._activeTweens.length)),e},t.isTweening=function(e,a){if(null==e)return!1;for(var i=null==a,n=0;n<t._totalActiveTweens;n++){var r=t._activeTweens[n];if(null!=r&&r.target==e&&!r._killed&&(i||r._propType==a))return!0}return!1},t.killTweens=function(e,a,i){if(void 0===a&&(a=!1),void 0===i&&(i=null),null==e)return!1;for(var n=!1,r=t._totalActiveTweens,s=null==i,o=0;o<r;o++){var l=t._activeTweens[o];null==l||l.target!=e||l._killed||!s&&l._propType!=i||(l.kill(a),n=!0)}return n},t.getTween=function(e,a){if(null==e)return null;for(var i=t._totalActiveTweens,n=null==a,r=0;r<i;r++){var s=t._activeTweens[r];if(null!=s&&s.target==e&&!s._killed&&(n||s._propType==a))return s}return null},t.update=function(){for(var e=Laya.timer.delta/1e3,a=t._totalActiveTweens,i=-1,n=0;n<a;n++){var r=t._activeTweens[n];null==r?(-1==i&&(i=n),0):r._killed?(r._reset(),t._tweenerPool.push(r),t._activeTweens[n]=null,-1==i&&(i=n),0):(r._paused||r._update(e),-1!=i&&(t._activeTweens[i]=r,t._activeTweens[n]=null,i++))}if(i>=0){if(t._totalActiveTweens!=a){var s=a;for(a=t._totalActiveTweens-a,n=0;n<a;n++)t._activeTweens[i++]=t._activeTweens[s++]}t._totalActiveTweens=i}},t._activeTweens=new Array(30),t._tweenerPool=[],t._totalActiveTweens=0,t._inited=!1,t}();a.WTweenManager=n},{"./WTweener":16}],15:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(){this.x=this.y=this.z=this.w=0}return Object.defineProperty(t.prototype,"color",{get:function(){return(this.w<<24)+(this.x<<16)+(this.y<<8)+this.z},set:function(t){this.x=(16711680&t)>>16,this.y=(65280&t)>>8,this.z=255&t,this.w=(4278190080&t)>>24},enumerable:!0,configurable:!0}),t.prototype.getField=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("Index out of bounds: "+t)}},t.prototype.setField=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("Index out of bounds: "+t)}},t.prototype.setZero=function(){this.x=this.y=this.z=this.w=0},t}();a.WTweenValue=i},{}],16:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("./WTweenValue"),n=t("./WEaseType"),r=t("./WTween"),s=t("./WEaseManager"),o=function(){function t(){this._startValue=new i.WTweenValue,this._endValue=new i.WTweenValue,this._value=new i.WTweenValue,this._deltaValue=new i.WTweenValue,this._reset()}return t.prototype.setDelay=function(t){return this._delay=t,this},Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},enumerable:!0,configurable:!0}),t.prototype.setDuration=function(t){return this._duration=t,this},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),t.prototype.setBreakpoint=function(t){return this._breakpoint=t,this},t.prototype.setEase=function(t){return this._easeType=t,this},t.prototype.setEasePeriod=function(t){return this._easePeriod=t,this},t.prototype.setEaseOvershootOrAmplitude=function(t){return this._easeOvershootOrAmplitude=t,this},t.prototype.setRepeat=function(t,e){return void 0===e&&(e=!1),this._repeat=this.repeat,this._yoyo=e,this},Object.defineProperty(t.prototype,"repeat",{get:function(){return this._repeat},enumerable:!0,configurable:!0}),t.prototype.setTimeScale=function(t){return this._timeScale=t,this},t.prototype.setSnapping=function(t){return this._snapping=t,this},t.prototype.setTarget=function(t,e){return void 0===e&&(e=null),this._target=this.value,this._propType=e,this},Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),t.prototype.setUserData=function(t){return this._userData=this.value,this},Object.defineProperty(t.prototype,"userData",{get:function(){return this._userData},enumerable:!0,configurable:!0}),t.prototype.onUpdate=function(t,e){return this._onUpdate=t,this._onUpdateCaller=e,this},t.prototype.onStart=function(t,e){return this._onStart=t,this._onStartCaller=e,this},t.prototype.onComplete=function(t,e){return this._onComplete=t,this._onCompleteCaller=e,this},Object.defineProperty(t.prototype,"startValue",{get:function(){return this._startValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endValue",{get:function(){return this._endValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deltaValue",{get:function(){return this._deltaValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"normalizedTime",{get:function(){return this._normalizedTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"completed",{get:function(){return 0!=this._ended},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allCompleted",{get:function(){return 1==this._ended},enumerable:!0,configurable:!0}),t.prototype.setPaused=function(t){return this._paused=t,this},t.prototype.seek=function(t){if(!this._killed){if(this._elapsedTime=t,this._elapsedTime<this._delay){if(!this._started)return;this._elapsedTime=this._delay}this.update()}},t.prototype.kill=function(t){void 0===t&&(t=!1),this._killed||(t&&(0==this._ended&&(this._breakpoint>=0?this._elapsedTime=this._delay+this._breakpoint:this._repeat>=0?this._elapsedTime=this._delay+this._duration*(this._repeat+1):this._elapsedTime=this._delay+2*this._duration,this.update()),this.callCompleteCallback()),this._killed=!0)},t.prototype._to=function(t,e,a){return this._valueSize=1,this._startValue.x=t,this._endValue.x=e,this._duration=a,this},t.prototype._to2=function(t,e,a,i,n){return this._valueSize=2,this._startValue.x=t,this._endValue.x=a,this._startValue.y=e,this._endValue.y=i,this._duration=n,this},t.prototype._to3=function(t,e,a,i,n,r,s){return this._valueSize=3,this._startValue.x=t,this._endValue.x=i,this._startValue.y=e,this._endValue.y=n,this._startValue.z=a,this._endValue.z=r,this._duration=s,this},t.prototype._to4=function(t,e,a,i,n,r,s,o,l){return this._valueSize=4,this._startValue.x=t,this._endValue.x=n,this._startValue.y=e,this._endValue.y=r,this._startValue.z=a,this._endValue.z=s,this._startValue.w=i,this._endValue.w=o,this._duration=l,this},t.prototype._toColor=function(t,e,a){return this._valueSize=4,this._startValue.color=t,this._endValue.color=e,this._duration=a,this},t.prototype._shake=function(t,e,a,i){return this._valueSize=5,this._startValue.x=t,this._startValue.y=e,this._startValue.w=a,this._duration=i,this._easeType=n.WEaseType.Linear,this},t.prototype._init=function(){this._delay=0,this._duration=0,this._breakpoint=-1,this._easeType=n.WEaseType.QuadOut,this._timeScale=1,this._easePeriod=0,this._easeOvershootOrAmplitude=1.70158,this._snapping=!1,this._repeat=0,this._yoyo=!1,this._valueSize=0,this._started=!1,this._paused=!1,this._killed=!1,this._elapsedTime=0,this._normalizedTime=0,this._ended=0},t.prototype._reset=function(){this._target=null,this._userData=null,this._onStart=this._onUpdate=this._onComplete=null,this._onStartCaller=this._onUpdateCaller=this._onCompleteCaller=null},t.prototype._update=function(t){if(1!=this._timeScale&&(t*=this._timeScale),0!=t){if(0!=this._ended)return this.callCompleteCallback(),void(this._killed=!0);this._elapsedTime+=t,this.update(),0!=this._ended&&(this._killed||(this.callCompleteCallback(),this._killed=!0))}},t.prototype.update=function(t){if(null!=t){if(1!=this._timeScale&&(t*=this._timeScale),0==t)return;this._elapsedTime+=t}this._ended=0;var e=this._duration;if(0!=this._valueSize){if(!this._started){if(this._elapsedTime<this._delay)return;if(this._started=!0,this.callStartCallback(),this._killed)return}var a=!1,i=this._elapsedTime-this._delay;if(this._breakpoint>=0&&i>=this._breakpoint&&(i=this._breakpoint,this._ended=2),0!=this._repeat){var n=Math.floor(i/e);i-=e*n,this._yoyo&&(a=n%2==1),this._repeat>0&&this._repeat-n<0&&(this._yoyo&&(a=this._repeat%2==1),i=e,this._ended=1)}else i>=e&&(i=e,this._ended=1);if(this._normalizedTime=s.WEaseManager.evaluate(this._easeType,a?e-i:i,e,this._easeOvershootOrAmplitude,this._easePeriod),this._value.setZero(),this._deltaValue.setZero(),5==this._valueSize)if(0==this._ended){var r=this._startValue.w*(1-this._normalizedTime),o=(2*Math.random()-1)*r,l=(2*Math.random()-1)*r;o=o>0?Math.ceil(o):Math.floor(o),l=l>0?Math.ceil(l):Math.floor(l),this._deltaValue.x=o,this._deltaValue.y=l,this._value.x=this._startValue.x+o,this._value.y=this._startValue.y+l}else this._value.x=this._startValue.x,this._value.y=this._startValue.y;else for(var h=0;h<this._valueSize;h++){var u=this._startValue.getField(h),c=u+(this._endValue.getField(h)-u)*this._normalizedTime;this._snapping&&(c=Math.round(c)),this._deltaValue.setField(h,c-this._value.getField(h)),this._value.setField(h,c)}if(null!=this._target&&null!=this._propType)if(this._propType instanceof Function)switch(this._valueSize){case 1:this._propType.call(this._target,this._value.x);break;case 2:this._propType.call(this._target,this._value.x,this._value.y);break;case 3:this._propType.call(this._target,this._value.x,this._value.y,this._value.z);break;case 4:this._propType.call(this._target,this._value.x,this._value.y,this._value.z,this._value.w);break;case 5:this._propType.call(this._target,this._value.color);break;case 6:this._propType.call(this._target,this._value.x,this._value.y)}else if(this._propType instanceof Laya.Handler){var _=[];switch(this._valueSize){case 1:_=[this._target,this._value.x];break;case 2:_=[this._target,this._value.x,this._value.y];break;case 3:_=[this._target,this._value.x,this._value.y,this._value.z];break;case 4:_=[this._target,this._value.x,this._value.y,this._value.z,this._value.w];break;case 5:_=[this._target,this._value.color];break;case 6:_=[this._target,this._value.x,this._value.y]}this._propType.runWith(_)}else 5==this._valueSize?this._target[this._propType]=this._value.color:this._target[this._propType]=this._value.x;this.callUpdateCallback()}else this._elapsedTime>=this._delay+e&&(this._ended=1)},t.prototype.callStartCallback=function(){if(null!=this._onStart)if(r.WTween.catchCallbackExceptions)try{this._onStart.call(this._onStartCaller,this)}catch(t){}else this._onStart.call(this._onStartCaller,this)},t.prototype.callUpdateCallback=function(){if(null!=this._onUpdate)if(r.WTween.catchCallbackExceptions)try{this._onUpdate.call(this._onUpdateCaller,this)}catch(t){}else this._onUpdate.call(this._onUpdateCaller,this)},t.prototype.callCompleteCallback=function(){if(null!=this._onComplete)if(r.WTween.catchCallbackExceptions)try{this._onComplete.call(this._onCompleteCaller,this)}catch(t){}else this._onComplete.call(this._onCompleteCaller,this)},t}();a.WTweener=o},{"./WEaseManager":11,"./WEaseType":12,"./WTween":13,"./WTweenValue":15}],17:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("../wmyUtilsH5/d3/WmyAnimator3d"),n=t("../wmyUtilsH5/d3/WmyPhysicsWorld_Character"),r=t("./GameHit"),s=t("../wmyUtilsH5/d3/WmyUtils3D"),o=t("../wmyUtilsH5/wmyTween/WTweenManager"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._dir=1,e}return __extends(e,t),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:!0,configurable:!0}),e.prototype.onAwake=function(){this.mySprite3D=this.owner,this.scene3D=this.mySprite3D.scene,this._hitBox=this.mySprite3D.getChildByName("hitBox"),null!=this._hitBox&&(this._hit=this._hitBox.getChildByName("hit"),this._hit.addComponent(r.GameHit)),this._roleBox=this.mySprite3D.getChildByName("roleBox"),this._gfx=this._roleBox.getChildByName("GFX"),this._animator=this._gfx.addComponent(i.WmyAnimator3d),this._gfx.on(i.WmyAnimator3d.Event_playEvent,this,this.__onEvent_playEvent),this._character=this.mySprite3D.addComponent(n.WmyPhysicsWorld_Character);var t=s.WmyUtils3D.getObj3d(this.scene3D,"yy");this._yy=Laya.Sprite3D.instantiate(t,this.scene3D,!0,this.mySprite3D.transform.position),this._HitEffect=s.WmyUtils3D.getObj3d(this.scene3D,"HitEffect"),this._HitEffect.active=!1,this._DustEffectJump=s.WmyUtils3D.getObj3d(this.scene3D,"DustEffectJump"),this._DustEffectJump.active=!1,this._DustEffectLand=s.WmyUtils3D.getObj3d(this.scene3D,"DustEffectLand"),this._DustEffectLand.active=!1,this.onInit()},e.prototype.onInit=function(){},e.prototype.__onEvent_playEvent=function(t,e){null!=e&&("hit"==e.eventName&&(1==e.params[1]?null!=this._hitBox&&(this._hitBox.active=!0):null!=this._hitBox&&(this._hitBox.active=!1)),this.onEvent_playEvent(t,e))},e.prototype.onEvent_playEvent=function(t,e){},e.prototype.onUpdate=function(){if(null!=this._yy){var t=this.mySprite3D.transform.position;t.y=.01,this._yy.transform.position=t}},Object.defineProperty(e.prototype,"dir",{get:function(){return this._dir},enumerable:!0,configurable:!0}),e.prototype.onTweenMaxRotation=function(t,e){var a=this;if(void 0===t&&(t=1),void 0===e&&(e=.25),null!=this._roleBox&&this._dir!=t){this._dir=t;var i=1==t?0:-180;o.WTweenManager.killTweens(this);var n=o.WTweenManager.createTween();n.setTarget(this,Laya.Handler.create(this,function(t,e){a._roleBox.transform.localRotationEulerY=e},null,!1)),n._to(this._roleBox.transform.localRotationEulerY,i,e),null!=this._hitBox&&(this._hitBox.transform.localScaleX=t)}},e.prototype.onHit=function(t,e){void 0===e&&(e=.01);var a=t.dir;this.onTweenMaxRotation(-1*a,.2),this._character.move(new Laya.Vector3(e*a,0,0),.1);var i=this.mySprite3D.transform.position.clone();i.y+=1.5,i.z+=.2,this.onAddEffect(this._HitEffect,i,.5),this.onHitAim(t)},e.prototype.onHitAim=function(t){},e.prototype.onAddEffect=function(t,e,a){void 0===a&&(a=1);var i=Laya.Sprite3D.instantiate(t,this.scene3D);i.transform.position=e,i.transform.localScaleX=-1*this._dir,i.active=!0;for(var n=s.WmyUtils3D.getChildrenComponent(i,Laya.ShuriKenParticle3D),r=0;r<n.length;r++){n[r].particleSystem.play()}Laya.timer.once(1e3*a,this,function(){i.destroy(!0)})},e}(Laya.Script);a.BaseRoleKz=l},{"../wmyUtilsH5/d3/WmyAnimator3d":5,"../wmyUtilsH5/d3/WmyPhysicsWorld_Character":8,"../wmyUtilsH5/d3/WmyUtils3D":10,"../wmyUtilsH5/wmyTween/WTweenManager":14,"./GameHit":20}],18:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("./BaseRoleKz"),n=t("../wmyUtilsH5/WmyUtils"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hitAinNameId=0,e}return __extends(e,t),e.prototype.onInit=function(){this.onTweenMaxRotation(-1)},e.prototype.onHitAim=function(t){var e=this;this._hitAinNameId+=1,this._hitAinNameId<1&&(this._hitAinNameId=1),this._hitAinNameId>2&&(this._hitAinNameId=1);var a="Enemy1_Hit"+this._hitAinNameId;this._animator.onAnimator(a,!1,0,Laya.Handler.create(this,function(){e._animator.onAnimator("Enemy_Idle")})),n.WmyUtils.playFuiSound("ui://audio/PunchHit1")},e}(i.BaseRoleKz);a.EnemyKz=r},{"../wmyUtilsH5/WmyUtils":3,"./BaseRoleKz":17}],19:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("../wmyUtilsH5/wmyTween/WTweener"),n=t("../wmyUtilsH5/wmyTween/WEaseType"),r=function(t){function e(){var a=t.call(this)||this;return null==e._this&&(e._this=a),a}return __extends(e,t),Object.defineProperty(e,"getThis",{get:function(){return e._this},enumerable:!0,configurable:!0}),e.prototype.onAwake=function(){this.cam=this.owner,this.camBox=this.cam.parent,this.scene3D=this.cam.scene,this._camPos=this.cam.transform.position.clone(),this._tweener=new i.WTweener,this._tweener._init(),this._tweener.setTarget(this,Laya.Handler.create(this,this.onTweenUpdate,null,!1)),this._tweener.setEase(n.WEaseType.Linear)},e.prototype.onSetTarget=function(t){this._target=t},e.prototype.onUpdate=function(){if(null!=this._target){var t=this.cam.transform.position.clone(),e=this._target.transform.position.clone();e.y=this._target.transform.localPositionY+2.5,this._tweener._to2(t.x,t.y,e.x,e.y,60);var a=Laya.timer.delta/1e3;this._tweener.update(a)}},e.prototype.onTweenUpdate=function(t,e,a){var i=this.camBox.transform.position.clone();i.x=e,i.y=a,i.x<-11.5&&(i.x=-11.5),i.x>15&&(i.x=15),this.camBox.transform.position=i},e}(Laya.Script3D);a.GameCamera=r},{"../wmyUtilsH5/wmyTween/WEaseType":12,"../wmyUtilsH5/wmyTween/WTweener":16}],20:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("./BaseRoleKz"),n=function(t){function e(){var e=t.call(this)||this;return e._hitsObjArr=[],e}return __extends(e,t),Object.defineProperty(e,"Event_hit",{get:function(){return"GameHit.hit"},enumerable:!0,configurable:!0}),e.prototype.onAwake=function(){this.obj=this.owner,this.hitBox=this.obj.parent,this.hitBox.active=!1,this.myObj=this.getMyObj(this.obj,"hit_"),null!=this.myObj&&(this.baseRoleKz=this.myObj.getComponent(i.BaseRoleKz)),null==this.myObj&&(this.myObj=this.obj)},e.prototype.getMyObj=function(t,e){return null==t?null:t.name.indexOf(e)>=0?t:this.getMyObj(t.parent,e)},e.prototype.onUpdate=function(){},e.prototype.onTriggerEnter=function(t){if(this.hitBox.active){var a=t.owner;if(a.activeInHierarchy&&a!=this.myObj&&!(a.name.indexOf("hit_")<0||this._hitsObjArr.indexOf(a)>=0)){this._hitsObjArr.push(a);var n=a.getComponent(i.BaseRoleKz);if(null!=n&&null!=this.baseRoleKz){var r=[n];this.obj.event(e.Event_hit,r)}}}},e.prototype.onTriggerExit=function(t){},e.prototype.onDisable=function(){this._hitsObjArr=[]},e}(Laya.Script);a.GameHit=n},{"./BaseRoleKz":17}],21:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=t("./BaseRoleKz"),n=t("./GameHit"),r=t("../wmyUtilsH5/WmyUtils"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isLock=!1,e.keyArr={},e._jumpDown=!1,e._isCarom=!1,e._punchId=1,e._isAct=!1,e._jlNum=0,e._isLd=!1,e}return __extends(e,t),e.prototype.onInit=function(){this._hit.on(n.GameHit.Event_hit,this,this.oEvent_hit);this._animator.controllerLaye._statesMap.Walk.speed=1.2;this._animator.controllerLaye._statesMap.Punch1.speed=1.3;this._animator.controllerLaye._statesMap.Punch2.speed=1.2;this._animator.controllerLaye._statesMap.Punch3.speed=1;this._animator.controllerLaye._statesMap.JumpKick.speed=1.3},e.prototype.onKeyDown=function(t){var e=t.keyCode;this.keyArr[e]||(32==e&&(this._isLock||this.onJump()),74==e&&this.onPunch()),this.keyArr[e]||(this.keyArr[e]=!0)},e.prototype.onKeyUp=function(t){var e=t.keyCode;this.keyArr[e]&&(this.keyArr[e]=!1)},e.prototype.onJump=function(){var t=this;this._character.isGrounded&&(this._punchId=1,this._character.character.jump(),this._jumpDown=!1,this._animator.onAnimator("Jump1"),r.WmyUtils.playFuiSound("ui://audio/PlayerJump"),Laya.timer.once(550,this,function(){t._jumpDown=!0}),this.onAddEffect(this._DustEffectJump,this._yy.transform.position.clone()))},e.prototype.onPunch=function(){var t=this;if(!this._isAct||this._isCarom)if(this._character.isGrounded){r.WmyUtils.playFuiSound("ui://audio/Whoosh"),null==this.caromFun?this.caromFun=function(){t._isCarom=!1,t._punchId=1}:Laya.timer.clear(this,this.caromFun),this._isAct||this._isCarom||(this._punchId=1),this._isAct=!0,this._isLock=!0,this._isCarom=!1,null!=this._hitBox&&(this._hitBox.active=!1);var e=0;2==this._punchId&&(e=30),3==this._punchId&&(e=40),this._animator.onAnimator("Punch"+this._punchId,!0,e,Laya.Handler.create(this,function(){t._isAct=!1,t._isLock=!1;var e=50;2==t._punchId&&(e=120),3==t._punchId&&(e=150),Laya.timer.once(e,t,t.caromFun)}))}else"Jump1"==this._animator.aniName&&(r.WmyUtils.playFuiSound("ui://audio/Whoosh"),this._isAct=!0,this._animator.onAnimator("JumpKick"),Laya.timer.once(420,this,function(){t._isAct=!1}))},e.prototype.onEvent_playEvent=function(t,e){"carom"==e.eventName&&1==e.params[1]&&(this._isCarom=!0,"Punch1"==t?this._punchId=2:"Punch2"==t&&(this._punchId=3))},e.prototype.oEvent_hit=function(t){var e=.01;"Punch2"==this._animator.aniName?e=.02:"Punch3"==this._animator.aniName?e=.02:"JumpKick"==this._animator.aniName&&(e=.03),t.onHit(this,e)},e.prototype.onPreRender=function(){this._character.isL=Laya.KeyBoardManager.hasKeyDown(65),this._character.isR=Laya.KeyBoardManager.hasKeyDown(68),this._character.isU=Laya.KeyBoardManager.hasKeyDown(87),this._character.isD=Laya.KeyBoardManager.hasKeyDown(83),this._isLock&&(this._character.isL=!1,this._character.isR=!1,this._character.isU=!1,this._character.isD=!1),this._character.isL?this.onTweenMaxRotation(-1):this._character.isR&&this.onTweenMaxRotation(1),this._character.isGrounded?this._isAct||(this._character.isU||this._character.isD||this._character.isL||this._character.isR?this._animator.onAnimator("Walk"):this._animator.onAnimator("Idle")):(this._jumpDown&&!this._isAct&&(this._animator.onAnimator("Jump2"),this._jumpDown=!1),this.mySprite3D.transform.localPositionY<this._jlNum?!this._isLd&&this.mySprite3D.transform.localPositionY<.2&&(this._isLd=!0,this.onAddEffect(this._DustEffectLand,this._yy.transform.position.clone())):this.mySprite3D.transform.localPositionY>.2&&(this._isLd=!1),this._jlNum=this.mySprite3D.transform.localPositionY)},e}(i.BaseRoleKz);a.PlayerKz=s},{"../wmyUtilsH5/WmyUtils":3,"./BaseRoleKz":17,"./GameHit":20}]},{},[2]);