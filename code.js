var Laya=window.Laya=function(t){var e={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(t,i){return 1==arguments.length?e.__presubstr.call(this,t):e.__presubstr.call(this,t,i>0?i:this.length+i)},__init:function(t){t.forEach(function(t){t.__init$&&t.__init$()})},__isClass:function(t){return t&&(t.__isclass||t==Object||t==String||t==Array)},__newvec:function(t,e){var i=[];i.length=t;for(var n=0;t>n;n++)i[n]=e;return i},__extend:function(t,i){function n(){e.un(this,"constructor",t)}for(var s in i)if(i.hasOwnProperty(s)){var r=Object.getOwnPropertyDescriptor(i,s),o=r.get,a=r.set;o||a?o&&a?Object.defineProperty(t,s,r):(o&&Object.defineProperty(t,s,o),a&&Object.defineProperty(t,s,a)):t[s]=i[s]}n.prototype=i.prototype,t.prototype=new n,e.un(t.prototype,"__imps",e.__copy({},i.prototype.__imps))},__copy:function(t,e){if(!e)return null;t=t||{};for(var i in e)t[i]=e[i];return t},__package:function(i,n){if(!e.__packages[i]){e.__packages[i]=!0;var s=t,r=i.split(".");if(r.length>1)for(var o=0,a=r.length-1;a>o;o++){var h=s[r[o]];s=h?h:s[r[o]]={}}s[r[r.length-1]]||(s[r[r.length-1]]=n||{})}},__hasOwnProperty:function(t,e){function i(t,e){if(Object.hasOwnProperty.call(e.prototype,t))return!0;var n=e.prototype.__super;return null==n?null:i(t,n)}return e=e||this,Object.hasOwnProperty.call(e,t)||i(t,e.__class)},__typeof:function(t,e){if(!t||!e)return!1;if(e===String)return"string"==typeof t;if(e===Number)return"number"==typeof t;if(e.__interface__)e=e.__interface__;else if("string"!=typeof e)return t instanceof e;return t.__imps&&t.__imps[e]||t.__class==e},__as:function(t,e){return this.__typeof(t,e)?t:null},__int:function(t){return t?parseInt(t):0},"interface":function(i,n){e.__package(i,{});var s=e.__internals,r=s[i]=s[i]||{self:i};if(n){var o=n.split(",");r.extend=[];for(var a=0;a<o.length;a++){var h=o[a];s[h]=s[h]||{self:h},r.extend.push(s[h])}}for(var l=t,u=i.split("."),a=0;a<u.length-1;a++)l=l[u[a]];l[u[u.length-1]]={__interface__:i}},"class":function(i,n,s,r){if(s&&e.__extend(i,s),n)if(e.__package(n,i),e.__classmap[n]=i,n.indexOf(".")>0){if(0==n.indexOf("laya.")){var o=n.split(".");r=r||o[o.length-1],e[r]&&console.log("Warning!,this class["+r+"] already exist:",e[r]),e[r]=i}}else"Main"==n?t.Main=i:(e[n]&&console.log("Error!,this class["+n+"] already exist:",e[n]),e[n]=i);var a=e.un,h=i.prototype;a(h,"hasOwnProperty",e.__hasOwnProperty),a(h,"__class",i),a(h,"__super",s),a(h,"__className",n),a(i,"__super",s),a(i,"__className",n),a(i,"__isclass",!0),a(i,"super",function(t){this.__super.call(t)})},imps:function(t,i){function n(t){var i,r;if((i=e.__internals[t])&&(s[t]=!0,r=i.extend))for(var o=0;o<r.length;o++)n(r[o].self)}if(!i)return null;var s=t.__imps||e.un(t,"__imps",{});for(var r in i)n(r)},superSet:function(t,e,i,n){var s=t.prototype["_$set_"+i];s&&s.call(e,n)},superGet:function(t,e,i){var n=t.prototype["_$get_"+i];return n?n.call(e):null},getset:function(t,i,n,s,r){t?(s&&(i["_$GET_"+n]=s),r&&(i["_$SET_"+n]=r)):(s&&e.un(i,"_$get_"+n,s),r&&e.un(i,"_$set_"+n,r)),s&&r?Object.defineProperty(i,n,{get:s,set:r,enumerable:!1,configurable:!0}):(s&&Object.defineProperty(i,n,{get:s,enumerable:!1,configurable:!0}),r&&Object.defineProperty(i,n,{set:r,enumerable:!1,configurable:!0}))},"static":function(t,e){function i(){var i=e[n],s=e[n+1];Object.defineProperty(t,i,{get:function(){return delete this[i],this[i]=s.call(this)},set:function(t){delete this[i],this[i]=t},enumerable:!0,configurable:!0})}for(var n=0,s=e.length;s>n;n+=2)"length"==e[n]?t.length=e[n+1].call(t):i()},un:function(t,i,n){return n||(n=t[i]),e.__propun.value=n,Object.defineProperty(t,i,e.__propun),n},uns:function(t,i){i.forEach(function(i){e.un(t,i)})}};return t.console=t.console||{log:function(){}},t.trace=t.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),e}(window,document);!function(t,e,i){i.un,i.uns,i.static,i.class,i.getset,i.__newvec}(window,document,Laya),function(t,e,i){{var n=(i.un,i.uns,i.static),s=i.class,r=i.getset;i.__newvec}i.interface("laya.runtime.IMarket"),i.interface("laya.filters.IFilter"),i.interface("laya.resource.IDispose"),i.interface("laya.runtime.IPlatform"),i.interface("laya.resource.IDestroy"),i.interface("laya.resource.IListPool"),i.interface("laya.runtime.ICPlatformClass"),i.interface("laya.resource.ICreateResource"),i.interface("laya.runtime.IConchRenderObject"),i.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var o=(function(){return r(1,i,"alertGlobalError",null,function(t){var e=0;_e.window.onerror=t?function(t,i,n,s,r){e++<5&&r&&alert("出错啦，请把此信息截图给研发商\n"+t+"\n"+r.stack)}:null}),i.init=function(e,n){for(var s=[],r=2,o=arguments.length;o>r;r++)s.push(arguments[r]);if(!i._isinit){i._isinit=!0,ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=i._arrayBufferSlice);var a=t._layalibs;if(a){a.sort(function(t,e){return t.i>e.i});for(var h=0;h<a.length;h++)a[h].f(t,t.document,i)}t.navigator&&t.navigator.userAgent&&t.navigator.userAgent.indexOf("MiniGame")>-1&&(i.MiniAdpter?i.MiniAdpter.enable():console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")),_e.__init__(),he.isConchApp||ue.__init__(),i.timer=new Se,i.startTimer=new Se,i.physicsTimer=new Se,i.updateTimer=new Se,i.lateTimer=new Se,i.sceneTimer=new Se,i.loader=new Ne,De.__init__();for(var r=0,l=s.length;l>r;r++)s[r]&&s[r].enable&&s[r].enable();return t.conch&&Te.enableNative(),ce.__init__(),fe.beginCheck(),i._currentStage=i.stage=new Je,i._getUrlPath(),i.render=new he(0,0),i.stage.size(e,n),t.stage=i.stage,le.__init__(),V.__init__(),j.instance.__init__(i.stage,he.canvas),ni.__init__(),ne.autoStopMusic=!0,i.Physics&&i.Physics.enable(),he.canvas}},i._getUrlPath=function(){var t=_e.window.location,e=t.pathname;e=":"==e.charAt(2)?e.substring(1):e,ae.rootPath=ae.basePath=ae.getPath("file:"==t.protocol?e:t.protocol+"//"+t.host+t.pathname)},i._arrayBufferSlice=function(t,e){var i=this,n=new Uint8Array(i,t,e-t),s=new Uint8Array(n.length);return s.set(n),s.buffer},i._runScript=function(t){return _e.window[i._evcode](t)},i.enableDebugPanel=function(t){void 0===t&&(t="libs/laya.debugtool.js");var e=_e.createElement("script");e.onload=function(){i.DebugPanel.init()},e.src=t,_e.document.body.appendChild(e)},i.stage=null,i.timer=null,i.startTimer=null,i.physicsTimer=null,i.updateTimer=null,i.lateTimer=null,i.sceneTimer=null,i.loader=null,i.version="2.0.0beta",i.render=null,i._currentStage=null,i._isinit=!1,n(i,["conchMarket",function(){return this.conchMarket=t.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=t.PlatformClass},"_evcode",function(){return this._evcode="eval"}]),i}(),function(){function t(){}return s(t,"laya.renders.LayaGLQuickRunner"),t.__init__=function(){t.map[515]=t.alpha_transform_drawLayaGL,t.map[513]=t.alpha_drawLayaGL,t.map[514]=t.transform_drawLayaGL,t.map[8194]=t.transform_drawNodes,t.map[259]=t.alpha_transform_drawTexture,t.map[257]=t.alpha_drawTexture,t.map[258]=t.transform_drawTexture,t.map[8704]=t.drawLayaGL_drawNodes},t.transform_drawTexture=function(e,i,n,s){var r=(e._style,e.texture);i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,s),i.drawTexture(r,-e.pivotX,-e.pivotY,e._width||r.width,e._height||r.height),i.restoreTransform(t.curMat)},t.alpha_drawTexture=function(t,e,i,n){var s=t._style,r=0/0,o=t.texture;if((r=s.alpha)>.01||t._needRepaint()){var a=e.globalAlpha;e.globalAlpha*=r,e.drawTexture(o,i-s.pivotX,n-s.pivotY,t._width||o.width,t._height||o.height),e.globalAlpha=a}},t.alpha_transform_drawTexture=function(e,i,n,s){var r=e._style,o=0/0,a=e.texture;if((o=r.alpha)>.01||e._needRepaint()){var h=i.globalAlpha;i.globalAlpha*=o,i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,s),i.drawTexture(a,-r.pivotX,-r.pivotY,e._width||a.width,e._height||a.height),i.restoreTransform(t.curMat),i.globalAlpha=h}},t.alpha_transform_drawLayaGL=function(e,i,n,s){var r=e._style,o=0/0;if((o=r.alpha)>.01||e._needRepaint()){var a=i.globalAlpha;i.globalAlpha*=o,i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,s),e._graphics&&e._graphics._render(e,i,-r.pivotX,-r.pivotY),i.restoreTransform(t.curMat),i.globalAlpha=a}},t.alpha_drawLayaGL=function(t,e,i,n){var s=t._style,r=0/0;if((r=s.alpha)>.01||t._needRepaint()){var o=e.globalAlpha;e.globalAlpha*=r,t._graphics&&t._graphics._render(t,e,i-s.pivotX,n-s.pivotY),e.globalAlpha=o}},t.transform_drawLayaGL=function(e,i,n,s){var r=e._style;i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,s),e._graphics&&e._graphics._render(e,i,-r.pivotX,-r.pivotY),i.restoreTransform(t.curMat)},t.transform_drawNodes=function(e,i,n,s){var r=e._style;i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,s),n=-r.pivotX,s=-r.pivotY;var o,a=e._children,h=a.length;if(r.viewport){var l=r.viewport,u=l.x,c=l.y,_=l.right,d=l.bottom,f=0/0,p=0/0;for(g=0;h>g;++g)(o=a[g])._visible&&(f=o._x)<_&&f+o.width>u&&(p=o._y)<d&&p+o.height>c&&o.render(i,n,s)}else for(var g=0;h>g;++g)(o=a[g])._visible&&o.render(i,n,s);i.restoreTransform(t.curMat)},t.drawLayaGL_drawNodes=function(t,e,i,n){var s=t._style;i-=s.pivotX,n-=s.pivotY,t._graphics&&t._graphics._render(t,e,i,n);var r,o=t._children,a=o.length;if(s.viewport){var h=s.viewport,l=h.x,u=h.y,c=h.right,_=h.bottom,d=0/0,f=0/0;for(p=0;a>p;++p)(r=o[p])._visible&&(d=r._x)<c&&d+r.width>l&&(f=r._y)<_&&f+r.height>u&&r.render(e,i,n)}else for(var p=0;a>p;++p)(r=o[p])._visible&&r.render(e,i,n)},t.map={},n(t,["curMat",function(){return this.curMat=new te}]),t}()),a=function(){function t(e){if(this.arrColor=[],null==e)return this.strColor="#00000000",this.numColor=0,this.arrColor=[0,0,0,0],void 0;var i=0,n=0,s=0;if("string"==typeof e)if(e.indexOf("rgba(")>=0){var r=e,o=0,a=0;for(o=r.indexOf("("),a=r.indexOf(")"),r=r.substring(o+1,a),this.arrColor=r.split(","),n=this.arrColor.length,i=0;n>i;i++)this.arrColor[i]=parseFloat(this.arrColor[i]);s=256*(256*(256*this.arrColor[0]+this.arrColor[1])+this.arrColor[2])+Math.round(255*this.arrColor[3]),this.strColor=e}else{if(this.strColor=e,"#"===e.charAt(0)&&(e=e.substr(1)),n=e.length,3===n||4===n){var h="";for(i=0;n>i;i++)h+=e[i]+e[i];e=h}s=parseInt(e,16)}else s=e,this.strColor=Ie.toHexColor(s);this.strColor.indexOf("rgba")>=0||9===this.strColor.length?(this.arrColor=[((4278190080&s)>>>24)/255,((16711680&s)>>16)/255,((65280&s)>>8)/255,(255&s)/255],this.numColor=(4278190080&s)>>>24|(16711680&s)>>8|(65280&s)<<8|(255&s)<<24):(this.arrColor=[((16711680&s)>>16)/255,((65280&s)>>8)/255,(255&s)/255,1],this.numColor=4278190080|(16711680&s)>>16|65280&s|(255&s)<<16),this.arrColor.__id=++t._COLODID}return s(t,"laya.utils.ColorUtils"),t._initDefault=function(){t._DEFAULT={};for(var e in t._COLOR_MAP)t._SAVE[e]=t._DEFAULT[e]=new t(t._COLOR_MAP[e]);return t._DEFAULT},t._initSaveMap=function(){t._SAVE_SIZE=0,t._SAVE={};for(var e in t._DEFAULT)t._SAVE[e]=t._DEFAULT[e]},t.create=function(e){var i=e+"",n=t._SAVE[i];return null!=n?n:(t._SAVE_SIZE<1e3&&t._initSaveMap(),t._SAVE[i]=new t(e))},t._SAVE={},t._SAVE_SIZE=0,t._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#808080"},t._DEFAULT=t._initDefault(),t._COLODID=1,t}(),h=function(){function t(){}return s(t,"Config"),t.WebGLTextCacheCount=500,t.atlasEnable=!1,t.animationInterval=50,t.isAntialias=!1,t.isAlpha=!1,t.premultipliedAlpha=!0,t.isStencil=!0,t.preserveDrawingBuffer=!1,t.smartCache=!1,t.webGL2D_MeshAllocMaxMem=!0,t.useWebGL2=!1,t.showCanvasMark=!1,t}(),l=function(){function t(){this._id=Ie.getGID(),this._resetComp()}s(t,"laya.components.Component");var e=t.prototype;return i.imps(e,{"laya.resource.IListPool":!0,"laya.resource.IDestroy":!0}),e._resetComp=function(){this._destroyed=!1,this._indexInList=-1,this._enabled=!0,this._active=!1,this._awaked=!1,this.owner=null},e._getIndexInList=function(){return this._indexInList},e._setIndexInList=function(t){this._indexInList=t},e._onAdded=function(){},e._onAwake=function(){},e._onEnable=function(){},e._onDisable=function(){},e._onEnableInScene=function(){},e._onDisableInScene=function(){},e._onDestroy=function(){},e.onReset=function(){},e._parse=function(){},e._cloneTo=function(){},e._setActive=function(t){this._active!==t&&this.owner.activeInHierarchy&&(this._active=t,t?(this._awaked||(this._awaked=!0,this._onAwake()),this._enabled&&this._onEnable()):this._enabled&&this._onDisable())},e._setActiveInScene=function(t){t?this._onEnableInScene():this._onDisableInScene()},e.destroy=function(){this.owner&&this.owner._destroyComponent(this)},e._destroy=function(){this._active&&this._setActive(!1),this.owner._scene&&this._setActiveInScene(!1),this._onDestroy(),this._destroyed=!0,this.onReset!==laya.components.Component.prototype.onReset?(this.onReset(),this._resetComp(),we.recoverByClass(this)):this._resetComp()},r(0,e,"id",function(){return this._id}),r(0,e,"enabled",function(){return this._enabled},function(t){this._enabled=t,this.owner&&(t?this.owner.activeInHierarchy&&this._onEnable():this._active&&this._onDisable())}),r(0,e,"isSingleton",function(){return!0}),r(0,e,"destroyed",function(){return this._destroyed}),t}(),u=function(){function t(){this.json=null}s(t,"laya.components.Prefab");var e=t.prototype;return e.create=function(){return this.json?Ce.createByData(null,this.json):null},t}(),c=(function(){function t(){}return s(t,"laya.Const"),t.NOT_ACTIVE=1,t.ACTIVE_INHIERARCHY=2,t.AWAKED=4,t.NOT_READY=8,t.DISPLAY=16,t.HAS_ZORDER=32,t.HAS_MOUSE=64,t.DISPLAYED_INSTAGE=128,t}(),function(){function t(){this._$0__events=null}var e;s(t,"laya.events.EventDispatcher");var i=t.prototype;return i.hasListener=function(t){var e=this._$0__events&&this._$0__events[t];return!!e},i.event=function(t,e){if(!this._$0__events||!this._$0__events[t])return!1;var i=this._$0__events[t];if(i.run)i.once&&delete this._$0__events[t],null!=e?i.runWith(e):i.run();else{for(var n=0,s=i.length;s>n;n++){var r=i[n];r&&(null!=e?r.runWith(e):r.run()),(!r||r.once)&&(i.splice(n,1),n--,s--)}0===i.length&&this._$0__events&&delete this._$0__events[t]}return!0},i.on=function(t,e,i,n){return this._createListener(t,e,i,n,!1)},i.once=function(t,e,i,n){return this._createListener(t,e,i,n,!0)},i._createListener=function(t,i,n,s,r,o){void 0===o&&(o=!0),o&&this.off(t,i,n,r);var a=e.create(i||this,n,s,r);this._$0__events||(this._$0__events={});var h=this._$0__events;return h[t]?h[t].run?h[t]=[h[t],a]:h[t].push(a):h[t]=a,this},i.off=function(t,e,i,n){if(void 0===n&&(n=!1),!this._$0__events||!this._$0__events[t])return this;var s=this._$0__events[t];if(null!=i)if(s.run)e&&s.caller!==e||null!=i&&s.method!==i||n&&!s.once||(delete this._$0__events[t],s.recover());else{for(var r=0,o=0,a=s.length;a>o;o++){var h=s[o];h?!h||e&&h.caller!==e||null!=i&&h.method!==i||n&&!h.once||(r++,s[o]=null,h.recover()):r++}r===a&&delete this._$0__events[t]}return this},i.offAll=function(t){var e=this._$0__events;if(!e)return this;if(t)this._recoverHandlers(e[t]),delete e[t];else{for(var i in e)this._recoverHandlers(e[i]);this._$0__events=null}return this},i.offAllCaller=function(t){if(t&&this._$0__events)for(var e in this._$0__events)this.off(e,t,null);return this},i._recoverHandlers=function(t){if(t)if(t.run)t.recover();else for(var e=t.length-1;e>-1;e--)t[e]&&(t[e].recover(),t[e]=null)},i.isMouseEvent=function(e){return t.MOUSE_EVENTS[e]||!1},t.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},t.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0}),e=function(t){function e(t,i,n,s){e.__super.call(this,t,i,n,s)}s(e,"",t);var i=e.prototype;return i.recover=function(){this._id>0&&(this._id=0,e._pool.push(this.clear()))},e.create=function(t,i,n,s){return void 0===s&&(s=!0),e._pool.length?e._pool.pop().setTo(t,i,n,s):new e(t,i,n,s)},e._pool=[],e}(_)},t}()),_=function(){function t(t,e,i,n){this.once=!1,this._id=0,void 0===n&&(n=!1),this.setTo(t,e,i,n)}s(t,"laya.utils.Handler");var e=t.prototype;return e.setTo=function(e,i,n,s){return this._id=t._gid++,this.caller=e,this.method=i,this.args=n,this.once=s,this},e.run=function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e},e.runWith=function(t){if(null==this.method)return null;var e=this._id;if(null==t)var i=this.method.apply(this.caller,this.args);else i=this.args||t.unshift?this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t):this.method.call(this.caller,t);return this._id===e&&this.once&&this.recover(),i},e.clear=function(){return this.caller=null,this.method=null,this.args=null,this},e.recover=function(){this._id>0&&(this._id=0,t._pool.push(this.clear()))},t.create=function(e,i,n,s){return void 0===s&&(s=!0),t._pool.length?t._pool.pop().setTo(e,i,n,s):new t(e,i,n,s)},t._pool=[],t._gid=1,t}(),d=function(){function t(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}s(t,"laya.display.BitmapFont");var e=t.prototype;return e.loadFont=function(t,e){return this._path=t,this._complete=e,t&&-1!==t.indexOf(".fnt")?(i.loader.load([{url:t,type:"xml"},{url:t.replace(".fnt",".png"),type:"image"}],_.create(this,this._onLoaded)),void 0):(console.error('Bitmap font configuration information must be a ".fnt" file'),void 0)},e._onLoaded=function(){this.parseFont(ke.getRes(this._path),ke.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.run()},e.parseFont=function(t,e){if(null!=t&&null!=e){this._texture=e;var i=1,n=t.getElementsByTagName("info");if(!n[0].getAttributeNode)return this.parseFont2(t,e);this.fontSize=parseInt(n[0].getAttributeNode("size").nodeValue);var s=n[0].getAttributeNode("padding").nodeValue,r=s.split(",");this._padding=[parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];var o;o=t.getElementsByTagName("char");var a=0;for(a=0;a<o.length;a++){var h=o[a],l=parseInt(h.getAttributeNode("id").nodeValue),u=parseInt(h.getAttributeNode("xoffset").nodeValue)/i,c=parseInt(h.getAttributeNode("yoffset").nodeValue)/i,_=parseInt(h.getAttributeNode("xadvance").nodeValue)/i,d=new ie;d.x=parseInt(h.getAttributeNode("x").nodeValue),d.y=parseInt(h.getAttributeNode("y").nodeValue),d.width=parseInt(h.getAttributeNode("width").nodeValue),d.height=parseInt(h.getAttributeNode("height").nodeValue);var f=Ye.create(e,d.x,d.y,d.width,d.height,u,c);this._maxWidth=Math.max(this._maxWidth,_+this.letterSpacing),this._fontCharDic[l]=f,this._fontWidthMap[l]=_}}},e.parseFont2=function(t,e){if(null!=t&&null!=e){this._texture=e;var i=1,n=t.getElementsByTagName("info");this.fontSize=parseInt(n[0].attributes.size.nodeValue);var s=n[0].attributes.padding.nodeValue,r=s.split(",");this._padding=[parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];var o=t.getElementsByTagName("char"),a=0;for(a=0;a<o.length;a++){var h=o[a].attributes,l=parseInt(h.id.nodeValue),u=parseInt(h.xoffset.nodeValue)/i,c=parseInt(h.yoffset.nodeValue)/i,_=parseInt(h.xadvance.nodeValue)/i,d=new ie;d.x=parseInt(h.x.nodeValue),d.y=parseInt(h.y.nodeValue),d.width=parseInt(h.width.nodeValue),d.height=parseInt(h.height.nodeValue);var f=Ye.create(e,d.x,d.y,d.width,d.height,u,c);this._maxWidth=Math.max(this._maxWidth,_+this.letterSpacing),this._fontCharDic[l]=f,this._fontWidthMap[l]=_}}},e.getCharTexture=function(t){return this._fontCharDic[t.charCodeAt(0)]},e.destroy=function(){if(this._texture){for(var t in this._fontCharDic){var e=this._fontCharDic[t];e&&e.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null,this._complete=null,this._padding=null}},e.setSpaceWidth=function(t){this._spaceWidth=t},e.getCharWidth=function(t){var e=t.charCodeAt(0);return this._fontWidthMap[e]?this._fontWidthMap[e]+this.letterSpacing:" "===t?this._spaceWidth+this.letterSpacing:0},e.getTextWidth=function(t){for(var e=0,i=0,n=t.length;n>i;i++)e+=this.getCharWidth(t.charAt(i));return e},e.getMaxWidth=function(){return this._maxWidth},e.getMaxHeight=function(){return this.fontSize},e._drawText=function(t,e,i,n,s,r){var o,a=this.getTextWidth(t),h=0;"center"===s&&(h=(r-a)/2),"right"===s&&(h=r-a);for(var l=0,u=0,c=t.length;c>u;u++)o=this.getCharTexture(t.charAt(u)),o&&(e.graphics.drawImage(o,i+l+h,n),l+=this.getCharWidth(t.charAt(u)))},t}(),f=function(){function t(){}s(t,"laya.display.cmd.AlphaCmd");var e=t.prototype;return e.recover=function(){we.recover("AlphaCmd",this)},e.run=function(t){t.alpha(this.alpha)},r(0,e,"cmdID",function(){return"Alpha"}),t.create=function(e){var i=we.getItemByClass("AlphaCmd",t);return i.alpha=e,i},t.ID="Alpha",t}(),p=function(){function t(){}s(t,"laya.display.cmd.ClipRectCmd");var e=t.prototype;return e.recover=function(){we.recover("ClipRectCmd",this)},e.run=function(t,e,i){t.clipRect(this.x+e,this.y+i,this.width,this.height)},r(0,e,"cmdID",function(){return"ClipRect"}),t.create=function(e,i,n,s){var r=we.getItemByClass("ClipRectCmd",t);return r.x=e,r.y=i,r.width=n,r.height=s,r},t.ID="ClipRect",t}(),g=(function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this.texture=null,this.x=0/0,this.y=0/0,this.width=0/0,this.height=0/0}s(t,"laya.display.cmd.DrawCanvasCmd");var e=t.prototype;return e.recover=function(){this._graphicsCmdEncoder=null,we.recover("DrawCanvasCmd",this)},r(0,e,"cmdID",function(){return"DrawCanvasCmd"}),t.create=function(){return null},t.ID="DrawCanvasCmd",t._DRAW_IMAGE_CMD_ENCODER_=null,t._PARAM_TEXTURE_POS_=2,t._PARAM_VB_POS_=5,t}(),function(){function t(){}s(t,"laya.display.cmd.DrawCircleCmd");var e=t.prototype;return e.recover=function(){this.fillColor=null,this.lineColor=null,we.recover("DrawCircleCmd",this)},e.run=function(t,e,i){t._drawCircle(this.x+e,this.y+i,this.radius,this.fillColor,this.lineColor,this.lineWidth,this.vid)},r(0,e,"cmdID",function(){return"DrawCircle"}),t.create=function(e,i,n,s,r,o,a){var h=we.getItemByClass("DrawCircleCmd",t);return h.x=e,h.y=i,h.radius=n,h.fillColor=s,h.lineColor=r,h.lineWidth=o,h.vid=a,h},t.ID="DrawCircle",t}()),m=function(){function t(){}s(t,"laya.display.cmd.DrawCurvesCmd");var e=t.prototype;return e.recover=function(){this.points=null,this.lineColor=null,we.recover("DrawCurvesCmd",this)},e.run=function(t,e,i){t.drawCurves(this.x+e,this.y+i,this.points,this.lineColor,this.lineWidth)},r(0,e,"cmdID",function(){return"DrawCurves"}),t.create=function(e,i,n,s,r){var o=we.getItemByClass("DrawCurvesCmd",t);return o.x=e,o.y=i,o.points=n,o.lineColor=s,o.lineWidth=r,o},t.ID="DrawCurves",t}(),v=function(){function t(){}s(t,"laya.display.cmd.DrawImageCmd");var e=t.prototype;return e.recover=function(){this.texture=null,we.recover("DrawImageCmd",this)},e.run=function(t,e,i){t.drawTexture(this.texture,this.x+e,this.y+i,this.width,this.height)},r(0,e,"cmdID",function(){return"DrawImage"}),t.create=function(e,i,n,s,r){var o=we.getItemByClass("DrawImageCmd",t);return o.texture=e,o.x=i,o.y=n,o.width=s,o.height=r,o},t.ID="DrawImage",t}(),y=function(){function t(){}s(t,"laya.display.cmd.DrawLineCmd");var e=t.prototype;return e.recover=function(){we.recover("DrawLineCmd",this)},e.run=function(t,e,i){t._drawLine(e,i,this.fromX,this.fromY,this.toX,this.toY,this.lineColor,this.lineWidth,this.vid)},r(0,e,"cmdID",function(){return"DrawLine"}),t.create=function(e,i,n,s,r,o,a){var h=we.getItemByClass("DrawLineCmd",t);return h.fromX=e,h.fromY=i,h.toX=n,h.toY=s,h.lineColor=r,h.lineWidth=o,h.vid=a,h},t.ID="DrawLine",t}(),x=function(){function t(){}s(t,"laya.display.cmd.DrawLinesCmd");var e=t.prototype;return e.recover=function(){this.points=null,this.lineColor=null,we.recover("DrawLinesCmd",this)},e.run=function(t,e,i){t._drawLines(this.x+e,this.y+i,this.points,this.lineColor,this.lineWidth,this.vid)},r(0,e,"cmdID",function(){return"DrawLines"}),t.create=function(e,i,n,s,r,o){var a=we.getItemByClass("DrawLinesCmd",t);return a.x=e,a.y=i,a.points=n,a.lineColor=s,a.lineWidth=r,a.vid=o,a},t.ID="DrawLines",t}(),w=(function(){function t(){}s(t,"laya.display.cmd.DrawParticleCmd");var e=t.prototype;return e.recover=function(){this._templ=null,we.recover("DrawParticleCmd",this)},e.run=function(t,e,i){t.drawParticle(e,i,this._templ)},r(0,e,"cmdID",function(){return"DrawParticleCmd"}),t.create=function(e){var i=we.getItemByClass("DrawParticleCmd",t);return i._templ=e,i},t.ID="DrawParticleCmd",t}(),function(){function t(){}s(t,"laya.display.cmd.DrawPathCmd");var e=t.prototype;return e.recover=function(){this.paths=null,this.brush=null,this.pen=null,we.recover("DrawPathCmd",this)},e.run=function(t,e,i){t._drawPath(this.x+e,this.y+i,this.paths,this.brush,this.pen)},r(0,e,"cmdID",function(){return"DrawPath"}),t.create=function(e,i,n,s,r){var o=we.getItemByClass("DrawPathCmd",t);return o.x=e,o.y=i,o.paths=n,o.brush=s,o.pen=r,o},t.ID="DrawPath",t}()),T=function(){function t(){}s(t,"laya.display.cmd.DrawPieCmd");var e=t.prototype;return e.recover=function(){this.fillColor=null,this.lineColor=null,we.recover("DrawPieCmd",this)},e.run=function(t,e,i){t._drawPie(this.x+e,this.y+i,this.radius,this._startAngle,this._endAngle,this.fillColor,this.lineColor,this.lineWidth,this.vid)},r(0,e,"startAngle",function(){return 180*this._startAngle/Math.PI},function(t){this._startAngle=t*Math.PI/180}),r(0,e,"cmdID",function(){return"DrawPie"}),r(0,e,"endAngle",function(){return 180*this._endAngle/Math.PI},function(t){this._endAngle=t*Math.PI/180}),t.create=function(e,i,n,s,r,o,a,h,l){var u=we.getItemByClass("DrawPieCmd",t);return u.x=e,u.y=i,u.radius=n,u._startAngle=s,u._endAngle=r,u.fillColor=o,u.lineColor=a,u.lineWidth=h,u.vid=l,u},t.ID="DrawPie",t}(),C=function(){function t(){}s(t,"laya.display.cmd.DrawPolyCmd");var e=t.prototype;return e.recover=function(){this.points=null,this.fillColor=null,this.lineColor=null,we.recover("DrawPolyCmd",this)},e.run=function(t,e,i){t._drawPoly(this.x+e,this.y+i,this.points,this.fillColor,this.lineColor,this.lineWidth,this.isConvexPolygon,this.vid)},r(0,e,"cmdID",function(){return"DrawPoly"}),t.create=function(e,i,n,s,r,o,a,h){var l=we.getItemByClass("DrawPolyCmd",t);return l.x=e,l.y=i,l.points=n,l.fillColor=s,l.lineColor=r,l.lineWidth=o,l.isConvexPolygon=a,l.vid=h,l},t.ID="DrawPoly",t}(),b=function(){function t(){}s(t,"laya.display.cmd.DrawRectCmd");var e=t.prototype;return e.recover=function(){this.fillColor=null,this.lineColor=null,we.recover("DrawRectCmd",this)},e.run=function(t,e,i){t.drawRect(this.x+e,this.y+i,this.width,this.height,this.fillColor,this.lineColor,this.lineWidth)},r(0,e,"cmdID",function(){return"DrawRect"}),t.create=function(e,i,n,s,r,o,a){var h=we.getItemByClass("DrawRectCmd",t);return h.x=e,h.y=i,h.width=n,h.height=s,h.fillColor=r,h.lineColor=o,h.lineWidth=a,h},t.ID="DrawRect",t}(),S=function(){function t(){}s(t,"laya.display.cmd.DrawTextureCmd");var e=t.prototype;return e.recover=function(){this.texture=null,this.matrix=null,we.recover("DrawTextureCmd",this)},e.run=function(t,e,i){t.drawTextureWithTransform(this.texture,this.x,this.y,this.width,this.height,this.matrix,e,i,this.alpha,this.blendMode)},r(0,e,"cmdID",function(){return"DrawTexture"}),t.create=function(e,i,n,s,r,o,a,h,l){var u=we.getItemByClass("DrawTextureCmd",t);return u.texture=e,u.x=i,u.y=n,u.width=s,u.height=r,u.matrix=o,u.alpha=a,u.color=h,u.blendMode=l,u},t.ID="DrawTexture",t}(),M=function(){function t(){}s(t,"laya.display.cmd.DrawTexturesCmd");var e=t.prototype;return e.recover=function(){this.texture=null,this.pos=null,we.recover("DrawTexturesCmd",this)},e.run=function(t,e,i){t.drawTextures(this.texture,this.pos,e,i)},r(0,e,"cmdID",function(){return"DrawTextures"}),t.create=function(e,i){var n=we.getItemByClass("DrawTexturesCmd",t);return n.texture=e,n.pos=i,n},t.ID="DrawTextures",t}(),I=function(){function t(){}s(t,"laya.display.cmd.DrawTrianglesCmd");var e=t.prototype;return e.recover=function(){this.texture=null,this.vertices=null,this.uvs=null,this.indices=null,this.matrix=null,we.recover("DrawTrianglesCmd",this)},e.run=function(t,e,i){t.drawTriangles(this.texture,this.x+e,this.y+i,this.vertices,this.uvs,this.indices,this.matrix,this.alpha,this.color,this.blendMode)},r(0,e,"cmdID",function(){return"DrawTriangles"}),t.create=function(e,i,n,s,r,o,h,l,u,c){var _=we.getItemByClass("DrawTrianglesCmd",t);if(_.texture=e,_.x=i,_.y=n,_.vertices=s,_.uvs=r,_.indices=o,_.matrix=h,_.alpha=l,u){_.color=new He;var d=a.create(u).arrColor;_.color.color(d[0],d[1],d[2],d[3])}return _.blendMode=c,_},t.ID="DrawTriangles",t}(),P=function(){function t(){}s(t,"laya.display.cmd.FillBorderTextCmd");var e=t.prototype;return e.recover=function(){we.recover("FillBorderTextCmd",this)},e.run=function(t,e,i){t.fillBorderText(this.text,this.x+e,this.y+i,this.font,this.fillColor,this.borderColor,this.lineWidth,this.textAlign)},r(0,e,"cmdID",function(){return"FillBorderText"}),t.create=function(e,i,n,s,r,o,a,h){var l=we.getItemByClass("FillBorderTextCmd",t);return l.text=e,l.x=i,l.y=n,l.font=s,l.fillColor=r,l.borderColor=o,l.lineWidth=a,l.textAlign=h,l},t.ID="FillBorderText",t}(),D=function(){function t(){}s(t,"laya.display.cmd.FillBorderWordsCmd");var e=t.prototype;return e.recover=function(){this.words=null,we.recover("FillBorderWordsCmd",this)},e.run=function(t,e,i){t.fillBorderWords(this.words,this.x+e,this.y+i,this.font,this.fillColor,this.borderColor,this.lineWidth)},r(0,e,"cmdID",function(){return"FillBorderWords"}),t.create=function(e,i,n,s,r,o,a){var h=we.getItemByClass("FillBorderWordsCmd",t);return h.words=e,h.x=i,h.y=n,h.font=s,h.fillColor=r,h.borderColor=o,h.lineWidth=a,h},t.ID="FillBorderWords",t}(),A=function(){function t(){this._textIsWorldText=!1,this._fontColor=4294967295,this._strokeColor=0,this._nTexAlign=0,this._fontObj=t._defFontObj}s(t,"laya.display.cmd.FillTextCmd");var e=t.prototype;return e.recover=function(){we.recover("FillTextCmd",this)},e.run=function(t,e,i){this._textIsWorldText&&t._fast_filltext?t._fast_filltext(this._text,this.x+e,this.y+i,this._fontObj,this._fontColor,0,0,this._nTexAlign,0):t.drawText(this._text,this.x+e,this.y+i,this._font,this._color,this._textAlign)},r(0,e,"text",function(){return this._text},function(t){this._text=t,this._textIsWorldText=t instanceof laya.utils.WordText,this._textIsWorldText&&this._text.cleanCache()}),r(0,e,"cmdID",function(){return"FillText"}),r(0,e,"color",function(){return this._color},function(t){this._color=t,this._fontColor=a.create(t).numColor,this._textIsWorldText&&this._text.cleanCache()}),r(0,e,"font",function(){return this._font},function(t){this._font=t,(he.isWebGL||he.isConchApp)&&(this._fontObj=ve.Parse(t)),this._textIsWorldText&&this._text.cleanCache()}),r(0,e,"textAlign",function(){return this._textAlign},function(t){switch(this._textAlign=t,t){case"center":this._nTexAlign=ue.ENUM_TEXTALIGN_CENTER;break;case"right":this._nTexAlign=ue.ENUM_TEXTALIGN_RIGHT;break;default:this._nTexAlign=ue.ENUM_TEXTALIGN_DEFAULT}this._textIsWorldText&&this._text.cleanCache()}),t.create=function(e,i,n,s,r,o){var a=we.getItemByClass("FillTextCmd",t);return a.text=e,a._textIsWorldText=e instanceof laya.utils.WordText,a.x=i,a.y=n,a.font=s,a.color=r,a.textAlign=o,a},t.ID="FillText",n(t,["_defFontObj",function(){return this._defFontObj=new ve(null)}]),t}(),L=function(){function t(){}s(t,"laya.display.cmd.FillTextureCmd");var e=t.prototype;return e.recover=function(){this.texture=null,this.offset=null,this.other=null,we.recover("FillTextureCmd",this)},e.run=function(t,e,i){t.fillTexture(this.texture,this.x+e,this.y+i,this.width,this.height,this.type,this.offset,this.other)},r(0,e,"cmdID",function(){return"FillTexture"}),t.create=function(e,i,n,s,r,o,a,h){var l=we.getItemByClass("FillTextureCmd",t);
return l.texture=e,l.x=i,l.y=n,l.width=s,l.height=r,l.type=o,l.offset=a,l.other=h,l},t.ID="FillTexture",t}(),E=function(){function t(){}s(t,"laya.display.cmd.FillWordsCmd");var e=t.prototype;return e.recover=function(){this.words=null,we.recover("FillWordsCmd",this)},e.run=function(t,e,i){t.fillWords(this.words,this.x+e,this.y+i,this.font,this.color)},r(0,e,"cmdID",function(){return"FillWords"}),t.create=function(e,i,n,s,r){var o=we.getItemByClass("FillWordsCmd",t);return o.words=e,o.x=i,o.y=n,o.font=s,o.color=r,o},t.ID="FillWords",t}(),R=function(){function t(){}s(t,"laya.display.cmd.RestoreCmd");var e=t.prototype;return e.recover=function(){we.recover("RestoreCmd",this)},e.run=function(t){t.restore()},r(0,e,"cmdID",function(){return"Restore"}),t.create=function(){var e=we.getItemByClass("RestoreCmd",t);return e},t.ID="Restore",t}(),F=function(){function t(){}s(t,"laya.display.cmd.RotateCmd");var e=t.prototype;return e.recover=function(){we.recover("RotateCmd",this)},e.run=function(t,e,i){t._rotate(this.angle,this.pivotX+e,this.pivotY+i)},r(0,e,"cmdID",function(){return"Rotate"}),t.create=function(e,i,n){var s=we.getItemByClass("RotateCmd",t);return s.angle=e,s.pivotX=i,s.pivotY=n,s},t.ID="Rotate",t}(),O=function(){function t(){}s(t,"laya.display.cmd.SaveCmd");var e=t.prototype;return e.recover=function(){we.recover("SaveCmd",this)},e.run=function(t){t.save()},r(0,e,"cmdID",function(){return"Save"}),t.create=function(){var e=we.getItemByClass("SaveCmd",t);return e},t.ID="Save",t}(),B=function(){function t(){}s(t,"laya.display.cmd.ScaleCmd");var e=t.prototype;return e.recover=function(){we.recover("ScaleCmd",this)},e.run=function(t,e,i){t._scale(this.scaleX,this.scaleY,this.pivotX+e,this.pivotY+i)},r(0,e,"cmdID",function(){return"Scale"}),t.create=function(e,i,n,s){var r=we.getItemByClass("ScaleCmd",t);return r.scaleX=e,r.scaleY=i,r.pivotX=n,r.pivotY=s,r},t.ID="Scale",t}(),k=function(){function t(){}s(t,"laya.display.cmd.StrokeTextCmd");var e=t.prototype;return e.recover=function(){we.recover("StrokeTextCmd",this)},e.run=function(t,e,i){t.strokeWord(this.text,this.x+e,this.y+i,this.font,this.color,this.lineWidth,this.textAlign)},r(0,e,"cmdID",function(){return"StrokeText"}),t.create=function(e,i,n,s,r,o,a){var h=we.getItemByClass("StrokeTextCmd",t);return h.text=e,h.x=i,h.y=n,h.font=s,h.color=r,h.lineWidth=o,h.textAlign=a,h},t.ID="StrokeText",t}(),N=function(){function t(){}s(t,"laya.display.cmd.TransformCmd");var e=t.prototype;return e.recover=function(){this.matrix=null,we.recover("TransformCmd",this)},e.run=function(t,e,i){t._transform(this.matrix,this.pivotX+e,this.pivotY+i)},r(0,e,"cmdID",function(){return"Transform"}),t.create=function(e,i,n){var s=we.getItemByClass("TransformCmd",t);return s.matrix=e,s.pivotX=i,s.pivotY=n,s},t.ID="Transform",t}(),W=function(){function t(){}s(t,"laya.display.cmd.TranslateCmd");var e=t.prototype;return e.recover=function(){we.recover("TranslateCmd",this)},e.run=function(t){t.translate(this.tx,this.ty)},r(0,e,"cmdID",function(){return"Translate"}),t.create=function(e,i){var n=we.getItemByClass("TranslateCmd",t);return n.tx=e,n.ty=i,n},t.ID="Translate",t}(),U=function(){function t(){}s(t,"laya.display.css.BoundsStyle");var e=t.prototype;return e.reset=function(){return this.bounds&&this.bounds.recover(),this.userBounds&&this.userBounds.recover(),this.bounds=null,this.userBounds=null,this.temBM=null,this},e.recover=function(){we.recover("BoundsStyle",this.reset())},t.create=function(){return we.getItemByClass("BoundsStyle",t)},t}(),G=function(){function t(){this.reset()}s(t,"laya.display.css.CacheStyle");var e=t.prototype;return e.needBitmapCache=function(){return this.cacheForFilters||this.mask},e.needEnableCanvasRender=function(){return"none"!=this.userSetCache||this.cacheForFilters||this.mask},e.releaseContext=function(){this.canvas&&(we.recover("CacheCanvas",this.canvas),this.canvas.size(0,0),this.canvas=null)},e.createContext=function(){if(!this.canvas){this.canvas=we.getItem("CacheCanvas")||new ti(!he.isWebGL);var t=this.canvas.context;t||(t=this.canvas.getContext("2d"),t.__tx=0,t.__ty=0)}},e.releaseFilterCache=function(){var t=this.filterCache;t&&(t.destroy(),t.recycle(),this.filterCache=null)},e.recover=function(){this!==t.EMPTY&&we.recover("SpriteCache",this.reset())},e.reset=function(){return this.releaseContext(),this.releaseFilterCache(),this.cacheAs="none",this.enableCanvasRender=!1,this.userSetCache="none",this.cacheForFilters=!1,this.staticCache=!1,this.reCache=!0,this.mask=null,this.maskParent=null,this.filterCache=null,this.filters=null,this.hasGlowFilter=!1,this.cacheRect&&this.cacheRect.recover(),this.cacheRect=null,this},e._calculateCacheRect=function(e,n,s,r){var o=e._cacheStyle;o.cacheRect||(o.cacheRect=ie.create());var a;he.isWebGL&&"bitmap"!==n?o.cacheRect.setTo(-e._style.pivotX,-e._style.pivotY,1,1):(a=e.getSelfBounds(),a.x=a.x-e.pivotX,a.y=a.y-e.pivotY,a.x=a.x-16,a.y=a.y-16,a.width=a.width+32,a.height=a.height+32,a.x=Math.floor(a.x+s)-s,a.y=Math.floor(a.y+r)-r,a.width=Math.floor(a.width),a.height=Math.floor(a.height),o.cacheRect.copyFrom(a)),a=o.cacheRect;var h=he.isWebGL?1:_e.pixelRatio*i.stage.clientScaleX,l=he.isWebGL?1:_e.pixelRatio*i.stage.clientScaleY;if(!he.isWebGL){var u,c=1,_=1;for(u=e;u&&u!=i.stage;)c*=u.scaleX,_*=u.scaleY,u=u.parent;c>1&&(h*=c),_>1&&(l*=_)}if(e._style.scrollRect){var d=e._style.scrollRect;a.x-=d.x,a.y-=d.y}return t._scaleInfo.setTo(h,l),t._scaleInfo},t.create=function(){return we.getItemByClass("SpriteCache",t)},t.EMPTY=new t,t.CANVAS_EXTEND_EDGE=16,n(t,["_scaleInfo",function(){return this._scaleInfo=new ee}]),t}(),Y=function(){function t(){this.reset()}s(t,"laya.display.css.SpriteStyle");var e=t.prototype;return e.reset=function(){return this.scaleX=this.scaleY=1,this.skewX=this.skewY=0,this.pivotX=this.pivotY=this.rotation=0,this.alpha=1,this.scrollRect&&this.scrollRect.recover(),this.scrollRect=null,this.viewport&&this.viewport.recover(),this.viewport=null,this.hitArea=null,this.dragging=null,this.blendMode=null,this},e.recover=function(){this!==t.EMPTY&&we.recover("SpriteStyle",this.reset())},t.create=function(){return we.getItemByClass("SpriteStyle",t)},t.EMPTY=new t,t}(),H=function(){function t(){this._one=null,this._cmds=null,this._render=this._renderEmpty,this._createData()}s(t,"laya.display.Graphics");var e=t.prototype;return e._createData=function(){},e._clearData=function(){},e._destroyData=function(){},e.destroy=function(){this.clear(!0),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0,this._sp._setRenderType(0),this._sp=null),this._destroyData()},e.clear=function(t){if(void 0===t&&(t=!0),t){var e=this._one;if(this._cmds){var i=0,n=this._cmds.length;for(i=0;n>i;i++)e=this._cmds[i],e.recover();this._cmds.length=0}else e&&e.recover()}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._clearData(),this._sp&&(this._sp._renderType&=-513,this._sp._setRenderType(this._sp._renderType)),this._repaint(),this._vectorgraphArray){for(i=0,n=this._vectorgraphArray.length;n>i;i++)Pe.getInstance().deleteShape(this._vectorgraphArray[i]);this._vectorgraphArray.length=0}},e._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},e._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=X.create(),this._graphicBounds._graphics=this)},e._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},e._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},e.getBounds=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(t)},e.getBoundPoints=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(t)},e.drawImage=function(t,e,i,n,s){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),!t)return null;if(n||(n=t.sourceWidth),s||(s=t.sourceHeight),t.loaded){var r=n/t.sourceWidth,o=s/t.sourceHeight;if(n=t.width*r,s=t.height*o,0>=n||0>=s)return null;e+=t.offsetX*r,i+=t.offsetY*o}this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType));var a=v.create.call(this,t,e,i,n,s);return null==this._one?(this._one=a,this._render=this._renderOneImg):this._saveToCmd(null,a),this._repaint(),a},e.drawTexture=function(t,e,i,n,s,r,o,h,l){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=1),!t||.01>o)return null;if(!t.loaded)return null;if(n||(n=t.sourceWidth),s||(s=t.sourceHeight),t.loaded){var u=!he.isWebGL&&(_e.onFirefox||_e.onEdge||_e.onIE||_e.onSafari)?.5:0,c=n/t.sourceWidth,_=s/t.sourceHeight;if(n=t.width*c,s=t.height*_,0>=n||0>=s)return null;e+=t.offsetX*c,i+=t.offsetY*_,e-=u,i-=u,n+=2*u,s+=2*u}if(this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType)),!he.isConchApp&&!he.isWebGL&&(l||h)){var d=new ti;d.size(n,s);var f=d.getContext("2d");if(f.drawTexture(t,0,0,n,s),t=new Ye(d),h){var p=new q,g=a.create(h).arrColor;p.data=(new He).color(255*g[0],255*g[1],255*g[2]),p.apply({ctx:{ctx:f}})}}var m=S.create.call(this,t,e,i,n,s,r,o,h,l);return this._repaint(),this._saveToCmd(null,m)},e.cleanByTexture=function(t,e,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=0),!t)return this.clear(!0);if(this._one&&this._render===this._renderOneImg){n||(n=t.sourceWidth),s||(s=t.sourceHeight);var r=n/t.sourceWidth,o=s/t.sourceHeight;n=t.width*r,s=t.height*o,e+=t.offsetX*r,i+=t.offsetY*o;var a=this._one;a.texture=t,a.x=e,a.y=i,a.width=n,a.height=s,this._repaint()}else this.clear(!0),t&&this.drawImage(t,e,i,n,s)},e.drawTextures=function(t,e){return t?this._saveToCmd(he._context._drawTextures,M.create.call(this,t,e)):null},e.drawTriangles=function(t,e,i,n,s,r,o,a,h,l){return void 0===a&&(a=1),this._saveToCmd(he._context.drawTriangles,I.create.call(this,t,e,i,n,s,r,o,a,h,l))},e.fillTexture=function(t,e,i,n,s,r,o){return void 0===n&&(n=0),void 0===s&&(s=0),void 0===r&&(r="repeat"),t&&t.loaded?this._saveToCmd(he._context._fillTexture,L.create.call(this,t,e,i,n,s,r,o||ee.EMPTY,{})):null},e._saveToCmd=function(t,e){return this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType)),null==this._one?(this._one=e,this._render=this._renderOne):(this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(e)),this._repaint(),e},e.clipRect=function(t,e,i,n){return this._saveToCmd(he._context._clipRect,p.create.call(this,t,e,i,n))},e.fillText=function(t,e,i,n,s,r){return this._saveToCmd(he._context._fillText,A.create.call(this,t,e,i,n||qe.defaultFontStr(),s,r))},e.fillBorderText=function(t,e,i,n,s,r,o,a){return this._saveToCmd(he._context._fillBorderText,P.create.call(this,t,e,i,n||qe.defaultFontStr(),s,r,o,a))},e.fillWords=function(t,e,i,n,s){return this._saveToCmd(he._context._fillWords,E.create.call(this,t,e,i,n||qe.defaultFontStr(),s))},e.fillBorderWords=function(t,e,i,n,s,r,o){return this._saveToCmd(he._context._fillBorderWords,D.create.call(this,t,e,i,n||qe.defaultFontStr(),s,r,o))},e.strokeText=function(t,e,i,n,s,r,o){return this._saveToCmd(he._context._strokeText,k.create.call(this,t,e,i,n||qe.defaultFontStr(),s,r,o))},e.alpha=function(t){return this._saveToCmd(he._context._alpha,f.create.call(this,t))},e.transform=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(he._context._transform,N.create.call(this,t,e,i))},e.rotate=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(he._context._rotate,F.create.call(this,t,e,i))},e.scale=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this._saveToCmd(he._context._scale,B.create.call(this,t,e,i,n))},e.translate=function(t,e){return this._saveToCmd(he._context._translate,W.create.call(this,t,e))},e.save=function(){return this._saveToCmd(he._context._save,O.create.call(this))},e.restore=function(){return this._saveToCmd(he._context._restore,R.create.call(this))},e.replaceText=function(t){this._repaint();var e=this._cmds;if(e){for(var i=e.length-1;i>-1;i--)if(this._isTextCmd(e[i]))return e[i].text=t,!0}else if(this._one&&this._isTextCmd(this._one))return this._one.text=t,!0;return!1},e._isTextCmd=function(t){var e=t.cmdID;return"FillText"==e||"StrokeText"==e||"FillBorderText"==e},e.replaceTextColor=function(t){this._repaint();var e=this._cmds;if(e)for(var i=e.length-1;i>-1;i--)this._isTextCmd(e[i])&&this._setTextCmdColor(e[i],t);else this._one&&this._isTextCmd(this._one)&&this._setTextCmdColor(this._one,t)},e._setTextCmdColor=function(t,e){var i=t.cmdID;switch(i){case"FillText":case"StrokeText":t.color=e;break;case"FillBorderText":case"FillBorderWords":case"FillBorderText":t.fillColor=e}},e.loadImage=function(t,e,i,n,s,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0);var o=ke.getRes(t);o?o.loaded?this.drawImage(o,e,i,n,s):o.once("loaded",this,this.drawImage,[o,e,i,n,s]):(o=new Ye,o.load(t),ke.cacheRes(t,o),o.once("loaded",this,this.drawImage,[o,e,i,n,s])),null!=r&&(o._loaded?r.call(this._sp):o.on("loaded",this._sp,r))},e._renderEmpty=function(){},e._renderAll=function(t,e,i,n){for(var s,r=this._cmds,o=0,a=r.length;a>o;o++)(s=r[o]).run(e,i,n)},e._renderOne=function(t,e,i,n){this._one.run(e,i,n)},e._renderOneImg=function(t,e,i,n){this._one.run(e,i,n)},e.drawLine=function(t,e,i,n,s,r){void 0===r&&(r=1);var o=0;he.isWebGL&&(o=Pe.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(o));var a=r%2===0?0:.5;return this._saveToCmd(he._context._drawLine,y.create.call(this,t+a,e+a,i+a,n+a,s,r,o))},e.drawLines=function(t,e,i,n,s){void 0===s&&(s=1);var r=0;if(!i||i.length<4)return null;he.isWebGL&&(r=Pe.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(r));var o=s%2===0?0:.5;return this._saveToCmd(he._context._drawLines,x.create.call(this,t+o,e+o,i,n,s,r))},e.drawCurves=function(t,e,i,n,s){return void 0===s&&(s=1),this._saveToCmd(he._context._drawCurves,m.create.call(this,t,e,i,n,s))},e.drawRect=function(t,e,i,n,s,r,o){void 0===o&&(o=1);var a=r?o/2:0,h=r?o:0;return this._saveToCmd(he._context.drawRect,b.create.call(this,t+a,e+a,i-h,n-h,s,r,o))},e.drawCircle=function(t,e,i,n,s,r){void 0===r&&(r=1);var o=s?r/2:0,a=0;return he.isWebGL&&(a=Pe.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a)),this._saveToCmd(he._context._drawCircle,g.create.call(this,t,e,i-o,n,s,r,a))},e.drawPie=function(t,e,i,n,s,r,o,a){void 0===a&&(a=1);var h=o?a/2:0,l=o?a:0,u=0;return he.isWebGL&&(u=Pe.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(u)),this._saveToCmd(he._context._drawPie,T.create.call(this,t+h,e+h,i-l,Ie.toRadian(n),Ie.toRadian(s),r,o,a,u))},e.drawPoly=function(t,e,i,n,s,r){void 0===r&&(r=1);var o=0;if(he.isWebGL){o=Pe.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(o);var a=!1;a=i.length>6?!1:!0}var h=s?r%2===0?0:.5:0;return this._saveToCmd(he._context._drawPoly,C.create.call(this,t+h,e+h,i,n,s,r,a,o))},e.drawPath=function(t,e,i,n,s){return this._saveToCmd(he._context._drawPath,w.create.call(this,t,e,i,n,s))},r(0,e,"cmds",function(){return this._cmds},function(t){this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType)),this._cmds=t,this._render=this._renderAll,this._repaint()}),t}(),X=function(){function t(){this._cacheBoundsType=!1}s(t,"laya.display.GraphicsBounds");var e=t.prototype;return e.destroy=function(){this._graphics=null,this._cacheBoundsType=!1,this._temp&&(this._temp.length=0),this._rstBoundPoints&&(this._rstBoundPoints.length=0),this._bounds&&this._bounds.recover(),this._bounds=null,we.recover("GraphicsBounds",this)},e.reset=function(){this._temp&&(this._temp.length=0)},e.getBounds=function(t){return void 0===t&&(t=!1),(!this._bounds||!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._bounds=ie._getWrapRec(this.getBoundPoints(t),this._bounds)),this._cacheBoundsType=t,this._bounds},e.getBoundPoints=function(t){return void 0===t&&(t=!1),(!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(t)),this._cacheBoundsType=t,this._rstBoundPoints=Ie.copyArray(this._rstBoundPoints,this._temp)},e._getCmdPoints=function(e){void 0===e&&(e=!1);var i,n=(he._context,this._graphics.cmds);if(i=this._temp||(this._temp=[]),i.length=0,n||null==this._graphics._one||(t._tempCmds.length=0,t._tempCmds.push(this._graphics._one),n=t._tempCmds),!n)return i;var s=t._tempMatrixArrays;s.length=0;var r=t._initMatrix;r.identity();for(var o,a,h=t._tempMatrix,l=0,u=n.length;u>l;l++)switch(o=n[l],o.cmdID){case"Alpha":s.push(r),r=r.clone();break;case"Restore":r=s.pop();break;case"Scale":h.identity(),h.translate(-o.pivotX,-o.pivotY),h.scale(o.scaleX,o.scaleY),h.translate(o.pivotX,o.pivotY),this._switchMatrix(r,h);break;case"Rotate":h.identity(),h.translate(-o.pivotX,-o.pivotY),h.rotate(o.angle),h.translate(o.pivotX,o.pivotY),this._switchMatrix(r,h);break;case"Translate":h.identity(),h.translate(o.tx,o.ty),this._switchMatrix(r,h);break;case"Transform":h.identity(),h.translate(-o.pivotX,-o.pivotY),h.concat(o.matrix),h.translate(o.pivotX,o.pivotY),this._switchMatrix(r,h);break;case"DrawImage":case"FillTexture":t._addPointArrToRst(i,ie._getBoundPointS(o.x,o.y,o.width,o.height),r);break;case"DrawTexture":r.copyTo(h),o.matrix&&h.concat(o.matrix),t._addPointArrToRst(i,ie._getBoundPointS(o.x,o.y,o.width,o.height),h);break;case"DrawImage":if(a=o.texture,e)o.width&&o.height?t._addPointArrToRst(i,ie._getBoundPointS(o.x,o.y,o.width,o.height),r):t._addPointArrToRst(i,ie._getBoundPointS(o.x,o.y,a.width,a.height),r);else{var c=(o.width||a.sourceWidth)/a.width,_=(o.height||a.sourceHeight)/a.height,d=c*a.sourceWidth,f=_*a.sourceHeight,p=a.offsetX>0?a.offsetX:0,g=a.offsetY>0?a.offsetY:0;p*=c,g*=_,t._addPointArrToRst(i,ie._getBoundPointS(o.x-p,o.y-g,d,f),r)}break;case"FillTexture":o.width&&o.height?t._addPointArrToRst(i,ie._getBoundPointS(o.x,o.y,o.width,o.height),r):(a=o.texture,t._addPointArrToRst(i,ie._getBoundPointS(o.x,o.y,a.width,a.height),r));break;case"DrawTexture":var m;o.matrix?(r.copyTo(h),h.concat(o.matrix),m=h):m=r,e?o.width&&o.height?t._addPointArrToRst(i,ie._getBoundPointS(o.x,o.y,o.width,o.height),m):(a=o.texture,t._addPointArrToRst(i,ie._getBoundPointS(o.x,o.y,a.width,a.height),m)):(a=o.texture,c=(o.width||a.sourceWidth)/a.width,_=(o.height||a.sourceHeight)/a.height,d=c*a.sourceWidth,f=_*a.sourceHeight,p=a.offsetX>0?a.offsetX:0,g=a.offsetY>0?a.offsetY:0,p*=c,g*=_,t._addPointArrToRst(i,ie._getBoundPointS(o.x-p,o.y-g,d,f),m));break;case"DrawRect":t._addPointArrToRst(i,ie._getBoundPointS(o.x,o.y,o.width,o.height),r);break;case"DrawCircle":t._addPointArrToRst(i,ie._getBoundPointS(o.x-o.radius,o.y-o.radius,o.radius+o.radius,o.radius+o.radius),r);break;case"DrawLine":t._tempPoints.length=0;var v=0/0;v=.5*o.lineWidth,o.fromX==o.toX?t._tempPoints.push(o.fromX+v,o.fromY,o.toX+v,o.toY,o.fromX-v,o.fromY,o.toX-v,o.toY):o.fromY==o.toY?t._tempPoints.push(o.fromX,o.fromY+v,o.toX,o.toY+v,o.fromX,o.fromY-v,o.toX,o.toY-v):t._tempPoints.push(o.fromX,o.fromY,o.toX,o.toY),t._addPointArrToRst(i,t._tempPoints,r);break;case"DrawCurves":t._addPointArrToRst(i,Q.I.getBezierPoints(o.points),r,o.x,o.y);break;case"DrawLines":case"DrawPoly":t._addPointArrToRst(i,o.points,r,o.x,o.y);break;case"DrawPath":t._addPointArrToRst(i,this._getPathPoints(o.paths),r,o.x,o.y);break;case"DrawPie":t._addPointArrToRst(i,this._getPiePoints(o.x,o.y,o.radius,o.startAngle,o.endAngle),r)}return i.length>200?i=Ie.copyArray(i,ie._getWrapRec(i)._getBoundPoints()):i.length>8&&(i=J.scanPList(i)),i},e._switchMatrix=function(t,e){e.concat(t),e.copyTo(t)},e._getPiePoints=function(e,i,n,s,r){var o=t._tempPoints;t._tempPoints.length=0,o.push(e,i);var a=Math.PI/10,h=0/0;for(h=s;r>h;h+=a)o.push(e+n*Math.cos(h),i+n*Math.sin(h));return r!=h&&o.push(e+n*Math.cos(r),i+n*Math.sin(r)),o},e._getPathPoints=function(e){var i=0,n=0,s=t._tempPoints;s.length=0,n=e.length;var r;for(i=0;n>i;i++)r=e[i],r.length>1&&(s.push(r[1],r[2]),r.length>3&&s.push(r[3],r[4]));return s},t.create=function(){return we.getItemByClass("GraphicsBounds",t)},t._addPointArrToRst=function(e,i,n,s,r){void 0===s&&(s=0),void 0===r&&(r=0);var o=0,a=0;for(a=i.length,o=0;a>o;o+=2)t._addPointToRst(e,i[o]+s,i[o+1]+r,n)},t._addPointToRst=function(t,e,i,n){var s=ee.TEMP;s.setTo(e?e:0,i?i:0),n.transformPoint(s),t.push(s.x,s.y)},t._tempPoints=[],t._tempMatrixArrays=[],t._tempCmds=[],n(t,["_tempMatrix",function(){return this._tempMatrix=new te},"_initMatrix",function(){return this._initMatrix=new te}]),t}(),z=(function(){function t(){}return s(t,"laya.display.SpriteConst"),t.POSRENDERTYPE=0,t.POSBUFFERBEGIN=1,t.POSBUFFEREND=2,t.POSFRAMECOUNT=3,t.POSREPAINT=4,t.POSVISIBLE_NATIVE=5,t.POSX=6,t.POSY=7,t.POSPIVOTX=8,t.POSPIVOTY=9,t.POSSCALEX=10,t.POSSCALEY=11,t.POSSKEWX=12,t.POSSKEWY=13,t.POSROTATION=14,t.POSTRANSFORM_FLAG=15,t.POSMATRIX=16,t.POSCOLOR=22,t.POSGRAPICS=23,t.POSSIM_TEXTURE_ID=24,t.POSSIM_TEXTURE_DATA=25,t.POSLAYAGL3D=26,t.POSCUSTOM=27,t.POSCLIP=28,t.POSCLIP_NEG_POS=32,t.POSCOLORFILTER_COLOR=34,t.POSCOLORFILTER_ALPHA=50,t.POSCALLBACK_OBJ_ID=54,t.POSCUSTOM_CALLBACK_FUN_ID=55,t.POSCANVAS_CALLBACK_FUN_ID=56,t.POSCANVAS_CALLBACK_END_FUN_ID=57,t.POSCANVAS_BEGIN_CMD_ID=58,t.POSCANVAS_END_CMD_ID=59,t.POSCANVAS_DRAW_TARGET_CMD_ID=60,t.POSCANVAS_DRAW_TARGET_PARAM_ID=61,t.POSLAYA3D_FUN_ID=62,t.POSCACHE_CANVAS_SKIP_PAINT_FLAG=63,t.POSFILTER_BEGIN_CMD_ID=64,t.POSFILTER_CALLBACK_FUN_ID=65,t.POSFILTER_END_CMD_ID=66,t.POSFILTER_END_CALLBACK_FUN_ID=67,t.POSGRAPHICS_CALLBACK_FUN_ID=68,t.POSMASK_CALLBACK_FUN_ID=69,t.POSMASK_CMD_ID=70,t.POSBLEND_SRC=71,t.POSBLEND_DEST=72,t.POSSIM_RECT_FILL_CMD=73,t.POSSIM_RECT_FILL_DATA=74,t.POSSIM_RECT_STROKE_CMD=75,t.POSSIM_RECT_STROKE_DATA=76,t.POSSIZE=77,t.ALPHA=1,t.TRANSFORM=2,t.BLEND=4,t.CANVAS=8,t.FILTERS=16,t.MASK=32,t.CLIP=64,t.STYLE=128,t.TEXTURE=256,t.GRAPHICS=512,t.LAYAGL3D=1024,t.CUSTOM=2048,t.ONECHILD=4096,t.CHILDS=8192,t.REPAINT_NONE=0,t.REPAINT_NODE=1,t.REPAINT_CACHE=2,t.REPAINT_ALL=3,t}(),function(){function t(){}s(t,"laya.events.Event");var e=t.prototype;return e.setTo=function(t,e,i){return this.type=t,this.currentTarget=e,this.target=i,this},e.stopPropagation=function(){this._stoped=!0},r(0,e,"stageY",function(){return i.stage.mouseY}),r(0,e,"charCode",function(){return this.nativeEvent.charCode}),r(0,e,"touches",function(){var t=this.nativeEvent.touches;if(t)for(var e=i.stage,n=0,s=t.length;s>n;n++){var r=t[n],o=ee.TEMP;o.setTo(r.clientX,r.clientY),e._canvasTransform.invertTransformPoint(o),e.transform.invertTransformPoint(o),r.stageX=o.x,r.stageY=o.y}return t}),r(0,e,"keyLocation",function(){return this.nativeEvent.location||this.nativeEvent.keyLocation}),r(0,e,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),r(0,e,"altKey",function(){return this.nativeEvent.altKey}),r(0,e,"shiftKey",function(){return this.nativeEvent.shiftKey}),r(0,e,"stageX",function(){return i.stage.mouseX}),t.EMPTY=new t,t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.CLICK="click",t.RIGHT_MOUSE_DOWN="rightmousedown",t.RIGHT_MOUSE_UP="rightmouseup",t.RIGHT_CLICK="rightclick",t.MOUSE_MOVE="mousemove",t.MOUSE_OVER="mouseover",t.MOUSE_OUT="mouseout",t.MOUSE_WHEEL="mousewheel",t.ROLL_OVER="mouseover",t.ROLL_OUT="mouseout",t.DOUBLE_CLICK="doubleclick",t.CHANGE="change",t.CHANGED="changed",t.RESIZE="resize",t.ADDED="added",t.REMOVED="removed",t.DISPLAY="display",t.UNDISPLAY="undisplay",t.ERROR="error",t.COMPLETE="complete",t.LOADED="loaded",t.PROGRESS="progress",t.INPUT="input",t.RENDER="render",t.OPEN="open",t.MESSAGE="message",t.CLOSE="close",t.KEY_DOWN="keydown",t.KEY_PRESS="keypress",t.KEY_UP="keyup",t.FRAME="enterframe",t.DRAG_START="dragstart",t.DRAG_MOVE="dragmove",t.DRAG_END="dragend",t.ENTER="enter",t.SELECT="select",t.BLUR="blur",t.FOCUS="focus",t.VISIBILITY_CHANGE="visibilitychange",t.FOCUS_CHANGE="focuschange",t.PLAYED="played",t.PAUSED="paused",t.STOPPED="stopped",t.START="start",t.END="end",t.COMPONENT_ADDED="componentadded",t.COMPONENT_REMOVED="componentremoved",t.RELEASED="released",t.LINK="link",t.LABEL="label",t.FULL_SCREEN_CHANGE="fullscreenchange",t.DEVICE_LOST="devicelost",t.MESH_CHANGED="meshchanged",t.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",t.ANIMATION_CHANGED="animationchanged",t.TRAIL_FILTER_CHANGE="trailfilterchange",t.TRIGGER_ENTER="triggerenter",t.TRIGGER_STAY="triggerstay",t.TRIGGER_EXIT="triggerexit",t}()),V=(function(){function t(){}return s(t,"laya.events.Keyboard"),t.NUMBER_0=48,t.NUMBER_1=49,t.NUMBER_2=50,t.NUMBER_3=51,t.NUMBER_4=52,t.NUMBER_5=53,t.NUMBER_6=54,t.NUMBER_7=55,t.NUMBER_8=56,t.NUMBER_9=57,t.A=65,t.B=66,t.C=67,t.D=68,t.E=69,t.F=70,t.G=71,t.H=72,t.I=73,t.J=74,t.K=75,t.L=76,t.M=77,t.N=78,t.O=79,t.P=80,t.Q=81,t.R=82,t.S=83,t.T=84,t.U=85,t.V=86,t.W=87,t.X=88,t.Y=89,t.Z=90,t.F1=112,t.F2=113,t.F3=114,t.F4=115,t.F5=116,t.F6=117,t.F7=118,t.F8=119,t.F9=120,t.F10=121,t.F11=122,t.F12=123,t.F13=124,t.F14=125,t.F15=126,t.NUMPAD=21,t.NUMPAD_0=96,t.NUMPAD_1=97,t.NUMPAD_2=98,t.NUMPAD_3=99,t.NUMPAD_4=100,t.NUMPAD_5=101,t.NUMPAD_6=102,t.NUMPAD_7=103,t.NUMPAD_8=104,t.NUMPAD_9=105,t.NUMPAD_ADD=107,t.NUMPAD_DECIMAL=110,t.NUMPAD_DIVIDE=111,t.NUMPAD_ENTER=108,t.NUMPAD_MULTIPLY=106,t.NUMPAD_SUBTRACT=109,t.SEMICOLON=186,t.EQUAL=187,t.COMMA=188,t.MINUS=189,t.PERIOD=190,t.SLASH=191,t.BACKQUOTE=192,t.LEFTBRACKET=219,t.BACKSLASH=220,t.RIGHTBRACKET=221,t.QUOTE=222,t.ALTERNATE=18,t.BACKSPACE=8,t.CAPS_LOCK=20,t.COMMAND=15,t.CONTROL=17,t.DELETE=46,t.ENTER=13,t.ESCAPE=27,t.PAGE_UP=33,t.PAGE_DOWN=34,t.END=35,t.HOME=36,t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.SHIFT=16,t.SPACE=32,t.TAB=9,t.INSERT=45,t}(),function(){function t(){}return s(t,"laya.events.KeyBoardManager"),t.__init__=function(){t._addEvent("keydown"),t._addEvent("keypress"),t._addEvent("keyup")},t._addEvent=function(t){_e.document.addEventListener(t,function(e){laya.events.KeyBoardManager._dispatch(e,t)},!0)},t._dispatch=function(e,n){if(t.enabled){t._event._stoped=!1,t._event.nativeEvent=e,t._event.keyCode=e.keyCode||e.which||e.charCode,"keydown"===n?t._pressKeys[t._event.keyCode]=!0:"keyup"===n&&(t._pressKeys[t._event.keyCode]=null);for(var s=i.stage.focus&&null!=i.stage.focus.event&&i.stage.focus.displayedInStage?i.stage.focus:i.stage,r=s;r;)r.event(n,t._event.setTo(n,r,s)),r=r.parent}},t.hasKeyDown=function(e){return t._pressKeys[e]},t._pressKeys={},t.enabled=!0,n(t,["_event",function(){return this._event=new z}]),t}()),j=(function(){function t(){}return s(t,"laya.events.KeyLocation"),t.STANDARD=0,t.LEFT=1,t.RIGHT=2,t.NUM_PAD=3,t}(),function(){function t(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new z,this._matrix=new te,this._point=new ee,this._rect=new ie,this._prePoint=new ee,this._curTouchID=0/0}s(t,"laya.events.MouseManager");var e=t.prototype;return e.__init__=function(e,i){var n=this;this._stage=e;var s=this,r=this._eventList;i.oncontextmenu=function(){return t.enabled?!1:void 0},i.addEventListener("mousedown",function(e){t.enabled&&(_e.onIE||e.preventDefault(),r.push(e),s.mouseDownTime=_e.now())}),i.addEventListener("mouseup",function(e){t.enabled&&(e.preventDefault(),r.push(e),s.mouseDownTime=-_e.now())},!0),i.addEventListener("mousemove",function(e){if(t.enabled){e.preventDefault();var i=_e.now();if(i-s._lastMoveTimer<10)return;s._lastMoveTimer=i,r.push(e)}},!0),i.addEventListener("mouseout",function(e){t.enabled&&r.push(e)}),i.addEventListener("mouseover",function(e){t.enabled&&r.push(e)}),i.addEventListener("touchstart",function(e){t.enabled&&(r.push(e),t._isFirstTouch||ni.isInputting||e.preventDefault(),s.mouseDownTime=_e.now())}),i.addEventListener("touchend",function(e){t.enabled?(t._isFirstTouch||ni.isInputting||e.preventDefault(),t._isFirstTouch=!1,r.push(e),s.mouseDownTime=-_e.now()):n._curTouchID=0/0},!0),i.addEventListener("touchmove",function(e){t.enabled&&(e.preventDefault(),r.push(e))},!0),i.addEventListener("touchcancel",function(e){t.enabled?(e.preventDefault(),r.push(e)):n._curTouchID=0/0},!0),i.addEventListener("mousewheel",function(e){t.enabled&&r.push(e)}),i.addEventListener("DOMMouseScroll",function(e){t.enabled&&r.push(e)})},e.initEvent=function(t,e){var i=this;i._event._stoped=!1,i._event.nativeEvent=e||t,i._target=null,this._point.setTo(t.pageX||t.clientX,t.pageY||t.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),i.mouseX=this._point.x,i.mouseY=this._point.y,i._event.touchId=t.identifier||0,this._tTouchID=i._event.touchId;var n;n=K.I._event,n._stoped=!1,n.nativeEvent=i._event.nativeEvent,n.touchId=i._event.touchId},e.checkMouseWheel=function(t){this._event.delta=t.wheelDelta?.025*t.wheelDelta:-t.detail;for(var e=K.I.getLastOvers(),i=0,n=e.length;n>i;i++){var s=e[i];s.event("mousewheel",this._event.setTo("mousewheel",s,this._target))}},e.onMouseMove=function(t){K.I.onMouseMove(t,this._tTouchID)},e.onMouseDown=function(t){if(ni.isInputting&&i.stage.focus&&i.stage.focus.focus&&!i.stage.focus.contains(this._target)){var e=i.stage.focus._tf||i.stage.focus,n=t._tf||t;n instanceof laya.display.Input&&n.multiline==e.multiline?e._focusOut():e.focus=!1}K.I.onMouseDown(t,this._tTouchID,this._isLeftMouse)},e.onMouseUp=function(t){K.I.onMouseUp(t,this._tTouchID,this._isLeftMouse)},e.check=function(t,e,i,n){this._point.setTo(e,i),t.fromParentPoint(this._point),e=this._point.x,i=this._point.y;var s=t._style.scrollRect;if(s&&(this._rect.setTo(s.x,s.y,s.width,s.height),!this._rect.contains(e,i)))return!1;if(!this.disableMouseEvent){if(t.hitTestPrior&&!t.mouseThrough&&!this.hitTest(t,e,i))return!1;for(var r=t._children.length-1;r>-1;r--){var o=t._children[r];if(!o.destroyed&&o._mouseState>1&&o._visible&&this.check(o,e,i,n))return!0}}var a=!t.hitTestPrior||t.mouseThrough||this.disableMouseEvent?this.hitTest(t,e,i):!0;return a?(this._target=t,n.call(this,t)):n===this.onMouseUp&&t===this._stage&&(this._target=this._stage,n.call(this,this._target)),a},e.hitTest=function(t,e,i){var n=!1;t.scrollRect&&(e-=t._style.scrollRect.x,i-=t._style.scrollRect.y);var s=t._style.hitArea;return s&&s._hit?s.contains(e,i):((t.width>0&&t.height>0||t.mouseThrough||s)&&(n=t.mouseThrough?t.getGraphicBounds().contains(e,i):(s?s:this._rect.setTo(0,0,t.width,t.height)).contains(e,i)),n)},e.runEvent=function(){var e=this._eventList.length;if(e){for(var i,n=this,s=0,r=0,o=0;e>s;){var a=this._eventList[s];switch("mousemove"!==a.type&&(this._prePoint.x=this._prePoint.y=-1e6),a.type){case"mousedown":this._touchIDs[0]=this._id++,t._isTouchRespond?t._isTouchRespond=!1:(n._isLeftMouse=0===a.button,n.initEvent(a),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseDown));break;case"mouseup":n._isLeftMouse=0===a.button,n.initEvent(a),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-a.clientX)+Math.abs(this._prePoint.y-a.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=a.clientX,this._prePoint.y=a.clientY,n.initEvent(a),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseMove));break;case"touchstart":t._isTouchRespond=!0,n._isLeftMouse=!0;var h=a.changedTouches;for(r=0,o=h.length;o>r;r++)i=h[r],(t.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=i.identifier,this._id%200===0&&(this._touchIDs={}),this._touchIDs[i.identifier]=this._id++,n.initEvent(i,a),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseDown));break;case"touchend":case"touchcancel":t._isTouchRespond=!0,n._isLeftMouse=!0;var l=a.changedTouches;for(r=0,o=l.length;o>r;r++)if(i=l[r],t.multiTouchEnabled||i.identifier==this._curTouchID){this._curTouchID=0/0,n.initEvent(i,a);var u=!1;u=n.check(n._stage,n.mouseX,n.mouseY,n.onMouseUp),u||n.onMouseUp(null)}break;case"touchmove":var c=a.changedTouches;for(r=0,o=c.length;o>r;r++)i=c[r],(t.multiTouchEnabled||i.identifier==this._curTouchID)&&(n.initEvent(i,a),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseMove));
break;case"wheel":case"mousewheel":case"DOMMouseScroll":n.checkMouseWheel(a);break;case"mouseout":K.I.stageMouseOut();break;case"mouseover":n._stage.event("mouseover",n._event.setTo("mouseover",n._stage,n._stage))}s++}this._eventList.length=0}},t.enabled=!0,t.multiTouchEnabled=!0,t._isTouchRespond=!1,t._isFirstTouch=!0,n(t,["instance",function(){return this.instance=new t}]),t}()),K=function(){function t(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new z}s(t,"laya.events.TouchManager");var e=t.prototype;return e._clearTempArrs=function(){t._oldArr.length=0,t._newArr.length=0,t._tEleArr.length=0},e.getTouchFromArr=function(t,e){var i=0,n=0;n=e.length;var s;for(i=0;n>i;i++)if(s=e[i],s.id==t)return s;return null},e.removeTouchFromArr=function(t,e){var i=0;for(i=e.length-1;i>=0;i--)e[i].id==t&&e.splice(i,1)},e.createTouchO=function(t,e){var i;return i=we.getItem("TouchData")||{},i.id=e,i.tar=t,i},e.onMouseDown=function(e,i,n){if(void 0===n&&(n=!1),this.enable){var s,r,o;s=this.getTouchFromArr(i,this.preOvers),o=this.getEles(e,null,t._tEleArr),s?s.tar=e:(r=this.createTouchO(e,i),this.preOvers.push(r)),_e.onMobile&&this.sendEvents(o,"mouseover",i);var a;a=n?this.preDowns:this.preRightDowns,s=this.getTouchFromArr(i,a),s?s.tar=e:(r=this.createTouchO(e,i),a.push(r)),this.sendEvents(o,n?"mousedown":"rightmousedown",i),this._clearTempArrs()}},e.sendEvents=function(t,e,i){void 0===i&&(i=0);var n=0,s=0;s=t.length,this._event._stoped=!1;var r;r=t[0];var o;for(n=0;s>n;n++){if(o=t[n],o.destroyed)return;if(o.event(e,this._event.setTo(e,o,r)),this._event._stoped)break}},e.getEles=function(t,e,i){for(i?i.length=0:i=[];t&&t!=e;)i.push(t),t=t.parent;return i},e.checkMouseOutAndOverOfMove=function(e,i,n){if(void 0===n&&(n=0),i!=e){var s,r,o=0,a=0;if(i.contains(e))r=this.getEles(e,i,t._tEleArr),this.sendEvents(r,"mouseover",n);else if(e.contains(i))r=this.getEles(i,e,t._tEleArr),this.sendEvents(r,"mouseout",n);else{r=t._tEleArr,r.length=0;var h;h=this.getEles(i,null,t._oldArr);var l;l=this.getEles(e,null,t._newArr),a=h.length;var u=0;for(o=0;a>o;o++){if(s=h[o],u=l.indexOf(s),u>=0){l.splice(u,l.length-u);break}r.push(s)}r.length>0&&this.sendEvents(r,"mouseout",n),l.length>0&&this.sendEvents(l,"mouseover",n)}}},e.onMouseMove=function(e,i){if(this.enable){var n;n=this.getTouchFromArr(i,this.preOvers);var s;n?(this.checkMouseOutAndOverOfMove(e,n.tar),n.tar=e,s=this.getEles(e,null,t._tEleArr)):(s=this.getEles(e,null,t._tEleArr),this.sendEvents(s,"mouseover",i),this.preOvers.push(this.createTouchO(e,i))),this.sendEvents(s,"mousemove",i),this._clearTempArrs()}},e.getLastOvers=function(){return t._tEleArr.length=0,this.preOvers.length>0&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,t._tEleArr):(t._tEleArr.push(i.stage),t._tEleArr)},e.stageMouseOut=function(){var t;t=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(t,"mouseout",0)},e.onMouseUp=function(e,i,n){if(void 0===n&&(n=!1),this.enable){var s,r,o,a,h,l=0,u=0,c=_e.onMobile;r=this.getEles(e,null,t._tEleArr),this.sendEvents(r,n?"mouseup":"rightmouseup",i);var _;if(_=n?this.preDowns:this.preRightDowns,s=this.getTouchFromArr(i,_)){var d=!1,f=_e.now();if(d=f-this._lastClickTime<300,this._lastClickTime=f,e==s.tar)h=r;else for(o=this.getEles(s.tar,null,t._oldArr),h=t._newArr,h.length=0,u=o.length,l=0;u>l;l++)a=o[l],r.indexOf(a)>=0&&h.push(a);h.length>0&&this.sendEvents(h,n?"click":"rightclick",i),n&&d&&this.sendEvents(h,"doubleclick",i),this.removeTouchFromArr(i,_),s.tar=null,we.recover("TouchData",s)}else;s=this.getTouchFromArr(i,this.preOvers),s&&c&&(h=this.getEles(s.tar,null,h),h&&h.length>0&&this.sendEvents(h,"mouseout",i),this.removeTouchFromArr(i,this.preOvers),s.tar=null,we.recover("TouchData",s)),this._clearTempArrs()}},t._oldArr=[],t._newArr=[],t._tEleArr=[],n(t,["I",function(){return this.I=new t}]),t}(),$=function(){function t(){this._action=null}s(t,"laya.filters.Filter");var e=t.prototype;return i.imps(e,{"laya.filters.IFilter":!0}),r(0,e,"type",function(){return-1}),t.BLUR=16,t.COLOR=32,t.GLOW=8,t._filter=null,t._recycleScope=null,t}(),q=function(){function t(){this.data=null}s(t,"laya.filters.ColorFilterAction");var e=t.prototype;return e.apply=function(t){var e=t.canvas,i=e.context;if(0==e.width||0==e.height)return e;for(var n,s=i.getImageData(0,0,e.width,e.height),r=s.data,o=0,a=r.length;a>o;o+=4)n=this.getColor(r[o],r[o+1],r[o+2],r[o+3]),0!=r[o+3]&&(r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3]);return i.putImageData(s,0,0),t},e.getColor=function(t,e,i,n){var s=[];if(this.data._mat&&this.data._alpha){var r=this.data._mat,o=this.data._alpha;s[0]=r[0]*t+r[1]*e+r[2]*i+r[3]*n+o[0],s[1]=r[4]*t+r[5]*e+r[6]*i+r[7]*n+o[1],s[2]=r[8]*t+r[9]*e+r[10]*i+r[11]*n+o[2],s[3]=r[12]*t+r[13]*e+r[14]*i+r[15]*n+o[3]}return s},t}(),Q=(function(){function t(){}return s(t,"laya.maths.Arith"),t.formatR=function(t){return t>Math.PI&&(t-=2*Math.PI),t<-Math.PI&&(t+=2*Math.PI),t},t.isPOT=function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},t.setMatToArray=function(t,e){t.a,t.b,t.c,t.d,t.tx+20,t.ty+20,1,e[0]=t.a,e[1]=t.b,e[4]=t.c,e[5]=t.d,e[12]=t.tx,e[13]=t.ty},t}(),function(){function t(){this._controlPoints=[new ee,new ee,new ee],this._calFun=this.getPoint2}s(t,"laya.maths.Bezier");var e=t.prototype;return e._switchPoint=function(t,e){var i=this._controlPoints.shift();i.setTo(t,e),this._controlPoints.push(i)},e.getPoint2=function(t,e){var i=this._controlPoints[0],n=this._controlPoints[1],s=this._controlPoints[2],r=Math.pow(1-t,2)*i.x+2*t*(1-t)*n.x+Math.pow(t,2)*s.x,o=Math.pow(1-t,2)*i.y+2*t*(1-t)*n.y+Math.pow(t,2)*s.y;e.push(r,o)},e.getPoint3=function(t,e){var i=this._controlPoints[0],n=this._controlPoints[1],s=this._controlPoints[2],r=this._controlPoints[3],o=Math.pow(1-t,3)*i.x+3*n.x*t*(1-t)*(1-t)+3*s.x*t*t*(1-t)+r.x*Math.pow(t,3),a=Math.pow(1-t,3)*i.y+3*n.y*t*(1-t)*(1-t)+3*s.y*t*t*(1-t)+r.y*Math.pow(t,3);e.push(o,a)},e.insertPoints=function(t,e){var i=0/0;t=t>0?t:5;var n=0/0;for(n=1/t,i=0;1>=i;i+=n)this._calFun(i,e)},e.getBezierPoints=function(t,e,i){void 0===e&&(e=5),void 0===i&&(i=2);var n=0,s=0;if(s=t.length,2*(i+1)>s)return[];var r=[];switch(i){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=i;)this._controlPoints.push(ee.create());for(n=0;2*i>n;n+=2)this._switchPoint(t[n],t[n+1]);for(n=2*i;s>n;n+=2)this._switchPoint(t[n],t[n+1]),n/2%i==0&&this.insertPoints(e,r);return r},n(t,["I",function(){return this.I=new t}]),t}()),J=function(){function t(){}return s(t,"laya.maths.GrahamScan"),t.multiply=function(t,e,i){return(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y)},t.dis=function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},t._getPoints=function(e,i,n){for(void 0===i&&(i=!1),t._mPointList||(t._mPointList=[]);t._mPointList.length<e;)t._mPointList.push(new ee);return n||(n=[]),n.length=0,i?t.getFrom(n,t._mPointList,e):t.getFromR(n,t._mPointList,e),n},t.getFrom=function(t,e,i){var n=0;for(n=0;i>n;n++)t.push(e[n]);return t},t.getFromR=function(t,e,i){var n=0;for(n=0;i>n;n++)t.push(e.pop());return t},t.pListToPointList=function(e,i){void 0===i&&(i=!1);var n=0,s=e.length/2,r=t._getPoints(s,i,t._tempPointList);for(n=0;s>n;n++)r[n].setTo(e[n+n],e[n+n+1]);return r},t.pointListToPlist=function(e){var i,n=0,s=e.length,r=t._temPList;for(r.length=0,n=0;s>n;n++)i=e[n],r.push(i.x,i.y);return r},t.scanPList=function(e){return Ie.copyArray(e,t.pointListToPlist(t.scan(t.pListToPointList(e,!0))))},t.scan=function(e){var i,n,s,r=0,o=0,a=0,h=e.length,l={};for(n=t._temArr,n.length=0,h=e.length,r=h-1;r>=0;r--)i=e[r],s=i.x+"_"+i.y,l.hasOwnProperty(s)||(l[s]=!0,n.push(i));for(h=n.length,Ie.copyArray(e,n),r=1;h>r;r++)(e[r].y<e[a].y||e[r].y==e[a].y&&e[r].x<e[a].x)&&(a=r);for(i=e[0],e[0]=e[a],e[a]=i,r=1;h-1>r;r++){for(a=r,o=r+1;h>o;o++)(t.multiply(e[o],e[a],e[0])>0||0==t.multiply(e[o],e[a],e[0])&&t.dis(e[0],e[o])<t.dis(e[0],e[a]))&&(a=o);i=e[r],e[r]=e[a],e[a]=i}if(n=t._temArr,n.length=0,e.length<3)return Ie.copyArray(n,e);for(n.push(e[0],e[1],e[2]),r=3;h>r;r++){for(;n.length>=2&&t.multiply(e[r],n[n.length-1],n[n.length-2])>=0;)n.pop();e[r]&&n.push(e[r])}return n},t._mPointList=null,t._tempPointList=[],t._temPList=[],t._temArr=[],t}(),Z=function(){function t(){}return s(t,"laya.maths.MathUtil"),t.subtractVector3=function(t,e,i){i[0]=t[0]-e[0],i[1]=t[1]-e[1],i[2]=t[2]-e[2]},t.lerp=function(t,e,i){return t*(1-i)+e*i},t.scaleVector3=function(t,e,i){i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e},t.lerpVector3=function(t,e,i,n){var s=t[0],r=t[1],o=t[2];n[0]=s+i*(e[0]-s),n[1]=r+i*(e[1]-r),n[2]=o+i*(e[2]-o)},t.lerpVector4=function(t,e,i,n){var s=t[0],r=t[1],o=t[2],a=t[3];n[0]=s+i*(e[0]-s),n[1]=r+i*(e[1]-r),n[2]=o+i*(e[2]-o),n[3]=a+i*(e[3]-a)},t.slerpQuaternionArray=function(t,e,i,n,s,r,o){var a,h,l,u,c,_=t[e+0],d=t[e+1],f=t[e+2],p=t[e+3],g=i[n+0],m=i[n+1],v=i[n+2],y=i[n+3];return h=_*g+d*m+f*v+p*y,0>h&&(h=-h,g=-g,m=-m,v=-v,y=-y),1-h>1e-6?(a=Math.acos(h),l=Math.sin(a),u=Math.sin((1-s)*a)/l,c=Math.sin(s*a)/l):(u=1-s,c=s),r[o+0]=u*_+c*g,r[o+1]=u*d+c*m,r[o+2]=u*f+c*v,r[o+3]=u*p+c*y,r},t.getRotation=function(t,e,i,n){return Math.atan2(n-e,i-t)/Math.PI*180},t.sortBigFirst=function(t,e){return t==e?0:e>t?1:-1},t.sortSmallFirst=function(t,e){return t==e?0:e>t?-1:1},t.sortNumBigFirst=function(t,e){return parseFloat(e)-parseFloat(t)},t.sortNumSmallFirst=function(t,e){return parseFloat(t)-parseFloat(e)},t.sortByKey=function(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0);var s;return s=i?n?t.sortNumBigFirst:t.sortBigFirst:n?t.sortNumSmallFirst:t.sortSmallFirst,function(t,i){return s(t[e],i[e])}},t}(),te=function(){function t(e,i,n,s,r,o,a){return this._bTransform=!1,void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),null!=t._createFun?t._createFun(e,i,n,s,r,o,a):(this.a=e,this.b=i,this.c=n,this.d=s,this.tx=r,this.ty=o,this._checkTransform(),void 0)}s(t,"laya.maths.Matrix");var e=t.prototype;return e.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this._bTransform=!1,this},e._checkTransform=function(){return this._bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},e.setTranslate=function(t,e){return this.tx=t,this.ty=e,this},e.translate=function(t,e){return this.tx+=t,this.ty+=e,this},e.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this._bTransform=!0,this},e.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,r=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=r*e-this.ty*i,this.ty=r*i+this.ty*e,this._bTransform=!0,this},e.skew=function(t,e){var i=Math.tan(t),n=Math.tan(e),s=this.a,r=this.b;return this.a+=n*this.c,this.b+=n*this.d,this.c+=i*s,this.d+=i*r,this},e.invertTransformPoint=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,r=this.tx,o=e*s-i*n,a=s/o,h=-i/o,l=-n/o,u=e/o,c=(n*this.ty-s*r)/o,_=-(e*this.ty-i*r)/o;return t.setTo(a*t.x+l*t.y+c,h*t.x+u*t.y+_)},e.transformPoint=function(t){return t.setTo(this.a*t.x+this.c*t.y+this.tx,this.b*t.x+this.d*t.y+this.ty)},e.transformPointN=function(t){return t.setTo(this.a*t.x+this.c*t.y,this.b*t.x+this.d*t.y)},e.transformPointArray=function(t,e){for(var i=t.length,n=0;i>n;n+=2){var s=t[n],r=t[n+1];e[n]=this.a*s+this.c*r+this.tx,e[n+1]=this.b*s+this.d*r+this.ty}return e},e.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},e.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},e.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,r=t*n-e*i;return this.a=n/r,this.b=-e/r,this.c=-i/r,this.d=t/r,this.tx=(i*this.ty-n*s)/r,this.ty=-(t*this.ty-e*s)/r,this},e.setTo=function(t,e,i,n,s,r){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=r,this},e.concat=function(t){var e=this.a,i=this.c,n=this.tx;return this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d,this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this},e.scaleEx=function(t,e){var i=this.a,n=this.b,s=this.c,r=this.d;0!==n||0!==s?(this.a=t*i,this.b=t*n,this.c=e*s,this.d=e*r):(this.a=t*i,this.b=0*r,this.c=0*i,this.d=e*r),this._bTransform=!0},e.rotateEx=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.b,r=this.c,o=this.d;0!==s||0!==r?(this.a=e*n+i*r,this.b=e*s+i*o,this.c=-i*n+e*r,this.d=-i*s+e*o):(this.a=e*n,this.b=i*o,this.c=-i*n,this.d=e*o),this._bTransform=!0},e.clone=function(){var e=t.create();return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e._bTransform=this._bTransform,e},e.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t._bTransform=this._bTransform,t},e.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},e.destroy=function(){this.recover()},e.recover=function(){we.recover("Matrix",this.identity())},t.mul=function(t,e,i){var n=t.a,s=t.b,r=t.c,o=t.d,a=t.tx,h=t.ty,l=e.a,u=e.b,c=e.c,_=e.d,d=e.tx,f=e.ty;return 0!==u||0!==c?(i.a=n*l+s*c,i.b=n*u+s*_,i.c=r*l+o*c,i.d=r*u+o*_,i.tx=l*a+c*h+d,i.ty=u*a+_*h+f):(i.a=n*l,i.b=s*_,i.c=r*l,i.d=o*_,i.tx=l*a+d,i.ty=_*h+f),i},t.mul16=function(t,e,i){var n=t.a,s=t.b,r=t.c,o=t.d,a=t.tx,h=t.ty,l=e.a,u=e.b,c=e.c,_=e.d,d=e.tx,f=e.ty;return 0!==u||0!==c?(i[0]=n*l+s*c,i[1]=n*u+s*_,i[4]=r*l+o*c,i[5]=r*u+o*_,i[12]=l*a+c*h+d,i[13]=u*a+_*h+f):(i[0]=n*l,i[1]=s*_,i[4]=r*l,i[5]=o*_,i[12]=l*a+d,i[13]=_*h+f),i},t.mulPre=function(t,e,i,n,s,r,o,a){var h=t.a,l=t.b,u=t.c,c=t.d,_=t.tx,d=t.ty;return 0!==i||0!==n?(a.a=h*e+l*n,a.b=h*i+l*s,a.c=u*e+c*n,a.d=u*i+c*s,a.tx=e*_+n*d+r,a.ty=i*_+s*d+o):(a.a=h*e,a.b=l*s,a.c=u*e,a.d=c*s,a.tx=e*_+r,a.ty=s*d+o),a},t.mulPos=function(t,e,i,n,s,r,o,a){var h=t.a,l=t.b,u=t.c,c=t.d,_=t.tx,d=t.ty;return 0!==l||0!==u?(a.a=e*h+i*u,a.b=e*l+i*c,a.c=n*h+s*u,a.d=n*l+s*c,a.tx=h*r+u*o+_,a.ty=l*r+c*o+d):(a.a=e*h,a.b=i*c,a.c=n*h,a.d=s*c,a.tx=h*r+_,a.ty=c*o+d),a},t.preMul=function(t,e,i){var n=t.a,s=t.b,r=t.c,o=t.d,a=e.a,h=e.b,l=e.c,u=e.d,c=e.tx,_=e.ty;return i.a=a*n,i.b=i.c=0,i.d=u*o,i.tx=c*n+t.tx,i.ty=_*o+t.ty,(0!==h||0!==l||0!==s||0!==r)&&(i.a+=h*r,i.d+=l*s,i.b+=a*s+h*o,i.c+=l*n+u*r,i.tx+=_*r,i.ty+=c*s),i},t.preMulXY=function(t,e,i,n){var s=t.a,r=t.b,o=t.c,a=t.d;return n.a=s,n.b=r,n.c=o,n.d=a,n.tx=e*s+t.tx+i*o,n.ty=i*a+t.ty+e*r,n},t.create=function(){return we.getItemByClass("Matrix",t)},t.EMPTY=new t,t.TEMP=new t,t._createFun=null,t}(),ee=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}s(t,"laya.maths.Point");var e=t.prototype;return e.setTo=function(t,e){return this.x=t,this.y=e,this},e.reset=function(){return this.x=this.y=0,this},e.recover=function(){we.recover("Point",this.reset())},e.distance=function(t,e){return Math.sqrt((this.x-t)*(this.x-t)+(this.y-e)*(this.y-e))},e.toString=function(){return this.x+","+this.y},e.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t>0){var e=1/t;this.x*=e,this.y*=e}},e.copy=function(t){return this.setTo(t.x,t.y)},t.create=function(){return we.getItemByClass("Point",t)},t.TEMP=new t,t.EMPTY=new t,t}(),ie=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n}s(t,"laya.maths.Rectangle");var e=t.prototype;return e.setTo=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},e.reset=function(){return this.x=this.y=this.width=this.height=0,this},e.recover=function(){we.recover("Rectangle",this.reset())},e.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.right&&e>=this.y&&e<this.bottom?!0:!1},e.intersects=function(t){return!(t.x>this.x+this.width||t.x+t.width<this.x||t.y>this.y+this.height||t.y+t.height<this.y)},e.intersection=function(e,i){return this.intersects(e)?(i||(i=new t),i.x=Math.max(this.x,e.x),i.y=Math.max(this.y,e.y),i.width=Math.min(this.right,e.right)-i.x,i.height=Math.min(this.bottom,e.bottom)-i.y,i):null},e.union=function(e,i){return i||(i=new t),this.clone(i),e.width<=0||e.height<=0?i:(i.addPoint(e.x,e.y),i.addPoint(e.right,e.bottom),this)},e.clone=function(e){return e||(e=new t),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},e.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},e.equals=function(t){return t&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height?!0:!1},e.addPoint=function(t,e){return this.x>t&&(this.width+=this.x-t,this.x=t),this.y>e&&(this.height+=this.y-e,this.y=e),this.width<t-this.x&&(this.width=t-this.x),this.height<e-this.y&&(this.height=e-this.y),this},e._getBoundPoints=function(){var e=t._temB;return e.length=0,0==this.width||0==this.height?e:(e.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),e)},e.isEmpty=function(){return this.width<=0||this.height<=0?!0:!1},r(0,e,"right",function(){return this.x+this.width}),r(0,e,"bottom",function(){return this.y+this.height}),t.create=function(){return we.getItemByClass("Rectangle",t)},t._getBoundPointS=function(e,i,n,s){var r=t._temA;return r.length=0,0==n||0==s?r:(r.push(e,i,e+n,i,e,i+s,e+n,i+s),r)},t._getWrapRec=function(e,i){if(!e||e.length<1)return i?i.setTo(0,0,0,0):t.TEMP.setTo(0,0,0,0);i=i?i:laya.maths.Rectangle.create();var n,s,r,o,a,h=e.length,l=ee.TEMP;for(s=o=99999,r=a=-s,n=0;h>n;n+=2)l.x=e[n],l.y=e[n+1],s=s<l.x?s:l.x,o=o<l.y?o:l.y,r=r>l.x?r:l.x,a=a>l.y?a:l.y;return i.setTo(s,o,r-s,a-o)},t.EMPTY=new t,t.TEMP=new t,t._temB=[],t._temA=[],t}(),ne=function(){function t(){}return s(t,"laya.media.SoundManager"),r(1,t,"useAudioMusic",function(){return t._useAudioMusic},function(e){t._useAudioMusic=e,t._musicClass=e?Ee:null}),r(1,t,"autoStopMusic",function(){return t._autoStopMusic},function(e){i.stage.off("blur",null,t._stageOnBlur),i.stage.off("focus",null,t._stageOnFocus),i.stage.off("visibilitychange",null,t._visibilityChange),t._autoStopMusic=e,e&&(i.stage.on("blur",null,t._stageOnBlur),i.stage.on("focus",null,t._stageOnFocus),i.stage.on("visibilitychange",null,t._visibilityChange))}),r(1,t,"muted",function(){return t._muted},function(e){e!=t._muted&&(e&&t.stopAllSound(),t.musicMuted=e,t._muted=e)}),r(1,t,"musicMuted",function(){return t._musicMuted},function(e){e!=t._musicMuted&&(e?(t._bgMusic?t._musicChannel&&!t._musicChannel.isStopped?t._musicChannel.pause():t._musicChannel=null:t._musicChannel=null,t._musicMuted=e):(t._musicMuted=e,t._bgMusic&&t._musicChannel&&t._musicChannel.resume()))}),r(1,t,"soundMuted",function(){return t._soundMuted},function(e){t._soundMuted=e}),t.__init__=function(){var e=_e.window,i=e.AudioContext||e.webkitAudioContext||e.mozAudioContext?!0:!1;return i&&Fe.initWebAudio(),t._soundClass=i?Fe:Ee,Ee._initMusicAudio(),t._musicClass=Ee,i},t.addChannel=function(e){t._channels.indexOf(e)>=0||t._channels.push(e)},t.removeChannel=function(e){var i=0;for(i=t._channels.length-1;i>=0;i--)t._channels[i]==e&&t._channels.splice(i,1)},t.disposeSoundIfNotUsed=function(e){var i=0;for(i=t._channels.length-1;i>=0;i--)if(t._channels[i].url==e)return;t.destroySound(e)},t._visibilityChange=function(){i.stage.isVisibility?t._stageOnFocus():t._stageOnBlur()},t._stageOnBlur=function(){t._isActive=!1,t._musicChannel&&(t._musicChannel.isStopped||(t._blurPaused=!0,t._musicChannel.pause())),t.stopAllSound(),i.stage.once("mousedown",null,t._stageOnFocus)},t._recoverWebAudio=function(){Fe.ctx&&"running"!=Fe.ctx.state&&Fe.ctx.resume&&Fe.ctx.resume()},t._stageOnFocus=function(){t._isActive=!0,t._recoverWebAudio(),i.stage.off("mousedown",null,t._stageOnFocus),t._blurPaused&&t._musicChannel&&t._musicChannel.isStopped&&(t._blurPaused=!1,t._musicChannel.resume())},t.playSound=function(e,n,s,r,o){if(void 0===n&&(n=1),void 0===o&&(o=0),!t._isActive||!e)return null;if(t._muted)return null;if(t._recoverWebAudio(),e=ae.formatURL(e),e==t._bgMusic){if(t._musicMuted)return null}else{if(he.isConchApp){var a=Ie.getFileExtension(e);if("wav"!=a&&"ogg"!=a)return alert("The sound only supports wav or ogg format,for optimal performance reason,please refer to the official website document."),null}if(t._soundMuted)return null}var h;_e.onMiniGame||(h=i.loader.getRes(e)),r||(r=t._soundClass),h||(h=new r,h.load(e),_e.onMiniGame||ke.cacheRes(e,h));var l;return(l=h.play(o,n))?(l.url=e,l.volume=e==t._bgMusic?t.musicVolume:t.soundVolume,l.completeHandler=s,l):null},t.destroySound=function(t){var e=i.loader.getRes(t);e&&(ke.clearRes(t),e.dispose())},t.playMusic=function(e,i,n,s){return void 0===i&&(i=0),void 0===s&&(s=0),e=ae.formatURL(e),t._bgMusic=e,t._musicChannel&&t._musicChannel.stop(),t._musicChannel=t.playSound(e,i,n,t._musicClass,s)},t.stopSound=function(e){e=ae.formatURL(e);var i,n=0;for(n=t._channels.length-1;n>=0;n--)i=t._channels[n],i.url==e&&i.stop()},t.stopAll=function(){t._bgMusic=null;var e,i=0;for(i=t._channels.length-1;i>=0;i--)e=t._channels[i],e.stop()},t.stopAllSound=function(){var e,i=0;for(i=t._channels.length-1;i>=0;i--)e=t._channels[i],e.url!=t._bgMusic&&e.stop()},t.stopMusic=function(){t._musicChannel&&t._musicChannel.stop(),t._bgMusic=null},t.setSoundVolume=function(e,i){if(i)i=ae.formatURL(i),t._setVolume(i,e);else{t.soundVolume=e;var n,s=0;for(s=t._channels.length-1;s>=0;s--)n=t._channels[s],n.url!=t._bgMusic&&(n.volume=e)}},t.setMusicVolume=function(e){t.musicVolume=e,t._setVolume(t._bgMusic,e)},t._setVolume=function(e,i){e=ae.formatURL(e);var n,s=0;for(s=t._channels.length-1;s>=0;s--)n=t._channels[s],n.url==e&&(n.volume=i)},t.musicVolume=1,t.soundVolume=1,t.playbackRate=1,t._useAudioMusic=!0,t._muted=!1,t._soundMuted=!1,t._musicMuted=!1,t._bgMusic=null,t._musicChannel=null,t._channels=[],t._autoStopMusic=!1,t._blurPaused=!1,t._isActive=!0,t._soundClass=null,t._musicClass=null,t.autoReleaseSound=!0,t}(),se=function(){function t(){}return s(t,"laya.net.AtlasInfoManager"),t.enable=function(e,n){i.loader.load(e,_.create(null,t._onInfoLoaded,[n]),null,"json")},t._onInfoLoaded=function(e,i){var n,s,r,o=0,a=0;for(n in i)for(r=i[n],s=r[0],r=r[1],a=r.length,o=0;a>o;o++)t._fileLoadDic[s+r[o]]=n;e&&e.run()},t.getFileLoadPath=function(e){return t._fileLoadDic[e]||e},t._fileLoadDic={},t}(),re=function(){function e(){}var i;return s(e,"laya.net.LocalStorage"),e.__init__=function(){return e._baseClass||(e._baseClass=i,i.init()),e.items=e._baseClass.items,e.support=e._baseClass.support,e.support},e.setItem=function(t,i){e._baseClass.setItem(t,i)},e.getItem=function(t){return e._baseClass.getItem(t)},e.setJSON=function(t,i){e._baseClass.setJSON(t,i)},e.getJSON=function(t){return e._baseClass.getJSON(t)},e.removeItem=function(t){e._baseClass.removeItem(t)},e.clear=function(){e._baseClass.clear()},e._baseClass=null,e.items=null,e.support=!1,e.__init$=function(){i=function(){function e(){}return s(e,""),e.init=function(){try{e.support=!0,e.items=t.localStorage,e.setItem("laya","1"),e.removeItem("laya")}catch(i){e.support=!1}e.support||console.log("LocalStorage is not supprot or browser is private mode.")},e.setItem=function(t,i){try{e.support&&e.items.setItem(t,i)}catch(n){console.warn("set localStorage failed",n)}},e.getItem=function(t){return e.support?e.items.getItem(t):null},e.setJSON=function(t,i){try{e.support&&e.items.setItem(t,JSON.stringify(i))}catch(n){console.warn("set localStorage failed",n)}},e.getJSON=function(t){return JSON.parse(e.support?e.items.getItem(t):null)},e.removeItem=function(t){e.support&&e.items.removeItem(t)},e.clear=function(){e.support&&e.items.clear()},e.items=null,e.support=!1,e}()},e}(),oe=(function(){function t(){}return s(t,"laya.net.ResourceVersion"),t.enable=function(e,n,s){void 0===s&&(s=2),laya.net.ResourceVersion.type=s,i.loader.load(e,_.create(null,t.onManifestLoaded,[n]),null,"json"),ae.customFormat=t.addVersionPrefix},t.onManifestLoaded=function(e,i){t.manifest=i,e.run(),i||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},t.addVersionPrefix=function(e){return t.manifest&&t.manifest[e]?2==t.type?t.manifest[e]:t.manifest[e]+"/"+e:e},t.FOLDER_VERSION=1,t.FILENAME_VERSION=2,t.manifest=null,t.type=1,t}(),function(){function t(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=0/0,this._http=null}s(t,"laya.net.TTFLoader");var e=t.prototype;return e.load=function(t){this._url=t;var e=t.split(".ttf")[0].split("/");this.fontName=e[e.length-1],_e.window.conch?this._loadConch():_e.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},e._loadConch=function(){this._http=new Be,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},e._onHttpLoaded=function(t){_e.window.conch.setFontFaceFromBuffer(this.fontName,t),this._clearHttp(),this._complete()},e._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},e._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},e._complete=function(){i.timer.clear(this,this._complete),i.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},e._checkComplete=function(){Te.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},e._loadWithFontFace=function(){var t=new _e.window.FontFace(this.fontName,"url('"+this._url+"')");_e.window.document.fonts.add(t);var e=this;t.loaded.then(function(){e._complete()}),t.load()},e._createDiv=function(){this._div=_e.createElement("div"),this._div.innerHTML="laya";var t=this._div.style;t.fontFamily=this.fontName,t.position="absolute",t.left="-100px",t.top="-100px",_e.document.body.appendChild(this._div)},e._loadWithCSS=function(){var t=this,e=_e.createElement("style");e.type="text/css",_e.document.body.appendChild(e),e.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=Te.measureText("LayaTTFFont",this._fontTxt).width;var n=this;e.onload=function(){i.timer.once(1e4,n,t._complete)},i.timer.loop(20,this,this._checkComplete),this._createDiv()},t._testString="LayaTTFFont",t}()),ae=function(){function t(e){this._url=null,this._path=null,this._url=t.formatURL(e),this._path=t.getPath(e)}s(t,"laya.net.URL");var e=t.prototype;return r(0,e,"path",function(){return this._path}),r(0,e,"url",function(){return this._url}),t.formatURL=function(e){if(!e)return"null path";if(e.indexOf(":")>0)return e;if(null!=t.customFormat&&(e=t.customFormat(e)),e.indexOf(":")>0)return e;var i=e.charAt(0);if("."===i)return t._formatRelativePath(t.basePath+e);if("~"===i)return t.rootPath+e.substring(1);if("d"===i){if(0===e.indexOf("data:image"))return e}else if("/"===i)return e;return t.basePath+e},t._formatRelativePath=function(t){for(var e=t.split("/"),i=0,n=e.length;n>i;i++)".."==e[i]&&(e.splice(i-1,2),i-=2);return e.join("/")},t.getPath=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(0,e+1):""},t.getFileName=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(e+1):t},t.version={},t.basePath="",t.rootPath="",t.customFormat=function(e){var i=t.version[e];return!he.isConchApp&&i&&(e+="?v="+i),e},t}(),he=(function(){function t(){}return s(t,"laya.net.VersionManager"),t.enable=function(e,n){i.loader.load(e,_.create(null,t._onManifestLoaded,[n]),null,"json"),ae.customFormat=t.addVersionPrefix},t._onManifestLoaded=function(e,i){t.manifest=i,e&&e.run(),i||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},t.addVersionPrefix=function(e){return t.manifest&&t.manifest[e]?t.manifest[e]+"/"+e:e},t.manifest=null,t}(),function(){function e(t,n){function s(){i.stage._loop(),_e.window.requestAnimationFrame(s)}this._timeId=0,e._mainCanvas.source.id="layaCanvas",e._mainCanvas.source.width=t,e._mainCanvas.source.height=n,_e.container.appendChild(e._mainCanvas.source),Te.initRender(e._mainCanvas,t,n),_e.window.requestAnimationFrame(s),i.stage.on("visibilitychange",this,this._onVisibilitychange)}s(e,"laya.renders.Render");var n=e.prototype;return n._onVisibilitychange=function(){i.stage.isVisibility?0!=this._timeId&&_e.window.clearInterval(this._timeId):this._timeId=_e.window.setInterval(this._enterFrame,1e3)},n._enterFrame=function(){i.stage._loop()},r(1,e,"context",function(){return e._context}),r(1,e,"canvas",function(){return e._mainCanvas.source}),e._context=null,e._mainCanvas=null,e.isConchApp=!1,e.isWebGL=!1,e.is3DMode=!1,e.__init$=function(){e.isConchApp=null!=t.conch},e}()),le=function(){function t(e,i){if(o.map[e])return this._fun=o.map[e],this._next=t.NORENDER,void 0;switch(this._next=i||t.NORENDER,e){case 0:return this._fun=this._no,void 0;case 1:return this._fun=this._alpha,void 0;case 2:return this._fun=this._transform,void 0;case 4:return this._fun=this._blend,void 0;case 8:return this._fun=this._canvas,void 0;case 32:return this._fun=this._mask,void 0;case 64:return this._fun=this._clip,void 0;case 128:return this._fun=this._style,void 0;case 512:return this._fun=this._graphics,void 0;case 8192:return this._fun=this._children,void 0;case 2048:return this._fun=this._custom,void 0;case 256:return this._fun=this._texture,void 0;case 16:return this._fun=$._filter,void 0;case 69905:return this._fun=t._initRenderFun,void 0}this.onCreate(e)}s(t,"laya.renders.RenderSprite");var e=t.prototype;return e.onCreate=function(){},e._style=function(t,e,i,n){var s=t._style;null!=s.render&&s.render(t,e,i,n);var r=this._next;r._fun.call(r,t,e,i,n)},e._no=function(){},e._custom=function(t,e,i,n){t.customRender(e,i,n),this._next._fun.call(this._next,t,e,i-t.pivotX,n-t.pivotY)},e._clip=function(e,i,n,s){var r=this._next;if(r!=t.NORENDER){var o=e._style.scrollRect;i.save(),i.clipRect(n,s,o.width,o.height),r._fun.call(r,e,i,n-o.x,s-o.y),i.restore()}},e._blend=function(t,e,i,n){var s=t._style;s.blendMode&&(e.globalCompositeOperation=s.blendMode);var r=this._next;r._fun.call(r,t,e,i,n),e.globalCompositeOperation="source-over"},e._mask=function(t,e,i,n){var s=this._next;s._fun.call(s,t,e,i,n);var r=t.mask;r&&(e.globalCompositeOperation="destination-in",(r.numChildren>0||!r.graphics._isOnlyOne())&&(r.cacheAs="bitmap"),r.render(e,i-t._style.pivotX,n-t._style.pivotY)),e.globalCompositeOperation="source-over"},e._texture=function(t,e,i,n){var s=t.texture;e.drawTexture(s,i-t.pivotX,n-t.pivotY,t._width||s.width,t._height||s.height);var r=this._next;r._fun.call(r,t,e,i,n)},e._graphics=function(t,e,i,n){t._graphics&&t._graphics._render(t,e,i-t.pivotX,n-t.pivotY);var s=this._next;s._fun.call(s,t,e,i,n)},e._image=function(t,e,i,n){var s=t._style;e.drawTexture2(i,n,s.pivotX,s.pivotY,t.transform,t._graphics._one)},e._image2=function(t,e,i,n){var s=t._style;e.drawTexture2(i,n,s.pivotX,s.pivotY,t.transform,t._graphics._one)},e._alpha=function(t,e,i,n){var s,r=t._style;if((s=r.alpha)>.01||t._needRepaint()){var o=e.globalAlpha;e.globalAlpha*=s;var a=this._next;a._fun.call(a,t,e,i,n),e.globalAlpha=o}},e._transform=function(e,i,n,s){{var r=e.transform,o=this._next;e._style}r&&o!=t.NORENDER?(i.save(),i.transform(r.a,r.b,r.c,r.d,r.tx+n,r.ty+s),o._fun.call(o,e,i,0,0),i.restore()):o._fun.call(o,e,i,n,s)},e._children=function(t,e,i,n){var s,r=t._style,o=t._children,a=o.length;if(i-=t.pivotX,n-=t.pivotY,r.viewport){var h=r.viewport,l=h.x,u=h.y,c=h.right,_=h.bottom,d=0/0,f=0/0;for(p=0;a>p;++p)(s=o[p])._visible&&(d=s._x)<c&&d+s.width>l&&(f=s._y)<_&&f+s.height>u&&s.render(e,i,n)}else for(var p=0;a>p;++p)(s=o[p])._visible&&s.render(e,i,n)},e._canvas=function(t,e,i,n){var s=t._cacheStyle,r=this._next;if(!s.enableCanvasRender)return r._fun.call(r,t,e,i,n),void 0;if("bitmap"===s.cacheAs?be.canvasBitmap++:be.canvasNormal++,t._needRepaint()||!s.canvas)this._canvas_repaint(t,e,i,n);else{var o=s.cacheRect;e.drawCanvas(s.canvas,i+o.x,n+o.y,o.width,o.height)
}},e._canvas_repaint=function(t,e,i,n){var s,r,o,a,h,l,u,c,_,d=t._cacheStyle,f=this._next,p=d.canvas,g=d.cacheAs;if(_=d._calculateCacheRect(t,g,i,n),u=_.x,c=_.y,a=d.cacheRect,h=a.width*u,l=a.height*c,r=a.x,o=a.y,he.isWebGL&&"bitmap"===g&&(h>2048||l>2048))return console.warn("cache bitmap size larger than 2048,cache ignored"),d.releaseContext(),f._fun.call(f,t,e,i,n),void 0;if(p||(d.createContext(),p=d.canvas),s=p.context,s.sprite=t,(p.width!=h||p.height!=l)&&p.size(h,l),"bitmap"===g?s.asBitmap=!0:"normal"===g&&(s.asBitmap=!1),s.clear(),"normal"===g&&(s.touches=[]),1!=u||1!=c){var m=s;m.save(),m.scale(u,c),f._fun.call(f,t,s,-r,-o),m.restore(),t._applyFilters()}else m=s,f._fun.call(f,t,s,-r,-o),t._applyFilters();d.staticCache&&(d.reCache=!1),be.canvasReCache++,e.drawCanvas(p,i+r,n+o,a.width,a.height)},t.__init__=function(){o.__init__();var e,i=0,n=0;for(e=Te.createRenderSprite(69905,null),n=t.renders.length=16384,i=0;n>i;i++)t.renders[i]=e;t.renders[0]=Te.createRenderSprite(0,null)},t._initRenderFun=function(e,i,n,s){var r=e._renderType,o=t.renders[r]=t._getTypeRender(r);o._fun(e,i,n,s)},t._getTypeRender=function(t){if(o.map[t])return Te.createRenderSprite(t,null);for(var e=null,i=8192;i>0;)i&t&&(e=Te.createRenderSprite(i,e)),i>>=1;return e},t.INIT=69905,t.renders=[],t.NORENDER=new t(0,null),t}(),ue=function(){function t(){}s(t,"laya.resource.Context");var e=t.prototype;return e.drawCanvas=function(t,e,i,n,s){be.drawCall++,this.drawImage(t._source,e,i,n,s)},e._drawRect=function(t,e,i,n,s){be.drawCall++,s&&(this.fillStyle=s),this.fillRect(t,e,i,n)},e.drawText=function(t,e,i,n,s,r){be.drawCall++,arguments.length>3&&null!=n&&(this.font=n,this.fillStyle=s,this.textAlign=r,this.textBaseline="top"),this.fillText(t,e,i)},e.fillBorderText=function(t,e,i,n,s,r,o,a){be.drawCall++,this.font=n,this.fillStyle=s,this.textBaseline="top",this.strokeStyle=r,this.lineWidth=o,this.textAlign=a,this.strokeText(t,e,i),this.fillText(t,e,i)},e.fillWords=function(t,e,i,n,s){n&&(this.font=n),s&&(this.fillStyle=s),this.textBaseline="top",this.textAlign="left";for(var r=0,o=t.length;o>r;r++){var a=t[r];this.fillText(a.char,a.x+e,a.y+i)}},e.fillBorderWords=function(t,e,i,n,s,r,o){n&&(this.font=n),s&&(this.fillStyle=s),this.textBaseline="top",this.lineWidth=o,this.textAlign="left",this.strokeStyle=r;for(var a=0,h=t.length;h>a;a++){var l=t[a];this.strokeText(l.char,l.x+e,l.y+i),this.fillText(l.char,l.x+e,l.y+i)}},e.strokeWord=function(t,e,i,n,s,r,o){be.drawCall++,arguments.length>3&&null!=n&&(this.font=n,this.strokeStyle=s,this.lineWidth=r,this.textAlign=o,this.textBaseline="top"),this.strokeText(t,e,i)},e.setTransformByMatrix=function(t){this.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clipRect=function(t,e,i,n){be.drawCall++,this.beginPath(),this.rect(t,e,i,n),this.clip()},e.drawTextureWithTransform=function(t,e,i,n,s,r,o,a,h,l){if(t.getEnabled()){be.drawCall++;var u=1!==h;if(u){var c=this.globalAlpha;this.globalAlpha*=h}l&&(this.globalCompositeOperation=l);var _=t.uv,d=t.bitmap._width,f=t.bitmap._height;r?(this.save(),this.transform(r.a,r.b,r.c,r.d,r.tx+o,r.ty+a),this.drawImage(t.bitmap._source,_[0]*d,_[1]*f,(_[2]-_[0])*d,(_[5]-_[3])*f,e,i,n,s),this.restore()):this.drawImage(t.bitmap._source,_[0]*d,_[1]*f,(_[2]-_[0])*d,(_[5]-_[3])*f,o+e,a+i,n,s),u&&(this.globalAlpha=c),l&&(this.globalCompositeOperation="source-over")}},e.drawTexture2=function(t,e,i,n,s,r){var o=r[0];if(o.getEnabled()){be.drawCall++;var a=o.uv,h=o.bitmap._width,l=o.bitmap._height;s?(this.save(),this.transform(s.a,s.b,s.c,s.d,s.tx+t,s.ty+e),this.drawImage(o.bitmap._source,a[0]*h,a[1]*l,(a[2]-a[0])*h,(a[5]-a[3])*l,r[1]-i,r[2]-n,r[3],r[4]),this.restore()):this.drawImage(o.bitmap._source,a[0]*h,a[1]*l,(a[2]-a[0])*h,(a[5]-a[3])*l,r[1]-i+t,r[2]-n+e,r[3],r[4])}},e.fillTexture=function(t,e,i,n,s,r,o,a){if(!a.pat){if(t.uv!=Ye.DEF_UV){var h=new ti;h.getContext("2d"),h.size(t.width,t.height),h.context.drawTexture(t,0,0,t.width,t.height),t=new Ye(h)}a.pat=this.createPattern(t.bitmap.source,r)}var l=e,u=i,c=0,_=0;o&&(l+=o.x%t.width,u+=o.y%t.height,c-=o.x%t.width,_-=o.y%t.height),this.translate(l,u),this._drawRect(c,_,n,s,a.pat),this.translate(-l,-u)},e.flush=function(){return 0},e.destroy=function(){this.canvas.width=this.canvas.height=0},e.clear=function(){he.isConchApp||this.clearRect(0,0,he._mainCanvas.width,he._mainCanvas.height)},e.drawTriangle=function(t,e,i,n,s,r,o,a){var h=t.bitmap,l=h._getSource(),u=t.width,c=t.height,_=h.width,d=h.height,f=i[n]*_,p=i[s]*_,g=i[r]*_,m=i[n+1]*d,v=i[s+1]*d,y=i[r+1]*d,x=e[n],w=e[s],T=e[r],C=e[n+1],b=e[s+1],S=e[r+1];if(a){var M=1,I=1,P=(x+w+T)/3,D=(C+b+S)/3,A=x-P,L=C-D,E=Math.sqrt(A*A+L*L);x=P+A/E*(E+M),C=D+L/E*(E+I),A=w-P,L=b-D,E=Math.sqrt(A*A+L*L),w=P+A/E*(E+M),b=D+L/E*(E+I),A=T-P,L=S-D,E=Math.sqrt(A*A+L*L),T=P+A/E*(E+M),S=D+L/E*(E+I)}this.save(),o&&this.transform(o.a,o.b,o.c,o.d,o.tx,o.ty),this.beginPath(),this.moveTo(x,C),this.lineTo(w,b),this.lineTo(T,S),this.closePath(),this.clip();var R=f*v+m*g+p*y-v*g-m*p-f*y,F=1/R,O=x*v+m*T+w*y-v*T-m*w-x*y,B=f*w+x*g+p*T-w*g-x*p-f*T,k=f*v*T+m*w*g+x*p*y-x*v*g-m*p*T-f*w*y,N=C*v+m*S+b*y-v*S-m*b-C*y,W=f*b+C*g+p*S-b*g-C*p-f*S,U=f*v*S+m*b*g+C*p*y-C*v*g-m*p*S-f*b*y;this.transform(O*F,N*F,B*F,W*F,k*F,U*F),this.drawImage(l,t.uv[0]*_,t.uv[1]*d,u,c,t.uv[0]*_,t.uv[1]*d,u,c),this.restore()},e.transformByMatrix=function(t,e,i){this.transform(t.a,t.b,t.c,t.d,t.tx+e,t.ty+i)},e.saveTransform=function(){this.save()},e.restoreTransform=function(){this.restore()},e.drawRect=function(t,e,i,n,s,r,o){var a=this;null!=s&&(a.fillStyle=s,a.fillRect(t,e,i,n)),null!=r&&(a.strokeStyle=r,a.lineWidth=o,a.strokeRect(t,e,i,n))},e.drawTexture=function(t,e,i,n,s){if(t.loaded){be.drawCall++;var r=t.uv,o=t.bitmap.width,a=t.bitmap.height;this.drawImage(t.bitmap._source,r[0]*o,r[1]*a,(r[2]-r[0])*o,(r[5]-r[3])*a,e,i,n,s)}},e.drawTextures=function(t,e,i,n){be.drawCall+=e.length/2;for(var s=t.width,r=t.height,o=0,a=e.length;a>o;o+=2)this.drawTexture(t,e[o]+i,e[o+1]+n,s,r)},e.drawTriangles=function(t,e,i,n,s,r,o){var a=0,h=r.length;for(this.translate(e,i),a=0;h>a;a+=3){var l=2*r[a],u=2*r[a+1],c=2*r[a+2];this.drawTriangle(t,n,s,l,u,c,o,!0)}this.translate(-e,-i)},e.alpha=function(t){this.globalAlpha*=t},e._transform=function(t,e,i){this.translate(e,i),this.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),this.translate(-e,-i)},e._rotate=function(t,e,i){this.translate(e,i),this.rotate(t),this.translate(-e,-i)},e._scale=function(t,e,i,n){this.translate(i,n),this.scale(t,e),this.translate(-i,-n)},e._drawLine=function(t,e,i,n,s,r,o,a){this.ctx;this.beginPath(),this.strokeStyle=o,this.lineWidth=a,this.moveTo(t+i,e+n),this.lineTo(t+s,e+r),this.stroke()},e._drawLines=function(t,e,i,n,s,r){he.isWebGL&&this.setPathId(r),this.beginPath(),this.strokeStyle=n,this.lineWidth=s;var o=2,a=i.length;if(he.isWebGL)this.addPath(i.slice(),!1,!1,t,e);else for(this.moveTo(t+i[0],e+i[1]);a>o;)this.lineTo(t+i[o++],e+i[o++]);this.stroke()},e.drawCurves=function(t,e,i,n,s){this.beginPath(),this.strokeStyle=n,this.lineWidth=s,this.moveTo(t+i[0],e+i[1]);for(var r=2,o=i.length;o>r;)this.quadraticCurveTo(t+i[r++],e+i[r++],t+i[r++],e+i[r++]);this.stroke()},e._fillAndStroke=function(t,e,i,n){void 0===n&&(n=!1),null!=t&&(this.fillStyle=t,this.fill()),null!=e&&i>0&&(this.strokeStyle=e,this.lineWidth=i,this.stroke())},e._drawCircle=function(e,i,n,s,r,o){be.drawCall++,he.isWebGL?this.beginPath(!0):this.beginPath(),this.arc(e,i,n,0,t.PI2),this.closePath(),this._fillAndStroke(s,r,o)},e._drawPie=function(t,e,i,n,s,r,o,a){this.beginPath(),this.moveTo(t,e),this.arc(t,e,i,n,s),this.closePath(),this._fillAndStroke(r,o,a)},e._drawPoly=function(t,e,i,n,s,r,o,a){var h=2,l=i.length;if(this.beginPath(),he.isWebGL)this.setPathId(a),this.addPath(i.slice(),!0,o,t,e);else for(this.moveTo(t+i[0],e+i[1]);l>h;)this.lineTo(t+i[h++],e+i[h++]);this.closePath(),this._fillAndStroke(n,s,r,o)},e._drawPath=function(t,e,i,n,s){this.ctx;this.beginPath();for(var r=0,o=i.length;o>r;r++){var a=i[r];switch(a[0]){case"moveTo":this.moveTo(t+a[1],e+a[2]);break;case"lineTo":this.lineTo(t+a[1],e+a[2]);break;case"arcTo":this.arcTo(t+a[1],e+a[2],t+a[3],e+a[4],a[5]);break;case"closePath":this.closePath()}}null!=n&&(this.fillStyle=n.fillStyle,this.fill()),null!=s&&(this.strokeStyle=s.strokeStyle,this.lineWidth=s.lineWidth||1,this.lineJoin=s.lineJoin,this.lineCap=s.lineCap,this.miterLimit=s.miterLimit,this.stroke())},e.drawParticle=function(){},t.__init__=function(t){var e=laya.resource.Context.prototype;if(t=t||CanvasRenderingContext2D.prototype,!t.init2d){t.init2d=!0;var i=["saveTransform","restoreTransform","transformByMatrix","drawTriangles","drawTriangle","drawTextures","fillWords","fillBorderWords","drawRect","strokeWord","drawText","fillTexture","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves","_drawRect","alpha","_transform","_rotate","_scale","_drawLine","_drawLines","_drawCircle","_fillAndStroke","_drawPie","_drawPoly","_drawPath","drawTextureWithTransform"];i.forEach(function(i){t[i]=e[i]})}},t.ENUM_TEXTALIGN_DEFAULT=0,t.ENUM_TEXTALIGN_CENTER=1,t.ENUM_TEXTALIGN_RIGHT=2,t.PI2=2*Math.PI,t}(),ce=function(){function t(e){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._id=++t._uniqueIDCounter,this._name=e?e:"Content Manager",t._isResourceManagersSorted=!1,this._memorySize=0,t._resourceManagers.push(this),this._resources=[]}s(t,"laya.resource.ResourceManager");var e=t.prototype;return i.imps(e,{"laya.resource.IDispose":!0}),e.getResourceByIndex=function(t){return this._resources[t]},e.getResourcesLength=function(){return this._resources.length},e.addResource=function(t){t.resourceManager&&t.resourceManager.removeResource(t);var e=this._resources.indexOf(t);return-1===e?(t._resourceManager=this,this._resources.push(t),this.addSize(t.gpuMemory),!0):!1},e.removeResource=function(t){var e=this._resources.indexOf(t);return-1!==e?(this._resources.splice(e,1),t._resourceManager=null,this._memorySize-=t.gpuMemory,!0):!1},e.unload=function(){for(var t=this._resources.slice(0,this._resources.length),e=0;e<t.length;e++){var i=t[e];i.destroy()}t.length=0},e.dispose=function(){if(this===t._systemResourceManager)throw new Error("systemResourceManager不能被释放！");t._resourceManagers.splice(t._resourceManagers.indexOf(this),1),t._isResourceManagersSorted=!1;for(var e=this._resources.slice(0,this._resources.length),i=0;i<e.length;i++){var n=e[i];n.resourceManager.removeResource(n),n.destroy()}e.length=0},e.addSize=function(t){t&&(this._memorySize+=t)},r(0,e,"id",function(){return this._id}),r(0,e,"name",function(){return this._name},function(e){!e&&""===e||this._name===e||(this._name=e,t._isResourceManagersSorted=!1)}),r(0,e,"memorySize",function(){return this._memorySize}),r(1,t,"systemResourceManager",function(){return t._systemResourceManager}),t.__init__=function(){t.currentResourceManager=t.systemResourceManager},t.getLoadedResourceManagerByIndex=function(e){return t._resourceManagers[e]},t.getLoadedResourceManagersCount=function(){return t._resourceManagers.length},t.recreateContentManagers=function(t){void 0===t&&(t=!1)},t.releaseContentManagers=function(e){void 0===e&&(e=!1);for(var i=t.currentResourceManager,n=0;n<t._resourceManagers.length;n++){t.currentResourceManager=t._resourceManagers[n];for(var s=0;s<t.currentResourceManager._resources.length;s++){var r=t.currentResourceManager._resources[s];!r.released&&r.releaseResource(e)}}t.currentResourceManager=i},t._uniqueIDCounter=0,t._isResourceManagersSorted=!1,t._resourceManagers=[],n(t,["_systemResourceManager",function(){return this._systemResourceManager=new t("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=t._systemResourceManager}]),t}(),_e=(function(){function e(){}return s(e,"laya.system.System"),e.changeDefinition=function(t,e){i[t]=e;var n=t+"=classObj";i._runScript(n)},e.__init__=function(){he.isConchApp&&t.conch&&(t.conch.disableConchResManager(),t.conch.disableConchAutoRestoreLostedDevice())},e}(),function(){function e(){}return s(e,"laya.utils.Browser"),r(1,e,"pixelRatio",function(){if(e._pixelRatio<0)if(e.__init__(),e.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")>-1)e._pixelRatio=2;else{var t=e.context,i=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;e._pixelRatio=(e._window.devicePixelRatio||1)/i,e._pixelRatio<1&&(e._pixelRatio=1)}return e._pixelRatio}),r(1,e,"height",function(){return e.__init__(),(i.stage&&i.stage.canvasRotation?e.clientWidth:e.clientHeight)*e.pixelRatio}),r(1,e,"clientWidth",function(){return e.__init__(),e._window.innerWidth||e._document.body.clientWidth}),r(1,e,"window",function(){return e._window||e.__init__()}),r(1,e,"clientHeight",function(){return e.__init__(),e._window.innerHeight||e._document.body.clientHeight||e._document.documentElement.clientHeight}),r(1,e,"width",function(){return e.__init__(),(i.stage&&i.stage.canvasRotation?e.clientHeight:e.clientWidth)*e.pixelRatio}),r(1,e,"container",function(){return e._container||(e.__init__(),e._container=e.createElement("div"),e._container.id="layaContainer",e._document.body.appendChild(e._container)),e._container},function(t){e._container=t}),r(1,e,"document",function(){return e.__init__(),e._document}),e.__init__=function(){if(e._window)return e._window;var i=e._window=t,n=e._document=i.document;i.trace=console.log,i.requestAnimationFrame=i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.oRequestAnimationFrame||i.msRequestAnimationFrame||function(t){return i.setTimeout(t,1e3/60)};var s=n.body.style;s.margin=0,s.overflow="hidden",s["-webkit-user-select"]="none",s["-webkit-tap-highlight-color"]="rgba(200,200,200,0)";for(var r=n.getElementsByTagName("meta"),o=0,a=!1,h="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no";o<r.length;){var l=r[o];if("viewport"==l.name){l.content=h,a=!0;break}o++}a||(l=n.createElement("meta"),l.name="viewport",l.content=h,n.getElementsByTagName("head")[0].appendChild(l));var u=e.userAgent=i.navigator.userAgent;e.onMobile=u.indexOf("Mobile")>-1,e.onIOS=!!u.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),e.onIPhone=u.indexOf("iPhone")>-1,e.onMac=u.indexOf("Mac OS X")>-1,e.onIPad=u.indexOf("iPad")>-1,e.onAndroid=u.indexOf("Android")>-1||u.indexOf("Adr")>-1,e.onWP=u.indexOf("Windows Phone")>-1,e.onQQBrowser=u.indexOf("QQBrowser")>-1,e.onMQQBrowser=u.indexOf("MQQBrowser")>-1||u.indexOf("Mobile")>-1&&u.indexOf("QQ")>-1,e.onIE=!!i.ActiveXObject||"ActiveXObject"in i,e.onWeiXin=u.indexOf("MicroMessenger")>-1,e.onSafari=u.indexOf("Safari")>-1,e.onPC=!e.onMobile,e.onMiniGame=u.indexOf("MiniGame")>-1,e.onLimixiu=u.indexOf("limixiu")>-1,e.supportLocalStorage=re.__init__(),e.supportWebAudio=ne.__init__(),he._mainCanvas=new ti;var c=he._mainCanvas.source.style;return c.position="absolute",c.top=c.left="0px",c.background="#000000",e.canvas=new ti,e.context=e.canvas.getContext("2d"),i},e.createElement=function(t){return e.__init__(),e._document.createElement(t)},e.getElementById=function(t){return e.__init__(),e._document.getElementById(t)},e.removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},e.now=function(){return Date.now()},e.userAgent=null,e.onMobile=!1,e.onIOS=!1,e.onMac=!1,e.onIPhone=!1,e.onIPad=!1,e.onAndroid=!1,e.onWP=!1,e.onQQBrowser=!1,e.onMQQBrowser=!1,e.onSafari=!1,e.onIE=!1,e.onWeiXin=!1,e.onPC=!1,e.onMiniGame=!1,e.onLimixiu=!1,e.onFirefox=!1,e.onEdge=!1,e.supportWebAudio=!1,e.supportLocalStorage=!1,e.canvas=null,e.context=null,e._window=null,e._document=null,e._container=null,e._pixelRatio=-1,e}()),de=function(){function t(t){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,t?(this._u8d_=new Uint8Array(t),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this._resizeBuffer(this._allocated_)}s(t,"laya.utils.Byte");var e=t.prototype;return e._resizeBuffer=function(t){try{var e=new Uint8Array(t);null!=this._u8d_&&(this._u8d_.length<=t?e.set(this._u8d_):e.set(this._u8d_.subarray(0,t))),this._u8d_=e,this._d_=new DataView(e.buffer)}catch(i){throw"Invalid typed array length:"+t}},e.getString=function(){return this.readString()},e.readString=function(){return this._rUTF(this.getUint16())},e.getFloat32Array=function(t,e){return this.readFloat32Array(t,e)},e.readFloat32Array=function(t,e){var i=t+e;i=i>this._length?this._length:i;var n=new Float32Array(this._d_.buffer.slice(t,i));return this._pos_=i,n},e.getUint8Array=function(t,e){return this.readUint8Array(t,e)},e.readUint8Array=function(t,e){var i=t+e;i=i>this._length?this._length:i;var n=new Uint8Array(this._d_.buffer.slice(t,i));return this._pos_=i,n},e.getInt16Array=function(t,e){return this.readInt16Array(t,e)},e.readInt16Array=function(t,e){var i=t+e;i=i>this._length?this._length:i;var n=new Int16Array(this._d_.buffer.slice(t,i));return this._pos_=i,n},e.getFloat32=function(){return this.readFloat32()},e.readFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var t=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,t},e.getFloat64=function(){return this.readFloat64()},e.readFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var t=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,t},e.writeFloat32=function(t){this._ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,t,this._xd_),this._pos_+=4},e.writeFloat64=function(t){this._ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,t,this._xd_),this._pos_+=8},e.getInt32=function(){return this.readInt32()},e.readInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var t=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,t},e.getUint32=function(){return this.readUint32()},e.readUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var t=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,t},e.writeInt32=function(t){this._ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,t,this._xd_),this._pos_+=4},e.writeUint32=function(t){this._ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,t,this._xd_),this._pos_+=4},e.getInt16=function(){return this.readInt16()},e.readInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var t=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,t},e.getUint16=function(){return this.readUint16()},e.readUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var t=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,t},e.writeUint16=function(t){this._ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,t,this._xd_),this._pos_+=2},e.writeInt16=function(t){this._ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,t,this._xd_),this._pos_+=2},e.getUint8=function(){return this.readUint8()},e.readUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},e.writeUint8=function(t){this._ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,t),this._pos_++},e._getUInt8=function(t){return this._readUInt8(t)},e._readUInt8=function(t){return this._d_.getUint8(t)},e._getUint16=function(t){return this._readUint16(t)},e._readUint16=function(t){return this._d_.getUint16(t,this._xd_)},e._getMatrix=function(){return this._readMatrix()},e._readMatrix=function(){var t=new te(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32());return t},e._rUTF=function(t){for(var e="",i=this._pos_+t,n=0,s=0,r=0,o=String.fromCharCode,a=this._u8d_,h=0;this._pos_<i;)n=a[this._pos_++],128>n?0!=n&&(e+=o(n)):224>n?e+=o((63&n)<<6|127&a[this._pos_++]):240>n?(s=a[this._pos_++],e+=o((31&n)<<12|(127&s)<<6|127&a[this._pos_++])):(s=a[this._pos_++],r=a[this._pos_++],e+=o((15&n)<<18|(127&s)<<12|r<<6&127|127&a[this._pos_++])),h++;return e},e.getCustomString=function(t){return this.readCustomString(t)},e.readCustomString=function(t){for(var e="",i=0,n=0,s=0,r=String.fromCharCode,o=this._u8d_;t>0;)if(n=o[this._pos_],128>n)e+=r(n),this._pos_++,t--;else for(i=n-128,this._pos_++,t-=i;i>0;)n=o[this._pos_++],s=o[this._pos_++],e+=r(s<<8|n),i--;return e},e.clear=function(){this._pos_=0,this.length=0},e.__getBuffer=function(){return this._d_.buffer},e.writeUTFBytes=function(t){t+="";for(var e=0,i=t.length;i>e;e++){var n=t.charCodeAt(e);127>=n?this.writeByte(n):2047>=n?(this._ensureWrite(this._pos_+2),this._u8d_.set([192|n>>6,128|63&n],this._pos_),this._pos_+=2):65535>=n?(this._ensureWrite(this._pos_+3),this._u8d_.set([224|n>>12,128|n>>6&63,128|63&n],this._pos_),this._pos_+=3):(this._ensureWrite(this._pos_+4),this._u8d_.set([240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n],this._pos_),this._pos_+=4)}},e.writeUTFString=function(t){var e=this.pos;this.writeUint16(1),this.writeUTFBytes(t);var i=this.pos-e-2;this._d_.setUint16(e,i,this._xd_)},e.readUTFString=function(){return this.readUTFBytes(this.getUint16())},e.getUTFString=function(){return this.readUTFString()},e.readUTFBytes=function(t){if(void 0===t&&(t=-1),0===t)return"";var e=this.bytesAvailable;if(t>e)throw"readUTFBytes error - Out of bounds";return t=t>0?t:e,this._rUTF(t)},e.getUTFBytes=function(t){return void 0===t&&(t=-1),this.readUTFBytes(t)},e.writeByte=function(t){this._ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,t),this._pos_+=1},e.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},e.getByte=function(){return this.readByte()},e._ensureWrite=function(t){this._length<t&&(this._length=t),this._allocated_<t&&(this.length=t)},e.writeArrayBuffer=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),0>e||0>i)throw"writeArrayBuffer error - Out of bounds";0==i&&(i=t.byteLength-e),this._ensureWrite(this._pos_+i);var n=new Uint8Array(t);this._u8d_.set(n.subarray(e,e+i),this._pos_),this._pos_+=i},r(0,e,"buffer",function(){var t=this._d_.buffer;return t.byteLength===this._length?t:t.slice(0,this._length)}),r(0,e,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(t){this._xd_="littleEndian"===t}),r(0,e,"length",function(){return this._length},function(t){this._allocated_<t?this._resizeBuffer(this._allocated_=Math.floor(Math.max(t,2*this._allocated_))):this._allocated_>t&&this._resizeBuffer(this._allocated_=t),this._length=t}),r(0,e,"pos",function(){return this._pos_},function(t){this._pos_=t}),r(0,e,"bytesAvailable",function(){return this._length-this._pos_}),t.getSystemEndian=function(){if(!t._sysEndian){var e=new ArrayBuffer(2);new DataView(e).setInt16(0,256,!0),t._sysEndian=256===new Int16Array(e)[0]?"littleEndian":"bigEndian"}return t._sysEndian},t.BIG_ENDIAN="bigEndian",t.LITTLE_ENDIAN="littleEndian",t._sysEndian=null,t}(),fe=function(){function t(){}return s(t,"laya.utils.CacheManger"),t.regCacheByFunction=function(e,i){t.unRegCacheByFunction(e,i);var n;n={tryDispose:e,getCacheList:i},t._cacheList.push(n)},t.unRegCacheByFunction=function(e,i){var n=0,s=0;for(s=t._cacheList.length,n=0;s>n;n++)if(t._cacheList[n].tryDispose==e&&t._cacheList[n].getCacheList==i)return t._cacheList.splice(n,1),void 0},t.forceDispose=function(){var e=0,i=t._cacheList.length;for(e=0;i>e;e++)t._cacheList[e].tryDispose(!0)},t.beginCheck=function(e){void 0===e&&(e=15e3),i.timer.loop(e,null,t._checkLoop)},t.stopCheck=function(){i.timer.clear(null,t._checkLoop)},t._checkLoop=function(){var e=t._cacheList;if(!(e.length<1)){var i=_e.now(),n=0,s=0;for(s=n=e.length;n>0&&(t._index++,t._index=t._index%s,e[t._index].tryDispose(!1),!(_e.now()-i>t.loopTimeLimit));)n--}},t.loopTimeLimit=2,t._cacheList=[],t._index=0,t}(),pe=function(){function t(){}return s(t,"laya.utils.ClassUtils"),t.regClass=function(e,i){t._classMap[e]=i},t.regShortClassName=function(e){for(var i=0;i<e.length;i++){var n=e[i],s=n.name;t._classMap[s]=n}},t.getRegClass=function(e){return t._classMap[e]},t.getClass=function(e){var n=t._classMap[e]||e;return"string"==typeof n?i.__classmap[n]||i[e]:n},t.getInstance=function(e){var i=t.getClass(e);return i?new i:(console.warn("[error] Undefined class:",e),null)},t.createByJson=function(e,i,n,s,r){"string"==typeof e&&(e=JSON.parse(e));var o=e.props;if(!i&&(i=r?r.runWith(e):t.getInstance(o.runtime||e.type),!i))return null;var a=e.child;if(a)for(var h=0,l=a.length;l>h;h++){var u=a[h];if("render"!==u.props.name&&"render"!==u.props.renderType||!i._$set_itemRender)if("Graphic"==u.type)t._addGraphicsToSprite(u,i);else if(t._isDrawType(u.type))t._addGraphicToSprite(u,i,!0);else{var c=t.createByJson(u,null,n,s,r);"Script"===u.type?c.hasOwnProperty("owner")?c.owner=i:c.hasOwnProperty("target")&&(c.target=i):"mask"==u.props.renderType?i.mask=c:i.addChild(c)}else i.itemRender=u}if(o)for(var _ in o){var d=o[_];"var"===_&&n?n[d]=i:d instanceof Array&&"function"==typeof i[_]?i[_].apply(i,d):i[_]=d}return s&&e.customProps&&s.runWith([i,e]),i.created&&i.created(),i},t._addGraphicsToSprite=function(e,i){var n=e.child;if(n&&!(n.length<1)){var s=t._getGraphicsFromSprite(e,i),r=0,o=0;e.props&&(r=t._getObjVar(e.props,"x",0),o=t._getObjVar(e.props,"y",0)),0!=r&&0!=o&&s.translate(r,o);var a=0,h=0;for(h=n.length,a=0;h>a;a++)t._addGraphicToGraphics(n[a],s);0!=r&&0!=o&&s.translate(-r,-o)}},t._addGraphicToSprite=function(e,i,n){void 0===n&&(n=!1);var s=n?t._getGraphicsFromSprite(e,i):i.graphics;t._addGraphicToGraphics(e,s)},t._getGraphicsFromSprite=function(t,e){if(!t||!t.props)return e.graphics;var i=t.props.renderType;if("hit"===i||"unHit"===i){var n=e._style.hitArea||(e.hitArea=new ye);n[i]||(n[i]=new H);var s=n[i]}return s||(s=e.graphics),s},t._getTransformData=function(e){var i;(e.hasOwnProperty("pivotX")||e.hasOwnProperty("pivotY"))&&(i=i||new te,i.translate(-t._getObjVar(e,"pivotX",0),-t._getObjVar(e,"pivotY",0)));{var n=t._getObjVar(e,"scaleX",1),s=t._getObjVar(e,"scaleY",1),r=t._getObjVar(e,"rotation",0);t._getObjVar(e,"skewX",0),t._getObjVar(e,"skewY",0)}return(1!=n||1!=s||0!=r)&&(i=i||new te,i.scale(n,s),i.rotate(.0174532922222222*r)),i},t._addGraphicToGraphics=function(e,i){var n;if(n=e.props){var s;if(s=t.DrawTypeDic[e.type]){var r=i,o=t._getParams(n,s[1],s[2],s[3]),a=t._tM;(a||1!=t._alpha)&&(r.save(),a&&r.transform(a),1!=t._alpha&&r.alpha(t._alpha)),r[s[0]].apply(r,o),(a||1!=t._alpha)&&r.restore()}}},t._adptLineData=function(t){return t[2]=parseFloat(t[0])+parseFloat(t[2]),t[3]=parseFloat(t[1])+parseFloat(t[3]),t},t._adptTextureData=function(t){return t[0]=ke.getRes(t[0]),t},t._adptLinesData=function(e){return e[2]=t._getPointListByStr(e[2]),e},t._isDrawType=function(e){return"Image"===e?!1:t.DrawTypeDic.hasOwnProperty(e)},t._getParams=function(e,i,n,s){void 0===n&&(n=0);var r=t._temParam;r.length=i.length;var o=0,a=0;for(a=i.length,o=0;a>o;o++)r[o]=t._getObjVar(e,i[o][0],i[o][1]);t._alpha=t._getObjVar(e,"alpha",1);var h;return h=t._getTransformData(e),h?(n||(n=0),h.translate(r[n],r[n+1]),r[n]=r[n+1]=0,t._tM=h):t._tM=null,s&&t[s]&&(r=t[s](r)),r},t._getPointListByStr=function(t){var e=t.split(","),i=0,n=0;for(n=e.length,i=0;n>i;i++)e[i]=parseFloat(e[i]);return e},t._getObjVar=function(t,e,i){return t.hasOwnProperty(e)?t[e]:i},t._temParam=[],t._classMap={Sprite:ze,Scene:Qe,Text:qe,Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivParser",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement",link:"laya.html.dom.HTMLLinkElement"},t._tM=null,t._alpha=0/0,n(t,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),t}(),ge=function(){function t(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}s(t,"laya.utils.Dragging");var e=t.prototype;return e.start=function(t,e,n,s,r,o,a,h){void 0===h&&(h=.92),this.clearTimer(),this.target=t,this.area=e,this.hasInertia=n,this.elasticDistance=e?s:0,this.elasticBackTime=r,this.data=o,this._disableMouseEvent=a,this.ratio=h,this._parent=1!=t.globalScaleX||1!=t.globalScaleY?t.parent:i.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,i.stage.on("mouseup",this,this.onStageMouseUp),i.stage.on("mouseout",this,this.onStageMouseUp),i.timer.frameLoop(1,this,this.loop)},e.clearTimer=function(){i.timer.clear(this,this.loop),i.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},e.stop=function(){this._dragging&&(j.instance.disableMouseEvent=!1,i.stage.off("mouseup",this,this.onStageMouseUp),i.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},e.loop=function(){var t=this._parent.getMousePoint(),e=t.x,n=t.y,s=e-this._lastX,r=n-this._lastY;if(this._clickOnly){if(!(Math.abs(s*i.stage._canvasTransform.getScaleX())>1||Math.abs(r*i.stage._canvasTransform.getScaleY())>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),j.instance.disableMouseEvent=this._disableMouseEvent}else this._offsets.push(s,r);(0!==s||0!==r)&&(this._lastX=e,this._lastY=n,this.target.x+=s*this._elasticRateX,this.target.y+=r*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},e.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target._x<this.area.x)var t=this.area.x-this.target._x;else t=this.target._x>this.area.x+this.area.width?this.target._x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-t/this.elasticDistance),this.target._y<this.area.y)var e=this.area.y-this.target.y;else e=this.target._y>this.area.y+this.area.height?this.target._y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-e/this.elasticDistance)}},e.backToArea=function(){this.target.x=Math.min(Math.max(this.target._x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target._y,this.area.y),this.area.y+this.area.height)},e.onStageMouseUp=function(){if(j.instance.disableMouseEvent=!1,i.stage.off("mouseup",this,this.onStageMouseUp),i.stage.off("mouseout",this,this.onStageMouseUp),i.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var t=this._offsets.length,e=Math.min(t,6),n=this._offsets.length-e,s=t-1;s>n;s--)this._offsetY+=this._offsets[s--],this._offsetX+=this._offsets[s];
this._offsetX=this._offsetX/e*2,this._offsetY=this._offsetY/e*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=this._offsetX>0?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=this._offsetY>0?this.maxOffset:-this.maxOffset),i.timer.frameLoop(1,this,this.tweenMove)}else this.elasticDistance>0?this.checkElastic():this.clear()},e.checkElastic=function(){var t=0/0,e=0/0;if(this.target.x<this.area.x?t=this.area.x:this.target._x>this.area.x+this.area.width&&(t=this.area.x+this.area.width),this.target.y<this.area.y?e=this.area.y:this.target._y>this.area.y+this.area.height&&(e=this.area.y+this.area.height),isNaN(t)&&isNaN(e))this.clear();else{var i={};isNaN(t)||(i.x=t),isNaN(e)||(i.y=e),this._tween=Me.to(this.target,i,this.elasticBackTime,me.sineOut,_.create(this,this.clear),0,!1,!1)}},e.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(i.timer.clear(this,this.tweenMove),this.elasticDistance>0?this.checkElastic():this.clear())},e.clear=function(){if(this.target){this.clearTimer();var t=this.target;this.target=null,this._parent=null,t.event("dragend",this.data)}},t}(),me=function(){function t(){}return s(t,"laya.utils.Ease"),t.linearNone=function(t,e,i,n){return i*t/n+e},t.linearIn=function(t,e,i,n){return i*t/n+e},t.linearInOut=function(t,e,i,n){return i*t/n+e},t.linearOut=function(t,e,i,n){return i*t/n+e},t.bounceIn=function(e,i,n,s){return n-t.bounceOut(s-e,0,n,s)+i},t.bounceInOut=function(e,i,n,s){return.5*s>e?.5*t.bounceIn(2*e,0,n,s)+i:.5*t.bounceOut(2*e-s,0,n,s)+.5*n+i},t.bounceOut=function(t,e,i,n){return(t/=n)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t.backIn=function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},t.backInOut=function(t,e,i,n,s){return void 0===s&&(s=1.70158),(t/=.5*n)<1?.5*i*t*t*(((s*=1.525)+1)*t-s)+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},t.backOut=function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},t.elasticIn=function(e,i,n,s,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var a;return 0==e?i:1==(e/=s)?i+n:(o||(o=.3*s),!r||n>0&&n>r||0>n&&-n>r?(r=n,a=o/4):a=o/t.PI2*Math.asin(n/r),-(r*Math.pow(2,10*(e-=1))*Math.sin((e*s-a)*t.PI2/o))+i)},t.elasticInOut=function(e,i,n,s,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var a;return 0==e?i:2==(e/=.5*s)?i+n:(o||(o=.3*s*1.5),!r||n>0&&n>r||0>n&&-n>r?(r=n,a=o/4):a=o/t.PI2*Math.asin(n/r),1>e?-.5*r*Math.pow(2,10*(e-=1))*Math.sin((e*s-a)*t.PI2/o)+i:r*Math.pow(2,-10*(e-=1))*Math.sin((e*s-a)*t.PI2/o)*.5+n+i)},t.elasticOut=function(e,i,n,s,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var a;return 0==e?i:1==(e/=s)?i+n:(o||(o=.3*s),!r||n>0&&n>r||0>n&&-n>r?(r=n,a=o/4):a=o/t.PI2*Math.asin(n/r),r*Math.pow(2,-10*e)*Math.sin((e*s-a)*t.PI2/o)+n+i)},t.strongIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.strongInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.strongOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.sineInOut=function(t,e,i,n){return.5*-i*(Math.cos(Math.PI*t/n)-1)+e},t.sineIn=function(e,i,n,s){return-n*Math.cos(e/s*t.HALF_PI)+n+i},t.sineOut=function(e,i,n,s){return n*Math.sin(e/s*t.HALF_PI)+i},t.quintIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.quintInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.quintOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.quartIn=function(t,e,i,n){return i*(t/=n)*t*t*t+e},t.quartInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t+e:.5*-i*((t-=2)*t*t*t-2)+e},t.quartOut=function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},t.cubicIn=function(t,e,i,n){return i*(t/=n)*t*t+e},t.cubicInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t+e:.5*i*((t-=2)*t*t+2)+e},t.cubicOut=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},t.quadIn=function(t,e,i,n){return i*(t/=n)*t+e},t.quadInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t+e:.5*-i*(--t*(t-2)-1)+e},t.quadOut=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},t.expoIn=function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e-.001*i},t.expoInOut=function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=.5*n)<1?.5*i*Math.pow(2,10*(t-1))+e:.5*i*(-Math.pow(2,-10*--t)+2)+e},t.expoOut=function(t,e,i,n){return t==n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e},t.circIn=function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},t.circInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*-i*(Math.sqrt(1-t*t)-1)+e:.5*i*(Math.sqrt(1-(t-=2)*t)+1)+e},t.circOut=function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},t.HALF_PI=.5*Math.PI,t.PI2=2*Math.PI,t}(),ve=function(){function t(e){this._font="14px Arial",this._family="Arial",this._size=14,this._italic=!1,this._bold=!1,this._id=t._gfontID++,this.setFont(e||this._font)}s(t,"laya.utils.FontInfo");var e=t.prototype;return e.setFont=function(t){this._font=t;var e=t.split(" "),i=e.length;if(2>i)return 1==i&&e[0].indexOf("px")>0&&(this._size=parseInt(e[0])),void 0;for(var n=-1,s=0;i>s;s++)if(e[s].indexOf("px")>0||e[s].indexOf("pt")>0){n=s,this._size=parseInt(e[s]),this._size<=0&&(console.error("font parse error:"+t),this._size=14);break}var r=n+1,o=e[r];for(r++;i>r;r++)o+=" "+e[r];this._family=o.split(",")[0],this._italic=e.indexOf("italic")>=0,this._bold=e.indexOf("bold")>=0},t.Parse=function(e){if(e===t._lastFont)return t._lastFontInfo;var i=t._cache[e];return i||(i=t._cache[e]=new t(e)),t._lastFont=e,t._lastFontInfo=i,i},t.EMPTY=new t(null),t._cache={},t._gfontID=0,t._lastFont="",t._lastFontInfo=null,t}(),ye=function(){function t(){this._hit=null,this._unHit=null}s(t,"laya.utils.HitArea");var e=t.prototype;return e.contains=function(e,i){return t._isHitGraphic(e,i,this.hit)?!t._isHitGraphic(e,i,this.unHit):!1},r(0,e,"hit",function(){return this._hit||(this._hit=new H),this._hit},function(t){this._hit=t}),r(0,e,"unHit",function(){return this._unHit||(this._unHit=new H),this._unHit},function(t){this._unHit=t}),t._isHitGraphic=function(e,i,n){if(!n)return!1;var s=n.cmds;if(!s&&n._one&&(s=t._cmds,s.length=1,s[0]=n._one),!s)return!1;var r=0,o=0;o=s.length;var a;for(r=0;o>r;r++)if(a=s[r]){switch(a.cmdID){case"Translate":e-=a.tx,i-=a.ty}if(t._isHitCmd(e,i,a))return!0}return!1},t._isHitCmd=function(e,i,n){if(!n)return!1;var s=!1;switch(n.cmdID){case"DrawRect":t._rect.setTo(n.x,n.y,n.width,n.height),s=t._rect.contains(e,i);break;case"DrawCircle":var r=0/0;e-=n.x,i-=n.y,r=e*e+i*i,s=r<n.radius*n.radius;break;case"DrawPoly":e-=n.x,i-=n.y,s=t._ptInPolygon(e,i,n.points)}return s},t._ptInPolygon=function(e,i,n){var s=t._ptPoint;s.setTo(e,i);var r=0,o=0/0,a=0/0,h=0/0,l=0/0,u=0;u=n.length;for(var c=0;u>c;c+=2)if(o=n[c],a=n[c+1],h=n[(c+2)%u],l=n[(c+3)%u],a!=l&&!(s.y<Math.min(a,l)||s.y>=Math.max(a,l))){var _=(s.y-a)*(h-o)/(l-a)+o;_>s.x&&r++}return r%2==1},t._cmds=[],n(t,["_rect",function(){return this._rect=new ie},"_ptPoint",function(){return this._ptPoint=new ee}]),t}(),xe=(function(){function t(){this.reset()}s(t,"laya.utils.HTMLChar");var e=t.prototype;return e.setData=function(e,i,n,s){return this.char=e,this.charNum=e.charCodeAt(0),this.x=this.y=0,this.width=i,this.height=n,this.style=s,this.isWord=!t._isWordRegExp.test(e),this},e.reset=function(){return this.x=this.y=this.width=this.height=0,this.isWord=!1,this.char=null,this.charNum=0,this.style=null,this},e.recover=function(){we.recover("HTMLChar",this.reset())},e._isChar=function(){return!0},e._getCSSStyle=function(){return this.style},t.create=function(){return we.getItemByClass("HTMLChar",t)},t._isWordRegExp=new RegExp("[\\w.]",""),t}(),function(){function t(){}return s(t,"laya.utils.Log"),t.enable=function(){t._logdiv||(t._logdiv=_e.createElement("div"),t._logdiv.style.cssText="border:white;padding:4px;overflow-y:auto;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;",_e.document.body.appendChild(t._logdiv),t._btn=_e.createElement("button"),t._btn.innerText="Hide",t._btn.style.cssText="z-index:1000001;position: absolute;left:10px;top:10px;",t._btn.onclick=t.toggle,_e.document.body.appendChild(t._btn))},t.toggle=function(){var e=t._logdiv.style;""===e.display?(t._btn.innerText="Show",e.display="none"):(t._btn.innerText="Hide",e.display="")},t.print=function(e){t._logdiv&&(t._count>=t.maxCount&&t.clear(),t._count++,t._logdiv.innerText+=e+"\n",t.autoScrollToBottom&&t._logdiv.scrollHeight-t._logdiv.scrollTop-t._logdiv.clientHeight<50&&(t._logdiv.scrollTop=t._logdiv.scrollHeight))},t.clear=function(){t._logdiv.innerText="",t._count=0},t._logdiv=null,t._btn=null,t._count=0,t.maxCount=50,t.autoScrollToBottom=!0,t}(),function(){function t(){}return s(t,"laya.utils.Mouse"),r(1,t,"cursor",function(){return t._style.cursor},function(e){t._style.cursor=e}),t.hide=function(){"none"!=t.cursor&&(t._preCursor=t.cursor,t.cursor="none")},t.show=function(){"none"==t.cursor&&(t.cursor=t._preCursor?t._preCursor:"auto")},t._preCursor=null,n(t,["_style",function(){return this._style=_e.document.body.style}]),t}(),function(){function t(t,e,i,n){this.id=0,this.name=null,this.color=0,this.scale=1,this.datapos=0,this.datas=new Array(Ze.DATANUM),this.id=t,this.color=e,this.name=i,this.scale=n}s(t,"laya.utils.PerfData");var e=t.prototype;return e.addData=function(t){this.datas[this.datapos]=t,this.datapos++,this.datapos%=Ze.DATANUM},t}()),we=function(){function t(){}return s(t,"laya.utils.Pool"),t.getPoolBySign=function(e){return t._poolDic[e]||(t._poolDic[e]=[])},t.clearBySign=function(e){t._poolDic[e]&&(t._poolDic[e].length=0)},t.recover=function(e,i){i.__InPool||(i.__InPool=!0,t.getPoolBySign(e).push(i))},t.recoverByClass=function(e){if(e){var i=e.__className||e.constructor._$gid;i&&t.recover(i,e)}},t._getClassSign=function(t){var e=t.__className||t._$gid;return e||(t._$gid=e=Ie.getGID()+""),e},t.createByClass=function(e){return t.getItemByClass(t._getClassSign(e),e)},t.getItemByClass=function(e,i){if(!t._poolDic[e])return new i;var n=t.getPoolBySign(e);if(n.length){var s=n.pop();s.__InPool=!1}else s=new i;return s},t.getItemByCreateFun=function(e,i,n){var s=t.getPoolBySign(e),r=s.length?s.pop():i.call(n);return r.__InPool=!1,r},t.getItem=function(e){var i=t.getPoolBySign(e),n=i.length?i.pop():null;return n&&(n.__InPool=!1),n},t.POOLSIGN="__InPool",t._poolDic={},t}(),Te=(function(){function t(){this.sign=null,this.maxCount=1e3}s(t,"laya.utils.PoolCache");var e=t.prototype;return e.getCacheList=function(){return we.getPoolBySign(this.sign)},e.tryDispose=function(){var t;t=we.getPoolBySign(this.sign),t.length>this.maxCount&&t.splice(this.maxCount,t.length-this.maxCount)},t.addPoolCacheManager=function(e,i){void 0===i&&(i=100);var n;n=new t,n.sign=e,n.maxCount=i,fe.regCacheByFunction(Ie.bind(n.tryDispose,n),Ie.bind(n.getCacheList,n))},t}(),function(){function t(){}return s(t,"laya.utils.RunDriver"),t.getIncludeStr=function(){return null},t.createShaderCondition=function(t){var e="(function() {return "+t+";})";return i._runScript(e)},t.fontMap=[],t.measureText=function(e,i){var n=t.hanzi.test(e);if(n&&t.fontMap[i])return t.fontMap[i];var s=_e.context;s.font=i;var r=s.measureText(e);return n&&(t.fontMap[i]=r),r},t.drawToCanvas=function(t,e,i,n,s,r){i|=0,n|=0,s|=0,r|=0;var o=new ti,a=o.getContext("2d");return o.size(i,n),le.renders[e]._fun(t,a,s,r),o},t.initRender=function(t,e,i){return he._context=t.getContext("2d"),he._context.__tx=0,he._context.__ty=0,t.size(e,i),!0},t.createParticleTemplate2D=null,t.changeWebGLSize=function(){},t.createRenderSprite=function(t,e){return new le(t,e)},t.clear=function(){he.isConchApp||he._context.clear()},t.getTexturePixels=function(){return null},t.skinAniSprite=function(){return null},t.cancelLoadByUrl=function(){},t.enableNative=null,n(t,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),t}()),Ce=function(){function t(){}var e,r;return s(t,"laya.utils.SceneUtils"),t.getBindFun=function(e){var n=t._funMap.get(e);if(null==n){var s='"'+e+'"';s=s.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"');var r="(function(data){if(data==null)return;with(data){try{\nreturn "+s+"\n}catch(e){}}})";n=i._runScript(r),t._funMap.set(e,n)}return n},t.createByData=function(e,i){var n=r.create();if(e=t.createComp(i,e,e,null,n),e._setBit(8,!0),e.hasOwnProperty("_idMap")&&(e._idMap=n._idMap),i.animations){var s,o,a=[],h=i.animations,l=0,u=h.length;for(l=0;u>l;l++){switch(s=new ii,o=h[l],s._setUp(n._idMap,o),e[o.name]=s,s._setControlNode(e),o.action){case 1:s.play(0,!1);break;case 2:s.play(0,!0)}a.push(s)}e._aniList=a}return"Scene"===e._$componentType&&e._width>0&&null==i.props.hitTestPrior&&!e.mouseThrough&&(e.hitTestPrior=!0),n.beginLoad(e),e},t.createComp=function(e,i,n,s,r){if(i=i||t.getCompInstance(e),!i)return e.props&&e.props.runtime?console.warn("runtime not found:"+e.props.runtime):console.warn("can not create:"+e.type),null;var o=e.child;if(o)for(var a="List"==i._$componentType,h=0,l=o.length;l>h;h++){var u=o[h];if(!i.hasOwnProperty("itemRender")||"render"!=u.props.name&&"render"!==u.props.renderType)if("Graphic"==u.type)pe._addGraphicsToSprite(u,i);else if(pe._isDrawType(u.type))pe._addGraphicToSprite(u,i,!0);else{if(a){var c=[],_=t.createComp(u,null,n,c,r);c.length&&(_._$bindData=c)}else _=t.createComp(u,null,n,s,r);"Script"==u.type?_ instanceof laya.components.Component?i._addComponentInstance(_,!1):"owner"in _?_.owner=i:"target"in _&&(_.target=i):"mask"==u.props.renderType||"mask"==u.props.name?i.mask=_:_ instanceof laya.display.Node&&i.addChild(_)}else i.itemRender=u}var d=e.props;for(var f in d){var p=d[f];"string"==typeof p&&(p.indexOf("@node:")>=0||p.indexOf("@Prefab:")>=0)?r&&r.addNodeRef(i,f,p):t.setCompValue(i,f,p,n,s)}return i._afterInited&&i._afterInited(),e.compId&&r&&r._idMap&&(r._idMap[e.compId]=i),i},t.setCompValue=function(i,n,s,r,o){if("string"==typeof s&&s.indexOf("${")>-1){if(t._sheet||(t._sheet=pe.getClass("laya.data.Table")),!t._sheet)return console.warn("Can not find class Sheet"),void 0;if(o)o.push(i,n,s);else if(r){-1==s.indexOf("].")&&(s=s.replace(".","[0]."));var a=new e(i,n,s);a.exe(r);for(var h,l,u=s.replace(/\[.*?\]\./g,".");null!=(h=t._parseWatchData.exec(u));){for(var c=h[1];null!=(l=t._parseKeyWord.exec(c));){var _=l[0],d=r._watchMap[_]||(r._watchMap[_]=[]);d.push(a),t._sheet.I.notifer.on(_,r,r.changeData,[_])}d=r._watchMap[c]||(r._watchMap[c]=[]),d.push(a),t._sheet.I.notifer.on(c,r,r.changeData,[c])}}}else"var"===n&&r?r[s]=i:i[n]="true"===s?!0:"false"===s?!1:s},t.getCompInstance=function(e){if("UIView"==e.type&&e.props&&e.props.pageData)return t.createByData(null,e.props.pageData);var i=e.props&&e.props.runtime||e.type,n=pe.getClass(i);if(!n)throw"Can not find class "+i;return"Script"===e.type&&n.prototype._doAwake?we.createByClass(n):e.props&&e.props.hasOwnProperty("renderType")&&"instance"==e.props.renderType?n.instance:new n},t._sheet=null,n(t,["_funMap",function(){return this._funMap=new De},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),t.__init$=function(){e=function(){function e(t,e,i){this.comp=null,this.prop=null,this.value=null,this.comp=t,this.prop=e,this.value=i}s(e,"");var i=e.prototype;return i.exe=function(e){var i=t.getBindFun(this.value);this.comp[this.prop]=i.call(this,e)},e}(),r=function(){function t(){this._nodeRefList=null,this._initList=null,this._loadList=null,this._idMap=null,this._scene=null}s(t,"");var e=t.prototype;return e.reset=function(){this._nodeRefList=null,this._initList=null,this._idMap=null,this._loadList=null,this._scene=null},e.recover=function(){this.reset(),we.recover("InitTool",this)},e.addLoadRes=function(t,e){this._loadList||(this._loadList=[]),e?this._loadList.push({url:t,type:e}):this._loadList.push(t)},e.addNodeRef=function(t,e,i){this._nodeRefList||(this._nodeRefList=[]),this._nodeRefList.push([t,e,i]),i.indexOf("@Prefab:")>=0&&this.addLoadRes(i.replace("@Prefab:",""),"prefab")},e.setNodeRef=function(){if(this._nodeRefList){if(!this._idMap)return this._nodeRefList=null,void 0;var t=0,e=0;e=this._nodeRefList.length;var i;for(t=0;e>t;t++)i=this._nodeRefList[t],i[0][i[1]]=this.getReferData(i[2]);this._nodeRefList=null}},e.getReferData=function(t){if(t.indexOf("@Prefab:")>=0){var e;return e=ke.getRes(t.replace("@Prefab:",""))}if(t.indexOf("@arr:")>=0){t=t.replace("@arr:","");var i;i=t.split(",");var n,s=0,r=0;for(r=i.length,s=0;r>s;s++)n=i[s],i[s]=n?this._idMap[n.replace("@node:","")]:null;return i}return this._idMap[t.replace("@node:","")]},e.addInitItem=function(t){this._initList||(this._initList=[]),this._initList.push(t)},e.doInits=function(){this._initList&&(this._initList=null)},e.finish=function(){this.setNodeRef(),this.doInits(),this._scene._setBit(8,!1),this._scene.parent&&this._scene.parent.activeInHierarchy&&this._scene.active&&this._scene._activeHierarchy(),this._scene.event("onViewCreated"),this.recover()},e.beginLoad=function(t){this._scene=t,!this._loadList||this._loadList.length<1?this.finish():i.loader.load(this._loadList,_.create(this,this.finish))},t.create=function(){var e=we.getItemByClass("InitTool",t);return e._idMap=[],e},t}()},t}(),be=function(){function t(){}return s(t,"laya.utils.Stat"),r(1,t,"onclick",null,function(e){t._sp&&t._sp.on("click",t._sp,e),t._canvas&&(t._canvas.source.onclick=e,t._canvas.source.style.pointerEvents="")}),t.show=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=0),he.isConchApp?(_e.window.conch.showFPS&&_e.window.conch.showFPS(e,i),void 0):(_e.onMiniGame||_e.onLimixiu||(t._useCanvas=!0),t._show=!0,t._fpsData.length=60,t._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},t._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},t._view[2]={title:"DrawCall",value:"drawCall",color:"white",units:"int"},t._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},he.isWebGL?(t._view[4]={title:"Shader",value:"shaderCall",color:"white",units:"int"},he.is3DMode?(t._view[0].title="FPS(3D)",t._view[5]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"},t._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},t._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"}):(t._view[0].title="FPS(WebGL)",t._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"})):t._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"},t._useCanvas?t.createUIPre(e,i):t.createUI(e,i),t.enable(),void 0)},t.createUIPre=function(e,i){var n=_e.pixelRatio;t._width=130*n,t._vx=75*n,t._height=n*(12*t._view.length+3*n)+4,t._fontSize=12*n;for(var s=0;s<t._view.length;s++)t._view[s].x=4,t._view[s].y=s*t._fontSize+2*n;t._canvas||(t._canvas=new ti,t._canvas.size(t._width,t._height),t._ctx=t._canvas.getContext("2d"),t._ctx.textBaseline="top",t._ctx.font=t._fontSize+"px Sans-serif",t._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+e+"px;top:"+i+"px;width:"+t._width/n+"px;height:"+t._height/n+"px;"),t._first=!0,t.loop(),t._first=!1,_e.container.appendChild(t._canvas.source)},t.createUI=function(e,i){var n=t._sp,s=_e.pixelRatio;n||(n=new ze,t._leftText=new qe,t._leftText.pos(5,5),t._leftText.color="#ffffff",n.addChild(t._leftText),t._txt=new qe,t._txt.pos(80*s,5),t._txt.color="#ffffff",n.addChild(t._txt),t._sp=n),n.pos(e,i);for(var r="",o=0;o<t._view.length;o++){var a=t._view[o];r+=a.title+"\n"}t._leftText.text=r;var h=138*s,l=s*(12*t._view.length+3*s)+4;t._txt.fontSize=t._fontSize*s,t._leftText.fontSize=t._fontSize*s,n.size(h,l),n.graphics.clear(),n.graphics.alpha(.5),n.graphics.drawRect(0,0,h,l,"#999999"),n.graphics.alpha(2),t.loop()},t.enable=function(){i.timer.frameLoop(1,t,t.loop)},t.hide=function(){t._show=!1,i.timer.clear(t,t.loop),t._canvas&&_e.removeElement(t._canvas.source)},t.clear=function(){t.trianglesFaces=t.drawCall=t.shaderCall=t.spriteCount=t.spriteRenderUseCacheCount=t.treeNodeCollision=t.treeSpriteCollision=t.canvasNormal=t.canvasBitmap=t.canvasReCache=0},t.loop=function(){t._count++;var e=_e.now();if(!(e-t._timer<1e3)){var i=t._count;if(t.FPS=Math.round(1e3*i/(e-t._timer)),t._show){t.trianglesFaces=Math.round(t.trianglesFaces/i),t._useCanvas?(t.drawCall=Math.round(t.drawCall/i),t.shaderCall=Math.round(t.shaderCall/i),t.spriteCount=Math.round(t.spriteCount/i)-1):(t.drawCall=Math.round(t.drawCall/i)-1,t.shaderCall=Math.round(t.shaderCall/i),t.spriteCount=Math.round(t.spriteCount/i)-4),t.spriteRenderUseCacheCount=Math.round(t.spriteRenderUseCacheCount/i),t.canvasNormal=Math.round(t.canvasNormal/i),t.canvasBitmap=Math.round(t.canvasBitmap/i),t.canvasReCache=Math.ceil(t.canvasReCache/i),t.treeNodeCollision=Math.round(t.treeNodeCollision/i),t.treeSpriteCollision=Math.round(t.treeSpriteCollision/i);var n=t.FPS>0?Math.floor(1e3/t.FPS).toString():" ";t._fpsStr=t.FPS+(t.renderSlow?" slow":"")+" "+n,t._spriteStr=t.spriteCount+(t.spriteRenderUseCacheCount?"/"+t.spriteRenderUseCacheCount:""),t._canvasStr=t.canvasReCache+"/"+t.canvasNormal+"/"+t.canvasBitmap,t.currentMemorySize=ce.systemResourceManager.memorySize,t._useCanvas?t.renderInfoPre():t.renderInfo(),t.clear()}t._count=0,t._timer=e}},t.renderInfoPre=function(){if(t._canvas){var e=t._ctx;e.clearRect(t._first?0:t._vx,0,t._width,t._height);for(var i=0;i<t._view.length;i++){var n=t._view[i];t._first&&(e.fillStyle="white",e.fillText(n.title,n.x,n.y)),e.fillStyle=n.color;var s=t[n.value];"M"==n.units&&(s=Math.floor(s/1048576*100)/100+" M"),e.fillText(s+"",n.x+t._vx,n.y)}}},t.renderInfo=function(){for(var e="",i=0;i<t._view.length;i++){var n=t._view[i],s=t[n.value];"M"==n.units&&(s=Math.floor(s/1048576*100)/100+" M"),"K"==n.units&&(s=Math.floor(s/1024*100)/100+" K"),e+=s+"\n"}t._txt.text=e},t.FPS=0,t.loopCount=0,t.shaderCall=0,t.drawCall=0,t.trianglesFaces=0,t.spriteCount=0,t.spriteRenderUseCacheCount=0,t.treeNodeCollision=0,t.treeSpriteCollision=0,t.canvasNormal=0,t.canvasBitmap=0,t.canvasReCache=0,t.renderSlow=!1,t.currentMemorySize=0,t._fpsStr=null,t._canvasStr=null,t._spriteStr=null,t._fpsData=[],t._timer=0,t._count=0,t._view=[],t._fontSize=12,t._txt=null,t._leftText=null,t._sp=null,t._show=!1,t._useCanvas=!1,t._canvas=null,t._ctx=null,t._first=!1,t._vx=0/0,t._width=0,t._height=100,t}(),Se=(function(){function t(){this._strsToID={},this._idToStrs=[],this._length=0}s(t,"laya.utils.StringKey");var e=t.prototype;return e.add=function(t){var e=this._strsToID[t];return null!=e?e:(this._idToStrs[this._length]=t,this._strsToID[t]=this._length++)},e.getID=function(t){var e=this._strsToID[t];return null==e?-1:e},e.getName=function(t){var e=this._idToStrs[t];return null==e?void 0:e},t}(),function(){function t(){this.scale=1,this.currFrame=0,this._mid=1,this._map=[],this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._delta=0,this.currTimer=_e.now(),this._lastTimer=_e.now()}var e;s(t,"laya.utils.Timer");var i=t.prototype;return i._update=function(){if(this.scale<=0)return this._lastTimer=_e.now(),void 0;var t=this.currFrame=this.currFrame+this.scale,e=_e.now();this._delta=(e-this._lastTimer)*this.scale;var i=this.currTimer=this.currTimer+this._delta;this._lastTimer=e;var n=this._handlers;for(this._count=0,o=0,a=n.length;a>o;o++)if(h=n[o],null!==h.method){var s=h.userFrame?t:i;if(s>=h.exeTime)if(h.repeat)if(h.jumpFrame)for(;s>=h.exeTime;)h.exeTime+=h.delay,h.run(!1);else h.exeTime+=h.delay,h.run(!1),s>h.exeTime&&(h.exeTime+=Math.ceil((s-h.exeTime)/h.delay)*h.delay);else h.run(!0)}else this._count++;(this._count>30||t%200===0)&&this._clearHandlers();for(var r=this._laters,o=0,a=r.length-1;a>=o;o++){var h=r[o];null!==h.method&&(this._map[h.key]=null,h.run(!1)),this._recoverHandler(h),o===a&&(a=r.length-1)}r.length=0},i._clearHandlers=function(){for(var t=this._handlers,e=0,i=t.length;i>e;e++){var n=t[e];null!==n.method?this._temp.push(n):this._recoverHandler(n)}this._handlers=this._temp,t.length=0,this._temp=t},i._recoverHandler=function(e){this._map[e.key]==e&&(this._map[e.key]=null),e.clear(),t._pool.push(e)},i._create=function(i,n,s,r,o,a,h){if(!s)return o.apply(r,a),null;if(h){var l=this._getHandler(r,o);if(l)return l.repeat=n,l.userFrame=i,l.delay=s,l.caller=r,l.method=o,l.args=a,l.exeTime=s+(i?this.currFrame:this.currTimer+_e.now()-this._lastTimer),l}return l=t._pool.length>0?t._pool.pop():new e,l.repeat=n,l.userFrame=i,l.delay=s,l.caller=r,l.method=o,l.args=a,l.exeTime=s+(i?this.currFrame:this.currTimer+_e.now()-this._lastTimer),this._indexHandler(l),this._handlers.push(l),l},i._indexHandler=function(t){var e=t.caller,i=t.method,n=e?e.$_GID||(e.$_GID=Ie.getGID()):0,s=i.$_TID||(i.$_TID=1e5*this._mid++);t.key=n+s,this._map[t.key]=t},i.once=function(t,e,i,n,s){void 0===s&&(s=!0),this._create(!1,!1,t,e,i,n,s)},i.loop=function(t,e,i,n,s,r){void 0===s&&(s=!0),void 0===r&&(r=!1);var o=this._create(!1,!0,t,e,i,n,s);o&&(o.jumpFrame=r)},i.frameOnce=function(t,e,i,n,s){void 0===s&&(s=!0),this._create(!0,!1,t,e,i,n,s)},i.frameLoop=function(t,e,i,n,s){void 0===s&&(s=!0),this._create(!0,!0,t,e,i,n,s)},i.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+t._pool.length},i.clear=function(t,e){var i=this._getHandler(t,e);i&&(this._map[i.key]=null,i.key=0,i.clear())},i.clearAll=function(t){if(t)for(var e=0,i=this._handlers.length;i>e;e++){var n=this._handlers[e];n.caller===t&&(this._map[n.key]=null,n.key=0,n.clear())}},i._getHandler=function(t,e){var i=t?t.$_GID||(t.$_GID=Ie.getGID()):0,n=e.$_TID||(e.$_TID=1e5*this._mid++);return this._map[i+n]},i.callLater=function(i,n,s){if(null==this._getHandler(i,n)){if(t._pool.length)var r=t._pool.pop();else r=new e;r.caller=i,r.method=n,r.args=s,this._indexHandler(r),this._laters.push(r)}},i.runCallLater=function(t,e){var i=this._getHandler(t,e);i&&null!=i.method&&(this._map[i.key]=null,i.run(!0))},i.runTimer=function(t,e){this.runCallLater(t,e)},r(0,i,"delta",function(){return this._delta}),t._pool=[],t.__init$=function(){e=function(){function t(){this.key=0,this.repeat=!1,this.delay=0,this.userFrame=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}s(t,"");var e=t.prototype;return e.clear=function(){this.caller=null,this.method=null,this.args=null},e.run=function(t){var e=this.caller;if(e&&e.destroyed)return this.clear();var i=this.method,n=this.args;t&&this.clear(),null!=i&&(n?i.apply(e,n):i.call(e))},t}()},t}()),Me=function(){function t(){this.gid=0,this.repeat=1,this._count=0}s(t,"laya.utils.Tween");var e=t.prototype;return e.to=function(t,e,i,n,s,r,o){return void 0===r&&(r=0),void 0===o&&(o=!1),this._create(t,e,i,n,s,r,o,!0,!1,!0)},e.from=function(t,e,i,n,s,r,o){return void 0===r&&(r=0),void 0===o&&(o=!1),this._create(t,e,i,n,s,r,o,!1,!1,!0)},e._create=function(e,n,s,r,o,a,h,l,u,c){if(!e)throw new Error("Tween:target is null");this._target=e,this._duration=s,this._ease=r||n.ease||t.easeNone,this._complete=o||n.complete,this._delay=a,this._props=[],this._usedTimer=0,this._startTimer=_e.now(),this._usedPool=u,this._delayParam=null,this.update=n.update;var _=e.$_GID||(e.$_GID=Ie.getGID());return t.tweenMap[_]?(h&&t.clearTween(e),t.tweenMap[_].push(this)):t.tweenMap[_]=[this],c?0>=a?this.firstStart(e,n,l):(this._delayParam=[e,n,l],i.sceneTimer.once(a,this,this.firstStart,this._delayParam)):this._initProps(e,n,l),this},e.firstStart=function(t,e,i){return this._delayParam=null,t.destroyed?(this.clear(),void 0):(this._initProps(t,e,i),this._beginLoop(),void 0)},e._initProps=function(t,e,i){for(var n in e)if("number"==typeof t[n]){var s=i?t[n]:e[n],r=i?e[n]:t[n];this._props.push([n,s,r-s]),i||(t[n]=s)}},e._beginLoop=function(){i.sceneTimer.frameLoop(1,this,this._doEase)},e._doEase=function(){this._updateEase(_e.now())},e._updateEase=function(e){var i=this._target;if(i){if(i.destroyed)return t.clearTween(i);var n=this._usedTimer=e-this._startTimer-this._delay;if(!(0>n)){if(n>=this._duration)return this.complete();for(var s=n>0?this._ease(n,0,1,this._duration):0,r=this._props,o=0,a=r.length;a>o;o++){var h=r[o];i[h[0]]=h[1]+s*h[2]}this.update&&this.update.run()}}},e.complete=function(){if(this._target){i.sceneTimer.runTimer(this,this.firstStart);for(var t=this._target,e=this._props,n=this._complete,s=0,r=e.length;r>s;s++){var o=e[s];t[o[0]]=o[1]+o[2]}this.update&&this.update.run(),this._count++,this._count>=this.repeat?(this.clear(),n&&n.run()):this.restart()}},e.pause=function(){i.sceneTimer.clear(this,this._beginLoop),i.sceneTimer.clear(this,this._doEase),i.sceneTimer.clear(this,this.firstStart);var t=_e.now(),e=0/0;e=t-this._startTimer-this._delay,0>e&&(this._usedTimer=e)},e.setStartTime=function(t){this._startTimer=t},e.clear=function(){this._target&&(this._remove(),this._clear())},e._clear=function(){this.pause(),i.sceneTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,we.recover("tween",this))},e.recover=function(){this._usedPool=!0,this._clear()},e._remove=function(){var e=t.tweenMap[this._target.$_GID];if(e)for(var i=0,n=e.length;n>i;i++)if(e[i]===this){e.splice(i,1);break}},e.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=_e.now(),this._delayParam)return i.sceneTimer.once(this._delay,this,this.firstStart,this._delayParam),void 0;for(var t=this._props,e=0,n=t.length;n>e;e++){var s=t[e];this._target[s[0]]=s[1]}i.sceneTimer.once(this._delay,this,this._beginLoop)},e.resume=function(){this._usedTimer>=this._duration||(this._startTimer=_e.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?i.sceneTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},r(0,e,"progress",null,function(t){var e=t*this._duration;this._startTimer=_e.now()-this._delay-e}),t.to=function(e,i,n,s,r,o,a,h){return void 0===o&&(o=0),void 0===a&&(a=!1),void 0===h&&(h=!0),we.getItemByClass("tween",t)._create(e,i,n,s,r,o,a,!0,h,!0)},t.from=function(e,i,n,s,r,o,a,h){return void 0===o&&(o=0),void 0===a&&(a=!1),void 0===h&&(h=!0),we.getItemByClass("tween",t)._create(e,i,n,s,r,o,a,!1,h,!0)},t.clearAll=function(e){if(e&&e.$_GID){var i=t.tweenMap[e.$_GID];if(i){for(var n=0,s=i.length;s>n;n++)i[n]._clear();i.length=0}}},t.clear=function(t){t.clear()},t.clearTween=function(e){t.clearAll(e)},t.easeNone=function(t,e,i,n){return i*t/n+e},t.tweenMap=[],t}(),Ie=function(){function e(){}return s(e,"laya.utils.Utils"),e.toRadian=function(t){return t*e._pi2},e.toAngle=function(t){return t*e._pi},e.toHexColor=function(t){if(0>t||isNaN(t))return null;for(var e=t.toString(16);e.length<6;)e="0"+e;return"#"+e},e.getGID=function(){return e._gid++},e.concatArray=function(t,e){if(!e)return t;if(!t)return e;var i=0,n=e.length;for(i=0;n>i;i++)t.push(e[i]);return t},e.clearArray=function(t){return t?(t.length=0,t):t},e.copyArray=function(t,e){if(t||(t=[]),!e)return t;t.length=e.length;var i=0,n=e.length;for(i=0;n>i;i++)t[i]=e[i];return t},e.getGlobalRecByPoints=function(t,e,i,n,s){var r;r=ee.create().setTo(e,i),r=t.localToGlobal(r);var o;o=ee.create().setTo(n,s),o=t.localToGlobal(o);var a=ie._getWrapRec([r.x,r.y,o.x,o.y]);return r.recover(),o.recover(),a},e.getGlobalPosAndScale=function(t){return e.getGlobalRecByPoints(t,0,0,1,1)},e.bind=function(t,e){var i=t;return i=t.bind(e)},e.measureText=function(t,e){return Te.measureText(t,e)},e.updateOrder=function(t){if(!t||t.length<2)return!1;for(var e,i=1,n=0,s=t.length,r=0/0;s>i;){for(n=i,e=t[n],r=t[n]._zOrder;--n>-1&&t[n]._zOrder>r;)t[n+1]=t[n];t[n+1]=e,i++}return!0},e.transPointList=function(t,e,i){var n=0,s=t.length;for(n=0;s>n;n+=2)t[n]+=e,t[n+1]+=i},e.parseInt=function(t,e){void 0===e&&(e=0);var i=_e.window.parseInt(t,e);
return isNaN(i)?0:i},e.getFileExtension=function(t){e._extReg.lastIndex=t.lastIndexOf(".");var i=e._extReg.exec(t);return i&&i.length>1?i[1].toLowerCase():null},e.getTransformRelativeToWindow=function(t,e,n){var s=i.stage,r=laya.utils.Utils.getGlobalPosAndScale(t),o=s._canvasTransform.clone(),a=o.tx,h=o.ty;o.rotate(-Math.PI/180*i.stage.canvasDegree),o.scale(i.stage.clientScaleX,i.stage.clientScaleY);var l=i.stage.canvasDegree%180!=0,u=0/0,c=0/0;l?(u=n+r.y,c=e+r.x,u*=o.d,c*=o.a,90==i.stage.canvasDegree?(u=a-u,c+=h):(u+=a,c=h-c)):(u=e+r.x,c=n+r.y,u*=o.a,c*=o.d,u+=a,c+=h),c+=i.stage._safariOffsetY;var _=0/0,d=0/0;return l?(_=o.d*r.height,d=o.a*r.width):(_=o.a*r.width,d=o.d*r.height),{x:u,y:c,scaleX:_,scaleY:d}},e.fitDOMElementInArea=function(t,n,s,r,o,a){t._fitLayaAirInitialized||(t._fitLayaAirInitialized=!0,t.style.transformOrigin=t.style.webKittransformOrigin="left top",t.style.position="absolute");var h=e.getTransformRelativeToWindow(n,s,r);t.style.transform=t.style.webkitTransform="scale("+h.scaleX+","+h.scaleY+") rotate("+i.stage.canvasDegree+"deg)",t.style.width=o+"px",t.style.height=a+"px",t.style.left=h.x+"px",t.style.top=h.y+"px"},e.isOkTextureList=function(t){if(!t)return!1;var e,i=0,n=t.length;for(i=0;n>i;i++)if(e=t[i],!e||!e._getSource())return!1;return!0},e.isOKCmdList=function(t){if(!t)return!1;var e,i=0,n=t.length;for(i=0;n>i;i++)e=t[i];return!0},e.getQueryString=function(e){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=t.location.search.substr(1).match(i);return null!=n?unescape(n[2]):null},e._gid=1,e._pi=180/Math.PI,e._pi2=Math.PI/180,e._extReg=/\.(\w+)\??/g,e.parseXMLFromString=function(t){var e;if(t=t.replace(/>\s+</g,"><"),e=(new DOMParser).parseFromString(t,"text/xml"),e.firstChild.textContent.indexOf("This page contains the following errors")>-1)throw new Error(e.firstChild.firstChild.textContent);return e},e}(),Pe=function(){function t(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],he.isWebGL&&fe.regCacheByFunction(Ie.bind(this.startDispose,this),Ie.bind(this.getCacheList,this))}s(t,"laya.utils.VectorGraphManager");var e=t.prototype;return e.getId=function(){return this._id++},e.addShape=function(t,e){this.shapeDic[t]=e,this.useDic[t]||(this.useDic[t]=!0)},e.addLine=function(t,e){this.shapeLineDic[t]=e,this.shapeLineDic[t]||(this.shapeLineDic[t]=!0)},e.getShape=function(t){this._checkKey&&null!=this.useDic[t]&&(this.useDic[t]=!0)},e.deleteShape=function(t){this.shapeDic[t]&&(this.shapeDic[t]=null,delete this.shapeDic[t]),this.shapeLineDic[t]&&(this.shapeLineDic[t]=null,delete this.shapeLineDic[t]),null!=this.useDic[t]&&delete this.useDic[t]},e.getCacheList=function(){var t,e=[];for(t in this.shapeDic)e.push(this.shapeDic[t]);for(t in this.shapeLineDic)e.push(this.shapeLineDic[t]);return e},e.startDispose=function(){var t;for(t in this.useDic)this.useDic[t]=!1;this._checkKey=!0},e.endDispose=function(){if(this._checkKey){var t;for(t in this.useDic)this.useDic[t]||this.deleteShape(t);this._checkKey=!1}},t.getInstance=function(){return t.instance=t.instance||new t},t.instance=null,t}(),De=function(){function t(){this._obj=null,this._obj=t.supportWeakMap?new _e.window.WeakMap:{},t.supportWeakMap||t._maps.push(this)}s(t,"laya.utils.WeakObject");var e=t.prototype;return e.set=function(e,i){if(null!=e)if(t.supportWeakMap){var n=e;("string"==typeof e||"number"==typeof e)&&(n=t._keys[e],n||(n=t._keys[e]={k:e})),this._obj.set(n,i)}else"string"==typeof e||"number"==typeof e?this._obj[e]=i:(e.$_GID||(e.$_GID=Ie.getGID()),this._obj[e.$_GID]=i)},e.get=function(e){if(null==e)return null;if(t.supportWeakMap){var i="string"==typeof e||"number"==typeof e?t._keys[e]:e;return i?this._obj.get(i):null}return"string"==typeof e||"number"==typeof e?this._obj[e]:this._obj[e.$_GID]},e.del=function(e){if(null!=e)if(t.supportWeakMap){var i="string"==typeof e||"number"==typeof e?t._keys[e]:e;if(!i)return;this._obj.delete(i)}else"string"==typeof e||"number"==typeof e?delete this._obj[e]:delete this._obj[this._obj.$_GID]},e.has=function(e){if(null==e)return!1;if(t.supportWeakMap){var i="string"==typeof e||"number"==typeof e?t._keys[e]:e;return this._obj.has(i)}return"string"==typeof e||"number"==typeof e?null!=this._obj[e]:null!=this._obj[this._obj.$_GID]},t.__init__=function(){t.supportWeakMap=null!=_e.window.WeakMap,t.supportWeakMap||i.timer.loop(t.delInterval,null,t.clearCache)},t.clearCache=function(){for(var e=0,i=t._maps.length;i>e;e++){var n=t._maps[e];n._obj={}}},t.supportWeakMap=!1,t.delInterval=6e5,t._keys={},t._maps=[],n(t,["I",function(){return this.I=new t}]),t}(),Ae=function(){function t(){this.id=0/0,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null,this.width=-1,this.pageChars=[],this.pageCharsStroke=[],this.startID=0,this.startIDStroke=0,this.lastGCCnt=0}s(t,"laya.utils.WordText");var e=t.prototype;return e.setText=function(t){this.changed=!0,this._text=t,this.width=-1,this.pageChars=[]},e.toString=function(){return this._text},e.charCodeAt=function(t){return this._text?this._text.charCodeAt(t):0/0},e.charAt=function(t){return this._text?this._text.charAt(t):null},e.cleanCache=function(){this.pageChars=[],this.startID=0},r(0,e,"length",function(){return this._text?this._text.length:0}),t}(),Le=(function(t){function e(){e.__super.call(this)}s(e,"laya.components.Script",t);var n=e.prototype;return n._onAwake=function(){this.onAwake(),this.onStart!==laya.components.Script.prototype.onStart&&i.startTimer.callLater(this,this.onStart)},n._onEnable=function(){var t=laya.components.Script.prototype;this.onTriggerEnter!==t.onTriggerEnter&&this.owner.on("triggerenter",this,this.onTriggerEnter),this.onTriggerStay!==t.onTriggerStay&&this.owner.on("triggerstay",this,this.onTriggerStay),this.onTriggerExit!==t.onTriggerExit&&this.owner.on("triggerexit",this,this.onTriggerExit),this.onMouseDown!==t.onMouseDown&&this.owner.on("mousedown",this,this.onMouseDown),this.onMouseUp!==t.onMouseUp&&this.owner.on("mouseup",this,this.onMouseUp),this.onClick!==t.onClick&&this.owner.on("click",this,this.onClick),this.onStageMouseDown!==t.onStageMouseDown&&i.stage.on("mousedown",this,this.onStageMouseDown),this.onStageMouseUp!==t.onStageMouseUp&&i.stage.on("mouseup",this,this.onStageMouseUp),this.onStageClick!==t.onStageClick&&i.stage.on("click",this,this.onStageClick),this.onDoubleClick!==t.onDoubleClick&&this.owner.on("doubleclick",this,this.onDoubleClick),this.onRightClick!==t.onRightClick&&this.owner.on("rightclick",this,this.onRightClick),this.onMouseMove!==t.onMouseMove&&this.owner.on("mousemove",this,this.onMouseMove),this.onMouseOver!==t.onMouseOver&&this.owner.on("mouseover",this,this.onMouseOver),this.onMouseOut!==t.onMouseOut&&this.owner.on("mouseout",this,this.onMouseOut),this.onKeyDown!==t.onKeyDown&&i.stage.on("keydown",this,this.onKeyDown),this.onKeyPress!==t.onKeyPress&&i.stage.on("keypress",this,this.onKeyPress),this.onKeyUp!==t.onKeyUp&&i.stage.on("keyup",this,this.onKeyUp),this.onUpdate!==t.onUpdate&&i.updateTimer.frameLoop(1,this,this.onUpdate),this.onLateUpdate!==t.onLateUpdate&&i.lateTimer.frameLoop(1,this,this.onLateUpdate),this.onPreRender!==t.onPreRender&&i.lateTimer.frameLoop(1,this,this.onPreRender),this.onEnable()},n._onDisable=function(){this.owner.offAllCaller(this),i.stage.offAllCaller(this),i.startTimer.clearAll(this),i.updateTimer.clearAll(this),i.lateTimer.clearAll(this),this.onDisable()},n._onDestroy=function(){this.onDestroy()},n.onAwake=function(){},n.onEnable=function(){},n.onStart=function(){},n.onTriggerEnter=function(){},n.onTriggerStay=function(){},n.onTriggerExit=function(){},n.onMouseDown=function(){},n.onMouseUp=function(){},n.onClick=function(){},n.onStageMouseDown=function(){},n.onStageMouseUp=function(){},n.onStageClick=function(){},n.onDoubleClick=function(){},n.onRightClick=function(){},n.onMouseMove=function(){},n.onMouseOver=function(){},n.onMouseOut=function(){},n.onKeyDown=function(){},n.onKeyPress=function(){},n.onKeyUp=function(){},n.onUpdate=function(){},n.onLateUpdate=function(){},n.onPreRender=function(){},n.onPostRender=function(){},n.onDisable=function(){},n.onDestroy=function(){},r(0,n,"isSingleton",function(){return!1}),e}(l),function(t){function e(){this._bits=0,this._parent=null,this.name="",this.destroyed=!1,this._conchData=null,this._components=null,this._scene=null,e.__super.call(this),this._children=e.ARRAY_EMPTY,this.createGLBuffer()}s(e,"laya.display.Node",t);var n=e.prototype;return n.createGLBuffer=function(){},n._setBit=function(t,e){if(16===t){var i=this._getBit(t);i!=e&&this._updateDisplayedInstage()}e?this._bits|=t:this._bits&=~t},n._getBit=function(t){return 0!=(this._bits&t)},n._setUpNoticeChain=function(){this._getBit(16)&&this._setBitUp(16)},n._setBitUp=function(t){var e=this;for(e._setBit(t,!0),e=e._parent;e;){if(e._getBit(t))return;e._setBit(t,!0),e=e._parent}},n.on=function(t,e,i,n){return("display"===t||"undisplay"===t)&&(this._getBit(16)||this._setBitUp(16)),this._createListener(t,e,i,n,!1)},n.once=function(t,e,i,n){return("display"===t||"undisplay"===t)&&(this._getBit(16)||this._setBitUp(16)),this._createListener(t,e,i,n,!0)},n.destroy=function(t){void 0===t&&(t=!0),this.destroyed=!0,this._destroyAllComponent(),this._parent&&this._parent.removeChild(this),this._children&&(t?this.destroyChildren():this.removeChildren()),this.onDestroy(),this._children=null,this.offAll()},n.onDestroy=function(){},n.destroyChildren=function(){if(this._children)for(var t=0,e=this._children.length;e>t;t++)this._children[0].destroy(!0)},n.addChild=function(t){if(!t||this.destroyed||t===this)return t;if(t._zOrder&&this._setBit(32,!0),t._parent===this){var i=this.getChildIndex(t);i!==this._children.length-1&&(this._children.splice(i,1),this._children.push(t),this._childChanged())}else t._parent&&t._parent.removeChild(t),this._children===e.ARRAY_EMPTY&&(this._children=[]),this._children.push(t),t._setParent(this),this._childChanged();return t},n.addChildren=function(){for(var t=arguments,e=0,i=t.length;i>e;)this.addChild(t[e++])},n.addChildAt=function(t,i){if(!t||this.destroyed||t===this)return t;if(t._zOrder&&this._setBit(32,!0),i>=0&&i<=this._children.length){if(t._parent===this){var n=this.getChildIndex(t);this._children.splice(n,1),this._children.splice(i,0,t),this._childChanged()}else t._parent&&t._parent.removeChild(t),this._children===e.ARRAY_EMPTY&&(this._children=[]),this._children.splice(i,0,t),t._setParent(this);return t}throw new Error("appendChildAt:The index is out of bounds")},n.getChildIndex=function(t){return this._children.indexOf(t)},n.getChildByName=function(t){var e=this._children;if(e)for(var i=0,n=e.length;n>i;i++){var s=e[i];if(s.name===t)return s}return null},n.getChildAt=function(t){return this._children[t]||null},n.setChildIndex=function(t,e){var i=this._children;if(0>e||e>=i.length)throw new Error("setChildIndex:The index is out of bounds.");var n=this.getChildIndex(t);if(0>n)throw new Error("setChildIndex:node is must child of this object.");return i.splice(n,1),i.splice(e,0,t),this._childChanged(),t},n._childChanged=function(){},n.removeChild=function(t){if(!this._children)return t;var e=this._children.indexOf(t);return this.removeChildAt(e)},n.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},n.removeChildByName=function(t){var e=this.getChildByName(t);return e&&this.removeChild(e),e},n.removeChildAt=function(t){var e=this.getChildAt(t);return e&&(this._children.splice(t,1),e._setParent(null)),e},n.removeChildren=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=2147483647),this._children&&this._children.length>0){var n=this._children;if(0===t&&i>=n.length-1){var s=n;this._children=e.ARRAY_EMPTY}else s=n.splice(t,i-t);for(var r=0,o=s.length;o>r;r++)s[r]._setParent(null)}return this},n.replaceChild=function(t,e){var i=this._children.indexOf(e);return i>-1?(this._children.splice(i,1,t),e._setParent(null),t._setParent(this),t):null},n._setParent=function(t){this._parent!==t&&(t?(this._parent=t,this._onAdded(),this.event("added"),this._getBit(16)&&(this._setUpNoticeChain(),t.displayedInStage&&this._displayChild(this,!0)),t._childChanged(this)):(this._onRemoved(),this.event("removed"),this._parent._childChanged(),this._getBit(16)&&this._displayChild(this,!1),this._parent=t))},n._updateDisplayedInstage=function(){var t;t=this;for(var e=i.stage,n=!1;t;){if(t._getBit(16)){n=t._getBit(128);break}if(t===e||t._getBit(128)){n=!0;break}t=t._parent}this._setBit(128,n)},n._setDisplay=function(t){this._getBit(128)!==t&&(this._setBit(128,t),t?this.event("display"):this.event("undisplay"))},n._displayChild=function(t,e){var i=t._children;if(i)for(var n=0,s=i.length;s>n;n++){var r=i[n];r._getBit(16)&&(r._children.length>0?this._displayChild(r,e):r._setDisplay(e))}t._setDisplay(e)},n.contains=function(t){if(t===this)return!0;for(;t;){if(t._parent===this)return!0;t=t._parent}return!1},n.timerLoop=function(t,e,n,s,r,o){void 0===r&&(r=!0),void 0===o&&(o=!1);var a=this.scene?this.scene.timer:i.sceneTimer;a.loop(t,e,n,s,r,o)},n.timerOnce=function(t,e,n,s,r){void 0===r&&(r=!0);var o=this.scene?this.scene.timer:i.sceneTimer;o._create(!1,!1,t,e,n,s,r)},n.frameLoop=function(t,e,n,s,r){void 0===r&&(r=!0);var o=this.scene?this.scene.timer:i.sceneTimer;o._create(!0,!0,t,e,n,s,r)},n.frameOnce=function(t,e,n,s,r){void 0===r&&(r=!0);var o=this.scene?this.scene.timer:i.sceneTimer;o._create(!0,!1,t,e,n,s,r)},n.clearTimer=function(t,e){var n=this.scene?this.scene.timer:i.sceneTimer;n.clear(t,e)},n.callLater=function(t,e){var n=this.scene?this.scene.timer:i.sceneTimer;n.callLater(this,t,e)},n.runCallLater=function(t){var e=this.scene?this.scene.timer:i.sceneTimer;e.runCallLater(this,t)},n._onActive=function(){},n._onInActive=function(){},n._onActiveInScene=function(){},n._onInActiveInScene=function(){},n._parse=function(){},n._setBelongScene=function(t){if(this._scene=t,this._components)for(var e=0,i=this._components.length;i>e;e++)this._components[e]._setActiveInScene(!0);for(this._onActiveInScene(),e=0,i=this._children.length;i>e;e++)this._children[e]._setBelongScene(t)},n._setUnBelongScene=function(){if(this._onInActiveInScene(),this._components)for(var t=0,e=this._components.length;e>t;t++)this._components[t]._setActiveInScene(!1);for(this._scene=null,t=0,e=this._children.length;e>t;t++)this._children[t]._setUnBelongScene()},n._activeHierarchy=function(){if(this._setBit(2,!0),this._components)for(var t=0,e=this._components.length;e>t;t++)this._components[t]._setActive(!0);for(this._onActive(),t=0,e=this._children.length;e>t;t++){var i=this._children[t];!i._getBit(1)&&i._activeHierarchy()}this._getBit(4)||(this._setBit(4,!0),this.onAwake()),this.onEnable()},n.onAwake=function(){},n.onEnable=function(){},n._inActiveHierarchy=function(){if(this._onInActive(),this._components)for(var t=0,e=this._components.length;e>t;t++)this._components[t]._setActive(!1);for(this._setBit(2,!1),t=0,e=this._children.length;e>t;t++){var i=this._children[t];!i._getBit(1)&&i._inActiveHierarchy()}this.onDisable()},n.onDisable=function(){},n._onAdded=function(){var t=this._parent.scene;t&&!this._scene&&this._setBelongScene(t),this._parent.activeInHierarchy&&this.active&&this._activeHierarchy()},n._onRemoved=function(){this._parent.activeInHierarchy&&this.active&&this._inActiveHierarchy(),this._parent.scene&&this._setUnBelongScene()},n._addComponentInstance=function(t,e){void 0===e&&(e=!0),this._components=this._components||[],this._components.push(t),t.owner=this,t._onAdded(),this.activeInHierarchy&&t._setActive(!0),this._scene&&t._setActiveInScene(!0)},n._destroyComponent=function(t){if(this._components)for(var e=0,i=this._components.length;i>e;e++){var n=this._components[e];if(n===t){n._destroy(),this._components.splice(e,1);break}}},n._destroyAllComponent=function(){if(this._components){for(var t=0,e=this._components.length;e>t;t++){var i=this._components[t];i._destroy()}this._components.length=0}},n._cloneTo=function(t){var e=t;if(this._components)for(var i=0,n=this._components.length;n>i;i++){var s=e.addComponent(this._components[i].constructor);this._components[i]._cloneTo(s)}},n.addComponentIntance=function(t){if(t.owner)throw"Node:the component has belong to other node.";if(t.isSingleton&&this.getComponent(t.constructor))throw"Node:the component is singleton,can't add the second one.";return this._addComponentInstance(t,!0),t},n.addComponent=function(t){var e=new t;if(e.isSingleton&&this.getComponent(t))throw"无法实例"+t+"组件，"+t+"组件已存在！";return this._addComponentInstance(e,!0),e},n.getComponent=function(t){if(this._components)for(var e=0,n=this._components.length;n>e;e++){var s=this._components[e];if(i.__typeof(s,t))return s}return null},n.getComponents=function(t){var e;if(this._components)for(var n=0,s=this._components.length;s>n;n++){var r=this._components[n];i.__typeof(r,t)&&(e=e||[],e.push(r))}return e},r(0,n,"numChildren",function(){return this._children.length}),r(0,n,"parent",function(){return this._parent}),r(0,n,"activeInHierarchy",function(){return this._getBit(2)}),r(0,n,"active",function(){return!this._getBit(8)&&!this._getBit(1)},function(t){!this._getBit(1)!==t&&(this._setBit(1,!t),this._parent&&this._parent.activeInHierarchy&&(t?this._activeHierarchy():this._inActiveHierarchy()))}),r(0,n,"displayedInStage",function(){return this._getBit(16)?this._getBit(128):(this._setBitUp(16),this._getBit(128))}),r(0,n,"scene",function(){return this._scene}),e.ARRAY_EMPTY=[],e}(c)),Ee=function(t){function e(){this.url=null,this.audio=null,this.loaded=!1,e.__super.call(this)}s(e,"laya.media.h5audio.AudioSound",t);var i=e.prototype;return i.dispose=function(){var t=e._audioCache[this.url];t&&(t.src="",delete e._audioCache[this.url])},i.load=function(t){function i(){s(),o.loaded=!0,o.event("complete")}function n(){r.load=null,s(),o.event("error")}function s(){r.removeEventListener("canplaythrough",i),r.removeEventListener("error",n)}t=ae.formatURL(t),this.url=t;var r;if(t==ne._bgMusic?(e._initMusicAudio(),r=e._musicAudio,r.src!=t&&(e._audioCache[r.src]=null,r=null)):r=e._audioCache[t],r&&r.readyState>=2)return this.event("complete"),void 0;r||(t==ne._bgMusic?(e._initMusicAudio(),r=e._musicAudio):r=_e.createElement("audio"),e._audioCache[t]=r,r.src=t),r.addEventListener("canplaythrough",i),r.addEventListener("error",n);var o=this;this.audio=r,r.load?r.load():n()},i.play=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),!this.url)return null;var n;if(n=this.url==ne._bgMusic?e._musicAudio:e._audioCache[this.url],!n)return null;var s;s=we.getItem("audio:"+this.url),he.isConchApp?s||(s=_e.createElement("audio"),s.src=this.url):this.url==ne._bgMusic?(e._initMusicAudio(),s=e._musicAudio,s.src=this.url):s=s?s:n.cloneNode(!0);var r=new Ve(s);return r.url=this.url,r.loops=i,r.startTime=t,r.play(),ne.addChannel(r),r},r(0,i,"duration",function(){var t;return t=e._audioCache[this.url],t?t.duration:0}),e._initMusicAudio=function(){e._musicAudio||(e._musicAudio||(e._musicAudio=_e.createElement("audio")),he.isConchApp||_e.document.addEventListener("mousedown",e._makeMusicOK))},e._makeMusicOK=function(){_e.document.removeEventListener("mousedown",e._makeMusicOK),e._musicAudio.src?e._musicAudio.play():(e._musicAudio.src="",e._musicAudio.load())},e._audioCache={},e._musicAudio=null,e}(c),Re=function(t){function e(){this.url=null,this.loops=0,this.startTime=0/0,this.isStopped=!1,this.completeHandler=null,e.__super.call(this)}s(e,"laya.media.SoundChannel",t);var i=e.prototype;return i.play=function(){},i.stop=function(){},i.pause=function(){},i.resume=function(){},i.__runComplete=function(t){t&&t.run()},r(0,i,"volume",function(){return 1},function(){}),r(0,i,"position",function(){return 0}),r(0,i,"duration",function(){return 0}),e}(c),Fe=(function(t){function e(){e.__super.call(this)}s(e,"laya.media.Sound",t);var i=e.prototype;return i.load=function(){},i.play=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),null},i.dispose=function(){},r(0,i,"duration",function(){return 0}),e}(c),function(t){function e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,e.__super.call(this)}s(e,"laya.media.webaudio.WebAudioSound",t);var i=e.prototype;return i.load=function(t){var i=this;if(t=ae.formatURL(t),this.url=t,this.audioBuffer=e._dataCache[t],this.audioBuffer)return this._loaded(this.audioBuffer),void 0;if(e.e.on("loaded:"+t,this,this._loaded),e.e.on("err:"+t,this,this._err),!e.__loadingSound[t]){e.__loadingSound[t]=!0;var n=new _e.window.XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){return i._disposed?(i._removeLoadEvents(),void 0):(i.data=n.response,e.buffs.push({buffer:i.data,url:i.url}),e.decode(),void 0)},n.onerror=function(){i._err()},n.send()}},i._err=function(){this._removeLoadEvents(),e.__loadingSound[this.url]=!1,this.event("error")},i._loaded=function(t){this._removeLoadEvents(),this._disposed||(this.audioBuffer=t,e._dataCache[this.url]=this.audioBuffer,this.loaded=!0,this.event("complete"))},i._removeLoadEvents=function(){e.e.off("loaded:"+this.url,this,this._loaded),e.e.off("err:"+this.url,this,this._err)},i.__playAfterLoaded=function(){if(this.__toPlays){var t,e=0,i=0;t=this.__toPlays,i=t.length;var n;for(e=0;i>e;e++)n=t[e],n[2]&&!n[2].isStopped&&this.play(n[0],n[1],n[2]);this.__toPlays.length=0}},i.play=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),i=i?i:new je,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([t,e,i]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),i.url=this.url,i.loops=e,i.audioBuffer=this.audioBuffer,i.startTime=t,i.play(),ne.addChannel(i),i},i.dispose=function(){this._disposed=!0,delete e._dataCache[this.url],delete e.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},r(0,i,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),e.decode=function(){e.buffs.length<=0||e.isDecoding||(e.isDecoding=!0,e.tInfo=e.buffs.shift(),e.ctx.decodeAudioData(e.tInfo.buffer,e._done,e._fail))},e._done=function(t){e.e.event("loaded:"+e.tInfo.url,t),e.isDecoding=!1,e.decode()},e._fail=function(){e.e.event("err:"+e.tInfo.url,null),e.isDecoding=!1,e.decode()},e._playEmptySound=function(){if(null!=e.ctx){var t=e.ctx.createBufferSource();t.buffer=e._miniBuffer,t.connect(e.ctx.destination),t.start(0,0,0)}},e._unlock=function(){e._unlocked||(e._playEmptySound(),"running"==e.ctx.state&&(_e.document.removeEventListener("mousedown",e._unlock,!0),_e.document.removeEventListener("touchend",e._unlock,!0),_e.document.removeEventListener("touchstart",e._unlock,!0),e._unlocked=!0))},e.initWebAudio=function(){"running"!=e.ctx.state&&(e._unlock(),_e.document.addEventListener("mousedown",e._unlock,!0),_e.document.addEventListener("touchend",e._unlock,!0),_e.document.addEventListener("touchstart",e._unlock,!0))},e._dataCache={},e.buffs=[],e.isDecoding=!1,e._unlocked=!1,e.tInfo=null,e.__loadingSound={},n(e,["window",function(){return this.window=_e.window},"webAudioEnabled",function(){return this.webAudioEnabled=e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext},"ctx",function(){return this.ctx=e.webAudioEnabled?new(e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=e.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new c}]),e}(c)),Oe=function(t){function e(){this.italic=!1,e.__super.call(this)}s(e,"laya.display.css.TextStyle",t);var i=e.prototype;return i.reset=function(){return t.prototype.reset.call(this),this.italic=!1,this.align="left",this.wordWrap=!1,this.leading=0,this.padding=[0,0,0,0],this.bgColor=null,this.borderColor=null,this.asPassword=!1,this.stroke=0,this.strokeColor="#000000",this.bold=!1,this.underline=!1,this.underlineColor=null,this.currBitmapFont=null,this},i.recover=function(){this!==e.EMPTY&&we.recover("TextStyle",this.reset())},i.render=function(t,e,i,n){(this.bgColor||this.borderColor)&&e.drawRect(i,n,t.width,t.height,this.bgColor,this.borderColor,1)},e.create=function(){return we.getItemByClass("TextStyle",e)},e.EMPTY=new e,e}(Y),Be=function(t){function e(){this._responseType=null,this._data=null,e.__super.call(this),this._http=new _e.window.XMLHttpRequest}s(e,"laya.net.HttpRequest",t);var i=e.prototype;return i.send=function(t,e,i,n,s){void 0===i&&(i="get"),void 0===n&&(n="text"),this._responseType=n,this._data=null;var r=this,o=this._http;if(o.open(i,t,!0),s)for(var a=0;a<s.length;a++)o.setRequestHeader(s[a++],s[a]);else he.isConchApp||(e&&"string"!=typeof e?o.setRequestHeader("Content-Type","application/json"):o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));o.responseType="arraybuffer"!==n?"text":"arraybuffer",o.onerror=function(t){r._onError(t)},o.onabort=function(t){r._onAbort(t)},o.onprogress=function(t){r._onProgress(t)},o.onload=function(t){r._onLoad(t)},o.send(e)},i._onProgress=function(t){t&&t.lengthComputable&&this.event("progress",t.loaded/t.total)},i._onAbort=function(){this.error("Request was aborted by user")},i._onError=function(){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},i._onLoad=function(){var t=this._http,e=void 0!==t.status?t.status:200;200===e||204===e||0===e?this.complete():this.error("["+t.status+"]"+t.statusText+":"+t.responseURL)},i.error=function(t){this.clear(),console.warn(this.url,t),this.event("error",t)},i.complete=function(){this.clear();var t=!0;try{this._data="json"===this._responseType?JSON.parse(this._http.responseText):"xml"===this._responseType?Ie.parseXMLFromString(this._http.responseText):this._http.response||this._http.responseText}catch(e){t=!1,this.error(e.message)}t&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},i.clear=function(){var t=this._http;t.onerror=t.onabort=t.onprogress=t.onload=null},r(0,i,"url",function(){return this._http.responseURL}),r(0,i,"http",function(){return this._http}),r(0,i,"data",function(){return this._data}),e}(c),ke=function(t){function e(){this._data=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._useWorkerLoader=!1,this._customParse=!1,this._constructParams=null,this._propertyParams=null,this._createCache=!1,e.__super.call(this)}s(e,"laya.net.Loader",t);var n=e.prototype;return n.load=function(t,i,n,s,r,o){if(void 0===n&&(n=!0),void 0===r&&(r=!1),void 0===o&&(o=!1),e.setGroup(t,"666"),this._url=t,0===t.indexOf("data:image")?i="image":t=ae.formatURL(t),this._type=i||(i=e.getTypeFromUrl(t)),this._cache=n,this._useWorkerLoader=o,this._data=null,o&&Ue.enableWorkerLoader(),!r&&e.loadedMap[t])return this._data=e.loadedMap[t],this.event("progress",1),this.event("complete",this._data),void 0;if(s&&e.setGroup(t,s),null!=e.parserMap[i])return this._customParse=!0,e.parserMap[i]instanceof laya.utils.Handler?e.parserMap[i].runWith(this):e.parserMap[i].call(null,this),void 0;if("image"===i||"htmlimage"===i||"nativeimage"===i)return this._loadImage(t);if("sound"===i)return this._loadSound(t);if("ttf"===i)return this._loadTTF(t);var a;switch(i){case"atlas":case"prefab":case"plf":a="json";break;case"font":a="xml";break;default:a=i}e.preLoadedMap[t]?this.onLoaded(e.preLoadedMap[t]):(this._http||(this._http=new Be,this._http.on("progress",this,this.onProgress),this._http.on("error",this,this.onError),this._http.on("complete",this,this.onLoaded)),this._http.send(t,null,"get",a))},n._loadTTF=function(t){t=ae.formatURL(t);var e=new oe;e.complete=_.create(this,this.onLoaded),e.load(t)},n._loadImage=function(t){function i(){var i=e._imgCache[t];i&&(i.onload=null,i.onerror=null,delete e._imgCache[t])}t=ae.formatURL(t);var n,s=this,r=function(){i(),s.event("error","Load image failed")};if("nativeimage"===this._type){var o=function(){i(),s.onLoaded(n)};n=new _e.window.Image,n.crossOrigin="",n.onload=o,n.onerror=r,n.src=t,e._imgCache[t]=n}else{var a=new _e.window.Image;o=function(){n=ei.create(a.width,a.height),n.loadImageSource(a,!0),n._setUrl(t),i(),s.onLoaded(n)},a.crossOrigin="",a.onload=o,a.onerror=r,a.src=t,e._imgCache[t]=a}},n._loadSound=function(t){function e(){n(),r.onLoaded(s)}function i(){n(),s.dispose(),r.event("error","Load sound failed")}function n(){s.offAll()}var s=new ne._soundClass,r=this;s.on("complete",this,e),s.on("error",this,i),s.load(t)},n.onProgress=function(t){"atlas"===this._type?this.event("progress",.3*t):this.event("progress",t)},n.onError=function(t){this.event("error",t)},n.onLoaded=function(t){var i=this._type;if("plf"==i)this.parsePLFData(t),this.complete(t);else if("image"===i){var n=new Ye(t);n.url=this._url,this.complete(n)}else if("sound"===i||"htmlimage"===i||"nativeimage"===i)this.complete(t);else if("atlas"===i){if(!t.url&&!t._setContext){if(!this._data){if(this._data=t,t.meta&&t.meta.image)for(var s=t.meta.image.split(","),r=this._url.indexOf("/")>=0?"/":"\\",o=this._url.lastIndexOf(r),a=o>=0?this._url.substr(0,o+1):"",h=0,l=s.length;l>h;h++)s[h]=a+s[h];else s=[this._url.replace(".json",".png")];s.reverse(),t.toLoads=s,t.pics=[]}return this.event("progress",.3+1/s.length*.6),this._loadImage(s.pop())}if(this._data.pics.push(t),this._data.toLoads.length>0)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var c=this._data.frames,_=this._url.split("?")[0],f=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:_.substring(0,_.lastIndexOf("."))+"/",p=this._data.pics,g=ae.formatURL(this._url),m=e.atlasMap[g]||(e.atlasMap[g]=[]);m.dir=f;var v=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale){v=parseFloat(this._data.meta.scale);for(var y in c){var x=c[y],w=p[x.frame.idx?x.frame.idx:0],T=ae.formatURL(f+y);w.scaleRate=v;var C;C=Ye._create(w,x.frame.x,x.frame.y,x.frame.w,x.frame.h,x.spriteSourceSize.x,x.spriteSourceSize.y,x.sourceSize.w,x.sourceSize.h,laya.net.Loader.getRes(T)),e.cacheRes(T,C),C.url=T,m.push(T)}}else for(y in c)x=c[y],w=p[x.frame.idx?x.frame.idx:0],T=ae.formatURL(f+y),C=Ye._create(w,x.frame.x,x.frame.y,x.frame.w,x.frame.h,x.spriteSourceSize.x,x.spriteSourceSize.y,x.sourceSize.w,x.sourceSize.h,laya.net.Loader.getRes(T)),e.cacheRes(T,C),C.url=T,m.push(T);delete this._data.pics,this.complete(this._data)}else if("font"===i){if(!t.src)return this._data=t,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var b=new d;b.parseFont(this._data,t);var S=this._url.split(".fnt")[0].split("/"),M=S[S.length-1];qe.registerBitmapFont(M,b),this._data=b,this.complete(this._data)}else if("prefab"===i){var I=new u;I.json=t,this.complete(I)}else this.complete(t)},n.parsePLFData=function(t){var i,n,s;for(i in t)switch(s=t[i],i){case"json":case"text":for(n in s)e.preLoadedMap[ae.formatURL(n)]=s[n];break;default:for(n in s)e.preLoadedMap[ae.formatURL(n)]=s[n]}},n.complete=function(t){this._data=t,this._customParse?this.event("loaded",t instanceof Array?[t]:t):(e._loaders.push(this),e._isWorking||e.checkNext())},n.endLoad=function(t){t&&(this._data=t),this._cache&&e.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},r(0,n,"url",function(){return this._url}),r(0,n,"data",function(){return this._data}),r(0,n,"cache",function(){return this._cache}),r(0,n,"type",function(){return this._type}),e.getTypeFromUrl=function(t){var i=Ie.getFileExtension(t);return i?e.typeMap[i]:(console.warn("Not recognize the resources suffix",t),"text")},e.checkNext=function(){e._isWorking=!0;for(var t=_e.now(),n=t;e._startIndex<e._loaders.length;)if(n=_e.now(),e._loaders[e._startIndex].endLoad(),e._startIndex++,_e.now()-t>e.maxTimeOut)return console.warn("loader callback cost a long time:"+(_e.now()-t)+" url="+e._loaders[e._startIndex-1].url),i.timer.frameOnce(1,null,e.checkNext),void 0;e._loaders.length=0,e._startIndex=0,e._isWorking=!1},e.clearRes=function(t,i){void 0===i&&(i=!1),t=ae.formatURL(t);var n=e.getAtlas(t);if(n){for(var s=0,r=n.length;r>s;s++){var o=n[s],a=e.getRes(o);delete e.loadedMap[o],a&&a.destroy(i)
}n.length=0,delete e.atlasMap[t],delete e.loadedMap[t]}else{var h=e.loadedMap[t];h&&(delete e.loadedMap[t],h instanceof laya.resource.Texture&&h.bitmap&&h.destroy(i))}},e.getRes=function(t){return e.loadedMap[ae.formatURL(t)]},e.getAtlas=function(t){return e.atlasMap[ae.formatURL(t)]},e.cacheRes=function(t,i){t=ae.formatURL(t),null!=e.loadedMap[t]?console.warn("Resources already exist,is repeated loading:",t):e.loadedMap[t]=i},e.setGroup=function(t,i){e.groupMap[i]||(e.groupMap[i]=[]),e.groupMap[i].push(t)},e.clearResByGroup=function(t){if(e.groupMap[t]){var i=e.groupMap[t],n=0,s=i.length;for(n=0;s>n;n++)e.clearRes(i[n]);i.length=0}},e.clearResByTime=function(t,i,n){for(var s=e.getResListByTime(t,i),r=0,o=s.length;o>r;r++){var a=s[r];if(n){for(var h=!1,l=0,u=n.length;u>l;l++)if(a===n[l]){h=!0;break}if(h)continue}e.clearRes(a)}},e.getResListByTime=function(){return null},e.TEXT="text",e.JSON="json",e.PREFAB="prefab",e.XML="xml",e.BUFFER="arraybuffer",e.IMAGE="image",e.SOUND="sound",e.ATLAS="atlas",e.FONT="font",e.TTF="ttf",e.PLF="plf",e.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",prefab:"prefab",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",plf:"plf",scene:"json"},e.parserMap={},e.maxTimeOut=100,e.groupMap={},e.loadedMap={},e.atlasMap={},e.preLoadedMap={},e._imgCache={},e._loaders=[],e._isWorking=!1,e._startIndex=0,e}(c),Ne=function(t){function e(){this.retryNum=1,this.retryDelay=0,this.maxLoader=5,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},this._statInfo={count:1,loaded:1},e.__super.call(this);for(var t=0;t<this._maxPriority;t++)this._resInfos[t]=[]}var r;s(e,"laya.net.LoaderManager",t);var o=e.prototype;return o.getProgress=function(){return this._statInfo.loaded/this._statInfo.count},o.resetProgress=function(){this._statInfo.count=this._statInfo.loaded=1},o.create=function(t,e,i,n,s,r,o,a){function h(t){d++,t.progress=1,d===c&&e&&e.run()}function l(t,e){t.progress=e;for(var i=0,n=0;c>n;n++){var s=u[n];i+=s.progress}var r=i/c;f.runWith(r)}if(void 0===o&&(o=1),void 0===a&&(a=!0),t instanceof Array){var u=t,c=u.length,d=0;if(i)var f=_.create(i.caller,i.method,i.args,!1);for(var p=0;c>p;p++){var g=u[p];"string"==typeof g&&(g=u[p]={url:g}),g.progress=0}for(p=0;c>p;p++){g=u[p];var m=i?_.create(null,l,[g],!1):null,v=i||e?_.create(null,h,[g]):null;this._create(g.url,v,m,g.type||n,g.constructParams||s,g.propertyParams||r,g.priority||o,a)}}else this._create(t,e,i,n,s,r,o,a)},o._create=function(t,n,s,r,o,a,h,l){function u(e){n&&n.runWith(e),i.loader.event(t)}void 0===h&&(h=1),void 0===l&&(l=!0);var c=ae.formatURL(t),d=this.getRes(c);if(d)s&&s.runWith(1),n&&n.runWith(d);else{var f=Ie.getFileExtension(t),p=e.createMap[f];if(r||(r=p[0]),!r)throw"LoaderManager:unknown type.";var g=ke.parserMap;if(!g[r])return this.load(t,n,s,r,h,l),void 0;this._createLoad(t,_.create(null,u),s,r,o,a,h,l,!0)}},o.load=function(t,n,s,o,a,h,l,u,c){var _=this;if(void 0===a&&(a=1),void 0===h&&(h=!0),void 0===u&&(u=!1),void 0===c&&(c=!1),t instanceof Array)return this._loadAssets(t,n,s,o,a,h,l);var d=ke.getRes(t);if(u||null==d){var f;f=t,t=se.getFileLoadPath(t),t!=f&&"nativeimage"!==o?o="atlas":f=null;var p=e._resMap[t];p?(n&&(f?n&&p._createListener("complete",this,this._resInfoLoaded,[f,n],!1,!1):n&&p._createListener("complete",n.caller,n.method,n.args,!1,!1)),s&&p._createListener("progress",s.caller,s.method,s.args,!1,!1)):(p=this._infoPool.length?this._infoPool.pop():new r,p.url=t,p.type=o,p.cache=h,p.group=l,p.ignoreCache=u,p.useWorkerLoader=c,p.originalUrl=f,n&&p.on("complete",n.caller,n.method,n.args),s&&p.on("progress",s.caller,s.method,s.args),e._resMap[t]=p,a=a<this._maxPriority?a:this._maxPriority-1,this._resInfos[a].push(p),this._statInfo.count++,this.event("progress",this.getProgress()),this._next())}else i.timer.frameOnce(1,null,function(){s&&s.runWith(1),n&&n.runWith(d),_._loaderCount||_.event("complete")});return this},o._resInfoLoaded=function(t,e){e.runWith(ke.getRes(t))},o._createLoad=function(t,n,s,o,a,h,l,u,c){var _=this;if(void 0===l&&(l=1),void 0===u&&(u=!0),void 0===c&&(c=!1),t instanceof Array)return this._loadAssets(t,n,s,o,l,u);var d=ke.getRes(t);if(null!=d)i.timer.frameOnce(1,null,function(){s&&s.runWith(1),n&&n.runWith(d),_._loaderCount||_.event("complete")});else{var f=e._resMap[t];f?(n&&f._createListener("complete",n.caller,n.method,n.args,!1,!1),s&&f._createListener("progress",s.caller,s.method,s.args,!1,!1)):(f=this._infoPool.length?this._infoPool.pop():new r,f.url=t,f.type=o,f.cache=!1,f.ignoreCache=c,f.originalUrl=null,f.createCache=u,f.createConstructParams=a,f.createPropertyParams=h,n&&f.on("complete",n.caller,n.method,n.args),s&&f.on("progress",s.caller,s.method,s.args),e._resMap[t]=f,l=l<this._maxPriority?l:this._maxPriority-1,this._resInfos[l].push(f),this._statInfo.count++,this.event("progress",this.getProgress()),this._next())}return this},o._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var t=0;t<this._maxPriority;t++)for(var e=this._resInfos[t];e.length>0;){var i=e.shift();if(i)return this._doLoad(i)}this._loaderCount||this.event("complete")}},o._doLoad=function(t){function e(e){i.offAll(),i._data=null,i._customParse=!1,n._loaders.push(i),n._endLoad(t,e instanceof Array?[e]:e),n._loaderCount--,n._next()}this._loaderCount++;var i=this._loaders.length?this._loaders.pop():new ke;i.on("complete",null,e),i.on("progress",null,function(e){t.event("progress",e)}),i.on("error",null,function(){e(null)});var n=this;i._constructParams=t.createConstructParams,i._propertyParams=t.createPropertyParams,i._createCache=t.createCache,i.load(t.url,t.type,t.cache,t.group,t.ignoreCache,t.useWorkerLoader)},o._endLoad=function(t,n){var s=t.url;if(null==n){var r=this._failRes[s]||0;if(r<this.retryNum)return console.warn("[warn]Retry to load:",s),this._failRes[s]=r+1,i.timer.once(this.retryDelay,this,this._addReTry,[t],!1),void 0;ke.clearRes(s),console.warn("[error]Failed to load:",s),this.event("error",s)}this._failRes[s]&&(this._failRes[s]=0),delete e._resMap[s],t.originalUrl&&(n=ke.getRes(t.originalUrl)),t.event("complete",n),t.offAll(),this._infoPool.push(t),this._statInfo.loaded++,this.event("progress",this.getProgress())},o._addReTry=function(t){this._resInfos[this._maxPriority-1].push(t),this._next()},o.clearRes=function(t,e){void 0===e&&(e=!1),ke.clearRes(t,e)},o.getRes=function(t){return ke.getRes(t)},o.cacheRes=function(t,e){ke.cacheRes(t,e)},o.setGroup=function(t,e){ke.setGroup(t,e)},o.clearResByGroup=function(t){ke.clearResByGroup(t)},o.clearUnLoaded=function(){for(var t=0;t<this._maxPriority;t++){for(var i=this._resInfos[t],n=i.length-1;n>-1;n--){var s=i[n];s&&(s.offAll(),this._infoPool.push(s))}i.length=0}this._loaderCount=0,e._resMap={}},o.cancelLoadByUrls=function(t){if(t)for(var e=0,i=t.length;i>e;e++)this.cancelLoadByUrl(t[e])},o.cancelLoadByUrl=function(t){for(var i=0;i<this._maxPriority;i++)for(var n=this._resInfos[i],s=n.length-1;s>-1;s--){var r=n[s];r&&r.url===t&&(n[s]=null,r.offAll(),this._infoPool.push(r))}e._resMap[t]&&delete e._resMap[t]},o._loadAssets=function(t,e,i,n,s,r,o){function a(t,i){u++,t.progress=1,i||(f=!1),u===l&&e&&e.runWith(f)}function h(t,e){if(null!=i){t.progress=e;for(var n=0,s=0;s<d.length;s++){var r=d[s];n+=r.size*r.progress}var o=n/c;i.runWith(o)}}void 0===s&&(s=1),void 0===r&&(r=!0);for(var l=t.length,u=0,c=0,d=[],f=!0,p=0;l>p;p++){var g=t[p];"string"==typeof g&&(g={url:g,type:n,size:1,priority:s}),g.size||(g.size=1),g.progress=0,c+=g.size,d.push(g);var m=i?_.create(null,h,[g],!1):null,v=e||i?_.create(null,a,[g]):null;this.load(g.url,v,m,g.type,g.priority||1,r,g.group||o,!1,g.useWorkerLoader)}return this},o.decodeBitmaps=function(t){var e,i=0,n=t.length;for(e=he._context,i=0;n>i;i++){var s;if(s=ke.getAtlas(t[i]))this._decodeTexture(s[0],e);else{var r;r=this.getRes(t[i]),r&&r instanceof laya.resource.Texture&&this._decodeTexture(r,e)}}},o._decodeTexture=function(t,e){var n=t.bitmap;if(t&&n){var s=n.source||n.image;if(s&&i.__typeof(s,_e.window.HTMLImageElement)){e.drawImage(s,0,0,1,1);{e.getImageData(0,0,1,1)}}}},e.cacheRes=function(t,e){ke.cacheRes(t,e)},e._resMap={},n(e,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),e.__init$=function(){r=function(t){function e(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.useWorkerLoader=!1,this.originalUrl=null,this.createCache=!1,this.createConstructParams=null,this.createPropertyParams=null,e.__super.call(this)}return s(e,"",t),e}(c)},e}(c),We=function(t){function e(){this.totalCount=0,this._completeHandler=null,this._toLoadList=null,this._isLoading=!1,this._curUrl=null,e.__super.call(this),this._completeHandler=new _(this,this.onOneLoadComplete),this.reset()}s(e,"laya.net.SceneLoader",t);var o=e.prototype;return o.reset=function(){this._toLoadList=[],this._isLoading=!1,this.totalCount=0},o.load=function(t){if(t instanceof Array){var e=0,i=0;for(i=t.length,e=0;i>e;e++)this._addToLoadList(t[e])}else this._addToLoadList(t);this._checkNext()},o._addToLoadList=function(t){this._toLoadList.indexOf(t)>=0||ke.getRes(t)||(this._toLoadList.push(t),this.totalCount++)},o._checkNext=function(){if(!this._isLoading){if(0==this._toLoadList.length)return this.event("complete"),void 0;this.loadOne(this._toLoadList.pop())}},o.loadOne=function(t){this._curUrl=t;var n=Ie.getFileExtension(this._curUrl);t!=se.getFileLoadPath(t)||e.No3dLoadTypes[n]||!Ne.createMap[n]?i.loader.load(t,this._completeHandler):e.LoadableExtensions[n]?i.loader.load(t,this._completeHandler,null,"json"):i.loader.create(t,this._completeHandler)},o.onOneLoadComplete=function(){this._isLoading=!1,ke.getRes(this._curUrl)||console.log("Fail to load:",this._curUrl),this.event("progress");var t=Ie.getFileExtension(this._curUrl);if(e.LoadableExtensions[t]){var i;if(i=ke.getRes(this._curUrl),i&&i.loadList)return this.load(i.loadList),void 0}this._checkNext()},r(0,o,"loadedCount",function(){return this.totalCount-this.leftCount}),r(0,o,"leftCount",function(){return this._isLoading?this._toLoadList.length+1:this._toLoadList.length}),n(e,["LoadableExtensions",function(){return this.LoadableExtensions={scene:!0,ani:!0,ui:!0,prefab:!0}},"No3dLoadTypes",function(){return this.No3dLoadTypes={png:!0,jpg:!0,txt:!0}}]),e}(c),Ue=(function(t){function e(t,i,n,s){this._endian=null,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.disableInput=!1,this._byteClass=null,this.protocols=[],e.__super.call(this),void 0===i&&(i=0),this._byteClass=n?n:de,this.protocols=s,this.endian="bigEndian",t&&i>0&&65535>i&&this.connect(t,i)}s(e,"laya.net.Socket",t);var i=e.prototype;return i.connect=function(t,e){var i="ws://"+t+":"+e;this.connectByUrl(i)},i.connectByUrl=function(t){var e=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this._socket=this.protocols&&0!=this.protocols.length?new _e.window.WebSocket(t,this.protocols):new _e.window.WebSocket(t),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(t){e._onOpen(t)},this._socket.onmessage=function(t){e._onMessage(t)},this._socket.onclose=function(t){e._onClose(t)},this._socket.onerror=function(t){e._onError(t)}},i.cleanSocket=function(){this.close(),this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},i.close=function(){if(null!=this._socket)try{this._socket.close()}catch(t){}},i._onOpen=function(t){this._connected=!0,this.event("open",t)},i._onMessage=function(t){if(t&&t.data){var e=t.data;if(this.disableInput&&e)return this.event("message",e),void 0;this._input.length>0&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var i=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,e&&("string"==typeof e?this._input.writeUTFBytes(e):this._input.writeArrayBuffer(e),this._addInputPosition=this._input.pos,this._input.pos=i),this.event("message",e)}},i._onClose=function(t){this._connected=!1,this.event("close",t)},i._onError=function(t){this.event("error",t)},i.send=function(t){this._socket.send(t)},i.flush=function(){if(this._output&&this._output.length>0){var t;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(e){t=e}this._output.endian=this.endian,this._output.clear(),t&&this.event("error",t)}},r(0,i,"input",function(){return this._input}),r(0,i,"output",function(){return this._output}),r(0,i,"connected",function(){return this._connected}),r(0,i,"endian",function(){return this._endian},function(t){this._endian=t,null!=this._input&&(this._input.endian=t),null!=this._output&&(this._output.endian=t)}),e.LITTLE_ENDIAN="littleEndian",e.BIG_ENDIAN="bigEndian",e}(c),function(t){function e(){this.worker=null,this._useWorkerLoader=!1,e.__super.call(this);var t=this;this.worker=new _e.window.Worker(e.workerPath),this.worker.onmessage=function(e){t.workerMessage(e.data)}}s(e,"laya.net.WorkerLoader",t);var i=e.prototype;return i.workerMessage=function(t){if(t)switch(t.type){case"Image":this.imageLoaded(t);break;case"Disable":e.enable=!1}},i.imageLoaded=function(t){if(!t.dataType||"imageBitmap"!=t.dataType)return this.event(t.url,null),void 0;var e=new ti,i=e.source.getContext("2d");switch(t.dataType){case"imageBitmap":var n=t.imageBitmap;e.size(n.width,n.height),i.drawImage(n,0,0)}console.log("load:",t.url),he.isWebGL&&(e._setGPUMemory(0),e=new laya.webgl.resource.WebGLImage(e,t.url)),this.event(t.url,e)},i.loadImage=function(t){this.worker.postMessage(t)},i._loadImage=function(t){function i(){laya.net.WorkerLoader.I.off(t,n,s)}var n=this;if(!this._useWorkerLoader||!e._enable)return e._preLoadFun.call(n,t),void 0;t=ae.formatURL(t);var s=function(s){i(),s?n.onLoaded(s):e._preLoadFun.call(n,t)};laya.net.WorkerLoader.I.on(t,n,s),laya.net.WorkerLoader.I.loadImage(t)},r(1,e,"enable",function(){return e._enable},function(t){e._enable!=t&&(e._enable=t,t&&null==e._preLoadFun&&(e._enable=e.__init__()))}),e.__init__=function(){return null!=e._preLoadFun?!1:_e.window.Worker?(e._preLoadFun=ke.prototype._loadImage,ke.prototype._loadImage=e.prototype._loadImage,e.I||(e.I=new e),!0):!1},e.workerSupported=function(){return _e.window.Worker?!0:!1},e.enableWorkerLoader=function(){e._tryEnabled||(e.enable=!0,e._tryEnabled=!0)},e.I=null,e.workerPath="libs/workerloader.js",e._preLoadFun=null,e._enable=!1,e._tryEnabled=!1,e}(c)),Ge=function(t){function e(){e.__super.call(this),this._id=++e._uniqueIDCounter,this._destroyed=!1,this._referenceCount=0,e._idResourcesMap[this.id]=this,this._released=!0,this.lock=!1,this._gpuMemory=0,ce.currentResourceManager&&ce.currentResourceManager.addResource(this)}s(e,"laya.resource.Resource",t);var n=e.prototype;return i.imps(n,{"laya.resource.ICreateResource":!0,"laya.resource.IDestroy":!0}),n._setCPUMemory=function(t){t-this._cpuMemory;this._cpuMemory=t},n._setGPUMemory=function(t){var e=t-this._gpuMemory;this._gpuMemory=t,this.resourceManager&&this.resourceManager.addSize(e)},n._setUrl=function(t){if(this._url!==t){var i;this._url&&(i=e._urlResourcesMap[this._url],i.splice(i.indexOf(this),1),0===i.length&&delete e._urlResourcesMap[this._url]),t&&(i=e._urlResourcesMap[t],i||(e._urlResourcesMap[t]=i=[]),i.push(this)),this._url=t}},n._getGroup=function(){return this._group},n._setGroup=function(t){if(this._group!==t){var i;this._group&&(i=e._groupResourcesMap[this._group],i.splice(i.indexOf(this),1),0===i.length&&delete e._groupResourcesMap[this._group]),t&&(i=e._groupResourcesMap[t],i||(e._groupResourcesMap[t]=i=[]),i.push(this)),this._group=t}},n._addReference=function(){this._referenceCount++},n._removeReference=function(){this._referenceCount--},n._clearReference=function(){this._referenceCount=0},n._completeLoad=function(){this._released=!1},n._recoverResource=function(){},n._disposeResource=function(){},n._activeResource=function(){this._released=!1},n._onAsynLoaded=function(){throw new Error("Resource: must override this function!")},n.releaseResource=function(t){return void 0===t&&(t=!1),!t&&this.lock?!1:!this._released||t?(this._disposeResource(),this._released=!0,!0):!1},n.destroy=function(){if(!this._destroyed){null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete e._idResourcesMap[this.id];var t;this._url&&(t=e._urlResourcesMap[this._url],t&&(t.splice(t.indexOf(this),1),0===t.length&&delete e._urlResourcesMap[this.url]),ke.clearRes(this._url),Te.cancelLoadByUrl(this._url)),this._group&&(t=e._groupResourcesMap[this._group],t.splice(t.indexOf(this),1),0===t.length&&delete e._groupResourcesMap[this.url])}},r(0,n,"id",function(){return this._id}),r(0,n,"released",function(){return this._released}),r(0,n,"url",function(){return this._url}),r(0,n,"gpuMemory",function(){return this._gpuMemory}),r(0,n,"group",function(){return this._getGroup()},function(t){this._setGroup(t)}),r(0,n,"destroyed",function(){return this._destroyed}),r(0,n,"resourceManager",function(){return this._resourceManager}),r(0,n,"cpuMemory",function(){return this._cpuMemory}),r(0,n,"referenceCount",function(){return this._referenceCount}),e.getResourceByID=function(t){return e._idResourcesMap[t]},e.getResourceByURL=function(t,i){return void 0===i&&(i=0),e._urlResourcesMap[t][i]},e.destroyUnusedResources=function(t){var i;if(t){var n=e._groupResourcesMap[t];if(n)for(var s=n.slice(),r=0,o=s.length;o>r;r++)i=s[r],i.lock||0!==i._referenceCount||i.destroy()}else for(var a in e._idResourcesMap)i=e._idResourcesMap[a],i.lock||0!==i._referenceCount||i.destroy()},e._uniqueIDCounter=0,e._idResourcesMap={},e._urlResourcesMap={},e._groupResourcesMap={},e}(c),Ye=function(t){function e(t,i,n,s){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._saveRef=0,this.scaleRate=1,e.__super.call(this),void 0===n&&(n=0),void 0===s&&(s=0),this._id=++e._uniqueIDCounter,t&&null!=t._addReference&&t._addReference(),this.setTo(t,i,n,s)}s(e,"laya.resource.Texture",t);var n=e.prototype;return n.getID=function(){return this._id},n._getSource=function(){return this.bitmap?this.bitmap._getSource():null},n._setUV=function(){},n.setTo=function(t,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=0),this.bitmap=t,this.sourceWidth=n,this.sourceHeight=s,t){this._w=t.width,this._h=t.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=this._w>0}this.uv=i||e.DEF_UV},n.active=function(){this.bitmap&&this.bitmap.activeResource()},n.getEnabled=function(){return this._loaded&&this.bitmap?!0:!1},n.destroy=function(t){void 0===t&&(t=!1),this.bitmap&&this.bitmap.referenceCount>0&&(t?(this.bitmap.destroy(),this.bitmap._clearReference()):this.bitmap._removeReference(),this.bitmap=null,this.url&&this===i.loader.getRes(this.url)&&i.loader.clearRes(this.url,t),this._loaded=!1)},n.load=function(t){this._loaded=!1,i.loader.load(t,_.create(this,this._onLoaded),null,"htmlimage",1,!1,null,!0)},n._onLoaded=function(t){if(t==this);else if(t instanceof laya.resource.Texture){var i=t;e._create(t,0,0,i.width,i.height,0,0,i.sourceWidth,i.sourceHeight,this)}else this.bitmap=t,this.bitmap.useNum++,this._loaded=!0,this.sourceWidth=this._w=t.width,this.sourceHeight=this._h=t.height;this.event("loaded",this)},n.getPixels=function(t,e,i,n){if(he.isWebGL)return Te.getTexturePixels(this,t,e,i,n);if(he.isConchApp)return this._nativeObj.getImageData(0,0,i,n);_e.canvas.size(i,n),_e.canvas.clear(),_e.context.drawImage(this,-t,-e,this.width,this.height,0,0);var s=_e.context.getImageData(0,0,i,n);return s.data},r(0,n,"height",function(){return this.loaded?this._h?this._h:this.uv&&this.uv!==e.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height:0},function(t){this._h=t,this.sourceHeight||(this.sourceHeight=t)}),r(0,n,"uv",function(){return this._uv},function(t){this._uv=t,this._setUV(t)}),r(0,n,"loaded",function(){return this._loaded}),r(0,n,"width",function(){return this.loaded?this._w?this._w:this.uv&&this.uv!==e.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width:0},function(t){this._w=t,this.sourceWidth||(this.sourceWidth=t)}),e.moveUV=function(t,e,i){for(var n=0;8>n;n+=2)i[n]+=t,i[n+1]+=e;return i},e.create=function(t,i,n,s,r,o,a,h,l){return void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l=0),e._create(t,i,n,s,r,o,a,h,l)},e._create=function(t,i,n,s,r,o,a,h,l,u){void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l=0);var c=t instanceof laya.resource.Texture,_=c?t.uv:e.DEF_UV,d=c?t.bitmap:t;d.width&&i+s>d.width&&(s=d.width-i),d.height&&n+r>d.height&&(r=d.height-n);var f;u?(f=u,d._addReference(),f.setTo(d,null,h||s,l||r)):f=new e(d,null,h||s,l||r),f.width=s,f.height=r,f.offsetX=o,f.offsetY=a;var p=1/d.width,g=1/d.height;i*=p,n*=g,s*=p,r*=g;var m=f.uv[0],v=f.uv[1],y=f.uv[4],x=f.uv[5],w=y-m,T=x-v,C=e.moveUV(_[0],_[1],[i,n,i+s,n,i+s,n+r,i,n+r]);f.uv=[m+C[0]*w,v+C[1]*T,y-(1-C[2])*w,v+C[3]*T,y-(1-C[4])*w,x-(1-C[5])*T,m+C[6]*w,x-(1-C[7])*T];var b=d.scaleRate;return b&&1!=b?(f.sourceWidth/=b,f.sourceHeight/=b,f.width/=b,f.height/=b,f.scaleRate=b):f.scaleRate=1,f},e.createFromTexture=function(t,i,n,s,r){var o=t.scaleRate;1!=o&&(i*=o,n*=o,s*=o,r*=o);var a=ie.TEMP.setTo(i-t.offsetX,n-t.offsetY,s,r),h=a.intersection(e._rect1.setTo(0,0,t.width,t.height),e._rect2);if(!h)return null;var l=e.create(t,h.x,h.y,h.width,h.height,h.x-a.x,h.y-a.y,s,r);return l.bitmap.useNum--,l},e.DEF_UV=[0,0,1,0,1,1,0,1],e.NO_UV=[0,0,0,0,0,0,0,0],e.INV_UV=[0,1,1,1,1,0,0,0],e._rect1=new ie,e._rect2=new ie,e._uniqueIDCounter=0,e}(c),He=function(t){function e(t){e.__super.call(this),t||(t=this._copyMatrix(e.IDENTITY_MATRIX)),this._mat=new Float32Array(16),this._alpha=new Float32Array(4),this.setByMatrix(t),this._action=new q,this._action.data=this}s(e,"laya.filters.ColorFilter",t);var o=e.prototype;return i.imps(o,{"laya.filters.IFilter":!0}),o.gray=function(){return this.setByMatrix(e.GRAY_MATRIX)},o.color=function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),this.setByMatrix([1,0,0,0,t,0,1,0,0,e,0,0,1,0,i,0,0,0,1,n])},o.setByMatrix=function(t){this._matrix!=t&&this._copyMatrix(t);for(var e=0,i=0,n=0;20>n;n++)n%5!=4?this._mat[e++]=t[n]:this._alpha[i++]=t[n];return this},o.adjustColor=function(t,e,i,n){return this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i),this},o.adjustBrightness=function(t){return t=this._clampValue(t,100),0==t||isNaN(t)?this:this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])},o.adjustContrast=function(t){if(t=this._clampValue(t,100),0==t||isNaN(t))return this;var i=0/0;0>t?i=127+t/100*127:(i=t%1,i=0==i?e.DELTA_INDEX[t]:e.DELTA_INDEX[t<<0]*(1-i)+e.DELTA_INDEX[(t<<0)+1]*i,i=127*i+127);var n=i/127,s=.5*(127-i);return this._multiplyMatrix([n,0,0,0,s,0,n,0,0,s,0,0,n,0,s,0,0,0,1,0,0,0,0,0,1])},o.adjustSaturation=function(t){if(t=this._clampValue(t,100),0==t||isNaN(t))return this;var e=1+(t>0?3*t/100:t/100),i=1-e,n=.3086*i,s=.6094*i,r=.082*i;return this._multiplyMatrix([n+e,s,r,0,0,n,s+e,r,0,0,n,s,r+e,0,0,0,0,0,1,0,0,0,0,0,1])},o.adjustHue=function(t){if(t=this._clampValue(t,180)/180*Math.PI,0==t||isNaN(t))return this;var e=Math.cos(t),i=Math.sin(t),n=.213,s=.715,r=.072;return this._multiplyMatrix([n+e*(1-n)+i*-n,s+e*-s+i*-s,r+e*-r+i*(1-r),0,0,n+e*-n+.143*i,s+e*(1-s)+.14*i,r+e*-r+i*-.283,0,0,n+e*-n+i*-(1-n),s+e*-s+i*s,r+e*(1-r)+i*r,0,0,0,0,0,1,0,0,0,0,0,1])},o.reset=function(){return this.setByMatrix(this._copyMatrix(e.IDENTITY_MATRIX))},o._multiplyMatrix=function(t){var e=[];this._matrix=this._fixMatrix(this._matrix);for(var i=0;5>i;i++){for(var n=0;5>n;n++)e[n]=this._matrix[n+5*i];for(n=0;5>n;n++){for(var s=0,r=0;5>r;r++)s+=t[n+5*r]*e[r];this._matrix[n+5*i]=s}}return this.setByMatrix(this._matrix)},o._clampValue=function(t,e){return Math.min(e,Math.max(-e,t))},o._fixMatrix=function(t){return null==t?e.IDENTITY_MATRIX:(t.length<25?t=t.slice(0,t.length).concat(e.IDENTITY_MATRIX.slice(t.length,25)):t.length>25&&(t=t.slice(0,25)),t)},o._copyMatrix=function(t){var e=25;this._matrix||(this._matrix=[]);for(var i=0;e>i;i++)this._matrix[i]=t[i];return this._matrix},r(0,o,"type",function(){return 32}),e.LENGTH=25,n(e,["DELTA_INDEX",function(){return this.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10]},"GRAY_MATRIX",function(){return this.GRAY_MATRIX=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]},"IDENTITY_MATRIX",function(){return this.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}]),e}($),Xe=function(t){function e(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,e.__super.call(this)}var n;s(e,"laya.utils.TimeLine",t);var o=e.prototype;return o.to=function(t,e,i,n,s){return void 0===s&&(s=0),this._create(t,e,i,n,s,!0)},o.from=function(t,e,i,n,s){return void 0===s&&(s=0),this._create(t,e,i,n,s,!1)},o._create=function(t,e,i,s,r,o){var a=we.getItemByClass("tweenData",n);return a.isTo=o,a.type=0,a.target=t,a.duration=i,a.data=e,a.startTime=this._startTime+r,a.endTime=a.startTime+a.duration,a.ease=s,this._startTime=Math.max(a.endTime,this._startTime),this._tweenDataList.push(a),this._startTimeSort=!0,this._endTimeSort=!0,this},o.addLabel=function(t,e){var i=we.getItemByClass("tweenData",n);return i.type=1,i.data=t,i.endTime=i.startTime=this._startTime+e,this._labelDic||(this._labelDic={}),this._labelDic[t]=i,this._tweenDataList.push(i),this},o.removeLabel=function(t){if(this._labelDic&&this._labelDic[t]){var e=this._labelDic[t];if(e){var i=this._tweenDataList.indexOf(e);i>-1&&this._tweenDataList.splice(i,1)}delete this._labelDic[t]}},o.gotoTime=function(t){function e(t,e){return t.endTime>e.endTime?1:t.endTime<e.endTime?-1:0}if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var i,n;for(var s in this._firstTweenDic)if(n=this._firstTweenDic[s])for(var r in n)n.diyTarget.hasOwnProperty(r)&&(n.diyTarget[r]=n[r]);for(s in this._tweenDic)i=this._tweenDic[s],i.clear(),delete this._tweenDic[s];this._index=0,this._gidIndex=0,this._currTime=t,this._lastTime=_e.now();var o;null==this._endTweenDataList||this._endTimeSort?(this._endTimeSort=!1,this._endTweenDataList=o=this._tweenDataList.concat(),o.sort(e)):o=this._endTweenDataList;for(var a,h=0,l=o.length;l>h;h++)if(a=o[h],0==a.type){if(!(t>=a.endTime))break;this._index=Math.max(this._index,h+1);var u=a.data;if(a.isTo)for(var c in u)a.target[c]=u[c]}for(h=0,l=this._tweenDataList.length;l>h;h++)a=this._tweenDataList[h],0==a.type&&t>=a.startTime&&t<a.endTime&&(this._index=Math.max(this._index,h+1),this._gidIndex++,i=we.getItemByClass("tween",Me),i._create(a.target,a.data,a.duration,a.ease,_.create(this,this._animComplete,[this._gidIndex]),0,!1,a.isTo,!0,!1),i.setStartTime(this._currTime-(t-a.startTime)),i._updateEase(this._currTime),i.gid=this._gidIndex,this._tweenDic[this._gidIndex]=i)}},o.gotoLabel=function(t){if(null!=this._labelDic){var e=this._labelDic[t];e&&this.gotoTime(e.startTime)}},o.pause=function(){i.timer.clear(this,this._update)},o.resume=function(){this.play(this._currTime,this._loopKey)},o.play=function(t,e){function n(t,e){return t.startTime>e.startTime?1:t.startTime<e.startTime?-1:0}if(void 0===t&&(t=0),void 0===e&&(e=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(n);for(var s=0,r=this._tweenDataList.length;r>s;s++){var o=this._tweenDataList[s];if(null!=o&&0==o.type){var a=o.target,h=a.$_GID||(a.$_GID=Ie.getGID()),l=null;null==this._firstTweenDic[h]?(l={},l.diyTarget=a,this._firstTweenDic[h]=l):l=this._firstTweenDic[h];for(var u in o.data)null==l[u]&&(l[u]=a[u])}}}"string"==typeof t?this.gotoLabel(t):this.gotoTime(t),this._loopKey=e,this._lastTime=_e.now(),i.timer.frameLoop(1,this,this._update)}},o._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var t in this._tweenDic)s=this._tweenDic[t],s.complete();return this._complete(),this.pause(),void 0}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var e=_e.now(),i=e-this._lastTime,n=this._currTime+=i*this.scale;this._lastTime=e;for(t in this._tweenDic)s=this._tweenDic[t],s._updateEase(n);var s;if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var r=this._tweenDataList[this._index];n>=r.startTime&&(this._index++,0==r.type?(this._gidIndex++,s=we.getItemByClass("tween",Me),s._create(r.target,r.data,r.duration,r.ease,_.create(this,this._animComplete,[this._gidIndex]),0,!1,r.isTo,!0,!1),s.setStartTime(n),s.gid=this._gidIndex,this._tweenDic[this._gidIndex]=s,s._updateEase(n)):this.event("label",r.data))}},o._animComplete=function(t){var e=this._tweenDic[t];e&&delete this._tweenDic[t]},o._complete=function(){this.event("complete")},o.reset=function(){var t;if(this._labelDic)for(t in this._labelDic)delete this._labelDic[t];var e;for(t in this._tweenDic)e=this._tweenDic[t],e.clear(),delete this._tweenDic[t];for(t in this._firstTweenDic)delete this._firstTweenDic[t];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var n=0,s=0;for(s=this._tweenDataList.length,n=0;s>n;n++)this._tweenDataList[n]&&this._tweenDataList[n].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,i.timer.clear(this,this._update)},o.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},r(0,o,"index",function(){return this._frameIndex},function(t){this._frameIndex=t,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),r(0,o,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),e.to=function(t,i,n,s,r){return void 0===r&&(r=0),(new e).to(t,i,n,s,r)},e.from=function(t,i,n,s,r){return void 0===r&&(r=0),(new e).from(t,i,n,s,r)},e.__init$=function(){n=function(){function t(){this.type=0,this.isTo=!0,this.startTime=0/0,this.endTime=0/0,this.target=null,this.duration=0/0,this.ease=null,this.data=null}s(t,"");var e=t.prototype;return e.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,we.recover("tweenData",this)},t}()},e}(c),ze=function(t){function e(){this._x=0,this._y=0,this._width=0,this._height=0,this._visible=!0,this._mouseState=0,this._zOrder=0,this._renderType=0,this._transform=null,this._tfChanged=!1,this._texture=null,this._boundStyle=null,this._graphics=null,this._customRenderCmd=null,this._customCmds=null,this._drawCanvasParamData=null,this._callbackFuncObj=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,e.__super.call(this),this._repaint=0,this._style=Y.EMPTY,this._cacheStyle=G.EMPTY,he.isConchApp&&(this._customCmds=[])}s(e,"laya.display.Sprite",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._style&&this._style.recover(),this._cacheStyle&&this._cacheStyle.recover(),this._boundStyle&&this._boundStyle.recover(),this._style=null,this._cacheStyle=null,this._boundStyle=null,this._transform=null,this._graphics=null},n.updateZOrder=function(){Ie.updateOrder(this._children)&&this.repaint()
},n._getBoundsStyle=function(){return this._boundStyle||(this._boundStyle=U.create()),this._boundStyle},n._setCustomRender=function(){},n._setCacheAs=function(){},n._checkCanvasEnable=function(){var t=this._cacheStyle.needEnableCanvasRender();this._getCacheStyle().enableCanvasRender=t,t?(this._cacheStyle.cacheAs=this._cacheStyle.needBitmapCache()?"bitmap":this._cacheStyle.userSetCache,this._cacheStyle.reCache=!0,this._renderType|=8):(this._cacheStyle.cacheAs="none",this._cacheStyle.releaseContext(),this._renderType&=-9),this._setCacheAs(this._cacheStyle.cacheAs),this._setRenderType(this._renderType)},n.reCache=function(){this._cacheStyle.reCache=!0,this._repaint|=2},n.getRepaint=function(){return this._repaint},n._setX=function(t){this._x=t},n._setY=function(t){this._y=t},n.setSelfBounds=function(t){this._getBoundsStyle().userBounds=t},n.getBounds=function(){return this._getBoundsStyle().bounds=ie._getWrapRec(this._boundPointsToParent())},n.getSelfBounds=function(){return this._boundStyle&&this._boundStyle.userBounds?this._boundStyle.userBounds:this._graphics||0!==this._children.length||this._texture?this._getBoundsStyle().bounds=ie._getWrapRec(this._getBoundPointsM(!1)):ie.TEMP.setTo(0,0,0,0)},n._boundPointsToParent=function(t){void 0===t&&(t=!1);var e=0,i=0;this._style&&(e=this.pivotX,i=this.pivotY,t=t||0!==this._style.rotation,this._style.scrollRect&&(e+=this._style.scrollRect.x,i+=this._style.scrollRect.y));var n=this._getBoundPointsM(t);if(!n||n.length<1)return n;if(8!=n.length&&(n=t?J.scanPList(n):ie._getWrapRec(n,ie.TEMP)._getBoundPoints()),!this.transform)return Ie.transPointList(n,this._x-e,this._y-i),n;var s=ee.TEMP,r=0,o=n.length;for(r=0;o>r;r+=2)s.x=n[r],s.y=n[r+1],this.toParentPoint(s),n[r]=s.x,n[r+1]=s.y;return n},n.getGraphicBounds=function(t){return void 0===t&&(t=!1),this._graphics?this._graphics.getBounds(t):ie.TEMP.setTo(0,0,0,0)},n._getBoundPointsM=function(t){if(void 0===t&&(t=!1),this._boundStyle&&this._boundStyle.userBounds)return this._boundStyle.userBounds._getBoundPoints();if(this._boundStyle||this._getBoundsStyle(),this._boundStyle.temBM||(this._boundStyle.temBM=[]),this._style.scrollRect){var e=Ie.clearArray(this._boundStyle.temBM),i=ie.TEMP;return i.copyFrom(this._style.scrollRect),Ie.concatArray(e,i._getBoundPoints()),e}var n;this._graphics?n=this._graphics.getBoundPoints():(n=Ie.clearArray(this._boundStyle.temBM),this._texture&&(i=ie.TEMP,i.setTo(0,0,this._texture.width,this._texture.height),Ie.concatArray(n,i._getBoundPoints())));var s,r,o;o=this._children;for(var a=0,h=o.length;h>a;a++)s=o[a],s instanceof laya.display.Sprite&&s._visible===!0&&(r=s._boundPointsToParent(t),r&&(n=n?Ie.concatArray(n,r):r));return n},n._getCacheStyle=function(){return this._cacheStyle===G.EMPTY&&(this._cacheStyle=G.create()),this._cacheStyle},n.getStyle=function(){return this._style===Y.EMPTY&&(this._style=Y.create()),this._style},n.setStyle=function(t){this._style=t},n._setScaleX=function(t){this._style.scaleX=t},n._setScaleY=function(t){this._style.scaleY=t},n._setRotation=function(t){this._style.rotation=t},n._setSkewX=function(t){this._style.skewX=t},n._setSkewY=function(t){this._style.skewY=t},n._createTransform=function(){return te.create()},n._adjustTransform=function(){this._tfChanged=!1;var t=this._style,e=t.scaleX,i=t.scaleY,n=this._transform||(this._transform=this._createTransform());if(t.rotation||1!==e||1!==i||0!==t.skewX||0!==t.skewY){n._bTransform=!0;var s=.0174532922222222*(t.rotation-t.skewX),r=.0174532922222222*(t.rotation+t.skewY),o=Math.cos(r),a=Math.sin(r),h=Math.sin(s),l=Math.cos(s);n.a=e*o,n.b=e*a,n.c=-i*h,n.d=i*l,n.tx=n.ty=0}else n.identity(),this._renderType&=-3,this._setRenderType(this._renderType);return n},n._setTransform=function(){},n._setPivotX=function(t){var e=this.getStyle();e.pivotX=t},n._getPivotX=function(){return this._style.pivotX},n._setPivotY=function(t){var e=this.getStyle();e.pivotY=t},n._getPivotY=function(){return this._style.pivotY},n._setAlpha=function(t){if(this._style.alpha!==t){var e=this.getStyle();e.alpha=t,1!==t?this._renderType|=1:this._renderType&=-2,this._setRenderType(this._renderType),this.parentRepaint()}},n._getAlpha=function(){return this._style.alpha},n._setBlendMode=function(){},n._setGraphics=function(){},n._setGraphicsCallBack=function(){},n._setScrollRect=function(){},n.pos=function(t,e,i){if(void 0===i&&(i=!1),this._x!==t||this._y!==e){if(this.destroyed)return this;if(i){this._setX(t),this._setY(e),this.parentRepaint(2);var n=this._cacheStyle.maskParent;n&&n.repaint(2)}else this.x=t,this.y=e}return this},n.pivot=function(t,e){return this.pivotX=t,this.pivotY=e,this},n.size=function(t,e){return this.width=t,this.height=e,this},n.scale=function(t,e,i){void 0===i&&(i=!1);var n=this.getStyle();if(n.scaleX!=t||n.scaleY!=e){if(this.destroyed)return this;i?(this._setScaleX(t),this._setScaleY(e),this._setTranformChange()):(this.scaleX=t,this.scaleY=e)}return this},n.skew=function(t,e){return this.skewX=t,this.skewY=e,this},n.render=function(t,e,i){be.spriteCount++,le.renders[this._renderType]._fun(this,t,e+this._x,i+this._y),this._repaint=0},n.drawToCanvas=function(t,e,i,n){return Te.drawToCanvas(this,this._renderType,t,e,i,n)},n.customRender=function(){this._repaint=3},n._applyFilters=function(){if(!he.isWebGL){var t;if(t=this._cacheStyle.filters,t&&!(t.length<1))for(var e=0,i=t.length;i>e;e++)t[e].action&&t[e].action.apply(this._cacheStyle)}},n._setColorFilter=function(){},n._isHaveGlowFilter=function(){var t=0,e=0;if(this.filters)for(t=0;t<this.filters.length;t++)if(8==this.filters[t].type)return!0;for(t=0,e=this._children.length;e>t;t++)if(this._children[t]._isHaveGlowFilter())return!0;return!1},n.localToGlobal=function(t,e,n){void 0===e&&(e=!1),e===!0&&(t=new ee(t.x,t.y));var s=this;for(n=n||i.stage;s&&s!=n;)t=s.toParentPoint(t),s=s.parent;return t},n.globalToLocal=function(t,e,n){void 0===e&&(e=!1),e&&(t=new ee(t.x,t.y));var s=this,r=[];for(n=n||i.stage;s&&s!=n;)r.push(s),s=s.parent;for(var o=r.length-1;o>=0;)s=r[o],t=s.fromParentPoint(t),o--;return t},n.toParentPoint=function(t){if(!t)return t;t.x-=this.pivotX,t.y-=this.pivotY,this.transform&&this._transform.transformPoint(t),t.x+=this._x,t.y+=this._y;var e=this._style.scrollRect;return e&&(t.x-=e.x,t.y-=e.y),t},n.fromParentPoint=function(t){if(!t)return t;t.x-=this._x,t.y-=this._y;var e=this._style.scrollRect;return e&&(t.x+=e.x,t.y+=e.y),this.transform&&this._transform.invertTransformPoint(t),t.x+=this.pivotX,t.y+=this.pivotY,t},n.on=function(e,i,n,s){return 1!==this._mouseState&&this.isMouseEvent(e)?(this.mouseEnabled=!0,this._setBit(64,!0),this._parent&&this._$2__onDisplay(),this._createListener(e,i,n,s,!1)):t.prototype.on.call(this,e,i,n,s)},n.once=function(e,i,n,s){return 1!==this._mouseState&&this.isMouseEvent(e)?(this.mouseEnabled=!0,this._setBit(64,!0),this._parent&&this._$2__onDisplay(),this._createListener(e,i,n,s,!0)):t.prototype.once.call(this,e,i,n,s)},n._$2__onDisplay=function(){if(1!==this._mouseState){var t=this;for(t=t.parent;t&&1!==t._mouseState&&!t._getBit(64);)t.mouseEnabled=!0,t._setBit(64,!0),t=t.parent}},n._setParent=function(e){t.prototype._setParent.call(this,e),e&&this._getBit(64)&&this._$2__onDisplay()},n.loadImage=function(t,e,i,n,s){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0);var r=ke.getRes(t);return r||(r=new Ye,r.load(t),ke.cacheRes(t,r)),this.texture=r,r.loaded||r.once("loaded",this,this.repaint,[3]),this},n.repaint=function(t){void 0===t&&(t=2),this._repaint&t||(this._repaint|=t,this.parentRepaint(t)),this._cacheStyle&&this._cacheStyle.maskParent&&this._cacheStyle.maskParent.repaint(t)},n._needRepaint=function(){return 2&this._repaint&&this._cacheStyle.enableCanvasRender&&this._cacheStyle.reCache},n._childChanged=function(t){this._children.length?this._renderType|=8192:this._renderType&=-8193,this._setRenderType(this._renderType),t&&this._getBit(32)&&i.timer.callLater(this,this.updateZOrder),this.repaint(3)},n.parentRepaint=function(t){void 0===t&&(t=2);var e=this._parent;!e||e._repaint&t||(e._repaint|=t,e.parentRepaint(t))},n._setMask=function(){},n.startDrag=function(t,e,i,n,s,r,o){void 0===e&&(e=!1),void 0===i&&(i=0),void 0===n&&(n=300),void 0===r&&(r=!1),void 0===o&&(o=.92),this._style.dragging||(this.getStyle().dragging=new ge),this._style.dragging.start(this,t,e,i,n,s,r,o)},n.stopDrag=function(){this._style.dragging&&this._style.dragging.stop()},n._setDisplay=function(e){e||this._cacheStyle&&(this._cacheStyle.releaseContext(),this._cacheStyle.releaseFilterCache(),this._cacheStyle.hasGlowFilter&&(this._cacheStyle.hasGlowFilter=!1)),t.prototype._setDisplay.call(this,e)},n.hitTestPoint=function(t,e){var i=this.globalToLocal(ee.TEMP.setTo(t,e));t=i.x,e=i.y;var n=this._style.hitArea?this._style.hitArea:this._width>0&&this._height>0?ie.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds();return n.contains(t,e)},n.getMousePoint=function(){return this.globalToLocal(ee.TEMP.setTo(i.stage.mouseX,i.stage.mouseY))},n._setTexture=function(){},n._setRenderType=function(){},n._setTranformChange=function(){this._tfChanged=!0,this._renderType|=2,this._setRenderType(this._renderType),this.parentRepaint(2)},n._setBgStyleColor=function(){},n._setBorderStyleColor=function(){},r(0,n,"customRenderEnable",null,function(t){t&&(this._renderType|=2048,this._setRenderType(this._renderType),this._setCustomRender())}),r(0,n,"cacheAs",function(){return this._cacheStyle.cacheAs},function(t){t!==this._cacheStyle.userSetCache&&(he.isConchApp&&"bitmap"!=t||(this._setCacheAs(t),this._getCacheStyle().userSetCache=t,this._checkCanvasEnable(),this.repaint()))}),r(0,n,"globalScaleY",function(){for(var t=1,e=this;e&&e!==i.stage;)t*=e.scaleY,e=e.parent;return t}),r(0,n,"hitArea",function(){return this._style.hitArea},function(t){this.getStyle().hitArea=t}),r(0,n,"staticCache",function(){return this._cacheStyle.staticCache},function(t){this._getCacheStyle().staticCache=t,t||this.reCache()}),r(0,n,"displayWidth",function(){return this.width*this.scaleX}),r(0,n,"zOrder",function(){return this._zOrder},function(t){this._zOrder!=t&&(this._zOrder=t,this._parent&&(t&&this._parent._setBit(32,!0),i.timer.callLater(this._parent,this.updateZOrder)))}),r(0,n,"rotation",function(){return this._style.rotation},function(t){var e=this.getStyle();e.rotation!==t&&(this._setRotation(t),this._setTranformChange())}),r(0,n,"width",function(){return this.autoSize?this.texture?this.texture.width:this._graphics||0!==this._children.length?this.getSelfBounds().width:0:this._width||(this.texture?this.texture.width:0)},function(t){this._width!==t&&(this._width=t,this.repaint())}),r(0,n,"x",function(){return this._x},function(t){if(!this.destroyed&&this._x!==t){this._setX(t),this.parentRepaint(2);var e=this._cacheStyle.maskParent;e&&e.repaint(2)}}),r(0,n,"texture",function(){return this._texture},function(t){"string"==typeof t?this.loadImage(t):this._texture!=t&&(this._texture=t,this._setTexture(t),t?this._renderType|=256:this._renderType&=-257,this._setRenderType(this._renderType),this.repaint())}),r(0,n,"y",function(){return this._y},function(t){if(!this.destroyed&&this._y!==t){this._setY(t),this.parentRepaint(2);var e=this._cacheStyle.maskParent;e&&e.repaint(2)}}),r(0,n,"displayHeight",function(){return this.height*this.scaleY}),r(0,n,"height",function(){return this.autoSize?this.texture?this.texture.height:this._graphics||0!==this._children.length?this.getSelfBounds().height:0:this._height||(this.texture?this.texture.height:0)},function(t){this._height!==t&&(this._height=t,this.repaint())}),r(0,n,"blendMode",function(){return this._style.blendMode},function(t){this._setBlendMode(t),this.getStyle().blendMode=t,t&&"source-over"!=t?this._renderType|=4:this._renderType&=-5,this._setRenderType(this._renderType),this.parentRepaint()}),r(0,n,"scaleX",function(){return this._style.scaleX},function(t){var e=this.getStyle();e.scaleX!==t&&(this._setScaleX(t),this._setTranformChange())}),r(0,n,"scaleY",function(){return this._style.scaleY},function(t){var e=this.getStyle();e.scaleY!==t&&(this._setScaleY(t),this._setTranformChange())}),r(0,n,"stage",function(){return i.stage}),r(0,n,"skewX",function(){return this._style.skewX},function(t){var e=this.getStyle();e.skewX!==t&&(this._setSkewX(t),this._setTranformChange())}),r(0,n,"scrollRect",function(){return this._style.scrollRect},function(t){this.getStyle().scrollRect=t,this._setScrollRect(t),this.repaint(),t?this._renderType|=64:this._renderType&=-65,this._setRenderType(this._renderType)}),r(0,n,"skewY",function(){return this._style.skewY},function(t){var e=this.getStyle();e.skewY!==t&&(this._setSkewY(t),this._setTranformChange())}),r(0,n,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(t){this._tfChanged=!1;var e=this._transform||(this._transform=this._createTransform());t.copyTo(e),this._setTransform(e),t&&(this._x=t.tx,this._y=t.ty,t.tx=t.ty=0),t?this._renderType|=2:this._renderType&=-3,this._setRenderType(this._renderType),this.parentRepaint()}),r(0,n,"pivotX",function(){return this._getPivotX()},function(t){this._setPivotX(t),this.repaint()}),r(0,n,"pivotY",function(){return this._getPivotY()},function(t){this._setPivotY(t),this.repaint()}),r(0,n,"alpha",function(){return this._getAlpha()},function(t){t=0>t?0:t>1?1:t,this._setAlpha(t)}),r(0,n,"visible",function(){return this._visible},function(t){this._visible!==t&&(this._visible=t,this.parentRepaint(3))}),r(0,n,"graphics",function(){return this._graphics||(this.graphics=new H)},function(t){this._graphics&&(this._graphics._sp=null),this._graphics=t,t?(this._setGraphics(t),this._renderType|=512,t._sp=this):this._renderType&=-513,this._setRenderType(this._renderType),this.repaint()}),r(0,n,"filters",function(){return this._cacheStyle.filters},function(t){t&&0===t.length&&(t=null),this._cacheStyle.filters!=t&&(this._getCacheStyle().filters=t?t.slice():null,(he.isWebGL||he.isConchApp)&&(t&&t.length?(this._setColorFilter(t[0]),this._renderType|=16):(this._setColorFilter(null),this._renderType&=-17),this._setRenderType(this._renderType)),t&&t.length>0?(this._getBit(16)||this._setBitUp(16),(he.isWebGL||he.isConchApp)&&1==t.length&&t[0]instanceof laya.filters.ColorFilter||(this._getCacheStyle().cacheForFilters=!0,this._checkCanvasEnable())):this._cacheStyle.cacheForFilters&&(this._cacheStyle.cacheForFilters=!1,this._checkCanvasEnable()),this._getCacheStyle().hasGlowFilter=this._isHaveGlowFilter(),this.repaint())}),r(0,n,"mask",function(){return this._cacheStyle.mask},function(t){t&&this.mask&&this.mask._cacheStyle.maskParent||(this._getCacheStyle().mask=t,this._setMask(t),this._checkCanvasEnable(),t?t._getCacheStyle().maskParent=this:this.mask&&(this.mask._getCacheStyle().maskParent=null),this._renderType|=32,this._setRenderType(this._renderType),this.parentRepaint(3))}),r(0,n,"mouseEnabled",function(){return this._mouseState>1},function(t){this._mouseState=t?2:1}),r(0,n,"globalScaleX",function(){for(var t=1,e=this;e&&e!==i.stage;)t*=e.scaleX,e=e.parent;return t}),r(0,n,"mouseX",function(){return this.getMousePoint().x}),r(0,n,"mouseY",function(){return this.getMousePoint().y}),r(0,n,"viewport",function(){return this._style.viewport},function(t){if("string"==typeof t){var e;e=t.split(","),e.length>3&&(t=new ie(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])))}this.getStyle().viewport=t}),e.fromImage=function(t){return(new e).loadImage(t)},e}(Le),Ve=function(t){function e(t){this._audio=null,this._onEnd=null,this._resumePlay=null,e.__super.call(this),this._onEnd=Ie.bind(this.__onEnd,this),this._resumePlay=Ie.bind(this.__resumePlay,this),t.addEventListener("ended",this._onEnd),this._audio=t}s(e,"laya.media.h5audio.AudioSoundChannel",t);var n=e.prototype;return n.__onEnd=function(){return 1==this.loops?(this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),this.event("complete"),void 0):(this.loops>0&&this.loops--,this.startTime=0,this.play(),void 0)},n.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,_e.container.appendChild(this._audio),this._audio.play()}catch(t){this.event("error")}},n.play=function(){this.isStopped=!1;try{this._audio.playbackRate=ne.playbackRate,this._audio.currentTime=this.startTime}catch(t){return this._audio.addEventListener("canplay",this._resumePlay),void 0}ne.addChannel(this),_e.container.appendChild(this._audio),"play"in this._audio&&this._audio.play()},n.stop=function(){this.isStopped=!0,ne.removeChannel(this),this.completeHandler=null,this._audio&&("pause"in this._audio&&he.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),_e.onIE||this._audio!=Ee._musicAudio&&we.recover("audio:"+this.url,this._audio),_e.removeElement(this._audio),this._audio=null)},n.pause=function(){this.isStopped=!0,ne.removeChannel(this),"pause"in this._audio&&this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,ne.addChannel(this),"play"in this._audio&&this._audio.play())},r(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),r(0,n,"duration",function(){return this._audio?this._audio.duration:0}),r(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(t){this._audio&&(this._audio.volume=t)}),e}(Re),je=function(t){function e(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=Fe.ctx,e.__super.call(this),this._onPlayEnd=Ie.bind(this.__onPlayEnd,this),this.gain=this.context.createGain?this.context.createGain():this.context.createGainNode()}s(e,"laya.media.webaudio.WebAudioSoundChannel",t);var n=e.prototype;return n.play=function(){if(ne.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var t=this.context,e=this.gain,i=t.createBufferSource();this.bufferSource=i,i.buffer=this.audioBuffer,i.connect(e),e&&e.disconnect(),e.connect(t.destination),i.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=_e.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(i.loop=!0),i.playbackRate.setTargetAtTime?i.playbackRate.setTargetAtTime(ne.playbackRate,this.context.currentTime,.1):i.playbackRate.value=ne.playbackRate,i.start(0,this.startTime),this._currentTime=0}},n.__onPlayEnd=function(){return 1==this.loops?(this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),this.event("complete"),void 0):(this.loops>0&&this.loops--,this.startTime=0,this.play(),void 0)},n._clearBufferSource=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),t.disconnect(0),t.onended=null,e._tryCleanFailed||this._tryClearBuffer(t),this.bufferSource=null}},n._tryClearBuffer=function(t){if(_e.onMac)try{t.buffer=Fe._miniBuffer}catch(i){e._tryCleanFailed=!0}else try{t.buffer=null}catch(i){e._tryCleanFailed=!0}},n.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,ne.removeChannel(this),this.completeHandler=null,ne.autoReleaseSound&&i.timer.once(5e3,null,ne.disposeSoundIfNotUsed,[this.url],!1)},n.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,ne.removeChannel(this),ne.autoReleaseSound&&i.timer.once(5e3,null,ne.disposeSoundIfNotUsed,[this.url],!1)},n.resume=function(){this.startTime=this._pauseTime,this.play()},r(0,n,"position",function(){return this.bufferSource?(_e.now()-this._startTime)/1e3+this.startTime:0}),r(0,n,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),r(0,n,"volume",function(){return this._volume},function(t){this.isStopped||(this._volume=t,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(t,this.context.currentTime,.1):this.gain.gain.value=t)}),e._tryCleanFailed=!1,e}(Re),Ke=function(t){function e(){e.__super.call(this),this._width=-1,this._height=-1}s(e,"laya.resource.Bitmap",t);var i=e.prototype;return i._getSource=function(){throw"Bitmap: must override it."},r(0,i,"width",function(){return this._width}),r(0,i,"height",function(){return this._height}),e}(Ge),$e=function(t){function e(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._actionName=null,this._controlNode=null,e.__super.call(this),this._interval=h.animationInterval,this._setBitUp(16)}s(e,"laya.display.AnimationBase",t);var i=e.prototype;return i.play=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=!0),void 0===i&&(i=""),this._isPlaying=!0,this._actionName=i,this.index="string"==typeof t?this._getFrameByLabel(t):t,this.loop=e,this._isReverse=1===this.wrapMode,this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},i._getFrameByLabel=function(t){for(var e=0;e<this._count;e++){var i=this._labels[e];if(i&&i.indexOf(t)>-1)return e}return 0},i._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),this.event("complete"),void 0;2==this.wrapMode?(this._index=this._count>0?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),this.event("complete"),void 0;2==this.wrapMode?(this._index=this._count-2>=0?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},i._setControlNode=function(t){this._controlNode&&(this._controlNode.off("display",this,this._resumePlay),this._controlNode.off("undisplay",this,this._resumePlay)),this._controlNode=t,t&&t!=this&&(t.on("display",this,this._resumePlay),t.on("undisplay",this,this._resumePlay))},i._setDisplay=function(e){t.prototype._setDisplay.call(this,e),this._resumePlay()},i._resumePlay=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},i.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},i.addLabel=function(t,e){this._labels||(this._labels={}),this._labels[e]||(this._labels[e]=[]),this._labels[e].push(t)},i.removeLabel=function(t){if(t){if(this._labels)for(var e in this._labels)this._removeLabelFromList(this._labels[e],t)}else this._labels=null},i._removeLabelFromList=function(t,e){if(t)for(var i=t.length-1;i>=0;i--)t[i]==e&&t.splice(i,1)},i.gotoAndStop=function(t){this.index="string"==typeof t?this._getFrameByLabel(t):t,this.stop()},i._displayToIndex=function(){},i.clear=function(){return this.stop(),this._labels=null,this},r(0,i,"interval",function(){return this._interval},function(t){this._interval!=t&&(this._frameRateChanged=!0,this._interval=t,this._isPlaying&&t>0&&this.timerLoop(t,this,this._frameLoop,null,!0,!0))}),r(0,i,"isPlaying",function(){return this._isPlaying}),r(0,i,"index",function(){return this._index},function(t){if(this._index=t,this._displayToIndex(t),this._labels&&this._labels[t])for(var e=this._labels[t],i=0,n=e.length;n>i;i++)this.event("label",e[i])}),r(0,i,"count",function(){return this._count}),e.WRAP_POSITIVE=0,e.WRAP_REVERSE=1,e.WRAP_PINGPONG=2,e}(ze),qe=function(e){function o(){this._clipPoint=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=0/0,this._startY=0/0,this._words=null,this._charSize={},this._valign="top",this._color="#000000",o.__super.call(this),this._fontSize=o.defaultFontSize,this._font=o.defaultFont,this.overflow="visible",this._style=Oe.EMPTY}s(o,"laya.display.Text",e);var a=o.prototype;return a.getStyle=function(){return this._style===Oe.EMPTY&&(this._style=Oe.create()),this._style},a._getTextStyle=function(){return this._style===Oe.EMPTY&&(this._style=Oe.create()),this._style},a.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._clipPoint=null,this._lines=null,this._lineWidths=null,this._words=null,this._charSize=null},a._getBoundPointsM=function(t){void 0===t&&(t=!1);var e=ie.TEMP;return e.setTo(0,0,this.width,this.height),e._getBoundPoints()},a.getGraphicBounds=function(t){void 0===t&&(t=!1);var e=ie.TEMP;return e.setTo(0,0,this.width,this.height),e},a._getCSSStyle=function(){return this._style},a.lang=function(t){if(t=o.langPacks&&o.langPacks[t]?o.langPacks[t]:t,arguments.length<2)this._text=t;else{for(var e=0,i=arguments.length;i>e;e++)t=t.replace("{"+e+"}",arguments[e+1]);this._text=t}},a._getContextFont=function(){return(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(_e.onIPhone?laya.display.Text.fontFamilyMap[this.font]||this.font:this.font)},a._isPassWordMode=function(){var t=this._style,e=t.asPassword;return"prompt"in this&&this.prompt==this._text&&(e=!1),e},a._getPassWordTxt=function(t){var e,i=t.length;e="";for(var n=i;n>0;n--)e+="●";return e},a._renderText=function(){var t=this.padding,e=this._lines.length;"visible"!=this.overflow&&(e=Math.min(e,Math.floor((this.height-t[0]-t[2])/(this.leading+this._charSize.height))+1));var i=this.scrollY/(this._charSize.height+this.leading)|0,n=this.graphics;n.clear(!0);var s=this._getContextFont();_e.context.font=s;var r=t[3],o="left",a=this._lines,h=this.leading+this._charSize.height,l=this._style.currBitmapFont;l&&(h=this.leading+l.getMaxHeight());var u=t[0];if(!l&&this._width>0&&this._textWidth<=this._width&&("right"==this.align?(o="right",r=this._width-t[1]):"center"==this.align&&(o="center",r=.5*this._width+t[3]-t[1])),this._height>0){var c=this._textHeight>this._height?"top":this.valign;"middle"===c?u=.5*(this._height-e*h)+t[0]-t[2]:"bottom"===c&&(u=this._height-e*h-t[2])}var _=this._style;if(l&&l.autoScaleSize)var d=l.fontSize/this.fontSize;if(this._clipPoint){if(n.save(),l&&l.autoScaleSize){var f=0,p=0;f=this._width?this._width-t[3]-t[1]:this._textWidth,p=this._height?this._height-t[0]-t[2]:this._textHeight,f*=d,p*=d,n.clipRect(t[3],t[0],f,p)}else n.clipRect(t[3],t[0],this._width?this._width-t[3]-t[1]:this._textWidth,this._height?this._height-t[0]-t[2]:this._textHeight);this.repaint()}var g=_.asPassword;"prompt"in this&&this.prompt==this._text&&(g=!1);for(var m=0,v=0,y=Math.min(this._lines.length,e+i)||1,x=i;y>x;x++){var w,T=a[x];if(g){var C=T.length;T="";for(var b=C;b>0;b--)T+="●"}if(m=r-(this._clipPoint?this._clipPoint.x:0),v=u+h*x-(this._clipPoint?this._clipPoint.y:0),this.underline&&this._drawUnderline(o,m,v,x),l){var S=this.width;l.autoScaleSize&&(S=this.width*d),l._drawText(T,this,m,v,this.align,S)}else he.isWebGL?(this._words||(this._words=[]),w=this._words.length>x-i?this._words[x-i]:new Ae,w.setText(T)):w=T,_.stroke?n.fillBorderText(w,m,v,s,this.color,_.strokeColor,_.stroke,o):n.fillText(w,m,v,s,this.color,o)}if(l&&l.autoScaleSize){var M=1/d;this.scale(M,M)}this._clipPoint&&n.restore(),this._startX=r,this._startY=u},a._drawUnderline=function(t,e,i,n){var s=this._lineWidths[n];switch(t){case"center":e-=s/2;break;case"right":e-=s;break;case"left":}i+=this._charSize.height,this._graphics.drawLine(e,i,e+s,i,this.underlineColor||this.color,1)},a.typeset=function(){return this._isChanged=!1,this._text?(he.isConchApp?t.conchTextCanvas.font=this._getContextFont():_e.context.font=this._getContextFont(),this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this._parseLines(this._getPassWordTxt(this._text)):this._parseLines(this._text),this._evalTextSize(),this._checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new ee(0,0)):this._clipPoint=null,this._renderText(),void 0):(this._clipPoint=null,this._textWidth=this._textHeight=0,this.graphics.clear(!0),void 0)},a._evalTextSize=function(){var t=0/0,e=0/0;t=Math.max.apply(this,this._lineWidths),e=this._style.currBitmapFont?this._lines.length*(this._style.currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],(t!=this._textWidth||e!=this._textHeight)&&(this._textWidth=t,this._textHeight=e)},a._checkEnabledViewportOrNot=function(){return"scroll"==this.overflow&&(this._width>0&&this._textWidth>this._width||this._height>0&&this._textHeight>this._height)},a.changeText=function(t){this._text!==t&&(this.lang(t+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},a._parseLines=function(e){var i=this.wordWrap||"hidden"==this.overflow;if(i)var n=this._getWordWrapWidth();var s=this._style.currBitmapFont;if(s)this._charSize.width=s.getMaxWidth(),this._charSize.height=s.getMaxHeight();else{var r=null;r=he.isConchApp?t.conchTextCanvas.measureText(this._testWord):_e.context.measureText(o._testWord),this._charSize.width=r.width,this._charSize.height=r.height||this.fontSize}for(var a=e.replace(/\r\n/g,"\n").split("\n"),h=0,l=a.length;l>h;h++){var u=a[h];i?this._parseLine(u,n):(this._lineWidths.push(this._getTextWidth(u)),this._lines.push(u))}},a._parseLine=function(t,e){var i,n=(_e.context,this._lines),s=0,r=0/0,o=0/0,a=0;if(r=this._getTextWidth(t),e>=r)return n.push(t),this._lineWidths.push(r),void 0;r=this._charSize.width,s=Math.floor(e/r),0==s&&(s=1),r=this._getTextWidth(t.substring(0,s)),o=r;for(var h=s,l=t.length;l>h;h++)if(r=this._getTextWidth(t.charAt(h)),o+=r,o>e)if(this.wordWrap){var u=t.substring(a,h);if(u.charCodeAt(u.length-1)<255&&(i=/(?:\w|-)+$/.exec(u),i&&(h=i.index+a,0==i.index?h+=u.length:u=t.substring(a,h))),n.push(u),this._lineWidths.push(o-r),a=h,!(l>h+s)){n.push(t.substring(a,l)),this._lineWidths.push(this._getTextWidth(n[n.length-1])),a=-1;break}h+=s,r=this._getTextWidth(t.substring(a,h)),o=r,h--}else if("hidden"==this.overflow)return n.push(t.substring(0,h)),this._lineWidths.push(this._getTextWidth(n[n.length-1])),void 0;this.wordWrap&&-1!=a&&(n.push(t.substring(a,l)),this._lineWidths.push(this._getTextWidth(n[n.length-1])))},a._getTextWidth=function(e){var i=this._style.currBitmapFont;return i?i.getTextWidth(e):he.isConchApp?t.conchTextCanvas.measureText(e).width:_e.context.measureText(e).width},a._getWordWrapWidth=function(){var t=this.padding,e=0/0,i=this._style.currBitmapFont;return e=i&&i.autoScaleSize?this._width*(i.fontSize/this.fontSize):this._width,0>=e&&(e=this.wordWrap?100:_e.width),0>=e&&(e=100),e-t[3]-t[1]},a.getCharPoint=function(t,e){this._isChanged&&i.timer.runCallLater(this,this.typeset);for(var n=0,s=this._lines,r=0,o=0,a=s.length;a>o;o++){if(n+=s[o].length,n>t){var h=o;break}r=n}var l=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;_e.context.font=l;var u=this._getTextWidth(this._text.substring(r,t)),c=e||new ee;return c.setTo(this._startX+u-(this._clipPoint?this._clipPoint.x:0),this._startY+h*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},r(0,a,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(t){t!=this._width&&(i.superSet(ze,this,"width",t),this.isChanged=!0,this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))}),r(0,a,"textWidth",function(){return this._isChanged&&i.timer.runCallLater(this,this.typeset),this._textWidth}),r(0,a,"height",function(){return this._height?this._height:this.textHeight},function(t){t!=this._height&&(i.superSet(ze,this,"height",t),this.isChanged=!0,this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))}),r(0,a,"textHeight",function(){return this._isChanged&&i.timer.runCallLater(this,this.typeset),this._textHeight}),r(0,a,"padding",function(){return this._style.padding},function(t){this._getTextStyle().padding=t,this.isChanged=!0}),r(0,a,"bold",function(){return this._style.bold},function(t){this._getTextStyle().bold=t,this.isChanged=!0
}),r(0,a,"text",function(){return this._text||""},function(t){this._text!==t&&(this.lang(t+""),this.isChanged=!0,this.event("change"),this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))}),r(0,a,"color",function(){return this._color},function(t){this._color!=t&&(this._color=t,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),r(0,a,"font",function(){return this._font},function(t){this._style.currBitmapFont&&(this._getTextStyle().currBitmapFont=null,this.scale(1,1)),o._bitmapFonts&&o._bitmapFonts[t]&&(this._getTextStyle().currBitmapFont=o._bitmapFonts[t]),this._font=t,this.isChanged=!0}),r(0,a,"fontSize",function(){return this._fontSize},function(t){this._fontSize=t,this.isChanged=!0}),r(0,a,"italic",function(){return this._style.italic},function(t){this._getTextStyle().italic=t,this.isChanged=!0}),r(0,a,"align",function(){return this._style.align},function(t){this._getTextStyle().align=t,this.isChanged=!0}),r(0,a,"valign",function(){return this._valign},function(t){this._valign=t,this.isChanged=!0}),r(0,a,"wordWrap",function(){return this._style.wordWrap},function(t){this._getTextStyle().wordWrap=t,this.isChanged=!0}),r(0,a,"leading",function(){return this._style.leading},function(t){this._getTextStyle().leading=t,this.isChanged=!0}),r(0,a,"bgColor",function(){return this._style.bgColor},function(t){this._getTextStyle().bgColor=t,this._renderType|=128,this._setBgStyleColor(0,0,this.width,this.height,t),this._setRenderType(this._renderType),this.isChanged=!0}),r(0,a,"borderColor",function(){return this._style.borderColor},function(t){this._getTextStyle().borderColor=t,this._renderType|=128,this._setBorderStyleColor(0,0,this.width,this.height,t,1),this._setRenderType(this._renderType),this.isChanged=!0}),r(0,a,"stroke",function(){return this._style.stroke},function(t){this._getTextStyle().stroke=t,this.isChanged=!0}),r(0,a,"strokeColor",function(){return this._style.strokeColor},function(t){this._getTextStyle().strokeColor=t,this.isChanged=!0}),r(0,a,"isChanged",null,function(t){this._isChanged!==t&&(this._isChanged=t,t&&i.timer.callLater(this,this.typeset))}),r(0,a,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(t){if(!("scroll"!=this.overflow||this.textWidth<this._width)&&this._clipPoint){t=t<this.padding[3]?this.padding[3]:t;var e=this._textWidth-this._width;t=t>e?e:t,this._clipPoint.x=t,this._renderText()}}),r(0,a,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(t){if(!("scroll"!=this.overflow||this.textHeight<this._height)&&this._clipPoint){t=t<this.padding[0]?this.padding[0]:t;var e=this._textHeight-this._height;t=t>e?e:t,this._clipPoint.y=t,this._renderText()}}),r(0,a,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),r(0,a,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),r(0,a,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),r(0,a,"underlineColor",function(){return this._style.underlineColor},function(t){this._getTextStyle().underlineColor=t,this._isChanged||this._renderText()}),r(0,a,"underline",function(){return this._style.underline},function(t){this._getTextStyle().underline=t}),o.defaultFontStr=function(){return o.defaultFontSize+"px "+o.defaultFont},o.registerBitmapFont=function(t,e){o._bitmapFonts||(o._bitmapFonts={}),o._bitmapFonts[t]=e},o.unregisterBitmapFont=function(t,e){if(void 0===e&&(e=!0),o._bitmapFonts&&o._bitmapFonts[t]){var i=o._bitmapFonts[t];e&&i.destroy(),delete o._bitmapFonts[t]}},o.VISIBLE="visible",o.SCROLL="scroll",o.HIDDEN="hidden",o.defaultFontSize=12,o.defaultFont="Arial",o.langPacks=null,o.isComplexText=!1,o._testWord="游",o._bitmapFonts=null,o.CharacterCache=!0,o.RightToLeft=!1,n(o,["fontFamilyMap",function(){return this.fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),o}(ze),Qe=function(t){function e(){this.autoDestroyAtClosed=!1,this.url=null,this._viewCreated=!1,this._idMap=null,this._$componentType="Scene",e.__super.call(this),this.timer=i.sceneTimer,this._setBit(8,!0),e.unDestroyedScenes.push(this),this._scene=this,this.createChildren()}s(e,"laya.display.Scene",t);var n=e.prototype;return n.createChildren=function(){},n.loadScene=function(t){var e=t.indexOf(".")>-1?t:t+".scene",n=i.loader.getRes(e);n?this.createView(n):i.loader.load(e,_.create(this,this.createView),null,"json")},n.createView=function(t){t&&!this._viewCreated&&(this._viewCreated=!0,Ce.createByData(this,t))},n.getNodeByID=function(t){return this._idMap?this._idMap[t]:null},n.open=function(t){void 0===t&&(t=!0),t&&e.closeAll(),e.root.addChild(this.scene),this.onOpened()},n.onOpened=function(){console.log("onOpened")},n.close=function(){this.autoDestroyAtClosed?this.destroy():this.removeSelf(),this.onClosed()},n.onClosed=function(){console.log("onClosed")},n.destroy=function(e){void 0===e&&(e=!0),this._idMap=null,t.prototype.destroy.call(this,e);for(var i=laya.display.Scene.unDestroyedScenes,n=0,s=i.length;s>n;n++)if(i[n]===this)return i.splice(n,1),void 0},r(0,n,"scaleX",t.prototype._$get_scaleX,function(t){i.superGet(ze,this,"scaleX")!=t&&(i.superSet(ze,this,"scaleX",t),this.event("resize"))}),r(0,n,"scaleY",t.prototype._$get_scaleY,function(t){i.superGet(ze,this,"scaleY")!=t&&(i.superSet(ze,this,"scaleY",t),this.event("resize"))}),r(0,n,"width",t.prototype._$get_width,function(t){i.superGet(ze,this,"width")!=t&&(i.superSet(ze,this,"width",t),this.event("resize"))}),r(0,n,"height",t.prototype._$get_height,function(t){i.superGet(ze,this,"height")!=t&&(i.superSet(ze,this,"height",t),this.event("resize"))}),r(1,e,"root",function(){return e._root||(e._root=i.stage.addChild(new ze),e._root.size(i.stage.width,i.stage.height),e._root.name="root"),e._root},laya.display.Sprite._$SET_root),e.load=function(t,e){function n(){var i=ke.getRes(t),n=i.props&&i.props.runtime?i.props.runtime:i.type,s=pe.getInstance(n);s.url=t,s._getBit(8)?(s.on("onViewCreated",null,function(){e&&e.runWith(s)}),s.createView(i)):e.runWith(s)}i.loader.resetProgress();var s=new We;s.on("complete",null,n),s.load(t)},e.open=function(t,i,n){void 0===i&&(i=!0),e.load(t,_.create(null,e._onSceneLoaded,[i,n]))},e._onSceneLoaded=function(t,e,i){i.open(t),e&&e.runWith(i)},e.close=function(t,e){void 0===e&&(e="");for(var i=!1,n=laya.display.Scene.unDestroyedScenes,s=0,r=n.length;r>s;s++){var o=n[s];o.parent&&o.url===t&&o.name==e&&(o.close(),i=!0)}return i},e.closeAll=function(){for(var t=laya.display.Scene.root,e=0,i=t.numChildren;i>e;e++){var n=t.getChildAt(e);n instanceof laya.display.Scene&&n.close()}},e.destroy=function(t,e){void 0===e&&(e="");for(var i=!1,n=laya.display.Scene.unDestroyedScenes,s=0,r=n.length;r>s;s++){var o=n[s];o.url===t&&o.name==e&&(o.destroy(),i=!0)}return i},e.unDestroyedScenes=[],e._root=null,e}(ze),Je=function(t){function e(){function t(){"hidden"==_e.document[r]?(i._isVisibility=!1,s._isInputting()&&(ni.inputElement.target.focus=!1)):i._isVisibility=!0,i.renderingEnabled=i._isVisibility,s.event("visibilitychange")}this.focus=null,this.frameRate="fast",this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._safariOffsetY=0,this._frameStartTime=0/0,this._isFocused=!1,this._isVisibility=!1,this._wgColor=[0,0,0,1],e.__super.call(this),this.offset=new ee,this._canvasTransform=new te,this._previousOrientation=_e.window.orientation;var i=this;this.transform=te.create(),this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._setBit(128,!0),this._setBit(2,!0),this._isFocused=!0,this._isVisibility=!0;var n=_e.window,s=this;n.addEventListener("focus",function(){i._isFocused=!0,s.event("focus"),s.event("focuschange")}),n.addEventListener("blur",function(){i._isFocused=!1,s.event("blur"),s.event("focuschange"),s._isInputting()&&(ni.inputElement.target.focus=!1)});var r="visibilityState",o="visibilitychange",a=n.document;"undefined"!=typeof a.hidden?(o="visibilitychange",r="visibilityState"):"undefined"!=typeof a.mozHidden?(o="mozvisibilitychange",r="mozVisibilityState"):"undefined"!=typeof a.msHidden?(o="msvisibilitychange",r="msVisibilityState"):"undefined"!=typeof a.webkitHidden&&(o="webkitvisibilitychange",r="webkitVisibilityState"),n.document.addEventListener(o,t),n.addEventListener("resize",function(){var t=_e.window.orientation;null!=t&&t!=i._previousOrientation&&s._isInputting()&&(ni.inputElement.target.focus=!1),i._previousOrientation=t,s._isInputting()||(_e.onSafari&&(s._safariOffsetY=(_e.window.__innerHeight||_e.document.body.clientHeight||_e.document.documentElement.clientHeight)-_e.window.innerHeight),s._resetCanvas())}),n.addEventListener("orientationchange",function(){s._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),_e.onMobile&&this.on("mousedown",this,this._onmouseMove)}s(e,"laya.display.Stage",t);var n=e.prototype;return n._isInputting=function(){return _e.onMobile&&ni.isInputting},n._changeCanvasSize=function(){this.setScreenSize(_e.clientWidth*_e.pixelRatio,_e.clientHeight*_e.pixelRatio)},n._resetCanvas=function(){this.screenAdaptationEnabled&&this._changeCanvasSize()},n.setScreenSize=function(t,e){var i=!1;if("none"!==this._screenMode){var n=1>t/e?"vertical":"horizontal";if(i=n!==this._screenMode){var s=e;e=t,t=s}}this.canvasRotation=i;var r=he._mainCanvas,o=r.source.style,a=this._canvasTransform.identity(),h=this._scaleMode,l=t/this.designWidth,u=e/this.designHeight,c=this.designWidth,_=this.designHeight,d=t,f=e,p=_e.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,h){case"noscale":l=u=1,d=this.designWidth,f=this.designHeight;break;case"showall":l=u=Math.min(l,u),c=d=Math.round(this.designWidth*l),_=f=Math.round(this.designHeight*u);break;case"noborder":l=u=Math.max(l,u),d=Math.round(this.designWidth*l),f=Math.round(this.designHeight*u);break;case"full":l=u=1,this._width=c=t,this._height=_=e;break;case"fixedwidth":u=l,this._height=_=Math.round(e/l);break;case"fixedheight":l=u,this._width=c=Math.round(t/u);break;case"fixedauto":t/e<this.designWidth/this.designHeight?(u=l,this._height=_=Math.round(e/l)):(l=u,this._width=c=Math.round(t/u))}l*=this.scaleX,u*=this.scaleY,1===l&&1===u?this.transform.identity():(this.transform.a=this._formatData(l/(d/c)),this.transform.d=this._formatData(u/(f/_))),he.isConchApp&&(this._conchData._float32Data[10]=this._formatData(l/(d/c)),this._conchData._float32Data[11]=this._formatData(u/(f/_)),this._conchData._float32Data[15]=1),r.size(c,_),Te.changeWebGLSize(c,_),a.scale(d/c/p,f/_/p),this.offset.x="left"===this._alignH?0:"right"===this._alignH?t-d:.5*(t-d)/p,this.offset.y="top"===this._alignV?0:"bottom"===this._alignV?e-f:.5*(e-f)/p,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),a.translate(this.offset.x,this.offset.y),this._safariOffsetY&&a.translate(0,this._safariOffsetY),this.canvasDegree=0,i&&("horizontal"===this._screenMode?(a.rotate(Math.PI/2),a.translate(e/p,0),this.canvasDegree=90):(a.rotate(-Math.PI/2),a.translate(0,t/p),this.canvasDegree=-90)),a.a=this._formatData(a.a),a.d=this._formatData(a.d),a.tx=this._formatData(a.tx),a.ty=this._formatData(a.ty),o.transformOrigin=o.webkitTransformOrigin=o.msTransformOrigin=o.mozTransformOrigin=o.oTransformOrigin="0px 0px 0px",o.transform=o.webkitTransform=o.msTransform=o.mozTransform=o.oTransform="matrix("+a.toString()+")",this._safariOffsetY&&a.translate(0,-this._safariOffsetY),a.translate(parseInt(o.left)||0,parseInt(o.top)||0),this.visible=!0,this._repaint|=2,this.event("resize")},n._formatData=function(t){return Math.abs(t)<1e-6?0:Math.abs(1-t)<.001?t>0?1:-1:t},n.getMousePoint=function(){return ee.TEMP.setTo(this.mouseX,this.mouseY)},n.repaint=function(t){void 0===t&&(t=2),this._repaint|=t},n.repaintForNative=function(t){void 0===t&&(t=2),this._conchData._int32Data[4]|=t},n.parentRepaint=function(t){void 0===t&&(t=2)},n._loop=function(){return this.render(he._context,0,0),!0},n.getFrameTm=function(){return this._frameStartTime},n._onmouseMove=function(){this._mouseMoveTime=_e.now()},n.getTimeFromFrameStart=function(){return _e.now()-this._frameStartTime},n.render=function(e,n,s){if("sleep"===this.frameRate){var r=_e.now();if(!(r-this._frameStartTime>=1e3))return;this._frameStartTime=r}if(this._renderCount++,!this._visible)return this._renderCount%5===0&&(be.loopCount++,j.instance.runEvent(),i.timer._update(),i.startTimer._update(),i.physicsTimer._update(),i.updateTimer._update(),i.lateTimer._update(),i.sceneTimer._update()),void 0;this._frameStartTime=_e.now();var o="mouse"===this.frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this.frameRate,a="slow"!==o,h=this._renderCount%2===0;be.renderSlow=!a,(a||h)&&(be.loopCount++,j.instance.runEvent(),i.timer._update(),i.startTimer._update(),i.physicsTimer._update(),i.updateTimer._update(),i.lateTimer._update(),i.sceneTimer._update(),he.isConchApp||he.isWebGL&&this.renderingEnabled&&(e.clear(),t.prototype.render.call(this,e,n,s),be._show&&be._sp&&be._sp.render(e,n,s))),!this.renderingEnabled||!a&&h||(he.isWebGL?(Te.clear(this._bgColor),e.flush(),Pe.instance&&Pe.getInstance().endDispose()):(Te.clear(this._bgColor),t.prototype.render.call(this,e,n,s),be._show&&be._sp&&be._sp.render(e,n,s),he.isConchApp&&e.gl.commit()))},n._requestFullscreen=function(){var t=_e.document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},n._fullScreenChanged=function(){i.stage.event("fullscreenchange")},n.exitFullscreen=function(){var t=_e.document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()},r(0,n,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),r(0,n,"width",t.prototype._$get_width,function(t){this.designWidth=t,i.superSet(ze,this,"width",t),i.timer.callLater(this,this._changeCanvasSize)}),r(0,n,"isFocused",function(){return this._isFocused}),r(0,n,"alignH",function(){return this._alignH},function(t){this._alignH=t,i.timer.callLater(this,this._changeCanvasSize)}),r(0,n,"height",t.prototype._$get_height,function(t){this.designHeight=t,i.superSet(ze,this,"height",t),i.timer.callLater(this,this._changeCanvasSize)}),r(0,n,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||this._createTransform()},t.prototype._$set_transform),r(0,n,"isVisibility",function(){return this._isVisibility}),r(0,n,"scaleMode",function(){return this._scaleMode},function(t){this._scaleMode=t,i.timer.callLater(this,this._changeCanvasSize)}),r(0,n,"alignV",function(){return this._alignV},function(t){this._alignV=t,i.timer.callLater(this,this._changeCanvasSize)}),r(0,n,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,he.isWebGL&&(this._wgColor=t?a.create(t).arrColor:null),_e.onLimixiu?this._wgColor=a.create(t).arrColor:he.canvas.style.background=t?t:"none",he.isConchApp&&(this._renderType|=128,this._setBgStyleColor(0,0,this.width,this.height,t),this._setRenderType(this._renderType))}),r(0,n,"mouseX",function(){return Math.round(j.instance.mouseX/this.clientScaleX)}),r(0,n,"mouseY",function(){return Math.round(j.instance.mouseY/this.clientScaleY)}),r(0,n,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),r(0,n,"screenMode",function(){return this._screenMode},function(t){this._screenMode=t}),r(0,n,"visible",t.prototype._$get_visible,function(t){if(this.visible!==t){i.superSet(ze,this,"visible",t);var e=he._mainCanvas.source.style;e.visibility=t?"visible":"hidden"}}),r(0,n,"fullScreenEnabled",null,function(t){var e=_e.document,i=he.canvas;t?(i.addEventListener("mousedown",this._requestFullscreen),i.addEventListener("touchstart",this._requestFullscreen),e.addEventListener("fullscreenchange",this._fullScreenChanged),e.addEventListener("mozfullscreenchange",this._fullScreenChanged),e.addEventListener("webkitfullscreenchange",this._fullScreenChanged),e.addEventListener("msfullscreenchange",this._fullScreenChanged)):(i.removeEventListener("mousedown",this._requestFullscreen),i.removeEventListener("touchstart",this._requestFullscreen),e.removeEventListener("fullscreenchange",this._fullScreenChanged),e.removeEventListener("mozfullscreenchange",this._fullScreenChanged),e.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),e.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),e.SCALE_NOSCALE="noscale",e.SCALE_EXACTFIT="exactfit",e.SCALE_SHOWALL="showall",e.SCALE_NOBORDER="noborder",e.SCALE_FULL="full",e.SCALE_FIXED_WIDTH="fixedwidth",e.SCALE_FIXED_HEIGHT="fixedheight",e.SCALE_FIXED_AUTO="fixedauto",e.ALIGN_LEFT="left",e.ALIGN_RIGHT="right",e.ALIGN_CENTER="center",e.ALIGN_TOP="top",e.ALIGN_MIDDLE="middle",e.ALIGN_BOTTOM="bottom",e.SCREEN_NONE="none",e.SCREEN_HORIZONTAL="horizontal",e.SCREEN_VERTICAL="vertical",e.FRAME_FAST="fast",e.FRAME_SLOW="slow",e.FRAME_MOUSE="mouse",e.FRAME_SLEEP="sleep",e}(ze),Ze=(function(t){function e(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,e.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}s(e,"laya.media.SoundNode",t);var i=e.prototype;return i._onParentChange=function(){this.target=this.parent},i.play=function(t,e){void 0===t&&(t=1),isNaN(t)&&(t=1),this.url&&(this.stop(),this._channel=ne.playSound(this.url,t,e))},i.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},i._setPlayAction=function(t,e,i,n){void 0===n&&(n=!0),this[i]&&t&&(n?t.on(e,this,this[i]):t.off(e,this,this[i]))},i._setPlayActions=function(t,e,i,n){if(void 0===n&&(n=!0),t&&e){var s=e.split(","),r=0,o=0;for(o=s.length,r=0;o>r;r++)this._setPlayAction(t,s[r],i,n)}},r(0,i,"playEvent",null,function(t){this._playEvents=t,t&&this._tar&&this._setPlayActions(this._tar,t,"play")}),r(0,i,"target",null,function(t){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=t,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),r(0,i,"stopEvent",null,function(t){this._stopEvents=t,t&&this._tar&&this._setPlayActions(this._tar,t,"stop")}),e}(ze),function(t){function e(){this.datas=[],this.hud_width=800,this.hud_height=200,this.gMinV=0,this.gMaxV=100,this.textSpace=40,this._now=null,this.sttm=0,e.__super.call(this),this.xdata=new Array(e.DATANUM),this.ydata=new Array(e.DATANUM),e.inst=this,this._renderType|=2048,this._setRenderType(this._renderType),this._setCustomRender(),this.addDataDef(0,16777215,"frame",1),this.addDataDef(1,65280,"update",1),this.addDataDef(2,16711680,"flush",1),this._now=performance?performance.now.bind(performance):Date.now}s(e,"laya.utils.PerfHUD",t);var i=e.prototype;return i.now=function(){return this._now()},i.start=function(){this.sttm=this._now()},i.end=function(t){var e=this._now()-this.sttm;this.updateValue(t,e)},i.config=function(t,e){this.hud_width=t,this.hud_height=e},i.addDataDef=function(t,e,i,n){this.datas[t]=new xe(t,e,i,n)},i.updateValue=function(t,e){this.datas[t].addData(e)},i.v2y=function(t){this._y+this.hud_height*(1-(t-this.gMinV)/this.gMaxV);return this._y+this.hud_height*(1-(t-this.gMinV)/this.gMaxV)},i.drawHLine=function(t,e,i,n){var s=this._x,r=(this._x+this.hud_width,this.v2y(e));t.fillText(n,s,r-6,null,"green"),s+=this.textSpace,t.fillStyle=i,t.fillRect(s,r,this._x+this.hud_width,1)},i.customRender=function(t){var i=performance.now();e._lastTm<=0&&(e._lastTm=i),this.updateValue(0,i-e._lastTm),e._lastTm=i,t.save(),t.fillRect(this._x,this._y,this.hud_width,this.hud_height+4,"#000000cc"),t.globalAlpha=.9,this.drawHLine(t,0,"green","    0"),this.drawHLine(t,10,"green","  10"),this.drawHLine(t,16.667,"red"," "),this.drawHLine(t,20,"green","50|20"),this.drawHLine(t,33.334,"yellow",""),this.drawHLine(t,16.667*3,"yellow",""),this.drawHLine(t,66.668,"yellow",""),this.drawHLine(t,50,"green","20|50"),this.drawHLine(t,100,"green","10|100");for(var n=0,s=this.datas.length;s>n;n++){var r=this.datas[n];if(r){var o=r.datas.length,a=(this.hud_width-this.textSpace)/o,h=r.datapos,l=this._x+this.textSpace;t.fillStyle=r.color;for(var u=o;u>h;h++){var c=this.v2y(r.datas[h]*r.scale);t.fillRect(l,c,a,this.hud_height+this._y-c),l+=a}for(h=0;h<r.datapos;h++)c=this.v2y(r.datas[h]*r.scale),t.fillRect(l,c,a,this.hud_height+this._y-c),l+=a}}t.restore()},e._lastTm=0,e._now=0,e.DATANUM=300,e.inst=null,e.drawTexTm=0,e}(ze)),ti=function(t){function e(t){e.__super.call(this),void 0===t&&(t=!0),this._source=t?_e.createElement("canvas"):this,this.lock=!0}s(e,"laya.resource.HTMLCanvas",t);var i=e.prototype;return i.clear=function(){this._ctx&&this._ctx.clear()},i.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null},i.release=function(){},i._setContext=function(t){this._ctx=t},i.getContext=function(t,e){if(this._ctx)return this._ctx;he.isConchApp&&(t="layagl");var i=this._ctx=this._source.getContext(t,e);return i&&(i._canvas=this,_e.onLimixiu||(i.size=function(){})),i},i.getMemSize=function(){return 0},i.size=function(t,e){(this._width!=t||this._height!=e||this._source&&(this._source.width!=t||this._source.height!=e))&&(this._width=t,this._height=e,this._setGPUMemory(t*e*4),this._ctx&&this._ctx.size(t,e),this._source&&(this._source.height=e,this._source.width=t))},r(0,i,"source",function(){return this._source}),r(0,i,"context",function(){return this._ctx?this._ctx:he.isWebGL?(this._ctx=new WebGLContext2D,this._ctx._canvas=this,this._ctx):this.getContext("2d")}),e}(Ke),ei=function(t){function e(){e.__super.call(this)}s(e,"laya.resource.HTMLImage",t);var i=e.prototype;return i.loadImageSource=function(t){var e=t.width,i=t.height;if(0>=e||0>=i)throw new Error("HTMLImage:width or height must large than 0.");this._width=e,this._height=i,this._source=t,this._setGPUMemory(e*i*4),this._activeResource()},i._disposeResource=function(){this._source&&(this._source=null,this._setGPUMemory(0))},i._getSource=function(){return this._source},e.create=function(){return new e},e}(Ke),ii=(function(t){function e(){this._frames=null,this._url=null,e.__super.call(this),this._setControlNode(this)}s(e,"laya.display.Animation",t);var n=e.prototype;return n.destroy=function(t){void 0===t&&(t=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,t),this._frames=null,this._labels=null},n.play=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=!0),void 0===n&&(n=""),n&&this._setFramesFromCache(n,!0),t.prototype.play.call(this,e,i,n)},n._setFramesFromCache=function(t,i){if(void 0===i&&(i=!1),this._url&&(t=this._url+"#"+t),t&&e.framesMap[t]){var n=e.framesMap[t];return n instanceof Array?(this._frames=e.framesMap[t],this._count=this._frames.length):(n.nodeRoot&&(e.framesMap[t]=si.parseAnimationByData(n),n=e.framesMap[t]),this._frames=n.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=n.interval),this._labels=this._copyLabels(n.labels)),!0}return i&&console.log("ani not found:",t),!1},n._copyLabels=function(t){if(!t)return null;var e;e={};var i;for(i in t)e[i]=Ie.copyArray([],t[i]);return e},n._frameLoop=function(){this._visible&&this._style.alpha>.01&&this._frames&&t.prototype._frameLoop.call(this)},n._displayToIndex=function(t){this._frames&&(this.graphics=this._frames[t])},n.clear=function(){return t.prototype.clear.call(this),this.stop(),this.graphics=null,this._frames=null,this._labels=null,this},n.loadImages=function(t,i){return void 0===i&&(i=""),this._url="",this._setFramesFromCache(i)||(this.frames=e.framesMap[i]?e.framesMap[i]:e.createFrames(t,i)),this},n.loadAtlas=function(t,n,s){function r(i){t===i&&(o.frames=e.framesMap[s]?e.framesMap[s]:e.createFrames(t,s),n&&n.run())}void 0===s&&(s=""),this._url="";var o=this;return o._setFramesFromCache(s)||(ke.getAtlas(t)?r(t):i.loader.load(t,_.create(null,r,[t]),null,"atlas")),this},n.loadAnimation=function(t,e,n){this._url=t;var s=this;return this._actionName||(this._actionName=""),s._setFramesFromCache("")?(s._setFramesFromCache(this._actionName,!0),this.index=0,e&&e.run()):!n||ke.getAtlas(n)?this._loadAnimationData(t,e,n):i.loader.load(n,_.create(this,this._loadAnimationData,[t,e,n]),null,"atlas"),this},n._loadAnimationData=function(t,n,s){function r(i){if(ke.getRes(i)&&t===i){var s;if(e.framesMap[t+"#"])a._setFramesFromCache(o._actionName,!0),o.index=0,o._resumePlay();else{var r=si.parseAnimationData(ke.getRes(t));if(!r)return;var h,l=r.animationList,u=0,c=l.length;for(u=0;c>u;u++)s=l[u],e.framesMap[t+"#"+s.name]=s,h||(h=s);h&&(e.framesMap[t+"#"]=h,a._setFramesFromCache(o._actionName,!0),o.index=0),o._resumePlay()}n&&n.run()}}var o=this;if(s&&!ke.getAtlas(s))return console.warn("atlas load fail:"+s),void 0;var a=this;ke.getRes(t)?r(t):i.loader.load(t,_.create(null,r,[t]),null,"json"),ke.clearRes(t)},r(0,n,"frames",function(){return this._frames},function(t){this._frames=t,t&&(this._count=t.length,this._actionName&&this._setFramesFromCache(this._actionName,!0),this.index=this._index)}),r(0,n,"autoPlay",null,function(t){t?this.play():this.stop()}),r(0,n,"source",null,function(t){t.indexOf(".ani")>-1?this.loadAnimation(t):t.indexOf(".json")>-1||t.indexOf("als")>-1||t.indexOf("atlas")>-1?this.loadAtlas(t):this.loadImages(t.split(","))}),r(0,n,"autoAnimation",null,function(t){this.play(0,!0,t)}),e.createFrames=function(t,i){var n;if("string"==typeof t){var s=ke.getAtlas(t);if(s&&s.length){n=[];for(var r=0,o=s.length;o>r;r++){var a=new H;a.drawImage(ke.getRes(s[r]),0,0),n.push(a)}}}else if(t instanceof Array)for(n=[],r=0,o=t.length;o>r;r++)a=new H,a.loadImage(t[r],0,0),n.push(a);return i&&(e.framesMap[i]=n),n},e.clearCache=function(t){var i,n=e.framesMap,s=t+"#";for(i in n)(i===t||0===i.indexOf(s))&&delete e.framesMap[i]},e.framesMap={},e}($e),function(t){function e(){this._targetDic=null,this._animationData=null,this._usedFrames=null,e.__super.call(this),null===e._sortIndexFun&&(e._sortIndexFun=Z.sortByKey("index",!1,!0))}s(e,"laya.display.FrameAnimation",t);var i=e.prototype;return i._setUp=function(t,e){this._targetDic=t,this._animationData=e,this.interval=1e3/e.frameRate,e.parsed?(this._count=e.count,this._labels=e.labels,this._usedFrames=e.animationNewFrames):(this._usedFrames=[],this._calculateDatas(),e.parsed=!0,e.labels=this._labels,e.count=this._count,e.animationNewFrames=this._usedFrames)},i.clear=function(){return t.prototype.clear.call(this),this._targetDic=null,this._animationData=null,this},i._displayToIndex=function(t){if(this._animationData){0>t&&(t=0),t>this._count&&(t=this._count);var e=this._animationData.nodes,i=0,n=e.length;for(i=0;n>i;i++)this._displayNodeToFrame(e[i],t)}},i._displayNodeToFrame=function(t,e,i){i||(i=this._targetDic);var n=i[t.target];if(n){var s,r,o,a=t.frames,h=t.keys,l=0,u=h.length;for(l=0;u>l;l++)s=h[l],r=a[s],o=r.length>e?r[e]:r[r.length-1],n[s]=o}},i._calculateDatas=function(){if(this._animationData){var t,e=this._animationData.nodes,i=0,n=e.length;for(this._count=0,i=0;n>i;i++)t=e[i],this._calculateKeyFrames(t);this._count+=1}},i._calculateKeyFrames=function(t){var i,n,s=t.keyframes,r=t.target;t.frames||(t.frames={}),t.keys?t.keys.length=0:t.keys=[],t.initValues||(t.initValues={});for(i in s)n=s[i],t.frames[i]||(t.frames[i]=[]),this._targetDic&&this._targetDic[r]&&(t.initValues[i]=this._targetDic[r][i]),n.sort(e._sortIndexFun),t.keys.push(i),this._calculateNodePropFrames(n,t.frames[i],i,r)},i.resetNodes=function(){if(this._targetDic&&this._animationData){var t,e,i=this._animationData.nodes,n=0,s=i.length;for(n=0;s>n;n++)if(t=i[n],e=t.initValues){var r=this._targetDic[t.target];if(r){var o;for(o in e)r[o]=e[o]}}}},i._calculateNodePropFrames=function(t,e){var i=0,n=t.length-1;for(e.length=t[n].index+1,i=0;n>i;i++)this._dealKeyFrame(t[i]),this._calculateFrameValues(t[i],t[i+1],e);0==n&&(e[0]=t[0].value,this._usedFrames&&(this._usedFrames[t[0].index]=!0)),this._dealKeyFrame(t[i])},i._dealKeyFrame=function(t){t.label&&""!=t.label&&this.addLabel(t.label,t.index)},i._calculateFrameValues=function(t,e,i){var n,s=0,r=t.index,o=e.index,a=t.value,h=e.value-t.value,l=o-r,u=this._usedFrames;if(o>this._count&&(this._count=o),t.tween)for(n=me[t.tweenMethod],null==n&&(n=me.linearNone),s=r;o>s;s++)i[s]=n(s-r,a,h,l),u&&(u[s]=!0);else for(s=r;o>s;s++)i[s]=a;u&&(u[t.index]=!0,u[e.index]=!0),i[e.index]=e.value},e._sortIndexFun=null,e}($e)),ni=function(t){function e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow="scroll",this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}s(e,"laya.display.Input",t);var o=e.prototype;return o.setSelection=function(t,e){this.focus=!0,laya.display.Input.inputElement.selectionStart=t,laya.display.Input.inputElement.selectionEnd=e},o._onUnDisplay=function(){this.focus=!1},o._onMouseDown=function(){this.focus=!0},o._syncInputTransform=function(){var t=this.nativeInput,n=Ie.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),s=this._width-this.padding[1]-this.padding[3],r=this._height-this.padding[0]-this.padding[2];he.isConchApp?(t.setScale(n.scaleX,n.scaleY),t.setSize(s,r),t.setPos(n.x,n.y)):(e.inputContainer.style.transform=e.inputContainer.style.webkitTransform="scale("+n.scaleX+","+n.scaleY+") rotate("+i.stage.canvasDegree+"deg)",t.style.width=s+"px",t.style.height=r+"px",e.inputContainer.style.left=n.x+"px",e.inputContainer.style.top=n.y+"px")},o.select=function(){this.nativeInput.select()},o._setInputMethod=function(){e.input.parentElement&&e.inputContainer.removeChild(e.input),e.area.parentElement&&e.inputContainer.removeChild(e.area),e.inputElement=this._multiline?e.area:e.input,e.inputContainer.appendChild(e.inputElement),qe.RightToLeft&&(e.inputElement.style.direction="rtl")},o._focusIn=function(){laya.display.Input.isInputting=!0;var t=this.nativeInput;this._focus=!0;var e=t.style;e.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),t.readOnly=!this._editable,he.isConchApp&&(t.setType(this._type),t.setForbidEdit(!this._editable)),t.maxLength=this._maxChars;this.padding;if(t.type=this._type,t.value=this._content,t.placeholder=this._prompt,i.stage.off("keydown",this,this._onKeyDown),i.stage.on("keydown",this,this._onKeyDown),i.stage.focus=this,this.event("focus"),_e.onPC&&t.focus(),!_e.onMiniGame){{this._text}this._text=null}this.typeset(),t.setColor(this._originColor),t.setFontSize(this.fontSize),t.setFontFace(_e.onIPhone?qe.fontFamilyMap[this.font]||this.font:this.font),he.isConchApp&&t.setMultiAble&&t.setMultiAble(this._multiline),e.lineHeight=this.leading+this.fontSize+"px",e.fontStyle=this.italic?"italic":"normal",e.fontWeight=this.bold?"bold":"normal",e.textAlign=this.align,e.padding="0 0",this._syncInputTransform(),!he.isConchApp&&_e.onPC&&i.timer.frameLoop(1,this,this._syncInputTransform)},o._setPromptColor=function(){e.promptStyleDOM=_e.getElementById("promptStyle"),e.promptStyleDOM||(e.promptStyleDOM=_e.createElement("style"),e.promptStyleDOM.setAttribute("id","promptStyle"),_e.document.head.appendChild(e.promptStyleDOM)),e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"
},o._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(i.superSet(qe,this,"text",this._content),i.superSet(qe,this,"color",this._originColor)):(i.superSet(qe,this,"text",this._prompt),i.superSet(qe,this,"color",this._promptColor)),i.stage.off("keydown",this,this._onKeyDown),i.stage.focus=null,this.event("blur"),he.isConchApp&&this.nativeInput.blur(),_e.onPC&&i.timer.clear(this,this._syncInputTransform)},o._onKeyDown=function(t){13===t.keyCode&&(_e.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},o.changeText=function(e){this._content=e,this._focus?(this.nativeInput.value=e||"",this.event("change")):t.prototype.changeText.call(this,e)},r(0,o,"color",t.prototype._$get_color,function(t){this._focus&&this.nativeInput.setColor(t),i.superSet(qe,this,"color",this._content?t:this._promptColor),this._originColor=t}),r(0,o,"multiline",function(){return this._multiline},function(t){this._multiline=t,this.valign=t?"top":"middle"}),r(0,o,"maxChars",function(){return this._maxChars},function(t){0>=t&&(t=1e5),this._maxChars=t}),r(0,o,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(t){i.superSet(qe,this,"color",this._originColor),t+="",this._focus?(this.nativeInput.value=t||"",this.event("change")):(this._multiline||(t=t.replace(/\r?\n/g,"")),this._content=t,t?i.superSet(qe,this,"text",t):(i.superSet(qe,this,"text",this._prompt),i.superSet(qe,this,"color",this.promptColor)))}),r(0,o,"nativeInput",function(){return this._multiline?e.area:e.input}),r(0,o,"prompt",function(){return this._prompt},function(t){!this._text&&t&&i.superSet(qe,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?i.superSet(qe,this,"text",this._text==this._prompt?t:this._text):i.superSet(qe,this,"text",t),this._prompt=qe.langPacks&&qe.langPacks[t]?qe.langPacks[t]:t}),r(0,o,"focus",function(){return this._focus},function(t){var i=this.nativeInput;this._focus!==t&&(t?(i.target?i.target._focusOut():this._setInputMethod(),i.target=this,this._focusIn()):(i.target=null,this._focusOut(),_e.document.body.scrollTop=0,i.blur(),he.isConchApp?i.setPos(-1e4,-1e4):e.inputContainer.contains(i)&&e.inputContainer.removeChild(i)))}),r(0,o,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(t){t?(t="[^"+t+"]",t.indexOf("^^")>-1&&(t=t.replace("^^","")),this._restrictPattern=new RegExp(t,"g")):this._restrictPattern=null}),r(0,o,"editable",function(){return this._editable},function(t){this._editable=t,he.isConchApp&&e.input.setForbidEdit(!t)}),r(0,o,"promptColor",function(){return this._promptColor},function(t){this._promptColor=t,this._content||i.superSet(qe,this,"color",t)}),r(0,o,"type",function(){return this._type},function(t){this._getTextStyle().asPassword="password"===t?!0:!1,this._type=t}),e.__init__=function(){e._createInputElement(),_e.onMobile&&he.canvas.addEventListener(e.IOS_IFRAME?_e.onMiniGame?"touchend":"click":"touchend",e._popupInputMethod)},e._popupInputMethod=function(){if(laya.display.Input.isInputting){var t=laya.display.Input.inputElement;t.focus()}},e._createInputElement=function(){e._initInput(e.area=_e.createElement("textarea")),e._initInput(e.input=_e.createElement("input")),e.inputContainer=_e.createElement("div"),e.inputContainer.style.position="absolute",e.inputContainer.style.zIndex=1e5,_e.container.appendChild(e.inputContainer),e.inputContainer.setPos=function(t,i){e.inputContainer.style.left=t+"px",e.inputContainer.style.top=i+"px"}},e._initInput=function(t){var i=t.style;i.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",i.resize="none",i.backgroundColor="transparent",i.border="none",i.outline="none",i.zIndex=1,t.addEventListener("input",e._processInputting),t.addEventListener("mousemove",e._stopEvent),t.addEventListener("mousedown",e._stopEvent),t.addEventListener("touchmove",e._stopEvent),t.setFontFace=function(e){t.style.fontFamily=e},he.isConchApp||(t.setColor=function(e){t.style.color=e},t.setFontSize=function(e){t.style.fontSize=e+"px"})},e._processInputting=function(){var t=laya.display.Input.inputElement.target;if(t){var e=laya.display.Input.inputElement.value;t._restrictPattern&&(e=e.replace(/\u2006|\x27/g,""),t._restrictPattern.test(e)&&(e=e.replace(t._restrictPattern,""),laya.display.Input.inputElement.value=e)),t._text=e,t.event("input")}},e._stopEvent=function(t){"touchmove"==t.type&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},e.TYPE_TEXT="text",e.TYPE_PASSWORD="password",e.TYPE_EMAIL="email",e.TYPE_URL="url",e.TYPE_NUMBER="number",e.TYPE_RANGE="range",e.TYPE_DATE="date",e.TYPE_MONTH="month",e.TYPE_WEEK="week",e.TYPE_TIME="time",e.TYPE_DATE_TIME="datetime",e.TYPE_DATE_TIME_LOCAL="datetime-local",e.TYPE_SEARCH="search",e.input=null,e.area=null,e.inputElement=null,e.inputContainer=null,e.confirmButton=null,e.promptStyleDOM=null,e.inputHeight=45,e.isInputting=!1,e.stageMatrix=null,n(e,["IOS_IFRAME",function(){return this.IOS_IFRAME=_e.onIOS&&_e.window.top!=_e.window.self}]),e}(qe),si=(function(t){function e(){this._target=null,this._playEvent=null,this._initData={},this._aniKeys=null,this._effectClass=null,e.__super.call(this)}s(e,"laya.display.EffectAnimation",t);var i=e.prototype;return i._onOtherBegin=function(t){t!==this&&this.stop()},i._addEvent=function(){this._target&&this._playEvent&&(this._setControlNode(this._target),this._target.on(this._playEvent,this,this._onPlayAction))},i._onPlayAction=function(){this.play(0,!1)},i.play=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=!0),void 0===i&&(i=""),this._target&&(this._target.event("effectbegin",[this]),this._recordInitData(),laya.display.AnimationBase.prototype.play.call(this,t,e,i))},i._recordInitData=function(){if(this._aniKeys){var t=0,e=0;e=this._aniKeys.length;var i;for(t=0;e>t;t++)i=this._aniKeys[t],this._initData[i]=this._target[i]}},i._displayToIndex=function(t){if(this._animationData){0>t&&(t=0),t>this._count&&(t=this._count);var e=this._animationData.nodes,i=0,n=e.length;for(n=n>1?1:n,i=0;n>i;i++)this._displayNodeToFrame(e[i],t)}},i._displayNodeToFrame=function(t,e){if(this._target){var i,n,s,r,o,a,h,l=this._target,u=t.frames,c=t.keys,_=0,d=c.length,f=t.secondFrames,p=0;for(_=0;d>_;_++)i=c[_],n=u[i],p=f[i],-1==p?s=this._initData[i]:p>e?(o=t.keyframes[i],a=o[0],a.tween?(r=me[a.tweenMethod],null==r&&(r=me.linearNone),h=o[1],s=r(e,this._initData[i],h.value-this._initData[i],h.index)):s=this._initData[i]):s=n.length>e?n[e]:n[n.length-1],l[i]=s}},i._calculateKeyFrames=function(e){t.prototype._calculateKeyFrames.call(this,e);var i,n,s=e.keyframes,r=(e.target,{});e.secondFrames=r;for(i in s)n=s[i],r[i]=n.length<=1?-1:n[1].index},r(0,i,"target",function(){return this._target},function(t){this._target&&this._target.off("effectbegin",this,this._onOtherBegin),this._target=t,this._target&&this._target.on("effectbegin",this,this._onOtherBegin),this._addEvent()}),r(0,i,"playEvent",null,function(t){this._playEvent=t,t&&this._addEvent()}),r(0,i,"effectData",null,function(t){if(t){var e=t.animations;if(e&&e[0]){var i=e[0];this._setUp({},i),i.nodes&&i.nodes[0]&&(this._aniKeys=i.nodes[0].keys)}}}),r(0,i,"effectClass",null,function(t){if(this._effectClass=pe.getClass(t),this._effectClass){var e=this._effectClass.uiView;if(e){var i=e.animations;if(i&&i[0]){var n=i[0];this._setUp({},n),n.nodes&&n.nodes[0]&&(this._aniKeys=n.nodes[0].keys)}}}}),e.EFFECT_BEGIN="effectbegin",e}(ii),function(t){function e(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,e.__super.call(this)}var i;s(e,"laya.utils.GraphicAnimation",t);var r=e.prototype;return r._parseNodeList=function(t){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[t.compId]=t.props,t.compId&&this._nodeList.push(t.compId);var e=t.child;if(e){var i=0,n=e.length;for(i=0;n>i;i++)this._parseNodeList(e[i])}},r._calGraphicData=function(t){this._setUp(null,t),this._createGraphicData()},r._createGraphicData=function(){var t=[],e=0,i=this.count,n=this._usedFrames;n||(n=[]);var s;for(e=0;i>e;e++)(n[e]||!s)&&(s=this._createFrameGraphic(e)),t.push(s);this._gList=t},r._createFrameGraphic=function(t){var i=new H;return e._rootMatrix||(e._rootMatrix=new te),this._updateNodeGraphic(this._rootNode,t,e._rootMatrix,i),i},r._updateNodeGraphic=function(t,e,i,n,s){void 0===s&&(s=1);var r;r=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId]),r.resultTransform||(r.resultTransform=new te);var o;o=r.resultTransform,te.mul(r.transform,i,o);var a,h=r.alpha*s;if(!(.01>h)){r.skin&&(a=this._getTextureByUrl(r.skin),a&&(o._checkTransform()?(n.drawTexture(a,0,0,r.width,r.height,o,h),r.resultTransform=null):n.drawTexture(a,o.tx,o.ty,r.width,r.height,null,h)));var l=t.child;if(l){var u=0,c=0;for(c=l.length,u=0;c>u;u++)this._updateNodeGraphic(l[u],e,o,n,h)}}},r._updateNoChilds=function(t,e){if(t.skin){var i=this._getTextureByUrl(t.skin);if(i){var n=t.transform;n._checkTransform();var s=!1;s=!n._bTransform,s?e.drawTexture(i,n.tx,n.ty,t.width,t.height,null,t.alpha):e.drawTexture(i,0,0,t.width,t.height,n.clone(),t.alpha)}}},r._updateNodeGraphic2=function(t,e,i){var n;if(n=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId]),!t.child)return this._updateNoChilds(n,i),void 0;var s=n.transform;s._checkTransform();var r=!1;r=!s._bTransform;var o=!1;o=r&&(0!=s.tx||0!=s.ty);var a=!1;a=s._bTransform||1!=n.alpha,a&&i.save(),1!=n.alpha&&i.alpha(n.alpha),r?o&&i.translate(s.tx,s.ty):i.transform(s.clone());var h,l=t.child;if(n.skin&&(h=this._getTextureByUrl(n.skin),h&&i.drawImage(h,0,0,n.width,n.height)),l){var u=0,c=0;for(c=l.length,u=0;c>u;u++)this._updateNodeGraphic2(l[u],e,i)}a?i.restore():r?o&&i.translate(-s.tx,-s.ty):i.transform(s.clone().invert())},r._calculateKeyFrames=function(e){t.prototype._calculateKeyFrames.call(this,e),this._nodeIDAniDic[e.target]=e},r.getNodeDataByID=function(t){return this._nodeIDAniDic[t]},r._getParams=function(t,i,n,s){var r=e._temParam;r.length=i.length;var o=0,a=i.length;for(o=0;a>o;o++)r[o]=this._getObjVar(t,i[o][0],n,i[o][1],s);return r},r._getObjVar=function(t,e,i,n,s){if(t.hasOwnProperty(e)){var r=t[e];return i>=r.length&&(i=r.length-1),t[e][i]}return s.hasOwnProperty(e)?s[e]:n},r._getNodeGraphicData=function(t,n,s){s||(s=new i),s.transform?s.transform.identity():s.transform=new te;var r=this.getNodeDataByID(t);if(!r)return s;var o=r.frames,a=this._getParams(o,e._drawTextureCmd,n,this._nodeDefaultProps[t]),h=a[0],l=0/0,u=0/0,c=a[5],_=a[6],d=a[13],f=a[14],p=a[7],g=a[8],m=a[9],v=a[11],y=a[12];l=a[3],u=a[4],(0==l||0==u)&&(h=null),-1==l&&(l=0),-1==u&&(u=0);var x;s.skin=h,s.width=l,s.height=u,h&&(x=this._getTextureByUrl(h),x?(l||(l=x.sourceWidth),u||(u=x.sourceHeight)):console.warn("lost skin:",h,",you may load pics first")),s.alpha=a[10];var w=s.transform;0!=d&&(c=d*l),0!=f&&(_=f*u),(0!=c||0!=_)&&w.translate(-c,-_);var T=null;if(m||1!==p||1!==g||v||y){T=e._tempMt,T.identity(),T._bTransform=!0;var C=.0174532922222222*(m-v),b=.0174532922222222*(m+y),S=Math.cos(b),M=Math.sin(b),I=Math.sin(C),P=Math.cos(C);T.a=p*S,T.b=p*M,T.c=-g*I,T.d=g*P,T.tx=T.ty=0}return T&&(w=te.mul(w,T,w)),w.translate(a[1],a[2]),s},r._getTextureByUrl=function(t){return ke.getRes(t)},r.setAniData=function(t,i){if(t.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=t,this._parseNodeList(t);var n,s={},r=[],o=t.animations,a=0,h=o.length;for(a=0;h>a;a++)if(n=o[a],this._labels=null,(!i||i==n.name)&&n){try{this._calGraphicData(n)}catch(l){console.warn("parse animation fail:"+n.name+",empty animation created"),this._gList=[]}var u={};u.interval=1e3/n.frameRate,u.frames=this._gList,u.labels=this._labels,u.name=n.name,r.push(u),s[n.name]=u}this.animationList=r,this.animationDic=s}e._temParam.length=0},r.parseByData=function(t){var e,i;e=t.nodeRoot,i=t.aniO,delete t.nodeRoot,delete t.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=e,this._parseNodeList(e),this._labels=null;try{this._calGraphicData(i)}catch(n){console.warn("parse animation fail:"+i.name+",empty animation created"),this._gList=[]}var s=t;return s.interval=1e3/i.frameRate,s.frames=this._gList,s.labels=this._labels,s.name=i.name,s},r.setUpAniData=function(t){if(t.animations){var e,i={},n=[],s=t.animations,r=0,o=s.length;for(r=0;o>r;r++)if(e=s[r]){var a={};a.name=e.name,a.aniO=e,a.nodeRoot=t,n.push(a),i[e.name]=a}this.animationList=n,this.animationDic=i}},r._clear=function(){this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic=null},e.parseAnimationByData=function(t){e._I||(e._I=new e);var i;return i=e._I.parseByData(t),e._I._clear(),i},e.parseAnimationData=function(t){e._I||(e._I=new e),e._I.setUpAniData(t);var i;return i={},i.animationList=e._I.animationList,i.animationDic=e._I.animationDic,e._I._clear(),i},e._temParam=[],e._I=null,e._rootMatrix=null,n(e,["_drawTextureCmd",function(){return this._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]]},"_tempMt",function(){return this._tempMt=new te}]),e.__init$=function(){i=function(){function t(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=0/0,this.height=0/0,this.alpha=1}return s(t,""),t}()},e}(ii));i.__init([Ne,c,Ce,he,Se,re,Xe,si])}(window,document,Laya),function(t,e,i){var n=(i.un,i.uns,i.static,i.class),s=(i.getset,i.__newvec,function(){function t(){}return n(t,"LayaMain"),t}());new s}(window,document,Laya);
!function(t,e,_){{var i=(_.un,_.uns,_.static),r=_.class,a=_.getset,n=(_.__newvec,laya.maths.Arith,laya.maths.Bezier),s=laya.resource.Bitmap,o=(laya.filters.BlurFilter,laya.filters.BlurFilterGLRender),h=laya.utils.Browser,u=(laya.utils.Byte,laya.display.css.CacheStyle,laya.filters.ColorFilter),l=laya.utils.ColorUtils,c=_.Config,f=laya.resource.Context,d=laya.display.cmd.DrawCanvasCmd,E=laya.display.cmd.DrawImageCmd,A=(laya.events.Event,laya.display.cmd.FillTextCmd),D=laya.filters.Filter,R=laya.utils.FontInfo,m=(laya.filters.GlowFilter,laya.filters.GlowFilterGLRender),T=laya.display.Graphics,P=laya.resource.HTMLCanvas,v=(laya.utils.HTMLChar,laya.resource.HTMLImage),p=(laya.utils.Handler,laya.maths.Matrix),C=laya.display.Node,M=(laya.utils.PerfHUD,laya.maths.Point),O=laya.utils.Pool,S=laya.maths.Rectangle,g=laya.renders.Render,y=laya.renders.RenderSprite,L=laya.resource.Resource,b=(laya.resource.ResourceManager,laya.display.cmd.RestoreCmd),B=laya.display.cmd.RotateCmd,I=laya.utils.RunDriver,x=laya.display.cmd.SaveCmd,N=laya.display.cmd.ScaleCmd,F=laya.display.Sprite,w=(laya.display.SpriteConst,laya.display.css.SpriteStyle,laya.display.Stage),V=laya.utils.Stat,U=laya.utils.StringKey,W=laya.system.System,G=laya.display.Text,X=laya.resource.Texture,k=laya.display.cmd.TransformCmd,z=laya.display.cmd.TranslateCmd,Y=laya.utils.VectorGraphManager;laya.utils.WordText}_.interface("laya.webgl.submit.ISubmit"),_.interface("laya.webgl.canvas.save.ISaveData");var H=function(){function t(){}r(t,"laya.webgl.canvas.save.SaveBase");var e=t.prototype;return _.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){this._dataObj[this._valueName]=this._value,t.POOL[t.POOL._length++]=this,this._newSubmit&&(e._curSubmit=pe.RENDERBASE)},t._createArray=function(){var t=[];return t._length=0,t},t._init=function(){var e=t._namemap={};return e[1]="ALPHA",e[2]="fillStyle",e[8]="font",e[256]="lineWidth",e[512]="strokeStyle",e[8192]="_mergeID",e[1024]=e[2048]=e[4096]=[],e[16384]="textBaseline",e[32768]="textAlign",e[65536]="_nBlendType",e[1048576]="shader",e[2097152]="filters",e[8388608]="_colorFiler",e},t.save=function(e,_,i,r){if((e._saveMark._saveuse&_)!==_){e._saveMark._saveuse|=_;var a=t.POOL,n=a._length>0?a[--a._length]:new t;n._value=i[n._valueName=t._namemap[_]],n._dataObj=i,n._newSubmit=r;var s=e._save;s[s._length++]=n}},t.POOL=laya.webgl.canvas.save.SaveBase._createArray(),t._namemap=t._init(),t}(),Z=function(){function t(e,_){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this.ref=1,this._cacheID=0,this.clipMatDir=[99999999,0,0,99999999],this.clipMatPos=[0,0],this.defines=new Ge,this.mainID=e,this.subID=_,this.textureHost=null,this.texture=null,this.color=null,this.colorAdd=null,this.u_mmat2=null,this._cacheID=e|_,this._inClassCache=t._cache[this._cacheID],e>0&&!this._inClassCache&&(this._inClassCache=t._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}r(t,"laya.webgl.shader.d2.value.Value2D");var e=t.prototype;return e.setValue=function(){},e._ShaderWithCompile=function(){var t=t_.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,r_.create,this._attribLocation);return t},e.upload=function(){var t=ye;ye.worldMatrix4===ye.TEMPMAT4_ARRAY||this.defines.addInt(128),this.mmat=t.worldMatrix4;var e=t_.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();e._shaderValueWidth!==t.width||e._shaderValueHeight!==t.height?(this.size[0]=t.width,this.size[1]=t.height,e._shaderValueWidth=t.width,e._shaderValueHeight=t.height,e.upload(this,null)):e.upload(this,e._params2dQuick2||e._make2dQuick2())},e.setFilters=function(t){if(this.filters=t,t)for(var e,_=t.length,i=0;_>i;i++)e=t[i],e&&(this.defines.add(e.type),e.action.setValue(this))},e.clear=function(){this.defines._value=this.subID+(be.shaderHighPrecision?1024:0)},e.release=function(){--this.ref<1&&(this._inClassCache&&(this._inClassCache[this._inClassCache._length++]=this),this.clear(),this.filters=null,this.ref=1)},t._initone=function(e,_){t._typeClass[e]=_,t._cache[e]=[],t._cache[e]._length=0},t.__init__=function(){t._initone(4,we),t._initone(256,Fe),t._initone(512,Ne),t._initone(1,Ve),t._initone(65,qe),t._initone(9,Ve)},t.create=function(e,_){var i=t._cache[e|_];return i._length?i[--i._length]:new t._typeClass[e|_](_)},t._cache=[],t._typeClass=[],t.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t}(),j=(function(){function t(){this._paramData=new ParamData(4,!0)}r(t,"laya.layagl.cmdNative.AlphaCmdNative");var e=t.prototype;return e.recover=function(){O.recover("AlphaCmd",this)},e.run=function(t){t.alpha(this._alpha)},a(0,e,"cmdID",function(){return"Alpha"}),a(0,e,"alpha",function(){return this._alpha},function(t){t=t>1?1:t,t=0>t?0:t,this._alpha=t;var e=16777215;e=255*t<<24|e,this._paramData._int32Data[0]=e,$.syncBufferToRenderThread(this._paramData)}),t.create=function(e){var _=O.getItemByClass("AlphaCmd",t),i=_._graphicsCmdEncoder=this._commandEncoder;return _.alpha=e,i.setGlobalValueEx(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,15,_._paramData.getPtrID(),0),$.syncBufferToRenderThread(i),_},t.ID="Alpha",t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=new ParamData(16,!0)}r(t,"laya.layagl.cmdNative.ClipRectCmdNative");var e=t.prototype;return e.recover=function(){O.recover("ClipRectCmd",this)},a(0,e,"cmdID",function(){return"ClipRect"}),a(0,e,"width",function(){return 0},function(){}),a(0,e,"x",function(){return 0},function(){}),a(0,e,"y",function(){return 0},function(){}),a(0,e,"height",function(){return 0},function(){}),t.create=function(e,_,i,r){var a=O.getItemByClass("ClipRectCmd",t);a._graphicsCmdEncoder=this._commandEncoder;var n=a._graphicsCmdEncoder,s=a._paramData._float32Data;s[0]=e,s[1]=_,s[2]=i,s[3]=r;var o=a._paramData.getPtrID();return $.syncBufferToRenderThread(a._paramData),n.setClipValueEx(_e.GLOBALVALUE_CLIP_MAT_DIR,_e.GLOBALVALUE_CLIP_MAT_POS,_e.GLOBALVALUE_MATRIX32,o),$.syncBufferToRenderThread(n),a},t.ID="ClipRect",t}(),function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._texture=null,this._x=0/0,this._y=0/0,this._width=0/0,this._height=0/0}r(t,"laya.layagl.cmdNative.DrawCanvasCmdNative");var e=t.prototype;return e.recover=function(){this._graphicsCmdEncoder=null,O.recover("DrawCanvasCmd",this)},a(0,e,"cmdID",function(){return"DrawCanvasCmd"}),a(0,e,"y",function(){return this._y},function(e){this._y=e;var _=this._paramData._float32Data;_[t._PARAM_VB_POS_+1]=this._y,_[t._PARAM_VB_POS_+7]=this._y,_[t._PARAM_VB_POS_+13]=this._y+this._height,_[t._PARAM_VB_POS_+19]=this._y+this._height,_[t._PARAM_CLIP_SIZE+1]=e+16,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"texture",function(){return this._texture},function(e){this._texture=e,this._paramData._int32Data[t._PARAM_TEXTURE_POS_]=this._texture._getSource().id;var _=this._paramData._float32Data,i=__.flipyuv;_[t._PARAM_VB_POS_+2]=i[0],_[t._PARAM_VB_POS_+3]=i[1],_[t._PARAM_VB_POS_+8]=i[2],_[t._PARAM_VB_POS_+9]=i[3],_[t._PARAM_VB_POS_+14]=i[4],_[t._PARAM_VB_POS_+15]=i[5],_[t._PARAM_VB_POS_+20]=i[6],_[t._PARAM_VB_POS_+21]=i[7],$.syncBufferToRenderThread(this._paramData)}),a(0,e,"width",function(){return this._width},function(e){this._width=e;var _=this._paramData._float32Data;_[t._PARAM_VB_POS_]=this._x,_[t._PARAM_VB_POS_+6]=this._x+this._width,_[t._PARAM_VB_POS_+12]=this._x+this._width,_[t._PARAM_VB_POS_+18]=this._x,_[t._PARAM_CLIP_SIZE+2]=e-32,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"x",function(){return this._x},function(e){this._x=e;var _=this._paramData._float32Data;_[t._PARAM_VB_POS_]=this._x,_[t._PARAM_VB_POS_+6]=this._x+this._width,_[t._PARAM_VB_POS_+12]=this._x+this._width,_[t._PARAM_VB_POS_+18]=this._x,_[t._PARAM_CLIP_SIZE]=e+16,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"height",function(){return this._height},function(e){this._height=e;var _=this._paramData._float32Data;_[t._PARAM_VB_POS_+1]=this._y,_[t._PARAM_VB_POS_+7]=this._y,_[t._PARAM_VB_POS_+13]=this._y+this._height,_[t._PARAM_VB_POS_+19]=this._y+this._height,_[t._PARAM_CLIP_SIZE+3]=e-32,$.syncBufferToRenderThread(this._paramData)}),t.create=function(e,_,i,r,a){var n=O.getItemByClass("DrawCanvasCmd",t);n._graphicsCmdEncoder=this._commandEncoder,t.createCommandEncoder(),n._paramData||(n._paramData=new ParamData(132,!0)),n._texture=e,n._x=_,n._y=i,n._width=r,n._height=a,t.setParamData(n._paramData,e,_,i,r,a);var s=t._DRAW_CANVAS_CMD_ENCODER_.getPtrID(),o=n._paramData.getPtrID();return n._graphicsCmdEncoder.useCommandEncoder(s,o,-1),$.syncBufferToRenderThread(n._graphicsCmdEncoder),n},t.createCommandEncoder=function(){t._DRAW_CANVAS_CMD_ENCODER_||(t._DRAW_CANVAS_CMD_ENCODER_=$.instance.createCommandEncoder(124,32,!0),t._DRAW_CANVAS_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWTEXTURE),t._DRAW_CANVAS_CMD_ENCODER_.useVDO(_e.VDO_MESHQUADTEXTURE),t._DRAW_CANVAS_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_CANVAS_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_CANVAS_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_CANVAS_CMD_ENCODER_.uniformTextureByParamData(0,4,4*t._PARAM_TEXTURE_POS_),t._DRAW_CANVAS_CMD_ENCODER_.setRectMeshByParamData(12,4*t._PARAM_VB_POS_,16),t._DRAW_CANVAS_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CANVAS_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_CANVAS_CMD_ENCODER_))},t.setParamData=function(e,_,i,r,a,n){var s=e._float32Data,o=e._int32Data;o[0]=3,o[1]=33984,o[t._PARAM_TEXTURE_POS_]=_._getSource().id,o[3]=1,o[4]=96;var h=0!=a?a:_.width,u=0!=n?n:_.height,l=__.flipyuv,c=t._PARAM_VB_POS_;s[c++]=i,s[c++]=r,s[c++]=l[0],s[c++]=l[1],o[c++]=4294967295,o[c++]=4294967295,s[c++]=i+h,s[c++]=r,s[c++]=l[2],s[c++]=l[3],o[c++]=4294967295,o[c++]=4294967295,s[c++]=i+h,s[c++]=r+u,s[c++]=l[4],s[c++]=l[5],o[c++]=4294967295,o[c++]=4294967295,s[c++]=i,s[c++]=r+u,s[c++]=l[6],s[c++]=l[7],o[c++]=4294967295,o[c++]=4294967295,s[t._PARAM_CLIP_SIZE]=i+16,s[t._PARAM_CLIP_SIZE+1]=r+16,s[t._PARAM_CLIP_SIZE+2]=a-32,s[t._PARAM_CLIP_SIZE+3]=n-32,$.syncBufferToRenderThread(e)},t.ID="DrawCanvasCmd",t._DRAW_CANVAS_CMD_ENCODER_=null,t._PARAM_TEXTURE_POS_=2,t._PARAM_VB_POS_=5,t._PARAM_CLIP_SIZE=29,t}()),K=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._paramID=null,this._x=0/0,this._y=0/0,this._radius=0/0,this._fillColor=null,this._lineColor=null,this._lineWidth=0/0,this._vertNum=0,this._line_vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this.line_ibBuffer=null,this.line_vbBuffer=null,this._ibSize=0,this._vbSize=0,this._line_ibSize=0,this._line_vbSize=0,this._cmdCurrentPos=0,this._points=[],this._linePoints=[],this._line_vbArray=[],this._line_ibArray=[]}r(t,"laya.layagl.cmdNative.DrawCircleCmdNative");var e=t.prototype;return e._arc=function(t,e,_,i,r){void 0===i&&(i=!1),void 0===r&&(r=!0);var a=[],n=0,s=2*Math.PI,o=0,h=0,u=0,l=0,c=0,f=0,d=0,E=0,A=0,D=0,R=0;if(h=s-n,i)if(Math.abs(h)>=2*Math.PI)h=2*-Math.PI;else for(;h>0;)h-=2*Math.PI;else if(Math.abs(h)>=2*Math.PI)h=2*Math.PI;else for(;0>h;)h+=2*Math.PI;D=101>_?Math.max(10,h*_/5):201>_?Math.max(10,h*_/20):Math.max(10,h*_/40),u=h/D/2,l=Math.abs(4/3*(1-Math.cos(u))/Math.sin(u)),i&&(l=-l),R=0;for(A=0;D>=A;A++)o=n+h*(A/D),c=Math.cos(o),f=Math.sin(o),d=t+c*_,E=e+f*_,a.push(d),a.push(E);return a},e.recover=function(){this._fillColor=null,this._lineColor=null,this._points=null,this._linePoints=null,O.recover("DrawCircleCmd",this)},a(0,e,"lineColor",function(){return this._lineColor},function(e){!this._lineColor&&this._lineWidth&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_CIRCLE_LINES_CMD_ENCODER_.getPtrID(),$.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineColor=e,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var _=0;_<this._points.length;_++)this._linePoints.push(this._points[_]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Te.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;var i=this._line_vertNum;(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(i-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;for(var r=this.line_ibBuffer._int16Data,a=0,n=0;n<3*(this._line_vertNum-2);n++)r[a++]=this._line_ibArray[n];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*i*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var s=l.create(e),o=s.numColor,h=this.line_vbBuffer._float32Data,u=this.line_vbBuffer._int32Data,c=0;for(_=0;_<this._line_vertNum;_++)h[c++]=this._line_vbArray[2*_]+this.x,h[c++]=this._line_vbArray[2*_+1]+this.y,u[c++]=o;var f=this._paramData._int32Data;f[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),f[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),f[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,f[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,$.syncBufferToRenderThread(this.line_vbBuffer),$.syncBufferToRenderThread(this.line_ibBuffer),$.syncBufferToRenderThread(this._paramData)}),a(0,e,"cmdID",function(){return"DrawCircle"}),a(0,e,"fillColor",function(){return this._fillColor},function(t){this._fillColor=t;for(var e=l.create(this._fillColor),_=e.numColor,i=this.vbBuffer._int32Data,r=0,a=0;a<this._vertNum;a++)r++,r++,i[r++]=_;$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)e[_++]=this._points[2*i]+this._x,_++,_++;if(this._lineColor){var r=this.line_vbBuffer._float32Data;for(_=0,i=0;i<this._line_vertNum;i++)r[_++]=this._line_vbArray[2*i]+this._x,_++,_++;$.syncBufferToRenderThread(this.line_vbBuffer)}$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)_++,e[_++]=this._points[2*i+1]+this._y,_++;if(this._lineColor){var r=this.line_vbBuffer._float32Data;for(_=0,i=0;i<this._line_vertNum;i++)_++,r[_++]=this._line_vbArray[2*i+1]+this._y,_++;$.syncBufferToRenderThread(this.line_vbBuffer)}$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"radius",function(){return this._radius},function(e){this._points=this._arc(0,0,e),this._vertNum=this._points.length/2;var _=this._vertNum,i=0;this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;var r=0,a=this._vertNum-2;(!this.ibBuffer||this.ibBuffer.getByteLength()<3*a*2)&&(this.ibBuffer=new ParamData(3*a*2,!0,!0)),this._ibSize=3*a*2;for(var n=this.ibBuffer._int16Data,s=0,o=0;a>o;o++)n[s++]=r,n[s++]=o+1+r,n[s++]=o+2+r;(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*_*4,!0)),this._vbSize=3*this._vertNum*4;for(var h=l.create(this._fillColor),u=h.numColor,c=this.vbBuffer._float32Data,f=this.vbBuffer._int32Data,d=0,E=0;E<this._vertNum;E++)c[d++]=this._points[2*E]+this._x,c[d++]=this._points[2*E+1]+this._y,f[d++]=u;if(this._lineColor){for(E=0;E<this._points.length;E++)this._linePoints.push(this._points[E]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Te.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length,i=this._line_vertNum,(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(i-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;var A=this.line_ibBuffer._int16Data;s=0;for(var D=0;D<3*(this._line_vertNum-2);D++)A[s++]=this._line_ibArray[D];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*i*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var R=l.create(this._lineColor),m=R.numColor,T=this.line_vbBuffer._float32Data,P=this.line_vbBuffer._int32Data;for(d=0,E=0;E<this._line_vertNum;E++)T[d++]=this._line_vbArray[2*E]+this._x,T[d++]=this._line_vbArray[2*E+1]+this._y,P[d++]=m}var v=this._paramData._int32Data;v[t._PARAM_VB_POS_]=this.vbBuffer.getPtrID(),v[t._PARAM_IB_POS_]=this.ibBuffer.getPtrID(),v[t._PARAM_VB_SIZE_POS_]=this._vbSize,v[t._PARAM_IB_SIZE_POS_]=this._ibSize,$.syncBufferToRenderThread(this.vbBuffer),$.syncBufferToRenderThread(this.ibBuffer),this._lineColor&&(v[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),v[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),v[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,v[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,$.syncBufferToRenderThread(this.line_vbBuffer),$.syncBufferToRenderThread(this.line_ibBuffer)),$.syncBufferToRenderThread(this._paramData)}),a(0,e,"lineWidth",function(){return this._lineWidth},function(e){!this._lineWidth&&this._lineColor&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_CIRCLE_LINES_CMD_ENCODER_.getPtrID(),$.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineWidth=e,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var _=0;_<this._points.length;_++)this._linePoints.push(this._points[_]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Te.createLine2(this._linePoints,this._line_ibArray,e,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;var i=this._line_vertNum;(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(i-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;for(var r=this.line_ibBuffer._int16Data,a=0,n=0;n<3*(this._line_vertNum-2);n++)r[a++]=this._line_ibArray[n];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*i*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var s=l.create(this._lineColor),o=s.numColor,h=this.line_vbBuffer._float32Data,u=this.line_vbBuffer._int32Data,c=0;for(_=0;_<this._line_vertNum;_++)h[c++]=this._line_vbArray[2*_]+this.x,h[c++]=this._line_vbArray[2*_+1]+this.y,u[c++]=o;var f=this._paramData._int32Data;f[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),f[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),f[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,f[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,$.syncBufferToRenderThread(this.line_vbBuffer),$.syncBufferToRenderThread(this.line_ibBuffer),$.syncBufferToRenderThread(this._paramData)}),t.create=function(e,_,i,r,a,n){var s=O.getItemByClass("DrawCircleCmd",t);s._graphicsCmdEncoder=this._commandEncoder,t._DRAW_CIRCLE_LINES_CMD_ENCODER_||(t._DRAW_CIRCLE_LINES_CMD_ENCODER_=$.instance.createCommandEncoder(140,32,!0),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWVG),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.useVDO(_e.VDO_MESHVG),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINE_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_VB_SIZE_POS_,4*t._PARAM_LINE_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINE_IB_SIZE_POS_,4*t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_CIRCLE_LINES_CMD_ENCODER_)),t._DRAW_CIRCLE_CMD_ENCODER_||(t._DRAW_CIRCLE_CMD_ENCODER_=$.instance.createCommandEncoder(88,32,!0),t._DRAW_CIRCLE_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWVG),t._DRAW_CIRCLE_CMD_ENCODER_.useVDO(_e.VDO_MESHVG),t._DRAW_CIRCLE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_CIRCLE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_CIRCLE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_CIRCLE_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_CIRCLE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CIRCLE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_CIRCLE_CMD_ENCODER_)),s._paramData||(s._paramData=new ParamData(72,!0)),s._x=e,s._y=_,s._radius=i,s._fillColor=r,s._lineColor=a,s._lineWidth=n,s._points=s._arc(0,0,i),s._vertNum=s._points.length/2;var o=s._vertNum,h=0,u=s._vertNum-2;(!s.ibBuffer||s.ibBuffer.getByteLength()<3*u*2)&&(s.ibBuffer=new ParamData(3*u*2,!0,!0)),s._ibSize=3*u*2;for(var c=s.ibBuffer._int16Data,f=0,d=0;u>d;d++)c[f++]=h,c[f++]=d+1+h,c[f++]=d+2+h;var E=l.create(r),A=E.numColor;(!s.vbBuffer||s.vbBuffer.getByteLength()<3*s._vertNum*4)&&(s.vbBuffer=new ParamData(3*o*4,!0)),s._vbSize=3*s._vertNum*4;for(var D=s.vbBuffer._float32Data,R=s.vbBuffer._int32Data,m=0,T=0;T<s._vertNum;T++)D[m++]=s._points[2*T]+e,D[m++]=s._points[2*T+1]+_,R[m++]=A;var P=0;for(T=0;T<s._points.length;T++)s._linePoints.push(s._points[T]);if(s._linePoints.push(s._points[0]),s._linePoints.push(s._points[1]),a){Te.createLine2(s._linePoints,s._line_ibArray,n,0,s._line_vbArray,!1),s._line_vertNum=s._linePoints.length,P=s._line_vertNum,(!s.line_ibBuffer||s.line_ibBuffer.getByteLength()<3*(s._line_vertNum-2)*2)&&(s.line_ibBuffer=new ParamData(3*(P-2)*2,!0,!0)),s._line_ibSize=3*(s._line_vertNum-2)*2;var v=s.line_ibBuffer._int16Data;f=0;for(var p=0;p<3*(s._line_vertNum-2);p++)v[f++]=s._line_ibArray[p];(!s.line_vbBuffer||s.line_vbBuffer.getByteLength()<3*s._line_vertNum*4)&&(s.line_vbBuffer=new ParamData(3*P*4,!0)),s._line_vbSize=3*s._line_vertNum*4;var C=l.create(a),M=C.numColor,S=s.line_vbBuffer._float32Data,g=s.line_vbBuffer._int32Data;for(m=0,T=0;T<s._line_vertNum;T++)S[m++]=s._line_vbArray[2*T]+e,S[m++]=s._line_vbArray[2*T+1]+_,g[m++]=M}else{s._lineWidth=1;var y="#FFFFFF";for(Te.createLine2(s._linePoints,s._line_ibArray,s._lineWidth,0,s._line_vbArray,!1),s._line_vertNum=s._linePoints.length,P=s._line_vertNum,(!s.line_ibBuffer||s.line_ibBuffer.getByteLength()<3*(s._line_vertNum-2)*2)&&(s.line_ibBuffer=new ParamData(3*(P-2)*2,!0,!0)),s._line_ibSize=3*(s._line_vertNum-2)*2,v=s.line_ibBuffer._int16Data,f=0,p=0;p<3*(s._line_vertNum-2);p++)v[f++]=s._line_ibArray[p];for((!s.line_vbBuffer||s.line_vbBuffer.getByteLength()<3*s._line_vertNum*4)&&(s.line_vbBuffer=new ParamData(3*P*4,!0)),s._line_vbSize=3*s._line_vertNum*4,C=l.create(y),M=C.numColor,S=s.line_vbBuffer._float32Data,g=s.line_vbBuffer._int32Data,m=0,T=0;T<s._line_vertNum;T++)S[m++]=s._line_vbArray[2*T]+e,S[m++]=s._line_vbArray[2*T+1]+_,g[m++]=M}var L=s._paramData._float32Data,b=s._paramData._int32Data;return b[0]=1,b[1]=32,b[t._PARAM_VB_POS_]=s.vbBuffer.getPtrID(),b[t._PARAM_IB_POS_]=s.ibBuffer.getPtrID(),b[t._PARAM_VB_SIZE_POS_]=s._vbSize,b[t._PARAM_IB_SIZE_POS_]=s._ibSize,b[t._PARAM_VB_OFFSET_POS_]=0,b[t._PARAM_IB_OFFSET_POS_]=0,b[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,$.syncBufferToRenderThread(s.vbBuffer),$.syncBufferToRenderThread(s.ibBuffer),b[t._PARAM_LINE_VB_POS_]=s.line_vbBuffer.getPtrID(),b[t._PARAM_LINE_IB_POS_]=s.line_ibBuffer.getPtrID(),L[t._PARAM_LINECOLOR_POS_]=a,L[t._PARAM_LINEWIDTH_POS_]=n,b[t._PARAM_LINE_VB_SIZE_POS_]=s._line_vbSize,b[t._PARAM_LINE_IB_SIZE_POS_]=s._line_ibSize,b[t._PARAM_LINE_VB_OFFSET_POS_]=0,b[t._PARAM_LINE_IB_OFFSET_POS_]=0,b[t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_]=0,$.syncBufferToRenderThread(s.line_vbBuffer),$.syncBufferToRenderThread(s.line_ibBuffer),$.syncBufferToRenderThread(s._paramData),s._cmdCurrentPos=a?s._graphicsCmdEncoder.useCommandEncoder(t._DRAW_CIRCLE_LINES_CMD_ENCODER_.getPtrID(),s._paramData.getPtrID(),-1):s._graphicsCmdEncoder.useCommandEncoder(t._DRAW_CIRCLE_CMD_ENCODER_.getPtrID(),s._paramData.getPtrID(),-1),$.syncBufferToRenderThread(s._graphicsCmdEncoder),s},t.ID="DrawCircle",t._DRAW_CIRCLE_CMD_ENCODER_=null,t._DRAW_CIRCLE_LINES_CMD_ENCODER_=null,t._PARAM_VB_POS_=2,t._PARAM_IB_POS_=3,t._PARAM_LINE_VB_POS_=4,t._PARAM_LINE_IB_POS_=5,t._PARAM_LINECOLOR_POS_=6,t._PARAM_LINEWIDTH_POS_=7,t._PARAM_VB_SIZE_POS_=8,t._PARAM_IB_SIZE_POS_=9,t._PARAM_LINE_VB_SIZE_POS_=10,t._PARAM_LINE_IB_SIZE_POS_=11,t._PARAM_VB_OFFSET_POS_=12,t._PARAM_IB_OFFSET_POS_=13,t._PARAM_LINE_VB_OFFSET_POS_=14,t._PARAM_LINE_IB_OFFSET_POS_=15,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=16,t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_=17,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._x=0,this._y=0,this._points=[],this._lineColor=null,this._lineWidth=0/0,this.lastOriX=0,this.lastOriY=0,this.tArray=[],this._vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this._ibSize=0,this._vbSize=0,this._ibArray=[],this._vbArray=[]}r(t,"laya.layagl.cmdNative.DrawCurvesCmdNative");var e=t.prototype;return e._getPoints=function(t){var e=[];this._points.push(t[0]),this._points.push(t[1]);for(var _=2,i=t.length;i>_;)this._quadraticCurveTo(e,t[_++],t[_++],t[_++],t[_++]);return e},e._quadraticCurveTo=function(t,e,_,i,r){var a=n.I;0==this.tArray.length?(this.lastOriX=this._points[0],this.lastOriY=this._points[1]):(this.lastOriX=this.tArray[this.tArray.length-2],this.lastOriY=this.tArray[this.tArray.length-1]),this.tArray=a.getBezierPoints([this.lastOriX,this.lastOriY,e,_,i,r],30,2);for(var s=2,o=this.tArray.length;o>s;s++)t.push(this.tArray[s])},e.recover=function(){this._points=null,this._lineColor=null,O.recover("DrawCurvesCmd",this)},a(0,e,"lineColor",function(){return this._lineColor},function(t){this._lineColor=t;for(var e=l.create(this._lineColor),_=e.numColor,i=this.vbBuffer._int32Data,r=0,a=0;a<this._vertNum;a++)r++,r++,i[r++]=_;$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"points",function(){return this._points},function(e){this._points.length=0,this.lastOriX=0,this.lastOriY=0,this._points=this._getPoints(e),this._ibArray.length=0,this._vbArray.length=0,Te.createLine2(this._points,this._ibArray,this.lineWidth,0,this._vbArray,!1);var _=l.create(this._lineColor),i=_.numColor;this._vertNum=this._points.length;var r=this._vertNum;(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*r*4,!0)),this._vbSize=3*this._vertNum*4;for(var a=this.vbBuffer._float32Data,n=this.vbBuffer._int32Data,s=0,o=0;o<this._vertNum;o++)a[s++]=this._vbArray[2*o]+this.x,a[s++]=this._vbArray[2*o+1]+this.y,n[s++]=i;(!this.ibBuffer||this.ibBuffer.getByteLength()<3*(this._vertNum-2)*2)&&(this.ibBuffer=new ParamData(3*(r-2)*2,!0,!0)),this._ibSize=3*(this._vertNum-2)*2;for(var h=this.ibBuffer._int16Data,u=0;u<3*(this._vertNum-2);u++)h[u]=this._ibArray[u];n=this._paramData._int32Data,n[t._PARAM_VB_SIZE_POS_]=this._vbSize,n[t._PARAM_IB_SIZE_POS_]=this._ibSize,$.syncBufferToRenderThread(this.ibBuffer),$.syncBufferToRenderThread(this.vbBuffer),$.syncBufferToRenderThread(this._paramData)}),a(0,e,"cmdID",function(){return"DrawCurves"}),a(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)e[_++]=this._vbArray[2*i]+this._x,_++,_++;$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)_++,e[_++]=this._vbArray[2*i+1]+this._y,_++;$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"lineWidth",function(){return this._lineWidth},function(t){this._lineWidth=t,this._ibArray.length=0,this._vbArray.length=0,Te.createLine2(this._points,this._ibArray,this._lineWidth,0,this._vbArray,!1);for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)e[_++]=this._vbArray[2*i]+this.x,e[_++]=this._vbArray[2*i+1]+this.y,_++;$.syncBufferToRenderThread(this.vbBuffer)}),t.create=function(e,_,i,r,a){var n=O.getItemByClass("DrawCurvesCmd",t);n._graphicsCmdEncoder=this._commandEncoder,t._DRAW_CURVES_CMD_ENCODER_||(t._DRAW_CURVES_CMD_ENCODER_=$.instance.createCommandEncoder(88,32,!0),t._DRAW_CURVES_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWVG),t._DRAW_CURVES_CMD_ENCODER_.useVDO(_e.VDO_MESHVG),t._DRAW_CURVES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_CURVES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_CURVES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_CURVES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_CURVES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CURVES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_CURVES_CMD_ENCODER_)),n._paramData||(n._paramData=new ParamData(32,!0)),n._x=e,n._y=_,n._lineColor=r,n._lineWidth=a,n._points=n._getPoints(i),Te.createLine2(n._points,n._ibArray,a,0,n._vbArray,!1);var s=l.create(r),o=s.numColor;n._vertNum=n._points.length;var h=n._vertNum;(!n.vbBuffer||n.vbBuffer.getByteLength()<3*n._vertNum*4)&&(n.vbBuffer=new ParamData(3*h*4,!0)),n._vbSize=3*n._vertNum*4;for(var u=n.vbBuffer._float32Data,c=n.vbBuffer._int32Data,f=0,d=0;d<n._vertNum;d++)u[f++]=n._vbArray[2*d]+e,u[f++]=n._vbArray[2*d+1]+_,c[f++]=o;(!n.ibBuffer||n.ibBuffer.getByteLength()<3*(n._vertNum-2)*2)&&(n.ibBuffer=new ParamData(3*(h-2)*2,!0,!0)),n._ibSize=3*(n._vertNum-2)*2;for(var E=n.ibBuffer._int16Data,A=0;A<3*(n._vertNum-2);A++)E[A]=n._ibArray[A];n._paramData._float32Data;return c=n._paramData._int32Data,c[0]=1,c[t._PARAM_VB_POS_]=n.vbBuffer.getPtrID(),c[t._PARAM_IB_POS_]=n.ibBuffer.getPtrID(),c[t._PARAM_VB_SIZE_POS_]=n._vbSize,c[t._PARAM_IB_SIZE_POS_]=n._ibSize,c[t._PARAM_VB_OFFSET_POS_]=0,c[t._PARAM_IB_OFFSET_POS_]=0,c[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,$.syncBufferToRenderThread(n.vbBuffer),$.syncBufferToRenderThread(n.ibBuffer),$.syncBufferToRenderThread(n._paramData),n._graphicsCmdEncoder.useCommandEncoder(t._DRAW_CURVES_CMD_ENCODER_.getPtrID(),n._paramData.getPtrID(),-1),$.syncBufferToRenderThread(n._graphicsCmdEncoder),n},t.ID="DrawCurves",t._DRAW_CURVES_CMD_ENCODER_=null,t._PARAM_VB_POS_=1,t._PARAM_IB_POS_=2,t._PARAM_VB_SIZE_POS_=3,t._PARAM_IB_SIZE_POS_=4,t._PARAM_VB_OFFSET_POS_=5,t._PARAM_IB_OFFSET_POS_=6,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=7,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._texture=null,this._x=0/0,this._y=0/0,this._width=0/0,this._height=0/0}r(t,"laya.layagl.cmdNative.DrawImageCmdNative");var e=t.prototype;return e.recover=function(){this._graphicsCmdEncoder=null,O.recover("DrawImageCmd",this)},a(0,e,"cmdID",function(){return"DrawImage"}),a(0,e,"y",function(){return this._y},function(e){this._y=e;var _=this._paramData._float32Data;_[t._PARAM_VB_POS_+1]=this._y,_[t._PARAM_VB_POS_+7]=this._y,_[t._PARAM_VB_POS_+13]=this._y+this._height,_[t._PARAM_VB_POS_+19]=this._y+this._height,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"texture",function(){return this._texture},function(e){this._texture=e,this._paramData._int32Data[t._PARAM_TEXTURE_POS_]=this._texture.bitmap._glTexture.id;var _=this._paramData._float32Data,i=this._texture.uv;_[t._PARAM_VB_POS_+2]=i[0],_[t._PARAM_VB_POS_+3]=i[1],_[t._PARAM_VB_POS_+8]=i[2],_[t._PARAM_VB_POS_+9]=i[3],_[t._PARAM_VB_POS_+14]=i[4],_[t._PARAM_VB_POS_+15]=i[5],_[t._PARAM_VB_POS_+20]=i[6],_[t._PARAM_VB_POS_+21]=i[7],$.syncBufferToRenderThread(this._paramData)}),a(0,e,"width",function(){return this._width},function(e){this._width=e;var _=this._paramData._float32Data;_[t._PARAM_VB_POS_]=this._x,_[t._PARAM_VB_POS_+6]=this._x+this._width,_[t._PARAM_VB_POS_+12]=this._x+this._width,_[t._PARAM_VB_POS_+18]=this._x,$.syncBufferToRenderThread(this._paramData)
}),a(0,e,"x",function(){return this._x},function(e){this._x=e;var _=this._paramData._float32Data;_[t._PARAM_VB_POS_]=this._x,_[t._PARAM_VB_POS_+6]=this._x+this._width,_[t._PARAM_VB_POS_+12]=this._x+this._width,_[t._PARAM_VB_POS_+18]=this._x,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"height",function(){return this._height},function(e){this._height=e;var _=this._paramData._float32Data;_[t._PARAM_VB_POS_+1]=this._y,_[t._PARAM_VB_POS_+7]=this._y,_[t._PARAM_VB_POS_+13]=this._y+this._height,_[t._PARAM_VB_POS_+19]=this._y+this._height,$.syncBufferToRenderThread(this._paramData)}),t.create=function(e,_,i,r,a){var n=O.getItemByClass("DrawImageCmd",t);n._graphicsCmdEncoder=this._commandEncoder,t._DRAW_IMAGE_CMD_ENCODER_||(t._DRAW_IMAGE_CMD_ENCODER_=$.instance.createCommandEncoder(124,32,!0),t._DRAW_IMAGE_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWTEXTURE),t._DRAW_IMAGE_CMD_ENCODER_.useVDO(_e.VDO_MESHQUADTEXTURE),t._DRAW_IMAGE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_IMAGE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_IMAGE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_IMAGE_CMD_ENCODER_.uniformTextureByParamData(0,4,4*t._PARAM_TEXTURE_POS_),t._DRAW_IMAGE_CMD_ENCODER_.blendFuncByGlobalValue(_e.GLOBALVALUE_BLENDFUNC_SRC,_e.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_IMAGE_CMD_ENCODER_.setRectMeshByParamData(12,4*t._PARAM_VB_POS_,16),t._DRAW_IMAGE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_IMAGE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_IMAGE_CMD_ENCODER_)),n._paramData||(n._paramData=new ParamData(116,!0)),n._texture=e,n._x=_,n._y=i,n._width=r,n._height=a;var s=n._paramData._float32Data,o=n._paramData._int32Data;o[0]=3,o[1]=33984,o[t._PARAM_TEXTURE_POS_]=e.bitmap._glTexture.id,o[3]=1,o[4]=96;var h=0!=r?r:e.bitmap.width,u=0!=a?a:e.bitmap.height,l=e.uv,c=t._PARAM_VB_POS_;return s[c++]=_,s[c++]=i,s[c++]=l[0],s[c++]=l[1],o[c++]=4294967295,o[c++]=4294967295,s[c++]=_+h,s[c++]=i,s[c++]=l[2],s[c++]=l[3],o[c++]=4294967295,o[c++]=4294967295,s[c++]=_+h,s[c++]=i+u,s[c++]=l[4],s[c++]=l[5],o[c++]=4294967295,o[c++]=4294967295,s[c++]=_,s[c++]=i+u,s[c++]=l[6],s[c++]=l[7],o[c++]=4294967295,o[c++]=4294967295,$.syncBufferToRenderThread(n._paramData),n._graphicsCmdEncoder.useCommandEncoder(t._DRAW_IMAGE_CMD_ENCODER_.getPtrID(),n._paramData.getPtrID(),-1),$.syncBufferToRenderThread(n._graphicsCmdEncoder),n},t.ID="DrawImage",t._DRAW_IMAGE_CMD_ENCODER_=null,t._PARAM_TEXTURE_POS_=2,t._PARAM_VB_POS_=5,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._fromX=0/0,this._fromY=0/0,this._toX=0/0,this._toY=0/0,this._lineColor=null,this._lineWidth=0/0,this._vid=0}r(t,"laya.layagl.cmdNative.DrawLineCmdNative");var e=t.prototype;return e.recover=function(){O.recover("DrawLineCmd",this)},a(0,e,"lineColor",function(){return this._lineColor},function(e){this._lineColor=e;var _=l.create(this.lineColor),i=_.numColor,r=this._paramData._int32Data,a=t._PARAM_VB_POS_;a++,a++,r[a++]=i,a++,a++,r[a++]=i,a++,a++,r[a++]=i,a++,a++,r[a++]=i,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"cmdID",function(){return"DrawLine"}),a(0,e,"toY",function(){return this._toY},function(e){this._toY=e;var _=[this._fromX,this._fromY,this._toX,this._toY],i=[],r=[];Te.createLine2(_,r,this._lineWidth,0,i,!1);var a=this._paramData._float32Data,n=(this._paramData._int32Data,this._paramData._int16Data),s=t._PARAM_VB_POS_;a[s++]=i[0],a[s++]=i[1],s++,a[s++]=i[2],a[s++]=i[3],s++,a[s++]=i[4],a[s++]=i[5],s++,a[s++]=i[6],a[s++]=i[7],s++;var o=2*t._PARAM_IB_POS_;n[o++]=r[0],n[o++]=r[1],n[o++]=r[2],n[o++]=r[3],n[o++]=r[4],n[o++]=r[5],$.syncBufferToRenderThread(this._paramData)}),a(0,e,"fromX",function(){return this._fromX},function(e){this._fromX=e;var _=[this._fromX,this._fromY,this._toX,this._toY],i=[],r=[];Te.createLine2(_,r,this._lineWidth,0,i,!1);var a=this._paramData._float32Data,n=(this._paramData._int32Data,this._paramData._int16Data),s=t._PARAM_VB_POS_;a[s++]=i[0],a[s++]=i[1],s++,a[s++]=i[2],a[s++]=i[3],s++,a[s++]=i[4],a[s++]=i[5],s++,a[s++]=i[6],a[s++]=i[7],s++;var o=2*t._PARAM_IB_POS_;n[o++]=r[0],n[o++]=r[1],n[o++]=r[2],n[o++]=r[3],n[o++]=r[4],n[o++]=r[5],$.syncBufferToRenderThread(this._paramData)}),a(0,e,"vid",function(){return this._vid},function(t){this._vid=t}),a(0,e,"toX",function(){return this._toX},function(e){this._toX=e;var _=[this._fromX,this._fromY,this._toX,this._toY],i=[],r=[];Te.createLine2(_,r,this._lineWidth,0,i,!1);var a=this._paramData._float32Data,n=(this._paramData._int32Data,this._paramData._int16Data),s=t._PARAM_VB_POS_;a[s++]=i[0],a[s++]=i[1],s++,a[s++]=i[2],a[s++]=i[3],s++,a[s++]=i[4],a[s++]=i[5],s++,a[s++]=i[6],a[s++]=i[7],s++;var o=2*t._PARAM_IB_POS_;n[o++]=r[0],n[o++]=r[1],n[o++]=r[2],n[o++]=r[3],n[o++]=r[4],n[o++]=r[5],$.syncBufferToRenderThread(this._paramData)}),a(0,e,"fromY",function(){return this._fromY},function(e){this._fromY=e;var _=[this._fromX,this._fromY,this._toX,this._toY],i=[],r=[];Te.createLine2(_,r,this._lineWidth,0,i,!1);var a=this._paramData._float32Data,n=(this._paramData._int32Data,this._paramData._int16Data),s=t._PARAM_VB_POS_;a[s++]=i[0],a[s++]=i[1],s++,a[s++]=i[2],a[s++]=i[3],s++,a[s++]=i[4],a[s++]=i[5],s++,a[s++]=i[6],a[s++]=i[7],s++;var o=2*t._PARAM_IB_POS_;n[o++]=r[0],n[o++]=r[1],n[o++]=r[2],n[o++]=r[3],n[o++]=r[4],n[o++]=r[5],$.syncBufferToRenderThread(this._paramData)}),a(0,e,"lineWidth",function(){return this._lineWidth},function(e){this._lineWidth=e;var _=[this._fromX,this._fromY,this._toX,this._toY],i=[],r=[];Te.createLine2(_,r,this.lineWidth,0,i,!1);var a=this._paramData._float32Data,n=(this._paramData._int32Data,this._paramData._int16Data),s=t._PARAM_VB_POS_;a[s++]=i[0],a[s++]=i[1],s++,a[s++]=i[2],a[s++]=i[3],s++,a[s++]=i[4],a[s++]=i[5],s++,a[s++]=i[6],a[s++]=i[7],s++;var o=2*t._PARAM_IB_POS_;n[o++]=r[0],n[o++]=r[1],n[o++]=r[2],n[o++]=r[3],n[o++]=r[4],n[o++]=r[5],$.syncBufferToRenderThread(this._paramData)}),t.create=function(e,_,i,r,a,n,s){var o=O.getItemByClass("DrawLineCmd",t);o._graphicsCmdEncoder=this._commandEncoder,t._DRAW_LINE_CMD_ENCODER_||(t._DRAW_LINE_CMD_ENCODER_=$.instance.createCommandEncoder(84,32,!0),t._DRAW_LINE_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWVG),t._DRAW_LINE_CMD_ENCODER_.useVDO(_e.VDO_MESHVG),t._DRAW_LINE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_LINE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_LINE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_LINE_CMD_ENCODER_.setMeshByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,8,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_LINE_CMD_ENCODER_)),o._paramData||(o._paramData=new ParamData(96,!0)),o._fromX=e,o._fromY=_,o._toX=i,o._toY=r,o._lineColor=a,o._lineWidth=n,o._vid=s;var h=l.create(a),u=h.numColor,c=[e,_,i,r],f=[],d=[];Te.createLine2(c,d,n,0,f,!1);var E=o._paramData._float32Data,A=o._paramData._int32Data,D=o._paramData._int16Data;A[0]=1,A[1]=48,A[2]=12,A[t._PARAM_VB_OFFSET_POS_]=0,A[t._PARAM_IB_OFFSET_POS_]=0,A[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0;var R=t._PARAM_VB_POS_;E[R++]=f[0],E[R++]=f[1],A[R++]=u,E[R++]=f[2],E[R++]=f[3],A[R++]=u,E[R++]=f[4],E[R++]=f[5],A[R++]=u,E[R++]=f[6],E[R++]=f[7],A[R++]=u;var m=2*t._PARAM_IB_POS_;return D[m++]=d[0],D[m++]=d[1],D[m++]=d[2],D[m++]=d[3],D[m++]=d[4],D[m++]=d[5],E[t._PARAM_LINECOLOR_POS_]=a?a:4278190335,E[t._PARAM_LINEWIDTH_POS_]=n,E[t._PARAM_VID_POS_]=s,$.syncBufferToRenderThread(o._paramData),o._graphicsCmdEncoder.useCommandEncoder(t._DRAW_LINE_CMD_ENCODER_.getPtrID(),o._paramData.getPtrID(),-1),$.syncBufferToRenderThread(o._graphicsCmdEncoder),o},t.ID="DrawLine",t._DRAW_LINE_CMD_ENCODER_=null,t._PARAM_VB_POS_=3,t._PARAM_IB_POS_=15,t._PARAM_LINECOLOR_POS_=18,t._PARAM_LINEWIDTH_POS_=19,t._PARAM_VID_POS_=20,t._PARAM_VB_OFFSET_POS_=21,t._PARAM_IB_OFFSET_POS_=22,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=23,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._x=0/0,this._y=0/0,this._points=null,this._lineColor=null,this._lineWidth=0/0,this._vid=0,this._vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this._ibSize=0,this._vbSize=0,this._ibArray=[],this._vbArray=[]}r(t,"laya.layagl.cmdNative.DrawLinesCmdNative");var e=t.prototype;return e.recover=function(){this._points=null,this._lineColor=null,O.recover("DrawLinesCmd",this)},a(0,e,"lineColor",function(){return this._lineColor},function(t){this._lineColor=t;for(var e=l.create(this._lineColor),_=e.numColor,i=this.vbBuffer._int32Data,r=0,a=0;a<this._vertNum;a++)r++,r++,i[r++]=_;$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"points",function(){return this._points},function(e){this._points=e,this._ibArray.length=0,this._vbArray.length=0,Te.createLine2(this._points,this._ibArray,this._lineWidth,0,this._vbArray,!1);var _=l.create(this._lineColor),i=_.numColor;this._vertNum=this._points.length;var r=this._vertNum;(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*r*4,!0)),this._vbSize=3*this._vertNum*4;for(var a=this.vbBuffer._float32Data,n=this.vbBuffer._int32Data,s=0,o=0;o<this._vertNum;o++)a[s++]=this._vbArray[2*o]+this.x,a[s++]=this._vbArray[2*o+1]+this.y,n[s++]=i;(!this.ibBuffer||this.ibBuffer.getByteLength()<3*(this._vertNum-2)*2)&&(this.ibBuffer=new ParamData(3*(r-2)*2,!0,!0)),this._ibSize=3*(this._vertNum-2)*2;for(var h=this.ibBuffer._int16Data,u=0;u<3*(this._vertNum-2);u++)h[u]=this._ibArray[u];n=this._paramData._int32Data,n[t._PARAM_VB_SIZE_POS_]=this._vbSize,n[t._PARAM_IB_SIZE_POS_]=this._ibSize,$.syncBufferToRenderThread(this.ibBuffer),$.syncBufferToRenderThread(this.vbBuffer),$.syncBufferToRenderThread(this._paramData)}),a(0,e,"cmdID",function(){return"DrawLines"}),a(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)e[_++]=this._vbArray[2*i]+this._x,_++,_++;$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"vid",function(){return this._vid},function(t){this._vid=t}),a(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)_++,e[_++]=this._vbArray[2*i+1]+this._y,_++;$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"lineWidth",function(){return this._lineWidth},function(t){this._lineWidth=t,this._ibArray.length=0,this._vbArray.length=0,Te.createLine2(this._points,this._ibArray,this._lineWidth,0,this._vbArray,!1);for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)e[_++]=this._vbArray[2*i]+this.x,e[_++]=this._vbArray[2*i+1]+this.y,_++;$.syncBufferToRenderThread(this.vbBuffer)}),t.create=function(e,_,i,r,a,n){var s=O.getItemByClass("DrawLinesCmd",t);s._graphicsCmdEncoder=this._commandEncoder,t._DRAW_LINES_CMD_ENCODER_||(t._DRAW_LINES_CMD_ENCODER_=$.instance.createCommandEncoder(88,32,!0),t._DRAW_LINES_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWVG),t._DRAW_LINES_CMD_ENCODER_.useVDO(_e.VDO_MESHVG),t._DRAW_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_LINES_CMD_ENCODER_)),s._paramData||(s._paramData=new ParamData(44,!0)),s._x=e,s._y=_,s._points=i,s._lineColor=r,s._lineWidth=a,s._vid=n,Te.createLine2(i,s._ibArray,a,0,s._vbArray,!1);var o=l.create(r),h=o.numColor;s._vertNum=i.length;var u=s._vertNum;(!s.vbBuffer||s.vbBuffer.getByteLength()<3*s._vertNum*4)&&(s.vbBuffer=new ParamData(3*u*4,!0)),s._vbSize=3*s._vertNum*4;for(var c=s.vbBuffer._float32Data,f=s.vbBuffer._int32Data,d=0,E=0;E<s._vertNum;E++)c[d++]=s._vbArray[2*E]+e,c[d++]=s._vbArray[2*E+1]+_,f[d++]=h;(!s.ibBuffer||s.ibBuffer.getByteLength()<3*(s._vertNum-2)*2)&&(s.ibBuffer=new ParamData(3*(u-2)*2,!0,!0)),s._ibSize=3*(s._vertNum-2)*2;for(var A=s.ibBuffer._int16Data,D=0;D<3*(s._vertNum-2);D++)A[D]=s._ibArray[D];var R=s._paramData._float32Data;return f=s._paramData._int32Data,f[0]=1,f[t._PARAM_VB_POS_]=s.vbBuffer.getPtrID(),f[t._PARAM_IB_POS_]=s.ibBuffer.getPtrID(),R[t._PARAM_LINECOLOR_POS_]=r?r:4278190335,R[t._PARAM_LINEWIDTH_POS_]=a,R[t._PARAM_VID_POS_]=n,f[t._PARAM_VB_SIZE_POS_]=s._vbSize,f[t._PARAM_IB_SIZE_POS_]=s._ibSize,f[t._PARAM_VB_OFFSET_POS_]=0,f[t._PARAM_IB_OFFSET_POS_]=0,f[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,$.syncBufferToRenderThread(s.vbBuffer),$.syncBufferToRenderThread(s.ibBuffer),$.syncBufferToRenderThread(s._paramData),s._graphicsCmdEncoder.useCommandEncoder(t._DRAW_LINES_CMD_ENCODER_.getPtrID(),s._paramData.getPtrID(),-1),$.syncBufferToRenderThread(s._graphicsCmdEncoder),s},t.ID="DrawLines",t._DRAW_LINES_CMD_ENCODER_=null,t._PARAM_VB_POS_=1,t._PARAM_IB_POS_=2,t._PARAM_LINECOLOR_POS_=3,t._PARAM_LINEWIDTH_POS_=4,t._PARAM_VID_POS_=5,t._PARAM_VB_SIZE_POS_=6,t._PARAM_IB_SIZE_POS_=7,t._PARAM_VB_OFFSET_POS_=8,t._PARAM_IB_OFFSET_POS_=9,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=10,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this.vbBuffer=null,this._template=null,this._floatCountPerVertex=29,this._firstNewElement=0,this._firstFreeElement=0,this._firstActiveElement=0,this._firstRetiredElement=0,this._maxParticleNum=0}r(t,"laya.layagl.cmdNative.DrawParticleCmdNative");var e=t.prototype;return e.updateParticle=function(){if(this._template.texture){this._template.updateParticleForNative();var e=this._template.sv,_=this._paramData._int32Data,i=this._paramData._float32Data;i[t._PARAM_CURRENTTIME_POS_]=e.u_CurrentTime,i[t._PARAM_DURATION_POS_]=e.u_Duration,i[t._PARAM_ENDVEL_POS_]=e.u_EndVelocity,i[t._PARAM_GRAVITY_POS_]=e.u_Gravity[0],i[t._PARAM_GRAVITY_POS_+1]=e.u_Gravity[1],i[t._PARAM_GRAVITY_POS_+2]=e.u_Gravity[2],e.size[0]=ye.width,e.size[1]=ye.height,i[t._PARAM_SIZE_POS_]=e.size[0],i[t._PARAM_SIZE_POS_+1]=e.size[1],i[t._PARAM_MAT_POS_]=1,i[t._PARAM_MAT_POS_+1]=0,i[t._PARAM_MAT_POS_+2]=0,i[t._PARAM_MAT_POS_+3]=0,i[t._PARAM_MAT_POS_+4]=0,i[t._PARAM_MAT_POS_+5]=1,i[t._PARAM_MAT_POS_+6]=0,i[t._PARAM_MAT_POS_+7]=0,i[t._PARAM_MAT_POS_+8]=0,i[t._PARAM_MAT_POS_+9]=0,i[t._PARAM_MAT_POS_+10]=1,i[t._PARAM_MAT_POS_+11]=0,i[t._PARAM_MAT_POS_+12]=0,i[t._PARAM_MAT_POS_+13]=0,i[t._PARAM_MAT_POS_+14]=0,i[t._PARAM_MAT_POS_+15]=1,_[t._PARAM_TEXTURE_LOC_POS_]=33984,_[t._PARAM_TEXTURE_POS_]=this._template.texture.bitmap._glTexture.id,this.vbBuffer=this._template.getConchMesh(),this._firstNewElement=this._template.getFirstNewElement(),this._firstFreeElement=this._template.getFirstFreeElement(),this._firstActiveElement=this._template.getFirstActiveElement(),this._firstRetiredElement=this._template.getFirstRetiredElement();var r=0,a=0,n=0,s=0,o=0,h=0;this._firstActiveElement!=this._firstFreeElement&&(this._firstActiveElement<this._firstFreeElement?(_[t._PARAM_REGDATA_POS_]=1,o=this._firstFreeElement-this._firstActiveElement,r=(this._firstFreeElement-this._firstActiveElement)*this._floatCountPerVertex*4*4,n=this._firstActiveElement*this._floatCountPerVertex*4*4):(_[t._PARAM_REGDATA_POS_]=0,o=this._maxParticleNum-this._firstActiveElement,r=(this._maxParticleNum-this._firstActiveElement)*this._floatCountPerVertex*4*4,n=this._firstActiveElement*this._floatCountPerVertex*4*4,this._firstFreeElement>0?(h=this._firstFreeElement,a=this._firstFreeElement*this._floatCountPerVertex*4*4,s=0):_[t._PARAM_REGDATA_POS_]=1)),_[t._PARAM_VB1_POS_]=this.vbBuffer.getPtrID(),_[t._PARAM_RECT1_NUM_POS_]=o,_[t._PARAM_VB1_SIZE_POS_]=r,_[t._PARAM_VB1_OFFSET_POS_]=n,$.syncBufferToRenderThread(this.vbBuffer),a>0&&(_[t._PARAM_VB2_POS_]=this.vbBuffer.getPtrID(),_[t._PARAM_RECT2_NUM_POS_]=h,_[t._PARAM_VB2_SIZE_POS_]=a,_[t._PARAM_VB2_OFFSET_POS_]=s),$.syncBufferToRenderThread(this._paramData),this._template.addDrawCounter()}},e.recover=function(){this._template=null,O.recover("DrawParticleCmd",this)},a(0,e,"cmdID",function(){return"DrawParticleCmd"}),t.create=function(e){var _=O.getItemByClass("DrawParticleCmd",t);_._graphicsCmdEncoder=this._commandEncoder,t._DRAW_PARTICLE_CMD_ENCODER_||(t._DRAW_PARTICLE_CMD_ENCODER_=$.instance.createCommandEncoder(84,32,!0),t._DRAW_PARTICLE_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWPARTICLE),t._DRAW_PARTICLE_CMD_ENCODER_.useVDO(_e.VDO_MESHPARTICLE),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(0,4*t._PARAM_CURRENTTIME_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(1,4*t._PARAM_DURATION_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(2,4*t._PARAM_ENDVEL_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(3,4*t._PARAM_GRAVITY_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(4,4*t._PARAM_SIZE_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(5,4*t._PARAM_MAT_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformTextureByParamData(4*t._PARAM_TEXTURE_UNIFORMLOC_POS_,4*t._PARAM_TEXTURE_LOC_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.setRectMeshExByParamData(4*t._PARAM_RECT1_NUM_POS_,4*t._PARAM_VB1_POS_,4*t._PARAM_VB1_SIZE_POS_,4*t._PARAM_VB1_OFFSET_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,1,7),t._DRAW_PARTICLE_CMD_ENCODER_.loadDataToRegByParamData(0,4*t._PARAM_REGDATA_POS_,4),t._DRAW_PARTICLE_CMD_ENCODER_.ifGreater0(0,2),t._DRAW_PARTICLE_CMD_ENCODER_.setRectMeshExByParamData(4*t._PARAM_RECT2_NUM_POS_,4*t._PARAM_VB2_POS_,4*t._PARAM_VB2_SIZE_POS_,4*t._PARAM_VB2_OFFSET_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,1,7),$.syncBufferToRenderThread(t._DRAW_PARTICLE_CMD_ENCODER_)),_._paramData||(_._paramData=new ParamData(144,!0)),_._template=e,_._maxParticleNum=e.settings.maxPartices;var i=_._paramData._int32Data,r=(e._sv,_._paramData._float32Data),a=0;for(r[t._PARAM_CURRENTTIME_POS_]=-1,r[t._PARAM_DURATION_POS_]=-1,r[t._PARAM_ENDVEL_POS_]=-1,r[t._PARAM_GRAVITY_POS_]=-1,r[t._PARAM_GRAVITY_POS_+1]=-1,r[t._PARAM_GRAVITY_POS_+2]=-1,r[t._PARAM_SIZE_POS_]=-1,r[t._PARAM_SIZE_POS_+1]=-1,a=0;16>a;a++)r[t._PARAM_MAT_POS_+a]=-1;return i[t._PARAM_TEXTURE_LOC_POS_]=-1,i[t._PARAM_TEXTURE_POS_]=-1,i[t._PARAM_TEXTURE_UNIFORMLOC_POS_]=6,i[t._PARAM_REGDATA_POS_]=0,i[t._PARAM_VB1_POS_]=-1,i[t._PARAM_VB2_POS_]=-1,i[t._PARAM_VB1_SIZE_POS_]=-1,i[t._PARAM_VB2_SIZE_POS_]=-1,i[t._PARAM_RECT1_NUM_POS_]=-1,i[t._PARAM_RECT2_NUM_POS_]=-1,$.syncBufferToRenderThread(_._paramData),_._graphicsCmdEncoder.useCommandEncoder(t._DRAW_PARTICLE_CMD_ENCODER_.getPtrID(),_._paramData.getPtrID(),-1),$.syncBufferToRenderThread(_._graphicsCmdEncoder),_},t.ID="DrawParticleCmd",t._DRAW_PARTICLE_CMD_ENCODER_=null,t._PARAM_VB1_POS_=0,t._PARAM_VB2_POS_=1,t._PARAM_VB1_SIZE_POS_=2,t._PARAM_VB2_SIZE_POS_=3,t._PARAM_CURRENTTIME_POS_=4,t._PARAM_DURATION_POS_=5,t._PARAM_ENDVEL_POS_=6,t._PARAM_GRAVITY_POS_=7,t._PARAM_SIZE_POS_=10,t._PARAM_MAT_POS_=12,t._PARAM_TEXTURE_LOC_POS_=28,t._PARAM_TEXTURE_POS_=29,t._PARAM_REGDATA_POS_=30,t._PARAM_TEXTURE_UNIFORMLOC_POS_=31,t._PARAM_RECT1_NUM_POS_=32,t._PARAM_RECT2_NUM_POS_=33,t._PARAM_VB1_OFFSET_POS_=34,t._PARAM_VB2_OFFSET_POS_=35,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._graphicsCmdEncoder_fill=null,this._paramData_fill=null,this._x=0/0,this._y=0/0,this._paths=null,this._brush=null,this._pen=null,this._vertNum=0,this._startOriX=0,this._startOriY=0,this._lastOriX=0,this._lastOriY=0,this.SEGNUM=32,this.lines_ibBuffer=null,this.lines_vbBuffer=null,this._lines_ibSize=0,this._lines_vbSize=0,this.fill_ibBuffer=null,this.fill_vbBuffer=null,this._fill_ibSize=0,this._fill_vbSize=0,this._cmdCurrentPos=0,this._points=[],this._lines_ibArray=[],this._lines_vbArray=[],this._fill_ibArray=[],this._fill_vbArray=[]}r(t,"laya.layagl.cmdNative.DrawPathCmdNative");var e=t.prototype;return e._arcTo=function(t){var e=t[1],_=t[2],i=t[3],r=t[4],a=t[5],n=0,s=0,o=0,h=this._lastOriX-e,u=this._lastOriY-_,l=Math.sqrt(h*h+u*u);if(!(1e-6>=l)){var c=h/l,f=u/l,d=i-e,E=r-_,A=d*d+E*E,D=Math.sqrt(A);if(!(1e-6>=D)){var R=d/D,m=E/D,T=c+R,P=f+m,v=Math.sqrt(T*T+P*P);if(!(1e-6>=v)){var p=T/v,C=P/v,M=Math.acos(p*c+C*f),O=Math.PI/2-M;l=a/Math.tan(O);var S=l*c+e,g=l*f+_,y=Math.sqrt(l*l+a*a),L=e+p*y,b=_+C*y,B=c*m-f*R,I=0,x=0,N=0;if(B>=0){I=2*O;var F=I/this.SEGNUM;x=Math.sin(F),N=Math.cos(F)}else I=2*-O,F=I/this.SEGNUM,x=Math.sin(F),N=Math.cos(F);var w=this._lastOriX,V=this._lastOriY,U=S-L,W=g-b;for(n=0;n<this.SEGNUM;n++){var G=U*N+W*x,X=-U*x+W*N;s=G+L,o=X+b,(Math.abs(w-s)>.1||Math.abs(V-o)>.1)&&(this._points.push(s),this._points.push(o)),U=G,W=X}}}}},e.recover=function(){this._paths=null,this._brush=null,this._pen=null,O.recover("DrawPathCmd",this)},a(0,e,"cmdID",function(){return"DrawPath"}),a(0,e,"paths",function(){return this._paths},function(t){this._paths=t}),a(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.lines_vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)e[_++]=this._lines_vbArray[2*i]+t,_++,_++;$.syncBufferToRenderThread(this.lines_vbBuffer)}),a(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.lines_vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)_++,e[_++]=this._lines_vbArray[2*i+1]+t,_++;$.syncBufferToRenderThread(this.lines_vbBuffer)}),a(0,e,"brush",function(){return this._brush},function(e){this._brush||(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_LINES_FILL_CMD_ENCODER_.getPtrID(),$.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._brush=e;var _=this._vertNum,i=Pe.earcut(this._points,null,2);if(i.length>0){(!this.fill_ibBuffer||this.fill_ibBuffer.getByteLength()<2*i.length)&&(this.fill_ibBuffer=new ParamData(2*i.length,!0,!0)),this._fill_ibSize=2*i.length;for(var r=this.fill_ibBuffer._int16Data,a=0,n=0;n<i.length;n++)r[a++]=i[n]}var s=l.create(e.fillStyle),o=s.numColor;(!this.fill_vbBuffer||this.fill_vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.fill_vbBuffer=new ParamData(3*_*4,!0)),this._fill_vbSize=3*this._vertNum*4;for(var h=this.fill_vbBuffer._float32Data,u=this.fill_vbBuffer._int32Data,c=0,f=0;f<this._vertNum;f++)h[c++]=this._points[2*f]+this.x,h[c++]=this._points[2*f+1]+this.y,u[c++]=o;var d=this._paramData._int32Data;d[t._PARAM_FILL_VB_POS_]=this.fill_vbBuffer.getPtrID(),d[t._PARAM_FILL_IB_POS_]=this.fill_ibBuffer.getPtrID(),d[t._PARAM_FILL_VB_SIZE_POS_]=this._fill_vbSize,d[t._PARAM_FILL_IB_SIZE_POS_]=this._fill_ibSize,$.syncBufferToRenderThread(this.fill_vbBuffer),$.syncBufferToRenderThread(this.fill_ibBuffer),$.syncBufferToRenderThread(this._paramData)}),a(0,e,"pen",function(){return this._pen},function(e){this._pen=e,this._lines_ibArray.length=0,this._lines_vbArray.length=0,Te.createLine2(this._points,this._lines_ibArray,e.lineWidth,0,this._lines_vbArray,!1);var _=l.create(e.strokeStyle),i=_.numColor,r=this._vertNum;(!this.lines_vbBuffer||this.lines_vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.lines_vbBuffer=new ParamData(3*r*4,!0)),this._lines_vbSize=3*this._vertNum*4;for(var a=this.lines_vbBuffer._float32Data,n=this.lines_vbBuffer._int32Data,s=0,o=0;o<this._vertNum;o++)a[s++]=this._lines_vbArray[2*o]+this.x,a[s++]=this._lines_vbArray[2*o+1]+this.y,n[s++]=i;(!this.lines_ibBuffer||this.lines_ibBuffer.getByteLength()<3*(this._vertNum-2)*2)&&(this.lines_ibBuffer=new ParamData(3*(r-2)*2,!0,!0)),this._lines_ibSize=3*(this._vertNum-2)*2;for(var h=this.lines_ibBuffer._int16Data,u=0;u<3*(this._vertNum-2);u++)h[u]=this._lines_ibArray[u];n=this._paramData._int32Data,n[t._PARAM_LINES_VB_POS_]=this.lines_vbBuffer.getPtrID(),n[t._PARAM_LINES_IB_POS_]=this.lines_ibBuffer.getPtrID(),n[t._PARAM_LINES_VB_SIZE_POS_]=this._lines_vbSize,n[t._PARAM_LINES_IB_SIZE_POS_]=this._lines_ibSize,$.syncBufferToRenderThread(this.lines_vbBuffer),$.syncBufferToRenderThread(this.lines_ibBuffer),$.syncBufferToRenderThread(this._paramData)}),t.create=function(e,_,i,r,a){var n=O.getItemByClass("DrawPathCmd",t);n._graphicsCmdEncoder=this._commandEncoder,t._DRAW_LINES_CMD_ENCODER_||(t._DRAW_LINES_CMD_ENCODER_=$.instance.createCommandEncoder(88,32,!0),t._DRAW_LINES_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWVG),t._DRAW_LINES_CMD_ENCODER_.useVDO(_e.VDO_MESHVG),t._DRAW_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINES_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINES_VB_SIZE_POS_,4*t._PARAM_LINES_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINES_IB_SIZE_POS_,4*t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_LINES_CMD_ENCODER_)),t._DRAW_FILL_CMD_ENCODER_||(t._DRAW_FILL_CMD_ENCODER_=$.instance.createCommandEncoder(88,32,!0),t._DRAW_FILL_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWVG),t._DRAW_FILL_CMD_ENCODER_.useVDO(_e.VDO_MESHVG),t._DRAW_FILL_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_FILL_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_FILL_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_FILL_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_FILL_VB_POS_,4*t._PARAM_FILL_VB_OFFSET_POS_,4*t._PARAM_FILL_VB_SIZE_POS_,4*t._PARAM_FILL_IB_POS_,4*t._PARAM_FILL_IB_OFFSET_POS_,4*t._PARAM_FILL_IB_SIZE_POS_,4*t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_FILL_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_FILL_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_FILL_CMD_ENCODER_)),t._DRAW_LINES_FILL_CMD_ENCODER_||(t._DRAW_LINES_FILL_CMD_ENCODER_=$.instance.createCommandEncoder(136,32,!0),t._DRAW_LINES_FILL_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWVG),t._DRAW_LINES_FILL_CMD_ENCODER_.useVDO(_e.VDO_MESHVG),t._DRAW_LINES_FILL_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_LINES_FILL_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_LINES_FILL_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_LINES_FILL_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_FILL_VB_POS_,4*t._PARAM_FILL_VB_OFFSET_POS_,4*t._PARAM_FILL_VB_SIZE_POS_,4*t._PARAM_FILL_IB_POS_,4*t._PARAM_FILL_IB_OFFSET_POS_,4*t._PARAM_FILL_IB_SIZE_POS_,4*t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINES_FILL_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINES_FILL_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_LINES_FILL_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINES_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINES_VB_SIZE_POS_,4*t._PARAM_LINES_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINES_IB_SIZE_POS_,4*t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINES_FILL_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINES_FILL_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_LINES_FILL_CMD_ENCODER_)),n._paramData||(n._paramData=new ParamData(60,!0)),n._x=e,n._y=_,n._paths=i,n._brush=r,n._pen=a;for(var s=0,o=i.length;o>s;s++){var h=i[s];switch(0==s&&(n._startOriX=h[1],n._startOriY=h[2]),h[0]){case"moveTo":n._lastOriX=h[1],n._lastOriY=h[2],n._points.push(h[1]),n._points.push(h[2]);break;case"lineTo":n._lastOriX=h[1],n._lastOriY=h[2],n._points.push(h[1]),n._points.push(h[2]);break;case"arcTo":n._arcTo(h);break;case"closePath":n._points.push(n._startOriX),n._points.push(n._startOriY)}}if(n._vertNum=n._points.length,a){Te.createLine2(n._points,n._lines_ibArray,a.lineWidth,0,n._lines_vbArray,!1);var u=l.create(a.strokeStyle),c=u.numColor,f=n._vertNum;(!n.lines_vbBuffer||n.lines_vbBuffer.getByteLength()<3*n._vertNum*4)&&(n.lines_vbBuffer=new ParamData(3*f*4,!0)),n._lines_vbSize=3*n._vertNum*4;var d=n.lines_vbBuffer._float32Data,E=n.lines_vbBuffer._int32Data,A=0;for(s=0;s<n._vertNum;s++)d[A++]=n._lines_vbArray[2*s]+e,d[A++]=n._lines_vbArray[2*s+1]+_,E[A++]=c;(!n.lines_ibBuffer||n.lines_ibBuffer.getByteLength()<3*(n._vertNum-2)*2)&&(n.lines_ibBuffer=new ParamData(3*(f-2)*2,!0,!0)),n._lines_ibSize=3*(n._vertNum-2)*2;for(var D=n.lines_ibBuffer._int16Data,R=0;R<3*(n._vertNum-2);R++)D[R]=n._lines_ibArray[R]}if(r){f=n._vertNum;var m=Pe.earcut(n._points,null,2);if(m.length>0){(!n.fill_ibBuffer||n.fill_ibBuffer.getByteLength()<2*m.length)&&(n.fill_ibBuffer=new ParamData(2*m.length,!0,!0)),n._fill_ibSize=2*m.length,D=n.fill_ibBuffer._int16Data;var T=0;for(R=0;R<m.length;R++)D[T++]=m[R]}u=l.create(r.fillStyle),c=u.numColor,(!n.fill_vbBuffer||n.fill_vbBuffer.getByteLength()<3*n._vertNum*4)&&(n.fill_vbBuffer=new ParamData(3*f*4,!0)),n._fill_vbSize=3*n._vertNum*4,d=n.fill_vbBuffer._float32Data;var P=n.fill_vbBuffer._int32Data;for(P=n.fill_vbBuffer._int32Data,A=0,s=0;s<n._vertNum;s++)d[A++]=n._points[2*s]+e,d[A++]=n._points[2*s+1]+_,P[A++]=c}n._paramData._float32Data;return E=n._paramData._int32Data,E[0]=1,a&&(E[t._PARAM_LINES_VB_POS_]=n.lines_vbBuffer.getPtrID(),E[t._PARAM_LINES_IB_POS_]=n.lines_ibBuffer.getPtrID(),E[t._PARAM_LINES_VB_SIZE_POS_]=n._lines_vbSize,E[t._PARAM_LINES_IB_SIZE_POS_]=n._lines_ibSize,E[t._PARAM_LINE_VB_OFFSET_POS_]=0,E[t._PARAM_LINE_IB_OFFSET_POS_]=0,E[t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_]=0,$.syncBufferToRenderThread(n.lines_vbBuffer),$.syncBufferToRenderThread(n.lines_ibBuffer)),r&&(E[t._PARAM_FILL_VB_POS_]=n.fill_vbBuffer.getPtrID(),E[t._PARAM_FILL_IB_POS_]=n.fill_ibBuffer.getPtrID(),E[t._PARAM_FILL_VB_SIZE_POS_]=n._fill_vbSize,E[t._PARAM_FILL_IB_SIZE_POS_]=n._fill_ibSize,E[t._PARAM_FILL_VB_OFFSET_POS_]=0,E[t._PARAM_FILL_IB_OFFSET_POS_]=0,E[t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_]=0,$.syncBufferToRenderThread(n.fill_vbBuffer),$.syncBufferToRenderThread(n.fill_ibBuffer)),$.syncBufferToRenderThread(n._paramData),r&&a?n._cmdCurrentPos=n._graphicsCmdEncoder.useCommandEncoder(t._DRAW_LINES_FILL_CMD_ENCODER_.getPtrID(),n._paramData.getPtrID(),-1):r&&!a?n._cmdCurrentPos=n._graphicsCmdEncoder.useCommandEncoder(t._DRAW_FILL_CMD_ENCODER_.getPtrID(),n._paramData.getPtrID(),-1):!r&&a&&(n._cmdCurrentPos=n._graphicsCmdEncoder.useCommandEncoder(t._DRAW_LINES_CMD_ENCODER_.getPtrID(),n._paramData.getPtrID(),-1)),$.syncBufferToRenderThread(n._graphicsCmdEncoder),n},t.ID="DrawPath",t._DRAW_LINES_CMD_ENCODER_=null,t._DRAW_LINES_FILL_CMD_ENCODER_=null,t._DRAW_FILL_CMD_ENCODER_=null,t._PARAM_LINES_VB_POS_=1,t._PARAM_LINES_IB_POS_=2,t._PARAM_LINES_VB_SIZE_POS_=3,t._PARAM_LINES_IB_SIZE_POS_=4,t._PARAM_FILL_VB_POS_=5,t._PARAM_FILL_IB_POS_=6,t._PARAM_FILL_VB_SIZE_POS_=7,t._PARAM_FILL_IB_SIZE_POS_=8,t._PARAM_FILL_VB_OFFSET_POS_=9,t._PARAM_FILL_IB_OFFSET_POS_=10,t._PARAM_LINE_VB_OFFSET_POS_=11,t._PARAM_LINE_IB_OFFSET_POS_=12,t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_=13,t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_=14,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._paramID=null,this._x=0/0,this._y=0/0,this._radius=0/0,this._startAngle=0/0,this._endAngle=0/0,this._fillColor=null,this._lineColor=null,this._lineWidth=0/0,this._vertNum=0,this._line_vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this.line_ibBuffer=null,this.line_vbBuffer=null,this._ibSize=0,this._vbSize=0,this._line_ibSize=0,this._line_vbSize=0,this._cmdCurrentPos=0,this._points=[],this._linePoints=[],this._line_vbArray=[],this._line_ibArray=[]}r(t,"laya.layagl.cmdNative.DrawPieCmdNative");var e=t.prototype;return e._arc=function(t,e,_,i,r,a,n){void 0===a&&(a=!1),void 0===n&&(n=!0);var s=[];s.push(0),s.push(0);var o=0,h=0,u=0,l=0,c=0,f=0,d=0,E=0,A=0,D=0,R=0;if(h=r-i,a)if(Math.abs(h)>=2*Math.PI)h=2*-Math.PI;else for(;h>0;)h-=2*Math.PI;else if(Math.abs(h)>=2*Math.PI)h=2*Math.PI;else for(;0>h;)h+=2*Math.PI;D=101>_?Math.max(10,h*_/5):201>_?Math.max(10,h*_/20):Math.max(10,h*_/40),u=h/D/2,l=Math.abs(4/3*(1-Math.cos(u))/Math.sin(u)),a&&(l=-l),R=0;
var m=0,T=0;for(A=0;D>=A;A++)o=i+h*(A/D),c=Math.cos(o),f=Math.sin(o),d=t+c*_,E=e+f*_,(d!=m||E!=T)&&(s.push(d),s.push(E)),m=d,T=E;return c=Math.cos(r),f=Math.sin(r),d=t+c*_,E=e+f*_,(d!=m||E!=T)&&(s.push(d),s.push(E)),s},e._setData=function(t,e,_,i,r,a){this._vertNum=i.length/2;var n=this._vertNum,s=0,o=this._vertNum-2;(!this.ibBuffer||this.ibBuffer.getByteLength()<3*o*2)&&(this.ibBuffer=new ParamData(3*o*2,!0,!0)),this._ibSize=3*o*2;for(var h=this.ibBuffer._int16Data,u=0,c=0;o>c;c++)h[u++]=s,h[u++]=c+1+s,h[u++]=c+2+s;(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*n*4,!0)),this._vbSize=3*this._vertNum*4;for(var f=l.create(_),d=f.numColor,E=this.vbBuffer._float32Data,A=this.vbBuffer._int32Data,D=0,R=0;R<this._vertNum;R++)E[D++]=i[2*R]+t,E[D++]=i[2*R+1]+e,A[D++]=d;var m=0;for(this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0,R=0;R<i.length;R++)this._linePoints.push(i[R]);if(this._linePoints.push(i[0]),this._linePoints.push(i[1]),r){Te.createLine2(this._linePoints,this._line_ibArray,a,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length,m=this._line_vertNum,(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(m-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;var T=this.line_ibBuffer._int16Data;u=0;for(var P=0;P<3*(this._line_vertNum-2);P++)T[u++]=this._line_ibArray[P];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*m*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var v=l.create(r),p=v.numColor,C=this.line_vbBuffer._float32Data,M=this.line_vbBuffer._int32Data;for(D=0,R=0;R<this._line_vertNum;R++)C[D++]=this._line_vbArray[2*R]+this._x,C[D++]=this._line_vbArray[2*R+1]+this._y,M[D++]=p}else{this._lineWidth=1;var O="#FFFFFF";for(Te.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length,m=this._line_vertNum,(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(m-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2,T=this.line_ibBuffer._int16Data,u=0,P=0;P<3*(this._line_vertNum-2);P++)T[u++]=this._line_ibArray[P];for((!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*m*4,!0)),this._line_vbSize=3*this._line_vertNum*4,v=l.create(O),p=v.numColor,C=this.line_vbBuffer._float32Data,M=this.line_vbBuffer._int32Data,D=0,R=0;R<this._line_vertNum;R++)C[D++]=this._line_vbArray[2*R]+this._x,C[D++]=this._line_vbArray[2*R+1]+this._y,M[D++]=p}},e._saveToParamData=function(){var e=(this._paramData._float32Data,this._paramData._int32Data);e[0]=1,e[1]=32,e[t._PARAM_VB_POS_]=this.vbBuffer.getPtrID(),e[t._PARAM_IB_POS_]=this.ibBuffer.getPtrID(),e[t._PARAM_VB_SIZE_POS_]=this._vbSize,e[t._PARAM_IB_SIZE_POS_]=this._ibSize,e[t._PARAM_VB_OFFSET_POS_]=0,e[t._PARAM_IB_OFFSET_POS_]=0,e[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,$.syncBufferToRenderThread(this.vbBuffer),$.syncBufferToRenderThread(this.ibBuffer),e[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),e[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),e[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,e[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,e[t._PARAM_LINE_VB_OFFSET_POS_]=0,e[t._PARAM_LINE_IB_OFFSET_POS_]=0,e[t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_]=0,$.syncBufferToRenderThread(this.line_vbBuffer),$.syncBufferToRenderThread(this.line_ibBuffer)},e.recover=function(){this._fillColor=null,this._lineColor=null,O.recover("DrawPieCmd",this)},a(0,e,"lineColor",function(){return this._lineColor},function(e){!this._lineColor&&this._lineWidth&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_PIE_LINES_CMD_ENCODER_.getPtrID(),$.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineColor=e,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var _=0;_<this._points.length;_++)this._linePoints.push(this._points[_]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Te.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;var i=this._line_vertNum;(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(i-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;for(var r=this.line_ibBuffer._int16Data,a=0,n=0;n<3*(this._line_vertNum-2);n++)r[a++]=this._line_ibArray[n];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*i*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var s=l.create(e),o=s.numColor,h=this.line_vbBuffer._float32Data,u=this.line_vbBuffer._int32Data,c=0;for(_=0;_<this._line_vertNum;_++)h[c++]=this._line_vbArray[2*_]+this._x,h[c++]=this._line_vbArray[2*_+1]+this._y,u[c++]=o;$.syncBufferToRenderThread(this.line_ibBuffer),$.syncBufferToRenderThread(this.line_vbBuffer)}),a(0,e,"startAngle",function(){return 180*this._startAngle/Math.PI},function(t){this._startAngle=t*Math.PI/180,this._points=this._arc(0,0,this._radius,t*Math.PI/180,this._endAngle),this._setData(this._x,this._y,this._fillColor,this._points,this._lineColor,this._lineWidth),this._saveToParamData(),$.syncBufferToRenderThread(this._paramData)}),a(0,e,"cmdID",function(){return"DrawPie"}),a(0,e,"fillColor",function(){return this._fillColor},function(t){this._fillColor=t;for(var e=l.create(this._fillColor),_=e.numColor,i=this.vbBuffer._int32Data,r=0,a=0;a<this._vertNum;a++)r++,r++,i[r++]=_;$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)e[_++]=this._points[2*i]+this._x,_++,_++;if(this._lineColor){var r=this.line_vbBuffer._float32Data;for(_=0,i=0;i<this._line_vertNum;i++)r[_++]=this._line_vbArray[2*i]+this._x,_++,_++;$.syncBufferToRenderThread(this.line_vbBuffer)}$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)_++,e[_++]=this._points[2*i+1]+this._y,_++;if(this._lineColor){var r=this.line_vbBuffer._float32Data;for(_=0,i=0;i<this._line_vertNum;i++)_++,r[_++]=this._line_vbArray[2*i+1]+this._y,_++;$.syncBufferToRenderThread(this.line_vbBuffer)}$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"radius",function(){return this._radius},function(t){this._points=this._arc(0,0,t,this._startAngle,this._endAngle),this._setData(this._x,this._y,this._fillColor,this._points,this._lineColor,this._lineWidth),this._saveToParamData(),$.syncBufferToRenderThread(this._paramData)}),a(0,e,"endAngle",function(){return 180*this._endAngle/Math.PI},function(t){this._endAngle=t*Math.PI/180,this._points=this._arc(0,0,this._radius,this._startAngle,t*Math.PI/180),this._setData(this._x,this._y,this._fillColor,this._points,this._lineColor,this._lineWidth),this._saveToParamData(),$.syncBufferToRenderThread(this._paramData)}),a(0,e,"lineWidth",function(){return this._lineWidth},function(e){this.lineColor&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_PIE_LINES_CMD_ENCODER_.getPtrID(),$.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineWidth=e,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var _=0;_<this._points.length;_++)this._linePoints.push(this._points[_]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Te.createLine2(this._linePoints,this._line_ibArray,e,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;var i=this._line_vertNum;(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(i-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;for(var r=this.line_ibBuffer._int16Data,a=0,n=0;n<3*(this._line_vertNum-2);n++)r[a++]=this._line_ibArray[n];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*i*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var s=l.create(this.lineColor),o=s.numColor,h=this.line_vbBuffer._float32Data,u=this.line_vbBuffer._int32Data,c=0;for(_=0;_<this._line_vertNum;_++)h[c++]=this._line_vbArray[2*_]+this._x,h[c++]=this._line_vbArray[2*_+1]+this._y,u[c++]=o;$.syncBufferToRenderThread(this.line_ibBuffer),$.syncBufferToRenderThread(this.line_vbBuffer)}),t.create=function(e,_,i,r,a,n,s,o){var h=O.getItemByClass("DrawPieCmd",t);return h._graphicsCmdEncoder=this._commandEncoder,t._DRAW_PIE_LINES_CMD_ENCODER_||(t._DRAW_PIE_LINES_CMD_ENCODER_=$.instance.createCommandEncoder(140,32,!0),t._DRAW_PIE_LINES_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWVG),t._DRAW_PIE_LINES_CMD_ENCODER_.useVDO(_e.VDO_MESHVG),t._DRAW_PIE_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_PIE_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_PIE_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_PIE_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_PIE_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_PIE_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_PIE_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINE_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_VB_SIZE_POS_,4*t._PARAM_LINE_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINE_IB_SIZE_POS_,4*t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_PIE_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_PIE_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_PIE_LINES_CMD_ENCODER_)),t._DRAW_PIE_CMD_ENCODER_||(t._DRAW_PIE_CMD_ENCODER_=$.instance.createCommandEncoder(88,32,!0),t._DRAW_PIE_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWVG),t._DRAW_PIE_CMD_ENCODER_.useVDO(_e.VDO_MESHVG),t._DRAW_PIE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_PIE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_PIE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_PIE_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_PIE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_PIE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_PIE_CMD_ENCODER_)),h._paramData||(h._paramData=new ParamData(64,!0)),h._x=e,h._y=_,h._radius=i,h._startAngle=r,h._endAngle=a,h._fillColor=n,h._lineColor=s,h._lineWidth=o,h._points=h._arc(0,0,i,r,a),h._setData(e,_,n,h._points,s,o),h._saveToParamData(),$.syncBufferToRenderThread(h._paramData),h._cmdCurrentPos=s?h._graphicsCmdEncoder.useCommandEncoder(t._DRAW_PIE_LINES_CMD_ENCODER_.getPtrID(),h._paramData.getPtrID(),-1):h._graphicsCmdEncoder.useCommandEncoder(t._DRAW_PIE_CMD_ENCODER_.getPtrID(),h._paramData.getPtrID(),-1),$.syncBufferToRenderThread(h._graphicsCmdEncoder),h},t.ID="DrawPie",t._DRAW_PIE_CMD_ENCODER_=null,t._DRAW_PIE_LINES_CMD_ENCODER_=null,t._PARAM_VB_POS_=2,t._PARAM_IB_POS_=3,t._PARAM_LINE_VB_POS_=4,t._PARAM_LINE_IB_POS_=5,t._PARAM_VB_SIZE_POS_=6,t._PARAM_IB_SIZE_POS_=7,t._PARAM_LINE_VB_SIZE_POS_=8,t._PARAM_LINE_IB_SIZE_POS_=9,t._PARAM_VB_OFFSET_POS_=10,t._PARAM_IB_OFFSET_POS_=11,t._PARAM_LINE_VB_OFFSET_POS_=12,t._PARAM_LINE_IB_OFFSET_POS_=13,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=14,t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_=15,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._graphicsCmdEncoder_lines=null,this._paramData=null,this._x=0/0,this._y=0/0,this._points=null,this._fillColor=null,this._lineColor=null,this._lineWidth=0/0,this._isConvexPolygon=!1,this._vid=0,this._vertNum=0,this._line_vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this.line_ibBuffer=null,this.line_vbBuffer=null,this._ibSize=0,this._vbSize=0,this._line_ibSize=0,this._line_vbSize=0,this._cmdCurrentPos=0,this._linePoints=[],this._line_vbArray=[],this._line_ibArray=[]}r(t,"laya.layagl.cmdNative.DrawPolyCmdNative");var e=t.prototype;return e.recover=function(){this._points=null,this._fillColor=null,this._lineColor=null,O.recover("DrawPolyCmd",this)},a(0,e,"lineColor",function(){return this._lineColor},function(e){if(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_POLY_LINES_CMD_ENCODER_.getPtrID(),$.syncBufferToRenderThread(this._graphicsCmdEncoder),this._lineColor=e,this._lineColor&&this.line_vbBuffer){for(var _=l.create(this._lineColor),i=_.numColor,r=this.line_vbBuffer._int32Data,a=0,n=0;n<this._line_vertNum;n++)a++,a++,r[a++]=i;$.syncBufferToRenderThread(this.line_vbBuffer)}}),a(0,e,"points",function(){return this._points},function(e){this._points=e,this._vertNum=e.length/2;var _=this._vertNum,i=Pe.earcut(e,null,2);if(i.length>0){(!this.ibBuffer||this.ibBuffer.getByteLength()<2*i.length)&&(this.ibBuffer=new ParamData(2*i.length,!0,!0)),this._ibSize=2*i.length;for(var r=this.ibBuffer._int16Data,a=0,n=0;n<i.length;n++)r[a++]=i[n]}(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*_*4,!0)),this._vbSize=3*this._vertNum*4;for(var s=l.create(this._fillColor),o=s.numColor,h=this.vbBuffer._float32Data,u=this.vbBuffer._int32Data,c=0,f=0;f<this._vertNum;f++)h[c++]=this._points[2*f]+this._x,h[c++]=this._points[2*f+1]+this._y,u[c++]=o;var d=this._paramData._int32Data;if(d[t._PARAM_VB_POS_]=this.vbBuffer.getPtrID(),d[t._PARAM_IB_POS_]=this.ibBuffer.getPtrID(),d[t._PARAM_VB_SIZE_POS_]=this._vbSize,d[t._PARAM_IB_SIZE_POS_]=this._ibSize,$.syncBufferToRenderThread(this.vbBuffer),$.syncBufferToRenderThread(this.ibBuffer),$.syncBufferToRenderThread(this._paramData),this.lineColor){var E=0;for(this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0,f=0;f<e.length;f++)this._linePoints.push(e[f]);this._linePoints.push(e[0]),this._linePoints.push(e[1]),Te.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length,E=this._line_vertNum,(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(E-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;var A=this.line_ibBuffer._int16Data;for(a=0,n=0;n<3*(this._line_vertNum-2);n++)A[a++]=this._line_ibArray[n];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*E*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var D=l.create(this._lineColor),R=D.numColor,m=this.line_vbBuffer._float32Data,T=this.line_vbBuffer._int32Data;for(c=0,f=0;f<this._line_vertNum;f++)m[c++]=this._line_vbArray[2*f]+this._x,m[c++]=this._line_vbArray[2*f+1]+this._y,T[c++]=R;d=this._paramData._int32Data,d[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),d[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),d[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,d[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,$.syncBufferToRenderThread(this.line_vbBuffer),$.syncBufferToRenderThread(this.line_ibBuffer)}}),a(0,e,"cmdID",function(){return"DrawPoly"}),a(0,e,"fillColor",function(){return this._fillColor},function(t){this._fillColor=t;for(var e=l.create(this._fillColor),_=e.numColor,i=this.vbBuffer._int32Data,r=0,a=0;a<this._vertNum;a++)r++,r++,i[r++]=_;$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)e[_++]=this._points[2*i]+this._x,_++,_++;if(this._lineColor){var r=this.line_vbBuffer._float32Data;for(_=0,i=0;i<this._line_vertNum;i++)r[_++]=this._line_vbArray[2*i]+this._x,_++,_++;$.syncBufferToRenderThread(this.line_vbBuffer)}$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"isConvexPolygon",function(){return this._isConvexPolygon},function(t){this._isConvexPolygon=t}),a(0,e,"vid",function(){return this._vid},function(t){this._vid=t}),a(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._vertNum;i++)_++,e[_++]=this._points[2*i+1]+this._y,_++;if(this._lineColor){var r=this.line_vbBuffer._float32Data;for(_=0,i=0;i<this._line_vertNum;i++)_++,r[_++]=this._line_vbArray[2*i+1]+this._y,_++;$.syncBufferToRenderThread(this.line_vbBuffer)}$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"lineWidth",function(){return this._lineWidth},function(e){this.lineColor&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_POLY_LINES_CMD_ENCODER_.getPtrID(),$.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineWidth=e,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var _=0;_<this._points.length;_++)this._linePoints.push(this._points[_]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Te.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1);var i=this.line_vbBuffer._float32Data,r=0;for(_=0;_<this._line_vertNum;_++)i[r++]=this._line_vbArray[2*_]+this._x,i[r++]=this._line_vbArray[2*_+1]+this._y,r++;$.syncBufferToRenderThread(this.line_vbBuffer)}),t.create=function(e,_,i,r,a,n,s){var o=O.getItemByClass("DrawPolyCmd",t);o._graphicsCmdEncoder=this._commandEncoder,t._DRAW_POLY_CMD_ENCODER_||(t._DRAW_POLY_CMD_ENCODER_=$.instance.createCommandEncoder(88,32,!0),t._DRAW_POLY_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWVG),t._DRAW_POLY_CMD_ENCODER_.useVDO(_e.VDO_MESHVG),t._DRAW_POLY_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_POLY_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_POLY_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_POLY_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_POLY_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_POLY_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_POLY_CMD_ENCODER_)),t._DRAW_POLY_LINES_CMD_ENCODER_||(t._DRAW_POLY_LINES_CMD_ENCODER_=$.instance.createCommandEncoder(140,32,!0),t._DRAW_POLY_LINES_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWVG),t._DRAW_POLY_LINES_CMD_ENCODER_.useVDO(_e.VDO_MESHVG),t._DRAW_POLY_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_POLY_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_POLY_LINES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_POLY_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_POLY_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_POLY_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_POLY_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINE_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_VB_SIZE_POS_,4*t._PARAM_LINE_IB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_IB_SIZE_POS_,4*t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_POLY_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_POLY_LINES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_POLY_LINES_CMD_ENCODER_)),o._paramData||(o._paramData=new ParamData(68,!0)),o._x=e,o._y=_,o._points=i,o._fillColor=r,o._lineColor=a,o._lineWidth=n,o._isConvexPolygon=s,o._vertNum=i.length/2;var h=o._vertNum,u=Pe.earcut(i,null,2);if(u.length>0){(!o.ibBuffer||o.ibBuffer.getByteLength()<2*u.length)&&(o.ibBuffer=new ParamData(2*u.length,!0,!0)),o._ibSize=2*u.length;for(var c=o.ibBuffer._int16Data,f=0,d=0;d<u.length;d++)c[f++]=u[d]}var E=l.create(r),A=E.numColor;(!o.vbBuffer||o.vbBuffer.getByteLength()<3*o._vertNum*4)&&(o.vbBuffer=new ParamData(3*h*4,!0)),o._vbSize=3*o._vertNum*4;for(var D=o.vbBuffer._float32Data,R=o.vbBuffer._int32Data,m=0,T=0;T<o._vertNum;T++)D[m++]=i[2*T]+e,D[m++]=i[2*T+1]+_,R[m++]=A;for(T=0;T<i.length;T++)o._linePoints.push(i[T]);if(o._linePoints.push(i[0]),o._linePoints.push(i[1]),a){Te.createLine2(o._linePoints,o._line_ibArray,n,0,o._line_vbArray,!1),o._line_vertNum=o._linePoints.length;var P=o._line_vertNum;(!o.line_ibBuffer||o.line_ibBuffer.getByteLength()<3*(o._line_vertNum-2)*2)&&(o.line_ibBuffer=new ParamData(3*(P-2)*2,!0,!0)),o._line_ibSize=3*(o._line_vertNum-2)*2;var v=o.line_ibBuffer._int16Data;for(f=0,d=0;d<3*(o._line_vertNum-2);d++)v[f++]=o._line_ibArray[d];(!o.line_vbBuffer||o.line_vbBuffer.getByteLength()<3*o._line_vertNum*4)&&(o.line_vbBuffer=new ParamData(3*P*4,!0)),o._line_vbSize=3*o._line_vertNum*4;var p=l.create(a),C=p.numColor,M=o.line_vbBuffer._float32Data,S=o.line_vbBuffer._int32Data;for(m=0,T=0;T<o._line_vertNum;T++)M[m++]=o._line_vbArray[2*T]+e,M[m++]=o._line_vbArray[2*T+1]+_,S[m++]=C}else{o._lineWidth=1;var g="#ffffff";for(Te.createLine2(o._linePoints,o._line_ibArray,o._lineWidth,0,o._line_vbArray,!1),o._line_vertNum=o._linePoints.length,P=o._line_vertNum,(!o.line_ibBuffer||o.line_ibBuffer.getByteLength()<3*(o._line_vertNum-2)*2)&&(o.line_ibBuffer=new ParamData(3*(P-2)*2,!0,!0)),o._line_ibSize=3*(o._line_vertNum-2)*2,v=o.line_ibBuffer._int16Data,f=0,d=0;d<3*(o._line_vertNum-2);d++)v[f++]=o._line_ibArray[d];for((!o.line_vbBuffer||o.line_vbBuffer.getByteLength()<3*o._line_vertNum*4)&&(o.line_vbBuffer=new ParamData(3*P*4,!0)),o._line_vbSize=3*o._line_vertNum*4,p=l.create(g),C=p.numColor,M=o.line_vbBuffer._float32Data,S=o.line_vbBuffer._int32Data,m=0,T=0;T<o._line_vertNum;T++)M[m++]=o._line_vbArray[2*T]+e,M[m++]=o._line_vbArray[2*T+1]+_,S[m++]=C}var y=o._paramData._float32Data,L=o._paramData._int32Data;return L[0]=1,L[1]=32,null==o.ibBuffer?null:(L[t._PARAM_VB_POS_]=o.vbBuffer.getPtrID(),L[t._PARAM_IB_POS_]=o.ibBuffer.getPtrID(),L[t._PARAM_VB_SIZE_POS_]=o._vbSize,L[t._PARAM_IB_SIZE_POS_]=o._ibSize,L[t._PARAM_VB_OFFSET_POS_]=0,L[t._PARAM_IB_OFFSET_POS_]=0,L[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,y[t._PARAM_ISCONVEXT_POS_]=s,$.syncBufferToRenderThread(o.vbBuffer),$.syncBufferToRenderThread(o.ibBuffer),L[t._PARAM_LINE_VB_POS_]=o.line_vbBuffer.getPtrID(),L[t._PARAM_LINE_IB_POS_]=o.line_ibBuffer.getPtrID(),L[t._PARAM_LINE_VB_SIZE_POS_]=o._line_vbSize,L[t._PARAM_LINE_IB_SIZE_POS_]=o._line_ibSize,L[t._PARAM_LINE_VB_OFFSET_POS_]=0,L[t._PARAM_LINE_IB_OFFSET_POS_]=0,L[t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_]=0,$.syncBufferToRenderThread(o.line_vbBuffer),$.syncBufferToRenderThread(o.line_ibBuffer),$.syncBufferToRenderThread(o._paramData),o._cmdCurrentPos=a?o._graphicsCmdEncoder.useCommandEncoder(t._DRAW_POLY_LINES_CMD_ENCODER_.getPtrID(),o._paramData.getPtrID(),-1):o._graphicsCmdEncoder.useCommandEncoder(t._DRAW_POLY_CMD_ENCODER_.getPtrID(),o._paramData.getPtrID(),-1),$.syncBufferToRenderThread(o._graphicsCmdEncoder),o)},t.ID="DrawPoly",t._DRAW_POLY_CMD_ENCODER_=null,t._DRAW_POLY_LINES_CMD_ENCODER_=null,t._PARAM_VB_POS_=2,t._PARAM_IB_POS_=3,t._PARAM_VB_SIZE_POS_=4,t._PARAM_IB_SIZE_POS_=5,t._PARAM_LINE_VB_POS_=6,t._PARAM_LINE_IB_POS_=7,t._PARAM_LINE_VB_SIZE_POS_=8,t._PARAM_LINE_IB_SIZE_POS_=9,t._PARAM_ISCONVEXT_POS_=10,t._PARAM_VB_OFFSET_POS_=11,t._PARAM_IB_OFFSET_POS_=12,t._PARAM_LINE_VB_OFFSET_POS_=13,t._PARAM_LINE_IB_OFFSET_POS_=14,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=15,t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_=16,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._x=0/0,this._y=0/0,this._width=0/0,this._height=0/0,this._fillColor=null,this._lineColor=null,this._lineWidth=0/0,this._line_vertNum=0,this._cmdCurrentPos=0,this._linePoints=[],this._line_ibArray=[],this._line_vbArray=[]}r(t,"laya.layagl.cmdNative.DrawRectCmdNative");var e=t.prototype;return e.recover=function(){this._graphicsCmdEncoder=null,O.recover("DrawRectCmd",this)},a(0,e,"lineColor",function(){return this._lineColor},function(e){this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_RECT_LINE_CMD_ENCODER_.getPtrID(),$.syncBufferToRenderThread(this._graphicsCmdEncoder),this._lineColor=e;for(var _=this._paramData._int32Data,i=l.create(e),r=i.numColor,a=t._PARAM_LINE_VB_POS_,n=0;n<this._line_vertNum;n++)a++,a++,_[a++]=r;$.syncBufferToRenderThread(this._paramData)}),a(0,e,"cmdID",function(){return"DrawRect"}),a(0,e,"fillColor",function(){return this._fillColor},function(e){if(this._fillColor=e,"string"==typeof e){var _=l.create(this._fillColor),i=_.numColor,r=this._paramData._int32Data;r[t._PARAM_VB_POS_+4]=i,r[t._PARAM_VB_POS_+10]=i,r[t._PARAM_VB_POS_+16]=i,r[t._PARAM_VB_POS_+22]=i}else r=this._paramData._int32Data,r[t._PARAM_VB_POS_+4]=e,r[t._PARAM_VB_POS_+10]=e,r[t._PARAM_VB_POS_+16]=e,r[t._PARAM_VB_POS_+22]=e;$.syncBufferToRenderThread(this._paramData)}),a(0,e,"width",function(){return this._width},function(e){this._width=e;var _=this._paramData._float32Data;if(_[t._PARAM_VB_POS_+6]=this._x+this._width,_[t._PARAM_VB_POS_+12]=this._x+this._width,this.lineColor){this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[2]=this._x+this._width,this._linePoints[4]=this._x+this._width,Te.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;for(var i=t._PARAM_LINE_VB_POS_,r=0;r<this._line_vertNum;r++)_[i++]=this._line_vbArray[2*r],_[i++]=this._line_vbArray[2*r+1],i++}$.syncBufferToRenderThread(this._paramData)}),a(0,e,"x",function(){return this._x},function(e){this._x=e;var _=this._paramData._float32Data;if(_[t._PARAM_VB_POS_]=this._x,_[t._PARAM_VB_POS_+6]=this._x+this._width,_[t._PARAM_VB_POS_+12]=this._x+this._width,_[t._PARAM_VB_POS_+18]=this._x,this.lineColor){this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[0]=this._x,this._linePoints[2]=this._x+this._width,this._linePoints[4]=this._x+this._width,this._linePoints[6]=this._x,this._linePoints[8]=this._x,Te.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1);for(var i=t._PARAM_LINE_VB_POS_,r=0;r<this._line_vertNum;r++)_[i++]=this._line_vbArray[2*r],_[i++]=this._line_vbArray[2*r+1],i++}$.syncBufferToRenderThread(this._paramData)}),a(0,e,"y",function(){return this._y},function(e){this._y=e;var _=this._paramData._float32Data;if(_[t._PARAM_VB_POS_+1]=this._y,_[t._PARAM_VB_POS_+7]=this._y,_[t._PARAM_VB_POS_+13]=this._y+this._height,_[t._PARAM_VB_POS_+19]=this._y+this._height,this.lineColor){this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[1]=this._y,this._linePoints[3]=this._y,this._linePoints[5]=this._y+this._height,this._linePoints[7]=this._y+this._height,this._linePoints[9]=this._y-this._lineWidth/2,Te.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1);for(var i=t._PARAM_LINE_VB_POS_,r=0;r<this._line_vertNum;r++)_[i++]=this._line_vbArray[2*r],_[i++]=this._line_vbArray[2*r+1],i++}$.syncBufferToRenderThread(this._paramData)}),a(0,e,"height",function(){return this._height},function(e){this._height=e;var _=this._paramData._float32Data;if(_[t._PARAM_VB_POS_+13]=this._y+this._height,_[t._PARAM_VB_POS_+19]=this._y+this._height,this.lineColor){this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[5]=this._y+this._height,this._linePoints[7]=this._y+this._height,Te.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1);for(var i=t._PARAM_LINE_VB_POS_,r=0;r<this._line_vertNum;r++)_[i++]=this._line_vbArray[2*r],_[i++]=this._line_vbArray[2*r+1],i++}$.syncBufferToRenderThread(this._paramData)}),a(0,e,"lineWidth",function(){return this._lineWidth},function(e){this.lineColor&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_RECT_LINE_CMD_ENCODER_.getPtrID(),$.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineWidth=e,this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[9]=this._y-this._lineWidth/2,Te.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;for(var _=this._paramData._float32Data,i=t._PARAM_LINE_VB_POS_,r=0;r<this._line_vertNum;r++)_[i++]=this._line_vbArray[2*r],_[i++]=this._line_vbArray[2*r+1],i++;$.syncBufferToRenderThread(this._paramData)}),t.create=function(e,_,i,r,a,n,s){var o=O.getItemByClass("DrawRectCmd",t);o._graphicsCmdEncoder=this._commandEncoder,t._DRAW_RECT_LINE_CMD_ENCODER_||(t._DRAW_RECT_LINE_CMD_ENCODER_=$.instance.createCommandEncoder(164,32,!0),t._DRAW_RECT_LINE_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWTEXTURE),t._DRAW_RECT_LINE_CMD_ENCODER_.useVDO(_e.VDO_MESHQUADTEXTURE),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_RECT_LINE_CMD_ENCODER_.setRectMeshByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_),t._DRAW_RECT_LINE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_RECT_LINE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_RECT_LINE_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWVG),t._DRAW_RECT_LINE_CMD_ENCODER_.useVDO(_e.VDO_MESHVG),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_RECT_LINE_CMD_ENCODER_.setMeshByParamData(4*t._PARAM_LINE_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_VB_SIZE_POS_,4*t._PARAM_LINE_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINE_IB_SIZE_POS_,4*t._PARAM_LINE_IBELEMENT_OFFSET_POS_),t._DRAW_RECT_LINE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_RECT_LINE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_RECT_LINE_CMD_ENCODER_)),t._DRAW_RECT_CMD_ENCODER_||(t._DRAW_RECT_CMD_ENCODER_=$.instance.createCommandEncoder(84,32,!0),t._DRAW_RECT_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWTEXTURE),t._DRAW_RECT_CMD_ENCODER_.useVDO(_e.VDO_MESHQUADTEXTURE),t._DRAW_RECT_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_RECT_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_RECT_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_RECT_CMD_ENCODER_.setRectMeshByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_),t._DRAW_RECT_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_RECT_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_RECT_CMD_ENCODER_)),o._paramData||(o._paramData=new ParamData(292,!0)),o._x=e,o._y=_,o._width=i,o._height=r,o._fillColor=a,o._lineColor=n,o._lineWidth=s;var h=l.create(a),u=h.numColor,c=o._paramData._float32Data,f=o._paramData._int32Data;f[t._PARAM_RECT_NUM_POS_]=1,f[t._PARAM_VB_SIZE_POS_]=96;var d=t._PARAM_VB_POS_;if(c[d++]=e,c[d++]=_,c[d++]=0,c[d++]=0,f[d++]=u,c[d++]=4294967295,c[d++]=e+i,c[d++]=_,c[d++]=0,c[d++]=0,f[d++]=u,c[d++]=4294967295,c[d++]=e+i,c[d++]=_+r,c[d++]=0,c[d++]=0,f[d++]=u,c[d++]=4294967295,c[d++]=e,c[d++]=_+r,c[d++]=0,c[d++]=0,f[d++]=u,c[d++]=4294967295,o._linePoints.push(e),o._linePoints.push(_),o._linePoints.push(e+i),o._linePoints.push(_),o._linePoints.push(e+i),o._linePoints.push(_+r),o._linePoints.push(e),o._linePoints.push(_+r),o._linePoints.push(e),o._linePoints.push(_-s/2),n){Te.createLine2(o._linePoints,o._line_ibArray,s,0,o._line_vbArray,!1),o._line_vertNum=o._linePoints.length,f[t._PARAM_LINE_VB_SIZE_POS_]=120;var E=l.create(n),A=E.numColor;d=t._PARAM_LINE_VB_POS_;for(var D=0;D<o._line_vertNum;D++)c[d++]=o._line_vbArray[2*D],c[d++]=o._line_vbArray[2*D+1],f[d++]=A;
f[t._PARAM_LINE_IB_SIZE_POS_]=2*o._line_ibArray.length;var R=o._paramData._int16Data;d=2*t._PARAM_LINE_IB_POS_;for(var m=0;m<o._line_ibArray.length;m++)R[d++]=o._line_ibArray[m]}else{o._lineWidth=1;var T="#ffffff";for(Te.createLine2(o._linePoints,o._line_ibArray,o._lineWidth,0,o._line_vbArray,!1),o._line_vertNum=o._linePoints.length,f[t._PARAM_LINE_VB_SIZE_POS_]=120,E=l.create(T),A=E.numColor,d=t._PARAM_LINE_VB_POS_,D=0;D<o._line_vertNum;D++)c[d++]=o._line_vbArray[2*D],c[d++]=o._line_vbArray[2*D+1],f[d++]=A;for(f[t._PARAM_LINE_IB_SIZE_POS_]=2*o._line_ibArray.length,R=o._paramData._int16Data,d=2*t._PARAM_LINE_IB_POS_,m=0;m<o._line_ibArray.length;m++)R[d++]=o._line_ibArray[m]}return f[t._PARAM_LINE_VB_OFFSET_POS_]=0,f[t._PARAM_LINE_IB_OFFSET_POS_]=0,f[t._PARAM_LINE_IBELEMENT_OFFSET_POS_]=0,$.syncBufferToRenderThread(o._paramData),o._cmdCurrentPos=n?o._graphicsCmdEncoder.useCommandEncoder(t._DRAW_RECT_LINE_CMD_ENCODER_.getPtrID(),o._paramData.getPtrID(),-1):o._graphicsCmdEncoder.useCommandEncoder(t._DRAW_RECT_CMD_ENCODER_.getPtrID(),o._paramData.getPtrID(),-1),$.syncBufferToRenderThread(o._graphicsCmdEncoder),o},t.ID="DrawRect",t._DRAW_RECT_CMD_ENCODER_=null,t._DRAW_RECT_LINE_CMD_ENCODER_=null,t._PARAM_RECT_NUM_POS_=0,t._PARAM_VB_SIZE_POS_=1,t._PARAM_VB_POS_=2,t._PARAM_LINE_VB_SIZE_POS_=26,t._PARAM_LINE_VB_POS_=27,t._PARAM_LINE_IB_SIZE_POS_=57,t._PARAM_LINE_IB_POS_=58,t._PARAM_LINE_VB_OFFSET_POS_=70,t._PARAM_LINE_IB_OFFSET_POS_=71,t._PARAM_LINE_IBELEMENT_OFFSET_POS_=72,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._texture=null,this._x=0/0,this._y=0/0,this._width=0/0,this._height=0/0,this._matrix=null,this._alpha=0/0,this._color=null,this._blendMode=null,this._cmdCurrentPos=0,this._blend_src=0,this._blend_dest=0}r(t,"laya.layagl.cmdNative.DrawTextureCmdNative");var e=t.prototype;return e.recover=function(){this._texture=null,O.recover("DrawTextureCmd",this)},e._setBlendMode=function(t){switch(t){case"normal":this._blend_src=1,this._blend_dest=771;break;case"add":this._blend_src=1,this._blend_dest=772;break;case"multiply":this._blend_src=774,this._blend_dest=771;break;case"screen":this._blend_src=1,this._blend_dest=1;break;case"lighter":this._blend_src=1,this._blend_dest=1;break;case"overlay":this._blend_src=1,this._blend_dest=769;break;case"destination-out":this._blend_src=0,this._blend_dest=0;break;case"mask":this._blend_src=0,this._blend_dest=770;break;default:alert("_setBlendMode Unknown type")}},e._mixRGBandAlpha=function(t,e){var _=(4278190080&t)>>>24;return 0!=_?_*=e:_=255*e,16777215&t|_<<24},a(0,e,"cmdID",function(){return"DrawTexture"}),a(0,e,"matrix",function(){return this._matrix},function(e){this._matrix||(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.getPtrID(),$.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._matrix=e;var _=this._paramData._float32Data;_[t._PARAM_MATRIX_POS_]=e.a,_[t._PARAM_MATRIX_POS_+1]=e.b,_[t._PARAM_MATRIX_POS_+2]=e.c,_[t._PARAM_MATRIX_POS_+3]=e.d,_[t._PARAM_MATRIX_POS_+4]=e.tx,_[t._PARAM_MATRIX_POS_+5]=e.ty,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"y",function(){return this._y},function(e){this._y=e;var _=this._paramData._float32Data;_[t._PARAM_VB_POS_+1]=this._y,_[t._PARAM_VB_POS_+7]=this._y,_[t._PARAM_VB_POS_+13]=this._y+this._height,_[t._PARAM_VB_POS_+19]=this._y+this._height,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"texture",function(){return this._texture},function(e){if(e&&e.url){this._texture=e,this._paramData._int32Data[t._PARAM_TEXTURE_POS_]=this._texture.bitmap._glTexture.id;var _=this._paramData._float32Data,i=this.texture.uv;_[t._PARAM_VB_POS_+2]=i[0],_[t._PARAM_VB_POS_+3]=i[1],_[t._PARAM_VB_POS_+8]=i[2],_[t._PARAM_VB_POS_+9]=i[3],_[t._PARAM_VB_POS_+14]=i[4],_[t._PARAM_VB_POS_+15]=i[5],_[t._PARAM_VB_POS_+20]=i[6],_[t._PARAM_VB_POS_+21]=i[7],$.syncBufferToRenderThread(this._paramData)}}),a(0,e,"width",function(){return this._width},function(e){this._width=e;var _=this._paramData._float32Data;_[t._PARAM_VB_POS_]=this._x,_[t._PARAM_VB_POS_+6]=this._x+this._width,_[t._PARAM_VB_POS_+12]=this._x+this._width,_[t._PARAM_VB_POS_+18]=this._x,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"x",function(){return this._x},function(e){this._x=e;var _=this._paramData._float32Data;_[t._PARAM_VB_POS_]=this._x,_[t._PARAM_VB_POS_+6]=this._x+this._width,_[t._PARAM_VB_POS_+12]=this._x+this._width,_[t._PARAM_VB_POS_+18]=this._x,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"height",function(){return this._height},function(e){this._height=e;var _=this._paramData._float32Data;_[t._PARAM_VB_POS_+1]=this._y,_[t._PARAM_VB_POS_+7]=this._y,_[t._PARAM_VB_POS_+13]=this._y+this._height,_[t._PARAM_VB_POS_+19]=this._y+this._height,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"alpha",function(){return this._alpha},function(t){this._alpha=t}),t.create=function(e,_,i,r,a,n,s,o,h){var u=O.getItemByClass("DrawTextureCmd",t);u._graphicsCmdEncoder=this._commandEncoder,t._DRAW_TEXTURE_CMD_ENCODER_||(t._DRAW_TEXTURE_CMD_ENCODER_=$.instance.createCommandEncoder(124,32,!0),t._DRAW_TEXTURE_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWTEXTURE),t._DRAW_TEXTURE_CMD_ENCODER_.useVDO(_e.VDO_MESHQUADTEXTURE),t._DRAW_TEXTURE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_TEXTURE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TEXTURE_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TEXTURE_CMD_ENCODER_.uniformTextureByParamData(4*t._PARAM_UNIFORM_LOCATION_POS_,4*t._PARAM_TEX_LOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TEXTURE_CMD_ENCODER_.blendFuncByGlobalValue(_e.GLOBALVALUE_BLENDFUNC_SRC,_e.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TEXTURE_CMD_ENCODER_.blendFuncByParamData(4*t._PARAM_BLEND_SRC_POS_,4*t._PARAM_BLEND_DEST_POS_),t._DRAW_TEXTURE_CMD_ENCODER_.setRectMeshByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_),t._DRAW_TEXTURE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TEXTURE_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_TEXTURE_CMD_ENCODER_)),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_||(t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_=$.instance.createCommandEncoder(132,32,!0),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.useProgramEx(_e.PROGRAMEX_DRAWTEXTURE),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.useVDO(_e.VDO_MESHQUADTEXTURE),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.save(),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.setGlobalValueByParamData(_e.GLOBALVALUE_MATRIX32,7,4*t._PARAM_MATRIX_POS_),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.uniformTextureByParamData(4*t._PARAM_UNIFORM_LOCATION_POS_,4*t._PARAM_TEX_LOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.blendFuncByGlobalValue(_e.GLOBALVALUE_BLENDFUNC_SRC,_e.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.blendFuncByParamData(4*t._PARAM_BLEND_SRC_POS_,4*t._PARAM_BLEND_DEST_POS_),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.setRectMeshByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.restore(),$.syncBufferToRenderThread(t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_)),u._paramData||(u._paramData=new ParamData(148,!0)),u._texture=e,u._x=_,u._y=i,u._width=r,u._height=a,u._matrix=n,u._alpha=s,u._color=o,u._blendMode=h;var l=0!=r?r:e.bitmap.width,c=0!=a?a:e.bitmap.height,f=e.uv,d=u._paramData._float32Data,E=u._paramData._int32Data;E[t._PARAM_UNIFORM_LOCATION_POS_]=3,E[t._PARAM_TEX_LOCATION_POS_]=33984,E[t._PARAM_TEXTURE_POS_]=e.bitmap._glTexture.id,E[t._PARAM_RECT_NUM_POS_]=1,E[t._PARAM_VB_SIZE_POS_]=96,h?(u._setBlendMode(h),E[t._PARAM_BLEND_SRC_POS_]=u._blend_src,E[t._PARAM_BLEND_DEST_POS_]=u._blend_dest):(E[t._PARAM_BLEND_SRC_POS_]=-1,E[t._PARAM_BLEND_DEST_POS_]=-1);var A=4294967295;s&&(A=u._mixRGBandAlpha(A,s));var D=t._PARAM_VB_POS_;return d[D++]=_,d[D++]=i,d[D++]=f[0],d[D++]=f[1],E[D++]=A,E[D++]=4294967295,d[D++]=_+l,d[D++]=i,d[D++]=f[2],d[D++]=f[3],E[D++]=A,E[D++]=4294967295,d[D++]=_+l,d[D++]=i+c,d[D++]=f[4],d[D++]=f[5],E[D++]=A,E[D++]=4294967295,d[D++]=_,d[D++]=i+c,d[D++]=f[6],d[D++]=f[7],E[D++]=A,E[D++]=4294967295,n&&(d[t._PARAM_MATRIX_POS_]=n.a,d[t._PARAM_MATRIX_POS_+1]=n.b,d[t._PARAM_MATRIX_POS_+2]=n.c,d[t._PARAM_MATRIX_POS_+3]=n.d,d[t._PARAM_MATRIX_POS_+4]=n.tx,d[t._PARAM_MATRIX_POS_+5]=n.ty),$.syncBufferToRenderThread(u._paramData),u._cmdCurrentPos=n?u._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.getPtrID(),u._paramData.getPtrID(),-1):u._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TEXTURE_CMD_ENCODER_.getPtrID(),u._paramData.getPtrID(),-1),$.syncBufferToRenderThread(u._graphicsCmdEncoder),u},t.ID="DrawTexture",t._DRAW_TEXTURE_CMD_ENCODER_=null,t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_=null,t._PARAM_UNIFORM_LOCATION_POS_=0,t._PARAM_TEX_LOCATION_POS_=1,t._PARAM_TEXTURE_POS_=2,t._PARAM_RECT_NUM_POS_=3,t._PARAM_VB_SIZE_POS_=4,t._PARAM_VB_POS_=5,t._PARAM_MATRIX_POS_=29,t._PARAM_BLEND_SRC_POS_=35,t._PARAM_BLEND_DEST_POS_=36,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._texture=null,this._pos=null,this._rectNum=0,this._vbSize=0,this.vbBuffer=null}r(t,"laya.layagl.cmdNative.DrawTexturesCmdNative");var e=t.prototype;return e.recover=function(){this._texture=null,this._pos=null,O.recover("DrawTexturesCmd",this)},a(0,e,"cmdID",function(){return"DrawTextures"}),a(0,e,"texture",function(){return this._texture},function(e){this._texture=e;for(var _=this._texture.bitmap.width,i=this._texture.bitmap.height,r=this._texture.uv,a=this.vbBuffer._float32Data,n=this.vbBuffer._int32Data,s=0,o=0;o<this._rectNum;o++){var h=this.pos[2*o],u=this.pos[2*o+1];a[s++]=h,a[s++]=u,a[s++]=r[0],a[s++]=r[1],n[s++]=4294967295,n[s++]=4294967295,a[s++]=h+_,a[s++]=u,a[s++]=r[2],a[s++]=r[3],n[s++]=4294967295,n[s++]=4294967295,a[s++]=h+_,a[s++]=u+i,a[s++]=r[4],a[s++]=r[5],n[s++]=4294967295,n[s++]=4294967295,a[s++]=h,a[s++]=u+i,a[s++]=r[6],a[s++]=r[7],n[s++]=4294967295,n[s++]=4294967295}var l=this._paramData._int32Data;l[t._PARAM_TEXLOCATION_POS_]=33984,l[t._PARAM_TEXTURE_POS_]=this._texture.bitmap._glTexture.id,$.syncBufferToRenderThread(this.vbBuffer),$.syncBufferToRenderThread(this._paramData)}),a(0,e,"pos",function(){return this._pos},function(e){this._pos=e;var _=this._pos.length/2,i=this._texture.bitmap.width,r=this._texture.bitmap.height,a=this._texture.uv;(!this.vbBuffer||this.vbBuffer.getByteLength()<24*_*4)&&(this.vbBuffer=new ParamData(24*_*4,!0)),this._vbSize=24*_*4,this._rectNum=_;for(var n=this.vbBuffer._float32Data,s=this.vbBuffer._int32Data,o=0,h=0;_>h;h++){var u=this.pos[2*h],l=this.pos[2*h+1];n[o++]=u,n[o++]=l,n[o++]=a[0],n[o++]=a[1],s[o++]=4294967295,s[o++]=4294967295,n[o++]=u+i,n[o++]=l,n[o++]=a[2],n[o++]=a[3],s[o++]=4294967295,s[o++]=4294967295,n[o++]=u+i,n[o++]=l+r,n[o++]=a[4],n[o++]=a[5],s[o++]=4294967295,s[o++]=4294967295,n[o++]=u,n[o++]=l+r,n[o++]=a[6],n[o++]=a[7],s[o++]=4294967295,s[o++]=4294967295}var c=(this._paramData._float32Data,this._paramData._int32Data);c[t._PARAM_RECT_NUM_POS_]=this._rectNum,c[t._PARAM_VB_POS_]=this.vbBuffer.getPtrID(),c[t._PARAM_VB_SIZE_POS_]=this._vbSize,$.syncBufferToRenderThread(this.vbBuffer),$.syncBufferToRenderThread(this._paramData)}),t.create=function(e,_){var i=O.getItemByClass("DrawTexturesCmd",t);i._graphicsCmdEncoder=this._commandEncoder,t._DRAW_TEXTURES_CMD_ENCODER_||(t._DRAW_TEXTURES_CMD_ENCODER_=$.instance.createCommandEncoder(124,32,!0),t._DRAW_TEXTURES_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWTEXTURE),t._DRAW_TEXTURES_CMD_ENCODER_.useVDO(_e.VDO_MESHQUADTEXTURE),t._DRAW_TEXTURES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_TEXTURES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TEXTURES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TEXTURES_CMD_ENCODER_.uniformTextureByParamData(t._PARAM_UNIFORMLOCATION_POS_,4*t._PARAM_TEXLOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TEXTURES_CMD_ENCODER_.setRectMeshExByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_),t._DRAW_TEXTURES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TEXTURES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._DRAW_TEXTURES_CMD_ENCODER_)),i._paramData||(i._paramData=new ParamData(24,!0)),i._texture=e,i._pos=_;var r=e.bitmap.width,a=e.bitmap.height,n=e.uv,s=_.length/2;(!i.vbBuffer||i.vbBuffer.getByteLength()<24*s*4)&&(i.vbBuffer=new ParamData(24*s*4,!0)),i._vbSize=24*s*4,i._rectNum=s;for(var o=i.vbBuffer._float32Data,h=i.vbBuffer._int32Data,u=0,l=0;s>l;l++){var c=_[2*l],f=_[2*l+1];o[u++]=c,o[u++]=f,o[u++]=n[0],o[u++]=n[1],h[u++]=4294967295,h[u++]=4294967295,o[u++]=c+r,o[u++]=f,o[u++]=n[2],o[u++]=n[3],h[u++]=4294967295,h[u++]=4294967295,o[u++]=c+r,o[u++]=f+a,o[u++]=n[4],o[u++]=n[5],h[u++]=4294967295,h[u++]=4294967295,o[u++]=c,o[u++]=f+a,o[u++]=n[6],o[u++]=n[7],h[u++]=4294967295,h[u++]=4294967295}var d=(i._paramData._float32Data,i._paramData._int32Data);return d[t._PARAM_UNIFORMLOCATION_POS_]=3,d[t._PARAM_TEXLOCATION_POS_]=33984,d[t._PARAM_TEXTURE_POS_]=e.bitmap._glTexture.id,d[t._PARAM_RECT_NUM_POS_]=i._rectNum,d[t._PARAM_VB_POS_]=i.vbBuffer.getPtrID(),d[t._PARAM_VB_SIZE_POS_]=i._vbSize,$.syncBufferToRenderThread(i.vbBuffer),$.syncBufferToRenderThread(i._paramData),i._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TEXTURES_CMD_ENCODER_.getPtrID(),i._paramData.getPtrID(),-1),$.syncBufferToRenderThread(i._graphicsCmdEncoder),i},t.ID="DrawTextures",t._DRAW_TEXTURES_CMD_ENCODER_=null,t._PARAM_UNIFORMLOCATION_POS_=0,t._PARAM_TEXLOCATION_POS_=1,t._PARAM_TEXTURE_POS_=2,t._PARAM_RECT_NUM_POS_=3,t._PARAM_VB_POS_=4,t._PARAM_VB_SIZE_POS_=5,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._texture=null,this._x=0/0,this._y=0/0,this._vertices=null,this._uvs=null,this._indices=null,this._matrix=null,this._alpha=0/0,this._color=null,this._blendMode=null,this.vbBuffer=null,this._vbSize=0/0,this.ibBuffer=null,this._ibSize=0/0,this._verticesNum=0/0,this._ibNum=0/0,this._blend_src=0,this._blend_dest=0}r(t,"laya.layagl.cmdNative.DrawTrianglesCmdNative");var e=t.prototype;return e.recover=function(){this._texture=null,this._vertices=null,this._uvs=null,this._indices=null,this._matrix=null,O.recover("DrawTrianglesCmd",this)},e._setBlendMode=function(t){switch(t){case"normal":this._blend_src=1,this._blend_dest=771;break;case"add":this._blend_src=1,this._blend_dest=772;break;case"multiply":this._blend_src=774,this._blend_dest=771;break;case"screen":this._blend_src=1,this._blend_dest=1;break;case"lighter":this._blend_src=1,this._blend_dest=1;break;case"overlay":this._blend_src=1,this._blend_dest=769;break;case"destination-out":this._blend_src=0,this._blend_dest=0;break;case"mask":this._blend_src=0,this._blend_dest=770;break;default:alert("_setBlendMode Unknown type")}},e._mixRGBandAlpha=function(t,e){var _=(4278190080&t)>>>24;return 0!=_?_*=e:_=255*e,16777215&t|_<<24},a(0,e,"vertices",function(){return this._vertices},function(t){this._vertices=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._verticesNum;i++)e[_++]=this._x+t[2*i],e[_++]=this._y+t[2*i+1],_++,_++,_++,_++;$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"cmdID",function(){return"DrawTriangles"}),a(0,e,"matrix",function(){return this._matrix},function(e){this._matrix=e;var _=this._paramData._float32Data;_[t._PARAM_MATRIX_POS_]=e.a,_[t._PARAM_MATRIX_POS_+1]=e.b,_[t._PARAM_MATRIX_POS_+2]=e.c,_[t._PARAM_MATRIX_POS_+3]=e.d,_[t._PARAM_MATRIX_POS_+4]=e.tx,_[t._PARAM_MATRIX_POS_+5]=e.ty,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"texture",function(){return this._texture},function(e){if(e&&e.url){this._texture=e;var _=this._paramData._int32Data;_[t._PARAM_TEXTURE_POS_]=this._texture.bitmap._glTexture.id,$.syncBufferToRenderThread(this._paramData)}}),a(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._verticesNum;i++)_++,e[_++]=t+this.vertices[2*i+1],_++,_++,_++,_++;$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._verticesNum;i++)e[_++]=t+this.vertices[2*i],_++,_++,_++,_++,_++;$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"alpha",function(){return this._alpha},function(t){this._alpha=t}),a(0,e,"uvs",function(){return this._uvs},function(t){this._uvs=t;for(var e=this.vbBuffer._float32Data,_=0,i=0;i<this._verticesNum;i++)_++,_++,e[_++]=t[2*i],e[_++]=t[2*i+1],_++,_++;$.syncBufferToRenderThread(this.vbBuffer)}),a(0,e,"indices",function(){return this._indices},function(t){this._indices=t;for(var e=this.ibBuffer._int16Data,_=0,i=0;i<this._ibNum;i++)e[_++]=t[i];$.syncBufferToRenderThread(this.ibBuffer)}),a(0,e,"color",function(){return this._color},function(t){this._color=t}),a(0,e,"blendMode",function(){return this._blendMode},function(t){this._blendMode=t}),t.create=function(e,_,i,r,a,n,s,o,h,c){var f=O.getItemByClass("DrawTrianglesCmd",t);f._graphicsCmdEncoder=this._commandEncoder,t._DRAW_TRIANGLES_CMD_ENCODER_||(t._DRAW_TRIANGLES_CMD_ENCODER_=$.instance.createCommandEncoder(152,32,!0),t._DRAW_TRIANGLES_CMD_ENCODER_.save(),t._DRAW_TRIANGLES_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWTEXTURE),t._DRAW_TRIANGLES_CMD_ENCODER_.useVDO(_e.VDO_MESHQUADTEXTURE),t._DRAW_TRIANGLES_CMD_ENCODER_.setGlobalValueByParamData(_e.GLOBALVALUE_MATRIX32,7,4*t._PARAM_MATRIX_POS_),t._DRAW_TRIANGLES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_TRIANGLES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TRIANGLES_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TRIANGLES_CMD_ENCODER_.uniformTextureByParamData(4*t._PARAM_UNIFORMLOCATION_POS_,4*t._PARAM_TEXLOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TRIANGLES_CMD_ENCODER_.blendFuncByGlobalValue(_e.GLOBALVALUE_BLENDFUNC_SRC,_e.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TRIANGLES_CMD_ENCODER_.blendFuncByParamData(4*t._PARAM_BLEND_SRC_POS_,4*t._PARAM_BLEND_DEST_POS_),t._DRAW_TRIANGLES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_TRIANGLES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TRIANGLES_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_TRIANGLES_CMD_ENCODER_.restore(),$.syncBufferToRenderThread(t._DRAW_TRIANGLES_CMD_ENCODER_)),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_||(t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_=$.instance.createCommandEncoder(152,32,!0),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.save(),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.addShaderMacro(_e.SHADER_MACRO_COLOR_FILTER),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.setGlobalValueByParamData(_e.GLOBALVALUE_COLORFILTER_COLOR,8,4*t._PARAM_FILTER_COLOR_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.setGlobalValueByParamData(_e.GLOBALVALUE_COLORFILTER_ALPHA,8,4*t._PARAM_FILTER_ALPHA_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.useProgramEx(_e.PROGRAMEX_DRAWTEXTURE),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.useVDO(_e.VDO_MESHQUADTEXTURE),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.setGlobalValueByParamData(_e.GLOBALVALUE_MATRIX32,7,4*t._PARAM_MATRIX_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_VIEWS,0),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.uniformTextureByParamData(4*t._PARAM_UNIFORMLOCATION_POS_,4*t._PARAM_TEXLOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.blendFuncByGlobalValue(_e.GLOBALVALUE_BLENDFUNC_SRC,_e.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.blendFuncByParamData(4*t._PARAM_BLEND_SRC_POS_,4*t._PARAM_BLEND_DEST_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.restore(),$.syncBufferToRenderThread(t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_)),f._paramData||(f._paramData=new ParamData(152,!0)),f._texture=e,f._x=_,f._y=i,f._vertices=r,f._uvs=a,f._indices=n,f._matrix=s?s:new p,f._alpha=o,f._color=h,f._blendMode=c;var d=new u,E=l.create(h);d.color(E.arrColor[0],E.arrColor[1],E.arrColor[2],E.arrColor[3]),f._verticesNum=f._vertices.length/2;var A=f._verticesNum;(!f.vbBuffer||f.vbBuffer.getByteLength()<24*A*3)&&(f.vbBuffer=new ParamData(24*A*3,!0)),f._vbSize=24*A*3;var D=f.vbBuffer._float32Data,R=f.vbBuffer._int32Data,m=4294967295;o&&(m=f._mixRGBandAlpha(m,o));for(var T=0,P=0;P<f._verticesNum;P++)D[T++]=_/f._matrix.a+r[2*P],D[T++]=i/f._matrix.d+r[2*P+1],D[T++]=a[2*P],D[T++]=a[2*P+1],R[T++]=m,R[T++]=4294967295;f._ibNum=n.length;var v=f._ibNum;(!f.ibBuffer||f.ibBuffer.getByteLength()<2*v)&&(f.ibBuffer=new ParamData(2*v,!0,!0)),f._ibSize=2*v;for(var C=f.ibBuffer._int16Data,M=0,S=0;S<f._ibNum;S++)C[M++]=n[S];var g=f._paramData._float32Data,y=f._paramData._int32Data;if(y[t._PARAM_UNIFORMLOCATION_POS_]=3,y[t._PARAM_TEXLOCATION_POS_]=33984,y[t._PARAM_TEXTURE_POS_]=e.bitmap._glTexture.id,y[t._PARAM_VB_POS_]=f.vbBuffer.getPtrID(),y[t._PARAM_VB_SIZE_POS_]=f._vbSize,y[t._PARAM_IB_POS_]=f.ibBuffer.getPtrID(),y[t._PARAM_IB_SIZE_POS_]=f._ibSize,y[t._PARAM_VB_OFFSET_POS_]=0,y[t._PARAM_IB_OFFSET_POS_]=0,y[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,g[t._PARAM_MATRIX_POS_]=f._matrix.a,g[t._PARAM_MATRIX_POS_+1]=f._matrix.b,g[t._PARAM_MATRIX_POS_+2]=f._matrix.c,g[t._PARAM_MATRIX_POS_+3]=f._matrix.d,g[t._PARAM_MATRIX_POS_+4]=f._matrix.tx,g[t._PARAM_MATRIX_POS_+5]=f._matrix.ty,c?(f._setBlendMode(c),y[t._PARAM_BLEND_SRC_POS_]=f._blend_src,y[t._PARAM_BLEND_DEST_POS_]=f._blend_dest):(y[t._PARAM_BLEND_SRC_POS_]=-1,y[t._PARAM_BLEND_DEST_POS_]=-1),h){T=t._PARAM_FILTER_COLOR_POS_;var L=d._mat;g[T++]=L[0],g[T++]=L[1],g[T++]=L[2],g[T++]=L[3],g[T++]=L[4],g[T++]=L[5],g[T++]=L[6],g[T++]=L[7],g[T++]=L[8],g[T++]=L[9],g[T++]=L[10],g[T++]=L[11],g[T++]=L[12],g[T++]=L[13],g[T++]=L[14],g[T++]=L[15],T=t._PARAM_FILTER_ALPHA_POS_;var b=d._alpha;g[T++]=255*b[0],g[T++]=255*b[1],g[T++]=255*b[2],g[T++]=255*b[3]}return $.syncBufferToRenderThread(f.vbBuffer),$.syncBufferToRenderThread(f.ibBuffer),$.syncBufferToRenderThread(f._paramData),h?f._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.getPtrID(),f._paramData.getPtrID(),-1):f._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TRIANGLES_CMD_ENCODER_.getPtrID(),f._paramData.getPtrID(),-1),$.syncBufferToRenderThread(f._graphicsCmdEncoder),f},t.ID="DrawTriangles",t._DRAW_TRIANGLES_CMD_ENCODER_=null,t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_=null,t._PARAM_UNIFORMLOCATION_POS_=0,t._PARAM_TEXLOCATION_POS_=1,t._PARAM_TEXTURE_POS_=2,t._PARAM_VB_POS_=3,t._PARAM_VB_SIZE_POS_=4,t._PARAM_IB_POS_=5,t._PARAM_IB_SIZE_POS_=6,t._PARAM_VB_OFFSET_POS_=7,t._PARAM_IB_OFFSET_POS_=8,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=9,t._PARAM_BLEND_SRC_POS_=10,t._PARAM_BLEND_DEST_POS_=11,t._PARAM_MATRIX_POS_=12,t._PARAM_FILTER_COLOR_POS_=18,t._PARAM_FILTER_ALPHA_POS_=34,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._text=null,this._x=0/0,this._y=0/0,this._font=null,this._color=null,this._strokeColor=null,this._strokeWidth=0,this._textAlign=null,this._draw_texture_cmd_encoder_=$.instance.createCommandEncoder(64,32,!0)}r(t,"laya.layagl.cmdNative.FillBorderTextCmdNative");var e=t.prototype;return e.createFillBorderText=function(e,_,i,r,a,n,s,o,h){var u=l.create(n),c=(u.numColor,{});c._curMat=new p,c._italicDeg=0,c._drawTextureUseColor=4294967295,c.fillStyle=n,c._fillColor=4294967295,c.setFillColor=function(t){c._fillColor=t},c.getFillColor=function(){return c._fillColor},c.mixRGBandAlpha=function(t){return t},c._drawTextureM=function(t,_,i,r,a,n,s,o){e.useProgramEx(_e.PROGRAMEX_DRAWTEXTURE),e.useVDO(_e.VDO_MESHQUADTEXTURE),e.uniformEx(_e.GLOBALVALUE_VIEWS,0),e.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),e.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),e.uniformTexture(3,33984,t.bitmap._glTexture);var h=new Float32Array([_,i,o[0],o[1],0,0,_+r,i,o[2],o[3],0,0,_+r,i+a,o[4],o[5],0,0,_,i+a,o[6],o[7],0,0]),u=new Int32Array(h.buffer);u[4]=u[10]=u[16]=u[22]=4294967295,u[5]=u[11]=u[17]=u[23]=4294967295,e.setRectMesh(1,h,h.length),e.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),e.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(e)},t.cbook.filltext_native(c,_,i,r,a,n,s,o,h)},e.recover=function(){this._graphicsCmdEncoder=null,O.recover("FillTextCmd",this)},a(0,e,"text",function(){return this._text},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._text=t,this.createFillBorderText(e,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),$.syncBufferToRenderThread(e)}),a(0,e,"cmdID",function(){return"FillBorderText"}),a(0,e,"font",function(){return this._font},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._font=t,this.createFillBorderText(e,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),$.syncBufferToRenderThread(e)}),a(0,e,"color",function(){return this._color},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._color=t,this.createFillBorderText(e,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),$.syncBufferToRenderThread(e)}),a(0,e,"textAlign",function(){return this._textAlign},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._textAlign=t,this.createFillBorderText(e,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),$.syncBufferToRenderThread(e)}),a(0,e,"x",function(){return this._x},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._x=t,this.createFillBorderText(e,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),$.syncBufferToRenderThread(e)}),a(0,e,"y",function(){return this._y},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._y=t,this.createFillBorderText(e,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),$.syncBufferToRenderThread(e)}),t.create=function(e,_,i,r,a,n,s,o){t.cbook||new Error("Error:charbook not create!");var h=O.getItemByClass("FillBorderText",t),u=h._graphicsCmdEncoder=this._commandEncoder;return h._text=e,h._x=_,h._y=i,h._font=r,h._color=a,h._strokeColor=n,h._strokeWidth=s,h._textAlign=o,h._draw_texture_cmd_encoder_.clearEncoding(),h.createFillBorderText(h._draw_texture_cmd_encoder_,e,_,i,r,a,n,s,o),$.syncBufferToRenderThread(h._draw_texture_cmd_encoder_),u.useCommandEncoder(h._draw_texture_cmd_encoder_.getPtrID(),-1,-1),$.syncBufferToRenderThread(u),h},t.ID="FillBorderText",i(t,["cbook",function(){return this.cbook=le.charbookInst}]),t}(),function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._text=null,this._x=0/0,this._y=0/0,this._font=null,this._color=null,this._textAlign=null,this._draw_texture_cmd_encoder_=$.instance.createCommandEncoder(64,32,!0)}r(t,"laya.layagl.cmdNative.FillTextCmdNative");var e=t.prototype;return e.createFillText=function(e,_,i,r,a,n,s){var o=l.create(n),h=o.numColor,u={};u._curMat=new p,u._italicDeg=0,u._drawTextureUseColor=4294967295,u.fillStyle=n,u._fillColor=4294967295,u.setFillColor=function(t){u._fillColor=t},u.getFillColor=function(){return u._fillColor},u.mixRGBandAlpha=function(t){return t},u._drawTextureM=function(t,_,i,r,a,n,s,o){e.useProgramEx(_e.PROGRAMEX_DRAWTEXTURE),e.useVDO(_e.VDO_MESHQUADTEXTURE),e.uniformEx(_e.GLOBALVALUE_VIEWS,0),e.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),e.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),e.uniformTexture(3,33984,t.bitmap._glTexture);var u=new Float32Array([_,i,o[0],o[1],0,0,_+r,i,o[2],o[3],0,0,_+r,i+a,o[4],o[5],0,0,_,i+a,o[6],o[7],0,0]),l=new Int32Array(u.buffer);l[4]=l[10]=l[16]=l[22]=h,l[5]=l[11]=l[17]=l[23]=4294967295,e.setRectMesh(1,u,u.length),e.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),e.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(e)},t.cbook.filltext_native(u,_,i,r,a,n,null,0,s)},e.recover=function(){this._graphicsCmdEncoder=null,O.recover("FillTextCmd",this)},a(0,e,"text",function(){return this._text},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._text=t,this.createFillText(e,this._text,this._x,this._y,this._font,this._color,this._textAlign),$.syncBufferToRenderThread(e)}),a(0,e,"cmdID",function(){return"FillText"}),a(0,e,"font",function(){return this._font},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._font=t,this.createFillText(e,this._text,this._x,this._y,this._font,this._color,this._textAlign),$.syncBufferToRenderThread(e)}),a(0,e,"color",function(){return this._color},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._color=t,this.createFillText(e,this._text,this._x,this._y,this._font,this._color,this._textAlign),$.syncBufferToRenderThread(e)}),a(0,e,"textAlign",function(){return this._textAlign},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._textAlign=t,this.createFillText(e,this._text,this._x,this._y,this._font,this._color,this._textAlign),$.syncBufferToRenderThread(e)}),a(0,e,"x",function(){return this._x},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._x=t,this.createFillText(e,this._text,this._x,this._y,this._font,this._color,this._textAlign),$.syncBufferToRenderThread(e)}),a(0,e,"y",function(){return this._y},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._y=t,this.createFillText(e,this._text,this._x,this._y,this._font,this._color,this._textAlign),$.syncBufferToRenderThread(e)}),t.create=function(e,_,i,r,a,n){t.cbook||new Error("Error:charbook not create!");var s=O.getItemByClass("FillTextCmd",t),o=s._graphicsCmdEncoder=this._commandEncoder;return s._text=e,s._x=_,s._y=i,s._font=r,s._color=a,s._textAlign=n,s._draw_texture_cmd_encoder_.clearEncoding(),s.createFillText(s._draw_texture_cmd_encoder_,e,_,i,r,a,n),$.syncBufferToRenderThread(s._draw_texture_cmd_encoder_),o.useCommandEncoder(s._draw_texture_cmd_encoder_.getPtrID(),-1,-1),$.syncBufferToRenderThread(o),s},t.ID="FillText",i(t,["cbook",function(){return this.cbook=le.charbookInst}]),t}(),function(){function t(){this._graphicsCmdEncoder=null}r(t,"laya.layagl.cmdNative.RestoreCmdNative");var e=t.prototype;return e.recover=function(){O.recover("RestoreCmd",this)},a(0,e,"cmdID",function(){return"Restore"}),t.create=function(){var e=O.getItemByClass("RestoreCmd",t),_=e._graphicsCmdEncoder=this._commandEncoder;return _.restore(),$.syncBufferToRenderThread(_),e},t.ID="Restore",t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=new ParamData(12,!0)}r(t,"laya.layagl.cmdNative.RotateCmdNative");var e=t.prototype;return e.recover=function(){O.recover("RotateCmd",this)},a(0,e,"cmdID",function(){return"Rotate"}),a(0,e,"angle",function(){return this._paramData._float32Data[0]},function(t){this._paramData._float32Data[0]=t,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"pivotX",function(){return this._paramData._float32Data[1]},function(t){this._paramData._float32Data[1]=t,$.syncBufferToRenderThread(this._paramData)
}),a(0,e,"pivotY",function(){return this._paramData._float32Data[2]},function(t){this._paramData._float32Data[2]=t,$.syncBufferToRenderThread(this._paramData)}),t.create=function(e,_,i){var r=O.getItemByClass("RotateCmd",t),a=r._graphicsCmdEncoder=this._commandEncoder,n=r._paramData._float32Data;n[0]=e,n[1]=_,n[2]=i;var s=r._paramData.getPtrID();return $.syncBufferToRenderThread(r._paramData),a.setGlobalValueEx(_e.GLOBALVALUE_MATRIX32,13,s,0),$.syncBufferToRenderThread(a),r},t.ID="Rotate",t}(),function(){function t(){this._graphicsCmdEncoder=null}r(t,"laya.layagl.cmdNative.SaveCmdNative");var e=t.prototype;return e.recover=function(){O.recover("SaveCmd",this)},a(0,e,"cmdID",function(){return"Save"}),t.create=function(){var e=O.getItemByClass("SaveCmd",t),_=e._graphicsCmdEncoder=this._commandEncoder;return _.save(),$.syncBufferToRenderThread(_),e},t.ID="Save",t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=new ParamData(16,!0)}r(t,"laya.layagl.cmdNative.ScaleCmdNative");var e=t.prototype;return e.recover=function(){O.recover("ScaleCmd",this)},a(0,e,"cmdID",function(){return"Scale"}),a(0,e,"scaleX",function(){return this._paramData._float32Data[0]},function(t){this._paramData._float32Data[0]=t,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"scaleY",function(){return this._paramData._float32Data[1]},function(t){this._paramData._float32Data[1]=t,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"pivotX",function(){return this._paramData._float32Data[2]},function(t){this._paramData._float32Data[2]=t,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"pivotY",function(){return this._paramData._float32Data[3]},function(t){this._paramData._float32Data[3]=t,$.syncBufferToRenderThread(this._paramData)}),t.create=function(e,_,i,r){var a=O.getItemByClass("ScaleCmd",t),n=a._graphicsCmdEncoder=this._commandEncoder,s=a._paramData._float32Data;s[0]=e,s[1]=_,s[2]=i,s[3]=r;var o=a._paramData.getPtrID();return $.syncBufferToRenderThread(a._paramData),n.setGlobalValueEx(_e.GLOBALVALUE_MATRIX32,12,o,0),$.syncBufferToRenderThread(n),a},t.ID="Scale",t}(),function(){function t(){this._graphicsCmdEncoder=null,this._matrix=null,this._paramData=new ParamData(32,!0)}r(t,"laya.layagl.cmdNative.TransformCmdNative");var e=t.prototype;return e.recover=function(){this._matrix=null,O.recover("TransformCmd",this)},a(0,e,"cmdID",function(){return"Transform"}),a(0,e,"matrix",function(){return this._matrix},function(t){this._matrix=t;var e=this._paramData._float32Data;e[0]=this._matrix.a,e[1]=this._matrix.b,e[2]=this._matrix.c,e[3]=this._matrix.d,e[4]=this._matrix.tx,e[5]=this._matrix.ty,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"pivotX",function(){return this._paramData._float32Data[6]},function(t){this._paramData._float32Data[6]=t,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"pivotY",function(){return this._paramData._float32Data[7]},function(t){this._paramData._float32Data[7]=t,$.syncBufferToRenderThread(this._paramData)}),t.create=function(e,_,i){var r=O.getItemByClass("TransformCmd",t),a=r._graphicsCmdEncoder=this._commandEncoder,n=r._paramData._float32Data;n[0]=e.a,n[1]=e.b,n[2]=e.c,n[3]=e.d,n[4]=e.tx,n[5]=e.ty,n[6]=_,n[7]=i,r._matrix=e;var s=r._paramData.getPtrID();return $.syncBufferToRenderThread(r._paramData),a.setGlobalValueEx(_e.GLOBALVALUE_MATRIX32,14,s,0),$.syncBufferToRenderThread(a),r},t.ID="Transform",t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=new ParamData(8,!0)}r(t,"laya.layagl.cmdNative.TranslateCmdNative");var e=t.prototype;return e.recover=function(){O.recover("TranslateCmd",this)},a(0,e,"ty",function(){return this._paramData._float32Data[1]},function(t){this._paramData._float32Data[1]=t,$.syncBufferToRenderThread(this._paramData)}),a(0,e,"cmdID",function(){return"Translate"}),a(0,e,"tx",function(){return this._paramData._float32Data[0]},function(t){this._paramData._float32Data[0]=t,$.syncBufferToRenderThread(this._paramData)}),t.create=function(e,_){var i=O.getItemByClass("TranslateCmd",t),r=i._graphicsCmdEncoder=this._commandEncoder,a=i._paramData._float32Data;a[0]=e,a[1]=_;var n=i._paramData.getPtrID();return $.syncBufferToRenderThread(i._paramData),r.setGlobalValueEx(_e.GLOBALVALUE_MATRIX32,9,n,0),$.syncBufferToRenderThread(r),i},t.ID="Translate",t}(),function(){function t(){this._idata=[]}r(t,"laya.layagl.CommandEncoder");var e=t.prototype;return e.getArrayData=function(){return this._idata},e.getPtrID=function(){return 0},e.beginEncoding=function(){},e.endEncoding=function(){},e.clearEncoding=function(){this._idata.length=0},e.getCount=function(){return this._idata.length},e.add_ShaderValue=function(t){this._idata.push(t)},e.addShaderUniform=function(t){this.add_ShaderValue(t)},t}()),Q=function(){function t(){}return r(t,"laya.layagl.ConchCmdReplace"),t.__init__=function(){var t,e=laya.display.cmd,_=laya.layagl.cmdNative;for(t in e)_[t+"Native"]&&(e[t].create=_[t+"Native"].create)},t}(),q=function(){function t(){this._commandEncoder=null}r(t,"laya.layagl.ConchGraphicsAdpt");var e=t.prototype;return e._createData=function(){this._commandEncoder=$.instance.createCommandEncoder(128,64,!0)},e._clearData=function(){this._commandEncoder&&this._commandEncoder.clearEncoding()},e._destroyData=function(){this._commandEncoder&&(this._commandEncoder.clearEncoding(),this._commandEncoder=null)},t.__init__=function(){var e=T.prototype,_=t.prototype,i=["_createData","_clearData","_destroyData"],r=0,a=0;a=i.length;var n;for(r=0;a>r;r++)n=i[r],e[n]=_[n]},t}(),$=function(){function t(){}r(t,"laya.layagl.LayaGL");var e=t.prototype;return e.createCommandEncoder=function(t,e,_){return void 0===t&&(t=128),void 0===e&&(e=64),void 0===_&&(_=!1),new K(this,t,e,_)},e.beginCommandEncoding=function(){},e.endCommandEncoding=function(){},t.getFrameCount=function(){return 0},t.syncBufferToRenderThread=function(t,e){void 0===e&&(e=0)},t.createArrayBufferRef=function(){},t.createArrayBufferRefs=function(){},t.EXECUTE_JS_THREAD_BUFFER=0,t.EXECUTE_RENDER_THREAD_BUFFER=1,t.EXECUTE_COPY_TO_RENDER=2,t.EXECUTE_COPY_TO_RENDER3D=3,t.VALUE_OPERATE_ADD=0,t.VALUE_OPERATE_SUB=1,t.VALUE_OPERATE_MUL=2,t.VALUE_OPERATE_DIV=3,t.VALUE_OPERATE_M2_MUL=4,t.VALUE_OPERATE_M3_MUL=5,t.VALUE_OPERATE_M4_MUL=6,t.VALUE_OPERATE_M32_MUL=7,t.VALUE_OPERATE_SET=8,t.VALUE_OPERATE_M32_TRANSLATE=9,t.VALUE_OPERATE_M32_SCALE=10,t.VALUE_OPERATE_M32_ROTATE=11,t.VALUE_OPERATE_M32_SCALE_PIVOT=12,t.VALUE_OPERATE_M32_ROTATE_PIVOT=13,t.VALUE_OPERATE_M32_TRANSFORM_PIVOT=14,t.VALUE_OPERATE_BYTE4_COLOR_MUL=15,t.ARRAY_BUFFER_TYPE_DATA=0,t.ARRAY_BUFFER_TYPE_CMD=1,t.ARRAY_BUFFER_REF_REFERENCE=0,t.ARRAY_BUFFER_REF_COPY=1,t.UPLOAD_SHADER_UNIFORM_TYPE_ID=0,t.UPLOAD_SHADER_UNIFORM_TYPE_DATA=1,t.instance=null,t}(),J=function(){function t(){this._customCmds=null,this._targets=null,this._width=0,this._height=0}r(t,"laya.layagl.LayaGLRenderingContext");var e=t.prototype;return e.drawTexture=function(t,e,_,i,r){void 0===e&&(e=0),void 0===_&&(_=0),void 0===i&&(i=0),void 0===r&&(r=0),this.drawImage(t,e,_,i,r)},e.drawImage=function(t,e,_,i,r){void 0===e&&(e=0),void 0===_&&(_=0),void 0===i&&(i=0),void 0===r&&(r=0),this._customCmds.push(E.create.call(this,t,e,_,i,r))},e.fillText=function(t,e,_,i,r,a){this._customCmds.push(A.create.call(this,t,e,_,i||G.defaultFontStr(),r,a))},e.save=function(){this._customCmds.push(x.create.call(this))},e.restore=function(){this._customCmds.push(b.create.call(this))},e.translate=function(t,e){this._customCmds.push(z.create.call(this,t,e))},e.rotate=function(t,e,_){void 0===e&&(e=0),void 0===_&&(_=0),this._customCmds.push(B.create.call(this,t,e,_))},e.scale=function(t,e,_,i){void 0===_&&(_=0),void 0===i&&(i=0),this._customCmds.push(N.create.call(this,t,e,_,i))},e.transform=function(t,e,_){void 0===e&&(e=0),void 0===_&&(_=0),this._customCmds.push(k.create.call(this,t,e,_))},e.beginRT=function(){__.pushRT(),this._targets.start(),this.clear()},e.clear=function(){},e.endRT=function(){__.popRT()},e.drawCanvas=function(t,e,_){var i=t.context._targets;this._customCmds.push(d.create.call(this,i,e,_,i.width,i.height))},e.drawTarget=function(t,e,_,i,r,a){var n=new ArrayBuffer(96),s=new Int32Array(n),o=new Float32Array(n),h=0!=r?r:e.width,u=0!=a?a:e.height,l=__.flipyuv,c=0;o[c++]=_,o[c++]=i,o[c++]=l[0],o[c++]=l[1],s[c++]=4294967295,s[c++]=4294967295,o[c++]=_+h,o[c++]=i,o[c++]=l[2],o[c++]=l[3],s[c++]=4294967295,s[c++]=4294967295,o[c++]=_+h,o[c++]=i+u,o[c++]=l[4],o[c++]=l[5],s[c++]=4294967295,s[c++]=4294967295,o[c++]=_,o[c++]=i+u,o[c++]=l[6],o[c++]=l[7],s[c++]=4294967295,s[c++]=4294967295,t.useProgramEx(_e.PROGRAMEX_DRAWTEXTURE),t.useVDO(_e.VDO_MESHQUADTEXTURE),t.uniformEx(_e.GLOBALVALUE_VIEWS,0),t.uniformEx(_e.GLOBALVALUE_CLIP_MAT_DIR,1),t.uniformEx(_e.GLOBALVALUE_CLIP_MAT_POS,2),t.uniformTexture(0,33984,e._getSource()),t.setRectMesh(1,n),t.modifyMesh(_e.GLOBALVALUE_MATRIX32,0,7),t.modifyMesh(_e.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15)},a(0,e,"asBitmap",function(){return!this._targets},function(t){if(t){if(this._targets||(this._targets=new __(this._width,this._height,1,-1)),!this._width||!this._height)throw Error("asBitmap no size!")}else this._targets=null}),t}(),te=function(){function t(){}return r(t,"laya.layagl.LayaGLRunner"),t.uploadShaderUniforms=function(t,e,_,i){for(var r=_._data,a=e.getArrayData(),n=0,s=0,o=a.length;o>s;s++){var h=a[s];if(i||-1!==h.textureID){var u=r[h.dataOffset];null!=u&&(n+=h.fun.call(h.caller,h,u))}}return n},t.uploadCustomUniform=function(t,e,_,i){var r=0,a=e[_];return a&&null!=i&&(r+=a.fun.call(a.caller,a,i)),r},t.uploadShaderUniformsForNative=function(t,e,_){var i=0;_._runtimeCopyValues.length>=0&&(i=1);var r=_._data;return t.uploadShaderUniforms(e,r,i)},t}(),ee=function(){function e(){this._commStr="",this._commandEncoder=null,this._id=0,this._commandEncoder=$.instance.createCommandEncoder(64,16,!1)}r(e,"laya.layagl.LayaGLTemplate");var _=e.prototype;return _.addComd=function(t,e){this._commStr+=t+"("+e+");",this._commandEncoder[t].apply(this._commandEncoder,e)},e.createByRenderType=function(_){var i=e.GLS[_]=new e;g.isConchApp&&t.conch.setGLTemplate(_,i._commandEncoder.getPtrID());for(var r=1;8192>=r;){var a=_&r;if(a&&e.__FUN_PARAM__[r])for(var n=e.__FUN_PARAM__[r],s=0,o=n.length;o>s;s++){var h=n[s];i.addComd(h.func,h.args)}r<<=1}return i._id=_,console.log("template="+i._commStr),i},e.createByRenderTypeEnd=function(_){var i=e.GLSE[_]=new e;g.isConchApp&&t.conch.setEndGLTemplate(_,i._commandEncoder.getPtrID());for(var r=8192;r>1;){var a=_&r;if(a&&e.__FUN_PARAM_END_[r])for(var n=e.__FUN_PARAM_END_[r],s=0,o=n.length;o>s;s++){var h=n[s];i.addComd(h.func,h.args)}r>>=1}return i._id=_,console.log("templateEnd="+i._commStr),i},e.__init__=function(){e.__FUN_PARAM__[1]=[{func:"setGlobalValueByParamData",args:[_e.GLOBALVALUE_DRAWTEXTURE_COLOR,15,88]}],e.__FUN_PARAM__[2]=[{func:"calcLocalMatrix32",args:[60,64,24,28,32,36,40,44,48,52,56]},{func:"setGlobalValueByParamData",args:[_e.GLOBALVALUE_MATRIX32,7,64]}],e.__FUN_PARAM__[4]=[{func:"setGlobalValueByParamData",args:[_e.GLOBALVALUE_BLENDFUNC_SRC,8,284]},{func:"setGlobalValueByParamData",args:[_e.GLOBALVALUE_BLENDFUNC_DEST,8,288]}],e.__FUN_PARAM__[256]=[{func:"useCommandEncoderByParamData",args:[96,100,1]}],e.__FUN_PARAM__[512]=[{func:"callbackJSByParamData",args:[216,272]},{func:"useCommandEncoderByParamData",args:[92,-1,1]}],e.__FUN_PARAM__[1024]=[{func:"callbackJSByParamData",args:[216,248]},{func:"useCommandEncoderByParamData",args:[104,-1,3]}],e.__FUN_PARAM__[2048]=[{func:"callbackJSByParamData",args:[216,220]},{func:"useCommandEncoderByParamData",args:[108,-1,1]}],e.__FUN_PARAM__[64]=[{func:"setClipByParamData",args:[_e.GLOBALVALUE_CLIP_MAT_DIR,_e.GLOBALVALUE_CLIP_MAT_POS,_e.GLOBALVALUE_MATRIX32,112]},{func:"setGlobalValueByParamData",args:[_e.GLOBALVALUE_MATRIX32,9,128]}],e.__FUN_PARAM__[16]=[{func:"callbackJSByParamData",args:[216,260]},{func:"useCommandEncoderByParamData",args:[256,-1,0]}],e.__FUN_PARAM__[32]=[{func:"callbackJSByParamData",args:[216,276]},{func:"useCommandEncoderByParamData",args:[280,-1,0]}],e.__FUN_PARAM__[8]=[{func:"callbackJSByParamData",args:[216,224]},{func:"loadDataToRegByParamData",args:[0,252,4]},{func:"ifGreater0",args:[0,2147483647]},{func:"useCommandEncoderByParamData",args:[232,-1,0]}],e.__FUN_PARAM__[128]=[{func:"useCommandEncoderByParamData",args:[292,296,1]},{func:"useCommandEncoderByParamData",args:[300,304,1]}]},e.__init_END_=function(){e.__FUN_PARAM_END_[16]=[{func:"loadDataToRegByParamData",args:[0,252,4]},{func:"ifGreater0",args:[0,2]},{func:"callbackJSByParamData",args:[216,268]},{func:"useCommandEncoderByParamData",args:[264,-1,1]}],e.__FUN_PARAM_END_[8]=[{func:"callbackJSByParamData",args:[216,228]},{func:"useCommandEncoderByParamData",args:[236,-1,0]},{func:"useCommandEncoderByParamData",args:[240,244,1]}]},e.GLS=[],e.GLSE=[],e.__FUN_PARAM__=[],e.__FUN_PARAM_END_=[],e}(),_e=function(){function t(){}return r(t,"laya.layagl.LayaNative2D"),t._init_simple_texture_cmdEncoder_=function(){t._SIMPLE_TEXTURE_CMDENCODER_=$.instance.createCommandEncoder(124,32,!0),t._SIMPLE_TEXTURE_CMDENCODER_.useProgramEx(laya.layagl.LayaNative2D.PROGRAMEX_DRAWTEXTURE),t._SIMPLE_TEXTURE_CMDENCODER_.useVDO(laya.layagl.LayaNative2D.VDO_MESHQUADTEXTURE),t._SIMPLE_TEXTURE_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_VIEWS,0),t._SIMPLE_TEXTURE_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_DIR,1),t._SIMPLE_TEXTURE_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_POS,2),t._SIMPLE_TEXTURE_CMDENCODER_.uniformTextureByParamData(0,4,8),t._SIMPLE_TEXTURE_CMDENCODER_.blendFuncByGlobalValue(laya.layagl.LayaNative2D.GLOBALVALUE_BLENDFUNC_SRC,laya.layagl.LayaNative2D.GLOBALVALUE_BLENDFUNC_DEST),t._SIMPLE_TEXTURE_CMDENCODER_.setRectMeshByParamData(12,20,16),t._SIMPLE_TEXTURE_CMDENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_MATRIX32,0,7),t._SIMPLE_TEXTURE_CMDENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._SIMPLE_TEXTURE_CMDENCODER_)},t._init_simple_rect_cmdEncoder_=function(){t._SIMPLE_RECT_CMDENCODER_=$.instance.createCommandEncoder(84,32,!0),t._SIMPLE_RECT_CMDENCODER_.useProgramEx(laya.layagl.LayaNative2D.PROGRAMEX_DRAWTEXTURE),t._SIMPLE_RECT_CMDENCODER_.useVDO(laya.layagl.LayaNative2D.VDO_MESHQUADTEXTURE),t._SIMPLE_RECT_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_VIEWS,0),t._SIMPLE_RECT_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_DIR,1),t._SIMPLE_RECT_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_POS,2),t._SIMPLE_RECT_CMDENCODER_.setRectMeshByParamData(0,8,4),t._SIMPLE_RECT_CMDENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_MATRIX32,0,7),t._SIMPLE_RECT_CMDENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._SIMPLE_RECT_CMDENCODER_)},t._init_rect_border_cmdEncoder_=function(){t._RECT_BORDER_CMD_ENCODER_=$.instance.createCommandEncoder(84,32,!0),t._RECT_BORDER_CMD_ENCODER_.useProgramEx(laya.layagl.LayaNative2D.PROGRAMEX_DRAWVG),t._RECT_BORDER_CMD_ENCODER_.useVDO(laya.layagl.LayaNative2D.VDO_MESHVG),t._RECT_BORDER_CMD_ENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_VIEWS,0),t._RECT_BORDER_CMD_ENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_DIR,1),t._RECT_BORDER_CMD_ENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_POS,2),t._RECT_BORDER_CMD_ENCODER_.setMeshByParamData(20,0,4,140,8,12,16),t._RECT_BORDER_CMD_ENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_MATRIX32,0,7),t._RECT_BORDER_CMD_ENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),$.syncBufferToRenderThread(t._RECT_BORDER_CMD_ENCODER_)},t.__init__=function(){if(g.isConchApp){var e=$.instance;t.GLOBALVALUE_MATRIX32=e.addGlobalValueDefine(0,5126,6,new Float32Array([1,0,0,1,0,0])),t.GLOBALVALUE_DRAWTEXTURE_COLOR=e.addGlobalValueDefine(0,5124,1,new Uint32Array([4294967295])),t.GLOBALVALUE_ITALICDEG=e.addGlobalValueDefine(0,5126,1,new Float32Array([0])),t.GLOBALVALUE_CLIP_MAT_DIR=e.addGlobalValueDefine(0,5126,4,new Float32Array([1e6,0,0,1e6])),t.GLOBALVALUE_CLIP_MAT_POS=e.addGlobalValueDefine(0,5126,2,new Float32Array([0,0])),t.GLOBALVALUE_BLENDFUNC_SRC=e.addGlobalValueDefine(0,5124,1,new Int32Array([1])),t.GLOBALVALUE_BLENDFUNC_DEST=e.addGlobalValueDefine(0,5124,1,new Int32Array([771])),t.GLOBALVALUE_COLORFILTER_COLOR=e.addGlobalValueDefine(0,5126,16,new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),t.GLOBALVALUE_COLORFILTER_ALPHA=e.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,1])),t.GLOBALVALUE_BLURFILTER_STRENGTH=e.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,0])),t.GLOBALVALUE_BLURFILTER_BLURINFO=e.addGlobalValueDefine(0,5126,2,new Float32Array([0,0])),t.GLOBALVALUE_GLOWFILTER_COLOR=e.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,0])),t.GLOBALVALUE_GLOWFILTER_BLURINFO1=e.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,0])),t.GLOBALVALUE_GLOWFILTER_BLURINFO2=e.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,0])),e.endGlobalValueDefine(),t.PROGRAMEX_DRAWTEXTURE=$.instance.createProgramEx("/*\n	texture和fillrect使用的。\n*/\nattribute vec4 posuv;\nattribute vec4 attribColor;\nattribute vec4 attribFlags;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;\nvarying vec2 cliped;\nuniform vec2 size;\n\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\n\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\n\nvoid main() {\n\n#ifdef WORLDMAT\n	vec4 pos=mmat*vec4(posuv.xy,0.,1.);\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,0.,1.0);\n#else\n	gl_Position =vec4((posuv.x/size.x-0.5)*2.0,(0.5-posuv.y/size.y)*2.0,0.,1.0);\n#endif\n  \n	v_texcoordAlpha.xy = posuv.zw;\n	//v_texcoordAlpha.z = attribColor.a/255.0;\n	v_color = attribColor/255.0;\n	v_color.xyz*=v_color.w;//反正后面也要预乘\n	\n	v_useTex = attribFlags.r/255.0;\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = posuv.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//转成0到1之间。/clipw/clipw 表示clippos与normalize之后的clip朝向点积之后，再除以clipw\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n\n}","/*\n	texture和fillrect使用的。\n*/\n\nprecision mediump float;\n//precision highp float;\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\nuniform sampler2D texture;\nvarying vec2 cliped;\n\n#ifdef BLUR_FILTER\nuniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoordAlpha.xy-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}\n#endif\n\n#ifdef COLOR_FILTER\nuniform vec4 colorAlpha;\nuniform mat4 colorMat;\n#endif\n\n#ifdef GLOW_FILTER\nuniform vec4 u_color;\nuniform vec4 u_blurInfo1;/*\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\n*/\nuniform vec4 u_blurInfo2;/*\nuniform float u_textW;\nuniform float u_textH;\nuniform float u_strength;\n*/\n#endif\n\n#ifdef COLOR_ADD\nuniform vec4 colorAdd;\n#endif\n\nvoid main() {\n	if(cliped.x<0.) discard;\n	if(cliped.x>1.) discard;\n	if(cliped.y<0.) discard;\n	if(cliped.y>1.) discard;\n	\n   vec4 color= texture2D(texture, v_texcoordAlpha.xy);\n   if(v_useTex<=0.)color = vec4(1.,1.,1.,1.);\n   color.a*=v_color.w;\n   //color.rgb*=v_color.w;\n   color.rgb*=v_color.rgb;\n   gl_FragColor=color;\n   \n   #ifdef COLOR_ADD\n	gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\n	gl_FragColor.xyz *= colorAdd.a;\n   #endif\n   \n   #ifdef BLUR_FILTER\n	gl_FragColor =   blur();\n	gl_FragColor.w*=v_color.w;   \n   #endif\n   \n   #ifdef COLOR_FILTER\n	mat4 alphaMat =colorMat;\n\n	alphaMat[0][3] *= gl_FragColor.a;\n	alphaMat[1][3] *= gl_FragColor.a;\n	alphaMat[2][3] *= gl_FragColor.a;\n\n	gl_FragColor = gl_FragColor * alphaMat;\n	gl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n   #endif\n   \n   #ifdef GLOW_FILTER\n	const float c_IterationTime = 10.0;\n	float floatIterationTotalTime = c_IterationTime * c_IterationTime;\n	vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n	vec2 vec2FilterDir = vec2(-(u_blurInfo1.z)/u_blurInfo2.x,-(u_blurInfo1.w)/u_blurInfo2.y);\n	vec2 vec2FilterOff = vec2(u_blurInfo1.x/u_blurInfo2.x/c_IterationTime * 2.0,u_blurInfo1.y/u_blurInfo2.y/c_IterationTime * 2.0);\n	float maxNum = u_blurInfo1.x * u_blurInfo1.y;\n	vec2 vec2Off = vec2(0.0,0.0);\n	float floatOff = c_IterationTime/2.0;\n	for(float i = 0.0;i<=c_IterationTime; ++i){\n		for(float j = 0.0;j<=c_IterationTime; ++j){\n			vec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n			vec4Color += texture2D(texture, v_texcoordAlpha.xy + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n		}\n	}\n	gl_FragColor = vec4(u_color.rgb,vec4Color.a * u_blurInfo2.z);\n	gl_FragColor.rgb *= gl_FragColor.a;   \n   #endif\n   \n}","posuv,attribColor,attribFlags","size,clipMatDir,clipMatPos,texture,colorMat,colorAlpha,strength_sig2_2sig2_gauss1,blurInfo,u_color,u_blurInfo1,u_blurInfo2"),t.PROGRAMEX_DRAWVG=$.instance.createProgramEx("attribute vec4 position;\nattribute vec4 attribColor;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\nuniform mat4 u_mmat2;\n//uniform vec2 u_pos;\nuniform vec2 size;\nvarying vec4 color;\n//vec4 dirxy=vec4(0.9,0.1, -0.1,0.9);\n//vec4 clip=vec4(100.,30.,300.,600.);\nvarying vec2 cliped;\nvoid main(){\n	\n#ifdef WORLDMAT\n	vec4 pos=mmat*vec4(position.xy,0.,1.);\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n#else\n	gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n#endif	\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = position.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//clipdir是带缩放的方向，由于上面clippos是在缩放后的空间计算的，所以需要把方向先normalize一下\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n  //pos2d.x = dot(clippos,dirx);\n  color=attribColor/255.;\n}","precision mediump float;\n//precision mediump float;\nvarying vec4 color;\n//uniform float alpha;\nvarying vec2 cliped;\nvoid main(){\n	//vec4 a=vec4(color.r, color.g, color.b, 1);\n	//a.a*=alpha;\n    gl_FragColor= color;// vec4(color.r, color.g, color.b, alpha);\n	gl_FragColor.rgb*=color.a;\n	if(cliped.x<0.) discard;\n	if(cliped.x>1.) discard;\n	if(cliped.y<0.) discard;\n	if(cliped.y>1.) discard;\n}","position,attribColor","size,clipMatDir,clipMatPos"),t.PROGRAMEX_DRAWPARTICLE=$.instance.createProgramEx("attribute vec4 a_CornerTextureCoordinate;\nattribute vec3 a_Position;\nattribute vec3 a_Velocity;\nattribute vec4 a_StartColor;\nattribute vec4 a_EndColor;\nattribute vec3 a_SizeRotation;\nattribute vec2 a_Radius;\nattribute vec4 a_Radian;\nattribute float a_AgeAddScale;\nattribute float a_Time;\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\n\nuniform float u_CurrentTime;\nuniform float u_Duration;\nuniform float u_EndVelocity;\nuniform vec3 u_Gravity;\n\nuniform vec2 size;\nuniform mat4 u_mmat;\n\nvec4 ComputeParticlePosition(in vec3 position, in vec3 velocity,in float age,in float normalizedAge)\n{\n\n   float startVelocity = length(velocity);//起始标量速度\n   float endVelocity = startVelocity * u_EndVelocity;//结束标量速度\n\n   float velocityIntegral = startVelocity * normalizedAge +(endVelocity - startVelocity) * normalizedAge *normalizedAge/2.0;//计算当前速度的标量（单位空间），vt=v0*t+(1/2)*a*(t^2)\n   \n   vec3 addPosition = normalize(velocity) * velocityIntegral * u_Duration;//计算受自身速度影响的位置，转换标量到矢量    \n   addPosition += u_Gravity * age * normalizedAge;//计算受重力影响的位置\n   \n   float radius=mix(a_Radius.x, a_Radius.y, normalizedAge); //计算粒子受半径和角度影响（无需计算角度和半径时，可用宏定义优化屏蔽此计算）\n   float radianHorizontal =mix(a_Radian.x,a_Radian.z,normalizedAge);\n   float radianVertical =mix(a_Radian.y,a_Radian.w,normalizedAge);\n   \n   float r =cos(radianVertical)* radius;\n   addPosition.y += sin(radianVertical) * radius;\n	\n   addPosition.x += cos(radianHorizontal) *r;\n   addPosition.z += sin(radianHorizontal) *r;\n  \n   addPosition.y=-addPosition.y;//2D粒子位置更新需要取负，2D粒子坐标系Y轴正向朝上\n   position+=addPosition;\n   return  vec4(position,1.0);\n}\n\nfloat ComputeParticleSize(in float startSize,in float endSize, in float normalizedAge)\n{    \n    float size = mix(startSize, endSize, normalizedAge);\n    return size;\n}\n\nmat2 ComputeParticleRotation(in float rot,in float age)\n{    \n    float rotation =rot * age;\n    //计算2x2旋转矩阵.\n    float c = cos(rotation);\n    float s = sin(rotation);\n    return mat2(c, -s, s, c);\n}\n\nvec4 ComputeParticleColor(in vec4 startColor,in vec4 endColor,in float normalizedAge)\n{\n	vec4 color=mix(startColor,endColor,normalizedAge);\n    //硬编码设置，使粒子淡入很快，淡出很慢,6.7的缩放因子把置归一在0到1之间，可以谷歌x*(1-x)*(1-x)*6.7的制图表\n    color.a *= normalizedAge * (1.0-normalizedAge) * (1.0-normalizedAge) * 6.7;\n   \n    return color;\n}\n\nvoid main()\n{\n   float age = u_CurrentTime - a_Time;\n   age *= 1.0 + a_AgeAddScale;\n   float normalizedAge = clamp(age / u_Duration,0.0,1.0);\n   gl_Position = ComputeParticlePosition(a_Position, a_Velocity, age, normalizedAge);//计算粒子位置\n   float pSize = ComputeParticleSize(a_SizeRotation.x,a_SizeRotation.y, normalizedAge);\n   mat2 rotation = ComputeParticleRotation(a_SizeRotation.z, age);\n	\n    mat4 mat=u_mmat;\n    gl_Position=vec4((mat*gl_Position).xy,0.0,1.0);\n    gl_Position.xy += (rotation*a_CornerTextureCoordinate.xy) * pSize*vec2(mat[0][0],mat[1][1]);\n    gl_Position=vec4((gl_Position.x/size.x-0.5)*2.0,(0.5-gl_Position.y/size.y)*2.0,0.0,1.0);\n   \n   v_Color = ComputeParticleColor(a_StartColor,a_EndColor, normalizedAge);\n   v_TextureCoordinate =a_CornerTextureCoordinate.zw;\n}\n\n","#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\nuniform sampler2D u_texture;\n\nvoid main()\n{	\n	gl_FragColor=texture2D(u_texture,v_TextureCoordinate)*v_Color;\n	gl_FragColor.xyz *= v_Color.w;\n}","a_CornerTextureCoordinate,a_Position,a_Velocity,a_StartColor,a_EndColor,a_SizeRotation,a_Radius,a_Radian,a_AgeAddScale,a_Time","u_CurrentTime,u_Duration,u_EndVelocity,u_Gravity,size,u_mmat,u_texture"),t.VDO_MESHQUADTEXTURE=e.createVDO(new Int32Array([5126,0,4,24,5121,16,4,24,5121,20,4,24])),t.VDO_MESHVG=e.createVDO(new Int32Array([5126,0,2,12,5121,8,4,12])),t.VDO_MESHPARTICLE=e.createVDO(new Int32Array([5126,0,4,116,5126,16,3,116,5126,28,3,116,5126,40,4,116,5126,56,4,116,5126,72,3,116,5126,84,2,116,5126,92,4,116,5126,108,1,116,5126,112,1,116])),t._init_simple_texture_cmdEncoder_(),t._init_simple_rect_cmdEncoder_(),t._init_rect_border_cmdEncoder_(),t.SHADER_MACRO_COLOR_FILTER=$.instance.defineShaderMacro("#define COLOR_FILTER",[{uname:4,id:t.GLOBALVALUE_COLORFILTER_COLOR},{uname:5,id:t.GLOBALVALUE_COLORFILTER_ALPHA}]),t.SHADER_MACRO_BLUR_FILTER=$.instance.defineShaderMacro("#define BLUR_FILTER",[{uname:6,id:t.GLOBALVALUE_BLURFILTER_STRENGTH},{uname:7,id:t.GLOBALVALUE_BLURFILTER_BLURINFO}]),t.SHADER_MACRO_GLOW_FILTER=$.instance.defineShaderMacro("#define GLOW_FILTER",[{uname:8,id:t.GLOBALVALUE_GLOWFILTER_COLOR},{uname:9,id:t.GLOBALVALUE_GLOWFILTER_BLURINFO1},{uname:10,id:t.GLOBALVALUE_GLOWFILTER_BLURINFO2}]),ee.__init__(),ee.__init_END_(),new le,fe.charRender=new We}},t._SIMPLE_TEXTURE_CMDENCODER_=null,t._SIMPLE_RECT_CMDENCODER_=null,t._RECT_BORDER_CMD_ENCODER_=null,t.PROGRAMEX_DRAWTEXTURE=0,t.PROGRAMEX_DRAWVG=0,t.PROGRAMEX_DRAWRECT=0,t.PROGRAMEX_DRAWPARTICLE=0,t.VDO_MESHQUADTEXTURE=0,t.VDO_MESHVG=0,t.VDO_MESHPARTICLE=0,t.GLOBALVALUE_VIEWS=0,t.GLOBALVALUE_MATRIX32=0,t.GLOBALVALUE_DRAWTEXTURE_COLOR=0,t.GLOBALVALUE_ITALICDEG=0,t.GLOBALVALUE_CLIP_MAT_DIR=0,t.GLOBALVALUE_CLIP_MAT_POS=0,t.GLOBALVALUE_BLENDFUNC_SRC=0,t.GLOBALVALUE_BLENDFUNC_DEST=0,t.GLOBALVALUE_COLORFILTER_COLOR=0,t.GLOBALVALUE_COLORFILTER_ALPHA=0,t.GLOBALVALUE_BLURFILTER_STRENGTH=0,t.GLOBALVALUE_BLURFILTER_BLURINFO=0,t.SHADER_MACRO_COLOR_FILTER=0,t.SHADER_MACRO_BLUR_FILTER=0,t.SHADER_MACRO_GLOW_FILTER=0,t.GLOBALVALUE_GLOWFILTER_COLOR=0,t.GLOBALVALUE_GLOWFILTER_BLURINFO1=0,t.GLOBALVALUE_GLOWFILTER_BLURINFO2=0,t}(),ie=function(){function t(t,e,_,i,r,a,n){void 0===t&&(t=1),void 0===e&&(e=0),void 0===_&&(_=0),void 0===i&&(i=1),void 0===r&&(r=0),void 0===a&&(a=0),this._nums=n=n?n:new Float32Array(6),n[0]=t,n[1]=e,n[2]=_,n[3]=i,n[4]=r,n[5]=a,this._checkTransform()}r(t,"laya.layagl.MatrixConch");var e=t.prototype;return e.identity=function(){var t=this._nums;return t[0]=t[3]=1,t[1]=t[4]=t[5]=t[2]=0,this._bTransform=!1,this},e._checkTransform=function(){var t=this._nums;return this._bTransform=1!==t[0]||0!==t[1]||0!==t[2]||1!==t[3]},e.setTranslate=function(t,e){return this._nums[4]=t,this._nums[5]=e,this},e.translate=function(t,e){return this._nums[4]+=t,this._nums[5]+=e,this},e.scale=function(t,e){var _=this._nums;return _[0]*=t,_[3]*=e,_[2]*=t,_[1]*=e,_[4]*=t,_[5]*=e,this._bTransform=!0,this},e.rotate=function(t){var e=this._nums,_=Math.cos(t),i=Math.sin(t),r=e[0],a=e[2],n=e[4];return e[0]=r*_-e[1]*i,e[1]=r*i+e[1]*_,e[2]=a*_-e[3]*i,e[3]=a*i+e[3]*_,e[4]=n*_-e[5]*i,e[5]=n*i+e[5]*_,this._bTransform=!0,this},e.skew=function(t,e){var _=this._nums,i=Math.tan(t),r=Math.tan(e),a=_[0],n=_[1];return _[0]+=r*_[2],_[1]+=r*_[3],_[2]+=i*a,_[3]+=i*n,this},e.invertTransformPoint=function(t){var e=this._nums,_=e[0],i=e[1],r=e[2],a=e[3],n=e[4],s=_*a-i*r,o=a/s,h=-i/s,u=-r/s,l=_/s,c=(r*e[5]-a*n)/s,f=-(_*e[5]-i*n)/s;return t.setTo(o*t.x+u*t.y+c,h*t.x+l*t.y+f)},e.transformPoint=function(t){var e=this._nums;return t.setTo(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},e.transformPointN=function(t){var e=this._nums;return t.setTo(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y)},e.getScaleX=function(){var t=this._nums;return 0===t[1]?this.a:Math.sqrt(t[0]*t[0]+t[1]*t[1])},e.getScaleY=function(){var t=this._nums;return 0===t[2]?t[3]:Math.sqrt(t[2]*t[2]+t[3]*t[3])},e.invert=function(){var t=this._nums,e=t[0],_=t[1],i=t[2],r=t[3],a=t[4],n=e*r-_*i;return t[0]=r/n,t[1]=-_/n,t[2]=-i/n,t[3]=e/n,t[4]=(i*this.ty-r*a)/n,t[5]=-(e*this.ty-_*a)/n,this},e.setTo=function(t,e,_,i,r,a){var n=this._nums;return n[0]=t,n[1]=e,n[2]=_,n[3]=i,n[4]=r,n[5]=a,this},e.concat=function(t){var e=this._nums,_=t._nums,i=e[0],r=e[2],a=e[4];return e[0]=i*_[0]+e[1]*_[2],e[1]=i*_[1]+e[1]*_[3],e[2]=r*_[0]+e[3]*_[2],e[3]=r*_[1]+e[3]*_[3],e[4]=a*_[0]+e[5]*_[2]+_[4],e[5]=a*_[1]+e[5]*_[3]+_[5],this},e.scaleEx=function(t,e){var _=this._nums,i=_[0],r=_[1],a=_[2],n=_[3];0!==r||0!==a?(_[0]=t*i,_[1]=t*r,_[2]=e*a,_[3]=e*n):(_[0]=t*i,_[1]=0*n,_[2]=0*i,_[3]=e*n),this._bTransform=!0},e.rotateEx=function(t){var e=this._nums,_=Math.cos(t),i=Math.sin(t),r=e[0],a=e[1],n=e[2],s=e[3];0!==a||0!==n?(e[0]=_*r+i*n,e[1]=_*a+i*s,e[2]=-i*r+_*n,e[3]=-i*a+_*s):(e[0]=_*r,e[1]=i*s,e[2]=-i*r,e[3]=_*s),this._bTransform=!0},e.clone=function(){var e=this._nums,_=t.create(),i=_._nums;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],_._bTransform=this._bTransform,_
},e.copyTo=function(t){var e=this._nums,_=t._nums;return _[0]=e[0],_[1]=e[1],_[2]=e[2],_[3]=e[3],_[4]=e[4],_[5]=e[5],t._bTransform=this._bTransform,t},e.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},e.destroy=function(){this.recover()},e.recover=function(){t._pool.push(this)},a(0,e,"a",function(){return this._nums[0]},function(t){this._nums[0]=t}),a(0,e,"b",function(){return this._nums[1]},function(t){this._nums[1]=t}),a(0,e,"c",function(){return this._nums[2]},function(t){this._nums[2]=t}),a(0,e,"d",function(){return this._nums[3]},function(t){this._nums[3]=t}),a(0,e,"tx",function(){return this._nums[4]},function(t){this._nums[4]=t}),a(0,e,"ty",function(){return this._nums[5]},function(t){this._nums[5]=t}),t.mul=function(t,e,_){var i=t._nums,r=e._nums,a=_._nums,n=i[0],s=i[1],o=i[2],h=i[3],u=i[4],l=i[5],c=r[0],f=r[1],d=r[2],E=r[3],A=r[4],D=r[5];return 0!==f||0!==d?(a[0]=n*c+s*d,a[1]=n*f+s*E,a[2]=o*c+h*d,a[3]=o*f+h*E,a[4]=c*u+d*l+A,a[5]=f*u+E*l+D):(a[0]=n*c,a[1]=s*E,a[2]=o*c,a[3]=h*E,a[4]=c*u+A,a[5]=E*l+D),_},t.mul16=function(t,e,_){var i=t._nums,r=e._nums,a=i[0],n=i[1],s=i[2],o=i[3],h=i[4],u=i[5],l=r[0],c=r[1],f=r[2],d=r[3],E=r[4],A=r[5];return 0!==c||0!==f?(_[0]=a*l+n*f,_[1]=a*c+n*d,_[4]=s*l+o*f,_[5]=s*c+o*d,_[12]=l*h+f*u+E,_[13]=c*h+d*u+A):(_[0]=a*l,_[1]=n*d,_[4]=s*l,_[5]=o*d,_[12]=l*h+E,_[13]=d*u+A),_},t.mulPre=function(t,e,_,i,r,a,n,s){var o=t._nums,h=s._nums,u=o[0],l=o[1],c=o[2],f=o[3],d=o[4],E=o[5];return 0!==_||0!==i?(h[0]=u*e+l*i,h[1]=u*_+l*r,h[2]=c*e+f*i,h[3]=c*_+f*r,h[4]=e*d+i*E+a,h[5]=_*d+r*E+n):(h[0]=u*e,h[1]=l*r,h[2]=c*e,h[3]=f*r,h[4]=e*d+a,h[5]=r*E+n),s},t.mulPos=function(t,e,_,i,r,a,n,s){var o=t._nums,h=s._nums,u=o[0],l=o[1],c=o[2],f=o[3],d=o[4],E=o[5];return 0!==l||0!==c?(h[0]=e*u+_*c,h[1]=e*l+_*f,h[2]=i*u+r*c,h[3]=i*l+r*f,h[4]=u*a+c*n+d,h[5]=l*a+f*n+E):(h[0]=e*u,h[1]=_*f,h[2]=i*u,h[3]=r*f,h[4]=u*a+d,h[5]=f*n+E),s},t.preMul=function(t,e,_){var i=t._nums,r=e._nums,a=_._nums,n=i[0],s=i[1],o=i[2],h=i[3],u=r[0],l=r[1],c=r[2],f=r[3],d=r[4],E=r[5];return a[0]=u*n,a[1]=a[2]=0,a[3]=f*h,a[4]=d*n+i[4],a[5]=E*h+i[5],(0!==l||0!==c||0!==s||0!==o)&&(a[0]+=l*o,a[3]+=c*s,a[1]+=u*s+l*h,a[2]+=c*n+f*o,a[4]+=E*o,a[5]+=d*s),_},t.preMulXY=function(t,e,_,i){var r=t._nums,a=i._nums,n=r[0],s=r[1],o=r[2],h=r[3];return a[0]=n,a[1]=s,a[2]=o,a[3]=h,a[4]=e*n+r[4]+_*o,a[5]=_*h+r[5]+e*s,i},t.create=function(e){var _;return t._pool.length?(_=t._pool.pop(),e&&(_._nums=e),_.identity(),_):new t(1,0,0,1,0,0,e)},t.A=0,t.B=1,t.C=2,t.D=3,t.TX=4,t.TY=5,t.EMPTY=new t,t.TEMP=new t,t._pool=[],t}(),re=(function(){function t(){this._renderType=0,this._repaint=0,this._x=0/0,this._y=0/0}r(t,"laya.layagl.QuickTestTool");var e=t.prototype;return e.render=function(e,_,i){V.spriteCount++,t._addType(this._renderType),t.showRenderTypeInfo(this._renderType),y.renders[this._renderType]._fun(this,e,_+this._x,i+this._y),this._repaint=0},e._stageRender=function(e,i,r){t._countStart(),t._PreStageRender.call(_.stage,e,i,r),t._countEnd()},t.getMCDName=function(e){return t._typeToNameDic[e]},t.showRenderTypeInfo=function(e,_){if(void 0===_&&(_=!1),_||!t.showedDic[e]){if(t.showedDic[e]=!0,!t._rendertypeToStrDic[e]){var i=[],r=0;for(r=1;e>=r;)r&e&&i.push(t.getMCDName(r&e)),r<<=1;t._rendertypeToStrDic[e]=i.join(",")}console.log("cmd:",t._rendertypeToStrDic[e])}},t.__init__=function(){t._typeToNameDic[1]="ALPHA",t._typeToNameDic[2]="TRANSFORM",t._typeToNameDic[256]="TEXTURE",t._typeToNameDic[512]="GRAPHICS",t._typeToNameDic[4096]="ONECHILD",t._typeToNameDic[8192]="CHILDS",t._typeToNameDic[3]="TRANSFORM|ALPHA",t._typeToNameDic[8]="CANVAS",t._typeToNameDic[4]="BLEND",t._typeToNameDic[16]="FILTERS",t._typeToNameDic[32]="MASK",t._typeToNameDic[64]="CLIP",t._typeToNameDic[1024]="LAYAGL3D"},t._countStart=function(){var e;for(e in t._countDic)t._countDic[e]=0},t._countEnd=function(){t._i++,t._i>60&&(t.showCountInfo(),t._i=0)},t._addType=function(e){t._countDic[e]?t._countDic[e]+=1:t._countDic[e]=1},t.showCountInfo=function(){console.log("===================");var e;for(e in t._countDic)console.log("count:"+t._countDic[e]),t.showRenderTypeInfo(e,!0)},t.enableQuickTest=function(){t.__init__(),F.prototype.render=t.prototype.render,t._PreStageRender=w.prototype.render,w.prototype.render=t.prototype._stageRender},t.showedDic={},t._rendertypeToStrDic={},t._typeToNameDic={},t._PreStageRender=null,t._countDic={},t._i=0,t}(),function(){function t(){}return r(t,"laya.webgl.canvas.BlendMode"),t._init_=function(){t.fns=[t.BlendNormal,t.BlendAdd,t.BlendMultiply,t.BlendScreen,t.BlendOverlay,t.BlendLight,t.BlendMask,t.BlendDestinationOut],t.targetFns=[t.BlendNormalTarget,t.BlendAddTarget,t.BlendMultiplyTarget,t.BlendScreenTarget,t.BlendOverlayTarget,t.BlendLightTarget,t.BlendMask,t.BlendDestinationOut]},t.BlendNormal=function(t){Be.setBlendFunc(t,1,771)},t.BlendAdd=function(t){Be.setBlendFunc(t,1,772)},t.BlendMultiply=function(t){Be.setBlendFunc(t,774,771)},t.BlendScreen=function(t){Be.setBlendFunc(t,1,1)},t.BlendOverlay=function(t){Be.setBlendFunc(t,1,769)},t.BlendLight=function(t){Be.setBlendFunc(t,1,1)},t.BlendNormalTarget=function(t){Be.setBlendFunc(t,1,771)},t.BlendAddTarget=function(t){Be.setBlendFunc(t,1,772)},t.BlendMultiplyTarget=function(t){Be.setBlendFunc(t,774,771)},t.BlendScreenTarget=function(t){Be.setBlendFunc(t,1,1)},t.BlendOverlayTarget=function(t){Be.setBlendFunc(t,1,769)},t.BlendLightTarget=function(t){Be.setBlendFunc(t,1,1)},t.BlendMask=function(t){Be.setBlendFunc(t,0,770)},t.BlendDestinationOut=function(t){Be.setBlendFunc(t,0,0)},t.activeBlendFunction=null,t.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],t.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},t.NORMAL="normal",t.ADD="add",t.MULTIPLY="multiply",t.SCREEN="screen",t.LIGHT="lighter",t.OVERLAY="overlay",t.DESTINATIONOUT="destination-out",t.MASK="mask",t.fns=[],t.targetFns=[],t}()),ae=function(){function t(t){this._color=null,this.setValue(t)}r(t,"laya.webgl.canvas.DrawStyle");var e=t.prototype;return e.setValue=function(t){this._color=t?t instanceof laya.utils.ColorUtils?t:l.create(t):l.create("#000000")},e.reset=function(){this._color=l.create("#000000")},e.toInt=function(){return this._color.numColor},e.equal=function(t){return"string"==typeof t?this._color.strColor===t:t instanceof laya.utils.ColorUtils?this._color.numColor===t.numColor:!1},e.toColorStr=function(){return this._color.strColor},t.create=function(e){if(e){var _=e instanceof laya.utils.ColorUtils?e:l.create(e);return _._drawStyle||(_._drawStyle=new t(e))}return t.DEFAULT},t.DEFAULT=new t("#000000"),t}(),ne=function(){function t(){this._lastOriX=0,this._lastOriY=0,this.paths=[],this._curPath=null}var e;r(t,"laya.webgl.canvas.Path");var _=t.prototype;return _.beginPath=function(t){this.paths.length=1,this._curPath=this.paths[0]=new e,this._curPath.convex=t},_.closePath=function(){this._curPath.loop=!0},_.newPath=function(){this._curPath=new e,this.paths.push(this._curPath)},_.addPoint=function(t,e){this._curPath.path.push(t,e)},_.push=function(t,_){this._curPath?this._curPath.path.length>0&&(this._curPath=new e,this.paths.push(this._curPath)):(this._curPath=new e,this.paths.push(this._curPath));var i=this._curPath;i.path=t.slice(),i.convex=_},_.reset=function(){this.paths.length=0},t.__init$=function(){e=function(){function t(){this.path=[],this.loop=!1,this.convex=!1}return r(t,""),t}()},t}(),se=function(){function t(){this._clipInfoID=-1,this._globalClipMatrix=new p,this._clipRect=new S}r(t,"laya.webgl.canvas.save.SaveClipRect");var e=t.prototype;return _.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){this._globalClipMatrix.copyTo(e._globalClipMatrix),this._clipRect.clone(e._clipRect),e._clipInfoID=this._clipInfoID,t.POOL[t.POOL._length++]=this},t.save=function(e){if(131072!=(131072&e._saveMark._saveuse)){e._saveMark._saveuse|=131072;var _=t.POOL,i=_._length>0?_[--_._length]:new t;e._globalClipMatrix.copyTo(i._globalClipMatrix),e._clipRect.clone(i._clipRect),i._clipInfoID=e._clipInfoID;var r=e._save;r[r._length++]=i}},t.POOL=H._createArray(),t}(),oe=(function(){function t(){this._contextX=0,this._contextY=0,this._clipRect=new S,this._rect=new S,this._matrix=new p}r(t,"laya.webgl.canvas.save.SaveClipRectStencil");var e=t.prototype;return _.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(){},t.save=function(){},t.POOL=H._createArray(),t}(),function(){function t(){this._saveuse=0}r(t,"laya.webgl.canvas.save.SaveMark");var e=t.prototype;return _.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!0},e.restore=function(e){e._saveMark=this._preSaveMark,t.POOL[t.POOL._length++]=this},t.Create=function(e){var _=t.POOL,i=_._length>0?_[--_._length]:new t;return i._saveuse=0,i._preSaveMark=e._saveMark,e._saveMark=i,i},t.POOL=H._createArray(),t}()),he=function(){function t(){this._matrix=new p}r(t,"laya.webgl.canvas.save.SaveTransform");var e=t.prototype;return _.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){e._curMat=this._savematrix,t.POOL[t.POOL._length++]=this},t.save=function(e){var _=e._saveMark;if(2048!==(2048&_._saveuse)){_._saveuse|=2048;var i=t.POOL,r=i._length>0?i[--i._length]:new t;r._savematrix=e._curMat,e._curMat=e._curMat.copyTo(r._matrix);var a=e._save;a[a._length++]=r}},t.POOL=H._createArray(),t}(),ue=function(){function t(){this._mat=new p}r(t,"laya.webgl.canvas.save.SaveTranslate");var e=t.prototype;return _.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){this._mat.copyTo(e._curMat),t.POOL[t.POOL._length++]=this},t.save=function(e){var _=t.POOL,i=_._length>0?_[--_._length]:new t;e._curMat.copyTo(i._mat);var r=e._save;r[r._length++]=i},t.POOL=H._createArray(),t}(),le=function(){function t(){this.fontPages=[],this.fontPagesName=[],this._curPage=null,this.tempUV=[0,0,1,0,1,1,0,1],this.fontScaleX=1,this.fontScaleY=1,this._curStrPos=0,this.tempMat=new p,t.charbookInst=this,fe.charRender=g.isConchApp?new We:new Ue}var e;r(t,"laya.webgl.resource.CharBook");var a=t.prototype;return a.selectFont=function(e,_){var i,r=Math.max(this.fontScaleX,this.fontScaleY),a=_*r;if(e===t._lastFont&&a===t._lastFontSz)i=t._lastCharPage;else{var n=fe.getBmpSize(_)*r,s=Math.floor(n/t.gridSize),o=e+s,h=this.fontPagesName.indexOf(o);if(0>h){var u=new fe(e,n,g.isConchApp?0:Math.ceil(_/4));this.fontPages.push(u),this.fontPagesName.push(o),i=u}else i=this.fontPages[h];i.selectSize(_,n),t._lastFont=e,t._lastFontSz=a,t._lastCharPage=i}return i},a.isEmoji=function(e){return t._emojiReg.test(e)},a.getNextChar=function(t){var e=t.length,_=this._curStrPos;if(_>=e)return null;for(var i=_,r=0;e>i;i++){var a=t.charCodeAt(i);if(55296!=(55296&a))if(65038!==a&&65039!==a){if(8205!=a){if(1==r)break;i++;break}r=1}else r=1;else r=1}return this._curStrPos=i,t.substring(_,i)},a.hasFreedText=function(t,e){if(t&&t.length>0)for(var _=e,i=t.length;i>_;_++){var r=t[_];if(r)for(var a=0,n=r.length;n>a;a++){var s=r[a].ri;if(s.tex.__destroyed)return!0}}return!1},a._fast_filltext=function(e,_,i,r,a,n,s,o,h,u,l){if(void 0===l&&(l=0),!(_&&_.length<1||i&&i.length<1)){if(t._curFont=n._font,this.fontScaleX=this.fontScaleY=1,t.scaleFontWithCtx){var c=e.getMatScaleX(),d=e.getMatScaleY();if(1e-4>c||.1>d)return;c>1&&(this.fontScaleX=c),d>1&&(this.fontScaleY=d)}n._italic&&(e._italicDeg=12),this._curPage=this.selectFont(n._family,n._size);var E=r,A=_,D=_,R=0,m=!i&&D instanceof laya.utils.WordText,T=!!i,P=t.cacheRenderInfoInWordText&&m?A.pageChars:[],v=t.cacheRenderInfoInWordText&&m?A.pageCharsStroke:[];switch(m?(D=A._text,R=A.width,0>R&&(R=A.width=this._curPage.getWidth(D))):R=this._curPage.getWidth(D),u){case f.ENUM_TEXTALIGN_CENTER:E=r-R/2;break;case f.ENUM_TEXTALIGN_RIGHT:E=r-R;break;default:E=r}A&&A.lastGCCnt!=this._curPage.gcCnt&&(A.lastGCCnt=this._curPage.gcCnt,m&&(this.hasFreedText(P,A.startID)||this.hasFreedText(v,A.startIDStroke))&&(P=A.pageChars=[],v=A.pageCharsStroke=[]));var p=m?A.startID:0,C=m?A.startIDStroke:0;if(!P||P.length<1){var M=null;t.scaleFontWithCtx&&(fe.charRender.scale(Math.max(this.fontScaleX,1),Math.max(this.fontScaleY,1)),(this.fontScaleX>1||this.fontScaleY>1)&&(M=""+(10*this.fontScaleX|0)+(10*this.fontScaleY|0))),v.length>0&&(v.length=0),p=-1,C=-1;var O=0;this._curStrPos=0;var S;if(T){var g=i[this._curStrPos++];S=g.char,O=g.x}else S=this.getNextChar(D);for(var y=n._bold;S;){var L,b=this.isEmoji(S);if(L=this._curPage.getChar(S,0,n._size,s,null,y,!1,M),L.isSpace);else{var B=P[L.tex.id];if(B||(P[L.tex.id]=B=[],(0>p||p>L.tex.id)&&(p=L.tex.id)),B.push({ri:L,isEmoji:b,x:O,color:"#"+(16777215&s).toString(16),nColor:s,w:L.bmpWidth/this.fontScaleX,h:L.bmpHeight/this.fontScaleY}),o&&h>0){var I=this._curPage.getChar(S,h,n._size,o,null,y,!1,M),x=v[I.tex.id];x||(x=[],v[I.tex.id]=x,(0>C||C>I.tex.id)&&(C=I.tex.id)),x.push({ri:I,isEmoji:!1,x:O,color:"#"+(16777215&o).toString(16),nColor:o,w:I.bmpWidth/this.fontScaleX,h:I.bmpHeight/this.fontScaleY})}}T?(g=i[this._curStrPos++],g?(S=g.char,O=g.x):S=null):(S=this.getNextChar(D),O+=L.width)}m&&(A.startID=p,A.startIDStroke=C)}this._drawResortedWords(e,E,v,C,a),this._drawResortedWords(e,E,P,p,a),e._italicDeg=0}},a.fillWords=function(e,_,i,r,a,n,s,o){if(_&&!(_.length<=0)){var h=l.create(n).numColor,u=s?l.create(s).numColor:0;t._curFont=a;var c=R.Parse(a);this._fast_filltext(e,null,_,i,r,c,h,u,o,0,0)}},a.filltext=function(e,_,i,r,a,n,s,o,h,u){if(void 0===u&&(u=0),!(_.length<=0)){var c=l.create(n).numColor,d=s?l.create(s).numColor:0;t._curFont=a;var E=R.Parse(a),A=0;switch(h){case"center":A=f.ENUM_TEXTALIGN_CENTER;break;case"right":A=f.ENUM_TEXTALIGN_RIGHT}this._fast_filltext(e,_,null,i,r,E,c,d,o,A,u)}},a.filltext_native=function(e,_,i,r,a,n,s,o,h,u){if(void 0===u&&(u=0),!(_.length<=0)){var c=l.create(n),f=c.numColor;if(t._curFont=a,this.fontScaleX=this.fontScaleY=1,t.scaleFontWithCtx){var d=e._curMat.getScaleX(),E=e._curMat.getScaleY();if(1e-4>d||.1>E)return;this.fontScaleX=d,this.fontScaleY=E,fe.charRender.scale(this.fontScaleX,this.fontScaleY)}var A=R.Parse(a),D=A._family,m=A._bold;A._italic&&(e._italicDeg=12),this._curPage=this.selectFont(D,A._size*this.fontScaleX);var T=i,P=_,v=_,p=0,C=v instanceof laya.utils.WordText,M=t.cacheRenderInfoInWordText&&C?P.pageChars:[];switch(C?(v=P.toString(),p=P.width,0>p&&(p=P.width=this._curPage.getWidth(v))):p=this._curPage.getWidth(v),h){case"center":T=i-p/2;break;case"right":T=i-p;break;default:T=i}if(M){for(var O=!1,S=0,g=M.length;g>S;S++){var y=M[S];if(y){for(var L=0,b=y.length;b>L;L++){var B=y[L];if(B.ri.tex.__destroyed){O=!0;break}}if(O)break}}O&&(M=P.pageChars=[])}if(!M||M.length<=0){var I=null;t.scaleFontWithCtx&&(fe.charRender.scale(Math.max(this.fontScaleX,1),Math.max(this.fontScaleY,1)),(this.fontScaleX>1||this.fontScaleY>1)&&(I=""+(10*this.fontScaleX|0)+(10*this.fontScaleY|0)));var x=0;this._curStrPos=0;for(var N=this.getNextChar(v);N;){var F,w=this.isEmoji(N);if(F=s&&o?this._curPage.getChar(N,o,A._size,f,s,m,!1,I):this._curPage.getChar(N,0,A._size,f,s,m,!1,I),F.isSpace);else{var V=M[F.tex.id];if(V||(M[F.tex.id]=V=[]),s&&o>0){var U=this._curPage.getChar(N,o,A._size,0,s,m,!1,I);V=M[U.tex.id],V||(V=[],M[U.tex.id]=V),V.push({ri:U,isEmoji:!1,x:x,color:s,nColor:s})}V.push({ri:F,isEmoji:w,x:x,color:n,nColor:f})}x+=F.width,N=this.getNextChar(v)}}var W=e._drawTextureUseColor;this._drawResortedWords_native(e,T,M,r),e._drawTextureUseColor=W,e._italicDeg=0}},a._drawResortedWords=function(t,e,_,i,r){var a=t.getFillColor();t.setFillColor(t.mixRGBandAlpha(16777215)),e-=this._curPage.margin_left,r-=this._curPage.margin_top;for(var n=i,s=_.length;s>n;n++){var o=_[n];if(o){var h=o.length;if(!(0>=h)){t._useNewTex2DSubmit(o[0].ri.tex.texture,4*h);for(var u=0;h>u;u++){var l=o[u],c=l.ri;c.isSpace||(c.touch(),t._drawTexRect(e+l.x,r,l.w,l.h,c.uv),t.touches&&t.touches.push(c))}}}}t.setFillColor(a),t._curSubmit._key.other=-1},a._drawResortedWords_native=function(e,_,i,r){for(var a=0,n=0,s=i.length;s>n;n++){var o=i[n];if(o)for(var h=0,u=o.length;u>h;h++){var l=o[h],c=l.ri;c.isSpace||(e._drawTextureUseColor=t.getFontBmpWithColor?!1:!l.isEmoji,a!=l.nColor&&(e.fillStyle=l.color,a=l.nColor),c.touch(),this._drawCharRenderInfo(e,l.ri,_+l.x,r))}}},a._drawCharRenderInfo=function(t,e,_,i){t._drawTextureM(e.tex.texture,_-this._curPage.margin_left,i-this._curPage.margin_top,e.bmpWidth,e.bmpHeight,null,1,e.uv),t.touches&&t.touches.push(e)},a.GC=function(){var t=this.fontPages.length;if(t){var e=V.loopCount%t;this.fontPages[e].removeLRU()}},t.textureWidth=512,t.cacheRenderInfoInWordText=!0,t.scaleFontWithCtx=!0,t.getFontBmpWithColor=!0,t.gridSize=16,t.debug=!1,t._curFont=null,t.charbookInst=null,t._fontMem=0,t._lastFont=null,t._lastFontSz=0,t._lastCharPage=null,i(t,["_emojiReg",function(){return this._emojiReg=/(?:0\u20E3|1\u20E3|2\u20E3|3\u20E3|4\u20E3|5\u20E3|6\u20E3|7\u20E3|8\u20E3|9\u20E3|#\u20E3|\*\u20E3|\uD83C(?:\uDDE6\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF2|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFD|\uDDFF)|\uDDE7\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFC|\uDDFE|\uDDFF)|\uDDE8\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDE9\uD83C(?:\uDDEA|\uDDEC|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDFF)|\uDDEA\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDED|\uDDF7|\uDDF8|\uDDF9|\uDDFA)|\uDDEB\uD83C(?:\uDDEE|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDF7)|\uDDEC\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF1|\uDDF2|\uDDF3|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFE)|\uDDED\uD83C(?:\uDDF0|\uDDF2|\uDDF3|\uDDF7|\uDDF9|\uDDFA)|\uDDEE\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9)|\uDDEF\uD83C(?:\uDDEA|\uDDF2|\uDDF4|\uDDF5)|\uDDF0\uD83C(?:\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDF2|\uDDF3|\uDDF5|\uDDF7|\uDDFC|\uDDFE|\uDDFF)|\uDDF1\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDEE|\uDDF0|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFE)|\uDDF2\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDF3\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFF)|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C(?:\uDDE6|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF7|\uDDF8|\uDDF9|\uDDFC|\uDDFE)|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C(?:\uDDEA|\uDDF4|\uDDF8|\uDDFA|\uDDFC)|\uDDF8\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDE9|\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFD|\uDDFE|\uDDFF)|\uDDF9\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF9|\uDDFB|\uDDFC|\uDDFF)|\uDDFA\uD83C(?:\uDDE6|\uDDEC|\uDDF2|\uDDF8|\uDDFE|\uDDFF)|\uDDFB\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDEE|\uDDF3|\uDDFA)|\uDDFC\uD83C(?:\uDDEB|\uDDF8)|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C(?:\uDDEA|\uDDF9)|\uDDFF\uD83C(?:\uDDE6|\uDDF2|\uDDFC)))|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2694\u2696\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD79\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED0\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3]|\uD83E[\uDD10-\uDD18\uDD80-\uDD84\uDDC0]/g},"_uint32",function(){return this._uint32=new Uint32Array(1)},"trash",function(){return this.trash=new e(t.textureWidth)}]),t.__init$=function(){e=function(){function t(t){this.poolLen=0,this.cleanTm=0,this.texW=0,this.pool=new Array(10),this.texW=t}r(t,"");var e=t.prototype;return e.getAPage=function(t){if(this.poolLen>0){var e=this.pool[--this.poolLen];return e.setGridNum(t),this.poolLen>0&&this.clean(),e}return new Ke(this.texW,this.texW,t)},e.discardPage=function(t){this.clean(),t&&(this.poolLen>=this.pool.length&&(this.pool=this.pool.concat(new Array(10))),t.reset(),this.pool[this.poolLen++]=t)},e.clean=function(){var t=_.stage.getFrameTm();if(0===this.cleanTm&&(this.cleanTm=t),t-this.cleanTm>3e4){for(var e=0;e<this.poolLen;e++){var i=this.pool[e];t-i._discardTm>2e4&&(i.destroy(),this.pool[e]=this.pool[this.poolLen-1],this.poolLen--,e--)}this.cleanTm=t}},t}()},t}(),ce=function(){function t(t){this._par=null,this._loaded=!0,this.bitmap={},this.bitmap.id=t.id,this._par=t}r(t,"laya.webgl.resource.CharInternalTexture");var e=t.prototype;return e._getSource=function(){return this._par._source},t}(),fe=function(){function t(t,e,_){this.pages=[],this.fontFamily=null,this._slotW=0,this._gridW=0,this._gridNum=0,this._baseSize=0,this._lastSz=0,this._spaceWidthMap=[],this._minScoreID=-1,this._selectedSizeIdx=0,this.margin_left=0,this.margin_top=0,this.margin_bottom=0,this.margin_right=0,this.gcCnt=0,this._textureWidth=le.textureWidth,this.fontFamily=t,this.margin_top=this.margin_left=this.margin_right=this.margin_bottom=_,this._baseSize=Math.floor(e/le.gridSize)*le.gridSize,this._selectedSizeIdx=e-this._baseSize|0,this._slotW=Math.ceil(e/le.gridSize)*le.gridSize,this._gridW=Math.floor(this._textureWidth/this._slotW),this._gridW<=0&&console.error("文字太大,需要修改texture大小"),this._gridNum=this._gridW*this._gridW,console.log("gridInfo:slotW="+this._slotW+",gridw="+this._gridW+",gridNum="+this._gridNum+",textureW="+this._textureWidth)}r(t,"laya.webgl.resource.CharPages");var e=t.prototype;return e.getWidth=function(e){return t.charRender.getWidth(e)},e.selectSize=function(t,e){this._selectedSizeIdx=e-this._baseSize|0},e.getSpaceChar=function(){if(this._spaceWidthMap[this._selectedSizeIdx])return this._spaceWidthMap[this._selectedSizeIdx];var t=new de;return this._spaceWidthMap[this._selectedSizeIdx]=t,t.width=this.getWidth(" "),t.isSpace=!0,t},e.getChar=function(t,e,_,i,r,a,n,s){if(" "===t)return this.getSpaceChar(n);var o,h=e>0?t+"_"+e:t;i=16777215&i,le.getFontBmpWithColor&&(h+=16777215===i?"#w":16711680===i?"#b":1048320===i?"#g":255===i?"#r":"#"+i.toString(16)),a&&(h+="B"),s&&(h+=s);for(var u=0,l=this.pages.length;l>u;u++){var c=this.pages[u],f=c.charMaps[this._selectedSizeIdx];if(f&&(o=f.get(h)))return n&&o.touch(),o}o=new de,this._getASlot(o);var d=o.tex.charMaps[this._selectedSizeIdx];!d&&(d=o.tex.charMaps[this._selectedSizeIdx]=new Map),d.set(h,o),n&&o.touch();var E="";le.getFontBmpWithColor&&(E=((65280&i)+((255&i)<<16)+((16711680&i)>>16)).toString(16),E="#000000".substr(0,7-E.length)+E),o.height=_;var A=this.getCharBmp(t,le._curFont,e,E,r,o);o.bmpWidth=A.width,o.bmpHeight=A.height;var D=Math.floor(o.pos/this._gridW),R=o.pos%this._gridW,m=R*this._slotW,T=D*this._slotW,P=this._textureWidth,v=m/P,p=T/P,C=(m+A.width)/P,M=(T+A.height)/P,O=o.uv;return O[0]=v,O[1]=p,O[2]=C,O[3]=p,O[4]=C,O[5]=M,O[6]=v,O[7]=M,o.tex.addChar(A,m,T),o},e._getASlot=function(t){for(var e,_=this.pages.length,i=0,r=0;_>r;r++)if(e=this.pages[r],i=e.findAGrid(),i>=0)return t.tex=e,t.pos=i,void 0;if(e=le.trash.getAPage(this._gridNum),this.pages.push(e),i=e.findAGrid(),-1==i)throw"_getASlot error!";t.tex=e,t.pos=i},e.getAllPageScore=function(){for(var t=0,e=this.pages.length,_=V.loopCount,i=0,r=1e4;e>t;t++){var a=this.pages[t];a._scoreTick==_?i+=a._score:a._score=0,a._score<r&&(r=a._score,this._minScoreID=t)}return i},e.removeLRU=function(){var t,e=this._gridNum*this.pages.length-this.getAllPageScore();if(e>=this._gridNum){if(this._minScoreID>=0){console.log("remove font page "+this._minScoreID),t=this.pages[this._minScoreID];var _=t._score;le.trash.discardPage(t),this.pages[this._minScoreID]=this.pages[this.pages.length-1],this.pages.pop();for(var i=V.loopCount,r=0,a=this.pages.length;a>r&&_>0;r++){t=this.pages[r];var n=t.removeOld(i);_-=n}}return this.gcCnt++,!0}return!1},e.getCharBmp=function(e,_,i,r,a,n){return t.charRender.getCharBmp(e,_,i,r,a,n,this.margin_left,this.margin_top,this.margin_right,this.margin_bottom)},t.getBmpSize=function(t){return 1.5*t},t.charRender=null,t}(),de=function(){function t(){this.tex=null,this.uv=[0,0,1,1],this.pos=0,this.width=0,this.height=0,this.bmpWidth=0,this.bmpHeight=0,this.touchTick=0,this.isSpace=!1}r(t,"laya.webgl.resource.CharRenderInfo");var e=t.prototype;return e.touch=function(){var t=V.loopCount;this.tex._scoreTick!=t&&(this.tex._score=0,this.tex._scoreTick=t),this.touchTick!=t&&this.tex._score++,this.touchTick=t},t}(),Ee=function(){function t(){}r(t,"laya.webgl.resource.ICharRender");var e=t.prototype;return e.getWidth=function(){return 0},e.scale=function(){},e.getCharBmp=function(){return null},t}(),Ae=function(){function t(){}return r(t,"laya.webgl.resource.WebGLRTMgr"),t.getRT=function(e,_){e=0|e,_=0|_,e>=1e4&&console.error("getRT error! w too big");var i,r=1e4*_+e,a=t.dict[r];return a&&a.length>0?(i=a.pop(),i._mgrKey=r,i):(i=new __(e,_,1,-1),i._mgrKey=r,i)},t.releaseRT=function(e){if(!(e._mgrKey<=0)){var _=t.dict[e._mgrKey];!_&&(_=[],t.dict[e._mgrKey]=_),e._mgrKey=0,_.push(e)}},t.dict={},t}(),De=function(){function t(){this.ALPHA=1,this.shaderType=0,this.defines=new Ge,this.fillStyle=ae.DEFAULT,this.strokeStyle=ae.DEFAULT}r(t,"laya.webgl.shader.d2.Shader2D");var e=t.prototype;return e.destroy=function(){this.defines=null,this.filters=null},t.__init__=function(){var t,e;t="/*\n	texture和fillrect使用的。\n*/\nattribute vec4 posuv;\nattribute vec4 attribColor;\nattribute vec4 attribFlags;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;\nvarying vec2 cliped;\nuniform vec2 size;\n\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\n\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\n\nvoid main() {\n\n#ifdef WORLDMAT\n	vec4 pos=mmat*vec4(posuv.xy,0.,1.);\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,0.,1.0);\n#else\n	gl_Position =vec4((posuv.x/size.x-0.5)*2.0,(0.5-posuv.y/size.y)*2.0,0.,1.0);\n#endif\n  \n	v_texcoordAlpha.xy = posuv.zw;\n	//v_texcoordAlpha.z = attribColor.a/255.0;\n	v_color = attribColor/255.0;\n	v_color.xyz*=v_color.w;//反正后面也要预乘\n	\n	v_useTex = attribFlags.r/255.0;\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = posuv.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//转成0到1之间。/clipw/clipw 表示clippos与normalize之后的clip朝向点积之后，再除以clipw\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n\n}",e="/*\n	texture和fillrect使用的。\n*/\n\nprecision mediump float;\n//precision highp float;\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\nuniform sampler2D texture;\nvarying vec2 cliped;\n\n#ifdef BLUR_FILTER\nuniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoordAlpha.xy-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}\n#endif\n\n#ifdef COLOR_FILTER\nuniform vec4 colorAlpha;\nuniform mat4 colorMat;\n#endif\n\n#ifdef GLOW_FILTER\nuniform vec4 u_color;\nuniform vec4 u_blurInfo1;/*\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\n*/\nuniform vec4 u_blurInfo2;/*\nuniform float u_textW;\nuniform float u_textH;\nuniform float u_strength;\n*/\n#endif\n\n#ifdef COLOR_ADD\nuniform vec4 colorAdd;\n#endif\n\nvoid main() {\n	if(cliped.x<0.) discard;\n	if(cliped.x>1.) discard;\n	if(cliped.y<0.) discard;\n	if(cliped.y>1.) discard;\n	\n   vec4 color= texture2D(texture, v_texcoordAlpha.xy);\n   if(v_useTex<=0.)color = vec4(1.,1.,1.,1.);\n   color.a*=v_color.w;\n   //color.rgb*=v_color.w;\n   color.rgb*=v_color.rgb;\n   gl_FragColor=color;\n   \n   #ifdef COLOR_ADD\n	gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\n	gl_FragColor.xyz *= colorAdd.a;\n   #endif\n   \n   #ifdef BLUR_FILTER\n	gl_FragColor =   blur();\n	gl_FragColor.w*=v_color.w;   \n   #endif\n   \n   #ifdef COLOR_FILTER\n	mat4 alphaMat =colorMat;\n\n	alphaMat[0][3] *= gl_FragColor.a;\n	alphaMat[1][3] *= gl_FragColor.a;\n	alphaMat[2][3] *= gl_FragColor.a;\n\n	gl_FragColor = gl_FragColor * alphaMat;\n	gl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n   #endif\n   \n   #ifdef GLOW_FILTER\n	const float c_IterationTime = 10.0;\n	float floatIterationTotalTime = c_IterationTime * c_IterationTime;\n	vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n	vec2 vec2FilterDir = vec2(-(u_blurInfo1.z)/u_blurInfo2.x,-(u_blurInfo1.w)/u_blurInfo2.y);\n	vec2 vec2FilterOff = vec2(u_blurInfo1.x/u_blurInfo2.x/c_IterationTime * 2.0,u_blurInfo1.y/u_blurInfo2.y/c_IterationTime * 2.0);\n	float maxNum = u_blurInfo1.x * u_blurInfo1.y;\n	vec2 vec2Off = vec2(0.0,0.0);\n	float floatOff = c_IterationTime/2.0;\n	for(float i = 0.0;i<=c_IterationTime; ++i){\n		for(float j = 0.0;j<=c_IterationTime; ++j){\n			vec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n			vec4Color += texture2D(texture, v_texcoordAlpha.xy + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n		}\n	}\n	gl_FragColor = vec4(u_color.rgb,vec4Color.a * u_blurInfo2.z);\n	gl_FragColor.rgb *= gl_FragColor.a;   \n   #endif\n   \n}",t_.preCompile2D(0,1,t,e,null),t="attribute vec4 position;\nattribute vec4 attribColor;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\nuniform mat4 u_mmat2;\n//uniform vec2 u_pos;\nuniform vec2 size;\nvarying vec4 color;\n//vec4 dirxy=vec4(0.9,0.1, -0.1,0.9);\n//vec4 clip=vec4(100.,30.,300.,600.);\nvarying vec2 cliped;\nvoid main(){\n	\n#ifdef WORLDMAT\n	vec4 pos=mmat*vec4(position.xy,0.,1.);\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n#else\n	gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n#endif	\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = position.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//clipdir是带缩放的方向，由于上面clippos是在缩放后的空间计算的，所以需要把方向先normalize一下\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n  //pos2d.x = dot(clippos,dirx);\n  color=attribColor/255.;\n}",e="precision mediump float;\n//precision mediump float;\nvarying vec4 color;\n//uniform float alpha;\nvarying vec2 cliped;\nvoid main(){\n	//vec4 a=vec4(color.r, color.g, color.b, 1);\n	//a.a*=alpha;\n    gl_FragColor= color;// vec4(color.r, color.g, color.b, alpha);\n	gl_FragColor.rgb*=color.a;\n	if(cliped.x<0.) discard;\n	if(cliped.x>1.) discard;\n	if(cliped.y<0.) discard;\n	if(cliped.y>1.) discard;\n}",t_.preCompile2D(0,4,t,e,null),t="/*\n	texture和fillrect使用的。\n*/\nattribute vec4 posuv;\nattribute vec4 attribColor;\nattribute vec4 attribFlags;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;\nvarying vec2 cliped;\nuniform vec2 size;\n\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\n\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\n\nvoid main() {\n\n#ifdef WORLDMAT\n	vec4 pos=mmat*vec4(posuv.xy,0.,1.);\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,0.,1.0);\n#else\n	gl_Position =vec4((posuv.x/size.x-0.5)*2.0,(0.5-posuv.y/size.y)*2.0,0.,1.0);\n#endif\n  \n	v_texcoordAlpha.xy = posuv.zw;\n	//v_texcoordAlpha.z = attribColor.a/255.0;\n	v_color = attribColor/255.0;\n	v_color.xyz*=v_color.w;//反正后面也要预乘\n	\n	v_useTex = attribFlags.r/255.0;\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = posuv.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//转成0到1之间。/clipw/clipw 表示clippos与normalize之后的clip朝向点积之后，再除以clipw\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n\n}",e='#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n\n#import?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n\n#import?COLOR_FILTER "parts/ColorFilter.glsl" with ColorFilter_ps_uniform;\n\n#import?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n\n#import?COLOR_ADD "parts/ColorAdd.glsl" with ColorAdd_ps_uniform;\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n   color.a*=alpha;\n   gl_FragColor=color;\n   \n   #import?COLOR_ADD "parts/ColorAdd.glsl" with ColorAdd_ps_logic;\n   \n   #import?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   \n   #import?COLOR_FILTER "parts/ColorFilter.glsl" with ColorFilter_ps_logic;\n   \n   #import?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',t_.preCompile2D(0,256,t,e,null),t="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",e="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\nuniform float alpha;\nvoid main() {\n	vec4 t_color = texture2D(texture, v_texcoord);\n	gl_FragColor = t_color.rgba * v_color;\n	gl_FragColor *= alpha;\n}",t_.preCompile2D(0,512,t,e,null)
},t}(),Re=function(){function t(t,e,_){this._value=0,this._name2int=t,this._int2name=e,this._int2nameMap=_}r(t,"laya.webgl.shader.ShaderDefinesBase");var e=t.prototype;return e.add=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value|=t,this._value},e.addInt=function(t){return this._value|=t,this._value},e.remove=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value&=~t,this._value},e.isDefine=function(t){return(this._value&t)===t},e.getValue=function(){return this._value},e.setValue=function(t){this._value=t},e.toNameDic=function(){var e=this._int2nameMap[this._value];return e?e:t._toText(this._value,this._int2name,this._int2nameMap)},t._reg=function(t,e,_,i){_[t]=e,i[e]=t},t._toText=function(t,e,_){var i=_[t];if(i)return i;for(var r={},a=1,n=0;32>n&&(a=1<<n,!(a>t));n++)if(t&a){var s=e[a];s&&(r[s]="")}return _[t]=r,r},t._toInt=function(t,e){for(var _=t.split("."),i=0,r=0,a=_.length;a>r;r++){var n=e[_[r]];if(!n)throw new Error("Defines to int err:"+t+"/"+_[r]);i|=n}return i},t}(),me=function(){function t(){this.ib=null,this.vb=null;be.mainContext;this.ib=a_.create(35048),this.vb=n_.create(8)}r(t,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var e=t.prototype;return e.addSkinMesh=function(t){t.getData2(this.vb,this.ib,this.vb._byteLength/32)},e.reset=function(){this.vb.clear(),this.ib.clear()},t.getInstance=function(){return t.instance=t.instance||new t},t.instance=null,t}(),Te=(function(){function t(){}return r(t,"laya.webgl.shader.ShaderValue"),t}(),function(){function t(){}return r(t,"laya.webgl.shapes.BasePoly"),t.createLine2=function(e,_,i,r,a,n){if(e.length<4)return null;var s=t.tempData.length>e.length+2?t.tempData:new Array(e.length+2);s[0]=e[0],s[1]=e[1];var o=2,h=0,u=e.length;for(h=2;u>h;h+=2)Math.abs(e[h]-e[h-2])+Math.abs(e[h+1]-e[h-1])>.01&&(s[o++]=e[h],s[o++]=e[h+1]);n&&Math.abs(e[0]-s[o-2])+Math.abs(e[1]-s[o-1])>.01&&(s[o++]=e[0],s[o++]=e[1]);var l=a;u=o/2;var c,f,d,E,A,D,R,m,T,P,v,p,C,M,O,S,g,y,L,b,B,I=i/2;for(d=s[0],E=s[1],A=s[2],D=s[3],T=-(E-D),P=d-A,B=Math.sqrt(T*T+P*P),T=T/B*I,P=P/B*I,l.push(d-T,E-P,d+T,E+P),h=1;u-1>h;h++)d=s[2*(h-1)],E=s[2*(h-1)+1],A=s[2*h],D=s[2*h+1],R=s[2*(h+1)],m=s[2*(h+1)+1],T=-(E-D),P=d-A,B=Math.sqrt(T*T+P*P),T=T/B*I,P=P/B*I,v=-(D-m),p=A-R,B=Math.sqrt(v*v+p*p),v=v/B*I,p=p/B*I,C=-P+E-(-P+D),M=-T+A-(-T+d),O=(-T+d)*(-P+D)-(-T+A)*(-P+E),S=-p+m-(-p+D),g=-v+A-(-v+R),y=(-v+R)*(-p+D)-(-v+A)*(-p+m),L=C*g-S*M,Math.abs(L)<.1?(L+=10.1,l.push(A-T,D-P,A+T,D+P)):(c=(M*y-g*O)/L,f=(S*O-C*y)/L,b=(c-A)*(c-A)+(f-D)+(f-D),l.push(c,f,A-(c-A),D-(f-D)));for(d=s[o-4],E=s[o-3],A=s[o-2],D=s[o-1],T=-(E-D),P=d-A,B=Math.sqrt(T*T+P*P),T=T/B*I,P=P/B*I,l.push(A-T,D-P,A+T,D+P),h=1;u>h;h++)_.push(r+2*(h-1),r+2*(h-1)+1,r+2*h+1,r+2*h+1,r+2*h,r+2*(h-1));return l},t.createLineTriangle=function(t,e,_,i){var r=t.slice(),a=r.length,n=r[0],s=r[1],o=r[2],h=r[2],u=0,l=0,c=0,f=0,d=a/2;if(!(1>=d)&&2!=d){for(var E=new Array(4*d),A=0,D=0,R=0;d-1>R;R++)n=r[D++],s=r[D++],o=r[D++],h=r[D++],c=o-n,f=h-s,0!=c&&0!=f&&(u=Math.sqrt(c*c+f*f),u>.001&&(l=4*A,E[l]=n,E[l+1]=s,E[l+2]=c/u,E[l+3]=f/u,A++));for(i?(n=r[a-2],s=r[a-1],o=r[0],h=r[1],c=o-n,f=h-s,0!=c&&0!=f&&(u=Math.sqrt(c*c+f*f),u>.001&&(l=4*A,E[l]=n,E[l+1]=s,E[l+2]=c/u,E[l+3]=f/u,A++))):(l=4*A,E[l]=n,E[l+1]=s,E[l+2]=c/u,E[l+3]=f/u,A++),D=0,R=0;d>R;R++){n=r[D],s=r[D+1],o=r[D+2],h=r[D+3];{r[D+4],r[D+5]}}}},i(t,["tempData",function(){return this.tempData=new Array(256)}]),t}()),Pe=function(){function t(){}return r(t,"laya.webgl.shapes.Earcut"),t.earcut=function(e,_,i){i=i||2;var r=_&&_.length,a=r?_[0]*i:e.length,n=t.linkedList(e,0,a,i,!0),s=[];if(!n)return s;var o,h,u,l,c,f,d;if(r&&(n=t.eliminateHoles(e,_,n,i)),e.length>80*i){o=u=e[0],h=l=e[1];for(var E=i;a>E;E+=i)c=e[E],f=e[E+1],o>c&&(o=c),h>f&&(h=f),c>u&&(u=c),f>l&&(l=f);d=Math.max(u-o,l-h),d=0!==d?1/d:0}return t.earcutLinked(n,s,i,o,h,d),s},t.linkedList=function(e,_,i,r,a){var n,s;if(a===t.signedArea(e,_,i,r)>0)for(n=_;i>n;n+=r)s=t.insertNode(n,e[n],e[n+1],s);else for(n=i-r;n>=_;n-=r)s=t.insertNode(n,e[n],e[n+1],s);return s&&t.equals(s,s.next)&&(t.removeNode(s),s=s.next),s},t.filterPoints=function(e,_){if(!e)return e;_||(_=e);var i,r=e;do if(i=!1,r.steiner||!t.equals(r,r.next)&&0!==t.area(r.prev,r,r.next))r=r.next;else{if(t.removeNode(r),r=_=r.prev,r===r.next)break;i=!0}while(i||r!==_);return _},t.earcutLinked=function(e,_,i,r,a,n,s){if(e){!s&&n&&t.indexCurve(e,r,a,n);for(var o,h,u=e;e.prev!==e.next;)if(o=e.prev,h=e.next,n?t.isEarHashed(e,r,a,n):t.isEar(e))_.push(o.i/i),_.push(e.i/i),_.push(h.i/i),t.removeNode(e),e=h.next,u=h.next;else if(e=h,e===u){s?1===s?(e=t.cureLocalIntersections(e,_,i),t.earcutLinked(e,_,i,r,a,n,2)):2===s&&t.splitEarcut(e,_,i,r,a,n):t.earcutLinked(t.filterPoints(e,null),_,i,r,a,n,1);break}}},t.isEar=function(e){var _=e.prev,i=e,r=e.next;if(t.area(_,i,r)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(t.pointInTriangle(_.x,_.y,i.x,i.y,r.x,r.y,a.x,a.y)&&t.area(a.prev,a,a.next)>=0)return!1;a=a.next}return!0},t.isEarHashed=function(e,_,i,r){var a=e.prev,n=e,s=e.next;if(t.area(a,n,s)>=0)return!1;for(var o=a.x<n.x?a.x<s.x?a.x:s.x:n.x<s.x?n.x:s.x,h=a.y<n.y?a.y<s.y?a.y:s.y:n.y<s.y?n.y:s.y,u=a.x>n.x?a.x>s.x?a.x:s.x:n.x>s.x?n.x:s.x,l=a.y>n.y?a.y>s.y?a.y:s.y:n.y>s.y?n.y:s.y,c=t.zOrder(o,h,_,i,r),f=t.zOrder(u,l,_,i,r),d=e.nextZ;d&&d.z<=f;){if(d!==e.prev&&d!==e.next&&t.pointInTriangle(a.x,a.y,n.x,n.y,s.x,s.y,d.x,d.y)&&t.area(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=c;){if(d!==e.prev&&d!==e.next&&t.pointInTriangle(a.x,a.y,n.x,n.y,s.x,s.y,d.x,d.y)&&t.area(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0},t.cureLocalIntersections=function(e,_,i){var r=e;do{var a=r.prev,n=r.next.next;!t.equals(a,n)&&t.intersects(a,r,r.next,n)&&t.locallyInside(a,n)&&t.locallyInside(n,a)&&(_.push(a.i/i),_.push(r.i/i),_.push(n.i/i),t.removeNode(r),t.removeNode(r.next),r=e=n),r=r.next}while(r!==e);return r},t.splitEarcut=function(e,_,i,r,a,n){var s=e;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&t.isValidDiagonal(s,o)){var h=t.splitPolygon(s,o);return s=t.filterPoints(s,s.next),h=t.filterPoints(h,h.next),t.earcutLinked(s,_,i,r,a,n),t.earcutLinked(h,_,i,r,a,n),void 0}o=o.next}s=s.next}while(s!==e)},t.eliminateHoles=function(e,_,i,r){var a,n,s,o,h,u=[];for(a=0,n=_.length;n>a;a++)s=_[a]*r,o=n-1>a?_[a+1]*r:e.length,h=t.linkedList(e,s,o,r,!1),h===h.next&&(h.steiner=!0),u.push(t.getLeftmost(h));for(u.sort(t.compareX),a=0;a<u.length;a++)t.eliminateHole(u[a],i),i=t.filterPoints(i,i.next);return i},t.compareX=function(t,e){return t.x-e.x},t.eliminateHole=function(e,_){if(_=t.findHoleBridge(e,_)){var i=t.splitPolygon(_,e);t.filterPoints(i,i.next)}},t.findHoleBridge=function(e,_){var i,r=_,a=e.x,n=e.y,s=-1/0;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var o=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a>=o&&o>s){if(s=o,o===a){if(n===r.y)return r;if(n===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==_);if(!i)return null;if(a===s)return i.prev;var h,u=i,l=i.x,c=i.y,f=1/0;for(r=i.next;r!==u;)a>=r.x&&r.x>=l&&a!==r.x&&t.pointInTriangle(c>n?a:s,n,l,c,c>n?s:a,n,r.x,r.y)&&(h=Math.abs(n-r.y)/(a-r.x),(f>h||h===f&&r.x>i.x)&&t.locallyInside(r,e)&&(i=r,f=h)),r=r.next;return i},t.indexCurve=function(e,_,i,r){var a=e;do null===a.z&&(a.z=t.zOrder(a.x,a.y,_,i,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,t.sortLinked(a)},t.sortLinked=function(t){var e,_,i,r,a,n,s,o,h=1;do{for(_=t,t=null,a=null,n=0;_;){for(n++,i=_,s=0,e=0;h>e&&(s++,i=i.nextZ,i);e++);for(o=h;s>0||o>0&&i;)0!==s&&(0===o||!i||_.z<=i.z)?(r=_,_=_.nextZ,s--):(r=i,i=i.nextZ,o--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;_=i}a.nextZ=null,h*=2}while(n>1);return t},t.zOrder=function(t,e,_,i,r){return t=32767*(t-_)*r,e=32767*(e-i)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},t.getLeftmost=function(t){var e=t,_=t;do e.x<_.x&&(_=e),e=e.next;while(e!==t);return _},t.pointInTriangle=function(t,e,_,i,r,a,n,s){return(r-n)*(e-s)-(t-n)*(a-s)>=0&&(t-n)*(i-s)-(_-n)*(e-s)>=0&&(_-n)*(a-s)-(r-n)*(i-s)>=0},t.isValidDiagonal=function(e,_){return e.next.i!==_.i&&e.prev.i!==_.i&&!t.intersectsPolygon(e,_)&&t.locallyInside(e,_)&&t.locallyInside(_,e)&&t.middleInside(e,_)},t.area=function(t,e,_){return(e.y-t.y)*(_.x-e.x)-(e.x-t.x)*(_.y-e.y)},t.equals=function(t,e){return t.x===e.x&&t.y===e.y},t.intersects=function(e,_,i,r){return t.equals(e,_)&&t.equals(i,r)||t.equals(e,r)&&t.equals(i,_)?!0:t.area(e,_,i)>0!=t.area(e,_,r)>0&&t.area(i,r,e)>0!=t.area(i,r,_)>0},t.intersectsPolygon=function(e,_){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==_.i&&i.next.i!==_.i&&t.intersects(i,i.next,e,_))return!0;i=i.next}while(i!==e);return!1},t.locallyInside=function(e,_){return t.area(e.prev,e,e.next)<0?t.area(e,_,e.next)>=0&&t.area(e,e.prev,_)>=0:t.area(e,_,e.prev)<0||t.area(e,e.next,_)<0},t.middleInside=function(t,e){var _=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do _.y>a!=_.next.y>a&&_.next.y!==_.y&&r<(_.next.x-_.x)*(a-_.y)/(_.next.y-_.y)+_.x&&(i=!i),_=_.next;while(_!==t);return i},t.splitPolygon=function(t,e){var _=new ve(t.i,t.x,t.y),i=new ve(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,_.next=r,r.prev=_,i.next=_,_.prev=i,a.next=i,i.prev=a,i},t.insertNode=function(t,e,_,i){var r=new ve(t,e,_);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r},t.removeNode=function(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)},t.signedArea=function(t,e,_,i){for(var r=0,a=e,n=_-i;_>a;a+=i)r+=(t[n]-t[a])*(t[a+1]+t[n+1]),n=a;return r},t}(),ve=function(){function t(t,e,_){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=t,this.x=e,this.y=_,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return r(t,"laya.webgl.shapes.EarcutNode"),t}(),pe=function(){function t(e){this.clipInfoID=-1,this._numEle=0,this._ref=1,this._key=new Me,void 0===e&&(e=1e4),this._renderType=e,this._id=++t.ID}r(t,"laya.webgl.submit.Submit");var e=t.prototype;return _.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.getID=function(){return this._id},e.releaseRender=function(){t.RENDERBASE!=this&&--this._ref<1&&(t.POOL[t._poolSize++]=this,this.shaderValue.release(),this.shaderValue=null,this._mesh=null,this._parent&&(this._parent.releaseRender(),this._parent=null))},e.getRenderType=function(){return this._renderType},e.renderSubmit=function(){if(0===this._numEle||!this._mesh||0==this._numEle)return 1;var t=this.shaderValue.textureHost;if(t){var e=t._getSource();if(!e)return 1;this.shaderValue.texture=e}var _=be.mainContext;return this._mesh.useMesh(_),this.shaderValue.upload(),re.activeBlendFunction!==this._blendFn&&(Be.setBlend(_,!0),this._blendFn(_),re.activeBlendFunction=this._blendFn),_.drawElements(4,this._numEle,5123,this._startIdx),V.drawCall++,V.trianglesFaces+=this._numEle/3,1},e._cloneInit=function(t,e,_,i){t._ref=1,t._mesh=_,t._id=this._id,t._key.copyFrom(this._key),t._parent=this,t._blendFn=this._blendFn,t._renderType=this._renderType,t._startIdx=i*Se.BYTES_PIDX,t._numEle=this._numEle,t.shaderValue=this.shaderValue,this.shaderValue.ref++,this._ref++},e.clone=function(){return null},e.reUse=function(){return 0},e.toString=function(){return"ibindex:"+this._startIdx+" num:"+this._numEle+" key="+this._key},t.__init__=function(){var e=t.RENDERBASE=new t(-1);e.shaderValue=new Z(0,0),e.shaderValue.ALPHA=1,e._ref=4294967295},t.create=function(e,_,i){var r=t._poolSize?t.POOL[--t._poolSize]:new t;r._ref=1,r._mesh=_,r._key.clear(),r._startIdx=_.indexNum*Se.BYTES_PIDX,r._numEle=0;var a=e._nBlendType;r._blendFn=e._targets?re.targetFns[a]:re.fns[a],r.shaderValue=i,r.shaderValue.setValue(e._shader2D);var n=e._shader2D.filters;return n&&r.shaderValue.setFilters(n),r},t.createShape=function(e,_,i,r){var a=t._poolSize?t.POOL[--t._poolSize]:new t;a._mesh=_,a._numEle=i,a._startIdx=2*_.indexNum,a._ref=1,a.shaderValue=r,a.shaderValue.setValue(e._shader2D);var n=e._nBlendType;return a._blendFn=e._targets?re.targetFns[n]:re.fns[n],a},t.TYPE_2D=1e4,t.TYPE_CANVAS=10003,t.TYPE_CMDSETRT=10004,t.TYPE_CUSTOM=10005,t.TYPE_BLURRT=10006,t.TYPE_CMDDESTORYPRERT=10007,t.TYPE_DISABLESTENCIL=10008,t.TYPE_OTHERIBVB=10009,t.TYPE_PRIMITIVE=10010,t.TYPE_RT=10011,t.TYPE_BLUR_RT=10012,t.TYPE_TARGET=10013,t.TYPE_CHANGE_VALUE=10014,t.TYPE_SHAPE=10015,t.TYPE_TEXTURE=10016,t.TYPE_FILLTEXTURE=10017,t.KEY_ONCE=-1,t.KEY_FILLRECT=1,t.KEY_DRAWTEXTURE=2,t.KEY_VG=3,t.KEY_TRIANGLES=4,t.RENDERBASE=null,t.ID=1,t.preRender=null,t._poolSize=0,t.POOL=[],t}(),Ce=function(){function t(){this.fun=null,this._this=null,this.args=null,this._ref=1,this._key=new Me}r(t,"laya.webgl.submit.SubmitCMD");var e=t.prototype;return _.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){return this.fun.apply(this._this,this.args),1},e.getRenderType=function(){return 0},e.reUse=function(t,e){return this._ref++,e},e.releaseRender=function(){if(--this._ref<1){var e=t.POOL;e[e._length++]=this}},e.clone=function(){return null},t.create=function(e,_,i){var r=t.POOL._length?t.POOL[--t.POOL._length]:new t;return r.fun=_,r.args=e,r._this=i,r._ref=1,r._key.clear(),r},t.POOL=(t.POOL=[],t.POOL._length=0,t.POOL),t}(),Me=function(){function t(){this.blendShader=0,this.alpha=1,this.submitType=0,this.other=0,this.clear()}r(t,"laya.webgl.submit.SubmitKey");var e=t.prototype;return e.clear=function(){this.submitType=-1,this.blendShader=this.other=0},e.copyFrom=function(t){this.other=t.other,this.blendShader=t.blendShader,this.submitType=t.submitType},e.copyFrom2=function(t,e,_){this.blendShader=t.blendShader,this.other=_,this.submitType=e},e.equal3_2=function(t,e,_){return this.submitType===e&&this.other===_&&this.blendShader===t.blendShader},e.equal4_2=function(t,e,_){return this.submitType===e&&this.other===_&&this.blendShader===t.blendShader},e.equal_3=function(t){return this.submitType===t.submitType&&this.blendShader===t.blendShader},e.equal=function(t){return this.other===t.other&&this.submitType===t.submitType&&this.blendShader===t.blendShader},t}(),Oe=function(){function t(){this._mesh=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this._ref=1,this.srcRT=null,this._key=new Me}r(t,"laya.webgl.submit.SubmitTarget");var e=t.prototype;return _.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){var t=be.mainContext;this._mesh.useMesh(t);var e=this.srcRT;return e&&(this.shaderValue.texture=e._getSource(),this.shaderValue.upload(),this.blend(),V.drawCall++,V.trianglesFaces+=this._numEle/3,be.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},e.blend=function(){if(re.activeBlendFunction!==re.fns[this.blendType]){var t=be.mainContext;t.enable(3042),re.fns[this.blendType](t),re.activeBlendFunction=re.fns[this.blendType]}},e.getRenderType=function(){return 0},e.releaseRender=function(){if(--this._ref<1){var e=t.POOL;e[e._length++]=this}},e.reUse=function(t,e){return this._startIdx=e,this._ref++,e},t.create=function(e,_,i,r){var a=t.POOL._length?t.POOL[--t.POOL._length]:new t;if(a._mesh=_,a.srcRT=r,a._startIdx=_.indexNum*Se.BYTES_PIDX,a._ref=1,a._key.clear(),a._numEle=0,a.blendType=e._nBlendType,a._key.blendShader=a.blendType,a.shaderValue=i,a.shaderValue.setValue(e._shader2D),e._colorFiler){var n=e._colorFiler;i.defines.add(n.type),i.colorMat=n._mat,i.colorAlpha=n._alpha}return a},t.POOL=(t.POOL=[],t.POOL._length=0,t.POOL),t}(),Se=(function(){function t(){}r(t,"laya.webgl.text.ArabicReshaper");var e=t.prototype;return e.characterMapContains=function(e){for(var _=0;_<t.charsMap.length;++_)if(t.charsMap[_][0]===e)return!0;return!1},e.getCharRep=function(e){for(var _=0;_<t.charsMap.length;++_)if(t.charsMap[_][0]===e)return t.charsMap[_];return!1},e.getCombCharRep=function(e,_){for(var i=0;i<t.combCharsMap.length;++i)if(t.combCharsMap[i][0][0]===e&&t.combCharsMap[i][0][1]===_)return t.combCharsMap[i];return!1},e.isTransparent=function(e){for(var _=0;_<t.transChars.length;++_)if(t.transChars[_]===e)return!0;return!1},e.getOriginalCharsFromCode=function(e){var _=0;for(_=0;_<t.charsMap.length;++_)if(t.charsMap[_].indexOf(e)>-1)return String.fromCharCode(t.charsMap[_][0]);for(_=0;_<t.combCharsMap.length;++_)if(t.combCharsMap[_].indexOf(e)>-1)return String.fromCharCode(t.combCharsMap[_][0][0])+String.fromCharCode(t.combCharsMap[_][0][1]);return String.fromCharCode(e)},e.convertArabic=function(t){for(var e,_,i="",r=0;r<t.length;++r){var a=t.charCodeAt(r);if(this.characterMapContains(a)){for(var n=null,s=null,o=r-1,h=r+1;o>=0&&this.isTransparent(t.charCodeAt(o));--o);for(n=o>=0?t.charCodeAt(o):null,e=n?this.getCharRep(n):!1,(!e||null==e[2]&&null==e[3])&&(n=null);h<t.length&&this.isTransparent(t.charCodeAt(h));++h);if(s=h<t.length?t.charCodeAt(h):null,e=s?this.getCharRep(s):!1,(!e||null==e[3]&&null==e[4])&&(s=null),1604===a&&null!=s&&(1570===s||1571===s||1573===s||1575===s)){_=this.getCombCharRep(a,s),i+=null!=n?String.fromCharCode(_[4]):String.fromCharCode(_[1]),++r;continue}if(e=this.getCharRep(a),null!=n&&null!=s&&null!=e[3]){i+=String.fromCharCode(e[3]);continue}if(null!=n&&null!=e[4]){i+=String.fromCharCode(e[4]);continue}if(null!=s&&null!=e[2]){i+=String.fromCharCode(e[2]);continue}i+=String.fromCharCode(e[1])}else i+=String.fromCharCode(a)}return i},e.convertArabicBack=function(t){var e="",_=0,i=0;for(i=0;i<t.length;++i)_=t.charCodeAt(i),e+=this.getOriginalCharsFromCode(_);return e},i(t,["charsMap",function(){return this.charsMap=[[1569,65152,null,null,null],[1570,65153,null,null,65154],[1571,65155,null,null,65156],[1572,65157,null,null,65158],[1573,65159,null,null,65160],[1574,65161,65163,65164,65162],[1575,65165,null,null,65166],[1576,65167,65169,65170,65168],[1577,65171,null,null,65172],[1578,65173,65175,65176,65174],[1579,65177,65179,65180,65178],[1580,65181,65183,65184,65182],[1581,65185,65187,65188,65186],[1582,65189,65191,65192,65190],[1583,65193,null,null,65194],[1584,65195,null,null,65196],[1585,65197,null,null,65198],[1586,65199,null,null,65200],[1587,65201,65203,65204,65202],[1588,65205,65207,65208,65206],[1589,65209,65211,65212,65210],[1590,65213,65215,65216,65214],[1591,65217,65219,65220,65218],[1592,65221,65223,65224,65222],[1593,65225,65227,65228,65226],[1594,65229,65231,65232,65230],[1600,1600,1600,1600,1600],[1601,65233,65235,65236,65234],[1602,65237,65239,65240,65238],[1603,65241,65243,65244,65242],[1604,65245,65247,65248,65246],[1605,65249,65251,65252,65250],[1606,65253,65255,65256,65254],[1607,65257,65259,65260,65258],[1608,65261,null,null,65262],[1609,65263,null,null,65264],[1610,65265,65267,65268,65266],[1662,64342,64344,64345,64343],[1740,64508,64510,64511,64509],[1670,64378,64380,64381,64379],[1705,64398,64400,64401,64399],[1711,64402,64404,64405,64403],[1688,64394,null,null,64395]]},"combCharsMap",function(){return this.combCharsMap=[[[1604,1570],65269,null,null,65270],[[1604,1571],65271,null,null,65272],[[1604,1573],65273,null,null,65274],[[1604,1575],65275,null,null,65276]]},"transChars",function(){return this.transChars=[1552,1554,1555,1556,1557,1611,1612,1613,1614,1615,1616,1617,1618,1619,1620,1621,1622,1623,1624,1648,1750,1751,1752,1753,1754,1755,1756,1759,1760,1761,1762,1763,1764,1767,1768,1770,1771,1772,1773]}]),t}(),function(){function t(){}return r(t,"laya.webgl.utils.CONST3D2D"),t.BYTES_PE=4,t.BYTES_PIDX=2,t.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],t.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],t._TMPARRAY=[],t._OFFSETX=0,t._OFFSETY=0,t}()),ge=(function(){function t(){}return r(t,"laya.webgl.utils.MatirxArray"),t.ArrayMul=function(e,_,i){if(!e)return t.copyArray(_,i),void 0;if(!_)return t.copyArray(e,i),void 0;for(var r=0/0,a=0/0,n=0/0,s=0/0,o=0;4>o;o++)r=e[o],a=e[o+4],n=e[o+8],s=e[o+12],i[o]=r*_[0]+a*_[1]+n*_[2]+s*_[3],i[o+4]=r*_[4]+a*_[5]+n*_[6]+s*_[7],i[o+8]=r*_[8]+a*_[9]+n*_[10]+s*_[11],i[o+12]=r*_[12]+a*_[13]+n*_[14]+s*_[15]},t.copyArray=function(t,e){if(t&&e)for(var _=0;_<t.length;_++)e[_]=t[_]},t}(),function(){function t(t,e,_){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=t,this._vb=new n_(t,35048),e?this._vb._resizeBuffer(e,!1):c.webGL2D_MeshAllocMaxMem&&this._vb._resizeBuffer(65536*t,!1),this._ib=new a_,_&&this._ib._resizeBuffer(_,!1)}r(t,"laya.webgl.utils.Mesh2D");var e=t.prototype;return e.cloneWithNewVB=function(){var e=new t(this._stride,0,0);return e._ib=this._ib,e._quadNum=this._quadNum,e._attribInfo=this._attribInfo,e},e.cloneWithNewVBIB=function(){var e=new t(this._stride,0,0);return e._attribInfo=this._attribInfo,e},e.getVBW=function(){return this._vb.setNeedUpload(),this._vb},e.getVBR=function(){return this._vb},e.getIBR=function(){return this._ib},e.getIBW=function(){return this._ib.setNeedUpload(),this._ib},e.createQuadIB=function(t){this._quadNum=t,this._ib._resizeBuffer(6*t*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var e=this._ib.getUint16Array(),_=0,i=0,r=0;t>r;r++)e[_++]=i,e[_++]=i+2,e[_++]=i+1,e[_++]=i,e[_++]=i+3,e[_++]=i+2,i+=4;this._ib.setNeedUpload()},e.setAttributes=function(t){if(this._attribInfo=t,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},e.configVAO=function(t){if(!this._applied){this._applied=!0,this._vao||(this._vao=t.createVertexArray()),Be.bindVertexArray(t,this._vao),this._vb._bindForVAO(),this._ib.setNeedUpload(),this._ib._bind_uploadForVAO();for(var e=this._attribInfo.length/3,_=0,i=0;e>i;i++){var r=this._attribInfo[_+1],a=this._attribInfo[_],n=this._attribInfo[_+2];t.enableVertexAttribArray(i),t.vertexAttribPointer(i,r,a,!1,this._stride,n),_+=3}Be.bindVertexArray(t,null)}},e.useMesh=function(t){this._applied||this.configVAO(t),Be.bindVertexArray(t,this._vao),this._vb.bind(),this._ib._bind_upload()||this._ib.bind(),this._vb._bind_upload()||this._vb.bind()},e.getEleNum=function(){return this._ib.getBuffer().byteLength/2},e.releaseMesh=function(){},e.destroy=function(){},e.clearVB=function(){this._vb.clear()},t._gvaoid=0,t}()),ye=function(){function t(){}return r(t,"laya.webgl.utils.RenderState2D"),t.mat2MatArray=function(e,_){var i=e,r=_;return r[0]=i.a,r[1]=i.b,r[2]=t.EMPTYMAT4_ARRAY[2],r[3]=t.EMPTYMAT4_ARRAY[3],r[4]=i.c,r[5]=i.d,r[6]=t.EMPTYMAT4_ARRAY[6],r[7]=t.EMPTYMAT4_ARRAY[7],r[8]=t.EMPTYMAT4_ARRAY[8],r[9]=t.EMPTYMAT4_ARRAY[9],r[10]=t.EMPTYMAT4_ARRAY[10],r[11]=t.EMPTYMAT4_ARRAY[11],r[12]=i.tx,r[13]=i.ty,r[14]=t.EMPTYMAT4_ARRAY[14],r[15]=t.EMPTYMAT4_ARRAY[15],_},t.restoreTempArray=function(){t.TEMPMAT4_ARRAY[0]=1,t.TEMPMAT4_ARRAY[1]=0,t.TEMPMAT4_ARRAY[4]=0,t.TEMPMAT4_ARRAY[5]=1,t.TEMPMAT4_ARRAY[12]=0,t.TEMPMAT4_ARRAY[13]=0},t.clear=function(){t.worldScissorTest=!1,t.worldAlpha=1},t._MAXSIZE=99999999,t.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.worldMatrix4=t.TEMPMAT4_ARRAY,t.worldAlpha=1,t.worldScissorTest=!1,t.worldShaderDefines=null,t.worldFilters=null,t.width=0,t.height=0,i(t,["worldMatrix",function(){return this.worldMatrix=new p}]),t}(),Le=function(){function t(t,_,i,r){function a(t){var _=[],i=new e(_);return n._compileToTree(i,t.split("\n"),0,_,r),i}var n=this,s=h.now();this._VS=a(t),this._PS=a(_),this._nameMap=i,h.now()-s>2&&console.log("ShaderCompile use time:"+(h.now()-s)+"  size:"+t.length+"/"+_.length)}var e,_;r(t,"laya.webgl.utils.ShaderCompile");var a=t.prototype;return a._compileToTree=function(_,i,r,a,n){var s,o,h,u,l,c,f,d=0,E=0,A=0,D=0;for(E=r;E<i.length;E++)if(h=i[E],!(h.length<1)&&(d=h.indexOf("//"),0!==d)){if(d>=0&&(h=h.substr(0,d)),s=f||new e(a),f=null,s.text=h,s.noCompile=!0,(d=h.indexOf("#"))>=0){for(u="#",D=d+1,A=h.length;A>D;D++){var R=h.charAt(D);if(" "===R||"	"===R||"?"===R)break;u+=R}switch(s.name=u,u){case"#ifdef":case"#ifndef":if(s.src=h,s.noCompile=null!=h.match(/[!&|()=<>]/),s.noCompile?console.log("function():Boolean{return "+h.substr(d+s.name.length)+"}"):(c=h.replace(/^\s*/,"").split(/\s+/),s.setCondition(c[1],"#ifdef"===u?1:2),s.text="//"+s.text),s.setParent(_),_=s,n)for(c=h.substr(D).split(t._splitToWordExps3),D=0;D<c.length;D++)h=c[D],h.length&&(n[h]=!0);continue;case"#if":if(s.src=h,s.noCompile=!0,s.setParent(_),_=s,n)for(c=h.substr(D).split(t._splitToWordExps3),D=0;D<c.length;D++)h=c[D],h.length&&"defined"!=h&&(n[h]=!0);continue;case"#else":s.src=h,_=_.parent,o=_.childs[_.childs.length-1],s.noCompile=o.noCompile,s.noCompile||(s.condition=o.condition,s.conditionType=1==o.conditionType?2:1,s.text="//"+s.text+" "+o.text+" "+s.conditionType),s.setParent(_),_=s;continue;case"#endif":_=_.parent,o=_.childs[_.childs.length-1],s.noCompile=o.noCompile,s.noCompile||(s.text="//"+s.text),s.setParent(_);continue;case"#include":c=t.splitToWords(h,null);var m=t.includes[c[1]];if(!m)throw"ShaderCompile error no this include file:"+c[1];if((d=c[0].indexOf("?"))<0){s.setParent(_),h=m.getWith("with"==c[2]?c[3]:null),this._compileToTree(s,h.split("\n"),0,a,n),s.text="";continue}s.setCondition(c[0].substr(d+1),1),s.text=m.getWith("with"==c[2]?c[3]:null);break;case"#import":c=t.splitToWords(h,null),l=c[1],a.push({node:s,file:t.includes[l],ofs:s.text.length});continue}}else{if(o=_.childs[_.childs.length-1],o&&!o.name){a.length>0&&t.splitToWords(h,o),f=s,o.text+="\n"+h;continue}a.length>0&&t.splitToWords(h,s)}s.setParent(_)}},a.createShader=function(t,e,_,i){var r={},a="";if(t)for(var n in t)a+="#define "+n+"\n",r[n]=!0;var s=this._VS.toscript(r,[]),o=this._PS.toscript(r,[]);return(_||t_.create)(a+s.join("\n"),a+o.join("\n"),e,this._nameMap,i)},t._parseOne=function(e,_,i,r,a,n){var s={type:t.shaderParamsMap[i[r+1]],name:i[r+2],size:isNaN(parseInt(i[r+3]))?1:parseInt(i[r+3])};return n&&("attribute"==a?e.push(s):_.push(s)),":"==i[r+3]&&(s.type=i[r+4],r+=2),r+=2},t.addInclude=function(e,i){if(!i||0===i.length)throw new Error("add shader include file err:"+e);if(t.includes[e])throw new Error("add shader include file err, has add:"+e);t.includes[e]=new _(i)},t.preGetParams=function(e,_){var i=[e,_],r={},a=[],n=[],s={},o=[];r.attributes=a,r.uniforms=n,r.defines=s;for(var h=0,u=0,l=0;2>l;l++){i[l]=i[l].replace(t._removeAnnotation,"");var c,f=i[l].match(t._reg);for(h=0,u=f.length;u>h;h++){var d=f[h];if("attribute"==d||"uniform"==d)h=t._parseOne(a,n,f,h,d,!0);else{if("#define"==d){d=f[++h],o[d]=1;continue}if("#ifdef"==d){c=f[++h];{s[c]=s[c]||[]}for(h++;u>h;h++)if(d=f[h],"attribute"==d||"uniform"==d)h=t._parseOne(a,n,f,h,d,o[c]);else if("#else"==d)for(h++;u>h;h++)if(d=f[h],"attribute"==d||"uniform"==d)h=t._parseOne(a,n,f,h,d,!o[c]);else if("#endif"==d)break}}}}return r},t.splitToWords=function(t,e){for(var _,i,r=[],a=-1,n=0,s=t.length;s>n;n++)if(_=t.charAt(n)," 	=+-*/&%!<>()'\",;".indexOf(_)>=0){if(a>=0&&n-a>1&&(i=t.substr(a,n-a),r.push(i)),'"'==_||"'"==_){var o=t.indexOf(_,n+1);if(0>o)throw"Sharder err:"+t;r.push(t.substr(n+1,o-n-1)),n=o,a=-1;continue}"("==_&&e&&r.length>0&&(i=r[r.length-1]+";","vec4;main;".indexOf(i)<0&&(e.useFuns+=i)),a=-1}else 0>a&&(a=n);return s>a&&s-a>1&&(i=t.substr(a,s-a),r.push(i)),r},t.IFDEF_NO=0,t.IFDEF_YES=1,t.IFDEF_ELSE=2,t.IFDEF_PARENT=3,t._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),t._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),t._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),t.includes={},i(t,["shaderParamsMap",function(){return this.shaderParamsMap={"float":5126,"int":5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),t.__init$=function(){e=function(){function t(t){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=t}r(t,"");var e=t.prototype;return e.setParent=function(t){t.childs.push(this),this.z=t.z+1,this.parent=t},e.setCondition=function(t,e){t&&(this.conditionType=e,t=t.replace(/(\s*$)/g,""),this.condition=function(){return this[t]},this.condition.__condition=t)},e.toscript=function(e,_){return this._toscript(e,_,++t.__id)},e._toscript=function(t,e,_){if(this.childs.length<1&&!this.text)return e;e.length;if(this.condition){var i=!!this.condition.call(t);if(2===this.conditionType&&(i=!i),!i)return e}if(this.text&&e.push(this.text),this.childs.length>0&&this.childs.forEach(function(i){i._toscript(t,e,_)}),this.includefiles.length>0&&this.useFuns.length>0)for(var r,a=0,n=this.includefiles.length;n>a;a++)this.includefiles[a].curUseID!=_&&(r=this.includefiles[a].file.getFunsScript(this.useFuns),r.length>0&&(this.includefiles[a].curUseID=_,e[0]=r+e[0]));return e},t.__id=1,t}(),_=function(){function e(e){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=e;for(var _=0,i=0,r=0;;){if(_=e.indexOf("#begin",_),0>_)break;for(r=_+5;;){if(r=e.indexOf("#end",r),0>r)break;if("i"!==e.charAt(r+4))break;r+=5}if(0>r)throw"add include err,no #end:"+e;i=e.indexOf("\n",_);var a=t.splitToWords(e.substr(_,i-_),null);"code"==a[1]?this.codes[a[2]]=e.substr(i+1,r-i-1):"function"==a[1]&&(i=e.indexOf("function",_),i+="function".length,this.funs[a[3]]=e.substr(i+1,r-i-1),this.funnames+=a[3]+";"),_=r+1}}r(e,"");var _=e.prototype;return _.getWith=function(t){var e=t?this.codes[t]:this.script;if(!e)throw"get with error:"+t;return e},_.getFunsScript=function(t){var e="";for(var _ in this.funs)t.indexOf(_+";")>=0&&(e+=this.funs[_]);return e},e}()},t}(),be=function(){function e(){}return r(e,"laya.webgl.WebGL"),e._uint8ArraySlice=function(){for(var t=this,e=t.length,_=new Uint8Array(t.length),i=0;e>i;i++)_[i]=t[i];return _},e._float32ArraySlice=function(){for(var t=this,e=t.length,_=new Float32Array(t.length),i=0;e>i;i++)_[i]=t[i];return _},e._uint16ArraySlice=function(){var t,e=arguments,_=this,i=0,r=0;if(0===e.length)for(i=_.length,t=new Uint16Array(i),r=0;i>r;r++)t[r]=_[r];else if(2===e.length){var a=e[0],n=e[1];if(n>a)for(i=n-a,t=new Uint16Array(i),r=a;n>r;r++)t[r-a]=_[r];else t=new Uint16Array(0)}return t},e._nativeRender_enable=function(){v.create=function(t,e){return new i_(t,e,1,!1,!1)},Je.prototype._getGLFormat=Je.prototype._getGLFormatForNative,Be.__init_native(),ye.width=h.window.innerWidth,ye.height=h.window.innerHeight,I.enableNative=function(){te.uploadShaderUniforms=te.uploadShaderUniformsForNative;var e=w;if(e.prototype.repaint=e.prototype.repaintForNative,t.conch){K=t.GLCommandEncoder,$=t.LayaGLContext;var _=t.CanvasRenderingContext.prototype,i=J.prototype;J=t.CanvasRenderingContext,_.drawImage=i.drawImage,_.drawTexture=i.drawTexture,_.fillText=i.fillText,_.save=i.save,_.restore=i.restore,_.translate=i.translate,_.scale=i.scale,_.rotate=i.rotate,_.transform=i.transform,_.beginRT=i.beginRT,_.endRT=i.endRT,_.drawCanvas=i.drawCanvas,_.drawTarget=i.drawTarget,_._$get_asBitmap=i._$get_asBitmap,_._$set_asBitmap=i._$set_asBitmap,a(0,_,"asBitmap",_._$get_asBitmap,_._$set_asBitmap)}Ze.init(),_e.__init__()}},e._webglRender_enable=function(){g.isWebGL||(g.isWebGL=!0,I.initRender=function(t,_,i){function r(t){var e,_=["webgl2","webgl","experimental-webgl","webkit-3d","moz-webgl"];c.useWebGL2||_.shift();for(var i=0;i<_.length;i++){try{e=t.getContext(_[i],{stencil:c.isStencil,alpha:c.isAlpha,antialias:c.isAntialias,premultipliedAlpha:c.premultipliedAlpha,preserveDrawingBuffer:c.preserveDrawingBuffer})}catch(r){}if(e)return"webgl2"===_[i]&&(laya.webgl.WebGL._isWebGL2=!0),new $,e}return null}var a=$.instance=laya.webgl.WebGL.mainContext=r(g._mainCanvas);if(!a)return!1;t.size(_,i),Be.__init__(a),Ie.__init__(),pe.__init__();var n=new Ie;g._context=n,t._setContext(n),laya.webgl.WebGL.shaderHighPrecision=!1;try{var s=a.getShaderPrecisionFormat(35632,36338);e.shaderHighPrecision=s.precision?!0:!1}catch(o){}return $.instance=a,W.__init__(),Ge.__init__(),Z.__init__(),De.__init__(),e_.__int__(a),re._init_(a),!0
},v.create=function(t,e){return new i_(t,e,1,!1,!1)},I.createRenderSprite=function(t,e){return new xe(t,e)},I.changeWebGLSize=function(t,e){laya.webgl.WebGL.onStageResize(t,e)},I.clear=function(t){ye.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var e=g.context,i=0==e._submits._length||c.preserveDrawingBuffer?l.create(t).arrColor:_.stage._wgColor;i&&e.clearBG(i[0],i[1],i[2],i[3]),ye.clear()},I.drawToCanvas=function(t,e,_,i,r,a){r-=t.x,a-=t.y,r|=0,a|=0,_|=0,i|=0;var n=new Ie;n.size(_,i),n.asBitmap=!0,n._targets.start(),y.renders[e]._fun(t,n,r,a),n.flush(),n._targets.end(),n._targets.restore();var s=n._targets.getData(0,0,_,i);n.destroy();for(var o=new ImageData(_,i),h=4*_,u=(new Uint8Array(h),o.data),l=i-1,c=l*h,f=0;l>=0;l--)u.set(s.subarray(f,f+h),c),c-=h,f+=h;var d=new P;d.size(_,i);var E=d.getContext("2d");return E.putImageData(o,0,0),d},I.getTexturePixels=function(){return alert("由于编不过，注掉了"),null},D._filter=function(t,e,_,i){var r=e,a=this._next;if(a){var n=t.filters,s=n.length;if(1==s&&32==n[0].type)return e.save(),e.setColorFilter(n[0]),a._fun.call(a,t,e,_,i),e.restore(),void 0;var h,u=Z.create(1,0),l=M.TEMP,c=r._curMat,f=p.create();c.copyTo(f);var d=0,E=0,A=!1,D=t._cacheStyle.filterCache||null;if(D&&0==t.getRepaint()){if(A=t._cacheStyle.hasGlowFilter||!1,A&&(d=50,E=25),h=t.getBounds(),h.width<=0||h.height<=0)return;h.width+=d,h.height+=d,l.x=h.x*f.a+h.y*f.c,l.y=h.y*f.d+h.x*f.b,h.x=l.x,h.y=l.y,l.x=h.width*f.a+h.height*f.c,l.y=h.height*f.d+h.width*f.b,h.width=l.x,h.height=l.y}else{A=t._isHaveGlowFilter(),A&&(d=50,E=25),h=new S,h.copyFrom(t.getSelfBounds()),h.x+=t.x,h.y+=t.y,h.x-=t.pivotX+4,h.y-=t.pivotY+4;var R=h.x,T=h.y;if(h.width+=d+8,h.height+=d+8,l.x=h.x*f.a+h.y*f.c,l.y=h.y*f.d+h.x*f.b,h.x=l.x,h.y=l.y,l.x=h.width*f.a+h.height*f.c,l.y=h.height*f.d+h.width*f.b,h.width=l.x,h.height=l.y,h.width<=0||h.height<=0)return;D&&Ae.releaseRT(D);var P=Ae.getRT(h.width,h.height),v=Ae.getRT(h.width,h.height);t._getCacheStyle().filterCache=D,r.pushRT(),r.useRT(P);var C=t.x-R+E,O=t.y-T+E;a._fun.call(a,t,e,C,O),r.useRT(v);for(var g=0;s>g;g++){0!=g&&(r.useRT(P),r.drawTarget(v,0,0,h.width,h.height,p.TEMP.identity(),u,null,re.TOINT.overlay),r.useRT(v));var y=n[g];switch(y.type){case 16:o.render(P,e,h.width,h.height,y);break;case 8:m.render(P,e,h.width,h.height,y);break;case 32:r.setColorFilter(y),r.drawTarget(P,0,0,h.width,h.height,p.EMPTY.identity(),Z.create(1,0)),r.setColorFilter(null)}}r.popRT()}_=_-E-t.x,i=i-E-t.y,l.setTo(_,i),f.transformPoint(l),_=l.x+h.x,i=l.y+h.y,r._drawRenderTexture(v,_,i,h.width,h.height,p.TEMP.identity(),1,__.defuv),f.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=e._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=e._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=e._uint8ArraySlice))},e.enable=function(){return g.isConchApp?e._nativeRender_enable():e._webglRender_enable(),!0},e.onStageResize=function(t,_){null!=e.mainContext&&(e.mainContext.viewport(0,0,t,_),ye.width=t,ye.height=_)},e.mainContext=null,e.shaderHighPrecision=!1,e._isWebGL2=!1,e}(),Be=function(){function t(){}r(t,"laya.webgl.WebGLContext");var e=t.prototype;return e.getContextAttributes=function(){return null},e.isContextLost=function(){},e.getSupportedExtensions=function(){return null},e.getExtension=function(){return null},e.activeTexture=function(){},e.attachShader=function(){},e.bindAttribLocation=function(){},e.bindBuffer=function(){},e.bindFramebuffer=function(){},e.bindRenderbuffer=function(){},e.bindTexture=function(){},e.useTexture=function(){},e.blendColor=function(){},e.blendEquation=function(){},e.blendEquationSeparate=function(){},e.blendFunc=function(){},e.blendFuncSeparate=function(){},e.bufferData=function(){},e.bufferSubData=function(){},e.checkFramebufferStatus=function(){return null},e.clear=function(){},e.clearColor=function(){},e.clearDepth=function(){},e.clearStencil=function(){},e.colorMask=function(){},e.compileShader=function(){},e.copyTexImage2D=function(){},e.copyTexSubImage2D=function(){},e.createBuffer=function(){},e.createFramebuffer=function(){},e.createProgram=function(){},e.createRenderbuffer=function(){},e.createShader=function(){},e.createTexture=function(){return null},e.cullFace=function(){},e.deleteBuffer=function(){},e.deleteFramebuffer=function(){},e.deleteProgram=function(){},e.deleteRenderbuffer=function(){},e.deleteShader=function(){},e.deleteTexture=function(){},e.depthFunc=function(){},e.depthMask=function(){},e.depthRange=function(){},e.detachShader=function(){},e.disable=function(){},e.disableVertexAttribArray=function(){},e.drawArrays=function(){},e.drawElements=function(){},e.enable=function(){},e.enableVertexAttribArray=function(){},e.finish=function(){},e.flush=function(){},e.framebufferRenderbuffer=function(){},e.framebufferTexture2D=function(){},e.frontFace=function(){return null},e.generateMipmap=function(){return null},e.getActiveAttrib=function(){return null},e.getActiveUniform=function(){return null},e.getAttribLocation=function(){return 0},e.getParameter=function(){return null},e.getBufferParameter=function(){return null},e.getError=function(){return null},e.getFramebufferAttachmentParameter=function(){},e.getProgramParameter=function(){return 0},e.getProgramInfoLog=function(){return null},e.getRenderbufferParameter=function(){return null},e.getShaderPrecisionFormat=function(){return null},e.getShaderParameter=function(){},e.getShaderInfoLog=function(){return null},e.getShaderSource=function(){return null},e.getTexParameter=function(){},e.getUniform=function(){},e.getUniformLocation=function(){return null},e.getVertexAttrib=function(){return null},e.getVertexAttribOffset=function(){return null},e.hint=function(){},e.isBuffer=function(){},e.isEnabled=function(){},e.isFramebuffer=function(){},e.isProgram=function(){},e.isRenderbuffer=function(){},e.isShader=function(){},e.isTexture=function(){},e.lineWidth=function(){},e.linkProgram=function(){},e.pixelStorei=function(){},e.polygonOffset=function(){},e.readPixels=function(){},e.renderbufferStorage=function(){},e.sampleCoverage=function(){},e.scissor=function(){},e.shaderSource=function(){},e.stencilFunc=function(){},e.stencilFuncSeparate=function(){},e.stencilMask=function(){},e.stencilMaskSeparate=function(){},e.stencilOp=function(){},e.stencilOpSeparate=function(){},e.texImage2D=function(){},e.texParameterf=function(){},e.texParameteri=function(){},e.texSubImage2D=function(){},e.uniform1f=function(){},e.uniform1fv=function(){},e.uniform1i=function(){},e.uniform1iv=function(){},e.uniform2f=function(){},e.uniform2fv=function(){},e.uniform2i=function(){},e.uniform2iv=function(){},e.uniform3f=function(){},e.uniform3fv=function(){},e.uniform3i=function(){},e.uniform3iv=function(){},e.uniform4f=function(){},e.uniform4fv=function(){},e.uniform4i=function(){},e.uniform4iv=function(){},e.uniformMatrix2fv=function(){},e.uniformMatrix3fv=function(){},e.uniformMatrix4fv=function(){},e.useProgram=function(){},e.validateProgram=function(){},e.vertexAttrib1f=function(){},e.vertexAttrib1fv=function(){},e.vertexAttrib2f=function(){},e.vertexAttrib2fv=function(){},e.vertexAttrib3f=function(){},e.vertexAttrib3fv=function(){},e.vertexAttrib4f=function(){},e.vertexAttrib4fv=function(){},e.vertexAttribPointer=function(){},e.viewport=function(){},e.configureBackBuffer=function(t,e,_,i,r){void 0===i&&(i=!0),void 0===r&&(r=!1)},e.compressedTexImage2D=function(){},e.createVertexArray=function(){throw"not implemented"},e.bindVertexArray=function(){throw"not implemented"},e.deleteVertexArray=function(){throw"not implemented"},e.isVertexArray=function(){throw"not implemented"},t.__init__=function(e){if(t.__init_native(),t._extTextureFilterAnisotropic=t._getExtension(e,"EXT_texture_filter_anisotropic"),t._compressedTextureS3tc=t._getExtension(e,"WEBGL_compressed_texture_s3tc"),t._compressedTexturePvrtc=t._getExtension(e,"WEBGL_compressed_texture_pvrtc"),t._compressedTextureEtc1=t._getExtension(e,"WEBGL_compressed_texture_etc1"),!be._isWebGL2){var _=(e.rawgl||e).getExtension("OES_vertex_array_object");if(_){console.log("EXT:webgl support OES_vertex_array_object！");var i=e;i.createVertexArray=function(){return _.createVertexArrayOES()},i.bindVertexArray=function(t){_.bindVertexArrayOES(t)},i.deleteVertexArray=function(t){_.deleteVertexArrayOES(t)},i.isVertexArray=function(t){_.isVertexArrayOES(t)}}}},t._getExtension=function(e,_){var i=t._extentionVendorPrefixes;for(var r in i){var a=e.getExtension(i[r]+_);if(a)return a}return null},t.__init_native=function(){if(g.isConchApp){var e=t;e.useProgram=e.useProgramForNative,e.activeTexture=e.activeTextureForNative,e.bindTexture=e.bindTextureForNative,e.bindVertexArray=e.bindVertexArrayForNative,e.setDepthTest=e.setDepthTestForNative,e.setDepthMask=e.setDepthMaskForNative,e.setDepthFunc=e.setDepthFuncForNative,e.setBlend=e.setBlendForNative,e.setBlendFunc=e.setBlendFuncForNative,e.setCullFace=e.setCullFaceForNative,e.setFrontFace=e.setFrontFaceForNative}},t.useProgram=function(e,_){return t._useProgram===_?!1:(e.useProgram(_),t._useProgram=_,!0)},t.setDepthTest=function(e,_){_!==t._depthTest&&(t._depthTest=_,_?e.enable(2929):e.disable(2929))},t.setDepthMask=function(e,_){_!==t._depthMask&&(t._depthMask=_,e.depthMask(_))},t.setDepthFunc=function(e,_){_!==t._depthFunc&&(t._depthFunc=_,e.depthFunc(_))},t.setBlend=function(e,_){_!==t._blend&&(t._blend=_,_?e.enable(3042):e.disable(3042))},t.setBlendFunc=function(e,_,i){(_!==t._sFactor||i!==t._dFactor)&&(t._sFactor=_,t._dFactor=i,e.blendFunc(_,i))},t.setCullFace=function(e,_){_!==t._cullFace&&(t._cullFace=_,_?e.enable(2884):e.disable(2884))},t.setFrontFace=function(e,_){_!==t._frontFace&&(t._frontFace=_,e.frontFace(_))},t.activeTexture=function(e,_){t._activedTextureID!==_&&(e.activeTexture(_),t._activedTextureID=_)},t.bindTexture=function(e,_,i){t._activeTextures[t._activedTextureID-33984]!==i&&(e.bindTexture(_,i),t._activeTextures[t._activedTextureID-33984]=i)},t.bindVertexArray=function(e,_){t._bindedVAO!==_&&(e.bindVertexArray(_),t._bindedVAO=_)},t.useProgramForNative=function(t,e){return t.useProgram(e),!0},t.setDepthTestForNative=function(t,e){e?t.enable(2929):t.disable(2929)},t.setDepthMaskForNative=function(t,e){t.depthMask(e)},t.setDepthFuncForNative=function(t,e){t.depthFunc(e)},t.setBlendForNative=function(t,e){e?t.enable(3042):t.disable(3042)},t.setBlendFuncForNative=function(t,e,_){t.blendFunc(e,_)},t.setCullFaceForNative=function(t,e){e?t.enable(2884):t.disable(2884)},t.setFrontFaceForNative=function(t,e){t.frontFace(e)},t.activeTextureForNative=function(t,e){t.activeTexture(e)},t.bindTextureForNative=function(t,e,_){t.bindTexture(e,_)},t.bindVertexArrayForNative=function(t,e){t.bindVertexArray(e)},t.DEPTH_BUFFER_BIT=256,t.STENCIL_BUFFER_BIT=1024,t.COLOR_BUFFER_BIT=16384,t.POINTS=0,t.LINES=1,t.LINE_LOOP=2,t.LINE_STRIP=3,t.TRIANGLES=4,t.TRIANGLE_STRIP=5,t.TRIANGLE_FAN=6,t.ZERO=0,t.ONE=1,t.SRC_COLOR=768,t.ONE_MINUS_SRC_COLOR=769,t.SRC_ALPHA=770,t.ONE_MINUS_SRC_ALPHA=771,t.DST_ALPHA=772,t.ONE_MINUS_DST_ALPHA=773,t.DST_COLOR=774,t.ONE_MINUS_DST_COLOR=775,t.SRC_ALPHA_SATURATE=776,t.FUNC_ADD=32774,t.BLEND_EQUATION=32777,t.BLEND_EQUATION_RGB=32777,t.BLEND_EQUATION_ALPHA=34877,t.FUNC_SUBTRACT=32778,t.FUNC_REVERSE_SUBTRACT=32779,t.BLEND_DST_RGB=32968,t.BLEND_SRC_RGB=32969,t.BLEND_DST_ALPHA=32970,t.BLEND_SRC_ALPHA=32971,t.CONSTANT_COLOR=32769,t.ONE_MINUS_CONSTANT_COLOR=32770,t.CONSTANT_ALPHA=32771,t.ONE_MINUS_CONSTANT_ALPHA=32772,t.BLEND_COLOR=32773,t.ARRAY_BUFFER=34962,t.ELEMENT_ARRAY_BUFFER=34963,t.ARRAY_BUFFER_BINDING=34964,t.ELEMENT_ARRAY_BUFFER_BINDING=34965,t.STREAM_DRAW=35040,t.STATIC_DRAW=35044,t.DYNAMIC_DRAW=35048,t.BUFFER_SIZE=34660,t.BUFFER_USAGE=34661,t.CURRENT_VERTEX_ATTRIB=34342,t.FRONT=1028,t.BACK=1029,t.CULL_FACE=2884,t.FRONT_AND_BACK=1032,t.BLEND=3042,t.DITHER=3024,t.STENCIL_TEST=2960,t.DEPTH_TEST=2929,t.SCISSOR_TEST=3089,t.POLYGON_OFFSET_FILL=32823,t.SAMPLE_ALPHA_TO_COVERAGE=32926,t.SAMPLE_COVERAGE=32928,t.NO_ERROR=0,t.INVALID_ENUM=1280,t.INVALID_VALUE=1281,t.INVALID_OPERATION=1282,t.OUT_OF_MEMORY=1285,t.CW=2304,t.CCW=2305,t.LINE_WIDTH=2849,t.ALIASED_POINT_SIZE_RANGE=33901,t.ALIASED_LINE_WIDTH_RANGE=33902,t.CULL_FACE_MODE=2885,t.FRONT_FACE=2886,t.DEPTH_RANGE=2928,t.DEPTH_WRITEMASK=2930,t.DEPTH_CLEAR_VALUE=2931,t.DEPTH_FUNC=2932,t.STENCIL_CLEAR_VALUE=2961,t.STENCIL_FUNC=2962,t.STENCIL_FAIL=2964,t.STENCIL_PASS_DEPTH_FAIL=2965,t.STENCIL_PASS_DEPTH_PASS=2966,t.STENCIL_REF=2967,t.STENCIL_VALUE_MASK=2963,t.STENCIL_WRITEMASK=2968,t.STENCIL_BACK_FUNC=34816,t.STENCIL_BACK_FAIL=34817,t.STENCIL_BACK_PASS_DEPTH_FAIL=34818,t.STENCIL_BACK_PASS_DEPTH_PASS=34819,t.STENCIL_BACK_REF=36003,t.STENCIL_BACK_VALUE_MASK=36004,t.STENCIL_BACK_WRITEMASK=36005,t.VIEWPORT=2978,t.SCISSOR_BOX=3088,t.COLOR_CLEAR_VALUE=3106,t.COLOR_WRITEMASK=3107,t.UNPACK_ALIGNMENT=3317,t.PACK_ALIGNMENT=3333,t.MAX_TEXTURE_SIZE=3379,t.MAX_VIEWPORT_DIMS=3386,t.SUBPIXEL_BITS=3408,t.RED_BITS=3410,t.GREEN_BITS=3411,t.BLUE_BITS=3412,t.ALPHA_BITS=3413,t.DEPTH_BITS=3414,t.STENCIL_BITS=3415,t.POLYGON_OFFSET_UNITS=10752,t.POLYGON_OFFSET_FACTOR=32824,t.TEXTURE_BINDING_2D=32873,t.SAMPLE_BUFFERS=32936,t.SAMPLES=32937,t.SAMPLE_COVERAGE_VALUE=32938,t.SAMPLE_COVERAGE_INVERT=32939,t.NUM_COMPRESSED_TEXTURE_FORMATS=34466,t.COMPRESSED_TEXTURE_FORMATS=34467,t.DONT_CARE=4352,t.FASTEST=4353,t.NICEST=4354,t.GENERATE_MIPMAP_HINT=33170,t.BYTE=5120,t.UNSIGNED_BYTE=5121,t.SHORT=5122,t.UNSIGNED_SHORT=5123,t.INT=5124,t.UNSIGNED_INT=5125,t.FLOAT=5126,t.DEPTH_COMPONENT=6402,t.ALPHA=6406,t.RGB=6407,t.RGBA=6408,t.LUMINANCE=6409,t.LUMINANCE_ALPHA=6410,t.UNSIGNED_SHORT_4_4_4_4=32819,t.UNSIGNED_SHORT_5_5_5_1=32820,t.UNSIGNED_SHORT_5_6_5=33635,t.FRAGMENT_SHADER=35632,t.VERTEX_SHADER=35633,t.MAX_VERTEX_ATTRIBS=34921,t.MAX_VERTEX_UNIFORM_VECTORS=36347,t.MAX_VARYING_VECTORS=36348,t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,t.MAX_TEXTURE_IMAGE_UNITS=34930,t.MAX_FRAGMENT_UNIFORM_VECTORS=36349,t.SHADER_TYPE=35663,t.DELETE_STATUS=35712,t.LINK_STATUS=35714,t.VALIDATE_STATUS=35715,t.ATTACHED_SHADERS=35717,t.ACTIVE_UNIFORMS=35718,t.ACTIVE_ATTRIBUTES=35721,t.SHADING_LANGUAGE_VERSION=35724,t.CURRENT_PROGRAM=35725,t.NEVER=512,t.LESS=513,t.EQUAL=514,t.LEQUAL=515,t.GREATER=516,t.NOTEQUAL=517,t.GEQUAL=518,t.ALWAYS=519,t.KEEP=7680,t.REPLACE=7681,t.INCR=7682,t.DECR=7683,t.INVERT=5386,t.INCR_WRAP=34055,t.DECR_WRAP=34056,t.VENDOR=7936,t.RENDERER=7937,t.VERSION=7938,t.NEAREST=9728,t.LINEAR=9729,t.NEAREST_MIPMAP_NEAREST=9984,t.LINEAR_MIPMAP_NEAREST=9985,t.NEAREST_MIPMAP_LINEAR=9986,t.LINEAR_MIPMAP_LINEAR=9987,t.TEXTURE_MAG_FILTER=10240,t.TEXTURE_MIN_FILTER=10241,t.TEXTURE_WRAP_S=10242,t.TEXTURE_WRAP_T=10243,t.TEXTURE_2D=3553,t.TEXTURE_3D=32879,t.TEXTURE=5890,t.TEXTURE_CUBE_MAP=34067,t.TEXTURE_BINDING_CUBE_MAP=34068,t.TEXTURE_CUBE_MAP_POSITIVE_X=34069,t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,t.MAX_CUBE_MAP_TEXTURE_SIZE=34076,t.TEXTURE0=33984,t.TEXTURE1=33985,t.TEXTURE2=33986,t.TEXTURE3=33987,t.TEXTURE4=33988,t.TEXTURE5=33989,t.TEXTURE6=33990,t.TEXTURE7=33991,t.TEXTURE8=33992,t.TEXTURE9=33993,t.TEXTURE10=33994,t.TEXTURE11=33995,t.TEXTURE12=33996,t.TEXTURE13=33997,t.TEXTURE14=33998,t.TEXTURE15=33999,t.TEXTURE16=34e3,t.TEXTURE17=34001,t.TEXTURE18=34002,t.TEXTURE19=34003,t.TEXTURE20=34004,t.TEXTURE21=34005,t.TEXTURE22=34006,t.TEXTURE23=34007,t.TEXTURE24=34008,t.TEXTURE25=34009,t.TEXTURE26=34010,t.TEXTURE27=34011,t.TEXTURE28=34012,t.TEXTURE29=34013,t.TEXTURE30=34014,t.TEXTURE31=34015,t.ACTIVE_TEXTURE=34016,t.REPEAT=10497,t.CLAMP_TO_EDGE=33071,t.MIRRORED_REPEAT=33648,t.FLOAT_VEC2=35664,t.FLOAT_VEC3=35665,t.FLOAT_VEC4=35666,t.INT_VEC2=35667,t.INT_VEC3=35668,t.INT_VEC4=35669,t.BOOL=35670,t.BOOL_VEC2=35671,t.BOOL_VEC3=35672,t.BOOL_VEC4=35673,t.FLOAT_MAT2=35674,t.FLOAT_MAT3=35675,t.FLOAT_MAT4=35676,t.SAMPLER_2D=35678,t.SAMPLER_CUBE=35680,t.VERTEX_ATTRIB_ARRAY_ENABLED=34338,t.VERTEX_ATTRIB_ARRAY_SIZE=34339,t.VERTEX_ATTRIB_ARRAY_STRIDE=34340,t.VERTEX_ATTRIB_ARRAY_TYPE=34341,t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,t.VERTEX_ATTRIB_ARRAY_POINTER=34373,t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,t.COMPILE_STATUS=35713,t.LOW_FLOAT=36336,t.MEDIUM_FLOAT=36337,t.HIGH_FLOAT=36338,t.LOW_INT=36339,t.MEDIUM_INT=36340,t.HIGH_INT=36341,t.FRAMEBUFFER=36160,t.RENDERBUFFER=36161,t.RGBA4=32854,t.RGB5_A1=32855,t.RGB565=36194,t.DEPTH_COMPONENT16=33189,t.STENCIL_INDEX=6401,t.STENCIL_INDEX8=36168,t.DEPTH_STENCIL=34041,t.RENDERBUFFER_WIDTH=36162,t.RENDERBUFFER_HEIGHT=36163,t.RENDERBUFFER_INTERNAL_FORMAT=36164,t.RENDERBUFFER_RED_SIZE=36176,t.RENDERBUFFER_GREEN_SIZE=36177,t.RENDERBUFFER_BLUE_SIZE=36178,t.RENDERBUFFER_ALPHA_SIZE=36179,t.RENDERBUFFER_DEPTH_SIZE=36180,t.RENDERBUFFER_STENCIL_SIZE=36181,t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,t.COLOR_ATTACHMENT0=36064,t.DEPTH_ATTACHMENT=36096,t.STENCIL_ATTACHMENT=36128,t.DEPTH_STENCIL_ATTACHMENT=33306,t.NONE=0,t.FRAMEBUFFER_COMPLETE=36053,t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,t.FRAMEBUFFER_UNSUPPORTED=36061,t.FRAMEBUFFER_BINDING=36006,t.RENDERBUFFER_BINDING=36007,t.MAX_RENDERBUFFER_SIZE=34024,t.INVALID_FRAMEBUFFER_OPERATION=1286,t.UNPACK_FLIP_Y_WEBGL=37440,t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,t.CONTEXT_LOST_WEBGL=37442,t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,t.BROWSER_DEFAULT_WEBGL=37444,t._extTextureFilterAnisotropic=null,t._compressedTextureS3tc=null,t._compressedTexturePvrtc=null,t._compressedTextureEtc1=null,t._glTextureIDs=[33984,33985,33986,33987,33988,33989,33990,33991],t._useProgram=null,t._depthTest=!0,t._depthMask=!0,t._blend=!1,t._cullFace=!1,t._activedTextureID=33984,t._bindedVAO=null,i(t,["_extentionVendorPrefixes",function(){return this._extentionVendorPrefixes=["","WEBKIT_","MOZ_"]},"_activeTextures",function(){return this._activeTextures=new Array(8)},"_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),t}(),Ie=function(t){function e(){if(this._id=++e._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._renderCount=0,this._isConvexCmd=!0,this._submits=null,this._curSubmit=null,this.meshlist=[],this._clipInfoID=0,this._lastMatScaleX=1,this._lastMatScaleY=1,this._lastMat_a=1,this._lastMat_b=0,this._lastMat_c=0,this._lastMat_d=1,this._nBlendType=0,this._saveMark=null,this._drawTextureUseColor=!1,this._italicDeg=0,this._lastTex=null,this._fillColor=0,this._flushCnt=0,this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,e.__super.call(this),this._width=99999999,this._height=99999999,this._submitKey=new Me,this._transedPoints=new Array(8),this._temp4Points=new Array(8),this._clipRect=e.MAXCLIPRECT,this._globalClipMatrix=new p(99999999,0,0,99999999,0,0),this._shader2D=new De,this.mOutPoint,e._contextcount++,!e.defTexture){var t=new i_(2,2);t.setPixels(new Uint8Array(16)),e.defTexture=new X(t)}this._lastTex=e.defTexture,this.clear()}var s;r(e,"laya.webgl.canvas.WebGLContext2D",t);var o=e.prototype;return o.clearBG=function(t,e,_,i){var r=be.mainContext;r.clearColor(t,e,_,i),r.clear(16384)},o._getSubmits=function(){return this._submits},o._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var t=0,e=this._submits._length;e>t;t++)this._submits[t].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path=null,this._save=null;var _=0;for(t=0,_=this.meshlist.length;_>t;t++){var i=this.meshlist[t];i.destroy()}this.meshlist.length=0,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}},o.destroy=function(){--e._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._mesh.destroy()},o.clear=function(){this._submits||(this._other=s.DEFAULT,this._curMat=p.create(),this._mesh=ze.getAMesh(),this.meshlist.push(this._mesh),this._pathMesh=He.getAMesh(),this.meshlist.push(this._pathMesh),this._triangleMesh=Ye.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits=[],this._save=[oe.Create(this)],this._save.length=10,this._shader2D=new De),this._submitKey.clear(),this._mesh.clearVB(),c.smartCache&&this._renderCount++,this._drawCount=1,this._other=s.DEFAULT,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=e.MAXCLIPRECT,this._curSubmit=pe.RENDERBASE,pe.RENDERBASE._ref=16777215,pe.RENDERBASE._numEle=0,this._shader2D.fillStyle=this._shader2D.strokeStyle=ae.DEFAULT;for(var t=0,_=this._submits._length;_>t;t++)this._submits[t].releaseRender();this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},o.size=function(t,e){(this._width!=t||this._height!=e)&&(this._width=t,this._height=e,this._targets&&(this._targets.destroy(),this._targets=new __(t,e,1,-1)),g._context==this&&(be.mainContext.viewport(0,0,t,e),ye.width=t,ye.height=e)),0===t&&0===e&&this._releaseMem()},o.getMatScaleX=function(){return this._lastMat_a==this._curMat.a&&this._lastMat_b==this._curMat.b?this._lastMatScaleX:(this._lastMatScaleX=this._curMat.getScaleX(),this._lastMat_a=this._curMat.a,this._lastMat_b=this._curMat.b,this._lastMatScaleX)},o.getMatScaleY=function(){return this._lastMat_c==this._curMat.c&&this._lastMat_d==this._curMat.d?this._lastMatScaleY:(this._lastMatScaleY=this._curMat.getScaleY(),this._lastMat_c=this._curMat.c,this._lastMat_d=this._curMat.d,this._lastMatScaleY)},o.setFillColor=function(t){this._fillColor=t},o.getFillColor=function(){return this._fillColor},o.translate=function(t,e){(0!==t||0!==e)&&(ue.save(this),this._curMat._bTransform?(he.save(this),this._curMat.tx+=t*this._curMat.a+e*this._curMat.c,this._curMat.ty+=t*this._curMat.b+e*this._curMat.d):(this._curMat.tx=t,this._curMat.ty=e))},o.save=function(){this._save[this._save._length++]=oe.Create(this)},o.restore=function(){var t=this._save._length,e=this._nBlendType;if(!(1>t)){for(var _=t-1;_>=0;_--){var i=this._save[_];if(i.restore(this),i.isSaveMark())return this._save._length=_,void 0}e!=this._nBlendType&&(this._curSubmit=pe.RENDERBASE)}},o.fillText=function(t,e,_,i,r){this._fillText(t,null,e,_,i,r,null,0,null)},o._fillText=function(t,_,i,r,a,n,s,o,h,u){void 0===u&&(u=0),t?e._charBook.filltext(this,t,i,r,a,n,s,o,h,u):_&&e._charBook.fillWords(this,_,i,r,a,n,s,o)},o._fast_filltext=function(t,_,i,r,a,n,s,o,h){void 0===h&&(h=0),e._charBook._fast_filltext(this,t,null,_,i,r,a,n,s,o,h)},o.fillWords=function(t,e,_,i,r){this._fillText(null,t,e,_,i,r,null,-1,null,0)},o.fillBorderWords=function(t,e,_,i,r,a,n){this._fillBorderText(null,t,e,_,i,r,a,n,null)},o.drawText=function(t,e,_,i,r,a){this._fillText(t,null,e,_,i,l.create(r).strColor,null,-1,a)},o.strokeWord=function(t,e,_,i,r,a,n){this._fillText(t,null,e,_,i,null,l.create(r).strColor,a||1,n)},o.fillBorderText=function(t,e,_,i,r,a,n,s){this._fillBorderText(t,null,e,_,i,l.create(r).strColor,l.create(a).strColor,n,s)},o._fillBorderText=function(t,e,_,i,r,a,n,s,o){this._fillText(t,e,_,i,r,a,n,s||1,o)},o._fillRect=function(t,e,_,i,r){var a=this._curSubmit,n=a&&2===a._key.submitType&&a._key.blendShader===this._submitKey.blendShader;this._mesh.vertNum+4>65535&&(this._mesh=ze.getAMesh(),this.meshlist.push(this._mesh),n=!1),n&&(n=n&&this.isSameClipInfo(a)),this.transformQuad(t,e,_,i,0,this._curMat,this._transedPoints),this.clipedOff(this._transedPoints)||(this._mesh.addQuad(this._transedPoints,X.NO_UV,r,!1),n||(a=this._curSubmit=ke.create(this,this._mesh,Z.create(1,0)),this._submits[this._submits._length++]=a,this.copyClipInfo(a,this._globalClipMatrix),a.shaderValue.textureHost=this._lastTex,a._key.copyFrom2(this._submitKey,2,this._lastTex&&this._lastTex.bitmap?this._lastTex.bitmap.id:-1),a._renderType=10016),this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4)},o.fillRect=function(t,e,_,i,r){var a=r?ae.create(r):this._shader2D.fillStyle,n=this.mixRGBandAlpha(a.toInt());this._fillRect(t,e,_,i,n)},o.fillTexture=function(){},o.setShader=function(t){H.save(this,1048576,this._shader2D,!0),this._shader2D.shader=t},o.setColorFilter=function(t){H.save(this,8388608,this,!0),this._colorFiler=t,this._curSubmit=pe.RENDERBASE},o.drawTexture=function(t,e,_,i,r){this._drawTextureM(t,e,_,i,r,null,1,null)},o.drawTextures=function(t,e,i,r){if(!t.loaded||!t._getSource())return this.sprite&&_.timer.callLater(this,this._repaintSprite),void 0;for(var a=e.length/2,n=0,s=0;a>s;s++)this._inner_drawTexture(t,t.bitmap.id,e[n++]+i,e[n++]+r,0,0,null,null,1)},o._drawTextureAddSubmit=function(t,e){var _=null;_=ke.create(this,this._mesh,Z.create(1,0)),this._submits[this._submits._length++]=_,_.shaderValue.textureHost=e,_._key.copyFrom2(this._submitKey,2,t),_._renderType=10016,this._curSubmit=_},o._drawTextureM=function(t,e,i,r,a,n,s,o){return t._loaded&&t._getSource()?this._inner_drawTexture(t,t.bitmap.id,e,i,r,a,n,o,s):(this.sprite&&_.timer.callLater(this,this._repaintSprite),!1)},o._drawRenderTexture=function(t,e,_,i,r,a,n,s){return this._inner_drawTexture(t,-1,e,_,i,r,a,s,1)},o.submitDebugger=function(){this._submits[this._submits._length++]=Ce.create([],function(){},this)},o.copyClipInfo=function(t,e){var _=t.shaderValue.clipMatDir;_[0]=e.a,_[1]=e.b,_[2]=e.c,_[3]=e.d;var i=t.shaderValue.clipMatPos;i[0]=e.tx,i[1]=e.ty,t.clipInfoID=this._clipInfoID},o.isSameClipInfo=function(t){return t.clipInfoID===this._clipInfoID},o._useNewTex2DSubmit=function(t,e){this._mesh.vertNum+e>65535&&(this._mesh=ze.getAMesh(),this.meshlist.push(this._mesh));var _=ke.create(this,this._mesh,Z.create(1,0));this._submits[this._submits._length++]=this._curSubmit=_,_.shaderValue.textureHost=t,this.copyClipInfo(_,this._globalClipMatrix)},o._drawTexRect=function(t,e,_,i,r){this.transformQuad(t,e,_,i,this._italicDeg,this._curMat,this._transedPoints);var a=this._transedPoints;a[0]=a[0]+.5|0,a[1]=a[1]+.5|0,a[2]=a[2]+.5|0,a[3]=a[3]+.5|0,a[4]=a[4]+.5|0,a[5]=a[5]+.5|0,a[6]=a[6]+.5|0,a[7]=a[7]+.5|0,this.clipedOff(this._transedPoints)||(this._mesh.addQuad(this._transedPoints,r,this._fillColor,!0),this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4)},o._inner_drawTexture=function(t,e,_,i,r,a,n,s,o){this._drawCount++;var h=this._curSubmit._key,u=e>=0&&2===h.submitType&&h.other===e;u&&(u=u&&this.isSameClipInfo(this._curSubmit)),this._lastTex=t;var l=this.mixRGBandAlpha(4294967295);if(l=this._mixRGBandAlpha(l,o),this._mesh.vertNum+4>65535&&(this._mesh=ze.getAMesh(),this.meshlist.push(this._mesh),u=!1),this.transformQuad(_,i,r||t.width,a||t.height,this._italicDeg,n||this._curMat,this._transedPoints),!this.clipedOff(this._transedPoints)){if(this._mesh.addQuad(this._transedPoints,s||t._uv,l,!0),!u){var c=ke.create(this,this._mesh,Z.create(1,0));this._submits[this._submits._length++]=this._curSubmit=c,c.shaderValue.textureHost=t,c._key.other=e,this.copyClipInfo(c,this._globalClipMatrix)}return this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4,!0}return!1},o.transform4Points=function(t,e,_){var i=e.tx,r=e.ty;e._bTransform?(_[0]=t[0]*e.a+t[1]*e.c+i,_[1]=t[0]*e.b+t[1]*e.d+r,_[2]=t[2]*e.a+t[3]*e.c+i,_[3]=t[2]*e.b+t[3]*e.d+r,_[4]=t[4]*e.a+t[5]*e.c+i,_[5]=t[4]*e.b+t[5]*e.d+r,_[6]=t[6]*e.a+t[7]*e.c+i,_[7]=t[6]*e.b+t[7]*e.d+r):(_[0]=t[0]+i,_[1]=t[1]+r,_[2]=t[2]+i,_[3]=t[3]+r,_[4]=t[4]+i,_[5]=t[5]+r,_[6]=t[6]+i,_[7]=t[7]+r)},o.clipedOff=function(){return this._clipRect.width<=0||this._clipRect.height<=0?!0:!1},o.transformQuad=function(t,e,_,i,r,a,n){var s=0;0!=r&&(s=Math.tan(r*Math.PI/180)*i);var o=t+_,h=e+i;this._temp4Points[0]=t+s,this._temp4Points[1]=e,this._temp4Points[2]=o+s,this._temp4Points[3]=e,this._temp4Points[4]=o,this._temp4Points[5]=h,this._temp4Points[6]=t,this._temp4Points[7]=h,this.transform4Points(this._temp4Points,a,n)},o.pushRT=function(){this.addRenderObject(Ce.create(null,__.pushRT,this))},o.popRT=function(){this.addRenderObject(Ce.create(null,__.popRT,this)),this.breakNextMerge()},o.useRT=function(t){function e(t){if(!t)throw"error useRT";t.start(),t.clear(0,0,0,0)}this.addRenderObject(Ce.create([t],e,this)),this.breakNextMerge()},o.RTRestore=function(t){function e(t){t.restore()}this.addRenderObject(Ce.create([t],e,this)),this.breakNextMerge()},o.breakNextMerge=function(){this._curSubmit=pe.RENDERBASE},o._repaintSprite=function(){this.sprite&&this.sprite.repaint()},o.drawTextureWithTransform=function(t,_,i,r,a,n,s,o,h){if(!n)return this._drawTextureM(t,_+s,i+o,r,a,null,h,null),void 0;var u=this._curMat;e._tmpMatrix.a=n.a,e._tmpMatrix.b=n.b,e._tmpMatrix.c=n.c,e._tmpMatrix.d=n.d,e._tmpMatrix.tx=n.tx+s,e._tmpMatrix.ty=n.ty+o,e._tmpMatrix._bTransform=n._bTransform,n&&u._bTransform?(p.mul(e._tmpMatrix,u,e._tmpMatrix),n=e._tmpMatrix,n._bTransform=!0):n=e._tmpMatrix,this._drawTextureM(t,_,i,r,a,n,h,null)},o._flushToTarget=function(t,e){ye.worldScissorTest=!1,be.mainContext.disable(3089);{var _=ye.worldAlpha,i=ye.worldMatrix4,r=ye.worldMatrix;ye.worldShaderDefines}ye.worldMatrix=p.EMPTY,ye.restoreTempArray(),ye.worldMatrix4=ye.TEMPMAT4_ARRAY,ye.worldAlpha=1,je.activeShader=null,e.start(),c.showCanvasMark?e.clear(0,1,0,.3):e.clear(0,0,0,0),t._curSubmit=pe.RENDERBASE,t.flush(),t.clear(),e.restore(),t._curSubmit=pe.RENDERBASE,je.activeShader=null,ye.worldAlpha=_,ye.worldMatrix4=i,ye.worldMatrix=r},o.drawCanvas=function(t,e,_,i,r){var a,n=t.context;if(n._targets)n._submits._length>0&&(a=Ce.create([n,n._targets],this._flushToTarget,this),this._submits[this._submits._length++]=a),this._drawRenderTexture(n._targets,e,_,i,r,null,1,__.flipyuv),this._curSubmit=pe.RENDERBASE;else{n.touches&&n.touches.forEach(function(t){t.touch()}),a=Xe.create(n,this._shader2D.ALPHA,this._shader2D.filters),this._submits[this._submits._length++]=a,a._key.clear();var s=i/t.width,o=r/t.height,h=a._matrix;this._curMat.copyTo(h),1!=s&&1!=o&&h.scale(s,o);var u=h.tx,l=h.ty;h.tx=h.ty=0,h.transformPoint(M.TEMP.setTo(e,_)),h.translate(M.TEMP.x+u,M.TEMP.y+l),this._curSubmit=pe.RENDERBASE}c.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=n._targets?"yellow":"green",this.strokeRect(e-1,_-1,i+2,r+2,1),this.strokeRect(e,_,i,r,1),this.restore())},o.drawTarget=function(t,e,_,i,r,a,n,s,o){void 0===o&&(o=-1),this._drawCount++;this.mixRGBandAlpha(this._drawTextureUseColor?this.fillStyle?this.fillStyle.toInt():0:4294967295);if(this._mesh.vertNum+4>65535&&(this._mesh=ze.getAMesh(),this.meshlist.push(this._mesh)),this.transformQuad(e,_,i,r,0,a||this._curMat,this._transedPoints),!this.clipedOff(this._transedPoints)){this._mesh.addQuad(this._transedPoints,s||X.DEF_UV,4294967295,!0);var h=this._curSubmit=Oe.create(this,this._mesh,n,t);return h.blendType=-1==o?this._nBlendType:o,this.copyClipInfo(h,this._globalClipMatrix),h._numEle=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4,this._maxNumEle=Math.max(this._maxNumEle,h._numEle),this._submits[this._submits._length++]=h,this._curSubmit=pe.RENDERBASE,!0}return this._curSubmit=pe.RENDERBASE,!1},o.drawTriangles=function(t,i,r,a,n,s,o,h,u){if(!t._loaded||!t._getSource())return this.sprite&&_.timer.callLater(this,this._repaintSprite),void 0;this._drawCount++;var l=null,c=!1;u&&(l=this._colorFiler,this._colorFiler=u,this._curSubmit=pe.RENDERBASE,c=l!=u);var f=t.bitmap,d=this._curSubmit._key,E=4===d.submitType&&d.other===f.id,A=this.mixRGBandAlpha(4294967295);A=this._mixRGBandAlpha(A,h);var D=a.length/2,R=s.length;if(this._triangleMesh.vertNum+D>65535&&(this._triangleMesh=Ye.getAMesh(),this.meshlist.push(this._triangleMesh),E=!1),!E){var m=this._curSubmit=ke.create(this,this._triangleMesh,Z.create(1,0));m.shaderValue.textureHost=t,m._key.copyFrom2(this._submitKey,4,f.id),m._renderType=10016,this._submits[this._submits._length++]=m}o?(e._tmpMatrix.a=o.a,e._tmpMatrix.b=o.b,e._tmpMatrix.c=o.c,e._tmpMatrix.d=o.d,e._tmpMatrix.tx=o.tx+i,e._tmpMatrix.ty=o.ty+r):(e._tmpMatrix.a=1,e._tmpMatrix.b=0,e._tmpMatrix.c=0,e._tmpMatrix.d=1,e._tmpMatrix.tx=i,e._tmpMatrix.ty=r),p.mul(e._tmpMatrix,this._curMat,e._tmpMatrix),this._triangleMesh.addData(a,n,s,e._tmpMatrix,A,this),this._curSubmit._numEle+=R,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),c&&(this._colorFiler=l,this._curSubmit=pe.RENDERBASE)
},o.transform=function(t,e,_,i,r,a){he.save(this),p.mul(p.TEMP.setTo(t,e,_,i,r,a),this._curMat,this._curMat),this._curMat._checkTransform()},o._transformByMatrix=function(t,e,_){t.setTranslate(e,_),p.mul(t,this._curMat,this._curMat),t.setTranslate(0,0),this._curMat._bTransform=!0},o.setTransformByMatrix=function(t){t.copyTo(this._curMat)},o.rotate=function(t){he.save(this),this._curMat.rotateEx(t)},o.scale=function(t,e){he.save(this),this._curMat.scaleEx(t,e)},o.clipRect=function(t,_,i,r){se.save(this),this._clipRect==e.MAXCLIPRECT?this._clipRect=new S(t,_,i,r):(this._clipRect.width=i,this._clipRect.height=r,this._clipRect.x=t,this._clipRect.y=_),this._clipInfoID=++this._clipInfoID%1e4;var a=this._globalClipMatrix;this._clipRect.width>=99999999?(a.a=a.d=99999999,a.b=a.c=a.tx=a.ty=0):this._curMat._bTransform?(a.tx=this._clipRect.x*this._curMat.a+this._clipRect.y*this._curMat.c+this._curMat.tx,a.ty=this._clipRect.x*this._curMat.b+this._clipRect.y*this._curMat.d+this._curMat.ty,a.a=this._clipRect.width*this._curMat.a,a.b=this._clipRect.width*this._curMat.b,a.c=this._clipRect.height*this._curMat.c,a.d=this._clipRect.height*this._curMat.d):(a.tx=this._clipRect.x+this._curMat.tx,a.ty=this._clipRect.y+this._curMat.ty,a.a=this._clipRect.width,a.b=a.c=0,a.d=this._clipRect.height)},o.drawMesh=function(t,e,_,i,r,a,n,s,o){void 0===o&&(o=0)},o.addRenderObject=function(t){this._submits[this._submits._length++]=t},o.submitElement=function(t,e){var _=(g._context===this,this._submits),i=_._length;0>e&&(e=_._length);for(var r=pe.RENDERBASE;e>t;)this._renderNextSubmitIndex=t+1,_[t]!==pe.RENDERBASE?(pe.preRender=r,r=_[t],t+=r.renderSubmit()):t++;return i},o.flush=function(){var t=this.submitElement(0,this._submits._length);this._path&&this._path.reset(),me.instance&&me.getInstance().reset(),this._curSubmit=pe.RENDERBASE;for(var e=0,_=this.meshlist.length;_>e;e++){var i=this.meshlist[e];i.canReuse?i.releaseMesh():i.destroy()}return this.meshlist.length=0,this._mesh=ze.getAMesh(),this._pathMesh=He.getAMesh(),this._triangleMesh=Ye.getAMesh(),this.meshlist.push(this._mesh,this._pathMesh,this._triangleMesh),this._flushCnt++,this._flushCnt%600==0&&g._context==this&&le.charbookInst&&le.charbookInst.GC(),t},o.setPathId=function(t){if(this.mId=t,-1!=this.mId){this.mHaveKey=!1;var e=Y.getInstance();e.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,e.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},o.beginPath=function(t){void 0===t&&(t=!1);var e=this._getPath();e.beginPath(t)},o.closePath=function(){this._path.closePath()},o.addPath=function(t,e,_,i,r){var a=0,n=this._curMat;if(this._curMat._bTransform)for(var s=0,o=t.length/2;o>s;s++){var h=t[a]+i,u=t[a+1]+r;t[a]=h*n.a+u*n.c+n.tx,t[a+1]=h*n.b+u*n.d+n.ty,a+=2}else if(0!=n.tx||0!=n.ty||i||r)for(s=0,o=t.length/2;o>s;s++){var l=t[a]+i,c=t[a+1]+r;t[a]=l+n.tx,t[a+1]=c+n.ty,a+=2}else;this._getPath().push(t,_)},o.fill=function(){var t=this._getPath(),e=this._curSubmit,_=3===e._key.submitType&&e._key.blendShader===this._submitKey.blendShader;_&&(_=_&&this.isSameClipInfo(e)),_||(this._curSubmit=this.addVGSubmit(this._pathMesh));for(var i,r=this.mixRGBandAlpha(this.fillStyle.toInt()),a=0,n=0,s=t.paths.length;s>n;n++){var o=t.paths[n],h=o.path.length/2;if(!(3>h||3==h&&!o.convex)){this._pathMesh.vertNum+h>65535&&(this._curSubmit._numEle+=a,a=0,this._pathMesh=He.getAMesh(),this._curSubmit=this.addVGSubmit(this._pathMesh));var u=this._pathMesh.vertNum;if(o.convex){var l=h-2;i=new Array(3*l);for(var c=0,f=0;l>f;f++)i[c++]=u,i[c++]=f+1+u,i[c++]=f+2+u}else if(i=Pe.earcut(o.path,null,2),u>0)for(var d=0;d<i.length;d++)i[d]+=u;this._pathMesh.addVertAndIBToMesh(this,o.path,r,i),a+=i.length}}this._curSubmit._numEle+=a},o.addVGSubmit=function(t){var e=pe.createShape(this,t,0,Z.create(4,0));return e._key.blendShader=this._submitKey.blendShader,e._key.submitType=3,this._submits[this._submits._length++]=e,this.copyClipInfo(e,this._globalClipMatrix),e},o.stroke=function(){if(this.lineWidth>0){var t=this.mixRGBandAlpha(this.strokeStyle._color.numColor),e=this._getPath(),_=this._curSubmit,i=3===_._key.submitType&&_._key.blendShader===this._submitKey.blendShader;i&&(i=i&&this.isSameClipInfo(_)),i||(this._curSubmit=this.addVGSubmit(this._pathMesh));for(var r=0,a=0,n=e.paths.length;n>a;a++){var s=e.paths[a];if(!(s.path.length<=0)){var o=[],h=[],u=2*s.path.length;2>u||(this._pathMesh.vertNum+u>65535&&(this._curSubmit._numEle+=r,r=0,this._pathMesh=He.getAMesh(),this.meshlist.push(this._pathMesh),this._curSubmit=this.addVGSubmit(this._pathMesh)),Te.createLine2(s.path,o,this.lineWidth,this._pathMesh.vertNum,h,s.loop),this._pathMesh.addVertAndIBToMesh(this,h,t,o),r+=o.length)}}this._curSubmit._numEle+=r}},o.moveTo=function(t,e,_){void 0===_&&(_=!0);var i=this._getPath();if(i.newPath(),i._lastOriX=t,i._lastOriY=e,_){var r=t,a=e;t=this._curMat.a*r+this._curMat.c*a+this._curMat.tx,e=this._curMat.b*r+this._curMat.d*a+this._curMat.ty}i.addPoint(t,e)},o.lineTo=function(t,e,_){void 0===_&&(_=!0);var i=this._getPath();if(!(Math.abs(t-i._lastOriX)<.001&&Math.abs(e-i._lastOriY)<.001)){if(i._lastOriX=t,i._lastOriY=e,_){var r=t,a=e;t=this._curMat.a*r+this._curMat.c*a+this._curMat.tx,e=this._curMat.b*r+this._curMat.d*a+this._curMat.ty}i.addPoint(t,e)}},o.arcTo=function(t,_,i,r,a){var n=0,s=0,o=0,h=this._path._lastOriX-t,u=this._path._lastOriY-_,l=Math.sqrt(h*h+u*u);if(!(1e-6>=l)){var c=h/l,f=u/l,d=i-t,E=r-_,A=d*d+E*E,D=Math.sqrt(A);if(!(1e-6>=D)){var R=d/D,m=E/D,T=c+R,P=f+m,v=Math.sqrt(T*T+P*P);if(!(1e-6>=v)){var p=T/v,C=P/v,M=Math.acos(p*c+C*f),O=Math.PI/2-M;l=a/Math.tan(O);var S=l*c+t,g=l*f+_,y=Math.sqrt(l*l+a*a),L=t+p*y,b=_+C*y,B=c*m-f*R,I=0,x=0,N=0;if(B>=0){I=2*O;var F=I/e.SEGNUM;x=Math.sin(F),N=Math.cos(F)}else I=2*-O,F=I/e.SEGNUM,x=Math.sin(F),N=Math.cos(F);var w=this._path._lastOriX,V=this._path._lastOriY,U=S,W=g;(Math.abs(U-this._path._lastOriX)>.1||Math.abs(W-this._path._lastOriY)>.1)&&(s=this._curMat.a*U+this._curMat.c*W+this._curMat.tx,o=this._curMat.b*U+this._curMat.d*W+this._curMat.ty,w=U,V=W,this._path.addPoint(s,o));var G=S-L,X=g-b;for(n=0;n<e.SEGNUM;n++){var k=G*N+X*x,z=-G*x+X*N;if(s=k+L,o=z+b,Math.abs(w-s)>.1||Math.abs(V-o)>.1){var Y=s,H=o;s=this._curMat.a*Y+this._curMat.c*H+this._curMat.tx,o=this._curMat.b*Y+this._curMat.d*H+this._curMat.ty,this._path.addPoint(s,o),w=s,V=o}G=k,X=z}}}}},o.arc=function(t,e,_,i,r,a,n){void 0===a&&(a=!1),void 0===n&&(n=!0);var s=0,o=0,h=0,u=0,l=0,c=0,f=0,d=0,E=0,A=0,D=0;if(o=r-i,a)if(Math.abs(o)>=2*Math.PI)o=2*-Math.PI;else for(;o>0;)o-=2*Math.PI;else if(Math.abs(o)>=2*Math.PI)o=2*Math.PI;else for(;0>o;)o+=2*Math.PI;A=101>_?Math.max(10,o*_/5):201>_?Math.max(10,o*_/20):Math.max(10,o*_/40),h=o/A/2,u=Math.abs(4/3*(1-Math.cos(h))/Math.sin(h)),a&&(u=-u),D=0;var R=this._getPath();for(E=0;A>=E;E++)if(s=i+o*(E/A),l=Math.cos(s),c=Math.sin(s),f=t+l*_,d=e+c*_,f!=this._path._lastOriX||d!=this._path._lastOriY){var m=f,T=d;f=this._curMat.a*m+this._curMat.c*T+this._curMat.tx,d=this._curMat.b*m+this._curMat.d*T+this._curMat.ty,R.addPoint(f,d)}if(l=Math.cos(r),c=Math.sin(r),f=t+l*_,d=e+c*_,f!=this._path._lastOriX||d!=this._path._lastOriY){var P=f,v=d;f=this._curMat.a*P+this._curMat.c*v+this._curMat.tx,d=this._curMat.b*P+this._curMat.d*v+this._curMat.ty,R.addPoint(f,d)}},o.quadraticCurveTo=function(t,e,_,i){for(var r=n.I,a=r.getBezierPoints([this._path._lastOriX,this._path._lastOriY,t,e,_,i],30,2),s=0,o=a.length/2;o>s;s++)this.lineTo(a[2*s],a[2*s+1]);this.lineTo(_,i)},o.rect=function(t,e,_,i){this._other=this._other.make(),this._other.path||(this._other.path=new ne),this._other.path.rect(t,e,_,i)},o.mixRGBandAlpha=function(t){return this._mixRGBandAlpha(t,this._shader2D.ALPHA)},o._mixRGBandAlpha=function(t,e){var _=(4278190080&t)>>>24;return 0!=_?_*=e:_=255*e,16777215&t|_<<24},o.strokeRect=function(t,e,_,i,r){if(this.lineWidth>0){var a=this.mixRGBandAlpha(this.strokeStyle._color.numColor),n=this.lineWidth/2;this._fillRect(t-n,e-n,_+this.lineWidth,this.lineWidth,a),this._fillRect(t-n,e-n+i,_+this.lineWidth,this.lineWidth,a),this._fillRect(t-n,e+n,this.lineWidth,i-this.lineWidth,a),this._fillRect(t-n+_,e+n,this.lineWidth,i-this.lineWidth,a)}},o.clip=function(){},o.drawParticle=function(t,e,_){_.x=t,_.y=e,this._submits[this._submits._length++]=_},o._getPath=function(){return this._path||(this._path=new ne)},a(0,o,"globalCompositeOperation",function(){return re.NAMES[this._nBlendType]},function(t){var e=re.TOINT[t];null==e||this._nBlendType===e||(H.save(this,65536,this,!0),this._curSubmit=pe.RENDERBASE,this._nBlendType=e)}),a(0,o,"strokeStyle",function(){return this._shader2D.strokeStyle},function(t){this._shader2D.strokeStyle.equal(t)||(H.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=ae.create(t),this._submitKey.other=-this._shader2D.strokeStyle.toInt())}),a(0,o,"globalAlpha",function(){return this._shader2D.ALPHA},function(t){t=Math.floor(1e3*t)/1e3,t!=this._shader2D.ALPHA&&(H.save(this,1,this._shader2D,!1),this._shader2D.ALPHA=this._submitKey.alpha=t)}),a(0,o,"asBitmap",null,function(t){if(t){if(this._targets||(this._targets=new __(this._width,this._height,1,-1)),!this._width||!this._height)throw Error("asBitmap no size!")}else this._targets&&this._targets.destroy(),this._targets=null}),a(0,o,"fillStyle",function(){return this._shader2D.fillStyle},function(t){this._shader2D.fillStyle.equal(t)||(H.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=ae.create(t),this._submitKey.other=-this._shader2D.fillStyle.toInt())}),a(0,o,"textAlign",function(){return this._other.textAlign},function(t){this._other.textAlign===t||(this._other=this._other.make(),H.save(this,32768,this._other,!1),this._other.textAlign=t)}),a(0,o,"lineWidth",function(){return this._other.lineWidth},function(t){this._other.lineWidth===t||(this._other=this._other.make(),H.save(this,256,this._other,!1),this._other.lineWidth=t)}),a(0,o,"textBaseline",function(){return this._other.textBaseline},function(t){this._other.textBaseline===t||(this._other=this._other.make(),H.save(this,16384,this._other,!1),this._other.textBaseline=t)}),a(0,o,"font",null,function(){this._other=this._other.make(),H.save(this,8,this._other,!1)}),e.__init__=function(){s.DEFAULT=new s},e._tempPoint=new M,e._SUBMITVBSIZE=32e3,e._MAXSIZE=99999999,e._MAXVERTNUM=65535,e.MAXCLIPRECT=new S(0,0,99999999,99999999),e._COUNT=0,e._tmpMatrix=new p,e.SEGNUM=32,e._contextcount=0,e.defTexture=null,i(e,["_drawStyleTemp",function(){return this._drawStyleTemp=new ae(null)},"_keyMap",function(){return this._keyMap=new U},"_charBook",function(){return this._charBook=new le}]),e.__init$=function(){s=function(){function t(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null}r(t,"");var e=t.prototype;return e.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null},e.make=function(){return this===t.DEFAULT?new t:this},t.DEFAULT=null,t}()},e}(f),xe=function(t){function e(t,_){e.__super.call(this,t,_)}r(e,"laya.webgl.utils.RenderSprite3D",t);var _=e.prototype;return _.onCreate=function(t){switch(t){case 4:return this._fun=this._blend,void 0}},_._mask=function(t,e,_,i){var r=this._next,a=t.mask,n=e;if(a){n.save();var s=n.globalCompositeOperation,o=new S;if(o.copyFrom(a.getBounds()),o.width=Math.round(o.width),o.height=Math.round(o.height),o.x=Math.round(o.x),o.y=Math.round(o.y),o.width>0&&o.height>0){var h=o.width,u=o.height,l=Ae.getRT(h,u);n.breakNextMerge(),n.pushRT(),n.addRenderObject(Ce.create([n,l,h,u],laya.webgl.utils.RenderSprite3D.tmpTarget,this)),a.render(n,-o.x,-o.y),n.breakNextMerge(),n.popRT(),n.save(),n.clipRect(_+o.x,i+o.y,h,u),r._fun.call(r,t,n,_,i),n.restore(),s=n.globalCompositeOperation,n.addRenderObject(Ce.create(["mask"],laya.webgl.utils.RenderSprite3D.setBlendMode,this));var c=Z.create(1,0),f=X.INV_UV;n.drawTarget(l,_+o.x,i+o.y,h,u,p.TEMP.identity(),c,f,6),n.addRenderObject(Ce.create([l],laya.webgl.utils.RenderSprite3D.recycleTarget,this)),n.addRenderObject(Ce.create([s],laya.webgl.utils.RenderSprite3D.setBlendMode,this))}n.restore()}else r._fun.call(r,t,e,_,i)},_._blend=function(t,e,_,i){var r=t._style,a=this._next;r.blendMode?(e.save(),e.globalCompositeOperation=r.blendMode,a._fun.call(a,t,e,_,i),e.restore()):a._fun.call(a,t,e,_,i)},e.tmpTarget=function(t,e){e.start(),e.clear(0,0,0,0)},e.recycleTarget=function(t){Ae.releaseRT(t)},e.setBlendMode=function(t){var e=be.mainContext;re.targetFns[re.TOINT[t]](e)},i(e,["tempUV",function(){return this.tempUV=new Array(8)}]),e}(y),Ne=function(t){function e(){this.texcoord=null,this.position=null,this.offsetX=300,this.offsetY=0,e.__super.call(this,512,0);var t=8*Se.BYTES_PE;this.position=[2,5126,!1,t,0],this.texcoord=[2,5126,!1,t,2*Se.BYTES_PE],this.color=[4,5126,!1,t,4*Se.BYTES_PE]}return r(e,"laya.webgl.shader.d2.skinAnishader.SkinSV",t),e}(Z),Fe=function(t){function e(){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],e.__super.call(this,256,0)}r(e,"laya.webgl.shader.d2.value.FillTextureSV",t);var _=e.prototype;return _.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0)},e}(Z),we=function(t){function e(){e.__super.call(this,4,0),this._attribLocation=["position",0,"attribColor",1]}return r(e,"laya.webgl.shader.d2.value.PrimitiveSV",t),e}(Z),Ve=function(t){function e(t){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,void 0===t&&(t=0),e.__super.call(this,1,t),this._attribLocation=["posuv",0,"attribColor",1,"attribFlags",2]}r(e,"laya.webgl.shader.d2.value.TextureSV",t);var _=e.prototype;return _.clear=function(){this.texture=null,this.shader=null,this.defines._value=this.subID+(be.shaderHighPrecision?1024:0)},e}(Z),Ue=function(_){function i(){this.lastScaleX=1,this.lastScaleY=1,this.needResetScale=!1,i.__super.call(this),i.canvas||(i.canvas=t.document.createElement("canvas"),i.canvas.width=512,i.canvas.height=512,i.canvas.style.left="-1000px",i.canvas.style.position="absolute",e.body.appendChild(i.canvas),i.ctx=i.canvas.getContext("2d"))}r(i,"laya.webgl.resource.CharRender_Canvas",_);var a=i.prototype;return a.getWidth=function(t){return i.ctx?(i.ctx._lastFont!=le._curFont&&(i.ctx.font=le._curFont,i.ctx._lastFont=le._curFont),i.ctx.measureText(t).width):0},a.scale=function(t,e){(this.lastScaleX!=t||this.lastScaleY!=e)&&(this.needResetScale&&(i.ctx.restore(),this.lastScaleX=this.lastScaleY=1),i.ctx.save(),this.needResetScale=!0,i.ctx.scale(t,e),this.lastScaleX=t,this.lastScaleY=e)},a.getCharBmp=function(t,e,_,r,a,n,s,o,h,u){i.ctx.font!=e&&(i.ctx.font=e,i.ctx._lastFont=e),n.width=i.ctx.measureText(t).width;var l=n.width*this.lastScaleX,c=n.height*this.lastScaleY;return l+=(s+h)*this.lastScaleX,c+=(o+u)*this.lastScaleY,i.ctx.clearRect(0,0,l+1,c+1),i.ctx.textBaseline="top",_>0?(i.ctx.strokeStyle=r,i.ctx.lineWidth=_,i.ctx.strokeText(t,s,o)):(i.ctx.fillStyle=r,i.ctx.fillText(t,s,o)),le.debug&&(i.ctx.strokeStyle="#ff0000",i.ctx.strokeRect(0,0,l,c),i.ctx.strokeStyle="#00ff00",i.ctx.strokeRect(s,o,n.width,n.height)),i.ctx.getImageData(0,0,l,c)},i.canvas=null,i.ctx=null,i}(Ee),We=function(e){function _(){this.lastFont="",_.__super.call(this)}r(_,"laya.webgl.resource.CharRender_Native",e);var i=_.prototype;return i.getWidth=function(e){return t.conchTextCanvas?(this.lastFont!=le._curFont&&(t.conchTextCanvas.font=le._curFont,this.lastFont=le._curFont),t.conchTextCanvas.measureText(e).width):0},i.scale=function(){},i.getCharBmp=function(e,_,i,r,a,n,s,o,h,u){if(!t.conchTextCanvas)return null;this.lastFont!=_&&(t.conchTextCanvas.font=le._curFont,this.lastFont=le._curFont);var c=n.width=t.conchTextCanvas.measureText(e).width,f=n.height;c+=s+h,f+=o+u;var d=l.create(a),E=d.numColor,A=l.create(r),D=A.numColor,R=t.conchTextCanvas.getTextBitmapData(e,D,i,E);return R},_}(Ee),Ge=function(t){function e(){e.__super.call(this,e.__name2int,e.__int2name,e.__int2nameMap)}return r(e,"laya.webgl.shader.d2.ShaderDefines2D",t),e.__init__=function(){e.reg("TEXTURE2D",1),e.reg("PRIMITIVE",4),e.reg("GLOW_FILTER",8),e.reg("BLUR_FILTER",16),e.reg("COLOR_FILTER",32),e.reg("COLOR_ADD",64),e.reg("WORLDMAT",128),e.reg("FILLTEXTURE",256),e.reg("FSHIGHPRECISION",1024)},e.reg=function(t,_){Re._reg(t,_,e.__name2int,e.__int2name)},e.toText=function(t,e,_){return Re._toText(t,e,_)},e.toInt=function(t){return Re._toInt(t,e.__name2int)},e.TEXTURE2D=1,e.PRIMITIVE=4,e.FILTERGLOW=8,e.FILTERBLUR=16,e.FILTERCOLOR=32,e.COLORADD=64,e.WORLDMAT=128,e.FILLTEXTURE=256,e.SKINMESH=512,e.SHADERDEFINE_FSHIGHPRECISION=1024,e.__name2int={},e.__int2name=[],e.__int2nameMap=[],e}(Re),Xe=function(t){function e(){this._matrix=new p,this._matrix4=Se.defaultMatrix4.concat(),e.__super.call(this,1e4),this.shaderValue=new Z(0,0)}r(e,"laya.webgl.submit.SubmitCanvas",t);var _=e.prototype;return _.renderSubmit=function(){if(this._ctx_src._targets)return alert("nimei"),1;var t=ye.worldAlpha,e=ye.worldMatrix4,_=ye.worldMatrix,i=ye.worldFilters,r=ye.worldShaderDefines,a=this.shaderValue,n=this._matrix,s=this._matrix4,o=p.TEMP;return p.mul(n,_,o),s[0]=o.a,s[1]=o.b,s[4]=o.c,s[5]=o.d,s[12]=o.tx,s[13]=o.ty,ye.worldMatrix=o.clone(),ye.worldMatrix4=s,ye.worldAlpha=ye.worldAlpha*a.alpha,a.filters&&a.filters.length&&(ye.worldFilters=a.filters,ye.worldShaderDefines=a.defines),this._ctx_src.flush(),ye.worldAlpha=t,ye.worldMatrix4=e,ye.worldMatrix.destroy(),ye.worldMatrix=_,ye.worldFilters=i,ye.worldShaderDefines=r,1},_.releaseRender=function(){if(--this._ref<1){var t=e.POOL;this._ctx_src=null,this._mesh=null,t[t._length++]=this}},_.clone=function(){return null},_.getRenderType=function(){return 10003},e.create=function(t,_,i){var r=e.POOL._length?e.POOL[--e.POOL._length]:new e;r._ctx_src=t,r._ref=1,r._numEle=0;var a=r.shaderValue;return a.alpha=_,a.defines.setValue(0),i&&i.length&&a.setFilters(i),r},e.POOL=(e.POOL=[],e.POOL._length=0,e.POOL),e}(pe),ke=function(t){function e(t){void 0===t&&(t=1e4),e.__super.call(this,t)}r(e,"laya.webgl.submit.SubmitTexture",t);var _=e.prototype;return _.clone=function(t,_,i){var r=e._poolSize?e.POOL[--e._poolSize]:new e;return this._cloneInit(r,t,_,i),r},_.releaseRender=function(){--this._ref<1&&(e.POOL[e._poolSize++]=this,this.shaderValue.release(),this._mesh=null,this._parent&&(this._parent.releaseRender(),this._parent=null))},_.renderSubmit=function(){if(0===this._numEle)return 1;var t=this.shaderValue.textureHost;if(t){var e=t?t._getSource():null;if(!e)return 1}var _=be.mainContext;this._mesh.useMesh(_);var i=pe.preRender,r=pe.preRender._key;return 0===this._key.blendShader&&this._key.submitType===r.submitType&&this._key.blendShader===r.blendShader&&je.activeShader&&pe.preRender.clipInfoID==this.clipInfoID&&i.shaderValue.defines._value===this.shaderValue.defines._value&&this.shaderValue.defines._value&!1&&this.shaderValue.defines._value&!1&&this.shaderValue.defines._value&!1?je.activeShader.uploadTexture2D(e):(re.activeBlendFunction!==this._blendFn&&(Be.setBlend(_,!0),this._blendFn(_),re.activeBlendFunction=this._blendFn),this.shaderValue.texture=e,this.shaderValue.upload()),_.drawElements(4,this._numEle,5123,this._startIdx),V.drawCall++,V.trianglesFaces+=this._numEle/3,1},e.create=function(t,_,i){var r=e._poolSize?e.POOL[--e._poolSize]:new e(10016);r._mesh=_,r._key.clear(),r._key.submitType=2,r._ref=1,r._startIdx=_.indexNum*Se.BYTES_PIDX,r._numEle=0;var a=t._nBlendType;if(r._key.blendShader=a,r._blendFn=t._targets?re.targetFns[a]:re.fns[a],r.shaderValue=i,t._colorFiler){var n=t._colorFiler;i.defines.add(n.type),i.colorMat=n._mat,i.colorAlpha=n._alpha}return r},e._poolSize=0,e.POOL=[],e}(pe),ze=(function(t){function e(t){e.__super.call(this,laya.webgl.utils.MeshParticle2D.const_stride,4*t*e.const_stride,4),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshParticle2D._fixattriInfo),this.createQuadIB(t),this._quadNum=t}r(e,"laya.webgl.utils.MeshParticle2D",t);var _=e.prototype;return _.setMaxParticleNum=function(t){this._vb._resizeBuffer(4*t*e.const_stride,!1),this.createQuadIB(t)},_.releaseMesh=function(){this._vb.setByteLength(0),this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshParticle2D._POOL.push(this)},_.destroy=function(){this._ib.destroy(),this._vb.destroy(),this._vb.deleteBuffer()},e.getAMesh=function(t){if(laya.webgl.utils.MeshParticle2D._POOL.length){var _=laya.webgl.utils.MeshParticle2D._POOL.pop();return _.setMaxParticleNum(t),_}return new e(t)},e.const_stride=116,e._POOL=[],i(e,["_fixattriInfo",function(){return this._fixattriInfo=[5126,4,0,5126,3,16,5126,3,28,5126,4,40,5126,4,56,5126,3,72,5126,2,84,5126,4,92,5126,1,108,5126,1,112]}]),e}(ge),function(t){function e(){e.__super.call(this,laya.webgl.utils.MeshQuadTexture.const_stride,4,4),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshQuadTexture._fixattriInfo),laya.webgl.utils.MeshQuadTexture._fixib?(this._ib=laya.webgl.utils.MeshQuadTexture._fixib,this._quadNum=e._maxIB):(this.createQuadIB(e._maxIB),laya.webgl.utils.MeshQuadTexture._fixib=this._ib)}r(e,"laya.webgl.utils.MeshQuadTexture",t);var _=e.prototype;return _.releaseMesh=function(){this._vb.setByteLength(0),this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshQuadTexture._POOL.push(this)},_.destroy=function(){this._vb.destroy(),this._vb.deleteBuffer()},_.addQuad=function(t,e,_,i){var r=this._vb,a=r._byteLength>>2;r.setByteLength(a+laya.webgl.utils.MeshQuadTexture.const_stride<<2);var n=r._floatArray32||r.getFloat32Array(),s=r._uint32Array,o=a,h=i?255:0;n[o++]=t[0],n[o++]=t[1],n[o++]=e[0],n[o++]=e[1],s[o++]=_,s[o++]=h,n[o++]=t[2],n[o++]=t[3],n[o++]=e[2],n[o++]=e[3],s[o++]=_,s[o++]=h,n[o++]=t[4],n[o++]=t[5],n[o++]=e[4],n[o++]=e[5],s[o++]=_,s[o++]=h,n[o++]=t[6],n[o++]=t[7],n[o++]=e[6],n[o++]=e[7],s[o++]=_,s[o++]=h,r._upload=!0},e.getAMesh=function(){return laya.webgl.utils.MeshQuadTexture._POOL.length?laya.webgl.utils.MeshQuadTexture._POOL.pop():new e},e.const_stride=24,e._fixib=null,e._maxIB=16384,e._POOL=[],i(e,["_fixattriInfo",function(){return this._fixattriInfo=[5126,4,0,5121,4,16,5121,4,20]}]),e}(ge)),Ye=function(t){function e(){e.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,4,4),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}r(e,"laya.webgl.utils.MeshTexture",t);var _=e.prototype;return _.addData=function(t,_,i,r,a){for(var n=t.length/2,s=this._vb.needSize(n*e.const_stride),o=s>>2,h=this._vb._floatArray32||this._vb.getFloat32Array(),u=this._vb._uint32Array,l=0,c=0;n>c;c++){var f=t[l],d=t[l+1],E=f*r.a+d*r.c+r.tx,A=f*r.b+d*r.d+r.ty;h[o++]=E,h[o++]=A,h[o++]=_[l],h[o++]=_[l+1],l+=2,u[o++]=a,u[o++]=255}this._vb.setNeedUpload();var D=this.vertNum;if(D>0){var R=i.length;R>e.tmpIdx.length&&(e.tmpIdx=new Uint16Array(R));for(var m=0;R>m;m++)e.tmpIdx[m]=i[m]+D;this._ib.appendU16Array(e.tmpIdx,i.length)}else this._ib.append(i);this._ib.setNeedUpload(),this.vertNum+=n,this.indexNum+=i.length},_.releaseMesh=function(){this._vb.setByteLength(0),this._ib.setByteLength(0),this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},_.destroy=function(){this._ib.destroy(),this._vb.destroy(),this._ib.disposeResource(),this._vb.deleteBuffer()},e.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new e},e.const_stride=24,e._POOL=[],i(e,["_fixattriInfo",function(){return this._fixattriInfo=[5126,4,0,5121,4,16,5121,4,20]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),e}(ge),He=function(t){function e(){e.__super.call(this,laya.webgl.utils.MeshVG.const_stride,4,4),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshVG._fixattriInfo)}r(e,"laya.webgl.utils.MeshVG",t);var _=e.prototype;return _.addVertAndIBToMesh=function(t,_,i,r){for(var a=this._vb.needSize(_.length/2*e.const_stride),n=a>>2,s=this._vb._floatArray32||this._vb.getFloat32Array(),o=this._vb._uint32Array,h=0,u=_.length/2,l=0;u>l;l++)s[n++]=_[h],s[n++]=_[h+1],h+=2,o[n++]=i;this._vb.setNeedUpload(),this._ib.append(new Uint16Array(r)),this._ib.setNeedUpload(),this.vertNum+=u,this.indexNum+=r.length},_.releaseMesh=function(){this._vb.setByteLength(0),this._ib.setByteLength(0),this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshVG._POOL.push(this)},_.destroy=function(){this._ib.destroy(),this._vb.destroy(),this._ib.disposeResource(),this._vb.deleteBuffer()},e.getAMesh=function(){return laya.webgl.utils.MeshVG._POOL.length?laya.webgl.utils.MeshVG._POOL.pop():new e},e.const_stride=12,e._POOL=[],i(e,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5121,4,8]}]),e}(ge),Ze=function(e){function _(){this._customRenderCmd=null,this._customCmds=null,this._x=0,this._y=0,this._renderType=0,this._bRepaintCanvas=!1,this._lastContext=null,_.__super.call(this)}r(_,"laya.layagl.ConchSpriteAdpt",e);var a=_.prototype;return a.createData=function(){var t=308;this._conchData=new ParamData(t,!1),this._datai32=this._conchData._int32Data,this._dataf32=this._conchData._float32Data,this._dataf32[4]=1,this._datai32[3]=-1,this._datai32[1]=0,this._datai32[2]=0,this._datai32[22]=4294967295,this._datai32[5]=1,this._dataf32[8]=0,this._dataf32[9]=0,this._dataf32[10]=1,this._dataf32[11]=1,this._dataf32[16]=1,this._dataf32[17]=0,this._dataf32[18]=0,this._dataf32[19]=1,this._dataf32[20]=0,this._dataf32[21]=0,this._datai32[24]=-1,this._datai32[25]=-1,this._datai32[27]=-1,this._datai32[28]=0,this._datai32[29]=0,this._datai32[30]=1e6,this._datai32[31]=1e6,this._datai32[63]=0,this._datai32[71]=1,this._datai32[72]=771,this._datai32[68]=-1},a._createTransform=function(){return ie.create(new Float32Array(6))},a._setTransform=function(t){var e=this._conchData._float32Data;e[15]=0,e[16]=t.a,e[17]=t.b,e[18]=t.c,e[19]=t.d,e[20]=t.tx,e[21]=t.ty},a._setGraphics=function(t){this._datai32[23]=t._commandEncoder.getPtrID()},a._setGraphicsCallBack=function(){this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._datai32[54]=this._callbackFuncObj.id,this._callbackFuncObj.addCallbackFunc(5,this.updateParticleFromNative.bind(this)),this._datai32[68]=5},a._setCacheAs=function(){j.createCommandEncoder(),this._drawCanvasParamData||(this._drawCanvasParamData=new ParamData(132,!0)),this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._canvasBeginCmd||(this._canvasBeginCmd=$.instance.createCommandEncoder(128,64,!1)),this._canvasEndCmd||(this._canvasEndCmd=$.instance.createCommandEncoder(128,64,!1)),this._datai32[54]=this._callbackFuncObj.id,this._callbackFuncObj.addCallbackFunc(1,this.canvasBeginRenderFromNative.bind(this)),this._callbackFuncObj.addCallbackFunc(2,this.canvasEndRenderFromNative.bind(this)),this._datai32[56]=1,this._datai32[57]=2,this._datai32[58]=this._canvasBeginCmd.getPtrID(),this._datai32[59]=this._canvasEndCmd.getPtrID(),this._datai32[60]=j._DRAW_CANVAS_CMD_ENCODER_.getPtrID(),this._datai32[61]=this._drawCanvasParamData.getPtrID()},a._setX=function(t){this._x=this._dataf32[6]=t,this._renderType|=2,this._setRenderType(this._renderType),this._dataf32[15]=1},a._setY=function(t){this._y=this._dataf32[7]=t,this._renderType|=2,this._setRenderType(this._renderType),this._dataf32[15]=1},a._setPivotX=function(t){this._renderType|=2,this._dataf32[8]=t,this._dataf32[15]=1},a._getPivotX=function(){return this._dataf32[8]},a._setPivotY=function(t){this._renderType|=2,this._dataf32[9]=t,this._dataf32[15]=1},a._getPivotY=function(){return this._dataf32[9]},a._setAlpha=function(t){var e=this.getStyle();e.alpha=t,t=t>1?1:t,t=0>t?0:t;var _=this._datai32[22],i=_>>24;i=255*t,_=16777215&_|i<<24,this._datai32[22]=_,1!==t?this._renderType|=1:this._renderType&=-2,this._setRenderType(this._renderType),this.parentRepaint()},a._setRenderType=function(t){this._datai32[0]=t,ee.GLS[t]||ee.createByRenderType(t),ee.GLSE[t]||ee.createByRenderTypeEnd(t)},a.parentRepaint=function(){},a._getAlpha=function(){return(this._datai32[22]>>>24)/255},a._setScaleX=function(t){this._style.scaleX=this._dataf32[10]=t,this._dataf32[15]=1},a._setScaleY=function(t){this._style.scaleY=this._dataf32[11]=t,this._dataf32[15]=1},a._setSkewX=function(t){this._style.skewX=this._dataf32[12]=t,this._dataf32[15]=1},a._setSkewY=function(t){this._style.skewY=this._dataf32[13]=t,this._dataf32[15]=1},a._setRotation=function(t){this._style.rotation=this._dataf32[14]=t,this._dataf32[15]=1},a._setBgStyleColor=function(t,e,_,i,r){var a=null,n=null;this._drawSimpleRectParamData||(this._drawSimpleRectParamData=new ParamData(104,!0)),a=this._drawSimpleRectParamData._float32Data,n=this._drawSimpleRectParamData._int32Data;var s=l.create(r),o=s.numColor;n[0]=1,n[1]=96;var h=2;a[h++]=t,a[h++]=e,a[h++]=0,a[h++]=0,n[h++]=o,a[h++]=4294967295,a[h++]=t+_,a[h++]=e,a[h++]=0,a[h++]=0,n[h++]=o,a[h++]=4294967295,a[h++]=t+_,a[h++]=e+i,a[h++]=0,a[h++]=0,n[h++]=o,a[h++]=4294967295,a[h++]=t,a[h++]=e+i,a[h++]=0,a[h++]=0,n[h++]=o,a[h++]=4294967295,this._datai32[74]=this._drawSimpleRectParamData.getPtrID(),$.syncBufferToRenderThread(this._drawSimpleRectParamData),this._datai32[73]=_e._SIMPLE_RECT_CMDENCODER_.getPtrID()},a._setBorderStyleColor=function(t,e,_,i,r,a){var n=null,s=null;this._drawRectBorderParamData||(this._drawRectBorderParamData=new ParamData(236,!0)),n=this._drawRectBorderParamData._float32Data,s=this._drawRectBorderParamData._int32Data;var o=[],h=[],u=[];o.push(t),o.push(e),o.push(t+_),o.push(e),o.push(t+_),o.push(e+i),o.push(t),o.push(e+i),o.push(t),o.push(e-a/2),Te.createLine2(o,h,a,0,u,!1);var c=o.length;n=this._drawRectBorderParamData._float32Data,s=this._drawRectBorderParamData._int32Data;var f=this._drawRectBorderParamData._int16Data,d=l.create(r),E=d.numColor;s[0]=0,s[1]=120,s[2]=0,s[3]=2*h.length,s[4]=0;for(var A=5,D=0;c>D;D++)n[A++]=u[2*D],n[A++]=u[2*D+1],s[A++]=E;A=70;for(var R=0;R<h.length;R++)f[A++]=h[R];this._datai32[76]=this._drawRectBorderParamData.getPtrID(),$.syncBufferToRenderThread(this._drawRectBorderParamData),this._datai32[75]=_e._RECT_BORDER_CMD_ENCODER_.getPtrID()},a._setTextureEx=function(t,e){var _=null,i=null;if(!this._drawSimpleImageData){this._drawSimpleImageData=new ParamData(116,!0),_=this._drawSimpleImageData._float32Data,i=this._drawSimpleImageData._int32Data,i[0]=3,i[1]=33984,i[2]=e?t.bitmap._glTexture.id:0,i[3]=1,i[4]=96;var r=t.uv;_[5]=0,_[6]=0,_[7]=r[0],_[8]=r[1],i[9]=4294967295,i[10]=4294967295,_[11]=0,_[12]=0,_[13]=r[2],_[14]=r[3],i[15]=4294967295,i[16]=4294967295,_[17]=0,_[18]=0,_[19]=r[4],_[20]=r[5],i[21]=4294967295,i[22]=4294967295,_[23]=0,_[24]=0,_[25]=r[6],_[26]=r[7],i[27]=4294967295,i[28]=4294967295}_=this._drawSimpleImageData._float32Data,i=this._drawSimpleImageData._int32Data,i[2]=e?t.bitmap._glTexture.id:0;var a=e?t.width:0,n=e?t.height:0;_[11]=_[17]=a,_[18]=_[24]=n;var s=this._drawSimpleImageData.getPtrID();this._datai32[25]=s,$.syncBufferToRenderThread(this._drawSimpleImageData),this._datai32[24]=_e._SIMPLE_TEXTURE_CMDENCODER_.getPtrID()},a._setTexture=function(t){t&&(t.loaded?this._setTextureEx(t,!0):(this._setTextureEx(t,!1),t.on("loaded",this,this._setTextureEx,[t,!0])))},a._setCustomRender=function(){this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._callbackFuncObj.addCallbackFunc(0,this.customRenderFromNative.bind(this)),this._customRenderCmd=$.instance.createCommandEncoder(128,64,!0),this._datai32[54]=this._callbackFuncObj.id,this._datai32[55]=0,this._datai32[27]=this._customRenderCmd.getPtrID()},a._setScrollRect=function(t){this._dataf32[28]=0,this._dataf32[29]=0,this._dataf32[30]=t.width,this._dataf32[31]=t.height,this._dataf32[32]=-t.x,this._dataf32[33]=-t.y},a._setColorFilter=function(){this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._filterBeginCmd||(this._filterBeginCmd=$.instance.createCommandEncoder(128,64,!1)),this._filterEndCmd||(this._filterEndCmd=$.instance.createCommandEncoder(128,64,!0)),this._datai32[54]=this._callbackFuncObj.id,this._callbackFuncObj.addCallbackFunc(3,this.filterBeginRenderFromNative.bind(this)),this._callbackFuncObj.addCallbackFunc(4,this.filterEndRenderFromNative.bind(this)),this._datai32[65]=3,this._datai32[64]=this._filterBeginCmd.getPtrID(),this._datai32[67]=4,this._datai32[66]=this._filterEndCmd.getPtrID()},a._setMask=function(t){t.cacheAs="bitmap",this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._maskCmd||(this._maskCmd=$.instance.createCommandEncoder(128,64,!1)),this._datai32[54]=this._callbackFuncObj.id,this._callbackFuncObj.addCallbackFunc(6,this.maskRenderFromNative.bind(this)),this._datai32[69]=6,this._datai32[70]=this._maskCmd.getPtrID()
},a._adjustTransform=function(){var e=this._transform||(this._transform=this._createTransform());e._bTransform=!0,t.conch.calcMatrixFromScaleSkewRotation(this._conchData._data._ptrID,60,64,24,28,32,36,40,44,48,52,56);var _=this._conchData._float32Data;return e.a=_[16],e.b=_[17],e.c=_[18],e.d=_[19],e.tx=0,e.ty=0,e},a._setBlendMode=function(t){switch(t){case"normal":this._datai32[71]=1,this._datai32[72]=771;break;case"add":this._datai32[71]=1,this._datai32[72]=772;break;case"multiply":this._datai32[71]=774,this._datai32[72]=771;break;case"screen":this._datai32[71]=1,this._datai32[72]=1;break;case"lighter":this._datai32[71]=1,this._datai32[72]=1;break;case"overlay":this._datai32[71]=1,this._datai32[72]=769;break;case"destination-out":this._datai32[71]=0,this._datai32[72]=0;break;case"mask":this._datai32[71]=0,this._datai32[72]=770;break;default:alert("_setBlendMode Unknown type")}},a.customRenderFromNative=function(){var t=$.instance.getCurrentContext();this._customRenderCmd.beginEncoding(),this._customRenderCmd.clearEncoding(),t._commandEncoder=this._customRenderCmd,t._customCmds=this._customCmds;for(var e=0,_=this._customCmds.length;_>e;e++)this._customCmds[e].recover();this._customCmds.length=0,this.customRender(t,0,0),this._customRenderCmd.endEncoding()},a.canvasBeginRenderFromNative=function(){var t=$.instance,e=null,i=null,r=this._cacheStyle;if(r.canvas&&0==this._datai32[4])e=r.canvas,0!=this._bRepaintCanvas&&(this.setChildrenNativeVisible(!1),this._bRepaintCanvas=!1),this._datai32[63]=1;else{if(this._canvasBeginCmd.beginEncoding(),this._canvasBeginCmd.clearEncoding(),e=laya.layagl.ConchSpriteAdpt.buildCanvas(this,0,0)){this._datai32[63]=0,this._lastContext=t.getCurrentContext(),i=e.context;var a=i._targets;j.setParamData(this._drawCanvasParamData,a,-16,-16,a.width,a.height),t.setCurrentContext(i),i.beginRT(),_._tempFloatArrayMatrix[0]=1,_._tempFloatArrayMatrix[1]=0,_._tempFloatArrayMatrix[2]=0,_._tempFloatArrayMatrix[3]=1,_._tempFloatArrayMatrix[4]=16,_._tempFloatArrayMatrix[5]=16,t.setGlobalValue(_e.GLOBALVALUE_MATRIX32,8,_._tempFloatArrayMatrix),1!=this._bRepaintCanvas&&(this.setChildrenNativeVisible(!0),this._bRepaintCanvas=!0)}this._canvasBeginCmd.endEncoding()}},a.setChildrenNativeVisible=function(t){for(var e,_=this._children,i=_.length,r=0;i>r;++r)e=_[r],e._datai32[5]=t?1:0,e.setChildrenNativeVisible(t)},a.canvasEndRenderFromNative=function(){var t=$.instance;if(this._canvasEndCmd.beginEncoding(),this._canvasEndCmd.clearEncoding(),this._bRepaintCanvas){var e=$.instance.getCurrentContext();t.setCurrentContext(this._lastContext),t.commitContextToGPU(e),e.endRT(),t.blendFunc(1,771)}this._canvasEndCmd.endEncoding()},a.filterBeginRenderFromNative=function(){var t=this,e=$.instance;this._filterBeginCmd.beginEncoding(),this._filterBeginCmd.clearEncoding();{var i=this._getCacheStyle().filters;i.length}if(i[0]instanceof laya.filters.ColorFilter){e.addShaderMacro(_e.SHADER_MACRO_COLOR_FILTER);var r=i[0];e.setGlobalValue(_e.GLOBALVALUE_COLORFILTER_COLOR,8,r._mat),e.setGlobalValue(_e.GLOBALVALUE_COLORFILTER_ALPHA,8,r._alpha)}else{var a=M.TEMP,n=p.create(),s=0,o=0,h=t._isHaveGlowFilter();h&&(s=50,o=25);var u=new S;u.copyFrom(t.getSelfBounds()),u.x+=t.x,u.y+=t.y,u.x-=t.pivotX+4,u.y-=t.pivotY+4;var l=u.x,c=u.y;if(u.width+=s+8,u.height+=s+8,a.x=u.x*n.a+u.y*n.c,a.y=u.y*n.d+u.x*n.b,u.x=a.x,u.y=a.y,a.x=u.width*n.a+u.height*n.c,a.y=u.height*n.d+u.width*n.b,u.width=a.x,u.height=a.y,u.width<=0||u.height<=0)return;var f=t._getCacheStyle().filterCache;f&&Ae.releaseRT(f),f=Ae.getRT(u.width,u.height),t._getCacheStyle().filterCache=f,_.useRenderTarget(f),_._tempFloatArrayMatrix[0]=1,_._tempFloatArrayMatrix[1]=0,_._tempFloatArrayMatrix[2]=0,_._tempFloatArrayMatrix[3]=1,_._tempFloatArrayMatrix[4]=t.x-l+o,_._tempFloatArrayMatrix[5]=t.y-c+o,e.setGlobalValue(_e.GLOBALVALUE_MATRIX32,8,_._tempFloatArrayMatrix)}this._filterBeginCmd.endEncoding()},a.filterEndRenderFromNative=function(){this._filterEndCmd.beginEncoding(),this._filterEndCmd.clearEncoding();var t=$.instance,e=this._getCacheStyle().filters;if(e[0]instanceof laya.filters.ColorFilter);else{t.restore();var i=$.instance.getCurrentContext(),r=__.currentActive;if(__.popRT(),e[0]instanceof laya.filters.BlurFilter){t.addShaderMacro(_e.SHADER_MACRO_BLUR_FILTER);var a=e[0];_._tempFloatArrayBuffer2[0]=r.width,_._tempFloatArrayBuffer2[1]=r.height,t.setGlobalValue(_e.GLOBALVALUE_BLURFILTER_BLURINFO,8,_._tempFloatArrayBuffer2),t.setGlobalValue(_e.GLOBALVALUE_BLURFILTER_STRENGTH,8,a.getStrenth_sig2_2sig2_native()),i.drawTarget(this._filterEndCmd,r,-4,-4,0,0)}else if(e[0]instanceof laya.filters.GlowFilter){var n=r.width,s=r.height,o=Ae.getRT(n,s);_.useRenderTarget(o),t.addShaderMacro(_e.SHADER_MACRO_GLOW_FILTER);var h=e[0],u=h.getBlurInfo2Native();u[0]=n,u[1]=s,t.setGlobalValue(_e.GLOBALVALUE_GLOWFILTER_COLOR,8,h.getColorNative()),t.setGlobalValue(_e.GLOBALVALUE_GLOWFILTER_BLURINFO1,8,h.getBlurInfo1Native()),t.setGlobalValue(_e.GLOBALVALUE_GLOWFILTER_BLURINFO2,8,u),i.drawTarget(this._filterEndCmd,r,-16,-16,0,0),t.restore(),__.popRT(),i.drawTarget(this._filterEndCmd,o,-29,-29,0,0),i.drawTarget(this._filterEndCmd,r,-29,-29,0,0)}}this._filterEndCmd.endEncoding(),$.syncBufferToRenderThread(this._filterEndCmd)},a.maskRenderFromNative=function(){this._maskCmd.beginEncoding(),this._maskCmd.clearEncoding();var t=$.instance,e=t.getCurrentContext(),i=this.mask;i&&(i._children.length>0?(t.blockStart(i._conchData),i._renderChilds(e),t.blockEnd(i._conchData)):t.block(i._conchData)),_._tempInt1[0]=772,t.setGlobalValue(_e.GLOBALVALUE_BLENDFUNC_SRC,8,_._tempInt1),_._tempInt1[0]=0,t.setGlobalValue(_e.GLOBALVALUE_BLENDFUNC_DEST,8,_._tempInt1),this._maskCmd.endEncoding()},a.updateParticleFromNative=function(){this.tempCmd.updateParticle()},_.createMatrix=function(t,e,_,i,r,a,n){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===_&&(_=0),void 0===i&&(i=1),void 0===r&&(r=0),void 0===a&&(a=0),new ie(t,e,_,i,r,a,n)},_.init=function(){Q.__init__(),q.__init__();var t=F.prototype,e=_.prototype,i=["_createTransform","_setTransform","_setGraphics","_setGraphicsCallBack","_setCacheAs","_setX","_setY","_setPivotX","_getPivotX","_setPivotY","_getPivotY","_setAlpha","_getAlpha","_setScaleX","_setScaleY","_setSkewX","_setSkewY","_setRotation","_adjustTransform","_setRenderType","_setTexture","_setTextureEx","_setCustomRender","_setScrollRect","_setColorFilter","customRenderFromNative","canvasBeginRenderFromNative","canvasEndRenderFromNative","setChildrenNativeVisible","filterBeginRenderFromNative","filterEndRenderFromNative","updateParticleFromNative","_setMask","maskRenderFromNative","_setBlendMode","_setBgStyleColor","_setBorderStyleColor"],r=0,a=0;a=i.length;var n;for(r=0;a>r;r++)n=i[r],t[n]=e[n];t.createGLBuffer=e.createData,p._createFun=_.createMatrix;t.render=t.renderToNative=$e.prototype.renderToNative,t.repaint=t.repaintForNative=$e.prototype.repaintForNative,t.parentRepaint=t.parentRepaintForNative=$e.prototype.parentRepaintForNative,t._renderChilds=$e.prototype._renderChilds},_.useRenderTarget=function(t){var e=$.instance;__.pushRT(),t.start(),e.clearColor(0,0,0,0),e.clear(17664),e.save(),_._tempFloatArrayBuffer2[0]=t.width,_._tempFloatArrayBuffer2[1]=t.height,e.setGlobalValue(_e.GLOBALVALUE_VIEWS,8,_._tempFloatArrayBuffer2)},_.buildCanvas=function(t,e,_){var i,r,a,n,s,o,h,u,l,c=t._cacheStyle,f=c.canvas,d=c.cacheAs;return l=c._calculateCacheRect(t,d,e,_),h=l.x,u=l.y,n=c.cacheRect,s=n.width*h,o=n.height*u,r=n.x,a=n.y,"bitmap"===d&&(s>2048||o>2048)?(console.warn("cache bitmap size larger than 2048,cache ignored"),c.releaseContext(),null):(f||(c.createContext(),f=c.canvas),i=f.context,f.context.sprite=t,(f.width!=s||f.height!=o)&&(f.size(s,o),i._targets&&(i._targets.destroy(),i._targets=null)),"bitmap"===d?f.context.asBitmap=!0:"normal"===d&&(f.context.asBitmap=!1),"normal"===d&&(i.touches=[]),f)},i(_,["_tempFloatArrayBuffer2",function(){return this._tempFloatArrayBuffer2=new Float32Array(2)},"_tempFloatArrayMatrix",function(){return this._tempFloatArrayMatrix=new Float32Array(6)},"_tempInt1",function(){return this._tempInt1=new Int32Array(1)}]),_}(C),je=function(t){function e(){e.__super.call(this)}return r(e,"laya.webgl.shader.BaseShader",t),e.activeShader=null,e.bindShader=null,e}(L),Ke=function(t){function e(t,_,i){this.texture=null,this._source=null,this._used=null,this._startFindPos=0,this._texW=0,this._texH=0,this._gridNum=0,this.charMaps=[],this._score=0,this._scoreTick=0,this.__destroyed=!1,this._discardTm=0,e.__super.call(this),this._texW=t,this._texH=_,this._gridNum=i,this.texture=new ce(this),this.setGridNum(i),this.lock=!0}r(e,"laya.webgl.resource.CharPageTexture",t);var i=e.prototype;return i.findAGrid=function(){for(var t=this._startFindPos;t<this._gridNum;t++)if(0==this._used[t])return this._startFindPos=t+1,this._used[t]=1,t;return-1},i.removeGrid=function(t){this._used[t]=0,t<this._startFindPos&&(this._startFindPos=t)},i.removeOld=function(t){for(var e=0,_=null,i=0,r=this.charMaps.length;r>i;i++)if(_=this.charMaps[i]){var a=this;_.forEach(function(_,i,r){_&&_.touchTick<t&&(console.log("remove char "+i),a.removeGrid(_.pos),r.delete(i),e++)})}return e},i.reset=function(){this._discardTm=_.stage.getFrameTm(),this._startFindPos=0,this.charMaps=[],this._score=0,this._scoreTick=0,this.__destroyed=!0},i.setGridNum=function(t){if(this._used&&this._used.length==this._gridNum)if(this._used.fill)this._used.fill(0);else for(var e=0;e<this._used.length;e++)this._used[e]=0;else this._used=new Uint8Array(t)},i.recreateResource=function(){if(!this._source){var t=g.isConchApp?$.instance.getDefaultCommandEncoder():be.mainContext,e=this._source=t.createTexture();this.texture.bitmap._glTexture=this._source,Be.bindTexture(t,3553,e),t.texImage2D(3553,0,6408,this._texW,this._texH,0,6408,5121,null),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10240,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)}},i.addChar=function(t,e,_){!this._source&&this.recreateResource();var i=g.isConchApp?$.instance.getDefaultCommandEncoder():be.mainContext;Be.bindTexture(i,3553,this._source),!g.isConchApp&&i.pixelStorei(37441,!0);var r=t.data;t.data instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer)),i.texSubImage2D(3553,0,e,_,t.width,t.height,6408,5121,r),!g.isConchApp&&i.pixelStorei(37441,!1)},i.destroy=function(){console.log("destroy CharPageTexture"),this.__destroyed=!0;var t=g.isConchApp?$.instance.getDefaultCommandEncoder():be.mainContext;this._source&&t.deleteTexture(this._source),this._source=null},e}(L),Qe=function(t){function e(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,e.__super.call(this),this._glBuffer=$.instance.createBuffer()}r(e,"laya.webgl.utils.Buffer",t);var _=e.prototype;return _._bindForVAO=function(){},_.bind=function(){return!1},_._disposeResource=function(){this._glBuffer&&($.instance.deleteBuffer(this._glBuffer),this._glBuffer=null),this._setGPUMemory(0)},a(0,_,"bufferUsage",function(){return this._bufferUsage}),e._bindedVertexBuffer=null,e._bindedIndexBuffer=null,e}(L),qe=function(t){function e(){e.__super.call(this,64),this.defines.add(64)}r(e,"laya.webgl.shader.d2.value.TextSV",t);var _=e.prototype;return _.release=function(){e.pool[e._length++]=this,this.clear()},_.clear=function(){t.prototype.clear.call(this)},e.create=function(){return e._length?e.pool[--e._length]:new e(null)},e.pool=[],e._length=0,e}(Ve),$e=function(t){function e(){e.__super.call(this)}r(e,"laya.layagl.ConchSprite",t);var _=e.prototype;return _.parentRepaintForNative=function(t){void 0===t&&(t=2);var e=this._parent;e&&(e._conchData._int32Data[4]&t)!=t&&(e._conchData._int32Data[4]|=t,e.parentRepaintForNative(t))},_.renderToNative=function(t){var e=t.gl,_=$.getFrameCount()-1,i=this._conchData._int32Data,r=i[4];this._children.length>0?_!=i[3]||r>0&&1==(1&r)?(e.blockStart(this._conchData),this._renderChilds(t),e.blockEnd(this._conchData)):e.copyCmdBuffer(this._conchData._int32Data[1],this._conchData._int32Data[2]):e.block(this._conchData)},_._renderChilds=function(t){var e,_=this._children,i=0,r=_.length,a=this._style;if(a.viewport)for(var n=a.viewport,s=n.x,o=n.y,h=n.right,u=n.bottom,l=0/0,c=0/0;r>i;++i)(e=_[i])._visible&&(l=e._x)<h&&l+e.width>s&&(c=e._y)<u&&c+e.height>o&&e.renderToNative(t);else for(;r>i;++i)(e=_[i])._visible&&e.renderToNative(t)},_.repaintForNative=function(t){void 0===t&&(t=2),(this._conchData._int32Data[4]&t)!=t&&(this._conchData._int32Data[4]|=t,this.parentRepaintForNative(t))},e}(F),Je=function(t){function e(t,_){e.__super.call(this),this._wrapModeU=0,this._wrapModeV=0,this._filterMode=1,this._readyed=!1,this._width=-1,this._height=-1,this._format=t,this._mipmap=_,this._anisoLevel=1,this._glTexture=$.instance.createTexture()}r(e,"laya.webgl.resource.BaseTexture",t);var _=e.prototype;return _._isPot=function(t){return 0===(t&t-1)},_._getGLFormat=function(){var t=0;switch(this._format){case 0:t=6407;break;case 1:t=6408;break;case 2:t=6406;break;case 3:if(!Be._compressedTextureS3tc)throw"BaseTexture: not support DXT1 format.";t=Be._compressedTextureS3tc.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case 4:if(!Be._compressedTextureS3tc)throw"BaseTexture: not support DXT5 format.";t=Be._compressedTextureS3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;case 5:if(!Be._compressedTextureEtc1)throw"BaseTexture: not support ETC1RGB format.";t=Be._compressedTextureEtc1.COMPRESSED_RGB_ETC1_WEBGL;break;case 9:if(!Be._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGB_2BPPV format.";t=Be._compressedTexturePvrtc.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;break;case 10:if(!Be._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGBA_2BPPV format.";t=Be._compressedTexturePvrtc.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;break;case 11:if(!Be._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGB_4BPPV format.";t=Be._compressedTexturePvrtc.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;break;case 12:if(!Be._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGBA_4BPPV format.";t=Be._compressedTexturePvrtc.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;default:throw"BaseTexture: unknown texture format."}return t},_._setFilterMode=function(t){var e=$.instance;switch(Be.bindTexture(e,this._glTextureType,this._glTexture),t){case 0:this._mipmap&&this._isPot(this._width)&&this._isPot(this._height)?e.texParameteri(this._glTextureType,10241,9984):e.texParameteri(this._glTextureType,10241,9728),e.texParameteri(this._glTextureType,10240,9728);break;case 1:this._mipmap&&this._isPot(this._width)&&this._isPot(this._height)?e.texParameteri(this._glTextureType,10241,9985):e.texParameteri(this._glTextureType,10241,9729),e.texParameteri(this._glTextureType,10240,9729);break;case 2:this._mipmap&&this._isPot(this._width)&&this._isPot(this._height)?e.texParameteri(this._glTextureType,10241,9987):e.texParameteri(this._glTextureType,10241,9729),e.texParameteri(this._glTextureType,10240,9729);break;default:throw new Error("BaseTexture:unknown filterMode value.")}},_._setWarpMode=function(t,e){var _=$.instance;if(Be.bindTexture(_,this._glTextureType,this._glTexture),this._isPot(this._width)&&this._isPot(this._height))switch(e){case 0:_.texParameteri(this._glTextureType,t,10497);break;case 1:_.texParameteri(this._glTextureType,t,33071)}else _.texParameteri(this._glTextureType,t,33071)},_._setAnisotropy=function(t){t=Math.max(t,1);var e=$.instance;Be.bindTexture(e,this._glTextureType,this._glTexture);var _=Be._extTextureFilterAnisotropic;_&&(t=Math.min(e.getParameter(_.MAX_TEXTURE_MAX_ANISOTROPY_EXT),t),e.texParameterf(this._glTextureType,_.TEXTURE_MAX_ANISOTROPY_EXT,t))},_._disposeResource=function(){this._glTexture&&($.instance.deleteTexture(this._glTexture),this._glTexture=null,this._setGPUMemory(0))},_._getSource=function(){return this._readyed?this._glTexture:null},_._getGLFormatForNative=function(){return 6408},a(0,_,"wrapModeU",function(){return this._wrapModeU},function(t){this._wrapModeU!==t&&(this._wrapModeU=t,-1!==this._width&&this._setWarpMode(10242,t))}),a(0,_,"mipmap",function(){return this._mipmap}),a(0,_,"format",function(){return this._format}),a(0,_,"wrapModeV",function(){return this._wrapModeV},function(t){this._wrapModeV!==t&&(this._wrapModeV=t,-1!==this._height&&this._setWarpMode(10243,t))}),a(0,_,"defaulteTexture",function(){throw"BaseTexture:must override it."}),a(0,_,"filterMode",function(){return this._filterMode},function(t){t!==this._filterMode&&(this._filterMode=t,-1!==this._width&&-1!==this._height&&this._setFilterMode(t))}),a(0,_,"anisoLevel",function(){return this._anisoLevel},function(t){t!==this._anisoLevel&&(this._anisoLevel=Math.max(1,Math.min(16,t)),-1!==this._width&&-1!==this._height&&this._setAnisotropy(t))}),e.WARPMODE_REPEAT=0,e.WARPMODE_CLAMP=1,e.FILTERMODE_POINT=0,e.FILTERMODE_BILINEAR=1,e.FILTERMODE_TRILINEAR=2,e.FORMAT_R8G8B8=0,e.FORMAT_R8G8B8A8=1,e.FORMAT_ALPHA8=2,e.FORMAT_DXT1=3,e.FORMAT_DXT5=4,e.FORMAT_ETC1RGB=5,e.FORMAT_PVRTCRGB_2BPPV=9,e.FORMAT_PVRTCRGBA_2BPPV=10,e.FORMAT_PVRTCRGB_4BPPV=11,e.FORMAT_PVRTCRGBA_4BPPV=12,e.FORMAT_DEPTH_16=0,e.FORMAT_STENCIL_8=1,e.FORMAT_DEPTHSTENCIL_16_8=2,e.FORMAT_DEPTHSTENCIL_NONE=3,e}(s),t_=function(t){function e(t,_,i,r,a){if(this._attribInfo=null,this.customCompile=!1,this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},e.__super.call(this),!t||!_)throw"Shader Error";this._attribInfo=a,g.isConchApp&&(this.customCompile=!0),this._id=++e._count,this._vs=t,this._ps=_,this._nameMap=r?r:{},null!=i&&(e.sharders[i]=this),this.recreateResource(),this.lock=!0}r(e,"laya.webgl.shader.Shader",t);var _=e.prototype;return _.recreateResource=function(){this._compile(),this._setGPUMemory(0)},_._disposeResource=function(){be.mainContext.deleteShader(this._vshader),be.mainContext.deleteShader(this._pshader),be.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this._setGPUMemory(0),this._curActTexIndex=0},_._compile=function(){if(this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var t;this.customCompile&&(t=Le.preGetParams(this._vs,this._ps));var _=be.mainContext;this._program=_.createProgram(),this._vshader=e._createShader(_,this._vs,35633),this._pshader=e._createShader(_,this._ps,35632),_.attachShader(this._program,this._vshader),_.attachShader(this._program,this._pshader);var i,r,a=0,n=0,s=this._attribInfo?this._attribInfo.length:0;for(a=0;s>a;a+=2)_.bindAttribLocation(this._program,this._attribInfo[a+1],this._attribInfo[a]);if(_.linkProgram(this._program),!this.customCompile&&!_.getProgramParameter(this._program,35714))throw _.getProgramInfoLog(this._program);var o=this.customCompile?t.uniforms.length:_.getProgramParameter(this._program,35718);for(a=0;o>a;a++){var h=this.customCompile?t.uniforms[a]:_.getActiveUniform(this._program,a);r=_.getUniformLocation(this._program,h.name),i={vartype:"uniform",glfun:null,ivartype:1,location:r,name:h.name,type:h.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},i.name.indexOf("[0]")>0&&(i.name=i.name.substr(0,i.name.length-3),i.isArray=!0,i.location=_.getUniformLocation(this._program,i.name)),this._params.push(i)}for(a=0,n=this._params.length;n>a;a++)switch(i=this._params[a],i.indexOfParams=a,i.index=1,i.value=[i.location,null],i.codename=i.name,i.name=this._nameMap[i.codename]?this._nameMap[i.codename]:i.codename,this._paramsMap[i.name]=i,i._this=this,i.uploadedValue=[],i.type){case 5124:i.fun=i.isArray?this._uniform1iv:this._uniform1i;break;case 5126:i.fun=i.isArray?this._uniform1fv:this._uniform1f;break;case 35664:i.fun=i.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:i.fun=i.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:i.fun=i.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:i.fun=this._uniform_sampler2D;break;case 35680:i.fun=this._uniform_samplerCube;break;case 35676:i.glfun=_.uniformMatrix4fv,i.fun=this._uniformMatrix4fv;break;case 35670:i.fun=this._uniform1i;break;case 35674:case 35675:throw new Error("compile shader err!");default:throw new Error("compile shader err!")}}},_.getUniform=function(t){return this._paramsMap[t]},_._uniform1f=function(t,e){var _=t.uploadedValue;return _[0]!==e?(be.mainContext.uniform1f(t.location,_[0]=e),1):0},_._uniform1fv=function(t,e){if(e.length<4){var _=t.uploadedValue;return _[0]!==e[0]||_[1]!==e[1]||_[2]!==e[2]||_[3]!==e[3]?(be.mainContext.uniform1fv(t.location,e),_[0]=e[0],_[1]=e[1],_[2]=e[2],_[3]=e[3],1):0}return be.mainContext.uniform1fv(t.location,e),1},_._uniform_vec2=function(t,e){var _=t.uploadedValue;return _[0]!==e[0]||_[1]!==e[1]?(be.mainContext.uniform2f(t.location,_[0]=e[0],_[1]=e[1]),1):0},_._uniform_vec2v=function(t,e){if(e.length<2){var _=t.uploadedValue;return _[0]!==e[0]||_[1]!==e[1]||_[2]!==e[2]||_[3]!==e[3]?(be.mainContext.uniform2fv(t.location,e),_[0]=e[0],_[1]=e[1],_[2]=e[2],_[3]=e[3],1):0}return be.mainContext.uniform2fv(t.location,e),1},_._uniform_vec3=function(t,e){var _=t.uploadedValue;return _[0]!==e[0]||_[1]!==e[1]||_[2]!==e[2]?(be.mainContext.uniform3f(t.location,_[0]=e[0],_[1]=e[1],_[2]=e[2]),1):0},_._uniform_vec3v=function(t,e){return be.mainContext.uniform3fv(t.location,e),1},_._uniform_vec4=function(t,e){var _=t.uploadedValue;return _[0]!==e[0]||_[1]!==e[1]||_[2]!==e[2]||_[3]!==e[3]?(be.mainContext.uniform4f(t.location,_[0]=e[0],_[1]=e[1],_[2]=e[2],_[3]=e[3]),1):0},_._uniform_vec4v=function(t,e){return be.mainContext.uniform4fv(t.location,e),1},_._uniformMatrix2fv=function(t,e){return be.mainContext.uniformMatrix2fv(t.location,!1,e),1},_._uniformMatrix3fv=function(t,e){return be.mainContext.uniformMatrix3fv(t.location,!1,e),1},_._uniformMatrix4fv=function(t,e){return be.mainContext.uniformMatrix4fv(t.location,!1,e),1},_._uniform1i=function(t,e){var _=t.uploadedValue;return _[0]!==e?(be.mainContext.uniform1i(t.location,_[0]=e),1):0},_._uniform1iv=function(t,e){return be.mainContext.uniform1iv(t.location,e),1},_._uniform_ivec2=function(t,e){var _=t.uploadedValue;return _[0]!==e[0]||_[1]!==e[1]?(be.mainContext.uniform2i(t.location,_[0]=e[0],_[1]=e[1]),1):0},_._uniform_ivec2v=function(t,e){return be.mainContext.uniform2iv(t.location,e),1},_._uniform_vec3i=function(t,e){var _=t.uploadedValue;return _[0]!==e[0]||_[1]!==e[1]||_[2]!==e[2]?(be.mainContext.uniform3i(t.location,_[0]=e[0],_[1]=e[1],_[2]=e[2]),1):0},_._uniform_vec3vi=function(t,e){return be.mainContext.uniform3iv(t.location,e),1},_._uniform_vec4i=function(t,e){var _=t.uploadedValue;return _[0]!==e[0]||_[1]!==e[1]||_[2]!==e[2]||_[3]!==e[3]?(be.mainContext.uniform4i(t.location,_[0]=e[0],_[1]=e[1],_[2]=e[2],_[3]=e[3]),1):0},_._uniform_vec4vi=function(t,e){return be.mainContext.uniform4iv(t.location,e),1},_._uniform_sampler2D=function(t,e){var _=be.mainContext,i=t.uploadedValue;return null==i[0]?(i[0]=this._curActTexIndex,_.uniform1i(t.location,this._curActTexIndex),Be.activeTexture(_,33984+this._curActTexIndex),Be.bindTexture(_,3553,e),this._curActTexIndex++,1):(Be.activeTexture(_,33984+i[0]),Be.bindTexture(_,3553,e),0)},_._uniform_samplerCube=function(t,e){var _=be.mainContext,i=t.uploadedValue;return null==i[0]?(i[0]=this._curActTexIndex,_.uniform1i(t.location,this._curActTexIndex),Be.activeTexture(_,33984+this._curActTexIndex),Be.bindTexture(_,34067,e),this._curActTexIndex++,1):(Be.activeTexture(_,33984+i[0]),Be.bindTexture(_,34067,e),0)},_._noSetValue=function(t){console.log("no....:"+t.name)},_.uploadOne=function(t,e){Be.useProgram(be.mainContext,this._program);var _=this._paramsMap[t];_.fun.call(this,_,e)},_.uploadTexture2D=function(t){var e=Be;e._activeTextures[0]!==t&&(e.bindTexture(be.mainContext,e.TEXTURE_2D,t),e._activeTextures[0]=t)},_.upload=function(t,e){je.activeShader=je.bindShader=this;var _=be.mainContext;Be.useProgram(_,this._program),this._reCompile?(e=this._params,this._reCompile=!1):e=e||this._params;for(var i,r,a=e.length,n=0,s=0;a>s;s++)i=e[s],null!==(r=t[i.name])&&(n+=i.fun.call(this,i,r));V.shaderCall+=n},_.uploadArray=function(t,e,_){je.activeShader=this,je.bindShader=this,Be.useProgram(be.mainContext,this._program);for(var i,r,a=(this._params,0),n=e-2;n>=0;n-=2)r=this._paramsMap[t[n]],r&&(i=t[n+1],null!=i&&(_&&_[r.name]&&_[r.name].bind(),a+=r.fun.call(this,r,i)));V.shaderCall+=a},_.getParams=function(){return this._params},_.setAttributesLocation=function(t){this._attribInfo=t},e.getShader=function(t){return e.sharders[t]},e.create=function(t,_,i,r,a){return new e(t,_,i,r,a)},e.withCompile=function(t,_,i,r){if(i&&e.sharders[i])return e.sharders[i];var a=e._preCompileShader[2e-4*t];if(!a)throw new Error("withCompile shader err!"+t);return a.createShader(_,i,r,null)},e.withCompile2D=function(t,_,i,r,a,n){if(r&&e.sharders[r])return e.sharders[r];var s=e._preCompileShader[2e-4*t+_];if(!s)throw new Error("withCompile shader err!"+t+" "+_);return s.createShader(i,r,a,n)},e.addInclude=function(t,e){Le.addInclude(t,e)},e.preCompile=function(t,_,i,r){var a=2e-4*t;e._preCompileShader[a]=new Le(_,i,r)},e.preCompile2D=function(t,_,i,r,a){var n=2e-4*t+_;e._preCompileShader[n]=new Le(i,r,a)},e._createShader=function(t,e,_){var i=t.createShader(_);return t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,35713)?i:(console.log(t.getShaderInfoLog(i)),null)},e._count=0,e._preCompileShader={},e.SHADERNAME2ID=2e-4,e.sharders=new Array(32),i(e,["nameKey",function(){return this.nameKey=new U}]),e}(je),e_=function(t){function e(){this._maxsize=0,this._upload=!0,this._uploadSize=0,this._bufferSize=0,this._u8Array=null,e.__super.call(this),this.lock=!0}r(e,"laya.webgl.utils.Buffer2D",t);var _=e.prototype;return _.setByteLength=function(t){this._byteLength!==t&&(t<=this._bufferSize||this._resizeBuffer(2*t+256,!0),this._byteLength=t)},_.needSize=function(t){var e=this._byteLength;if(t){var _=this._byteLength+t;_<=this._bufferSize||this._resizeBuffer(_<<1,!0),this._byteLength=_}return e},_._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),V.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this._setGPUMemory(this._buffer.byteLength),this._buffer=this._buffer.slice(0,this._maxsize+64),this._bufferSize=this._buffer.byteLength,this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,$.instance.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this._setGPUMemory(this._uploadSize)),$.instance.bufferSubData(this._bufferType,0,this._buffer)},_._bufferSubData=function(t,e,_){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===_&&(_=0),this._maxsize=Math.max(this._maxsize,this._byteLength),V.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this._setGPUMemory(this._buffer.byteLength),this._buffer=this._buffer.slice(0,this._maxsize+64),this._bufferSize=this._buffer.byteLength,this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,$.instance.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this._setGPUMemory(this._uploadSize)),e||_){var i=this._buffer.slice(e,_);$.instance.bufferSubData(this._bufferType,t,i)}else $.instance.bufferSubData(this._bufferType,t,this._buffer)},_._checkArrayUse=function(){},_._bind_uploadForVAO=function(){return this._upload?(this._upload=!1,this._bindForVAO(),this._bufferData(),!0):!1},_._bind_upload=function(){return this._upload?(this._upload=!1,this.bind(),this._bufferData(),!0):!1},_._bind_subUpload=function(t,e,_){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===_&&(_=0),this._upload?(this._upload=!1,this.bind(),this._bufferSubData(t,e,_),!0):!1},_._resizeBuffer=function(t,e){if(t<this._buffer.byteLength)return this;if(this._setGPUMemory(t),e&&this._buffer&&this._buffer.byteLength>0){var _=new ArrayBuffer(t),i=this._u8Array&&this._u8Array.buffer==this._buffer?this._u8Array:new Uint8Array(this._buffer);this._u8Array=new Uint8Array(_),this._u8Array.set(i,0),this._buffer=_}else this._buffer=new ArrayBuffer(t);return this._checkArrayUse(),this._upload=!0,this._bufferSize=this._buffer.byteLength,this},_.append=function(t){this._upload=!0;var e,_=0;_=t.byteLength,t instanceof Uint8Array?(this._resizeBuffer(this._byteLength+_,!0),e=new Uint8Array(this._buffer,this._byteLength)):t instanceof Uint16Array?(this._resizeBuffer(this._byteLength+_,!0),e=new Uint16Array(this._buffer,this._byteLength)):t instanceof Float32Array&&(this._resizeBuffer(this._byteLength+_,!0),e=new Float32Array(this._buffer,this._byteLength)),e.set(t,0),this._byteLength+=_,this._checkArrayUse()},_.appendU16Array=function(t,e){this._resizeBuffer(this._byteLength+2*e,!0);for(var _=new Uint16Array(this._buffer,this._byteLength,e),i=0;e>i;i++)_[i]=t[i];this._byteLength+=2*e,this._checkArrayUse()},_.appendEx=function(t,e){this._upload=!0;var _,i=0;i=t.byteLength,this._resizeBuffer(this._byteLength+i,!0),_=new e(this._buffer,this._byteLength),_.set(t,0),this._byteLength+=i,this._checkArrayUse()},_.appendEx2=function(t,e,_,i){void 0===i&&(i=1),this._upload=!0;var r,a=0;a=_*i,this._resizeBuffer(this._byteLength+a,!0),r=new e(this._buffer,this._byteLength);var n=0;for(n=0;_>n;n++)r[n]=t[n];this._byteLength+=a,this._checkArrayUse()},_.getBuffer=function(){return this._buffer},_.setNeedUpload=function(){this._upload=!0},_.getNeedUpload=function(){return this._upload},_.upload=function(){var t=this._bind_upload();return $.instance.bindBuffer(this._bufferType,null),34962==this._bufferType&&(Qe._bindedVertexBuffer=null),34963==this._bufferType&&(Qe._bindedIndexBuffer=null),je.activeShader=null,t},_.subUpload=function(t,e,_){void 0===t&&(t=0),void 0===e&&(e=0),void 0===_&&(_=0);var i=this._bind_subUpload();return $.instance.bindBuffer(this._bufferType,null),34962==this._bufferType&&(Qe._bindedVertexBuffer=null),34963==this._bufferType&&(Qe._bindedIndexBuffer=null),je.activeShader=null,i},_._disposeResource=function(){t.prototype._disposeResource.call(this),this._upload=!0,this._uploadSize=0},_.clear=function(){this._byteLength=0,this._upload=!0},a(0,_,"bufferLength",function(){return this._buffer.byteLength}),a(0,_,"byteLength",null,function(t){this.setByteLength(t)}),e.__int__=function(){},e.FLOAT32=4,e.SHORT=2,e}(Qe),__=function(t){function e(t,_,i,r){this._mgrKey=0,void 0===i&&(i=0),void 0===r&&(r=0),e.__super.call(this,i,!1),this._glTextureType=3553,this._width=t,this._height=_,this._depthStencilFormat=r,this._create(t,_)}r(e,"laya.webgl.resource.RenderTexture2D",t);var _=e.prototype;return _._create=function(t,e){var _=$.instance;this._frameBuffer=_.createFramebuffer(),Be.bindTexture(_,this._glTextureType,this._glTexture);var i=this._getGLFormat();if(_.texImage2D(this._glTextureType,0,i,t,e,0,i,5121,null),this._setGPUMemory(t*e*4),_.bindFramebuffer(36160,this._frameBuffer),_.framebufferTexture2D(36160,36064,3553,this._glTexture,0),3!==this._depthStencilFormat)switch(this._depthStencilBuffer=_.createRenderbuffer(),_.bindRenderbuffer(36161,this._depthStencilBuffer),this._depthStencilFormat){case 0:_.renderbufferStorage(36161,33189,t,e),_.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 1:_.renderbufferStorage(36161,36168,t,e),_.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 2:_.renderbufferStorage(36161,34041,t,e),_.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer);break;default:console.log("RenderTexture: unkonw depth format.")}_.bindFramebuffer(36160,null),_.bindRenderbuffer(36161,null),this._setWarpMode(10242,this._wrapModeU),this._setWarpMode(10243,this._wrapModeV),this._setFilterMode(this._filterMode),this._setAnisotropy(this._anisoLevel),this._readyed=!0,this._activeResource()},_.generateMipmap=function(){this._isPot(this.width)&&this._isPot(this.height)?(this._mipmap=!0,$.instance.generateMipmap(this._glTextureType),this._setFilterMode(this._filterMode),this._setGPUMemory(this.width*this.height*4*(1+1/3))):(this._mipmap=!1,this._setGPUMemory(this.width*this.height*4))},_.start=function(){var t=$.instance;$.instance.bindFramebuffer(36160,this._frameBuffer),e._currentActive=this,this._readyed=!0,t.viewport(0,0,this._width,this._height),this._lastWidth=ye.width,this._lastHeight=ye.height,ye.width=this._width,ye.height=this._height,je.activeShader=null
},_.end=function(){$.instance.bindFramebuffer(36160,null),e._currentActive=null,this._readyed=!0},_.restore=function(){var t=$.instance;this._lastRT!=e._currentActive&&($.instance.bindFramebuffer(36160,this._lastRT?this._lastRT._frameBuffer:null),e._currentActive=this._lastRT),this._readyed=!0,t.viewport(0,0,this._lastWidth,this._lastHeight),ye.width=this._lastWidth,ye.height=this._lastHeight,je.activeShader=null},_.clear=function(t,e,_,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===_&&(_=0),void 0===i&&(i=1);var r=$.instance;r.clearColor(t,e,_,i);var a=16384;switch(this._depthStencilFormat){case 33189:a|=256;break;case 36168:a|=1024;break;case 34041:a|=256,a|=1024}r.clear(a)},_.getData=function(t,e,_,i){var r=$.instance;r.bindFramebuffer(36160,this._frameBuffer);var a=36053===r.checkFramebufferStatus(36160);if(!a)return r.bindFramebuffer(36160,null),null;var n=new Uint8Array(this._width*this._height*4),s=this._getGLFormat();return r.readPixels(t,e,_,i,s,5121,n),r.bindFramebuffer(36160,null),n},_._disposeResource=function(){if(this._frameBuffer){var t=$.instance;t.deleteTexture(this._glTexture),t.deleteFramebuffer(this._frameBuffer),t.deleteRenderbuffer(this._depthStencilBuffer),this._glTexture=null,this._frameBuffer=null,this._depthStencilBuffer=null,this._setGPUMemory(0)}},a(0,_,"depthStencilFormat",function(){return this._depthStencilFormat}),a(0,_,"defaulteTexture",function(){return i_.grayTexture}),a(1,e,"currentActive",function(){return e._currentActive},laya.webgl.resource.BaseTexture._$SET_currentActive),e.pushRT=function(){e.rtStack.push({rt:e._currentActive,w:ye.width,h:ye.height})},e.popRT=function(){var t=$.instance,_=e.rtStack.pop();_&&(e._currentActive!=_.rt&&($.instance.bindFramebuffer(36160,_.rt?_.rt._frameBuffer:null),e._currentActive=_.rt),t.viewport(0,0,_.w,_.h),ye.width=_.w,ye.height=_.h)},e._currentActive=null,e.rtStack=[],i(e,["defuv",function(){return this.defuv=[0,0,1,0,1,1,0,1]},"flipyuv",function(){return this.flipyuv=[0,1,1,1,1,0,0,0]}]),e}(Je),i_=function(t){function e(t,_,i,r,a){void 0===t&&(t=0),void 0===_&&(_=0),void 0===i&&(i=1),void 0===r&&(r=!0),void 0===a&&(a=!1),e.__super.call(this,i,r),this._glTextureType=3553,this._width=t,this._height=_,this._canRead=a,this._setWarpMode(10242,this._wrapModeU),this._setWarpMode(10243,this._wrapModeV),this._setFilterMode(this._filterMode),this._setAnisotropy(this._anisoLevel)}r(e,"laya.webgl.resource.Texture2D",t);var i=e.prototype;return i._calcualatesCompressedDataSize=function(t,e,_){switch(t){case 3:case 5:return(e+3>>2)*(_+3>>2)*8;case 4:return(e+3>>2)*(_+3>>2)*16;case 11:case 12:return Math.floor((Math.max(e,8)*Math.max(_,8)*4+7)/8);case 9:case 10:return Math.floor((Math.max(e,16)*Math.max(_,8)*2+7)/8);default:return 0}},i._pharseDDS=function(t){var e=827611204,_=894720068,i=4,r=131072,a=542327876,n=31,s=0,o=1,h=2,u=3,l=4,c=7,f=20,d=21,E=new Int32Array(t,0,n);if(E[s]!=a)throw"Invalid magic number in DDS header";if(!(E[f]&i))throw"Unsupported format, must contain a FourCC code";var A=E[d];switch(this._format){case 3:if(A!==e)throw"the FourCC code is not same with texture format.";break;case 4:if(A!==_)throw"the FourCC code is not same with texture format.";break;default:throw"unknown texture format."}var D=1;if(E[h]&r){if(D=Math.max(1,E[c]),!this._mipmap)throw"the mipmap is not same with Texture2D."}else if(this._mipmap)throw"the mipmap is not same with Texture2D.";var R=E[l],m=E[u];if(this._width!==R||this._height!==m)throw"the width or height is not same with Texture2D.";var T=E[o]+4;this._upLoadCompressedTexImage2D(t,R,m,D,T,0)},i._pharseKTX=function(t){var e=13,_=4,i=7,r=6,a=11,n=12,s=new Uint8Array(t,0,12);if(171!=s[0]||75!=s[1]||84!=s[2]||88!=s[3]||32!=s[4]||49!=s[5]||49!=s[6]||187!=s[7]||13!=s[8]||10!=s[9]||26!=s[10]||10!=s[11])throw"Invalid fileIdentifier in KTX header";var o=new Int32Array(s.buffer,s.length,e),h=o[_],u=this._getGLFormat();switch(this._format){case 5:if(h!==u)throw"the format  is not same with texture format FORMAT_ETC1RGB.";break;default:throw"unknown texture format."}var l=o[a],c=o[r],f=o[i];if(this._width!==c||this._height!==f)throw"the width or height is not same with Texture2D.";var d=64+o[n];this._upLoadCompressedTexImage2D(t,c,f,l,d,4)},i._pharsePVR=function(t){var e=0,_=1,i=2,r=3,a=6,n=55727696,s=13,o=0,h=2,u=6,l=7,c=11,f=12,d=new Int32Array(t,0,s);if(d[o]!=n)throw"Invalid magic number in PVR header";var E=d[h];switch(this._format){case 5:if(E!==a)throw"the format  is not same with texture format FORMAT_ETC1RGB.";break;case 9:if(E!==e)throw"the format  is not same with texture format FORMAT_PVRTCRGB_2BPPV.";break;case 11:if(E!==i)throw"the format  is not same with texture format FORMAT_PVRTCRGB_4BPPV.";break;case 10:if(E!==_)throw"the format  is not same with texture format FORMAT_PVRTCRGBA_2BPPV.";break;case 12:if(E!==r)throw"the format  is not same with texture format FORMAT_PVRTCRGBA_4BPPV.";break;default:throw"unknown texture format."}var A=d[c],D=d[l],R=d[u];if(this._width!==D||this._height!==R)throw"the width or height is not same with Texture2D.";var m=d[f]+52;this._upLoadCompressedTexImage2D(t,D,R,A,m,0)},i._upLoadCompressedTexImage2D=function(t,e,_,i,r,a){var n=$.instance,s=this._glTextureType;Be.bindTexture(n,s,this._glTexture);for(var o=this._getGLFormat(),h=r,u=0;i>u;u++){h+=a;var l=this._calcualatesCompressedDataSize(this._format,e,_),c=new Uint8Array(t,h,l);n.compressedTexImage2D(s,u,o,e,_,0,c),e>>=1,_>>=1,h+=l}var f=h;this._setGPUMemory(f),this._readyed=!0,this._activeResource()},i.loadImageSource=function(t,e){void 0===e&&(e=!1);var _=t.width,i=t.height;this._width=_,this._height=i,this._setWarpMode(10242,this._wrapModeU),this._setWarpMode(10243,this._wrapModeV),this._setFilterMode(this._filterMode);var r=$.instance;Be.bindTexture(r,this._glTextureType,this._glTexture);var a=this._getGLFormat();g.isConchApp?(t.setPremultiplyAlpha(e),r.texImage2D(this._glTextureType,0,6408,6408,5121,t)):(e&&r.pixelStorei(37441,!0),r.texImage2D(this._glTextureType,0,a,a,5121,t),e&&r.pixelStorei(37441,!1)),this._mipmap&&this._isPot(_)&&this._isPot(i)?(r.generateMipmap(this._glTextureType),this._setGPUMemory(_*i*4*(1+1/3))):this._setGPUMemory(_*i*4),this._canRead&&(g.isConchApp?this._pixels=t._nativeObj.getImageData(0,0,_,i):(h.canvas.size(_,i),h.canvas.clear(),h.context.drawImage(t,0,0,_,i),this._pixels=new Uint8Array(h.context.getImageData(0,0,_,i).data.buffer))),this._readyed=!0,this._activeResource()},i.setPixels=function(t,e){if(void 0===e&&(e=0),!t)throw"Texture2D:pixels can't be null.";var _=this._width,i=this._height,r=$.instance,a=this._glTextureType;Be.bindTexture(r,a,this._glTexture);var n=this._getGLFormat();r.texImage2D(a,e,n,_,i,0,n,5121,t),this._mipmap&&this._isPot(_)&&this._isPot(i)?(r.generateMipmap(a),this._setGPUMemory(_*i*4*(1+1/3))):this._setGPUMemory(_*i*4),this._canRead&&(this._pixels=t),this._readyed=!0,this._activeResource()},i.setCompressData=function(t){switch(this._format){case 3:case 4:this._pharseDDS(t);break;case 5:this._pharseKTX(t);break;case 9:case 10:case 11:case 12:this._pharsePVR(t);break;default:throw"Texture2D:unkonwn format."}},i._recoverResource=function(){},i.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},a(0,i,"defaulteTexture",function(){return laya.webgl.resource.Texture2D.grayTexture}),e.__init__=function(){var t=new Uint8Array(3);t[0]=128,t[1]=128,t[2]=128,e.grayTexture=new e(1,1,0,!1,!1),e.grayTexture.setPixels(t),e.grayTexture.lock=!0},e._parse=function(t,_,i){var r=i?new e(i[0],i[1],i[2],i[3],i[4]):new e(0,0);switch(_&&(r.wrapModeU=_.wrapModeU,r.wrapModeV=_.wrapModeV,r.filterMode=_.filterMode,r.anisoLevel=_.anisoLevel),r._format){case 0:case 1:r.loadImageSource(t);break;case 3:case 4:case 5:case 9:case 10:case 11:case 12:r.setCompressData(t);break;default:throw"Texture2D:unkonwn format."}return r},e.load=function(t,e){_.loader.create(t,e,null,"TEXTURE2D")},e.grayTexture=null,e}(Je),r_=function(t){function e(t,_,i,r,a){this._params2dQuick2=null,this._shaderValueWidth=0,this._shaderValueHeight=0,e.__super.call(this,t,_,i,r,a)}r(e,"laya.webgl.shader.d2.Shader2X",t);var _=e.prototype;return _._disposeResource=function(){t.prototype._disposeResource.call(this),this._params2dQuick2=null},_.upload2dQuick2=function(t){this.upload(t,this._params2dQuick2||this._make2dQuick2())},_._make2dQuick2=function(){if(!this._params2dQuick2){this._params2dQuick2=[];for(var t,e=this._params,_=0,i=e.length;i>_;_++)t=e[_],"size"!==t.name&&this._params2dQuick2.push(t)}return this._params2dQuick2},e.create=function(t,_,i,r,a){return new e(t,_,i,r,a)},e}(t_),a_=function(t){function e(t){this._uint16Array=null,void 0===t&&(t=35044),e.__super.call(this),this._bufferUsage=t,this._bufferType=34963,this._buffer=new ArrayBuffer(8)}r(e,"laya.webgl.utils.IndexBuffer2D",t);var _=e.prototype;return _._checkArrayUse=function(){this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},_.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},_._bindForVAO=function(){$.instance.bindBuffer(34963,this._glBuffer)},_.bind=function(){return Qe._bindedIndexBuffer!==this._glBuffer?($.instance.bindBuffer(34963,this._glBuffer),Qe._bindedIndexBuffer=this._glBuffer,!0):!1},_.destory=function(){this._uint16Array=null,this._buffer=null},_.disposeResource=function(){this._disposeResource()},e.create=function(t){return void 0===t&&(t=35044),new e(t)},e}(e_),n_=function(t){function e(t,_){this._floatArray32=null,this._uint32Array=null,this._vertexStride=0,e.__super.call(this),this._vertexStride=t,this._bufferUsage=_,this._bufferType=34962,this._buffer=new ArrayBuffer(8),this._floatArray32=new Float32Array(this._buffer),this._uint32Array=new Uint32Array(this._buffer)}r(e,"laya.webgl.utils.VertexBuffer2D",t);var _=e.prototype;return _.getFloat32Array=function(){return this._floatArray32},_.appendArray=function(t){var e=this._byteLength>>2;this.setByteLength(this._byteLength+4*t.length);var _=this.getFloat32Array();_.set(t,e),this._upload=!0},_._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer)),this._uint32Array&&(this._uint32Array=new Uint32Array(this._buffer))},_.deleteBuffer=function(){this._disposeResource()},_._bindForVAO=function(){$.instance.bindBuffer(34962,this._glBuffer)},_.bind=function(){return Qe._bindedVertexBuffer!==this._glBuffer?($.instance.bindBuffer(34962,this._glBuffer),Qe._bindedVertexBuffer=this._glBuffer,!0):!1},_.destroy=function(){laya.resource.Resource.prototype.destroy.call(this),this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},a(0,_,"vertexStride",function(){return this._vertexStride}),e.create=function(t,_){return void 0===_&&(_=35048),new e(t,_)},e}(e_);_.__init([le,ne,Ie,Le])}(window,document,Laya);
!function(t,e,i){var a=(i.un,i.uns,i.static),r=i.class,s=i.getset,n=i.__newvec,h=laya.maths.Bezier,l=laya.utils.Browser,o=laya.utils.Byte,u=(laya.Const,laya.events.Event,laya.events.EventDispatcher),c=laya.display.Graphics,_=laya.utils.Handler,p=laya.net.Loader,d=laya.maths.MathUtil,f=laya.maths.Matrix,m=(laya.display.Node,laya.maths.Rectangle),y=laya.renders.Render,x=laya.resource.Resource,g=(laya.utils.RunDriver,laya.display.Sprite),v=laya.utils.Stat,D=laya.resource.Texture,M=(laya.utils.Timer,laya.net.URL,laya.utils.Utils),I=function(){function t(){this.nodes=null,this.name=null,this.playTime=0/0,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return r(t,"laya.ani.AnimationContent"),t}(),b=function(){function t(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=0/0,this.extenData=null,this.dataOffset=0}return r(t,"laya.ani.AnimationNodeContent"),t}(),A=function(){function t(){}return r(t,"laya.ani.AnimationParser01"),t.parse=function(t,e){var i=e.__getBuffer(),a=0,r=0,s=0,n=0,h=0,l=0,u=0,c=e.readUTFString();t._aniClassName=c;var _,p=e.readUTFString().split("\n"),d=e.getUint8(),f=e.getUint32(),m=e.getUint32();f>0&&(_=i.slice(f,m));var y=new o(_);for(m>0&&(t._publicExtData=i.slice(m,i.byteLength)),t._useParent=!!e.getUint8(),t._anis.length=d,a=0;d>a;a++){var x=t._anis[a]=new I;x.nodes=new Array;var g=x.name=p[e.getUint16()];t._aniMap[g]=a,x.bone3DMap={},x.playTime=e.getFloat32();var v=x.nodes.length=e.getUint8();for(x.totalKeyframeDatasLength=0,r=0;v>r;r++){var D=x.nodes[r]=new b;D.childs=[];var M=e.getInt16();M>=0&&(D.name=p[M],x.bone3DMap[D.name]=r),D.keyFrame=new Array,D.parentIndex=e.getInt16(),D.parent=-1==D.parentIndex?null:x.nodes[D.parentIndex],D.lerpType=e.getUint8();var A=e.getUint32();y.pos=A;var T=D.keyframeWidth=y.getUint16();if(x.totalKeyframeDatasLength+=T,0===D.lerpType||1===D.lerpType)for(D.interpolationMethod=[],D.interpolationMethod.length=T,s=0;T>s;s++)D.interpolationMethod[s]=Z.interpolation[y.getUint8()];null!=D.parent&&D.parent.childs.push(D);var S=e.getUint16();S>0&&(D.extenData=i.slice(e.pos,e.pos+S),e.pos+=S);var C=e.getUint16();D.keyFrame.length=C;var w,F=0;for(s=0,n=C;n>s;s++){if(w=D.keyFrame[s]=new z,w.duration=e.getFloat32(),w.startTime=F,2===D.lerpType){w.interpolationData=[];var k=e.getUint8(),P=0;switch(P=e.getFloat32()){case 254:for(w.interpolationData.length=T,u=0;T>u;u++)w.interpolationData[u]=0;break;case 255:for(w.interpolationData.length=T,u=0;T>u;u++)w.interpolationData[u]=5;break;default:for(w.interpolationData.push(P),l=1;k>l;l++)w.interpolationData.push(e.getFloat32())}}for(w.data=new Float32Array(T),w.dData=new Float32Array(T),w.nextData=new Float32Array(T),h=0;T>h;h++)w.data[h]=e.getFloat32(),w.data[h]>-1e-8&&w.data[h]<1e-8&&(w.data[h]=0);F+=w.duration}w.startTime=x.playTime,D.playTime=x.playTime,t._calculateKeyFrame(D,C,T)}}},t}(),T=function(){function t(){}return r(t,"laya.ani.AnimationParser02"),t.READ_DATA=function(){t._DATA.offset=t._reader.getUint32(),t._DATA.size=t._reader.getUint32()},t.READ_BLOCK=function(){for(var e=t._BLOCK.count=t._reader.getUint16(),i=t._BLOCK.blockStarts=[],a=t._BLOCK.blockLengths=[],r=0;e>r;r++)i.push(t._reader.getUint32()),a.push(t._reader.getUint32())},t.READ_STRINGS=function(){var e=t._reader.getUint32(),i=t._reader.getUint16(),a=t._reader.pos;t._reader.pos=e+t._DATA.offset;for(var r=0;i>r;r++)t._strings[r]=t._reader.readUTFString();t._reader.pos=a},t.parse=function(e,i){t._templet=e,t._reader=i;i.__getBuffer();t.READ_DATA(),t.READ_BLOCK(),t.READ_STRINGS();for(var a=0,r=t._BLOCK.count;r>a;a++){var s=i.getUint16(),n=t._strings[s],h=t["READ_"+n];if(null==h)throw new Error("model file err,no this function:"+s+" "+n);h.call()}},t.READ_ANIMATIONS=function(){var e=t._reader,i=e.__getBuffer(),a=0,r=0,s=0,n=0,h=e.getUint16(),l=[];for(l.length=h,a=0;h>a;a++)l[a]=Z.interpolation[e.getByte()];var o=e.getUint8();for(t._templet._anis.length=o,a=0;o>a;a++){var u=t._templet._anis[a]={};u.nodes=new Array;var c=u.name=t._strings[e.getUint16()];t._templet._aniMap[c]=a,u.bone3DMap={},u.playTime=e.getFloat32();var _=u.nodes.length=e.getInt16();for(u.totalKeyframeDatasLength=0,r=0;_>r;r++){var p=u.nodes[r]={};p.keyframeWidth=h,p.childs=[];var d=e.getUint16();d>=0&&(p.name=t._strings[d],u.bone3DMap[p.name]=r),p.keyFrame=new Array,p.parentIndex=e.getInt16(),p.parent=-1==p.parentIndex?null:u.nodes[p.parentIndex],u.totalKeyframeDatasLength+=h,p.interpolationMethod=l,null!=p.parent&&p.parent.childs.push(p);var f=e.getUint16();p.keyFrame.length=f;var m=null,y=null;for(s=0,n=f;n>s;s++){m=p.keyFrame[s]={},m.startTime=e.getFloat32(),y&&(y.duration=m.startTime-y.startTime),m.dData=new Float32Array(h),m.nextData=new Float32Array(h);var x=t._DATA.offset,g=e.getUint32(),v=4*h,D=i.slice(x+g,x+g+v);m.data=new Float32Array(D),y=m}m.duration=0,p.playTime=u.playTime,t._templet._calculateKeyFrame(p,f,h)}}},t._templet=null,t._reader=null,t._strings=[],a(t,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),t}(),S=(function(){function t(){}return r(t,"laya.ani.AnimationState"),t.stopped=0,t.paused=1,t.playing=2,t}(),function(){function t(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=0/0,this.resultRotation=0/0,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new X,this.resultMatrix=new f,this._children=[]}r(t,"laya.ani.bone.Bone");var e=t.prototype;return e.setTempMatrix=function(t){this._tempMatrix=t;var e,i=0,a=0;for(i=0,a=this._children.length;a>i;i++)e=this._children[i],e.setTempMatrix(this._tempMatrix)},e.update=function(t){this.rotation=this.transform.skX;var e;if(t)e=this.resultTransform.getMatrix(),f.mul(e,t,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)e=this.resultTransform.getMatrix(),f.mul(e,this.parentBone.resultMatrix,this.resultMatrix);else{var i=this.parentBone,a=0/0,r=0/0,s=0/0,n=this.parentBone.resultMatrix;e=this.resultTransform.getMatrix();var h=n.a*e.tx+n.c*e.ty+n.tx,l=n.b*e.tx+n.d*e.ty+n.ty,o=new f;this.inheritRotation?(a=Math.atan2(i.resultMatrix.b,i.resultMatrix.a),r=Math.cos(a),s=Math.sin(a),o.setTo(r,s,-s,r,0,0),f.mul(this._tempMatrix,o,f.TEMP),f.TEMP.copyTo(o),e=this.resultTransform.getMatrix(),f.mul(e,o,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI),this.resultMatrix.tx=h,this.resultMatrix.ty=l):this.inheritScale?(e=this.resultTransform.getMatrix(),f.TEMP.identity(),f.TEMP.d=this.d,f.mul(e,f.TEMP,this.resultMatrix),this.resultMatrix.tx=h,this.resultMatrix.ty=l):(e=this.resultTransform.getMatrix(),f.TEMP.identity(),f.TEMP.d=this.d,f.mul(e,f.TEMP,this.resultMatrix),this.resultMatrix.tx=h,this.resultMatrix.ty=l)}else e=this.resultTransform.getMatrix(),e.copyTo(this.resultMatrix);var u,c=0,_=0;for(c=0,_=this._children.length;_>c;c++)u=this._children[c],u.update()},e.updateChild=function(){var t,e=0,i=0;for(e=0,i=this._children.length;i>e;e++)t=this._children[e],t.update()},e.setRotation=function(t){this._sprite&&(this._sprite.rotation=180*t/Math.PI)},e.updateDraw=function(e,a){(!t.ShowBones||t.ShowBones[this.name])&&(this._sprite?(this._sprite.x=e+this.resultMatrix.tx,this._sprite.y=a+this.resultMatrix.ty):(this._sprite=new g,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),i.stage.addChild(this._sprite),this._sprite.x=e+this.resultMatrix.tx,this._sprite.y=a+this.resultMatrix.ty));var r,s=0,n=0;for(s=0,n=this._children.length;n>s;s++)r=this._children[s],r.updateDraw(e,a)},e.addChild=function(t){this._children.push(t),t.parentBone=this},e.findBone=function(t){if(this.name==t)return this;var e,i,a=0,r=0;for(a=0,r=this._children.length;r>a;a++)if(e=this._children[a],i=e.findBone(t))return i;return null},e.localToWorld=function(t){var e=t[0],i=t[1];t[0]=e*this.resultMatrix.a+i*this.resultMatrix.c+this.resultMatrix.tx,t[1]=e*this.resultMatrix.b+i*this.resultMatrix.d+this.resultMatrix.ty},t.ShowBones={},t}()),C=function(){function t(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null,this._preGraphicVerticle=null,this._preGraphicMatrix=null}r(t,"laya.ani.bone.BoneSlot");var e=t.prototype;return e.showSlotData=function(t,e){void 0===e&&(e=!0),this.currSlotData=t,e&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},e.showDisplayByName=function(t){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(t))},e.replaceDisplayByName=function(t,e){if(this.currSlotData){var i=0;i=this.currSlotData.getDisplayByName(t);var a=0;a=this.currSlotData.getDisplayByName(e),this.replaceDisplayByIndex(i,a)}},e.replaceDisplayByIndex=function(t,e){this.currSlotData&&(this._replaceDic[t]=e,this.displayIndex==t&&this.showDisplayByIndex(t))},e.showDisplayByIndex=function(t){if(null!=this._replaceDic[t]&&(t=this._replaceDic[t]),this.currSlotData&&t>-1&&t<this.currSlotData.displayArr.length){if(this.displayIndex=t,this.currDisplayData=this.currSlotData.displayArr[t],this.currDisplayData){var e=this.currDisplayData.name;this.currTexture=this.templet.getTexture(e),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},e.replaceSkin=function(t){this._diyTexture=t,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},e.setParentMatrix=function(t){this._parentMatrix=t},e.getSaveVerticle=function(e){return t.useSameMatrixAndVerticle&&this._preGraphicVerticle&&t.isSameArr(e,this._preGraphicVerticle)?e=this._preGraphicVerticle:(e=M.copyArray([],e),this._preGraphicVerticle=e),e},e.getSaveMatrix=function(e){if(t.useSameMatrixAndVerticle&&this._preGraphicMatrix&&t.isSameMatrix(e,this._preGraphicMatrix))e=this._preGraphicMatrix;else{var i=e.clone();e=i,this._preGraphicMatrix=e}return e},e.draw=function(e,i,a,r){if(void 0===a&&(a=!1),void 0===r&&(r=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var s=this.currTexture;this._diyTexture&&(s=this._diyTexture);var n;switch(this.currDisplayData.type){case 0:if(e){var h=this.getDisplayMatrix();if(this._parentMatrix){var l=!1;if(h){f.mul(h,this._parentMatrix,f.TEMP);var o;if(a?(null==this._resultMatrix&&(this._resultMatrix=new f),o=this._resultMatrix):o=t._tempResultMatrix,!y.isWebGL&&!y.isConchApp&&this.currDisplayData.uvs||(y.isWebGL||y.isConchApp)&&this._diyTexture&&this.currDisplayData.uvs){var u=t._tempMatrix;u.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(u.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(l=!0,u.rotate(-Math.PI/2)),f.mul(u,f.TEMP,o)}else f.TEMP.copyTo(o);a||(o=this.getSaveMatrix(o)),o._checkTransform(),l?e.drawTexture(s,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,o):e.drawTexture(s,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,o)}}}break;case 1:if(a?(null==this._skinSprite&&(this._skinSprite=t.createSkinMesh()),n=this._skinSprite):n=t.createSkinMesh(),null==n)return;var c;if(null==this.currDisplayData.bones){var _=this.currDisplayData.weights;this.deformData&&(_=this.deformData);var p;this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=G.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=G.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),p=this._curDiyUV):p=this.currDisplayData.uvs,this._mVerticleArr=_;{this.currDisplayData.triangles.length/3}c=this.currDisplayData.triangles,this.deformData&&(a||(this._mVerticleArr=this.getSaveVerticle(this._mVerticleArr))),n.init2(s,c,this._mVerticleArr,p);var d=this.getDisplayMatrix();if(this._parentMatrix&&d){f.mul(d,this._parentMatrix,f.TEMP);var m;a?(null==this._resultMatrix&&(this._resultMatrix=new f),m=this._resultMatrix):m=t._tempResultMatrix,f.TEMP.copyTo(m),a||(m=this.getSaveMatrix(m)),n.transform=m}}else this.skinMesh(i,n,r);e.drawSkin(n);break;case 2:if(a?(null==this._skinSprite&&(this._skinSprite=t.createSkinMesh()),n=this._skinSprite):n=t.createSkinMesh(),null==n)return;this.skinMesh(i,n,r),e.drawSkin(n);break;case 3:}}},e.skinMesh=function(e,i,a){var r,s=this.currTexture,n=this.currDisplayData.bones;this._diyTexture?(s=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=G.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=G.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),r=this._curDiyUV):r=this.currDisplayData.uvs;var h,l,o,u=this.currDisplayData.weights,c=this.currDisplayData.triangles,_=0,p=0,d=0,f=0/0,m=0/0,y=0,x=0,g=0,v=0;if(t._tempVerticleArr.length=0,o=t._tempVerticleArr,this.deformData&&this.deformData.length>0){var D=0;for(g=0,v=n.length;v>g;){for(d=n[g++]+g,_=0,p=0;d>g;g++)l=e[n[g]],f=u[y]+this.deformData[D++],m=u[y+1]+this.deformData[D++],x=u[y+2],_+=(f*l.a+m*l.c+l.tx)*x,p+=(f*l.b+m*l.d+l.ty)*x,y+=3;o.push(_,p)}}else for(g=0,v=n.length;v>g;){for(d=n[g++]+g,_=0,p=0;d>g;g++)l=e[n[g]],f=u[y],m=u[y+1],x=u[y+2],_+=(f*l.a+m*l.c+l.tx)*x,p+=(f*l.b+m*l.d+l.ty)*x,y+=3;o.push(_,p)}this._mVerticleArr=o,h=c,this._mVerticleArr=this.getSaveVerticle(this._mVerticleArr),i.init2(s,h,this._mVerticleArr,r)},e.drawBonePoint=function(t){t&&this._parentMatrix&&t.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},e.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},e.getMatrix=function(){return this._resultMatrix},e.copy=function(){var e=new t;return e.type="copy",e.name=this.name,e.attachmentName=this.attachmentName,e.srcDisplayIndex=this.srcDisplayIndex,e.parent=this.parent,e.displayIndex=this.displayIndex,e.templet=this.templet,e.currSlotData=this.currSlotData,e.currTexture=this.currTexture,e.currDisplayData=this.currDisplayData,e},t.createSkinMesh=function(){return new Q},t.isSameArr=function(t,e){if(t.length!=e.length)return!1;var i=0,a=0;for(a=t.length,i=0;a>i;i++)if(t[i]!=e[i])return!1;return!0},t.isSameMatrix=function(t,e){return t.a==e.a&&t.b==e.b&&t.c==e.c&&t.d==e.d&&Math.abs(t.tx-e.tx)<1e-5&&Math.abs(t.ty-e.ty)<1e-5},t.useSameMatrixAndVerticle=!0,t._tempVerticleArr=[],a(t,["_tempMatrix",function(){return this._tempMatrix=new f},"_tempResultMatrix",function(){return this._tempResultMatrix=new f}]),t}(),w=function(){function t(){this.texture=null,this.uvs=[0,0,1,0,1,1,0,1],this.vertices=[0,0,100,0,100,100,0,100],this.indexes=[0,1,3,3,1,2],this.uvTransform=null,this.useUvTransform=!1,this.canvasPadding=1}r(t,"laya.ani.bone.canvasmesh.MeshData");var e=t.prototype;return e.getBounds=function(){return m._getWrapRec(this.vertices)},t}(),F=function(){function t(){this.skinName=null,this.deformSlotDataList=[]}return r(t,"laya.ani.bone.DeformAniData"),t}(),k=function(){function t(){this.deformSlotDisplayList=[]}return r(t,"laya.ani.bone.DeformSlotData"),t}(),P=function(){function t(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}r(t,"laya.ani.bone.DeformSlotDisplayData");var e=t.prototype;return e.binarySearch1=function(t,e){var i=0,a=t.length-2;if(0==a)return 1;for(var r=a>>>1;;){if(t[Math.floor(r+1)]<=e?i=r+1:a=r,i==a)return i+1;r=i+a>>>1}return 0},e.apply=function(t,e,i){if(void 0===i&&(i=1),t+=.05,!(this.timeList.length<=0)){var a=0,r=this.timeList[0];if(!(r>t)){var s=this.vectices[0].length,n=[],h=this.binarySearch1(this.timeList,t);if(this.frameIndex=h,t>=this.timeList[this.timeList.length-1]){var l=this.vectices[this.vectices.length-1];if(1>i)for(a=0;s>a;a++)n[a]+=(l[a]-n[a])*i;else for(a=0;s>a;a++)n[a]=l[a];return this.deformData=n,void 0}var o=(this.tweenKeyList[this.frameIndex],this.vectices[this.frameIndex-1]),u=this.vectices[this.frameIndex],c=this.timeList[this.frameIndex-1],_=this.timeList[this.frameIndex];i=this.tweenKeyList[h-1]?(t-c)/(_-c):0;var p=0/0;for(a=0;s>a;a++)p=o[a],n[a]=p+(u[a]-p)*i;this.deformData=n}}},t}(),U=function(){function t(){this.time=0/0,this.drawOrder=[]}return r(t,"laya.ani.bone.DrawOrderData"),t}(),B=function(){function t(){this.name=null,this.intValue=0,this.floatValue=0/0,this.stringValue=null,this.time=0/0}return r(t,"laya.ani.bone.EventData"),t}(),N=function(){function t(t,e){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=0/0,this.bendDirection=0/0,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=t,this._targetBone=e[t.targetBoneIndex],this.isSpine=t.isSpine,null==this._bones&&(this._bones=[]),this._bones.length=0;for(var i=0,a=t.boneIndexs.length;a>i;i++)this._bones.push(e[t.boneIndexs[i]]);this.name=t.name,this.mix=t.mix,this.bendDirection=t.bendDirection}r(t,"laya.ani.bone.IkConstraint");var e=t.prototype;return e.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},e._applyIk1=function(e,i,a,r){var s=e.parentBone,n=1/(s.resultMatrix.a*s.resultMatrix.d-s.resultMatrix.b*s.resultMatrix.c),h=i-s.resultMatrix.tx,l=a-s.resultMatrix.ty,o=(h*s.resultMatrix.d-l*s.resultMatrix.c)*n-e.transform.x,u=(l*s.resultMatrix.a-h*s.resultMatrix.b)*n-e.transform.y,c=Math.atan2(u,o)*t.radDeg-0-e.transform.skX;e.transform.scX<0&&(c+=180),c>180?c-=360:-180>c&&(c+=360),e.transform.skX=e.transform.skY=e.transform.skX+c*r,e.update()},e.updatePos=function(t,e){this._sp&&this._sp.pos(t,e)},e._applyIk2=function(e,a,r,s,n,h){if(0!=h){var l=e.resultTransform.x,o=e.resultTransform.y,u=e.transform.scX,c=e.transform.scY,_=a.transform.scX,p=0,d=0,f=0;0>u?(u=-u,p=180,f=-1):(p=0,f=1),0>c&&(c=-c,f=-f),0>_?(_=-_,d=180):d=0;var m=a.resultTransform.x,y=0/0,x=0/0,v=0/0,D=e.resultMatrix.a,M=e.resultMatrix.c,I=e.resultMatrix.b,b=e.resultMatrix.d,A=Math.abs(u-c)<=1e-4;A?(y=a.resultTransform.y,x=D*m+M*y+e.resultMatrix.tx,v=I*m+b*y+e.resultMatrix.ty):(y=0,x=D*m+e.resultMatrix.tx,v=I*m+e.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new g,i.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(r,s,15,"#ffff00"),this._sp.graphics.drawCircle(x,v,15,"#ff00ff")),e.setRotation(Math.atan2(v-e.resultMatrix.ty,x-e.resultMatrix.tx));var T=e.parentBone;D=T.resultMatrix.a,M=T.resultMatrix.c,I=T.resultMatrix.b,b=T.resultMatrix.d;var S=1/(D*b-M*I),C=r-T.resultMatrix.tx,w=s-T.resultMatrix.ty,F=(C*b-w*M)*S-l,k=(w*D-C*I)*S-o;C=x-T.resultMatrix.tx,w=v-T.resultMatrix.ty;var P=(C*b-w*M)*S-l,U=(w*D-C*I)*S-o,B=Math.sqrt(P*P+U*U),N=a.length*_,L=0/0,R=0/0;if(A){N*=u;var O=(F*F+k*k-B*B-N*N)/(2*B*N);-1>O?O=-1:O>1&&(O=1),R=Math.acos(O)*n,D=B+N*O,M=N*Math.sin(R),L=Math.atan2(k*D-F*M,F*D+k*M)}else{D=u*N,M=c*N;var E=D*D,V=M*M,Y=F*F+k*k,W=Math.atan2(k,F);I=V*B*B+E*Y-E*V;var K=-2*V*B,X=V-E;if(b=K*K-4*X*I,b>0){var G=Math.sqrt(b);0>K&&(G=-G),G=-(K+G)/2;var z=G/X,q=I/G,H=Math.abs(z)<Math.abs(q)?z:q;Y>=H*H&&(w=Math.sqrt(Y-H*H)*n,L=W-Math.atan2(w,H),R=Math.atan2(w/c,(H-B)/u))}var $=0,Q=Number.MAX_VALUE,Z=0,j=0,J=0,te=0,ee=0,ie=0;C=B+D,b=C*C,b>te&&(J=0,te=b,ee=C),C=B-D,b=C*C,Q>b&&($=Math.PI,Q=b,Z=C);var ae=Math.acos(-D*B/(E-V));C=D*Math.cos(ae)+B,w=M*Math.sin(ae),b=C*C+w*w,Q>b&&($=ae,Q=b,Z=C,j=w),b>te&&(J=ae,te=b,ee=C,ie=w),(Q+te)/2>=Y?(L=W-Math.atan2(j*n,Z),R=$*n):(L=W-Math.atan2(ie*n,ee),R=J*n)}var re=Math.atan2(y,m)*f,se=e.resultTransform.skX;L=(L-re)*t.radDeg+p-se,L>180?L-=360:-180>L&&(L+=360),e.resultTransform.x=l,e.resultTransform.y=o,e.resultTransform.skX=e.resultTransform.skY=se+L*h,se=a.resultTransform.skX,se%=360,R=((R+re)*t.radDeg-0)*f+d-se,R>180?R-=360:-180>R&&(R+=360),a.resultTransform.x=m,a.resultTransform.y=y,a.resultTransform.skX=a.resultTransform.skY=a.resultTransform.skY+R*h,e.update()}},e._applyIk3=function(e,a,r,s,n,h){if(0!=h){var l=0/0,o=0/0,u=a.resultMatrix.a*a.length,c=a.resultMatrix.b*a.length,_=u*u+c*c,p=Math.sqrt(_),d=e.resultMatrix.tx,f=e.resultMatrix.ty,m=a.resultMatrix.tx,y=a.resultMatrix.ty,x=m-d,v=y-f,D=x*x+v*v,M=Math.sqrt(D);x=r-e.resultMatrix.tx,v=s-e.resultMatrix.ty;var I=x*x+v*v,b=Math.sqrt(I);if(b>=p+M||M>=b+p||p>=b+M){var A=0/0;A=b>=p+M?1:-1,m=d+A*(r-d)*M/b,y=f+A*(s-f)*M/b}else{var T=(D-_+I)/(2*I),S=Math.sqrt(D-T*T*I)/b,C=d+x*T,w=f+v*T,F=-v*S,k=x*S;n>0?(m=C-F,y=w-k):(m=C+F,y=w+k)}l=m,o=y,this.isDebug&&(this._sp||(this._sp=new g,i.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(d,f,15,"#ff00ff"),this._sp.graphics.drawCircle(r,s,15,"#ffff00"),this._sp.graphics.drawCircle(l,o,15,"#ff00ff"));var P=0/0;P=Math.atan2(o-e.resultMatrix.ty,l-e.resultMatrix.tx),e.setRotation(P);var U;U=t._tempMatrix,U.identity(),U.rotate(P),U.scale(e.resultMatrix.getScaleX(),e.resultMatrix.getScaleY()),U.translate(e.resultMatrix.tx,e.resultMatrix.ty),U.copyTo(e.resultMatrix),e.updateChild();var B=0/0;B=Math.atan2(s-o,r-l),a.setRotation(B);var N;N=t._tempMatrix,N.identity(),N.rotate(B),N.scale(a.resultMatrix.getScaleX(),a.resultMatrix.getScaleY()),N.translate(l,o),U.copyTo(a.resultMatrix),a.updateChild()}},a(t,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new f}]),t}(),L=function(){function t(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return r(t,"laya.ani.bone.IkConstraintData"),t}(),R=function(){function t(t,e){this.target=null,this.data=null,this.bones=null,this.position=0/0,this.spacing=0/0,this.rotateMix=0/0,this.translateMix=0/0,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=t,this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.bones=[];for(var i=this.data.bones,a=0,r=i.length;r>a;a++)this.bones.push(e[i[a]])}r(t,"laya.ani.bone.PathConstraint");var e=t.prototype;return e.apply=function(t,e){if(this.target){var i=this.translateMix,a=this.translateMix,r=a>0,s=this.data.spacingMode,n="length"==s,h=this.data.rotateMode,l="tangent"==h,o="chainScale"==h,u=[],c=this.bones.length,_=l?c:c+1,p=[];this._spaces=p,p[0]=this.position;var d=this.spacing;if(o||n)for(var f=0,m=_-1;m>f;){var y=this.bones[f],x=y.length,g=x*y.resultMatrix.a,v=x*y.resultMatrix.b;x=Math.sqrt(g*g+v*v),o&&(u[f]=x),p[++f]=n?Math.max(0,x+d):d}else for(f=1;_>f;f++)p[f]=d;var D=this.computeWorldPositions(this.target,t,e,_,l,"percent"==this.data.positionMode,"percent"==s);if(this._debugKey){for(f=0;f<D.length;f++)e.drawCircle(D[f++],D[f++],5,"#00ff00");var M=[];for(f=0;f<D.length;f++)M.push(D[f++],D[f++]);e.drawLines(0,0,M,"#ff0000")}var I=D[0],b=D[1],A=this.data.offsetRotation,T="chain"==h&&0==A,S=0/0;for(f=0,S=3;c>f;f++,S+=3){y=this.bones[f],y.resultMatrix.tx+=(I-y.resultMatrix.tx)*i,y.resultMatrix.ty+=(b-y.resultMatrix.ty)*i,g=D[S],v=D[S+1];var C=g-I,w=v-b;if(o&&(x=u[f],0!=x)){var F=(Math.sqrt(C*C+w*w)/x-1)*a+1;y.resultMatrix.a*=F,y.resultMatrix.c*=F}if(I=g,b=v,r){var k=y.resultMatrix.a,P=y.resultMatrix.c,U=y.resultMatrix.b,B=y.resultMatrix.d,N=0/0,L=0/0,R=0/0;N=l?D[S-1]:0==p[f+1]?D[S+2]:Math.atan2(w,C),N-=Math.atan2(U,k)-A/180*Math.PI,T&&(L=Math.cos(N),R=Math.sin(N),x=y.length,I+=(x*(L*k-R*U)-C)*a,b+=(x*(R*k+L*U)-w)*a),N>Math.PI?N-=2*Math.PI:N<-Math.PI&&(N+=2*Math.PI),N*=a,L=Math.cos(N),R=Math.sin(N),y.resultMatrix.a=L*k-R*U,y.resultMatrix.c=L*P-R*B,y.resultMatrix.b=R*k+L*U,y.resultMatrix.d=R*P+L*B}}}},e.computeWorldVertices2=function(e,i,a,r,s,n){var h,l,o=e.currDisplayData.bones,u=e.currDisplayData.weights,c=e.currDisplayData.triangles,_=0,p=0,d=0,f=0,m=0,y=0,x=0,g=0,v=0,D=0,M=0;if(null!=o){for(_=0;a>_;_+=2)f=o[p],p+=f+1,d+=f;var I=i;for(m=n,y=3*d;r>m;m+=2){for(x=0,g=0,f=o[p++],f+=p;f>p;p++,y+=3){h=I[o[p]].resultMatrix,v=u[y],D=u[y+1];var b=u[y+2];x+=(v*h.a+D*h.c+h.tx)*b,g+=(v*h.b+D*h.d+h.ty)*b}s[m]=x,s[m+1]=g}}else{c||(c=u),e.deformData&&(c=e.deformData);var A;if(A=e.parent,i)for(M=i.length,_=0;M>_;_++)if(i[_].name==A){l=i[_];break}var T;l&&(T=l.resultMatrix),T||(T=t._tempMt);var S=T.tx,C=T.ty,w=T.a,F=T.b,k=T.c,P=T.d;for(l&&(P*=l.d),p=a,m=n;r>m;p+=2,m+=2)v=c[p],D=c[p+1],s[m]=v*w+D*F+S,s[m+1]=-(v*k+D*P+C)}},e.computeWorldPositions=function(t,e,i,a,r,s,n){var h=(t.currDisplayData.bones,t.currDisplayData.weights,t.currDisplayData.triangles,[]),l=0,o=t.currDisplayData.verLen,u=this.position,c=this._spaces,_=[],p=[],d=!1,f=o/6,m=-1,y=0/0,x=0,g=0,v=0/0,D=0/0,M=0/0,I=0/0;if(d)o+=2,_[o-2]=_[0],_[o-1]=_[1];else{if(f--,o-=4,this.computeWorldVertices2(t,e,2,o,h,0),this._debugKey)for(l=0;l<h.length;)i.drawCircle(h[l++],h[l++],10,"#ff0000");_=h}this._curves.length=f;var b=this._curves;y=0;var A=_[0],T=_[1],S=0,C=0,w=0,F=0,k=0,P=0,U=0/0,B=0/0,N=0/0,L=0/0,R=0/0,O=0/0,E=0/0,V=0/0,Y=0;for(l=0,Y=2;f>l;l++,Y+=6)S=_[Y],C=_[Y+1],w=_[Y+2],F=_[Y+3],k=_[Y+4],P=_[Y+5],U=.1875*(A-2*S+w),B=.1875*(T-2*C+F),N=.09375*(3*(S-w)-A+k),L=.09375*(3*(C-F)-T+P),R=2*U+N,O=2*B+L,E=.75*(S-A)+U+.16666667*N,V=.75*(C-T)+B+.16666667*L,y+=Math.sqrt(E*E+V*V),E+=R,V+=O,R+=N,O+=L,y+=Math.sqrt(E*E+V*V),E+=R,V+=O,y+=Math.sqrt(E*E+V*V),E+=R+N,V+=O+L,y+=Math.sqrt(E*E+V*V),b[l]=y,A=k,T=P;if(s&&(u*=y),n)for(l=0;a>l;l++)c[l]*=y;var W=this._segments,K=0,X=0;for(l=0,x=0,g=0,X=0;a>l;l++,x+=3){if(D=c[l],u+=D,v=u,d)v%=y,0>v&&(v+=y),g=0;else{if(0>v){this.addBeforePosition(v,_,0,p,x);continue}if(v>y){this.addAfterPosition(v-y,_,o-4,p,x);continue}}for(;;g++)if(I=b[g],!(v>I)){0==g?v/=I:(M=b[g-1],v=(v-M)/(I-M));break}if(g!=m){m=g;var G=6*g;for(A=_[G],T=_[G+1],S=_[G+2],C=_[G+3],w=_[G+4],F=_[G+5],k=_[G+6],P=_[G+7],U=.03*(A-2*S+w),B=.03*(T-2*C+F),N=.006*(3*(S-w)-A+k),L=.006*(3*(C-F)-T+P),R=2*U+N,O=2*B+L,E=.3*(S-A)+U+.16666667*N,V=.3*(C-T)+B+.16666667*L,K=Math.sqrt(E*E+V*V),W[0]=K,G=1;8>G;G++)E+=R,V+=O,R+=N,O+=L,K+=Math.sqrt(E*E+V*V),W[G]=K;E+=R,V+=O,K+=Math.sqrt(E*E+V*V),W[8]=K,E+=R+N,V+=O+L,K+=Math.sqrt(E*E+V*V),W[9]=K,X=0}for(v*=K;;X++)if(I=W[X],!(v>I)){0==X?v/=I:(M=W[X-1],v=X+(v-M)/(I-M));break}this.addCurvePosition(.1*v,A,T,S,C,w,F,k,P,p,x,r||l>0&&0==D)}return p},e.addBeforePosition=function(t,e,i,a,r){var s=e[i],n=e[i+1],h=e[i+2]-s,l=e[i+3]-n,o=Math.atan2(l,h);a[r]=s+t*Math.cos(o),a[r+1]=n+t*Math.sin(o),a[r+2]=o},e.addAfterPosition=function(t,e,i,a,r){var s=e[i+2],n=e[i+3],h=s-e[i],l=n-e[i+1],o=Math.atan2(l,h);a[r]=s+t*Math.cos(o),a[r+1]=n+t*Math.sin(o),a[r+2]=o},e.addCurvePosition=function(t,e,i,a,r,s,n,h,l,o,u,c){0==t&&(t=1e-4);var _=t*t,p=_*t,d=1-t,f=d*d,m=f*d,y=d*t,x=3*y,g=d*x,v=x*t,D=e*m+a*g+s*v+h*p,M=i*m+r*g+n*v+l*p;o[u]=D,o[u+1]=M,o[u+2]=c?Math.atan2(M-(i*f+r*y*2+n*_),D-(e*f+a*y*2+s*_)):0},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,a(t,["_tempMt",function(){return this._tempMt=new f}]),t}(),O=function(){function t(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=0/0,this.position=0/0,this.spacing=0/0,this.rotateMix=0/0,this.translateMix=0/0,this.bones=[]}return r(t,"laya.ani.bone.PathConstraintData"),t}(),E=function(){function t(){this.name=null,this.slotArr=[]}return r(t,"laya.ani.bone.SkinData"),t}(),V=function(){function t(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=0/0,this.height=0/0,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}r(t,"laya.ani.bone.SkinSlotDisplayData");var e=t.prototype;return e.createTexture=function(t){return this.texture?this.texture:(this.texture=new D(t.bitmap,this.uvs),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=t.height,this.texture.height=t.width,this.texture.offsetX=-t.offsetX,this.texture.offsetY=-t.offsetY,this.texture.sourceWidth=t.sourceHeight,this.texture.sourceHeight=t.sourceWidth):(this.texture.width=t.width,this.texture.height=t.height,this.texture.offsetX=-t.offsetX,this.texture.offsetY=-t.offsetY,this.texture.sourceWidth=t.sourceWidth,this.texture.sourceHeight=t.sourceHeight),y.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY),this.texture)},e.destory=function(){this.texture&&this.texture.destroy()},t}(),Y=function(){function t(){this.name=null,this.displayArr=[]}r(t,"laya.ani.bone.SlotData");var e=t.prototype;return e.getDisplayByName=function(t){for(var e,i=0,a=this.displayArr.length;a>i;i++)if(e=this.displayArr[i],e.attachmentName==t)return i;return-1},t}(),W=function(){function t(t,e){this._data=null,this._bones=null,this.target=null,this.rotateMix=0/0,this.translateMix=0/0,this.scaleMix=0/0,this.shearMix=0/0,this._temp=n(2,0),this._data=t,null==this._bones&&(this._bones=[]),this.target=e[t.targetIndex];var i=0,a=0;for(i=0,a=t.boneIndexs.length;a>i;i++)this._bones.push(e[t.boneIndexs[i]]);this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix}r(t,"laya.ani.bone.TfConstraint");var e=t.prototype;return e.apply=function(){for(var t,e=this.target.resultMatrix.a,i=this.target.resultMatrix.b,a=this.target.resultMatrix.c,r=this.target.resultMatrix.d,s=0,n=this._bones.length;n>s;s++){if(t=this._bones[s],this.rotateMix>0){var h=t.resultMatrix.a,l=t.resultMatrix.b,o=t.resultMatrix.c,u=t.resultMatrix.d,c=Math.atan2(a,e)-Math.atan2(o,h)+this._data.offsetRotation*Math.PI/180;c>Math.PI?c-=2*Math.PI:c<-Math.PI&&(c+=2*Math.PI),c*=this.rotateMix;var _=Math.cos(c),p=Math.sin(c);t.resultMatrix.a=_*h-p*o,t.resultMatrix.b=_*l-p*u,t.resultMatrix.c=p*h+_*o,t.resultMatrix.d=p*l+_*u}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),t.resultMatrix.tx+=(this._temp[0]-t.resultMatrix.tx)*this.translateMix,t.resultMatrix.ty+=(this._temp[1]-t.resultMatrix.ty)*this.translateMix,t.updateChild()),this.scaleMix>0){var d=Math.sqrt(t.resultMatrix.a*t.resultMatrix.a+t.resultMatrix.c*t.resultMatrix.c),f=Math.sqrt(e*e+a*a),m=d>1e-5?(d+(f-d+this._data.offsetScaleX)*this.scaleMix)/d:0;t.resultMatrix.a*=m,t.resultMatrix.c*=m,d=Math.sqrt(t.resultMatrix.b*t.resultMatrix.b+t.resultMatrix.d*t.resultMatrix.d),f=Math.sqrt(i*i+r*r),m=d>1e-5?(d+(f-d+this._data.offsetScaleY)*this.scaleMix)/d:0,t.resultMatrix.b*=m,t.resultMatrix.d*=m}if(this.shearMix>0){l=t.resultMatrix.b,u=t.resultMatrix.d;var y=Math.atan2(u,l);c=Math.atan2(r,i)-Math.atan2(a,e)-(y-Math.atan2(t.resultMatrix.c,t.resultMatrix.a)),c>Math.PI?c-=2*Math.PI:c<-Math.PI&&(c+=2*Math.PI),c=y+(c+this._data.offsetShearY*Math.PI/180)*this.shearMix,m=Math.sqrt(l*l+u*u),t.resultMatrix.b=Math.cos(c)*m,t.resultMatrix.d=Math.sin(c)*m}}},t}(),K=function(){function t(){this.name=null,this.targetIndex=0,this.rotateMix=0/0,this.translateMix=0/0,this.scaleMix=0/0,this.shearMix=0/0,this.offsetRotation=0/0,this.offsetX=0/0,this.offsetY=0/0,this.offsetScaleX=0/0,this.offsetScaleY=0/0,this.offsetShearY=0/0,this.boneIndexs=[]
}return r(t,"laya.ani.bone.TfConstraintData"),t}(),X=function(){function t(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}r(t,"laya.ani.bone.Transform");var e=t.prototype;return e.initData=function(t){void 0!=t.x&&(this.x=t.x),void 0!=t.y&&(this.y=t.y),void 0!=t.skX&&(this.skX=t.skX),void 0!=t.skY&&(this.skY=t.skY),void 0!=t.scX&&(this.scX=t.scX),void 0!=t.scY&&(this.scY=t.scY)},e.getMatrix=function(){var t;return t=this.mMatrix?this.mMatrix:this.mMatrix=new f,t.identity(),t.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(t,this.skewX*Math.PI/180,this.skewY*Math.PI/180),t.rotate(this.skX*Math.PI/180),t.translate(this.x,this.y),t},e.skew=function(t,e,i){var a=Math.sin(i),r=Math.cos(i),s=Math.sin(e),n=Math.cos(e);return t.setTo(t.a*n-t.b*a,t.a*s+t.b*r,t.c*n-t.d*a,t.c*s+t.d*r,t.tx*n-t.ty*a,t.tx*s+t.ty*r),t},t}(),G=function(){function t(){}return r(t,"laya.ani.bone.UVTools"),t.getRelativeUV=function(t,e,i){var a=t[0],r=t[2]-t[0],s=t[1],n=t[5]-t[1];i||(i=[]),i.length=e.length;var h=0,l=0;l=i.length;var o=1/r,u=1/n;for(h=0;l>h;h+=2)i[h]=(e[h]-a)*o,i[h+1]=(e[h+1]-s)*u;return i},t.getAbsoluteUV=function(t,e,i){if(0==t[0]&&0==t[1]&&1==t[4]&&1==t[5])return i?(M.copyArray(i,e),i):e;var a=t[0],r=t[2]-t[0],s=t[1],n=t[5]-t[1];i||(i=[]),i.length=e.length;var h=0,l=0;for(l=i.length,h=0;l>h;h+=2)i[h]=e[h]*r+a,i[h+1]=e[h+1]*n+s;return i},t}(),z=function(){function t(){this.startTime=0/0,this.duration=0/0,this.interpolationData=null,this.data=null,this.dData=null,this.nextData=null}return r(t,"laya.ani.KeyFramesContent"),t}(),q=function(){function t(){}return r(t,"laya.ani.math.BezierLerp"),t.getBezierRate=function(e,i,a,r,s){var n=t._getBezierParamKey(i,a,r,s),h=100*n+e;if(t._bezierResultCache[h])return t._bezierResultCache[h];var l=t._getBezierPoints(i,a,r,s,n),o=0,u=0;for(u=l.length,o=0;u>o;o+=2)if(e<=l[o])return t._bezierResultCache[h]=l[o+1],l[o+1];return t._bezierResultCache[h]=1,1},t._getBezierParamKey=function(t,e,i,a){return 100*(100*(100*(100*t+e)+i)+a)},t._getBezierPoints=function(e,i,a,r,s){if(t._bezierPointsCache[s])return t._bezierPointsCache[s];var n;n=[0,0,e,i,a,r,1,1];var l;l=new h;var o;return o=l.getBezierPoints(n,100,3),t._bezierPointsCache[s]=o,o},t._bezierResultCache={},t._bezierPointsCache={},t}(),H=function(t){function e(){this._destroyed=!1,this._templet=null,this._currentTime=0/0,this._currentFrameTime=0/0,this._playStart=0/0,this._playEnd=0/0,this._playDuration=0/0,this._overallDuration=0/0,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0/0,this._startUpdateLoopCount=0/0,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=0/0,this._cachePlayRate=0/0,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,e.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}r(e,"laya.ani.AnimationPlayer",t);var a=e.prototype;return i.imps(a,{"laya.resource.IDestroy":!0}),a._onTempletLoadedComputeFullKeyframeIndices=function(t,e,i){this._templet===i&&this._cachePlayRate===t&&this._cacheFrameRate===e&&this._computeFullKeyframeIndices()},a._computeFullKeyframeIndices=function(){for(var t=this._fullFrames=[],e=this._templet,i=this._cacheFrameRateInterval*this._cachePlayRate,a=0,r=e.getAnimationCount();r>a;a++){var s=[];if(e.getAnimation(a).nodes){for(var n=0,h=e.getAnimation(a).nodes.length;h>n;n++){for(var l=e.getAnimation(a).nodes[n],o=Math.floor(l.playTime/i+.01),u=new Uint16Array(o+1),c=-1,_=0,p=l.keyFrame.length;p>_;_++){var d=l.keyFrame[_],f=d.startTime,m=f+d.duration+i;do{for(var y=Math.floor(f/i+.5),x=c+1;y>x;x++)u[x]=_;c=y,u[y]=_,f+=i}while(m>=f)}s.push(u)}t.push(s)}else t.push(s)}},a._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},a._calculatePlayDuration=function(){if(0!==this.state){var t=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=t),this._playEnd>t&&(this._playEnd=t),this._playDuration=this._playEnd-this._playStart}},a._setPlayParams=function(t,e){this._currentTime=t,this._currentKeyframeIndex=Math.floor(this.currentPlayTime/e+.01),this._currentFrameTime=this._currentKeyframeIndex*e},a._setPlayParamsWhenStop=function(t,e){this._currentTime=t,this._currentKeyframeIndex=Math.floor(t/e+.01),this._currentFrameTime=this._currentKeyframeIndex*e,this._currentAnimationClipIndex=-1},a._update=function(t){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet){var e=this._cacheFrameRateInterval*this._cachePlayRate,i=0;this._startUpdateLoopCount!==v.loopCount&&(i=t*this.playbackRate,this._elapsedPlaybackTime+=i);var a=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=a)return this._setPlayParamsWhenStop(a,e),this.event("stopped"),void 0;if(i+=this._currentTime,a>0)if(i>=a){do{if(i-=a,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(a,e),this._stopWhenCircleFinish=!1,this.event("stopped"),void 0;a>i&&(this._setPlayParams(i,e),this.event("complete"))}while(i>=a)}else this._setPlayParams(i,e);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(a,e),this._stopWhenCircleFinish=!1,this.event("stopped"),void 0;this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},a._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},a.play=function(t,e,i,a,r){if(void 0===t&&(t=0),void 0===e&&(e=1),void 0===i&&(i=2147483647),void 0===a&&(a=0),void 0===r&&(r=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(0>i||0>a||0>r)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==r&&a>r)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=e,this._overallDuration=i,this._playStart=a,this._playEnd=r,this._paused=!1,this._currentAnimationClipIndex=t,this._currentKeyframeIndex=0,this._startUpdateLoopCount=v.loopCount,this.event("played"),this._calculatePlayDuration(),this._update(0)},a.playByFrame=function(t,e,i,a,r,s){void 0===t&&(t=0),void 0===e&&(e=1),void 0===i&&(i=2147483647),void 0===a&&(a=0),void 0===r&&(r=0),void 0===s&&(s=30);var n=1e3/s;this.play(t,e,i,a*n,r*n)},a.stop=function(t){void 0===t&&(t=!0),t?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},a.destroy=function(){},s(0,a,"playEnd",function(){return this._playEnd}),s(0,a,"templet",function(){return this._templet},function(t){0===!this.state&&this.stop(!0),this._templet!==t&&(this._templet=t,this._computeFullKeyframeIndices())}),s(0,a,"playStart",function(){return this._playStart}),s(0,a,"playDuration",function(){return this._playDuration}),s(0,a,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),s(0,a,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),s(0,a,"overallDuration",function(){return this._overallDuration}),s(0,a,"currentFrameTime",function(){return this._currentFrameTime}),s(0,a,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),s(0,a,"currentPlayTime",function(){return this._currentTime+this._playStart}),s(0,a,"cachePlayRate",function(){return this._cachePlayRate},function(t){this._cachePlayRate!==t&&(this._cachePlayRate=t,this._templet&&this._computeFullKeyframeIndices())}),s(0,a,"cacheFrameRate",function(){return this._cacheFrameRate},function(t){this._cacheFrameRate!==t&&(this._cacheFrameRate=t,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&this._computeFullKeyframeIndices())}),s(0,a,"currentTime",null,function(t){if(-1!==this._currentAnimationClipIndex&&this._templet){if(t<this._playStart||t>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=v.loopCount;var e=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=t,this._currentKeyframeIndex=Math.floor(this.currentPlayTime/e),this._currentFrameTime=this._currentKeyframeIndex*e}}),s(0,a,"paused",function(){return this._paused},function(t){this._paused=t,t&&this.event("paused")}),s(0,a,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),s(0,a,"destroyed",function(){return this._destroyed}),e}(u),$=function(t){function e(){e.__super.call(this)}r(e,"laya.ani.GraphicsAni",t);var i=e.prototype;return i.drawSkin=function(t){this.drawTriangles(t.texture,0,0,t.vertices,t.uvs,t.indexes,t.transform||f.EMPTY)},e.create=function(){var t=e._caches.pop();return t||new e},e.recycle=function(t){t.clear(),e._caches.push(t)},e._caches=[],e}(c),Q=function(t){function e(){this.transform=null,e.__super.call(this)}r(e,"laya.ani.bone.canvasmesh.SkinMeshForGraphic",t);var i=e.prototype;return i.init2=function(t,e,i,a){this.transform&&(this.transform=null);var r=e||[0,1,3,3,1,2];this.texture=t,y.isWebGL?(this.indexes=new Uint16Array(r),this.vertices=new Float32Array(i),this.uvs=new Float32Array(a)):(this.indexes=r,this.vertices=i,this.uvs=a)},e}(w),Z=function(t){function e(){this._aniMap={},this.unfixedLastAniIndex=-1,e.__super.call(this),this._anis=new Array}r(e,"laya.ani.AnimationTemplet",t);var i=e.prototype;return i.parse=function(t){var e=new o(t);this._aniVersion=e.readUTFString(),A.parse(this,e)},i._calculateKeyFrame=function(t,e,i){var a=t.keyFrame;a[e]=a[0];for(var r=0;e>r;r++)for(var s=a[r],n=0;i>n;n++)s.dData[n]=0===s.duration?0:(a[r+1].data[n]-s.data[n])/s.duration,s.nextData[n]=a[r+1].data[n];a.length--},i._onAsynLoaded=function(t){var e=new o(t);switch(this._aniVersion=e.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":T.parse(this,e);break;default:A.parse(this,e)}},i.getAnimationCount=function(){return this._anis.length},i.getAnimation=function(t){return this._anis[t]},i.getAniDuration=function(t){return this._anis[t].playTime},i.getNodes=function(t){return this._anis[t].nodes},i.getNodeIndexWithName=function(t,e){return this._anis[t].bone3DMap[e]},i.getNodeCount=function(t){return this._anis[t].nodes.length},i.getTotalkeyframesLength=function(t){return this._anis[t].totalKeyframeDatasLength},i.getPublicExtData=function(){return this._publicExtData},i.getAnimationDataWithCache=function(t,e,i,a){var r=e[i];if(r){var s=r[t];return s?s[a]:null}return null},i.setAnimationDataWithCache=function(t,e,i,a,r){var s=e[i]||(e[i]={}),n=s[t]||(s[t]=[]);n[a]=r},i.getOriginalData=function(t,i,a,r,s){for(var n=this._anis[t],h=n.nodes,l=0,o=0,u=h.length,c=0;u>o;o++){var _,p=h[o];_=p.keyFrame[a[o][r]],p.dataOffset=c;var d=s-_.startTime,f=p.lerpType;if(f)switch(f){case 0:case 1:for(l=0;l<p.keyframeWidth;)l+=p.interpolationMethod[l](p,l,i,c+l,_.data,d,_.dData,_.duration,_.nextData);break;case 2:var m=_.interpolationData,y=m.length,x=0;for(l=0;y>l;){var g=m[l];switch(g){case 6:l+=e.interpolation[g](p,x,i,c+x,_.data,d,_.dData,_.duration,_.nextData,m,l+1);break;case 7:l+=e.interpolation[g](p,x,i,c+x,_.data,d,_.dData,_.duration,_.nextData,m,l+1);break;default:l+=e.interpolation[g](p,x,i,c+x,_.data,d,_.dData,_.duration,_.nextData)}x++}}else for(l=0;l<p.keyframeWidth;)l+=p.interpolationMethod[l](p,l,i,c+l,_.data,d,_.dData,_.duration,_.nextData);c+=p.keyframeWidth}},i.getNodesCurrentFrameIndex=function(t,e){var i=this._anis[t],a=i.nodes;t!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(a.length),this.unfixedCurrentTimes=new Float32Array(a.length),this.unfixedLastAniIndex=t);for(var r=0,s=a.length;s>r;r++){var n=a[r];for(e<this.unfixedCurrentTimes[r]&&(this.unfixedCurrentFrameIndexes[r]=0),this.unfixedCurrentTimes[r]=e;this.unfixedCurrentFrameIndexes[r]<n.keyFrame.length&&!(n.keyFrame[this.unfixedCurrentFrameIndexes[r]].startTime>this.unfixedCurrentTimes[r]);)this.unfixedCurrentFrameIndexes[r]++;this.unfixedCurrentFrameIndexes[r]--}return this.unfixedCurrentFrameIndexes},i.getOriginalDataUnfixedRate=function(t,i,a){var r=this._anis[t],s=r.nodes;t!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(s.length),this.unfixedCurrentTimes=new Float32Array(s.length),this.unfixedKeyframes=n(s.length),this.unfixedLastAniIndex=t);for(var h=0,l=0,o=s.length,u=0;o>l;l++){var c=s[l];for(a<this.unfixedCurrentTimes[l]&&(this.unfixedCurrentFrameIndexes[l]=0),this.unfixedCurrentTimes[l]=a;this.unfixedCurrentFrameIndexes[l]<c.keyFrame.length&&!(c.keyFrame[this.unfixedCurrentFrameIndexes[l]].startTime>this.unfixedCurrentTimes[l]);)this.unfixedKeyframes[l]=c.keyFrame[this.unfixedCurrentFrameIndexes[l]],this.unfixedCurrentFrameIndexes[l]++;var _=this.unfixedKeyframes[l];c.dataOffset=u;var p=a-_.startTime,d=c.lerpType;if(d)switch(c.lerpType){case 0:case 1:for(h=0;h<c.keyframeWidth;)h+=c.interpolationMethod[h](c,h,i,u+h,_.data,p,_.dData,_.duration,_.nextData);break;case 2:var f=_.interpolationData,m=f.length,y=0;for(h=0;m>h;){var x=f[h];switch(x){case 6:h+=e.interpolation[x](c,y,i,u+y,_.data,p,_.dData,_.duration,_.nextData,f,h+1);break;case 7:h+=e.interpolation[x](c,y,i,u+y,_.data,p,_.dData,_.duration,_.nextData,f,h+1);break;default:h+=e.interpolation[x](c,y,i,u+y,_.data,p,_.dData,_.duration,_.nextData)}y++}}else for(h=0;h<c.keyframeWidth;)h+=c.interpolationMethod[h](c,h,i,u+h,_.data,p,_.dData,_.duration,_.nextData);u+=c.keyframeWidth}},e._LinearInterpolation_0=function(t,e,i,a,r,s,n){return i[a]=r[e]+s*n[e],1},e._QuaternionInterpolation_1=function(t,e,i,a,r,s,n,h,l){var o=0===h?0:s/h;return d.slerpQuaternionArray(r,e,l,e,o,i,a),4},e._AngleInterpolation_2=function(){return 0},e._RadiansInterpolation_3=function(){return 0},e._Matrix4x4Interpolation_4=function(t,e,i,a,r,s,n){for(var h=0;16>h;h++,e++)i[a+h]=r[e]+s*n[e];return 16},e._NoInterpolation_5=function(t,e,i,a,r){return i[a]=r[e],1},e._BezierInterpolation_6=function(t,e,i,a,r,s,n,h,l,o,u){return void 0===u&&(u=0),i[a]=r[e]+(l[e]-r[e])*q.getBezierRate(s/h,o[u],o[u+1],o[u+2],o[u+3]),5},e._BezierInterpolation_7=function(t,e,i,a,r,s,n,h,l,o,u){return void 0===u&&(u=0),i[a]=o[u+4]+o[u+5]*q.getBezierRate((.001*s+o[u+6])/o[u+7],o[u],o[u+1],o[u+2],o[u+3]),9},e.interpolation=[e._LinearInterpolation_0,e._QuaternionInterpolation_1,e._AngleInterpolation_2,e._RadiansInterpolation_3,e._Matrix4x4Interpolation_4,e._NoInterpolation_5,e._BezierInterpolation_6,e._BezierInterpolation_7],e}(x),j=function(t){function e(t,i){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,e.__super.call(this),void 0===i&&(i=0),t&&this.init(t,i)}r(e,"laya.ani.bone.Skeleton",t);var a=e.prototype;return a.init=function(t,e){void 0===e&&(e=0);var i=0,a=0;if(1==e)for(this._graphicsCache=[],i=0,a=t.getAnimationCount();a>i;i++)this._graphicsCache.push([]);if(this._yReverseMatrix=t.yReverseMatrix,this._aniMode=e,this._templet=t,this._player=new H,this._player.cacheFrameRate=t.rate,this._player.templet=t,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=t.mBoneArr,this._rootBone=t.mRootBone,this._aniSectionDic=t.aniSectionDic,t.ikArr.length>0)for(this._ikArr=[],i=0,a=t.ikArr.length;a>i;i++)this._ikArr.push(new N(t.ikArr[i],this._boneList));if(t.pathArr.length>0){var r,s;null==this._pathDic&&(this._pathDic={});var n;for(i=0,a=t.pathArr.length;a>i;i++)r=t.pathArr[i],s=new R(r,this._boneList),n=this._boneSlotDic[r.name],n&&(s=new R(r,this._boneList),s.target=n),this._pathDic[r.name]=s}if(t.tfArr.length>0)for(this._tfArr=[],i=0,a=t.tfArr.length;a>i;i++)this._tfArr.push(new W(t.tfArr[i],this._boneList));if(t.skinDataArray.length>0){var h=this._templet.skinDataArray[this._skinIndex];this._skinName=h.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},a.load=function(t,e,a){void 0===a&&(a=0),this._aniPath=t,this._complete=e,this._loadAniMode=a,i.loader.load([{url:t,type:"arraybuffer"}],_.create(this,this._onLoaded))},a._onLoaded=function(){var t=p.getRes(this._aniPath);if(null!=t){null==J.TEMPLET_DICTIONARY&&(J.TEMPLET_DICTIONARY={});var e;e=J.TEMPLET_DICTIONARY[this._aniPath],e?e.isParseFail?this._parseFail():e.isParserComplete?this._parseComplete():(e.on("complete",this,this._parseComplete),e.on("error",this,this._parseFail)):(e=new J,e._setUrl(this._aniPath),J.TEMPLET_DICTIONARY[this._aniPath]=e,e.on("complete",this,this._parseComplete),e.on("error",this,this._parseFail),e.isParserComplete=!1,e.parseData(null,t))}},a._parseComplete=function(){var t=J.TEMPLET_DICTIONARY[this._aniPath];t&&(this.init(t,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},a._parseFail=function(){console.log("[Error]:"+this._aniPath+"解析失败")},a._onPlay=function(){this.event("played")},a._onStop=function(){var t,e=this._templet.eventAniArr,i=e[this._aniClipIndex];if(i&&this._eventIndex<i.length)for(;this._eventIndex<i.length;this._eventIndex++)t=i[this._eventIndex],t.time>=this._player.playStart&&t.time<=this._player.playEnd&&this.event("label",t);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},a._onPause=function(){this.event("paused")},a._parseSrcBoneMatrix=function(){var t=0,e=0;for(e=this._templet.srcBoneMatrixArr.length,t=0;e>t;t++)this._boneMatrixArray.push(new f);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var i,a,r=this._templet.boneSlotArray;for(t=0,e=r.length;e>t;t++)i=r[t],a=this._bindBoneBoneSlotDic[i.parent],null==a&&(this._bindBoneBoneSlotDic[i.parent]=a=[]),this._boneSlotDic[i.name]=i=i.copy(),a.push(i),this._boneSlotArray.push(i)}},a._emitMissedEvents=function(t,e,i){void 0===i&&(i=0);var a=this._templet.eventAniArr,r=a[this._player.currentAnimationClipIndex];if(r){var s,n=0,h=0;for(h=r.length,n=i;h>n;n++)s=r[n],s.time>=this._player.playStart&&s.time<=this._player.playEnd&&this.event("label",s)}},a._update=function(t){if(void 0===t&&(t=!0),!(this._pause||t&&this._indexControl)){var e=this.timer.currTimer,i=this._player.currentKeyframeIndex,a=e-this._lastTime;if(t?this._player._update(a):i=-1,this._lastTime=e,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||a>0&&this._clipIndex==i&&this._lastUpdateAniClipIndex==this._aniClipIndex))){this._lastUpdateAniClipIndex=this._aniClipIndex,i>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var r,s=this._templet.eventAniArr,n=s[this._aniClipIndex];n&&this._eventIndex<n.length&&(r=n[this._eventIndex],r.time>=this._player.playStart&&r.time<=this._player.playEnd?this._player.currentPlayTime>=r.time&&(this.event("label",r),this._eventIndex++):this._eventIndex++);var h;if(0==this._aniMode){if(h=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return this.graphics!=h&&(this.graphics=h),void 0;var l=0,o=0;for(o=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,o-1)&&o>0;)o--;if(o<this._clipIndex)for(l=o;l<this._clipIndex;l++)this._createGraphics(l)}else if(1==this._aniMode){if(h=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return this.graphics!=h&&(this.graphics=h),void 0;for(o=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,o-1)&&o>0;)o--;if(o<this._clipIndex)for(l=o;l<this._clipIndex;l++)this._createGraphics(l)}this._createGraphics()}}},a._createGraphics=function(t){void 0===t&&(t=-1),-1==t&&(t=this._clipIndex);var e,i=t*this._player.cacheFrameRateInterval,a=this._templet.drawOrderAniArr,r=a[this._aniClipIndex];if(r&&r.length>0)for(this._drawOrderIndex=0,e=r[this._drawOrderIndex];i>=e.time&&(this._drawOrder=e.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=r.length));)e=r[this._drawOrderIndex];var s;0==this._aniMode||1==this._aniMode?this.graphics=$.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=$.create(),s=this.graphics;var n=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],t,i);var h,l,u,c,_=this._aniSectionDic[this._aniClipIndex],p=0,d=0,m=0,y=0,x=0,g=this._templet.srcBoneMatrixArr.length;for(d=0,x=_[0];g>d;d++)c=this._boneList[d],u=this._templet.srcBoneMatrixArr[d],c.resultTransform.scX=u.scX*this._curOriginalData[p++],c.resultTransform.skX=u.skX+this._curOriginalData[p++],c.resultTransform.skY=u.skY+this._curOriginalData[p++],c.resultTransform.scY=u.scY*this._curOriginalData[p++],c.resultTransform.x=u.x+this._curOriginalData[p++],c.resultTransform.y=u.y+this._curOriginalData[p++],8===this._templet.tMatrixDataLen&&(c.resultTransform.skewX=u.skewX+this._curOriginalData[p++],c.resultTransform.skewY=u.skewY+this._curOriginalData[p++]);var v,D={},M={};for(x+=_[1];x>d;d++)v=n[d],D[v.name]=this._curOriginalData[p++],M[v.name]=this._curOriginalData[p++],this._curOriginalData[p++],this._curOriginalData[p++],this._curOriginalData[p++],this._curOriginalData[p++];var I={},b={};for(x+=_[2];x>d;d++)v=n[d],I[v.name]=this._curOriginalData[p++],b[v.name]=this._curOriginalData[p++],this._curOriginalData[p++],this._curOriginalData[p++],this._curOriginalData[p++],this._curOriginalData[p++];if(this._pathDic){var A;for(x+=_[3];x>d;d++)if(v=n[d],A=this._pathDic[v.name]){var T=new o(v.extenData);switch(T.getByte()){case 1:A.position=this._curOriginalData[p++];break;case 2:A.spacing=this._curOriginalData[p++];break;case 3:A.rotateMix=this._curOriginalData[p++],A.translateMix=this._curOriginalData[p++]}}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(f.TEMP.identity()),this._ikArr){var S;for(d=0,x=this._ikArr.length;x>d;d++)S=this._ikArr[d],I.hasOwnProperty(S.name)&&(S.bendDirection=I[S.name]),b.hasOwnProperty(S.name)&&(S.mix=b[S.name]),S.apply()}if(this._pathDic)for(var C in this._pathDic)A=this._pathDic[C],A.apply(this._boneList,s);if(this._tfArr){var w;for(d=0,y=this._tfArr.length;y>d;d++)w=this._tfArr[d],w.apply()}for(d=0,y=this._boneList.length;y>d;d++)if(c=this._boneList[d],l=this._bindBoneBoneSlotDic[c.name],c.resultMatrix.copyTo(this._boneMatrixArray[d]),l)for(m=0,x=l.length;x>m;m++)h=l[m],h&&h.setParentMatrix(c.resultMatrix);var F,k={},P=this._templet.deformAniArr;if(P&&P.length>0){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,d=0,x=this._boneSlotArray.length;x>d;d++)h=this._boneSlotArray[d],h.deformData=null;var U=P[this._aniClipIndex];F=U["default"],this._setDeform(F,k,this._boneSlotArray,i);var B;for(B in U)"default"!=B&&B!=this._skinName&&(F=U[B],this._setDeform(F,k,this._boneSlotArray,i));F=U[this._skinName],this._setDeform(F,k,this._boneSlotArray,i)}var N,L,R;if(this._drawOrder)for(d=0,x=this._drawOrder.length;x>d;d++)h=this._boneSlotArray[this._drawOrder[d]],N=D[h.name],L=M[h.name],isNaN(L)||(s.save(),s.alpha(L)),isNaN(N)||-2==N||(this._templet.attachmentNames?h.showDisplayByName(this._templet.attachmentNames[N]):h.showDisplayByIndex(N)),k[this._drawOrder[d]]?(R=k[this._drawOrder[d]],h.deformData=h.currDisplayData&&R[h.currDisplayData.attachmentName]?R[h.currDisplayData.attachmentName]:null):h.deformData=null,isNaN(L)?h.draw(s,this._boneMatrixArray,2==this._aniMode):h.draw(s,this._boneMatrixArray,2==this._aniMode,L),isNaN(L)||s.restore();else for(d=0,x=this._boneSlotArray.length;x>d;d++)h=this._boneSlotArray[d],N=D[h.name],L=M[h.name],isNaN(L)||(s.save(),s.alpha(L)),isNaN(N)||-2==N||(this._templet.attachmentNames?h.showDisplayByName(this._templet.attachmentNames[N]):h.showDisplayByIndex(N)),k[d]?(R=k[d],h.deformData=h.currDisplayData&&R[h.currDisplayData.attachmentName]?R[h.currDisplayData.attachmentName]:null):h.deformData=null,isNaN(L)?h.draw(s,this._boneMatrixArray,2==this._aniMode):h.draw(s,this._boneMatrixArray,2==this._aniMode,L),isNaN(L)||s.restore();0==this._aniMode?(this._templet.setGrahicsDataWithCache(this._aniClipIndex,t,s),this._checkIsAllParsed(this._aniClipIndex)):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,t,s)},a._checkIsAllParsed=function(t){var e=0,i=0;for(i=Math.floor(.01+this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate),e=0;i>e;e++)if(!this._templet.getGrahicsDataWithCache(t,e))return;return this._templet.getGrahicsDataWithCache(t,i)?(this._templet.deleteAniData(t),void 0):(this._createGraphics(i),void 0)},a._setDeform=function(t,e,i,a){if(t){var r,s,n,h=0,l=0,o=0;if(t)for(h=0,l=t.deformSlotDataList.length;l>h;h++)for(r=t.deformSlotDataList[h],o=0;o<r.deformSlotDisplayList.length;o++)s=r.deformSlotDisplayList[o],n=i[s.slotIndex],s.apply(a,n),e[s.slotIndex]||(e[s.slotIndex]={}),e[s.slotIndex][s.attachment]=s.deformData}},a.getAnimNum=function(){return this._templet.getAnimationCount()},a.getAniNameByIndex=function(t){return this._templet.getAniNameByIndex(t)},a.getSlotByName=function(t){return this._boneSlotDic[t]},a.showSkinByName=function(t,e){void 0===e&&(e=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(t),e)},a.showSkinByIndex=function(t,e){void 0===e&&(e=!0);for(var i=0;i<this._boneSlotArray.length;i++)this._boneSlotArray[i].showSlotData(null,e);if(this._templet.showSkinByIndex(this._boneSlotDic,t,e)){var a=this._templet.skinDataArray[t];this._skinIndex=t,this._skinName=a.name}this._clearCache()},a.showSlotSkinByIndex=function(t,e){if(0!=this._aniMode){var i=this.getSlotByName(t);i&&i.showDisplayByIndex(e),this._clearCache()}},a.showSlotSkinByName=function(t,e){if(0!=this._aniMode){var i=this.getSlotByName(t);i&&i.showDisplayByName(e),this._clearCache()}},a.replaceSlotSkinName=function(t,e,i){if(0!=this._aniMode){var a=this.getSlotByName(t);a&&a.replaceDisplayByName(e,i),this._clearCache()}},a.replaceSlotSkinByIndex=function(t,e,i){if(0!=this._aniMode){var a=this.getSlotByName(t);a&&a.replaceDisplayByIndex(e,i),this._clearCache()}},a.setSlotSkin=function(t,e){if(0!=this._aniMode){var i=this.getSlotByName(t);i&&i.replaceSkin(e),this._clearCache()}},a._clearCache=function(){if(1==this._aniMode)for(var t=0,e=this._graphicsCache.length;e>t;t++){for(var i=0,a=this._graphicsCache[t].length;a>i;i++){var r=this._graphicsCache[t][i];r!=this.graphics&&$.recycle(r)}this._graphicsCache[t].length=0}},a.play=function(t,e,i,a,r,s){void 0===i&&(i=!0),void 0===a&&(a=0),void 0===r&&(r=0),void 0===s&&(s=!0),this._indexControl=!1;var n=-1,h=0/0;if(h=e?2147483647:0,"string"==typeof t)for(var o=0,u=this._templet.getAnimationCount();u>o;o++){var c=this._templet.getAnimation(o);if(c&&t==c.name){n=o;break}}else n=t;n>-1&&n<this.getAnimNum()&&(this._aniClipIndex=n,(i||this._pause||this._currAniIndex!=n)&&(this._currAniIndex=n,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(n)),this._drawOrder=null,this._eventIndex=0,this._player.play(n,this._player.playbackRate,h,a,r),s&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=l.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},a.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},a.playbackRate=function(t){this._player&&(this._player.playbackRate=t)},a.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},a.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=l.now(),this.timer.frameLoop(1,this,this._update,null,!0))},a._getGrahicsDataWithCache=function(t,e){return this._graphicsCache[t][e]},a._setGrahicsDataWithCache=function(t,e,i){this._graphicsCache[t][e]=i},a.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},s(0,a,"url",function(){return this._aniPath},function(t){this.load(t)}),s(0,a,"timer",function(){var t=this.scene?this.scene.timer:i.sceneTimer;return t}),s(0,a,"index",function(){return this._index},function(t){this.player&&(this._index=t,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),s(0,a,"total",function(){return this._total=this._templet&&this._player?Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):-1,this._total}),s(0,a,"templet",function(){return this._templet}),s(0,a,"player",function(){return this._player}),e.useSimpleMeshInCanvas=!1,e}(g),J=(function(t){function e(t){this._start=0,this._Pos=0,this._data=null,this._curIndex=0,this._preIndex=0,this._playIndex=0,this._playing=!1,this._ended=!0,this._count=0,this._ids=null,this._loadedImage={},this._idOfSprite=null,this._parentMovieClip=null,this._movieClipList=null,this._labels=null,this.basePath=null,this._atlasPath=null,this._url=null,this._isRoot=!1,this._completeHandler=null,this._endFrame=-1,this.interval=30,this.loop=!1,e.__super.call(this),this._ids={},this._idOfSprite=[],this._reset(),this._playing=!1,this._parentMovieClip=t,t?(this._isRoot=!1,this._movieClipList=t._movieClipList,this._movieClipList.push(this)):(this._movieClipList=[this],this._isRoot=!0,this._setBitUp(16))}r(e,"laya.ani.swf.MovieClip",t);var a=e.prototype;return a.destroy=function(e){void 0===e&&(e=!0),this._clear(),t.prototype.destroy.call(this,e)},a._setDisplay=function(e){t.prototype._setDisplay.call(this,e),this._isRoot&&this._$3__onDisplay(e)},a._$3__onDisplay=function(t){t?this.timer.loop(this.interval,this,this.updates,null,!0):this.timer.clear(this,this.updates)},a.updates=function(){if(!this._parentMovieClip){var t=0,e=0;for(e=this._movieClipList.length,t=0;e>t;t++)this._movieClipList[t]&&this._movieClipList[t]._update()}},a.addLabel=function(t,e){this._labels||(this._labels={}),this._labels[e]=t},a.removeLabel=function(t){if(t){if(!this._labels)for(var e in this._labels)if(this._labels[e]===t){delete this._labels[e];break}}else this._labels=null},a._update=function(){if(this._data&&this._playing){if(this._playIndex++,this._playIndex>=this._count){if(!this.loop)return this._playIndex--,this.stop(),void 0;this._playIndex=0}if(this._$3__parse(this._playIndex),this._labels&&this._labels[this._playIndex]&&this.event("label",this._labels[this._playIndex]),-1!=this._endFrame&&this._endFrame==this._playIndex){if(this._endFrame=-1,null!=this._completeHandler){var t=this._completeHandler;this._completeHandler=null,t.run()}this.stop()}}},a.stop=function(){this._playing=!1},a.gotoAndStop=function(t){this.index=t,this.stop()},a._clear=function(){if(this.stop(),this._idOfSprite.length=0,!this._parentMovieClip){this.timer.clear(this,this.updates);
var t=0,e=0;for(e=this._movieClipList.length,t=0;e>t;t++)this._movieClipList[t]!=this&&this._movieClipList[t]._clear();this._movieClipList.length=0}this._atlasPath&&p.clearRes(this._atlasPath);var i;for(i in this._loadedImage)this._loadedImage[i]&&(p.clearRes(i),this._loadedImage[i]=!1);this.removeChildren(),this.graphics=null,this._parentMovieClip=null},a.play=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0),this.loop=e,this._playing=!0,this._data&&this._displayFrame(t)},a._displayFrame=function(t){void 0===t&&(t=-1),-1!=t&&(this._curIndex>t&&this._reset(),this._$3__parse(t))},a._reset=function(t){void 0===t&&(t=!0),t&&1!=this._curIndex&&this.removeChildren(),this._preIndex=this._curIndex=-1,this._Pos=this._start},a._$3__parse=function(t){var i,a,r,s=0,n=0,h=0,l=0,o=!1,u=this._idOfSprite,c=this._data;for(this._ended&&this._reset(),c.pos=this._Pos,this._ended=!1,this._playIndex=t,this._curIndex>t&&t<this._preIndex&&(this._reset(!0),c.pos=this._Pos);this._curIndex<=t&&!this._ended;)switch(n=c.getUint16()){case 12:if(s=c.getUint16(),h=this._ids[c.getUint16()],this._Pos=c.pos,c.pos=h,0==(l=c.getUint8())){var _=c.getUint16();if(a=u[s],!a){a=u[s]=new g;var p=new g;p.loadImage(this.basePath+_+".png"),this._loadedImage[this.basePath+_+".png"]=!0,a.addChild(p),p.size(c.getFloat32(),c.getFloat32());var d=c._getMatrix();p.transform=d}a.alpha=1}else 1==l&&(i=u[s],i||(u[s]=i=new e(this),i.interval=this.interval,i._ids=this._ids,i.basePath=this.basePath,i._setData(c,h),i._initState(),i.play(0)),i.alpha=1);c.pos=this._Pos;break;case 3:var m=u[c.getUint16()];m&&(this.addChild(m),m.zOrder=c.getUint16(),o=!0);break;case 4:m=u[c.getUint16()],m&&m.removeSelf();break;case 5:u[c.getUint16()][e._ValueList[c.getUint16()]]=c.getFloat32();break;case 6:u[c.getUint16()].visible=c.getUint8()>0;break;case 7:a=u[c.getUint16()];var y=a.transform||f.create();y.setTo(c.getFloat32(),c.getFloat32(),c.getFloat32(),c.getFloat32(),c.getFloat32(),c.getFloat32()),a.transform=y;break;case 8:u[c.getUint16()].setPos(c.getFloat32(),c.getFloat32());break;case 9:u[c.getUint16()].setSize(c.getFloat32(),c.getFloat32());break;case 10:u[c.getUint16()].alpha=c.getFloat32();break;case 11:u[c.getUint16()].setScale(c.getFloat32(),c.getFloat32());break;case 98:r=c.getString(),this.event(r),"stop"==r&&this.stop();break;case 99:this._curIndex=c.getUint16(),o&&this.updateZOrder();break;case 100:this._count=this._curIndex+1,this._ended=!0,this._playing&&(this.event("enterframe"),this.event("end"),this.event("complete")),this._reset(!1)}this._playing&&!this._ended&&this.event("enterframe"),this._Pos=c.pos},a._setData=function(t,e){this._data=t,this._start=e+3},a.load=function(t,e,a){void 0===e&&(e=!1),this._url=t,e&&(this._atlasPath=a?a:t.split(".swf")[0]+".json"),this.stop(),this._clear(),this._movieClipList=[this];var r;r=[{url:t,type:"arraybuffer"}],this._atlasPath&&r.push({url:this._atlasPath,type:"atlas"}),i.loader.load(r,_.create(this,this._onLoaded))},a._onLoaded=function(){var t;return(t=p.getRes(this._url))?(this.basePath=this._atlasPath?p.getAtlas(this._atlasPath).dir:this._url.split(".swf")[0]+"/image/",this._initData(t),void 0):(this.event("error","file not find"),void 0)},a._initState=function(){this._reset(),this._ended=!1;var t=this._playing;for(this._playing=!1,this._curIndex=0;!this._ended;)this._$3__parse(++this._curIndex);this._playing=t},a._initData=function(t){this._data=new o(t);var e=0,i=this._data.getUint16();for(e=0;i>e;e++)this._ids[this._data.getInt16()]=this._data.getInt32();this.interval=1e3/this._data.getUint16(),this._setData(this._data,this._ids[32767]),this._initState(),this.play(0),this.event("loaded"),this._parentMovieClip||this.timer.loop(this.interval,this,this.updates,null,!0)},a.playTo=function(t,e,i){this._completeHandler=i,this._endFrame=e,this.play(t,!1)},s(0,a,"timer",function(){var t=this.scene?this.scene.timer:i.sceneTimer;return t}),s(0,a,"index",function(){return this._playIndex},function(t){this._playIndex=t,this._data&&this._displayFrame(this._playIndex),this._labels&&this._labels[t]&&this.event("label",this._labels[t])}),s(0,a,"count",function(){return this._count}),s(0,a,"playing",function(){return this._playing}),s(0,a,"url",null,function(t){this.load(t)}),e._ValueList=["x","y","width","height","scaleX","scaleY","rotation","alpha"],e}(g),function(t){function e(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,e.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}r(e,"laya.ani.bone.Templet",t);var a=e.prototype;return a.loadAni=function(t){this._skBufferUrl=t,i.loader.load(t,_.create(this,this.onComplete),null,"arraybuffer")},a.onComplete=function(){if(this._isDestroyed)return this.destroy(),void 0;var t=p.getRes(this._skBufferUrl);return t?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,t),void 0):(this.event("error","load failed:"+this._skBufferUrl),void 0)},a.parseData=function(t,e,i){void 0===i&&(i=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=t,this._mainTexture&&y.isWebGL&&t.bitmap&&(t.bitmap.enableMerageInAtlas=!1),this._rate=i,this.parse(e)},a.buildArmature=function(t){return void 0===t&&(t=0),new j(this,t)},a.parse=function(i){t.prototype.parse.call(this,i),this.event("loaded",this),this._aniVersion!=e.LAYA_ANIMATION_VISION&&console.log("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+e.LAYA_ANIMATION_VISION),this._mainTexture?this._parsePublicExtData():this._parseTexturePath()},a._parseTexturePath=function(){if(this._isDestroyed)return this.destroy(),void 0;var t=0;this._loadList=[];var e,a=new o(this.getPublicExtData()),r=0,s=0,n=0,h=0,l=0,u=0,c=0,p=0,d=0,f=a.getInt32(),m=a.readUTFString(),y=m.split("\n");for(t=0;f>t;t++)e=this._path+y[2*t],m=y[2*t+1],r=a.getFloat32(),s=a.getFloat32(),n=a.getFloat32(),h=a.getFloat32(),d=a.getFloat32(),l=isNaN(d)?0:d,d=a.getFloat32(),u=isNaN(d)?0:d,d=a.getFloat32(),c=isNaN(d)?n:d,d=a.getFloat32(),p=isNaN(d)?h:d,-1==this._loadList.indexOf(e)&&this._loadList.push(e);i.loader.load(this._loadList,_.create(this,this._textureComplete))},a._textureComplete=function(){for(var t,e,i=0,a=this._loadList.length;a>i;i++)e=this._loadList[i],t=this._textureDic[e]=p.getRes(e),y.isWebGL&&t&&t.bitmap&&(t.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},a._parsePublicExtData=function(){var t=0,e=0,i=0,a=0,r=0;for(t=0,r=this.getAnimationCount();r>t;t++)this._graphicsCache.push([]);var s=!1;s="Dragon"!=this._aniClassName;var n,h,l=new o(this.getPublicExtData()),u=0,c=0,_=0,p=0,d=0,m=0,y=0,x=0,g=0,v=l.getInt32(),M=l.readUTFString(),I=M.split("\n");for(t=0;v>t;t++){if(n=this._mainTexture,h=this._path+I[2*t],M=I[2*t+1],null==this._mainTexture&&(n=this._textureDic[h]),!n)return this.event("error",this),this.isParseFail=!0,void 0;u=l.getFloat32(),c=l.getFloat32(),_=l.getFloat32(),p=l.getFloat32(),g=l.getFloat32(),d=isNaN(g)?0:g,g=l.getFloat32(),m=isNaN(g)?0:g,g=l.getFloat32(),y=isNaN(g)?_:g,g=l.getFloat32(),x=isNaN(g)?p:g,this.subTextureDic[M]=D.create(n,u,c,_,p,-d,-m,y,x)}this._mainTexture=n;var b,A=l.getUint16();for(t=0;A>t;t++)b=[],b.push(l.getUint16()),b.push(l.getUint16()),b.push(l.getUint16()),b.push(l.getUint16()),this.aniSectionDic[t]=b;var T,w,N,R,W,G=l.getInt16(),z={};for(t=0;G>t;t++)T=new S,0==t?W=T:T.root=W,T.d=s?-1:1,N=l.readUTFString(),R=l.readUTFString(),T.length=l.getFloat32(),1==l.getByte()&&(T.inheritRotation=!1),1==l.getByte()&&(T.inheritScale=!1),T.name=N,R&&(w=z[R],w?w.addChild(T):this.mRootBone=T),z[N]=T,this.mBoneArr.push(T);this.tMatrixDataLen=l.getUint16();var q,H=l.getUint16(),$=Math.floor(H/this.tMatrixDataLen),Q=this.srcBoneMatrixArr;for(t=0;$>t;t++)q=new X,q.scX=l.getFloat32(),q.skX=l.getFloat32(),q.skY=l.getFloat32(),q.scY=l.getFloat32(),q.x=l.getFloat32(),q.y=l.getFloat32(),8===this.tMatrixDataLen&&(q.skewX=l.getFloat32(),q.skewY=l.getFloat32()),Q.push(q),T=this.mBoneArr[t],T.transform=q;var Z,j=l.getUint16(),J=0;for(t=0;j>t;t++){for(Z=new L,J=l.getUint16(),e=0;J>e;e++)Z.boneNames.push(l.readUTFString()),Z.boneIndexs.push(l.getInt16());Z.name=l.readUTFString(),Z.targetBoneName=l.readUTFString(),Z.targetBoneIndex=l.getInt16(),Z.bendDirection=l.getFloat32(),Z.mix=l.getFloat32(),Z.isSpine=s,this.ikArr.push(Z)}var te,ee=l.getUint16(),ie=0;for(t=0;ee>t;t++){for(te=new K,ie=l.getUint16(),e=0;ie>e;e++)te.boneIndexs.push(l.getInt16());te.name=l.getUTFString(),te.targetIndex=l.getInt16(),te.rotateMix=l.getFloat32(),te.translateMix=l.getFloat32(),te.scaleMix=l.getFloat32(),te.shearMix=l.getFloat32(),te.offsetRotation=l.getFloat32(),te.offsetX=l.getFloat32(),te.offsetY=l.getFloat32(),te.offsetScaleX=l.getFloat32(),te.offsetScaleY=l.getFloat32(),te.offsetShearY=l.getFloat32(),this.tfArr.push(te)}var ae,re=l.getUint16(),se=0;for(t=0;re>t;t++){for(ae=new O,ae.name=l.readUTFString(),se=l.getUint16(),e=0;se>e;e++)ae.bones.push(l.getInt16());ae.target=l.readUTFString(),ae.positionMode=l.readUTFString(),ae.spacingMode=l.readUTFString(),ae.rotateMode=l.readUTFString(),ae.offsetRotation=l.getFloat32(),ae.position=l.getFloat32(),ae.spacing=l.getFloat32(),ae.rotateMix=l.getFloat32(),ae.translateMix=l.getFloat32(),this.pathArr.push(ae)}var ne,he,le,oe,ue,ce=0,_e=0,pe=0,de=0,fe=0/0,me=0,ye=l.getInt16();for(t=0;ye>t;t++){var xe=l.getUint8(),ge={};this.deformAniArr.push(ge);for(var ve=0;xe>ve;ve++)for(he=new F,he.skinName=l.getUTFString(),ge[he.skinName]=he,ce=l.getInt16(),e=0;ce>e;e++)for(le=new k,he.deformSlotDataList.push(le),_e=l.getInt16(),i=0;_e>i;i++)for(oe=new P,le.deformSlotDisplayList.push(oe),oe.slotIndex=pe=l.getInt16(),oe.attachment=ne=l.getUTFString(),de=l.getInt16(),a=0;de>a;a++)for(1==l.getByte()?oe.tweenKeyList.push(!0):oe.tweenKeyList.push(!1),fe=l.getFloat32(),oe.timeList.push(fe),ue=[],oe.vectices.push(ue),me=l.getInt16(),r=0;me>r;r++)ue.push(l.getFloat32())}var De,Me,Ie=l.getInt16(),be=0,Ae=0;for(t=0;Ie>t;t++){for(be=l.getInt16(),De=[],e=0;be>e;e++){for(Me=new U,Me.time=l.getFloat32(),Ae=l.getInt16(),i=0;Ae>i;i++)Me.drawOrder.push(l.getInt16());De.push(Me)}this.drawOrderAniArr.push(De)}var Te,Se,Ce=l.getInt16(),we=0;for(t=0;Ce>t;t++){for(we=l.getInt16(),Te=[],e=0;we>e;e++)Se=new B,Se.name=l.getUTFString(),Se.intValue=l.getInt32(),Se.floatValue=l.getFloat32(),Se.stringValue=l.getUTFString(),Se.time=l.getFloat32(),Te.push(Se);this.eventAniArr.push(Te)}var Fe=l.getInt16();if(Fe>0)for(this.attachmentNames=[],t=0;Fe>t;t++)this.attachmentNames.push(l.getUTFString());var ke,Pe,Ue=l.getInt16();for(t=0;Ue>t;t++)ke=new C,ke.name=l.readUTFString(),ke.parent=l.readUTFString(),ke.attachmentName=l.readUTFString(),ke.srcDisplayIndex=ke.displayIndex=l.getInt16(),ke.templet=this,this.boneSlotDic[ke.name]=ke,Pe=this.bindBoneBoneSlotDic[ke.parent],null==Pe&&(this.bindBoneBoneSlotDic[ke.parent]=Pe=[]),Pe.push(ke),this.boneSlotArray.push(ke);var Be,Ne,Le,Re=l.readUTFString(),Oe=Re.split("\n"),Ee=0,Ve=l.getUint8(),Ye=0,We=0,Ke=0,Xe=0,Ge=0,ze=0,qe=0;for(t=0;Ve>t;t++){for(Be=new E,Be.name=Oe[Ee++],Ye=l.getUint8(),e=0;Ye>e;e++){for(Ne=new Y,Ne.name=Oe[Ee++],ke=this.boneSlotDic[Ne.name],We=l.getUint8(),i=0;We>i;i++){if(Le=new V,this.skinSlotDisplayDataArr.push(Le),Le.name=Oe[Ee++],Le.attachmentName=Oe[Ee++],Le.transform=new X,Le.transform.scX=l.getFloat32(),Le.transform.skX=l.getFloat32(),Le.transform.skY=l.getFloat32(),Le.transform.scY=l.getFloat32(),Le.transform.x=l.getFloat32(),Le.transform.y=l.getFloat32(),Ne.displayArr.push(Le),Le.width=l.getFloat32(),Le.height=l.getFloat32(),Le.type=l.getUint8(),Le.verLen=l.getUint16(),G=l.getUint16(),G>0)for(Le.bones=[],a=0;G>a;a++){var He=l.getUint16();Le.bones.push(He)}if(Ke=l.getUint16(),Ke>0)for(Le.uvs=[],a=0;Ke>a;a++)Le.uvs.push(l.getFloat32());if(Xe=l.getUint16(),Xe>0)for(Le.weights=[],a=0;Xe>a;a++)Le.weights.push(l.getFloat32());if(Ge=l.getUint16(),Ge>0)for(Le.triangles=[],a=0;Ge>a;a++)Le.triangles.push(l.getUint16());if(ze=l.getUint16(),ze>0)for(Le.vertices=[],a=0;ze>a;a++)Le.vertices.push(l.getFloat32());if(qe=l.getUint16(),qe>0)for(Le.lengths=[],a=0;qe>a;a++)Le.lengths.push(l.getFloat32())}Be.slotArr.push(Ne)}this.skinDic[Be.name]=Be,this.skinDataArray.push(Be)}var $e=l.getUint8();1==$e?(this.yReverseMatrix=new f(1,0,0,-1,0,0),W&&W.setTempMatrix(this.yReverseMatrix)):W&&W.setTempMatrix(new f),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},a.getTexture=function(t){var e=this.subTextureDic[t];return e||(e=this.subTextureDic[t.substr(0,t.length-1)]),null==e?this._mainTexture:e},a.showSkinByIndex=function(t,e,i){if(void 0===i&&(i=!0),0>e&&e>=this.skinDataArray.length)return!1;var a,r,s=0,n=0,h=this.skinDataArray[e];if(h){for(s=0,n=h.slotArr.length;n>s;s++)r=h.slotArr[s],r&&(a=t[r.name],a&&(a.showSlotData(r,i),i&&"undefined"!=a.attachmentName&&"null"!=a.attachmentName?a.showDisplayByName(a.attachmentName):a.showDisplayByIndex(a.displayIndex)));return!0}return!1},a.getSkinIndexByName=function(t){for(var e,i=0,a=this.skinDataArray.length;a>i;i++)if(e=this.skinDataArray[i],e.name==t)return i;return-1},a.getGrahicsDataWithCache=function(t,e){return this._graphicsCache[t][e]},a.setGrahicsDataWithCache=function(t,e,i){this._graphicsCache[t][e]=i},a.deleteAniData=function(t){if(this._anis[t]){var e=this._anis[t];e.bone3DMap=null,e.nodes=null}},a.destroy=function(){this._isDestroyed=!0;var t;for(var i in this.subTextureDic)t=this.subTextureDic[i],t&&t.destroy();var i;for(i in this._textureDic)t=this._textureDic[i],t&&t.destroy();for(var a,r=0,s=this.skinSlotDisplayDataArr.length;s>r;r++)a=this.skinSlotDisplayDataArr[r],a.destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete e.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},a.getAniNameByIndex=function(t){var e=this.getAnimation(t);return e?e.name:null},s(0,a,"rate",function(){return this._rate},function(t){this._rate=t}),e.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",e.TEMPLET_DICTIONARY=null,e}(Z))}(window,document,Laya);
!function(e,t,n){{var i=(n.un,n.uns,n.static),r=n.class,a=n.getset,o=n.__newvec,s=(laya.ani.AnimationState,laya.ani.AnimationTemplet,laya.maths.Arith,laya.webgl.resource.BaseTexture),l=laya.utils.Browser,h=laya.webgl.utils.Buffer,c=laya.utils.Byte,_=laya.layagl.CommandEncoder,u=laya.components.Component,d=n.Config,f=(laya.resource.Context,laya.events.Event,laya.events.EventDispatcher),m=laya.utils.Handler,p=laya.layagl.LayaGL,v=laya.layagl.LayaGLRunner,E=laya.net.Loader,T=laya.net.LoaderManager,g=laya.maths.MathUtil,S=laya.display.Node,x=laya.renders.Render,D=laya.webgl.utils.RenderState2D,M=(laya.webgl.resource.RenderTexture2D,laya.resource.Resource),A=laya.utils.RunDriver,R=(laya.components.Script,laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),I=laya.display.Sprite,C=(laya.display.SpriteConst,laya.utils.Stat),y=laya.webgl.submit.SubmitKey,O=laya.webgl.resource.Texture2D,L=(laya.utils.Timer,laya.net.URL),V=(laya.utils.Utils,laya.webgl.WebGL),w=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D}n.interface("laya.d3.core.IClone"),n.interface("laya.d3.graphics.IVertex"),n.interface("laya.d3.core.scene.ITreeNode");{var N=function(){function e(){this._defaultPhysicsMemory=16,this._editerEnvironment=!1,this.isAntialias=!0,this.isAlpha=!1,this.premultipliedAlpha=!0,this.isStencil=!0}r(e,"Config3D");var t=e.prototype;return a(0,t,"defaultPhysicsMemory",function(){return this._defaultPhysicsMemory},function(e){if(16>e)throw"defaultPhysicsMemory must large than 16M";this._defaultPhysicsMemory=e}),i(e,["_defaultConfig",function(){return this._defaultConfig=new e}]),e}(),P=function(){function e(){}return r(e,"laya.d3.animation.AnimationClipParser03"),e.READ_DATA=function(){e._DATA.offset=e._reader.getUint32(),e._DATA.size=e._reader.getUint32()},e.READ_BLOCK=function(){for(var t=e._BLOCK.count=e._reader.getUint16(),n=e._BLOCK.blockStarts=[],i=e._BLOCK.blockLengths=[],r=0;t>r;r++)n.push(e._reader.getUint32()),i.push(e._reader.getUint32())},e.READ_STRINGS=function(){var t=e._reader.getUint32(),n=e._reader.getUint16(),i=e._reader.pos;e._reader.pos=t+e._DATA.offset;for(var r=0;n>r;r++)e._strings[r]=e._reader.readUTFString();e._reader.pos=i},e.parse=function(t,n){e._animationClip=t,e._reader=n;n.__getBuffer();e.READ_DATA(),e.READ_BLOCK(),e.READ_STRINGS();for(var i=0,r=e._BLOCK.count;r>i;i++){var a=n.getUint16(),o=e._strings[a],s=e["READ_"+o];if(null==s)throw new Error("model file err,no this function:"+a+" "+o);s.call()}},e.READ_ANIMATIONS=function(){var t,n=0,i=0,r=e._reader,a=(r.__getBuffer(),[]),o=r.getUint16();for(a.length=o,n=0;o>n;n++)a[n]=r.getFloat32();var s=e._animationClip;s.name=e._strings[r.getUint16()];s._duration=r.getFloat32();s.islooping=!!r.getByte(),s._frameRate=r.getInt16();var l=r.getInt16(),h=s._nodes;h.count=l;var c=s._nodesMap={},_=s._nodesDic={};for(n=0;l>n;n++){t=new B,h.setNodeByIndex(n,t),t._indexInList=n;var u=t.type=r.getUint8(),d=r.getUint16();for(t._setOwnerPathCount(d),i=0;d>i;i++)t._setOwnerPathByIndex(i,e._strings[r.getUint16()]);var f=t._joinOwnerPath("/"),m=c[f];m||(c[f]=m=[]),m.push(t),t.propertyOwner=e._strings[r.getUint16()];var p=r.getUint16();for(t._setPropertyCount(p),i=0;p>i;i++)t._setPropertyByIndex(i,e._strings[r.getUint16()]);var v=f+"."+t.propertyOwner+"."+t._joinProperty(".");_[v]=t,t.fullPath=v;var E=r.getUint16();t._setKeyframeCount(E);var T=0/0;for(i=0;E>i;i++)switch(u){case 0:var g=new On;t._setKeyframeByIndex(i,g),T=g.time=a[r.getUint16()],g.inTangent=r.getFloat32(),g.outTangent=r.getFloat32(),g.value=r.getFloat32();break;case 1:case 3:case 4:var S=new yn;t._setKeyframeByIndex(i,S),T=S.time=a[r.getUint16()];for(var x=S.inTangent=new Float32Array(3),D=S.outTangent=new Float32Array(3),M=S.value=new Float32Array(3),A=0;3>A;A++)x[A]=r.getFloat32();for(A=0;3>A;A++)D[A]=r.getFloat32();for(A=0;3>A;A++)M[A]=r.getFloat32();t.data=new Float32Array(3);break;case 2:for(S=new yn,t._setKeyframeByIndex(i,S),T=S.time=a[r.getUint16()],x=S.inTangent=new Float32Array(4),D=S.outTangent=new Float32Array(4),M=S.value=new Float32Array(4),A=0;4>A;A++)x[A]=r.getFloat32();for(A=0;4>A;A++)D[A]=r.getFloat32();for(A=0;4>A;A++)M[A]=r.getFloat32();t.data=new Float32Array(4);break;default:throw"AnimationClipParser03:unknown type."}}var R=r.getUint16();for(n=0;R>n;n++){var I=new b;I.time=r.getFloat32(),I.eventName=e._strings[r.getUint16()];var C,y=r.getUint16();for(y>0&&(I.params=C=[]),i=0;y>i;i++){var O=r.getByte();switch(O){case 0:C.push(!!r.getByte());break;case 1:C.push(r.getInt32());break;case 2:C.push(r.getFloat32());break;case 3:C.push(e._strings[r.getUint16()]);break;default:throw new Error("unknown type.")}}s.addEvent(I)}},e._animationClip=null,e._reader=null,e._strings=[],i(e,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),e}(),b=function(){function e(){this.time=0/0,this.eventName=null,this.params=null}return r(e,"laya.d3.animation.AnimationEvent"),e}(),F=function(){function e(e,t,n,i){this._children=[],this.transform=new Dn(this,e,t,n,i)}r(e,"laya.d3.animation.AnimationNode");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.addChild=function(e){e._parent=this,e.transform.setParent(this.transform),this._children.push(e)},t.removeChild=function(e){var t=this._children.indexOf(e);-1!==t&&this._children.splice(t,1)},t.getChildByName=function(e){for(var t=0,n=this._children.length;n>t;t++){var i=this._children[t];if(i.name===e)return i}return null},t.getChildByIndex=function(e){return this._children[e]},t.getChildCount=function(){return this._children.length},t.cloneTo=function(e){var t=e;t.name=this.name;for(var n=0,i=this._children.length;i>n;n++){var r=this._children[n],a=r.clone();t.addChild(a);var o=r.transform,s=a.transform,l=s.localPosition,h=s.localRotation,c=s.localScale;o.localPosition.cloneTo(l),o.localRotation.cloneTo(h),o.localScale.cloneTo(c),s.localPosition=l,s.localRotation=h,s.localScale=c}},t.clone=function(){var t=new e;return this.cloneTo(t),t},t._cloneNative=function(t,n,i,r,a,o,s){var l=s._nativeCurCloneCount;a[l]=o;var h=new Float32Array(t.buffer,3*l*4,3),c=new Float32Array(n.buffer,4*l*4,4),_=new Float32Array(i.buffer,3*l*4,3),u=new Float32Array(r.buffer,16*l*4,16),d=new e(h,c,_,u);return d._worldMatrixIndex=l,this._cloneToNative(d,t,n,i,r,a,l,s),d},t._cloneToNative=function(e,t,n,i,r,a,o,s){var l=e;l.name=this.name;for(var h=0,c=this._children.length;c>h;h++){var _=this._children[h];s._nativeCurCloneCount++;var u=_._cloneNative(t,n,i,r,a,o,s);l.addChild(u);var d=_.transform,f=u.transform,m=f.localPosition,p=f.localRotation,v=f.localScale;d.localPosition.cloneTo(m),d.localRotation.cloneTo(p),d.localScale.cloneTo(v),f.localPosition=m,f.localRotation=p,f.localScale=v}},e}(),B=function(){function e(){this._indexInList=0,this.type=0,this.fullPath=null,this.propertyOwner=null,this.data=null,this._ownerPath=[],this._propertys=[],this._keyFrames=[]}r(e,"laya.d3.animation.KeyframeNode");var t=e.prototype;return t._setOwnerPathCount=function(e){this._ownerPath.length=e},t._setOwnerPathByIndex=function(e,t){this._ownerPath[e]=t},t._joinOwnerPath=function(e){return this._ownerPath.join(e)},t._setPropertyCount=function(e){this._propertys.length=e},t._setPropertyByIndex=function(e,t){this._propertys[e]=t},t._joinProperty=function(e){return this._propertys.join(e)},t._setKeyframeCount=function(e){this._keyFrames.length=e},t._setKeyframeByIndex=function(e,t){this._keyFrames[e]=t},t.getOwnerPathByIndex=function(e){return this._ownerPath[e]},t.getPropertyByIndex=function(e){return this._propertys[e]},t.getKeyframeByIndex=function(e){return this._keyFrames[e]},a(0,t,"ownerPathCount",function(){return this._ownerPath.length}),a(0,t,"propertyCount",function(){return this._propertys.length}),a(0,t,"keyFramesCount",function(){return this._keyFrames.length}),e}(),U=function(){function e(){this._nodes=[]}r(e,"laya.d3.animation.KeyframeNodeList");var t=e.prototype;return t.getNodeByIndex=function(e){return this._nodes[e]},t.setNodeByIndex=function(e,t){this._nodes[e]=t},a(0,t,"count",function(){return this._nodes.length},function(e){this._nodes.length=e}),e}(),G=function(){function e(e){this._statesMap={},this.playOnWake=!0,this._playType=-1,this._crossMark=0,this._crossDuration=-1,this._crossNodesOwnersIndicesMap={},this._crossNodesOwnersCount=0,this._crossNodesOwners=[],this._defaultState=null,this._currentPlayState=null,this._states=[],this._playStateInfo=new H,this._crossPlayStateInfo=new H,this._srcCrossClipNodeIndices=[],this._destCrossClipNodeIndices=[],this.name=e,this.defaultWeight=1,this.blendingMode=laya.d3.component.AnimatorControllerLayer.BLENDINGMODE_OVERRIDE}r(e,"laya.d3.component.AnimatorControllerLayer");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.getAnimatorState=function(e){var t=this._statesMap.indexOf(e);return-1===t?null:this._states[t]},t.destroy=function(){this._statesMap=null,this._states=null,this._playStateInfo=null,this._crossPlayStateInfo=null},t.cloneTo=function(e){var t=e;t.name=this.name,t.blendingMode=this.blendingMode,t.defaultWeight=this.defaultWeight,t.playOnWake=this.playOnWake},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},e.BLENDINGMODE_OVERRIDE=0,e.BLENDINGMODE_ADDTIVE=1,e}(),H=function(){function e(){}r(e,"laya.d3.component.AnimatorPlayState");var t=e.prototype;return t._resetPlayState=function(e){this._finish=!1,this._startPlayTime=e,this._elapsedTime=e,this._playEventIndex=0},t._cloneTo=function(e){e._finish=this._finish,e._startPlayTime=this._startPlayTime,e._elapsedTime=this._elapsedTime,e._playEventIndex=this._playEventIndex},a(0,t,"normalizedTime",function(){return this._normalizedTime}),a(0,t,"duration",function(){return this._duration}),e}(),z=function(){function e(){this.speed=1,this.clipStart=0,this.clipEnd=1,this._nodeOwners=[]}r(e,"laya.d3.component.AnimatorState");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t._initFrameIndices=function(e){this._currentFrameIndices=new Uint16Array(e._nodes.count)},t._resetFrameIndices=function(){for(var e=0,t=this._currentFrameIndices.length;t>e;e++)this._currentFrameIndices[e]=0},t.cloneTo=function(e){var t=e;t.name=this.name,t.speed=this.speed,t.clipStart=this.clipStart,t.clipEnd=this.clipEnd,t.clip=this._clip},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,t,"clip",function(){return this._clip},function(e){this._clip=e,this._initFrameIndices(e)}),e}(),k=function(){function e(){this.indexInList=-1,this.referenceCount=0,this.updateMark=-1,this.type=-1,this.fullPath=null,this.propertyOwner=null,this.property=null,this.defaultValue=null,this.crossFixedValue=null}r(e,"laya.d3.component.KeyframeNodeOwner");var t=e.prototype;return t.saveCrossFixedValue=function(){var e=this.propertyOwner;if(e)switch(this.type){case 0:for(var t=this.property,n=t.length-1,i=0;n>i&&(e=e[t[i]],e);i++);this.crossFixedValue=e[t[n]];break;case 1:var r=e.localPosition.elements;this.crossFixedValue||(this.crossFixedValue=new Float32Array(3)),this.crossFixedValue[0]=r[0],this.crossFixedValue[1]=r[1],this.crossFixedValue[2]=r[2];break;case 2:var a=e.localRotation.elements;this.crossFixedValue||(this.crossFixedValue=new Float32Array(4)),this.crossFixedValue[0]=a[0],this.crossFixedValue[1]=a[1],this.crossFixedValue[2]=a[2],this.crossFixedValue[3]=a[3];break;case 3:var o=e.localScale.elements;this.crossFixedValue||(this.crossFixedValue=new Float32Array(3)),this.crossFixedValue[0]=o[0],this.crossFixedValue[1]=o[1],this.crossFixedValue[2]=o[2];break;case 4:var s=e.localRotationEuler.elements;this.crossFixedValue||(this.crossFixedValue=new Float32Array(3)),this.crossFixedValue[0]=s[0],this.crossFixedValue[1]=s[1],this.crossFixedValue[2]=s[2];break;default:throw"Animator:unknown type."}},e}(),W=function(){function e(){this.length=0,this.elements=[]}r(e,"laya.d3.component.ListPool");var t=e.prototype;return t.add=function(e){this.length===this.elements.length?this.elements.push(e):this.elements[this.length]=e,e._setIndexInList(this.length++)},t.remove=function(e){this.length--;var t=e._getIndexInList();if(t!==this.length){var n=this.elements[this.length];this.elements[t]=n,n._setIndexInList(t),e._setIndexInList(-1)}},e}(),X=function(){function e(){this._vertexArrayObject=p.instance.createVertexArray()}r(e,"laya.d3.core.BufferState");var t=e.prototype;return t.bindBufferState=function(){w.bindVertexArray(p.instance,this._vertexArrayObject)},t.applyVertexBuffer=function(e){var t=p.instance,n=e.vertexDeclaration,i=null;i=x.isConchApp?n._shaderValues._nativeArray:n._shaderValues._data,e.bind();for(var r in i){var a=parseInt(r),o=i[r];t.enableVertexAttribArray(a),t.vertexAttribPointer(a,o[0],o[1],o[2],o[3],o[4])}},t.applyVertexBuffers=function(e){for(var t=p.instance,n=0,i=e.length;i>n;n++){var r=e[n],a=r.vertexDeclaration,o=a._shaderValues._data;r.bind();for(var s in o){var l=parseInt(s),h=o[s];t.enableVertexAttribArray(l),t.vertexAttribPointer(l,h[0],h[1],h[2],h[3],h[4])}}},t.applyIndexBuffer=function(e){e._bindForVAO()},t.unBindBufferState=function(){w.bindVertexArray(p.instance,null)},t.destroy=function(){p.instance.deleteVertexArray(this._vertexArrayObject)},e}(),Y=function(){function e(){this.time=0/0}r(e,"laya.d3.core.Keyframe");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;t.time=this.time},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},e}(),Z=function(){function e(){this._destroyed=!1}r(e,"laya.d3.core.GeometryElement");var t=e.prototype;return n.imps(t,{"laya.resource.IDestroy":!0}),t._applyBufferState=function(e){this._bufferState=e},t._prepareRender=function(){return!0},t._render=function(){throw new Error("GeometryElement:must override it.")},t.destroy=function(){this._destroyed||(this._destroyed=!0,this._bufferState=null)},a(0,t,"destroyed",function(){return this._destroyed}),e}(),j=function(){function e(e,t){this._mode=0,this._maxColorRGBKeysCount=0,this._maxColorAlphaKeysCount=0,this._colorRGBKeysCount=0,this._colorAlphaKeysCount=0,this._alphaElements=null,this._rgbElements=null,this._maxColorRGBKeysCount=e,this._maxColorAlphaKeysCount=t,this._rgbElements=new Float32Array(4*e),this._alphaElements=new Float32Array(2*t)}r(e,"laya.d3.core.Gradient");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.addColorRGB=function(e,t){if(this._colorRGBKeysCount<this._maxColorRGBKeysCount){var n=4*this._colorRGBKeysCount;this._rgbElements[n]=e,this._rgbElements[n+1]=t.r,this._rgbElements[n+2]=t.g,this._rgbElements[n+3]=t.b,this._colorRGBKeysCount++}else console.warn("Gradient:warning:data count must lessEqual than "+this._maxColorRGBKeysCount)},t.addColorAlpha=function(e,t){if(this._colorAlphaKeysCount<this._maxColorAlphaKeysCount){var n=2*this._colorAlphaKeysCount;this._alphaElements[n]=e,this._alphaElements[n+1]=t,this._colorAlphaKeysCount++}else console.warn("Gradient:warning:data count must lessEqual than "+this._maxColorAlphaKeysCount)},t.updateColorRGB=function(e,t,n){if(e<this._colorRGBKeysCount){var i=4*e;this._rgbElements[i]=t,this._rgbElements[i+1]=n.r,this._rgbElements[i+2]=n.g,this._rgbElements[i+3]=n.b}else console.warn("Gradient:warning:index must lessEqual than colorRGBKeysCount:"+this._colorRGBKeysCount)},t.updateColorAlpha=function(e,t,n){if(e<this._colorAlphaKeysCount){var i=2*e;this._alphaElements[i]=t,this._alphaElements[i+1]=n}else console.warn("Gradient:warning:index must lessEqual than colorAlphaKeysCount:"+this._colorAlphaKeysCount)},t.cloneTo=function(e){var t=e,n=0,i=0;t._colorAlphaKeysCount=this._colorAlphaKeysCount;var r=t._alphaElements;for(r.length=this._alphaElements.length,n=0,i=this._alphaElements.length;i>n;n++)r[n]=this._alphaElements[n];t._colorRGBKeysCount=this._colorRGBKeysCount;var a=t._rgbElements;for(a.length=this._rgbElements.length,n=0,i=this._rgbElements.length;i>n;n++)a[n]=this._rgbElements[n]},t.clone=function(){var t=new e(this._maxColorRGBKeysCount,this._maxColorAlphaKeysCount);return this.cloneTo(t),t},a(0,t,"colorRGBKeysCount",function(){return this._colorRGBKeysCount/4}),a(0,t,"mode",function(){return this._mode},function(e){this._mode=e}),a(0,t,"colorAlphaKeysCount",function(){return this._colorAlphaKeysCount/2}),a(0,t,"maxColorRGBKeysCount",function(){return this._maxColorRGBKeysCount}),a(0,t,"maxColorAlphaKeysCount",function(){return this._maxColorAlphaKeysCount}),e}(),K=(function(){function e(){}return r(e,"laya.d3.core.GradientMode"),e.Blend=0,e.Fixed=1,e}(),function(){function e(e,t,n,i){this._datas=null,this._w=0,this._h=0,this._minHeight=0/0,this._maxHeight=0/0,this._datas=[],this._w=e,this._h=t,this._minHeight=n,this._maxHeight=i}r(e,"laya.d3.core.HeightMap");var t=e.prototype;return t._inBounds=function(e,t){return e>=0&&e<this._h&&t>=0&&t<this._w},t.getHeight=function(e,t){return this._inBounds(e,t)?this._datas[e][t]:0/0},a(0,t,"width",function(){return this._w}),a(0,t,"height",function(){return this._h}),a(0,t,"maxHeight",function(){return this._maxHeight}),a(0,t,"minHeight",function(){return this._minHeight}),e.creatFromMesh=function(t,n,i,r){for(var a=[],o=[],s=t.subMeshCount,l=0;s>l;l++){for(var h=t._getSubMesh(l),c=h._vertexBuffer,_=c.getData(),u=[],d=0;d<_.length;d+=c.vertexDeclaration.vertexStride/4){var f=new Di(_[d+0],_[d+1],_[d+2]);u.push(f)}a.push(u);var m=h._indexBuffer;o.push(m.getData())}var p=t.boundingBox,v=p.min.x,E=p.min.z,T=p.max.x,g=p.max.z,S=p.min.y,x=p.max.y,D=T-v,M=g-E,A=r.elements[0]=D/(n-1),R=r.elements[1]=M/(i-1),I=new e(n,i,S,x),C=e._tempRay,y=C.direction.elements;y[0]=0,y[1]=-1,y[2]=0;var O=.1,L=x+O;C.origin.elements[1]=L;for(var V=0;i>V;V++){var w=E+V*R;I._datas[V]=[];for(var N=0;n>N;N++){var P=v+N*A,b=C.origin.elements;b[0]=P,b[2]=w;var F=e._getPosition(C,a,o);I._datas[V][N]=F===Number.MAX_VALUE?0/0:L-F}}return I},e.createFromImage=function(t,n,i){for(var r=t.width,a=t.height,o=new e(r,a,n,i),s=(i-n)/254,l=t.getPixels(),h=0,c=0;a>c;c++)for(var _=o._datas[c]=[],u=0;r>u;u++){var d=l[h++],f=l[h++],m=l[h++],p=l[h++];_[u]=255==d&&255==f&&255==m&&255==p?0/0:(d+f+m)/3*s+n}return o},e._getPosition=function(e,t,n){for(var i=Number.MAX_VALUE,r=0;r<t.length;r++)for(var a=t[r],o=n[r],s=0;s<o.length;s+=3){var l=a[o[s+0]],h=a[o[s+1]],c=a[o[s+2]],_=Tn.rayIntersectsTriangle(e,l,h,c);!isNaN(_)&&i>_&&(i=_)}return i},i(e,["_tempRay",function(){return this._tempRay=new jt(new Di,new Di)}]),e}()),q=function(){function e(e){this._scene=e}r(e,"laya.d3.core.Layer");var t=e.prototype;return a(0,t,"number",function(){return this._number}),e.maxCount=31,e}(),Q=function(){function e(){this.cull=0,this.blend=0,this.srcBlend=0,this.dstBlend=0,this.srcBlendRGB=0,this.dstBlendRGB=0,this.srcBlendAlpha=0,this.dstBlendAlpha=0,this.blendConstColor=null,this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=0,this.depthWrite=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new Mi(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=515,this.depthWrite=!0}r(e,"laya.d3.core.material.RenderState");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t._setRenderStateBlendDepth=function(){var e=p.instance;switch(w.setDepthMask(e,this.depthWrite),0===this.depthTest?w.setDepthTest(e,!1):(w.setDepthTest(e,!0),w.setDepthFunc(e,this.depthTest)),this.blend){case 0:w.setBlend(e,!1);break;case 1:w.setBlend(e,!0),w.setBlendFunc(e,this.srcBlend,this.dstBlend);break;case 2:w.setBlend(e,!0)}},t._setRenderStateFrontFace=function(e,t){var n=p.instance,i=0;switch(this.cull){case 0:w.setCullFace(n,!1);break;case 1:w.setCullFace(n,!0),i=e?t&&t._isFrontFaceInvert?2305:2304:t&&t._isFrontFaceInvert?2304:2305,w.setFrontFace(n,i);break;case 2:w.setCullFace(n,!0),i=e?t&&t._isFrontFaceInvert?2304:2305:t&&t._isFrontFaceInvert?2305:2304,w.setFrontFace(n,i)}},t.cloneTo=function(e){var t=e;t.cull=this.cull,t.blend=this.blend,t.srcBlend=this.srcBlend,t.dstBlend=this.dstBlend,t.srcBlendRGB=this.srcBlendRGB,t.dstBlendRGB=this.dstBlendRGB,t.srcBlendAlpha=this.srcBlendAlpha,t.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(t.blendConstColor),t.blendEquation=this.blendEquation,t.blendEquationRGB=this.blendEquationRGB,t.blendEquationAlpha=this.blendEquationAlpha,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},e.CULL_NONE=0,e.CULL_FRONT=1,e.CULL_BACK=2,e.BLEND_DISABLE=0,e.BLEND_ENABLE_ALL=1,e.BLEND_ENABLE_SEPERATE=2,e.BLENDPARAM_ZERO=0,e.BLENDPARAM_ONE=1,e.BLENDPARAM_SRC_COLOR=768,e.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,e.BLENDPARAM_DST_COLOR=774,e.BLENDPARAM_ONE_MINUS_DST_COLOR=775,e.BLENDPARAM_SRC_ALPHA=770,e.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,e.BLENDPARAM_DST_ALPHA=772,e.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,e.BLENDPARAM_SRC_ALPHA_SATURATE=776,e.BLENDEQUATION_ADD=0,e.BLENDEQUATION_SUBTRACT=1,e.BLENDEQUATION_REVERSE_SUBTRACT=2,e.DEPTHTEST_OFF=0,e.DEPTHTEST_NEVER=512,e.DEPTHTEST_LESS=513,e.DEPTHTEST_EQUAL=514,e.DEPTHTEST_LEQUAL=515,e.DEPTHTEST_GREATER=516,e.DEPTHTEST_NOTEQUAL=517,e.DEPTHTEST_GEQUAL=518,e.DEPTHTEST_ALWAYS=519,e}(),$=function(){function e(e,t,n){this._time=0/0,this._minCount=0,this._maxCount=0,this._time=e,this._minCount=t,this._maxCount=n}r(e,"laya.d3.core.particleShuriKen.module.Burst");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;t._time=this._time,t._minCount=this._minCount,t._maxCount=this._maxCount},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,t,"time",function(){return this._time}),a(0,t,"minCount",function(){return this._minCount}),a(0,t,"maxCount",function(){return this._maxCount}),e}(),J=function(){function e(e){this._color=null,this.enbale=!1,this._color=e}r(e,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var t=e.prototype;return t.cloneTo=function(e){var t=e;this._color.cloneTo(t._color),t.enbale=this.enbale},t.clone=function(){var e;switch(this._color.type){case 0:e=it.createByConstant(this._color.constant.clone());break;case 1:e=it.createByGradient(this._color.gradient.clone());break;case 2:e=it.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:e=it.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var t=new this.constructor(e);return t.enbale=this.enbale,t},a(0,t,"color",function(){return this._color}),e}(),et=function(){function e(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}r(e,"laya.d3.core.particleShuriKen.module.Emission");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),t.destroy=function(){this._bursts=null,this._destroyed=!0},t.getBurstsCount=function(){return this._bursts.length},t.getBurstByIndex=function(e){return this._bursts[e]},t.addBurst=function(e){var t=this._bursts.length;if(t>0)for(var n=0;t>n;n++)this._bursts[n].time>e.time&&this._bursts.splice(n,0,e);this._bursts.push(e)},t.removeBurst=function(e){var t=this._bursts.indexOf(e);-1!==t&&this._bursts.splice(t,1)},t.removeBurstByIndex=function(e){this._bursts.splice(e,1)},t.clearBurst=function(){this._bursts.length=0},t.cloneTo=function(e){var t=e,n=t._bursts;n.length=this._bursts.length;for(var i=0,r=this._bursts.length;r>i;i++){var a=n[i];a?this._bursts[i].cloneTo(a):n[i]=this._bursts[i].clone()}t._emissionRate=this._emissionRate,t.enbale=this.enbale},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,t,"destroyed",function(){return this._destroyed}),a(0,t,"emissionRate",function(){return this._emissionRate},function(e){if(0>e)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=e}),e}(),tt=function(){function e(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}r(e,"laya.d3.core.particleShuriKen.module.FrameOverTime");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;t._type=this._type,t._constant=this._constant,this._overTime.cloneTo(t._overTime),t._constantMin=this._constantMin,t._constantMax=this._constantMax,this._overTimeMin.cloneTo(t._overTimeMin),this._overTimeMax.cloneTo(t._overTimeMax)},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,t,"frameOverTimeData",function(){return this._overTime}),a(0,t,"constant",function(){return this._constant}),a(0,t,"type",function(){return this._type}),a(0,t,"frameOverTimeDataMin",function(){return this._overTimeMin}),a(0,t,"constantMin",function(){return this._constantMin}),a(0,t,"frameOverTimeDataMax",function(){return this._overTimeMax}),a(0,t,"constantMax",function(){return this._constantMax}),e.createByConstant=function(t){var n=new e;return n._type=0,n._constant=t,n},e.createByOverTime=function(t){var n=new e;return n._type=1,n._overTime=t,n},e.createByRandomTwoConstant=function(t,n){var i=new e;return i._type=2,i._constantMin=t,i._constantMax=n,i},e.createByRandomTwoOverTime=function(t,n){var i=new e;return i._type=3,i._overTimeMin=t,i._overTimeMax=n,i},e}(),nt=function(){function e(){this._type=0,this._separateAxes=!1,this._constant=0/0,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=0/0,this._constantMax=0/0,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}r(e,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;t._type=this._type,t._separateAxes=this._separateAxes,t._constant=this._constant,this._constantSeparate.cloneTo(t._constantSeparate),this._gradient.cloneTo(t._gradient),this._gradientX.cloneTo(t._gradientX),this._gradientY.cloneTo(t._gradientY),this._gradientZ.cloneTo(t._gradientZ),t._constantMin=this._constantMin,t._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(t._constantMinSeparate),this._constantMaxSeparate.cloneTo(t._constantMaxSeparate),this._gradientMin.cloneTo(t._gradientMin),this._gradientMax.cloneTo(t._gradientMax),this._gradientXMin.cloneTo(t._gradientXMin),this._gradientXMax.cloneTo(t._gradientXMax),this._gradientYMin.cloneTo(t._gradientYMin),this._gradientYMax.cloneTo(t._gradientYMax),this._gradientZMin.cloneTo(t._gradientZMin),this._gradientZMax.cloneTo(t._gradientZMax)},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,t,"gradientZ",function(){return this._gradientZ}),a(0,t,"constant",function(){return this._constant}),a(0,t,"gradient",function(){return this._gradient}),a(0,t,"separateAxes",function(){return this._separateAxes}),a(0,t,"type",function(){return this._type}),a(0,t,"constantSeparate",function(){return this._constantSeparate}),a(0,t,"gradientX",function(){return this._gradientX}),a(0,t,"gradientY",function(){return this._gradientY}),a(0,t,"gradientW",function(){return this._gradientW}),a(0,t,"gradientMin",function(){return this._gradientMin}),a(0,t,"constantMin",function(){return this._constantMin}),a(0,t,"gradientMax",function(){return this._gradientMax}),a(0,t,"constantMax",function(){return this._constantMax}),a(0,t,"gradientWMin",function(){return this._gradientWMin}),a(0,t,"constantMinSeparate",function(){return this._constantMinSeparate}),a(0,t,"constantMaxSeparate",function(){return this._constantMaxSeparate}),a(0,t,"gradientXMin",function(){return this._gradientXMin}),a(0,t,"gradientXMax",function(){return this._gradientXMax}),a(0,t,"gradientWMax",function(){return this._gradientWMax}),a(0,t,"gradientYMin",function(){return this._gradientYMin}),a(0,t,"gradientYMax",function(){return this._gradientYMax}),a(0,t,"gradientZMin",function(){return this._gradientZMin}),a(0,t,"gradientZMax",function(){return this._gradientZMax}),e.createByConstant=function(t){var n=new e;return n._type=0,n._separateAxes=!1,n._constant=t,n},e.createByConstantSeparate=function(t){var n=new e;return n._type=0,n._separateAxes=!0,n._constantSeparate=t,n},e.createByGradient=function(t){var n=new e;return n._type=1,n._separateAxes=!1,n._gradient=t,n},e.createByGradientSeparate=function(t,n,i,r){var a=new e;return a._type=1,a._separateAxes=!0,a._gradientX=t,a._gradientY=n,a._gradientZ=i,a._gradientW=r,a},e.createByRandomTwoConstant=function(t,n){var i=new e;return i._type=2,i._separateAxes=!1,i._constantMin=t,i._constantMax=n,i},e.createByRandomTwoConstantSeparate=function(t,n){var i=new e;return i._type=2,i._separateAxes=!0,i._constantMinSeparate=t,i._constantMaxSeparate=n,i},e.createByRandomTwoGradient=function(t,n){var i=new e;return i._type=3,i._separateAxes=!1,i._gradientMin=t,i._gradientMax=n,i},e.createByRandomTwoGradientSeparate=function(t,n,i,r,a,o,s,l){var h=new e;return h._type=3,h._separateAxes=!0,h._gradientXMin=t,h._gradientXMax=n,h._gradientYMin=i,h._gradientYMax=r,h._gradientZMin=a,h._gradientZMax=o,h._gradientWMin=s,h._gradientWMax=l,h},e}(),it=function(){function e(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}r(e,"laya.d3.core.particleShuriKen.module.GradientColor");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;t._type=this._type,this._constant.cloneTo(t._constant),this._constantMin.cloneTo(t._constantMin),this._constantMax.cloneTo(t._constantMax),this._gradient.cloneTo(t._gradient),this._gradientMin.cloneTo(t._gradientMin),this._gradientMax.cloneTo(t._gradientMax)},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,t,"gradient",function(){return this._gradient}),a(0,t,"constant",function(){return this._constant}),a(0,t,"type",function(){return this._type}),a(0,t,"gradientMin",function(){return this._gradientMin}),a(0,t,"constantMin",function(){return this._constantMin}),a(0,t,"gradientMax",function(){return this._gradientMax}),a(0,t,"constantMax",function(){return this._constantMax}),e.createByConstant=function(t){var n=new e;return n._type=0,n._constant=t,n},e.createByGradient=function(t){var n=new e;return n._type=1,n._gradient=t,n},e.createByRandomTwoConstant=function(t,n){var i=new e;return i._type=2,i._constantMin=t,i._constantMax=n,i},e.createByRandomTwoGradient=function(t,n){var i=new e;return i._type=3,i._gradientMin=t,i._gradientMax=n,i},e}(),rt=function(){function e(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}r(e,"laya.d3.core.particleShuriKen.module.GradientDataInt");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.add=function(e,t){this._currentLength<8?(6===this._currentLength&&1!==e&&(e=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=e,this._elements[this._currentLength++]=t):console.log("Warning:data count must lessEqual than 4")},t.cloneTo=function(e){var t=e;t._currentLength=this._currentLength;var n=t._elements;n.length=this._elements.length;for(var i=0,r=this._elements.length;r>i;i++)n[i]=this._elements[i]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,t,"gradientCount",function(){return this._currentLength/2}),e}(),at=function(){function e(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}r(e,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.add=function(e,t){this._currentLength<8?(6===this._currentLength&&1!==e&&(e=1,console.log("GradientDataNumber warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=e,this._elements[this._currentLength++]=t):console.log("GradientDataNumber warning:data count must lessEqual than 4")
},t.getKeyByIndex=function(e){return this._elements[2*e]},t.getValueByIndex=function(e){return this._elements[2*e+1]},t.getAverageValue=function(){for(var e=0,t=0,n=this._currentLength-2;n>t;t+=2){var i=this._elements[t+1];i+=this._elements[t+3],i*=this._elements[t+2]-this._elements[t]}return e/2},t.cloneTo=function(e){var t=e;t._currentLength=this._currentLength;var n=t._elements;n.length=this._elements.length;for(var i=0,r=this._elements.length;r>i;i++)n[i]=this._elements[i]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,t,"gradientCount",function(){return this._currentLength/2}),e}(),ot=(function(){function e(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}r(e,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.add=function(e,t){this._currentLength<8?(6===this._currentLength&&1!==e&&(e=1,console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=e,this._elements[this._currentLength++]=t.x,this._elements[this._currentLength++]=t.y):console.log("GradientDataVector2 warning:data count must lessEqual than 4")},t.cloneTo=function(e){var t=e;t._currentLength=this._currentLength;var n=t._elements;n.length=this._elements.length;for(var i=0,r=this._elements.length;r>i;i++)n[i]=this._elements[i]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,t,"gradientCount",function(){return this._currentLength/3}),e}(),function(){function e(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=0/0,this._constantMax=0/0,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}r(e,"laya.d3.core.particleShuriKen.module.GradientSize");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.getMaxSizeInGradient=function(){var e=0,t=0,n=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(e=0,t=this._gradientX.gradientCount;t>e;e++)n=Math.max(n,this._gradientX.getValueByIndex(e));for(e=0,t=this._gradientY.gradientCount;t>e;e++)n=Math.max(n,this._gradientY.getValueByIndex(e))}else for(e=0,t=this._gradient.gradientCount;t>e;e++)n=Math.max(n,this._gradient.getValueByIndex(e));break;case 1:this._separateAxes?(n=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),n=Math.max(n,this._constantMinSeparate.y),n=Math.max(n,this._constantMaxSeparate.y)):n=Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(e=0,t=this._gradientXMin.gradientCount;t>e;e++)n=Math.max(n,this._gradientXMin.getValueByIndex(e));for(e=0,t=this._gradientXMax.gradientCount;t>e;e++)n=Math.max(n,this._gradientXMax.getValueByIndex(e));for(e=0,t=this._gradientYMin.gradientCount;t>e;e++)n=Math.max(n,this._gradientYMin.getValueByIndex(e));for(e=0,t=this._gradientZMax.gradientCount;t>e;e++)n=Math.max(n,this._gradientZMax.getValueByIndex(e))}else{for(e=0,t=this._gradientMin.gradientCount;t>e;e++)n=Math.max(n,this._gradientMin.getValueByIndex(e));for(e=0,t=this._gradientMax.gradientCount;t>e;e++)n=Math.max(n,this._gradientMax.getValueByIndex(e))}}return n},t.cloneTo=function(e){var t=e;t._type=this._type,t._separateAxes=this._separateAxes,this._gradient.cloneTo(t._gradient),this._gradientX.cloneTo(t._gradientX),this._gradientY.cloneTo(t._gradientY),this._gradientZ.cloneTo(t._gradientZ),t._constantMin=this._constantMin,t._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(t._constantMinSeparate),this._constantMaxSeparate.cloneTo(t._constantMaxSeparate),this._gradientMin.cloneTo(t._gradientMin),this._gradientMax.cloneTo(t._gradientMax),this._gradientXMin.cloneTo(t._gradientXMin),this._gradientXMax.cloneTo(t._gradientXMax),this._gradientYMin.cloneTo(t._gradientYMin),this._gradientYMax.cloneTo(t._gradientYMax),this._gradientZMin.cloneTo(t._gradientZMin),this._gradientZMax.cloneTo(t._gradientZMax)},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,t,"gradientZ",function(){return this._gradientZ}),a(0,t,"gradient",function(){return this._gradient}),a(0,t,"separateAxes",function(){return this._separateAxes}),a(0,t,"type",function(){return this._type}),a(0,t,"gradientMin",function(){return this._gradientMin}),a(0,t,"constantMin",function(){return this._constantMin}),a(0,t,"gradientX",function(){return this._gradientX}),a(0,t,"gradientY",function(){return this._gradientY}),a(0,t,"gradientMax",function(){return this._gradientMax}),a(0,t,"constantMax",function(){return this._constantMax}),a(0,t,"constantMinSeparate",function(){return this._constantMinSeparate}),a(0,t,"constantMaxSeparate",function(){return this._constantMaxSeparate}),a(0,t,"gradientXMin",function(){return this._gradientXMin}),a(0,t,"gradientXMax",function(){return this._gradientXMax}),a(0,t,"gradientYMin",function(){return this._gradientYMin}),a(0,t,"gradientYMax",function(){return this._gradientYMax}),a(0,t,"gradientZMin",function(){return this._gradientZMin}),a(0,t,"gradientZMax",function(){return this._gradientZMax}),e.createByGradient=function(t){var n=new e;return n._type=0,n._separateAxes=!1,n._gradient=t,n},e.createByGradientSeparate=function(t,n,i){var r=new e;return r._type=0,r._separateAxes=!0,r._gradientX=t,r._gradientY=n,r._gradientZ=i,r},e.createByRandomTwoConstant=function(t,n){var i=new e;return i._type=1,i._separateAxes=!1,i._constantMin=t,i._constantMax=n,i},e.createByRandomTwoConstantSeparate=function(t,n){var i=new e;return i._type=1,i._separateAxes=!0,i._constantMinSeparate=t,i._constantMaxSeparate=n,i},e.createByRandomTwoGradient=function(t,n){var i=new e;return i._type=2,i._separateAxes=!1,i._gradientMin=t,i._gradientMax=n,i},e.createByRandomTwoGradientSeparate=function(t,n,i,r,a,o){var s=new e;return s._type=2,s._separateAxes=!0,s._gradientXMin=t,s._gradientXMax=n,s._gradientYMin=i,s._gradientYMax=r,s._gradientZMin=a,s._gradientZMax=o,s},e}()),st=function(){function e(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}r(e,"laya.d3.core.particleShuriKen.module.GradientVelocity");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;t._type=this._type,this._constant.cloneTo(t._constant),this._gradientX.cloneTo(t._gradientX),this._gradientY.cloneTo(t._gradientY),this._gradientZ.cloneTo(t._gradientZ),this._constantMin.cloneTo(t._constantMin),this._constantMax.cloneTo(t._constantMax),this._gradientXMin.cloneTo(t._gradientXMin),this._gradientXMax.cloneTo(t._gradientXMax),this._gradientYMin.cloneTo(t._gradientYMin),this._gradientYMax.cloneTo(t._gradientYMax),this._gradientZMin.cloneTo(t._gradientZMin),this._gradientZMax.cloneTo(t._gradientZMax)},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,t,"gradientZ",function(){return this._gradientZ}),a(0,t,"constant",function(){return this._constant}),a(0,t,"type",function(){return this._type}),a(0,t,"gradientXMax",function(){return this._gradientXMax}),a(0,t,"constantMin",function(){return this._constantMin}),a(0,t,"gradientX",function(){return this._gradientX}),a(0,t,"gradientY",function(){return this._gradientY}),a(0,t,"gradientXMin",function(){return this._gradientXMin}),a(0,t,"constantMax",function(){return this._constantMax}),a(0,t,"gradientYMin",function(){return this._gradientYMin}),a(0,t,"gradientYMax",function(){return this._gradientYMax}),a(0,t,"gradientZMin",function(){return this._gradientZMin}),a(0,t,"gradientZMax",function(){return this._gradientZMax}),e.createByConstant=function(t){var n=new e;return n._type=0,n._constant=t,n},e.createByGradient=function(t,n,i){var r=new e;return r._type=1,r._gradientX=t,r._gradientY=n,r._gradientZ=i,r},e.createByRandomTwoConstant=function(t,n){var i=new e;return i._type=2,i._constantMin=t,i._constantMax=n,i},e.createByRandomTwoGradient=function(t,n,i,r,a,o){var s=new e;return s._type=3,s._gradientXMin=t,s._gradientXMax=n,s._gradientYMin=i,s._gradientYMax=r,s._gradientZMin=a,s._gradientZMax=o,s},e}(),lt=function(){function e(e){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=e}r(e,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;this._angularVelocity.cloneTo(t._angularVelocity),t.enbale=this.enbale},t.clone=function(){var e;switch(this._angularVelocity.type){case 0:e=this._angularVelocity.separateAxes?nt.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):nt.createByConstant(this._angularVelocity.constant);break;case 1:e=this._angularVelocity.separateAxes?nt.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):nt.createByGradient(this._angularVelocity.gradient.clone());break;case 2:e=this._angularVelocity.separateAxes?nt.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):nt.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:e=this._angularVelocity.separateAxes?nt.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):nt.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var t=new this.constructor(e);return t.enbale=this.enbale,t},a(0,t,"angularVelocity",function(){return this._angularVelocity}),e}(),ht=function(){function e(){this.enable=!1,this.randomDirection=!1}r(e,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t._getShapeBoundBox=function(){throw new Error("BaseShape: must override it.")},t._getSpeedBoundBox=function(){throw new Error("BaseShape: must override it.")},t.generatePositionAndDirection=function(){throw new Error("BaseShape: must override it.")},t._calculateProceduralBounds=function(e,t,n){this._getShapeBoundBox(e);var i=e.min,r=e.max;Di.multiply(i,t,i),Di.multiply(r,t,r);var a=new Ft(new Di,new Di);this.randomDirection?(a.min=new Di(-1,-1,-1),a.max=new Di(1,1,1)):this._getSpeedBoundBox(a);var o=new Ft(new Di,new Di),s=o.min,l=o.max;Di.scale(a.min,n.y,s),Di.scale(a.max,n.y,l),Di.add(e.min,s,s),Di.add(e.max,l,l),Di.min(e.min,s,e.min),Di.max(e.max,s,e.max);var h=new Ft(new Di,new Di),c=h.min,_=h.max;Di.scale(a.min,n.x,c),Di.scale(a.max,n.x,_),Di.min(h.min,_,s),Di.max(h.min,_,l),Di.min(e.min,s,e.min),Di.max(e.max,s,e.max)},t.cloneTo=function(e){var t=e;t.enable=this.enable},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},e}(),ct=function(){function e(){}return r(e,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),e._randomPointUnitArcCircle=function(e,t,n){var i=t.elements,r=0/0;r=n?n.getFloat()*e:Math.random()*e,i[0]=Math.cos(r),i[1]=Math.sin(r)},e._randomPointInsideUnitArcCircle=function(t,n,i){var r=n.elements;e._randomPointUnitArcCircle(t,n,i);var a=0/0;a=i?Math.pow(i.getFloat(),.5):Math.pow(Math.random(),.5),r[0]=r[0]*a,r[1]=r[1]*a},e._randomPointUnitCircle=function(e,t){var n=e.elements,i=0/0;i=t?t.getFloat()*Math.PI*2:Math.random()*Math.PI*2,n[0]=Math.cos(i),n[1]=Math.sin(i)},e._randomPointInsideUnitCircle=function(t,n){var i=t.elements;e._randomPointUnitCircle(t);var r=0/0;r=n?Math.pow(n.getFloat(),.5):Math.pow(Math.random(),.5),i[0]=i[0]*r,i[1]=i[1]*r},e._randomPointUnitSphere=function(e,t){var n=e.elements,i=0/0,r=0/0;t?(i=n[2]=2*t.getFloat()-1,r=t.getFloat()*Math.PI*2):(i=n[2]=2*Math.random()-1,r=Math.random()*Math.PI*2);var a=Math.sqrt(1-i*i);n[0]=a*Math.cos(r),n[1]=a*Math.sin(r)},e._randomPointInsideUnitSphere=function(t,n){var i=t.elements;e._randomPointUnitSphere(t);var r=0/0;r=n?Math.pow(n.getFloat(),1/3):Math.pow(Math.random(),1/3),i[0]=i[0]*r,i[1]=i[1]*r,i[2]=i[2]*r},e._randomPointInsideHalfUnitBox=function(e,t){var n=e.elements;t?(n[0]=t.getFloat()-.5,n[1]=t.getFloat()-.5,n[2]=t.getFloat()-.5):(n[0]=Math.random()-.5,n[1]=Math.random()-.5,n[2]=Math.random()-.5)},e}(),_t=function(){function e(e){this._size=null,this.enbale=!1,this._size=e}r(e,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;this._size.cloneTo(t._size),t.enbale=this.enbale},t.clone=function(){var e;switch(this._size.type){case 0:e=this._size.separateAxes?ot.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):ot.createByGradient(this._size.gradient.clone());break;case 1:e=this._size.separateAxes?ot.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):ot.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:e=this._size.separateAxes?ot.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):ot.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var t=new this.constructor(e);return t.enbale=this.enbale,t},a(0,t,"size",function(){return this._size}),e}(),ut=function(){function e(){this._type=0,this._constant=0/0,this._constantMin=0/0,this._constantMax=0/0}r(e,"laya.d3.core.particleShuriKen.module.StartFrame");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;t._type=this._type,t._constant=this._constant,t._constantMin=this._constantMin,t._constantMax=this._constantMax},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,t,"constant",function(){return this._constant}),a(0,t,"type",function(){return this._type}),a(0,t,"constantMin",function(){return this._constantMin}),a(0,t,"constantMax",function(){return this._constantMax}),e.createByConstant=function(t){var n=new e;return n._type=0,n._constant=t,n},e.createByRandomTwoConstant=function(t,n){var i=new e;return i._type=1,i._constantMin=t,i._constantMax=n,i},e}(),dt=function(){function e(e,t){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new xi(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=e,this._startFrame=t}r(e,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;this.tiles.cloneTo(t.tiles),t.type=this.type,t.randomRow=this.randomRow,this._frame.cloneTo(t._frame),this._startFrame.cloneTo(t._startFrame),t.cycles=this.cycles,t.enableUVChannels=this.enableUVChannels,t.enable=this.enable},t.clone=function(){var e;switch(this._frame.type){case 0:e=tt.createByConstant(this._frame.constant);break;case 1:e=tt.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:e=tt.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:e=tt.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}var t;switch(this._startFrame.type){case 0:t=ut.createByConstant(this._startFrame.constant);break;case 1:t=ut.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var n=new this.constructor(e,t);return this.tiles.cloneTo(n.tiles),n.type=this.type,n.randomRow=this.randomRow,n.cycles=this.cycles,n.enableUVChannels=this.enableUVChannels,n.enable=this.enable,n},a(0,t,"frame",function(){return this._frame}),a(0,t,"startFrame",function(){return this._startFrame}),e}(),ft=function(){function e(e){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=e}r(e,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e;this._velocity.cloneTo(t._velocity),t.enbale=this.enbale,t.space=this.space},t.clone=function(){var e;switch(this._velocity.type){case 0:e=st.createByConstant(this._velocity.constant.clone());break;case 1:e=st.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:e=st.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:e=st.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var t=new this.constructor(e);return t.enbale=this.enbale,t.space=this.space,t},a(0,t,"velocity",function(){return this._velocity}),e}(),mt=function(){function e(){}return r(e,"laya.d3.core.particleShuriKen.ShurikenParticleData"),e._getStartLifetimeFromGradient=function(e,t){for(var n=1,i=e.gradientCount;i>n;n++){var r=e.getKeyByIndex(n);if(r>=t){var a=e.getKeyByIndex(n-1),o=(t-a)/(r-a);return g.lerp(e.getValueByIndex(n-1),e.getValueByIndex(n),o)}}throw new Error("ShurikenParticleData: can't get value foam startLifeTimeGradient.")},e._randomInvertRoationArray=function(e,t,n,i,r){var a=0/0;i?(i.seed=r[6],a=i.getFloat(),r[6]=i.seed):a=Math.random(),n>a?(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2]):(t[0]=e[0],t[1]=e[1],t[2]=e[2])},e._randomInvertRoation=function(e,t,n,i){var r=0/0;return n?(n.seed=i[6],r=n.getFloat(),i[6]=n.seed):r=Math.random(),t>r&&(e=-e),e},e.create=function(t,n,i){var r=t.autoRandomSeed,a=t._rand,o=t._randomSeeds;switch(t.startColorType){case 0:var s=t.startColorConstant.elements;e.startColor[0]=s[0],e.startColor[1]=s[1],e.startColor[2]=s[2],e.startColor[3]=s[3];break;case 2:r?g.lerpVector4(t.startColorConstantMin.elements,t.startColorConstantMax.elements,Math.random(),e.startColor):(a.seed=o[3],g.lerpVector4(t.startColorConstantMin.elements,t.startColorConstantMax.elements,a.getFloat(),e.startColor),o[3]=a.seed)}var l=t.colorOverLifetime;if(l&&l.enbale){var h=l.color;switch(h.type){case 0:e.startColor[0]=e.startColor[0]*h.constant.x,e.startColor[1]=e.startColor[1]*h.constant.y,e.startColor[2]=e.startColor[2]*h.constant.z,e.startColor[3]=e.startColor[3]*h.constant.w;break;case 2:var c=0/0;r?c=Math.random():(a.seed=o[10],c=a.getFloat(),o[10]=a.seed);var _=h.constantMin,u=h.constantMax;e.startColor[0]=e.startColor[0]*g.lerp(_.x,u.x,c),e.startColor[1]=e.startColor[1]*g.lerp(_.y,u.y,c),e.startColor[2]=e.startColor[2]*g.lerp(_.z,u.z,c),e.startColor[3]=e.startColor[3]*g.lerp(_.w,u.w,c)}}var d=e.startSize;switch(t.startSizeType){case 0:if(t.threeDStartSize){var f=t.startSizeConstantSeparate;d[0]=f.x,d[1]=f.y,d[2]=f.z}else d[0]=d[1]=d[2]=t.startSizeConstant;break;case 2:if(t.threeDStartSize){var m=t.startSizeConstantMinSeparate,p=t.startSizeConstantMaxSeparate;r?(d[0]=g.lerp(m.x,p.x,Math.random()),d[1]=g.lerp(m.y,p.y,Math.random()),d[2]=g.lerp(m.z,p.z,Math.random())):(a.seed=o[4],d[0]=g.lerp(m.x,p.x,a.getFloat()),d[1]=g.lerp(m.y,p.y,a.getFloat()),d[2]=g.lerp(m.z,p.z,a.getFloat()),o[4]=a.seed)}else r?d[0]=d[1]=d[2]=g.lerp(t.startSizeConstantMin,t.startSizeConstantMax,Math.random()):(a.seed=o[4],d[0]=d[1]=d[2]=g.lerp(t.startSizeConstantMin,t.startSizeConstantMax,a.getFloat()),o[4]=a.seed)}var v=t.sizeOverLifetime;if(v&&v.enbale&&1===v.size.type){var E=v.size;if(E.separateAxes)r?(d[0]=d[0]*g.lerp(E.constantMinSeparate.x,E.constantMaxSeparate.x,Math.random()),d[1]=d[1]*g.lerp(E.constantMinSeparate.y,E.constantMaxSeparate.y,Math.random()),d[2]=d[2]*g.lerp(E.constantMinSeparate.z,E.constantMaxSeparate.z,Math.random())):(a.seed=o[11],d[0]=d[0]*g.lerp(E.constantMinSeparate.x,E.constantMaxSeparate.x,a.getFloat()),d[1]=d[1]*g.lerp(E.constantMinSeparate.y,E.constantMaxSeparate.y,a.getFloat()),d[2]=d[2]*g.lerp(E.constantMinSeparate.z,E.constantMaxSeparate.z,a.getFloat()),o[11]=a.seed);else{var T=0/0;r?T=g.lerp(E.constantMin,E.constantMax,Math.random()):(a.seed=o[11],T=g.lerp(E.constantMin,E.constantMax,a.getFloat()),o[11]=a.seed),d[0]=d[0]*T,d[1]=d[1]*T,d[2]=d[2]*T}}var S=n.renderMode;if(1!==S)switch(t.startRotationType){case 0:if(t.threeDStartRotation){var x=t.startRotationConstantSeparate,D=e._tempVector30.elements;e._randomInvertRoationArray(x.elements,D,t.randomizeRotationDirection,r?null:a,o),e.startRotation[0]=D[0],e.startRotation[1]=D[1],e.startRotation[2]=4!==S?-D[2]:D[2]}else e.startRotation[0]=e._randomInvertRoation(t.startRotationConstant,t.randomizeRotationDirection,r?null:a,o);break;case 2:if(t.threeDStartRotation){var M=t.startRotationConstantMinSeparate,A=t.startRotationConstantMaxSeparate,R=e._tempVector30.elements;r?(R[0]=g.lerp(M.x,A.x,Math.random()),R[1]=g.lerp(M.y,A.y,Math.random()),R[2]=g.lerp(M.z,A.z,Math.random())):(a.seed=o[5],R[0]=g.lerp(M.x,A.x,a.getFloat()),R[1]=g.lerp(M.y,A.y,a.getFloat()),R[2]=g.lerp(M.z,A.z,a.getFloat()),o[5]=a.seed),e._randomInvertRoationArray(R,R,t.randomizeRotationDirection,r?null:a,o),e.startRotation[0]=R[0],e.startRotation[1]=R[1],e.startRotation[2]=4!==S?-R[2]:R[2]}else r?e.startRotation[0]=e._randomInvertRoation(g.lerp(t.startRotationConstantMin,t.startRotationConstantMax,Math.random()),t.randomizeRotationDirection,r?null:a,o):(a.seed=o[5],e.startRotation[0]=e._randomInvertRoation(g.lerp(t.startRotationConstantMin,t.startRotationConstantMax,a.getFloat()),t.randomizeRotationDirection,r?null:a,o),o[5]=a.seed)}switch(t.startLifetimeType){case 0:e.startLifeTime=t.startLifetimeConstant;break;case 1:e.startLifeTime=e._getStartLifetimeFromGradient(t.startLifeTimeGradient,t.emissionTime);break;case 2:r?e.startLifeTime=g.lerp(t.startLifetimeConstantMin,t.startLifetimeConstantMax,Math.random()):(a.seed=o[7],e.startLifeTime=g.lerp(t.startLifetimeConstantMin,t.startLifetimeConstantMax,a.getFloat()),o[7]=a.seed);break;case 3:var I=t.emissionTime;r?e.startLifeTime=g.lerp(e._getStartLifetimeFromGradient(t.startLifeTimeGradientMin,I),e._getStartLifetimeFromGradient(t.startLifeTimeGradientMax,I),Math.random()):(a.seed=o[7],e.startLifeTime=g.lerp(e._getStartLifetimeFromGradient(t.startLifeTimeGradientMin,I),e._getStartLifetimeFromGradient(t.startLifeTimeGradientMax,I),a.getFloat()),o[7]=a.seed)}switch(t.startSpeedType){case 0:e.startSpeed=t.startSpeedConstant;break;case 2:r?e.startSpeed=g.lerp(t.startSpeedConstantMin,t.startSpeedConstantMax,Math.random()):(a.seed=o[8],e.startSpeed=g.lerp(t.startSpeedConstantMin,t.startSpeedConstantMax,a.getFloat()),o[8]=a.seed)}var C=t.textureSheetAnimation,y=C&&C.enable;if(y){var O=C.tiles,L=O.x,V=O.y,w=1/L,N=1/V,P=0,b=C.startFrame;switch(b.type){case 0:P=b.constant;break;case 1:r?P=g.lerp(b.constantMin,b.constantMax,Math.random()):(a.seed=o[14],P=g.lerp(b.constantMin,b.constantMax,a.getFloat()),o[14]=a.seed)}var F=C.frame;switch(F.type){case 0:P+=F.constant;break;case 2:r?P+=g.lerp(F.constantMin,F.constantMax,Math.random()):(a.seed=o[15],P+=g.lerp(F.constantMin,F.constantMax,a.getFloat()),o[15]=a.seed)}var B=0;switch(C.type){case 0:B=Math.floor(P/L);break;case 1:C.randomRow?r?B=Math.floor(Math.random()*V):(a.seed=o[13],B=Math.floor(a.getFloat()*V),o[13]=a.seed):B=C.rowIndex}var U=Math.floor(P%L);e.startUVInfo=e.startUVInfo,e.startUVInfo[0]=w,e.startUVInfo[1]=N,e.startUVInfo[2]=U*w,e.startUVInfo[3]=B*N}else e.startUVInfo=e.startUVInfo,e.startUVInfo[0]=1,e.startUVInfo[1]=1,e.startUVInfo[2]=0,e.startUVInfo[3]=0;switch(t.simulationSpace){case 0:var G=i.position.elements;e.simulationWorldPostion[0]=G[0],e.simulationWorldPostion[1]=G[1],e.simulationWorldPostion[2]=G[2];var H=i.rotation.elements;e.simulationWorldRotation[0]=H[0],e.simulationWorldRotation[1]=H[1],e.simulationWorldRotation[2]=H[2],e.simulationWorldRotation[3]=H[3];break;case 1:break;default:throw new Error("ShurikenParticleMaterial: SimulationSpace value is invalid.")}},e.startLifeTime=0/0,e.startSpeed=0/0,i(e,["_tempVector30",function(){return this._tempVector30=new Di},"_tempQuaternion",function(){return this._tempQuaternion=new Yt},"startColor",function(){return this.startColor=new Float32Array(4)},"startSize",function(){return this.startSize=new Float32Array(3)},"startRotation",function(){return this.startRotation=new Float32Array(3)},"startUVInfo",function(){return this.startUVInfo=new Float32Array(4)},"simulationWorldPostion",function(){return this.simulationWorldPostion=new Float32Array(3)},"simulationWorldRotation",function(){return this.simulationWorldRotation=new Float32Array(4)}]),e}(),pt=function(){function e(){this.startPosition=new Di,this.endPosition=new Di,this.startColor=new Ht,this.endColor=new Ht}r(e,"laya.d3.core.pixelLine.PixelLineData");var t=e.prototype;return t.cloneTo=function(e){this.startPosition.cloneTo(e.startPosition),this.endPosition.cloneTo(e.endPosition),this.startColor.cloneTo(e.startColor),this.endColor.cloneTo(e.endColor)},e}(),vt=function(){function e(){}r(e,"laya.d3.core.pixelLine.PixelLineVertex");var t=e.prototype;return a(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),a(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),i(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(28,[new wt(0,"vector3",0),new wt(12,"vector4",1)])}]),e}(),Et=function(){function e(){}return r(e,"laya.d3.core.render.RenderContext3D"),e.clientWidth=0,e.clientHeight=0,i(e,["_instance",function(){return this._instance=new e}]),e}(),Tt=function(){function e(){}r(e,"laya.d3.core.render.RenderElement");var t=e.prototype;return t.setTransform=function(e){this._transform=e},t.setGeometry=function(e){this._geometry=e},t.addToOpaqueRenderQueue=function(e,t){t.elements.push(this)},t.addToTransparentRenderQueue=function(e,t){t.elements.push(this),t.lastTransparentBatched=!1,t.lastTransparentRenderElement=this},t.destroy=function(){this._transform=null,this._geometry=null,this.material=null,this.render=null},e}(),gt=function(){function e(e){void 0===e&&(e=!1),this.isTransparent=e,this.elements=[]}r(e,"laya.d3.core.render.RenderQueue");var t=e.prototype;return t._compare=function(e,t){var n=e.material.renderQueue-t.material.renderQueue;return 0===n?e.render._distanceForSort-t.render._distanceForSort:n},t._partitionRenderObject=function(e,t){for(var n=this.elements[Math.floor((t+e)/2)];t>=e;){for(;this._compare(this.elements[e],n)<0;)e++;for(;this._compare(this.elements[t],n)>0;)t--;if(t>e){var i=this.elements[e];this.elements[e]=this.elements[t],this.elements[t]=i,e++,t--}else if(e===t){e++;break}}return e},t._quickSort=function(e,t){if(this.elements.length>1){var n=this._partitionRenderObject(e,t),i=n-1;i>e&&this._quickSort(e,i),t>n&&this._quickSort(n,t)}},t._render=function(e,t,n){for(var i,r,a=C.loopCount,o=e.scene,s=e.camera,l=0,h=this.elements.length;h>l;l++){var c=this.isTransparent?this.elements[h-l-1]:this.elements[l],_=c._transform,u=c.render,d=c._geometry,f=c.material;if(e.renderElement=c,a!==u._updateLoopCount?(u._renderUpdate(e,_),u._renderUpdateWithCamera(e,_),u._updateLoopCount=a,u._updateCamera=s):s!==u._updateCamera&&(u._renderUpdateWithCamera(e,_),u._updateCamera=s),d._prepareRender(e))for(var m=f._renderStates,p=(n||f._shader)._passes,v=0,E=p.length;E>v;v++){var T=e.shader=p[v].withCompile(o._defineDatas.value&~f._disablePublicDefineDatas.value,u._defineDatas.value,f._defineDatas.value),g=T.bind(),S=a!==T._uploadLoopCount,x=T._uploadScene!==o||S;(x||g)&&(T.uploadUniforms(T._sceneUniformParamsMap,o._shaderValues,x),T._uploadScene=o);var D=T._uploadCamera!==s,M=D||T._uploadRender!==u||S;(M||g)&&(T.uploadUniforms(T._spriteUniformParamsMap,u._shaderValues,M),T._uploadRender=u);var A=D||S;(A||g)&&(T.uploadUniforms(T._cameraUniformParamsMap,s._shaderValues,A),T._uploadCamera=s);var R=T._uploadMaterial!==f||S;(R||g)&&(T.uploadUniforms(T._materialUniformParamsMap,f._shaderValues,R),T._uploadMaterial=f);var I=m[v];i!==I?(I._setRenderStateBlendDepth(),I._setRenderStateFrontFace(t,_),i=I,r=u):r!==u&&(I._setRenderStateFrontFace(t,_),r=u),d._bufferState.bindBufferState(),d._render(e),T._uploadLoopCount=a}}},t.clear=function(){this.elements.length=0,this.lastTransparentRenderElement=null,this.lastTransparentBatched=!1},e}(),St=function(){function e(e,t){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new Ut(new Di,0),this._corners=[new Di,new Di,new Di,new Di,new Di,new Di,new Di,new Di],this._boundingBoxCenter=new Di,this._children=o(8),this._objects=[],this._tempBoundBoxCorners=[new Di,new Di,new Di,new Di,new Di,new Di,new Di,new Di],this._scene=e,this._currentDepth=t}r(e,"laya.d3.core.scene.OctreeNode");var t=e.prototype;return n.imps(t,{"laya.d3.core.scene.ITreeNode":!0}),t.init=function(e,t){var n=new Di,i=new Di;Di.scale(t,-.5,n),Di.scale(t,.5,i),Di.add(n,e,n),Di.add(i,e,i),this.exactBox=new Ft(n,i),this.relaxBox=new Ft(n,i)},t.addTreeNode=function(e){1===Gt.boxContainsBox(this._relaxBox,e.boundingBox)?this.addNodeDown(e,0):this.addObject(e)},t.addChild=function(t){var n=this._children[t];if(null==n){n=new e(this._scene,this._currentDepth+1),this._children[t]=n,n._parent=this,Di.subtract(this._exactBox.max,this._exactBox.min,e.tempSize),Di.multiply(e.tempSize,e._octreeSplit[t],e.tempCenter),Di.add(this._exactBox.min,e.tempCenter,e.tempCenter),Di.scale(e.tempSize,.25,e.tempSize);var i=new Di,r=new Di;Di.subtract(e.tempCenter,e.tempSize,i),Di.add(e.tempCenter,e.tempSize,r),n.exactBox=new Ft(i,r),Di.scale(e.tempSize,e.relax,e.tempSize);var a=new Di,o=new Di;Di.subtract(e.tempCenter,e.tempSize,a),Di.add(e.tempCenter,e.tempSize,o),n.relaxBox=new Ft(a,o)}return n},t.addObject=function(e){e._treeNode=this,this._objects.push(e)},t.removeObject=function(e){if(e._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var t=this._objects.indexOf(e);return-1!==t?(this._objects.splice(t,1),!0):!1},t.clearObject=function(){this._objects.length=0},t.addNodeUp=function(e,t){this._parent&&1!==Gt.boxContainsBox(this._exactBox,e.boundingBox)?this._parent.addNodeUp(e,t-1):this.addNodeDown(e,t)},t.addNodeDown=function(e,t){if(t<this._scene.treeLevel){var n=this.inChildIndex(e.boundingBoxCenter),i=this.addChild(n);1===Gt.boxContainsBox(i._relaxBox,e.boundingBox)?i.addNodeDown(e,++t):this.addObject(e)}else this.addObject(e)},t.inChildIndex=function(e){var t=e.z<this._boundingBoxCenter.z?0:1,n=e.y<this._boundingBoxCenter.y?0:1,i=e.x<this._boundingBoxCenter.x?0:1;return 4*t+2*n+i},t.updateObject=function(e){1===Gt.boxContainsBox(this._relaxBox,e.boundingBox)?(this.removeObject(e),e._treeNode=null,this.addNodeDown(e,this._currentDepth)):this._parent&&(this.removeObject(e),e._treeNode=null,this._parent.addNodeUp(e,this._currentDepth-1))},t.cullingObjects=function(){},t.cullingShadowObjects=function(){},t.cullingShadowObjectsOnePSSM=function(){},t.buildAllChild=function(e){if(e<this._scene.treeLevel)for(var t=0;8>t;t++){var n=this.addChild(t);n.buildAllChild(e+1)}},a(0,t,"exactBox",function(){return this._exactBox},function(e){this._exactBox=e,Di.add(e.min,e.max,this._boundingBoxCenter),Di.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),a(0,t,"relaxBox",function(){return this._relaxBox},function(e){this._relaxBox=e,e.getCorners(this._corners),Ut.createfromPoints(this._corners,this._boundingSphere)}),e.debugMode=!1,e.relax=1.15,e.CHILDNUM=8,i(e,["tempVector0",function(){return this.tempVector0=new Di
},"tempSize",function(){return this.tempSize=new Di},"tempCenter",function(){return this.tempCenter=new Di},"_octreeSplit",function(){return this._octreeSplit=[new Di(.25,.25,.25),new Di(.75,.25,.25),new Di(.25,.75,.25),new Di(.75,.75,.25),new Di(.25,.25,.75),new Di(.75,.25,.75),new Di(.25,.75,.75),new Di(.75,.75,.75)]}]),e}(),xt=(function(){function e(){}return r(e,"laya.d3.core.scene.SceneManager"),e}(),function(){function e(){}return r(e,"laya.d3.core.TextureMode"),e.Stretch=0,e.Tile=1,e}(),function(){function e(){}r(e,"laya.d3.core.trail.VertexTrail");var t=e.prototype;return n.imps(t,{"laya.d3.graphics.IVertex":!0}),a(0,t,"vertexDeclaration",function(){return e._vertexDeclaration1}),a(1,e,"vertexDeclaration1",function(){return e._vertexDeclaration1}),a(1,e,"vertexDeclaration2",function(){return e._vertexDeclaration2}),e.TRAIL_POSITION0=0,e.TRAIL_OFFSETVECTOR=1,e.TRAIL_TIME0=2,e.TRAIL_TEXTURECOORDINATE0Y=3,e.TRAIL_TEXTURECOORDINATE0X=4,i(e,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new Vt(32,[new wt(0,"vector3",0),new wt(12,"vector3",1),new wt(24,"single",2),new wt(28,"single",3)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new Vt(4,[new wt(0,"single",4)])}]),e}()),Dt=function(){function e(){}r(e,"laya.d3.extension.lineRender.LineVertex");var t=e.prototype;return a(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),a(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),i(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(36,[new wt(0,"vector3",0),new wt(12,"vector4",1),new wt(28,"vector2",2)])}]),e}(),Mt=function(){function e(){this._batchRenderElementPool=[]}r(e,"laya.d3.graphics.DynamicBatchManager");var t=e.prototype;return t._clear=function(){this._batchRenderElementPoolIndex=0},t._getBatchRenderElementFromPool=function(){throw"StaticBatch:must override this function."},t.dispose=function(){},e._registerManager=function(t){e._managers.push(t)},e._managers=[],e}(),At=function(){function e(){}return r(e,"laya.d3.graphics.FrustumCulling"),e.__init__=function(){x.isConchApp&&(e._cullingBufferLength=0,e._cullingBuffer=new Float32Array(4096))},e.renderObjectCulling=function(e,t,n,i){var r=0,a=0,o=0,s=0,l=t._opaqueQueue,h=t._transparentQueue;l.clear(),h.clear();var c=Rt._managers;for(r=0,a=c.length;a>r;r++)c[r]._clear();var _=Mt._managers;for(r=0,a=_.length;a>r;r++)_[r]._clear();var u=i.length,d=i.elements,f=e.boundFrustum;C.spriteCount+=u;var m=n.camera._transform.position;for(r=0;u>r;r++){var p=d[r];if(t.isLayerVisible(p._owner._layer,e)&&p._enable&&p._needRender(f)){p._visible=!0,p._distanceForSort=Di.distance(p.boundingSphere.center,m)+p.sortingFudge;var v=p._renderElements;for(o=0,s=v.length;s>o;o++){var E=v[o],T=t._getRenderQueue(E.material.renderQueue);T.isTransparent?E.addToTransparentRenderQueue(n,T):E.addToOpaqueRenderQueue(n,T)}}else p._visible=!1}var g=l.elements.length;g>0&&l._quickSort(0,g-1),g=h.elements.length,g>0&&h._quickSort(0,g-1)},e.renderObjectCullingNative=function(t,n,i,r){var a=0,o=0,s=0,l=0,h=n._opaqueQueue,c=n._transparentQueue;h.clear(),c.clear();var _=Rt._managers;for(a=0,o=_.length;o>a;a++)_[a]._clear();var u=Mt._managers;for(a=0,o=u.length;o>a;a++)u[a]._clear();var d=r.length,f=r.elements;for(a=0;d>a;a++)f[a].boundingSphere;t.boundFrustum;e.cullingNative(t._boundFrustumBuffer,e._cullingBuffer,n._cullingBufferIndices,d,n._cullingBufferResult),C.spriteCount+=d;var m=i.camera._transform.position;for(a=0;d>a;a++){var p=f[a];if(n.isLayerVisible(p._owner._layer,t)&&p._enable&&n._cullingBufferResult[a]){p._visible=!0,p._distanceForSort=Di.distance(p.boundingSphere.center,m)+p.sortingFudge;var v=p._renderElements;for(s=0,l=v.length;l>s;s++){var E=v[s],T=n._getRenderQueue(E.material.renderQueue);T.isTransparent?E.addToTransparentRenderQueue(i,T):E.addToOpaqueRenderQueue(i,T)}}else p._visible=!1}var g=h.elements.length;g>0&&h._quickSort(0,g-1),g=c.elements.length,g>0&&c._quickSort(0,g-1)},e.cullingNative=function(e,t,n,i,r){return p.instance.culling(e,t,n,i,r)},e._cullingBufferLength=0,e._cullingBuffer=null,e}(),Rt=function(){function e(){this._initBatchSprites=[],this._staticBatches={},this._batchRenderElementPoolIndex=0,this._batchRenderElementPool=[]}r(e,"laya.d3.graphics.StaticBatchManager");var t=e.prototype;return t._partition=function(e,t,n){for(var i=e[Math.floor((n+t)/2)];n>=t;){for(;this._compare(e[t],i)<0;)t++;for(;this._compare(e[n],i)>0;)n--;if(n>t){var r=e[t];e[t]=e[n],e[n]=r,t++,n--}else if(t===n){t++;break}}return t},t._quickSort=function(e,t,n){if(e.length>1){var i=this._partition(e,t,n),r=i-1;r>t&&this._quickSort(e,t,r),n>i&&this._quickSort(e,i,n)}},t._compare=function(){throw"StaticBatch:must override this function."},t._initStaticBatchs=function(){throw"StaticBatch:must override this function."},t._getBatchRenderElementFromPool=function(){throw"StaticBatch:must override this function."},t._addBatchSprite=function(e){this._initBatchSprites.push(e)},t._clear=function(){this._batchRenderElementPoolIndex=0},t._garbageCollection=function(){throw"StaticBatchManager: must override it."},t.dispose=function(){this._staticBatches=null},e._registerManager=function(t){e._managers.push(t)},e._addToStaticBatchQueue=function(t){t instanceof laya.d3.core.RenderableSprite3D&&t.isStatic&&t._addToInitStaticBatchManager();for(var n=0,i=t.numChildren;i>n;n++)e._addToStaticBatchQueue(t._children[n])},e.combine=function(t,n){var i=0,r=0;if(n)for(i=0,r=n.length;r>i;i++){var a=n[i];a.isStatic&&a._addToInitStaticBatchManager()}else t&&e._addToStaticBatchQueue(t);for(i=0,r=e._managers.length;r>i;i++){var o=e._managers[i];o._initStaticBatchs(t)}},e._managers=[],e}(),It=function(){function e(e){this._owner=e,this._batches=[],this._cacheBatchOwner=[]}r(e,"laya.d3.graphics.MeshRenderStaticBatchOwner");var t=e.prototype;return t._getBatchRender=function(e,t,n){var i=this._cacheBatchOwner[t];i||(i=this._cacheBatchOwner[t]=o(2,null));var r=i[n?1:0];return r||(r=new bi(null),r.lightmapIndex=t,r.receiveShadow=n,i[n?1:0]=r,r._defineDatas.add(Tr.SHADERDEFINE_UV1)),r},e}(),Ct=function(){function e(){}r(e,"laya.d3.graphics.Vertex.VertexMesh");var t=e.prototype;return n.imps(t,{"laya.d3.graphics.IVertex":!0}),a(0,t,"vertexDeclaration",function(){return null}),e.MESH_POSITION0=0,e.MESH_COLOR0=1,e.MESH_TEXTURECOORDINATE0=2,e.MESH_NORMAL0=3,e.MESH_BINORMAL0=4,e.MESH_TANGENT0=5,e.MESH_BLENDINDICES0=6,e.MESH_BLENDWEIGHT0=7,e.MESH_TEXTURECOORDINATE1=8,e}(),yt=function(){function e(e,t,n,i){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=e,this._normal=t,this._textureCoord0=n,this._textureCoord1=i}r(e,"laya.d3.graphics.Vertex.VertexPositionTerrain");var t=e.prototype;return n.imps(t,{"laya.d3.graphics.IVertex":!0}),a(0,t,"normal",function(){return this._normal}),a(0,t,"position",function(){return this._position}),a(0,t,"textureCoord0",function(){return this._textureCoord0}),a(0,t,"textureCoord1",function(){return this._textureCoord1}),a(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),a(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),e.TERRAIN_POSITION0=0,e.TERRAIN_NORMAL0=1,e.TERRAIN_TEXTURECOORDINATE0=2,e.TERRAIN_TEXTURECOORDINATE1=3,i(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(40,[new wt(0,"vector3",0),new wt(12,"vector3",1),new wt(24,"vector2",2),new wt(32,"vector2",3)])}]),e}(),Ot=function(){function e(e,t){this._position=null,this._textureCoordinate0=null,this._position=e,this._textureCoordinate0=t}r(e,"laya.d3.graphics.Vertex.VertexPositionTexture0");var t=e.prototype;return n.imps(t,{"laya.d3.graphics.IVertex":!0}),a(0,t,"position",function(){return this._position}),a(0,t,"textureCoordinate0",function(){return this._textureCoordinate0}),a(0,t,"vertexDeclaration",function(){return e._vertexDeclaration}),a(1,e,"vertexDeclaration",function(){return e._vertexDeclaration}),i(e,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(20,[new wt(0,"vector3",0),new wt(12,"vector2",2)])}]),e}(),Lt=function(){function e(){}r(e,"laya.d3.graphics.Vertex.VertexShuriKenParticle");var t=e.prototype;return n.imps(t,{"laya.d3.graphics.IVertex":!0}),a(0,t,"vertexDeclaration",function(){return null}),e.PARTICLE_CORNERTEXTURECOORDINATE0=0,e.PARTICLE_POSITION0=1,e.PARTICLE_COLOR0=2,e.PARTICLE_TEXTURECOORDINATE0=3,e.PARTICLE_SHAPEPOSITIONSTARTLIFETIME=4,e.PARTICLE_DIRECTIONTIME=5,e.PARTICLE_STARTCOLOR0=6,e.PARTICLE_ENDCOLOR0=7,e.PARTICLE_STARTSIZE=8,e.PARTICLE_STARTROTATION=9,e.PARTICLE_STARTSPEED=10,e.PARTICLE_RANDOM0=11,e.PARTICLE_RANDOM1=12,e.PARTICLE_SIMULATIONWORLDPOSTION=13,e.PARTICLE_SIMULATIONWORLDROTATION=14,e}(),Vt=function(){function e(t,n){this._id=0,this._vertexStride=0,this._vertexElementsDic=null,this._shaderValues=null,this._defineDatas=null,this.vertexElements=null,this._id=++e._uniqueIDCounter,this._defineDatas=new on,this._vertexElementsDic={},this._vertexStride=t,this.vertexElements=n;for(var i=n.length,r=0,a=0;i>a;a++)r=Math.max(r,n[a].elementUsage);this._shaderValues=new ln(null,r+1);for(var o=0;i>o;o++){var s=n[o],l=s.elementUsage;this._vertexElementsDic[l]=s;var h=new Int32Array(5);h[0]=e._getTypeSize(s.elementFormat)/4,h[1]=5126,h[2]=0,h[3]=this._vertexStride,h[4]=s.offset,this._shaderValues.setAttribute(l,h)}}r(e,"laya.d3.graphics.VertexDeclaration");var t=e.prototype;return t.getVertexElementByUsage=function(e){return this._vertexElementsDic[e]},t.unBinding=function(){},a(0,t,"id",function(){return this._id}),a(0,t,"vertexStride",function(){return this._vertexStride}),e._getTypeSize=function(e){switch(e){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":return 4;case"byte4":return 4;case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},e._uniqueIDCounter=1,e}(),wt=function(){function e(e,t,n){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=e,this.elementFormat=t,this.elementUsage=n}return r(e,"laya.d3.graphics.VertexElement"),e}(),Nt=(function(){function e(){}return r(e,"laya.d3.graphics.VertexElementFormat"),e.Single="single",e.Vector2="vector2",e.Vector3="vector3",e.Vector4="vector4",e.Color="color",e.Byte4="byte4",e.Short2="short2",e.Short4="short4",e.NormalizedShort2="normalizedshort2",e.NormalizedShort4="normalizedshort4",e.HalfVector2="halfvector2",e.HalfVector4="halfvector4",e}(),function(){function e(){}return r(e,"laya.d3.loaders.LoadModelV04"),e.parse=function(t,n,i,r,a){e._mesh=i,e._subMeshes=r,e._materialMap=a,e._version=n,e._readData=t,e.READ_DATA(),e.READ_BLOCK(),e.READ_STRINGS();for(var o=0,s=e._BLOCK.count;s>o;o++){e._readData.pos=e._BLOCK.blockStarts[o];var l=e._readData.getUint16(),h=e._strings[l],c=e["READ_"+h];if(null==c)throw new Error("model file err,no this function:"+l+" "+h);c.call()}e._mesh._bindPoseIndices=new Uint16Array(e._bindPoseIndices),e._bindPoseIndices.length=0,e._strings.length=0,e._readData=null,e._version=null,e._mesh=null,e._subMeshes=null,e._materialMap=null},e._readString=function(){return e._strings[e._readData.getUint16()]},e.READ_DATA=function(){e._DATA.offset=e._readData.getUint32(),e._DATA.size=e._readData.getUint32()},e.READ_BLOCK=function(){for(var t=e._BLOCK.count=e._readData.getUint16(),n=e._BLOCK.blockStarts=[],i=e._BLOCK.blockLengths=[],r=0;t>r;r++)n.push(e._readData.getUint32()),i.push(e._readData.getUint32())},e.READ_STRINGS=function(){var t=e._readData.getUint32(),n=e._readData.getUint16(),i=e._readData.pos;e._readData.pos=t+e._DATA.offset;for(var r=0;n>r;r++)e._strings[r]=e._readData.readUTFString();e._readData.pos=i},e.READ_MESH=function(){var t=(e._readString(),e._readData.__getBuffer()),n=0,i=e._readData.getInt16(),r=e._DATA.offset;for(n=0;i>n;n++){var a,s=r+e._readData.getUint32(),l=e._readData.getUint32(),h=new Float32Array(t.slice(s,s+l)),c=e._readString();switch(e._version){case"LAYAMODEL:0301":case"LAYAMODEL:0400":a=e._vertexDeclarationMap[c];break;default:throw new Error("LoadModelV03: unknown version.")}if(!a)throw new Error("LoadModelV03: unknown vertexDeclaration.");var _=new or(4*h.length,35044,!0);_.vertexDeclaration=a,_.setData(h),e._mesh._vertexBuffers.push(_),e._mesh._vertexCount+=_.vertexCount}var u=r+e._readData.getUint32(),d=e._readData.getUint32(),f=new Uint16Array(t.slice(u,u+d)),m=nr.create("ushort",d/2,35044,!0);m.setData(f),e._mesh._indexBuffer=m;var p=e._mesh._boneNames=[],v=e._readData.getUint16();for(p.length=v,n=0;v>n;n++)p[n]=e._strings[e._readData.getUint16()];e._readData.pos+=8;var E=e._readData.getUint32(),T=e._readData.getUint32(),g=new Float32Array(t.slice(r+E,r+E+T)),S=g.length,x=S/16,D=e._mesh._inverseBindPosesBuffer=new ArrayBuffer(4*S);for(e._mesh._inverseBindPoses=o(x),n=0;S>n;n+=16){var M=new Wt(g[n+0],g[n+1],g[n+2],g[n+3],g[n+4],g[n+5],g[n+6],g[n+7],g[n+8],g[n+9],g[n+10],g[n+11],g[n+12],g[n+13],g[n+14],g[n+15],new Float32Array(D,4*n,16));e._mesh._inverseBindPoses[n/16]=M}return!0},e.READ_SUBMESH=function(){var t=e._readData.__getBuffer(),n=new Zn(e._mesh),i=e._readData.getInt16();e._readData.getUint32(),e._readData.getUint32();var r=e._readData.getUint32(),a=e._readData.getUint32(),o=e._mesh._indexBuffer;n._indexBuffer=o,n._indexStart=r,n._indexCount=a,n._indices=new Uint16Array(o.getData().buffer,2*r,a);var s=e._mesh._vertexBuffers[i];n._vertexBuffer=s;var l=new X;l.bindBufferState(),l.applyVertexBuffer(s),l.applyIndexBuffer(o),l.unBindBufferState(),n._applyBufferState(l);var h=e._DATA.offset,c=n._subIndexBufferStart,_=n._subIndexBufferCount,u=n._boneIndicesList,d=e._readData.getUint16();c.length=d,_.length=d,u.length=d;for(var f=e._mesh._skinDataPathMarks,m=e._bindPoseIndices,p=e._subMeshes.length,v=0;d>v;v++){c[v]=e._readData.getUint32(),_[v]=e._readData.getUint32();for(var E=e._readData.getUint32(),T=e._readData.getUint32(),g=u[v]=new Uint16Array(t.slice(h+E,h+E+T)),S=0,x=g.length;x>S;S++){var D=g[S],M=m.indexOf(D);-1===M?(g[S]=m.length,m.push(D),f.push([p,v,S])):g[S]=M}}return e._subMeshes.push(n),!0},e._strings=[],e._readData=null,e._version=null,e._mesh=null,e._subMeshes=null,e._materialMap=null,e._bindPoseIndices=[],i(e,["_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":ii.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":ni.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":Ti.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":di.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":ui.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":oi.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":ai.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":pi.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":mi.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":$n.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":Qn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":ri.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":ti.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":fi.vertexDeclaration,"POSITION,NORMAL,UV,UV1":_i.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":si.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":Ei.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":ei.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":vi.vertexDeclaration,"POSITION,NORMAL,UV":ci.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":Jn.vertexDeclaration,"POSITION,NORMAL,COLOR":qn.vertexDeclaration,"POSITION,NORMAL,TANGENT":hi.vertexDeclaration,"POSITION,NORMAL":Kn.vertexDeclaration,"POSITION,UV":Ot.vertexDeclaration,POSITION:jn.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),e}()),Pt=function(){function e(){}return r(e,"laya.d3.loaders.MeshReader"),e.read=function(e,t,n,i){var r=new c(e);r.pos=0;var a=r.readUTFString();switch(a){case"LAYAMODEL:0301":case"LAYAMODEL:0400":Nt.parse(r,a,t,n,i);break;default:throw new Error("MeshReader: unknown mesh version.")}t._setSubMeshes(n)},e}(),bt=function(){function e(){this.elements=null}return r(e,"laya.d3.math.BaseVector"),e}(),Ft=function(){function e(e,t){this.min=null,this.max=null,this.min=e,this.max=t}r(e,"laya.d3.math.BoundBox");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.getCorners=function(e){e.length=8;var t=this.min.elements,n=this.max.elements,i=t[0],r=t[1],a=t[2],o=n[0],s=n[1],l=n[2];e[0]=new Di(i,s,l),e[1]=new Di(o,s,l),e[2]=new Di(o,r,l),e[3]=new Di(i,r,l),e[4]=new Di(i,s,a),e[5]=new Di(o,s,a),e[6]=new Di(o,r,a),e[7]=new Di(i,r,a)},t.toDefault=function(){this.min.toDefault(),this.max.toDefault()},t.cloneTo=function(e){var t=e;this.min.cloneTo(t.min),this.max.cloneTo(t.max)},t.clone=function(){var e=new this.constructor(new Di,new Di);return this.cloneTo(e),e},e.createfromPoints=function(e,t){if(null==e)throw new Error("points");var n=t.min,i=t.max,r=n.elements;r[0]=Number.MAX_VALUE,r[1]=Number.MAX_VALUE,r[2]=Number.MAX_VALUE;var a=i.elements;a[0]=-Number.MAX_VALUE,a[1]=-Number.MAX_VALUE,a[2]=-Number.MAX_VALUE;for(var o=0,s=e.length;s>o;++o)Di.min(n,e[o],n),Di.max(i,e[o],i)},e.merge=function(e,t,n){Di.min(e.min,t.min,n.min),Di.max(e.max,t.max,n.max)},e}(),Bt=function(){function e(t){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=t,this._near=new Xt(new Di),this._far=new Xt(new Di),this._left=new Xt(new Di),this._right=new Xt(new Di),this._top=new Xt(new Di),this._bottom=new Xt(new Di),e._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}r(e,"laya.d3.math.BoundFrustum");var t=e.prototype;return t.equalsBoundFrustum=function(e){return this._matrix.equalsOtherMatrix(e.matrix)},t.equalsObj=function(e){if(e instanceof laya.d3.math.BoundFrustum){var t=e;return this.equalsBoundFrustum(t)}return!1},t.getPlane=function(e){switch(e){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},t.getCorners=function(t){e._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(t[0]),e._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(t[1]),e._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(t[2]),e._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(t[3]),e._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(t[4]),e._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(t[5]),e._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(t[6]),e._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(t[7])},t.containsPoint=function(e){for(var t=Xt.PlaneIntersectionType_Front,n=Xt.PlaneIntersectionType_Front,i=0;6>i;i++){switch(i){case 0:n=Gt.intersectsPlaneAndPoint(this._near,e);break;case 1:n=Gt.intersectsPlaneAndPoint(this._far,e);break;case 2:n=Gt.intersectsPlaneAndPoint(this._left,e);break;case 3:n=Gt.intersectsPlaneAndPoint(this._right,e);break;case 4:n=Gt.intersectsPlaneAndPoint(this._top,e);break;case 5:n=Gt.intersectsPlaneAndPoint(this._bottom,e)}switch(n){case Xt.PlaneIntersectionType_Back:return 0;case Xt.PlaneIntersectionType_Intersecting:t=Xt.PlaneIntersectionType_Intersecting}}switch(t){case Xt.PlaneIntersectionType_Intersecting:return 2;default:return 1}},t.containsBoundBox=function(t){for(var n,i=e._tempV30,r=e._tempV31,a=1,o=0;6>o;o++){if(n=this.getPlane(o),this._getBoxToPlanePVertexNVertex(t,n.normal,i,r),Gt.intersectsPlaneAndPoint(n,i)===Xt.PlaneIntersectionType_Back)return 0;Gt.intersectsPlaneAndPoint(n,r)===Xt.PlaneIntersectionType_Back&&(a=2)}return a},t.containsBoundSphere=function(e){for(var t=Xt.PlaneIntersectionType_Front,n=Xt.PlaneIntersectionType_Front,i=0;6>i;i++){switch(i){case 0:n=Gt.intersectsPlaneAndSphere(this._near,e);break;case 1:n=Gt.intersectsPlaneAndSphere(this._far,e);break;case 2:n=Gt.intersectsPlaneAndSphere(this._left,e);break;case 3:n=Gt.intersectsPlaneAndSphere(this._right,e);break;case 4:n=Gt.intersectsPlaneAndSphere(this._top,e);break;case 5:n=Gt.intersectsPlaneAndSphere(this._bottom,e)}switch(n){case Xt.PlaneIntersectionType_Back:return 0;case Xt.PlaneIntersectionType_Intersecting:t=Xt.PlaneIntersectionType_Intersecting}}switch(t){case Xt.PlaneIntersectionType_Intersecting:return 2;default:return 1}},t._getBoxToPlanePVertexNVertex=function(e,t,n,i){var r=e.min,a=r.elements,o=e.max,s=o.elements,l=t.elements,h=l[0],c=l[1],_=l[2];r.cloneTo(n);var u=n.elements;h>=0&&(u[0]=s[0]),c>=0&&(u[1]=s[1]),_>=0&&(u[2]=s[2]),o.cloneTo(i);var d=i.elements;h>=0&&(d[0]=a[0]),c>=0&&(d[1]=a[1]),_>=0&&(d[2]=a[2])},a(0,t,"top",function(){return this._top}),a(0,t,"matrix",function(){return this._matrix},function(t){this._matrix=t,e._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),a(0,t,"near",function(){return this._near}),a(0,t,"far",function(){return this._far}),a(0,t,"left",function(){return this._left}),a(0,t,"right",function(){return this._right}),a(0,t,"bottom",function(){return this._bottom}),e._getPlanesFromMatrix=function(e,t,n,i,r,a,o){var s=e.elements,l=s[0],h=s[1],c=s[2],_=s[3],u=s[4],d=s[5],f=s[6],m=s[7],p=s[8],v=s[9],E=s[10],T=s[11],g=s[12],S=s[13],x=s[14],D=s[15],M=t.normal.elements;M[0]=_+c,M[1]=m+f,M[2]=T+E,t.distance=D+x,t.normalize();var A=n.normal.elements;A[0]=_-c,A[1]=m-f,A[2]=T-E,n.distance=D-x,n.normalize();var R=i.normal.elements;R[0]=_+l,R[1]=m+u,R[2]=T+p,i.distance=D+g,i.normalize();var I=r.normal.elements;I[0]=_-l,I[1]=m-u,I[2]=T-p,r.distance=D-g,r.normalize();var C=a.normal.elements;C[0]=_-h,C[1]=m-d,C[2]=T-v,a.distance=D-S,a.normalize();var y=o.normal.elements;y[0]=_+h,y[1]=m+d,y[2]=T+v,o.distance=D+S,o.normalize()},e._get3PlaneInterPoint=function(t,n,i){var r=t.normal,a=n.normal,o=i.normal;Di.cross(a,o,e._tempV30),Di.cross(o,r,e._tempV31),Di.cross(r,a,e._tempV32);var s=Di.dot(r,e._tempV30),l=Di.dot(a,e._tempV31),h=Di.dot(o,e._tempV32);Di.scale(e._tempV30,-t.distance/s,e._tempV33),Di.scale(e._tempV31,-n.distance/l,e._tempV34),Di.scale(e._tempV32,-i.distance/h,e._tempV35),Di.add(e._tempV33,e._tempV34,e._tempV36),Di.add(e._tempV35,e._tempV36,e._tempV37);var c=e._tempV37;return c},i(e,["_tempV30",function(){return this._tempV30=new Di},"_tempV31",function(){return this._tempV31=new Di},"_tempV32",function(){return this._tempV32=new Di},"_tempV33",function(){return this._tempV33=new Di},"_tempV34",function(){return this._tempV34=new Di},"_tempV35",function(){return this._tempV35=new Di},"_tempV36",function(){return this._tempV36=new Di},"_tempV37",function(){return this._tempV37=new Di}]),e}(),Ut=function(){function e(e,t){this.center=null,this.radius=0/0,this.center=e,this.radius=t}r(e,"laya.d3.math.BoundSphere");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.toDefault=function(){this.center.toDefault(),this.radius=0},t.intersectsRayDistance=function(e){return Gt.intersectsRayAndSphereRD(e,this)},t.intersectsRayPoint=function(e,t){return Gt.intersectsRayAndSphereRP(e,this,t)},t.cloneTo=function(e){var t=e;this.center.cloneTo(t.center),t.radius=this.radius},t.clone=function(){var e=new this.constructor(new Di,new Di);return this.cloneTo(e),e},e.createFromSubPoints=function(t,n,i,r){if(null==t)throw new Error("points");if(0>n||n>=t.length)throw new Error("start"+n+"Must be in the range [0, "+(t.length-1)+"]");if(0>i||n+i>t.length)throw new Error("count"+i+"Must be in the range <= "+t.length+"}");var a=n+i,o=e._tempVector3;o.elements[0]=0,o.elements[1]=0,o.elements[2]=0;for(var s=n;a>s;++s)Di.add(t[s],o,o);var l=r.center;Di.scale(o,1/i,l);var h=0;for(s=n;a>s;++s){var c=Di.distanceSquared(l,t[s]);c>h&&(h=c)}r.radius=Math.sqrt(h)},e.createfromPoints=function(t,n){if(null==t)throw new Error("points");e.createFromSubPoints(t,0,t.length,n)},i(e,["_tempVector3",function(){return this._tempVector3=new Di}]),e}(),Gt=function(){function e(){}return r(e,"laya.d3.math.CollisionUtils"),e.distancePlaneToPoint=function(e,t){var n=Di.dot(e.normal,t);return n-e.distance},e.distanceBoxToPoint=function(e,t){var n=e.min.elements,i=n[0],r=n[1],a=n[2],o=e.max.elements,s=o[0],l=o[1],h=o[2],c=t.elements,_=c[0],u=c[1],d=c[2],f=0;return i>_&&(f+=(i-_)*(i-_)),_>s&&(f+=(s-_)*(s-_)),r>u&&(f+=(r-u)*(r-u)),u>l&&(f+=(l-u)*(l-u)),a>d&&(f+=(a-d)*(a-d)),d>h&&(f+=(h-d)*(h-d)),Math.sqrt(f)},e.distanceBoxToBox=function(e,t){var n=e.min.elements,i=n[0],r=n[1],a=n[2],o=e.max.elements,s=o[0],l=o[1],h=o[2],c=t.min.elements,_=c[0],u=c[1],d=c[2],f=t.max.elements,m=f[0],p=f[1],v=f[2],E=0,T=0/0;return i>m?(T=i-m,E+=T*T):_>s&&(T=_-s,E+=T*T),r>p?(T=r-p,E+=T*T):u>l&&(T=u-l,E+=T*T),a>v?(T=a-v,E+=T*T):d>h&&(T=d-h,E+=T*T),Math.sqrt(E)},e.distanceSphereToPoint=function(e,t){var n=Math.sqrt(Di.distanceSquared(e.center,t));return n-=e.radius,Math.max(n,0)},e.distanceSphereToSphere=function(e,t){var n=Math.sqrt(Di.distanceSquared(e.center,t.center));return n-=e.radius+t.radius,Math.max(n,0)},e.intersectsRayAndTriangleRD=function(t,n,i,r,a){var o=t.origin,s=o.elements,l=s[0],h=s[1],c=s[2],_=t.direction,u=_.elements,d=u[0],f=u[1],m=u[2],p=n.elements,v=p[0],E=p[1],T=p[2],g=i.elements,S=g[0],x=g[1],D=g[2],M=r.elements,A=M[0],R=M[1],I=M[2],C=e._tempV30.elements,y=C[0],O=C[1],L=C[2];y=S-v,O=x-E,L=D-T;var V=e._tempV31.elements,w=V[0],N=V[1],P=V[2];w=A-v,N=R-E,P=I-T;var b=e._tempV32.elements,F=b[0],B=b[1],U=b[2];F=f*P-m*N,B=m*w-d*P,U=d*N-f*w;var G=y*F+O*B+L*U;if(zt.isZero(G))return a=0,!1;var H=1/G,z=e._tempV33.elements,k=z[0],W=z[1],X=z[2];k=l-v,W=h-E,X=c-T;var Y=k*F+W*B+X*U;if(Y*=H,0>Y||Y>1)return a=0,!1;var Z=e._tempV34.elements,j=Z[0],K=Z[1],q=Z[2];j=W*L-X*O,K=X*y-k*L,q=k*O-W*y;var Q=d*j+f*K+m*q;if(Q*=H,0>Q||Y+Q>1)return a=0,!1;var $=w*j+N*K+P*q;return $*=H,0>$?(a=0,!1):(a=$,!0)},e.intersectsRayAndTriangleRP=function(t,n,i,r,a){var o=0/0;return e.intersectsRayAndTriangleRD(t,n,i,r,o)?(Di.scale(t.direction,o,e._tempV30),Di.add(t.origin,e._tempV30,a),!0):(a=Di.ZERO,!1)},e.intersectsRayAndPoint=function(t,n){Di.subtract(t.origin,n,e._tempV30);var i=Di.dot(e._tempV30,t.direction),r=Di.dot(e._tempV30,e._tempV30)-zt.zeroTolerance;if(r>0&&i>0)return!1;var a=i*i-r;return 0>a?!1:!0},e.intersectsRayAndRay=function(t,n,i){var r=t.origin,a=r.elements,o=a[0],s=a[1],l=a[2],h=t.direction,c=h.elements,_=c[0],u=c[1],d=c[2],f=n.origin,m=f.elements,p=m[0],v=m[1],E=m[2],T=n.direction,g=T.elements,S=g[0],x=g[1],D=g[2];Di.cross(h,T,e._tempV30);var M=e._tempV30.elements,A=Di.scalarLength(e._tempV30);if(zt.isZero(A)&&zt.nearEqual(p,o)&&zt.nearEqual(v,s)&&zt.nearEqual(E,l))return i=Di.ZERO,!0;A*=A;var R=p-o,I=v-s,C=E-l,y=S,O=x,L=D,V=M[0],w=M[1],N=M[2],P=R*O*N+I*L*V+C*y*w-R*L*w-I*y*N-C*O*V;y=_,O=u,L=d;var b=P/A;Di.scale(h,b,e._tempV30),Di.scale(T,b,e._tempV31),Di.add(r,e._tempV30,e._tempV32),Di.add(f,e._tempV31,e._tempV33);var F=e._tempV32.elements,B=e._tempV33.elements;return zt.nearEqual(B[0],F[0])&&zt.nearEqual(B[1],F[1])&&zt.nearEqual(B[2],F[2])?(i=e._tempV32,!0):(i=Di.ZERO,!1)},e.intersectsPlaneAndTriangle=function(t,n,i,r){var a=e.intersectsPlaneAndPoint(t,n),o=e.intersectsPlaneAndPoint(t,i),s=e.intersectsPlaneAndPoint(t,r);return a==Xt.PlaneIntersectionType_Front&&o==Xt.PlaneIntersectionType_Front&&s==Xt.PlaneIntersectionType_Front?Xt.PlaneIntersectionType_Front:a==Xt.PlaneIntersectionType_Back&&o==Xt.PlaneIntersectionType_Back&&s==Xt.PlaneIntersectionType_Back?Xt.PlaneIntersectionType_Back:Xt.PlaneIntersectionType_Intersecting},e.intersectsRayAndPlaneRD=function(e,t,n){var i=t.normal,r=Di.dot(i,e.direction);if(zt.isZero(r))return n=0,!1;var a=Di.dot(i,e.origin);return n=(-t.distance-a)/r,0>n?(n=0,!1):!0},e.intersectsRayAndPlaneRP=function(t,n,i){var r=0/0;return e.intersectsRayAndPlaneRD(t,n,r)?(Di.scale(t.direction,r,e._tempV30),Di.add(t.origin,e._tempV30,e._tempV31),i=e._tempV31,!0):(i=Di.ZERO,!1)},e.intersectsRayAndBoxRD=function(e,t){var n=e.origin.elements,i=n[0],r=n[1],a=n[2],o=e.direction.elements,s=o[0],l=o[1],h=o[2],c=t.min.elements,_=c[0],u=c[1],d=c[2],f=t.max.elements,m=f[0],p=f[1],v=f[2],E=0,T=zt.MaxValue;if(zt.isZero(s)){if(_>i||i>m)return-1}else{var g=1/s,S=(_-i)*g,x=(m-i)*g;if(S>x){var D=S;S=x,x=D}if(E=Math.max(S,E),T=Math.min(x,T),E>T)return-1}if(zt.isZero(l)){if(u>r||r>p)return-1}else{var M=1/l,A=(u-r)*M,R=(p-r)*M;if(A>R){var I=A;A=R,R=I}if(E=Math.max(A,E),T=Math.min(R,T),E>T)return-1}if(zt.isZero(h)){if(d>a||a>v)return-1}else{var C=1/h,y=(d-a)*C,O=(v-a)*C;if(y>O){var L=y;y=O,O=L}if(E=Math.max(y,E),T=Math.min(O,T),E>T)return-1}return E},e.intersectsRayAndBoxRP=function(t,n,i){var r=e.intersectsRayAndBoxRD(t,n);return-1===r?(Di.ZERO.cloneTo(i),r):(Di.scale(t.direction,r,e._tempV30),Di.add(t.origin,e._tempV30,e._tempV31),e._tempV31.cloneTo(i),r)},e.intersectsRayAndSphereRD=function(t,n){var i=n.radius;Di.subtract(t.origin,n.center,e._tempV30);var r=Di.dot(e._tempV30,t.direction),a=Di.dot(e._tempV30,e._tempV30)-i*i;if(a>0&&r>0)return-1;var o=r*r-a;if(0>o)return-1;var s=-r-Math.sqrt(o);return 0>s&&(s=0),s},e.intersectsRayAndSphereRP=function(t,n,i){var r=e.intersectsRayAndSphereRD(t,n);return-1===r?(Di.ZERO.cloneTo(i),r):(Di.scale(t.direction,r,e._tempV30),Di.add(t.origin,e._tempV30,e._tempV31),e._tempV31.cloneTo(i),r)},e.intersectsSphereAndTriangle=function(t,n,i,r){var a=t.center,o=t.radius;e.closestPointPointTriangle(a,n,i,r,e._tempV30),Di.subtract(e._tempV30,a,e._tempV31);var s=Di.dot(e._tempV31,e._tempV31);return o*o>=s},e.intersectsPlaneAndPoint=function(e,t){var n=Di.dot(e.normal,t)+e.distance;return n>0?Xt.PlaneIntersectionType_Front:0>n?Xt.PlaneIntersectionType_Back:Xt.PlaneIntersectionType_Intersecting},e.intersectsPlaneAndPlane=function(t,n){Di.cross(t.normal,n.normal,e._tempV30);var i=Di.dot(e._tempV30,e._tempV30);return zt.isZero(i)?!1:!0},e.intersectsPlaneAndPlaneRL=function(t,n,i){var r=t.normal,a=n.normal;Di.cross(r,a,e._tempV34);var o=Di.dot(e._tempV34,e._tempV34);return zt.isZero(o)?!1:(Di.scale(a,t.distance,e._tempV30),Di.scale(r,n.distance,e._tempV31),Di.subtract(e._tempV30,e._tempV31,e._tempV32),Di.cross(e._tempV32,e._tempV34,e._tempV33),Di.normalize(e._tempV34,e._tempV34),i=new jt(e._tempV33,e._tempV34),!0)},e.intersectsPlaneAndBox=function(t,n){var i=t.distance,r=t.normal,a=r.elements,o=a[0],s=a[1],l=a[2],h=n.min.elements,c=h[0],_=h[1],u=h[2],d=n.max.elements,f=d[0],m=d[1],p=d[2];e._tempV30.elements[0]=o>0?c:f,e._tempV30.elements[1]=s>0?_:m,e._tempV30.elements[2]=l>0?u:p,e._tempV31.elements[0]=o>0?f:c,e._tempV31.elements[1]=s>0?m:_,e._tempV31.elements[2]=l>0?p:u;var v=Di.dot(r,e._tempV30);return v+i>0?Xt.PlaneIntersectionType_Front:(v=Di.dot(r,e._tempV31),0>v+i?Xt.PlaneIntersectionType_Back:Xt.PlaneIntersectionType_Intersecting)},e.intersectsPlaneAndSphere=function(e,t){var n=t.radius,i=Di.dot(e.normal,t.center)+e.distance;return i>n?Xt.PlaneIntersectionType_Front:-n>i?Xt.PlaneIntersectionType_Back:Xt.PlaneIntersectionType_Intersecting},e.intersectsBoxAndBox=function(e,t){var n=e.min.elements,i=e.max.elements,r=t.min.elements,a=t.max.elements;return n[0]>a[0]||r[0]>i[0]?!1:n[1]>a[1]||r[1]>i[1]?!1:n[2]>a[2]||r[2]>i[2]?!1:!0},e.intersectsBoxAndSphere=function(t,n){var i=n.center,r=n.radius;Di.Clamp(i,t.min,t.max,e._tempV30);var a=Di.distanceSquared(i,e._tempV30);return r*r>=a},e.intersectsSphereAndSphere=function(e,t){var n=e.radius+t.radius;return Di.distanceSquared(e.center,t.center)<=n*n},e.boxContainsPoint=function(e,t){var n=e.min.elements,i=e.max.elements,r=t.elements;return n[0]<=r[0]&&i[0]>=r[0]&&n[1]<=r[1]&&i[1]>=r[1]&&n[2]<=r[2]&&i[2]>=r[2]?1:0},e.boxContainsBox=function(e,t){var n=e.min.elements,i=n[0],r=n[1],a=n[2],o=e.max.elements,s=o[0],l=o[1],h=o[2],c=t.min.elements,_=c[0],u=c[1],d=c[2],f=t.max.elements,m=f[0],p=f[1],v=f[2];return _>s||i>m?0:u>l||r>p?0:d>h||a>v?0:_>=i&&m>=m&&u>=r&&l>=p&&d>=a&&h>=v?1:2},e.boxContainsSphere=function(t,n){var i=t.min,r=i.elements,a=r[0],o=r[1],s=r[2],l=t.max,h=l.elements,c=h[0],_=h[1],u=h[2],d=n.center,f=d.elements,m=f[0],p=f[1],v=f[2],E=n.radius;
Di.Clamp(d,i,l,e._tempV30);var T=Di.distanceSquared(d,e._tempV30);return T>E*E?0:m>=a+E&&c-E>=m&&c-a>E&&p>=o+E&&_-E>=p&&_-o>E&&v>=s+E&&u-E>=v&&u-s>E?1:2},e.sphereContainsPoint=function(e,t){return Di.distanceSquared(t,e.center)<=e.radius*e.radius?1:0},e.sphereContainsTriangle=function(t,n,i,r){var a=e.sphereContainsPoint(t,n),o=e.sphereContainsPoint(t,i),s=e.sphereContainsPoint(t,r);return 1==a&&1==o&&1==s?1:e.intersectsSphereAndTriangle(t,n,i,r)?2:0},e.sphereContainsBox=function(t,n){var i=t.center,r=i.elements,a=r[0],o=r[1],s=r[2],l=t.radius,h=n.min,c=h.elements,_=c[0],u=c[1],d=c[2],f=n.max,m=f.elements,p=m[0],v=m[1],E=m[2],T=e._tempV30.elements,g=T[0],S=T[1],x=T[2];if(!e.intersectsBoxAndSphere(n,t))return 0;var D=l*l;return g=a-_,S=o-v,x=s-E,Di.scalarLengthSquared(e._tempV30)>D?2:(g=a-p,S=o-v,x=s-E,Di.scalarLengthSquared(e._tempV30)>D?2:(g=a-p,S=o-u,x=s-E,Di.scalarLengthSquared(e._tempV30)>D?2:(g=a-_,S=o-u,x=s-E,Di.scalarLengthSquared(e._tempV30)>D?2:(g=a-_,S=o-v,x=s-d,Di.scalarLengthSquared(e._tempV30)>D?2:(g=a-p,S=o-v,x=s-d,Di.scalarLengthSquared(e._tempV30)>D?2:(g=a-p,S=o-u,x=s-d,Di.scalarLengthSquared(e._tempV30)>D?2:(g=a-_,S=o-u,x=s-d,Di.scalarLengthSquared(e._tempV30)>D?2:1)))))))},e.sphereContainsSphere=function(e,t){var n=e.radius,i=t.radius,r=Di.distance(e.center,t.center);return r>n+i?0:r>n-i?2:1},e.closestPointPointTriangle=function(t,n,i,r,a){Di.subtract(i,n,e._tempV30),Di.subtract(r,n,e._tempV31),Di.subtract(t,n,e._tempV32),Di.subtract(t,i,e._tempV33),Di.subtract(t,r,e._tempV34);var o=Di.dot(e._tempV30,e._tempV32),s=Di.dot(e._tempV31,e._tempV32),l=Di.dot(e._tempV30,e._tempV33),h=Di.dot(e._tempV31,e._tempV33),c=Di.dot(e._tempV30,e._tempV34),_=Di.dot(e._tempV31,e._tempV34);if(0>=o&&0>=s)return n.cloneTo(a),void 0;if(l>=0&&l>=h)return i.cloneTo(a),void 0;var u=o*h-l*s;if(0>=u&&o>=0&&0>=l){var d=o/(o-l);return Di.scale(e._tempV30,d,a),Di.add(n,a,a),void 0}if(_>=0&&_>=c)return r.cloneTo(a),void 0;var f=c*s-o*_;if(0>=f&&s>=0&&0>=_){var m=s/(s-_);return Di.scale(e._tempV31,m,a),Di.add(n,a,a),void 0}var p=l*_-c*h;if(0>=p&&h-l>=0&&c-_>=0){var v=(h-l)/(h-l+(c-_));return Di.subtract(r,i,a),Di.scale(a,v,a),Di.add(i,a,a),void 0}var E=1/(p+f+u),T=f*E,g=u*E;Di.scale(e._tempV30,T,e._tempV35),Di.scale(e._tempV31,g,e._tempV36),Di.add(e._tempV35,e._tempV36,a),Di.add(n,a,a)},e.closestPointPlanePoint=function(t,n,i){var r=t.normal,a=Di.dot(r,n)-t.distance;Di.scale(r,a,e._tempV30),Di.subtract(n,e._tempV30,i)},e.closestPointBoxPoint=function(t,n,i){Di.max(n,t.min,e._tempV30),Di.min(e._tempV30,t.max,i)},e.closestPointSpherePoint=function(e,t,n){var i=e.center;Di.subtract(t,i,n),Di.normalize(n,n),Di.scale(n,e.radius,n),Di.add(n,i,n)},e.closestPointSphereSphere=function(e,t,n){var i=e.center;Di.subtract(t.center,i,n),Di.normalize(n,n),Di.scale(n,e.radius,n),Di.add(n,i,n)},i(e,["_tempV30",function(){return this._tempV30=new Di},"_tempV31",function(){return this._tempV31=new Di},"_tempV32",function(){return this._tempV32=new Di},"_tempV33",function(){return this._tempV33=new Di},"_tempV34",function(){return this._tempV34=new Di},"_tempV35",function(){return this._tempV35=new Di},"_tempV36",function(){return this._tempV36=new Di}]),e}(),Ht=function(){function e(e,t,n,i){this.elements=null,void 0===e&&(e=1),void 0===t&&(t=1),void 0===n&&(n=1),void 0===i&&(i=1);var r=this.elements=new Float32Array(4);r[0]=e,r[1]=t,r[2]=n,r[3]=i}r(e,"laya.d3.math.Color");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.cloneTo=function(e){var t=e,n=t.elements,i=this.elements;n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,t,"b",function(){return this.elements[2]},function(e){this.elements[2]=e}),a(0,t,"r",function(){return this.elements[0]},function(e){this.elements[0]=e}),a(0,t,"g",function(){return this.elements[1]},function(e){this.elements[1]=e}),a(0,t,"a",function(){return this.elements[3]},function(e){this.elements[3]=e}),i(e,["RED",function(){return this.RED=new e(1,0,0,1)},"GREEN",function(){return this.GREEN=new e(0,1,0,1)},"BLUE",function(){return this.BLUE=new e(0,0,1,1)},"CYAN",function(){return this.CYAN=new e(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new e(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new e(1,0,1,1)},"GRAY",function(){return this.GRAY=new e(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new e(1,1,1,1)},"BLACK",function(){return this.BLACK=new e(0,0,0,1)}]),e}(),zt=(function(){function e(){}return r(e,"laya.d3.math.ContainmentType"),e.Disjoint=0,e.Contains=1,e.Intersects=2,e}(),function(){function e(){}return r(e,"laya.d3.math.MathUtils3D"),e.isZero=function(t){return Math.abs(t)<e.zeroTolerance},e.nearEqual=function(t,n){return e.isZero(t-n)?!0:!1},e.fastInvSqrt=function(t){return e.isZero(t)?t:1/Math.sqrt(t)},i(e,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=3.40282347e38},"MinValue",function(){return this.MinValue=-3.40282347e38}]),e}()),kt=function(){function e(){var e=this.elements=new Float32Array(9);e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}r(e,"laya.d3.math.Matrix3x3");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.determinant=function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],h=e[8];return t*(h*a-o*l)+n*(-h*r+o*s)+i*(l*r-a*s)},t.translate=function(e,t){var n=t.elements,i=this.elements,r=e.elements,a=i[0],o=i[1],s=i[2],l=i[3],h=i[4],c=i[5],_=i[6],u=i[7],d=i[8],f=r[0],m=r[1];n[0]=a,n[1]=o,n[2]=s,n[3]=l,n[4]=h,n[5]=c,n[6]=f*a+m*l+_,n[7]=f*o+m*h+u,n[8]=f*s+m*c+d},t.rotate=function(e,t){var n=t.elements,i=this.elements,r=i[0],a=i[1],o=i[2],s=i[3],l=i[4],h=i[5],c=i[6],_=i[7],u=i[8],d=Math.sin(e),f=Math.cos(e);n[0]=f*r+d*s,n[1]=f*a+d*l,n[2]=f*o+d*h,n[3]=f*s-d*r,n[4]=f*l-d*a,n[5]=f*h-d*o,n[6]=c,n[7]=_,n[8]=u},t.scale=function(e,t){var n=t.elements,i=this.elements,r=e.elements,a=r[0],o=r[1];n[0]=a*i[0],n[1]=a*i[1],n[2]=a*i[2],n[3]=o*i[3],n[4]=o*i[4],n[5]=o*i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8]},t.invert=function(e){var t=e.elements,n=this.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],h=n[6],c=n[7],_=n[8],u=_*s-l*c,d=-_*o+l*h,f=c*o-s*h,m=i*u+r*d+a*f;m||(e=null),m=1/m,t[0]=u*m,t[1]=(-_*r+a*c)*m,t[2]=(l*r-a*s)*m,t[3]=d*m,t[4]=(_*i-a*h)*m,t[5]=(-l*i+a*o)*m,t[6]=f*m,t[7]=(-c*i+r*h)*m,t[8]=(s*i-r*o)*m},t.transpose=function(e){var t=e.elements,n=this.elements;if(e===this){var i=n[1],r=n[2],a=n[5];t[1]=n[3],t[2]=n[6],t[3]=i,t[5]=n[7],t[6]=r,t[7]=a}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8]},t.identity=function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1},t.cloneTo=function(e){var t,n,i;if(n=this.elements,i=e.elements,n!==i)for(t=0;9>t;++t)i[t]=n[t]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},e.createFromTranslation=function(e,t){var n=(t.elements,e.elements);t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1},e.createFromRotation=function(e,t){var n=t.elements,i=Math.sin(e),r=Math.cos(e);n[0]=r,n[1]=i,n[2]=0,n[3]=-i,n[4]=r,n[5]=0,n[6]=0,n[7]=0,n[8]=1},e.createFromScaling=function(e,t){var n=t.elements,i=e.elements;n[0]=i[0],n[1]=0,n[2]=0,n[3]=0,n[4]=i[1],n[5]=0,n[6]=0,n[7]=0,n[8]=1},e.createFromMatrix4x4=function(e,t){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10]},e.multiply=function(e,t,n){var i=n.elements,r=e.elements,a=t.elements,o=r[0],s=r[1],l=r[2],h=r[3],c=r[4],_=r[5],u=r[6],d=r[7],f=r[8],m=a[0],p=a[1],v=a[2],E=a[3],T=a[4],g=a[5],S=a[6],x=a[7],D=a[8];i[0]=m*o+p*h+v*u,i[1]=m*s+p*c+v*d,i[2]=m*l+p*_+v*f,i[3]=E*o+T*h+g*u,i[4]=E*s+T*c+g*d,i[5]=E*l+T*_+g*f,i[6]=S*o+x*h+D*u,i[7]=S*s+x*c+D*d,i[8]=S*l+x*_+D*f},e.lookAt=function(t,n,i,r){Di.subtract(t,n,e._tempV30),Di.normalize(e._tempV30,e._tempV30),Di.cross(i,e._tempV30,e._tempV31),Di.normalize(e._tempV31,e._tempV31),Di.cross(e._tempV30,e._tempV31,e._tempV32);var a=e._tempV30.elements,o=e._tempV31.elements,s=e._tempV32.elements,l=r.elements;l[0]=o[0],l[3]=o[1],l[6]=o[2],l[1]=s[0],l[4]=s[1],l[7]=s[2],l[2]=a[0],l[5]=a[1],l[8]=a[2]},e.DEFAULT=new e,i(e,["_tempV30",function(){return this._tempV30=new Di},"_tempV31",function(){return this._tempV31=new Di},"_tempV32",function(){return this._tempV32=new Di}]),e}(),Wt=function(){function t(e,t,n,i,r,a,o,s,l,h,c,_,u,d,f,m,p){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=1),void 0===o&&(o=0),void 0===s&&(s=0),void 0===l&&(l=0),void 0===h&&(h=0),void 0===c&&(c=1),void 0===_&&(_=0),void 0===u&&(u=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===m&&(m=1);var v=this.elements=p?p:new Float32Array(16);v[0]=e,v[1]=t,v[2]=n,v[3]=i,v[4]=r,v[5]=a,v[6]=o,v[7]=s,v[8]=l,v[9]=h,v[10]=c,v[11]=_,v[12]=u,v[13]=d,v[14]=f,v[15]=m}r(t,"laya.d3.math.Matrix4x4");var a=t.prototype;return n.imps(a,{"laya.d3.core.IClone":!0}),a.setRotation=function(e){var t=e.elements,n=t[0],i=t[1],r=t[2],a=t[3],o=n*n,s=i*i,l=r*r,h=n*i,c=r*a,_=r*n,u=i*a,d=i*r,f=n*a,m=this.elements;m[0]=1-2*(s+l),m[1]=2*(h+c),m[2]=2*(_-u),m[4]=2*(h-c),m[5]=1-2*(l+o),m[6]=2*(d+f),m[8]=2*(_+u),m[9]=2*(d-f),m[10]=1-2*(s+o)},a.setPosition=function(e){var t=e.elements,n=this.elements;n[12]=t[0],n[13]=t[1],n[14]=t[2]},a.getElementByRowColumn=function(e,t){if(0>e||e>3)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(0>t||t>3)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*e+t]},a.setElementByRowColumn=function(e,t,n){if(0>e||e>3)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(0>t||t>3)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*e+t]=n},a.equalsOtherMatrix=function(e){var t=this.elements,n=e.elements;return zt.nearEqual(t[0],n[0])&&zt.nearEqual(t[1],n[1])&&zt.nearEqual(t[2],n[2])&&zt.nearEqual(t[3],n[3])&&zt.nearEqual(t[4],n[4])&&zt.nearEqual(t[5],n[5])&&zt.nearEqual(t[6],n[6])&&zt.nearEqual(t[7],n[7])&&zt.nearEqual(t[8],n[8])&&zt.nearEqual(t[9],n[9])&&zt.nearEqual(t[10],n[10])&&zt.nearEqual(t[11],n[11])&&zt.nearEqual(t[12],n[12])&&zt.nearEqual(t[13],n[13])&&zt.nearEqual(t[14],n[14])&&zt.nearEqual(t[15],n[15])},a.decomposeTransRotScale=function(e,n,i){var r=t._tempMatrix4x4;return this.decomposeTransRotMatScale(e,r,i)?(Yt.createFromMatrix4x4(r,n),!0):(n.identity(),!1)},a.decomposeTransRotMatScale=function(e,n,i){var r=this.elements,a=e.elements,o=n.elements,s=i.elements;a[0]=r[12],a[1]=r[13],a[2]=r[14];var l=r[0],h=r[1],c=r[2],_=r[4],u=r[5],d=r[6],f=r[8],m=r[9],p=r[10],v=s[0]=Math.sqrt(l*l+h*h+c*c),E=s[1]=Math.sqrt(_*_+u*u+d*d),T=s[2]=Math.sqrt(f*f+m*m+p*p);if(zt.isZero(v)||zt.isZero(E)||zt.isZero(T))return o[1]=o[2]=o[3]=o[4]=o[6]=o[7]=o[8]=o[9]=o[11]=o[12]=o[13]=o[14]=0,o[0]=o[5]=o[10]=o[15]=1,!1;var g=t._tempVector0,S=g.elements;S[0]=f/T,S[1]=m/T,S[2]=p/T;var x=t._tempVector1,D=x.elements;D[0]=l/v,D[1]=h/v,D[2]=c/v;var M=t._tempVector2;Di.cross(g,x,M);var A=t._tempVector1;return Di.cross(M,g,A),o[3]=o[7]=o[11]=o[12]=o[13]=o[14]=0,o[15]=1,o[0]=A.x,o[1]=A.y,o[2]=A.z,o[4]=M.x,o[5]=M.y,o[6]=M.z,o[8]=g.x,o[9]=g.y,o[10]=g.z,o[0]*l+o[1]*h+o[2]*c<0&&(s[0]=-v),o[4]*_+o[5]*u+o[6]*d<0&&(s[1]=-E),o[8]*f+o[9]*m+o[10]*p<0&&(s[2]=-T),!0},a.decomposeYawPitchRoll=function(e){var t=e.elements,n=Math.asin(-this.elements[9]);t[1]=n;var i=Math.cos(n);i>zt.zeroTolerance?(t[2]=Math.atan2(this.elements[1],this.elements[5]),t[0]=Math.atan2(this.elements[8],this.elements[10])):(t[2]=Math.atan2(-this.elements[4],this.elements[0]),t[0]=0)},a.normalize=function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=Math.sqrt(t*t+n*n+i*i);return r?(1!=r&&(r=1/r,e[0]=t*r,e[1]=n*r,e[2]=i*r),void 0):(e[0]=0,e[1]=0,e[2]=0,void 0)},a.transpose=function(){var e,t;return e=this.elements,t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},a.invert=function(e){var t=this.elements,n=e.elements,i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],h=t[6],c=t[7],_=t[8],u=t[9],d=t[10],f=t[11],m=t[12],p=t[13],v=t[14],E=t[15],T=i*l-r*s,g=i*h-a*s,S=i*c-o*s,x=r*h-a*l,D=r*c-o*l,M=a*c-o*h,A=_*p-u*m,R=_*v-d*m,I=_*E-f*m,C=u*v-d*p,y=u*E-f*p,O=d*E-f*v,L=T*O-g*y+S*C+x*I-D*R+M*A;0!==Math.abs(L)&&(L=1/L,n[0]=(l*O-h*y+c*C)*L,n[1]=(a*y-r*O-o*C)*L,n[2]=(p*M-v*D+E*x)*L,n[3]=(d*D-u*M-f*x)*L,n[4]=(h*I-s*O-c*R)*L,n[5]=(i*O-a*I+o*R)*L,n[6]=(v*S-m*M-E*g)*L,n[7]=(_*M-d*S+f*g)*L,n[8]=(s*y-l*I+c*A)*L,n[9]=(r*I-i*y-o*A)*L,n[10]=(m*D-p*S+E*T)*L,n[11]=(u*S-_*D-f*T)*L,n[12]=(l*R-s*C-h*A)*L,n[13]=(i*C-r*R+a*A)*L,n[14]=(p*g-m*x-v*T)*L,n[15]=(_*x-u*g+d*T)*L)},a.identity=function(){var e=this.elements;e[1]=e[2]=e[3]=e[4]=e[6]=e[7]=e[8]=e[9]=e[11]=e[12]=e[13]=e[14]=0,e[0]=e[5]=e[10]=e[15]=1},a.cloneTo=function(e){var t,n,i;if(n=this.elements,i=e.elements,n!==i)for(t=0;16>t;++t)i[t]=n[t]},a.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a.getTranslationVector=function(e){var t=this.elements,n=e.elements;n[0]=t[12],n[1]=t[13],n[2]=t[14]},a.setTranslationVector=function(e){var t=this.elements,n=e.elements;t[12]=n[0],t[13]=n[1],t[14]=n[2]},a.getForward=function(e){var t=this.elements,n=e.elements;n[0]=-t[8],n[1]=-t[9],n[2]=-t[10]},a.setForward=function(e){var t=this.elements,n=e.elements;t[8]=-n[0],t[9]=-n[1],t[10]=-n[2]},t.createRotationX=function(e,t){var n=t.elements,i=Math.sin(e),r=Math.cos(e);n[1]=n[2]=n[3]=n[4]=n[7]=n[8]=n[11]=n[12]=n[13]=n[14]=0,n[0]=n[15]=1,n[5]=n[10]=r,n[6]=i,n[9]=-i},t.createRotationY=function(e,t){var n=t.elements,i=Math.sin(e),r=Math.cos(e);n[1]=n[3]=n[4]=n[6]=n[7]=n[9]=n[11]=n[12]=n[13]=n[14]=0,n[5]=n[15]=1,n[0]=n[10]=r,n[2]=-i,n[8]=i},t.createRotationZ=function(e,t){var n=t.elements,i=Math.sin(e),r=Math.cos(e);n[2]=n[3]=n[6]=n[7]=n[8]=n[9]=n[11]=n[12]=n[13]=n[14]=0,n[10]=n[15]=1,n[0]=n[5]=r,n[1]=i,n[4]=-i},t.createRotationYawPitchRoll=function(e,n,i,r){Yt.createFromYawPitchRoll(e,n,i,t._tempQuaternion),t.createRotationQuaternion(t._tempQuaternion,r)},t.createRotationAxis=function(e,t,n){var i=e.elements,r=i[0],a=i[1],o=i[2],s=Math.cos(t),l=Math.sin(t),h=r*r,c=a*a,_=o*o,u=r*a,d=r*o,f=a*o,m=n.elements;m[3]=m[7]=m[11]=m[12]=m[13]=m[14]=0,m[15]=1,m[0]=h+s*(1-h),m[1]=u-s*u+l*o,m[2]=d-s*d-l*a,m[4]=u-s*u-l*o,m[5]=c+s*(1-c),m[6]=f-s*f+l*r,m[8]=d-s*d+l*a,m[9]=f-s*f-l*r,m[10]=_+s*(1-_)},t.createRotationQuaternion=function(e,t){var n=e.elements,i=t.elements,r=n[0],a=n[1],o=n[2],s=n[3],l=r*r,h=a*a,c=o*o,_=r*a,u=o*s,d=o*r,f=a*s,m=a*o,p=r*s;i[3]=i[7]=i[11]=i[12]=i[13]=i[14]=0,i[15]=1,i[0]=1-2*(h+c),i[1]=2*(_+u),i[2]=2*(d-f),i[4]=2*(_-u),i[5]=1-2*(c+l),i[6]=2*(m+p),i[8]=2*(d+f),i[9]=2*(m-p),i[10]=1-2*(h+l)},t.createTranslate=function(e,t){var n=e.elements,i=t.elements;i[4]=i[8]=i[1]=i[9]=i[2]=i[6]=i[3]=i[7]=i[11]=0,i[0]=i[5]=i[10]=i[15]=1,i[12]=n[0],i[13]=n[1],i[14]=n[2]},t.createScaling=function(e,t){var n=e.elements,i=t.elements;i[0]=n[0],i[5]=n[1],i[10]=n[2],i[1]=i[4]=i[8]=i[12]=i[9]=i[13]=i[2]=i[6]=i[14]=i[3]=i[7]=i[11]=0,i[15]=1},t.multiply=function(e,t,n){var i,r,a,o,s,l,h,c;if(r=n.elements,a=e.elements,o=t.elements,r===o)for(o=new Float32Array(16),i=0;16>i;++i)o[i]=r[i];var _=o[0],u=o[1],d=o[2],f=o[3],m=o[4],p=o[5],v=o[6],E=o[7],T=o[8],g=o[9],S=o[10],x=o[11],D=o[12],M=o[13],A=o[14],R=o[15];for(i=0;4>i;i++)s=a[i],l=a[i+4],h=a[i+8],c=a[i+12],r[i]=s*_+l*u+h*d+c*f,r[i+4]=s*m+l*p+h*v+c*E,r[i+8]=s*T+l*g+h*S+c*x,r[i+12]=s*D+l*M+h*A+c*R},t.multiplyForNative=function(t,n,i){e.conch.matrix4x4Multiply(t.elements,n.elements,i.elements)},t.createFromQuaternion=function(e,t){var n=t.elements,i=e.elements,r=i[0],a=i[1],o=i[2],s=i[3],l=r+r,h=a+a,c=o+o,_=r*l,u=a*l,d=a*h,f=o*l,m=o*h,p=o*c,v=s*l,E=s*h,T=s*c;n[0]=1-d-p,n[1]=u+T,n[2]=f-E,n[3]=0,n[4]=u-T,n[5]=1-_-p,n[6]=m+v,n[7]=0,n[8]=f+E,n[9]=m-v,n[10]=1-_-d,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1},t.createAffineTransformation=function(e,t,n,i){var r=e.elements,a=t.elements,o=n.elements,s=i.elements,l=a[0],h=a[1],c=a[2],_=a[3],u=l+l,d=h+h,f=c+c,m=l*u,p=l*d,v=l*f,E=h*d,T=h*f,g=c*f,S=_*u,x=_*d,D=_*f,M=o[0],A=o[1],R=o[2];s[0]=(1-(E+g))*M,s[1]=(p+D)*M,s[2]=(v-x)*M,s[3]=0,s[4]=(p-D)*A,s[5]=(1-(m+g))*A,s[6]=(T+S)*A,s[7]=0,s[8]=(v+x)*R,s[9]=(T-S)*R,s[10]=(1-(m+E))*R,s[11]=0,s[12]=r[0],s[13]=r[1],s[14]=r[2],s[15]=1},t.createLookAt=function(e,n,i,r){var a=r.elements,o=t._tempVector0,s=t._tempVector1,l=t._tempVector2;Di.subtract(e,n,l),Di.normalize(l,l),Di.cross(i,l,o),Di.normalize(o,o),Di.cross(l,o,s),r.identity(),a[0]=o.x,a[4]=o.y,a[8]=o.z,a[1]=s.x,a[5]=s.y,a[9]=s.z,a[2]=l.x,a[6]=l.y,a[10]=l.z,a[12]=-Di.dot(o,e),a[13]=-Di.dot(s,e),a[14]=-Di.dot(l,e)},t.createPerspective=function(e,t,n,i,r){var a=r.elements,o=1/Math.tan(e/2),s=1/(n-i);a[0]=o/t,a[5]=o,a[10]=(i+n)*s,a[11]=-1,a[14]=2*i*n*s,a[1]=a[2]=a[3]=a[4]=a[6]=a[7]=a[8]=a[9]=a[12]=a[13]=a[15]=0},t.createOrthoOffCenterRH=function(e,t,n,i,r,a,o){var s=o.elements,l=1/(e-t),h=1/(n-i),c=1/(r-a);s[1]=s[2]=s[3]=s[4]=s[6]=s[7]=s[8]=s[9]=s[11]=0,s[15]=1,s[0]=-2*l,s[5]=-2*h,s[10]=2*c,s[12]=(e+t)*l,s[13]=(i+n)*h,s[14]=(a+r)*c},t.translation=function(e,t){var n=e.elements,i=t.elements;i[0]=i[5]=i[10]=i[15]=1,i[12]=n[0],i[13]=n[1],i[14]=n[2]},i(t,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new t},"_tempVector0",function(){return this._tempVector0=new Di},"_tempVector1",function(){return this._tempVector1=new Di},"_tempVector2",function(){return this._tempVector2=new Di},"_tempQuaternion",function(){return this._tempQuaternion=new Yt},"DEFAULT",function(){return this.DEFAULT=new t},"ZERO",function(){return this.ZERO=new t(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),t}(),Xt=(function(){function e(e,t){this.extents=null,this.transformation=null,this.extents=e,this.transformation=t}r(e,"laya.d3.math.OrientedBoundBox");var t=e.prototype;return t.getCorners=function(t){var n=e._tempV30.elements,i=e._tempV31.elements,r=e._tempV32.elements,a=this.extents.elements;n[0]=a[0],n[1]=n[2]=0,i[1]=a[1],i[0]=i[2]=0,r[2]=a[2],r[0]=r[1]=0,Di.TransformNormal(e._tempV30,this.transformation,e._tempV30),Di.TransformNormal(e._tempV31,this.transformation,e._tempV31),Di.TransformNormal(e._tempV32,this.transformation,e._tempV32);var o=e._tempV33;this.transformation.getTranslationVector(o),t.length=8,Di.add(o,e._tempV30,e._tempV34),Di.add(e._tempV34,e._tempV31,e._tempV34),Di.add(e._tempV34,e._tempV32,t[0]),Di.add(o,e._tempV30,e._tempV34),Di.add(e._tempV34,e._tempV31,e._tempV34),Di.subtract(e._tempV34,e._tempV32,t[1]),Di.subtract(o,e._tempV30,e._tempV34),Di.add(e._tempV34,e._tempV31,e._tempV34),Di.subtract(e._tempV34,e._tempV32,t[2]),Di.subtract(o,e._tempV30,e._tempV34),Di.add(e._tempV34,e._tempV31,e._tempV34),Di.add(e._tempV34,e._tempV32,t[3]),Di.add(o,e._tempV30,e._tempV34),Di.subtract(e._tempV34,e._tempV31,e._tempV34),Di.add(e._tempV34,e._tempV32,t[4]),Di.add(o,e._tempV30,e._tempV34),Di.subtract(e._tempV34,e._tempV31,e._tempV34),Di.subtract(e._tempV34,e._tempV32,t[5]),Di.subtract(o,e._tempV30,e._tempV34),Di.subtract(e._tempV34,e._tempV31,e._tempV34),Di.subtract(e._tempV34,e._tempV32,t[6]),Di.subtract(o,e._tempV30,e._tempV34),Di.subtract(e._tempV34,e._tempV31,e._tempV34),Di.add(e._tempV34,e._tempV32,t[7])},t.transform=function(e){Wt.multiply(this.transformation,e,this.transformation)},t.scale=function(e){Di.multiply(this.extents,e,this.extents)},t.translate=function(t){this.transformation.getTranslationVector(e._tempV30),Di.add(e._tempV30,t,e._tempV31),this.transformation.setTranslationVector(e._tempV31)},t.Size=function(e){Di.scale(this.extents,2,e)},t.getSize=function(t){var n=this.extents.elements;e._tempV30.x=n[0],e._tempV31.y=n[1],e._tempV32.z=n[2],Di.TransformNormal(e._tempV30,this.transformation,e._tempV30),Di.TransformNormal(e._tempV31,this.transformation,e._tempV31),Di.TransformNormal(e._tempV31,this.transformation,e._tempV32);var i=t.elements;i[0]=Di.scalarLength(e._tempV30),i[1]=Di.scalarLength(e._tempV31),i[2]=Di.scalarLength(e._tempV32)},t.getSizeSquared=function(t){var n=this.extents.elements;e._tempV30.x=n[0],e._tempV31.y=n[1],e._tempV32.z=n[2],Di.TransformNormal(e._tempV30,this.transformation,e._tempV30),Di.TransformNormal(e._tempV31,this.transformation,e._tempV31),Di.TransformNormal(e._tempV31,this.transformation,e._tempV32);var i=t.elements;i[0]=Di.scalarLengthSquared(e._tempV30),i[1]=Di.scalarLengthSquared(e._tempV31),i[2]=Di.scalarLengthSquared(e._tempV32)},t.getCenter=function(e){this.transformation.getTranslationVector(e)},t.containsPoint=function(t){var n=this.extents.elements,i=n[0],r=n[1],a=n[2];this.transformation.invert(e._tempM0),Di.transformCoordinate(t,e._tempM0,e._tempV30);var o=e._tempV30.elements,s=Math.abs(o[0]),l=Math.abs(o[1]),h=Math.abs(o[2]);return zt.nearEqual(s,i)&&zt.nearEqual(l,r)&&zt.nearEqual(h,a)?2:i>s&&r>l&&a>h?1:0},t.containsPoints=function(t){var n=this.extents.elements,i=n[0],r=n[1],a=n[2];this.transformation.invert(e._tempM0);for(var o=!0,s=!1,l=0;l<t.length;l++){Di.transformCoordinate(t[l],e._tempM0,e._tempV30);var h=e._tempV30.elements,c=Math.abs(h[0]),_=Math.abs(h[1]),u=Math.abs(h[2]);zt.nearEqual(c,i)&&zt.nearEqual(_,r)&&zt.nearEqual(u,a)&&(s=!0),i>c&&r>_&&a>u?s=!0:o=!1}return o?1:s?2:0},t.containsSphere=function(t,n){void 0===n&&(n=!1);var i=this.extents.elements,r=i[0],a=i[1],o=i[2],s=t.radius;this.transformation.invert(e._tempM0),Di.transformCoordinate(t.center,e._tempM0,e._tempV30);var l=0/0;n?l=s:(Di.scale(Di.UnitX,s,e._tempV31),Di.TransformNormal(e._tempV31,e._tempM0,e._tempV31),l=Di.scalarLength(e._tempV31)),Di.scale(this.extents,-1,e._tempV32),Di.Clamp(e._tempV30,e._tempV32,this.extents,e._tempV33);var h=Di.distanceSquared(e._tempV30,e._tempV33);if(h>l*l)return 0;var c=e._tempV30.elements,_=c[0],u=c[1],d=c[2],f=e._tempV32.elements,m=f[0],p=f[1],v=f[2];return _>=m+l&&r-l>=_&&r-m>l&&u>=p+l&&a-l>=u&&a-p>l&&d>=v+l&&o-l>=d&&o-v>l?1:2},t.containsOrientedBoundBox=function(t){var n=0,i=0;t.getCorners(e._corners);var r=this.containsPoints(e._corners);if(0!=r)return r;var a=this.extents.elements;t.extents.cloneTo(e._tempV35);var o=e._tempV35.elements;e._getRows(this.transformation,e._rows1),e._getRows(t.transformation,e._rows2);var s=0/0,l=0/0,h=0/0,c=0/0;for(n=0;4>n;n++)for(i=0;4>i;i++)3==n||3==i?(e._tempM0.setElementByRowColumn(n,i,0),e._tempM1.setElementByRowColumn(n,i,0)):(c=Di.dot(e._rows1[n],e._rows2[i]),e._tempM0.setElementByRowColumn(n,i,c),e._tempM1.setElementByRowColumn(n,i,Math.abs(c)));t.getCenter(e._tempV34),this.getCenter(e._tempV36),Di.subtract(e._tempV34,e._tempV36,e._tempV30);var _=e._tempV31.elements;_[0]=Di.dot(e._tempV30,e._rows1[0]),_[1]=Di.dot(e._tempV30,e._rows1[1]),_[2]=Di.dot(e._tempV30,e._rows1[2]);var u=e._tempV32.elements,d=e._tempV33.elements;for(n=0;3>n;n++)if(u[0]=e._tempM1.getElementByRowColumn(n,0),u[1]=e._tempM1.getElementByRowColumn(n,1),u[2]=e._tempM1.getElementByRowColumn(n,2),s=a[n],l=Di.dot(e._tempV35,e._tempV32),h=Math.abs(_[n]),h>s+l)return 0;for(i=0;3>i;i++)if(u[0]=e._tempM1.getElementByRowColumn(0,i),u[1]=e._tempM1.getElementByRowColumn(1,i),u[2]=e._tempM1.getElementByRowColumn(2,i),d[0]=e._tempM0.getElementByRowColumn(0,i),d[1]=e._tempM0.getElementByRowColumn(1,i),d[2]=e._tempM0.getElementByRowColumn(2,i),s=Di.dot(this.extents,e._tempV32),l=o[i],h=Math.abs(Di.dot(e._tempV31,e._tempV33)),h>s+l)return 0;for(n=0;3>n;n++)for(i=0;3>i;i++){var f=(n+1)%3,m=(n+2)%3,p=(i+1)%3,v=(i+2)%3;if(s=a[f]*e._tempM1.getElementByRowColumn(m,i)+a[m]*e._tempM1.getElementByRowColumn(f,i),l=o[p]*e._tempM1.getElementByRowColumn(n,v)+o[v]*e._tempM1.getElementByRowColumn(n,p),h=Math.abs(_[m]*e._tempM0.getElementByRowColumn(f,i)-_[f]*e._tempM0.getElementByRowColumn(m,i)),h>s+l)return 0}return 2},t.containsLine=function(t,n){e._corners[0]=t,e._corners[1]=n;var i=this.containsPoints(e._corners);if(0!=i)return i;var r=this.extents.elements,a=r[0],o=r[1],s=r[2];this.transformation.invert(e._tempM0),Di.transformCoordinate(t,e._tempM0,e._tempV30),Di.transformCoordinate(n,e._tempM0,e._tempV31),Di.add(e._tempV30,e._tempV31,e._tempV32),Di.scale(e._tempV32,.5,e._tempV32),Di.subtract(e._tempV30,e._tempV32,e._tempV33);var l=e._tempV33.elements,h=l[0],c=l[1],_=l[2],u=e._tempV34.elements,d=u[0]=Math.abs(l[0]),f=u[1]=Math.abs(l[1]),m=u[2]=Math.abs(l[2]),p=e._tempV32.elements,v=p[0],E=p[1],T=p[2];return Math.abs(v)>a+d?0:Math.abs(E)>o+f?0:Math.abs(T)>s+m?0:Math.abs(E*_-T*c)>o*m+s*f?0:Math.abs(v*_-T*h)>a*m+s*d?0:Math.abs(v*c-E*h)>a*f+o*d?0:2},t.containsBoundBox=function(t){var n=0,i=0,r=t.min,a=t.max;t.getCorners(e._corners);var o=this.containsPoints(e._corners);if(0!=o)return o;Di.subtract(a,r,e._tempV30),Di.scale(e._tempV30,.5,e._tempV30),Di.add(r,e._tempV30,e._tempV30),Di.subtract(a,e._tempV30,e._tempV31);var s=this.extents.elements,l=e._tempV31.elements;e._getRows(this.transformation,e._rows1),this.transformation.invert(e._tempM0);var h=0/0,c=0/0,_=0/0;for(n=0;3>n;n++)for(i=0;3>i;i++)e._tempM1.setElementByRowColumn(n,i,Math.abs(e._tempM0.getElementByRowColumn(n,i)));this.getCenter(e._tempV35),Di.subtract(e._tempV30,e._tempV35,e._tempV32);var u=e._tempV31.elements;u[0]=Di.dot(e._tempV32,e._rows1[0]),u[1]=Di.dot(e._tempV32,e._rows1[1]),u[2]=Di.dot(e._tempV32,e._rows1[2]);var d=e._tempV33.elements,f=e._tempV34.elements;for(n=0;3>n;n++)if(d[0]=e._tempM1.getElementByRowColumn(n,0),d[1]=e._tempM1.getElementByRowColumn(n,1),d[2]=e._tempM1.getElementByRowColumn(n,2),h=s[n],c=Di.dot(e._tempV31,e._tempV33),_=Math.abs(u[n]),_>h+c)return 0;for(i=0;3>i;i++)if(d[0]=e._tempM1.getElementByRowColumn(0,i),d[1]=e._tempM1.getElementByRowColumn(1,i),d[2]=e._tempM1.getElementByRowColumn(2,i),f[0]=e._tempM0.getElementByRowColumn(0,i),f[1]=e._tempM0.getElementByRowColumn(1,i),f[2]=e._tempM0.getElementByRowColumn(2,i),h=Di.dot(this.extents,e._tempV33),c=l[i],_=Math.abs(Di.dot(e._tempV31,e._tempV34)),_>h+c)return 0;for(n=0;3>n;n++)for(i=0;3>i;i++){var m=(n+1)%3,p=(n+2)%3,v=(i+1)%3,E=(i+2)%3;if(h=s[m]*e._tempM1.getElementByRowColumn(p,i)+s[p]*e._tempM1.getElementByRowColumn(m,i),c=l[v]*e._tempM1.getElementByRowColumn(n,E)+l[E]*e._tempM1.getElementByRowColumn(n,v),_=Math.abs(u[p]*e._tempM0.getElementByRowColumn(m,i)-u[m]*e._tempM0.getElementByRowColumn(p,i)),_>h+c)return 0}return 2},t.intersectsRay=function(t,n){Di.scale(this.extents,-1,e._tempV30),this.transformation.invert(e._tempM0),Di.TransformNormal(t.direction,e._tempM0,e._ray.direction),Di.transformCoordinate(t.origin,e._tempM0,e._ray.origin),e._boxBound1.min=e._tempV30,e._boxBound1.max=this.extents;var i=Gt.intersectsRayAndBoxRP(e._ray,e._boxBound1,n);return-1!==i&&Di.transformCoordinate(n,this.transformation,n),i},t._getLocalCorners=function(t){t.length=8;var n=this.extents.elements;e._tempV30.x=n[0],e._tempV31.y=n[1],e._tempV32.z=n[2],Di.add(e._tempV30,e._tempV31,e._tempV33),Di.add(e._tempV33,e._tempV32,t[0]),Di.add(e._tempV30,e._tempV31,e._tempV33),Di.subtract(e._tempV33,e._tempV32,t[1]),Di.subtract(e._tempV31,e._tempV30,e._tempV33),Di.subtract(e._tempV33,e._tempV30,t[2]),Di.subtract(e._tempV31,e._tempV30,e._tempV33),Di.add(e._tempV33,e._tempV32,t[3]),Di.subtract(e._tempV30,e._tempV31,e._tempV33),Di.add(e._tempV33,e._tempV32,t[4]),Di.subtract(e._tempV30,e._tempV31,e._tempV33),Di.subtract(e._tempV33,e._tempV32,t[5]),Di.scale(t[0],-1,t[6]),Di.subtract(e._tempV32,e._tempV30,e._tempV33),Di.subtract(e._tempV33,e._tempV31,t[7])},t.equals=function(e){return this.extents==e.extents&&this.transformation==e.transformation},t.cloneTo=function(e){var t=e;this.extents.cloneTo(t.extents),this.transformation.cloneTo(t.transformation)},e.createByBoundBox=function(t,n){var i=t.min,r=t.max;Di.subtract(r,i,e._tempV30),Di.scale(e._tempV30,.5,e._tempV30),Di.add(i,e._tempV30,e._tempV31),Di.subtract(r,e._tempV31,e._tempV32),Wt.translation(e._tempV31,e._tempM0);var a=e._tempV32.clone(),o=e._tempM0.clone();n.extents=a,n.transformation=o},e.createByMinAndMaxVertex=function(t,n){Di.subtract(n,t,e._tempV30),Di.scale(e._tempV30,.5,e._tempV30),Di.add(t,e._tempV30,e._tempV31),Di.subtract(n,e._tempV31,e._tempV32),Wt.translation(e._tempV31,e._tempM0);var i=new e(e._tempV32,e._tempM0);return i},e._getRows=function(e,t){t.length=3;var n=e.elements,i=t[0].elements;i[0]=n[0],i[1]=n[1],i[2]=n[2];var r=t[1].elements;r[0]=n[4],r[1]=n[5],r[2]=n[6];var a=t[2].elements;a[0]=n[8],a[1]=n[9],a[2]=n[10]},e.getObbtoObbMatrix4x4=function(t,n,i,r){var a=t.transformation,o=n.transformation;if(i){e._getRows(a,e._rows1),e._getRows(o,e._rows2);for(var s=0;3>s;s++)for(var l=0;3>l;l++)r.setElementByRowColumn(s,l,Di.dot(e._rows2[s],e._rows1[l]));n.getCenter(e._tempV30),t.getCenter(e._tempV31),Di.subtract(e._tempV30,e._tempV31,e._tempV32);var h=r.elements;h[12]=Di.dot(e._tempV32,e._rows1[0]),h[13]=Di.dot(e._tempV32,e._rows1[1]),h[14]=Di.dot(e._tempV32,e._rows1[2]),h[15]=1}else a.invert(e._tempM0),Wt.multiply(o,e._tempM0,r)},e.merge=function(t,n,i){var r=t.extents,a=t.transformation;e.getObbtoObbMatrix4x4(t,n,i,e._tempM0),n._getLocalCorners(e._corners),Di.transformCoordinate(e._corners[0],e._tempM0,e._corners[0]),Di.transformCoordinate(e._corners[1],e._tempM0,e._corners[1]),Di.transformCoordinate(e._corners[2],e._tempM0,e._corners[2]),Di.transformCoordinate(e._corners[3],e._tempM0,e._corners[3]),Di.transformCoordinate(e._corners[4],e._tempM0,e._corners[4]),Di.transformCoordinate(e._corners[5],e._tempM0,e._corners[5]),Di.transformCoordinate(e._corners[6],e._tempM0,e._corners[6]),Di.transformCoordinate(e._corners[7],e._tempM0,e._corners[7]),Di.scale(r,-1,e._boxBound1.min),r.cloneTo(e._boxBound1.max),Ft.createfromPoints(e._corners,e._boxBound2),Ft.merge(e._boxBound2,e._boxBound1,e._boxBound3);var o=e._boxBound3.min,s=e._boxBound3.max;Di.subtract(s,o,e._tempV30),Di.scale(e._tempV30,.5,e._tempV30),Di.add(o,e._tempV30,e._tempV32),Di.subtract(s,e._tempV32,r),Di.transformCoordinate(e._tempV32,a,e._tempV33)},i(e,["_tempV30",function(){return this._tempV30=new Di},"_tempV31",function(){return this._tempV31=new Di},"_tempV32",function(){return this._tempV32=new Di},"_tempV33",function(){return this._tempV33=new Di},"_tempV34",function(){return this._tempV34=new Di},"_tempV35",function(){return this._tempV35=new Di},"_tempV36",function(){return this._tempV36=new Di},"_tempM0",function(){return this._tempM0=new Wt},"_tempM1",function(){return this._tempM1=new Wt},"_corners",function(){return this._corners=[new Di,new Di,new Di,new Di,new Di,new Di,new Di,new Di]},"_rows1",function(){return this._rows1=[new Di,new Di,new Di]},"_rows2",function(){return this._rows2=[new Di,new Di,new Di]},"_ray",function(){return this._ray=new jt(new Di,new Di)},"_boxBound1",function(){return this._boxBound1=new Ft(new Di,new Di)},"_boxBound2",function(){return this._boxBound2=new Ft(new Di,new Di)},"_boxBound3",function(){return this._boxBound3=new Ft(new Di,new Di)}]),e}(),function(){function e(e,t){this.normal=null,this.distance=0/0,void 0===t&&(t=0),this.normal=e,this.distance=t}r(e,"laya.d3.math.Plane");var t=e.prototype;return t.normalize=function(){var e=this.normal.elements,t=e[0],n=e[1],i=e[2],r=1/Math.sqrt(t*t+n*n+i*i);e[0]=t*r,e[1]=n*r,e[2]=i*r,this.distance*=r},e.createPlaneBy3P=function(t,n,i){var r=t.elements,a=n.elements,o=i.elements,s=a[0]-r[0],l=a[1]-r[1],h=a[2]-r[2],c=o[0]-r[0],_=o[1]-r[1],u=o[2]-r[2],d=l*u-h*_,f=h*c-s*u,m=s*_-l*c,p=1/Math.sqrt(d*d+f*f+m*m),v=d*p,E=f*p,T=m*p,g=e._TEMPVec3.elements;g[0]=v,g[1]=E,g[2]=T;var S=-(v*r[0]+E*r[1]+T*r[2]),x=new e(e._TEMPVec3,S);return x},e.PlaneIntersectionType_Back=0,e.PlaneIntersectionType_Front=1,e.PlaneIntersectionType_Intersecting=2,i(e,["_TEMPVec3",function(){return this._TEMPVec3=new Di}]),e}()),Yt=function(){function e(e,t,n,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=1);var a;a=r?r:new Float32Array(4),a[0]=e,a[1]=t,a[2]=n,a[3]=i,this.elements=a}r(e,"laya.d3.math.Quaternion");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.scaling=function(e,t){var n=t.elements,i=this.elements;n[0]=i[0]*e,n[1]=i[1]*e,n[2]=i[2]*e,n[3]=i[3]*e},t.normalize=function(t){e._normalizeArray(this.elements,t.elements)},t.length=function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3];return Math.sqrt(t*t+n*n+i*i+r*r)},t.rotateX=function(e,t){var n=t.elements,i=this.elements;
e*=.5;var r=i[0],a=i[1],o=i[2],s=i[3],l=Math.sin(e),h=Math.cos(e);n[0]=r*h+s*l,n[1]=a*h+o*l,n[2]=o*h-a*l,n[3]=s*h-r*l},t.rotateY=function(e,t){var n=t.elements,i=this.elements;e*=.5;var r=i[0],a=i[1],o=i[2],s=i[3],l=Math.sin(e),h=Math.cos(e);n[0]=r*h-o*l,n[1]=a*h+s*l,n[2]=o*h+r*l,n[3]=s*h-a*l},t.rotateZ=function(e,t){var n=t.elements,i=this.elements;e*=.5;var r=i[0],a=i[1],o=i[2],s=i[3],l=Math.sin(e),h=Math.cos(e);n[0]=r*h+a*l,n[1]=a*h-r*l,n[2]=o*h+s*l,n[3]=s*h-o*l},t.getYawPitchRoll=function(t){Di.transformQuat(Di.ForwardRH,this,e.TEMPVector31),Di.transformQuat(Di.Up,this,e.TEMPVector32);var n=e.TEMPVector32.elements;e.angleTo(Di.ZERO,e.TEMPVector31,e.TEMPVector33);var i=e.TEMPVector33.elements;i[0]==Math.PI/2?(i[1]=e.arcTanAngle(n[2],n[0]),i[2]=0):i[0]==-Math.PI/2?(i[1]=e.arcTanAngle(-n[2],-n[0]),i[2]=0):(Wt.createRotationY(-i[1],e.TEMPMatrix0),Wt.createRotationX(-i[0],e.TEMPMatrix1),Di.transformCoordinate(e.TEMPVector32,e.TEMPMatrix0,e.TEMPVector32),Di.transformCoordinate(e.TEMPVector32,e.TEMPMatrix1,e.TEMPVector32),i[2]=e.arcTanAngle(n[1],-n[0])),i[1]<=-Math.PI&&(i[1]=Math.PI),i[2]<=-Math.PI&&(i[2]=Math.PI),i[1]>=Math.PI&&i[2]>=Math.PI&&(i[1]=0,i[2]=0,i[0]=Math.PI-i[0]);var r=t.elements;r[0]=i[1],r[1]=i[0],r[2]=i[2]},t.invert=function(e){var t=e.elements,n=this.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=i*i+r*r+a*a+o*o,l=s?1/s:0;t[0]=-i*l,t[1]=-r*l,t[2]=-a*l,t[3]=o*l},t.identity=function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=1},t.fromArray=function(e,t){void 0===t&&(t=0),this.elements[0]=e[t+0],this.elements[1]=e[t+1],this.elements[2]=e[t+2],this.elements[3]=e[t+3]},t.cloneTo=function(e){var t,n,i;if(n=this.elements,i=e.elements,n!==i)for(t=0;4>t;++t)i[t]=n[t]},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},t.equals=function(e){var t=this.elements,n=e.elements;return zt.nearEqual(t[0],n[0])&&zt.nearEqual(t[1],n[1])&&zt.nearEqual(t[2],n[2])&&zt.nearEqual(t[3],n[3])},t.lengthSquared=function(){var e=this.elements[0],t=this.elements[1],n=this.elements[2],i=this.elements[3];return e*e+t*t+n*n+i*i},a(0,t,"x",function(){return this.elements[0]}),a(0,t,"y",function(){return this.elements[1]}),a(0,t,"z",function(){return this.elements[2]}),a(0,t,"w",function(){return this.elements[3]}),e._dotArray=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e._normalizeArray=function(e,t){var n=e[0],i=e[1],r=e[2],a=e[3],o=n*n+i*i+r*r+a*a;o>0&&(o=1/Math.sqrt(o),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=a*o)},e._lerpArray=function(t,n,i,r){var a=1-i;e._dotArray(t,n)>=0?(r[0]=a*t[0]+i*n[0],r[1]=a*t[1]+i*n[1],r[2]=a*t[2]+i*n[2],r[3]=a*t[3]+i*n[3]):(r[0]=a*t[0]-i*n[0],r[1]=a*t[1]-i*n[1],r[2]=a*t[2]-i*n[2],r[3]=a*t[3]-i*n[3]),e._normalizeArray(r,r)},e.createFromYawPitchRoll=function(e,t,n,i){var r=.5*n,a=.5*t,o=.5*e,s=Math.sin(r),l=Math.cos(r),h=Math.sin(a),c=Math.cos(a),_=Math.sin(o),u=Math.cos(o),d=i.elements;d[0]=u*h*l+_*c*s,d[1]=_*c*l-u*h*s,d[2]=u*c*s-_*h*l,d[3]=u*c*l+_*h*s},e.multiply=function(e,t,n){var i=e.elements,r=t.elements,a=n.elements,o=i[0],s=i[1],l=i[2],h=i[3],c=r[0],_=r[1],u=r[2],d=r[3],f=s*u-l*_,m=l*c-o*u,p=o*_-s*c,v=o*c+s*_+l*u;a[0]=o*d+c*h+f,a[1]=s*d+_*h+m,a[2]=l*d+u*h+p,a[3]=h*d-v},e.arcTanAngle=function(e,t){return 0==e?1==t?Math.PI/2:-Math.PI/2:e>0?Math.atan(t/e):0>e?t>0?Math.atan(t/e)+Math.PI:Math.atan(t/e)-Math.PI:0},e.angleTo=function(t,n,i){Di.subtract(n,t,e.TEMPVector30),Di.normalize(e.TEMPVector30,e.TEMPVector30),i.elements[0]=Math.asin(e.TEMPVector30.y),i.elements[1]=e.arcTanAngle(-e.TEMPVector30.z,-e.TEMPVector30.x)},e.createFromAxisAngle=function(e,t,n){var i=n.elements,r=e.elements;t=.5*t;var a=Math.sin(t);i[0]=a*r[0],i[1]=a*r[1],i[2]=a*r[2],i[3]=Math.cos(t)},e.createFromMatrix3x3=function(e,t){var n,i=t.elements,r=e.elements,a=r[0]+r[4]+r[8];if(a>0)n=Math.sqrt(a+1),i[3]=.5*n,n=.5/n,i[0]=(r[5]-r[7])*n,i[1]=(r[6]-r[2])*n,i[2]=(r[1]-r[3])*n;else{var o=0;r[4]>r[0]&&(o=1),r[8]>r[3*o+o]&&(o=2);var s=(o+1)%3,l=(o+2)%3;n=Math.sqrt(r[3*o+o]-r[3*s+s]-r[3*l+l]+1),i[o]=.5*n,n=.5/n,i[3]=(r[3*s+l]-r[3*l+s])*n,i[s]=(r[3*s+o]+r[3*o+s])*n,i[l]=(r[3*l+o]+r[3*o+l])*n}},e.createFromMatrix4x4=function(e,t){var n,i,r=e.elements,a=t.elements,o=r[0]+r[5]+r[10];o>0?(n=Math.sqrt(o+1),a[3]=.5*n,n=.5/n,a[0]=(r[6]-r[9])*n,a[1]=(r[8]-r[2])*n,a[2]=(r[1]-r[4])*n):r[0]>=r[5]&&r[0]>=r[10]?(n=Math.sqrt(1+r[0]-r[5]-r[10]),i=.5/n,a[0]=.5*n,a[1]=(r[1]+r[4])*i,a[2]=(r[2]+r[8])*i,a[3]=(r[6]-r[9])*i):r[5]>r[10]?(n=Math.sqrt(1+r[5]-r[0]-r[10]),i=.5/n,a[0]=(r[4]+r[1])*i,a[1]=.5*n,a[2]=(r[9]+r[6])*i,a[3]=(r[8]-r[2])*i):(n=Math.sqrt(1+r[10]-r[0]-r[5]),i=.5/n,a[0]=(r[8]+r[2])*i,a[1]=(r[9]+r[6])*i,a[2]=.5*n,a[3]=(r[1]-r[4])*i)},e.slerp=function(e,t,n,i){var r,a,o,s,l,h=e.elements,c=t.elements,_=i.elements,u=h[0],d=h[1],f=h[2],m=h[3],p=c[0],v=c[1],E=c[2],T=c[3];return a=u*p+d*v+f*E+m*T,0>a&&(a=-a,p=-p,v=-v,E=-E,T=-T),1-a>1e-6?(r=Math.acos(a),o=Math.sin(r),s=Math.sin((1-n)*r)/o,l=Math.sin(n*r)/o):(s=1-n,l=n),_[0]=s*u+l*p,_[1]=s*d+l*v,_[2]=s*f+l*E,_[3]=s*m+l*T,_},e.lerp=function(t,n,i,r){e._lerpArray(t.elements,n.elements,i,r.elements)},e.add=function(e,t,n){var i=n.elements,r=e.elements,a=t.elements;i[0]=r[0]+a[0],i[1]=r[1]+a[1],i[2]=r[2]+a[2],i[3]=r[3]+a[3]},e.dot=function(t,n){return e._dotArray(t.elements,n.elements)},e.rotationLookAt=function(t,n,i){e.lookAt(Di.ZERO,t,n,i)},e.lookAt=function(t,n,i,r){kt.lookAt(t,n,i,e._tempMatrix3x3),e.rotationMatrix(e._tempMatrix3x3,r)},e.invert=function(e,t){var n=e.elements,i=t.elements,r=e.lengthSquared();zt.isZero(r)||(r=1/r,i[0]=-n[0]*r,i[1]=-n[1]*r,i[2]=-n[2]*r,i[3]=n[3]*r)},e.rotationMatrix=function(e,t){var n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],h=n[6],c=n[7],_=n[8],u=t.elements,d=0/0,f=0/0,m=i+s+_;m>0?(d=Math.sqrt(m+1),u[3]=.5*d,d=.5/d,u[0]=(l-c)*d,u[1]=(h-a)*d,u[2]=(r-o)*d):i>=s&&i>=_?(d=Math.sqrt(1+i-s-_),f=.5/d,u[0]=.5*d,u[1]=(r+o)*f,u[2]=(a+h)*f,u[3]=(l-c)*f):s>_?(d=Math.sqrt(1+s-i-_),f=.5/d,u[0]=(o+r)*f,u[1]=.5*d,u[2]=(c+l)*f,u[3]=(h-a)*f):(d=Math.sqrt(1+_-i-s),f=.5/d,u[0]=(h+a)*f,u[1]=(c+l)*f,u[2]=.5*d,u[3]=(r-o)*f)},e.DEFAULT=new e,i(e,["TEMPVector30",function(){return this.TEMPVector30=new Di},"TEMPVector31",function(){return this.TEMPVector31=new Di},"TEMPVector32",function(){return this.TEMPVector32=new Di},"TEMPVector33",function(){return this.TEMPVector33=new Di},"TEMPMatrix0",function(){return this.TEMPMatrix0=new Wt},"TEMPMatrix1",function(){return this.TEMPMatrix1=new Wt},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new kt},"NAN",function(){return this.NAN=new e(0/0,0/0,0/0,0/0)}]),e}(),Zt=function(){function e(e){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=e,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}r(e,"laya.d3.math.Rand");var t=e.prototype;return t.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^(this._temp[0]^this._temp[0]>>>8),this.seeds[3]},t.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},t.getSignedFloat=function(){return 2*this.getFloat()-1},a(0,t,"seed",function(){return this.seeds[0]},function(e){this.seeds[0]=e,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),e.getFloatFromInt=function(e){return(8388607&e)*(1/8388607)},e.getByteFromInt=function(e){return(8388607&e)>>>15},e}(),jt=(function(){function e(e){if(this._state0U=0/0,this._state0L=0/0,this._state1U=0/0,this._state1L=0/0,!(e instanceof Array)||4!==e.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|e[0],this._state0L=0|e[1],this._state1U=0|e[2],this._state1L=0|e[3]}r(e,"laya.d3.math.RandX");var t=e.prototype;return t.randomint=function(){var e=this._state0U,t=this._state0L,n=this._state1U,i=this._state1L,r=(i>>>0)+(t>>>0),a=n+e+(r/2>>>31)>>>0,o=r>>>0;this._state0U=n,this._state0L=i;var s=0,l=0,h=0,c=0,_=23,u=4294967295<<32-_;s=e<<_|(t&u)>>>32-_,l=t<<_,e^=s,t^=l,s=e^n,l=t^i;var d=18,f=4294967295>>>32-d;h=e>>>d,c=t>>>d|(e&f)<<32-d,s^=h,l^=c;var m=5,p=4294967295>>>32-m;return h=n>>>m,c=i>>>m|(n&p)<<32-m,s^=h,l^=c,this._state1U=s,this._state1L=l,[a,o]},t.random=function(){var t=this.randomint(),n=t[0],i=t[1],r=1023<<20,a=0,o=12,s=4294967295>>>32-o,l=n>>>o,h=i>>>o|(n&s)<<32-o,c=r|l,_=a|h;e._CONVERTION_BUFFER.setUint32(0,c,!1),e._CONVERTION_BUFFER.setUint32(4,_,!1);var u=Zt._CONVERTION_BUFFER.getFloat64(0,!1);return u-1},i(e,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new Zt([0,Date.now()/65536,0,Date.now()%65536])}]),e}(),function(){function e(e,t){this.origin=null,this.direction=null,this.origin=e,this.direction=t}return r(e,"laya.d3.math.Ray"),e}()),Kt=function(){function e(e,t,n,i){this.minDepth=0,this.maxDepth=1,this.x=e,this.y=t,this.width=n,this.height=i}r(e,"laya.d3.math.Viewport");var t=e.prototype;return t.project=function(e,t,n){Di.transformV3ToV3(e,t,n);var i=e.elements,r=t.elements,a=n.elements,o=i[0]*r[3]+i[1]*r[7]+i[2]*r[11]+r[15];1!==o&&(a[0]=a[0]/o,a[1]=a[1]/o,a[2]=a[2]/o),a[0]=.5*(a[0]+1)*this.width+this.x,a[1]=.5*(-a[1]+1)*this.height+this.y,a[2]=a[2]*(this.maxDepth-this.minDepth)+this.minDepth},t.unprojectFromMat=function(e,t,n){var i=e.elements,r=t.elements,a=n.elements;a[0]=(i[0]-this.x)/this.width*2-1,a[1]=-((i[1]-this.y)/this.height*2-1);var o=(this.maxDepth-this.minDepth)/2;a[2]=(i[2]-this.minDepth-o)/o;var s=a[0]*r[3]+a[1]*r[7]+a[2]*r[11]+r[15];Di.transformV3ToV3(n,t,n),1!==s&&(a[0]=a[0]/s,a[1]=a[1]/s,a[2]=a[2]/s)},t.unprojectFromWVP=function(t,n,i,r,a){Wt.multiply(n,i,e._tempMatrix4x4),r&&Wt.multiply(e._tempMatrix4x4,r,e._tempMatrix4x4),e._tempMatrix4x4.invert(e._tempMatrix4x4),this.unprojectFromMat(t,e._tempMatrix4x4,a)},i(e,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new Wt}]),e}(),qt=function(){function e(){this._lastUpdateFrame=-2147483648,this._updateFrame=-2147483648,this._isTrigger=!1,this.contacts=[]}r(e,"laya.d3.physics.Collision");var t=e.prototype;return t._setUpdateFrame=function(e){this._lastUpdateFrame=this._updateFrame,this._updateFrame=e},e}(),Qt=function(){function e(){this._hitResultsPoolIndex=0,this._contactPonintsPoolIndex=0,this._collisions={},this._hitResultsPool=[],this._contactPointsPool=[],this._collisionsPool=[]}r(e,"laya.d3.physics.CollisionTool");var t=e.prototype;return t.getHitResult=function(){var e=this._hitResultsPool[this._hitResultsPoolIndex++];return e||(e=new Jt,this._hitResultsPool.push(e)),e},t.recoverAllHitResultsPool=function(){this._hitResultsPoolIndex=0},t.getContactPoints=function(){var e=this._contactPointsPool[this._contactPonintsPoolIndex++];return e||(e=new $t,this._contactPointsPool.push(e)),e},t.recoverAllContactPointsPool=function(){this._contactPonintsPoolIndex=0},t.getCollision=function(e,t){var n,i=e.id,r=t.id,a=this._collisions[i];if(a&&(n=a[r]),!n){var o=this._collisions[r];o&&(n=o[i])}return n||(a||(a={},this._collisions[i]=a),n=0===this._collisionsPool.length?new qt:this._collisionsPool.pop(),n._colliderA=e,n._colliderB=t,a[r]=n),n},t.recoverCollision=function(e){var t=e._colliderA.id,n=e._colliderB.id;this._collisions[t][n]=null,this._collisionsPool.push(e)},t.garbageCollection=function(){this._hitResultsPoolIndex=0,this._hitResultsPool.length=0,this._contactPonintsPoolIndex=0,this._contactPointsPool.length=0,this._collisionsPool.length=0;for(var e in this._collisionsPool){var t=this._collisionsPool[e],n=!0;for(var i in t)t[i]?n=!1:delete t[i];n&&delete this._collisionsPool[e]}},e}(),$t=(function(){function e(){this._nativeConstraint=null,this._simulation=null,this.rigidbodyA=null,this.rigidbodyB=null}return r(e,"laya.d3.physics.Constraint3D"),e}(),function(){function e(){this._damping=0/0,this._impulseClamp=0/0,this._tau=0/0,this._pivotInA=new Di,this._pivotInB=new Di}r(e,"laya.d3.physics.constraints.Point2PointConstraint");var t=e.prototype;return a(0,t,"pivotInA",function(){return this._pivotInA},function(e){this._pivotInA=e}),a(0,t,"pivotInB",function(){return this._pivotInB},function(e){this._pivotInB=e}),a(0,t,"damping",function(){return this._damping},function(e){this._damping=e}),a(0,t,"impulseClamp",function(){return this._impulseClamp},function(e){this._impulseClamp=e}),a(0,t,"tau",function(){return this._tau},function(e){this._tau=e}),e}(),function(){function e(){this._idCounter=0,this.colliderA=null,this.colliderB=null,this.distance=0,this.normal=new Di,this.positionOnA=new Di,this.positionOnB=new Di,this._id=++this._idCounter}return r(e,"laya.d3.physics.ContactPoint"),e}()),Jt=function(){function e(){this.succeeded=!1,this.collider=null,this.hitFraction=0,this.point=new Di,this.normal=new Di}return r(e,"laya.d3.physics.HitResult"),e}(),en=function(){function e(){this.flags=0,this.maxSubSteps=1,this.fixedTimeStep=1/60}return r(e,"laya.d3.physics.PhysicsSettings"),e}(),tn=function(){function e(e,t){this._nativeDiscreteDynamicsWorld=null,this._nativeCollisionWorld=null,this._nativeDispatcher=null,this._nativeCollisionConfiguration=null,this._nativeBroadphase=null,this._nativeSolverInfo=null,this._nativeDispatchInfo=null,this._nativeClosestRayResultCallback=null,this._nativeAllHitsRayResultCallback=null,this._nativeClosestConvexResultCallback=null,this._nativeAllConvexResultCallback=null,this._updatedRigidbodies=0,this.maxSubSteps=1,this.fixedTimeStep=1/60,this._gravity=new Di(0,-10,0),this._nativeVector3Zero=new Sn._physics3D.btVector3(0,0,0),this._nativeDefaultQuaternion=new Sn._physics3D.btQuaternion(0,0,0,-1),this._collisionsUtils=new Qt,this._previousFrameCollisions=[],this._currentFrameCollisions=[],this._dynamicPhysicsColliders=[],this._characters=[],void 0===t&&(t=0),this.maxSubSteps=e.maxSubSteps,this.fixedTimeStep=e.fixedTimeStep;var n=Sn._physics3D;this._nativeCollisionConfiguration=new n.btDefaultCollisionConfiguration,this._nativeDispatcher=new n.btCollisionDispatcher(this._nativeCollisionConfiguration),this._nativeBroadphase=new n.btDbvtBroadphase,this._nativeBroadphase.getOverlappingPairCache().setInternalGhostPairCallback(new n.btGhostPairCallback);var i=e.flags;if(1&i)this._nativeCollisionWorld=new n.btCollisionWorld(this._nativeDispatcher,this._nativeBroadphase,this._nativeCollisionConfiguration);else{if(2&i)throw"Simulation:SoftBody processing is not yet available";var r=new n.btSequentialImpulseConstraintSolver;this._nativeDiscreteDynamicsWorld=new n.btDiscreteDynamicsWorld(this._nativeDispatcher,this._nativeBroadphase,r,this._nativeCollisionConfiguration),this._nativeCollisionWorld=this._nativeDiscreteDynamicsWorld}this._nativeDiscreteDynamicsWorld&&(this._nativeSolverInfo=this._nativeDiscreteDynamicsWorld.getSolverInfo(),this._nativeDispatchInfo=this._nativeDiscreteDynamicsWorld.getDispatchInfo()),this._nativeClosestRayResultCallback=new n.ClosestRayResultCallback(this._nativeVector3Zero,this._nativeVector3Zero),this._nativeAllHitsRayResultCallback=new n.AllHitsRayResultCallback(this._nativeVector3Zero,this._nativeVector3Zero),this._nativeClosestConvexResultCallback=new n.ClosestConvexResultCallback(this._nativeVector3Zero,this._nativeVector3Zero),this._nativeAllConvexResultCallback=new n.AllConvexResultCallback(this._nativeVector3Zero,this._nativeVector3Zero)}r(e,"laya.d3.physics.PhysicsSimulation");var t=e.prototype;return t._simulate=function(e){this._updatedRigidbodies=0,this._nativeDiscreteDynamicsWorld?this._nativeDiscreteDynamicsWorld.stepSimulation(e,this.maxSubSteps,this.fixedTimeStep):this._nativeCollisionWorld.PerformDiscreteCollisionDetection()},t._destroy=function(){var e=Sn._physics3D;this._nativeDiscreteDynamicsWorld?(e.destroy(this._nativeDiscreteDynamicsWorld),this._nativeDiscreteDynamicsWorld=null):(e.destroy(this._nativeCollisionWorld),this._nativeCollisionWorld=null),e.destroy(this._nativeBroadphase),this._nativeBroadphase=null,e.destroy(this._nativeDispatcher),this._nativeDispatcher=null,e.destroy(this._nativeCollisionConfiguration),this._nativeCollisionConfiguration=null},t._addPhysicsCollider=function(e,t,n){this._nativeCollisionWorld.addCollisionObject(e._nativeColliderObject,t,n)},t._removePhysicsCollider=function(e){this._nativeCollisionWorld.removeCollisionObject(e._nativeColliderObject)},t._addRigidBody=function(e,t,n){if(!this._nativeDiscreteDynamicsWorld)throw"Simulation:Cannot perform this action when the physics engine is set to CollisionsOnly";this._nativeCollisionWorld.addRigidBody(e._nativeColliderObject,t,n)},t._removeRigidBody=function(e){if(!this._nativeDiscreteDynamicsWorld)throw"Simulation:Cannot perform this action when the physics engine is set to CollisionsOnly";this._nativeCollisionWorld.removeRigidBody(e._nativeColliderObject)},t._addCharacter=function(e,t,n){if(!this._nativeDiscreteDynamicsWorld)throw"Simulation:Cannot perform this action when the physics engine is set to CollisionsOnly";this._nativeCollisionWorld.addCollisionObject(e._nativeColliderObject,t,n),this._nativeCollisionWorld.addAction(e._nativeKinematicCharacter)},t._removeCharacter=function(e){if(!this._nativeDiscreteDynamicsWorld)throw"Simulation:Cannot perform this action when the physics engine is set to CollisionsOnly";this._nativeCollisionWorld.removeCollisionObject(e._nativeColliderObject),this._nativeCollisionWorld.addAction(e._nativeKinematicCharacter)},t.raycastFromTo=function(t,n,i,r,a){void 0===r&&(r=En.COLLISIONFILTERGROUP_ALLFILTER),void 0===a&&(a=En.COLLISIONFILTERGROUP_ALLFILTER);var o=this._nativeClosestRayResultCallback,s=e._nativeTempVector30,l=e._nativeTempVector31,h=t.elements,c=n.elements;if(s.setValue(-h[0],h[1],h[2]),l.setValue(-c[0],c[1],c[2]),o.set_m_rayFromWorld(s),o.set_m_rayToWorld(l),o.set_m_collisionFilterGroup(r),o.set_m_collisionFilterMask(a),o.set_m_collisionObject(null),o.set_m_closestHitFraction(1),this._nativeCollisionWorld.rayTest(s,l,o),o.hasHit()){if(i){i.succeeded=!0,i.collider=Cn._physicObjectsMap[o.get_m_collisionObject().getUserIndex()],i.hitFraction=o.get_m_closestHitFraction();var _=o.get_m_hitPointWorld(),u=i.point.elements;u[0]=-_.x(),u[1]=_.y(),u[2]=_.z();var d=o.get_m_hitNormalWorld(),f=i.normal.elements;f[0]=-d.x(),f[1]=d.y(),f[2]=d.z()}return!0}return i&&(i.succeeded=!1),!1},t.raycastAllFromTo=function(t,n,i,r,a){void 0===r&&(r=En.COLLISIONFILTERGROUP_ALLFILTER),void 0===a&&(a=En.COLLISIONFILTERGROUP_ALLFILTER);var o=this._nativeAllHitsRayResultCallback,s=e._nativeTempVector30,l=e._nativeTempVector31,h=t.elements,c=n.elements;s.setValue(-h[0],h[1],h[2]),l.setValue(-c[0],c[1],c[2]),o.set_m_rayFromWorld(s),o.set_m_rayToWorld(l),o.set_m_collisionFilterGroup(r),o.set_m_collisionFilterMask(a);var _=o.get_m_collisionObjects();_.clear(),this._nativeCollisionWorld.rayTest(s,l,o);var u=_.size();if(u>0){var d=o.get_m_hitPointWorld(),f=o.get_m_hitNormalWorld(),m=o.get_m_hitFractions();this._collisionsUtils.recoverAllHitResultsPool();for(var p=0;u>p;p++){var v=this._collisionsUtils.getHitResult();i.push(v),v.succeeded=!0,v.collider=Cn._physicObjectsMap[_.at(p).getUserIndex()],v.hitFraction=m.at(p);var E=d.at(p),T=v.point.elements;T[0]=-E.x(),T[1]=E.y(),T[2]=E.z();var g=f.at(p),S=v.normal.elements;S[0]=-g.x(),S[1]=g.y(),S[2]=g.z()}return!0}return i.length=0,!1},t.rayCast=function(t,n,i,r,a){void 0===i&&(i=2147483647),void 0===r&&(r=En.COLLISIONFILTERGROUP_ALLFILTER),void 0===a&&(a=En.COLLISIONFILTERGROUP_ALLFILTER);var o=t.origin,s=e._tempVector30;return Di.normalize(t.direction,s),Di.scale(s,i,s),Di.add(o,s,s),this.raycastFromTo(o,s,n,r,a)},t.rayCastAll=function(t,n,i,r,a){void 0===i&&(i=2147483647),void 0===r&&(r=En.COLLISIONFILTERGROUP_ALLFILTER),void 0===a&&(a=En.COLLISIONFILTERGROUP_ALLFILTER);var o=t.origin,s=e._tempVector30;return Di.normalize(t.direction,s),Di.scale(s,i,s),Di.add(o,s,s),this.raycastAllFromTo(o,s,n,r,a)},t.shapeCast=function(t,n,i,r,a,o,s,l,h){void 0===s&&(s=En.COLLISIONFILTERGROUP_ALLFILTER),void 0===l&&(l=En.COLLISIONFILTERGROUP_ALLFILTER),void 0===h&&(h=0);var c=this._nativeClosestConvexResultCallback,_=e._nativeTempVector30,u=e._nativeTempVector31,d=e._nativeTempVector30,f=e._nativeTempVector31,m=e._nativeTempTransform0,p=e._nativeTempTransform1,v=t._nativeShape,E=n.elements,T=i.elements;if(_.setValue(-E[0],E[1],E[2]),u.setValue(-T[0],T[1],T[2]),c.set_m_collisionFilterGroup(s),c.set_m_collisionFilterMask(l),m.setOrigin(_),p.setOrigin(u),a){var g=a.elements;d.setValue(-g[0],g[1],g[2],-g[3]),m.setRotation(d)}else m.setRotation(this._nativeDefaultQuaternion);if(o){var S=o.elements;f.setValue(-S[0],S[1],S[2],-S[2]),p.setRotation(f)}else p.setRotation(this._nativeDefaultQuaternion);if(c.set_m_hitCollisionObject(null),c.set_m_closestHitFraction(1),this._nativeCollisionWorld.convexSweepTest(v,m,p,c,h),c.hasHit()){if(r){r.succeeded=!0,r.collider=Cn._physicObjectsMap[c.get_m_hitCollisionObject().getUserIndex()],r.hitFraction=c.get_m_closestHitFraction();var x=c.get_m_hitPointWorld(),D=c.get_m_hitNormalWorld(),M=r.point.elements,A=r.normal.elements;M[0]=-x.x(),M[1]=x.y(),M[2]=x.z(),A[0]=-D.x(),A[1]=D.y(),A[2]=D.z()}return!0}return r&&(r.succeeded=!1),!1},t.shapeCastAll=function(t,n,i,r,a,o,s,l,h){void 0===s&&(s=En.COLLISIONFILTERGROUP_ALLFILTER),void 0===l&&(l=En.COLLISIONFILTERGROUP_ALLFILTER),void 0===h&&(h=0);var c=this._nativeAllConvexResultCallback,_=e._nativeTempVector30,u=e._nativeTempVector31,d=e._nativeTempVector30,f=e._nativeTempVector31,m=e._nativeTempTransform0,p=e._nativeTempTransform1,v=t._nativeShape,E=n.elements,T=i.elements;if(_.setValue(-E[0],E[1],E[2]),u.setValue(-T[0],T[1],T[2]),c.set_m_collisionFilterGroup(s),c.set_m_collisionFilterMask(l),m.setOrigin(_),p.setOrigin(u),a){var g=a.elements;d.setValue(-g[0],g[1],g[2],-g[3]),m.setRotation(d)}else m.setRotation(this._nativeDefaultQuaternion);if(o){var S=o.elements;f.setValue(-S[0],S[1],S[2],-S[2]),p.setRotation(f)}else p.setRotation(this._nativeDefaultQuaternion);var x=c.get_m_collisionObjects();x.clear(),this._nativeCollisionWorld.convexSweepTest(v,m,p,c,h);var D=x.size();if(D>0){for(var M=c.get_m_hitPointWorld(),A=c.get_m_hitNormalWorld(),R=c.get_m_hitFractions(),I=0;D>I;I++){var C=this._collisionsUtils.getHitResult();r.push(C),C.succeeded=!0,C.collider=Cn._physicObjectsMap[x.at(I).getUserIndex()],C.hitFraction=R.at(I);var y=M.at(I),O=C.point.elements;O[0]=-y.x(),O[1]=y.y(),O[2]=y.z();var L=A.at(I),V=C.normal.elements;V[0]=-L.x(),V[1]=L.y(),V[2]=L.z()}return!0}return r.length=0,!1},t.addConstraint=function(e,t){if(void 0===t&&(t=!1),!this._nativeDiscreteDynamicsWorld)throw"Cannot perform this action when the physics engine is set to CollisionsOnly";this._nativeDiscreteDynamicsWorld.addConstraint(e._nativeConstraint,t),e._simulation=this},t.removeConstraint=function(e){if(!this._nativeDiscreteDynamicsWorld)throw"Cannot perform this action when the physics engine is set to CollisionsOnly";this._nativeDiscreteDynamicsWorld.removeConstraint(e._nativeConstraint)},t._updateDynamicPhysicsColliders=function(){for(var e=0,t=this._dynamicPhysicsColliders.length;t>e;e++){var n=this._dynamicPhysicsColliders[e];n._derivePhysicsTransformation(n._nativeColliderObject.getWorldTransform())}},t._updateCharacters=function(){for(var e=0,t=this._characters.length;t>e;e++){var n=this._characters[e];n._updateTransformComponent(n._nativeColliderObject.getWorldTransform())}},t._updateCollisions=function(){this._collisionsUtils.recoverAllContactPointsPool();var e=this._currentFrameCollisions;this._currentFrameCollisions=this._previousFrameCollisions,this._currentFrameCollisions.length=0,this._previousFrameCollisions=e;for(var t=C.loopCount,n=this._nativeDispatcher.getNumManifolds(),i=0;n>i;i++){var r=this._nativeDispatcher.getManifoldByIndexInternal(i),a=Cn._physicObjectsMap[r.getBody0().getUserIndex()],o=Cn._physicObjectsMap[r.getBody1().getUserIndex()],s=null,l=null,h=a.isTrigger||o.isTrigger;if(h&&(a.owner._needProcessTriggers||o.owner._needProcessTriggers))for(var c=r.getNumContacts(),_=0;c>_;_++){var u=r.getContactPoint(_),d=u.getDistance();if(0>=d){s=this._collisionsUtils.getCollision(a,o),s._isTrigger=!0,l=s.contacts,l.length=0;break}}else if((a.owner._needProcessCollisions||o.owner._needProcessCollisions)&&(a._enableProcessCollisions||o._enableProcessCollisions))for(c=r.getNumContacts(),_=0;c>_;_++)if(u=r.getContactPoint(_),d=u.getDistance(),0>=d){var f=this._collisionsUtils.getContactPoints();f.colliderA=a,f.colliderB=o,f.distance=d;var m=u.get_m_normalWorldOnB(),p=f.normal.elements;p[0]=-m.x(),p[1]=m.y(),p[2]=m.z();var v=u.get_m_positionWorldOnA(),E=f.positionOnA.elements;E[0]=-v.x(),E[1]=v.y(),E[2]=v.z();var T=u.get_m_positionWorldOnB(),g=f.positionOnB.elements;g[0]=-T.x(),g[1]=T.y(),g[2]=T.z(),s||(s=this._collisionsUtils.getCollision(a,o),s._isTrigger=!1,l=s.contacts,l.length=0),l.push(f)}s&&(this._currentFrameCollisions.push(s),s._setUpdateFrame(t))}},t._eventScripts=function(){for(var e=C.loopCount,t=0,n=this._currentFrameCollisions.length;n>t;t++){var i=this._currentFrameCollisions[t];if(e-i._lastUpdateFrame===1){var r=i._colliderA.owner,a=r._scripts;if(a)if(i._isTrigger){if(r._needProcessTriggers)for(var o=0,s=a.length;s>o;o++)a[o].onTriggerStay(i._colliderB)}else if(r._needProcessCollisions)for(o=0,s=a.length;s>o;o++)i.other=i._colliderB,a[o].onCollisionStay(i);var l=i._colliderB.owner,h=l._scripts;if(h)if(i._isTrigger){if(l._needProcessTriggers)for(o=0,s=h.length;s>o;o++)h[o].onTriggerStay(i._colliderA)}else if(l._needProcessCollisions)for(o=0,s=h.length;s>o;o++)i.other=i._colliderA,h[o].onCollisionStay(i)}else{if(r=i._colliderA.owner,a=r._scripts)if(i._isTrigger){if(r._needProcessTriggers)for(o=0,s=a.length;s>o;o++)a[o].onTriggerEnter(i._colliderB)}else if(r._needProcessCollisions)for(o=0,s=a.length;s>o;o++)i.other=i._colliderB,a[o].onCollisionEnter(i);if(l=i._colliderB.owner,h=l._scripts)if(i._isTrigger){if(l._needProcessTriggers)for(o=0,s=h.length;s>o;o++)h[o].onTriggerEnter(i._colliderA)}else if(l._needProcessCollisions)for(o=0,s=h.length;s>o;o++)i.other=i._colliderA,h[o].onCollisionEnter(i)}}for(t=0,n=this._previousFrameCollisions.length;n>t;t++){var c=this._previousFrameCollisions[t];if(e-c._updateFrame===1){if(this._collisionsUtils.recoverCollision(c),r=c._colliderA.owner,a=r._scripts)if(c._isTrigger){if(r._needProcessTriggers)for(o=0,s=a.length;s>o;o++)a[o].onTriggerExit(c._colliderB)}else if(r._needProcessCollisions)for(o=0,s=a.length;s>o;o++)c.other=c._colliderB,a[o].onCollisionExit(c);if(l=c._colliderB.owner,h=l._scripts)if(c._isTrigger){if(l._needProcessTriggers)for(o=0,s=h.length;s>o;o++)h[o].onTriggerExit(c._colliderA)}else if(l._needProcessCollisions)for(o=0,s=h.length;s>o;o++)c.other=c._colliderA,h[o].onCollisionExit(c)}}},t.clearForces=function(){if(!this._nativeDiscreteDynamicsWorld)throw"Cannot perform this action when the physics engine is set to CollisionsOnly";this._nativeDiscreteDynamicsWorld.clearForces()},a(0,t,"gravity",function(){if(!this._nativeDiscreteDynamicsWorld)throw"Simulation:Cannot perform this action when the physics engine is set to CollisionsOnly";return this._gravity},function(t){if(!this._nativeDiscreteDynamicsWorld)throw"Simulation:Cannot perform this action when the physics engine is set to CollisionsOnly";this._gravity=t;var n=t.elements,i=e._nativeTempVector30;i.setValue(-n[0],n[1],n[2]),this._nativeDiscreteDynamicsWorld.setGravity(i)}),a(0,t,"continuousCollisionDetection",function(){return this._nativeDispatchInfo.get_m_useContinuous()},function(e){this._nativeDispatchInfo.set_m_useContinuous(e)}),a(0,t,"speculativeContactRestitution",function(){if(!this._nativeDiscreteDynamicsWorld)throw"Simulation:Cannot Cannot perform this action when the physics engine is set to CollisionsOnly";return this._nativeDiscreteDynamicsWorld.getApplySpeculativeContactRestitution()},function(e){if(!this._nativeDiscreteDynamicsWorld)throw"Simulation:Cannot Cannot perform this action when the physics engine is set to CollisionsOnly";this._nativeDiscreteDynamicsWorld.setApplySpeculativeContactRestitution(e)}),e.createConstraint=function(){},e.PHYSICSENGINEFLAGS_NONE=0,e.PHYSICSENGINEFLAGS_COLLISIONSONLY=1,e.PHYSICSENGINEFLAGS_SOFTBODYSUPPORT=2,e.PHYSICSENGINEFLAGS_MULTITHREADED=4,e.PHYSICSENGINEFLAGS_USEHARDWAREWHENPOSSIBLE=8,e.SOLVERMODE_RANDMIZE_ORDER=1,e.SOLVERMODE_FRICTION_SEPARATE=2,e.SOLVERMODE_USE_WARMSTARTING=4,e.SOLVERMODE_USE_2_FRICTION_DIRECTIONS=16,e.SOLVERMODE_ENABLE_FRICTION_DIRECTION_CACHING=32,e.SOLVERMODE_DISABLE_VELOCITY_DEPENDENT_FRICTION_DIRECTION=64,e.SOLVERMODE_CACHE_FRIENDLY=128,e.SOLVERMODE_SIMD=256,e.SOLVERMODE_INTERLEAVE_CONTACT_AND_FRICTION_CONSTRAINTS=512,e.SOLVERMODE_ALLOW_ZERO_LENGTH_FRICTION_DIRECTIONS=1024,e.disableSimulation=!1,i(e,["_nativeTempVector30",function(){return this._nativeTempVector30=new Sn._physics3D.btVector3(0,0,0)},"_nativeTempVector31",function(){return this._nativeTempVector31=new Sn._physics3D.btVector3(0,0,0)},"_nativeTempQuaternion0",function(){return this._nativeTempQuaternion0=new Sn._physics3D.btQuaternion(0,0,0,1)},"_nativeTempQuaternion1",function(){return this._nativeTempQuaternion1=new Sn._physics3D.btQuaternion(0,0,0,1)},"_nativeTempTransform0",function(){return this._nativeTempTransform0=new Sn._physics3D.btTransform},"_nativeTempTransform1",function(){return this._nativeTempTransform1=new Sn._physics3D.btTransform},"_tempVector30",function(){return this._tempVector30=new Di}]),e}(),nn=function(){function e(){this._attatched=!1,this._indexInCompound=-1,this._compoundParent=null,this._attatchedCollisionObject=null,this._referenceCount=0,this.needsCustomCollisionCallback=!1,this._scale=new Di(1,1,1),this._centerMatrix=new Wt,this._localOffset=new Di(0,0,0),this._localRotation=new Yt(0,0,0,1)}r(e,"laya.d3.physics.shape.ColliderShape");var t=e.prototype;return t._setScale=function(t){if(this._compoundParent)this.updateLocalTransformations();else{var n=t.elements;e._nativeScale.setValue(n[0],n[1],n[2]),this._nativeShape.setLocalScaling(e._nativeScale)}},t._addReference=function(){this._referenceCount++},t._removeReference=function(){this._referenceCount--},t.updateLocalTransformations=function(){if(this._compoundParent){var t=e._tempVector30;Di.multiply(this.localOffset,this._scale,t),e._createAffineTransformation(t.elements,this.localRotation.elements,this._centerMatrix.elements)}else e._createAffineTransformation(this.localOffset.elements,this.localRotation.elements,this._centerMatrix.elements)},t.destroy=function(){this._nativeShape&&(this._nativeShape.dispose(),this._nativeShape=null)},a(0,t,"type",function(){return this._type}),a(0,t,"localOffset",function(){return this._localOffset},function(e){this._localOffset=e,this._compoundParent&&this._compoundParent._updateChildTransform(this)}),a(0,t,"localRotation",function(){return this._localRotation},function(e){this._localRotation=e,this._compoundParent&&this._compoundParent._updateChildTransform(this)}),e._creatShape=function(e){var t;switch(e.type){case"BoxColliderShape":var n=e.size;t=new Ai(n[0],n[1],n[2]);break;case"SphereColliderShape":t=new Ci(e.radius);break;case"CapsuleColliderShape":t=new Ri(e.radius,e.height);break;default:throw"unknown shape type."}var i=t.localOffset;return i.fromArray(e.center),t.localOffset=i,t},e._createAffineTransformation=function(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=i+i,l=r+r,h=a+a,c=i*s,_=i*l,u=i*h,d=r*l,f=r*h,m=a*h,p=o*s,v=o*l,E=o*h;n[0]=1-(d+m),n[1]=_+E,n[2]=u-v,n[3]=0,n[4]=_-E,n[5]=1-(c+m),n[6]=f+p,n[7]=0,n[8]=u+v,n[9]=f-p,n[10]=1-(c+d),n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1},e.SHAPEORIENTATION_UPX=0,e.SHAPEORIENTATION_UPY=1,e.SHAPEORIENTATION_UPZ=2,e.SHAPETYPES_BOX=0,e.SHAPETYPES_SPHERE=1,e.SHAPETYPES_CYLINDER=2,e.SHAPETYPES_CAPSULE=3,e.SHAPETYPES_CONVEXHULL=4,e.SHAPETYPES_COMPOUND=5,e.SHAPETYPES_STATICPLANE=6,e.SHAPETYPES_CONE=7,i(e,["_tempVector30",function(){return this._tempVector30=new Di},"_nativeScale",function(){return this._nativeScale=new Sn._physics3D.btVector3(1,1,1)},"_nativeVector30",function(){return this._nativeVector30=new Sn._physics3D.btVector3(0,0,0)},"_nativQuaternion0",function(){return this._nativQuaternion0=new Sn._physics3D.btQuaternion(0,0,0,1)
},"_nativeTransform0",function(){return this._nativeTransform0=new Sn._physics3D.btTransform}]),e}(),rn=(function(){function e(){}return r(e,"laya.d3.physics.shape.HeightfieldColliderShape"),e}(),function(){function e(){var e=.5,t=.5,n=.5,i=new Float32Array([-n,e,-t,n,e,-t,n,e,t,-n,e,t,-n,-e,-t,n,-e,-t,n,-e,t,-n,-e,t]),r=new Uint8Array([0,1,2,2,3,0,4,7,6,6,5,4,0,3,7,7,4,0,1,5,6,6,2,1,3,2,6,6,7,3,0,4,5,5,1,0]);this._vertexBuffer=new or(8*jn.vertexDeclaration.vertexStride,35044,!1),this._vertexBuffer.vertexDeclaration=jn.vertexDeclaration,this._indexBuffer=new nr("ubyte",36,35044,!1),this._vertexBuffer.setData(i),this._indexBuffer.setData(r);var a=new X;a.bindBufferState(),a.applyVertexBuffer(this._vertexBuffer),a.applyIndexBuffer(this._indexBuffer),a.unBindBufferState(),this._bufferState=a}r(e,"laya.d3.resource.models.SkyBox");var t=e.prototype;return t._render=function(){p.instance.drawElements(4,36,5121,0),C.trianglesFaces+=12,C.drawCall++},e.__init__=function(){e._instance=new e,e._instance._vertexBuffer.lock=!0,e._instance._indexBuffer.lock=!0},e._instance=null,e}()),an=function(){function e(){}return r(e,"laya.d3.resource.TextureGenerator"),e.lightAttenTexture=function(e,t,n,i,r,a){var o=e/n,s=1/(1+25*o);o>=.64&&(o>1?s=0:s*=1-(o-.64)/.36),a[r]=Math.floor(255*s+.5)},e.haloTexture=function(e,t,n,i,r,a){n>>=1,i>>=1;var o=(e-n)/n,s=(t-i)/i,l=o*o+s*s;l>1&&(l=1),a[r]=Math.floor(255*(1-l)+.5)},e._generateTexture2D=function(e,t,n,i){var r=0,a=0;switch(e.format){case 0:a=3;break;case 1:a=4;break;case 2:a=1;break;default:throw"GeneratedTexture._generateTexture: unkonw texture format."}x.isConchApp&&(a=4);for(var o=new Uint8Array(t*n*a),s=0;n>s;s++)for(var l=0;t>l;l++)i(l,s,t,n,r,o),r+=a;e.setPixels(o)},e}(),on=function(){function e(){this.value=0}r(e,"laya.d3.shader.DefineDatas");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t.add=function(e){this.value|=e},t.remove=function(e){this.value&=~e},t.has=function(e){return(this.value&e)>0},t.cloneTo=function(e){var t=e;t.value=this.value},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},e}(),sn=function(){function e(t,n,i,r,a,o){this._name=t,this._publicDefines=[],this._publicDefinesMap={},this._spriteDefines=[],this._spriteDefinesMap={},this._materialDefines=[],this._materialDefinesMap={},this._addDefines(this._publicDefines,this._publicDefinesMap,e._globleDefines),a&&this._addDefines(this._spriteDefines,this._spriteDefinesMap,a.defines),o&&this._addDefines(this._materialDefines,this._materialDefinesMap,o.defines),this._passes=[],this._attributeMap=n,this._uniformMap=i}r(e,"laya.d3.shader.Shader3D");var t=e.prototype;return t._addDefines=function(e,t,n){for(var i in n){var r=n[i],a=parseInt(i);e[a]=r,t[r]=a}},t._addShaderPass=function(e,t){this._passes.push(new kn(this,e,t))},t.getMaterialDefineByName=function(e){return this._materialDefinesMap[e]},e.addInclude=function(e,t){R.addInclude(e,t)},e.registerPublicDefine=function(t){var n=Math.pow(2,e._publicCounter++);return e._globleDefines[n]=t,n},e.compileShader=function(e,t,n,i,r){var a=laya.d3.shader.Shader3D.find(e);if(a){var o=a._passes[t];o?V.shaderHighPrecision?o.withCompile(n,i,r):o.withCompile(n-laya.d3.shader.Shader3D.SHADERDEFINE_HIGHPRECISION,i,r):console.warn("Shader3D: unknown shader passIndex.")}else console.warn("Shader3D: unknown shader name.")},e.add=function(t,n,i,r,a){return laya.d3.shader.Shader3D._preCompileShader[t]=new e(t,n,i,R.includes,r,a)},e.find=function(e){return laya.d3.shader.Shader3D._preCompileShader[e]},e.PERIOD_CUSTOM=0,e.PERIOD_MATERIAL=1,e.PERIOD_SPRITE=2,e.PERIOD_CAMERA=3,e.PERIOD_SCENE=4,e.SHADERDEFINE_HIGHPRECISION=0,e._publicCounter=0,e._globleDefines=[],e._preCompileShader={},e.debugMode=!1,e}(),ln=function(){function e(e,t){this._runtimeCopyValues=[],this._ownerResource=e,this._initData(t)}r(e,"laya.d3.shader.ShaderData");var t=e.prototype;return n.imps(t,{"laya.d3.core.IClone":!0}),t._initData=function(e){this._data=new Array(e)},t.getBool=function(e){return this._data[e]},t.setBool=function(e,t){this._data[e]=t},t.getInt=function(e){return this._data[e]},t.setInt=function(e,t){this._data[e]=t},t.getNumber=function(e){return this._data[e]},t.setNumber=function(e,t){this._data[e]=t},t.getVector=function(e){return this._data[e]},t.setVector=function(e,t){this._data[e]=t},t.getQuaternion=function(e){return this._data[e]},t.setQuaternion=function(e,t){this._data[e]=t},t.getMatrix4x4=function(e){return this._data[e]},t.setMatrix4x4=function(e,t){this._data[e]=t},t.getBuffer=function(e){return this._data[e]},t.setBuffer=function(e,t){this._data[e]=t},t.setTexture=function(e,t){var n=this._data[e];this._data[e]=t,this._ownerResource&&this._ownerResource.referenceCount>0&&(n&&n._removeReference(),t&&t._addReference())},t.getTexture=function(e){return this._data[e]},t.setAttribute=function(e,t){this._data[e]=t},t.getAttribute=function(e){return this._data[e]},t.getLength=function(){return this._data.length},t.setLength=function(e){this._data.length=e},t.cloneTo=function(e){var t=e,n=t._data,i=this._data.length;n.length=i;for(var r=0;i>r;r++){var a=this._data[r];if(a)if("number"==typeof a)n[r]=a;else if("number"==typeof a&&Math.floor(a)==a)n[r]=a;else if("boolean"==typeof a)n[r]=a;else if(a instanceof laya.d3.math.Vector2){var o=n[r]||(n[r]=new xi);a.cloneTo(o),n[r]=o}else if(a instanceof laya.d3.math.Vector3){var s=n[r]||(n[r]=new Di);a.cloneTo(s),n[r]=s}else if(a instanceof laya.d3.math.Vector4){var l=n[r]||(n[r]=new Mi);a.cloneTo(l),n[r]=l}else if(a instanceof laya.d3.math.Matrix4x4){var h=n[r]||(n[r]=new Wt);a.cloneTo(h),n[r]=h}else a instanceof laya.webgl.resource.BaseTexture&&(n[r]=a)}},t.cloneToForNative=function(e){var t=e;t._int32Data.set(this._int32Data,0);var n=t._nativeArray,i=this._nativeArray.length;n.length=i;for(var r=0;i>r;r++){var a=this._nativeArray[r];if(a)if("number"==typeof a)n[r]=a,t.setNumber(r,a);else if("number"==typeof a&&Math.floor(a)==a)n[r]=a,t.setInt(r,a);else if("boolean"==typeof a)n[r]=a,t.setBool(r,a);else if(a instanceof laya.d3.math.Vector2){var o=n[r]||(n[r]=new xi);a.cloneTo(o),n[r]=o,t.setVector(r,o)}else if(a instanceof laya.d3.math.Vector3){var s=n[r]||(n[r]=new Di);a.cloneTo(s),n[r]=s,t.setVector(r,s)}else if(a instanceof laya.d3.math.Vector4){var l=n[r]||(n[r]=new Mi);a.cloneTo(l),n[r]=l,t.setVector(r,l)}else if(a instanceof laya.d3.math.Matrix4x4){var h=n[r]||(n[r]=new Wt);a.cloneTo(h),n[r]=h,t.setMatrix4x4(r,h)}else a instanceof laya.webgl.resource.BaseTexture&&(n[r]=a,t.setTexture(r,a))}},t.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},t._initDataForNative=function(e){e||alert("ShaderData _initDataForNative error length=0"),this._frameCount=-1,this._runtimeCopyValues.length=0,this._nativeArray=[],this._data=new ArrayBuffer(4*e),this._int32Data=new Int32Array(this._data),this._float32Data=new Float32Array(this._data),p.createArrayBufferRef(this._data,0,!0)},t.getIntForNative=function(e){return this._int32Data[e]},t.setIntForNative=function(e,t){this._int32Data[e]=t},t.getBoolForNative=function(e){return 1==this._int32Data[e]},t.setBoolForNative=function(e,t){this._int32Data[e]=t},t.getNumberForNative=function(e){return this._float32Data[e]},t.setNumberForNative=function(e,t){this._float32Data[e]=t},t.getMatrix4x4ForNative=function(){return alert("ShaderData getMatrix4x4 can't support"),null},t.setMatrix4x4ForNative=function(e,t){this._nativeArray[e]=t;var n=this.setReferenceForNative(t.elements);this._int32Data[e]=n},t.getVectorForNative=function(e){return this._nativeArray[e]},t.setVectorForNative=function(e,t){this._nativeArray[e]=t;var n=this.setReferenceForNative(t.elements);this._int32Data[e]=n},t.getQuaternionForNative=function(){return alert("ShaderData getQuaternion can't support"),null},t.setQuaternionForNative=function(e,t){this._nativeArray[e]=t;var n=this.setReferenceForNative(t.elements);this._int32Data[e]=n},t.getBufferForNative=function(){return alert("ShaderData getBuffer can't support"),null},t.setBufferForNative=function(e,t){this._nativeArray[e]=t;var n=this.setReferenceForNative(t);this._int32Data[e]=n},t.getAttributeForNative=function(){return alert("ShaderData  getAttribute can't support"),null},t.setAttributeForNative=function(e,t){this._nativeArray[e]=t,t._ptrID||p.createArrayBufferRef(t,0,!0),p.syncBufferToRenderThread(t),this._int32Data[e]=t._ptrID},t.getTextureForNative=function(){return alert("ShaderData getTexture can't support"),null},t.setTextureForNative=function(e,t){if(t){this._nativeArray[e]=t;var n=this._nativeArray[e];this._int32Data[e]=t._getSource().id,this._ownerResource&&this._ownerResource.referenceCount>0&&(n&&n._removeReference(),t&&t._addReference())}},t.setReferenceForNative=function(t){this.clearRuntimeCopyArray();var n=0,i=0;return e._SET_RUNTIME_VALUE_MODE_REFERENCE_?(p.createArrayBufferRefs(t,0,!0,0),n=0,i=t.getPtrID(n)):(p.createArrayBufferRefs(t,0,!0,1),n=t.getRefNum()-1,i=t.getPtrID(n),this._runtimeCopyValues.push({obj:t,refID:n,ptrID:i})),p.syncBufferToRenderThread(t,n),i},t.clearRuntimeCopyArray=function(){var e=p.getFrameCount();if(this._frameCount!=e){this._frameCount=e;for(var t=0,n=this._runtimeCopyValues.length;n>t;t++){var i=this._runtimeCopyValues[t];i.obj.clearRefNum()}this._runtimeCopyValues.length=0}},e.setRuntimeValueMode=function(t){e._SET_RUNTIME_VALUE_MODE_REFERENCE_=t},e._SET_RUNTIME_VALUE_MODE_REFERENCE_=!0,e}(),hn=function(){function e(e){this._counter=0,this.defines=null,e?(this._counter=e._counter,this.defines=e.defines.slice()):(this._counter=0,this.defines=[])}r(e,"laya.d3.shader.ShaderDefines");var t=e.prototype;return t.registerDefine=function(e){var t=Math.pow(2,this._counter++);return this.defines[t]=e,t},e}(),cn=function(){function e(){}return r(e,"laya.d3.shader.ShaderInit3D"),e.__init__=function(){sn.SHADERDEFINE_HIGHPRECISION=sn.registerPublicDefine("HIGHPRECISION"),ki.SHADERDEFINE_FOG=sn.registerPublicDefine("FOG"),ki.SHADERDEFINE_DIRECTIONLIGHT=sn.registerPublicDefine("DIRECTIONLIGHT"),ki.SHADERDEFINE_POINTLIGHT=sn.registerPublicDefine("POINTLIGHT"),ki.SHADERDEFINE_SPOTLIGHT=sn.registerPublicDefine("SPOTLIGHT"),ki.SHADERDEFINE_CAST_SHADOW=sn.registerPublicDefine("CASTSHADOW"),ki.SHADERDEFINE_SHADOW_PSSM1=sn.registerPublicDefine("SHADOWMAP_PSSM1"),ki.SHADERDEFINE_SHADOW_PSSM2=sn.registerPublicDefine("SHADOWMAP_PSSM2"),ki.SHADERDEFINE_SHADOW_PSSM3=sn.registerPublicDefine("SHADOWMAP_PSSM3"),ki.SHADERDEFINE_SHADOW_PCF_NO=sn.registerPublicDefine("SHADOWMAP_PCF_NO"),ki.SHADERDEFINE_SHADOW_PCF1=sn.registerPublicDefine("SHADOWMAP_PCF1"),ki.SHADERDEFINE_SHADOW_PCF2=sn.registerPublicDefine("SHADOWMAP_PCF2"),ki.SHADERDEFINE_SHADOW_PCF3=sn.registerPublicDefine("SHADOWMAP_PCF3"),ki.SHADERDEFINE_REFLECTMAP=sn.registerPublicDefine("REFLECTMAP"),sn.addInclude("Lighting.glsl","\nstruct DirectionLight {\n	vec3 Color;\n	vec3 Direction;\n};\n\nstruct PointLight {\n	vec3 Color;\n	vec3 Position;\n	float Range;\n};\n\nstruct SpotLight {\n	vec3 Color;\n	vec3 Position;\n	vec3 Direction;\n	float Spot;\n	float Range;\n};\n\n// Laya中使用衰减纹理\nfloat LayaAttenuation(in vec3 L,in float invLightRadius) {\n	float fRatio = clamp(length(L) * invLightRadius,0.0,1.0);\n	fRatio *= fRatio;\n	return 1.0 / (1.0 + 25.0 * fRatio)* clamp(4.0*(1.0 - fRatio),0.0,1.0); //fade to black as if 4 pixel texture\n}\n\n// Same as Just Cause 2 and Crysis 2 (you can read GPU Pro 1 book for more information)\nfloat BasicAttenuation(in vec3 L,in float invLightRadius) {\n	vec3 distance = L * invLightRadius;\n	float attenuation = clamp(1.0 - dot(distance, distance),0.0,1.0); // Equals float attenuation = saturate(1.0f - dot(L, L) / (lightRadius *  lightRadius));\n	return attenuation * attenuation;\n}\n\n// Inspired on http://fools.slindev.com/viewtopic.php?f=11&t=21&view=unread#unread\nfloat NaturalAttenuation(in vec3 L,in float invLightRadius) {\n	float attenuationFactor = 30.0;\n	vec3 distance = L * invLightRadius;\n	float attenuation = dot(distance, distance); // Equals float attenuation = dot(L, L) / (lightRadius *  lightRadius);\n	attenuation = 1.0 / (attenuation * attenuationFactor + 1.0);\n	// Second we move down the function therewith it reaches zero at abscissa 1:\n	attenuationFactor = 1.0 / (attenuationFactor + 1.0); //attenuationFactor contains now the value we have to subtract\n	attenuation = max(attenuation - attenuationFactor, 0.0); // The max fixes a bug.\n	// Finally we expand the equation along the y-axis so that it starts with a function value of 1 again.\n	attenuation /= 1.0 - attenuationFactor;\n	return attenuation;\n}\n\nvoid LayaAirBlinnPhongLight (in vec3 specColor,in float specColorIntensity,in vec3 normal,in vec3 gloss, in vec3 viewDir,in vec3 lightColor, in vec3 lightVec,out vec3 diffuseColor,out vec3 specularColor) {\n	mediump vec3 h = normalize(viewDir-lightVec);\n	lowp float ln = max (0.0, dot (-lightVec,normal));\n	float nh = max (0.0, dot (h,normal));\n	diffuseColor=lightColor * ln;\n	specularColor=lightColor *specColor*pow (nh, specColorIntensity*128.0) * gloss;\n}\n\nvoid LayaAirBlinnPhongDiectionLight (in vec3 specColor,in float specColorIntensity,in vec3 normal,in vec3 gloss, in vec3 viewDir, in DirectionLight light,out vec3 diffuseColor,out vec3 specularColor) {\n	vec3 lightVec=normalize(light.Direction);\n	LayaAirBlinnPhongLight(specColor,specColorIntensity,normal,gloss,viewDir,light.Color,lightVec,diffuseColor,specularColor);\n}\n\nvoid LayaAirBlinnPhongPointLight (in vec3 pos,in vec3 specColor,in float specColorIntensity,in vec3 normal,in vec3 gloss, in vec3 viewDir, in PointLight light,out vec3 diffuseColor,out vec3 specularColor) {\n	vec3 lightVec =  pos-light.Position;\n	//if( length(lightVec) > light.Range )\n	//	return;\n	LayaAirBlinnPhongLight(specColor,specColorIntensity,normal,gloss,viewDir,light.Color,lightVec/length(lightVec),diffuseColor,specularColor);\n	float attenuate = LayaAttenuation(lightVec, 1.0/light.Range);\n	diffuseColor *= attenuate;\n	specularColor*= attenuate;\n}\n\nvoid LayaAirBlinnPhongSpotLight (in vec3 pos,in vec3 specColor,in float specColorIntensity,in vec3 normal,in vec3 gloss, in vec3 viewDir, in SpotLight light,out vec3 diffuseColor,out vec3 specularColor) {\n	vec3 lightVec =  pos-light.Position;\n	//if( length(lightVec) > light.Range)\n	//	return;\n\n	vec3 normalLightVec=lightVec/length(lightVec);\n	LayaAirBlinnPhongLight(specColor,specColorIntensity,normal,gloss,viewDir,light.Color,normalLightVec,diffuseColor,specularColor);\n	vec2 cosAngles=cos(vec2(light.Spot,light.Spot*0.5)*0.5);//ConeAttenuation\n	float dl=dot(normalize(light.Direction),normalLightVec);\n	dl*=smoothstep(cosAngles[0],cosAngles[1],dl);\n	float attenuate = LayaAttenuation(lightVec, 1.0/light.Range)*dl;\n	diffuseColor *=attenuate;\n	specularColor *=attenuate;\n}\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent,vec3 binormal) {\n	vec3 normalT =vec3(2.0*normalMapSample.x - 1.0,1.0-2.0*normalMapSample.y,2.0*normalMapSample.z - 1.0);\n\n	// Build orthonormal basis.\n	vec3 N = normalize(unitNormal);\n	vec3 T = normalize(tangent);\n	vec3 B = normalize(binormal);\n	mat3 TBN = mat3(T, B, N);\n\n	// Transform from tangent space to world space.\n	vec3 bumpedNormal = TBN*normalT;\n\n	return bumpedNormal;\n}\n\nvec3 NormalSampleToWorldSpace1(vec4 normalMapSample, vec3 tangent, vec3 binormal, vec3 unitNormal) {\n	vec3 normalT;\n	normalT.x = 2.0 * normalMapSample.x - 1.0;\n	normalT.y = 1.0 - 2.0 * normalMapSample.y;\n	normalT.z = sqrt(1.0 - clamp(dot(normalT.xy, normalT.xy), 0.0, 1.0));\n\n	vec3 T = normalize(tangent);\n	vec3 B = normalize(binormal);\n	vec3 N = normalize(unitNormal);\n	mat3 TBN = mat3(T, B, N);\n\n	// Transform from tangent space to world space.\n	vec3 bumpedNormal = TBN * normalize(normalT);\n\n	return bumpedNormal;\n}\n\nvec3 DecodeLightmap(vec4 color) {\n	return color.rgb*color.a*5.0;\n}\n\n"),sn.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2	  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n	const vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n	const vec4 bitMask	= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n	vec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n	res -= res.xxyz * bitMask;\n	return res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n	const vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n	float depth = dot(rgbaDepth, bitShift);\n	return depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n	vec2 texelpos =texcoord / invsize;\n	vec2 lerps = fract( texelpos );\n	float sourcevals[4];\n	sourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n	sourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n	sourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n	sourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n	return mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n	float value = 1.0;\n	int nPSNum = int(posViewZ>pssmDistance.x);\n	nPSNum += int(posViewZ>pssmDistance.y);\n	nPSNum += int(posViewZ>pssmDistance.z);\n	//真SB,webgl不支持在PS中直接访问数组\n	mat4 lightVP;\n	if( nPSNum == 0 )\n	{\n		lightVP = lightShadowVP[1];\n	}\n	else if( nPSNum == 1 )\n	{\n		lightVP = lightShadowVP[2];\n	}\n	else if( nPSNum == 2 )\n	{\n		lightVP = lightShadowVP[3];\n	}\n	vec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n	//为了效率，在CPU计算/2.0 + 0.5\n	//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n	vec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n	float fMyZ = vText.z - zBias;\n	/*\n	bvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n	bool bInFrustum = all( bInFrustumVec );\n	bvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n	bool bFrustumTest = all( bFrustumTestVec );\n	if ( bFrustumTest ) \n	*/\n	if( fMyZ <= 1.0 )\n	{\n		float zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n		if ( nPSNum == 0 )\n		{\n			value =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,	fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,	fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,	fMyZ );\n			value = value/4.0;\n		} \n		else if( nPSNum == 1 )\n		{\n			value = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n		}\n		else if( nPSNum == 2 )\n		{\n			vec4 color = texture2D( shadowMap3,vText.xy );\n			zdepth = unpackDepth(color);\n			value = float(fMyZ < zdepth);\n		}\n#endif\n#ifdef SHADOWMAP_PCF2\n		if ( nPSNum == 0 )\n		{\n			value = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n		}\n		else if( nPSNum == 1 )\n		{\n			value = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n		}\n		else if( nPSNum == 2 )\n		{\n			vec4 color = texture2D( shadowMap3,vText.xy );\n			zdepth = unpackDepth(color);\n			value = float(fMyZ < zdepth);\n		}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n		if ( nPSNum == 0 )\n		{\n			value = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n		}\n		else if( nPSNum == 1 )\n		{\n			vec4 color = texture2D( shadowMap2,vText.xy );\n			zdepth = unpackDepth(color);\n			value = float(fMyZ < zdepth);\n		}\n		else if( nPSNum == 2 )\n		{\n			vec4 color = texture2D( shadowMap3,vText.xy );\n			zdepth = unpackDepth(color);\n			value = float(fMyZ < zdepth);\n		}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n		vec4 color;\n		if ( nPSNum == 0 )\n		{\n			color = texture2D( shadowMap1,vText.xy );\n		}\n		else if( nPSNum == 1 )\n		{\n			color = texture2D( shadowMap2,vText.xy );\n		}\n		else if( nPSNum == 2 )\n		{\n			color = texture2D( shadowMap3,vText.xy );\n		}\n		zdepth = unpackDepth(color);\n		value = float(fMyZ < zdepth);\n#endif\n	}\n	return value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n	float value = 1.0;\n	int nPSNum = int(posViewZ>pssmDistance.x);\n	nPSNum += int(posViewZ>pssmDistance.y);\n	//真SB,webgl不支持在PS中直接访问数组\n	mat4 lightVP;\n	if( nPSNum == 0 )\n	{\n		lightVP = lightShadowVP[1];\n	}\n	else if( nPSNum == 1 )\n	{\n		lightVP = lightShadowVP[2];\n	}\n	vec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n	//为了效率，在CPU计算/2.0 + 0.5\n	//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n	vec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n	float fMyZ = vText.z - zBias;\n	/*\n	bvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n	bool bInFrustum = all( bInFrustumVec );\n	bvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n	bool bFrustumTest = all( bFrustumTestVec );\n	if ( bFrustumTest ) \n	*/\n	if( fMyZ <= 1.0 )\n	{\n		float zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n		if ( nPSNum == 0 )\n		{\n			value =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,	fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,	fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,	fMyZ );\n			value = value/4.0;\n		}\n		else if( nPSNum == 1 )\n		{\n			value = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n		}\n#endif\n#ifdef SHADOWMAP_PCF2\n		if ( nPSNum == 0 )\n		{\n			value = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n		}\n		else if( nPSNum == 1 )\n		{\n			value = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n		}\n#endif\n#ifdef SHADOWMAP_PCF1\n		if ( nPSNum == 0 )\n		{\n			value = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n		}\n		else if( nPSNum == 1 )\n		{\n			vec4 color = texture2D( shadowMap2,vText.xy );\n			zdepth = unpackDepth(color);\n			value = float(fMyZ < zdepth);\n		}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n		vec4 color;\n		if ( nPSNum == 0 )\n		{\n			color = texture2D( shadowMap1,vText.xy );\n		}\n		else if( nPSNum == 1 )\n		{\n			color = texture2D( shadowMap2,vText.xy );\n		}\n		zdepth = unpackDepth(color);\n		value = float(fMyZ < zdepth);\n#endif\n	}\n	return value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n	float value = 1.0;\n	if( posViewZ < pssmDistance.x )\n	{\n		vec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n		float fMyZ = vText.z - zBias;\n		/*\n		bvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n		bool bInFrustum = all( bInFrustumVec );\n		bvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n		bool bFrustumTest = all( bFrustumTestVec );\n		*/\n		if ( fMyZ <= 1.0 ) \n		{\n			float zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n			value =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n			value += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n			value = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2		\n			value = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n			value = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO		\n			vec4 color = texture2D( shadowMap1,vText.xy );\n			zdepth = unpackDepth(color);\n			value = float(fMyZ < zdepth);\n#endif\n		}\n	}\n	return value;\n}"),sn.addInclude("BRDF.glsl","struct LayaGI\n{\n	vec3 diffuse;\n	vec3 specular;\n};\n\nvec4 LayaAirBRDF(in vec3 diffuseColor, in vec3 specularColor, in float oneMinusReflectivity, in float smoothness, in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in LayaGI gi)\n{\n	float perceptualRoughness = SmoothnessToPerceptualRoughness(smoothness);\n	vec3 halfDir = SafeNormalize(viewDir - lightDir);\n	\n	float nv = abs(dot(normal, viewDir));\n	\n	float nl = clamp(dot(normal,   -lightDir),  0.0, 1.0);\n	float nh = clamp(dot(normal,     halfDir),  0.0, 1.0);\n	float lv = clamp(dot(lightDir,   viewDir),  0.0, 1.0);\n	float lh = clamp(dot(lightDir,  -halfDir),  0.0, 1.0);\n	\n	float diffuseTerm = DisneyDiffuse(nv, nl, lh, perceptualRoughness) * nl;\n	\n	float roughness = PerceptualRoughnessToRoughness(perceptualRoughness);\n	\n	//#if UNITY_BRDF_GGX\n	float V = SmithJointGGXVisibilityTerm(nl, nv, roughness);\n	float D = GGXTerm(nh, roughness);\n	\n	float specularTerm = V * D * PI;\n	\n	specularTerm = sqrt(max(0.0001, specularTerm));\n	specularTerm = max(0.0, specularTerm * nl);\n	\n	float surfaceReduction = 1.0 - 0.28 * roughness * perceptualRoughness;\n	float grazingTerm = clamp(smoothness + (1.0 - oneMinusReflectivity), 0.0, 1.0);\n	\n	vec4 color;\n	color.rgb = diffuseColor * (gi.diffuse + lightColor * diffuseTerm) \n			  + specularTerm * lightColor * FresnelTerm (specularColor, lh)\n			  + surfaceReduction * gi.specular * FresnelLerp(specularColor, vec3(grazingTerm), nv);\n	\n	return color;\n}"),sn.addInclude("PBRUtils.glsl","struct DirectionLight\n{\n	vec3 Color;\n	vec3 Direction;\n};\n\nstruct PointLight\n{\n	vec3 Color;\n	vec3 Position;\n	float Range;\n};\n\nstruct SpotLight\n{\n	vec3 Color;\n	vec3 Position;\n	vec3 Direction;\n	float SpotAngle;\n	float Range;\n};\n\nvec3 UnpackScaleNormal(in vec2 uv0)\n{\n	#ifdef NORMALTEXTURE\n		vec3 normalT;\n		vec4 normalMapSample = texture2D(u_NormalTexture, uv0);\n		normalT.x = 2.0 * normalMapSample.x - 1.0;\n		normalT.y = 1.0 - 2.0 * normalMapSample.y;\n		normalT.xy *= u_normalScale;\n		normalT.z = sqrt(1.0 - clamp(dot(normalT.xy, normalT.xy), 0.0, 1.0));\n		\n		vec3 T = normalize(v_Tangent);\n		vec3 B = normalize(v_Binormal);\n		vec3 N = normalize(v_Normal);\n		mat3 TBN = mat3(T, B, N);\n		\n		vec3 bumpedNormal = TBN * normalize(normalT);\n		return bumpedNormal;\n	#else\n		return normalize(v_Normal);\n	#endif\n}\n\nvec4 DielectricSpecularColor = vec4(0.220916301, 0.220916301, 0.220916301, 1.0 - 0.220916301);\n\nfloat PI = 3.14159265359;\n\nvec3 FresnelTerm (in vec3 F0, in float cosA)\n{\n	return F0 + (vec3(1.0) - F0) * pow(1.0 - cosA, 5.0);\n}\n\nvec3 FresnelLerp (in vec3 F0, in vec3 F90, float cosA)\n{\n    float t = pow(1.0 - cosA, 5.0);\n    return mix(F0, F90, t);\n}\n\nfloat PerceptualRoughnessToRoughness(in float perceptualRoughness)\n{\n	return perceptualRoughness * perceptualRoughness;\n}\n\nfloat PerceptualRoughnessToSpecularPower(in float perceptualRoughness)\n{\n	float m = PerceptualRoughnessToRoughness(perceptualRoughness);\n	float sq = max(0.0001, m * m);\n	float n = (2.0 / sq) - 2.0;\n	n = max(n, 0.0001);\n	return n;\n}\n\nfloat RoughnessToPerceptualRoughness(in float roughness)\n{\n	return sqrt(roughness);\n}\n\nfloat SmoothnessToRoughness(in float smoothness)\n{\n	return (1.0 - smoothness) * (1.0 - smoothness);\n}\n\nfloat SmoothnessToPerceptualRoughness(in float smoothness)\n{\n	return (1.0 - smoothness);\n}\n\nvec3 SafeNormalize(in vec3 inVec)\n{\n	float dp3 = max(0.001,dot(inVec,inVec));\n	return inVec * (1.0 / sqrt(dp3));\n}\n\nfloat DisneyDiffuse(in float NdotV, in float NdotL, in float LdotH, in float perceptualRoughness)\n{\n	float fd90 = 0.5 + 2.0 * LdotH * LdotH * perceptualRoughness;\n	float lightScatter	= (1.0 + (fd90 - 1.0) * pow(1.0 - NdotL,5.0));\n	float viewScatter	= (1.0 + (fd90 - 1.0) * pow(1.0 - NdotV,5.0));\n\n	return lightScatter * viewScatter;\n}\n\nfloat SmithJointGGXVisibilityTerm (float NdotL, float NdotV, float roughness)\n{\n	float a = roughness;\n	float lambdaV = NdotL * (NdotV * (1.0 - a) + a);\n	float lambdaL = NdotV * (NdotL * (1.0 - a) + a);\n\n	return 0.5 / (lambdaV + lambdaL + 0.00001);\n}\n\nfloat GGXTerm (float NdotH, float roughness)\n{\n	float a2 = roughness * roughness;\n	float d = (NdotH * a2 - NdotH) * NdotH + 1.0;\n	return 0.31830988618 * a2 / (d * d + 0.0000001);\n}\n\nfloat OneMinusReflectivityFromMetallic(in float metallic)\n{\n	float oneMinusDielectricSpec = DielectricSpecularColor.a;\n	return oneMinusDielectricSpec - metallic * oneMinusDielectricSpec;\n}\n\nfloat SpecularStrength(vec3 specular)\n{\n    //(SHADER_TARGET < 30)return specular.r; \n    return max (max (specular.r, specular.g), specular.b);\n}\n\nvec3 DiffuseAndSpecularFromMetallic(in vec3 diffuseColor, in float metallic, out vec3 specularColor, out float oneMinusReflectivity)\n{\n	specularColor = mix(DielectricSpecularColor.rgb, diffuseColor, metallic);\n	oneMinusReflectivity = OneMinusReflectivityFromMetallic(metallic);\n	return diffuseColor * oneMinusReflectivity;\n}\n\nvec3 EnergyConservationBetweenDiffuseAndSpecular(in vec3 diffuseColor, in vec3 specularColor, out float oneMinusReflectivity)\n{\n	oneMinusReflectivity = 1.0 - SpecularStrength(specularColor);\n	return diffuseColor * oneMinusReflectivity;\n}\n\nvec4 Occlusion(in vec2 uv0){\n	#ifdef OCCLUSIONTEXTURE\n		vec4 occlusionTextureColor = texture2D(u_OcclusionTexture, uv0);\n		float occ = occlusionTextureColor.g;\n		float oneMinusT = 1.0 - u_occlusionStrength;\n		float lerpOneTo = oneMinusT + occ * u_occlusionStrength;\n		return occlusionTextureColor * lerpOneTo;\n	#else\n		return vec4(1.0);\n	#endif\n}\n\nvec2 ParallaxOffset(in vec3 viewDir){\n	#ifdef PARALLAXTEXTURE\n		float h = texture2D(u_ParallaxTexture, v_Texcoord0).g;\n		h = h * u_parallaxScale - u_parallaxScale / 2.0;\n		vec3 v = viewDir;\n		v.z += 0.42;\n		vec2 offset = h * (v.xy / v.z);\n		return v_Texcoord0 + offset;\n	#else\n		return v_Texcoord0;\n	#endif\n}\n\nvec3 ReflectCubeMap(in vec3 viewDir, in vec3 normal){\n	#ifdef REFLECTMAP\n		vec3 incident = -viewDir;\n		vec3 reflectionVector = reflect(incident, normal);\n		vec3 reflectionColor = textureCube(u_ReflectTexture, vec3(-reflectionVector.x, reflectionVector.yz)).rgb;\n		return reflectionColor * u_ReflectIntensity;\n	#else\n		return vec3(0.0);\n	#endif\n}\n\nfloat LayaAttenuation(in vec3 L, in float invLightRadius)\n{\n	float fRatio = clamp(length(L) * invLightRadius, 0.0, 1.0);\n	fRatio *= fRatio;\n	return 1.0 / (1.0 + 25.0 * fRatio) * clamp(4.0*(1.0 - fRatio), 0.0, 1.0); //fade to black as if 4 pixel texture\n}\n\nvec3 LayaPreMultiplyAlpha(vec3 diffColor, float alpha, float oneMinusReflectivity, out float outModifiedAlpha)\n{\n	#ifdef ALPHAPREMULTIPLY\n		diffColor *= alpha;\n		outModifiedAlpha = 1.0 - oneMinusReflectivity + alpha * oneMinusReflectivity;\n	#else\n		outModifiedAlpha = alpha;\n	#endif\n	return diffColor;\n}\n\n"),sn.addInclude("PBRStandardLighting.glsl",'#include "PBRUtils.glsl"\n#include "BRDF.glsl"\n\nvec4 PBRStandardLight(in vec4 albedoColor, in float metallic, in float smoothness, in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in LayaGI gi)\n{\n	float oneMinusReflectivity;\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float alpha;\n	\n	diffuseColor = DiffuseAndSpecularFromMetallic (albedoColor.rgb, metallic, specularColor, oneMinusReflectivity);\n	\n	diffuseColor = LayaPreMultiplyAlpha(diffuseColor, albedoColor.a, oneMinusReflectivity, alpha);\n	\n	vec4 color = LayaAirBRDF(diffuseColor, specularColor, oneMinusReflectivity, smoothness, normal, viewDir, lightDir, lightColor, gi);\n	color.a = alpha;\n	return color;\n}\n\nvec4 PBRStandardDiectionLight (in vec4 albedoColor, in float metallic, in float smoothness, in vec3 normal, in vec3 viewDir, in DirectionLight light, in LayaGI gi)\n{\n	vec3 lightVec = normalize(light.Direction);\n	return PBRStandardLight(albedoColor, metallic, smoothness, normal, viewDir, lightVec, light.Color, gi);\n}\n\nvec4 PBRStandardPointLight (in vec4 albedoColor, in float metallic, in float smoothness, in vec3 normal, in vec3 viewDir, in PointLight light, in vec3 pos, in LayaGI gi)\n{\n	vec3 lightCoord = (u_PointLightMatrix * vec4(pos, 1.0)).xyz;\n	float distance = dot(lightCoord, lightCoord);\n	float attenuate = texture2D(u_RangeTexture, vec2(distance)).w;\n	vec3 lightVec = normalize(pos - light.Position);\n	return PBRStandardLight(albedoColor, metallic, smoothness, normal, viewDir, lightVec, light.Color, gi) * attenuate;\n}\n\nvec4 PBRStandardSpotLight (in vec4 albedoColor, in float metallic, in float smoothness, in vec3 normal, in vec3 viewDir, in SpotLight light, in vec3 pos, in LayaGI gi)\n{\n	vec3 lightVec =  pos - light.Position;\n	vec3 normalLightVec = normalize(lightVec);\n	vec2 cosAngles = cos(vec2(light.SpotAngle, light.SpotAngle*0.5) * 0.5);//ConeAttenuation\n	float dl = dot(normalize(light.Direction), normalLightVec);\n	dl *= smoothstep(cosAngles[0], cosAngles[1], dl);\n	float attenuate = LayaAttenuation(lightVec, 1.0/light.Range) * dl;\n	return PBRStandardLight(albedoColor, metallic, smoothness, normal, viewDir, lightVec, light.Color, gi) * attenuate;\n}\n\n//vec4 PBRStandardSpotLight1 (in vec4 albedoColor, in float metallic, in float smoothness, in vec3 normal, in vec3 viewDir, in SpotLight light, in vec3 pos, in LayaGI gi)\n//{\n//	vec4 lightCoord = u_SpotLightMatrix * vec4(pos, 1.0);\n//	\n//	float distance = dot(lightCoord, lightCoord);\n//	float attenuate = (lightCoord.z < 0.0) ? texture2D(u_RangeTexture, vec2(distance)).w : 0.0;\n//	//float attenuate = (lightCoord.z < 0.0) ? texture2D(u_AngleTexture, vec2(lightCoord.x / lightCoord.w + 0.5, lightCoord.y / lightCoord.w + 0.5)).r * texture2D(u_RangeTexture, vec2(distance)).w : 0.0;\n//	//vec2 _uv = vec2(pos.x * 180.0/(2.0 * pos.z) + 0.5, pos.y * 180.0/(2.0 * pos.z) + 0.5);\n//	vec3 lightVec = normalize(pos - light.Position);\n//	return PBRStandardLight(albedoColor, metallic, smoothness, normal, viewDir, lightVec, light.Color, gi) * attenuate;\n//}\n\nvec2 MetallicGloss(in float albedoTextureAlpha, in vec2 uv0)\n{\n	vec2 mg;\n	\n	#ifdef METALLICGLOSSTEXTURE\n		vec4 metallicGlossTextureColor = texture2D(u_MetallicGlossTexture, uv0);\n		#ifdef SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA\n			mg.r = metallicGlossTextureColor.r;\n			mg.g = albedoTextureAlpha;\n		#else\n		    mg = metallicGlossTextureColor.ra;\n		#endif\n		mg.g *= u_smoothnessScale;\n	#else\n		mg.r = u_metallic;\n		#ifdef SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA\n			mg.g = albedoTextureAlpha * u_smoothnessScale;\n		#else\n			mg.g = u_smoothness;\n		#endif\n	#endif\n	\n	return mg;\n}\n\n'),sn.addInclude("PBRSpecularLighting.glsl",'#include "PBRUtils.glsl"\n#include "BRDF.glsl"\n\nvec4 PBRSpecularLight(in vec4 albedoColor, in vec3 specularColor, in float smoothness, in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in LayaGI gi)\n{\n	float oneMinusReflectivity;\n	vec3 diffuseColor;\n	float alpha;\n	\n	diffuseColor = EnergyConservationBetweenDiffuseAndSpecular (albedoColor.rgb, specularColor, oneMinusReflectivity);\n	\n	diffuseColor = LayaPreMultiplyAlpha(diffuseColor, albedoColor.a, oneMinusReflectivity, alpha);\n	\n	vec4 color = LayaAirBRDF(diffuseColor, specularColor, oneMinusReflectivity, smoothness, normal, viewDir, lightDir, lightColor, gi);\n	color.a = alpha;\n	return color;\n}\n\nvec4 PBRSpecularDiectionLight (in vec4 albedoColor, in vec3 specularColor, in float smoothness, in vec3 normal, in vec3 viewDir, in DirectionLight light, in LayaGI gi)\n{\n	vec3 lightVec = normalize(light.Direction);\n	return PBRSpecularLight(albedoColor, specularColor, smoothness, normal, viewDir, lightVec, light.Color, gi);\n}\n\nvec4 PBRSpecularPointLight (in vec4 albedoColor, in vec3 specularColor, in float smoothness, in vec3 normal, in vec3 viewDir, in PointLight light, in vec3 pos, in LayaGI gi)\n{\n	vec3 lightCoord = (u_PointLightMatrix * vec4(pos, 1.0)).xyz;\n	float distance = dot(lightCoord, lightCoord);\n	float attenuate = texture2D(u_RangeTexture, vec2(distance)).w;\n	vec3 lightVec = normalize(pos - light.Position);\n	return PBRSpecularLight(albedoColor, specularColor, smoothness, normal, viewDir, lightVec, light.Color, gi) * attenuate;\n}\n\nvec4 PBRSpecularSpotLight (in vec4 albedoColor, in vec3 specularColor, in float smoothness, in vec3 normal, in vec3 viewDir, in SpotLight light, in vec3 pos, in LayaGI gi)\n{\n	vec3 lightVec =  pos - light.Position;\n	vec3 normalLightVec = normalize(lightVec);\n	vec2 cosAngles = cos(vec2(light.SpotAngle, light.SpotAngle*0.5) * 0.5);//ConeAttenuation\n	float dl = dot(normalize(light.Direction), normalLightVec);\n	dl *= smoothstep(cosAngles[0], cosAngles[1], dl);\n	float attenuate = LayaAttenuation(lightVec, 1.0/light.Range) * dl;\n	return PBRSpecularLight(albedoColor, specularColor, smoothness, normal, viewDir, lightVec, light.Color, gi) * attenuate;\n}\n\n//vec4 PBRStandardSpotLight1 (in vec4 albedoColor, in float metallic, in float smoothness, in vec3 normal, in vec3 viewDir, in SpotLight light, in vec3 pos, in LayaGI gi)\n//{\n//	vec4 lightCoord = u_SpotLightMatrix * vec4(pos, 1.0);\n//	\n//	float distance = dot(lightCoord, lightCoord);\n//	float attenuate = (lightCoord.z < 0.0) ? texture2D(u_RangeTexture, vec2(distance)).w : 0.0;\n//	//float attenuate = (lightCoord.z < 0.0) ? texture2D(u_AngleTexture, vec2(lightCoord.x / lightCoord.w + 0.5, lightCoord.y / lightCoord.w + 0.5)).r * texture2D(u_RangeTexture, vec2(distance)).w : 0.0;\n//	//vec2 _uv = vec2(pos.x * 180.0/(2.0 * pos.z) + 0.5, pos.y * 180.0/(2.0 * pos.z) + 0.5);\n//	vec3 lightVec = normalize(pos - light.Position);\n//	return PBRStandardLight(albedoColor, metallic, smoothness, normal, viewDir, lightVec, light.Color, gi) * attenuate;\n//}\n\nvec4 SpecularGloss(float albedoTextureAlpha, in vec2 uv0)\n{\n    vec4 sg;\n	\n	#ifdef SPECULARTEXTURE\n		vec4 specularTextureColor = texture2D(u_SpecularTexture, uv0);\n		#ifdef SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA\n			sg.rgb = specularTextureColor.rgb;\n			sg.a = albedoTextureAlpha;\n		#else\n			sg = specularTextureColor;\n		#endif\n		sg.a *= u_smoothnessScale;\n	#else\n		sg.rgb = u_SpecularColor.rgb;\n		#ifdef SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA\n			sg.a = albedoTextureAlpha * u_smoothnessScale;\n		#else\n			sg.a = u_smoothness;\n		#endif\n	#endif\n	\n    return sg;\n}\n\n');
var e,t,n={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:8,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},i={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AlphaTestValue:[0,1],u_DiffuseColor:[5,1],u_MaterialSpecular:[6,1],u_Shininess:[7,1],u_TilingOffset:[8,1],u_WorldMat:[yi.WORLDMATRIX,2],u_MvpMatrix:[yi.MVPMATRIX,2],u_LightmapScaleOffset:[Yi.LIGHTMAPSCALEOFFSET,2],u_LightMap:[Yi.LIGHTMAP,2],u_CameraPos:[0,3],u_ReflectTexture:[22,4],u_ReflectIntensity:[23,4],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Color":[4,4],"u_DirectionLight.Direction":[3,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Color":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Color":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};e="attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\n	attribute vec2 a_Texcoord0;\n	varying vec2 v_Texcoord0;\n#endif\n\n#if defined(LIGHTMAP)&&defined(UV1)\n	attribute vec2 a_Texcoord1;\n#endif\n\n#ifdef LIGHTMAP\n	uniform vec4 u_LightmapScaleOffset;\n	varying vec2 v_LightMapUV;\n#endif\n\n#ifdef COLOR\n	attribute vec4 a_Color;\n	varying vec4 v_Color;\n#endif\n\n#ifdef BONE\n	const int c_MaxBoneCount = 24;\n	attribute vec4 a_BoneIndices;\n	attribute vec4 a_BoneWeights;\n	uniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n	attribute vec3 a_Normal;\n	varying vec3 v_Normal; \n	uniform vec3 u_CameraPos;\n	varying vec3 v_ViewDir; \n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n	attribute vec4 a_Tangent0;\n	varying vec3 v_Tangent;\n	varying vec3 v_Binormal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n	uniform mat4 u_WorldMat;\n	varying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n	uniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n	#ifdef BONE\n		mat4 skinTransform = u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position=skinTransform*a_Position;\n		gl_Position = u_MvpMatrix * position;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n	#endif\n	 \n	//TODO没考虑UV动画呢\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		v_Texcoord0=a_Texcoord0;\n	#endif\n		v_posViewZ = gl_Position.z;\n}\n\nmat3 inverse(mat3 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n  float b01 = a22 * a11 - a12 * a21;\n  float b11 = -a22 * a10 + a12 * a20;\n  float b21 = a21 * a10 - a11 * a20;\n\n  float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n              b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n              b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nvoid main_normal()\n{\n	#ifdef BONE\n		mat4 skinTransform = u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position=skinTransform*a_Position;\n		gl_Position = u_MvpMatrix * position;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n	#endif\n\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n		mat3 worldInvMat;\n		#ifdef BONE\n			worldInvMat=inverse(mat3(u_WorldMat*skinTransform));\n		#else\n			worldInvMat=inverse(mat3(u_WorldMat));\n		#endif  \n		v_Normal=a_Normal*worldInvMat;\n		#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n			v_Tangent=a_Tangent0.xyz*worldInvMat;\n			v_Binormal=cross(v_Normal,v_Tangent)*a_Tangent0.w;\n		#endif\n	#endif\n\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n		#ifdef BONE\n			v_PositionWorld=(u_WorldMat*position).xyz;\n		#else\n			v_PositionWorld=(u_WorldMat*a_Position).xyz;\n		#endif\n	#endif\n	\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n		v_ViewDir=u_CameraPos-v_PositionWorld;\n	#endif\n\n	#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))\n		v_Texcoord0=a_Texcoord0;\n		#ifdef TILINGOFFSET\n			v_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy+vec2(u_TilingOffset.z,-u_TilingOffset.w);\n			v_Texcoord0.y+=1.0;\n		#endif\n	#endif\n\n	#ifdef LIGHTMAP\n		#ifdef SCALEOFFSETLIGHTINGMAPUV\n			#ifdef UV1\n				v_LightMapUV=vec2(a_Texcoord1.x,1.0-a_Texcoord1.y)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n			#else\n				v_LightMapUV=vec2(a_Texcoord0.x,1.0-a_Texcoord0.y)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n			#endif \n			v_LightMapUV.y=1.0-v_LightMapUV.y;\n		#else\n			#ifdef UV1\n				v_LightMapUV=a_Texcoord1;\n			#else\n				v_LightMapUV=a_Texcoord0;\n			#endif \n		#endif \n	#endif\n\n	#ifdef COLOR\n		v_Color=a_Color;\n	#endif\n\n	#ifdef RECEIVESHADOW\n		v_posViewZ = gl_Position.w;\n		#ifdef SHADOWMAP_PSSM1 \n			v_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n		#endif\n	#endif\n}\n\nvoid main()\n{\n	#ifdef CASTSHADOW\n		main_castShadow();\n	#else\n		main_normal();\n	#endif\n}",t='#ifdef HIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\n#include "Lighting.glsl";\n\nuniform vec4 u_DiffuseColor;\n\n#ifdef COLOR\n	varying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	varying vec3 v_ViewDir; \n#endif\n\n#ifdef ALPHATEST\n	uniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\n	uniform sampler2D u_DiffuseTexture;\n#endif\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))\n	varying vec2 v_Texcoord0;\n#endif\n\n#ifdef LIGHTMAP\n	varying vec2 v_LightMapUV;\n	uniform sampler2D u_LightMap;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	uniform vec3 u_MaterialSpecular;\n	uniform float u_Shininess;\n	#ifdef SPECULARMAP \n		uniform sampler2D u_SpecularTexture;\n	#endif\n#endif\n\n#ifdef FOG\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	uniform vec3 u_FogColor;\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	varying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n	uniform sampler2D u_NormalTexture;\n	varying vec3 v_Tangent;\n	varying vec3 v_Binormal;\n#endif\n\n#ifdef DIRECTIONLIGHT\n	uniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\n	uniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\n	uniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(RECEIVESHADOW)\n	varying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n	#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n		uniform mat4 u_lightShadowVP[4];\n	#endif\n	#ifdef SHADOWMAP_PSSM1 \n		varying vec4 v_lightMVPPos;\n	#endif\n#endif\n\nvoid main_castShadow()\n{\n	//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n	gl_FragColor=packDepth(v_posViewZ);\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		float alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n		if( alpha < u_AlphaTestValue )\n		{\n			discard;\n		}\n	#endif\n}\nvoid main_normal()\n{\n	vec3 globalDiffuse=u_AmbientColor;\n	#ifdef LIGHTMAP	\n		globalDiffuse += DecodeLightmap(texture2D(u_LightMap, v_LightMapUV));\n	#endif\n	\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		vec3 normal;\n		#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n			vec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n			normal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent,v_Binormal));\n		#else\n			normal = normalize(v_Normal);\n		#endif\n		vec3 viewDir= normalize(v_ViewDir);\n	#endif\n	\n	vec4 mainColor=u_DiffuseColor;\n	#ifdef DIFFUSEMAP\n		vec4 difTexColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n		mainColor=mainColor*difTexColor;\n	#endif \n	#ifdef COLOR\n		mainColor=mainColor*v_Color;\n	#endif \n    \n	#ifdef ALPHATEST\n		if(mainColor.a<u_AlphaTestValue)\n			discard;\n	#endif\n  \n	\n	vec3 diffuse = vec3(0.0);\n	vec3 specular= vec3(0.0);\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		vec3 dif,spe;\n		#ifdef SPECULARMAP\n			vec3 gloss=texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n		#else\n			#ifdef DIFFUSEMAP\n				vec3 gloss=vec3(difTexColor.a);\n			#else\n				vec3 gloss=vec3(1.0);\n			#endif\n		#endif\n	#endif\n\n	\n	#ifdef DIRECTIONLIGHT\n		LayaAirBlinnPhongDiectionLight(u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_DirectionLight,dif,spe);\n		diffuse+=dif;\n		specular+=spe;\n	#endif\n \n	#ifdef POINTLIGHT\n		LayaAirBlinnPhongPointLight(v_PositionWorld,u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_PointLight,dif,spe);\n		diffuse+=dif;\n		specular+=spe;\n	#endif\n\n	#ifdef SPOTLIGHT\n		LayaAirBlinnPhongSpotLight(v_PositionWorld,u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_SpotLight,dif,spe);\n		diffuse+=dif;\n		specular+=spe;\n	#endif\n\n	#ifdef RECEIVESHADOW\n		float shadowValue = 1.0;\n		#ifdef SHADOWMAP_PSSM3\n			shadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n		#endif\n		#ifdef SHADOWMAP_PSSM2\n			shadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n		#endif \n		#ifdef SHADOWMAP_PSSM1\n			shadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n		#endif\n		gl_FragColor =vec4(mainColor.rgb*(globalDiffuse + diffuse * shadowValue * 1.1),mainColor.a);\n	#else\n		gl_FragColor =vec4(mainColor.rgb*(globalDiffuse + diffuse),mainColor.a);\n	#endif\n\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		#ifdef RECEIVESHADOW\n			gl_FragColor.rgb+=specular*shadowValue;\n		#else\n			gl_FragColor.rgb+=specular;\n		#endif\n	#endif\n	  \n	#ifdef FOG\n		float lerpFact=clamp((1.0/gl_FragCoord.w-u_FogStart)/u_FogRange,0.0,1.0);\n		gl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n	#endif\n}\n\nvoid main()\n{\n	#ifdef CASTSHADOW		\n		main_castShadow();\n	#else\n		main_normal();\n	#endif  \n}\n\n';var r=sn.add("BLINNPHONG",n,i,Sr.shaderDefines,Zi.shaderDefines);r._addShaderPass(e,t),n={a_Position:0,a_Color:1},i={u_MvpMatrix:[yi.MVPMATRIX,2],u_Color:[0,1]},e="attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n\n\nvoid main()\n{\n  gl_Position = u_MvpMatrix * a_Position;\n  v_Color=a_Color;\n}",t="#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nvarying vec4 v_Color;\nuniform vec4 u_Color;\n\nvoid main()\n{\n  gl_FragColor = v_Color * u_Color; \n}\n\n",r=sn.add("LineShader",n,i),r._addShaderPass(e,t),n={a_position:0,a_normal:3,tangent:5,binormal:4,uv:2,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},i={u_Bones:[0,0],u_lodRect:[9,3],irrad_mat_red:[10,3],irrad_mat_green:[11,3],irrad_mat_blue:[12,3],u_hdrexposure:[13,3],u_aoObjPos:[14,1],texBaseColor:[1,1],texNormal:[2,1],texPbrInfo:[3,1],texPrefilterdEnv:[8,3],texHSNoise:[15,1],texPrefilterDiff:[7,3],u_AlphaTestValue:[0,1],texBRDFLUT:[4,1],u_UVAniAge:[5,1],u_roughness:[6,1],u_metaless:[7,1],u_UVMatrix:[8,1],u_UVAge:[9,1],modelMatrix:[yi.WORLDMATRIX,2],mvp:[yi.MVPMATRIX,2],cameraPosition:[0,3],u_View:[1,3],u_Project:[2,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Diffuse":[14,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]},e="\nuniform mat4 modelMatrix;\n//uniform mat4 modelViewMatrix;\n//uniform mat4 projectionMatrix;\nuniform mat4 u_View;\nuniform mat4 u_Project;\nuniform mat4 mvp;\n//uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n\nattribute vec3 a_position;\nattribute vec3 a_normal;\n#ifdef HAS_TANGENT\nattribute vec3 tangent;\nattribute vec3 binormal;\n#endif\nattribute vec2 uv;\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\nvarying vec2 vUv;\nvarying vec3 vWorldNorm;\nvarying vec4 vViewPos;\nvarying vec4 vWorldPos;\nvarying vec3 vLightDir;\nvarying vec3 vViewDir;\n#ifdef HAS_TANGENT\nvarying vec3 vWorldTangent;\nvarying vec3 vWorldBinormal;\n#endif\n\n#ifdef RECEIVESHADOW\nvarying float v_posViewZ;\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\nvoid main() {\n#ifdef BONE\n	mat4 skinTransform=mat4(0.0);\n	skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n	skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n	skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n	skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n	gl_Position = mvp*skinTransform*vec4(a_position,1.);\n	mat4 modelMat = modelMatrix*skinTransform;\n#else\n	gl_Position = mvp*vec4(a_position,1.);\n	mat4 modelMat = modelMatrix;\n#endif	\n	vWorldPos = modelMat*vec4(a_position,1.);\n\n#ifdef CASTSHADOW \n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		vUv = uv;\n	#endif	\n#else\n    vUv = uv;\n	vWorldNorm = normalize((modelMat*vec4(a_normal,0.0)).xyz);\n	#ifdef HAS_TANGENT\n	vWorldTangent = normalize((modelMat*vec4(tangent,0.0)).xyz);\n	vWorldBinormal = normalize((modelMat*vec4(binormal,0.0)).xyz);\n	#endif\n    \n    vViewDir = (vWorldPos.xyz-cameraPosition);//这个不能normalize。否则无法线性差值了\n#ifdef RECEIVESHADOW\n	v_posViewZ = gl_Position.z;\n	#ifdef SHADOWMAP_PSSM1 \n		v_lightMVPPos = u_lightShadowVP[0] * vWorldPos;\n	#endif\n#endif	\n#endif\n}\n",t='//#version 300 es\n\nprecision highp float;\nprecision lowp int;\n\nconst float PI = 3.14159265358979323846264;\nconst float _2PI = 6.2831853071796;\nvarying vec2 vUv;\nvarying vec3 vWorldNorm;\n#ifdef HAS_TANGENT\nvarying vec3 vWorldTangent;\nvarying vec3 vWorldBinormal;\n#endif\nvarying vec3 vViewDir;\nvarying vec4 vViewPos;\nvarying vec4 vWorldPos;\n//\nuniform sampler2D texBaseColor;\nuniform sampler2D texNormal;\n//预计算的贴图\nuniform sampler2D texPrefilterdEnv;\nuniform sampler2D texBRDFLUT;\nuniform sampler2D texPrefilterDiff;\n#ifdef HAS_PBRINFO\nuniform sampler2D texPbrInfo;   //Ao, Roughness, Metallic\n#endif\nuniform float u_hdrexposure;\nuniform float u_AlphaTestValue;\n\nuniform float u_roughness;\nuniform float u_metaless;\nconst float maxlv = 7.;	//现在只支持512分辨率的环境贴图\nconst int nmaxlv = 9;//\n							\nuniform mat4 irrad_mat_red;\nuniform mat4 irrad_mat_green;\nuniform mat4 irrad_mat_blue;							\n\nvec3 speccontrib = vec3(0.);\n\nconst float _maxu8 = 255.0;\nconst float _maxu16 = 65535.0;\nconst float _shift8 = 256.0;    //平移的话是*256而不是255\nvec2 _RGBAToU16(const in vec4 rgba){\n    return vec2((rgba.r*_maxu8+rgba.g*_maxu8*_shift8)/_maxu16, (rgba.b*_maxu8+rgba.a*_maxu8*_shift8)/_maxu16);\n}\nvec3 _RGBEToRGB( const in vec4 rgba ){\n    float f = pow(2.0, rgba.w * 255.0 - (128.0 + 8.0));\n    return rgba.rgb * (255.0 * f);\n}\n\nfloat saturate(float v){\n    return min(max(v,0.),1.);\n}\n\nvec4 tex2dLod(sampler2D tex, float u, float v, float lod){\n	vec2 uv = vec2(u,v);\n	uv+=mod(gl_FragCoord.xy-vec2(0.5),2.0)*vec2(128.,0.);\n	return texture2D(tex,uv,lod-16.);\n}\n\n/*\n* 对一个全景图进行采样。假设x轴指向中心。\n*/\nvec4 texPanorama(sampler2D tex, const in vec3 dir){\n	float envu = atan(dir.z,dir.x)/_2PI+0.5; 	\n	float envv = acos(dir.y)/PI;//(1.0-dir.y)/2.0;\n	return texture2D(tex,vec2(envu,envv));\n}\n\nvec4 texPanoramaLod(sampler2D tex, const in vec3 dir, float lod){\n	float envu = atan(dir.z,dir.x)/_2PI+0.5; 	\n	float envv = acos(dir.y)/PI;//(1.0-dir.y)/2.0;\n	return tex2dLod(tex,envu,envv,lod);\n}\n\n/*\n    计算sh光照。\n    使用level=2，所以需要9个系数。\n    https://cseweb.ucsd.edu/~ravir/papers/envmap/envmap.pdf\n*/\nfloat environment_exposure = 1.0;\nvec3 diff_sh9(vec3 dir){\n	vec4 shDir = vec4(dir.x,-dir.z,dir.y,1.0);\n  return max(vec3(0.0), vec3(\n	dot(shDir, irrad_mat_red * shDir),\n	dot(shDir, irrad_mat_green * shDir),\n	dot(shDir, irrad_mat_blue * shDir)\n	)) * environment_exposure;	\n}\n\n#ifdef HAS_TANGENT\nvec3 applyNormalTex( vec3 norm, vec3 surf_norm ) {\n    vec3 mapN = norm * 2.0 - 1.0;\n    //mapN.xy = normalScale * mapN.xy;\n    mat3 tsn = mat3( vWorldTangent, vWorldBinormal, surf_norm );\n    return normalize( tsn * mapN );\n}\n#endif\n\nvec4 pbrlight(vec3 normal, float rough, float NoV, vec3 R){\n    vec4 basecolor = texture2D(texBaseColor,vUv);\n	basecolor.rgb = pow(basecolor.rgb,vec3(2.2));\n	float metaless = 1.0; 	\n	const float ismetalinfov = (128./255.);\n	if(basecolor.a>=ismetalinfov){//这时候表示金属度\n		metaless = (basecolor.a-ismetalinfov)*2.;\n		basecolor.a = 1.0;\n	}else{\n		metaless = 0.;\n		basecolor.a = basecolor.a*2.0;\n	}\n	#ifdef FIX_METALESS\n	metaless = u_metaless;\n	#endif\n	#ifdef HAS_PBRINFO	\n	vec4 pbrinfo = texture2D(texPbrInfo, vUv);\n	metaless = pbrinfo.b;\n	rough = pbrinfo.g;\n	#endif\n    const vec3 nonmetalF0 =vec3(0.02);\n    vec3 F0 =  mix(nonmetalF0, basecolor.rgb, metaless);\n	\n    vec4 PrefilteredColor = texPanoramaLod(texPrefilterdEnv, R, rough*maxlv);\n    PrefilteredColor.rgb = _RGBEToRGB(PrefilteredColor);\n    vec4 EnvBRDF = texture2D(texBRDFLUT,vec2(rough , NoV));//TODO lod\n    vec2 rg = _RGBAToU16(EnvBRDF);    \n    speccontrib = (F0* rg.x + saturate( 50.0 * PrefilteredColor.g ) * rg.y);\n	vec3 color_spec = PrefilteredColor.rgb*speccontrib;\n	\n	vec3 color_diff=diff_sh9(normal);\n	vec3 outc =  color_diff*mix(basecolor.rgb,vec3(0.),metaless)*(vec3(1.0)-speccontrib)+color_spec;\n	#ifdef HAS_PBRINFO\n	outc*=pbrinfo.r;\n	#endif\n	return vec4(outc, basecolor.a);\n}\n\nvec3 oldlight(vec4 normal, float NoV, vec3 R){\n    vec4 basecolor = texture2D(texBaseColor,vUv);\n	const vec3 lightdir=normalize(vec3(1.,1.,0.));\n	const vec3 spcecol = vec3(1.,0.8,0.8);\n	const vec3 amb = vec3(0.5);\n	vec3 diffv =  (vec3(saturate(dot(lightdir,normal.xyz)))+amb);\n	//vec3 spec = spcecol* pow(saturate(dot(R,lightdir)),(1.-pbrinfo.g)*5.);\n	return diffv*basecolor.rgb;//+spec;\n}\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\nvarying float v_posViewZ;\n	#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n	uniform mat4 u_lightShadowVP[4];\n	#endif\n	#ifdef SHADOWMAP_PSSM1 \n	varying vec4 v_lightMVPPos;\n	#endif\n#endif\n\nvoid main() {\n#ifdef CASTSHADOW\n	gl_FragColor=packDepth(gl_FragCoord.w);\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		float alpha = texture2D(texBaseColor,vUv).w;\n		if( alpha < u_AlphaTestValue ){\n			discard;\n		}\n	#endif\n#else\n\n	#ifdef RECEIVESHADOW\n		float shadowValue = 1.0;\n		#ifdef SHADOWMAP_PSSM3\n			shadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,vWorldPos.xyz,v_posViewZ,0.0001);\n		#endif\n		#ifdef SHADOWMAP_PSSM2\n			shadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,vWorldPos.xyz,v_posViewZ,0.0001);\n		#endif \n		#ifdef SHADOWMAP_PSSM1\n			shadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.0001);\n		#endif\n	#endif	\n	\n    vec3 normal =  normalize(vWorldNorm);\n	vec4 normtex = texture2D( texNormal, vUv );\n	#ifdef HAS_TANGENT	\n	normal = applyNormalTex(normtex.xyz, normal);\n	#endif\n    vec3 view   = -normalize(vViewDir);\n    float NoV = saturate(dot( view, normal ));\n    vec3 R = 2. * NoV * normal - view;\n	float roughness = normtex.a;\n	#ifdef FIX_ROUGHNESS\n	roughness = u_roughness;\n	#endif\n	\n	vec4 pbrl = pbrlight(normal,roughness,NoV,R)*u_hdrexposure;\n    gl_FragColor.rgb =  pow(pbrl.rgb,vec3(0.45455));\n	//gl_FragColor.rgb = oldlight(normtex,NoV,R);\n	#ifdef RECEIVESHADOW\n	gl_FragColor.rgb *= max(shadowValue,0.7);\n	#endif\n	\n    gl_FragColor.a = pbrl.a;\n\n#endif\n}\n',r=sn.add("PBR",n,i,Sr.shaderDefines,qi.shaderDefines),r._addShaderPass(e,t),n={a_Position:0,a_Normal:3,a_Tangent0:5,a_Texcoord0:2,a_BoneWeights:7,a_BoneIndices:6},i={u_Bones:[0,0],u_MvpMatrix:[yi.MVPMATRIX,2],u_WorldMat:[yi.WORLDMATRIX,2],u_CameraPos:[0,3],u_AlphaTestValue:[0,1],u_AlbedoColor:[7,1],u_EmissionColor:[8,1],u_AlbedoTexture:[1,1],u_NormalTexture:[3,1],u_ParallaxTexture:[4,1],u_MetallicGlossTexture:[2,1],u_OcclusionTexture:[5,1],u_EmissionTexture:[6,1],u_metallic:[9,1],u_smoothness:[10,1],u_smoothnessScale:[11,1],u_occlusionStrength:[13,1],u_normalScale:[14,1],u_parallaxScale:[15,1],u_TilingOffset:[18,1],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Color":[4,4],u_PointLightMatrix:[27,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Color":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.SpotAngle":[11,4],"u_SpotLight.Color":[14,4],u_RangeTexture:[26,4],u_ReflectTexture:[22,4],u_ReflectIntensity:[23,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4]},e="attribute vec4 a_Position;\nattribute vec3 a_Normal;\nattribute vec4 a_Tangent0;\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\nuniform mat4 u_WorldMat;\nuniform vec3 u_CameraPos;\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\nvarying vec3 v_PositionWorld;\n\n#ifdef TILINGOFFSET\n	uniform vec4 u_TilingOffset;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n	  varying vec4 v_lightMVPPos;\n	  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef BONE\n	const int c_MaxBoneCount = 24;\n	attribute vec4 a_BoneIndices;\n	attribute vec4 a_BoneWeights;\n	uniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\nvoid main_castShadow()\n{\n	#ifdef BONE\n		mat4 skinTransform=mat4(0.0);\n		skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position = skinTransform * a_Position;\n		gl_Position = u_MvpMatrix * position;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n	#endif\n	 \n	//TODO没考虑UV动画呢\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		v_Texcoord0 = a_Texcoord0;\n	#endif\n		v_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n	mat3 worldMat;\n	#ifdef BONE\n		mat4 skinTransform = mat4(0.0);\n		skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position = skinTransform * a_Position;\n		gl_Position = u_MvpMatrix * position;\n		worldMat=mat3(u_WorldMat*skinTransform);\n		v_PositionWorld = (u_WorldMat * position).xyz;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n		worldMat = mat3(u_WorldMat);\n		v_PositionWorld = (u_WorldMat * a_Position).xyz;\n	#endif\n	\n	v_Normal = worldMat * a_Normal;\n	v_Tangent = worldMat * a_Tangent0.xyz;\n	v_Binormal = cross(v_Normal, v_Tangent) * a_Tangent0.w;\n  \n	v_Texcoord0 = a_Texcoord0;\n	#ifdef TILINGOFFSET\n		v_Texcoord0 = vec2(v_Texcoord0.x, v_Texcoord0.y-1.0) * u_TilingOffset.xy + vec2(u_TilingOffset.z, -u_TilingOffset.w);\n		v_Texcoord0.y+= 1.0;\n	#endif\n  \n	v_ViewDir = u_CameraPos - v_PositionWorld;\n  \n	#ifdef RECEIVESHADOW\n		v_posViewZ = gl_Position.w;\n		#ifdef SHADOWMAP_PSSM1 \n			v_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n		#endif\n	#endif\n}\n\nvoid main()\n{\n	#ifdef CASTSHADOW\n		main_castShadow();\n	#else\n		main_normal();\n	#endif\n}",t='#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\nvarying vec3 v_PositionWorld;\n\nuniform vec4 u_AmbientColor;\nuniform vec4 u_AlbedoColor;\n\n#ifdef ALBEDOTEXTURE\n	uniform sampler2D u_AlbedoTexture;\n#endif\n#ifdef METALLICGLOSSTEXTURE\n	uniform sampler2D u_MetallicGlossTexture;\n#endif\n#ifdef NORMALTEXTURE\n	uniform sampler2D u_NormalTexture;\n	uniform float u_normalScale;\n#endif\n#ifdef PARALLAXTEXTURE\n	uniform sampler2D u_ParallaxTexture;\n	uniform float u_parallaxScale;\n#endif\n#ifdef OCCLUSIONTEXTURE\n	uniform sampler2D u_OcclusionTexture;\n	uniform float u_occlusionStrength;\n#endif\n#ifdef EMISSION\n	#ifdef EMISSIONTEXTURE\n		uniform sampler2D u_EmissionTexture;\n	#endif\n	uniform vec4 u_EmissionColor;\n#endif\n#ifdef REFLECTMAP\n	uniform samplerCube u_ReflectTexture;\n	uniform float u_ReflectIntensity;\n#endif\n\nuniform float u_AlphaTestValue;\nuniform float u_metallic;\nuniform float u_smoothness;\nuniform float u_smoothnessScale;\n\nuniform sampler2D u_RangeTexture;\n//uniform sampler2D u_AngleTexture;\nuniform mat4 u_PointLightMatrix;\n//uniform mat4 u_SpotLightMatrix;\n\n#include "PBRStandardLighting.glsl"\n#include "ShadowHelper.glsl"\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n	#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n		uniform mat4 u_lightShadowVP[4];\n	#endif\n	#ifdef SHADOWMAP_PSSM1 \n		varying vec4 v_lightMVPPos;\n	#endif\n#endif\n\n#ifdef DIRECTIONLIGHT\n	uniform DirectionLight u_DirectionLight;\n#endif\n#ifdef POINTLIGHT\n	uniform PointLight u_PointLight;\n#endif\n#ifdef SPOTLIGHT\n	uniform SpotLight u_SpotLight;\n#endif\n\n#ifdef FOG\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	uniform vec3 u_FogColor;\n#endif\n\nvoid main_castShadow()\n{\n	gl_FragColor=packDepth(v_posViewZ);\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		float alpha = texture2D(u_AlbedoTexture,v_Texcoord0).w;\n		if( alpha < u_AlphaTestValue )\n		{\n			discard;\n		}\n	#endif\n}\n\nvoid main_normal()\n{	\n	vec3 viewDir = normalize(v_ViewDir);\n	\n	vec2 uv0 = ParallaxOffset(viewDir);\n	\n	vec2 mg;\n	vec4 albedoColor;\n	#ifdef ALBEDOTEXTURE\n		vec4 abledoTextureColor = texture2D(u_AlbedoTexture, uv0);\n		albedoColor = abledoTextureColor * u_AlbedoColor;\n		mg = MetallicGloss(abledoTextureColor.a, uv0);\n	#else\n		albedoColor = u_AlbedoColor;\n		mg = MetallicGloss(1.0, uv0);\n	#endif\n	\n	#ifdef ALPHATEST\n		if(albedoColor.a < u_AlphaTestValue)\n			discard;\n	#endif\n	\n	vec3 normal = UnpackScaleNormal(uv0);\n  \n	LayaGI gi;\n	gi.diffuse = (u_AmbientColor * Occlusion(uv0)).rgb;\n	gi.specular = ReflectCubeMap(viewDir, normal);\n  \n	vec4 color = vec4(0.0);\n	\n	#ifdef DIRECTIONLIGHT\n		color += PBRStandardDiectionLight(albedoColor, mg.r, mg.g, normal, viewDir, u_DirectionLight, gi);\n	#endif\n \n	#ifdef POINTLIGHT\n		color.a = 0.0;\n		color += PBRStandardPointLight(albedoColor, mg.r, mg.g, normal, viewDir, u_PointLight, v_PositionWorld, gi);\n	#endif\n	\n	#ifdef SPOTLIGHT\n		color.a = 0.0;\n		color += PBRStandardSpotLight(albedoColor, mg.r, mg.g, normal, viewDir, u_SpotLight, v_PositionWorld, gi);\n	#endif\n	\n	#ifdef EMISSION\n		vec4 emissionColor = u_EmissionColor;\n		#ifdef EMISSIONTEXTURE\n			emissionColor *=  texture2D(u_EmissionTexture, uv0);\n		#endif\n		color.rgb += emissionColor.rgb;\n	#endif\n	\n	#ifdef RECEIVESHADOW\n		float shadowValue = 1.0;\n		#ifdef SHADOWMAP_PSSM3\n			shadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n		#endif\n		#ifdef SHADOWMAP_PSSM2\n			shadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n		#endif \n		#ifdef SHADOWMAP_PSSM1\n			shadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n		#endif\n		gl_FragColor = vec4(color.rgb * shadowValue, color.a);\n	#else\n		gl_FragColor = color;\n	#endif\n	\n	#ifdef FOG\n		float lerpFact = clamp((1.0 / gl_FragCoord.w - u_FogStart) / u_FogRange, 0.0, 1.0);\n		gl_FragColor.rgb = mix(gl_FragColor.rgb, u_FogColor, lerpFact);\n	#endif\n}\n\nvoid main()\n{\n	#ifdef CASTSHADOW		\n		main_castShadow();\n	#else\n		main_normal();\n	#endif  \n}',r=sn.add("PBRStandard",n,i,Sr.shaderDefines,$i.shaderDefines),r._addShaderPass(e,t),n={a_Position:0,a_Normal:3,a_Tangent0:5,a_Texcoord0:2,a_BoneWeights:7,a_BoneIndices:6},i={u_Bones:[0,0],u_MvpMatrix:[yi.MVPMATRIX,2],u_WorldMat:[yi.WORLDMATRIX,2],u_CameraPos:[0,3],u_AlphaTestValue:[0,1],u_AlbedoColor:[7,1],u_SpecularColor:[8,1],u_EmissionColor:[9,1],u_AlbedoTexture:[1,1],u_NormalTexture:[3,1],u_ParallaxTexture:[4,1],u_SpecularTexture:[2,1],u_OcclusionTexture:[5,1],u_EmissionTexture:[6,1],u_smoothness:[10,1],u_smoothnessScale:[11,1],u_occlusionStrength:[13,1],u_normalScale:[14,1],u_parallaxScale:[15,1],u_TilingOffset:[18,1],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Color":[4,4],u_PointLightMatrix:[27,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Color":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.SpotAngle":[11,4],"u_SpotLight.Color":[14,4],u_RangeTexture:[26,4],u_ReflectTexture:[22,4],u_ReflectIntensity:[23,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4]},e="attribute vec4 a_Position;\nattribute vec3 a_Normal;\nattribute vec4 a_Tangent0;\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\nuniform mat4 u_WorldMat;\nuniform vec3 u_CameraPos;\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\nvarying vec3 v_PositionWorld;\n\n#ifdef TILINGOFFSET\n	uniform vec4 u_TilingOffset;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n	  varying vec4 v_lightMVPPos;\n	  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef BONE\n	const int c_MaxBoneCount = 24;\n	attribute vec4 a_BoneIndices;\n	attribute vec4 a_BoneWeights;\n	uniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\nvoid main_castShadow()\n{\n	#ifdef BONE\n		mat4 skinTransform=mat4(0.0);\n		skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position = skinTransform * a_Position;\n		gl_Position = u_MvpMatrix * position;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n	#endif\n	 \n	//TODO没考虑UV动画呢\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		v_Texcoord0 = a_Texcoord0;\n	#endif\n		v_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n	mat3 worldMat;\n	#ifdef BONE\n		mat4 skinTransform = mat4(0.0);\n		skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position = skinTransform * a_Position;\n		gl_Position = u_MvpMatrix * position;\n		worldMat=mat3(u_WorldMat*skinTransform);\n		v_PositionWorld = (u_WorldMat * position).xyz;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n		worldMat = mat3(u_WorldMat);\n		v_PositionWorld = (u_WorldMat * a_Position).xyz;\n	#endif\n	\n	v_Normal = worldMat * a_Normal;\n	v_Tangent = worldMat * a_Tangent0.xyz;\n	v_Binormal = cross(v_Normal, v_Tangent) * a_Tangent0.w;\n  \n	v_Texcoord0 = a_Texcoord0;\n	#ifdef TILINGOFFSET\n		v_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n	#endif\n		v_Texcoord0=vec2(v_Texcoord0.x,1.0 + v_Texcoord0.y);\n  \n	v_ViewDir = u_CameraPos - v_PositionWorld;\n  \n	#ifdef RECEIVESHADOW\n		v_posViewZ = gl_Position.w;\n		#ifdef SHADOWMAP_PSSM1 \n			v_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n		#endif\n	#endif\n}\n\nvoid main()\n{\n	#ifdef CASTSHADOW\n		main_castShadow();\n	#else\n		main_normal();\n	#endif\n}",t='#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\nvarying vec3 v_PositionWorld;\n\nuniform vec4 u_AmbientColor;\nuniform vec4 u_AlbedoColor;\nuniform vec4 u_SpecularColor;\n\n#ifdef ALBEDOTEXTURE\n	uniform sampler2D u_AlbedoTexture;\n#endif\n#ifdef SPECULARTEXTURE\n	uniform sampler2D u_SpecularTexture;\n#endif\n#ifdef NORMALTEXTURE\n	uniform sampler2D u_NormalTexture;\n	uniform float u_normalScale;\n#endif\n#ifdef PARALLAXTEXTURE\n	uniform sampler2D u_ParallaxTexture;\n	uniform float u_parallaxScale;\n#endif\n#ifdef OCCLUSIONTEXTURE\n	uniform sampler2D u_OcclusionTexture;\n	uniform float u_occlusionStrength;\n#endif\n#ifdef EMISSION\n	#ifdef EMISSIONTEXTURE\n		uniform sampler2D u_EmissionTexture;\n	#endif\n	uniform vec4 u_EmissionColor;\n#endif\n#ifdef REFLECTMAP\n	uniform samplerCube u_ReflectTexture;\n	uniform float u_ReflectIntensity;\n#endif\n\nuniform float u_AlphaTestValue;\nuniform float u_metallic;\nuniform float u_smoothness;\nuniform float u_smoothnessScale;\n\nuniform sampler2D u_RangeTexture;\n//uniform sampler2D u_AngleTexture;\nuniform mat4 u_PointLightMatrix;\n//uniform mat4 u_SpotLightMatrix;\n\n#include "PBRSpecularLighting.glsl"\n#include "ShadowHelper.glsl"\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n	#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n		uniform mat4 u_lightShadowVP[4];\n	#endif\n	#ifdef SHADOWMAP_PSSM1 \n		varying vec4 v_lightMVPPos;\n	#endif\n#endif\n\n#ifdef DIRECTIONLIGHT\n	uniform DirectionLight u_DirectionLight;\n#endif\n#ifdef POINTLIGHT\n	uniform PointLight u_PointLight;\n#endif\n#ifdef SPOTLIGHT\n	uniform SpotLight u_SpotLight;\n#endif\n\n#ifdef FOG\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	uniform vec3 u_FogColor;\n#endif\n\nvoid main_castShadow()\n{\n	gl_FragColor=packDepth(v_posViewZ);\n	#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n		float alpha = texture2D(u_AlbedoTexture,v_Texcoord0).w;\n		if( alpha < u_AlphaTestValue )\n		{\n			discard;\n		}\n	#endif\n}\n\nvoid main_normal()\n{	\n	vec3 viewDir = normalize(v_ViewDir);\n	\n	vec2 uv0 = ParallaxOffset(viewDir);\n	\n	vec4 sg;\n	vec4 albedoColor;\n	#ifdef ALBEDOTEXTURE\n		vec4 albedoTextureColor = texture2D(u_AlbedoTexture, uv0);\n		albedoColor = albedoTextureColor * u_AlbedoColor;\n		sg = SpecularGloss(albedoTextureColor.a, uv0);\n	#else\n		albedoColor = u_AlbedoColor;\n		sg = SpecularGloss(1.0, uv0);\n	#endif\n	\n	#ifdef ALPHATEST\n		if(albedoColor.a < u_AlphaTestValue)\n			discard;\n	#endif\n  \n	vec3 normal = UnpackScaleNormal(uv0);\n	\n	LayaGI gi;\n	gi.diffuse = (u_AmbientColor * Occlusion(uv0)).rgb;\n	gi.specular = ReflectCubeMap(viewDir, normal);\n	\n	//float a = (sg.r+sg.g+sg.b) / 3.0;\n  \n	vec4 color = vec4(0.0);\n	\n	#ifdef DIRECTIONLIGHT\n		color += PBRSpecularDiectionLight(albedoColor, sg.rgb, sg.a, normal, viewDir, u_DirectionLight, gi);\n	#endif\n \n	#ifdef POINTLIGHT\n		color.a = 0.0;\n		color += PBRSpecularPointLight(albedoColor, sg.rgb, sg.a, normal, viewDir, u_PointLight, v_PositionWorld, gi);\n	#endif\n	\n	#ifdef SPOTLIGHT\n		color.a = 0.0;\n		color += PBRSpecularSpotLight(albedoColor, sg.rgb, sg.a, normal, viewDir, u_SpotLight, v_PositionWorld, gi);\n	#endif\n	\n	#ifdef EMISSION\n		vec4 emissionColor = u_EmissionColor;\n		#ifdef EMISSIONTEXTURE\n			emissionColor *=  texture2D(u_EmissionTexture, uv0);\n		#endif\n		color.rgb += emissionColor.rgb;\n	#endif\n	\n	#ifdef RECEIVESHADOW\n		float shadowValue = 1.0;\n		#ifdef SHADOWMAP_PSSM3\n			shadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n		#endif\n		#ifdef SHADOWMAP_PSSM2\n			shadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n		#endif \n		#ifdef SHADOWMAP_PSSM1\n			shadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n		#endif\n		gl_FragColor = vec4(color.rgb * shadowValue, color.a);\n	#else\n		gl_FragColor = color;\n	#endif\n	\n	#ifdef FOG\n		float lerpFact = clamp((1.0 / gl_FragCoord.w - u_FogStart) / u_FogRange, 0.0, 1.0);\n		gl_FragColor.rgb = mix(gl_FragColor.rgb, u_FogColor, lerpFact);\n	#endif\n}\n\nvoid main()\n{\n	#ifdef CASTSHADOW		\n		main_castShadow();\n	#else\n		main_normal();\n	#endif  \n}\n\n',r=sn.add("PBRSpecular",n,i,Sr.shaderDefines,Qi.shaderDefines),r._addShaderPass(e,t),n={a_Position:0,a_Texcoord0:2,a_BoneWeights:7,a_BoneIndices:6},i={u_Bones:[0,0],u_AlbedoTexture:[1,1],u_AlbedoColor:[2,1],u_TilingOffset:[3,1],u_AlphaTestValue:[0,1],u_MvpMatrix:[yi.MVPMATRIX,2],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4]},e="attribute vec4 a_Position;\nattribute vec4 a_Color;\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\n\nvarying vec4 v_Color;\nvarying vec2 v_Texcoord0;\n\n#ifdef TILINGOFFSET\n	uniform vec4 u_TilingOffset;\n#endif\n\n#ifdef BONE\n	const int c_MaxBoneCount = 24;\n	attribute vec4 a_BoneIndices;\n	attribute vec4 a_BoneWeights;\n	uniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\nvoid main()\n{\n	#ifdef BONE\n		mat4 skinTransform = mat4(0.0);\n		skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position = skinTransform * a_Position;\n		gl_Position = u_MvpMatrix * position;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n	#endif\n	\n	v_Texcoord0 = a_Texcoord0;\n	#ifdef TILINGOFFSET\n		v_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n	#endif\n		v_Texcoord0=vec2(v_Texcoord0.x,1.0 + v_Texcoord0.y);\n		\n	v_Color = a_Color;\n}",t="#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\nvarying vec4 v_Color;\nvarying vec2 v_Texcoord0;\n\n#ifdef ALBEDOTEXTURE\n	uniform sampler2D u_AlbedoTexture;\n#endif\n\nuniform vec4 u_AlbedoColor;\n\n#ifdef ALPHATEST\n	uniform float u_AlphaTestValue;\n#endif\n\n#ifdef FOG\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	#ifdef ADDTIVEFOG\n	#else\n		uniform vec3 u_FogColor;\n	#endif\n#endif\n\nvoid main()\n{\n	vec4 color =  u_AlbedoColor;\n	#ifdef ALBEDOTEXTURE\n		color *= texture2D(u_AlbedoTexture, v_Texcoord0);\n	#endif\n	#ifdef ENABLEVERTEXCOLOR\n		color *= v_Color;\n	#endif\n	\n	#ifdef ALPHATEST\n		if(color.a < u_AlphaTestValue)\n			discard;\n	#endif\n	\n	gl_FragColor = color;\n	\n	#ifdef FOG\n		float lerpFact = clamp((1.0 / gl_FragCoord.w - u_FogStart) / u_FogRange, 0.0, 1.0);\n		#ifdef ADDTIVEFOG\n			gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.0), lerpFact);\n		#else\n			gl_FragColor.rgb = mix(gl_FragColor.rgb, u_FogColor, lerpFact);\n		#endif\n	#endif\n	\n}\n\n",r=sn.add("Unlit",n,i,Sr.shaderDefines,er.shaderDefines),r._addShaderPass(e,t),n={a_Position:0,a_Texcoord0:2,a_BoneWeights:7,a_BoneIndices:6},i={u_Bones:[0,0],u_AlbedoTexture:[1,1],u_AlbedoColor:[2,1],u_TilingOffset:[3,1],u_AlphaTestValue:[0,1],u_MvpMatrix:[yi.MVPMATRIX,2],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4]},e="attribute vec4 a_Position;\nattribute vec4 a_Color;\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\n\nvarying vec4 v_Color;\nvarying vec2 v_Texcoord0;\n\n#ifdef TILINGOFFSET\n	uniform vec4 u_TilingOffset;\n#endif\n\n#ifdef BONE\n	const int c_MaxBoneCount = 24;\n	attribute vec4 a_BoneIndices;\n	attribute vec4 a_BoneWeights;\n	uniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\nvoid main()\n{\n	#ifdef BONE\n		mat4 skinTransform = mat4(0.0);\n		skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position = skinTransform * a_Position;\n		gl_Position = u_MvpMatrix * position;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n	#endif\n	\n	v_Texcoord0 = a_Texcoord0;\n	#ifdef TILINGOFFSET\n		v_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n	#endif\n		v_Texcoord0=vec2(v_Texcoord0.x,1.0 + v_Texcoord0.y);\n		\n	v_Color = a_Color;\n}",t="#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\n#ifdef COLOR\n	varying vec4 v_Color;\n#endif\nvarying vec2 v_Texcoord0;\n\n#ifdef MAINTEXTURE\n	uniform sampler2D u_AlbedoTexture;\n#endif\n\nuniform vec4 u_AlbedoColor;\n\n#ifdef FOG\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	#ifdef ADDTIVEFOG\n	#else\n		uniform vec3 u_FogColor;\n	#endif\n#endif\n\nvoid main()\n{\n	vec4 color =  2.0 * u_AlbedoColor;\n	#ifdef COLOR\n		color *= v_Color;\n	#endif\n	#ifdef MAINTEXTURE\n		color *= texture2D(u_AlbedoTexture, v_Texcoord0);\n	#endif\n	\n	gl_FragColor = color;\n	\n	#ifdef FOG\n		float lerpFact = clamp((1.0 / gl_FragCoord.w - u_FogStart) / u_FogRange, 0.0, 1.0);\n		#ifdef ADDTIVEFOG\n			gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.0), lerpFact);\n		#else\n			gl_FragColor.rgb = mix(gl_FragColor.rgb, u_FogColor, lerpFact);\n		#endif\n	#endif\n}\n\n",r=sn.add("Effect",n,i,Sr.shaderDefines,ji.shaderDefines),r._addShaderPass(e,t),n={a_CornerTextureCoordinate:0,a_MeshPosition:1,a_MeshColor:2,a_MeshTextureCoordinate:3,a_ShapePositionStartLifeTime:4,a_DirectionTime:5,a_StartColor:6,a_EndColor:7,a_StartSize:8,a_StartRotation0:9,a_StartSpeed:10,a_Random0:11,a_Random1:12,a_SimulationWorldPostion:13,a_SimulationWorldRotation:14},i={u_Tintcolor:[2,1],u_TilingOffset:[3,1],u_texture:[1,1],u_WorldPosition:[gr.WORLDPOSITION,2],u_WorldRotation:[gr.WORLDROTATION,2],u_PositionScale:[gr.POSITIONSCALE,2],u_SizeScale:[gr.SIZESCALE,2],u_ScalingMode:[gr.SCALINGMODE,2],u_Gravity:[gr.GRAVITY,2],u_ThreeDStartRotation:[gr.THREEDSTARTROTATION,2],u_StretchedBillboardLengthScale:[gr.STRETCHEDBILLBOARDLENGTHSCALE,2],u_StretchedBillboardSpeedScale:[gr.STRETCHEDBILLBOARDSPEEDSCALE,2],u_SimulationSpace:[gr.SIMULATIONSPACE,2],u_CurrentTime:[gr.CURRENTTIME,2],u_ColorOverLifeGradientAlphas:[gr.COLOROVERLIFEGRADIENTALPHAS,2],u_ColorOverLifeGradientColors:[gr.COLOROVERLIFEGRADIENTCOLORS,2],u_MaxColorOverLifeGradientAlphas:[gr.MAXCOLOROVERLIFEGRADIENTALPHAS,2],u_MaxColorOverLifeGradientColors:[gr.MAXCOLOROVERLIFEGRADIENTCOLORS,2],u_VOLVelocityConst:[gr.VOLVELOCITYCONST,2],u_VOLVelocityGradientX:[gr.VOLVELOCITYGRADIENTX,2],u_VOLVelocityGradientY:[gr.VOLVELOCITYGRADIENTY,2],u_VOLVelocityGradientZ:[gr.VOLVELOCITYGRADIENTZ,2],u_VOLVelocityConstMax:[gr.VOLVELOCITYCONSTMAX,2],u_VOLVelocityGradientMaxX:[gr.VOLVELOCITYGRADIENTXMAX,2],u_VOLVelocityGradientMaxY:[gr.VOLVELOCITYGRADIENTYMAX,2],u_VOLVelocityGradientMaxZ:[gr.VOLVELOCITYGRADIENTZMAX,2],u_VOLSpaceType:[gr.VOLSPACETYPE,2],u_SOLSizeGradient:[gr.SOLSIZEGRADIENT,2],u_SOLSizeGradientX:[gr.SOLSIZEGRADIENTX,2],u_SOLSizeGradientY:[gr.SOLSIZEGRADIENTY,2],u_SOLSizeGradientZ:[gr.SOLSizeGradientZ,2],u_SOLSizeGradientMax:[gr.SOLSizeGradientMax,2],u_SOLSizeGradientMaxX:[gr.SOLSIZEGRADIENTXMAX,2],u_SOLSizeGradientMaxY:[gr.SOLSIZEGRADIENTYMAX,2],u_SOLSizeGradientMaxZ:[gr.SOLSizeGradientZMAX,2],u_ROLAngularVelocityConst:[gr.ROLANGULARVELOCITYCONST,2],u_ROLAngularVelocityConstSeprarate:[gr.ROLANGULARVELOCITYCONSTSEPRARATE,2],u_ROLAngularVelocityGradient:[gr.ROLANGULARVELOCITYGRADIENT,2],u_ROLAngularVelocityGradientX:[gr.ROLANGULARVELOCITYGRADIENTX,2],u_ROLAngularVelocityGradientY:[gr.ROLANGULARVELOCITYGRADIENTY,2],u_ROLAngularVelocityGradientZ:[gr.ROLANGULARVELOCITYGRADIENTZ,2],u_ROLAngularVelocityGradientW:[gr.ROLANGULARVELOCITYGRADIENTW,2],u_ROLAngularVelocityConstMax:[gr.ROLANGULARVELOCITYCONSTMAX,2],u_ROLAngularVelocityConstMaxSeprarate:[gr.ROLANGULARVELOCITYCONSTMAXSEPRARATE,2],u_ROLAngularVelocityGradientMax:[gr.ROLANGULARVELOCITYGRADIENTMAX,2],u_ROLAngularVelocityGradientMaxX:[gr.ROLANGULARVELOCITYGRADIENTXMAX,2],u_ROLAngularVelocityGradientMaxY:[gr.ROLANGULARVELOCITYGRADIENTYMAX,2],u_ROLAngularVelocityGradientMaxZ:[gr.ROLANGULARVELOCITYGRADIENTZMAX,2],u_ROLAngularVelocityGradientMaxW:[gr.ROLANGULARVELOCITYGRADIENTWMAX,2],u_TSACycles:[gr.TEXTURESHEETANIMATIONCYCLES,2],u_TSASubUVLength:[gr.TEXTURESHEETANIMATIONSUBUVLENGTH,2],u_TSAGradientUVs:[gr.TEXTURESHEETANIMATIONGRADIENTUVS,2],u_TSAMaxGradientUVs:[gr.TEXTURESHEETANIMATIONGRADIENTMAXUVS,2],u_CameraPosition:[0,3],u_CameraDirection:[5,3],u_CameraUp:[6,3],u_View:[1,3],u_Projection:[2,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4]},e="#ifdef HIGHPRECISION\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\n#if defined(SPHERHBILLBOARD)||defined(STRETCHEDBILLBOARD)||defined(HORIZONTALBILLBOARD)||defined(VERTICALBILLBOARD)\n	attribute vec4 a_CornerTextureCoordinate;\n#endif\n#ifdef RENDERMODE_MESH\n	attribute vec3 a_MeshPosition;\n	attribute vec4 a_MeshColor;\n	attribute vec2 a_MeshTextureCoordinate;\n	varying vec4 v_MeshColor;\n#endif\n\nattribute vec4 a_ShapePositionStartLifeTime;\nattribute vec4 a_DirectionTime;\nattribute vec4 a_StartColor;\nattribute vec3 a_StartSize;\nattribute vec3 a_StartRotation0;\nattribute float a_StartSpeed;\n#if defined(COLOROVERLIFETIME)||defined(RANDOMCOLOROVERLIFETIME)||defined(SIZEOVERLIFETIMERANDOMCURVES)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\n  attribute vec4 a_Random0;\n#endif\n#if defined(TEXTURESHEETANIMATIONRANDOMCURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n  attribute vec4 a_Random1;\n#endif\nattribute vec3 a_SimulationWorldPostion;\nattribute vec4 a_SimulationWorldRotation;\n\nvarying float v_Discard;\nvarying vec4 v_Color;\n#ifdef DIFFUSEMAP\n	varying vec2 v_TextureCoordinate;\n#endif\n\nuniform float u_CurrentTime;\nuniform vec3 u_Gravity;\n\nuniform vec3 u_WorldPosition;\nuniform vec4 u_WorldRotation;\nuniform bool u_ThreeDStartRotation;\nuniform int u_ScalingMode;\nuniform vec3 u_PositionScale;\nuniform vec3 u_SizeScale;\nuniform mat4 u_View;\nuniform mat4 u_Projection;\n\n#ifdef STRETCHEDBILLBOARD\n	uniform vec3 u_CameraPosition;\n#endif\nuniform vec3 u_CameraDirection;//TODO:只有几种广告牌模式需要用\nuniform vec3 u_CameraUp;\n\nuniform  float u_StretchedBillboardLengthScale;\nuniform  float u_StretchedBillboardSpeedScale;\nuniform int u_SimulationSpace;\n\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n  uniform  int  u_VOLSpaceType;\n#endif\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)\n  uniform  vec3 u_VOLVelocityConst;\n#endif\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n  uniform  vec2 u_VOLVelocityGradientX[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientY[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientZ[4];//x为key,y为速度\n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n  uniform  vec3 u_VOLVelocityConstMax;\n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n  uniform  vec2 u_VOLVelocityGradientMaxX[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientMaxY[4];//x为key,y为速度\n  uniform  vec2 u_VOLVelocityGradientMaxZ[4];//x为key,y为速度\n#endif\n\n#ifdef COLOROVERLIFETIME\n  uniform  vec4 u_ColorOverLifeGradientColors[4];//x为key,yzw为Color\n  uniform  vec2 u_ColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n#endif\n#ifdef RANDOMCOLOROVERLIFETIME\n  uniform  vec4 u_ColorOverLifeGradientColors[4];//x为key,yzw为Color\n  uniform  vec2 u_ColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n  uniform  vec4 u_MaxColorOverLifeGradientColors[4];//x为key,yzw为Color\n  uniform  vec2 u_MaxColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n#endif\n\n\n#if defined(SIZEOVERLIFETIMECURVE)||defined(SIZEOVERLIFETIMERANDOMCURVES)\n  uniform  vec2 u_SOLSizeGradient[4];//x为key,y为尺寸\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVES\n  uniform  vec2 u_SOLSizeGradientMax[4];//x为key,y为尺寸\n#endif\n#if defined(SIZEOVERLIFETIMECURVESEPERATE)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)\n  uniform  vec2 u_SOLSizeGradientX[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientY[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientZ[4];//x为key,y为尺寸\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n  uniform  vec2 u_SOLSizeGradientMaxX[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientMaxY[4];//x为key,y为尺寸\n  uniform  vec2 u_SOLSizeGradientMaxZ[4];//x为key,y为尺寸\n#endif\n\n\n#ifdef ROTATIONOVERLIFETIME\n  #if defined(ROTATIONOVERLIFETIMECONSTANT)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)\n    uniform  float u_ROLAngularVelocityConst;\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n    uniform  float u_ROLAngularVelocityConstMax;\n  #endif\n  #if defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\n    uniform  vec2 u_ROLAngularVelocityGradient[4];//x为key,y为旋转\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n    uniform  vec2 u_ROLAngularVelocityGradientMax[4];//x为key,y为旋转\n  #endif\n#endif\n#ifdef ROTATIONOVERLIFETIMESEPERATE\n  #if defined(ROTATIONOVERLIFETIMECONSTANT)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)\n    uniform  vec3 u_ROLAngularVelocityConstSeprarate;\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n    uniform  vec3 u_ROLAngularVelocityConstMaxSeprarate;\n  #endif\n  #if defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\n    uniform  vec2 u_ROLAngularVelocityGradientX[4];\n    uniform  vec2 u_ROLAngularVelocityGradientY[4];\n    uniform  vec2 u_ROLAngularVelocityGradientZ[4];\n	uniform  vec2 u_ROLAngularVelocityGradientW[4];\n  #endif\n  #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n    uniform  vec2 u_ROLAngularVelocityGradientMaxX[4];\n    uniform  vec2 u_ROLAngularVelocityGradientMaxY[4];\n    uniform  vec2 u_ROLAngularVelocityGradientMaxZ[4];\n	uniform  vec2 u_ROLAngularVelocityGradientMaxW[4];\n  #endif\n#endif\n\n#if defined(TEXTURESHEETANIMATIONCURVE)||defined(TEXTURESHEETANIMATIONRANDOMCURVE)\n  uniform  float u_TSACycles;\n  uniform  vec2 u_TSASubUVLength;\n  uniform  vec2 u_TSAGradientUVs[4];//x为key,y为frame\n#endif\n#ifdef TEXTURESHEETANIMATIONRANDOMCURVE\n  uniform  vec2 u_TSAMaxGradientUVs[4];//x为key,y为frame\n#endif\n\n#ifdef FOG\n	varying vec3 v_PositionWorld;\n#endif\n\n#ifdef TILINGOFFSET\n	uniform vec4 u_TilingOffset;\n#endif\n\nvec3 rotationByEuler(in vec3 vector,in vec3 rot)\n{\n	float halfRoll = rot.z * 0.5;\n    float halfPitch = rot.x * 0.5;\n	float halfYaw = rot.y * 0.5;\n\n	float sinRoll = sin(halfRoll);\n	float cosRoll = cos(halfRoll);\n	float sinPitch = sin(halfPitch);\n	float cosPitch = cos(halfPitch);\n	float sinYaw = sin(halfYaw);\n	float cosYaw = cos(halfYaw);\n\n	float quaX = (cosYaw * sinPitch * cosRoll) + (sinYaw * cosPitch * sinRoll);\n	float quaY = (sinYaw * cosPitch * cosRoll) - (cosYaw * sinPitch * sinRoll);\n	float quaZ = (cosYaw * cosPitch * sinRoll) - (sinYaw * sinPitch * cosRoll);\n	float quaW = (cosYaw * cosPitch * cosRoll) + (sinYaw * sinPitch * sinRoll);\n	\n	//vec4 q=vec4(quaX,quaY,quaZ,quaW);\n	//vec3 temp = cross(q.xyz, vector) + q.w * vector;\n	//return (cross(temp, -q.xyz) + dot(q.xyz,vector) * q.xyz + q.w * temp);\n	\n	float x = quaX + quaX;\n    float y = quaY + quaY;\n    float z = quaZ + quaZ;\n    float wx = quaW * x;\n    float wy = quaW * y;\n    float wz = quaW * z;\n	float xx = quaX * x;\n    float xy = quaX * y;\n	float xz = quaX * z;\n    float yy = quaY * y;\n    float yz = quaY * z;\n    float zz = quaZ * z;\n\n    return vec3(((vector.x * ((1.0 - yy) - zz)) + (vector.y * (xy - wz))) + (vector.z * (xz + wy)),\n                ((vector.x * (xy + wz)) + (vector.y * ((1.0 - xx) - zz))) + (vector.z * (yz - wx)),\n                ((vector.x * (xz - wy)) + (vector.y * (yz + wx))) + (vector.z * ((1.0 - xx) - yy)));\n	\n}\n\n//假定axis已经归一化\nvec3 rotationByAxis(in vec3 vector,in vec3 axis, in float angle)\n{\n	float halfAngle = angle * 0.5;\n	float sin = sin(halfAngle);\n	\n	float quaX = axis.x * sin;\n	float quaY = axis.y * sin;\n	float quaZ = axis.z * sin;\n	float quaW = cos(halfAngle);\n	\n	//vec4 q=vec4(quaX,quaY,quaZ,quaW);\n	//vec3 temp = cross(q.xyz, vector) + q.w * vector;\n	//return (cross(temp, -q.xyz) + dot(q.xyz,vector) * q.xyz + q.w * temp);\n	\n	float x = quaX + quaX;\n    float y = quaY + quaY;\n    float z = quaZ + quaZ;\n    float wx = quaW * x;\n    float wy = quaW * y;\n    float wz = quaW * z;\n	float xx = quaX * x;\n    float xy = quaX * y;\n	float xz = quaX * z;\n    float yy = quaY * y;\n    float yz = quaY * z;\n    float zz = quaZ * z;\n\n    return vec3(((vector.x * ((1.0 - yy) - zz)) + (vector.y * (xy - wz))) + (vector.z * (xz + wy)),\n                ((vector.x * (xy + wz)) + (vector.y * ((1.0 - xx) - zz))) + (vector.z * (yz - wx)),\n                ((vector.x * (xz - wy)) + (vector.y * (yz + wx))) + (vector.z * ((1.0 - xx) - yy)));\n	\n}\n\nvec3 rotationByQuaternions(in vec3 v,in vec4 q) \n{\n	return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);\n}\n\n \n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)||defined(SIZEOVERLIFETIMECURVE)||defined(SIZEOVERLIFETIMECURVESEPERATE)||defined(SIZEOVERLIFETIMERANDOMCURVES)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)\nfloat getCurValueFromGradientFloat(in vec2 gradientNumbers[4],in float normalizedAge)\n{\n	float curValue;\n	for(int i=1;i<4;i++)\n	{\n		vec2 gradientNumber=gradientNumbers[i];\n		float key=gradientNumber.x;\n		if(key>=normalizedAge)\n		{\n			vec2 lastGradientNumber=gradientNumbers[i-1];\n			float lastKey=lastGradientNumber.x;\n			float age=(normalizedAge-lastKey)/(key-lastKey);\n			curValue=mix(lastGradientNumber.y,gradientNumber.y,age);\n			break;\n		}\n	}\n	return curValue;\n}\n#endif\n\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)||defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\nfloat getTotalValueFromGradientFloat(in vec2 gradientNumbers[4],in float normalizedAge)\n{\n	float totalValue=0.0;\n	for(int i=1;i<4;i++)\n	{\n		vec2 gradientNumber=gradientNumbers[i];\n		float key=gradientNumber.x;\n		vec2 lastGradientNumber=gradientNumbers[i-1];\n		float lastValue=lastGradientNumber.y;\n		\n		if(key>=normalizedAge){\n			float lastKey=lastGradientNumber.x;\n			float age=(normalizedAge-lastKey)/(key-lastKey);\n			totalValue+=(lastValue+mix(lastValue,gradientNumber.y,age))/2.0*a_ShapePositionStartLifeTime.w*(normalizedAge-lastKey);\n			break;\n		}\n		else{\n			totalValue+=(lastValue+gradientNumber.y)/2.0*a_ShapePositionStartLifeTime.w*(key-lastGradientNumber.x);\n		}\n	}\n	return totalValue;\n}\n#endif\n\n#if defined(COLOROVERLIFETIME)||defined(RANDOMCOLOROVERLIFETIME)\nvec4 getColorFromGradient(in vec2 gradientAlphas[4],in vec4 gradientColors[4],in float normalizedAge)\n{\n	vec4 overTimeColor;\n	for(int i=1;i<4;i++)\n	{\n		vec2 gradientAlpha=gradientAlphas[i];\n		float alphaKey=gradientAlpha.x;\n		if(alphaKey>=normalizedAge)\n		{\n			vec2 lastGradientAlpha=gradientAlphas[i-1];\n			float lastAlphaKey=lastGradientAlpha.x;\n			float age=(normalizedAge-lastAlphaKey)/(alphaKey-lastAlphaKey);\n			overTimeColor.a=mix(lastGradientAlpha.y,gradientAlpha.y,age);\n			break;\n		}\n	}\n	\n	for(int i=1;i<4;i++)\n	{\n		vec4 gradientColor=gradientColors[i];\n		float colorKey=gradientColor.x;\n		if(colorKey>=normalizedAge)\n		{\n			vec4 lastGradientColor=gradientColors[i-1];\n			float lastColorKey=lastGradientColor.x;\n			float age=(normalizedAge-lastColorKey)/(colorKey-lastColorKey);\n			overTimeColor.rgb=mix(gradientColors[i-1].yzw,gradientColor.yzw,age);\n			break;\n		}\n	}\n	return overTimeColor;\n}\n#endif\n\n\n#if defined(TEXTURESHEETANIMATIONCURVE)||defined(TEXTURESHEETANIMATIONRANDOMCURVE)\nfloat getFrameFromGradient(in vec2 gradientFrames[4],in float normalizedAge)\n{\n	float overTimeFrame;\n	for(int i=1;i<4;i++)\n	{\n		vec2 gradientFrame=gradientFrames[i];\n		float key=gradientFrame.x;\n		if(key>=normalizedAge)\n		{\n			vec2 lastGradientFrame=gradientFrames[i-1];\n			float lastKey=lastGradientFrame.x;\n			float age=(normalizedAge-lastKey)/(key-lastKey);\n			overTimeFrame=mix(lastGradientFrame.y,gradientFrame.y,age);\n			break;\n		}\n	}\n	return floor(overTimeFrame);\n}\n#endif\n\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\nvec3 computeParticleLifeVelocity(in float normalizedAge)\n{\n  vec3 outLifeVelocity;\n  #ifdef VELOCITYOVERLIFETIMECONSTANT\n	 outLifeVelocity=u_VOLVelocityConst; \n  #endif\n  #ifdef VELOCITYOVERLIFETIMECURVE\n     outLifeVelocity= vec3(getCurValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge));\n  #endif\n  #ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n	 outLifeVelocity=mix(u_VOLVelocityConst,u_VOLVelocityConstMax,vec3(a_Random1.y,a_Random1.z,a_Random1.w)); \n  #endif\n  #ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n     outLifeVelocity=vec3(mix(getCurValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxX,normalizedAge),a_Random1.y),\n	                 mix(getCurValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxY,normalizedAge),a_Random1.z),\n					 mix(getCurValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxZ,normalizedAge),a_Random1.w));\n  #endif\n					\n  return outLifeVelocity;\n} \n#endif\n\nvec3 computeParticlePosition(in vec3 startVelocity, in vec3 lifeVelocity,in float age,in float normalizedAge,vec3 gravityVelocity,vec4 worldRotation)\n{\n   vec3 startPosition;\n   vec3 lifePosition;\n   #if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n	#ifdef VELOCITYOVERLIFETIMECONSTANT\n		  startPosition=startVelocity*age;\n		  lifePosition=lifeVelocity*age;\n	#endif\n	#ifdef VELOCITYOVERLIFETIMECURVE\n		  startPosition=startVelocity*age;\n		  lifePosition=vec3(getTotalValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge));\n	#endif\n	#ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n		  startPosition=startVelocity*age;\n		  lifePosition=lifeVelocity*age;\n	#endif\n	#ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n		  startPosition=startVelocity*age;\n		  lifePosition=vec3(mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxX,normalizedAge),a_Random1.y)\n	      ,mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxY,normalizedAge),a_Random1.z)\n	      ,mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxZ,normalizedAge),a_Random1.w));\n	#endif\n	\n	vec3 finalPosition;\n	if(u_VOLSpaceType==0){\n	  if(u_ScalingMode!=2)\n	   finalPosition =rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition+lifePosition),worldRotation);\n	  else\n	   finalPosition =rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition+lifePosition,worldRotation);\n	}\n	else{\n	  if(u_ScalingMode!=2)\n	    finalPosition = rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition),worldRotation)+lifePosition;\n	  else\n	    finalPosition = rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation)+lifePosition;\n	}\n  #else\n	 startPosition=startVelocity*age;\n	 vec3 finalPosition;\n	 if(u_ScalingMode!=2)\n	   finalPosition = rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition),worldRotation);\n	 else\n	   finalPosition = rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation);\n  #endif\n  \n  if(u_SimulationSpace==0)\n    finalPosition=finalPosition+a_SimulationWorldPostion;\n  else if(u_SimulationSpace==1) \n    finalPosition=finalPosition+u_WorldPosition;\n  \n  finalPosition+=0.5*gravityVelocity*age;\n \n  return  finalPosition;\n}\n\n\nvec4 computeParticleColor(in vec4 color,in float normalizedAge)\n{\n	#ifdef COLOROVERLIFETIME\n	  color*=getColorFromGradient(u_ColorOverLifeGradientAlphas,u_ColorOverLifeGradientColors,normalizedAge);\n	#endif\n	\n	#ifdef RANDOMCOLOROVERLIFETIME\n	  color*=mix(getColorFromGradient(u_ColorOverLifeGradientAlphas,u_ColorOverLifeGradientColors,normalizedAge),getColorFromGradient(u_MaxColorOverLifeGradientAlphas,u_MaxColorOverLifeGradientColors,normalizedAge),a_Random0.y);\n	#endif\n\n    return color;\n}\n\nvec2 computeParticleSizeBillbard(in vec2 size,in float normalizedAge)\n{\n	#ifdef SIZEOVERLIFETIMECURVE\n		size*=getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge);\n	#endif\n	#ifdef SIZEOVERLIFETIMERANDOMCURVES\n	    size*=mix(getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMax,normalizedAge),a_Random0.z); \n	#endif\n	#ifdef SIZEOVERLIFETIMECURVESEPERATE\n		size*=vec2(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge));\n	#endif\n	#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n	    size*=vec2(mix(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxX,normalizedAge),a_Random0.z)\n	    ,mix(getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxY,normalizedAge),a_Random0.z));\n	#endif\n	return size;\n}\n\n#ifdef RENDERMODE_MESH\nvec3 computeParticleSizeMesh(in vec3 size,in float normalizedAge)\n{\n	#ifdef SIZEOVERLIFETIMECURVE\n		size*=getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge);\n	#endif\n	#ifdef SIZEOVERLIFETIMERANDOMCURVES\n	    size*=mix(getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMax,normalizedAge),a_Random0.z); \n	#endif\n	#ifdef SIZEOVERLIFETIMECURVESEPERATE\n		size*=vec3(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientZ,normalizedAge));\n	#endif\n	#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n	    size*=vec3(mix(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxX,normalizedAge),a_Random0.z)\n	    ,mix(getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxY,normalizedAge),a_Random0.z)\n		,mix(getCurValueFromGradientFloat(u_SOLSizeGradientZ,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxZ,normalizedAge),a_Random0.z));\n	#endif\n	return size;\n}\n#endif\n\nfloat computeParticleRotationFloat(in float rotation,in float age,in float normalizedAge)\n{ \n	#ifdef ROTATIONOVERLIFETIME\n		#ifdef ROTATIONOVERLIFETIMECONSTANT\n			float ageRot=u_ROLAngularVelocityConst*age;\n	        rotation+=ageRot;\n		#endif\n		#ifdef ROTATIONOVERLIFETIMECURVE\n			rotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge);\n		#endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n			float ageRot=mix(u_ROLAngularVelocityConst,u_ROLAngularVelocityConstMax,a_Random0.w)*age;\n	        rotation+=ageRot;\n	    #endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n			rotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMax,normalizedAge),a_Random0.w);\n		#endif\n	#endif\n	#ifdef ROTATIONOVERLIFETIMESEPERATE\n		#ifdef ROTATIONOVERLIFETIMECONSTANT\n			float ageRot=u_ROLAngularVelocityConstSeprarate.z*age;\n	        rotation+=ageRot;\n		#endif\n		#ifdef ROTATIONOVERLIFETIMECURVE\n			rotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge);\n		#endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n			float ageRot=mix(u_ROLAngularVelocityConstSeprarate.z,u_ROLAngularVelocityConstMaxSeprarate.z,a_Random0.w)*age;\n	        rotation+=ageRot;\n	    #endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n			rotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxZ,normalizedAge),a_Random0.w));\n		#endif\n	#endif\n	return rotation;\n}\n\n#if defined(RENDERMODE_MESH)&&(defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE))\nvec3 computeParticleRotationVec3(in vec3 rotation,in float age,in float normalizedAge)\n{ \n	#ifdef ROTATIONOVERLIFETIME\n	#ifdef ROTATIONOVERLIFETIMECONSTANT\n			float ageRot=u_ROLAngularVelocityConst*age;\n	        rotation+=ageRot;\n		#endif\n		#ifdef ROTATIONOVERLIFETIMECURVE\n			rotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge);\n		#endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n			float ageRot=mix(u_ROLAngularVelocityConst,u_ROLAngularVelocityConstMax,a_Random0.w)*age;\n	        rotation+=ageRot;\n	    #endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n			rotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMax,normalizedAge),a_Random0.w);\n		#endif\n	#endif\n	#ifdef ROTATIONOVERLIFETIMESEPERATE\n	#ifdef ROTATIONOVERLIFETIMECONSTANT\n			vec3 ageRot=u_ROLAngularVelocityConstSeprarate*age;\n	        rotation+=ageRot;\n		#endif\n		#ifdef ROTATIONOVERLIFETIMECURVE\n			rotation+=vec3(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge));\n		#endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n			vec3 ageRot=mix(u_ROLAngularVelocityConstSeprarate,u_ROLAngularVelocityConstMaxSeprarate,a_Random0.w)*age;\n	        rotation+=ageRot;\n	    #endif\n		#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n			rotation+=vec3(mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxX,normalizedAge),a_Random0.w)\n	        ,mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxY,normalizedAge),a_Random0.w)\n	        ,mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxZ,normalizedAge),a_Random0.w));\n		#endif\n	#endif\n	return rotation;\n}\n#endif\n\nvec2 computeParticleUV(in vec2 uv,in float normalizedAge)\n{ \n	#ifdef TEXTURESHEETANIMATIONCURVE\n		float cycleNormalizedAge=normalizedAge*u_TSACycles;\n		float frame=getFrameFromGradient(u_TSAGradientUVs,cycleNormalizedAge-floor(cycleNormalizedAge));\n		float totalULength=frame*u_TSASubUVLength.x;\n		float floorTotalULength=floor(totalULength);\n	    uv.x+=totalULength-floorTotalULength;\n		uv.y+=floorTotalULength*u_TSASubUVLength.y;\n    #endif\n	#ifdef TEXTURESHEETANIMATIONRANDOMCURVE\n		float cycleNormalizedAge=normalizedAge*u_TSACycles;\n		float uvNormalizedAge=cycleNormalizedAge-floor(cycleNormalizedAge);\n	    float frame=floor(mix(getFrameFromGradient(u_TSAGradientUVs,uvNormalizedAge),getFrameFromGradient(u_TSAMaxGradientUVs,uvNormalizedAge),a_Random1.x));\n		float totalULength=frame*u_TSASubUVLength.x;\n		float floorTotalULength=floor(totalULength);\n	    uv.x+=totalULength-floorTotalULength;\n		uv.y+=floorTotalULength*u_TSASubUVLength.y;\n    #endif\n	return uv;\n}\n\nvoid main()\n{\n	float age = u_CurrentTime - a_DirectionTime.w;\n	float normalizedAge = age/a_ShapePositionStartLifeTime.w;\n	vec3 lifeVelocity;\n	if(normalizedAge<1.0){ \n	vec3 startVelocity=a_DirectionTime.xyz*a_StartSpeed;\n	#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n		lifeVelocity= computeParticleLifeVelocity(normalizedAge);//计算粒子生命周期速度\n	#endif \n	vec3 gravityVelocity=u_Gravity*age;\n	\n	vec4 worldRotation;\n	if(u_SimulationSpace==0)\n		worldRotation=a_SimulationWorldRotation;\n	else\n		worldRotation=u_WorldRotation;\n	\n	vec3 center=computeParticlePosition(startVelocity, lifeVelocity, age, normalizedAge,gravityVelocity,worldRotation);//计算粒子位置\n   \n   \n   #ifdef SPHERHBILLBOARD\n		vec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n        vec3 cameraUpVector =normalize(u_CameraUp);//TODO:是否外面归一化\n        vec3 sideVector = normalize(cross(u_CameraDirection,cameraUpVector));\n        vec3 upVector = normalize(cross(sideVector,u_CameraDirection));\n	    corner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n		#if defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE)\n			if(u_ThreeDStartRotation){\n				vec3 rotation=vec3(a_StartRotation0.xy,computeParticleRotationFloat(a_StartRotation0.z,age,normalizedAge));\n				center += u_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,rotation);\n			}\n			else{\n				float rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n				float c = cos(rot);\n				float s = sin(rot);\n				mat2 rotation= mat2(c, -s, s, c);\n				corner=rotation*corner;\n				center += u_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);\n			}\n		#else\n			if(u_ThreeDStartRotation){\n				center += u_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,a_StartRotation0);\n			}\n			else{\n				float c = cos(a_StartRotation0.x);\n				float s = sin(a_StartRotation0.x);\n				mat2 rotation= mat2(c, -s, s, c);\n				corner=rotation*corner;\n				center += u_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);\n			}\n		#endif\n   #endif\n   \n   #ifdef STRETCHEDBILLBOARD\n	vec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n	vec3 velocity;\n	#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n	    if(u_VOLSpaceType==0)\n		  velocity=rotationByQuaternions(u_SizeScale*(startVelocity+lifeVelocity),worldRotation)+gravityVelocity;\n	    else\n		  velocity=rotationByQuaternions(u_SizeScale*startVelocity,worldRotation)+lifeVelocity+gravityVelocity;\n    #else\n	    velocity= rotationByQuaternions(u_SizeScale*startVelocity,worldRotation)+gravityVelocity;\n    #endif	\n		vec3 cameraUpVector = normalize(velocity);\n		vec3 direction = normalize(center-u_CameraPosition);\n        vec3 sideVector = normalize(cross(direction,normalize(velocity)));\n		\n		sideVector=u_SizeScale.xzy*sideVector;\n		cameraUpVector=length(vec3(u_SizeScale.x,0.0,0.0))*cameraUpVector;\n		\n	    vec2 size=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n		\n	    const mat2 rotaionZHalfPI=mat2(0.0, -1.0, 1.0, 0.0);\n	    corner=rotaionZHalfPI*corner;\n	    corner.y=corner.y-abs(corner.y);\n		\n	    float speed=length(velocity);//TODO:\n	    center +=sign(u_SizeScale.x)*(sign(u_StretchedBillboardLengthScale)*size.x*corner.x*sideVector+(speed*u_StretchedBillboardSpeedScale+size.y*u_StretchedBillboardLengthScale)*corner.y*cameraUpVector);\n   #endif\n   \n   #ifdef HORIZONTALBILLBOARD\n		vec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n        const vec3 cameraUpVector=vec3(0.0,0.0,1.0);\n	    const vec3 sideVector = vec3(-1.0,0.0,0.0);\n		\n		float rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n        float c = cos(rot);\n        float s = sin(rot);\n        mat2 rotation= mat2(c, -s, s, c);\n	    corner=rotation*corner*cos(0.78539816339744830961566084581988);//TODO:临时缩小cos45,不确定U3D原因\n		corner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n        center +=u_SizeScale.xzy*(corner.x*sideVector+ corner.y*cameraUpVector);\n   #endif\n   \n   #ifdef VERTICALBILLBOARD\n		vec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n        const vec3 cameraUpVector =vec3(0.0,1.0,0.0);\n        vec3 sideVector = normalize(cross(u_CameraDirection,cameraUpVector));\n		\n		float rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n        float c = cos(rot);\n        float s = sin(rot);\n        mat2 rotation= mat2(c, -s, s, c);\n	    corner=rotation*corner*cos(0.78539816339744830961566084581988);//TODO:临时缩小cos45,不确定U3D原因\n		corner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n        center +=u_SizeScale.xzy*(corner.x*sideVector+ corner.y*cameraUpVector);\n   #endif\n   \n   #ifdef RENDERMODE_MESH\n	    vec3 size=computeParticleSizeMesh(a_StartSize,normalizedAge);\n		#if defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE)\n			if(u_ThreeDStartRotation){\n				vec3 rotation=vec3(a_StartRotation0.xy,-computeParticleRotationFloat(a_StartRotation0.z, age,normalizedAge));\n				center+= rotationByQuaternions(u_SizeScale*rotationByEuler(a_MeshPosition*size,rotation),worldRotation);\n			}\n			else{\n				#ifdef ROTATIONOVERLIFETIME\n					float angle=computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n					if(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){\n						center+= (rotationByQuaternions(rotationByAxis(u_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),angle),worldRotation));//已验证\n					}\n					else{\n						#ifdef SHAPE\n							center+= u_SizeScale.xzy*(rotationByQuaternions(rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),angle),worldRotation));\n						#else\n							if(u_SimulationSpace==0)\n								center+=rotationByAxis(u_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle);//已验证\n							else if(u_SimulationSpace==1)\n								center+=rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle),worldRotation);//已验证\n						#endif\n					}\n				#endif\n				#ifdef ROTATIONOVERLIFETIMESEPERATE\n					//TODO:是否应合并if(u_ThreeDStartRotation)分支代码,待测试\n					vec3 angle=computeParticleRotationVec3(vec3(0.0,0.0,a_StartRotation0.z), age,normalizedAge);\n					center+= (rotationByQuaternions(rotationByEuler(u_SizeScale*a_MeshPosition*size,vec3(angle.x,angle.y,angle.z)),worldRotation));//已验证\n				#endif		\n			}\n		#else\n			if(u_ThreeDStartRotation){\n				center+= rotationByQuaternions(u_SizeScale*rotationByEuler(a_MeshPosition*size,a_StartRotation0),worldRotation);//已验证\n			}\n			else{\n				if(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){\n					if(u_SimulationSpace==0)\n						center+= rotationByAxis(u_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x);\n					else if(u_SimulationSpace==1)\n						center+= (rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x),worldRotation));//已验证\n				}\n				else{\n					#ifdef SHAPE\n						if(u_SimulationSpace==0)\n							center+= u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x);\n						else if(u_SimulationSpace==1)\n							center+= rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x),worldRotation);	\n					#else\n						if(u_SimulationSpace==0)\n							center+= rotationByAxis(u_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x);\n						else if(u_SimulationSpace==1)\n							center+= rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x),worldRotation);//已验证\n					#endif\n				}\n			}\n		#endif\n		v_MeshColor=a_MeshColor;\n   #endif\n   \n    gl_Position=u_Projection*u_View*vec4(center,1.0);\n    v_Color = computeParticleColor(a_StartColor, normalizedAge);\n	#ifdef DIFFUSEMAP\n		#if defined(SPHERHBILLBOARD)||defined(STRETCHEDBILLBOARD)||defined(HORIZONTALBILLBOARD)||defined(VERTICALBILLBOARD)\n			v_TextureCoordinate =computeParticleUV(a_CornerTextureCoordinate.zw, normalizedAge);\n		#endif\n		#ifdef RENDERMODE_MESH\n			v_TextureCoordinate =computeParticleUV(a_MeshTextureCoordinate, normalizedAge);\n		#endif\n		\n		#ifdef TILINGOFFSET\n			v_TextureCoordinate=vec2(v_TextureCoordinate.x,1.0-v_TextureCoordinate.y)*u_TilingOffset.xy+vec2(u_TilingOffset.z,-u_TilingOffset.w);//需要特殊处理\n			v_TextureCoordinate=vec2(v_TextureCoordinate.x,1.0-v_TextureCoordinate.y);//需要特殊处理\n		#endif\n	#endif\n    v_Discard=0.0;\n	  \n	#ifdef FOG\n		v_PositionWorld=center;\n	#endif\n   }\n   else\n	{\n		v_Discard=1.0;\n	}\n}\n\n",t="#ifdef HIGHPRECISION\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\nvarying float v_Discard;\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\nuniform sampler2D u_texture;\nuniform vec4 u_Tintcolor;\n\n#ifdef RENDERMODE_MESH\n	varying vec4 v_MeshColor;\n#endif\n\n#ifdef FOG\n	varying vec3 v_PositionWorld;\n	uniform vec3 u_CameraPosition;\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	#ifdef ADDTIVEFOG\n	#else\n		uniform vec3 u_FogColor;\n	#endif\n#endif\n\n\nvoid main()\n{	\n	#ifdef RENDERMODE_MESH\n		gl_FragColor=v_MeshColor;\n	#else\n		gl_FragColor=vec4(1.0);	\n	#endif\n		\n	#ifdef DIFFUSEMAP\n		if(v_Discard!=0.0)\n			discard;\n		#ifdef TINTCOLOR\n			gl_FragColor*=texture2D(u_texture,v_TextureCoordinate)*u_Tintcolor*2.0*v_Color;\n		#else\n			gl_FragColor*=texture2D(u_texture,v_TextureCoordinate)*v_Color;\n		#endif\n	#else\n		#ifdef TINTCOLOR\n			gl_FragColor*=u_Tintcolor*2.0*v_Color;\n		#else\n			gl_FragColor*=v_Color;\n		#endif\n	#endif\n	\n	#ifdef FOG\n		vec3 toEye=u_CameraPosition-v_PositionWorld;\n		float toEyeLength=length(toEye);\n		toEye/=toEyeLength;\n		\n		float lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n		#ifdef ADDTIVEFOG\n			gl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n		#else\n			gl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n		#endif\n	#endif\n}",r=sn.add("PARTICLESHURIKEN",n,i,gr.shaderDefines,ir.shaderDefines),r._addShaderPass(e,t),n={a_Position:0},i={u_TintColor:[1,1],u_Exposure:[2,1],u_Rotation:[3,1],u_CubeTexture:[4,1],u_MvpMatrix:[4,3]},e="attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\nuniform float u_Rotation;\nvarying vec3 v_Texcoord;\n\n\nvec4 rotateAroundYInDegrees (vec4 vertex, float degrees)\n{\n	float angle = degrees * 3.141593 / 180.0;\n	float sina=sin(angle);\n	float cosa=cos(angle);\n	mat2 m = mat2(cosa, -sina, sina, cosa);\n	return vec4(m*vertex.xz, vertex.yw).xzyw;\n}\n		\nvoid main()\n{\n	vec4 position=rotateAroundYInDegrees(a_Position,u_Rotation);\n	gl_Position = (u_MvpMatrix*position).xyww;\n	v_Texcoord=vec3(-a_Position.x,a_Position.yz);//转换坐标系\n}\n",t="#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nvarying vec3 v_Texcoord;\n\nuniform samplerCube u_CubeTexture;\nuniform float u_Exposure;\nuniform vec4 u_TintColor;\n\n\nvoid main()\n{	\n	vec3 color=textureCube(u_CubeTexture, v_Texcoord).rgb*u_TintColor.rgb*u_Exposure*2.0;\n	gl_FragColor=vec4(color,1.0);\n}\n\n",r=sn.add("SkyBox",n,i),r._addShaderPass(e,t),n={a_Position:0,a_Normal:1,a_Texcoord0:2,a_Texcoord1:3},i={u_MvpMatrix:[yi.MVPMATRIX,2],u_WorldMat:[yi.WORLDMATRIX,2],u_LightmapScaleOffset:[Yi.LIGHTMAPSCALEOFFSET,2],u_LightMap:[Yi.LIGHTMAP,2],u_SplatAlphaTexture:[0,1],u_NormalTexture:[1,1],u_DiffuseTexture1:[2,1],u_DiffuseTexture2:[3,1],u_DiffuseTexture3:[4,1],u_DiffuseTexture4:[5,1],u_DiffuseScale1:[6,1],u_DiffuseScale2:[7,1],u_DiffuseScale3:[8,1],u_DiffuseScale4:[9,1],u_MaterialDiffuse:[11,1],u_MaterialAmbient:[10,1],u_MaterialSpecular:[12,1],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]},e="attribute vec4 a_Position;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(LIGHTMAP)\n	attribute vec3 a_Normal;\n	varying vec3 v_Normal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||(defined(RECEIVESHADOW)&&defined(SHADOWMAP_PSSM1))\n	uniform mat4 u_WorldMat;\n	varying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef LIGHTMAP\n	uniform vec4 u_LightmapScaleOffset;\n	varying vec2 v_LightMapUV;\n#endif\n\nattribute vec2 a_Texcoord0;\nattribute vec2 a_Texcoord1;\nvarying vec2 v_Texcoord0;\nvarying vec2 v_Texcoord1;\nuniform mat4 u_MvpMatrix;\n\nvoid main()\n{\n	gl_Position = u_MvpMatrix * a_Position;\n	v_Texcoord0=a_Texcoord0;\n	v_Texcoord1=a_Texcoord1;\n	\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	v_Normal=a_Normal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||(defined(RECEIVESHADOW)&&defined(SHADOWMAP_PSSM1))\n	v_PositionWorld=(u_WorldMat*a_Position).xyz;\n#endif\n\n#ifdef LIGHTMAP\n	//这个地方使用a_Normal 并不是真的代表normal，其实凑巧法线图的uv正好是符合 light_Map的UV\n	//v_LightMapUV=vec2(a_Normal.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,(a_Normal.y-1.0)*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n	v_LightMapUV=vec2(a_Normal.x,1.0 - a_Normal.y) * u_LightmapScaleOffset.xy + u_LightmapScaleOffset.zw;\n	v_LightMapUV.y=1.0-v_LightMapUV.y;\n#endif\n\n#ifdef RECEIVESHADOW\n	v_posViewZ = gl_Position.w;\n	#ifdef SHADOWMAP_PSSM1\n		v_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n	#endif\n#endif\n\n}",t='#ifdef HIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\n#include "Lighting.glsl";\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	uniform vec3 u_MaterialDiffuse;\n	uniform vec4 u_MaterialSpecular;\n	uniform vec3 u_CameraPos;\n	varying vec3 v_Normal;\n	varying vec3 v_PositionWorld;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(LIGHTMAP)\n	uniform vec3 u_MaterialAmbient;\n#endif\n\n#ifdef FOG\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	uniform vec3 u_FogColor;\n#endif\n\n#ifdef DIRECTIONLIGHT\n	uniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\n	uniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\n	uniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n	#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n	uniform mat4 u_lightShadowVP[4];\n	#endif\n	#ifdef SHADOWMAP_PSSM1 \n	varying vec4 v_lightMVPPos;\n	#endif\n#endif\nvarying float v_posViewZ;\n\n\nuniform sampler2D u_SplatAlphaTexture;\nuniform sampler2D u_NormalTexture;\nuniform sampler2D u_DiffuseTexture1;\nuniform sampler2D u_DiffuseTexture2;\nuniform sampler2D u_DiffuseTexture3;\nuniform sampler2D u_DiffuseTexture4;\nuniform vec2 u_DiffuseScale1;\nuniform vec2 u_DiffuseScale2;\nuniform vec2 u_DiffuseScale3;\nuniform vec2 u_DiffuseScale4;\nvarying vec2 v_Texcoord0;\nvarying vec2 v_Texcoord1;\n\n#ifdef LIGHTMAP\n	uniform sampler2D u_LightMap;\n	varying vec2 v_LightMapUV;\n#endif\n\nvoid main()\n{\n	#ifdef DETAIL_NUM1\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord1/u_DiffuseScale1);\n		vec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		gl_FragColor.xyz = color1.xyz;\n		gl_FragColor.w = splatAlpha.a;\n	#endif\n	#ifdef DETAIL_NUM2\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord1/u_DiffuseScale1);\n		vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord1/u_DiffuseScale2);\n		vec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		gl_FragColor.xyz = color1.xyz * (1.0-splatAlpha.r) + color2.xyz * splatAlpha.r;\n		gl_FragColor.w = splatAlpha.a;\n	#endif\n	#ifdef DETAIL_NUM3\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord1/u_DiffuseScale1);\n		vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord1/u_DiffuseScale2);\n		vec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord1/u_DiffuseScale3);\n		vec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		gl_FragColor.xyz = color1.xyz * (1.0-(splatAlpha.r+splatAlpha.g)) + color2.xyz * splatAlpha.r + color3.xyz * splatAlpha.g;\n		gl_FragColor.w = splatAlpha.a;\n	#endif\n	#ifdef DETAIL_NUM4\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord1/u_DiffuseScale1);\n		vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord1/u_DiffuseScale2);\n		vec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord1/u_DiffuseScale3);\n		vec4 color4 = texture2D(u_DiffuseTexture4, v_Texcoord1/u_DiffuseScale4);\n		vec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		gl_FragColor.xyz = color1.xyz * (1.0-(splatAlpha.r+splatAlpha.g+splatAlpha.b))+ color2.xyz * splatAlpha.r + color3.xyz * splatAlpha.g + color4.xyz * splatAlpha.b;\n		gl_FragColor.w = splatAlpha.a;\n	#endif\n	\n		\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n    vec3 normal = texture2D(u_NormalTexture,v_Normal.xy).xyz;\n	normal = normal*2.0 - vec3(1.0);\n	vec3 diffuse = vec3(0.0);\n	vec3 ambient = vec3(0.0);\n	vec3 specular= vec3(0.0);\n	vec3 dif, amb, spe;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	vec3 toEye;\n	#ifdef FOG\n		toEye=u_CameraPos-v_PositionWorld;\n		float toEyeLength=length(toEye);\n		toEye/=toEyeLength;\n	#else\n		toEye=normalize(u_CameraPos-v_PositionWorld);\n	#endif\n#endif\n\n#ifdef DIRECTIONLIGHT\n	computeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n	computePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n	ComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n	float shadowValue = 1.0;\n	#ifdef SHADOWMAP_PSSM3\n		shadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n	#endif\n	#ifdef SHADOWMAP_PSSM2\n		shadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n	#endif \n	#ifdef SHADOWMAP_PSSM1\n		shadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n	#endif\n#endif\n\nvec3 globalDiffuse=u_AmbientColor;\n#ifdef LIGHTMAP\n	float exponent = texture2D(u_LightMap, v_LightMapUV).a;\n	vec3 finalDiffuse = texture2D(u_LightMap, v_LightMapUV).rgb;\n	float ratio = pow(2.0, exponent * 255.0 - (128.0 + 8.0));\n	finalDiffuse = finalDiffuse * 255.0 * ratio;	\n	globalDiffuse += pow(finalDiffuse, vec3(1.0/2.2));\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		gl_FragColor.rgb=gl_FragColor.rgb*globalDiffuse;\n	#else\n		#if defined(RECEIVESHADOW)		\n			gl_FragColor.rgb=gl_FragColor.rgb*(globalDiffuse * shadowValue);\n			//vec3 tColor= u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue + mix(vec3(0.15,0.15,0.15),vec3(0.0),shadowValue);\n			//gl_FragColor.rgb*=tColor;\n		#else\n			gl_FragColor.rgb=gl_FragColor.rgb*(globalDiffuse);\n		#endif\n	#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	#ifdef RECEIVESHADOW\n		gl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular * shadowValue,gl_FragColor.a);\n	#else\n		gl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular, gl_FragColor.a);\n	#endif\n#endif\n\n\n	#ifdef FOG\n		float lerpFact=clamp((1.0/gl_FragCoord.w-u_FogStart)/u_FogRange,0.0,1.0);\n		#ifdef ADDTIVEFOG\n			gl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n		#else\n			gl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n		#endif\n	#endif\n}\n\n',r=sn.add("Terrain",n,i,Yi.shaderDefines,Ji.shaderDefines),r._addShaderPass(e,t),n={a_Position:0,a_Normal:3,a_Texcoord0:2},i={u_MvpMatrix:[yi.MVPMATRIX,2],u_WorldMat:[yi.WORLDMATRIX,2],u_CameraPos:[0,3],u_LightmapScaleOffset:[Yi.LIGHTMAPSCALEOFFSET,2],u_LightMap:[Yi.LIGHTMAP,2],u_SplatAlphaTexture:[0,1],u_DiffuseTexture1:[1,1],u_DiffuseTexture2:[2,1],u_DiffuseTexture3:[3,1],u_DiffuseTexture4:[4,1],u_DiffuseTexture5:[5,1],u_DiffuseScaleOffset1:[6,1],u_DiffuseScaleOffset2:[7,1],u_DiffuseScaleOffset3:[8,1],u_DiffuseScaleOffset4:[9,1],u_DiffuseScaleOffset5:[10,1],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Color":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Color":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Color":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]},e="attribute vec4 a_Position;\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\n\nvarying vec2 v_Texcoord0;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(LIGHTMAP)\n	attribute vec3 a_Normal;\n	varying vec3 v_Normal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||(defined(RECEIVESHADOW)&&defined(SHADOWMAP_PSSM1))\n	uniform mat4 u_WorldMat;\n	varying vec3 v_PositionWorld;\n#endif\n\n#ifdef LIGHTMAP\n	varying vec2 v_LightMapUV;\n	uniform vec4 u_LightmapScaleOffset;\n#endif\n\n#ifdef RECEIVESHADOW\n	varying float v_posViewZ;\n	#ifdef SHADOWMAP_PSSM1 \n		varying vec4 v_lightMVPPos;\n		uniform mat4 u_lightShadowVP[4];\n	#endif\n#endif\n\nvoid main()\n{\n	gl_Position = u_MvpMatrix * a_Position;\n  \n	v_Texcoord0 = a_Texcoord0;\n  \n	#ifdef LIGHTMAP\n		v_LightMapUV = vec2(a_Texcoord0.x, 1.0 - a_Texcoord0.y) * u_LightmapScaleOffset.xy + u_LightmapScaleOffset.zw;\n		v_LightMapUV.y = 1.0 - v_LightMapUV.y;\n	#endif\n  \n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		v_Normal = a_Normal;\n	#endif\n\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||(defined(RECEIVESHADOW)&&defined(SHADOWMAP_PSSM1))\n		v_PositionWorld=(u_WorldMat*a_Position).xyz;\n	#endif\n\n	#ifdef RECEIVESHADOW\n		v_posViewZ = gl_Position.w;\n		#ifdef SHADOWMAP_PSSM1\n			v_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n		#endif\n	#endif\n}",t='#ifdef HIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\n#include "Lighting.glsl";\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)\n	uniform vec3 u_CameraPos;\n	varying vec3 v_Normal;\n	varying vec3 v_PositionWorld;\n#endif\n\n#ifdef FOG\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	uniform vec3 u_FogColor;\n#endif\n\n\n#ifdef DIRECTIONLIGHT\n	uniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\n	uniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\n	uniform SpotLight u_SpotLight;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n	#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n	uniform mat4 u_lightShadowVP[4];\n	#endif\n	#ifdef SHADOWMAP_PSSM1 \n	varying vec4 v_lightMVPPos;\n	#endif\n#endif\nvarying float v_posViewZ;\n\nuniform vec3 u_AmbientColor;\n\nuniform sampler2D u_SplatAlphaTexture;\n\nuniform sampler2D u_DiffuseTexture1;\nuniform sampler2D u_DiffuseTexture2;\nuniform sampler2D u_DiffuseTexture3;\nuniform sampler2D u_DiffuseTexture4;\nuniform sampler2D u_DiffuseTexture5;\n\nuniform vec4 u_DiffuseScaleOffset1;\nuniform vec4 u_DiffuseScaleOffset2;\nuniform vec4 u_DiffuseScaleOffset3;\nuniform vec4 u_DiffuseScaleOffset4;\nuniform vec4 u_DiffuseScaleOffset5;\n\nvarying vec2 v_Texcoord0;\n\n#ifdef LIGHTMAP\n	uniform sampler2D u_LightMap;\n	varying vec2 v_LightMapUV;\n#endif\n\nvoid main()\n{\n	vec4 splatAlpha = vec4(1.0);\n	#ifdef ExtendTerrain_DETAIL_NUM1\n		splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n		gl_FragColor.xyz = color1.xyz * splatAlpha.r;\n	#endif\n	#ifdef ExtendTerrain_DETAIL_NUM2\n		splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n		vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScaleOffset2.xy);\n		gl_FragColor.xyz = color1.xyz * splatAlpha.r + color2.xyz * (1.0 - splatAlpha.r);\n	#endif\n	#ifdef ExtendTerrain_DETAIL_NUM3\n		splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n		vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScaleOffset2.xy);\n		vec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord0 * u_DiffuseScaleOffset3.xy);\n		gl_FragColor.xyz = color1.xyz * splatAlpha.r  + color2.xyz * splatAlpha.g + color3.xyz * (1.0 - splatAlpha.r - splatAlpha.g);\n	#endif\n	#ifdef ExtendTerrain_DETAIL_NUM4\n		splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n		vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScaleOffset2.xy);\n		vec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord0 * u_DiffuseScaleOffset3.xy);\n		vec4 color4 = texture2D(u_DiffuseTexture4, v_Texcoord0 * u_DiffuseScaleOffset4.xy);\n		gl_FragColor.xyz = color1.xyz * splatAlpha.r  + color2.xyz * splatAlpha.g + color3.xyz * splatAlpha.b + color4.xyz * (1.0 - splatAlpha.r - splatAlpha.g - splatAlpha.b);\n	#endif\n	#ifdef ExtendTerrain_DETAIL_NUM5\n		splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n		vec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScaleOffset1.xy);\n		vec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScaleOffset2.xy);\n		vec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord0 * u_DiffuseScaleOffset3.xy);\n		vec4 color4 = texture2D(u_DiffuseTexture4, v_Texcoord0 * u_DiffuseScaleOffset4.xy);\n		vec4 color5 = texture2D(u_DiffuseTexture5, v_Texcoord0 * u_DiffuseScaleOffset5.xy);\n		gl_FragColor.xyz = color1.xyz * splatAlpha.r  + color2.xyz * splatAlpha.g + color3.xyz * splatAlpha.b + color4.xyz * splatAlpha.a + color5.xyz * (1.0 - splatAlpha.r - splatAlpha.g - splatAlpha.b - splatAlpha.a);\n	#endif\n		gl_FragColor.w = splatAlpha.a;\n		\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n    vec3 normal = v_Normal;\n	vec3 diffuse = vec3(0.0);\n	vec3 ambient = vec3(0.0);\n	vec3 specular= vec3(0.0);\n	vec3 dif, amb, spe;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)\n	vec3 toEye;\n	#ifdef FOG\n		toEye=u_CameraPos-v_PositionWorld;\n		float toEyeLength=length(toEye);\n		toEye/=toEyeLength;\n	#else\n		toEye=normalize(u_CameraPos-v_PositionWorld);\n	#endif\n#endif\n\n#ifdef DIRECTIONLIGHT\n	//computeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n	\n	LayaAirBlinnPhongDiectionLight(vec3(0.0), 1.0, normal, vec3(1.0), toEye,u_DirectionLight, dif, spe);\n	\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n	//computePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n	\n	LayaAirBlinnPhongPointLight(v_PositionWorld, vec3(0.0), 1.0, normal, vec3(1.0), toEye, u_PointLight, dif, spe);\n	\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n	//ComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n	\n	LayaAirBlinnPhongSpotLight(v_PositionWorld, vec3(0.0), 1.0, normal, vec3(1.0), toEye, u_SpotLight, dif, spe);\n	\n	diffuse+=dif;\n	ambient+=amb;\n	specular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n	float shadowValue = 1.0;\n	#ifdef SHADOWMAP_PSSM3\n		shadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n	#endif\n	#ifdef SHADOWMAP_PSSM2\n		shadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n	#endif \n	#ifdef SHADOWMAP_PSSM1\n		shadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n	#endif\n#endif\n\nvec3 globalDiffuse=u_AmbientColor;\n#ifdef LIGHTMAP\n	globalDiffuse += DecodeLightmap(texture2D(u_LightMap, v_LightMapUV));\n	#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n		gl_FragColor.rgb=gl_FragColor.rgb*globalDiffuse;\n	#else\n		#if defined(RECEIVESHADOW)		\n			gl_FragColor.rgb=gl_FragColor.rgb*(globalDiffuse * shadowValue);\n			//vec3 tColor= u_MaterialAmbient + texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue + mix(vec3(0.15,0.15,0.15),vec3(0.0),shadowValue);\n			//gl_FragColor.rgb*=tColor;\n		#else\n			gl_FragColor.rgb=gl_FragColor.rgb*(globalDiffuse);\n		#endif\n	#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n	#ifdef RECEIVESHADOW\n		gl_FragColor = vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular * shadowValue,gl_FragColor.a);\n	#else\n		gl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular, gl_FragColor.a);\n	#endif\n#endif\n\n#ifdef FOG\n	float lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n	gl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\n\n\n\n\n',r=sn.add("ExtendTerrain",n,i,Yi.shaderDefines,Ki.shaderDefines),r._addShaderPass(e,t),n={a_Position:0,a_OffsetVector:1,a_Texcoord0X:4,a_Texcoord0Y:3,a_BirthTime:2},i={u_MvpMatrix:[yi.MVPMATRIX,2],u_VMatrix:[1,3],u_PMatrix:[2,3],u_TilingOffset:[3,1],u_MainTexture:[1,1],u_MainColor:[2,1],u_CurTime:[xr.CURTIME,2],u_LifeTime:[xr.LIFETIME,2],u_WidthCurve:[xr.WIDTHCURVE,2],u_WidthCurveKeyLength:[xr.WIDTHCURVEKEYLENGTH,2],u_GradientColorkey:[xr.GRADIENTCOLORKEY,2],u_GradientAlphakey:[xr.GRADIENTALPHAKEY,2]},e="attribute vec3 a_Position;\nattribute vec3 a_OffsetVector;\nattribute vec4 a_Color;\nattribute float a_Texcoord0X;\nattribute float a_Texcoord0Y;\nattribute float a_BirthTime;\n\nuniform mat4 u_VMatrix;\nuniform mat4 u_PMatrix;\n\nuniform vec4 u_TilingOffset;\n\nuniform float u_CurTime;\nuniform float u_LifeTime;\nuniform vec4 u_WidthCurve[10];\nuniform int u_WidthCurveKeyLength;\n\nuniform vec4 u_GradientColorkey[10];\nuniform vec2 u_GradientAlphakey[10];\n\nvarying vec2 v_Texcoord0;\nvarying vec4 v_Color;\n\nfloat hermiteInterpolate(float t, float outTangent, float inTangent, float duration, float value1, float value2)\n{\n	float t2 = t * t;\n	float t3 = t2 * t;\n	float a = 2.0 * t3 - 3.0 * t2 + 1.0;\n	float b = t3 - 2.0 * t2 + t;\n	float c = t3 - t2;\n	float d = -2.0 * t3 + 3.0 * t2;\n	return a * value1 + b * outTangent * duration + c * inTangent * duration + d * value2;\n}\n\nfloat getCurWidth(in float normalizeTime)\n{\n	float width;\n	if(normalizeTime == 0.0){\n		width=u_WidthCurve[0].w;\n	}\n	else if(normalizeTime >= 1.0){\n		width=u_WidthCurve[u_WidthCurveKeyLength - 1].w;\n	}\n	else{\n		for(int i = 0; i < 10; i ++ )\n		{\n			if(normalizeTime == u_WidthCurve[i].x){\n				width=u_WidthCurve[i].w;\n				break;\n			}\n			\n			vec4 lastFrame = u_WidthCurve[i];\n			vec4 nextFrame = u_WidthCurve[i + 1];\n			if(normalizeTime > lastFrame.x && normalizeTime < nextFrame.x)\n			{\n				float duration = nextFrame.x - lastFrame.x;\n				float t = (normalizeTime - lastFrame.x) / duration;\n				float outTangent = lastFrame.z;\n				float inTangent = nextFrame.y;\n				float value1 = lastFrame.w;\n				float value2 = nextFrame.w;\n				width=hermiteInterpolate(t, outTangent, inTangent, duration, value1, value2);\n				break;\n			}\n		}\n	}\n	return width;\n}	\n\nvec4 getColorFromGradientByBlend(in vec4 gradientColors[10], in vec2 gradientAlphas[10], in float normalizeTime)\n{\n	vec4 color;\n	for(int i = 1; i < 10; i++)\n	{\n		vec4 gradientColor = gradientColors[i];\n		float colorKey = gradientColor.x;\n		if(colorKey >= normalizeTime)\n		{\n			vec4 lastGradientColor = gradientColors[i-1];\n			float lastColorKey = lastGradientColor.x;\n			float age = (normalizeTime - lastColorKey) / (colorKey - lastColorKey);\n			color.rgb = mix(gradientColors[i-1].yzw, gradientColor.yzw, age);\n			break;\n		}\n	}\n	for(int i = 1; i < 10; i++)\n	{\n		vec2 gradientAlpha = gradientAlphas[i];\n		float alphaKey = gradientAlpha.x;\n		if(alphaKey >= normalizeTime)\n		{\n			vec2 lastGradientAlpha = gradientAlphas[i-1];\n			float lastAlphaKey = lastGradientAlpha.x;\n			float age = (normalizeTime - lastAlphaKey) / (alphaKey - lastAlphaKey);\n			color.a = mix(lastGradientAlpha.y, gradientAlpha.y, age);\n			break;\n		}\n	}\n	return color;\n}\n\nvec4 getColorFromGradientByFixed(in vec4 gradientColors[10], in vec2 gradientAlphas[10], in float normalizeTime)\n{\n	vec4 color;\n	for(int i = 1; i < 10; i++)\n	{\n		vec4 gradientColor = gradientColors[i];\n		if(gradientColor.w >= normalizeTime)\n		{\n			color.rgb = gradientColor.xyz;\n			break;\n		}\n	}\n	for(int i = 1; i < 10; i++)\n	{\n		vec2 gradientAlpha = gradientAlphas[i];\n		if(gradientAlpha.y >= normalizeTime)\n		{\n			color.a = gradientAlpha.x;\n			break;\n		}\n	}\n	return color;\n}\n\nvoid main()\n{\n	float normalizeTime = (u_CurTime - a_BirthTime) / u_LifeTime;\n	\n	#ifdef TILINGOFFSET\n		v_Texcoord0 = vec2(a_Texcoord0X, 1.0 - a_Texcoord0Y) * u_TilingOffset.xy + u_TilingOffset.zw;\n	#else\n		v_Texcoord0 = vec2(a_Texcoord0X, a_Texcoord0Y);\n	#endif\n	\n	#ifdef GRADIENTMODE_BLEND\n		v_Color = getColorFromGradientByBlend(u_GradientColorkey, u_GradientAlphakey, normalizeTime);\n	#else\n		v_Color = getColorFromGradientByFixed(u_GradientColorkey, u_GradientAlphakey, normalizeTime);\n	#endif\n	\n	gl_Position = u_PMatrix * u_VMatrix * vec4(a_Position + a_OffsetVector * getCurWidth(normalizeTime),1.0);\n}\n",t="#ifdef HIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\nuniform sampler2D u_MainTexture;\nuniform vec4 u_MainColor;\n\nvarying vec2 v_Texcoord0;\nvarying vec4 v_Color;\n\nvoid main()\n{	\n	vec4 color = 2.0 * u_MainColor * v_Color;\n	#ifdef MAINTEXTURE\n		vec4 mainTextureColor = texture2D(u_MainTexture, v_Texcoord0);\n		color *= mainTextureColor;\n	#endif\n	gl_FragColor = color;\n}\n\n",r=sn.add("Trail",n,i,xr.shaderDefines,ar.shaderDefines),r._addShaderPass(e,t),n={a_Position:0,a_Normal:3,a_Tangent0:5},i={u_MvpMatrix:[yi.MVPMATRIX,2],u_WorldMat:[yi.WORLDMATRIX,2],u_CameraPos:[0,3],u_Time:[24,4],u_MainTexture:[1,1],u_NormalTexture:[2,1],u_HorizonColor:[0,1],u_WaveScale:[3,1],u_WaveSpeed:[4,1]},e="attribute vec4 a_Position;\nattribute vec3 a_Normal;\nattribute vec4 a_Tangent0;\n\nuniform mat4 u_MvpMatrix;\nuniform mat4 u_WorldMat;\nuniform vec3 u_CameraPos;\nuniform float u_WaveScale;\nuniform vec4 u_WaveSpeed;\nuniform float u_Time;\n\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\nvarying vec2 v_Texcoord0;\nvarying vec2 v_Texcoord1;\n\nvoid main()\n{\n	vec4 positionWorld = u_WorldMat * a_Position;\n	vec4 position = u_MvpMatrix * a_Position;\n	\n	vec4 temp = vec4(positionWorld.x, positionWorld.z, positionWorld.x, positionWorld.z) * u_WaveScale + u_WaveSpeed * u_WaveScale * u_Time;\n	\n	v_Texcoord0 = temp.xy * vec2(0.4, 0.45);\n	v_Texcoord1 = temp.wz;\n	\n	mat3 worldMat = mat3(u_WorldMat);\n	v_Normal = worldMat * a_Normal;\n	v_Tangent = worldMat * a_Tangent0.xyz;\n	v_Binormal = cross(v_Normal, v_Tangent) * a_Tangent0.w;\n	\n	v_ViewDir = u_CameraPos - positionWorld.xyz;\n	gl_Position = position;\n}",t='#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\n#ifdef MAINTEXTURE\n	uniform sampler2D u_MainTexture;\n#endif\n\n#ifdef NORMALTEXTURE\n	uniform sampler2D u_NormalTexture;\n#endif\n\nuniform vec4 u_HorizonColor;\n\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec3 v_ViewDir;\nvarying vec2 v_Texcoord0;\nvarying vec2 v_Texcoord1;\n\n#include "Lighting.glsl"\n\nvoid main()\n{\n	vec4 bumpColor1 = texture2D(u_NormalTexture, v_Texcoord0);\n	vec4 bumpColor2 = texture2D(u_NormalTexture, v_Texcoord1);\n	\n	vec3 normal1 = NormalSampleToWorldSpace1(bumpColor1, v_Tangent, v_Binormal, v_Normal);\n	vec3 normal2 = NormalSampleToWorldSpace1(bumpColor2, v_Tangent, v_Binormal, v_Normal);\n	\n	vec3 normal = normalize((normal1 + normal2) * 0.5);\n	vec3 viewDir = normalize(v_ViewDir);\n	float fresnel = dot(viewDir, normal);\n	\n	vec4 waterColor = texture2D(u_MainTexture, vec2(fresnel, fresnel));\n	\n	vec4 color;\n	color.rgb = mix(waterColor.rgb, u_HorizonColor.rgb, vec3(waterColor.a));\n	color.a = u_HorizonColor.a;\n	\n	gl_FragColor = color;\n}\n\n',r=sn.add("WaterPrimary",n,i,null,tr.shaderDefines),r._addShaderPass(e,t)
},e}(),_n=function(){function e(e){this._counter=0,this._counter=e?e._counter:0}r(e,"laya.d3.shader.ShaderUniforms");var t=e.prototype;return t.registerUniform=function(){return this._counter++},e}(),un=function(){function e(){this.textureID=-1}return r(e,"laya.d3.shader.ShaderVariable"),e}(),dn=function(){function e(){this._currentPSSM=-1,this._shadowMapCount=3,this._maxDistance=200,this._ratioOfDistance=1/this._shadowMapCount,this._statesDirty=!0,this._shadowMapTextureSize=1024,this._scene=null,this._PCFType=0,this._shaderValueLightVP=null,this._spiltDistance=new Array(4),this._globalParallelLightDir=new Di(0,-1,0),this._boundingSphere=new Array(4),this._boundingBox=new Array(4),this._frustumPos=new Array(16),this._uniformDistance=new Array(4),this._logDistance=new Array(4),this._dimension=new Array(4),this._tempLookAt3=new Di,this._tempLookAt4=new Mi,this._tempValue=new Mi,this._tempPos=new Di,this._tempLightUp=new Di,this._tempMin=new Mi,this._tempMax=new Mi,this._tempMatrix44=new Wt,this._splitFrustumCulling=new Bt(Wt.DEFAULT),this._tempScaleMatrix44=new Wt,this._shadowPCFOffset=new xi(1/1024,1/1024),this._shaderValueDistance=new Mi,this.cameras=[],this._shaderValueVPs=[];var e=0;for(e=0;e<this._spiltDistance.length;e++)this._spiltDistance[e]=0;for(e=0;e<this._dimension.length;e++)this._dimension[e]=new xi;for(e=0;e<this._frustumPos.length;e++)this._frustumPos[e]=new Di;for(e=0;e<this._boundingBox.length;e++)this._boundingBox[e]=new Ft(new Di,new Di);for(e=0;e<this._boundingSphere.length;e++)this._boundingSphere[e]=new Ut(new Di,0);Wt.createScaling(new Di(.5,.5,1),this._tempScaleMatrix44),this._tempScaleMatrix44.elements[12]=.5,this._tempScaleMatrix44.elements[13]=.5}r(e,"laya.d3.shadowMap.ParallelSplitShadowMap");var t=e.prototype;return t.setInfo=function(e,t,n,i,r,a){r>3&&(this._shadowMapCount=3),this._scene=e,this._maxDistance=t,this.shadowMapCount=r,this._globalParallelLightDir=n,this._ratioOfDistance=1/this._shadowMapCount;for(var o=0;o<this._spiltDistance.length;o++)this._spiltDistance[o]=0;this._shadowMapTextureSize=i,this._shadowPCFOffset.x=1/this._shadowMapTextureSize,this._shadowPCFOffset.y=1/this._shadowMapTextureSize,this.setPCFType(a),this._statesDirty=!0},t.setPCFType=function(e){this._PCFType=e;var t=this._scene._defineDatas;switch(this._PCFType){case 0:t.add(ki.SHADERDEFINE_SHADOW_PCF_NO),t.remove(ki.SHADERDEFINE_SHADOW_PCF1),t.remove(ki.SHADERDEFINE_SHADOW_PCF2),t.remove(ki.SHADERDEFINE_SHADOW_PCF3);break;case 1:t.add(ki.SHADERDEFINE_SHADOW_PCF1),t.remove(ki.SHADERDEFINE_SHADOW_PCF_NO),t.remove(ki.SHADERDEFINE_SHADOW_PCF2),t.remove(ki.SHADERDEFINE_SHADOW_PCF3);break;case 2:t.add(ki.SHADERDEFINE_SHADOW_PCF2),t.remove(ki.SHADERDEFINE_SHADOW_PCF_NO),t.remove(ki.SHADERDEFINE_SHADOW_PCF1),t.remove(ki.SHADERDEFINE_SHADOW_PCF3);break;case 3:t.add(ki.SHADERDEFINE_SHADOW_PCF3),t.remove(ki.SHADERDEFINE_SHADOW_PCF_NO),t.remove(ki.SHADERDEFINE_SHADOW_PCF1),t.remove(ki.SHADERDEFINE_SHADOW_PCF2)}},t.getPCFType=function(){return this._PCFType},t.setFarDistance=function(e){this._maxDistance!=e&&(this._maxDistance=e,this._statesDirty=!0)},t.getFarDistance=function(){return this._maxDistance},t._beginSampler=function(e,t){if(0>e||e>this._shadowMapCount)throw new Error("ParallelSplitShadowMap: beginSample invalid index");this._currentPSSM=e,this._update(t)},t.endSampler=function(){this._currentPSSM=-1},t._calcAllLightCameraInfo=function(e){if(1===this._shadowMapCount)this._beginSampler(0,e),this.endSampler(e);else for(var t=0,n=this._shadowMapCount+1;n>t;t++)this._beginSampler(t,e),this.endSampler(e)},t._recalculate=function(e,t,n){this._calcSplitDistance(e),this._calcBoundingBox(t,n),this._rebuildRenderInfo()},t._update=function(e){var t=e.nearPlane,n=e.fieldOfView,i=e.aspectRatio;(this._statesDirty||this.lastNearPlane!==t||this.lastFieldOfView!==n||this.lastAspectRatio!==i)&&(this._recalculate(t,n,i),this._uploadShaderValue(),this._statesDirty=!1,this.lastNearPlane=t,this.lastFieldOfView=n,this.lastAspectRatio=i),this._calcLightViewProject(e)},t._uploadShaderValue=function(){var e=this._scene._defineDatas;switch(this._shadowMapCount){case 1:e.add(ki.SHADERDEFINE_SHADOW_PSSM1),e.remove(ki.SHADERDEFINE_SHADOW_PSSM2),e.remove(ki.SHADERDEFINE_SHADOW_PSSM3);break;case 2:e.add(ki.SHADERDEFINE_SHADOW_PSSM2),e.remove(ki.SHADERDEFINE_SHADOW_PSSM1),e.remove(ki.SHADERDEFINE_SHADOW_PSSM3);break;case 3:e.add(ki.SHADERDEFINE_SHADOW_PSSM3),e.remove(ki.SHADERDEFINE_SHADOW_PSSM1),e.remove(ki.SHADERDEFINE_SHADOW_PSSM2)}var t=this._scene._shaderValues;switch(t.setVector(15,this._shaderValueDistance),t.setBuffer(16,this._shaderValueLightVP),t.setVector(17,this._shadowPCFOffset),this._shadowMapCount){case 3:t.setTexture(18,this.cameras[1].renderTarget),t.setTexture(19,this.cameras[2].renderTarget),t.setTexture(20,this.cameras[3].renderTarget);break;case 2:t.setTexture(18,this.cameras[1].renderTarget),t.setTexture(19,this.cameras[2].renderTarget);break;case 1:t.setTexture(18,this.cameras[1].renderTarget)}},t._calcSplitDistance=function(e){var t=this._maxDistance,n=1/this._shadowMapCount,i=0;for(i=0;i<=this._shadowMapCount;i++)this._uniformDistance[i]=e+(t-e)*i*n;var r=t/e;for(i=0;i<=this._shadowMapCount;i++){var a=Math.pow(r,i*n);this._logDistance[i]=e*a}for(i=0;i<=this._shadowMapCount;i++)this._spiltDistance[i]=this._uniformDistance[i]*this._ratioOfDistance+this._logDistance[i]*(1-this._ratioOfDistance);this._shaderValueDistance.x=this._spiltDistance[1],this._shaderValueDistance.y=this._spiltDistance[2],this._shaderValueDistance.z=this._spiltDistance[3],this._shaderValueDistance.w=this._spiltDistance[4]},t._calcBoundingBox=function(e,t){var n=3.1415926*e/180,i=Math.tan(n/2),r=0/0,a=0/0,o=0/0,s=0;for(s=0;s<=this._shadowMapCount;s++){o=this._spiltDistance[s],r=o*i,a=r*t;var l=this._frustumPos[4*s+0].elements;l[0]=-a,l[1]=-r,l[2]=-o,l=this._frustumPos[4*s+1].elements,l[0]=a,l[1]=-r,l[2]=-o,l=this._frustumPos[4*s+2].elements,l[0]=-a,l[1]=r,l[2]=-o,l=this._frustumPos[4*s+3].elements,l[0]=a,l[1]=r,l[2]=-o,l=this._dimension[s].elements,l[0]=a,l[1]=r}var h,c,_,u;for(s=1;s<=this._shadowMapCount;s++)h=this._dimension[s].elements,c=this._boundingBox[s].min.elements,c[0]=-h[0],c[1]=-h[1],c[2]=-this._spiltDistance[s],_=this._boundingBox[s].max.elements,_[0]=h[0],_[1]=h[1],_[2]=-this._spiltDistance[s-1],u=this._boundingSphere[s].center.elements,u[0]=.5*(c[0]+_[0]),u[1]=.5*(c[1]+_[1]),u[2]=.5*(c[2]+_[2]),this._boundingSphere[s].radius=.5*Math.sqrt(Math.pow(_[0]-c[0],2)+Math.pow(_[1]-c[1],2)+Math.pow(_[2]-c[2],2));c=this._boundingBox[0].min.elements,h=this._dimension[this._shadowMapCount].elements,c[0]=-h[0],c[1]=-h[1],c[2]=-this._spiltDistance[this._shadowMapCount],_=this._boundingBox[0].max.elements,_[0]=h[0],_[1]=h[1],_[2]=-this._spiltDistance[0],u=this._boundingSphere[0].center.elements,u[0]=.5*(c[0]+_[0]),u[1]=.5*(c[1]+_[1]),u[2]=.5*(c[2]+_[2]),this._boundingSphere[0].radius=.5*Math.sqrt(Math.pow(_[0]-c[0],2)+Math.pow(_[1]-c[1],2)+Math.pow(_[2]-c[2],2))},t.calcSplitFrustum=function(e){this._currentPSSM>0?Wt.createPerspective(3.1416*e.fieldOfView/180,e.aspectRatio,this._spiltDistance[this._currentPSSM-1],this._spiltDistance[this._currentPSSM],this._tempMatrix44):Wt.createPerspective(3.1416*e.fieldOfView/180,e.aspectRatio,this._spiltDistance[0],this._spiltDistance[this._shadowMapCount],this._tempMatrix44),Wt.multiply(this._tempMatrix44,e.viewMatrix,this._tempMatrix44),this._splitFrustumCulling.matrix=this._tempMatrix44},t._rebuildRenderInfo=function(){var e=this._shadowMapCount+1,t=0;for(this.cameras.length=e,t=0;e>t;t++){if(!this.cameras[t]){var n=new mr;n.name="lightCamera"+t,n.clearColor=new Mi(1,1,1,1),this.cameras[t]=n}var i=this.cameras[t].renderTarget;(null==i||i.width!=this._shadowMapTextureSize||i.height!=this._shadowMapTextureSize)&&(i&&i.destroy(),i=new dr(this._shadowMapTextureSize,this._shadowMapTextureSize,1,0),i.filterMode=0,this.cameras[t].renderTarget=i)}},t._calcLightViewProject=function(t){{var n=this._boundingSphere[this._currentPSSM],i=t.transform.worldMatrix;n.radius}n.center.cloneTo(this._tempLookAt3),Di.transformV3ToV4(this._tempLookAt3,i,this._tempLookAt4);var r=this._tempLookAt3.elements,a=this._tempLookAt4.elements;r[0]=a[0],r[1]=a[1],r[2]=a[2];var o=this._tempLightUp.elements;t.transform.worldMatrix.getForward(e._tempVector30);var s=e._tempVector30.elements;o[0]=s[0],o[1]=1,o[2]=s[2],Di.normalize(this._tempLightUp,this._tempLightUp),Di.scale(this._globalParallelLightDir,4*n.radius,this._tempPos),Di.subtract(this._tempLookAt3,this._tempPos,this._tempPos);var l=this.cameras[this._currentPSSM];l.transform.position=this._tempPos,l.transform.lookAt(this._tempLookAt3,this._tempLightUp,!1);var h=this._tempMax.elements,c=this._tempMin.elements;h[0]=h[1]=h[2]=-1e5,h[3]=1,c[0]=c[1]=c[2]=1e5,c[3]=1,Wt.multiply(l.viewMatrix,i,this._tempMatrix44);var _=this._tempValue.elements,u=[];u.length=8,this._boundingBox[this._currentPSSM].getCorners(u);for(var d=0;8>d;d++){var f=u[d].elements;_[0]=f[0],_[1]=f[1],_[2]=f[2],_[3]=1,Mi.transformByM4x4(this._tempValue,this._tempMatrix44,this._tempValue),c[0]=_[0]<c[0]?_[0]:c[0],c[1]=_[1]<c[1]?_[1]:c[1],c[2]=_[2]<c[2]?_[2]:c[2],h[0]=_[0]>h[0]?_[0]:h[0],h[1]=_[1]>h[1]?_[1]:h[1],h[2]=_[2]>h[2]?_[2]:h[2]}Mi.add(this._tempMax,this._tempMin,this._tempValue),_[0]*=.5,_[1]*=.5,_[2]*=.5,_[3]=1,Mi.transformByM4x4(this._tempValue,l.transform.worldMatrix,this._tempValue);var m=Math.abs(-this._tempMax.z),p=m>this._maxDistance?m:this._maxDistance;Di.scale(this._globalParallelLightDir,p,this._tempPos);var v=this._tempPos.elements;v[0]=_[0]-v[0],v[1]=_[1]-v[1],v[2]=_[2]-v[2],l.transform.position=this._tempPos,l.transform.lookAt(this._tempLookAt3,this._tempLightUp,!1),Wt.createOrthoOffCenterRH(c[0],h[0],c[1],h[1],1,p+.5*(h[2]-c[2]),l.projectionMatrix);var E=l.projectionViewMatrix;e.multiplyMatrixOutFloat32Array(this._tempScaleMatrix44,E,this._shaderValueVPs[this._currentPSSM])},t.setShadowMapTextureSize=function(e){e!==this._shadowMapTextureSize&&(this._shadowMapTextureSize=e,this._shadowPCFOffset.x=1/this._shadowMapTextureSize,this._shadowPCFOffset.y=1/this._shadowMapTextureSize,this._statesDirty=!0)},t.disposeAllRenderTarget=function(){for(var e=0,t=this._shadowMapCount+1;t>e;e++)this.cameras[e].renderTarget&&(this.cameras[e].renderTarget.destroy(),this.cameras[e].renderTarget=null)},a(0,t,"shadowMapCount",function(){return this._shadowMapCount},function(e){if(e=e>0?e:1,e=3>=e?e:3,this._shadowMapCount!=e){this._shadowMapCount=e,this._ratioOfDistance=1/this._shadowMapCount,this._statesDirty=!0,this._shaderValueLightVP=new Float32Array(16*e),this._shaderValueVPs.length=e;for(var t=0;e>t;t++)this._shaderValueVPs[t]=new Float32Array(this._shaderValueLightVP.buffer,64*t)}}),e.multiplyMatrixOutFloat32Array=function(e,t,n){var i,r,a,o,s,l,h;for(r=e.elements,a=t.elements,i=0;4>i;i++)o=r[i],s=r[i+4],l=r[i+8],h=r[i+12],n[i]=o*a[0]+s*a[1]+l*a[2]+h*a[3],n[i+4]=o*a[4]+s*a[5]+l*a[6]+h*a[7],n[i+8]=o*a[8]+s*a[9]+l*a[10]+h*a[11],n[i+12]=o*a[12]+s*a[13]+l*a[14]+h*a[15]},e.MAX_PSSM_COUNT=3,i(e,["_tempVector30",function(){return this._tempVector30=new Di}]),e}(),fn=function(){function e(){this._boundingSphere=null,this._boundingBox=null,this._sizeOfY=null,this._currentLODLevel=0,this._lastDistanceToEye=0/0,this._originalBoundingSphere=null,this._originalBoundingBox=null,this._originalBoundingBoxCorners=null,this._bUseStrip=!1,this._gridSize=0/0,this._beginGridX=0,this._beginGridZ=0,this._LODError=null,e.__init__(),this._currentLODLevel=0}r(e,"laya.d3.terrain.TerrainLeaf");var t=e.prototype;return t.calcVertextNorml=function(t,n,i,r,a,o){var s=0,l=0;l=-1*e.getHeightFromTerrainHeightData(t-1,n-1,i,r,a),l+=-1*e.getHeightFromTerrainHeightData(t-1,n,i,r,a),l+=-1*e.getHeightFromTerrainHeightData(t-1,n+1,i,r,a),l+=1*e.getHeightFromTerrainHeightData(t+1,n-1,i,r,a),l+=1*e.getHeightFromTerrainHeightData(t+1,n,i,r,a),l+=1*e.getHeightFromTerrainHeightData(t+1,n+1,i,r,a),s=-1*e.getHeightFromTerrainHeightData(t-1,n-1,i,r,a),s+=-1*e.getHeightFromTerrainHeightData(t,n-1,i,r,a),s+=-1*e.getHeightFromTerrainHeightData(t+1,n-1,i,r,a),s+=1*e.getHeightFromTerrainHeightData(t-1,n+1,i,r,a),s+=1*e.getHeightFromTerrainHeightData(t,n+1,i,r,a),s+=1*e.getHeightFromTerrainHeightData(t+1,n+1,i,r,a),o.x=-l,o.y=6,o.z=-s,Di.normalize(o,o)},t.calcVertextNormlUV=function(e,t,n,i,r){r.x=e/n,r.y=t/i,r.z=t/i},t.calcVertextBuffer=function(t,n,i,r,a,o,s,l,h,c,_,u){if(1==u&&!e.__ADAPT_MATRIX__){e.__ADAPT_MATRIX__=new Wt;var d=new Wt;Wt.createRotationY(Math.PI,e.__ADAPT_MATRIX__),Wt.createTranslate(new Di(0,0,(_-1)*a),d),Wt.multiply(d,e.__ADAPT_MATRIX__,e.__ADAPT_MATRIX__),e.__ADAPT_MATRIX_INV__=new Wt,e.__ADAPT_MATRIX__.invert(e.__ADAPT_MATRIX_INV__)}this._gridSize=a,this._beginGridX=t*e.CHUNK_GRID_NUM+i,this._beginGridZ=n*e.CHUNK_GRID_NUM+r;for(var f=s*l,m=2147483647,p=-2147483648,v=new Di,E=0,T=e.LEAF_GRID_NUM+1;T>E;E++)for(var g=0,S=e.LEAF_GRID_NUM+1;S>g;g++)e.__VECTOR3__.x=(this._beginGridX+g)*this._gridSize,e.__VECTOR3__.z=(this._beginGridZ+E)*this._gridSize,e.__VECTOR3__.y=h[(this._beginGridZ+E)*c+(this._beginGridX+g)],m=e.__VECTOR3__.y<m?e.__VECTOR3__.y:m,p=e.__VECTOR3__.y>p?e.__VECTOR3__.y:p,e.__ADAPT_MATRIX__&&Di.transformV3ToV3(e.__VECTOR3__,e.__ADAPT_MATRIX__,e.__VECTOR3__),o[f]=e.__VECTOR3__.x,f++,o[f]=e.__VECTOR3__.y,f++,o[f]=e.__VECTOR3__.z,f++,this.calcVertextNormlUV(this._beginGridX+g,this._beginGridZ+E,c,_,v),o[f]=v.x,f++,o[f]=v.y,f++,o[f]=v.z,f++,o[f]=(i+g)/e.CHUNK_GRID_NUM,f++,o[f]=(r+E)/e.CHUNK_GRID_NUM,f++,o[f]=this._beginGridX+g,f++,o[f]=this._beginGridZ+E,f++;this._sizeOfY=new xi(m-1,p+1),this.calcLODErrors(h,c,_),this.calcOriginalBoudingBoxAndSphere()},t.calcSkirtVertextBuffer=function(t,n,i,r,a,o,s,l,h,c,_){this._gridSize=a,this._beginGridX=t*e.CHUNK_GRID_NUM+i,this._beginGridZ=n*e.CHUNK_GRID_NUM+r;var u=s*l,d=0,f=0,m=e.LEAF_GRID_NUM+1,p=new Di,v=0,E=0;for(d=0;2>d;d++)for(f=0;m>f;f++)e.__VECTOR3__.x=(this._beginGridX+f)*this._gridSize,e.__VECTOR3__.y=1==d?h[this._beginGridZ*c+(this._beginGridX+f)]:-this._gridSize,e.__VECTOR3__.z=(this._beginGridZ+0)*this._gridSize,e.__ADAPT_MATRIX__&&Di.transformV3ToV3(e.__VECTOR3__,e.__ADAPT_MATRIX__,e.__VECTOR3__),o[u]=e.__VECTOR3__.x,u++,o[u]=e.__VECTOR3__.y,u++,o[u]=e.__VECTOR3__.z,u++,v=0==d?this._beginGridZ-1:this._beginGridZ,this.calcVertextNormlUV(this._beginGridX+f,v,c,_,p),o[u]=p.x,u++,o[u]=p.y,u++,o[u]=p.z,u++,o[u]=(i+f)/e.CHUNK_GRID_NUM,u++,o[u]=(r+0)/e.CHUNK_GRID_NUM,u++,o[u]=this._beginGridX+f,u++,o[u]=v,u++;for(d=0;2>d;d++)for(f=0;m>f;f++)e.__VECTOR3__.x=(this._beginGridX+f)*this._gridSize,e.__VECTOR3__.y=0==d?h[(this._beginGridZ+e.LEAF_GRID_NUM)*c+(this._beginGridX+f)]:-this._gridSize,e.__VECTOR3__.z=(this._beginGridZ+e.LEAF_GRID_NUM)*this._gridSize,e.__ADAPT_MATRIX__&&Di.transformV3ToV3(e.__VECTOR3__,e.__ADAPT_MATRIX__,e.__VECTOR3__),o[u]=e.__VECTOR3__.x,u++,o[u]=e.__VECTOR3__.y,u++,o[u]=e.__VECTOR3__.z,u++,v=0==d?this._beginGridZ+e.LEAF_GRID_NUM:this._beginGridZ+e.LEAF_GRID_NUM+1,this.calcVertextNormlUV(this._beginGridX+f,v,c,_,p),o[u]=p.x,u++,o[u]=p.y,u++,o[u]=p.z,u++,o[u]=(i+f)/e.CHUNK_GRID_NUM,u++,o[u]=(r+e.LEAF_GRID_NUM)/e.CHUNK_GRID_NUM,u++,o[u]=this._beginGridX+f,u++,o[u]=v,u++;for(d=0;2>d;d++)for(f=0;m>f;f++)e.__VECTOR3__.x=(this._beginGridX+0)*this._gridSize,e.__VECTOR3__.y=0==d?h[(this._beginGridZ+f)*c+(this._beginGridX+0)]:-this._gridSize,e.__VECTOR3__.z=(this._beginGridZ+f)*this._gridSize,e.__ADAPT_MATRIX__&&Di.transformV3ToV3(e.__VECTOR3__,e.__ADAPT_MATRIX__,e.__VECTOR3__),o[u]=e.__VECTOR3__.x,u++,o[u]=e.__VECTOR3__.y,u++,o[u]=e.__VECTOR3__.z,u++,E=0==d?this._beginGridX:this._beginGridX-1,this.calcVertextNormlUV(E,this._beginGridZ+f,c,_,p),o[u]=p.x,u++,o[u]=p.y,u++,o[u]=p.z,u++,o[u]=(i+0)/e.CHUNK_GRID_NUM,u++,o[u]=(r+f)/e.CHUNK_GRID_NUM,u++,o[u]=E,u++,o[u]=this._beginGridZ+f,u++;for(d=0;2>d;d++)for(f=0;m>f;f++)e.__VECTOR3__.x=(this._beginGridX+e.LEAF_GRID_NUM)*this._gridSize,e.__VECTOR3__.y=1==d?h[(this._beginGridZ+f)*c+(this._beginGridX+e.LEAF_GRID_NUM)]:-this._gridSize,e.__VECTOR3__.z=(this._beginGridZ+f)*this._gridSize,e.__ADAPT_MATRIX__&&Di.transformV3ToV3(e.__VECTOR3__,e.__ADAPT_MATRIX__,e.__VECTOR3__),o[u]=e.__VECTOR3__.x,u++,o[u]=e.__VECTOR3__.y,u++,o[u]=e.__VECTOR3__.z,u++,E=0==d?this._beginGridX+e.LEAF_GRID_NUM+1:this._beginGridX+e.LEAF_GRID_NUM,this.calcVertextNormlUV(E,this._beginGridZ+f,c,_,p),o[u]=p.x,u++,o[u]=p.y,u++,o[u]=p.z,u++,o[u]=(i+e.LEAF_GRID_NUM)/e.CHUNK_GRID_NUM,u++,o[u]=(r+f)/e.CHUNK_GRID_NUM,u++,o[u]=E,u++,o[u]=this._beginGridZ+f,u++},t.calcOriginalBoudingBoxAndSphere=function(){var t=new Di(this._beginGridX*this._gridSize,this._sizeOfY.x,this._beginGridZ*this._gridSize),n=new Di((this._beginGridX+e.LEAF_GRID_NUM)*this._gridSize,this._sizeOfY.y,(this._beginGridZ+e.LEAF_GRID_NUM)*this._gridSize);e.__ADAPT_MATRIX__&&(Di.transformV3ToV3(t,e.__ADAPT_MATRIX__,t),Di.transformV3ToV3(n,e.__ADAPT_MATRIX__,n)),this._originalBoundingBox=new Ft(t,n);var i=new Di;Di.subtract(n,t,i),Di.scale(i,.5,i);var r=new Di;Di.add(t,i,r),this._originalBoundingSphere=new Ut(r,Di.scalarLength(i)),this._originalBoundingBoxCorners=o(8,null),this._originalBoundingBox.getCorners(this._originalBoundingBoxCorners),this._boundingBox=new Ft(new Di(-.5,-.5,-.5),new Di(.5,.5,.5)),this._boundingSphere=new Ut(new Di(0,0,0),1)},t.calcLeafBoudingBox=function(e){for(var t=0;8>t;t++)Di.transformCoordinate(this._originalBoundingBoxCorners[t],e,An._tempBoundBoxCorners[t]);Ft.createfromPoints(An._tempBoundBoxCorners,this._boundingBox)},t.calcLeafBoudingSphere=function(e,t){Di.transformCoordinate(this._originalBoundingSphere.center,e,this._boundingSphere.center),this._boundingSphere.radius=this._originalBoundingSphere.radius*t},t.calcLODErrors=function(t,n){this._LODError=new Float32Array(e._maxLODLevel+1);for(var i=1,r=0,a=e._maxLODLevel+1;a>r;r++){for(var o=0,s=0,l=e.LEAF_GRID_NUM;l>s;s+=i)for(var h=0,c=e.LEAF_GRID_NUM;c>h;h+=i)for(var _=t[(this._beginGridZ+s)*n+(this._beginGridX+h)],u=t[(this._beginGridZ+s)*n+(this._beginGridX+h)+i],d=t[(this._beginGridZ+s+i)*n+(this._beginGridX+h)],f=t[(this._beginGridZ+s+i)*n+(this._beginGridX+h)+i],m=0;i>m;m++)for(var p=m/i,v=0;i>v;v++){var E=v/i,T=t[(this._beginGridZ+s+m)*n+(this._beginGridX+h)+v],g=1>=E+p?_+(u-_)*E+(d-_)*p:f+(d-f)*(1-E)+(u-f)*(1-p),S=Math.abs(g-T);o=Math.max(o,S)}i*=2,this._LODError[r]=o}},t.determineLod=function(t,n,i,r){var a=Di.distance(t,this._boundingSphere.center),o=e._maxLODLevel;if(!r){if(this._lastDistanceToEye==a)return this._currentLODLevel;this._lastDistanceToEye>a&&(o=this._currentLODLevel)}for(var s=o;s>=1;s--)if(lr.LOD_DISTANCE_FACTOR*this._LODError[s]/a*n<i){this._currentLODLevel=s;break}return this._lastDistanceToEye=a,this._currentLODLevel},e.__init__=function(){if(!e._bInit){var t=e.CHUNK_GRID_NUM/e.LEAF_GRID_NUM*(e.CHUNK_GRID_NUM/e.LEAF_GRID_NUM);e._planeLODIndex=o(t);var n=0,i=0,r=0,a=0,s=0,l=0,h=null,c=null;for(n=0;t>n;n++)e._planeLODIndex[n]=new Array(e._maxLODLevel+1);for(n=0,a=e._maxLODLevel+1;a>n;n++)e._planeLODIndex[0][n]=e.calcPlaneLODIndex(n);for(n=1;t>n;n++)for(l=n*e.LEAF_PLANE_VERTEXT_COUNT,i=0,s=e._maxLODLevel+1;s>i;i++){for(h=e._planeLODIndex[0][i],c=new Uint16Array(h.length),r=0;r<h.length;r++)c[r]=h[r]+l;e._planeLODIndex[n][i]=c}for(e._skirtLODIndex=o(t),n=0;t>n;n++)e._skirtLODIndex[n]=new Array(e._maxLODLevel+1);for(n=0,a=e._maxLODLevel+1;a>n;n++)e._skirtLODIndex[0][n]=e.calcSkirtLODIndex(n);for(n=1;t>n;n++)for(l=n*e.LEAF_SKIRT_VERTEXT_COUNT,i=0,s=e._maxLODLevel+1;s>i;i++){for(h=e._skirtLODIndex[0][i],c=new Uint16Array(h.length),r=0;r<h.length;r++)c[r]=h[r]+l;e._skirtLODIndex[n][i]=c}e._bInit=!0}},e.getPlaneLODIndex=function(t,n){return e._planeLODIndex[t][n]},e.getSkirtLODIndex=function(t,n){return e._skirtLODIndex[t][n]},e.calcPlaneLODIndex=function(t){t>e._maxLODLevel&&(t=e._maxLODLevel);var n=e.LEAF_GRID_NUM+1,i=0,r=null,a=laya.d3.terrain.TerrainLeaf.LEAF_GRID_NUM/Math.pow(2,t);r=new Uint16Array(a*a*6);for(var o=laya.d3.terrain.TerrainLeaf.LEAF_GRID_NUM/a,s=0;s<e.LEAF_GRID_NUM;s+=o)for(var l=0;l<e.LEAF_GRID_NUM;l+=o)r[i]=(s+o)*n+l,i++,r[i]=s*n+l,i++,r[i]=s*n+l+o,i++,r[i]=s*n+l+o,i++,r[i]=(s+o)*n+l+o,i++,r[i]=(s+o)*n+l,i++;return r},e.calcSkirtLODIndex=function(t){t>e._maxLODLevel&&(t=e._maxLODLevel);var n=e.CHUNK_GRID_NUM/e.LEAF_GRID_NUM*(e.CHUNK_GRID_NUM/e.LEAF_GRID_NUM)*e.LEAF_PLANE_VERTEXT_COUNT,i=e.LEAF_GRID_NUM+1,r=0,a=null,o=laya.d3.terrain.TerrainLeaf.LEAF_GRID_NUM/Math.pow(2,t);a=new Uint16Array(4*o*6);for(var s=laya.d3.terrain.TerrainLeaf.LEAF_GRID_NUM/o,l=0;4>l;l++){for(var h=0;h<e.LEAF_GRID_NUM;h+=s)a[r]=n+i+h,r++,a[r]=n+h,r++,a[r]=n+h+s,r++,a[r]=n+h+s,r++,a[r]=n+i+h+s,r++,a[r]=n+i+h,r++;n+=2*i}return a},e.getHeightFromTerrainHeightData=function(e,t,n,i,r){return e=0>e?0:e,e=e>=i?i-1:e,t=0>t?0:t,t=t>=r?r-1:t,n[t*i+e]},e.CHUNK_GRID_NUM=64,e.LEAF_GRID_NUM=32,e.__ADAPT_MATRIX__=null,e.__ADAPT_MATRIX_INV__=null,e._planeLODIndex=null,e._skirtLODIndex=null,e._bInit=!1,i(e,["LEAF_PLANE_VERTEXT_COUNT",function(){return this.LEAF_PLANE_VERTEXT_COUNT=(e.LEAF_GRID_NUM+1)*(e.LEAF_GRID_NUM+1)},"LEAF_SKIRT_VERTEXT_COUNT",function(){return this.LEAF_SKIRT_VERTEXT_COUNT=2*(e.LEAF_GRID_NUM+1)*4},"LEAF_VERTEXT_COUNT",function(){return this.LEAF_VERTEXT_COUNT=e.LEAF_PLANE_VERTEXT_COUNT+e.LEAF_SKIRT_VERTEXT_COUNT},"LEAF_PLANE_MAX_INDEX_COUNT",function(){return this.LEAF_PLANE_MAX_INDEX_COUNT=e.LEAF_GRID_NUM*e.LEAF_GRID_NUM*6},"LEAF_SKIRT_MAX_INDEX_COUNT",function(){return this.LEAF_SKIRT_MAX_INDEX_COUNT=4*e.LEAF_GRID_NUM*6},"LEAF_MAX_INDEX_COUNT",function(){return this.LEAF_MAX_INDEX_COUNT=e.LEAF_PLANE_MAX_INDEX_COUNT+e.LEAF_SKIRT_MAX_INDEX_COUNT},"__VECTOR3__",function(){return this.__VECTOR3__=new Di},"_maxLODLevel",function(){return this._maxLODLevel=Math.log2(e.LEAF_GRID_NUM)}]),e}(),mn=function(){function e(){this.alphaMap=null,this.detailID=null,this.normalMap=null}return r(e,"laya.d3.terrain.unit.ChunkInfo"),e}(),pn=function(){function e(){this.diffuseTexture=null,this.normalTexture=null,this.scale=null,this.offset=null}return r(e,"laya.d3.terrain.unit.DetailTextureInfo"),e}(),vn=function(){function e(){this.ambientColor=null,this.diffuseColor=null,this.specularColor=null}return r(e,"laya.d3.terrain.unit.MaterialInfo"),e}(),En=function(){function e(){}return r(e,"laya.d3.utils.Physics3DUtils"),e.setColliderCollision=function(){},e.getIColliderCollision=function(){return!1},e.COLLISIONFILTERGROUP_DEFAULTFILTER=1,e.COLLISIONFILTERGROUP_STATICFILTER=2,e.COLLISIONFILTERGROUP_KINEMATICFILTER=4,e.COLLISIONFILTERGROUP_DEBRISFILTER=8,e.COLLISIONFILTERGROUP_SENSORTRIGGER=16,e.COLLISIONFILTERGROUP_CHARACTERFILTER=32,e.COLLISIONFILTERGROUP_CUSTOMFILTER1=64,e.COLLISIONFILTERGROUP_CUSTOMFILTER2=128,e.COLLISIONFILTERGROUP_CUSTOMFILTER3=256,e.COLLISIONFILTERGROUP_CUSTOMFILTER4=512,e.COLLISIONFILTERGROUP_CUSTOMFILTER5=1024,e.COLLISIONFILTERGROUP_CUSTOMFILTER6=2048,e.COLLISIONFILTERGROUP_CUSTOMFILTER7=4096,e.COLLISIONFILTERGROUP_CUSTOMFILTER8=8192,e.COLLISIONFILTERGROUP_CUSTOMFILTER9=16384,e.COLLISIONFILTERGROUP_CUSTOMFILTER10=32768,e.COLLISIONFILTERGROUP_ALLFILTER=-1,i(e,["gravity",function(){return this.gravity=new Di(0,-9.81,0)}]),e}(),Tn=function(){function e(){}return r(e,"laya.d3.utils.Picker"),e.calculateCursorRay=function(t,n,i,r,a,o){var s=t.elements[0],l=t.elements[1],h=e._tempVector30,c=h.elements;c[0]=s,c[1]=l,c[2]=n.minDepth;var _=e._tempVector31,u=_.elements;u[0]=s,u[1]=l,u[2]=n.maxDepth;var d=o.origin,f=e._tempVector32;n.unprojectFromWVP(h,i,r,a,d),n.unprojectFromWVP(_,i,r,a,f);var m=o.direction.elements;m[0]=f.x-d.x,m[1]=f.y-d.y,m[2]=f.z-d.z,Di.normalize(o.direction,o.direction)},e.rayIntersectsTriangle=function(t,n,i,r){var a,o=e._tempVector30,s=e._tempVector31;Di.subtract(i,n,o),Di.subtract(r,n,s);var l=e._tempVector32;Di.cross(t.direction,s,l);var h;if(h=Di.dot(o,l),h>-Number.MIN_VALUE&&h<Number.MIN_VALUE)return a=Number.NaN;var c=1/h,_=e._tempVector33;Di.subtract(t.origin,n,_);var u;if(u=Di.dot(_,l),u*=c,0>u||u>1)return a=Number.NaN;var d=e._tempVector34;Di.cross(_,o,d);var f;if(f=Di.dot(t.direction,d),f*=c,0>f||u+f>1)return a=Number.NaN;var m;return m=Di.dot(s,d),m*=c,a=0>m?Number.NaN:m},i(e,["_tempVector30",function(){return this._tempVector30=new Di},"_tempVector31",function(){return this._tempVector31=new Di},"_tempVector32",function(){return this._tempVector32=new Di},"_tempVector33",function(){return this._tempVector33=new Di},"_tempVector34",function(){return this._tempVector34=new Di}]),e}(),gn=(function(){function e(e,t){this._width=0,this._height=0,this._width=e,this._height=t}r(e,"laya.d3.utils.Size");var t=e.prototype;return a(0,t,"width",function(){return-1===this._width?Et.clientWidth:this._width}),a(0,t,"height",function(){return-1===this._height?Et.clientHeight:this._height}),a(1,e,"fullScreen",function(){return new e(-1,-1)}),e}(),function(){function t(){}return r(t,"laya.d3.utils.Utils3D"),t._convertLayaPosToBulletPos=function(e,t){var n=e.elements;t.setValue(-n[0],n[1],n[2])},t._rotationTransformScaleSkinAnimation=function(e,n,i,r,a,o,s,l,h,c,_,u){var d=t._tempArray16_0,f=t._tempArray16_1,m=t._tempArray16_2,p=r+r,v=a+a,E=o+o,T=r*p,g=a*p,S=a*v,x=o*p,D=o*v,M=o*E,A=s*p,R=s*v,I=s*E;d[15]=1,d[0]=1-S-M,d[1]=g+I,d[2]=x-R,d[4]=g-I,d[5]=1-T-M,d[6]=D+A,d[8]=x+R,d[9]=D-A,d[10]=1-T-S,f[15]=1,f[0]=l,f[5]=h,f[10]=c;var C,y,O,L,V;for(C=0;4>C;C++)y=d[C],O=d[C+4],L=d[C+8],V=d[C+12],m[C]=y,m[C+4]=O,m[C+8]=L,m[C+12]=y*e+O*n+L*i+V;for(C=0;4>C;C++)y=m[C],O=m[C+4],L=m[C+8],V=m[C+12],_[C+u]=y*f[0]+O*f[1]+L*f[2]+V*f[3],_[C+u+4]=y*f[4]+O*f[5]+L*f[6]+V*f[7],_[C+u+8]=y*f[8]+O*f[9]+L*f[10]+V*f[11],_[C+u+12]=y*f[12]+O*f[13]+L*f[14]+V*f[15]},t._createNodeByJson=function(e,n,i){var r;switch(e.type){case"Scene3D":r=new ki;break;case"Sprite3D":r=new yi;break;case"MeshSprite3D":r=new Tr,i&&i.push(r);break;case"SkinnedMeshSprite3D":r=new Sr;break;case"ShuriKenParticle3D":r=new gr;break;case"Terrain":r=new lr;break;case"Camera":r=new mr;break;case"DirectionLight":r=new pr;break;case"PointLight":r=new vr;break;case"SpotLight":r=new Er;break;case"TrailSprite3D":r=new xr;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var a=e.child;if(a)for(var o=0,s=a.length;s>o;o++){var h=t._createNodeByJson(a[o],n,i);r.addChild(h)}e.compId&&(r.compId=e.compId);var c=e.props,_=e.customProps;if(_)for(var u in _)c[u]=_[u];var d=e.components;if(d)for(var f=0,m=d.length;m>f;f++){var p=d[f],v=l.window.Laya[p.type];if(v){var E=r.addComponent(v);E._parse(p,n)}else console.warn("Unkown component type.")}return r._parse(c,n),r},t._computeBoneAndAnimationDatasByBindPoseMatrxix=function(e,t,n,i,r,a){var o,s,l=0,h=0,c=e.length;for(o=0;c>o;l+=e[o].keyframeWidth,h+=16,o++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(t[l+0],t[l+1],t[l+2],t[l+3],t[l+4],t[l+5],t[l+6],t[l+7],t[l+8],t[l+9],i,h),0!=o&&(s=16*e[o].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(i,s,i,h,i,h));var _=n.length;for(o=0;_>o;o++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(i,16*a[o],n[o],r,16*o)},t._computeAnimationDatasByArrayAndMatrixFast=function(e,t,n,i){for(var r=0,a=e.length;a>r;r++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(t,16*i[r],e[r],n,16*r)},t._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(e,t,n,i,r){var a,o,s=0,l=0,h=e.length;for(a=0;h>a;s+=e[a].keyframeWidth,l+=16,a++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(t[s+7],t[s+8],t[s+9],t[s+3],t[s+4],t[s+5],t[s+6],t[s+0],t[s+1],t[s+2],i,l),0!=a&&(o=16*e[a].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(i,o,i,l,i,l));var c=n.length;for(a=0;c>a;a++){var _=16*a;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(i,_,n[a],r,_)}},t._computeAnimationDatasByArrayAndMatrixFastOld=function(e,t,n){for(var i=e.length,r=0;i>r;r++){var a=16*r;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(t,a,e[r],n,a)}},t._computeRootAnimationData=function(e,t,n){for(var i=0,r=0,a=0,o=e.length;o>i;r+=e[i].keyframeWidth,a+=16,i++)laya.d3.utils.Utils3D.createAffineTransformationArray(t[r+0],t[r+1],t[r+2],t[r+3],t[r+4],t[r+5],t[r+6],t[r+7],t[r+8],t[r+9],n,a)},t.transformVector3ArrayByQuat=function(e,t,n,i,r){var a=n.elements,o=e[t],s=e[t+1],l=e[t+2],h=a[0],c=a[1],_=a[2],u=a[3],d=u*o+c*l-_*s,f=u*s+_*o-h*l,m=u*l+h*s-c*o,p=-h*o-c*s-_*l;i[r]=d*u+p*-h+f*-_-m*-c,i[r+1]=f*u+p*-c+m*-h-d*-_,i[r+2]=m*u+p*-_+d*-c-f*-h},t.mulMatrixByArray=function(e,n,i,r,a,o){var s,l,h,c,_;if(a===i){for(i=t._tempArray16_3,s=0;16>s;++s)i[s]=a[o+s];r=0}for(s=0;4>s;s++)l=e[n+s],h=e[n+s+4],c=e[n+s+8],_=e[n+s+12],a[o+s]=l*i[r+0]+h*i[r+1]+c*i[r+2]+_*i[r+3],a[o+s+4]=l*i[r+4]+h*i[r+5]+c*i[r+6]+_*i[r+7],a[o+s+8]=l*i[r+8]+h*i[r+9]+c*i[r+10]+_*i[r+11],a[o+s+12]=l*i[r+12]+h*i[r+13]+c*i[r+14]+_*i[r+15]},t.mulMatrixByArrayFast=function(e,t,n,i,r,a){var o,s,l,h,c;for(o=0;4>o;o++)s=e[t+o],l=e[t+o+4],h=e[t+o+8],c=e[t+o+12],r[a+o]=s*n[i+0]+l*n[i+1]+h*n[i+2]+c*n[i+3],r[a+o+4]=s*n[i+4]+l*n[i+5]+h*n[i+6]+c*n[i+7],r[a+o+8]=s*n[i+8]+l*n[i+9]+h*n[i+10]+c*n[i+11],r[a+o+12]=s*n[i+12]+l*n[i+13]+h*n[i+14]+c*n[i+15]},t.mulMatrixByArrayAndMatrixFast=function(e,t,n,i,r){var a,o,s,l,h,c=n.elements,_=c[0],u=c[1],d=c[2],f=c[3],m=c[4],p=c[5],v=c[6],E=c[7],T=c[8],g=c[9],S=c[10],x=c[11],D=c[12],M=c[13],A=c[14],R=c[15],I=t,C=t+4,y=t+8,O=t+12,L=r,V=r+4,w=r+8,N=r+12;for(a=0;4>a;a++)o=e[I+a],s=e[C+a],l=e[y+a],h=e[O+a],i[L+a]=o*_+s*u+l*d+h*f,i[V+a]=o*m+s*p+l*v+h*E,i[w+a]=o*T+s*g+l*S+h*x,i[N+a]=o*D+s*M+l*A+h*R},t.createAffineTransformationArray=function(e,t,n,i,r,a,o,s,l,h,c,_){var u=i+i,d=r+r,f=a+a,m=i*u,p=i*d,v=i*f,E=r*d,T=r*f,g=a*f,S=o*u,x=o*d,D=o*f;c[_+0]=(1-(E+g))*s,c[_+1]=(p+D)*s,c[_+2]=(v-x)*s,c[_+3]=0,c[_+4]=(p-D)*l,c[_+5]=(1-(m+g))*l,c[_+6]=(T+S)*l,c[_+7]=0,c[_+8]=(v+x)*h,c[_+9]=(T-S)*h,c[_+10]=(1-(m+E))*h,c[_+11]=0,c[_+12]=e,c[_+13]=t,c[_+14]=n,c[_+15]=1},t.transformVector3ArrayToVector3ArrayCoordinate=function(e,t,n,i,r){var a=e[t+0],o=e[t+1],s=e[t+2],l=n.elements,h=a*l[3]+o*l[7]+s*l[11]+l[15];i[r]=a*l[0]+o*l[4]+s*l[8]+l[12]/h,i[r+1]=a*l[1]+o*l[5]+s*l[9]+l[13]/h,i[r+2]=a*l[2]+o*l[6]+s*l[10]+l[14]/h},t.transformLightingMapTexcoordArray=function(e,t,n,i,r){var a=n.elements;i[r+0]=e[t+0]*a[0]+a[2],i[r+1]=1-((1-e[t+1])*a[1]+a[3])},t.getURLVerion=function(e){var t=e.indexOf("?");return t>=0?e.substr(t):null},t._quaternionCreateFromYawPitchRollArray=function(e,t,n,i){var r=.5*n,a=.5*t,o=.5*e,s=Math.sin(r),l=Math.cos(r),h=Math.sin(a),c=Math.cos(a),_=Math.sin(o),u=Math.cos(o);i[0]=u*h*l+_*c*s,i[1]=_*c*l-u*h*s,i[2]=u*c*s-_*h*l,i[3]=u*c*l+_*h*s},t._createAffineTransformationArray=function(e,t,n,i){var r=t[0],a=t[1],o=t[2],s=t[3],l=r+r,h=a+a,c=o+o,_=r*l,u=r*h,d=r*c,f=a*h,m=a*c,p=o*c,v=s*l,E=s*h,T=s*c,g=n[0],S=n[1],x=n[2];i[0]=(1-(f+p))*g,i[1]=(u+T)*g,i[2]=(d-E)*g,i[3]=0,i[4]=(u-T)*S,i[5]=(1-(_+p))*S,i[6]=(m+v)*S,i[7]=0,i[8]=(d+E)*x,i[9]=(m-v)*x,i[10]=(1-(_+f))*x,i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1},t._mulMatrixArray=function(e,t,n,i){var r,a,o,s,l,h=t.elements,c=h[0],_=h[1],u=h[2],d=h[3],f=h[4],m=h[5],p=h[6],v=h[7],E=h[8],T=h[9],g=h[10],S=h[11],x=h[12],D=h[13],M=h[14],A=h[15],R=i,I=i+4,C=i+8,y=i+12;for(r=0;4>r;r++)a=e[r],o=e[r+4],s=e[r+8],l=e[r+12],n[R+r]=a*c+o*_+s*u+l*d,n[I+r]=a*f+o*m+s*p+l*v,n[C+r]=a*E+o*T+s*g+l*S,n[y+r]=a*x+o*D+s*M+l*A},t.getYawPitchRoll=function(e,n){t.transformQuat(Di.ForwardRH,e,Yt.TEMPVector31),t.transformQuat(Di.Up,e,Yt.TEMPVector32);var i=Yt.TEMPVector32.elements;t.angleTo(Di.ZERO,Yt.TEMPVector31,Yt.TEMPVector33);var r=Yt.TEMPVector33.elements;r[0]==Math.PI/2?(r[1]=t.arcTanAngle(i[2],i[0]),r[2]=0):r[0]==-Math.PI/2?(r[1]=t.arcTanAngle(-i[2],-i[0]),r[2]=0):(Wt.createRotationY(-r[1],Yt.TEMPMatrix0),Wt.createRotationX(-r[0],Yt.TEMPMatrix1),Di.transformCoordinate(Yt.TEMPVector32,Yt.TEMPMatrix0,Yt.TEMPVector32),Di.transformCoordinate(Yt.TEMPVector32,Yt.TEMPMatrix1,Yt.TEMPVector32),r[2]=t.arcTanAngle(i[1],-i[0])),r[1]<=-Math.PI&&(r[1]=Math.PI),r[2]<=-Math.PI&&(r[2]=Math.PI),r[1]>=Math.PI&&r[2]>=Math.PI&&(r[1]=0,r[2]=0,r[0]=Math.PI-r[0]),n[0]=r[1],n[1]=r[0],n[2]=r[2]},t.arcTanAngle=function(e,t){return 0==e?1==t?Math.PI/2:-Math.PI/2:e>0?Math.atan(t/e):0>e?t>0?Math.atan(t/e)+Math.PI:Math.atan(t/e)-Math.PI:0},t.angleTo=function(e,n,i){Di.subtract(n,e,Yt.TEMPVector30),Di.normalize(Yt.TEMPVector30,Yt.TEMPVector30),i.elements[0]=Math.asin(Yt.TEMPVector30.y),i.elements[1]=t.arcTanAngle(-Yt.TEMPVector30.z,-Yt.TEMPVector30.x)
},t.transformQuat=function(e,t,n){var i=n.elements,r=e.elements,a=t,o=r[0],s=r[1],l=r[2],h=a[0],c=a[1],_=a[2],u=a[3],d=u*o+c*l-_*s,f=u*s+_*o-h*l,m=u*l+h*s-c*o,p=-h*o-c*s-_*l;i[0]=d*u+p*-h+f*-_-m*-c,i[1]=f*u+p*-c+m*-h-d*-_,i[2]=m*u+p*-_+d*-c-f*-h},t.quaterionNormalize=function(e,t){var n=e[0],i=e[1],r=e[2],a=e[3],o=n*n+i*i+r*r+a*a;o>0&&(o=1/Math.sqrt(o),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=a*o)},t.quaterionSlerp=function(e,t,n,i){var r,a,o,s,l,h=e[0],c=e[1],_=e[2],u=e[3],d=t[0],f=t[1],m=t[2],p=t[3];a=h*d+c*f+_*m+u*p,0>a&&(a=-a,d=-d,f=-f,m=-m,p=-p),1-a>1e-6?(r=Math.acos(a),o=Math.sin(r),s=Math.sin((1-n)*r)/o,l=Math.sin(n*r)/o):(s=1-n,l=n),i[0]=s*h+l*d,i[1]=s*c+l*f,i[2]=s*_+l*m,i[3]=s*u+l*p},t.quaternionMultiply=function(e,t,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=t[0],l=t[1],h=t[2],c=t[3],_=r*h-a*l,u=a*s-i*h,d=i*l-r*s,f=i*s+r*l+a*h;n[0]=i*c+s*o+_,n[1]=r*c+l*o+u,n[2]=a*c+h*o+d,n[3]=o*c-f},t.quaternionWeight=function(e,t,n){n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]},t.quaternionInvert=function(e,t){var n=e[0],i=e[1],r=e[2],a=e[3],o=n*n+i*i+r*r+a*a,s=o?1/o:0;t[0]=-n*s,t[1]=-i*s,t[2]=-r*s,t[3]=a*s},t.quaternionConjugate=function(e,t){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]},t.scaleWeight=function(e,t,n){var i=e[0],r=e[1],a=e[2];n[0]=i>0?Math.pow(Math.abs(i),t):-Math.pow(Math.abs(i),t),n[1]=r>0?Math.pow(Math.abs(r),t):-Math.pow(Math.abs(r),t),n[2]=a>0?Math.pow(Math.abs(a),t):-Math.pow(Math.abs(a),t)},t.scaleBlend=function(e,n,i,r){var a=t._tempVector3Array0,o=t._tempVector3Array1;t.scaleWeight(e,1-i,a),t.scaleWeight(n,i,o);var s=i>.5?n:e;r[0]=s[0]>0?Math.abs(a[0]*o[0]):-Math.abs(a[0]*o[0]),r[1]=s[1]>0?Math.abs(a[1]*o[1]):-Math.abs(a[1]*o[1]),r[2]=s[2]>0?Math.abs(a[2]*o[2]):-Math.abs(a[2]*o[2])},t.matrix4x4MultiplyFFF=function(e,t,n){var i,r,a,o,s;if(n===t)for(t=new Float32Array(16),i=0;16>i;++i)t[i]=n[i];var l=t[0],h=t[1],c=t[2],_=t[3],u=t[4],d=t[5],f=t[6],m=t[7],p=t[8],v=t[9],E=t[10],T=t[11],g=t[12],S=t[13],x=t[14],D=t[15];for(i=0;4>i;i++)r=e[i],a=e[i+4],o=e[i+8],s=e[i+12],n[i]=r*l+a*h+o*c+s*_,n[i+4]=r*u+a*d+o*f+s*m,n[i+8]=r*p+a*v+o*E+s*T,n[i+12]=r*g+a*S+o*x+s*D},t.matrix4x4MultiplyFFFForNative=function(t,n,i){e.conch.matrix4x4Multiply(t,n,i)},t.matrix4x4MultiplyMFM=function(e,n,i){t.matrix4x4MultiplyFFF(e.elements,n,i.elements)},t._buildTexture2D=function(e,t,n,i,r){void 0===r&&(r=!1);var a=new O(e,t,n,r,!0);return a.anisoLevel=1,a.filterMode=0,an._generateTexture2D(a,e,t,i),a},t._tempVector3Array0=new Float32Array(3),t._tempVector3Array1=new Float32Array(3),t._tempArray4_0=new Float32Array(4),t._tempArray16_0=new Float32Array(16),t._tempArray16_1=new Float32Array(16),t._tempArray16_2=new Float32Array(16),t._tempArray16_3=new Float32Array(16),i(t,["_tempVector3_0",function(){return this._tempVector3_0=new Di},"_tempVector3_1",function(){return this._tempVector3_1=new Di},"_tempVector3_2",function(){return this._tempVector3_2=new Di},"_tempVector3_3",function(){return this._tempVector3_3=new Di},"_tempVector3_4",function(){return this._tempVector3_4=new Di},"_tempVector3_5",function(){return this._tempVector3_5=new Di},"_tempVector3_6",function(){return this._tempVector3_6=new Di}]),t}()),Sn=function(){function t(){}return r(t,"Laya3D"),a(1,t,"enbalePhysics",function(){return t._enbalePhysics}),t._cancelLoadByUrl=function(e){n.loader.cancelLoadByUrl(e),t._innerFirstLevelLoaderManager.cancelLoadByUrl(e),t._innerSecondLevelLoaderManager.cancelLoadByUrl(e),t._innerThirdLevelLoaderManager.cancelLoadByUrl(e),t._innerFourthLevelLoaderManager.cancelLoadByUrl(e)},t._changeWebGLSize=function(e,t){V.onStageResize(e,t),Et.clientWidth=e,Et.clientHeight=t},t.__init__=function(e,i,r){if(d.isAntialias=r.isAntialias,d.isAlpha=r.isAlpha,d.premultipliedAlpha=r.premultipliedAlpha,d.isStencil=r.isStencil,!V.enable())return alert("Laya3D init error,must support webGL!"),void 0;A.changeWebGLSize=t._changeWebGLSize,x.is3DMode=!0,n.init(e,i),x.isConchApp||(p.instance=V.mainContext,p.instance.createCommandEncoder=function(e,t,n){return void 0===e&&(e=128),void 0===t&&(t=64),void 0===n&&(n=!1),new _(this,e,t,n)}),x.isConchApp&&t.enableNative3D(),yi.__init__(),Yi.__init__(),Tr.__init__(),Sr.__init__(),gr.__init__(),Vi.__init__(),Zi.__init__(),qi.__init__(),$i.__init__(),Qi.__init__(),er.__init__(),xr.__init__(),ar.__init__(),ji.__init__(),tr.__init__(),ir.__init__(),Ji.__init__(),Ki.__init__(),cn.__init__(),O.__init__(),fr.__init__(),rn.__init__(),At.__init__();var a=T.createMap;a.lh=["HIERARCHY",yi._parse],a.ls=["HIERARCHY",ki._parse],a.lm=["MESH",cr._parse],a.lmat=["MATERIAL",Vi._parse],a.ltc=["TEXTURECUBE",fr._parse],a.jpg=["TEXTURE2D",O._parse],a.jpeg=["TEXTURE2D",O._parse],a.bmp=["TEXTURE2D",O._parse],a.gif=["TEXTURE2D",O._parse],a.png=["TEXTURE2D",O._parse],a.dds=["TEXTURE2D",O._parse],a.ktx=["TEXTURE2D",O._parse],a.pvr=["TEXTURE2D",O._parse],a.lani=["ANIMATIONCLIP",Oi._parse],a.lav=["AVATAR",Li._parse],a.thdata=["TERRAINHEIGHTDATA",Pi._pharse];var o=E.parserMap;o.HIERARCHY=t._loadHierarchy,o.MESH=t._loadMesh,o.MATERIAL=t._loadMaterial,o.TEXTURECUBE=t._loadTextureCube,o.TEXTURE2D=t._loadTexture2D,o.ANIMATIONCLIP=t._loadAnimationClip,o.AVATAR=t._loadAvatar,o.TERRAIN=t._loadTerrain,o.TERRAINHEIGHTDATA=t._loadTerrain,t._innerFirstLevelLoaderManager.on("error",null,t._eventLoadManagerError),t._innerSecondLevelLoaderManager.on("error",null,t._eventLoadManagerError),t._innerThirdLevelLoaderManager.on("error",null,t._eventLoadManagerError),t._innerFourthLevelLoaderManager.on("error",null,t._eventLoadManagerError)},t.enableNative3D=function(){if(x.isConchApp){var t=ln,n=Ni,i=Li,r=At;t.prototype._initData=t.prototype._initDataForNative,t.prototype.setBool=t.prototype.setBoolForNative,t.prototype.getBool=t.prototype.getBoolForNative,t.prototype.setInt=t.prototype.setIntForNative,t.prototype.getInt=t.prototype.getIntForNative,t.prototype.setNumber=t.prototype.setNumberForNative,t.prototype.getNumber=t.prototype.getNumberForNative,t.prototype.setVector=t.prototype.setVectorForNative,t.prototype.getVector=t.prototype.getVectorForNative,t.prototype.setQuaternion=t.prototype.setQuaternionForNative,t.prototype.getQuaternion=t.prototype.getQuaternionForNative,t.prototype.setMatrix4x4=t.prototype.setMatrix4x4ForNative,t.prototype.getMatrix4x4=t.prototype.getMatrix4x4ForNative,t.prototype.setBuffer=t.prototype.setBufferForNative,t.prototype.getBuffer=t.prototype.getBufferForNative,t.prototype.setTexture=t.prototype.setTextureForNative,t.prototype.getTexture=t.prototype.getTextureForNative,t.prototype.setAttribute=t.prototype.setAttributeForNative,t.prototype.getAttribute=t.prototype.getAttributeForNative,t.prototype.cloneTo=t.prototype.cloneToForNative,n.prototype._uniformMatrix2fv=n.prototype._uniformMatrix2fvForNative,n.prototype._uniformMatrix3fv=n.prototype._uniformMatrix3fvForNative,n.prototype._uniformMatrix4fv=n.prototype._uniformMatrix4fvForNative,i.prototype._cloneDatasToAnimator=i.prototype._cloneDatasToAnimatorNative,r.renderObjectCulling=At.renderObjectCullingNative,On=e.conchFloatKeyframe,yn=e.conchFloatArrayKeyframe,B=e.conchKeyframeNode,U=e.conchKeyframeNodeList;var a=Oi;a.prototype._evaluateClipDatasRealTime=a.prototype._evaluateClipDatasRealTimeForNative}},t.formatRelativePath=function(e,t){var n,i=t.charAt(0);if("."===i){for(var r=(e+t).split("/"),a=0,o=r.length;o>a;a++)if(".."==r[a]){var s=a-1;s>0&&".."!==r[s]&&(r.splice(s,2),a-=2)}n=r.join("/")}else n=e+t;return null!=L.customFormat&&(n=L.customFormat(n,null)),n},t._eventLoadManagerError=function(e){n.loader.event("error",e)},t._addHierarchyInnerUrls=function(e,n,i,r,a,o,s,l){var h=t.formatRelativePath(r,a);i&&(h+=i),e.push({url:h,type:o,constructParams:s,propertyParams:l}),n[a]=h},t._parseMaterial=function(e,n,i,r,a){t._addHierarchyInnerUrls(n,i,r,a,e.path,"MATERIAL")},t._getSprite3DHierarchyInnerUrls=function(e,n,i,r,a,o,s,l){var h=0,c=0,_=e.props,u=e.customProps;if(u)for(var d in u)_[d]=u[d];switch(e.type){case"Scene3D":var f=_.lightmaps;for(h=0,c=f.length;c>h;h++){var m=f[h];t._addHierarchyInnerUrls(a,o,s,l,m.path,"TEXTURE2D",m.constructParams,m.propertyParams)}var p=_.reflectionTexture;p&&t._addHierarchyInnerUrls(r,o,s,l,p,"TEXTURECUBE");var v=_.skyboxMaterial;v&&t._parseMaterial(v,i,o,s,l);break;case"Camera":var E=_.skyboxMaterial;E&&t._parseMaterial(E,i,o,s,l);break;case"TrailSprite3D":case"MeshSprite3D":case"SkinnedMeshSprite3D":var T=_.meshPath;T&&t._addHierarchyInnerUrls(n,o,s,l,T,"MESH");var g=_.materials;if(g)for(h=0,c=g.length;c>h;h++)t._parseMaterial(g[h],i,o,s,l);break;case"ShuriKenParticle3D":var S=_.meshPath;S&&t._addHierarchyInnerUrls(n,o,s,l,S,"MESH"),t._parseMaterial(_.material,i,o,s,l);break;case"Terrain":t._addHierarchyInnerUrls(a,o,s,l,_.dataPath,"TERRAIN")}var x=e.components;if(x)for(var D=0,M=x.length;M>D;D++){var A=x[D];switch(A.type){case"Animator":var R=(A.avatarPath,A.avatar);R&&t._addHierarchyInnerUrls(a,o,s,l,R.path,"AVATAR");var I=A.clipPaths;if(I)for(h=0,c=I.length;c>h;h++)t._addHierarchyInnerUrls(a,o,s,l,I[h],"ANIMATIONCLIP");else{var C=A.layers;for(h=0;h<C.length;h++)for(var y=C[h].states,O=0,L=y.length;L>O;O++){var V=y[O].clipPath;V&&t._addHierarchyInnerUrls(a,o,s,l,V,"ANIMATIONCLIP")}}}}var w=e.child;for(h=0,c=w.length;c>h;h++)t._getSprite3DHierarchyInnerUrls(w[h],n,i,r,a,o,s,l)},t._loadHierarchy=function(e){e.on("loaded",null,t._onHierarchylhLoaded,[e]),e.load(e.url,"json",!1,null,!0)},t._onHierarchylhLoaded=function(e,n){var i=e.url,r=gn.getURLVerion(i),a=L.getPath(i),o=[],s=[],l=[],h=[],c={};t._getSprite3DHierarchyInnerUrls(n.data,o,s,l,h,c,r,a);var _=o.length+s.length+h.length,u=_+1,d=1/u;if(t._onProcessChange(e,0,d,1),h.length>0){var f=_/u,p=m.create(null,t._onProcessChange,[e,d,f],!1);t._innerFourthLevelLoaderManager.create(h,m.create(null,t._onHierarchyInnerForthLevResouLoaded,[e,p,n,c,o,s,l,d+f*h.length,f]),p,null,null,null,1,!0)}else t._onHierarchyInnerForthLevResouLoaded(e,null,n,c,o,s,l,d,f)},t._onHierarchyInnerForthLevResouLoaded=function(e,n,i,r,a,o,s,l,h){if(n&&n.recover(),s.length>0){var c=m.create(null,t._onProcessChange,[e,l,h],!1);t._innerThirdLevelLoaderManager.create(s,m.create(null,t._onHierarchyInnerThirdLevResouLoaded,[e,c,i,r,a,o,l+h*o.length,h]),n,null,null,null,1,!0)}else t._onHierarchyInnerThirdLevResouLoaded(e,null,i,r,a,o,l,h)},t._onHierarchyInnerThirdLevResouLoaded=function(e,n,i,r,a,o,s,l){if(n&&n.recover(),o.length>0){var h=m.create(null,t._onProcessChange,[e,s,l],!1);t._innerSecondLevelLoaderManager.create(o,m.create(null,t._onHierarchyInnerSecondLevResouLoaded,[e,h,i,r,a,s+l*o.length,l]),n,null,null,null,1,!0)}else t._onHierarchyInnerSecondLevResouLoaded(e,null,i,r,a,s,l)},t._onHierarchyInnerSecondLevResouLoaded=function(e,n,i,r,a,o,s){if(n&&n.recover(),a.length>0){var l=m.create(null,t._onProcessChange,[e,o,s],!1);t._innerFirstLevelLoaderManager.create(a,m.create(null,t._onHierarchyInnerFirstLevResouLoaded,[e,l,i,r]),n,null,null,null,1,!0)}else t._onHierarchyInnerFirstLevResouLoaded(e,null,i,r)},t._onHierarchyInnerFirstLevResouLoaded=function(e,t,n,i){t&&t.recover(),e._cache=e._createCache;var r=yi._parse([n,i],e._propertyParams,e._constructParams);e.endLoad(r)},t._loadTerrain=function(e){e.on("loaded",null,t._onTerrainLtLoaded,[e]),e.load(e.url,"json",!1,null,!0)},t._onTerrainLtLoaded=function(e,n){var i,r,a=e.url,o=gn.getURLVerion(a),s=L.getPath(a),l=[],h={},c=0,_=0,u=n.heightData;i=u.url,r=t.formatRelativePath(s,i),o&&(r+=o),h[i]=r,i=r;var d=n.detailTexture;for(c=0,_=d.length;_>c;c++)l.push({url:d[c].diffuse});var f=n.normalMap;for(c=0,_=f.length;_>c;c++)l.push({url:f[c]});var p=n.alphaMap;for(c=0,_=p.length;_>c;c++)l.push({url:p[c],params:[1,!1]});for(c=0,_=l.length;_>c;c++){var v=l[c].url;r=t.formatRelativePath(s,v),o&&(r+=o),l[c].url=r,h[v]=r}var E=l.length,T=E+2,g=1/T;t._onProcessChange(e,0,g,1);var S={heightMapLoaded:!1,texturesLoaded:!1},x=m.create(null,t._onProcessChange,[e,g,g],!1);t._innerFourthLevelLoaderManager.create(i,m.create(null,t._onTerrainHeightMapLoaded,[e,x,n,h,S]),x,null,[u.numX,u.numZ,u.bitType,u.value],null,1,!0);var D=m.create(null,t._onProcessChange,[e,2*g,E/T],!1);t._innerFourthLevelLoaderManager.create(l,m.create(null,t._onTerrainTexturesLoaded,[e,D,n,h,S]),D,null,null,null,1,!0)},t._onTerrainHeightMapLoaded=function(e,t,n,i,r){r.heightMapLoaded=!0,r.texturesLoaded&&(e.endLoad([n,i]),t.recover())},t._onTerrainTexturesLoaded=function(e,t,n,i,r){r.texturesLoaded=!0,r.heightMapLoaded&&(e.endLoad([n,i]),t.recover())},t._loadMesh=function(e){e.on("loaded",null,t._onMeshLmLoaded,[e]),e.load(e.url,"arraybuffer",!1,null,!0)},t._onMeshLmLoaded=function(e,n){var i,r,a=e.url,o=gn.getURLVerion(a),s=L.getPath(a),l={},h=0,_=0,u=0,d=new c(n);d.pos=0;var f=d.readUTFString();switch(f){case"LAYAMODEL:03":case"LAYAMODEL:0301":case"LAYAMODEL:0400":var p=d.getUint32();d.pos=d.pos+4,u=d.getUint16(),d.pos=d.pos+8*u;var v=d.getUint32();for(u=d.getUint16(),d.pos=p+v,i=[],h=0;u>h;h++){var E=d.readUTFString();-1!==E.lastIndexOf(".lmat")&&i.push(E)}break;default:throw new Error("Laya3D:unknown mesh version.")}for(h=0,_=i.length;_>h;h++){var T=i[h];r=t.formatRelativePath(s,T),o&&(r+=o),i[h]=r,l[T]=r}if(i.length>0){var g=1,S=g+1,x=1/S;t._onProcessChange(e,0,x,1);var D=m.create(null,t._onProcessChange,[e,x,g/S],!1);t._innerSecondLevelLoaderManager.create(i,m.create(null,t._onMeshMateialLoaded,[e,D,n,l]),D,null,null,null,1,!0)}else{e._cache=e._createCache;var M=cr._parse([n,l],e._propertyParams,e._constructParams);M._setUrl(e.url),e.endLoad(M)}},t._onMeshMateialLoaded=function(e,t,n,i){e.endLoad([n,i]),t.recover()},t._loadMaterial=function(e){e.on("loaded",null,t._onMaterilLmatLoaded,[e]),e.load(e.url,"json",!1,null,!0)},t._onMaterilLmatLoaded=function(e,n){var i,r=e.url,a=gn.getURLVerion(r),o=L.getPath(r),s=[],l={},h=(n.customProps,n.version);switch(h){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":var c=0,_=0,u=n.props.textures;if(u)for(c=0,_=u.length;_>c;c++){var d=u[c],f=d.path;f&&(i=t.formatRelativePath(o,f),a&&(i+=a),s.push({url:i,constructParams:d.constructParams,propertyParams:d.propertyParams}),l[f]=i)}break;default:throw new Error("Laya3D:unkonwn version.")}var p=s.length,v=p+1,E=1/v;if(t._onProcessChange(e,0,E,1),p>0){var T=m.create(null,t._onProcessChange,[e,E,p/v],!1);t._innerFourthLevelLoaderManager.create(s,m.create(null,t._onMateialTexturesLoaded,[e,T,n,l]),T,null,null,null,1,!0)}else t._onMateialTexturesLoaded(e,null,n,null)},t._onMateialTexturesLoaded=function(e,t,n,i){e._cache=e._createCache;var r=Vi._parse([n,i],e._propertyParams,e._constructParams);r._setUrl(e.url),e.endLoad(r),t&&t.recover()},t._loadAvatar=function(e){e.load(e.url,"json",!1,null,!0),e.on("loaded",null,function(t){e._cache=e._createCache;var n=Li._parse(t,e._propertyParams,e._constructParams);n._setUrl(e.url),e.endLoad(n)})},t._loadAnimationClip=function(e){e.load(e.url,"arraybuffer",!1,null,!0),e.on("loaded",null,function(t){e._cache=e._createCache;var n=Oi._parse(t,e._propertyParams,e._constructParams);n._setUrl(e.url),e.endLoad(n)})},t._loadTexture2D=function(e){e.load(e.url,"nativeimage",!1,null,!0),e.on("loaded",null,function(t){e._cache=e._createCache;var n=O._parse(t,e._propertyParams,e._constructParams);n._setUrl(e.url),e.endLoad(n)})},t._loadTextureCube=function(e){e.load(e.url,"json",!1,null,!0),e.on("loaded",null,t._onTextureCubeLtcLoaded,[e])},t._onTextureCubeLtcLoaded=function(e,n){var i=L.getPath(e.url),r=[t.formatRelativePath(i,n.front),t.formatRelativePath(i,n.back),t.formatRelativePath(i,n.left),t.formatRelativePath(i,n.right),t.formatRelativePath(i,n.up),t.formatRelativePath(i,n.down)],a=1/7;t._onProcessChange(e,0,a,1);var o=m.create(null,t._onProcessChange,[e,a,6/7],!1);t._innerFourthLevelLoaderManager.load(r,m.create(null,t._onTextureCubeImagesLoaded,[e,r,o]),o,"nativeimage")},t._onTextureCubeImagesLoaded=function(e,t,n){for(var i=new Array(6),r=0;6>r;r++)i[r]=E.getRes(t[r]);e._cache=e._createCache;var a=fr._parse(i,e._propertyParams,e._constructParams);for(a._setUrl(e.url),e.endLoad(a),n.recover(),r=0;6>r;r++)E.clearRes(t[r])},t._onProcessChange=function(e,t,n,i){i=t+i*n,1>i&&e.event("progress",i)},t.init=function(e,n,i,r){A.cancelLoadByUrl=function(e){t._cancelLoadByUrl(e)},i=i||N._defaultConfig,t._editerEnvironment=i._editerEnvironment;var a=l.window.Physics3D;null==a?(t._enbalePhysics=!1,t.__init__(e,n,i),r&&r.run()):(t._enbalePhysics=!0,a(1024*i.defaultPhysicsMemory*1024).then(function(){t.__init__(e,n,i),r&&r.run()}))},t.HIERARCHY="HIERARCHY",t.MESH="MESH",t.MATERIAL="MATERIAL",t.TEXTURE2D="TEXTURE2D",t.TEXTURECUBE="TEXTURECUBE",t.ANIMATIONCLIP="ANIMATIONCLIP",t.AVATAR="AVATAR",t.TERRAINHEIGHTDATA="TERRAINHEIGHTDATA",t.TERRAINRES="TERRAIN",t._enbalePhysics=!1,t._editerEnvironment=!1,t.debugMode=!1,i(t,["_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new T},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new T},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new T},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new T},"_physics3D",function(){return this._physics3D=n.Physics3D},"physicsSettings",function(){return this.physicsSettings=new en}]),t}(),xn=function(e){function t(){this._linkAvatarSpritesData={},this._keyframeNodeOwners=[],this._linkAvatarSprites=[],this._renderableSprites=[],this.cullingMode=2,t.__super.call(this),this._controllerLayers=[],this._linkSprites={},this._speed=1,this._keyframeNodeOwnerMap={},this._updateMark=0}r(t,"laya.d3.component.Animator",e);var n=t.prototype;return n._linkToSprites=function(e){for(var t in e){for(var n=this.owner,i=e[t],r=0,a=i.length;a>r;r++){var o=i[r];if(""===o)break;if(n=n.getChildByName(o),!n)break}n&&this.linkSprite3DToAvatarNode(t,n)}},n._addKeyframeNodeOwner=function(e,t,n){var i=t._indexInList,r=t.fullPath,a=this._keyframeNodeOwnerMap[r];if(a)a.referenceCount++,e[i]=a;else{for(var s=n,l=0,h=t.propertyCount;h>l&&(s=s[t.getPropertyByIndex(l)],s);l++);a=this._keyframeNodeOwnerMap[r]=new k,a.fullPath=r,a.indexInList=this._keyframeNodeOwners.length,a.referenceCount=1,a.propertyOwner=n;var c=t.propertyCount,_=o(c);for(l=0;c>l;l++)_[l]=t.getPropertyByIndex(l);a.property=_,a.type=t.type,s&&(a.defaultValue=0===t.type?s:s.elements.slice()),this._keyframeNodeOwners.push(a),e[i]=a}},n._removeKeyframeNodeOwner=function(e,t){var n=t.fullPath,i=this._keyframeNodeOwnerMap[n];i.referenceCount--,0===i.referenceCount&&(delete this._keyframeNodeOwnerMap[n],this._keyframeNodeOwners.splice(this._keyframeNodeOwners.indexOf(i),1)),e[t._indexInList]=null},n._getOwnersByClip=function(e){var t=e._clip._nodes,n=t.count,i=e._nodeOwners;i.length=n;for(var r=0;n>r;r++){for(var a=t.getNodeByIndex(r),o=this._avatar?this._avatarNodeMap[this._avatar._rootNode.name]:this.owner,s=0,l=a.ownerPathCount;l>s;s++){var h=a.getOwnerPathByIndex(s);if(""===h)break;if(o=o.getChildByName(h),!o)break}o&&(o=o[a.propertyOwner],o&&this._addKeyframeNodeOwner(i,a,o))}},n._getOwnersByClipAsync=function(e){e._clip;this._getOwnersByClip(e)},n._getAvatarOwnersAndInitDatasAsync=function(){for(var e=0,t=this._controllerLayers.length;t>e;e++)for(var n=this._controllerLayers[e]._states,i=0,r=n.length;r>i;i++)this._getOwnersByClipAsync(n[i]);this._avatar._cloneDatasToAnimator(this);for(var a in this._linkAvatarSpritesData){var o=this._linkAvatarSpritesData[a];if(o)for(var s=0,l=o.length;l>s;s++)this._isLinkSpriteToAnimationNode(o[s],a,!0)}},n._eventScript=function(e,t,n,i,r){for(var a=t._clip._events,o=n._playEventIndex,s=a.length;s>o;o++){var l=a[o],h=l.time;if(!(h>=i&&r>h))break;for(var c=0,_=e.length;_>c;c++){var u=e[c],d=u[l.eventName];d&&d.apply(u,l.params)}}n._playEventIndex=o},n._updatePlayer=function(e,t,n,i){var r=e._clip._duration*(e.clipEnd-e.clipStart),a=t._elapsedTime,o=a+n;t._lastElapsedTime=a,t._elapsedTime=o;var s=o/r;if(t._normalizedTime=s,t._normalizedPlayTime=s%1,t._duration=r,!i&&o>=r)return t._finish=!0,t._elapsedTime=r,t._normalizedPlayTime=1,void 0;if(r>0){if(o>=r)do o-=r,t._playEventIndex=0,e._resetFrameIndices();while(o>=r)}else t._resetPlayState(0)},n._updateEventScript=function(e,t,n){var i=this.owner._scripts;if(i){var r=e._clip._duration,a=t._lastElapsedTime,o=t._elapsedTime,s=Math.floor(a/r),l=Math.floor(o/r),h=a%r,c=o%r,_=l-s;if(n)if(_>0){this._eventScript(i,e,t,h,r);for(var u=0,d=_-1;d>u;u++)this._eventScript(i,e,t,0,r);this._eventScript(i,e,t,0,c)}else this._eventScript(i,e,t,h,c);else _>0?this._eventScript(i,e,t,h,r):this._eventScript(i,e,t,h,c)}},n._updateClipDatas=function(e,t,n){var i=e._clip,r=i._duration,a=e.clipStart*r+n._normalizedPlayTime*n._duration,o=e._currentFrameIndices;i._evaluateClipDatasRealTime(i._nodes,a,o,t)},n._applyFloat=function(e,t,n,i,r,a,o){if(n.updateMark===this._updateMark)if(i)e[t]+=r*o;else{var s=e[t];e[t]=s+r*(o-s)}else if(a)e[t]=i?n.defaultValue+o:o;else if(i)e[t]=n.defaultValue+r*o;else{var l=n.defaultValue;e[t]=l+r*(o-l)}},n._applyPositionAndRotationEuler=function(e,t,n,i,r,a){if(e.updateMark===this._updateMark)if(t)a[0]+=n*r[0],a[1]+=n*r[1],a[2]+=n*r[2];else{var o=a[0],s=a[1],l=a[2];a[0]=o+n*(r[0]-o),a[1]=s+n*(r[1]-s),a[2]=l+n*(r[2]-l)}else if(i)if(t){var h=e.defaultValue;a[0]=h[0]+r[0],a[1]=h[1]+r[1],a[2]=h[2]+r[2]}else a[0]=r[0],a[1]=r[1],a[2]=r[2];else if(h=e.defaultValue,t)a[0]=h[0]+n*r[0],a[1]=h[1]+n*r[1],a[2]=h[2]+n*r[2];else{var c=h[0],_=h[1],u=h[2];a[0]=c+n*(r[0]-c),a[1]=_+n*(r[1]-_),a[2]=u+n*(r[2]-u)}},n._applyRotation=function(e,n,i,r,a,o){if(e.updateMark===this._updateMark)if(n){var s=t._tempQuaternionArray1;gn.quaternionWeight(a,i,s),gn.quaterionNormalize(s,s),gn.quaternionMultiply(o,s,o)}else Yt._lerpArray(o,a,i,o);else if(r)if(n){var l=e.defaultValue;gn.quaternionMultiply(l,a,o)}else o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3];else l=e.defaultValue,n?(s=t._tempQuaternionArray1,gn.quaternionWeight(a,i,s),gn.quaterionNormalize(s,s),gn.quaternionMultiply(l,s,o)):Yt._lerpArray(l,a,i,o)},n._applyScale=function(e,n,i,r,a,o){if(e.updateMark===this._updateMark)if(n){var s=t._tempVector3Array1;gn.scaleWeight(a,i,s),o[0]=o[0]*s[0],o[1]=o[1]*s[1],o[2]=o[2]*s[2]}else gn.scaleBlend(o,a,i,o);else if(r)if(n){var l=e.defaultValue;o[0]=l[0]*a[0],o[1]=l[1]*a[1],o[2]=l[2]*a[2]}else o[0]=a[0],o[1]=a[1],o[2]=a[2];else l=e.defaultValue,n?(s=t._tempVector3Array1,gn.scaleWeight(a,i,s),o[0]=l[0]*s[0],o[1]=l[1]*s[1],o[2]=l[2]*s[2]):gn.scaleBlend(l,a,i,o)},n._applyCrossData=function(e,n,i,r,a,o,s){var l=e.propertyOwner;if(l){switch(e.type){case 0:for(var h=e.property,c=h.length-1,_=0;c>_&&(l=l[h[_]],l);_++);var u=a+s*(o-a);this._applyFloat(l,h[c],e,n,i,r,u);break;case 1:var d=l.localPosition,f=t._tempVector3Array0,m=a[0],p=a[1],v=a[2];f[0]=m+s*(o[0]-m),f[1]=p+s*(o[1]-p),f[2]=v+s*(o[2]-v),this._applyPositionAndRotationEuler(e,n,i,r,f,d.elements),l.localPosition=d;break;case 2:var E=l.localRotation,T=t._tempQuaternionArray0;Yt._lerpArray(a,o,s,T),this._applyRotation(e,n,i,r,T,E.elements),l.localRotation=E;break;case 3:var g=l.localScale,S=t._tempVector3Array0;gn.scaleBlend(a,o,s,S),this._applyScale(e,n,i,r,S,g.elements),l.localScale=g;break;case 4:var x=l.localRotationEuler,D=t._tempVector3Array0;m=a[0],p=a[1],v=a[2],D[0]=m+s*(o[0]-m),D[1]=p+s*(o[1]-p),D[2]=v+s*(o[2]-v),this._applyPositionAndRotationEuler(e,n,i,r,D,x.elements),l.localRotationEuler=x}e.updateMark=this._updateMark}},n._setClipDatasToNode=function(e,t,n,i){for(var r=e._clip._nodes,a=e._nodeOwners,o=0,s=r.count;s>o;o++){var l=a[o];if(l){var h=l.propertyOwner;if(h){switch(l.type){case 0:for(var c=l.property,_=c.length-1,u=0;_>u&&(h=h[c[u]],h);u++);this._applyFloat(h,c[_],l,t,n,i,r.getNodeByIndex(o).data);break;case 1:var d=h.localPosition;this._applyPositionAndRotationEuler(l,t,n,i,r.getNodeByIndex(o).data,d.elements),h.localPosition=d;break;case 2:var f=h.localRotation;this._applyRotation(l,t,n,i,r.getNodeByIndex(o).data,f.elements),h.localRotation=f;break;case 3:var m=h.localScale;this._applyScale(l,t,n,i,r.getNodeByIndex(o).data,m.elements),h.localScale=m;break;case 4:var p=h.localRotationEuler;this._applyPositionAndRotationEuler(l,t,n,i,r.getNodeByIndex(o).data,p.elements),h.localRotationEuler=p}l.updateMark=this._updateMark}}}},n._setCrossClipDatasToNode=function(e,t,n,i,r){for(var a=e._crossNodesOwners,o=e._crossNodesOwnersCount,s=e.blendingMode!==G.BLENDINGMODE_OVERRIDE,l=e.defaultWeight,h=e._destCrossClipNodeIndices,c=n._clip._nodes,_=n._nodeOwners,u=e._srcCrossClipNodeIndices,d=t._nodeOwners,f=t._clip._nodes,m=0;o>m;m++){var p=a[m];if(p){var v=u[m],E=h[m],T=-1!==v?f.getNodeByIndex(v).data:_[E].defaultValue,g=-1!==E?c.getNodeByIndex(E).data:d[v].defaultValue;this._applyCrossData(p,s,l,r,T,g,i)}}},n._setFixedCrossClipDatasToNode=function(e,t,n,i){for(var r=e._crossNodesOwners,a=e._crossNodesOwnersCount,o=e.blendingMode!==G.BLENDINGMODE_OVERRIDE,s=e.defaultWeight,l=e._destCrossClipNodeIndices,h=t._clip._nodes,c=0;a>c;c++){var _=r[c];if(_){var u=l[c],d=_.crossFixedValue,f=-1!==u?h.getNodeByIndex(u).data:_.defaultValue;this._applyCrossData(_,o,s,i,d,f,n)}}},n._revertDefaultKeyframeNodes=function(e){for(var t=e._nodeOwners,n=0,i=t.length;i>n;n++){var r=t[n];if(r){var a=r.propertyOwner;if(a)switch(r.type){case 0:for(var o=r.property,s=o.length-1,l=0;s>l&&(a=a[o[l]],a);l++);a[o[s]]=r.defaultValue;break;case 1:var h=a.localPosition,c=h.elements,_=r.defaultValue;c[0]=_[0],c[1]=_[1],c[2]=_[2],a.localPosition=h;break;case 2:var u=a.localRotation,d=u.elements;_=r.defaultValue,d[0]=_[0],d[1]=_[1],d[2]=_[2],d[3]=_[3],a.localRotation=u;break;case 3:var f=a.localScale,m=f.elements;_=r.defaultValue,m[0]=_[0],m[1]=_[1],m[2]=_[2],a.localScale=f;break;case 4:var p=a.localRotationEuler,v=p.elements;_=r.defaultValue,v[0]=_[0],v[1]=_[1],v[2]=_[2],a.localRotationEuler=p;break;default:throw"Animator:unknown type."}}}},n._removeClip=function(e,t,n,i){var r=i._clip;r._removeReference(),e.splice(n,1),delete t[i.name];for(var a=e[n],o=r._nodes,s=a._nodeOwners,l=0,h=o.count;h>l;l++)this._removeKeyframeNodeOwner(s,o.getNodeByIndex(l))},n._isLinkSpriteToAnimationNodeData=function(e,t,n){var i=this._linkAvatarSpritesData[t];n?(i||(this._linkAvatarSpritesData[t]=i=[]),i.push(e)):i.splice(e,1)},n._isLinkSpriteToAnimationNode=function(e,t,n){if(this._avatar){var i=this._avatarNodeMap[t];if(i)if(n){e._transform._dummy=i.transform,this._linkAvatarSprites.push(e);var r=i.transform,a=e.transform;if(!a.owner.isStatic&&r){var o=a.worldMatrix,s=this.owner._transform._parent;if(s)gn.matrix4x4MultiplyMFM(s.worldMatrix,r.getWorldMatrix(),o);else for(var l=o.elements,h=r.getWorldMatrix(),c=0;16>c;c++)l[c]=h[c];a.worldMatrix=o}}else e._transform._dummy=null,this._linkAvatarSprites.splice(this._linkAvatarSprites.indexOf(e),1)}},n._onAdded=function(){var e=this.owner._parent;this.owner._setHierarchyAnimator(this,e?e._hierarchyAnimator:null),this.owner._changeAnimatorToLinkSprite3DNoAvatar(this,!0,[])},n._onDestroy=function(){var e=this.owner._parent;this.owner._clearHierarchyAnimator(this,e?e._hierarchyAnimator:null),this.owner._changeAnimatorToLinkSprite3DNoAvatar(this,!1,[])},n._onEnableInScene=function(){this.owner._scene._animatorPool.add(this)},n._onDisableInScene=function(){this.owner._scene._animatorPool.remove(this)},n._onEnable=function(){for(var e=0,t=this._controllerLayers.length;t>e;e++)if(this._controllerLayers[e].playOnWake){var n=this.getDefaultState(e);n&&this.play(null,e,0)}},n._handleSpriteOwnersBySprite=function(e,t,n){for(var i=0,r=this._controllerLayers.length;r>i;i++)for(var a=this._controllerLayers[i]._states,o=0,s=a.length;s>o;o++){var l=a[o],h=l._clip,c=t.join("/"),_=h._nodesMap[c];if(_)for(var u=l._nodeOwners,d=0,f=_.length;f>d;d++)e?this._addKeyframeNodeOwner(u,_[d],n):this._removeKeyframeNodeOwner(u,_[d])}},n._updateAvatarNodesToSprite=function(){for(var e=0,t=this._linkAvatarSprites.length;t>e;e++){var n=this._linkAvatarSprites[e],i=n.transform._dummy,r=n.transform;if(!r.owner.isStatic&&i){var a=r.worldMatrix,o=this.owner._transform._parent;if(o)gn.matrix4x4MultiplyMFM(o.worldMatrix,i.getWorldMatrix(),a);else for(var s=a.elements,l=i.getWorldMatrix(),h=0;16>h;h++)s[h]=l[h];r.worldMatrix=a}}},n._parse=function(e,t){var n=e.avatar;if(n){this.avatar=E.getRes(t[n.path]);var i=n.linkSprites;this._linkSprites=i,this._linkToSprites(i)}for(var r=(e.clipPaths,e.playOnWake),a=e.layers,o=0;o<a.length;o++){var s=a[o],l=new G(s.name);l.defaultWeight=0===o?1:s.weight;var h=s.blendingMode;h&&(l.blendingMode=h),this.addControllerLayer(l);for(var c=s.states,_=0,u=c.length;u>_;_++){var d=c[_],f=d.clipPath;if(f){var m=d.name,p=E.getRes(t[f]),v=new z;v.name=m,v.clip=p,p._addReference(),this.addState(v,o),0===_&&this.setDefaultClip(m,o)}}void 0!==r&&(l.playOnWake=r)}var T=e.cullingMode;void 0!==T&&(this.cullingMode=T)},n._update=function(){if(0!==this._speed){var e=!1;if(2===this.cullingMode){e=!1;for(var t=0,n=this._renderableSprites.length;n>t;t++)if(this._renderableSprites[t]._render._visible){e=!0;break}}else e=!0;this._updateMark++;var i=this.owner._scene.timer,r=i._delta/1e3,a=i.scale;for(t=0,n=this._controllerLayers.length;n>t;t++){var o=this._controllerLayers[t],s=o._playStateInfo,l=o._crossPlayStateInfo;switch(d=o.blendingMode!==G.BLENDINGMODE_OVERRIDE,o._playType){case 0:var h=o._currentPlayState,c=h._clip,_=this._speed*h.speed,u=s._finish;if(u||this._updatePlayer(h,s,r*_,c.islooping),e){var d=o.blendingMode!==G.BLENDINGMODE_OVERRIDE;this._updateClipDatas(h,d,s,a*_),this._setClipDatasToNode(h,d,o.defaultWeight,0===t),u||this._updateEventScript(h,s,c.islooping)}break;case 1:h=o._currentPlayState,c=h._clip;var f=o._crossPlayState,m=f._clip,p=o._crossDuration,v=l._startPlayTime,E=m._duration-v,T=p>E?E/p:1,g=this._speed*f.speed;this._updatePlayer(f,l,r*T*g,m.islooping);var S=(l._elapsedTime-v)/T/p;S>=1?e&&(this._updateClipDatas(f,d,l,a*g),this._setClipDatasToNode(f,d,o.defaultWeight,0===t),o._playType=0,o._currentPlayState=f,l._cloneTo(s)):(s._finish||(_=this._speed*h.speed,this._updatePlayer(h,s,r*_,!1),e&&this._updateClipDatas(h,d,s,a*_)),e&&(this._updateClipDatas(f,d,l,a*T*g),this._setCrossClipDatasToNode(o,h,f,S,0===t))),e&&(this._updateEventScript(h,s,!1),this._updateEventScript(f,l,m.islooping));break;case 2:f=o._crossPlayState,m=f._clip,p=o._crossDuration,v=l._startPlayTime,E=m._duration-v,T=p>E?E/p:1,g=this._speed*f.speed,this._updatePlayer(f,l,r*T*g,m.islooping),e&&(S=(l._elapsedTime-v)/T/p,S>=1?(this._updateClipDatas(f,d,l,a*g),this._setClipDatasToNode(f,d,1,0===t),o._playType=0,o._currentPlayState=f,l._cloneTo(s)):(this._updateClipDatas(f,d,l,a*T*g),this._setFixedCrossClipDatasToNode(o,f,S,0===t)),this._updateEventScript(f,l,m.islooping))}}e&&this._avatar&&(x.isConchApp&&this._updateAnimationNodeWorldMatix(this._animationNodeLocalPositions,this._animationNodeLocalRotations,this._animationNodeLocalScales,this._animationNodeWorldMatrixs,this._animationNodeParentIndices),this._updateAvatarNodesToSprite())}},n._cloneTo=function(e){var t=e;t.avatar=this.avatar;for(var n=0,i=this._controllerLayers.length;i>n;n++){var r=this._controllerLayers[n];t.addControllerLayer(r.clone());for(var a=r._states,o=0,s=a.length;s>o;o++){var l=a[o];t.addState(l.clone(),n),0==o&&t.setDefaultClip(l.name,n)}}t._linkSprites=this._linkSprites,t._linkToSprites(this._linkSprites)},n.getDefaultState=function(e){void 0===e&&(e=0);var t=this._controllerLayers[e];return t._defaultState},n.setDefaultClip=function(e,t){void 0===t&&(t=0);var n=this._controllerLayers[t];n._defaultState=n._statesMap[e]},n.addState=function(e,t){void 0===t&&(t=0);var n=e.name,i=this._controllerLayers[t],r=i._statesMap,a=i._states;if(r[n])throw"Animator:this stat's name has exist.";r[n]=e,a.push(e),e._clip._addReference(),this._avatar?this._getOwnersByClipAsync(e):this._getOwnersByClipAsync(e)},n.removeState=function(e,t){void 0===t&&(t=0);for(var n=this._controllerLayers[t],i=n._states,r=n._statesMap,a=-1,o=0,s=i.length;s>o;o++)if(i[o]===e){a=o;break}-1!==a&&this._removeClip(i,r,a,e)},n.addControllerLayer=function(e){this._controllerLayers.push(e)},n.getControllerLayer=function(e){return void 0===e&&(e=0),this._controllerLayers[e]},n.getCurrentAnimatorPlayState=function(e){return void 0===e&&(e=0),this._controllerLayers[e]._playStateInfo
},n.play=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=Number.NEGATIVE_INFINITY);var i=this._controllerLayers[t],r=i._defaultState;if(!e&&!r)throw new Error("Animator:must have  default clip value,please set clip property.");var a=i._currentPlayState,o=i._playStateInfo,s=e?i._statesMap[e]:r;s._resetFrameIndices();var l=s._clip._duration;a!==s?(n!==Number.NEGATIVE_INFINITY?o._resetPlayState(l*n):o._resetPlayState(0),null!==a&&a!==s&&this._revertDefaultKeyframeNodes(a),i._playType=0,i._currentPlayState=s):n!==Number.NEGATIVE_INFINITY&&(o._resetPlayState(l*n),i._playType=0)},n.crossFade=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=Number.NEGATIVE_INFINITY);var r=this._controllerLayers[n],a=r._statesMap[e];if(a){a._resetFrameIndices();var o=r._playType;if(-1===o)return this.play(e,n,i),void 0;var s=r._crossPlayStateInfo,l=r._crossNodesOwners,h=r._crossNodesOwnersIndicesMap,c=r._currentPlayState,_=a._nodeOwners,u=r._destCrossClipNodeIndices,d=a._clip,f=d._nodes,m=d._nodesDic;switch(o){case 0:var p=c._nodeOwners,v=r._srcCrossClipNodeIndices,E=c._clip,T=E._nodes,g=E._nodesDic;r._playType=1;for(var S=++r._crossMark,x=r._crossNodesOwnersCount=0,D=0,M=T.count;M>D;D++){var A=T.getNodeByIndex(D),R=A._indexInList,I=p[R];if(I){var C=A.fullPath;v[x]=R;var y=m[C];u[x]=y?y._indexInList:-1,h[C]=S,l[x]=I,x++}}for(D=0,M=f.count;M>D;D++){y=f.getNodeByIndex(D);var O=y._indexInList,L=_[O];if(L){var V=y.fullPath;g[V]||(v[x]=-1,u[x]=O,h[V]=S,l[x]=L,x++)}}break;case 1:case 2:for(r._playType=2,D=0,M=l.length;M>D;D++){var w=l[D];w.saveCrossFixedValue(),y=m[w.fullPath],u[D]=y?y._indexInList:-1}for(x=r._crossNodesOwnersCount,S=r._crossMark,D=0,M=f.count;M>D;D++)y=f.getNodeByIndex(D),O=y._indexInList,L=_[O],L&&(V=y.fullPath,h[V]!==S&&(u[x]=O,h[V]=S,w=_[O],l[x]=w,w.saveCrossFixedValue(),x++))}r._crossNodesOwnersCount=x,r._crossPlayState=a,r._crossDuration=c._clip._duration*t,i!==Number.NEGATIVE_INFINITY?s._resetPlayState(d._duration*i):s._resetPlayState(0)}},n.linkSprite3DToAvatarNode=function(e,t){if(t._hierarchyAnimator===this)return this._isLinkSpriteToAnimationNodeData(t,e,!0),this._isLinkSpriteToAnimationNode(t,e,!0),!0;throw"Animator:sprite3D must belong to this Animator"},n.unLinkSprite3DToAvatarNode=function(e){if(e._hierarchyAnimator===this){var t=e.transform._dummy;if(t){var n=t._owner.name;return this._isLinkSpriteToAnimationNodeData(e,n,!1),this._isLinkSpriteToAnimationNode(e,n,!1),!0}return!1}throw"Animator:sprite3D must belong to this Animator"},n.destroy=function(){e.prototype.destroy.call(this);for(var t=0,n=this._controllerLayers.length;n>t;t++)for(var i=this._controllerLayers[t]._states,r=0,a=i.length;a>r;r++)i[r]._clip._removeReference()},n._updateAnimationNodeWorldMatix=function(e,t,n,i,r){p.instance.updateAnimationNodeWorldMatix(e,t,n,r,i)},a(0,n,"avatar",function(){return this._avatar},function(e){if(this._avatar!==e)if(this._avatar=e,e)this._getAvatarOwnersAndInitDatasAsync(),this.owner._changeHierarchyAnimatorAvatar(this,e);else{var t=this.owner._parent;this.owner._changeHierarchyAnimatorAvatar(this,t?t._hierarchyAnimator._avatar:null)}}),a(0,n,"speed",function(){return this._speed},function(e){this._speed=e}),t._update=function(e){for(var t=e._animatorPool,n=t.elements,i=0,r=t.length;r>i;i++){var a=n[i];a&&a.enabled&&a._update()}},t._tempVector3Array0=new Float32Array(3),t._tempVector3Array1=new Float32Array(3),t._tempQuaternionArray0=new Float32Array(4),t._tempQuaternionArray1=new Float32Array(4),t.CULLINGMODE_ALWAYSANIMATE=0,t.CULLINGMODE_CULLCOMPLETELY=2,t}(u),Dn=function(e){function t(e,n,i,r,a){t.__super.call(this),this._owner=e,this._children=[],this._localMatrix=new Float32Array(16),x.isConchApp?(this._localPosition=new Di(0,0,0,n),this._localRotation=new Yt(0,0,0,1,i),this._localScale=new Di(0,0,0,r),this._worldMatrix=a):(this._localPosition=new Di,this._localRotation=new Yt,this._localScale=new Di,this._worldMatrix=new Float32Array(16)),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}r(t,"laya.d3.animation.AnimationTransform3D",e);var n=t.prototype;return n._getlocalMatrix=function(){return this._localUpdate&&(gn._createAffineTransformationArray(this._localPosition.elements,this._localRotation.elements,this._localScale.elements,this._localMatrix),this._localUpdate=!1),this._localMatrix},n._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var e=0,t=this._children.length;t>e;e++)this._children[e]._onWorldTransform()}},n.getWorldMatrix=function(){if(!x.isConchApp&&this._worldUpdate){if(null!=this._parent)gn.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var e=this._getlocalMatrix(),t=0;16>t;++t)this._worldMatrix[t]=e[t];this._worldUpdate=!1}return this._worldMatrix},n.setParent=function(e){if(this._parent!==e){if(this._parent){var t=this._parent._children,n=t.indexOf(this);t.splice(n,1)}e&&(e._children.push(this),e&&this._onWorldTransform()),this._parent=e}},a(0,n,"localPosition",function(){return this._localPosition},function(e){this._localPosition=e,this._localUpdate=!0,this._onWorldTransform()}),a(0,n,"localRotation",function(){if(this._localQuaternionUpdate){var e=this._localRotationEuler.elements;Yt.createFromYawPitchRoll(e[1]/t._angleToRandin,e[0]/t._angleToRandin,e[2]/t._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},function(e){this._localRotation=e,this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform()}),a(0,n,"localScale",function(){return this._localScale},function(e){this._localScale=e,this._localUpdate=!0,this._onWorldTransform()}),a(0,n,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(t._tempVector3);var e=t._tempVector3.elements,n=this._localRotationEuler.elements;n[0]=e[1]*t._angleToRandin,n[1]=e[0]*t._angleToRandin,n[2]=e[2]*t._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},function(e){this._localRotationEuler=e,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,this._onWorldTransform()}),i(t,["_tempVector3",function(){return this._tempVector3=new Di},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),t}(f),Mn=(function(e){function t(){t.__super.call(this)}r(t,"laya.d3.component.Script3D",e);var i=t.prototype;return i._checkProcessTriggers=function(){return this.onTriggerEnter!==laya.d3.component.Script3D.prototype.onTriggerEnter?!0:this.onTriggerStay!==laya.d3.component.Script3D.prototype.onTriggerStay?!0:this.onTriggerExit!==laya.d3.component.Script3D.prototype.onTriggerExit?!0:!1},i._checkProcessCollisions=function(){return this.onCollisionEnter!==laya.d3.component.Script3D.prototype.onCollisionEnter?!0:this.onCollisionStay!==laya.d3.component.Script3D.prototype.onCollisionStay?!0:this.onCollisionExit!==laya.d3.component.Script3D.prototype.onCollisionExit?!0:!1},i._onAwake=function(){this.onAwake(),this.onStart!==laya.d3.component.Script3D.prototype.onStart&&n.startTimer.callLater(this,this.onStart)},i._onEnable=function(){var e=laya.d3.component.Script3D.prototype;this.onMouseDown!==e.onMouseDown&&this.owner.on("mousedown",this,this.onMouseDown),this.onMouseUp!==e.onMouseUp&&this.owner.on("mouseup",this,this.onMouseUp),this.onClick!==e.onClick&&this.owner.on("click",this,this.onClick),this.onDoubleClick!==e.onDoubleClick&&this.owner.on("doubleclick",this,this.onDoubleClick),this.onRightClick!==e.onRightClick&&this.owner.on("rightclick",this,this.onRightClick),this.onMouseMove!==e.onMouseMove&&this.owner.on("mousemove",this,this.onMouseMove),this.onMouseOver!==e.onMouseOver&&this.owner.on("mouseover",this,this.onMouseOver),this.onMouseOut!==e.onMouseOut&&this.owner.on("mouseout",this,this.onMouseOut),this.onKeyDown!==e.onKeyDown&&n.stage.on("keydown",this,this.onKeyDown),this.onKeyPress!==e.onKeyPress&&n.stage.on("keypress",this,this.onKeyUp),this.onKeyUp!==e.onKeyUp&&n.stage.on("keyup",this,this.onKeyUp),this.onEnable()},i._onDisable=function(){this.owner.offAllCaller(this),n.stage.offAllCaller(this),this.onDisable()},i._onEnableInScene=function(){this.owner._scene._scriptPool.add(this)},i._onDisableInScene=function(){this.owner._scene._scriptPool.remove(this)},i._onAdded=function(){var e=this.owner,t=e._scripts;t||(e._scripts=t=[]),t.push(this),e._needProcessCollisions||(e._needProcessCollisions=this._checkProcessCollisions()),e._needProcessTriggers||(e._needProcessTriggers=this._checkProcessTriggers())},i._onDestroy=function(){var e=this.owner._scripts;e.splice(e.indexOf(this),1);var t=this.owner;t._needProcessTriggers=!1;for(var n=0,i=e.length;i>n;n++)if(e[n]._checkProcessTriggers()){t._needProcessTriggers=!0;break}for(t._needProcessCollisions=!1,n=0,i=e.length;i>n;n++)if(e[n]._checkProcessCollisions()){t._needProcessCollisions=!0;break}this.onDestroy()},i.onAwake=function(){},i.onEnable=function(){},i.onStart=function(){},i.onTriggerEnter=function(){},i.onTriggerStay=function(){},i.onTriggerExit=function(){},i.onCollisionEnter=function(){},i.onCollisionStay=function(){},i.onCollisionExit=function(){},i.onMouseDown=function(){},i.onMouseUp=function(){},i.onClick=function(){},i.onDoubleClick=function(){},i.onRightClick=function(){},i.onMouseMove=function(){},i.onMouseOver=function(){},i.onMouseOut=function(){},i.onKeyDown=function(){},i.onKeyPress=function(){},i.onKeyUp=function(){},i.onUpdate=function(){},i.onLateUpdate=function(){},i.onPreRender=function(){},i.onPostRender=function(){},i.onDisable=function(){},i.onDestroy=function(){},a(0,i,"isSingleton",function(){return!1}),t}(u),function(e){function t(e){this._owner=null,this._sharedMesh=null,t.__super.call(this),this._owner=e}r(t,"laya.d3.core.MeshFilter",e);var n=t.prototype;return n._getMeshDefine=function(e){for(var t=0,n=0,i=e._subMeshCount;i>n;n++)for(var r=e._getSubMesh(n),a=r._vertexBuffer._vertexDeclaration.vertexElements,o=0,s=a.length;s>o;o++){var l=a[o],h=l.elementUsage;switch(h){case 1:t|=Tr.SHADERDEFINE_COLOR;break;case 2:t|=Tr.SHADERDEFINE_UV0;break;case 8:t|=Tr.SHADERDEFINE_UV1}}return t},n._changeRenderObjectByMesh=function(e){var t=this._owner._render,n=t._renderElements,i=n[e];if(i)i.setGeometry(this._sharedMesh._getSubMesh(e));else{var r=t.sharedMaterials[e];r||(r=Zi.defaultMaterial),i=n[e]=new zn,i.setTransform(this._owner._transform),i.render=t,i.material=r,i.setGeometry(this._sharedMesh._getSubMesh(e))}},n._changeRenderObjectsByMesh=function(){var e=this._sharedMesh.subMeshCount;this._owner._render._renderElements.length=e;for(var t=0;e>t;t++)this._changeRenderObjectByMesh(t)},n.destroy=function(){this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},a(0,n,"sharedMesh",function(){return this._sharedMesh},function(e){if(this._sharedMesh!==e){var t=this._owner._render._defineDatas,n=this._sharedMesh;n&&(n._removeReference(),t.remove(this._getMeshDefine(n))),e._addReference(),this._sharedMesh=e,t.add(this._getMeshDefine(e)),this._changeRenderObjectsByMesh()}this.event("meshchanged",[this,n,e])}),t}(f)),An=function(e){function t(e,n){if(this._indexInList=-1,this._visible=!0,this._isPartOfStaticBatch=!1,this._staticBatch=null,t.__super.call(this),this._id=++t._uniqueIDCounter,this._indexInCastShadowList=-1,this._boundingBox=new Ft(new Di,new Di),this._boundingBoxCenter=new Di,this._boundingSphere=new Ut(new Di,0),x.isConchApp){var i=At._cullingBufferLength;this._cullingBufferIndex=i;var r=At._cullingBuffer,a=i+5;if(a>=r.length){var o=r;r=At._cullingBuffer=new Float32Array(r.length+4096),r.set(o,0)}r[i]=1,At._cullingBufferLength=a}this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._owner=e,this._enable=!0,this._materialsInstance=[],this._shaderValues=new ln(null,n),this._defineDatas=new on,this.lightmapIndex=-1,this._castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,e&&this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}r(t,"laya.d3.core.render.BaseRender",e);var o=t.prototype;return n.imps(o,{"laya.resource.IListPool":!0}),o._changeMaterialReference=function(e,t){e&&e._removeReference(),t._addReference()},o._getInstanceMaterial=function(e,t){var n=new e.constructor;return e.cloneTo(n),n.name=n.name+"(Instance)",this._materialsInstance[t]=!0,this._changeMaterialReference(this._materials[t],n),this._materials[t]=n,n},o._applyLightMapParams=function(){if(this._scene&&this._lightmapIndex>=0){var e=this._scene.getlightmaps();this._lightmapIndex<e.length?(this._defineDatas.add(Yi.SAHDERDEFINE_LIGHTMAP),this._shaderValues.setTexture(Yi.LIGHTMAP,e[this._lightmapIndex])):this._defineDatas.remove(Yi.SAHDERDEFINE_LIGHTMAP)}else this._defineDatas.remove(Yi.SAHDERDEFINE_LIGHTMAP)},o._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},o._renderRenderableBoundBox=function(){},o._calculateBoundingSphere=function(){throw"BaseRender: must override it."},o._calculateBoundingBox=function(){throw"BaseRender: must override it."},o._getIndexInList=function(){return this._indexInList},o._setIndexInList=function(e){this._indexInList=e},o._setBelongScene=function(e){this._scene!==e&&(this._scene=e,this._applyLightMapParams())},o._needRender=function(){return!0},o._renderUpdate=function(){},o._renderUpdateWithCamera=function(){},o._updateOctreeNode=function(){var e=this._treeNode;e&&this._octreeNodeNeedChange&&(e.updateObject(this),this._octreeNodeNeedChange=!1)},o._destroy=function(){this.offAll();var e=0,t=0;for(e=0,t=this._renderElements.length;t>e;e++)this._renderElements[e].destroy();for(e=0,t=this._materials.length;t>e;e++)this._materials[e]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null},a(0,o,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),a(0,o,"id",function(){return this._id}),a(0,o,"material",function(){var e=this._materials[0];if(e&&!this._materialsInstance[0]){var t=this._getInstanceMaterial(e,0),n=this._renderElements[0];n&&(n.material=t)}return this._materials[0]},function(e){this.sharedMaterial=e}),a(0,o,"isPartOfStaticBatch",function(){return this._isPartOfStaticBatch}),a(0,o,"sharedMaterial",function(){return this._materials[0]},function(e){var t=this._materials[0];if(t!==e){this._materials[0]=e,this._materialsInstance[0]=!1,this._changeMaterialReference(t,e);var n=this._renderElements[0];n&&(n.material=e)}}),a(0,o,"lightmapIndex",function(){return this._lightmapIndex},function(e){this._lightmapIndex!==e&&(this._lightmapIndex=e,this._applyLightMapParams())}),a(0,o,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(e){this._lightmapScaleOffset=e,this._shaderValues.setVector(Yi.LIGHTMAPSCALEOFFSET,e),this._defineDatas.add(Yi.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),a(0,o,"castShadow",function(){return this._castShadow},function(e){this._castShadow!==e&&(this._owner.activeInHierarchy&&(e?this._scene._addShadowCastRenderObject(this):this._scene._removeShadowCastRenderObject(this)),this._castShadow=e)}),a(0,o,"enable",function(){return this._enable},function(e){this._enable=!!e}),a(0,o,"materials",function(){for(var e=0,t=this._materials.length;t>e;e++)if(!this._materialsInstance[e]){var n=this._getInstanceMaterial(this._materials[e],e),i=this._renderElements[e];i&&(i.material=n)}return this._materials.slice()},function(e){this.sharedMaterials=e}),a(0,o,"sharedMaterials",function(){var e=this._materials.slice();return e},function(e){if(!e)throw new Error("MeshRender: shadredMaterials value can't be null.");var t=e.length;this._materialsInstance.length=t;for(var n=0;t>n;n++){var i=this._materials[n];if(i!==e[n]){this._materialsInstance[n]=!1,this._changeMaterialReference(i,e[n]);var r=this._renderElements[n];r&&(r.material=e[n])}}this._materials=e}),a(0,o,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),a(0,o,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var e=this.boundingBox;Di.add(e.min,e.max,this._boundingBoxCenter),Di.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),a(0,o,"receiveShadow",function(){return this._receiveShadow},function(e){this._receiveShadow!==e&&(this._receiveShadow=e,e?this._defineDatas.add(Yi.SHADERDEFINE_RECEIVE_SHADOW):this._defineDatas.remove(Yi.SHADERDEFINE_RECEIVE_SHADOW))}),t._uniqueIDCounter=0,i(t,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new Di,new Di,new Di,new Di,new Di,new Di,new Di,new Di]},"_greenColor",function(){return this._greenColor=new Mi(0,1,0,1)}]),t}(f),Rn=function(e){function t(e){this._owner=null,this._trailRenderElements=null,this._minVertexDistance=0/0,this._widthMultiplier=0/0,this._time=0/0,this._widthCurve=null,this._colorGradient=null,this._textureMode=0,this._curtime=0,this._curSubTrailFinishCurTime=0,this._curSubTrailFinished=!1,this._hasLifeSubTrail=!1,this._trailTotalLength=0,this._trailSupplementLength=0,this._trailDeadLength=0,this._isStart=!1,this._trailRenderElementIndex=0,t.__super.call(this),this._curSubTrailFinishPosition=new Di,this._curSubTrailFinishDirection=new Di,this._owner=e,this._initDefaultData(),this._trailRenderElements=[],this.addRenderElement()}r(t,"laya.d3.core.trail.TrailFilter",e);var n=t.prototype;return n._changeRenderElement=function(e){var t=this._owner._render,n=t._renderElements,i=n[e];if(i)i.setGeometry(this._trailRenderElements[e]);else{var r=t.sharedMaterials[0];r||(r=ar.defaultMaterial),i=n[e]=new Tt,i.setTransform(this._owner._transform),i.render=t,i.material=r,i.setGeometry(this._trailRenderElements[e])}},n.getRenderElementsCount=function(){return this._trailRenderElements.length},n.addRenderElement=function(){for(var e=0;e<this._trailRenderElements.length;e++)if(1==this._trailRenderElements[e]._isDead)return this._trailRenderElements[e].reActivate(),this._changeRenderElement(e),e;var t=new wn(this);return this._trailRenderElements.push(t),this._changeRenderElement(this._trailRenderElements.length-1),this._trailRenderElements.length-1},n.getRenderElement=function(e){return this._trailRenderElements[e]},n._update=function(e){this._curtime+=e.scene.timer._delta/1e3,this._owner._render._shaderValues.setNumber(xr.CURTIME,this._curtime),this._curSubTrailFinished&&(this._curSubTrailFinished=!1,this.addRenderElement())},n._initDefaultData=function(){this.time=5,this.minVertexDistance=.1,this.widthMultiplier=1,this.textureMode=0;var e=[],t=new On;t.time=0,t.inTangent=0,t.outTangent=0,t.value=1,e.push(t);var n=new On;n.time=1,n.inTangent=0,n.outTangent=0,n.value=1,e.push(n),this.widthCurve=e;var i=new j(2,2);i.mode=0,i.addColorRGB(0,Ht.WHITE),i.addColorRGB(1,Ht.WHITE),i.addColorAlpha(0,1),i.addColorAlpha(1,1),this.colorGradient=i},n.reset=function(){for(var e=0;e<this._trailRenderElements.length;e++)this._trailRenderElements[e].reActivate();this._isStart=!1,this._hasLifeSubTrail=!1,this._curSubTrailFinished=!1,this._curSubTrailFinishCurTime=0,this._trailTotalLength=0,this._trailSupplementLength=0,this._trailDeadLength=0},n.destroy=function(){for(var e=0;e<this._trailRenderElements.length;e++)this._trailRenderElements[e]._destroy();this._trailRenderElements=null,this._widthCurve=null,this._colorGradient=null,this._curSubTrailFinishPosition=null,this._curSubTrailFinishDirection=null},a(0,n,"widthMultiplier",function(){return this._widthMultiplier},function(e){this._widthMultiplier=e}),a(0,n,"time",function(){return this._time},function(e){this._time=e,this._owner._render._shaderValues.setNumber(xr.LIFETIME,e)}),a(0,n,"widthCurve",function(){return this._widthCurve},function(e){this._widthCurve=e;var t=new Float32Array(4*e.length),n=0,i=0,r=0;for(n=0,i=e.length;i>n;n++)t[r++]=e[n].time,t[r++]=e[n].inTangent,t[r++]=e[n].outTangent,t[r++]=e[n].value;this._owner._render._shaderValues.setBuffer(xr.WIDTHCURVE,t),this._owner._render._shaderValues.setInt(xr.WIDTHCURVEKEYLENGTH,e.length)}),a(0,n,"minVertexDistance",function(){return this._minVertexDistance},function(e){this._minVertexDistance=e}),a(0,n,"colorGradient",function(){return this._colorGradient},function(e){this._colorGradient=e,this._owner._render._shaderValues.setBuffer(xr.GRADIENTCOLORKEY,e._rgbElements),this._owner._render._shaderValues.setBuffer(xr.GRADIENTALPHAKEY,e._alphaElements),0==e.mode?this._owner._render._defineDatas.add(xr.SHADERDEFINE_GRADIENTMODE_BLEND):this._owner._render._defineDatas.remove(xr.SHADERDEFINE_GRADIENTMODE_BLEND)}),a(0,n,"textureMode",function(){return this._textureMode},function(e){this._textureMode=e}),t}(f),In=function(e){function t(e){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._children=null,this._parent=null,this._dummy=null,this.pivot=null,t.__super.call(this),this._localPosition=new Di(0,0,0),this._localRotation=new Yt(0,0,0,1),this._localScale=new Di(1,1,1),this._localRotationEuler=new Di(0,0,0),this._localMatrix=new Wt,this._position=new Di(0,0,0),this._rotation=new Yt(0,0,0,1),this._scale=new Di(1,1,1),this._rotationEuler=new Di(0,0,0),this._worldMatrix=new Wt,this._forward=new Di,this._up=new Di,this._right=new Di,this._owner=e,this._children=[]}r(t,"laya.d3.core.Transform3D",e);var n=t.prototype;return n._setParent=function(e){if(this._parent!==e){if(this._parent){var t=this._parent._children,n=t.indexOf(this);t.splice(n,1)}e&&(e._children.push(this),e&&this._onWorldTransform()),this._parent=e}},n._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)Wt.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var e=t._tempVector30;Di.multiply(this.pivot,this._localScale,e);var n=t._tempVector31;Di.subtract(e,this.pivot,n);var i=t._tempVector32,r=this.localRotation;Di.transformQuat(e,r,i),Di.subtract(i,e,i);var a=t._tempVector33;Di.subtract(this._localPosition,n,a),Di.subtract(a,i,a),Wt.createAffineTransformation(a,r,this._localScale,this._localMatrix)}},n._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var e=0,t=this._children.length;t>e;e++)this._children[e]._onWorldPositionRotationTransform()}},n._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var e=0,t=this._children.length;t>e;e++)this._children[e]._onWorldPositionScaleTransform()}},n._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var e=0,t=this._children.length;t>e;e++)this._children[e]._onWorldPositionTransform()}},n._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var e=0,t=this._children.length;t>e;e++)this._children[e]._onWorldPositionRotationTransform()}},n._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var e=0,t=this._children.length;t>e;e++)this._children[e]._onWorldPositionScaleTransform()}},n._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var e=0,t=this._children.length;t>e;e++)this._children[e]._onWorldTransform()}},n.translate=function(e,n){void 0===n&&(n=!0),n?(Wt.createFromQuaternion(this.localRotation,t._tempMatrix0),Di.transformCoordinate(e,t._tempMatrix0,t._tempVector30),Di.add(this.localPosition,t._tempVector30,this._localPosition),this.localPosition=this._localPosition):(Di.add(this.position,e,this._position),this.position=this._position)},n.rotate=function(e,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0);var r;i?r=e:(Di.scale(e,Math.PI/180,t._tempVector30),r=t._tempVector30),Yt.createFromYawPitchRoll(r.y,r.x,r.z,t._tempQuaternion0),n?(Yt.multiply(this._localRotation,t._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(Yt.multiply(t._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},n.lookAt=function(e,t,n){void 0===n&&(n=!1);var i,r=e.elements;if(n){if(i=this._localPosition.elements,Math.abs(i[0]-r[0])<zt.zeroTolerance&&Math.abs(i[1]-r[1])<zt.zeroTolerance&&Math.abs(i[2]-r[2])<zt.zeroTolerance)return;Yt.lookAt(this._localPosition,e,t,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var a=this.position;if(i=a.elements,Math.abs(i[0]-r[0])<zt.zeroTolerance&&Math.abs(i[1]-r[1])<zt.zeroTolerance&&Math.abs(i[2]-r[2])<zt.zeroTolerance)return;Yt.lookAt(a,e,t,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},a(0,n,"_isFrontFaceInvert",function(){var e=this.scale,t=e.x<0;return e.y<0&&(t=!t),e.z<0&&(t=!t),t}),a(0,n,"owner",function(){return this._owner}),a(0,n,"localPositionY",function(){return this._localPosition.elements[1]},function(e){this._localPosition.elements[1]=e,this.localPosition=this._localPosition}),a(0,n,"localScaleX",function(){return this._localScale.elements[0]},function(e){this._localScale.elements[0]=e,this.localScale=this._localScale}),a(0,n,"worldNeedUpdate",function(){return this._worldUpdate}),a(0,n,"localPositionX",function(){return this._localPosition.elements[0]},function(e){this._localPosition.elements[0]=e,this.localPosition=this._localPosition}),a(0,n,"localPosition",function(){return this._localPosition},function(e){this._localPosition!==e&&e.cloneTo(this._localPosition),this._localUpdate=!0,this._onWorldPositionTransform()}),a(0,n,"localPositionZ",function(){return this._localPosition.elements[2]},function(e){this._localPosition.elements[2]=e,this.localPosition=this._localPosition}),a(0,n,"localRotationX",function(){return this.localRotation.elements[0]},function(e){this._localRotation.elements[0]=e,this.localRotation=this._localRotation}),a(0,n,"localRotationY",function(){return this.localRotation.elements[1]},function(e){this._localRotation.elements[1]=e,this.localRotation=this._localRotation}),a(0,n,"localRotationZ",function(){return this.localRotation.elements[2]},function(e){this._localRotation.elements[2]=e,this.localRotation=this._localRotation}),a(0,n,"localRotationW",function(){return this.localRotation.elements[3]},function(e){this._localRotation.elements[3]=e,this.localRotation=this._localRotation}),a(0,n,"localRotation",function(){if(this._localQuaternionUpdate){var e=this._localRotationEuler.elements;Yt.createFromYawPitchRoll(e[1]/t._angleToRandin,e[0]/t._angleToRandin,e[2]/t._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},function(e){this._localRotation!==e&&e.cloneTo(this._localRotation),this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),a(0,n,"localScaleY",function(){return this._localScale.elements[1]},function(e){this._localScale.elements[1]=e,this.localScale=this._localScale}),a(0,n,"localScaleZ",function(){return this._localScale.elements[2]},function(e){this._localScale.elements[2]=e,this.localScale=this._localScale}),a(0,n,"position",function(){if(this._positionUpdate){if(null!=this._parent){var e=this._parent.position;Di.multiply(this._localPosition,this._parent.scale,t._tempVector30),Di.transformQuat(t._tempVector30,this._parent.rotation,t._tempVector30),Di.add(e,t._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(e){if(null!=this._parent){Di.subtract(e,this._parent.position,this._localPosition);var n=this._parent.scale.elements,i=n[0],r=n[1],a=n[2];if(1!==i||1!==r||1!==a){var o=t._tempVector30,s=o.elements;s[0]=1/i,s[1]=1/r,s[2]=1/a,Di.multiply(this._localPosition,o,this._localPosition)}var l=this._parent.rotation;l.invert(t._tempQuaternion0),Di.transformQuat(this._localPosition,t._tempQuaternion0,this._localPosition)}else e.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position!==e&&e.cloneTo(this._position),this._positionUpdate=!1}),a(0,n,"localRotationEulerY",function(){return this.localRotationEuler.elements[1]},function(e){this._localRotationEuler.elements[1]=e,this.localRotationEuler=this._localRotationEuler}),a(0,n,"localScale",function(){return this._localScale},function(e){this._localScale!==e&&e.cloneTo(this._localScale),this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),a(0,n,"localRotationEulerX",function(){return this.localRotationEuler.elements[0]},function(e){this._localRotationEuler.elements[0]=e,this.localRotationEuler=this._localRotationEuler}),a(0,n,"localRotationEulerZ",function(){return this.localRotationEuler.elements[2]},function(e){this._localRotationEuler.elements[2]=e,this.localRotationEuler=this._localRotationEuler}),a(0,n,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(t._tempVector30);var e=t._tempVector30.elements,n=this._localRotationEuler.elements;n[0]=e[1]*t._angleToRandin,n[1]=e[0]*t._angleToRandin,n[2]=e[2]*t._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},function(e){this._localRotationEuler!==e&&e.cloneTo(this._localRotationEuler),this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),a(0,n,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(e){this._localMatrix!==e&&e.cloneTo(this._localMatrix),this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),a(0,n,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?Yt.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(e){null!=this._parent?(this._parent.rotation.invert(t._tempQuaternion0),Yt.multiply(t._tempQuaternion0,e,this._localRotation)):e.cloneTo(this._localRotation),this.localRotation=this._localRotation,e!==this._rotation&&e.cloneTo(this._rotation),this._rotation.getYawPitchRoll(this._rotationEuler),this._rotationUpdate=!1}),a(0,n,"scale",function(){return this._scaleUpdate?(null!==this._parent?Di.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1,this._scale):this._scale},function(e){if(null!==this._parent){var n=this._parent.scale.elements,i=t._tempVector30.elements;i[0]=1/n[0],i[1]=1/n[1],i[2]=1/n[2],Di.multiply(e,t._tempVector30,this._localScale)}else e.cloneTo(this._localScale);this.localScale=this._localScale,this._scale!==e&&e.cloneTo(this._scale),this._scaleUpdate=!1
}),a(0,n,"rotationEuler",function(){return this._rotationEuler},function(e){Yt.createFromYawPitchRoll(e.y/t._angleToRandin,e.x/t._angleToRandin,e.z/t._angleToRandin,this._rotation),this.rotation=this._rotation,this._rotationEuler!==e&&e.cloneTo(this._rotationEuler)}),a(0,n,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?Wt.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(e){null===this._parent?e.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),Wt.multiply(this._localMatrix,e,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix!==e&&e.cloneTo(this._worldMatrix),this._worldUpdate=!1}),a(0,n,"forward",function(){var e=this.worldMatrix.elements;return this._forward.elements[0]=-e[8],this._forward.elements[1]=-e[9],this._forward.elements[2]=-e[10],this._forward}),a(0,n,"up",function(){var e=this.worldMatrix.elements;return this._up.elements[0]=e[4],this._up.elements[1]=e[5],this._up.elements[2]=e[6],this._up}),a(0,n,"right",function(){var e=this.worldMatrix.elements;return this._right.elements[0]=e[0],this._right.elements[1]=e[1],this._right.elements[2]=e[2],this._right}),i(t,["_tempVector30",function(){return this._tempVector30=new Di},"_tempVector31",function(){return this._tempVector31=new Di},"_tempVector32",function(){return this._tempVector32=new Di},"_tempVector33",function(){return this._tempVector33=new Di},"_tempQuaternion0",function(){return this._tempQuaternion0=new Yt},"_tempMatrix0",function(){return this._tempMatrix0=new Wt},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),t}(f),Cn=(function(e){function t(){this._rotation=0,this._matNeedUpdte=!1,t.__super.call(this),this._matrix=new Wt,this._offset=new xi,this._tiling=new xi(1,1)}r(t,"laya.d3.core.TransformUV",e);var o=t.prototype;return n.imps(o,{"laya.d3.core.IClone":!0}),o._updateMatrix=function(){t._tempOffsetV3.elements[0]=this._offset.x,t._tempOffsetV3.elements[1]=this._offset.y,Yt.createFromYawPitchRoll(0,0,this._rotation,t._tempRotationQua),t._tempTitlingV3.elements[0]=this._tiling.x,t._tempTitlingV3.elements[1]=this._tiling.y,Wt.createAffineTransformation(t._tempOffsetV3,t._tempRotationQua,t._tempTitlingV3,this._matrix)},o.cloneTo=function(e){e._matrix=this._matrix.clone(),e._offset=this._offset.clone(),e._rotation=this._rotation,e._tiling=this._tiling.clone()},o.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,o,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),a(0,o,"tiling",function(){return this._tiling},function(e){this._tiling=e,this._matNeedUpdte=!0}),a(0,o,"offset",function(){return this._offset},function(e){this._offset=e,this._matNeedUpdte=!0}),a(0,o,"rotation",function(){return this._rotation},function(e){this._rotation=e,this._matNeedUpdte=!0}),i(t,["_tempOffsetV3",function(){return this._tempOffsetV3=new Di(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new Yt},"_tempTitlingV3",function(){return this._tempTitlingV3=new Di(1,1,1)}]),t}(f),function(e){function t(e,n){this._restitution=0,this._friction=.5,this._rollingFriction=0,this._ccdMotionThreshold=0,this._ccdSweptSphereRadius=0,this._colliderShape=null,this._enableProcessCollisions=!0,this.canScaleShape=!0,t.__super.call(this),this._collisionGroup=1,this._canCollideWith=En.COLLISIONFILTERGROUP_ALLFILTER,this._collisionGroup=e,this._canCollideWith=n,t._physicObjectsMap[this.id]=this}r(t,"laya.d3.physics.PhysicsComponent",e);var o=t.prototype;return o._parseShape=function(e){var t=e.length;if(1===t){var n=nn._creatShape(e[0]);this.colliderShape=n}else{for(var i=new Ii,r=0;t>r;r++)n=nn._creatShape(e[r]),i.addChildShape(n);this.colliderShape=i}},o._addToSimulation=function(){},o._removeFromSimulation=function(){},o._derivePhysicsTransformation=function(e){var n=this._colliderShape.localOffset,i=this._colliderShape.localRotation,r=n.elements,a=i.elements,o=this.owner._transform,s=o.position,l=s.elements,h=o.rotation.elements,c=t._nativeVector30,_=t._nativeQuaternion0;if(0!==r[0]||0!==r[1]||0!==r[2]){var u=t._tempVector30,d=u.elements;t.physicVector3TransformQuat(n,h[0],h[1],h[2],h[3],u),Di.add(s,u,u),c.setValue(-d[0],d[1],d[2])}else c.setValue(-l[0],l[1],l[2]);if(e.setOrigin(c),0!==a[0]||0!==a[1]||0!==a[2]||1!==a[3]){var f=t._tempQuaternion0;t.physicQuaternionMultiply(h[0],h[1],h[2],h[3],i,f);var m=f.elements;_.setValue(-m[0],m[1],m[2],-m[3])}else _.setValue(-h[0],h[1],h[2],-h[3]);e.setRotation(_),this._colliderShape._setScale(o.scale)},o._updateTransformComponent=function(e){var n=this._colliderShape.localOffset.elements,i=this._colliderShape.localRotation.elements,r=this.owner._transform,a=r.position,o=r.rotation,s=a.elements,l=o.elements,h=e.getOrigin(),c=e.getRotation();if(0!==n[0]||0!==n[1]||0!==n[2]){var _=t._tempVector30;t.physicVector3TransformQuat(this._colliderShape.localOffset,l[0],l[1],l[2],l[3],_);var u=_.elements;s[0]=-h.x()-u[0],s[1]=h.y()-u[1],s[2]=h.z()-u[2]}else s[0]=-h.x(),s[1]=h.y(),s[2]=h.z();if(r.position=a,0!==i[0]||0!==i[1]||0!==i[2]||1!==i[3]){var d=t._tempQuaternion0;this._colliderShape.localRotation.invert(d),t.physicQuaternionMultiply(-c.x(),c.y(),c.z(),-c.w(),d,o)}else l[0]=-c.x(),l[1]=c.y(),l[2]=c.z(),l[3]=-c.w();r.rotation=o},o._updatePhysicsTransform=function(){var e=this._nativeColliderObject.getWorldTransform();this._derivePhysicsTransformation(e)},o._onEnableInScene=function(){this._simulation=this.owner._scene.physicsSimulation,this._nativeColliderObject.setContactProcessingThreshold(1e30),this._colliderShape&&this._enabled&&(this._derivePhysicsTransformation(this._nativeColliderObject.getWorldTransform()),this._addToSimulation())},o._onDisableInScene=function(){this._colliderShape&&this._enabled&&this._removeFromSimulation(),this._simulation=null},o._onShapeChange=function(e){var t=this._nativeColliderObject,n=t.getCollisionFlags();e.needsCustomCollisionCallback?0===(8&n)&&t.setCollisionFlags(8|n):(8&n)>0&&t.setCollisionFlags(8^n)},o._onAdded=function(){this.enabled=this._enabled,this.restitution=this._restitution,this.friction=this._friction,this.rollingFriction=this._rollingFriction,this.ccdMotionThreshold=this._ccdMotionThreshold,this.ccdSweptSphereRadius=this._ccdSweptSphereRadius},o._onDestroy=function(){var n=Sn._physics3D;this._removeFromSimulation(),delete t._physicObjectsMap[this.id],n.destroy(this._nativeColliderObject),n.destroy(this._colliderShape),e.prototype._onDestroy.call(this),this._nativeColliderObject=null,this._colliderShape=null,this._simulation=null},o.activate=function(e){void 0===e&&(e=!1),this._nativeColliderObject&&this._nativeColliderObject.activate(e)},a(0,o,"isActive",function(){return this._nativeColliderObject?this._nativeColliderObject.getIsActive():!1}),a(0,o,"restitution",function(){return this._restitution},function(e){this._restitution=e,this._nativeColliderObject&&this._nativeColliderObject.setRestitution(e)}),a(0,o,"friction",function(){return this._friction},function(e){this._friction=e,this._nativeColliderObject&&this._nativeColliderObject.setFriction(e)}),a(0,o,"rollingFriction",function(){return this._nativeColliderObject.getRollingFriction()},function(e){this._rollingFriction=e,this._nativeColliderObject&&this._nativeColliderObject.setRollingFriction(e)}),a(0,o,"ccdMotionThreshold",function(){return this._ccdMotionThreshold},function(e){this._ccdMotionThreshold=e,this._nativeColliderObject&&this._nativeColliderObject.setCcdMotionThreshold(e)}),a(0,o,"ccdSweptSphereRadius",function(){return this._ccdSweptSphereRadius},function(e){this._ccdSweptSphereRadius=e,this._nativeColliderObject&&this._nativeColliderObject.setCcdSweptSphereRadius(e)}),a(0,o,"collisionGroup",function(){return this._collisionGroup},function(e){this._collisionGroup!==e&&(this._collisionGroup=e,this._removeFromSimulation(),this._addToSimulation())}),a(0,o,"simulation",function(){return this._simulation}),a(0,o,"physicsWorldTransform",function(){return this._nativeColliderObject.getWorldTransform()},function(e){this._nativeColliderObject.setWorldTransform(e)}),a(0,o,"colliderShape",function(){return this._colliderShape},function(e){var t=this._colliderShape;if(t&&(t._attatched=!1,t._attatchedCollisionObject=null),this._colliderShape=e,e){if(e._attatched)throw"PhysicsComponent: this shape has attatched to other entity.";e._attatched=!0,e._attatchedCollisionObject=this,this._nativeColliderObject&&(this._nativeColliderObject.setCollisionShape(e._nativeShape),this._simulation&&this._enabled&&(t&&this._removeFromSimulation(),this._derivePhysicsTransformation(this._nativeColliderObject.getWorldTransform()),this._addToSimulation()),this._onShapeChange(e))}else this._simulation&&this._enabled&&t&&this._removeFromSimulation()}),a(0,o,"enabled",e.prototype._$get_enabled,function(e){this._simulation&&this._colliderShape&&(e?(this._derivePhysicsTransformation(this._nativeColliderObject.getWorldTransform()),this._addToSimulation()):this._removeFromSimulation()),n.superSet(u,this,"enabled",e)}),a(0,o,"canCollideWith",function(){return this._canCollideWith},function(e){if(this._canCollideWith!==e){this._canCollideWith=e;var t=this._nativeColliderObject.getBroadphaseHandle();t.set_m_collisionFilterMask(e)}}),t._createAffineTransformationArray=function(e,t,n,i,r,a,o,s,l){var h=i+i,c=r+r,_=a+a,u=i*h,d=i*c,f=i*_,m=r*c,p=r*_,v=a*_,E=o*h,T=o*c,g=o*_,S=s[0],x=s[1],D=s[2];l[0]=(1-(m+v))*S,l[1]=(d+g)*S,l[2]=(f-T)*S,l[3]=0,l[4]=(d-g)*x,l[5]=(1-(u+v))*x,l[6]=(p+E)*x,l[7]=0,l[8]=(f+T)*D,l[9]=(p-E)*D,l[10]=(1-(u+m))*D,l[11]=0,l[12]=e,l[13]=t,l[14]=n,l[15]=1},t.physicVector3TransformQuat=function(e,t,n,i,r,a){var o=a.elements,s=e.elements,l=s[0],h=s[1],c=s[2],_=r*l+n*c-i*h,u=r*h+i*l-t*c,d=r*c+t*h-n*l,f=-t*l-n*h-i*c;o[0]=_*r+f*-t+u*-i-d*-n,o[1]=u*r+f*-n+d*-t-_*-i,o[2]=d*r+f*-i+_*-n-u*-t},t.physicQuaternionMultiply=function(e,t,n,i,r,a){var o=r.elements,s=a.elements,l=o[0],h=o[1],c=o[2],_=o[3],u=t*c-n*h,d=n*l-e*c,f=e*h-t*l,m=e*l+t*h+n*c;s[0]=e*_+l*i+u,s[1]=t*_+h*i+d,s[2]=n*_+c*i+f,s[3]=i*_-m},t.ACTIVATIONSTATE_ACTIVE_TAG=1,t.ACTIVATIONSTATE_ISLAND_SLEEPING=2,t.ACTIVATIONSTATE_WANTS_DEACTIVATION=3,t.ACTIVATIONSTATE_DISABLE_DEACTIVATION=4,t.ACTIVATIONSTATE_DISABLE_SIMULATION=5,t.COLLISIONFLAGS_STATIC_OBJECT=1,t.COLLISIONFLAGS_KINEMATIC_OBJECT=2,t.COLLISIONFLAGS_NO_CONTACT_RESPONSE=4,t.COLLISIONFLAGS_CUSTOM_MATERIAL_CALLBACK=8,t.COLLISIONFLAGS_CHARACTER_OBJECT=16,t.COLLISIONFLAGS_DISABLE_VISUALIZE_OBJECT=32,t.COLLISIONFLAGS_DISABLE_SPU_COLLISION_PROCESSING=64,t._physicObjectsMap={},i(t,["_tempVector30",function(){return this._tempVector30=new Di},"_tempQuaternion0",function(){return this._tempQuaternion0=new Yt},"_tempQuaternion1",function(){return this._tempQuaternion1=new Yt},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new Wt},"_nativeVector30",function(){return this._nativeVector30=new Sn._physics3D.btVector3(0,0,0)},"_nativeQuaternion0",function(){return this._nativeQuaternion0=new Sn._physics3D.btQuaternion(0,0,0,1)}]),t}(u)),yn=(function(e){function t(){this._nativeConstraint=null,this._breakingImpulseThreshold=0/0,this._connectedBody=null,this._feedbackEnabled=!1,t.__super.call(this)}r(t,"laya.d3.physics.constraints.ConstraintComponent",e);var i=t.prototype;return i._onDestroy=function(){var e=Sn._physics3D;e.destroy(this._nativeConstraint),this._nativeConstraint=null},a(0,i,"breakingImpulseThreshold",function(){return this._breakingImpulseThreshold},function(e){this._nativeConstraint.BreakingImpulseThreshold=e,this._breakingImpulseThreshold=e}),a(0,i,"enabled",function(){return n.superGet(u,this,"enabled")},function(e){this._nativeConstraint.IsEnabled=e,n.superSet(u,this,"enabled",e)}),a(0,i,"appliedImpulse",function(){return this._feedbackEnabled||(this._nativeConstraint.EnableFeedback(!0),this._feedbackEnabled=!0),this._nativeConstraint.AppliedImpulse}),a(0,i,"connectedBody",function(){return this._connectedBody},function(e){this._connectedBody=e}),t}(u),function(e){function t(){t.__super.call(this)}r(t,"laya.d3.core.FloatArrayKeyframe",e);var n=t.prototype;return n.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var n=t;n.inTangent=this.inTangent.slice(),n.outTangent=this.outTangent.slice(),n.value=this.value.slice()},t}(Y)),On=function(e){function t(){t.__super.call(this)}r(t,"laya.d3.core.FloatKeyframe",e);var n=t.prototype;return n.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var n=t;n.inTangent=this.inTangent,n.outTangent=this.outTangent,n.value=this.value},t}(Y),Ln=function(e){function t(e){t.__super.call(this),this._tempRotationMatrix=new Wt,this._uvLength=new xi,this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._owner=e,this._ownerRender=e.particleRenderer,this._boundingBoxCorners=o(8,null),this._boundingSphere=new Ut(new Di,Number.MAX_VALUE),this._boundingBox=new Ft(new Di(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),new Di(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)),this._currentTime=0,this._isEmitting=!1,this._isPlaying=!1,this._isPaused=!1,this._burstsIndex=0,this._frameRateTime=0,this._emissionTime=0,this._totalDelayTime=0,this._simulateUpdate=!1,this._bufferMaxParticles=1,this.duration=5,this.looping=!0,this.prewarm=!1,this.startDelayType=0,this.startDelay=0,this.startDelayMin=0,this.startDelayMax=0,this._startLifetimeType=0,this._startLifetimeConstant=5,this._startLifeTimeGradient=new at,this._startLifetimeConstantMin=0,this._startLifetimeConstantMax=5,this._startLifeTimeGradientMin=new at,this._startLifeTimeGradientMax=new at,this._maxStartLifetime=5,this.startSpeedType=0,this.startSpeedConstant=5,this.startSpeedConstantMin=0,this.startSpeedConstantMax=5,this.threeDStartSize=!1,this.startSizeType=0,this.startSizeConstant=1,this.startSizeConstantSeparate=new Di(1,1,1),this.startSizeConstantMin=0,this.startSizeConstantMax=1,this.startSizeConstantMinSeparate=new Di(0,0,0),this.startSizeConstantMaxSeparate=new Di(1,1,1),this.threeDStartRotation=!1,this.startRotationType=0,this.startRotationConstant=0,this.startRotationConstantSeparate=new Di(0,0,0),this.startRotationConstantMin=0,this.startRotationConstantMax=0,this.startRotationConstantMinSeparate=new Di(0,0,0),this.startRotationConstantMaxSeparate=new Di(0,0,0),this.randomizeRotationDirection=0,this.startColorType=0,this.startColorConstant=new Mi(1,1,1,1),this.startColorConstantMin=new Mi(1,1,1,1),this.startColorConstantMax=new Mi(1,1,1,1),this.gravityModifier=0,this.simulationSpace=1,this.scaleMode=0,this.playOnAwake=!0,this._rand=new Zt(0),this.autoRandomSeed=!0,this.randomSeed=new Uint32Array(1),this._randomSeeds=new Uint32Array(t._RANDOMOFFSET.length),this.isPerformanceMode=!0,this._emission=new et,this._emission.enbale=!0}r(t,"laya.d3.core.particleShuriKen.ShurikenParticleSystem",e);var s=t.prototype;return n.imps(s,{"laya.d3.core.IClone":!0}),s._getVertexBuffer=function(e){return void 0===e&&(e=0),0===e?this._vertexBuffer:null},s._getIndexBuffer=function(){return this._indexBuffer},s._generateBoundingSphere=function(){var e=this._boundingSphere.center.elements;e[0]=0,e[1]=0,e[2]=0,this._boundingSphere.radius=Number.MAX_VALUE},s._generateBoundingBox=function(){var e=this._owner,n=e.particleRenderer,i=this._boundingBox.min,r=this._boundingBox.max,a=0,o=0,s=0/0;switch(this.startLifetimeType){case 0:s=this.startLifetimeConstant;break;case 1:s=-Number.MAX_VALUE;var l=l;for(a=0,o=l.gradientCount;o>a;a++)s=Math.max(s,l.getValueByIndex(a));break;case 2:s=Math.max(this.startLifetimeConstantMin,this.startLifetimeConstantMax);break;case 3:s=-Number.MAX_VALUE;var h=h;for(a=0,o=h.gradientCount;o>a;a++)s=Math.max(s,h.getValueByIndex(a));var c=c;for(a=0,o=c.gradientCount;o>a;a++)s=Math.max(s,c.getValueByIndex(a))}var _=0/0,u=0/0;switch(this.startSpeedType){case 0:_=u=this.startSpeedConstant;break;case 1:break;case 2:_=this.startLifetimeConstantMin,u=this.startLifetimeConstantMax;break;case 3:}var d,f,m,p;this._shape&&this._shape.enable||(d=f=Di.ZERO,m=Di.ZERO,p=Di.UnitZ);var v=new Di(m.x*_,m.y*_,m.z*_),E=new Di(p.x*u,p.y*u,p.z*u);if(this._velocityOverLifetime&&this._velocityOverLifetime.enbale){var T,g,S=this._velocityOverLifetime.velocity;switch(S.type){case 0:T=g=S.constant;break;case 1:T=g=new Di(S.gradientX.getAverageValue(),S.gradientY.getAverageValue(),S.gradientZ.getAverageValue());break;case 2:T=S.constantMin,g=S.constantMax;break;case 3:T=new Di(S.gradientXMin.getAverageValue(),S.gradientYMin.getAverageValue(),S.gradientZMin.getAverageValue()),g=new Di(S.gradientXMax.getAverageValue(),S.gradientYMax.getAverageValue(),S.gradientZMax.getAverageValue())}}var x,D,M=this._owner.transform,A=M.position,R=t._tempVector39,I=R.elements,C=n.renderMode;switch(this.scaleMode){case 0:var y=M.scale;x=y,I[0]=y.x,I[1]=y.z,I[2]=y.y,1===C&&(D=y);break;case 1:var O=M.localScale;x=O,I[0]=O.x,I[1]=O.z,I[2]=O.y,1===C&&(D=O);break;case 2:x=M.scale,I[0]=I[1]=I[2]=1,1===C&&(D=Di.ONE)}var L,V;switch(this._velocityOverLifetime&&this._velocityOverLifetime.enbale||(L=new Di(v.x*s,v.y*s,v.z*s),V=new Di(E.x*s,E.y*s,E.z*s),2!=this.scaleMode?(Di.add(d,L,i),Di.multiply(x,i,i),Di.add(f,V,r),Di.multiply(x,r,r)):(Di.multiply(x,d,i),Di.add(i,L,i),Di.multiply(x,f,r),Di.add(r,V,r))),this.simulationSpace){case 0:break;case 1:Di.add(i,A,i),Di.add(r,A,r)}var w=0/0,N=0/0;switch(this.startSizeType){case 0:if(this.threeDStartSize){var P=P;w=Math.max(P.x,P.y),1===C&&(N=P.y)}else w=this.startSizeConstant,1===C&&(N=this.startSizeConstant);break;case 1:break;case 2:if(this.threeDStartSize){var b=b;w=Math.max(b.x,b.y),1===C&&(N=b.y)}else w=this.startSizeConstantMax,1===C&&(N=this.startSizeConstantMax);break;case 3:}if(this._sizeOverLifetime&&this._sizeOverLifetime.enbale){{this._sizeOverLifetime.size}w*=this._sizeOverLifetime.size.getMaxSizeInGradient()}var F=t._tempVector30,B=F.elements,U=0/0,G=0/0;switch(C){case 0:U=w*t.halfKSqrtOf2,Di.scale(R,w,F),Di.subtract(i,F,i),Di.add(r,F,r);break;case 1:var H=t._tempVector31,z=t._tempVector32,k=t._tempVector33,W=t._tempVector34;this._velocityOverLifetime&&this._velocityOverLifetime.enbale||(Di.multiply(D,E,z),Di.multiply(D,v,k));var X=N*n.stretchedBillboardLengthScale,Y=Di.scalarLength(z)*n.stretchedBillboardSpeedScale+X,Z=Di.scalarLength(k)*n.stretchedBillboardSpeedScale+X,j=t._tempVector35,K=t._tempVector36;Di.normalize(z,j),Di.scale(j,Y,W),Di.subtract(V,W,W),Di.normalize(k,K),Di.scale(K,Z,H),Di.add(L,H,H),U=w*t.halfKSqrtOf2,Di.scale(R,U,F);var q=t._tempVector37,Q=t._tempVector38;Di.scale(j,.5,q),Di.scale(K,.5,Q),Di.multiply(q,R,q),Di.multiply(Q,R,Q),Di.add(i,Q,i),Di.min(i,W,i),Di.subtract(i,F,i),Di.subtract(r,q,r),Di.max(r,H,r),Di.add(r,F,r);break;case 2:w*=Math.cos(.7853981633974483),G=.5*w,B[0]=R.x*G,B[1]=R.z*G,Di.subtract(i,F,i),Di.add(r,F,r);break;case 3:w*=Math.cos(.7853981633974483),G=.5*w,Di.scale(R,G,F),Di.subtract(i,F,i),Di.add(r,F,r)}this._boundingBox.getCorners(this._boundingBoxCorners)},s._updateEmission=function(){if(this.isAlive)if(this._simulateUpdate)this._simulateUpdate=!1;else{var e=this._startUpdateLoopCount===C.loopCount||this._isPaused?0:this._owner._scene.timer._delta/1e3;e=Math.min(t._maxElapsedTime,e),this._updateParticles(e)}},s._updateParticles=function(e){(4!==this._ownerRender.renderMode||this._ownerRender.mesh)&&(this._currentTime+=e,this._retireActiveParticles(),this._freeRetiredParticles(),this._totalDelayTime+=e,this._totalDelayTime<this._playStartDelay||this._emission.enbale&&this._isEmitting&&!this._isPaused&&this._advanceTime(e,this._currentTime))},s._updateParticlesSimulationRestart=function(e){this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._burstsIndex=0,this._frameRateTime=e,this._emissionTime=0,this._totalDelayTime=0,this._currentTime=e;var t=e;return t<this._playStartDelay?(this._totalDelayTime=t,void 0):(this._emission.enbale&&this._advanceTime(e,e),void 0)},s._retireActiveParticles=function(){for(var e=1e-4;this._firstActiveElement!=this._firstNewElement;){var t=this._firstActiveElement*this._floatCountPerVertex*this._vertexStride,n=t+this._timeIndex,i=this._currentTime-this._vertices[n];if(i+e<this._vertices[t+this._startLifeTimeIndex])break;this._vertices[n]=this._drawCounter,this._firstActiveElement++,this._firstActiveElement>=this._bufferMaxParticles&&(this._firstActiveElement=0)}},s._freeRetiredParticles=function(){for(;this._firstRetiredElement!=this._firstActiveElement;){var e=this._drawCounter-this._vertices[this._firstRetiredElement*this._floatCountPerVertex*this._vertexStride+this._timeIndex];if(this.isPerformanceMode&&3>e)break;this._firstRetiredElement++,this._firstRetiredElement>=this._bufferMaxParticles&&(this._firstRetiredElement=0)}},s._burst=function(e,t){for(var n=0,i=this._emission._bursts,r=i.length;this._burstsIndex<r;this._burstsIndex++){var a=i[this._burstsIndex],o=a.time;if(!(o>=e&&t>o))break;var s=0;this.autoRandomSeed?s=g.lerp(a.minCount,a.maxCount,Math.random()):(this._rand.seed=this._randomSeeds[0],s=g.lerp(a.minCount,a.maxCount,this._rand.getFloat()),this._randomSeeds[0]=this._rand.seed),n+=s}return n},s._advanceTime=function(e,t){var n=0,i=this._emissionTime;this._emissionTime+=e;var r=0;if(this._emissionTime>this.duration){if(!this.looping){for(r=Math.min(this.maxParticles-this.aliveParticleCount,r),n=0;r>n;n++)this.emit(t);return this._isPlaying=!1,this.stop(),void 0}r+=this._burst(i,this._emissionTime),this._emissionTime-=this.duration,this._burstsIndex=0,r+=this._burst(0,this._emissionTime)}else r+=this._burst(i,this._emissionTime);for(r=Math.min(this.maxParticles-this.aliveParticleCount,r),n=0;r>n;n++)this.emit(t);var a=this.emission.emissionRate;if(a>0){var o=1/a;for(this._frameRateTime+=o,this._frameRateTime=this._currentTime-(this._currentTime-this._frameRateTime)%this._maxStartLifetime;this._frameRateTime<=t&&this.emit(this._frameRateTime);)this._frameRateTime+=o;this._frameRateTime=Math.floor(t/o)*o}},s._initBufferDatas=function(){this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy());var e=this._ownerRender,t=e.renderMode;if(-1!==t&&this.maxParticles>0){var n,i,r=0,a=0,o=0,s=0,l=0,h=e.mesh;if(4===t){if(h){var c=h._vertexBuffers.length;if(c>1)throw new Error("ShurikenParticleSystem: submesh Count mesh be One or all subMeshes have the same vertexDeclaration.");i=Si.vertexDeclaration,this._floatCountPerVertex=i.vertexStride/4,this._startLifeTimeIndex=12,this._timeIndex=16,this._vertexStride=h._vertexBuffers[0].vertexCount;var _=this._bufferMaxParticles*this._vertexStride,u=Math.floor(_/65535)+1,d=_%65535;if(u>1)throw new Error("ShurikenParticleSystem:the maxParticleCount multiply mesh vertexCount is large than 65535.");this._vertexBuffer=new or(i.vertexStride*d,35048),this._vertexBuffer.vertexDeclaration=i,this._vertices=new Float32Array(this._floatCountPerVertex*d),this._indexStride=h._indexBuffer.indexCount;var f=h._indexBuffer.getData(),m=this._bufferMaxParticles*this._indexStride;for(this._indexBuffer=nr.create("ushort",m,35044),n=new Uint16Array(m),s=0,r=0;r<this._bufferMaxParticles;r++){var p=r*this._vertexStride;for(a=0,o=f.length;o>a;a++)n[s++]=p+f[a]}this._indexBuffer.setData(n);var v=new X;v.bindBufferState(),v.applyVertexBuffer(this._vertexBuffer),v.applyIndexBuffer(this._indexBuffer),v.unBindBufferState(),this._applyBufferState(v)}}else{for(i=gi.vertexDeclaration,this._floatCountPerVertex=i.vertexStride/4,this._startLifeTimeIndex=7,this._timeIndex=11,this._vertexStride=4,this._vertexBuffer=new or(i.vertexStride*this._bufferMaxParticles*this._vertexStride,35048),this._vertexBuffer.vertexDeclaration=i,this._vertices=new Float32Array(this._floatCountPerVertex*this._bufferMaxParticles*this._vertexStride),r=0;r<this._bufferMaxParticles;r++)l=r*this._floatCountPerVertex*this._vertexStride,this._vertices[l]=-.5,this._vertices[l+1]=-.5,this._vertices[l+2]=0,this._vertices[l+3]=1,l+=this._floatCountPerVertex,this._vertices[l]=.5,this._vertices[l+1]=-.5,this._vertices[l+2]=1,this._vertices[l+3]=1,l+=this._floatCountPerVertex,this._vertices[l]=.5,this._vertices[l+1]=.5,this._vertices[l+2]=1,this._vertices[l+3]=0,l+=this._floatCountPerVertex,this._vertices[l]=-.5,this._vertices[l+1]=.5,this._vertices[l+2]=0,this._vertices[l+3]=0;for(this._indexStride=6,this._indexBuffer=nr.create("ushort",6*this._bufferMaxParticles,35044),n=new Uint16Array(6*this._bufferMaxParticles),r=0;r<this._bufferMaxParticles;r++){s=6*r;var E=r*this._vertexStride,T=E+2;n[s++]=E,n[s++]=T,n[s++]=E+1,n[s++]=E,n[s++]=E+3,n[s++]=T}this._indexBuffer.setData(n),v=new X,v.bindBufferState(),v.applyVertexBuffer(this._vertexBuffer),v.applyIndexBuffer(this._indexBuffer),v.unBindBufferState(),this._applyBufferState(v)}}},s.destroy=function(){e.prototype.destroy.call(this),this._vertexBuffer.destroy(),this._indexBuffer.destroy(),this._emission.destroy(),this._owner=null,this._vertices=null,this._indexBuffer=null,this._emission=null,this._shape=null,this.startLifeTimeGradient=null,this.startLifeTimeGradientMin=null,this.startLifeTimeGradientMax=null,this.startSizeConstantSeparate=null,this.startSizeConstantMinSeparate=null,this.startSizeConstantMaxSeparate=null,this.startRotationConstantSeparate=null,this.startRotationConstantMinSeparate=null,this.startRotationConstantMaxSeparate=null,this.startColorConstant=null,this.startColorConstantMin=null,this.startColorConstantMax=null,this._velocityOverLifetime=null,this._colorOverLifetime=null,this._sizeOverLifetime=null,this._rotationOverLifetime=null,this._textureSheetAnimation=null},s.emit=function(e){var n=t._tempPosition,i=t._tempDirection;if(this._shape&&this._shape.enable)this.autoRandomSeed?this._shape.generatePositionAndDirection(n,i):this._shape.generatePositionAndDirection(n,i,this._rand,this._randomSeeds);else{var r=n.elements,a=i.elements;r[0]=r[1]=r[2]=0,a[0]=a[1]=0,a[2]=1}return this.addParticle(n,i,e)},s.addParticle=function(e,t,n){Di.normalize(t,t);var i=this._firstFreeElement+1;if(i>=this._bufferMaxParticles&&(i=0),i===this._firstRetiredElement)return!1;mt.create(this,this._ownerRender,this._owner.transform);var r=this._currentTime-n;if(r>=mt.startLifeTime)return!0;var a=0/0,o=0/0,s=0/0,l=0/0,h=0/0,c=0/0,_=0/0,u=this._velocityOverLifetime&&this._velocityOverLifetime.enbale;if(u){var d=this._velocityOverLifetime.velocity.type;2===d||3===d?this.autoRandomSeed?(a=Math.random(),o=Math.random(),s=Math.random()):(this._rand.seed=this._randomSeeds[9],a=this._rand.getFloat(),o=this._rand.getFloat(),s=this._rand.getFloat(),this._randomSeeds[9]=this._rand.seed):u=!1}else u=!1;var f=this._colorOverLifetime&&this._colorOverLifetime.enbale;if(f){var m=this._colorOverLifetime.color.type;3===m?this.autoRandomSeed?l=Math.random():(this._rand.seed=this._randomSeeds[10],l=this._rand.getFloat(),this._randomSeeds[10]=this._rand.seed):f=!1}else f=!1;var p=this._sizeOverLifetime&&this._sizeOverLifetime.enbale;if(p){var v=this._sizeOverLifetime.size.type;3===v?this.autoRandomSeed?h=Math.random():(this._rand.seed=this._randomSeeds[11],h=this._rand.getFloat(),this._randomSeeds[11]=this._rand.seed):p=!1}else p=!1;var E=this._rotationOverLifetime&&this._rotationOverLifetime.enbale;if(E){var T=this._rotationOverLifetime.angularVelocity.type;2===T||3===T?this.autoRandomSeed?c=Math.random():(this._rand.seed=this._randomSeeds[12],c=this._rand.getFloat(),this._randomSeeds[12]=this._rand.seed):E=!1}else E=!1;var g=this._textureSheetAnimation&&this._textureSheetAnimation.enable;if(g){var S=this._textureSheetAnimation.frame.type;3===S?this.autoRandomSeed?_=Math.random():(this._rand.seed=this._randomSeeds[15],_=this._rand.getFloat(),this._randomSeeds[15]=this._rand.seed):g=!1}else g=!1;var x,D=this._firstFreeElement*this._floatCountPerVertex*this._vertexStride,M=mt.startUVInfo[0],A=mt.startUVInfo[1],R=mt.startUVInfo[2],I=mt.startUVInfo[3],C=e.elements,y=t.elements,O=0,L=0,V=0,w=0,N=0,P=this._ownerRender;if(4===P.renderMode){var b=P.mesh._vertexBuffers[0];x=b.getData();var F=b.vertexDeclaration;L=F.getVertexElementByUsage(0).offset/4;var B=F.getVertexElementByUsage(1);V=B?B.offset/4:-1;var U=F.getVertexElementByUsage(2);w=U?U.offset/4:-1,O=F.vertexStride/4,N=0}else{this._vertices[D+2]=R,this._vertices[D+3]=I+A;var G=D+this._floatCountPerVertex;this._vertices[G+2]=R+M,this._vertices[G+3]=I+A;var H=G+this._floatCountPerVertex;this._vertices[H+2]=R+M,this._vertices[H+3]=I;var z=H+this._floatCountPerVertex;this._vertices[z+2]=R,this._vertices[z+3]=I}for(var k=D,W=D+this._floatCountPerVertex*this._vertexStride;W>k;k+=this._floatCountPerVertex){var X=0;if(4===P.renderMode){X=k;var Y=O*N++,Z=Y+L;this._vertices[X++]=x[Z++],this._vertices[X++]=x[Z++],this._vertices[X++]=x[Z],-1===V?(this._vertices[X++]=1,this._vertices[X++]=1,this._vertices[X++]=1,this._vertices[X++]=1):(Z=Y+V,this._vertices[X++]=x[Z++],this._vertices[X++]=x[Z++],this._vertices[X++]=x[Z++],this._vertices[X++]=x[Z]),-1===w?(this._vertices[X++]=0,this._vertices[X++]=0):(Z=Y+w,this._vertices[X++]=R+x[Z++]*M,this._vertices[X++]=I+x[Z]*A)}else X=k+4;switch(this._vertices[X++]=C[0],this._vertices[X++]=C[1],this._vertices[X++]=C[2],this._vertices[X++]=mt.startLifeTime,this._vertices[X++]=y[0],this._vertices[X++]=y[1],this._vertices[X++]=y[2],this._vertices[X++]=n,this._vertices[X++]=mt.startColor[0],this._vertices[X++]=mt.startColor[1],this._vertices[X++]=mt.startColor[2],this._vertices[X++]=mt.startColor[3],this._vertices[X++]=mt.startSize[0],this._vertices[X++]=mt.startSize[1],this._vertices[X++]=mt.startSize[2],this._vertices[X++]=mt.startRotation[0],this._vertices[X++]=mt.startRotation[1],this._vertices[X++]=mt.startRotation[2],this._vertices[X++]=mt.startSpeed,f&&(this._vertices[X+1]=l),p&&(this._vertices[X+2]=h),E&&(this._vertices[X+3]=c),g&&(this._vertices[X+4]=_),u&&(this._vertices[X+5]=a,this._vertices[X+6]=o,this._vertices[X+7]=s),this.simulationSpace){case 0:X+=8,this._vertices[X++]=mt.simulationWorldPostion[0],this._vertices[X++]=mt.simulationWorldPostion[1],this._vertices[X++]=mt.simulationWorldPostion[2],this._vertices[X++]=mt.simulationWorldRotation[0],this._vertices[X++]=mt.simulationWorldRotation[1],this._vertices[X++]=mt.simulationWorldRotation[2],this._vertices[X++]=mt.simulationWorldRotation[3];break;case 1:break;default:throw new Error("ShurikenParticleMaterial: SimulationSpace value is invalid.")}}return this._firstFreeElement=i,!0},s.addNewParticlesToVertexBuffer=function(){var e=0;this._firstNewElement<this._firstFreeElement?(e=this._firstNewElement*this._vertexStride*this._floatCountPerVertex,this._vertexBuffer.setData(this._vertices,e,e,(this._firstFreeElement-this._firstNewElement)*this._vertexStride*this._floatCountPerVertex)):(e=this._firstNewElement*this._vertexStride*this._floatCountPerVertex,this._vertexBuffer.setData(this._vertices,e,e,(this._bufferMaxParticles-this._firstNewElement)*this._vertexStride*this._floatCountPerVertex),this._firstFreeElement>0&&this._vertexBuffer.setData(this._vertices,0,0,this._firstFreeElement*this._vertexStride*this._floatCountPerVertex)),this._firstNewElement=this._firstFreeElement},s._prepareRender=function(){return this._updateEmission(),this._firstNewElement!=this._firstFreeElement&&this.addNewParticlesToVertexBuffer(),this._drawCounter++,this._firstActiveElement!=this._firstFreeElement?!0:!1},s._render=function(){var e=0,t=p.instance;this._firstActiveElement<this._firstFreeElement?(e=(this._firstFreeElement-this._firstActiveElement)*this._indexStride,t.drawElements(4,e,5123,2*this._firstActiveElement*this._indexStride),C.trianglesFaces+=e/3,C.drawCall++):(e=(this._bufferMaxParticles-this._firstActiveElement)*this._indexStride,t.drawElements(4,e,5123,2*this._firstActiveElement*this._indexStride),C.trianglesFaces+=e/3,C.drawCall++,this._firstFreeElement>0&&(e=this._firstFreeElement*this._indexStride,t.drawElements(4,e,5123,0),C.trianglesFaces+=e/3,C.drawCall++))},s.play=function(){if(this._burstsIndex=0,this._isEmitting=!0,this._isPlaying=!0,this._isPaused=!1,this._emissionTime=0,this._totalDelayTime=0,!this.autoRandomSeed)for(var e=0,n=this._randomSeeds.length;n>e;e++)this._randomSeeds[e]=this.randomSeed[0]+t._RANDOMOFFSET[e];
switch(this.startDelayType){case 0:this._playStartDelay=this.startDelay;break;case 1:this.autoRandomSeed?this._playStartDelay=g.lerp(this.startDelayMin,this.startDelayMax,Math.random()):(this._rand.seed=this._randomSeeds[2],this._playStartDelay=g.lerp(this.startDelayMin,this.startDelayMax,this._rand.getFloat()),this._randomSeeds[2]=this._rand.seed);break;default:throw new Error("Utils3D: startDelayType is invalid.")}this._frameRateTime=this._currentTime+this._playStartDelay,this._startUpdateLoopCount=C.loopCount},s.pause=function(){this._isPaused=!0},s.simulate=function(e,t){void 0===t&&(t=!0),this._simulateUpdate=!0,t?this._updateParticlesSimulationRestart(e):(this._isPaused=!1,this._updateParticles(e)),this.pause()},s.stop=function(){this._burstsIndex=0,this._isEmitting=!1,this._emissionTime=0},s.cloneTo=function(e){var t=e;t.duration=this.duration,t.looping=this.looping,t.prewarm=this.prewarm,t.startDelayType=this.startDelayType,t.startDelay=this.startDelay,t.startDelayMin=this.startDelayMin,t.startDelayMax=this.startDelayMax,t._maxStartLifetime=this._maxStartLifetime,t.startLifetimeType=this.startLifetimeType,t.startLifetimeConstant=this.startLifetimeConstant,this.startLifeTimeGradient.cloneTo(t.startLifeTimeGradient),t.startLifetimeConstantMin=this.startLifetimeConstantMin,t.startLifetimeConstantMax=this.startLifetimeConstantMax,this.startLifeTimeGradientMin.cloneTo(t.startLifeTimeGradientMin),this.startLifeTimeGradientMax.cloneTo(t.startLifeTimeGradientMax),t.startSpeedType=this.startSpeedType,t.startSpeedConstant=this.startSpeedConstant,t.startSpeedConstantMin=this.startSpeedConstantMin,t.startSpeedConstantMax=this.startSpeedConstantMax,t.threeDStartSize=this.threeDStartSize,t.startSizeType=this.startSizeType,t.startSizeConstant=this.startSizeConstant,this.startSizeConstantSeparate.cloneTo(t.startSizeConstantSeparate),t.startSizeConstantMin=this.startSizeConstantMin,t.startSizeConstantMax=this.startSizeConstantMax,this.startSizeConstantMinSeparate.cloneTo(t.startSizeConstantMinSeparate),this.startSizeConstantMaxSeparate.cloneTo(t.startSizeConstantMaxSeparate),t.threeDStartRotation=this.threeDStartRotation,t.startRotationType=this.startRotationType,t.startRotationConstant=this.startRotationConstant,this.startRotationConstantSeparate.cloneTo(t.startRotationConstantSeparate),t.startRotationConstantMin=this.startRotationConstantMin,t.startRotationConstantMax=this.startRotationConstantMax,this.startRotationConstantMinSeparate.cloneTo(t.startRotationConstantMinSeparate),this.startRotationConstantMaxSeparate.cloneTo(t.startRotationConstantMaxSeparate),t.randomizeRotationDirection=this.randomizeRotationDirection,t.startColorType=this.startColorType,this.startColorConstant.cloneTo(t.startColorConstant),this.startColorConstantMin.cloneTo(t.startColorConstantMin),this.startColorConstantMax.cloneTo(t.startColorConstantMax),t.gravityModifier=this.gravityModifier,t.simulationSpace=this.simulationSpace,t.scaleMode=this.scaleMode,t.playOnAwake=this.playOnAwake,t.maxParticles=this.maxParticles,this._emission&&(t._emission=this._emission.clone()),this.shape&&(t.shape=this.shape.clone()),this.velocityOverLifetime&&(t.velocityOverLifetime=this.velocityOverLifetime.clone()),this.colorOverLifetime&&(t.colorOverLifetime=this.colorOverLifetime.clone()),this.sizeOverLifetime&&(t.sizeOverLifetime=this.sizeOverLifetime.clone()),this.rotationOverLifetime&&(t.rotationOverLifetime=this.rotationOverLifetime.clone()),this.textureSheetAnimation&&(t.textureSheetAnimation=this.textureSheetAnimation.clone()),t.isPerformanceMode=this.isPerformanceMode,t._isEmitting=this._isEmitting,t._isPlaying=this._isPlaying,t._isPaused=this._isPaused,t._playStartDelay=this._playStartDelay,t._frameRateTime=this._frameRateTime,t._emissionTime=this._emissionTime,t._totalDelayTime=this._totalDelayTime,t._burstsIndex=this._burstsIndex},s.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,s,"maxParticles",function(){return this._bufferMaxParticles-1},function(e){var t=e+1;t!==this._bufferMaxParticles&&(this._bufferMaxParticles=t,this._initBufferDatas())}),a(0,s,"isEmitting",function(){return this._isEmitting}),a(0,s,"isAlive",function(){return this._isPlaying||this.aliveParticleCount>0?!0:!1}),a(0,s,"shape",function(){return this._shape},function(e){this._shape!==e&&(e&&e.enable?this._owner._render._defineDatas.add(gr.SHADERDEFINE_SHAPE):this._owner._render._defineDatas.remove(gr.SHADERDEFINE_SHAPE),this._shape=e)}),a(0,s,"rotationOverLifetime",function(){return this._rotationOverLifetime},function(e){var t=this._owner._render._defineDatas,n=this._owner._render._shaderValues;if(e){var i=e.angularVelocity;if(!i)return;var r=i.separateAxes,a=i.type;if(e.enbale)switch(r?t.add(gr.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE):t.add(gr.SHADERDEFINE_ROTATIONOVERLIFETIME),a){case 0:t.add(gr.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT);break;case 1:t.add(gr.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE);break;case 2:t.add(gr.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS);break;case 3:t.add(gr.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES)}else t.remove(gr.SHADERDEFINE_ROTATIONOVERLIFETIME),t.remove(gr.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE),t.remove(gr.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT),t.remove(gr.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE),t.remove(gr.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS),t.remove(gr.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES);switch(a){case 0:r?n.setVector(gr.ROLANGULARVELOCITYCONSTSEPRARATE,i.constantSeparate):n.setNumber(gr.ROLANGULARVELOCITYCONST,i.constant);break;case 1:r?(n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTX,i.gradientX._elements),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTY,i.gradientY._elements),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTZ,i.gradientZ._elements),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTW,i.gradientW._elements)):n.setBuffer(gr.ROLANGULARVELOCITYGRADIENT,i.gradient._elements);break;case 2:r?(n.setVector(gr.ROLANGULARVELOCITYCONSTSEPRARATE,i.constantMinSeparate),n.setVector(gr.ROLANGULARVELOCITYCONSTMAXSEPRARATE,i.constantMaxSeparate)):(n.setNumber(gr.ROLANGULARVELOCITYCONST,i.constantMin),n.setNumber(gr.ROLANGULARVELOCITYCONSTMAX,i.constantMax));break;case 3:r?(n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTX,i.gradientXMin._elements),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTXMAX,i.gradientXMax._elements),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTY,i.gradientYMin._elements),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTYMAX,i.gradientYMax._elements),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTZ,i.gradientZMin._elements),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTZMAX,i.gradientZMax._elements),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTW,i.gradientWMin._elements),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTWMAX,i.gradientWMax._elements)):(n.setBuffer(gr.ROLANGULARVELOCITYGRADIENT,i.gradientMin._elements),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTMAX,i.gradientMax._elements))}}else t.remove(gr.SHADERDEFINE_ROTATIONOVERLIFETIME),t.remove(gr.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE),t.remove(gr.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT),t.remove(gr.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE),t.remove(gr.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS),t.remove(gr.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES),n.setVector(gr.ROLANGULARVELOCITYCONSTSEPRARATE,null),n.setVector(gr.ROLANGULARVELOCITYCONSTMAXSEPRARATE,null),n.setNumber(gr.ROLANGULARVELOCITYCONST,void 0),n.setNumber(gr.ROLANGULARVELOCITYCONSTMAX,void 0),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTX,null),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTXMAX,null),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTY,null),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTYMAX,null),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTZ,null),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTZMAX,null),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTW,null),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTWMAX,null),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENT,null),n.setBuffer(gr.ROLANGULARVELOCITYGRADIENTMAX,null);this._rotationOverLifetime=e}),a(0,s,"emission",function(){return this._emission}),a(0,s,"emissionTime",function(){return this._emissionTime>this.duration?this.duration:this._emissionTime}),a(0,s,"aliveParticleCount",function(){return this._firstNewElement>=this._firstRetiredElement?this._firstNewElement-this._firstRetiredElement:this._bufferMaxParticles-this._firstRetiredElement+this._firstNewElement}),a(0,s,"isPlaying",function(){return this._isPlaying}),a(0,s,"isPaused",function(){return this._isPaused}),a(0,s,"startLifetimeType",function(){return this._startLifetimeType},function(e){var t=0,n=0;switch(this.startLifetimeType){case 0:this._maxStartLifetime=this.startLifetimeConstant;break;case 1:this._maxStartLifetime=-Number.MAX_VALUE;var i=i;for(t=0,n=i.gradientCount;n>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,i.getValueByIndex(t));break;case 2:this._maxStartLifetime=Math.max(this.startLifetimeConstantMin,this.startLifetimeConstantMax);break;case 3:this._maxStartLifetime=-Number.MAX_VALUE;var r=r;for(t=0,n=r.gradientCount;n>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,r.getValueByIndex(t));var a=a;for(t=0,n=a.gradientCount;n>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,a.getValueByIndex(t))}this._startLifetimeType=e}),a(0,s,"startLifetimeConstant",function(){return this._startLifetimeConstant},function(e){0===this._startLifetimeType&&(this._maxStartLifetime=e),this._startLifetimeConstant=e}),a(0,s,"startLifetimeConstantMin",function(){return this._startLifetimeConstantMin},function(e){2===this._startLifetimeType&&(this._maxStartLifetime=Math.max(e,this._startLifetimeConstantMax)),this._startLifetimeConstantMin=e}),a(0,s,"startLifeTimeGradient",function(){return this._startLifeTimeGradient},function(e){if(1===this._startLifetimeType){this._maxStartLifetime=-Number.MAX_VALUE;for(var t=0,n=e.gradientCount;n>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,e.getValueByIndex(t))}this._startLifeTimeGradient=e}),a(0,s,"startLifetimeConstantMax",function(){return this._startLifetimeConstantMax},function(e){2===this._startLifetimeType&&(this._maxStartLifetime=Math.max(this._startLifetimeConstantMin,e)),this._startLifetimeConstantMax=e}),a(0,s,"startLifeTimeGradientMin",function(){return this._startLifeTimeGradientMin},function(e){if(3===this._startLifetimeType){var t=0,n=0;for(this._maxStartLifetime=-Number.MAX_VALUE,t=0,n=e.gradientCount;n>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,e.getValueByIndex(t));for(t=0,n=this._startLifeTimeGradientMax.gradientCount;n>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,this._startLifeTimeGradientMax.getValueByIndex(t))}this._startLifeTimeGradientMin=e}),a(0,s,"startLifeTimeGradientMax",function(){return this._startLifeTimeGradientMax},function(e){if(3===this._startLifetimeType){var t=0,n=0;for(this._maxStartLifetime=-Number.MAX_VALUE,t=0,n=this._startLifeTimeGradientMin.gradientCount;n>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,this._startLifeTimeGradientMin.getValueByIndex(t));for(t=0,n=e.gradientCount;n>t;t++)this._maxStartLifetime=Math.max(this._maxStartLifetime,e.getValueByIndex(t))}this._startLifeTimeGradientMax=e}),a(0,s,"velocityOverLifetime",function(){return this._velocityOverLifetime},function(e){var t=this._owner._render._defineDatas,n=this._owner._render._shaderValues;if(e){var i=e.velocity,r=i.type;if(e.enbale)switch(r){case 0:t.add(gr.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT);break;case 1:t.add(gr.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE);break;case 2:t.add(gr.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT);break;case 3:t.add(gr.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE)}else t.remove(gr.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT),t.remove(gr.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE),t.remove(gr.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT),t.remove(gr.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE);switch(r){case 0:n.setVector(gr.VOLVELOCITYCONST,i.constant);break;case 1:n.setBuffer(gr.VOLVELOCITYGRADIENTX,i.gradientX._elements),n.setBuffer(gr.VOLVELOCITYGRADIENTY,i.gradientY._elements),n.setBuffer(gr.VOLVELOCITYGRADIENTZ,i.gradientZ._elements);break;case 2:n.setVector(gr.VOLVELOCITYCONST,i.constantMin),n.setVector(gr.VOLVELOCITYCONSTMAX,i.constantMax);break;case 3:n.setBuffer(gr.VOLVELOCITYGRADIENTX,i.gradientXMin._elements),n.setBuffer(gr.VOLVELOCITYGRADIENTXMAX,i.gradientXMax._elements),n.setBuffer(gr.VOLVELOCITYGRADIENTY,i.gradientYMin._elements),n.setBuffer(gr.VOLVELOCITYGRADIENTYMAX,i.gradientYMax._elements),n.setBuffer(gr.VOLVELOCITYGRADIENTZ,i.gradientZMin._elements),n.setBuffer(gr.VOLVELOCITYGRADIENTZMAX,i.gradientZMax._elements)}n.setInt(gr.VOLSPACETYPE,e.space)}else t.remove(gr.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT),t.remove(gr.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE),t.remove(gr.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT),t.remove(gr.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE),n.setVector(gr.VOLVELOCITYCONST,null),n.setBuffer(gr.VOLVELOCITYGRADIENTX,null),n.setBuffer(gr.VOLVELOCITYGRADIENTY,null),n.setBuffer(gr.VOLVELOCITYGRADIENTZ,null),n.setVector(gr.VOLVELOCITYCONST,null),n.setVector(gr.VOLVELOCITYCONSTMAX,null),n.setBuffer(gr.VOLVELOCITYGRADIENTX,null),n.setBuffer(gr.VOLVELOCITYGRADIENTXMAX,null),n.setBuffer(gr.VOLVELOCITYGRADIENTY,null),n.setBuffer(gr.VOLVELOCITYGRADIENTYMAX,null),n.setBuffer(gr.VOLVELOCITYGRADIENTZ,null),n.setBuffer(gr.VOLVELOCITYGRADIENTZMAX,null),n.setInt(gr.VOLSPACETYPE,void 0);this._velocityOverLifetime=e}),a(0,s,"colorOverLifetime",function(){return this._colorOverLifetime},function(e){var t=this._owner._render._defineDatas,n=this._owner._render._shaderValues;if(e){var i=e.color;if(e.enbale)switch(i.type){case 1:t.add(gr.SHADERDEFINE_COLOROVERLIFETIME);break;case 3:t.add(gr.SHADERDEFINE_RANDOMCOLOROVERLIFETIME)}else t.remove(gr.SHADERDEFINE_COLOROVERLIFETIME),t.remove(gr.SHADERDEFINE_RANDOMCOLOROVERLIFETIME);switch(i.type){case 1:var r=i.gradient;n.setBuffer(gr.COLOROVERLIFEGRADIENTALPHAS,r._alphaElements),n.setBuffer(gr.COLOROVERLIFEGRADIENTCOLORS,r._rgbElements);break;case 3:var a=i.gradientMin,o=i.gradientMax;n.setBuffer(gr.COLOROVERLIFEGRADIENTALPHAS,a._alphaElements),n.setBuffer(gr.COLOROVERLIFEGRADIENTCOLORS,a._rgbElements),n.setBuffer(gr.MAXCOLOROVERLIFEGRADIENTALPHAS,o._alphaElements),n.setBuffer(gr.MAXCOLOROVERLIFEGRADIENTCOLORS,o._rgbElements)}}else t.remove(gr.SHADERDEFINE_COLOROVERLIFETIME),t.remove(gr.SHADERDEFINE_RANDOMCOLOROVERLIFETIME),n.setBuffer(gr.COLOROVERLIFEGRADIENTALPHAS,r._alphaElements),n.setBuffer(gr.COLOROVERLIFEGRADIENTCOLORS,r._rgbElements),n.setBuffer(gr.COLOROVERLIFEGRADIENTALPHAS,a._alphaElements),n.setBuffer(gr.COLOROVERLIFEGRADIENTCOLORS,a._rgbElements),n.setBuffer(gr.MAXCOLOROVERLIFEGRADIENTALPHAS,o._alphaElements),n.setBuffer(gr.MAXCOLOROVERLIFEGRADIENTCOLORS,o._rgbElements);this._colorOverLifetime=e}),a(0,s,"sizeOverLifetime",function(){return this._sizeOverLifetime},function(e){var t=this._owner._render._defineDatas,n=this._owner._render._shaderValues;if(e){var i=e.size,r=i.separateAxes,a=i.type;if(e.enbale)switch(a){case 0:r?t.add(gr.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE):t.add(gr.SHADERDEFINE_SIZEOVERLIFETIMECURVE);break;case 2:r?t.add(gr.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE):t.add(gr.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES)}else t.remove(gr.SHADERDEFINE_SIZEOVERLIFETIMECURVE),t.remove(gr.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE),t.remove(gr.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES),t.remove(gr.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE);switch(a){case 0:r?(n.setBuffer(gr.SOLSIZEGRADIENTX,i.gradientX._elements),n.setBuffer(gr.SOLSIZEGRADIENTY,i.gradientY._elements),n.setBuffer(gr.SOLSizeGradientZ,i.gradientZ._elements)):n.setBuffer(gr.SOLSIZEGRADIENT,i.gradient._elements);break;case 2:r?(n.setBuffer(gr.SOLSIZEGRADIENTX,i.gradientXMin._elements),n.setBuffer(gr.SOLSIZEGRADIENTXMAX,i.gradientXMax._elements),n.setBuffer(gr.SOLSIZEGRADIENTY,i.gradientYMin._elements),n.setBuffer(gr.SOLSIZEGRADIENTYMAX,i.gradientYMax._elements),n.setBuffer(gr.SOLSizeGradientZ,i.gradientZMin._elements),n.setBuffer(gr.SOLSizeGradientZMAX,i.gradientZMax._elements)):(n.setBuffer(gr.SOLSIZEGRADIENT,i.gradientMin._elements),n.setBuffer(gr.SOLSizeGradientMax,i.gradientMax._elements))}}else t.remove(gr.SHADERDEFINE_SIZEOVERLIFETIMECURVE),t.remove(gr.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE),t.remove(gr.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES),t.remove(gr.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE),n.setBuffer(gr.SOLSIZEGRADIENTX,null),n.setBuffer(gr.SOLSIZEGRADIENTXMAX,null),n.setBuffer(gr.SOLSIZEGRADIENTY,null),n.setBuffer(gr.SOLSIZEGRADIENTYMAX,null),n.setBuffer(gr.SOLSizeGradientZ,null),n.setBuffer(gr.SOLSizeGradientZMAX,null),n.setBuffer(gr.SOLSIZEGRADIENT,null),n.setBuffer(gr.SOLSizeGradientMax,null);this._sizeOverLifetime=e}),a(0,s,"textureSheetAnimation",function(){return this._textureSheetAnimation},function(e){var t=this._owner._render._defineDatas,n=this._owner._render._shaderValues;if(e){var i=e.frame,r=i.type;if(e.enable)switch(r){case 1:t.add(gr.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE);break;case 3:t.add(gr.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE)}else t.remove(gr.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE),t.remove(gr.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE);if(1===r||3===r){n.setNumber(gr.TEXTURESHEETANIMATIONCYCLES,e.cycles);var a=e.tiles,o=this._uvLength.elements;o[0]=1/a.x,o[1]=1/a.y,n.setVector(gr.TEXTURESHEETANIMATIONSUBUVLENGTH,this._uvLength)}switch(r){case 1:n.setBuffer(gr.TEXTURESHEETANIMATIONGRADIENTUVS,i.frameOverTimeData._elements);break;case 3:n.setBuffer(gr.TEXTURESHEETANIMATIONGRADIENTUVS,i.frameOverTimeDataMin._elements),n.setBuffer(gr.TEXTURESHEETANIMATIONGRADIENTMAXUVS,i.frameOverTimeDataMax._elements)}}else t.remove(gr.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE),t.remove(gr.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE),n.setNumber(gr.TEXTURESHEETANIMATIONCYCLES,void 0),n.setVector(gr.TEXTURESHEETANIMATIONSUBUVLENGTH,null),n.setBuffer(gr.TEXTURESHEETANIMATIONGRADIENTUVS,null),n.setBuffer(gr.TEXTURESHEETANIMATIONGRADIENTMAXUVS,null);this._textureSheetAnimation=e}),t.halfKSqrtOf2=.71,i(t,["_RANDOMOFFSET",function(){return this._RANDOMOFFSET=new Uint32Array([592910910,3276756734,322376503,306581307,1793934638,3737431713,2527743459,2368504881,4085612399,3774601268,326370691,1494990940,1089181156,3159510623,2941263940,2786374529,271901988,4233252447])},"_maxElapsedTime",function(){return this._maxElapsedTime=1/3},"_tempVector30",function(){return this._tempVector30=new Di},"_tempVector31",function(){return this._tempVector31=new Di},"_tempVector32",function(){return this._tempVector32=new Di},"_tempVector33",function(){return this._tempVector33=new Di},"_tempVector34",function(){return this._tempVector34=new Di},"_tempVector35",function(){return this._tempVector35=new Di},"_tempVector36",function(){return this._tempVector36=new Di},"_tempVector37",function(){return this._tempVector37=new Di},"_tempVector38",function(){return this._tempVector38=new Di},"_tempVector39",function(){return this._tempVector39=new Di},"_tempPosition",function(){return this._tempPosition=new Di},"_tempDirection",function(){return this._tempDirection=new Di}]),t}(Z),Vn=function(e){function t(e){this._owner=null,this._vertices=null,this._vertexBuffer=null,this._floatCountPerVertices=7,this._verticesIndex=0,this._indices=null,this._indexBuffer=null,this._indicesIndex=0,this._index=0,t.__super.call(this),this._lineBufferState=new X,this._owner=e;var n=2*this._owner.lineCount;this._vertices=new Float32Array(n*this._floatCountPerVertices),this._vertexBuffer=new or(vt.vertexDeclaration.vertexStride*n,35044,!1),this._vertexBuffer.vertexDeclaration=vt.vertexDeclaration,this._indices=new Uint16Array(n),this._indexBuffer=new nr("ushort",n,35044,!1),this._lineBufferState.bindBufferState(),this._lineBufferState.applyVertexBuffer(this._vertexBuffer),this._lineBufferState.applyIndexBuffer(this._indexBuffer),this._lineBufferState.unBindBufferState(),this._applyBufferState(this._lineBufferState)}r(t,"laya.d3.core.pixelLine.PixelLineFilter",e);var n=t.prototype;return n._resetLineData=function(){this._destroy(),this._verticesIndex=0,this._indicesIndex=0,this._index=0;var e=2*this._owner.lineCount;this._vertices=new Float32Array(e*this._floatCountPerVertices),this._vertexBuffer=new or(vt.vertexDeclaration.vertexStride*e,35044,!1),this._vertexBuffer.vertexDeclaration=vt.vertexDeclaration,this._indices=new Uint16Array(e),this._indexBuffer=new nr("ushort",e,35044,!1),this._lineBufferState.bindBufferState(),this._lineBufferState.applyVertexBuffer(this._vertexBuffer),this._lineBufferState.applyIndexBuffer(this._indexBuffer),this._lineBufferState.unBindBufferState(),this._applyBufferState(this._lineBufferState),this._initLineData()},n._initLineData=function(){for(var e,t=this._owner.pixelLineDatas,n=0,i=t.length;i>n;n++){e=t[n];var r=e.startPosition.elements,a=e.endPosition.elements,o=e.startColor.elements,s=e.endColor.elements;this._vertices[this._verticesIndex+0]=r[0],this._vertices[this._verticesIndex+1]=r[1],this._vertices[this._verticesIndex+2]=r[2],this._vertices[this._verticesIndex+3]=o[0],this._vertices[this._verticesIndex+4]=o[1],this._vertices[this._verticesIndex+5]=o[2],this._vertices[this._verticesIndex+6]=o[3],this._vertices[this._verticesIndex+7]=a[0],this._vertices[this._verticesIndex+8]=a[1],this._vertices[this._verticesIndex+9]=a[2],this._vertices[this._verticesIndex+10]=s[0],this._vertices[this._verticesIndex+11]=s[1],this._vertices[this._verticesIndex+12]=s[2],this._vertices[this._verticesIndex+13]=s[3],this._verticesIndex+=2*this._floatCountPerVertices,this._indices[this._indicesIndex+0]=this._index++,this._indices[this._indicesIndex+1]=this._index++,this._indicesIndex+=2}this._vertexBuffer.setData(this._vertices,0,0,this._verticesIndex),this._indexBuffer.setData(this._indices,0,0,this._indicesIndex)},n._updateLineData=function(e,t,n,i,r){var a=t.elements,o=n.elements,s=i.elements,l=r.elements,h=e*this._floatCountPerVertices*2;this._vertices[h+0]=a[0],this._vertices[h+1]=a[1],this._vertices[h+2]=a[2],this._vertices[h+3]=s[0],this._vertices[h+4]=s[1],this._vertices[h+5]=s[2],this._vertices[h+6]=s[3],this._vertices[h+7]=o[0],this._vertices[h+8]=o[1],this._vertices[h+9]=o[2],this._vertices[h+10]=l[0],this._vertices[h+11]=l[1],this._vertices[h+12]=l[2],this._vertices[h+13]=l[3],this._vertexBuffer.setData(this._vertices,h,h,2*this._floatCountPerVertices);var c=2*e;this._indices[c+0]=c,this._indices[c+1]=c+1,this._indexBuffer.setData(this._indices,c,c,2)},n._updateLinesData=function(){this._verticesIndex=0,this._indicesIndex=0,this._index=0,this._initLineData()},n._prepareRender=function(){return!0},n._render=function(){p.instance.drawElements(1,this._indicesIndex,5123,0),C.drawCall++},n._destroy=function(){this._vertexBuffer.destroy(),this._indexBuffer.destroy(),this._vertices=null,this._indices=null},t}(Z),wn=function(e){function t(e){this._id=0,this._owner=null,this._camera=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=0/0,this._curDisappearIndex=0,t.__super.call(this),this._lastPosition=new Di,this._curPosition=new Di,this._delVector3=new Di,this._lastFixedVertexPosition=new Di,this._pointAtoBVector3=new Di,this._pointA=new Di,this._pointB=new Di,this._owner=e,this._id=t.renderElementCount++,0==this._id?e._owner.transform.position.cloneTo(this._lastPosition):e._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2);var n=xt.vertexDeclaration1;this._vertexBuffer1=new or(this._maxVerticesCount*n.vertexStride,35044,!0),this._vertexBuffer1.vertexDeclaration=n;var i=xt.vertexDeclaration2;this._vertexBuffer2=new or(this._maxVerticesCount*i.vertexStride,35044,!0),this._vertexBuffer2.vertexDeclaration=i;var r=[];r.push(this._vertexBuffer1),r.push(this._vertexBuffer2);var a=new X;a.bindBufferState(),a.applyVertexBuffers(r),a.unBindBufferState(),this._applyBufferState(a)}r(t,"laya.d3.core.trail.TrailRenderElement",e);var n=t.prototype;return n._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},n._addTrailByFirstPosition=function(e,t){Di.subtract(t,e,this._delVector3),Di.cross(this._delVector3,this._camera.transform.forward,this._pointAtoBVector3),Di.normalize(this._pointAtoBVector3,this._pointAtoBVector3),Di.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(e),e.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},n._addTrailByNextPosition=function(e){Di.subtract(e,this._lastFixedVertexPosition,this._delVector3),Di.cross(this._delVector3,this._camera.transform.forward,this._pointAtoBVector3),Di.normalize(this._pointAtoBVector3,this._pointAtoBVector3),Di.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=Di.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=zt.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(e),e.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(e),this._virtualVerticesCount=2)},n._updateVerticesByPosition=function(e){this._pointe=e.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,this._everyVertexToPreVertexDistance[this._verticesCount/2]=0==this._owner._trailSupplementLength?this._delLength:this._isStart?this._owner._trailSupplementLength:0},n._updateVertexBuffer2=function(){var e=0,t=0,n=0,i=0;for(n=0,i=(this._verticesCount+this._virtualVerticesCount)/2;i>n;n++)t=0==this._owner.textureMode?(this._VerticesToTailLength[n]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[n],this._vertices2[e++]=1-t,this._vertices2[e++]=1-t;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},n._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},n._updateDisappear=function(){var e=0,t=0;for(e=this._curDisappearIndex,t=(this._verticesCount+this._virtualVerticesCount)/2;t>e;e++)this._owner._curtime-this._everyGroupVertexBirthTime[e]>=this._owner.time+zt.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},n._prepareRender=function(e){return this._camera=e.camera,null==this._camera?!1:(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),Di.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),this._verticesCount>0)?(this._updateVertexBuffer2(),this._updateDisappear(),!0):!1)},n._render=function(){this._isDead||(V.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),C.drawCall++,C.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},n.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},n._destroy=function(){this._vertexBuffer1.destroy(),this._vertexBuffer2.destroy(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},t.renderElementCount=0,t}(Z),Nn=function(e){function t(){this.x=0/0,this.y=0/0,this.z=0/0,t.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}r(t,"laya.d3.core.particleShuriKen.module.shape.BoxShape",e);
var n=t.prototype;return n._getShapeBoundBox=function(e){var t=e.min.elements;t[0]=.5*-this.x,t[1]=.5*-this.y,t[2]=.5*-this.z;var n=e.max.elements;n[0]=.5*this.x,n[1]=.5*this.y,n[2]=.5*this.z},n._getSpeedBoundBox=function(e){var t=e.min.elements;t[0]=0,t[1]=0,t[2]=0;var n=e.max.elements;n[0]=0,n[1]=1,n[2]=0},n.generatePositionAndDirection=function(e,t,n,i){var r=e.elements,a=t.elements;n?(n.seed=i[16],ct._randomPointInsideHalfUnitBox(e,n),i[16]=n.seed):ct._randomPointInsideHalfUnitBox(e),r[0]=this.x*r[0],r[1]=this.y*r[1],r[2]=this.z*r[2],this.randomDirection?n?(n.seed=i[17],ct._randomPointUnitSphere(t,n),i[17]=n.seed):ct._randomPointUnitSphere(t):(a[0]=0,a[1]=0,a[2]=1)},n.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var n=t;n.x=this.x,n.y=this.y,n.z=this.z,n.randomDirection=this.randomDirection},t}(ht),Pn=function(e){function t(){this._camera=null,this.width=.001,this._vertexBuffer=null,this._vertices=null,this._verticesIndex=0,this._everyAddVerticeCount=0,this._maxVertexCount=1e3,this._floatCountPerVertices=9,this.positionCount=0,this._pointe=null,this._pointAtoBVector3e=null,this._colore=null,t.__super.call(this),this._firstPosition=new Di,this._delVector3=new Di,this._lastPosition=new Di,this._pointAtoBVector3=new Di,this.color=new Mi(1,0,0,1),this._vertices=new Float32Array(this._maxVertexCount*this._floatCountPerVertices),this._vertexBuffer=new or(Dt.vertexDeclaration.vertexStride*this._maxVertexCount,35044,!1),this._vertexBuffer.vertexDeclaration=Dt.vertexDeclaration;var e=new X;e.bindBufferState(),e.applyVertexBuffer(this._vertexBuffer),e.unBindBufferState(),this._applyBufferState(e)}r(t,"laya.d3.extension.lineRender.LineFilter",e);var n=t.prototype;return n._addLineByFirstPosition=function(e,t){Di.subtract(t,e,this._delVector3),Di.cross(this._delVector3,this._camera.transform.forward,this._pointAtoBVector3),Di.normalize(this._pointAtoBVector3,this._pointAtoBVector3),Di.scale(this._pointAtoBVector3,this.width/2,this._pointAtoBVector3),this._updateVerticesByPosition(e),e.cloneTo(this._lastPosition)},n._addLineByNextPosition=function(e){Di.subtract(e,this._lastPosition,this._delVector3),Di.cross(this._delVector3,this._camera.transform.forward,this._pointAtoBVector3),Di.normalize(this._pointAtoBVector3,this._pointAtoBVector3),Di.scale(this._pointAtoBVector3,this.width/2,this._pointAtoBVector3),this._updateVerticesByPosition(e),e.cloneTo(this._lastPosition)},n._updateVerticesByPosition=function(e){this._everyAddVerticeCount=0,this._pointe=e.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._colore=this.color.elements,this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._pointe[0]-this._pointAtoBVector3e[0],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._pointe[1]-this._pointAtoBVector3e[1],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._pointe[2]-this._pointAtoBVector3e[2],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._colore[0],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._colore[1],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._colore[2],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._colore[3],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=0,this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=0,this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._pointe[0]+this._pointAtoBVector3e[0],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._pointe[1]+this._pointAtoBVector3e[1],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._pointe[2]+this._pointAtoBVector3e[2],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._colore[0],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._colore[1],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._colore[2],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=this._colore[3],this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=0,this._vertices[this._verticesIndex+this._everyAddVerticeCount++]=0,this._vertexBuffer.setData(this._vertices,this._verticesIndex,this._verticesIndex,this._everyAddVerticeCount),this._verticesIndex+=this._everyAddVerticeCount},n.addDataForVertexBuffer=function(e){this.positionCount++,1==this.positionCount?e.cloneTo(this._firstPosition):2==this.positionCount?(this._addLineByFirstPosition(this._firstPosition,e),this._addLineByNextPosition(e)):this._addLineByNextPosition(e)},n._update=function(){},n._prepareRender=function(){return!0},n._render=function(){V.mainContext.drawArrays(5,0,this._verticesIndex/this._floatCountPerVertices),C.drawCall++},t}(Z),bn=function(e){function t(){this.radius=0/0,this.arc=0/0,this.emitFromEdge=!1,t.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}r(t,"laya.d3.core.particleShuriKen.module.shape.CircleShape",e);var n=t.prototype;return n._getShapeBoundBox=function(e){var t=e.min.elements;t[0]=t[2]=-this.radius,t[1]=0;var n=e.max.elements;n[0]=n[2]=this.radius,n[1]=0},n._getSpeedBoundBox=function(e){var t=e.min.elements;t[0]=t[1]=-1,t[2]=0;var n=e.max.elements;n[0]=n[1]=1,n[2]=0},n.generatePositionAndDirection=function(e,n,i,r){var a=e.elements,o=t._tempPositionPoint.elements;i?(i.seed=r[16],this.emitFromEdge?ct._randomPointUnitArcCircle(this.arc,t._tempPositionPoint,i):ct._randomPointInsideUnitArcCircle(this.arc,t._tempPositionPoint,i),r[16]=i.seed):this.emitFromEdge?ct._randomPointUnitArcCircle(this.arc,t._tempPositionPoint):ct._randomPointInsideUnitArcCircle(this.arc,t._tempPositionPoint),a[0]=-o[0],a[1]=o[1],a[2]=0,Di.scale(e,this.radius,e),this.randomDirection?i?(i.seed=r[17],ct._randomPointUnitSphere(n,i),r[17]=i.seed):ct._randomPointUnitSphere(n):e.cloneTo(n)},n.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var n=t;n.radius=this.radius,n.arc=this.arc,n.emitFromEdge=this.emitFromEdge,n.randomDirection=this.randomDirection},i(t,["_tempPositionPoint",function(){return this._tempPositionPoint=new xi}]),t}(ht),Fn=function(e){function t(){this.angle=0/0,this.radius=0/0,this.length=0/0,this.emitType=0,t.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}r(t,"laya.d3.core.particleShuriKen.module.shape.ConeShape",e);var n=t.prototype;return n._getShapeBoundBox=function(e){var t=this.radius+this.length*Math.sin(this.angle),n=this.length*Math.cos(this.angle),i=e.min.elements;i[0]=i[1]=-t,i[2]=0;var r=e.max.elements;r[0]=r[1]=t,r[2]=n},n._getSpeedBoundBox=function(e){var t=Math.sin(this.angle),n=e.min.elements;n[0]=n[1]=-t,n[2]=0;var i=e.max.elements;i[0]=n[1]=t,i[2]=1},n.generatePositionAndDirection=function(e,n,i,r){var a,o=e.elements,s=n.elements,l=t._tempPositionPoint.elements,h=0/0,c=0/0,_=Math.cos(this.angle),u=Math.sin(this.angle);switch(this.emitType){case 0:i?(i.seed=r[16],ct._randomPointInsideUnitCircle(t._tempPositionPoint,i),r[16]=i.seed):ct._randomPointInsideUnitCircle(t._tempPositionPoint),h=l[0],c=l[1],o[0]=h*this.radius,o[1]=c*this.radius,o[2]=0,this.randomDirection?(i?(i.seed=r[17],ct._randomPointInsideUnitCircle(t._tempDirectionPoint,i),r[17]=i.seed):ct._randomPointInsideUnitCircle(t._tempDirectionPoint),a=t._tempDirectionPoint.elements,s[0]=a[0]*u,s[1]=a[1]*u):(s[0]=h*u,s[1]=c*u),s[2]=_;break;case 1:i?(i.seed=r[16],ct._randomPointUnitCircle(t._tempPositionPoint,i),r[16]=i.seed):ct._randomPointUnitCircle(t._tempPositionPoint),h=l[0],c=l[1],o[0]=h*this.radius,o[1]=c*this.radius,o[2]=0,this.randomDirection?(i?(i.seed=r[17],ct._randomPointInsideUnitCircle(t._tempDirectionPoint,i),r[17]=i.seed):ct._randomPointInsideUnitCircle(t._tempDirectionPoint),a=t._tempDirectionPoint.elements,s[0]=a[0]*u,s[1]=a[1]*u):(s[0]=h*u,s[1]=c*u),s[2]=_;break;case 2:i?(i.seed=r[16],ct._randomPointInsideUnitCircle(t._tempPositionPoint,i)):ct._randomPointInsideUnitCircle(t._tempPositionPoint),h=l[0],c=l[1],o[0]=h*this.radius,o[1]=c*this.radius,o[2]=0,s[0]=h*u,s[1]=c*u,s[2]=_,Di.normalize(n,n),i?(Di.scale(n,this.length*i.getFloat(),n),r[16]=i.seed):Di.scale(n,this.length*Math.random(),n),Di.add(e,n,e),this.randomDirection&&(i?(i.seed=r[17],ct._randomPointUnitSphere(n,i),r[17]=i.seed):ct._randomPointUnitSphere(n));break;case 3:i?(i.seed=r[16],ct._randomPointUnitCircle(t._tempPositionPoint,i)):ct._randomPointUnitCircle(t._tempPositionPoint),h=l[0],c=l[1],o[0]=h*this.radius,o[1]=c*this.radius,o[2]=0,s[0]=h*u,s[1]=c*u,s[2]=_,Di.normalize(n,n),i?(Di.scale(n,this.length*i.getFloat(),n),r[16]=i.seed):Di.scale(n,this.length*Math.random(),n),Di.add(e,n,e),this.randomDirection&&(i?(i.seed=r[17],ct._randomPointUnitSphere(n,i),r[17]=i.seed):ct._randomPointUnitSphere(n));break;default:throw new Error("ConeShape:emitType is invalid.")}},n.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var n=t;n.angle=this.angle,n.radius=this.radius,n.length=this.length,n.emitType=this.emitType,n.randomDirection=this.randomDirection},i(t,["_tempPositionPoint",function(){return this._tempPositionPoint=new xi},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new xi}]),t}(ht),Bn=function(e){function t(){this.radius=0/0,this.emitFromShell=!1,t.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}r(t,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",e);var n=t.prototype;return n._getShapeBoundBox=function(e){var t=e.min.elements;t[0]=t[1]=t[2]=-this.radius;var n=e.max.elements;n[0]=n[1]=this.radius,n[2]=0},n._getSpeedBoundBox=function(e){var t=e.min.elements;t[0]=t[1]=-1,t[2]=0;var n=e.max.elements;n[0]=n[1]=n[2]=1},n.generatePositionAndDirection=function(e,t,n,i){var r=e.elements;n?(n.seed=i[16],this.emitFromShell?ct._randomPointUnitSphere(e,n):ct._randomPointInsideUnitSphere(e,n),i[16]=n.seed):this.emitFromShell?ct._randomPointUnitSphere(e):ct._randomPointInsideUnitSphere(e),Di.scale(e,this.radius,e);var a=r[2];0>a&&(r[2]=-1*a),this.randomDirection?n?(n.seed=i[17],ct._randomPointUnitSphere(t,n),i[17]=n.seed):ct._randomPointUnitSphere(t):e.cloneTo(t)},n.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var n=t;n.radius=this.radius,n.emitFromShell=this.emitFromShell,n.randomDirection=this.randomDirection},t}(ht),Un=function(e){function t(){this.radius=0/0,this.emitFromShell=!1,t.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}r(t,"laya.d3.core.particleShuriKen.module.shape.SphereShape",e);var n=t.prototype;return n._getShapeBoundBox=function(e){var t=e.min.elements;t[0]=t[1]=t[2]=-this.radius;var n=e.max.elements;n[0]=n[1]=n[2]=this.radius},n._getSpeedBoundBox=function(e){var t=e.min.elements;t[0]=t[1]=t[2]=-1;var n=e.max.elements;n[0]=n[1]=n[2]=1},n.generatePositionAndDirection=function(e,t,n,i){n?(n.seed=i[16],this.emitFromShell?ct._randomPointUnitSphere(e,n):ct._randomPointInsideUnitSphere(e,n),i[16]=n.seed):this.emitFromShell?ct._randomPointUnitSphere(e):ct._randomPointInsideUnitSphere(e),Di.scale(e,this.radius,e),this.randomDirection?n?(n.seed=i[17],ct._randomPointUnitSphere(t,n),i[17]=n.seed):ct._randomPointUnitSphere(t):e.cloneTo(t)},n.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var n=t;n.radius=this.radius,n.emitFromShell=this.emitFromShell,n.randomDirection=this.randomDirection},t}(ht),Gn=function(e){function t(){this._vertices=null,this._indices=null,this._positionOffset=0,this._normalOffset=0,this._colorOffset=0,this._uv0Offset=0,this._uv1Offset=0,this._sTangentOffset=0,this._vertexBuffer=null,this._indexBuffer=null,t.__super.call(this);var e=ri.vertexDeclaration,n=32e3*e.vertexStride;this._vertices=new Float32Array(n/4),this._vertexBuffer=new or(n,35048),this._vertexBuffer.lock=!0,this._indices=new Int16Array(32e3),this._indexBuffer=new nr("ushort",this._indices.length,35048),this._indexBuffer.lock=!0}r(t,"laya.d3.graphics.SubMeshDynamicBatch",e);var n=t.prototype;return n._getBatchVertices=function(e,t,n,i,r,a){var o=e.vertexStride/4,s=a._vertexBuffer.getData(),l=(r.render.lightmapScaleOffset,r._dynamicMultiSubMesh),h=r._dynamicVertexCount;r._computeWorldPositionsAndNormals(this._positionOffset,this._normalOffset,l,h);for(var c=r._dynamicWorldPositions,_=r._dynamicWorldNormals,u=a._indices,d=0;h>d;d++){var f=l?u[d]:d,m=f*o,p=(d+n)*o,v=3*d,E=p+this._positionOffset;t[E]=c[v],t[E+1]=c[v+1],t[E+2]=c[v+2],-1!==this._normalOffset&&(E=p+this._normalOffset,t[E]=_[v],t[E+1]=_[v+1],t[E+2]=_[v+2]),-1!==this._colorOffset&&(E=p+this._colorOffset,v=m+this._colorOffset,t[E]=s[v],t[E+1]=s[v+1],t[E+2]=s[v+2],t[E+3]=s[v+3]),-1!==this._uv0Offset&&(E=p+this._uv0Offset,v=m+this._uv0Offset,t[E]=s[v],t[E+1]=s[v+1]),-1!==this._sTangentOffset&&(E=p+this._sTangentOffset,v=m+this._sTangentOffset,t[E]=s[v],t[E+1]=s[v+1],t[E+2]=s[v+2],t[E+3]=s[v+3],E=p+this._sTangentOffset,v=m+this._sTangentOffset,t[E]=s[v],t[E+1]=s[v+1],t[E+2]=s[v+2],t[E+3]=s[v+3])}},n._getBatchIndices=function(e,t,n,i,r,a){var o=r._indices,s=0,l=0,h=0,c=i._isFrontFaceInvert;if(a)if(c)for(s=0,l=o.length;l>s;s+=3){h=t+s;var _=n+s;e[h]=_,e[h+1]=_+2,e[h+2]=_+1}else for(s=l,l=o.length;l>s;s+=3)h=t+s,_=n+s,e[h]=_,e[h+1]=_+1,e[h+2]=_+2;else if(c)for(s=0,l=o.length;l>s;s+=3)h=t+s,e[h]=n+o[s],e[h+1]=n+o[s+2],e[h+2]=n+o[s+1];else for(s=l,l=o.length;l>s;s+=3)h=t+s,e[h]=n+o[s],e[h+1]=n+o[s+1],e[h+2]=n+o[s+2]},n._flush=function(e,t){this._vertexBuffer.setData(this._vertices,0,0,e*(this._vertexBuffer.vertexDeclaration.vertexStride/4)),this._indexBuffer.setData(this._indices,0,0,t),p.instance.drawElements(4,t,5123,0),C.drawCall++,C.trianglesFaces+=t/3},n._prepareRender=function(e){var t=e.renderElement,n=t.dynamicVertexDeclaration;this._applyBufferState(Wn.instance._getBufferState(n)),this._positionOffset=n.getVertexElementByUsage(0).offset/4;var i=n.getVertexElementByUsage(3);this._normalOffset=i?i.offset/4:-1;var r=n.getVertexElementByUsage(1);this._colorOffset=r?r.offset/4:-1;var a=n.getVertexElementByUsage(2);this._uv0Offset=a?a.offset/4:-1;var o=n.getVertexElementByUsage(8);this._uv1Offset=o?o.offset/4:-1;var s=n.getVertexElementByUsage(5);return this._sTangentOffset=s?s.offset/4:-1,!0},n._render=function(e){for(var t=e.renderElement,n=t.dynamicVertexDeclaration,i=t.dynamicBatchElementList,r=0,a=0,o=(n.vertexStride/4,0),s=i.length;s>o;o++){var l=i[o],h=l._geometry,c=h._indexCount;a+c>32e3&&(this._flush(r,a),r=a=0);var _=l._transform;this._getBatchVertices(n,this._vertices,r,_,l,h),this._getBatchIndices(this._indices,a,r,_,h,l._dynamicMultiSubMesh),r+=l._dynamicVertexCount,a+=c}this._flush(r,a)},t.maxAllowVertexCount=10,t.maxAllowAttribueCount=900,t.maxIndicesCount=32e3,t.instance=null,t}(Z),Hn=function(e){function t(e,n,i){t.__super.call(this),this._batchID=t._batchIDCounter++,this._batchElements=[],this._currentBatchVertexCount=0,this._currentBatchIndexCount=0,this._vertexDeclaration=i,this.batchOwner=e,this.number=n}r(t,"laya.d3.graphics.SubMeshStaticBatch",e);var a=t.prototype;return n.imps(a,{"laya.resource.IDispose":!0}),a._getStaticBatchBakedVertexs=function(e,n,i,r,a,o){var s,l=o._vertexBuffers[0],h=l.vertexDeclaration,c=h.getVertexElementByUsage(0).offset/4,_=h.getVertexElementByUsage(3),u=_?_.offset/4:-1,d=h.getVertexElementByUsage(1),f=d?d.offset/4:-1,m=h.getVertexElementByUsage(2),p=m?m.offset/4:-1,v=h.getVertexElementByUsage(8),E=v?v.offset/4:-1,T=h.getVertexElementByUsage(5),g=T?T.offset/4:-1,S=18,x=h.vertexStride/4,D=l.getData();if(i){var M=i.worldMatrix;M.invert(t._tempMatrix4x40),s=t._tempMatrix4x41,Wt.multiply(t._tempMatrix4x40,r.worldMatrix,s)}else s=r.worldMatrix;var A=t._tempQuaternion0;s.decomposeTransRotScale(t._tempVector30,A,t._tempVector31);for(var R=a.lightmapScaleOffset,I=o.vertexCount,C=0;I>C;C++){var y=C*x,O=(C+n)*S;gn.transformVector3ArrayToVector3ArrayCoordinate(D,y+c,s,e,O+0),-1!==u&&gn.transformVector3ArrayByQuat(D,y+u,A,e,O+3);var L=0,V=0,w=O+6;if(-1!==f){var N=y+f;for(L=0,V=4;V>L;L++)e[w+L]=D[N+L]}else for(L=0,V=4;V>L;L++)e[w+L]=1;if(-1!==p){var P=y+p;e[O+10]=D[P],e[O+11]=D[P+1]}if(R&&(-1!==E?gn.transformLightingMapTexcoordArray(D,y+E,R,e,O+12):gn.transformLightingMapTexcoordArray(D,y+p,R,e,O+12)),-1!==g){var b=y+g;e[O+14]=D[b],e[O+15]=D[b+1],e[O+16]=D[b+2],e[O+17]=D[b+3]}}return I},a.addTest=function(e){var t=0,n=e.meshFilter.sharedMesh.vertexCount;return t=this._currentBatchVertexCount+n,t>65535?!1:!0},a.add=function(e){var t=e._render._staticBatch;t&&t.remove(e);var n=e.meshFilter.sharedMesh,i=n.vertexCount;this._batchElements.push(e);var r=e._render;r._isPartOfStaticBatch=!0,r._staticBatch=this;for(var a=r._renderElements,o=0,s=a.length;s>o;o++)a[o].staticBatch=this;this._currentBatchIndexCount+=n._indexBuffer.indexCount,this._currentBatchVertexCount+=i},a.remove=function(e){var t=e.meshFilter.sharedMesh,n=this._batchElements.indexOf(e);if(-1!==n){this._batchElements.splice(n,1);for(var i=(e._render,e._render._renderElements),r=0,a=i.length;a>r;r++)i[r].staticBatch=null;var o=t.vertexCount;this._currentBatchIndexCount=this._currentBatchIndexCount-t._indexBuffer.indexCount,this._currentBatchVertexCount=this._currentBatchVertexCount-o,e._render._isPartOfStaticBatch=!1}},a.finishInit=function(){this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy());var e=0,t=0,n=this.batchOwner._owner,i=this._vertexDeclaration.vertexStride/4,r=new Float32Array(i*this._currentBatchVertexCount),a=new Uint16Array(this._currentBatchIndexCount);this._vertexBuffer=new or(this._vertexDeclaration.vertexStride*this._currentBatchVertexCount,35044),this._vertexBuffer.vertexDeclaration=this._vertexDeclaration,this._indexBuffer=nr.create("ushort",this._currentBatchIndexCount,35044);for(var o=0,s=this._batchElements.length;s>o;o++){for(var l=this._batchElements[o],h=l.meshFilter.sharedMesh,c=this._getStaticBatchBakedVertexs(r,e,n?n._transform:null,l._transform,l._render,h),_=h._indexBuffer.getData(),u=e,d=t+_.length,f=l._render._renderElements,m=0,p=h.subMeshCount;p>m;m++){var v=h._subMeshes[m],E=t+v._indexStart,T=f[m];T.staticBatchIndexStart=E,T.staticBatchIndexEnd=E+v._indexCount}a.set(_,t);var g=0,S=n?l._transform._isFrontFaceInvert!==n.transform._isFrontFaceInvert:l._transform._isFrontFaceInvert;if(S)for(g=t;d>g;g+=3){a[g]=u+a[g];var x=a[g+1],D=a[g+2];a[g+1]=u+D,a[g+2]=u+x}else for(g=t;d>g;g+=3)a[g]=u+a[g],a[g+1]=u+a[g+1],a[g+2]=u+a[g+2];t+=_.length,e+=c}this._vertexBuffer.setData(r),this._indexBuffer.setData(a);var M=new X;M.bindBufferState(),M.applyVertexBuffer(this._vertexBuffer),M.applyIndexBuffer(this._indexBuffer),M.unBindBufferState(),this._applyBufferState(M)},a._render=function(e){for(var t=e.renderElement,n=t.staticBatchElementList,i=0,r=0,a=1,o=n.length;o>a;a++){var s=n[a-1];if(s.staticBatchIndexEnd!==n[a].staticBatchIndexStart){var l=n[i].staticBatchIndexStart,h=n[r].staticBatchIndexEnd-l;p.instance.drawElements(4,h,5123,2*l),i=++r,C.drawCall++,C.trianglesFaces+=h/3}else r++}l=n[i].staticBatchIndexStart,h=n[r].staticBatchIndexEnd-l,p.instance.drawElements(4,h,5123,2*l),C.drawCall++,C.trianglesFaces+=h/3},a.dispose=function(){this._batchElements=null,this.batchOwner=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},t.maxBatchVertexCount=65535,t._batchIDCounter=0,i(t,["_tempVector30",function(){return this._tempVector30=new Di},"_tempVector31",function(){return this._tempVector31=new Di},"_tempQuaternion0",function(){return this._tempQuaternion0=new Yt},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new Wt},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new Wt}]),t}(Z),zn=function(e){function t(){t.__super.call(this),this._dynamicWorldPositionNormalNeedUpdate=!0}r(t,"laya.d3.core.render.SubMeshRenderElement",e);var n=t.prototype;return n._onWorldMatrixChanged=function(){this._dynamicWorldPositionNormalNeedUpdate=!0},n._computeWorldPositionsAndNormals=function(e,t,n,i){if(this._dynamicWorldPositionNormalNeedUpdate){for(var r=this._geometry,a=r._vertexBuffer,o=a.vertexDeclaration.vertexStride/4,s=a.getData(),l=this._transform.worldMatrix,h=this._transform.rotation,c=r._indices,_=0;i>_;_++){var u=n?c[_]:_,d=u*o,f=3*_;gn.transformVector3ArrayToVector3ArrayCoordinate(s,d+e,l,this._dynamicWorldPositions,f),-1!==t&&gn.transformVector3ArrayByQuat(s,d+t,h,this._dynamicWorldNormals,f)}this._dynamicWorldPositionNormalNeedUpdate=!1}},n.setTransform=function(e){this._transform!==e&&(this._transform&&this._transform.off("worldmatrixneedchanged",this,this._onWorldMatrixChanged),e&&e.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged),this._dynamicWorldPositionNormalNeedUpdate=!0,this._transform=e)},n.setGeometry=function(e){if(this._geometry!==e){var t=e,n=t._mesh;if(n){var i=n._subMeshCount>1,r=i?t._indexCount:n._vertexCount;if(10>=r){var a=3*r;this._dynamicBatch=!0,this._dynamicWorldPositions=new Float32Array(a),this._dynamicWorldNormals=new Float32Array(a),this._dynamicVertexCount=r,this._dynamicMultiSubMesh=i}else this._dynamicBatch=!1}this._geometry=e}},n.addToOpaqueRenderQueue=function(e,t){var n=this.staticBatch,i=t.elements;if(n){var r=Xn.instance,a=this.render.lightmapIndex+1,o=r._opaqueBatchMarks[a]||(r._opaqueBatchMarks[a]=[]),s=o[this.render.receiveShadow?0:1]||(o[this.render.receiveShadow?0:1]=[]),l=s[this.material.id]||(s[this.material.id]=[]),h=l[n._batchID]||(l[n._batchID]=new Array(3));if(r._updateCountMark===h[0]){var c=h[1];if(h[2])i[c].staticBatchElementList.push(this);else{var _=i[c],u=_.render,d=r._getBatchRenderElementFromPool();d.setGeometry(n),d.material=_.material;var f=n.batchOwner._owner,m=f?f._transform:null;d.setTransform(m);var p=n.batchOwner._getBatchRender(e,u.lightmapIndex,u.receiveShadow);p._setBelongScene(e.scene),p._distanceForSort=u._distanceForSort,d.render=p;var v=d.staticBatchElementList;v.length=0,v.push(_),v.push(this),i[c]=d,h[2]=!0}}else h[0]=r._updateCountMark,h[1]=i.length,h[2]=!1,i.push(this)}else if(this._dynamicBatch){var E=this._geometry._vertexBuffer.vertexDeclaration,T=Wn.instance,g=this.render.lightmapIndex+1,S=T._opaqueBatchMarks[g]||(T._opaqueBatchMarks[g]=[]),x=S[this.render.receiveShadow?0:1]||(S[this.render.receiveShadow?0:1]=[]),D=x[this.material.id]||(x[this.material.id]=[]),M=D[E.id]||(D[E.id]=new Array(3));if(T._updateCountMark===M[0]){var A=M[1];if(M[2])i[A].dynamicBatchElementList.push(this);else{var R=i[A],I=R.render,C=T._getBatchRenderElementFromPool();C.setGeometry(Gn.instance),C.material=R.material,C.setTransform(null);var y=T._getBatchRender(I.lightmapIndex,I.receiveShadow);y._setBelongScene(e.scene),y._distanceForSort=I._distanceForSort,C.render=y,C.dynamicVertexDeclaration=E;var O=C.dynamicBatchElementList;O.length=0,O.push(R),O.push(this),i[A]=C,M[2]=!0}}else M[0]=T._updateCountMark,M[1]=i.length,M[2]=!1,i.push(this)}else i.push(this)},n.addToTransparentRenderQueue=function(e,t){var n=this.staticBatch,i=t.elements;if(n){var r=Xn.instance,a=t.lastTransparentRenderElement;if(a){var o=a.render;if(a.staticBatch!==n||a.material!==this.material||o.receiveShadow!==this.render.receiveShadow||o.lightmapIndex!==this.render.lightmapIndex)i.push(this),t.lastTransparentBatched=!1;else{if(t.lastTransparentBatched)i[i.length-1].staticBatchElementList.push(this);else{var s=r._getBatchRenderElementFromPool();s.setGeometry(n),s.material=a.material;var l=n.batchOwner._owner,h=l?l._transform:null;s.setTransform(h);var c=n.batchOwner._getBatchRender(e,o.lightmapIndex,o.receiveShadow);c._setBelongScene(e.scene),c._distanceForSort=o._distanceForSort,s.render=c;var _=s.staticBatchElementList;_.length=0,_.push(a),_.push(this),i[i.length-1]=s}t.lastTransparentBatched=!0}}else i.push(this),t.lastTransparentBatched=!1;t.lastTransparentRenderElement=this}else if(this._dynamicBatch){var u=this._geometry._vertexBuffer.vertexDeclaration,d=Wn.instance,f=t.lastTransparentRenderElement;if(f){var m=f.render;if(f._geometry._vertexBuffer._vertexDeclaration!==u||f.material!==this.material||m.receiveShadow!==this.render.receiveShadow||m.lightmapIndex!==this.render.lightmapIndex)i.push(this),t.lastTransparentBatched=!1;else{if(t.lastTransparentBatched)i[i.length-1].dynamicBatchElementList.push(this);else{var p=d._getBatchRenderElementFromPool();p.setGeometry(Gn.instance),p.material=f.material,p.setTransform(null);var v=d._getBatchRender(m.lightmapIndex,m.receiveShadow);v._setBelongScene(e.scene),v._distanceForSort=m._distanceForSort,p.render=v,p.dynamicVertexDeclaration=u;var E=p.dynamicBatchElementList;E.length=0,E.push(f),E.push(this),i[i.length-1]=p}t.lastTransparentBatched=!0}}else i.push(this),t.lastTransparentBatched=!1;t.lastTransparentRenderElement=this}else i.push(this),t.lastTransparentRenderElement=this},n.destroy=function(){e.prototype.destroy.call(this),this._dynamicWorldPositions=null,this._dynamicWorldNormals=null,this.skinnedDatas=null,this.staticBatch=null,this.staticBatchElementList=null,this.dynamicBatchElementList=null,this.dynamicVertexDeclaration=null},t}(Tt),kn=function(e){function t(e,n,i){this._owner=e,this._cacheSharders=[],this._publicValidDefine=0,this._spriteValidDefine=0,this._materialValidDefine=0,this._validDefineMap={},t.__super.call(this,n,i,null,this._validDefineMap);var r=e._publicDefinesMap,a=e._spriteDefinesMap,o=e._materialDefinesMap;for(var s in this._validDefineMap)null!=r[s]?this._publicValidDefine|=r[s]:null!=a[s]?this._spriteValidDefine|=a[s]:null!=o[s]&&(this._materialValidDefine|=o[s])}r(t,"laya.d3.shader.ShaderPass",e);var n=t.prototype;return n._definesToNameDic=function(e,t){for(var n={},i=1,r=0;32>r&&(i=1<<r,!(i>e));r++)if(e&i){var a=t[i];n[a]=""}return n},n.withCompile=function(e,t,n){e&=this._publicValidDefine,t&=this._spriteValidDefine,n&=this._materialValidDefine;var i,r,a;if(r=this._cacheSharders[e])if(a=r[t]){if(i=a[n])return i}else a=r[t]=[];else r=this._cacheSharders[e]=[],a=r[t]=[];var o,s=this._definesToNameDic(e,this._owner._publicDefines),l=this._definesToNameDic(t,this._owner._spriteDefines),h=this._definesToNameDic(n,this._owner._materialDefines);if(sn.debugMode){var c="";for(o in s)c+=o+" ";var _="";for(o in l)_+=o+" ";var u="";for(o in h)u+=o+" ";V.shaderHighPrecision||(e+=sn.SHADERDEFINE_HIGHPRECISION),console.log("%cShader3DDebugMode---(Name:"+this._owner._name+" PassIndex:"+this._owner._passes.indexOf(this)+" PublicDefine:"+e+" SpriteDefine:"+t+" MaterialDefine:"+n+" PublicDefineGroup:"+c+" SpriteDefineGroup:"+_+"MaterialDefineGroup: "+u+")---ShaderCompile3DDebugMode","color:green")}var d={},f="";if(s)for(o in s)f+="#define "+o+"\n",d[o]=!0;if(l)for(o in l)f+="#define "+o+"\n",d[o]=!0;if(h)for(o in h)f+="#define "+o+"\n",d[o]=!0;var m=this._VS.toscript(d,[]),p="";0==m[0].indexOf("#version")&&(p=m[0]+"\n",m.shift());var v=this._PS.toscript(d,[]),E="";return 0==v[0].indexOf("#version")&&(E=v[0]+"\n",v.shift()),i=new Ni(p+f+m.join("\n"),E+f+v.join("\n"),this._owner._attributeMap,this._owner._uniformMap),a[n]=i,i},t}(R),Wn=function(e){function t(){this._cacheBatchRender=[],this._cacheBufferStates=[],this._opaqueBatchMarks=[],t.__super.call(this),Gn.instance=new Gn,this._updateCountMark=0}r(t,"laya.d3.graphics.MeshRenderDynamicBatchManager",e);var n=t.prototype;return n._getBufferState=function(e){var t=this._cacheBufferStates[e.id];if(!t){var n=Gn.instance;t=new X,t.bindBufferState();var i=n._vertexBuffer;i.vertexDeclaration=e,t.applyVertexBuffer(i),t.applyIndexBuffer(n._indexBuffer),t.unBindBufferState(),this._cacheBufferStates[e.id]=t}return t},n._getBatchRender=function(e,t){var n=this._cacheBatchRender[e];n||(n=this._cacheBatchRender[e]=o(2,null));var i=n[t?1:0];return i||(i=new bi(null),i.lightmapIndex=e,i.receiveShadow=t,n[t?1:0]=i),i},n._getBatchRenderElementFromPool=function(){var e=this._batchRenderElementPool[this._batchRenderElementPoolIndex++];return e||(e=new zn,this._batchRenderElementPool[this._batchRenderElementPoolIndex-1]=e,e.dynamicBatchElementList=[]),e},n._clear=function(){e.prototype._clear.call(this),this._updateCountMark++},i(t,["instance",function(){return this.instance=new t}]),t}(Mt),Xn=function(e){function t(){this._opaqueBatchMarks=[],t.__super.call(this),this._updateCountMark=0}r(t,"laya.d3.graphics.MeshRenderStaticBatchManager",e);var n=t.prototype;return n._compare=function(e,t){var n=e._render,i=t._render,r=e.meshFilter.sharedMesh,a=t.meshFilter.sharedMesh,o=n.lightmapIndex-i.lightmapIndex;if(0===o){var s=(n.receiveShadow?1:0)-(i.receiveShadow?1:0);if(0===s){var l=n.sharedMaterial.id-i.sharedMaterial.id;if(0===l){var h=r._vertexBuffers[0].vertexDeclaration.id-a._vertexBuffers[0].vertexDeclaration.id;return 0===h?a._indexBuffer.indexCount-r._indexBuffer.indexCount:h}return l}return s}return o},n._getBatchRenderElementFromPool=function(){var e=this._batchRenderElementPool[this._batchRenderElementPoolIndex++];return e||(e=new zn,this._batchRenderElementPool[this._batchRenderElementPoolIndex-1]=e,e.staticBatchElementList=[]),e},n._getStaticBatch=function(e,t){var n=e?e.id:0,i=this._staticBatches[n];i||(i=this._staticBatches[n]=new It(e));var r=i._batches;return r[t]||(r[t]=new Hn(i,t,ri.vertexDeclaration))},n._initStaticBatchs=function(e){this._quickSort(this._initBatchSprites,0,this._initBatchSprites.length-1);for(var t,n=!1,i=0,r=0,a=this._initBatchSprites.length;a>r;r++){var o=this._initBatchSprites[r];if(n)t.addTest(o)?t.add(o):(n=!1,i++);else{var s=a-1;r!==s&&(t=this._getStaticBatch(e,i),t.add(o),n=!0)}}for(var l in this._staticBatches){var h=this._staticBatches[l]._batches;for(r=0,a=h.length;a>r;r++)h[r].finishInit()}this._initBatchSprites.length=0},n._destroyRenderSprite=function(e){var t=e._render._staticBatch;if(t.remove(e),0===t._batchElements.length){var n=t.batchOwner._owner,i=n?n.id:0,r=this._staticBatches[i]._batches;r.splice(t.number,1),0===r.length&&delete this._staticBatches[i],t.dispose()}},n._clear=function(){e.prototype._clear.call(this),this._updateCountMark++},n._garbageCollection=function(){for(var e in this._staticBatches)for(var t=this._staticBatches[e]._batches,n=0,i=t.length;i>n;n++){var r=t[n];0===r._batchElements.length&&(r.dispose(),t.splice(n,1),n--,i--,0===i&&delete this._staticBatches[e])}},i(t,["instance",function(){return this.instance=new t}]),t}(Rt),Yn=function(e){function t(){t.__super.call(this)}r(t,"laya.d3.resource.models.primitiveGeometry",e);var n=t.prototype;return n._render=function(){var e=this._indexBuffer.indexCount;p.instance.drawElements(4,e,5123,0),C.drawCall++,C.trianglesFaces+=e/3},t}(Z),Zn=function(e){function t(e){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._indexInMesh=0,this._vertexStart=0,this._indexStart=0,this._indexCount=0,this._indices=null,this._vertexBuffer=null,this._indexBuffer=null,t.__super.call(this),this._mesh=e,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}r(t,"laya.d3.resource.models.SubMesh",e);var i=t.prototype;return n.imps(i,{"laya.resource.IDispose":!0}),i._render=function(e){for(var t=e.renderElement.skinnedDatas,n=this._boneIndicesList.length,i=e.shader,r=0;n>r;r++)t&&i.uploadCustomUniform(0,t[r]),p.instance.drawElements(4,this._subIndexBufferCount[r],5123,2*this._subIndexBufferStart[r]);C.drawCall+=n,C.trianglesFaces+=this._indexCount/3},i.getIndices=function(){return this._indices},i.dispose=function(){this._destroyed||(this._indexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._indexBuffer=null)},t}(Z),jn=function(e){function t(e){this._position=null,t.__super.call(this),this._position=e}r(t,"laya.d3.graphics.Vertex.VertexPosition",e);var n=t.prototype;return a(0,n,"position",function(){return this._position}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(12,[new wt(0,"vector3",0)])}]),t}(Ct),Kn=function(e){function t(e,n){this._position=null,this._normal=null,t.__super.call(this),this._position=e,this._normal=n
}r(t,"laya.d3.graphics.Vertex.VertexPositionNormal",e);var n=t.prototype;return a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(24,[new wt(0,"vector3",0),new wt(12,"vector3",3)])}]),t}(Ct),qn=function(e){function t(e,n,i){this._position=null,this._normal=null,this._color=null,t.__super.call(this),this._position=e,this._normal=n,this._color=i}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalColor",e);var n=t.prototype;return a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"color",function(){return this._color}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(40,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector4",1)])}]),t}(Ct),Qn=function(e){function t(e,n,i,r,a){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,t.__super.call(this),this._position=e,this._normal=n,this._color=i,this._blendIndex=r,this._blendWeight=a}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalColorSkin",e);var n=t.prototype;return a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"blendWeight",function(){return this._blendWeight}),a(0,n,"color",function(){return this._color}),a(0,n,"blendIndex",function(){return this._blendIndex}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(72,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector4",1),new wt(40,"vector4",7),new wt(56,"vector4",6)])}]),t}(Ct),$n=function(e){function t(e,n,i,r,a,o){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,t.__super.call(this),this._position=e,this._normal=n,this._color=i,this._tangent=r,this._blendIndex=a,this._blendWeight=o}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalColorSkinSTangent",e);var n=t.prototype;return a(0,n,"tangent",function(){return this._tangent}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"blendWeight",function(){return this._blendWeight}),a(0,n,"color",function(){return this._color}),a(0,n,"blendIndex",function(){return this._blendIndex}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(88,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector4",1),new wt(40,"vector4",7),new wt(56,"vector4",6),new wt(72,"vector4",5)])}]),t}(Ct),Jn=function(e){function t(e,n,i,r){this._position=null,this._normal=null,this._color=null,this._tangent=null,t.__super.call(this),this._position=e,this._normal=n,this._color=i,this._tangent=r}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalColorSTangent",e);var n=t.prototype;return a(0,n,"tangent",function(){return this._tangent}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"color",function(){return this._color}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(56,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector4",1),new wt(40,"vector4",5)])}]),t}(Ct),ei=function(e){function t(e,n,i,r){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,t.__super.call(this),this._position=e,this._normal=n,this._color=i,this._textureCoordinate=r}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalColorTexture",e);var n=t.prototype;return a(0,n,"textureCoordinate",function(){return this._textureCoordinate}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"color",function(){return this._color}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(48,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector4",1),new wt(40,"vector2",2)])}]),t}(Ct),ti=function(e){function t(e,n,i,r,a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,t.__super.call(this),this._position=e,this._normal=n,this._color=i,this._textureCoordinate0=r,this._textureCoordinate1=a}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalColorTexture0Texture1",e);var n=t.prototype;return a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"color",function(){return this._color}),a(0,n,"textureCoordinate0",function(){return this._textureCoordinate0}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(0,n,"textureCoordinate1",function(){return this._textureCoordinate1}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(56,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector4",1),new wt(40,"vector2",2),new wt(48,"vector2",8)])}]),t}(Ct),ni=function(e){function t(e,n,i,r,a,o,s){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,t.__super.call(this),this._position=e,this._normal=n,this._color=i,this._textureCoordinate0=r,this._textureCoordinate1=a,this._blendIndex=o,this._blendWeight=s}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalColorTexture0Texture1Skin",e);var n=t.prototype;return a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"blendWeight",function(){return this._blendWeight}),a(0,n,"color",function(){return this._color}),a(0,n,"textureCoordinate0",function(){return this._textureCoordinate0}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(0,n,"textureCoordinate1",function(){return this._textureCoordinate1}),a(0,n,"blendIndex",function(){return this._blendIndex}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(88,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector4",1),new wt(40,"vector2",2),new wt(48,"vector2",8),new wt(56,"vector4",7),new wt(72,"vector4",6)])}]),t}(Ct),ii=function(e){function t(e,n,i,r,a,o,s,l){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,t.__super.call(this),this._position=e,this._normal=n,this._color=i,this._textureCoordinate0=r,this._textureCoordinate1=a,this._tangent=o,this._blendIndex=s,this._blendWeight=l}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalColorTexture0Texture1SkinSTangent",e);var n=t.prototype;return a(0,n,"tangent",function(){return this._tangent}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"blendWeight",function(){return this._blendWeight}),a(0,n,"color",function(){return this._color}),a(0,n,"textureCoordinate0",function(){return this._textureCoordinate0}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(0,n,"textureCoordinate1",function(){return this._textureCoordinate1}),a(0,n,"blendIndex",function(){return this._blendIndex}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(104,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector4",1),new wt(40,"vector2",2),new wt(48,"vector2",8),new wt(56,"vector4",7),new wt(72,"vector4",6),new wt(88,"vector4",5)])}]),t}(Ct),ri=function(e){function t(e,n,i,r,a,o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,t.__super.call(this),this._position=e,this._normal=n,this._color=i,this._textureCoordinate0=r,this._textureCoordinate1=a,this._tangent=o}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalColorTexture0Texture1STangent",e);var n=t.prototype;return a(0,n,"tangent",function(){return this._tangent}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"color",function(){return this._color}),a(0,n,"textureCoordinate0",function(){return this._textureCoordinate0}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(0,n,"textureCoordinate1",function(){return this._textureCoordinate1}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(72,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector4",1),new wt(40,"vector2",2),new wt(48,"vector2",8),new wt(56,"vector4",5)])}]),t}(Ct),ai=function(e){function t(e,n,i,r,a,o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,t.__super.call(this),this._position=e,this._normal=n,this._color=i,this._textureCoordinate=r,this._blendIndex=a,this._blendWeight=o}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalColorTextureSkin",e);var n=t.prototype;return a(0,n,"textureCoordinate",function(){return this._textureCoordinate}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"blendWeight",function(){return this._blendWeight}),a(0,n,"color",function(){return this._color}),a(0,n,"blendIndex",function(){return this._blendIndex}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(80,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector4",1),new wt(40,"vector2",2),new wt(48,"vector4",7),new wt(64,"vector4",6)])}]),t}(Ct),oi=function(e){function t(e,n,i,r,a,o,s){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,t.__super.call(this),this._position=e,this._normal=n,this._color=i,this._textureCoordinate=r,this._tangent=a,this._blendIndex=o,this._blendWeight=s}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalColorTextureSkinSTangent",e);var n=t.prototype;return a(0,n,"tangent",function(){return this._tangent}),a(0,n,"textureCoordinate",function(){return this._textureCoordinate}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"blendWeight",function(){return this._blendWeight}),a(0,n,"color",function(){return this._color}),a(0,n,"blendIndex",function(){return this._blendIndex}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(96,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector4",1),new wt(40,"vector2",2),new wt(48,"vector4",7),new wt(64,"vector4",6),new wt(80,"vector4",5)])}]),t}(Ct),si=function(e){function t(e,n,i,r,a){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,t.__super.call(this),this._position=e,this._normal=n,this._color=i,this._textureCoordinate=r,this._tangent=a}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalColorTextureSTangent",e);var n=t.prototype;return a(0,n,"tangent",function(){return this._tangent}),a(0,n,"textureCoordinate",function(){return this._textureCoordinate}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"color",function(){return this._color}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(64,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector4",1),new wt(40,"vector2",2),new wt(48,"vector4",5)])}]),t}(Ct),li=function(e){function t(e,n,i,r,a,s,l,h){this._owner=null,this._gridSize=0/0,this.memorySize=0,this._numberVertices=0,this._maxNumberIndices=0,this._currentNumberIndices=0,this._numberTriangle=0,this._vertexBuffer=null,this._indexBuffer=null,this._indexArrayBuffer=null,this._boundingBoxCorners=null,this._leafs=null,this._leafNum=0,this._terrainHeightData=null,this._terrainHeightDataWidth=0,this._terrainHeightDataHeight=0,this._chunkOffsetX=0,this._chunkOffsetZ=0,this._cameraCoordinateInverse=!1,this._cameraPos=null,this._currentLOD=0,this._perspectiveFactor=0/0,this._LODTolerance=0,this._boundingSphere=null,this._boundingBox=null,t.__super.call(this),this._owner=e,this._cameraPos=new Di,this._chunkOffsetX=n,this._chunkOffsetZ=i,this._gridSize=r,this._terrainHeightData=a,this._terrainHeightDataWidth=s,this._terrainHeightDataHeight=l,this._leafNum=fn.CHUNK_GRID_NUM/fn.LEAF_GRID_NUM*(fn.CHUNK_GRID_NUM/fn.LEAF_GRID_NUM),this._leafs=o(this._leafNum),this._cameraCoordinateInverse=h;for(var c=0;c<this._leafNum;c++)this._leafs[c]=new fn;this.recreateResource()}r(t,"laya.d3.terrain.TerrainFilter",e);var n=t.prototype;return n.recreateResource=function(){this._currentNumberIndices=0,this._numberTriangle=0;var e=fn.LEAF_VERTEXT_COUNT,t=fn.LEAF_MAX_INDEX_COUNT;this._numberVertices=e*this._leafNum,this._maxNumberIndices=t*this._leafNum,this._indexArrayBuffer=new Uint16Array(this._maxNumberIndices);var n=yt.vertexDeclaration,i=n.vertexStride/4,r=new Float32Array(this._numberVertices*i),a=fn.CHUNK_GRID_NUM/fn.LEAF_GRID_NUM,o=0,s=0,l=0;for(o=0;o<this._leafNum;o++)s=o%a,l=Math.floor(o/a),this._leafs[o].calcVertextBuffer(this._chunkOffsetX,this._chunkOffsetZ,s*fn.LEAF_GRID_NUM,l*fn.LEAF_GRID_NUM,this._gridSize,r,o*fn.LEAF_PLANE_VERTEXT_COUNT,i,this._terrainHeightData,this._terrainHeightDataWidth,this._terrainHeightDataHeight,this._cameraCoordinateInverse);for(o=0;o<this._leafNum;o++)s=o%a,l=Math.floor(o/a),this._leafs[o].calcSkirtVertextBuffer(this._chunkOffsetX,this._chunkOffsetZ,s*fn.LEAF_GRID_NUM,l*fn.LEAF_GRID_NUM,this._gridSize,r,this._leafNum*fn.LEAF_PLANE_VERTEXT_COUNT+o*fn.LEAF_SKIRT_VERTEXT_COUNT,i,this._terrainHeightData,this._terrainHeightDataWidth,this._terrainHeightDataHeight);this.assembleIndexInit(),this._vertexBuffer=new or(n.vertexStride*this._numberVertices,35044,!1),this._vertexBuffer.vertexDeclaration=n,this._indexBuffer=new nr("ushort",this._maxNumberIndices,35044,!1),this._vertexBuffer.setData(r),this._indexBuffer.setData(this._indexArrayBuffer),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.calcOriginalBoudingBoxAndSphere();var h=new X;h.bindBufferState(),h.applyVertexBuffer(this._vertexBuffer),h.applyIndexBuffer(this._indexBuffer),h.unBindBufferState(),this._applyBufferState(h)},n.setLODLevel=function(e){if(4!=e.length)return!0;var t=(e[0]+1<<24)+(e[1]+1<<16)+(e[2]+1<<8)+(e[3]+1);return this._currentLOD==t?!1:(this._currentLOD=t,!0)},n.assembleIndexInit=function(){this._currentNumberIndices=0,this._numberTriangle=0;for(var e=0,t=0;t<this._leafNum;t++){var n=fn.getPlaneLODIndex(t,0);this._indexArrayBuffer.set(n,e),e+=n.length;var i=fn.getSkirtLODIndex(t,0);this._indexArrayBuffer.set(i,e),e+=i.length,this._currentNumberIndices+=n.length+i.length}this._numberTriangle=this._currentNumberIndices/3},n.isNeedAssemble=function(e,t){var n=Math.min(e.viewport.width,e.viewport.height)/(2*Math.tan(Math.PI*e.fieldOfView/180));return this._perspectiveFactor!=n?(this._perspectiveFactor=n,1):this._LODTolerance!=lr.LOD_TOLERANCE_VALUE?(this._LODTolerance=lr.LOD_TOLERANCE_VALUE,1):0==Di.equals(t,this._cameraPos)?(this._cameraPos.x=t.x,this._cameraPos.y=t.y,this._cameraPos.z=t.z,2):0},n.assembleIndex=function(e,n){var i=this.isNeedAssemble(e,n);if(i>0){for(var r=0;r<this._leafNum;r++)t._TEMP_ARRAY_BUFFER[r]=this._leafs[r].determineLod(n,this._perspectiveFactor,lr.LOD_TOLERANCE_VALUE,1==i);if(this.setLODLevel(t._TEMP_ARRAY_BUFFER)){this._currentNumberIndices=0,this._numberTriangle=0;var a=0;for(r=0;r<this._leafNum;r++){var o=t._TEMP_ARRAY_BUFFER[r],s=fn.getPlaneLODIndex(r,o);this._indexArrayBuffer.set(s,a),a+=s.length;var l=fn.getSkirtLODIndex(r,o);this._indexArrayBuffer.set(l,a),a+=l.length,this._currentNumberIndices+=s.length+l.length}return this._numberTriangle=this._currentNumberIndices/3,!0}}return!1},n.calcOriginalBoudingBoxAndSphere=function(){for(var e=new xi(2147483647,-2147483647),t=0;t<this._leafNum;t++)e.x=this._leafs[t]._sizeOfY.x<e.x?this._leafs[t]._sizeOfY.x:e.x,e.y=this._leafs[t]._sizeOfY.y>e.y?this._leafs[t]._sizeOfY.y:e.y;var n=new Di(this._chunkOffsetX*fn.CHUNK_GRID_NUM*this._gridSize,e.x,this._chunkOffsetZ*fn.CHUNK_GRID_NUM*this._gridSize),i=new Di((this._chunkOffsetX+1)*fn.CHUNK_GRID_NUM*this._gridSize,e.y,(this._chunkOffsetZ+1)*fn.CHUNK_GRID_NUM*this._gridSize);fn.__ADAPT_MATRIX__&&(Di.transformV3ToV3(n,fn.__ADAPT_MATRIX__,n),Di.transformV3ToV3(i,fn.__ADAPT_MATRIX__,i)),this._boundingBox=new Ft(n,i);var r=new Di;Di.subtract(i,n,r),Di.scale(r,.5,r);var a=new Di;Di.add(n,r,a),this._boundingSphere=new Ut(a,Di.scalarLength(r)),this._boundingBoxCorners=o(8,null),this._boundingBox.getCorners(this._boundingBoxCorners)},n.calcLeafBoudingBox=function(e){for(var t=0;t<this._leafNum;t++)this._leafs[t].calcLeafBoudingBox(e)},n.calcLeafBoudingSphere=function(e,t){for(var n=0;n<this._leafNum;n++)this._leafs[n].calcLeafBoudingSphere(e,t)},n._getVertexBuffer=function(e){return void 0===e&&(e=0),0==e?this._vertexBuffer:null},n._getIndexBuffer=function(){return this._indexBuffer},n._prepareRender=function(e){var t=e.renderElement.material;if(0==t.getRenderState(0).blend){var n=e.camera;this.assembleIndex(n,n.transform.position)&&this._indexBuffer.setData(this._indexArrayBuffer)}return!0},n._render=function(){p.instance.drawElements(lr.RENDER_LINE_MODEL?1:4,this._currentNumberIndices,5123,0),C.trianglesFaces+=this._numberTriangle,C.drawCall++},n.destroy=function(){this._owner=null,this._vertexBuffer&&this._vertexBuffer.destroy(),this._indexBuffer&&this._indexBuffer.destroy()},i(t,["_TEMP_ARRAY_BUFFER",function(){return this._TEMP_ARRAY_BUFFER=new Uint32Array(fn.CHUNK_GRID_NUM/fn.LEAF_GRID_NUM*fn.CHUNK_GRID_NUM/fn.LEAF_GRID_NUM)}]),t}(Z),hi=function(e){function t(e,n,i){this._position=null,this._normal=null,this._tangent=null,t.__super.call(this),this._position=e,this._normal=n,this._tangent=i}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalSTangent",e);var n=t.prototype;return a(0,n,"tangent",function(){return this._tangent}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(40,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector4",5)])}]),t}(Ct),ci=function(e){function t(e,n,i){this._position=null,this._normal=null,this._textureCoordinate=null,t.__super.call(this),this._position=e,this._normal=n,this._textureCoordinate=i}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalTexture",e);var n=t.prototype;return a(0,n,"textureCoordinate",function(){return this._textureCoordinate}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(32,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector2",2)])}]),t}(Ct),_i=function(e){function t(e,n,i,r){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,t.__super.call(this),this._position=e,this._normal=n,this._textureCoordinate0=i,this._textureCoordinate1=r}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalTexture0Texture1",e);var n=t.prototype;return a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"textureCoordinate0",function(){return this._textureCoordinate0}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(0,n,"textureCoordinate1",function(){return this._textureCoordinate1}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(40,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector2",2),new wt(32,"vector2",8)])}]),t}(Ct),ui=function(e){function t(e,n,i,r,a,o){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,t.__super.call(this),this._position=e,this._normal=n,this._textureCoordinate0=i,this._textureCoordinate1=r,this._blendIndex=a,this._blendWeight=o}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalTexture0Texture1Skin",e);var n=t.prototype;return a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"textureCoordinate0",function(){return this._textureCoordinate0}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(0,n,"textureCoordinate1",function(){return this._textureCoordinate1}),a(0,n,"blendIndex",function(){return this._blendIndex}),a(0,n,"blendWeight",function(){return this._blendWeight}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(72,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector2",2),new wt(32,"vector2",8),new wt(40,"vector4",7),new wt(56,"vector4",6)])}]),t}(Ct),di=function(e){function t(e,n,i,r,a,o,s){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,t.__super.call(this),this._position=e,this._normal=n,this._textureCoordinate0=i,this._textureCoordinate1=r,this._tangent=a,this._blendIndex=o,this._blendWeight=s}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalTexture0Texture1SkinSTangent",e);var n=t.prototype;return a(0,n,"tangent",function(){return this._tangent}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"textureCoordinate0",function(){return this._textureCoordinate0}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(0,n,"textureCoordinate1",function(){return this._textureCoordinate1}),a(0,n,"blendIndex",function(){return this._blendIndex}),a(0,n,"blendWeight",function(){return this._blendWeight}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(88,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector2",2),new wt(32,"vector2",8),new wt(40,"vector4",7),new wt(56,"vector4",6),new wt(72,"vector4",5)])}]),t}(Ct),fi=function(e){function t(e,n,i,r,a){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,t.__super.call(this),this._position=e,this._normal=n,this._textureCoordinate0=i,this._textureCoordinate1=r,this._tangent=a}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalTexture0Texture1STangent",e);var n=t.prototype;return a(0,n,"tangent",function(){return this._tangent}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"textureCoordinate0",function(){return this._textureCoordinate0}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(0,n,"textureCoordinate1",function(){return this._textureCoordinate1}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(56,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector2",2),new wt(32,"vector2",8),new wt(40,"vector4",5)])}]),t}(Ct),mi=function(e){function t(e,n,i,r,a){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,t.__super.call(this),this._position=e,this._normal=n,this._textureCoordinate=i,this._blendIndex=r,this._blendWeight=a}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalTextureSkin",e);var n=t.prototype;return a(0,n,"textureCoordinate",function(){return this._textureCoordinate}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"blendIndex",function(){return this._blendIndex}),a(0,n,"blendWeight",function(){return this._blendWeight}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(64,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector2",2),new wt(32,"vector4",7),new wt(48,"vector4",6)])}]),t}(Ct),pi=function(e){function t(e,n,i,r,a,o){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,t.__super.call(this),this._position=e,this._normal=n,this._textureCoordinate=i,this._tangent=r,this._blendIndex=a,this._blendWeight=o}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalTextureSkinSTangent",e);var n=t.prototype;return a(0,n,"tangent",function(){return this._tangent}),a(0,n,"textureCoordinate",function(){return this._textureCoordinate}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"blendIndex",function(){return this._blendIndex}),a(0,n,"blendWeight",function(){return this._blendWeight}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(80,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector2",2),new wt(32,"vector4",7),new wt(48,"vector4",6),new wt(64,"vector4",5)])}]),t}(Ct),vi=function(e){function t(e,n,i,r){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,t.__super.call(this),this._position=e,this._normal=n,this._textureCoordinate=i,this._tangent=r}r(t,"laya.d3.graphics.Vertex.VertexPositionNormalTextureSTangent",e);var n=t.prototype;return a(0,n,"tangent",function(){return this._tangent}),a(0,n,"textureCoordinate",function(){return this._textureCoordinate}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(48,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector2",2),new wt(32,"vector4",5)])}]),t}(Ct),Ei=function(e){function t(e,n,i){this._position=null,this._normal=null,this._textureCoordinate=null,t.__super.call(this),this._position=e,this._normal=n,this._textureCoordinate=i}r(t,"laya.d3.graphics.Vertex.VertexPositionNTBTexture",e);var n=t.prototype;return a(0,n,"textureCoordinate",function(){return this._textureCoordinate}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(56,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector3",5),new wt(36,"vector3",4),new wt(48,"vector2",2)])}]),t}(Ct),Ti=function(e){function t(e,n,i,r,a,o,s,l){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,t.__super.call(this),this._position=e,this._normal=n,this._textureCoordinate0=r,this._textureCoordinate1=a,this._tangent=o,i=i,this._blendIndex=s,this._blendWeight=l}r(t,"laya.d3.graphics.Vertex.VertexPositionNTBTexture0Texture1Skin",e);var n=t.prototype;return a(0,n,"tangent",function(){return this._tangent}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"textureCoordinate0",function(){return this._textureCoordinate0}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(0,n,"textureCoordinate1",function(){return this._textureCoordinate1}),a(0,n,"blendIndex",function(){return this._blendIndex}),a(0,n,"blendWeight",function(){return this._blendWeight}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(96,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector3",5),new wt(36,"vector3",4),new wt(48,"vector2",2),new wt(56,"vector2",8),new wt(64,"vector4",7),new wt(80,"vector4",6)])}]),t}(Ct),gi=(function(e){function t(e,n,i){this._position=null,this._normal=null,this._textureCoordinate=null,t.__super.call(this),this._position=e,this._normal=n,this._textureCoordinate=i}r(t,"laya.d3.graphics.Vertex.VertexPositionNTBTextureSkin",e);var n=t.prototype;return a(0,n,"textureCoordinate",function(){return this._textureCoordinate}),a(0,n,"normal",function(){return this._normal}),a(0,n,"position",function(){return this._position}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexMesh._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(88,[new wt(0,"vector3",0),new wt(12,"vector3",3),new wt(24,"vector3",5),new wt(36,"vector3",4),new wt(48,"vector2",2),new wt(56,"vector4",7),new wt(72,"vector4",6)])}]),t}(Ct),function(e){function t(e,n,i,r,a,o,s,l,h,c,_,u,d,f){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=0/0,this._time=0/0,this._startSpeed=0/0,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,t.__super.call(this),this._cornerTextureCoordinate=e,this._positionStartLifeTime=n,this._velocity=i,this._startColor=r,this._startSize=a,this._startRotation0=o,this._startRotation1=s,this._startRotation2=l,this._startLifeTime=h,this._time=c,this._startSpeed=_,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=f
}r(t,"laya.d3.graphics.Vertex.VertexShurikenParticleBillboard",e);var n=t.prototype;return a(0,n,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),a(0,n,"random1",function(){return this._randoms1}),a(0,n,"startRotation2",function(){return this._startRotation2}),a(0,n,"positionStartLifeTime",function(){return this._positionStartLifeTime}),a(0,n,"velocity",function(){return this._velocity}),a(0,n,"random0",function(){return this._randoms0}),a(0,n,"startSize",function(){return this._startSize}),a(0,n,"startColor",function(){return this._startColor}),a(0,n,"startRotation0",function(){return this._startRotation0}),a(0,n,"startRotation1",function(){return this._startRotation1}),a(0,n,"startLifeTime",function(){return this._startLifeTime}),a(0,n,"time",function(){return this._time}),a(0,n,"startSpeed",function(){return this._startSpeed}),a(0,n,"simulationWorldPostion",function(){return this._simulationWorldPostion}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexShuriKenParticle._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(152,[new wt(0,"vector4",0),new wt(16,"vector4",4),new wt(32,"vector4",5),new wt(48,"vector4",6),new wt(64,"vector3",8),new wt(76,"vector3",9),new wt(88,"single",10),new wt(92,"vector4",11),new wt(108,"vector4",12),new wt(124,"vector3",13),new wt(136,"vector4",14)])}]),t}(Lt)),Si=function(e){function t(e,n,i,r,a,o,s,l,h,c,_,u,d,f){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=0/0,this._time=0/0,this._startSpeed=0/0,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,t.__super.call(this),this._cornerTextureCoordinate=e,this._positionStartLifeTime=n,this._velocity=i,this._startColor=r,this._startSize=a,this._startRotation0=o,this._startRotation1=s,this._startRotation2=l,this._startLifeTime=h,this._time=c,this._startSpeed=_,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=f}r(t,"laya.d3.graphics.Vertex.VertexShurikenParticleMesh",e);var n=t.prototype;return a(0,n,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),a(0,n,"velocity",function(){return this._velocity}),a(0,n,"position",function(){return this._positionStartLifeTime}),a(0,n,"random0",function(){return this._randoms0}),a(0,n,"startSize",function(){return this._startSize}),a(0,n,"startColor",function(){return this._startColor}),a(0,n,"startRotation0",function(){return this._startRotation0}),a(0,n,"startRotation1",function(){return this._startRotation1}),a(0,n,"random1",function(){return this._randoms1}),a(0,n,"startRotation2",function(){return this._startRotation2}),a(0,n,"startLifeTime",function(){return this._startLifeTime}),a(0,n,"time",function(){return this._time}),a(0,n,"startSpeed",function(){return this._startSpeed}),a(0,n,"simulationWorldPostion",function(){return this._simulationWorldPostion}),a(0,n,"vertexDeclaration",function(){return t._vertexDeclaration}),a(1,t,"vertexDeclaration",function(){return t._vertexDeclaration},laya.d3.graphics.Vertex.VertexShuriKenParticle._$SET_vertexDeclaration),i(t,["_vertexDeclaration",function(){return this._vertexDeclaration=new Vt(172,[new wt(0,"vector3",1),new wt(12,"vector4",2),new wt(28,"vector2",3),new wt(36,"vector4",4),new wt(52,"vector4",5),new wt(68,"vector4",6),new wt(84,"vector3",8),new wt(96,"vector3",9),new wt(108,"single",10),new wt(112,"vector4",11),new wt(128,"vector4",12),new wt(144,"vector3",13),new wt(156,"vector4",14)])}]),t}(Lt),xi=function(e){function t(e,n){t.__super.call(this),void 0===e&&(e=0),void 0===n&&(n=0);var i=this.elements=new Float32Array(2);i[0]=e,i[1]=n}r(t,"laya.d3.math.Vector2",e);var o=t.prototype;return n.imps(o,{"laya.d3.core.IClone":!0}),o.fromArray=function(e,t){void 0===t&&(t=0),this.elements[0]=e[t+0],this.elements[1]=e[t+1]},o.cloneTo=function(e){var t=e,n=t.elements,i=this.elements;n[0]=i[0],n[1]=i[1]},o.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,o,"x",function(){return this.elements[0]},function(e){this.elements[0]=e}),a(0,o,"y",function(){return this.elements[1]},function(e){this.elements[1]=e}),t.scale=function(e,t,n){var i=n.elements,r=e.elements;i[0]=r[0]*t,i[1]=r[1]*t},t.dot=function(e,t){var n=e.elements,i=t.elements,r=n[0]*i[0]+n[1]*i[1];return r},t.normalize=function(e,t){var n=e.elements,i=t.elements,r=n[0],a=n[1],o=r*r+a*a;o>0&&(o=1/Math.sqrt(o),i[0]=n[0]*o,i[1]=n[1]*o)},t.scalarLength=function(e){var t=e.elements,n=t[0],i=t[1];return Math.sqrt(n*n+i*i)},i(t,["ZERO",function(){return this.ZERO=new t(0,0)},"ONE",function(){return this.ONE=new t(1,1)}]),t}(bt),Di=function(e){function t(e,n,i,r){t.__super.call(this),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0);var a;a=r?r:new Float32Array(3),this.elements=a,a[0]=e,a[1]=n,a[2]=i}r(t,"laya.d3.math.Vector3",e);var o=t.prototype;return n.imps(o,{"laya.d3.core.IClone":!0}),o.fromArray=function(e,t){void 0===t&&(t=0),this.elements[0]=e[t+0],this.elements[1]=e[t+1],this.elements[2]=e[t+2]},o.cloneTo=function(e){var t=e,n=t.elements,i=this.elements;n[0]=i[0],n[1]=i[1],n[2]=i[2]},o.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},o.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},a(0,o,"x",function(){return this.elements[0]},function(e){this.elements[0]=e}),a(0,o,"y",function(){return this.elements[1]},function(e){this.elements[1]=e}),a(0,o,"z",function(){return this.elements[2]},function(e){this.elements[2]=e}),t.distanceSquared=function(e,t){var n=e.elements,i=t.elements,r=n[0]-i[0],a=n[1]-i[1],o=n[2]-i[2];return r*r+a*a+o*o},t.distance=function(e,t){var n=e.elements,i=t.elements,r=n[0]-i[0],a=n[1]-i[1],o=n[2]-i[2];return Math.sqrt(r*r+a*a+o*o)},t.min=function(e,t,n){var i=n.elements,r=e.elements,a=t.elements;i[0]=Math.min(r[0],a[0]),i[1]=Math.min(r[1],a[1]),i[2]=Math.min(r[2],a[2])},t.max=function(e,t,n){var i=n.elements,r=e.elements,a=t.elements;i[0]=Math.max(r[0],a[0]),i[1]=Math.max(r[1],a[1]),i[2]=Math.max(r[2],a[2])},t.transformQuat=function(e,t,n){var i=n.elements,r=e.elements,a=t.elements,o=r[0],s=r[1],l=r[2],h=a[0],c=a[1],_=a[2],u=a[3],d=u*o+c*l-_*s,f=u*s+_*o-h*l,m=u*l+h*s-c*o,p=-h*o-c*s-_*l;i[0]=d*u+p*-h+f*-_-m*-c,i[1]=f*u+p*-c+m*-h-d*-_,i[2]=m*u+p*-_+d*-c-f*-h},t.scalarLength=function(e){var t=e.elements,n=t[0],i=t[1],r=t[2];return Math.sqrt(n*n+i*i+r*r)},t.scalarLengthSquared=function(e){var t=e.elements,n=t[0],i=t[1],r=t[2];return n*n+i*i+r*r},t.normalize=function(e,t){var n=e.elements,i=t.elements,r=n[0],a=n[1],o=n[2],s=r*r+a*a+o*o;s>0&&(s=1/Math.sqrt(s),i[0]=n[0]*s,i[1]=n[1]*s,i[2]=n[2]*s)},t.multiply=function(e,t,n){var i=n.elements,r=e.elements,a=t.elements;i[0]=r[0]*a[0],i[1]=r[1]*a[1],i[2]=r[2]*a[2]},t.scale=function(e,t,n){var i=n.elements,r=e.elements;i[0]=r[0]*t,i[1]=r[1]*t,i[2]=r[2]*t},t.lerp=function(e,t,n,i){var r=i.elements,a=e.elements,o=t.elements,s=a[0],l=a[1],h=a[2];r[0]=s+n*(o[0]-s),r[1]=l+n*(o[1]-l),r[2]=h+n*(o[2]-h)},t.transformV3ToV3=function(e,n,i){var r=t._tempVector4;t.transformV3ToV4(e,n,r);var a=r.elements,o=i.elements;o[0]=a[0],o[1]=a[1],o[2]=a[2]},t.transformV3ToV4=function(e,t,n){var i=e.elements,r=i[0],a=i[1],o=i[2],s=t.elements,l=n.elements;l[0]=r*s[0]+a*s[4]+o*s[8]+s[12],l[1]=r*s[1]+a*s[5]+o*s[9]+s[13],l[2]=r*s[2]+a*s[6]+o*s[10]+s[14],l[3]=r*s[3]+a*s[7]+o*s[11]+s[15]},t.TransformNormal=function(e,t,n){var i=e.elements,r=i[0],a=i[1],o=i[2],s=t.elements,l=n.elements;l[0]=r*s[0]+a*s[4]+o*s[8],l[1]=r*s[1]+a*s[5]+o*s[9],l[2]=r*s[2]+a*s[6]+o*s[10]},t.transformCoordinate=function(e,t,n){var i=e.elements,r=i[0],a=i[1],o=i[2],s=t.elements,l=r*s[3]+a*s[7]+o*s[11]+s[15],h=n.elements;h[0]=r*s[0]+a*s[4]+o*s[8]+s[12]/l,h[1]=r*s[1]+a*s[5]+o*s[9]+s[13]/l,h[2]=r*s[2]+a*s[6]+o*s[10]+s[14]/l},t.Clamp=function(e,t,n,i){var r=e.elements,a=r[0],o=r[1],s=r[2],l=t.elements,h=l[0],c=l[1],_=l[2],u=n.elements,d=u[0],f=u[1],m=u[2],p=i.elements;a=a>d?d:a,a=h>a?h:a,o=o>f?f:o,o=c>o?c:o,s=s>m?m:s,s=_>s?_:s,p[0]=a,p[1]=o,p[2]=s},t.add=function(e,t,n){var i=n.elements,r=e.elements,a=t.elements;i[0]=r[0]+a[0],i[1]=r[1]+a[1],i[2]=r[2]+a[2]},t.subtract=function(e,t,n){var i=n.elements,r=e.elements,a=t.elements;i[0]=r[0]-a[0],i[1]=r[1]-a[1],i[2]=r[2]-a[2]},t.cross=function(e,t,n){var i=e.elements,r=t.elements,a=n.elements,o=i[0],s=i[1],l=i[2],h=r[0],c=r[1],_=r[2];a[0]=s*_-l*c,a[1]=l*h-o*_,a[2]=o*c-s*h},t.dot=function(e,t){var n=e.elements,i=t.elements,r=n[0]*i[0]+n[1]*i[1]+n[2]*i[2];return r},t.equals=function(e,t){var n=e.elements,i=t.elements;return zt.nearEqual(n[0],i[0])&&zt.nearEqual(n[1],i[1])&&zt.nearEqual(n[2],i[2])},t.ZERO=new t(0,0,0),t.ONE=new t(1,1,1),t.NegativeUnitX=new t(-1,0,0),t.UnitX=new t(1,0,0),t.UnitY=new t(0,1,0),t.UnitZ=new t(0,0,1),t.ForwardRH=new t(0,0,-1),t.ForwardLH=new t(0,0,1),t.Up=new t(0,1,0),t.NAN=new t(0/0,0/0,0/0),i(t,["_tempVector4",function(){return this._tempVector4=new Mi}]),t}(bt),Mi=function(e){function t(e,n,i,r){t.__super.call(this),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0);var a=this.elements=new Float32Array(4);a[0]=e,a[1]=n,a[2]=i,a[3]=r}r(t,"laya.d3.math.Vector4",e);var o=t.prototype;return n.imps(o,{"laya.d3.core.IClone":!0}),o.fromArray=function(e,t){void 0===t&&(t=0),this.elements[0]=e[t+0],this.elements[1]=e[t+1],this.elements[2]=e[t+2],this.elements[3]=e[t+3]},o.cloneTo=function(e){var t=e,n=t.elements,i=this.elements;n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3]},o.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},o.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},o.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},a(0,o,"x",function(){return this.elements[0]},function(e){this.elements[0]=e}),a(0,o,"y",function(){return this.elements[1]},function(e){this.elements[1]=e}),a(0,o,"z",function(){return this.elements[2]},function(e){this.elements[2]=e}),a(0,o,"w",function(){return this.elements[3]},function(e){this.elements[3]=e}),t.lerp=function(e,t,n,i){var r=i.elements,a=e.elements,o=t.elements,s=a[0],l=a[1],h=a[2],c=a[3];r[0]=s+n*(o[0]-s),r[1]=l+n*(o[1]-l),r[2]=h+n*(o[2]-h),r[3]=c+n*(o[3]-c)},t.transformByM4x4=function(e,t,n){var i=e.elements,r=i[0],a=i[1],o=i[2],s=i[3],l=t.elements,h=n.elements;h[0]=r*l[0]+a*l[4]+o*l[8]+s*l[12],h[1]=r*l[1]+a*l[5]+o*l[9]+s*l[13],h[2]=r*l[2]+a*l[6]+o*l[10]+s*l[14],h[3]=r*l[3]+a*l[7]+o*l[11]+s*l[15]},t.equals=function(e,t){var n=e.elements,i=t.elements;return zt.nearEqual(Math.abs(n[0]),Math.abs(i[0]))&&zt.nearEqual(Math.abs(n[1]),Math.abs(i[1]))&&zt.nearEqual(Math.abs(n[2]),Math.abs(i[2]))&&zt.nearEqual(Math.abs(n[3]),Math.abs(i[3]))},t.normalize=function(e,t){var n=e.elements,i=t.elements,r=e.length();r>0&&(i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[3]=n[3]*r)},t.add=function(e,t,n){var i=n.elements,r=e.elements,a=t.elements;i[0]=r[0]+a[0],i[1]=r[1]+a[1],i[2]=r[2]+a[2],i[3]=r[3]+a[3]},t.subtract=function(e,t,n){var i=n.elements,r=e.elements,a=t.elements;i[0]=r[0]-a[0],i[1]=r[1]-a[1],i[2]=r[2]-a[2],i[3]=r[3]-a[3]},t.multiply=function(e,t,n){var i=n.elements,r=e.elements,a=t.elements;i[0]=r[0]*a[0],i[1]=r[1]*a[1],i[2]=r[2]*a[2],i[3]=r[3]*a[3]},t.scale=function(e,t,n){var i=n.elements,r=e.elements;i[0]=r[0]*t,i[1]=r[1]*t,i[2]=r[2]*t,i[3]=r[3]*t},t.Clamp=function(e,t,n,i){var r=e.elements,a=r[0],o=r[1],s=r[2],l=r[3],h=t.elements,c=h[0],_=h[1],u=h[2],d=h[3],f=n.elements,m=f[0],p=f[1],v=f[2],E=f[3],T=i.elements;a=a>m?m:a,a=c>a?c:a,o=o>p?p:o,o=_>o?_:o,s=s>v?v:s,s=u>s?u:s,l=l>E?E:l,l=d>l?d:l,T[0]=a,T[1]=o,T[2]=s,T[3]=l},t.distanceSquared=function(e,t){var n=e.elements,i=t.elements,r=n[0]-i[0],a=n[1]-i[1],o=n[2]-i[2],s=n[3]-i[3];return r*r+a*a+o*o+s*s},t.distance=function(e,t){var n=e.elements,i=t.elements,r=n[0]-i[0],a=n[1]-i[1],o=n[2]-i[2],s=n[3]-i[3];return Math.sqrt(r*r+a*a+o*o+s*s)},t.dot=function(e,t){var n=e.elements,i=t.elements,r=n[0]*i[0]+n[1]*i[1]+n[2]*i[2]+n[3]*i[3];return r},t.min=function(e,t,n){var i=n.elements,r=e.elements,a=t.elements;i[0]=Math.min(r[0],a[0]),i[1]=Math.min(r[1],a[1]),i[2]=Math.min(r[2],a[2]),i[3]=Math.min(r[3],a[3])},t.max=function(e,t,n){var i=n.elements,r=e.elements,a=t.elements;i[0]=Math.max(r[0],a[0]),i[1]=Math.max(r[1],a[1]),i[2]=Math.max(r[2],a[2]),i[3]=Math.max(r[3],a[3])},i(t,["ZERO",function(){return this.ZERO=new t},"ONE",function(){return this.ONE=new t(1,1,1,1)},"UnitX",function(){return this.UnitX=new t(1,0,0,0)},"UnitY",function(){return this.UnitY=new t(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new t(0,0,1,0)},"UnitW",function(){return this.UnitW=new t(0,0,0,1)}]),t}(bt),Ai=function(e){function t(e,n,i){t.__super.call(this),void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),this._sizeX=e,this._sizeY=n,this._sizeZ=i,this._type=0,t._nativeSize.setValue(e/2,n/2,i/2),this._nativeShape=new Sn._physics3D.btBoxShape(t._nativeSize)}r(t,"laya.d3.physics.shape.BoxColliderShape",e);var n=t.prototype;return a(0,n,"sizeX",function(){return this._sizeX}),a(0,n,"sizeY",function(){return this._sizeY}),a(0,n,"sizeZ",function(){return this._sizeZ}),i(t,["_nativeSize",function(){return this._nativeSize=new Sn._physics3D.btVector3(0,0,0)}]),t}(nn),Ri=function(e){function t(e,n,i){switch(t.__super.call(this),void 0===e&&(e=.5),void 0===n&&(n=1.25),void 0===i&&(i=1),this._radius=e,this._length=n,this._orientation=i,this._type=3,i){case 0:this._nativeShape=new Sn._physics3D.btCapsuleShapeX(e,n-2*e);break;case 1:this._nativeShape=new Sn._physics3D.btCapsuleShape(e,n-2*e);break;case 2:this._nativeShape=new Sn._physics3D.btCapsuleShapeZ(e,n-2*e);break;default:throw"CapsuleColliderShape:unknown orientation."}}r(t,"laya.d3.physics.shape.CapsuleColliderShape",e);var n=t.prototype;return n._setScale=function(n){var i=t._tempVector30,r=n.elements,a=i.elements;switch(this.orientation){case 0:a[0]=r[0],a[1]=a[2]=Math.max(r[1],r[2]);break;case 1:a[1]=r[1],a[0]=a[2]=Math.max(r[0],r[2]);break;case 2:a[2]=r[2],a[0]=a[1]=Math.max(r[0],r[1]);break;default:throw"CapsuleColliderShape:unknown orientation."}e.prototype._setScale.call(this,i)},a(0,n,"radius",function(){return this._radius}),a(0,n,"length",function(){return this._length}),a(0,n,"orientation",function(){return this._orientation}),i(t,["_tempVector30",function(){return this._tempVector30=new Di}]),t}(nn),Ii=function(e){function t(){t.__super.call(this),this._childColliderShapes=[],this._type=5,this._nativeShape=new Sn._physics3D.btCompoundShape}r(t,"laya.d3.physics.shape.CompoundColliderShape",e);var n=t.prototype;return n._addReference=function(){},n._removeReference=function(){},n._updateChildTransform=function(e){var t=e.localOffset.elements,n=e.localRotation.elements,i=nn._nativeVector30,r=nn._nativQuaternion0,a=nn._nativeTransform0;i.setValue(-t[0],t[1],t[2]),r.setValue(-n[0],n[1],n[2],-n[3]),a.setOrigin(i),a.setRotation(r),this._nativeShape.updateChildTransform(e._indexInCompound,a,!0)},n.addChildShape=function(e){if(e._attatched)throw"CompoundColliderShape: this shape has attatched to other entity.";e._attatched=!0,e._compoundParent=this,e._indexInCompound=this._childColliderShapes.length,this._childColliderShapes.push(e);var n=e.localOffset.elements,i=e.localRotation.elements;t._nativeOffset.setValue(-n[0],n[1],n[2]),t._nativRotation.setValue(-i[0],i[1],i[2],-i[3]),t._nativeTransform.setOrigin(t._nativeOffset),t._nativeTransform.setRotation(t._nativRotation);var r=this._nativeShape.getLocalScaling();this._nativeShape.setLocalScaling(t._nativeVector3One),this._nativeShape.addChildShape(t._nativeTransform,e._nativeShape),this._nativeShape.setLocalScaling(r),this._attatchedCollisionObject&&(this._attatchedCollisionObject._removeFromSimulation(),this._attatchedCollisionObject._addToSimulation(),this._attatchedCollisionObject._onShapeChange(this))},n.removeChildShape=function(e){if(e._compoundParent===this){var t=e._indexInCompound;e._attatched=!1,e._compoundParent=null,e._indexInCompound=-1;for(var n=t+1,i=this._childColliderShapes.length;i>n;n++)this._childColliderShapes[n]._indexInCompound--;this._childColliderShapes.splice(t,1),this._nativeShape.removeChildShapeByIndex(t)}},n.getChildShapeCount=function(){return this._childColliderShapes.length},n.destroy=function(){e.prototype.destroy.call(this);for(var t=0,n=this._childColliderShapes.length;n>t;t++){var i=this._childColliderShapes[t];0===i._referenceCount&&i.destroy()}},i(t,["_nativeVector3One",function(){return this._nativeVector3One=new Sn._physics3D.btVector3(1,1,1)},"_nativeTransform",function(){return this._nativeTransform=new Sn._physics3D.btTransform},"_nativeOffset",function(){return this._nativeOffset=new Sn._physics3D.btVector3(0,0,0)},"_nativRotation",function(){return this._nativRotation=new Sn._physics3D.btQuaternion(0,0,0,1)}]),t}(nn),Ci=(function(e){function t(e,n,i){switch(this._radius=1,this._height=.5,t.__super.call(this),void 0===e&&(e=.5),void 0===n&&(n=1),void 0===i&&(i=1),this._radius=e,this._height=n,this._orientation=i,this._type=2,i){case 0:this._nativeShape=new Sn._physics3D.btConeShapeX(e,n);break;case 1:this._nativeShape=new Sn._physics3D.btConeShape(e,n);break;case 2:this._nativeShape=new Sn._physics3D.btConeShapeZ(e,n);break;default:throw"ConeColliderShape:unknown orientation."}}r(t,"laya.d3.physics.shape.ConeColliderShape",e);var n=t.prototype;return a(0,n,"radius",function(){return this._radius}),a(0,n,"height",function(){return this._height}),a(0,n,"orientation",function(){return this._orientation}),t}(nn),function(e){function t(e,n,i){switch(this._radius=1,this._height=.5,t.__super.call(this),void 0===e&&(e=.5),void 0===n&&(n=1),void 0===i&&(i=1),this._radius=e,this._height=n,this._orientation=i,this._type=2,i){case 0:t._nativeSize.setValue(n/2,e,e),this._nativeShape=new Sn._physics3D.btCylinderShapeX(t._nativeSize);break;case 1:t._nativeSize.setValue(e,n/2,e),this._nativeShape=new Sn._physics3D.btCylinderShape(t._nativeSize);break;case 2:t._nativeSize.setValue(e,e,n/2),this._nativeShape=new Sn._physics3D.btCylinderShapeZ(t._nativeSize);break;default:throw"CapsuleColliderShape:unknown orientation."}}r(t,"laya.d3.physics.shape.CylinderColliderShape",e);var n=t.prototype;return a(0,n,"radius",function(){return this._radius}),a(0,n,"height",function(){return this._height}),a(0,n,"orientation",function(){return this._orientation}),i(t,["_nativeSize",function(){return this._nativeSize=new Sn._physics3D.btVector3(0,0,0)}]),t}(nn),function(e){function t(){this._mesh=null,this._convex=!1,t.__super.call(this);Sn._physics3D}r(t,"laya.d3.physics.shape.MeshColliderShape",e);var n=t.prototype;return a(0,n,"mesh",function(){return this._mesh},function(e){if(this._mesh!==e){var n=Sn._physics3D;if(this._mesh||(n.destroy(this._nativeTriangleMesh),n.destroy(this._nativeShape)),e){for(var i=new n.btTriangleMesh,r=t._nativeTempVector30,a=t._nativeTempVector31,o=t._nativeTempVector32,s=e._getPositions(),l=e._indexBuffer.getData(),h=0,c=l.length;c>h;h+=3){var _=s[l[h]],u=s[l[h+1]],d=s[l[h+2]];gn._convertLayaPosToBulletPos(_,r),gn._convertLayaPosToBulletPos(u,a),gn._convertLayaPosToBulletPos(d,o),i.addTriangle(r,a,o,!0)}this._nativeTriangleMesh=i,this._nativeShape=new n.btGImpactMeshShape(i)}this._mesh=e}}),a(0,n,"convex",function(){return this._convex},function(e){this._convex=e}),i(t,["_nativeTempVector30",function(){return this._nativeTempVector30=new Sn._physics3D.btVector3(0,0,0)},"_nativeTempVector31",function(){return this._nativeTempVector31=new Sn._physics3D.btVector3(0,0,0)},"_nativeTempVector32",function(){return this._nativeTempVector32=new Sn._physics3D.btVector3(0,0,0)}]),t}(nn),function(e){function t(e){t.__super.call(this),void 0===e&&(e=.5),this._radius=e,this._type=1,this._nativeShape=new Sn._physics3D.btSphereShape(e)}r(t,"laya.d3.physics.shape.SphereColliderShape",e);var n=t.prototype;return a(0,n,"radius",function(){return this._radius}),t}(nn)),yi=(function(e){function t(e,n){t.__super.call(this),this._normal=e,this._offset=n,this._type=6,t._nativeNormal.setValue(-e.x,e.y,e.z),this._nativeShape=new Sn._physics3D.btStaticPlaneShape(t._nativeNormal,n)}return r(t,"laya.d3.physics.shape.StaticPlaneColliderShape",e),i(t,["_nativeNormal",function(){return this._nativeNormal=new Sn._physics3D.btVector3(0,0,0)}]),t}(nn),function(e){function t(e,n){this._needProcessCollisions=!1,this._needProcessTriggers=!1,t.__super.call(this),void 0===n&&(n=!1),this._id=++t._uniqueIDCounter,this._transform=new In(this),this._isStatic=n,this.layer=0,this.name=e?e:"New Sprite3D"}r(t,"laya.d3.core.Sprite3D",e);var o=t.prototype;return n.imps(o,{"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),o._setUrl=function(e){this._url=e},o._getGroup=function(){return this._group},o._setGroup=function(e){this._group=e},o._changeAnimatorsToLinkSprite3D=function(e,t,n){var i=this.getComponent(xn);if(i&&(i.avatar||e._changeAnimatorToLinkSprite3DNoAvatar(i,t,n)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){n.unshift(this._parent.name);var r=this._parent;r._hierarchyAnimator&&r._changeAnimatorsToLinkSprite3D(e,t,n)}},o._setHierarchyAnimator=function(e,t){this._changeHierarchyAnimator(e),this._changeAnimatorAvatar(e.avatar);for(var n=0,i=this._children.length;i>n;n++){var r=this._children[n];r._hierarchyAnimator==t&&r._setHierarchyAnimator(e,t)}},o._clearHierarchyAnimator=function(e,t){this._changeHierarchyAnimator(t),this._changeAnimatorAvatar(t?t.avatar:null);for(var n=0,i=this._children.length;i>n;n++){var r=this._children[n];r._hierarchyAnimator==e&&r._clearHierarchyAnimator(e,t)}},o._changeHierarchyAnimatorAvatar=function(e,t){this._changeAnimatorAvatar(t);for(var n=0,i=this._children.length;i>n;n++){var r=this._children[n];r._hierarchyAnimator==e&&r._changeHierarchyAnimatorAvatar(e,t)}},o._changeAnimatorToLinkSprite3DNoAvatar=function(e,t,n){e._handleSpriteOwnersBySprite(t,n,this);for(var i=0,r=this._children.length;r>i;i++){var a=this._children[i],o=n.length;n.push(a.name),a._changeAnimatorToLinkSprite3DNoAvatar(e,t,n),n.splice(o,1)}},o._changeHierarchyAnimator=function(e){this._hierarchyAnimator=e},o._changeAnimatorAvatar=function(){},o._onAdded=function(){if(this._parent instanceof laya.d3.core.Sprite3D){var t=this._parent;this.transform._setParent(t.transform),t._hierarchyAnimator&&(!this._hierarchyAnimator&&this._setHierarchyAnimator(t._hierarchyAnimator,null),t._changeAnimatorsToLinkSprite3D(this,!0,[this.name]))}e.prototype._onAdded.call(this)},o._onRemoved=function(){if(e.prototype._onRemoved.call(this),this._parent instanceof laya.d3.core.Sprite3D){var t=this._parent;this.transform._setParent(null),t._hierarchyAnimator&&(this._hierarchyAnimator==t._hierarchyAnimator&&this._clearHierarchyAnimator(t._hierarchyAnimator,null),t._changeAnimatorsToLinkSprite3D(this,!1,[this.name]))}},o._parse=function(e){this._isStatic=e.isStatic,this.name=e.name;var t=this.transform.localPosition;if(t.fromArray(e.position||e.translate),this.transform.localPosition=t,e.localRotationEuler){var n=this.transform.localRotationEuler;n.fromArray(e.rotationEuler),this.transform.localRotationEuler=n}else{var i=this.transform.localRotation;i.fromArray(e.rotation),this.transform.localRotation=i}var r=this.transform.localScale;r.fromArray(e.scale),this.transform.localScale=r;var a=e.layer;null!=a&&(this.layer=a)},o.cloneTo=function(e){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");for(var t=e,n=0,i=this._children.length;i>n;n++)t.addChild(this._children[n].clone());t.name=this.name,t.destroyed=this.destroyed,t.active=this.active;var r=t.transform.localPosition;this.transform.localPosition.cloneTo(r),t.transform.localPosition=r;var a=t.transform.localRotation;this.transform.localRotation.cloneTo(a),t.transform.localRotation=a;var o=t.transform.localScale;this.transform.localScale.cloneTo(o),t.transform.localScale=o,t._isStatic=this._isStatic,t.layer=this.layer,this._cloneTo(t)},o.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},o.destroy=function(t){void 0===t&&(t=!0),this.destroyed||(e.prototype.destroy.call(this,t),this._transform=null,this._scripts=null,E.clearRes(this.url))},a(0,o,"id",function(){return this._id}),a(0,o,"url",function(){return this._url}),a(0,o,"layer",function(){return this._layer},function(e){if(this._layer!==e){if(!(e>=0&&30>=e))throw new Error("Layer value must be 0-30.");this._layer=e}}),a(0,o,"transform",function(){return this._transform}),a(0,o,"isStatic",function(){return this._isStatic}),t._parse=function(e){var t=e[0].data,n=e[1],i=[],r=gn._createNodeByJson(t,n,i);return Rt.combine(null,i),r},t.__init__=function(){t.WORLDMATRIX=t.shaderUniforms.registerUniform(),t.MVPMATRIX=t.shaderUniforms.registerUniform()},t.instantiate=function(e,t,n,i,r){void 0===n&&(n=!0);var a=e.clone();t&&t.addChild(a);var o=a.transform;if(n){var s=o.worldMatrix;e.transform.worldMatrix.cloneTo(s),o.worldMatrix=s}else i&&(o.position=i),r&&(o.rotation=r);return a},t.load=function(e,t){n.loader.create(e,t,null,"HIERARCHY")},t.WORLDMATRIX=0,t.MVPMATRIX=0,t._uniqueIDCounter=0,i(t,["shaderUniforms",function(){return this.shaderUniforms=new _n}]),t}(S)),Oi=function(t){function a(){a.__super.call(this),this._nodes=new U,this._events=[]}r(a,"laya.d3.animation.AnimationClip",t);var o=a.prototype;return o.duration=function(){return this._duration},o._hermiteInterpolate=function(e,t,n,i){var r=e.outTangent,a=t.inTangent;if(Number.isFinite(r)&&Number.isFinite(a)){var o=n*n,s=o*n,l=2*s-3*o+1,h=s-2*o+n,c=s-o,_=-2*s+3*o;return l*e.value+h*r*i+c*a*i+_*t.value}return e.value},o._hermiteInterpolateArray=function(e,t,n,i,r){for(var a=e.value,o=e.outTangent,s=t.value,l=t.inTangent,h=!1,c=0/0,_=0/0,u=0/0,d=0/0,f=0,m=r.length;m>f;f++){var p=o[f],v=l[f];if(Number.isFinite(p)&&Number.isFinite(v)){if(!h){var E=n*n,T=E*n;c=2*T-3*E+1,_=T-2*E+n,u=T-E,d=-2*T+3*E,h=!0}r[f]=c*a[f]+_*p*i+u*v*i+d*s[f]}else r[f]=a[f]}},o._evaluateClipDatasRealTime=function(e,t,n,i){for(var r=0,o=e.count;o>r;r++){for(var s=e.getNodeByIndex(r),l=s.type,h=n[r]+1,c=s._keyFrames,_=c.length;_>h&&!(c[h].time>t);)h++;var u=h-1;n[r]=u;var d=h===_;switch(l){case 0:var f=c[u];if(f)if(d)s.data=f.value;else{var m=c[h],p=m.time-f.time,v=0/0;v=0!==p?(t-f.time)/p:0,s.data=this._hermiteInterpolate(f,m,v,p)}else s.data=c[0].value;i&&(s.data-=c[0].value);break;case 1:case 4:var E=s.data;if(this._evaluateFrameNodeArrayDatasRealTime(c,u,d,t,3,E),i){var T=c[0].value;E[0]-=T[0],E[1]-=T[1],E[2]-=T[2]}break;case 2:if(E=s.data,this._evaluateFrameNodeArrayDatasRealTime(c,u,d,t,4,E),i){var g=a._tempQuaternionArray0;T=c[0].value,gn.quaternionConjugate(T,g),gn.quaternionMultiply(g,E,E)}break;case 3:E=s.data,this._evaluateFrameNodeArrayDatasRealTime(c,u,d,t,3,E),i&&(T=c[0].value,E[0]/=T[0],E[1]/=T[1],E[2]/=T[2]);break;default:throw"AnimationClip:unknown node type."}}},o._evaluateClipDatasRealTimeForNative=function(t,n,i,r){e.conch.evaluateClipDatasRealTime(t._nativeObj,n,i,r)},o._evaluateFrameNodeArrayDatasRealTime=function(e,t,n,i,r,a){var o=e[t];if(o)if(n)for(var s=o.value,l=0;r>l;l++)a[l]=s[l];else{var h=e[t+1],c=0/0,_=o.time,u=h.time-_;c=0!==u?(i-_)/u:0,this._hermiteInterpolateArray(o,h,c,u,a)}else{var d=e[0].value;for(l=0;r>l;l++)a[l]=d[l]}},o._binarySearchEventIndex=function(e){for(var t=0,n=this._events.length-1,i=0;n>=t;){i=Math.floor((t+n)/2);var r=this._events[i].time;if(r==e)return i;r>e?n=i-1:t=i+1}return t},o.addEvent=function(e){var t=this._binarySearchEventIndex(e.time);this._events.splice(t,0,e)},o._disposeResource=function(){this._version=null,this._nodes=null,this._nodesMap=null},a._parse=function(e){var t=new a,n=new c(e);switch(t._version=n.readUTFString(),t._version){case"LAYAANIMATION:03":P.parse(t,n);break;default:throw"unknown animationClip version."}return t},a.load=function(e,t){n.loader.create(e,t,null,"ANIMATIONCLIP")},i(a,["_tempQuaternionArray0",function(){return this._tempQuaternionArray0=new Float32Array(4)}]),a}(M),Li=function(e){function t(){this._rootNode=null,this._nativeNodeCount=0,this._nativeCurCloneCount=0,t.__super.call(this)}r(t,"laya.d3.core.Avatar",e);var i=t.prototype;return n.imps(i,{"laya.d3.core.IClone":!0}),i._initCloneToAnimator=function(e,t){t._avatarNodeMap[e.name]=e;for(var n=0,i=e.getChildCount();i>n;n++)this._initCloneToAnimator(e.getChildByIndex(n),t)},i._parseNode=function(e,t){var n=e.props.name;t.name=n;var i=e.props,r=t.transform,a=r.localPosition,o=r.localRotation,s=r.localScale;a.fromArray(i.translate),o.fromArray(i.rotation),s.fromArray(i.scale),r.localPosition=a,r.localRotation=o,r.localScale=s;for(var l=e.child,h=0,c=l.length;c>h;h++){var _=l[h],u=new F(new Float32Array(3),new Float32Array(4),new Float32Array(3),new Float32Array(16));t.addChild(u),x.isConchApp&&this._nativeNodeCount++,this._parseNode(_,u)}},i._cloneDatasToAnimator=function(e){var t;t=this._rootNode.clone();var n=this._rootNode.transform,i=t.transform,r=i.localPosition,a=i.localRotation,o=i.localScale;n.localPosition.cloneTo(r),n.localRotation.cloneTo(a),n.localScale.cloneTo(o),i.localPosition=r,i.localRotation=a,i.localScale=o,e._avatarNodeMap={},this._initCloneToAnimator(t,e)},i.cloneTo=function(e){var t=e,n=this._rootNode.clone();t._rootNode=n},i.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},i._cloneDatasToAnimatorNative=function(e){var t=new Float32Array(3*this._nativeNodeCount),n=new Float32Array(4*this._nativeNodeCount),i=new Float32Array(3*this._nativeNodeCount),r=new Float32Array(16*this._nativeNodeCount),a=new Int16Array(this._nativeNodeCount);e._animationNodeLocalPositions=t,e._animationNodeLocalRotations=n,e._animationNodeLocalScales=i,e._animationNodeWorldMatrixs=r,e._animationNodeParentIndices=a,this._nativeCurCloneCount=0;var o=this._rootNode._cloneNative(t,n,i,r,a,-1,this),s=this._rootNode.transform,l=o.transform,h=l.localPosition,c=l.localRotation,_=l.localScale;s.localPosition.cloneTo(h),s.localRotation.cloneTo(c),s.localScale.cloneTo(_),l.localPosition=h,l.localRotation=c,l.localScale=_,e._avatarNodeMap={},this._initCloneToAnimator(o,e)},t._parse=function(e){var n=new t;if(n._rootNode=new F(new Float32Array(3),new Float32Array(4),new Float32Array(3),new Float32Array(16)),x.isConchApp&&n._nativeNodeCount++,e.version){var i=e.rootNode;i&&n._parseNode(i,n._rootNode)}return n},t.load=function(e,t){n.loader.create(e,t,null,"AVATAR")},t}(M),Vi=function(e){function t(e){t.__super.call(this),this._defineDatas=new on,this._disablePublicDefineDatas=new on,this._shaderValues=new ln(this,e),this.renderQueue=2e3,this._alphaTest=!1,this._renderStates=[]}r(t,"laya.d3.core.material.BaseMaterial",e);var o=t.prototype;return n.imps(o,{"laya.d3.core.IClone":!0}),o._removeTetxureReference=function(){for(var e=this._shaderValues._data,t=0,n=e.length;n>t;t++){var i=e[t];i&&i instanceof laya.webgl.resource.BaseTexture&&i._removeReference()}},o._addReference=function(){e.prototype._addReference.call(this);for(var t=this._shaderValues._data.length,n=0,i=t;i>n;n++){var r=this._shaderValues._data[n];r&&r instanceof laya.webgl.resource.BaseTexture&&r._addReference()}},o._removeReference=function(){e.prototype._removeReference.call(this),this._removeTetxureReference()},o._disposeResource=function(){this._referenceCount>0&&this._removeTetxureReference(),this._shaderValues=null},o.setShaderName=function(e){if(this._shader=sn._preCompileShader[e],!this._shader)throw new Error("BaseMaterial: unknown shader name.");var t=this._shader._passes.length;this._renderStates.length=t;for(var n=0;t>n;n++)this._renderStates[n]||(this._renderStates[n]=new Q)},o.getRenderState=function(e){return void 0===e&&(e=0),this._renderStates[e]},o.cloneTo=function(e){var t=e;t.name=this.name,t.renderQueue=this.renderQueue,this._disablePublicDefineDatas.cloneTo(t._disablePublicDefineDatas),this._defineDatas.cloneTo(t._defineDatas),this._shaderValues.cloneTo(t._shaderValues);for(var n=e._renderStates,i=0,r=this._renderStates.length;r>i;i++)this._renderStates[i].cloneTo(n[i])
},o.clone=function(){var e=new this.constructor;return this.cloneTo(e),e},a(0,o,"alphaTestValue",function(){return this._shaderValues.getNumber(0)},function(e){this._shaderValues.setNumber(0,e)}),a(0,o,"alphaTest",function(){return this._alphaTest},function(e){this._alphaTest=e,e?this._defineDatas.add(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._defineDatas.remove(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),t.load=function(e,t){n.loader.create(e,t,null,"MATERIAL")},t.__init__=function(){t.SHADERDEFINE_ALPHATEST=t.shaderDefines.registerDefine("ALPHATEST")},t._parse=function(e){var t,n=e[0],i=e[1],r=n.props,a=r.type.split("."),o=l.window;if(a.forEach(function(e){o=o[e]}),"function"!=typeof o)throw"_getSprite3DHierarchyInnerUrls 错误: "+e.type+" 不是类";switch(t=new o,n.version){case"LAYAMATERIAL:01":r=n.props;for(u in r)switch(u){case"vectors":for(d=r[u],c=0,_=d.length;_>c;c++)switch(f=d[c],m=f.value,m.length){case 2:t[f.name]=new xi(m[0],m[1]);break;case 3:t[f.name]=new Di(m[0],m[1],m[2]);break;case 4:t[f.name]=new Mi(m[0],m[1],m[2],m[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(p=r[u],c=0,_=p.length;_>c;c++)v=p[c],T=v.path,T&&(t[v.name]=E.getRes(i[T]));break;case"defines":for(g=r[u],c=0,_=g.length;_>c;c++)S=t._shader.getMaterialDefineByName(g[c]),t._defineDatas.add(S);break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":var s=r[u];for(c=0,_=t._renderStates.length;_>c;c++)t._renderStates[c][u]=s;break;case"renderQueue":var h=r[u];switch(h){case 1:t.renderQueue=2e3;break;case 2:t.renderQueue=3e3;break;default:t[u]=r[u]}break;default:t[u]=r[u]}break;case"LAYAMATERIAL:02":var c=0,_=0;for(var u in r)switch(u){case"vectors":var d=r[u];for(c=0,_=d.length;_>c;c++){var f=d[c],m=f.value;switch(m.length){case 2:t[f.name]=new xi(m[0],m[1]);break;case 3:t[f.name]=new Di(m[0],m[1],m[2]);break;case 4:t[f.name]=new Mi(m[0],m[1],m[2],m[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var p=r[u];for(c=0,_=p.length;_>c;c++){var v=p[c],T=v.path;T&&(t[v.name]=E.getRes(i[T]))}break;case"defines":var g=r[u];for(c=0,_=g.length;_>c;c++){var S=t._shader.getMaterialDefineByName(g[c]);t._defineDatas.add(S)}break;case"renderStates":var x=r[u];for(c=0,_=x.length;_>c;c++){var D=x[c],M=t._renderStates[c];for(var A in D)M[A]=D[A]}break;default:t[u]=r[u]}break;default:throw new Error("BaseMaterial:unkonwn version.")}return t},t.RENDERQUEUE_OPAQUE=2e3,t.RENDERQUEUE_ALPHATEST=2450,t.RENDERQUEUE_TRANSPARENT=3e3,t.ALPHATESTVALUE=0,t.SHADERDEFINE_ALPHATEST=0,i(t,["shaderDefines",function(){return this.shaderDefines=new hn}]),t}(M),wi=function(e){function t(){this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._subMeshCount=0,this._positions=null,t.__super.call(this),this._boundingBoxCorners=o(8,null)}r(t,"laya.d3.resource.models.BaseMesh",e);var n=t.prototype;return n._getPositions=function(){throw new Error("未Override,请重载该属性！")},n._generateBoundingObject=function(){this._boundingSphere=new Ut(new Di,0),Ut.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new Ft(new Di,new Di),Ft.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},n._getSubMesh=function(){throw new Error("未Override,请重载该属性！")},a(0,n,"subMeshCount",function(){return this._subMeshCount}),a(0,n,"boundingBox",function(){return this._boundingBox}),a(0,n,"boundingBoxCorners",function(){return this._boundingBoxCorners}),a(0,n,"boundingSphere",function(){return this._boundingSphere}),t}(M),Ni=function(e){function t(e,n,i,r){t.__super.call(this),this._vs=e,this._ps=n,this._attributeMap=i,this._uniformMap=r,this._create()}r(t,"laya.d3.shader.ShaderInstance",e);var n=t.prototype;return n._create=function(){var e=p.instance;this._program=e.createProgram(),this._vshader=this._createShader(e,this._vs,35633),this._pshader=this._createShader(e,this._ps,35632),e.attachShader(this._program,this._vshader),e.attachShader(this._program,this._pshader);for(var t in this._attributeMap)e.bindAttribLocation(this._program,this._attributeMap[t],t);if(e.linkProgram(this._program),!x.isConchApp&&sn.debugMode&&!e.getProgramParameter(this._program,35714))throw e.getProgramInfoLog(this._program);var n=[],i=[],r=[],a=[],o=[];this._customUniformParamsMap=[];var s=0;s=x.isConchApp?e.getProgramParameterEx(this._vs,this._ps,"",35718):e.getProgramParameter(this._program,35718),w.useProgram(e,this._program),this._curActTexIndex=0;var l,h=0,c=0;for(h=0;s>h;h++){var _=null;_=x.isConchApp?e.getActiveUniformEx(this._vs,this._ps,"",h):e.getActiveUniform(this._program,h);var u=_.name;l=new un,l.location=e.getUniformLocation(this._program,u),u.indexOf("[0]")>0?(l.name=u=u.substr(0,u.length-3),l.isArray=!0):(l.name=u,l.isArray=!1),l.type=_.type,this._addShaderUnifiormFun(l);var d=this._uniformMap[u];if(null!=d)switch(l.dataOffset=d[0],d[1]){case 0:o.push(l);break;case 1:a.push(l);break;case 2:r.push(l);break;case 3:i.push(l);break;case 4:n.push(l);break;default:throw new Error("Shader3D: period is unkonw.")}else console.log("Shader3D:can't find uinform name:"+this._uniformMap[l.name]+" in shader file.")}for(this._sceneUniformParamsMap=p.instance.createCommandEncoder(4*n.length*5+4,64,!0),h=0,c=n.length;c>h;h++)this._sceneUniformParamsMap.addShaderUniform(n[h]);for(this._cameraUniformParamsMap=p.instance.createCommandEncoder(4*i.length*5+4,64,!0),h=0,c=i.length;c>h;h++)this._cameraUniformParamsMap.addShaderUniform(i[h]);for(this._spriteUniformParamsMap=p.instance.createCommandEncoder(4*r.length*5+4,64,!0),h=0,c=r.length;c>h;h++)this._spriteUniformParamsMap.addShaderUniform(r[h]);for(this._materialUniformParamsMap=p.instance.createCommandEncoder(4*a.length*5+4,64,!0),h=0,c=a.length;c>h;h++)this._materialUniformParamsMap.addShaderUniform(a[h]);for(this._customUniformParamsMap.length=o.length,h=0,c=o.length;c>h;h++){var f=o[h];this._customUniformParamsMap[f.dataOffset]=f}},n._disposeResource=function(){p.instance.deleteShader(this._vshader),p.instance.deleteShader(this._pshader),p.instance.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._setGPUMemory(0),this._curActTexIndex=0},n._addShaderUnifiormFun=function(e){var t=p.instance;e.caller=this;var n=e.isArray;switch(e.type){case 35670:e.fun=this._uniform1i,e.uploadedValue=new Array(1);break;case 5124:e.fun=n?this._uniform1iv:this._uniform1i,e.uploadedValue=new Array(1);break;case 5126:e.fun=n?this._uniform1fv:this._uniform1f,e.uploadedValue=new Array(1);break;case 35664:e.fun=n?this._uniform_vec2v:this._uniform_vec2,e.uploadedValue=new Array(2);break;case 35665:e.fun=n?this._uniform_vec3v:this._uniform_vec3,e.uploadedValue=new Array(3);break;case 35666:e.fun=n?this._uniform_vec4v:this._uniform_vec4,e.uploadedValue=new Array(4);break;case 35674:e.fun=this._uniformMatrix2fv;break;case 35675:e.fun=this._uniformMatrix3fv;break;case 35676:e.fun=n?this._uniformMatrix4fv:this._uniformMatrix4f;break;case 35678:t.uniform1i(e.location,this._curActTexIndex),e.textureID=w._glTextureIDs[this._curActTexIndex++],e.fun=this._uniform_sampler2D;break;case 35679:t.uniform1i(e.location,this._curActTexIndex),e.textureID=w._glTextureIDs[this._curActTexIndex++],e.fun=this._uniform_sampler3D;break;case 35680:t.uniform1i(e.location,this._curActTexIndex),e.textureID=w._glTextureIDs[this._curActTexIndex++],e.fun=this._uniform_samplerCube;break;default:throw new Error("compile shader err!")}},n._createShader=function(e,t,n){var i=e.createShader(n);if(e.shaderSource(i,t),e.compileShader(i),sn.debugMode&&!e.getShaderParameter(i,35713))throw e.getShaderInfoLog(i);return i},n._uniform1f=function(e,t){var n=e.uploadedValue;return n[0]!==t?(p.instance.uniform1f(e.location,n[0]=t),1):0},n._uniform1fv=function(e,t){if(t.length<4){var n=e.uploadedValue;return n[0]!==t[0]||n[1]!==t[1]||n[2]!==t[2]||n[3]!==t[3]?(p.instance.uniform1fv(e.location,t),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],1):0}return p.instance.uniform1fv(e.location,t),1},n._uniform_vec2=function(e,t){var n=t.elements,i=e.uploadedValue;return i[0]!==n[0]||i[1]!==n[1]?(p.instance.uniform2f(e.location,i[0]=n[0],i[1]=n[1]),1):0},n._uniform_vec2v=function(e,t){if(t.length<2){var n=e.uploadedValue;return n[0]!==t[0]||n[1]!==t[1]||n[2]!==t[2]||n[3]!==t[3]?(p.instance.uniform2fv(e.location,t),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],1):0}return p.instance.uniform2fv(e.location,t),1},n._uniform_vec3=function(e,t){var n=t.elements,i=e.uploadedValue;return i[0]!==n[0]||i[1]!==n[1]||i[2]!==n[2]?(p.instance.uniform3f(e.location,i[0]=n[0],i[1]=n[1],i[2]=n[2]),1):0},n._uniform_vec3v=function(e,t){return p.instance.uniform3fv(e.location,t),1},n._uniform_vec4=function(e,t){var n=t.elements,i=e.uploadedValue;return i[0]!==n[0]||i[1]!==n[1]||i[2]!==n[2]||i[3]!==n[3]?(p.instance.uniform4f(e.location,i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3]),1):0},n._uniform_vec4v=function(e,t){return p.instance.uniform4fv(e.location,t),1},n._uniformMatrix2fv=function(e,t){return p.instance.uniformMatrix2fv(e.location,!1,t),1},n._uniformMatrix3fv=function(e,t){return p.instance.uniformMatrix3fv(e.location,!1,t),1},n._uniformMatrix4f=function(e,t){var n=t.elements;return p.instance.uniformMatrix4fv(e.location,!1,n),1},n._uniformMatrix4fv=function(e,t){return p.instance.uniformMatrix4fv(e.location,!1,t),1},n._uniform1i=function(e,t){var n=e.uploadedValue;return n[0]!==t?(p.instance.uniform1i(e.location,n[0]=t),1):0},n._uniform1iv=function(e,t){return p.instance.uniform1iv(e.location,t),1},n._uniform_ivec2=function(e,t){var n=e.uploadedValue;return n[0]!==t[0]||n[1]!==t[1]?(p.instance.uniform2i(e.location,n[0]=t[0],n[1]=t[1]),1):0},n._uniform_ivec2v=function(e,t){return p.instance.uniform2iv(e.location,t),1},n._uniform_vec3i=function(e,t){var n=e.uploadedValue;return n[0]!==t[0]||n[1]!==t[1]||n[2]!==t[2]?(p.instance.uniform3i(e.location,n[0]=t[0],n[1]=t[1],n[2]=t[2]),1):0},n._uniform_vec3vi=function(e,t){return p.instance.uniform3iv(e.location,t),1},n._uniform_vec4i=function(e,t){var n=e.uploadedValue;return n[0]!==t[0]||n[1]!==t[1]||n[2]!==t[2]||n[3]!==t[3]?(p.instance.uniform4i(e.location,n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3]),1):0},n._uniform_vec4vi=function(e,t){return p.instance.uniform4iv(e.location,t),1},n._uniform_sampler2D=function(e,t){var n=t._getSource()||t.defaulteTexture._getSource(),i=p.instance;return w.activeTexture(i,e.textureID),w.bindTexture(i,3553,n),0},n._uniform_sampler3D=function(e,t){var n=t._getSource()||t.defaulteTexture._getSource(),i=p.instance;return w.activeTexture(i,e.textureID),w.bindTexture(i,32879,n),0},n._uniform_samplerCube=function(e,t){var n=t._getSource()||t.defaulteTexture._getSource(),i=p.instance;return w.activeTexture(i,e.textureID),w.bindTexture(i,34067,n),0},n.bind=function(){return w.useProgram(p.instance,this._program)},n.uploadUniforms=function(e,t,n){C.shaderCall+=v.uploadShaderUniforms(p.instance,e,t,n)},n.uploadCustomUniform=function(e,t){C.shaderCall+=v.uploadCustomUniform(p.instance,this._customUniformParamsMap,e,t)},n._uniformMatrix2fvForNative=function(e,t){return p.instance.uniformMatrix2fvEx(e.location,!1,t),1},n._uniformMatrix3fvForNative=function(e,t){return p.instance.uniformMatrix3fvEx(e.location,!1,t),1},n._uniformMatrix4fvForNative=function(e,t){return p.instance.uniformMatrix4fvEx(e.location,!1,t),1},t}(M),Pi=function(e){function t(e,n,i,r){this._terrainHeightData=null,this._width=0,this._height=0,this._bitType=0,this._value=0/0,t.__super.call(this),this._width=e,this._height=n,this._bitType=i,this._value=r}return r(t,"laya.d3.terrain.TerrainHeightData",e),t._pharse=function(e,n,i){var r,a=new t(i[0],i[1],i[2],i[3]),o=0/0;8==a._bitType?(r=new Uint8Array(e),o=1/255):16==a._bitType&&(r=new Int16Array(e),o=1/32766),a._terrainHeightData=new Float32Array(a._height*a._width);for(var s=0,l=a._height*a._width;l>s;s++)a._terrainHeightData[s]=r[s]*o*a._value/2},t.load=function(e,t,i,r,a,o){n.loader.create(e,t,null,"TERRAINHEIGHTDATA",[i,r,a,o],null,1,!1)},t}(M),bi=(function(e){function t(){this._version=0/0,this._cameraCoordinateInverse=!1,this._gridSize=0/0,this._chunkNumX=0,this._chunkNumZ=0,this._heightDataX=0,this._heightDataZ=0,this._heightDataBitType=0,this._heightDataValue=0/0,this._heightDataUrl=null,this._detailTextureInfos=null,this._chunkInfos=null,this._heightData=null,this._materialInfo=null,this._alphaMaps=null,this._normalMaps=null,t.__super.call(this)}r(t,"laya.d3.terrain.TerrainRes",e);var i=t.prototype;return i.parseData=function(e){var t=e[0],n=e[1];if(this._version=t.version,1==this._version){this._cameraCoordinateInverse=t.cameraCoordinateInverse,this._gridSize=t.gridSize,this._chunkNumX=t.chunkNumX,this._chunkNumZ=t.chunkNumZ;var i=t.heightData;if(this._heightDataX=i.numX,this._heightDataZ=i.numZ,this._heightDataBitType=i.bitType,this._heightDataValue=i.value,this._heightDataUrl=n[i.url],this._materialInfo=new vn,t.material){var r=t.material.ambient,a=t.material.diffuse,s=t.material.specular;this._materialInfo.ambientColor=new Di(r[0],r[1],r[2]),this._materialInfo.diffuseColor=new Di(a[0],a[1],a[2]),this._materialInfo.specularColor=new Mi(s[0],s[1],s[2],s[3])}var l=t.detailTexture;this._detailTextureInfos=o(l.length);for(var h=0;h<l.length;h++){var c=l[h],_=new pn;_.diffuseTexture=n[c.diffuse],_.normalTexture=c.normal?n[c.normal]:null,_.scale=c.scale?new xi(c.scale[0],c.scale[1]):new xi(1,1),_.offset=c.offset?new xi(c.offset[0],c.offset[1]):new xi(0,0),this._detailTextureInfos[h]=_}var u=t.alphaMap;for(this._alphaMaps=o(u.length),h=0;h<this._alphaMaps.length;h++)this._alphaMaps[h]=t.alphaMap[h];var d=t.normalMap;for(this._normalMaps=o(d.length),h=0;h<this._normalMaps.length;h++)this._normalMaps[h]=t.normalMap[h];var f=t.chunkInfo;if(this._chunkNumX*this._chunkNumZ!=f.length)return alert("terrain data error"),!1;for(this._chunkInfos=o(f.length),h=0;h<f.length;h++){var m=f[h],p=new mn,v=m.alphaMap.length,T=m.detailID.length;if(v!=T)return alert("terrain chunk data error"),!1;p.alphaMap=o(v),p.detailID=o(T),p.normalMap=n[this._normalMaps[m.normalMap]];for(var g=0;v>g;g++){p.alphaMap[g]=n[this._alphaMaps[m.alphaMap[g]]];var S=m.detailID[g],x=S.length;p.detailID[g]=new Uint8Array(x);for(var D=0;x>D;D++)p.detailID[g][D]=S[D]}this._chunkInfos[h]=p}this._heightData=E.getRes(this._heightDataUrl),this.onLoadTerrainComplete(this._heightData)}return!0},i.onLoadTerrainComplete=function(){},t._parse=function(e){var n=new t;return n.parseData(e),n},t.load=function(e,t){n.loader.create(e,t,null,"TERRAIN",null,null,1,!1)},t}(M),function(e){function t(e){t.__super.call(this,e,4),this._projectionViewWorldMatrix=new Wt,e&&e.meshFilter.on("meshchanged",this,this._onMeshChanged)}r(t,"laya.d3.core.MeshRenderer",e);var n=t.prototype;return n._onMeshChanged=function(){this._onMeshLoaed()},n._onMeshLoaed=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},n._calculateBoundingSphereByInitSphere=function(e){var t=0/0,n=this._owner.transform,i=n.scale.elements,r=i[0];r||(r=-r);var a=i[1];a||(a=-a);var o=i[2];if(o||(o=-o),t=r>=a&&r>=o?r:a>=o?a:o,Di.transformCoordinate(e.center,n.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=e.radius*t,x.isConchApp){var s=this._boundingSphere.center.elements,l=At._cullingBuffer;l[this._cullingBufferIndex+1]=s[0],l[this._cullingBufferIndex+2]=s[1],l[this._cullingBufferIndex+3]=s[2],l[this._cullingBufferIndex+4]=this._boundingSphere.radius}},n._calculateBoundBoxByInitCorners=function(e){for(var t=this._owner.transform.worldMatrix,n=0;8>n;n++)Ft.createfromPoints(An._tempBoundBoxCorners,this._boundingBox);Di.transformCoordinate(e[n],t,An._tempBoundBoxCorners[n])},n._calculateBoundingSphere=function(){var e=this._owner.meshFilter.sharedMesh;null==e||null==e.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(e.boundingSphere)},n._calculateBoundingBox=function(){var e=this._owner.meshFilter.sharedMesh;null==e||null==e.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(e.boundingBoxCorners)},n._needRender=function(e){return e?0!==e.containsBoundSphere(this.boundingSphere):!0},n._renderUpdate=function(e,t){t?this._shaderValues.setMatrix4x4(yi.WORLDMATRIX,t.worldMatrix):this._shaderValues.setMatrix4x4(yi.WORLDMATRIX,Wt.DEFAULT)},n._renderUpdateWithCamera=function(e,t){var n=e.projectionViewMatrix;t?(Wt.multiply(n,t.worldMatrix,this._projectionViewWorldMatrix),this._shaderValues.setMatrix4x4(yi.MVPMATRIX,this._projectionViewWorldMatrix)):this._shaderValues.setMatrix4x4(yi.MVPMATRIX,n),Sn.debugMode&&this._renderRenderableBoundBox()},n._destroy=function(){this._isPartOfStaticBatch&&Xn.instance._destroyRenderSprite(this._owner),e.prototype._destroy.call(this)},t}(An)),Fi=function(e){function t(e){this._finalGravity=new Di,this._tempRotationMatrix=new Wt,t.__super.call(this,e,52),this._defaultBoundBox=new Ft(new Di,new Di),this._renderMode=-1,this.stretchedBillboardCameraSpeedScale=0,this.stretchedBillboardSpeedScale=0,this.stretchedBillboardLengthScale=1}r(t,"laya.d3.core.particleShuriKen.ShurikenParticleRenderer",e);var n=t.prototype;return n._calculateBoundingBox=function(){var e=this._boundingBox.min.elements;e[0]=-Number.MAX_VALUE,e[1]=-Number.MAX_VALUE,e[2]=-Number.MAX_VALUE;var t=this._boundingBox.min.elements;t[0]=Number.MAX_VALUE,t[1]=Number.MAX_VALUE,t[2]=Number.MAX_VALUE},n._calculateBoundingSphere=function(){var e=this._owner.particleSystem._boundingSphere,t=0/0,n=this._owner.transform,i=n.scale.elements,r=Math.abs(i[0]),a=Math.abs(i[1]),o=Math.abs(i[2]);if(t=r>=a&&r>=o?r:a>=o?a:o,Di.transformCoordinate(e.center,n.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=e.radius*t,x.isConchApp){var s=this._boundingSphere.center.elements,l=At._cullingBuffer;l[this._cullingBufferIndex+1]=s[0],l[this._cullingBufferIndex+2]=s[1],l[this._cullingBufferIndex+3]=s[2],l[this._cullingBufferIndex+4]=this._boundingSphere.radius}},n._needRender=function(e){return e?0!==e.containsBoundSphere(this.boundingSphere)?this._owner.particleSystem.isAlive?!0:!1:!1:!0},n._renderUpdate=function(){var e=this._owner.particleSystem,t=this._shaderValues,n=this._owner.transform;switch(e.simulationSpace){case 0:break;case 1:t.setVector(gr.WORLDPOSITION,n.position),t.setQuaternion(gr.WORLDROTATION,n.rotation);break;default:throw new Error("ShurikenParticleMaterial: SimulationSpace value is invalid.")}switch(e.scaleMode){case 0:var i=n.scale;t.setVector(gr.POSITIONSCALE,i),t.setVector(gr.SIZESCALE,i);break;case 1:var r=n.localScale;t.setVector(gr.POSITIONSCALE,r),t.setVector(gr.SIZESCALE,r);break;case 2:t.setVector(gr.POSITIONSCALE,n.scale),t.setVector(gr.SIZESCALE,Di.ONE)}Di.scale(En.gravity,e.gravityModifier,this._finalGravity),t.setVector(gr.GRAVITY,this._finalGravity),t.setInt(gr.SIMULATIONSPACE,e.simulationSpace),t.setBool(gr.THREEDSTARTROTATION,e.threeDStartRotation),t.setInt(gr.SCALINGMODE,e.scaleMode),t.setNumber(gr.STRETCHEDBILLBOARDLENGTHSCALE,this.stretchedBillboardLengthScale),t.setNumber(gr.STRETCHEDBILLBOARDSPEEDSCALE,this.stretchedBillboardSpeedScale),t.setNumber(gr.CURRENTTIME,e._currentTime),Sn.debugMode&&this._renderRenderableBoundBox()},n._destroy=function(){e.prototype._destroy.call(this),this._mesh&&(this._mesh._removeReference(),this._mesh=null)},a(0,n,"boundingBox",function(){return this._owner.particleSystem.isAlive?(this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox):this._defaultBoundBox}),a(0,n,"renderMode",function(){return this._renderMode},function(e){if(this._renderMode!==e){var t=this._defineDatas;switch(this._renderMode){case 0:t.remove(gr.SHADERDEFINE_RENDERMODE_BILLBOARD);break;case 1:t.remove(gr.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD);break;case 2:t.remove(gr.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD);break;case 3:t.remove(gr.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD);break;case 4:t.remove(gr.SHADERDEFINE_RENDERMODE_MESH)}switch(this._renderMode=e,e){case 0:t.add(gr.SHADERDEFINE_RENDERMODE_BILLBOARD);break;case 1:t.add(gr.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD);break;case 2:t.add(gr.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD);break;case 3:t.add(gr.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD);break;case 4:t.add(gr.SHADERDEFINE_RENDERMODE_MESH);break;default:throw new Error("ShurikenParticleRender: unknown renderMode Value.")}this._owner.particleSystem._initBufferDatas()}}),a(0,n,"mesh",function(){return this._mesh},function(e){this._mesh!==e&&(this._mesh&&this._mesh._removeReference(),this._mesh=e,e&&e._addReference(),this._owner.particleSystem._initBufferDatas())}),t}(An),Bi=function(e){function t(e){this._projectionViewWorldMatrix=null,t.__super.call(this,e,4),this._projectionViewWorldMatrix=new Wt}r(t,"laya.d3.core.pixelLine.PixelLineRenderer",e);var n=t.prototype;return n._calculateBoundingBox=function(){var e=this._boundingBox.min.elements;e[0]=-Number.MAX_VALUE,e[1]=-Number.MAX_VALUE,e[2]=-Number.MAX_VALUE;var t=this._boundingBox.min.elements;t[0]=Number.MAX_VALUE,t[1]=Number.MAX_VALUE,t[2]=Number.MAX_VALUE},n._calculateBoundingSphere=function(){var e=this._boundingSphere.center.elements;e[0]=0,e[1]=0,e[2]=0,this._boundingSphere.radius=Number.MAX_VALUE},n._renderUpdateWithCamera=function(e,t){var n=e.projectionViewMatrix,i=this._shaderValues;if(t){var r=t.worldMatrix;i.setMatrix4x4(yi.WORLDMATRIX,r),Wt.multiply(n,r,this._projectionViewWorldMatrix),i.setMatrix4x4(yi.MVPMATRIX,this._projectionViewWorldMatrix)}else i.setMatrix4x4(yi.WORLDMATRIX,Wt.DEFAULT),i.setMatrix4x4(yi.MVPMATRIX,n)},t}(An),Ui=function(e){function t(e){this._projectionViewWorldMatrix=new Wt,t.__super.call(this,e,4)}r(t,"laya.d3.core.trail.TrailRenderer",e);var n=t.prototype;return n._calculateBoundingBox=function(){var e=this._boundingBox.min.elements;e[0]=-Number.MAX_VALUE,e[1]=-Number.MAX_VALUE,e[2]=-Number.MAX_VALUE;var t=this._boundingBox.min.elements;t[0]=Number.MAX_VALUE,t[1]=Number.MAX_VALUE,t[2]=Number.MAX_VALUE},n._calculateBoundingSphere=function(){var e=this._boundingSphere.center.elements;e[0]=0,e[1]=0,e[2]=0,this._boundingSphere.radius=Number.MAX_VALUE},n._needRender=function(){return!0},n._renderUpdate=function(t,n){e.prototype._renderUpdate.call(this,t,n),this._owner.trailFilter._update(t)},n._renderUpdateWithCamera=function(e,t){var n=e.projectionViewMatrix;t?(Wt.multiply(n,t.worldMatrix,this._projectionViewWorldMatrix),this._shaderValues.setMatrix4x4(yi.MVPMATRIX,this._projectionViewWorldMatrix)):this._shaderValues.setMatrix4x4(yi.MVPMATRIX,n),Sn.debugMode&&this._renderRenderableBoundBox()},t}(An),Gi=function(e){function t(e){this._projectionViewWorldMatrix=null,t.__super.call(this,e,4),this._projectionViewWorldMatrix=new Wt}r(t,"laya.d3.extension.lineRender.LineRenderer",e);var n=t.prototype;return n._calculateBoundingBox=function(){var e=this._boundingBox.min.elements;e[0]=-Number.MAX_VALUE,e[1]=-Number.MAX_VALUE,e[2]=-Number.MAX_VALUE;var t=this._boundingBox.min.elements;t[0]=Number.MAX_VALUE,t[1]=Number.MAX_VALUE,t[2]=Number.MAX_VALUE},n._calculateBoundingSphere=function(){var e=this._boundingSphere.center.elements;e[0]=0,e[1]=0,e[2]=0,this._boundingSphere.radius=Number.MAX_VALUE},n._renderUpdateWithCamera=function(e,t){var n=e.projectionViewMatrix,i=this._shaderValues;if(t){var r=t.worldMatrix;i.setMatrix4x4(yi.WORLDMATRIX,r),Wt.multiply(n,r,this._projectionViewWorldMatrix),i.setMatrix4x4(yi.MVPMATRIX,this._projectionViewWorldMatrix)}else i.setMatrix4x4(yi.WORLDMATRIX,Wt.DEFAULT),i.setMatrix4x4(yi.MVPMATRIX,n)},t}(An),Hi=function(e){function t(e){this._terrainSprite3DOwner=null,this._projectionViewWorldMatrix=null,t.__super.call(this,e,4),this._terrainSprite3DOwner=e,this._projectionViewWorldMatrix=new Wt}r(t,"laya.d3.terrain.TerrainRender",e);var n=t.prototype;return n._calculateBoundingSphere=function(){var e=this._terrainSprite3DOwner.terrainFilter;if(null==e)this._boundingSphere.toDefault();else{var t=e._boundingSphere,n=0/0,i=this._terrainSprite3DOwner.transform,r=i.scale;if(n=r.x>=r.y&&r.x>=r.z?r.x:r.y>=r.z?r.y:r.z,Di.transformCoordinate(t.center,i.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=t.radius*n,e.calcLeafBoudingSphere(i.worldMatrix,n),x.isConchApp){var a=this._boundingSphere.center.elements,o=At._cullingBuffer;o[this._cullingBufferIndex+1]=a[0],o[this._cullingBufferIndex+2]=a[1],o[this._cullingBufferIndex+3]=a[2],o[this._cullingBufferIndex+4]=this._boundingSphere.radius}}},n._needRender=function(e){return e?0!==e.containsBoundSphere(this.boundingSphere):!0},n._calculateBoundingBox=function(){var e=this._terrainSprite3DOwner.terrainFilter;if(null==e)this._boundingBox.toDefault();else{for(var t=this._terrainSprite3DOwner.transform.worldMatrix,n=e._boundingBoxCorners,i=0;8>i;i++)Di.transformCoordinate(n[i],t,An._tempBoundBoxCorners[i]);Ft.createfromPoints(An._tempBoundBoxCorners,this._boundingBox),e.calcLeafBoudingBox(t)}},n._renderUpdate=function(e,t){this._shaderValues.setMatrix4x4(yi.WORLDMATRIX,t.worldMatrix)},n._renderUpdateWithCamera=function(e,t){var n=e.projectionViewMatrix;Wt.multiply(n,t.worldMatrix,this._projectionViewWorldMatrix),this._shaderValues.setMatrix4x4(yi.MVPMATRIX,this._projectionViewWorldMatrix)},n._destroy=function(){e.prototype._destroy.call(this),this._terrainSprite3DOwner=null},t}(An),zi=(function(e){function t(e,n,i,r){this._maxSlope=45,this._jumpSpeed=10,this._fallSpeed=55,this._upAxis=new Di(0,1,0),this._gravity=new Di(0,-10,0),void 0===e&&(e=.1),void 0===i&&(i=1),void 0===r&&(r=En.COLLISIONFILTERGROUP_ALLFILTER),this._stepHeight=e,n&&(this._upAxis=n),t.__super.call(this,i,r)}r(t,"laya.d3.physics.CharacterController",e);var n=t.prototype;return n._constructCharacter=function(){var e=Sn._physics3D;this._nativeKinematicCharacter&&e.destroy(this._nativeKinematicCharacter);var n=t._nativeTempVector30;n.setValue(this._upAxis.x,this._upAxis.y,this._upAxis.z),this._nativeKinematicCharacter=new e.btKinematicCharacterController(this._nativeColliderObject,this._colliderShape._nativeShape,this._stepHeight,n),this.fallSpeed=this._fallSpeed,this.maxSlope=this._maxSlope,this.jumpSpeed=this._jumpSpeed,this.gravity=this._gravity},n._onAdded=function(){var t=Sn._physics3D,n=new t.btPairCachingGhostObject;n.setUserIndex(this.id),n.setCollisionFlags(16),this._nativeColliderObject=n,this._colliderShape&&this._constructCharacter(),e.prototype._onAdded.call(this)},n._addToSimulation=function(){this._simulation._characters.push(this),this._simulation._addCharacter(this,this._collisionGroup,this._canCollideWith)},n._removeFromSimulation=function(){this._simulation._removeCharacter(this);var e=this._simulation._characters;e.splice(e.indexOf(this),1)},n._onDestroy=function(){Sn._physics3D.detroy(this._nativeKinematicCharacter),e.prototype._onDestroy.call(this),this._nativeKinematicCharacter=null},n.move=function(e){var t=e.elements,n=Cn._nativeVector30;n.setValue(-t[0],t[1],t[2]),this._nativeKinematicCharacter.setWalkDirection(n)},n.jump=function(){this._nativeKinematicCharacter.jump()},a(0,n,"fallSpeed",function(){return this._fallSpeed},function(e){this._fallSpeed=e,this._nativeKinematicCharacter.setFallSpeed(e)}),a(0,n,"stepHeight",function(){return this._stepHeight},function(e){this._stepHeight=e,this._constructCharacter()}),a(0,n,"jumpSpeed",function(){return this._jumpSpeed},function(e){this._jumpSpeed=e,this._nativeKinematicCharacter.setJumpSpeed(e)}),a(0,n,"gravity",function(){return this._gravity},function(e){this._gravity=e;var n=t._nativeTempVector30;n.setValue(-e.x,e.y,e.z),this._nativeKinematicCharacter.setGravity(n)}),a(0,n,"maxSlope",function(){return this._maxSlope},function(e){this._maxSlope=e,this._nativeKinematicCharacter.setMaxSlope(e/180*Math.PI)}),a(0,n,"isGrounded",function(){return this._nativeKinematicCharacter.onGround()}),a(0,n,"upAxis",function(){return this._upAxis},function(e){this._upAxis=e,this._constructCharacter()}),a(0,n,"colliderShape",e.prototype._$get_colliderShape,function(e){var t=this._colliderShape;if(t&&(t._attatched=!1,t._attatchedCollisionObject=null),this._colliderShape=e,e){if(e._attatched)throw"PhysicsComponent: this shape has attatched to other entity.";e._attatched=!0,e._attatchedCollisionObject=this,this._nativeColliderObject&&(this._nativeColliderObject.setCollisionShape(e._nativeShape),this._constructCharacter(),this._simulation&&this._enabled&&(t&&this._removeFromSimulation(),this._derivePhysicsTransformation(this._nativeColliderObject.getWorldTransform()),this._addToSimulation()),this._onShapeChange(e))}else this._simulation&&this._enabled&&t&&this._removeFromSimulation()}),t.UPAXIS_X=0,t.UPAXIS_Y=1,t.UPAXIS_Z=2,i(t,["_nativeTempVector30",function(){return this._nativeTempVector30=new Sn._physics3D.btVector3(0,0,0)}]),t}(Cn),function(e){function t(e,n){this._isTrigger=!1,t.__super.call(this,e,n)}r(t,"laya.d3.physics.PhysicsTriggerComponent",e);var n=t.prototype;return n._onAdded=function(){e.prototype._onAdded.call(this),this.isTrigger=this._isTrigger},a(0,n,"isTrigger",function(){return this._isTrigger},function(e){if(this._isTrigger=e,this._nativeColliderObject&&this._enabled&&e){var t=this._nativeColliderObject.getCollisionFlags();0===(4&t)&&this._nativeColliderObject.setCollisionFlags(4|t)}}),t}(Cn)),ki=function(e){function t(){this._reflectionMode=1,this._enableLightCount=3,this._layerList=[],this.enableLight=!0,this._time=0,t.__super.call(this),this._lights=[],this._collsionTestList=[],this._renders=new W,this._opaqueQueue=new gt(!1),this._transparentQueue=new gt(!0),this._cameraPool=[],this._animatorPool=new W,this._scriptPool=new W,this._castShadowRendersPool=new W,this.timer=n.sceneTimer,this._key=new y,this._pickIdToSprite=new Object,x.isConchApp&&(this._glCommandEncoder=p.instance.createCommandEncoder(102400,2560,!1),this._conchData._int32Data[26]=this._glCommandEncoder.getPtrID(),this._renderType|=1024,this._setRenderType(this._renderType),this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._conchData._int32Data[54]=this._callbackFuncObj.id,this._callbackFuncObj.addCallbackFunc(3,this.renderCallbackFromNative.bind(this)),this._conchData._int32Data[62]=3),Sn._enbalePhysics&&(this._physicsSimulation=new tn(Sn.physicsSettings)),this._lightmaps=[],this._defineDatas=new on,this._shaderValues=new ln(null,22),this.parallelSplitShadowMaps=[],this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new Di(.7,.7,.7),this.ambientColor=new Di(.212,.227,.259),this.reflectionIntensity=1,V.shaderHighPrecision&&this._defineDatas.add(sn.SHADERDEFINE_HIGHPRECISION),this._initLayer(),x.isConchApp&&(this._cullingBufferIndices=new Int32Array(1024),this._cullingBufferResult=new Int32Array(1024));var e=gn._buildTexture2D(1024,1,2,an.lightAttenTexture);e.wrapModeU=1,e.wrapModeV=1,this._shaderValues.setTexture(26,e),this._scene=this}r(t,"laya.d3.core.scene.Scene3D",e);var i=t.prototype;return n.imps(i,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),i._allotPickColorByID=function(e,t){var n=Math.floor(e/65025);e-=255*n*255;var i=Math.floor(e/255);e-=255*i;var r=e,a=t.elements;a[0]=n/255,a[1]=i/255,a[2]=r/255,a[3]=1},i._searchIDByPickColor=function(e){var t=e.elements,n=255*t[0]*255+255*t[1]+t[2];return n},i._setLightmapToChildNode=function(e){e instanceof laya.d3.core.RenderableSprite3D&&e._render._applyLightMapParams();for(var t=e._children,n=0,i=t.length;i>n;n++)this._setLightmapToChildNode(t[n])},i._update=function(){this._updateScript(),xn._update(this),this._lateUpdateScript();var e=this.timer._delta/1e3;this._time+=e,this._shaderValues.setNumber(24,this._time);var t=this._physicsSimulation;Sn._enbalePhysics&&!tn.disableSimulation&&(t._updateDynamicPhysicsColliders(),t._simulate(e),t._updateCharacters(),t._updateCollisions(),t._eventScripts())},i._initLayer=function(){this._layerList.length=31;for(var e=0;31>e;e++){var t=new q(this);this._layerList[e]=t,t.name=0===e?"Default Layer":"Layer-"+e,t._number=e,t._mask=Math.pow(2,e)
}this.currentCreationLayer=this._layerList[0]},i._binarySearchIndexInCameraPool=function(e){for(var t=0,n=this._cameraPool.length-1,i=0;n>=t;){i=Math.floor((t+n)/2);var r=this._cameraPool[i]._renderingOrder;if(r==e._renderingOrder)return i;r>e._renderingOrder?n=i-1:t=i+1}return t},i._setUrl=function(e){this._url=e},i._getGroup=function(){return this._group},i._setGroup=function(e){this._group=e},i._updateScript=function(){for(var e=this._scriptPool,t=e.elements,n=0,i=e.length;i>n;n++){var r=t[n];r&&r.enabled&&r.onUpdate()}},i._lateUpdateScript=function(){for(var e=this._scriptPool,t=e.elements,n=0,i=e.length;i>n;n++){var r=t[n];r&&r.enabled&&r.onLateUpdate()}},i._preRenderScript=function(){for(var e=this._scriptPool,t=e.elements,n=0,i=e.length;i>n;n++){var r=t[n];r&&r.enabled&&r.onPreRender()}},i._postRenderScript=function(){for(var e=this._scriptPool,t=e.elements,n=0,i=e.length;i>n;n++){var r=t[n];r&&r.enabled&&r.onPostRender()}},i.initOctree=function(e,t,n,i,r){void 0===r&&(r=6),this.treeSize=new Di(e,t,n),this.treeLevel=r,this.treeRoot=new St(this,0),this.treeRoot.init(i,this.treeSize)},i._prepareSceneToRender=function(){var e=this._lights.length;if(e>0)for(var t=0,n=0;e>n&&!(this._lights[n]._prepareToScene()&&(t++,t>=this._enableLightCount));n++);},i._addCamera=function(e){var t=this._binarySearchIndexInCameraPool(e);this._cameraPool.splice(t,0,e)},i._removeCamera=function(e){var t=this._binarySearchIndexInCameraPool(e);this._cameraPool.splice(t,1)},i._preCulling=function(e,t){t.useOcclusionCulling?At.renderObjectCulling(t,this,e,this._renders):At.renderObjectCulling(null,this,e,this._renders)},i._clear=function(e,t){var n=t.viewport,i=t.camera,r=i.renderTarget,a=n.width,o=n.height,s=n.x,l=i._canvasHeight-n.y-o;e.viewport(s,l,a,o);var h=256;switch(i.clearFlag){case 0:var c=i.clearColor;if(c){e.enable(3089),e.scissor(s,l,a,o);var _=c.elements;e.clearColor(_[0],_[1],_[2],_[3]),h|=16384}if(r)switch(c||(h=16384),r.depthStencilFormat){case 0:h|=256;break;case 1:h|=1024;break;case 2:h|=256,h|=1024}e.clear(h),c&&e.disable(3089);break;case 1:case 2:if(r)switch(h=16384,r.depthStencilFormat){case 0:h|=256;break;case 1:h|=1024;break;case 2:h|=256,h|=1024}e.clear(h);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},i._renderScene=function(e,t,n){{var i=t.camera;i.transform.position}if(i.renderTarget?this._opaqueQueue._render(t,!0,n):this._opaqueQueue._render(t,!1,n),1===i.clearFlag){var r=i.skyboxMaterial||this._skyboxMaterial;if(r){w.setCullFace(e,!1),w.setDepthFunc(e,515),w.setDepthMask(e,!1);var a=t.shader=r._shader._passes[0].withCompile(0,0,0),o=a.bind()||C.loopCount!==a._uploadLoopCount,s=rn._instance;(a._uploadMaterial!==r||o)&&(a.uploadUniforms(a._materialUniformParamsMap,r._shaderValues,!0),a._uploadMaterial=r),(i!==a._uploadCamera||o)&&(a.uploadUniforms(a._cameraUniformParamsMap,i._shaderValues,!0),a._uploadCamera=i),s._bufferState.bindBufferState(),s._render(t),w.setDepthFunc(e,513),w.setDepthMask(e,!0)}}i.renderTarget?this._transparentQueue._render(t,!0,n):this._transparentQueue._render(t,!1,n)},i._set2DRenderConfig=function(e){w.setBlend(e,!0),w.setBlendFunc(e,1,771),w.setDepthTest(e,!1),w.setCullFace(e,!1),w.setDepthMask(e,!0),w.setFrontFace(e,2305),e.viewport(0,0,D.width,D.height)},i._parse=function(e,t){var n=e.lightmaps,i=n.length,r=this._lightmaps;r.length=i;for(var a=0;i>a;a++)r[a]=E.getRes(t[n[a].path]);this.setlightmaps(r);var o=e.ambientColor;if(o){var s=this.ambientColor;s.fromArray(o),this.ambientColor=s}var l=e.skyboxMaterial;l&&(this.skyboxMaterial=E.getRes(t[l.path]));var h=e.reflectionTexture;h&&(this.customReflection=E.getRes(t[h])),this.enableFog=e.enableFog,this.fogStart=e.fogStart,this.fogRange=e.fogRange;var c=e.fogColor;if(c){var _=this.fogColor;_.fromArray(c),this.fogColor=_}},i._onActive=function(){laya.display.Node.prototype._onActive.call(this)},i._addLight=function(e){this._lights.indexOf(e)<0&&this._lights.push(e)},i._removeLight=function(e){var t=this._lights.indexOf(e);t>=0&&this._lights.splice(t,1)},i.isLayerVisible=function(e,t){var n=this._layerList[e]._mask;return 0!=(n&t.cullingMask)},i._getLayer=function(e){return this._layerList[e]},i.addTreeNode=function(e){this.treeRoot.addTreeNode(e)},i.removeTreeNode=function(e){this.treeSize&&e._treeNode&&e._treeNode.removeObject(e)},i._addRenderObject=function(e){if(this.treeRoot)this.addTreeNode(e);else if(this._renders.add(e),x.isConchApp){var t=e._getIndexInList(),n=this._cullingBufferIndices.length;if(t>=n){var i=this._cullingBufferIndices,r=this._cullingBufferResult;this._cullingBufferIndices=new Int32Array(n+1024),this._cullingBufferResult=new Int32Array(n+1024),this._cullingBufferIndices.set(i,0),this._cullingBufferResult.set(r,0)}this._cullingBufferIndices[t]=e._cullingBufferIndex}},i._removeRenderObject=function(e){if(this.treeRoot)this.removeTreeNode(e);else{var t;x.isConchApp&&(t=this._renders.elements[this._renders.length-1]),this._renders.remove(e),x.isConchApp&&(this._cullingBufferIndices[t._getIndexInList()]=t._cullingBufferIndex)}},i._addShadowCastRenderObject=function(e){this.treeRoot?this.addTreeNode(e):this._castShadowRendersPool.add(e)},i._removeShadowCastRenderObject=function(e){this.treeRoot?this.removeTreeNode(e):this._castShadowRendersPool.remove(e)},i._getRenderQueue=function(e){return 3e3>e?this._opaqueQueue:this._transparentQueue},i.setlightmaps=function(e){this._lightmaps=e;for(var t=0,n=this._children.length;n>t;t++)this._setLightmapToChildNode(this._children[t])},i.getlightmaps=function(){return this._lightmaps},i.destroy=function(t){void 0===t&&(t=!0),this.destroyed||(e.prototype.destroy.call(this,t),this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._renders=null,this._castShadowRendersPool=null,this._cameraPool=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._physicsSimulation&&this._physicsSimulation._destroy(),E.clearRes(this.url),Sn._cancelLoadByUrl(this.url))},i.render=function(e){this._children.length>0&&e.addRenderObject(this),this._update()},i.renderSubmit=function(){var e=p.instance;x.isConchApp&&(this._glCommandEncoder&&this._glCommandEncoder.clearEncoding(),e.beginCommandEncoding(this._glCommandEncoder)),this._prepareSceneToRender();var t=0,n=0;for(t=0,n=this._cameraPool.length;n>t;t++)this._cameraPool[t].render();return x.isConchApp&&(e.endCommandEncoding(),h._bindedVertexBuffer=null,h._bindedIndexBuffer=null),this._set2DRenderConfig(e),1},i.getRenderType=function(){return 0},i.releaseRender=function(){},i.reUse=function(){return 0},i.renderCallbackFromNative=function(){this._update(),this.renderSubmit()},i.renderToNative=function(e){e.gl.block(this._conchData)},a(0,i,"fogColor",function(){return this._shaderValues.getVector(0)},function(e){this._shaderValues.setVector(0,e)}),a(0,i,"enableFog",function(){return this._enableFog},function(e){this._enableFog!==e&&(this._enableFog=e,e?this._defineDatas.add(laya.d3.core.scene.Scene3D.SHADERDEFINE_FOG):this._defineDatas.remove(laya.d3.core.scene.Scene3D.SHADERDEFINE_FOG))}),a(0,i,"url",function(){return this._url}),a(0,i,"fogStart",function(){return this._shaderValues.getNumber(1)},function(e){this._shaderValues.setNumber(1,e)}),a(0,i,"reflectionIntensity",function(){return this._shaderValues.getNumber(23)},function(e){e=Math.max(Math.min(e,1),0),this._shaderValues.setNumber(23,e)}),a(0,i,"fogRange",function(){return this._shaderValues.getNumber(2)},function(e){this._shaderValues.setNumber(2,e)}),a(0,i,"skyboxMaterial",function(){return this._skyboxMaterial},function(e){this._skyboxMaterial!==e&&(this._skyboxMaterial&&this._skyboxMaterial._removeReference(),e._addReference(),this._skyboxMaterial=e)}),a(0,i,"ambientColor",function(){return this._shaderValues.getVector(21)},function(e){this._shaderValues.setVector(21,e)}),a(0,i,"customReflection",function(){return this._shaderValues.getTexture(22)},function(e){this._shaderValues.setTexture(22,e),e?this._defineDatas.add(laya.d3.core.scene.Scene3D.SHADERDEFINE_REFLECTMAP):this._defineDatas.remove(laya.d3.core.scene.Scene3D.SHADERDEFINE_REFLECTMAP)}),a(0,i,"physicsSimulation",function(){return this._physicsSimulation}),a(0,i,"reflectionMode",function(){return this._reflectionMode},function(e){this._reflectionMode=e}),t._parse=function(e){var t=e[0].data,n=e[1],i=[],r=gn._createNodeByJson(t,n,i);return Rt.combine(null,i),r},t.load=function(e,t){n.loader.create(e,t,null,"HIERARCHY")},t.REFLECTIONMODE_SKYBOX=0,t.REFLECTIONMODE_CUSTOM=1,t.SHADERDEFINE_FOG=0,t.SHADERDEFINE_DIRECTIONLIGHT=0,t.SHADERDEFINE_POINTLIGHT=0,t.SHADERDEFINE_SPOTLIGHT=0,t.SHADERDEFINE_CAST_SHADOW=0,t.SHADERDEFINE_SHADOW_PSSM1=0,t.SHADERDEFINE_SHADOW_PSSM2=0,t.SHADERDEFINE_SHADOW_PSSM3=0,t.SHADERDEFINE_SHADOW_PCF_NO=0,t.SHADERDEFINE_SHADOW_PCF1=0,t.SHADERDEFINE_SHADOW_PCF2=0,t.SHADERDEFINE_SHADOW_PCF3=0,t.SHADERDEFINE_REFLECTMAP=0,t.FOGCOLOR=0,t.FOGSTART=1,t.FOGRANGE=2,t.LIGHTDIRECTION=3,t.LIGHTDIRCOLOR=4,t.POINTLIGHTPOS=5,t.POINTLIGHTRANGE=6,t.POINTLIGHTATTENUATION=7,t.POINTLIGHTCOLOR=8,t.SPOTLIGHTPOS=9,t.SPOTLIGHTDIRECTION=10,t.SPOTLIGHTSPOTANGLE=11,t.SPOTLIGHTRANGE=12,t.SPOTLIGHTCOLOR=14,t.SHADOWDISTANCE=15,t.SHADOWLIGHTVIEWPROJECT=16,t.SHADOWMAPPCFOFFSET=17,t.SHADOWMAPTEXTURE1=18,t.SHADOWMAPTEXTURE2=19,t.SHADOWMAPTEXTURE3=20,t.AMBIENTCOLOR=21,t.REFLECTIONTEXTURE=22,t.REFLETIONINTENSITY=23,t.TIME=24,t.ANGLEATTENUATIONTEXTURE=25,t.RANGEATTENUATIONTEXTURE=26,t.POINTLIGHTMATRIX=27,t.SPOTLIGHTMATRIX=28,t}(I),Wi=function(e){function t(e,i){t.__super.call(this),void 0===e&&(e=.3),void 0===i&&(i=1e3),this._shaderValues=new ln(null,14),this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=e,this._farPlane=i,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),n.stage.on("resize",this,this._onScreenSizeChanged)}r(t,"laya.d3.core.BaseCamera",e);var o=t.prototype;return o._sortCamerasByRenderingOrder=function(){if(this.displayedInStage)for(var e=this.scene._cameraPool,t=e.length-1,n=0;t>n;n++)if(e[n].renderingOrder>e[t].renderingOrder){var i=e[n];e[n]=e[t],e[t]=i}},o._calculateProjectionMatrix=function(){},o._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},o._prepareCameraToRender=function(){var e=this._shaderValues;e.setVector(0,this.transform.position),e.setVector(5,this.transform.forward),e.setVector(6,this.transform.up)},o._prepareCameraViewProject=function(e,n,i){var r=this._shaderValues;r.setMatrix4x4(1,e),r.setMatrix4x4(2,n),this.transform.worldMatrix.cloneTo(t._tempMatrix4x40),t._tempMatrix4x40.transpose(),Wt.multiply(n,t._tempMatrix4x40,i),r.setMatrix4x4(4,i)},o.render=function(){},o.addLayer=function(e){this.cullingMask=this.cullingMask|e._mask},o.removeLayer=function(e){this.cullingMask=this.cullingMask&~e._mask},o.addAllLayers=function(){this.cullingMask=2147483647},o.removeAllLayers=function(){this.cullingMask=0},o.resetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},o._onActive=function(){this._scene._addCamera(this)},o._onInActive=function(){this._scene._removeCamera(this)},o._parse=function(t,n){e.prototype._parse.call(this,t,n);var i=t.clearFlag;void 0!==i&&(this.clearFlag=i),this.orthographic=t.orthographic,this.fieldOfView=t.fieldOfView,this.nearPlane=t.nearPlane,this.farPlane=t.farPlane;var r=t.clearColor;this.clearColor=new Mi(r[0],r[1],r[2],r[3]);var a=t.skyboxMaterial;a&&(this._skyboxMaterial=E.getRes(n[a.path]))},o.destroy=function(t){void 0===t&&(t=!0),this._skyboxMaterial&&this._skyboxMaterial._removeReference(),this._skyboxMaterial=null,this.renderTarget=null,n.stage.off("resize",this,this._onScreenSizeChanged),e.prototype.destroy.call(this,t)},a(0,o,"skyboxMaterial",function(){return this._skyboxMaterial},function(e){this._skyboxMaterial!==e&&(this._skyboxMaterial&&this._skyboxMaterial._removeReference(),e._addReference(),this._skyboxMaterial=e)}),a(0,o,"farPlane",function(){return this._farPlane},function(e){this._farPlane=e,this._calculateProjectionMatrix()}),a(0,o,"renderTarget",function(){return this._renderTarget},function(e){this._renderTarget!==e&&(this._renderTarget=e,this._calculateProjectionMatrix())}),a(0,o,"orthographic",function(){return this._orthographic},function(e){this._orthographic=e,this._calculateProjectionMatrix()}),a(0,o,"fieldOfView",function(){return this._fieldOfView},function(e){this._fieldOfView=e,this._calculateProjectionMatrix()}),a(0,o,"nearPlane",function(){return this._nearPlane},function(e){this._nearPlane=e,this._calculateProjectionMatrix()}),a(0,o,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(e){this._orthographicVerticalSize=e,this._calculateProjectionMatrix()}),a(0,o,"renderingOrder",function(){return this._renderingOrder},function(e){this._renderingOrder=e,this._sortCamerasByRenderingOrder()}),t.CAMERAPOS=0,t.VIEWMATRIX=1,t.PROJECTMATRIX=2,t.VPMATRIX=3,t.VPMATRIX_NO_TRANSLATE=4,t.CAMERADIRECTION=5,t.CAMERAUP=6,t.ENVIRONMENTDIFFUSE=7,t.ENVIRONMENTSPECULAR=8,t.SIMLODINFO=9,t.DIFFUSEIRRADMATR=10,t.DIFFUSEIRRADMATG=11,t.DIFFUSEIRRADMATB=12,t.HDREXPOSURE=13,t.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",t.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",t.CLEARFLAG_SOLIDCOLOR=0,t.CLEARFLAG_SKY=1,t.CLEARFLAG_DEPTHONLY=2,t.CLEARFLAG_NONE=3,i(t,["_tempMatrix4x40",function(){return this._tempMatrix4x40=new Wt},"_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new Wt(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new Wt},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new Wt}]),t}(yi),Xi=function(e){function t(){this._intensityColor=null,this._intensity=0/0,this._shadow=!1,this._shadowFarPlane=0,this._shadowMapSize=0,this._shadowMapCount=0,this._shadowMapPCFType=0,this._parallelSplitShadowMap=null,this._lightmapBakedType=0,this.color=null,t.__super.call(this),this._intensity=1,this._intensityColor=new Di,this.color=new Di(1,1,1),this._shadow=!1,this._shadowFarPlane=8,this._shadowMapSize=512,this._shadowMapCount=1,this._shadowMapPCFType=0,this._lightmapBakedType=t.LIGHTMAPBAKEDTYPE_REALTIME}r(t,"laya.d3.core.light.LightSprite",e);var n=t.prototype;return n._parse=function(t,n){e.prototype._parse.call(this,t,n);var i=t.color;this.color.fromArray(i),this.intensity=t.intensity,this.lightmapBakedType=t.lightmapBakedType},n._onActive=function(){this.lightmapBakedType!==t.LIGHTMAPBAKEDTYPE_BAKED&&this._scene._addLight(this)},n._onInActive=function(){this.lightmapBakedType!==t.LIGHTMAPBAKEDTYPE_BAKED&&this._scene._removeLight(this)},n._prepareToScene=function(){return!1},a(0,n,"lightmapBakedType",function(){return this._lightmapBakedType},function(e){this._lightmapBakedType!==e&&(this._lightmapBakedType=e,this.activeInHierarchy&&(e!==t.LIGHTMAPBAKEDTYPE_BAKED?this._scene._addLight(this):this._scene._removeLight(this)))}),a(0,n,"shadowPCFType",function(){return this._shadowMapPCFType},function(e){this._shadowMapPCFType=e,this._parallelSplitShadowMap&&this._parallelSplitShadowMap.setPCFType(e)}),a(0,n,"intensity",function(){return this._intensity},function(e){this._intensity=e}),a(0,n,"shadow",function(){return this._shadow},function(){throw new Error("LightSprite: must override it.")}),a(0,n,"shadowDistance",function(){return this._shadowFarPlane},function(e){this._shadowFarPlane=e,this._parallelSplitShadowMap&&this._parallelSplitShadowMap.setFarDistance(e)}),a(0,n,"shadowPSSMCount",function(){return this._shadowMapCount},function(e){this._shadowMapCount=e,this._parallelSplitShadowMap&&(this._parallelSplitShadowMap.shadowMapCount=e)}),a(0,n,"shadowResolution",function(){return this._shadowMapSize},function(e){this._shadowMapSize=e,this._parallelSplitShadowMap&&this._parallelSplitShadowMap.setShadowMapTextureSize(e)}),a(0,n,"diffuseColor",function(){return console.log("LightSprite: discard property,please use color property instead."),this.color},function(e){console.log("LightSprite: discard property,please use color property instead."),this.color=e}),t.LIGHTMAPBAKEDTYPE_REALTIME=0,t.LIGHTMAPBAKEDTYPE_MIXED=1,t.LIGHTMAPBAKEDTYPE_BAKED=2,t}(yi),Yi=function(e){function t(e){this.pickColor=null,this._render=null,t.__super.call(this,e)}r(t,"laya.d3.core.RenderableSprite3D",e);var n=t.prototype;return n._onInActive=function(){var e=this._scene;e._removeRenderObject(this._render),this._render.castShadow&&e._removeShadowCastRenderObject(this._render)},n._onActive=function(){laya.display.Node.prototype._onActive.call(this);var e=this._scene;e._addRenderObject(this._render),this._render.castShadow&&e._addShadowCastRenderObject(this._render)},n._onActiveInScene=function(){if(laya.display.Node.prototype._onActiveInScene.call(this),Sn._editerEnvironment){var e=this._scene,t=new Mi;e._allotPickColorByID(this.id,t),e._pickIdToSprite[this.id]=this,this._render._shaderValues.setVector(laya.d3.core.RenderableSprite3D.PICKCOLOR,t)}},n._addToInitStaticBatchManager=function(){},n._setBelongScene=function(e){laya.display.Node.prototype._setBelongScene.call(this,e),this._render._setBelongScene(e)},n._setUnBelongScene=function(){this._render._defineDatas.remove(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),laya.display.Node.prototype._setUnBelongScene.call(this)},n._changeHierarchyAnimator=function(t){if(this._hierarchyAnimator){var n=this._hierarchyAnimator._renderableSprites;n.splice(n.indexOf(this),1)}t&&t._renderableSprites.push(this),e.prototype._changeHierarchyAnimator.call(this,t)},n.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._render._destroy(),this._render=null},t.__init__=function(){t.SHADERDEFINE_RECEIVE_SHADOW=t.shaderDefines.registerDefine("RECEIVESHADOW"),t.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=t.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),t.SAHDERDEFINE_LIGHTMAP=t.shaderDefines.registerDefine("LIGHTMAP"),t.LIGHTMAPSCALEOFFSET=t.shaderUniforms.registerUniform(),t.LIGHTMAP=t.shaderUniforms.registerUniform(),t.PICKCOLOR=t.shaderUniforms.registerUniform()},t.SHADERDEFINE_RECEIVE_SHADOW=0,t.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=0,t.SAHDERDEFINE_LIGHTMAP=0,t.LIGHTMAPSCALEOFFSET=0,t.LIGHTMAP=0,t.PICKCOLOR=0,i(t,["shaderDefines",function(){return this.shaderDefines=new hn},"shaderUniforms",function(){return this.shaderUniforms=new _n(yi.shaderUniforms)}]),t}(yi),Zi=function(e){function t(){t.__super.call(this,12),this.setShaderName("BLINNPHONG"),this._albedoIntensity=1,this._albedoColor=new Mi(1,1,1,1);var e=this._shaderValues;e.setVector(5,new Mi(1,1,1,1)),e.setVector(6,new Mi(1,1,1,1)),e.setNumber(7,.078125),e.setNumber(0,.5),e.setVector(8,new Mi(1,1,0,0)),this._enableLighting=!0,this.renderMode=0}r(t,"laya.d3.core.material.BlinnPhongMaterial",e);var n=t.prototype;return n.disableFog=function(){this._disablePublicDefineDatas.add(ki.SHADERDEFINE_FOG)},n.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var n=t;n._enableLighting=this._enableLighting,n._albedoIntensity=this._albedoIntensity,this._albedoColor.cloneTo(n._albedoColor)},a(0,n,"_SpecColorG",function(){return this._shaderValues.getVector(6).elements[1]},function(e){this._shaderValues.getVector(6).elements[1]=e}),a(0,n,"_ColorB",function(){return this._albedoColor.elements[2]},function(e){this._albedoColor.elements[2]=e,this.albedoColor=this._albedoColor}),a(0,n,"_ColorR",function(){return this._albedoColor.elements[0]},function(e){this._albedoColor.elements[0]=e,this.albedoColor=this._albedoColor}),a(0,n,"albedoColorA",function(){return this._ColorA},function(e){this._ColorA=e}),a(0,n,"_MainTex_STX",function(){return this._shaderValues.getVector(8).elements[0]},function(e){var t=this._shaderValues.getVector(8);t.elements[0]=e,this.tilingOffset=t}),a(0,n,"_SpecColorB",function(){return this._shaderValues.getVector(6).elements[2]},function(e){this._shaderValues.getVector(6).elements[2]=e}),a(0,n,"renderMode",null,function(e){var t=this.getRenderState();switch(e){case 0:this.alphaTest=!1,this.renderQueue=2e3,t.depthWrite=!0,t.cull=2,t.blend=0,t.depthTest=513;break;case 1:this.renderQueue=2450,this.alphaTest=!0,t.depthWrite=!0,t.cull=2,t.blend=0,t.depthTest=513;break;case 2:this.renderQueue=3e3,this.alphaTest=!1,t.depthWrite=!1,t.cull=2,t.blend=1,t.srcBlend=770,t.dstBlend=771,t.depthTest=513;break;default:throw new Error("Material:renderMode value error.")}}),a(0,n,"_SpecColorR",function(){return this._shaderValues.getVector(6).elements[0]},function(e){this._shaderValues.getVector(6).elements[0]=e}),a(0,n,"_ColorG",function(){return this._albedoColor.elements[1]},function(e){this._albedoColor.elements[1]=e,this.albedoColor=this._albedoColor}),a(0,n,"_ColorA",function(){return this._albedoColor.elements[3]},function(e){this._albedoColor.elements[3]=e,this.albedoColor=this._albedoColor}),a(0,n,"specularColor",function(){return this._shaderValues.getVector(6)},function(e){this._shaderValues.setVector(6,e)}),a(0,n,"albedoColorB",function(){return this._ColorB},function(e){this._ColorB=e}),a(0,n,"_SpecColorA",function(){return this._shaderValues.getVector(6).elements[3]},function(e){this._shaderValues.getVector(6).elements[3]=e}),a(0,n,"_MainTex_STZ",function(){return this._shaderValues.getVector(8).elements[2]},function(e){var t=this._shaderValues.getVector(8);t.elements[2]=e,this.tilingOffset=t}),a(0,n,"_AlbedoIntensity",function(){return this._albedoIntensity},function(e){if(this._albedoIntensity!==e){var t=this._shaderValues.getVector(5);Mi.scale(this._albedoColor,e,t),this._albedoIntensity=e,this._shaderValues.setVector(5,t)}}),a(0,n,"specularColorA",function(){return this._SpecColorA},function(e){this._SpecColorA=e}),a(0,n,"_Shininess",function(){return this._shaderValues.getNumber(7)},function(e){e=Math.max(0,Math.min(1,e)),this._shaderValues.setNumber(7,e)}),a(0,n,"_MainTex_STY",function(){return this._shaderValues.getVector(8).elements[1]},function(e){var t=this._shaderValues.getVector(8);t.elements[1]=e,this.tilingOffset=t}),a(0,n,"_Cutoff",function(){return this.alphaTestValue},function(e){this.alphaTestValue=e}),a(0,n,"_MainTex_STW",function(){return this._shaderValues.getVector(8).elements[3]},function(e){var t=this._shaderValues.getVector(8);t.elements[3]=e,this.tilingOffset=t}),a(0,n,"albedoColor",function(){return this._albedoColor},function(e){var t=this._shaderValues.getVector(5);Mi.scale(e,this._albedoIntensity,t),this._albedoColor=e,this._shaderValues.setVector(5,t)}),a(0,n,"tilingOffsetX",function(){return this._MainTex_STX},function(e){this._MainTex_STX=e}),a(0,n,"tilingOffsetY",function(){return this._MainTex_STY},function(e){this._MainTex_STY=e}),a(0,n,"tilingOffsetZ",function(){return this._MainTex_STZ},function(e){this._MainTex_STZ=e}),a(0,n,"enableLighting",function(){return this._enableLighting},function(e){this._enableLighting!==e&&(e?this._disablePublicDefineDatas.remove(ki.SHADERDEFINE_POINTLIGHT|ki.SHADERDEFINE_SPOTLIGHT|ki.SHADERDEFINE_DIRECTIONLIGHT):this._disablePublicDefineDatas.add(ki.SHADERDEFINE_POINTLIGHT|ki.SHADERDEFINE_SPOTLIGHT|ki.SHADERDEFINE_DIRECTIONLIGHT),this._enableLighting=e)}),a(0,n,"tilingOffsetW",function(){return this._MainTex_STW},function(e){this._MainTex_STW=e}),a(0,n,"tilingOffset",function(){return this._shaderValues.getVector(8)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._defineDatas.add(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_TILINGOFFSET):this._defineDatas.remove(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_TILINGOFFSET)}else this._defineDatas.remove(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_TILINGOFFSET);this._shaderValues.setVector(8,e)}),a(0,n,"albedoColorR",function(){return this._ColorR},function(e){this._ColorR=e}),a(0,n,"albedoColorG",function(){return this._ColorG},function(e){this._ColorG=e}),a(0,n,"albedoIntensity",function(){return this._albedoIntensity},function(e){this._AlbedoIntensity=e}),a(0,n,"specularColorR",function(){return this._SpecColorR},function(e){this._SpecColorR=e}),a(0,n,"specularColorG",function(){return this._SpecColorG},function(e){this._SpecColorG=e}),a(0,n,"specularColorB",function(){return this._SpecColorB},function(e){this._SpecColorB=e}),a(0,n,"shininess",function(){return this._Shininess},function(e){this._Shininess=e}),a(0,n,"albedoTexture",function(){return this._shaderValues.getTexture(1)},function(e){e?this._defineDatas.add(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_DIFFUSEMAP):this._defineDatas.remove(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_DIFFUSEMAP),this._shaderValues.setTexture(1,e)}),a(0,n,"normalTexture",function(){return this._shaderValues.getTexture(2)},function(e){e?this._defineDatas.add(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_NORMALMAP):this._defineDatas.remove(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_NORMALMAP),this._shaderValues.setTexture(2,e)}),a(0,n,"specularTexture",function(){return this._shaderValues.getTexture(3)},function(e){e?this._defineDatas.add(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_SPECULARMAP):this._defineDatas.remove(laya.d3.core.material.BlinnPhongMaterial.SHADERDEFINE_SPECULARMAP),this._shaderValues.setTexture(3,e)}),t.__init__=function(){t.SHADERDEFINE_DIFFUSEMAP=t.shaderDefines.registerDefine("DIFFUSEMAP"),t.SHADERDEFINE_NORMALMAP=t.shaderDefines.registerDefine("NORMALMAP"),t.SHADERDEFINE_SPECULARMAP=t.shaderDefines.registerDefine("SPECULARMAP"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET")},t.SPECULARSOURCE_DIFFUSEMAPALPHA=0,t.SPECULARSOURCE_SPECULARMAP=0,t.RENDERMODE_OPAQUE=0,t.RENDERMODE_CUTOUT=1,t.RENDERMODE_TRANSPARENT=2,t.SHADERDEFINE_DIFFUSEMAP=0,t.SHADERDEFINE_NORMALMAP=0,t.SHADERDEFINE_SPECULARMAP=0,t.SHADERDEFINE_TILINGOFFSET=0,t.ALBEDOTEXTURE=1,t.NORMALTEXTURE=2,t.SPECULARTEXTURE=3,t.EMISSIVETEXTURE=4,t.ALBEDOCOLOR=5,t.MATERIALSPECULAR=6,t.SHININESS=7,t.TILINGOFFSET=8,i(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi),ji=function(e){function t(){this._color=null,t.__super.call(this,4),this.setShaderName("Effect"),this._color=new Mi(1,1,1,1),this._shaderValues.setVector(2,new Mi(1,1,1,1))}r(t,"laya.d3.core.material.EffectMaterial",e);var n=t.prototype;return a(0,n,"_TintColorB",function(){return this._color.elements[2]},function(e){this._color.elements[2]=e,this.color=this._color}),a(0,n,"_MainTex_STZ",function(){return this._shaderValues.getVector(3).elements[2]},function(e){var t=this._shaderValues.getVector(3);t.elements[2]=e,this.tilingOffset=t}),a(0,n,"texture",function(){return this._shaderValues.getTexture(1)},function(e){e?this._defineDatas.add(laya.d3.core.material.EffectMaterial.SHADERDEFINE_MAINTEXTURE):this._defineDatas.remove(laya.d3.core.material.EffectMaterial.SHADERDEFINE_MAINTEXTURE),this._shaderValues.setTexture(1,e)}),a(0,n,"_TintColorR",function(){return this._color.elements[0]},function(e){this._color.elements[0]=e,this.color=this._color}),a(0,n,"_MainTex_STW",function(){return this._shaderValues.getVector(3).elements[3]},function(e){var t=this._shaderValues.getVector(3);t.elements[3]=e,this.tilingOffset=t}),a(0,n,"_TintColorG",function(){return this._color.elements[1]},function(e){this._color.elements[1]=e,this.color=this._color}),a(0,n,"_TintColorA",function(){return this._color.elements[3]},function(e){this._color.elements[3]=e,this.color=this._color}),a(0,n,"_MainTex_STY",function(){return this._shaderValues.getVector(3).elements[1]},function(e){var t=this._shaderValues.getVector(3);t.elements[1]=e,this.tilingOffset=t}),a(0,n,"renderMode",null,function(e){var n=this.getRenderState();switch(e){case 0:this.renderQueue=3e3,this.alphaTest=!1,n.depthWrite=!1,n.cull=0,n.blend=1,n.srcBlend=770,n.dstBlend=1,n.depthTest=513,this._defineDatas.add(t.SHADERDEFINE_ADDTIVEFOG);break;case 1:this.renderQueue=3e3,this.alphaTest=!1,n.depthWrite=!1,n.cull=0,n.blend=1,n.srcBlend=770,n.dstBlend=771,n.depthTest=513,this._defineDatas.remove(t.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("MeshEffectMaterial : renderMode value error.")}}),a(0,n,"_MainTex_STX",function(){return this._shaderValues.getVector(3).elements[0]},function(e){var t=this._shaderValues.getVector(3);t.elements[0]=e,this.tilingOffset=t}),a(0,n,"colorR",function(){return this._TintColorR},function(e){this._TintColorR=e}),a(0,n,"colorG",function(){return this._TintColorG},function(e){this._TintColorG=e}),a(0,n,"colorB",function(){return this._TintColorB},function(e){this._TintColorB=e}),a(0,n,"colorA",function(){return this._TintColorA},function(e){this._TintColorA=e}),a(0,n,"color",function(){return this._shaderValues.getVector(2)},function(e){this._shaderValues.setVector(2,e)}),a(0,n,"tilingOffsetX",function(){return this._MainTex_STX},function(e){this._MainTex_STX=e}),a(0,n,"tilingOffsetY",function(){return this._MainTex_STY},function(e){this._MainTex_STY=e}),a(0,n,"tilingOffsetZ",function(){return this._MainTex_STZ},function(e){this._MainTex_STZ=e}),a(0,n,"tilingOffsetW",function(){return this._MainTex_STW},function(e){this._MainTex_STW=e}),a(0,n,"tilingOffset",function(){return this._shaderValues.getVector(3)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._defineDatas.add(laya.d3.core.material.EffectMaterial.SHADERDEFINE_TILINGOFFSET):this._defineDatas.remove(laya.d3.core.material.EffectMaterial.SHADERDEFINE_TILINGOFFSET)}else this._defineDatas.remove(laya.d3.core.material.EffectMaterial.SHADERDEFINE_TILINGOFFSET);this._shaderValues.setVector(3,e)}),t.__init__=function(){t.SHADERDEFINE_MAINTEXTURE=t.shaderDefines.registerDefine("MAINTEXTURE"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET"),t.SHADERDEFINE_ADDTIVEFOG=t.shaderDefines.registerDefine("ADDTIVEFOG")},t.RENDERMODE_ADDTIVE=0,t.RENDERMODE_ALPHABLENDED=1,t.SHADERDEFINE_MAINTEXTURE=0,t.SHADERDEFINE_TILINGOFFSET=0,t.SHADERDEFINE_ADDTIVEFOG=0,t.MAINTEXTURE=1,t.TINTCOLOR=2,t.TILINGOFFSET=3,i(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi),Ki=function(e){function t(){this._enableLighting=!0,t.__super.call(this,10),this.setShaderName("ExtendTerrain"),this.renderMode=1}r(t,"laya.d3.core.material.ExtendTerrainMaterial",e);var n=t.prototype;return n._setDetailNum=function(e){switch(e){case 1:this._defineDatas.add(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);break;case 2:this._defineDatas.add(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);break;case 3:this._defineDatas.add(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);break;case 4:this._defineDatas.add(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);
break;case 5:this._defineDatas.add(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM5),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._defineDatas.remove(laya.d3.core.material.ExtendTerrainMaterial.SHADERDEFINE_DETAIL_NUM4)}},a(0,n,"diffuseScaleOffset2",null,function(e){this._shaderValues.setVector(7,e)}),a(0,n,"splatAlphaTexture",function(){return this._shaderValues.getTexture(0)},function(e){this._shaderValues.setTexture(0,e)}),a(0,n,"diffuseScaleOffset3",null,function(e){this._shaderValues.setVector(8,e)}),a(0,n,"diffuseTexture1",null,function(e){this._shaderValues.setTexture(1,e),this._setDetailNum(1)}),a(0,n,"renderMode",null,function(e){var t=this.getRenderState();switch(e){case 1:this.renderQueue=2e3,t.depthWrite=!0,t.cull=2,t.blend=0,t.depthTest=513;break;case 2:this.renderQueue=2e3,t.depthWrite=!1,t.cull=2,t.blend=1,t.srcBlend=770,t.dstBlend=771,t.depthTest=515;break;default:throw new Error("ExtendTerrainMaterial:renderMode value error.")}}),a(0,n,"diffuseTexture2",function(){return this._shaderValues.getTexture(2)},function(e){this._shaderValues.setTexture(2,e),this._setDetailNum(2)}),a(0,n,"diffuseScaleOffset1",null,function(e){this._shaderValues.setVector(6,e)}),a(0,n,"diffuseTexture3",function(){return this._shaderValues.getTexture(3)},function(e){this._shaderValues.setTexture(3,e),this._setDetailNum(3)}),a(0,n,"diffuseTexture4",function(){return this._shaderValues.getTexture(4)},function(e){this._shaderValues.setTexture(4,e),this._setDetailNum(4)}),a(0,n,"diffuseTexture5",function(){return this._shaderValues.getTexture(5)},function(e){this._shaderValues.setTexture(5,e),this._setDetailNum(5)}),a(0,n,"diffuseScaleOffset4",null,function(e){this._shaderValues.setVector(9,e)}),a(0,n,"diffuseScaleOffset5",null,function(e){this._shaderValues.setVector(10,e)}),a(0,n,"enableLighting",function(){return this._enableLighting},function(e){this._enableLighting!==e&&(e?this._disablePublicDefineDatas.remove(ki.SHADERDEFINE_POINTLIGHT|ki.SHADERDEFINE_SPOTLIGHT|ki.SHADERDEFINE_DIRECTIONLIGHT):this._disablePublicDefineDatas.add(ki.SHADERDEFINE_POINTLIGHT|ki.SHADERDEFINE_SPOTLIGHT|ki.SHADERDEFINE_DIRECTIONLIGHT),this._enableLighting=e)}),t.__init__=function(){t.SHADERDEFINE_DETAIL_NUM1=t.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM1"),t.SHADERDEFINE_DETAIL_NUM2=t.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM2"),t.SHADERDEFINE_DETAIL_NUM3=t.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM3"),t.SHADERDEFINE_DETAIL_NUM4=t.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM4"),t.SHADERDEFINE_DETAIL_NUM5=t.shaderDefines.registerDefine("ExtendTerrain_DETAIL_NUM5")},t.RENDERMODE_OPAQUE=1,t.RENDERMODE_TRANSPARENT=2,t.SPLATALPHATEXTURE=0,t.DIFFUSETEXTURE1=1,t.DIFFUSETEXTURE2=2,t.DIFFUSETEXTURE3=3,t.DIFFUSETEXTURE4=4,t.DIFFUSETEXTURE5=5,t.DIFFUSESCALEOFFSET1=6,t.DIFFUSESCALEOFFSET2=7,t.DIFFUSESCALEOFFSET3=8,t.DIFFUSESCALEOFFSET4=9,t.DIFFUSESCALEOFFSET5=10,t.SHADERDEFINE_DETAIL_NUM1=0,t.SHADERDEFINE_DETAIL_NUM2=0,t.SHADERDEFINE_DETAIL_NUM3=0,t.SHADERDEFINE_DETAIL_NUM4=0,t.SHADERDEFINE_DETAIL_NUM5=0,i(t,["shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi),qi=function(e){function t(){if(this._transformUV=null,t.__super.call(this,15),!laya.d3.core.material.PBRMaterial.pbrlutTex){var e=l.window.__pbrlutdata;if(!e)throw alert("no pbr lutdata, need pbrlut.js"),"no pbr lutdata, need pbrlut.js";var n=ur.create(new Uint32Array(e).buffer,256,256,9728,9728,!1);laya.d3.core.material.PBRMaterial.pbrlutTex=n}this._shaderValues.setTexture(4,laya.d3.core.material.PBRMaterial.pbrlutTex),this.setShaderName("PBR"),this._shaderValues.setNumber(0,.5),this.use_groundtruth=!1}r(t,"laya.d3.core.material.PBRMaterial",e);var n=t.prototype;return n.disableLight=function(){this._defineDatas.add(ki.SHADERDEFINE_POINTLIGHT|ki.SHADERDEFINE_SPOTLIGHT|ki.SHADERDEFINE_DIRECTIONLIGHT)},n.disableFog=function(){this._defineDatas.add(ki.SHADERDEFINE_FOG)},n.radicalInverse_VdC=function(e){var t=new Uint32Array(1);return function(e){return e=e<<16|e>>>16,e=(1431655765&e)<<1|(2863311530&e)>>>1,e=(858993459&e)<<2|(3435973836&e)>>>2,e=(252645135&e)<<4|(4042322160&e)>>>4,e=(16711935&e)<<8|(4278255360&e)>>>8,t[0]=e,2.3283064365386963e-10*t[0]}(e)},n.createHammersleyTex=function(e,t){var n=new Uint8Array(e*t*4),i=0,r=0;for(r=0;e*t>r;r++){var a=this.radicalInverse_VdC(r);n[i++]=255*a,n[i++]=0,n[i++]=0,n[i++]=255}return n},a(0,n,"normalTexture",function(){return this._shaderValues.getTexture(2)},function(e){this._shaderValues.setTexture(2,e)}),a(0,n,"has_tangent",null,function(){this._defineDatas.add(t.SHADERDEFINE_HAS_TANGENT)}),a(0,n,"roughness",function(){return this._shaderValues.getNumber(6)},function(e){this._shaderValues.setNumber(6,e),this._defineDatas.add(t.SHADERDEFINE_FIX_ROUGHNESS)}),a(0,n,"metaless",function(){return this._shaderValues.getNumber(7)},function(e){this._shaderValues.setNumber(7,e),this._defineDatas.add(t.SHADERDEFINE_FIX_METALESS)}),a(0,n,"pbrlutTexture",function(){return this._shaderValues.getTexture(4)},function(e){this._shaderValues.setTexture(4,e)}),a(0,n,"use_groundtruth",null,function(e){if(e){if(this._defineDatas.add(t.SHADERDEFINE_USE_GROUNDTRUTH),!laya.d3.core.material.PBRMaterial.HammersleyNoiseTex){var n=this.createHammersleyTex(32,32);laya.d3.core.material.PBRMaterial.HammersleyNoiseTex=ur.create(n.buffer,32,32,9728,9728,!1)}this._shaderValues.setTexture(15,t.HammersleyNoiseTex)}else laya.d3.core.material.PBRMaterial.HammersleyNoiseTex=null,this._defineDatas.remove(t.SHADERDEFINE_USE_GROUNDTRUTH)}),a(0,n,"transformUV",function(){return this._transformUV},function(e){this._transformUV=e,this._shaderValues.setMatrix4x4(8,e.matrix)}),a(0,n,"diffuseTexture",function(){return this._shaderValues.getTexture(1)},function(e){this._shaderValues.setTexture(1,e)}),a(0,n,"renderMode",null,function(e){var t=this.getRenderState();switch(e){case 1:this.renderQueue=2e3,t.depthWrite=!0,t.cull=2,t.blend=0,this.alphaTest=!1;break;case 2:this.renderQueue=2e3,t.depthWrite=!0,t.cull=0,t.blend=0,this.alphaTest=!1;break;case 3:t.depthWrite=!0,t.cull=2,t.blend=0,this.renderQueue=2450;break;case 13:this.renderQueue=3e3,t.depthWrite=!0,t.cull=2,t.blend=1,t.srcBlend=770,t.dstBlend=771;break;default:throw new Error("PBRMaterial:renderMode value error.")}}),a(0,n,"pbrInfoTexture",function(){return this._shaderValues.getTexture(3)},function(e){this._shaderValues.setTexture(3,e),this._defineDatas.add(t.SHADERDEFINE_HAS_PBRINFO)}),a(0,n,"testClipZ",null,function(){this._defineDatas.add(t.SHADERDEFINE_TEST_CLIPZ)}),t.__init__=function(){t.SHADERDEFINE_FIX_METALESS=t.shaderDefines.registerDefine("FIX_METALESS"),t.SHADERDEFINE_FIX_ROUGHNESS=t.shaderDefines.registerDefine("FIX_ROUGHNESS"),t.SHADERDEFINE_HAS_TANGENT=t.shaderDefines.registerDefine("HAS_TANGENT"),t.SHADERDEFINE_HAS_PBRINFO=t.shaderDefines.registerDefine("HAS_PBRINFO"),t.SHADERDEFINE_USE_GROUNDTRUTH=t.shaderDefines.registerDefine("USE_GROUNDTRUTH"),t.SHADERDEFINE_TEST_CLIPZ=t.shaderDefines.registerDefine("CLIPZ")},t.DIFFUSETEXTURE=1,t.NORMALTEXTURE=2,t.PBRINFOTEXTURE=3,t.PBRLUTTEXTURE=4,t.UVANIAGE=5,t.MATERIALROUGHNESS=6,t.MATERIALMETALESS=7,t.UVMATRIX=8,t.UVAGE=9,t.AOOBJPOS=14,t.HSNOISETEXTURE=15,t.SHADERDEFINE_FIX_ROUGHNESS=0,t.SHADERDEFINE_FIX_METALESS=0,t.SHADERDEFINE_HAS_TANGENT=0,t.SHADERDEFINE_TEST_CLIPZ=0,t.SHADERDEFINE_HAS_PBRINFO=0,t.SHADERDEFINE_USE_GROUNDTRUTH=0,t.RENDERMODE_OPAQUE=1,t.RENDERMODE_OPAQUEDOUBLEFACE=2,t.RENDERMODE_CUTOUT=3,t.RENDERMODE_CUTOUTDOUBLEFACE=4,t.RENDERMODE_TRANSPARENT=13,t.pbrlutTex=null,t.HammersleyNoiseTex=null,i(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi),Qi=function(e){function t(){this._albedoColor=null,this._specularColor=null,this._emissionColor=null,t.__super.call(this,19),this.setShaderName("PBRSpecular"),this._albedoColor=new Mi(1,1,1,1),this._shaderValues.setVector(7,new Mi(1,1,1,1)),this._emissionColor=new Mi(0,0,0,0),this._shaderValues.setVector(9,new Mi(0,0,0,0)),this._specularColor=new Mi(.2,.2,.2,.2),this._shaderValues.setVector(8,new Mi(.2,.2,.2,.2)),this._shaderValues.setNumber(10,.5),this._shaderValues.setNumber(11,1),this._shaderValues.setNumber(12,0),this._shaderValues.setNumber(13,1),this._shaderValues.setNumber(14,1),this._shaderValues.setNumber(15,.001),this._shaderValues.setBool(16,!1),this._shaderValues.setNumber(0,.5)}r(t,"laya.d3.core.material.PBRSpecularMaterial",e);var n=t.prototype;return n.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var n=t;this._albedoColor.cloneTo(n._albedoColor),this._specularColor.cloneTo(n._specularColor),this._emissionColor.cloneTo(n._emissionColor)},a(0,n,"emissionTexture",function(){return this._shaderValues.getTexture(6)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_EMISSIONTEXTURE):this._defineDatas.remove(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_EMISSIONTEXTURE),this._shaderValues.setTexture(6,e)}),a(0,n,"_SpecColorG",function(){return this._specularColor.elements[1]},function(e){this._specularColor.elements[1]=e,this.specularColor=this._specularColor}),a(0,n,"_ColorB",function(){return this._albedoColor.elements[2]},function(e){this._albedoColor.elements[2]=e,this.albedoColor=this._albedoColor}),a(0,n,"_ColorR",function(){return this._albedoColor.elements[0]},function(e){this._albedoColor.elements[0]=e,this.albedoColor=this._albedoColor}),a(0,n,"albedoColorA",function(){return this._ColorA},function(e){this._ColorA=e}),a(0,n,"_MainTex_STX",function(){return this._shaderValues.getVector(18).elements[0]},function(e){var t=this._shaderValues.getVector(18);t.elements[0]=e,this.tilingOffset=t}),a(0,n,"_SpecColorB",function(){return this._specularColor.elements[2]},function(e){this._specularColor.elements[2]=e,this.specularColor=this._specularColor}),a(0,n,"renderMode",null,function(e){var n=this.getRenderState();switch(e){case 0:this.alphaTest=!1,this.renderQueue=2e3,n.depthWrite=!0,n.cull=2,n.blend=0,n.depthTest=513,this._defineDatas.remove(t.SHADERDEFINE_ALPHAPREMULTIPLY);break;case 1:this.renderQueue=2450,this.alphaTest=!0,n.depthWrite=!0,n.cull=2,n.blend=0,n.depthTest=513,this._defineDatas.remove(t.SHADERDEFINE_ALPHAPREMULTIPLY);break;case 2:this.renderQueue=3e3,this.alphaTest=!1,n.depthWrite=!1,n.cull=2,n.blend=1,n.srcBlend=770,n.dstBlend=771,n.depthTest=513,this._defineDatas.remove(t.SHADERDEFINE_ALPHAPREMULTIPLY);break;case 3:this.renderQueue=3e3,this.alphaTest=!1,n.depthWrite=!1,n.cull=2,n.blend=1,n.srcBlend=1,n.dstBlend=771,n.depthTest=513,this._defineDatas.add(t.SHADERDEFINE_ALPHAPREMULTIPLY);break;default:throw new Error("PBRSpecularMaterial : renderMode value error.")}}),a(0,n,"_SpecColorR",function(){return this._specularColor.elements[0]},function(e){this._specularColor.elements[0]=e,this.specularColor=this._specularColor}),a(0,n,"_ColorG",function(){return this._albedoColor.elements[1]},function(e){this._albedoColor.elements[1]=e,this.albedoColor=this._albedoColor}),a(0,n,"_Glossiness",function(){return this._shaderValues.getNumber(10)},function(e){this._shaderValues.setNumber(10,e)}),a(0,n,"_ColorA",function(){return this._albedoColor.elements[3]},function(e){this._albedoColor.elements[3]=e,this.albedoColor=this._albedoColor}),a(0,n,"specularColor",function(){return this._shaderValues.getVector(8)},function(e){this._shaderValues.setVector(8,e)}),a(0,n,"albedoColorB",function(){return this._ColorB},function(e){this._ColorB=e}),a(0,n,"_SpecColorA",function(){return this._specularColor.elements[3]},function(e){this._specularColor.elements[3]=e,this.specularColor=this._specularColor}),a(0,n,"_GlossMapScale",function(){return this._shaderValues.getNumber(11)},function(e){this._shaderValues.setNumber(11,e)}),a(0,n,"_BumpScale",function(){return this._shaderValues.getNumber(14)},function(e){this._shaderValues.setNumber(14,e)}),a(0,n,"_Parallax",function(){return this._shaderValues.getNumber(15)},function(e){this._shaderValues.setNumber(15,e)}),a(0,n,"_OcclusionStrength",function(){return this._shaderValues.getNumber(13)},function(e){this._shaderValues.setNumber(13,e)}),a(0,n,"_EmissionColorR",function(){return this._emissionColor.elements[0]},function(e){this._emissionColor.elements[0]=e,this.emissionColor=this._emissionColor}),a(0,n,"tilingOffset",function(){return this._shaderValues.getVector(18)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._defineDatas.add(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_TILINGOFFSET):this._defineDatas.remove(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_TILINGOFFSET)}else this._defineDatas.remove(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_TILINGOFFSET);this._shaderValues.setVector(18,e)}),a(0,n,"_EmissionColorG",function(){return this._emissionColor.elements[1]},function(e){this._emissionColor.elements[1]=e,this.emissionColor=this._emissionColor}),a(0,n,"tilingOffsetW",function(){return this._MainTex_STW},function(e){this._MainTex_STW=e}),a(0,n,"_EmissionColorB",function(){return this._emissionColor.elements[2]},function(e){this._emissionColor.elements[2]=e,this.emissionColor=this._emissionColor}),a(0,n,"_EmissionColorA",function(){return this._emissionColor.elements[3]},function(e){this._emissionColor.elements[3]=e,this.emissionColor=this._emissionColor}),a(0,n,"_MainTex_STY",function(){return this._shaderValues.getVector(18).elements[1]},function(e){var t=this._shaderValues.getVector(18);t.elements[1]=e,this.tilingOffset=t}),a(0,n,"_MainTex_STZ",function(){return this._shaderValues.getVector(18).elements[2]},function(e){var t=this._shaderValues.getVector(18);t.elements[2]=e,this.tilingOffset=t}),a(0,n,"_Cutoff",function(){return this.alphaTestValue},function(e){this.alphaTestValue=e}),a(0,n,"_MainTex_STW",function(){return this._shaderValues.getVector(18).elements[3]},function(e){var t=this._shaderValues.getVector(18);t.elements[3]=e,this.tilingOffset=t}),a(0,n,"albedoColorR",function(){return this._ColorR},function(e){this._ColorR=e}),a(0,n,"albedoColorG",function(){return this._ColorG},function(e){this._ColorG=e}),a(0,n,"tilingOffsetX",function(){return this._MainTex_STX},function(e){this._MainTex_STX=e}),a(0,n,"albedoColor",function(){return this._albedoColor},function(e){this._albedoColor=e,this._shaderValues.setVector(7,e)}),a(0,n,"albedoTexture",function(){return this._shaderValues.getTexture(1)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_ALBEDOTEXTURE):this._defineDatas.remove(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_ALBEDOTEXTURE),this._shaderValues.setTexture(1,e)}),a(0,n,"parallaxTexture",function(){return this._shaderValues.getTexture(4)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_PARALLAXTEXTURE):this._defineDatas.remove(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_PARALLAXTEXTURE),this._shaderValues.setTexture(4,e)}),a(0,n,"normalTexture",function(){return this._shaderValues.getTexture(3)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_NORMALTEXTURE):this._defineDatas.remove(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_NORMALTEXTURE),this._shaderValues.setTexture(3,e)}),a(0,n,"emissionColor",function(){return this._shaderValues.getVector(9)},function(e){this._shaderValues.setVector(9,e)}),a(0,n,"parallaxTextureScale",function(){return this._Parallax},function(e){this._Parallax=Math.max(.005,Math.min(.08,e))}),a(0,n,"normalTextureScale",function(){return this._BumpScale},function(e){this._BumpScale=e}),a(0,n,"tilingOffsetZ",function(){return this._MainTex_STZ},function(e){this._MainTex_STZ=e}),a(0,n,"occlusionTexture",function(){return this._shaderValues.getTexture(5)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_OCCLUSIONTEXTURE):this._defineDatas.remove(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_OCCLUSIONTEXTURE),this._shaderValues.setTexture(5,e)}),a(0,n,"occlusionTextureStrength",function(){return this._OcclusionStrength},function(e){this._OcclusionStrength=Math.max(0,Math.min(1,e))}),a(0,n,"specularTexture",function(){return this._shaderValues.getTexture(2)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_SPECULARTEXTURE):this._defineDatas.remove(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_SPECULARTEXTURE),this._shaderValues.setTexture(2,e)}),a(0,n,"specularColorR",function(){return this._SpecColorR},function(e){this._SpecColorR=e}),a(0,n,"smoothness",function(){return this._Glossiness},function(e){this._Glossiness=Math.max(0,Math.min(1,e))}),a(0,n,"specularColorG",function(){return this._SpecColorG},function(e){this._SpecColorG=e}),a(0,n,"specularColorB",function(){return this._SpecColorB},function(e){this._SpecColorB=e}),a(0,n,"specularColorA",function(){return this._SpecColorA},function(e){this._SpecColorA=e}),a(0,n,"smoothnessTextureScale",function(){return this._GlossMapScale},function(e){this._GlossMapScale=Math.max(0,Math.min(1,e))}),a(0,n,"smoothnessSource",function(){return this._shaderValues.getInt(12)},function(e){e?(this._defineDatas.add(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA),this._shaderValues.setInt(12,1)):(this._defineDatas.remove(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA),this._shaderValues.setInt(12,0))}),a(0,n,"enableEmission",function(){return this._shaderValues.getBool(16)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_EMISSION):this._defineDatas.remove(laya.d3.core.material.PBRSpecularMaterial.SHADERDEFINE_EMISSION),this._shaderValues.setBool(16,e)}),a(0,n,"enableReflection",function(){return this._shaderValues.getBool(17)},function(e){this._shaderValues.setBool(17,!0),e?this._disablePublicDefineDatas.remove(ki.SHADERDEFINE_REFLECTMAP):this._disablePublicDefineDatas.add(ki.SHADERDEFINE_REFLECTMAP)}),a(0,n,"tilingOffsetY",function(){return this._MainTex_STY},function(e){this._MainTex_STY=e}),t.__init__=function(){t.SHADERDEFINE_ALBEDOTEXTURE=t.shaderDefines.registerDefine("ALBEDOTEXTURE"),t.SHADERDEFINE_SPECULARTEXTURE=t.shaderDefines.registerDefine("SPECULARTEXTURE"),t.SHADERDEFINE_SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA=t.shaderDefines.registerDefine("SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA"),t.SHADERDEFINE_NORMALTEXTURE=t.shaderDefines.registerDefine("NORMALTEXTURE"),t.SHADERDEFINE_PARALLAXTEXTURE=t.shaderDefines.registerDefine("PARALLAXTEXTURE"),t.SHADERDEFINE_OCCLUSIONTEXTURE=t.shaderDefines.registerDefine("OCCLUSIONTEXTURE"),t.SHADERDEFINE_EMISSION=t.shaderDefines.registerDefine("EMISSION"),t.SHADERDEFINE_EMISSIONTEXTURE=t.shaderDefines.registerDefine("EMISSIONTEXTURE"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET"),t.SHADERDEFINE_ALPHAPREMULTIPLY=t.shaderDefines.registerDefine("ALPHAPREMULTIPLY")},t.SmoothnessSource_SpecularTexture_Alpha=0,t.SmoothnessSource_AlbedoTexture_Alpha=1,t.RENDERMODE_OPAQUE=0,t.RENDERMODE_CUTOUT=1,t.RENDERMODE_FADE=2,t.RENDERMODE_TRANSPARENT=3,t.SHADERDEFINE_ALBEDOTEXTURE=0,t.SHADERDEFINE_NORMALTEXTURE=0,t.SHADERDEFINE_SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA=0,t.SHADERDEFINE_SPECULARTEXTURE=0,t.SHADERDEFINE_OCCLUSIONTEXTURE=0,t.SHADERDEFINE_PARALLAXTEXTURE=0,t.SHADERDEFINE_EMISSION=0,t.SHADERDEFINE_EMISSIONTEXTURE=0,t.SHADERDEFINE_TILINGOFFSET=0,t.SHADERDEFINE_ALPHAPREMULTIPLY=0,t.ALBEDOTEXTURE=1,t.SPECULARTEXTURE=2,t.NORMALTEXTURE=3,t.PARALLAXTEXTURE=4,t.OCCLUSIONTEXTURE=5,t.EMISSIONTEXTURE=6,t.ALBEDOCOLOR=7,t.SPECULARCOLOR=8,t.EMISSIONCOLOR=9,t.SMOOTHNESS=10,t.SMOOTHNESSSCALE=11,t.SMOOTHNESSSOURCE=12,t.OCCLUSIONSTRENGTH=13,t.NORMALSCALE=14,t.PARALLAXSCALE=15,t.ENABLEEMISSION=16,t.ENABLEREFLECT=17,t.TILINGOFFSET=18,i(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi),$i=function(e){function t(){this._albedoColor=null,this._emissionColor=null,t.__super.call(this,19),this.setShaderName("PBRStandard"),this._albedoColor=new Mi(1,1,1,1),this._shaderValues.setVector(7,new Mi(1,1,1,1)),this._emissionColor=new Mi(0,0,0,0),this._shaderValues.setVector(8,new Mi(0,0,0,0)),this._shaderValues.setNumber(9,0),this._shaderValues.setNumber(10,.5),this._shaderValues.setNumber(11,1),this._shaderValues.setNumber(12,0),this._shaderValues.setNumber(13,1),this._shaderValues.setNumber(14,1),this._shaderValues.setNumber(15,.001),this._shaderValues.setBool(16,!1),this._shaderValues.setBool(17,!0),this._shaderValues.setNumber(0,.5),this._disablePublicDefineDatas.remove(ki.SHADERDEFINE_REFLECTMAP)}r(t,"laya.d3.core.material.PBRStandardMaterial",e);var n=t.prototype;return n.cloneTo=function(t){e.prototype.cloneTo.call(this,t);var n=t;this._albedoColor.cloneTo(n._albedoColor),this._emissionColor.cloneTo(n._emissionColor)},a(0,n,"_Parallax",function(){return this._shaderValues.getNumber(15)},function(e){this._shaderValues.setNumber(15,e)}),a(0,n,"_ColorB",function(){return this._albedoColor.elements[2]},function(e){this._albedoColor.elements[2]=e,this.albedoColor=this._albedoColor}),a(0,n,"_ColorR",function(){return this._albedoColor.elements[0]},function(e){this._albedoColor.elements[0]=e,this.albedoColor=this._albedoColor}),a(0,n,"_ColorG",function(){return this._albedoColor.elements[1]},function(e){this._albedoColor.elements[1]=e,this.albedoColor=this._albedoColor}),a(0,n,"metallic",function(){return this._Metallic},function(e){this._Metallic=Math.max(0,Math.min(1,e))}),a(0,n,"_GlossMapScale",function(){return this._shaderValues.getNumber(11)},function(e){this._shaderValues.setNumber(11,e)}),a(0,n,"_Glossiness",function(){return this._shaderValues.getNumber(10)},function(e){this._shaderValues.setNumber(10,e)}),a(0,n,"_ColorA",function(){return this._albedoColor.elements[3]},function(e){this._albedoColor.elements[3]=e,this.albedoColor=this._albedoColor}),a(0,n,"enableReflection",function(){return this._shaderValues.getBool(17)},function(e){this._shaderValues.setBool(17,!0),e?this._disablePublicDefineDatas.remove(ki.SHADERDEFINE_REFLECTMAP):this._disablePublicDefineDatas.add(ki.SHADERDEFINE_REFLECTMAP)}),a(0,n,"_Metallic",function(){return this._shaderValues.getNumber(9)},function(e){this._shaderValues.setNumber(9,e)}),a(0,n,"_BumpScale",function(){return this._shaderValues.getNumber(14)},function(e){this._shaderValues.setNumber(14,e)}),a(0,n,"_OcclusionStrength",function(){return this._shaderValues.getNumber(13)},function(e){this._shaderValues.setNumber(13,e)}),a(0,n,"_EmissionColorR",function(){return this._emissionColor.elements[0]},function(e){this._emissionColor.elements[0]=e,this.emissionColor=this._emissionColor}),a(0,n,"tilingOffset",function(){return this._shaderValues.getVector(18)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._defineDatas.add(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_TILINGOFFSET):this._defineDatas.remove(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._defineDatas.remove(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_TILINGOFFSET);this._shaderValues.setVector(18,e)}),a(0,n,"_EmissionColorG",function(){return this._emissionColor.elements[1]},function(e){this._emissionColor.elements[1]=e,this.emissionColor=this._emissionColor}),a(0,n,"tilingOffsetW",function(){return this._MainTex_STW},function(e){this._MainTex_STW=e}),a(0,n,"_EmissionColorB",function(){return this._emissionColor.elements[2]},function(e){this._emissionColor.elements[2]=e,this.emissionColor=this._emissionColor}),a(0,n,"_EmissionColorA",function(){return this._emissionColor.elements[3]},function(e){this._emissionColor.elements[3]=e,this.emissionColor=this._emissionColor}),a(0,n,"albedoColorA",function(){return this._ColorA},function(e){this._ColorA=e}),a(0,n,"_MainTex_STX",function(){return this._shaderValues.getVector(18).elements[0]},function(e){var t=this._shaderValues.getVector(18);t.elements[0]=e,this.tilingOffset=t}),a(0,n,"_MainTex_STY",function(){return this._shaderValues.getVector(18).elements[1]},function(e){var t=this._shaderValues.getVector(18);t.elements[1]=e,this.tilingOffset=t}),a(0,n,"_MainTex_STZ",function(){return this._shaderValues.getVector(18).elements[2]},function(e){var t=this._shaderValues.getVector(18);t.elements[2]=e,this.tilingOffset=t}),a(0,n,"_Cutoff",function(){return this.alphaTestValue},function(e){this.alphaTestValue=e}),a(0,n,"_MainTex_STW",function(){return this._shaderValues.getVector(18).elements[3]},function(e){var t=this._shaderValues.getVector(18);t.elements[3]=e,this.tilingOffset=t}),a(0,n,"albedoColorR",function(){return this._ColorR},function(e){this._ColorR=e}),a(0,n,"albedoColorG",function(){return this._ColorG},function(e){this._ColorG=e}),a(0,n,"albedoColorB",function(){return this._ColorB},function(e){this._ColorB=e}),a(0,n,"tilingOffsetX",function(){return this._MainTex_STX},function(e){this._MainTex_STX=e}),a(0,n,"albedoColor",function(){return this._albedoColor},function(e){this._albedoColor=e,this._shaderValues.setVector(7,e)}),a(0,n,"albedoTexture",function(){return this._shaderValues.getTexture(1)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_ALBEDOTEXTURE):this._defineDatas.remove(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_ALBEDOTEXTURE),this._shaderValues.setTexture(1,e)}),a(0,n,"parallaxTexture",function(){return this._shaderValues.getTexture(4)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_PARALLAXTEXTURE):this._defineDatas.remove(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_PARALLAXTEXTURE),this._shaderValues.setTexture(4,e)}),a(0,n,"normalTexture",function(){return this._shaderValues.getTexture(3)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_NORMALTEXTURE):this._defineDatas.remove(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_NORMALTEXTURE),this._shaderValues.setTexture(3,e)}),a(0,n,"emissionColor",function(){return this._shaderValues.getVector(8)},function(e){this._shaderValues.setVector(8,e)}),a(0,n,"parallaxTextureScale",function(){return this._Parallax},function(e){this._Parallax=Math.max(.005,Math.min(.08,e))}),a(0,n,"normalTextureScale",function(){return this._BumpScale},function(e){this._BumpScale=e}),a(0,n,"tilingOffsetZ",function(){return this._MainTex_STZ},function(e){this._MainTex_STZ=e}),a(0,n,"occlusionTexture",function(){return this._shaderValues.getTexture(5)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_OCCLUSIONTEXTURE):this._defineDatas.remove(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_OCCLUSIONTEXTURE),this._shaderValues.setTexture(5,e)}),a(0,n,"occlusionTextureStrength",function(){return this._OcclusionStrength},function(e){this._OcclusionStrength=Math.max(0,Math.min(1,e))}),a(0,n,"enableEmission",function(){return this._shaderValues.getBool(16)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_EMISSION):this._defineDatas.remove(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_EMISSION),this._shaderValues.setBool(16,e)}),a(0,n,"metallicGlossTexture",function(){return this._shaderValues.getTexture(2)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_METALLICGLOSSTEXTURE):this._defineDatas.remove(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_METALLICGLOSSTEXTURE),this._shaderValues.setTexture(2,e)}),a(0,n,"emissionColorA",function(){return this._EmissionColorA},function(e){this._EmissionColorA=e}),a(0,n,"smoothness",function(){return this._Glossiness},function(e){this._Glossiness=Math.max(0,Math.min(1,e))}),a(0,n,"smoothnessTextureScale",function(){return this._GlossMapScale},function(e){this._GlossMapScale=Math.max(0,Math.min(1,e))}),a(0,n,"smoothnessSource",function(){return this._shaderValues.getInt(12)},function(e){e?(this._defineDatas.add(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA),this._shaderValues.setInt(12,1)):(this._defineDatas.remove(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA),this._shaderValues.setInt(12,0))}),a(0,n,"emissionColorR",function(){return this._EmissionColorR},function(e){this._EmissionColorR=e}),a(0,n,"emissionColorG",function(){return this._EmissionColorG},function(e){this._EmissionColorG=e}),a(0,n,"emissionColorB",function(){return this._EmissionColorB},function(e){this._EmissionColorB=e}),a(0,n,"emissionTexture",function(){return this._shaderValues.getTexture(6)},function(e){e?this._defineDatas.add(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_EMISSIONTEXTURE):this._defineDatas.remove(laya.d3.core.material.PBRStandardMaterial.SHADERDEFINE_EMISSIONTEXTURE),this._shaderValues.setTexture(6,e)}),a(0,n,"tilingOffsetY",function(){return this._MainTex_STY},function(e){this._MainTex_STY=e}),a(0,n,"renderMode",null,function(e){var n=this.getRenderState();switch(e){case 0:this.alphaTest=!1,this.renderQueue=2e3,n.depthWrite=!0,n.cull=2,n.blend=0,n.depthTest=513,this._defineDatas.remove(t.SHADERDEFINE_ALPHAPREMULTIPLY);break;case 1:this.renderQueue=2450,this.alphaTest=!0,n.depthWrite=!0,n.cull=2,n.blend=0,n.depthTest=513,this._defineDatas.remove(t.SHADERDEFINE_ALPHAPREMULTIPLY);break;case 2:this.renderQueue=3e3,this.alphaTest=!1,n.depthWrite=!1,n.cull=2,n.blend=1,n.srcBlend=770,n.dstBlend=771,n.depthTest=513,this._defineDatas.remove(t.SHADERDEFINE_ALPHAPREMULTIPLY);break;case 3:this.renderQueue=3e3,this.alphaTest=!1,n.depthWrite=!1,n.cull=2,n.blend=1,n.srcBlend=1,n.dstBlend=771,n.depthTest=513,this._defineDatas.add(t.SHADERDEFINE_ALPHAPREMULTIPLY);break;default:throw new Error("PBRSpecularMaterial : renderMode value error.")}}),t.__init__=function(){t.SHADERDEFINE_ALBEDOTEXTURE=t.shaderDefines.registerDefine("ALBEDOTEXTURE"),t.SHADERDEFINE_METALLICGLOSSTEXTURE=t.shaderDefines.registerDefine("METALLICGLOSSTEXTURE"),t.SHADERDEFINE_SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA=t.shaderDefines.registerDefine("SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA"),t.SHADERDEFINE_NORMALTEXTURE=t.shaderDefines.registerDefine("NORMALTEXTURE"),t.SHADERDEFINE_PARALLAXTEXTURE=t.shaderDefines.registerDefine("PARALLAXTEXTURE"),t.SHADERDEFINE_OCCLUSIONTEXTURE=t.shaderDefines.registerDefine("OCCLUSIONTEXTURE"),t.SHADERDEFINE_EMISSION=t.shaderDefines.registerDefine("EMISSION"),t.SHADERDEFINE_EMISSIONTEXTURE=t.shaderDefines.registerDefine("EMISSIONTEXTURE"),t.SHADERDEFINE_REFLECTMAP=t.shaderDefines.registerDefine("REFLECTMAP"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET"),t.SHADERDEFINE_ALPHAPREMULTIPLY=t.shaderDefines.registerDefine("ALPHAPREMULTIPLY")},t.SmoothnessSource_MetallicGlossTexture_Alpha=0,t.SmoothnessSource_AlbedoTexture_Alpha=1,t.RENDERMODE_OPAQUE=0,t.RENDERMODE_CUTOUT=1,t.RENDERMODE_FADE=2,t.RENDERMODE_TRANSPARENT=3,t.SHADERDEFINE_ALBEDOTEXTURE=0,t.SHADERDEFINE_NORMALTEXTURE=0,t.SHADERDEFINE_SMOOTHNESSSOURCE_ALBEDOTEXTURE_ALPHA=0,t.SHADERDEFINE_METALLICGLOSSTEXTURE=0,t.SHADERDEFINE_OCCLUSIONTEXTURE=0,t.SHADERDEFINE_PARALLAXTEXTURE=0,t.SHADERDEFINE_EMISSION=0,t.SHADERDEFINE_EMISSIONTEXTURE=0,t.SHADERDEFINE_REFLECTMAP=0,t.SHADERDEFINE_TILINGOFFSET=0,t.SHADERDEFINE_ALPHAPREMULTIPLY=0,t.ALBEDOTEXTURE=1,t.METALLICGLOSSTEXTURE=2,t.NORMALTEXTURE=3,t.PARALLAXTEXTURE=4,t.OCCLUSIONTEXTURE=5,t.EMISSIONTEXTURE=6,t.ALBEDOCOLOR=7,t.EMISSIONCOLOR=8,t.METALLIC=9,t.SMOOTHNESS=10,t.SMOOTHNESSSCALE=11,t.SMOOTHNESSSOURCE=12,t.OCCLUSIONSTRENGTH=13,t.NORMALSCALE=14,t.PARALLAXSCALE=15,t.ENABLEEMISSION=16,t.ENABLEREFLECT=17,t.TILINGOFFSET=18,i(t,["defaultMaterial",function(){return this.defaultMaterial=new t
},"shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi),Ji=(function(e){function t(){t.__super.call(this,5),this.setShaderName("SkyBox")}r(t,"laya.d3.core.material.SkyBoxMaterial",e);var n=t.prototype;return a(0,n,"tintColor",function(){return this._shaderValues.getVector(1)},function(e){this._shaderValues.setVector(1,e)}),a(0,n,"exposure",function(){return this._shaderValues.getNumber(2)},function(e){this._shaderValues.setNumber(2,e)}),a(0,n,"rotation",function(){return this._shaderValues.getNumber(3)},function(e){this._shaderValues.setNumber(3,e)}),a(0,n,"textureCube",function(){return this._shaderValues.getTexture(4)},function(e){return this._shaderValues.setTexture(4,e)}),t.TINTCOLOR=1,t.EXPOSURE=2,t.ROTATION=3,t.TEXTURECUBE=4,i(t,["defaultMaterial",function(){return this.defaultMaterial=new t}]),t}(Vi),function(e){function t(){this._diffuseScale1=null,this._diffuseScale2=null,this._diffuseScale3=null,this._diffuseScale4=null,t.__super.call(this,13),this.setShaderName("Terrain"),this.renderMode=1,this._diffuseScale1=new xi,this._diffuseScale2=new xi,this._diffuseScale3=new xi,this._diffuseScale4=new xi,this.ambientColor=new Di(.6,.6,.6),this.diffuseColor=new Di(1,1,1),this.specularColor=new Mi(.2,.2,.2,32)}r(t,"laya.d3.core.material.TerrainMaterial",e);var n=t.prototype;return n.setDiffuseScale1=function(e,t){this._diffuseScale1.x=e,this._diffuseScale1.y=t,this._shaderValues.setVector(6,this._diffuseScale1)},n.setDiffuseScale2=function(e,t){this._diffuseScale2.x=e,this._diffuseScale2.y=t,this._shaderValues.setVector(7,this._diffuseScale2)},n.setDiffuseScale3=function(e,t){this._diffuseScale3.x=e,this._diffuseScale3.y=t,this._shaderValues.setVector(8,this._diffuseScale3)},n.setDiffuseScale4=function(e,t){this._diffuseScale4.x=e,this._diffuseScale4.y=t,this._shaderValues.setVector(9,this._diffuseScale4)},n.setDetailNum=function(e){switch(e){case 1:this._defineDatas.add(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._defineDatas.remove(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._defineDatas.remove(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._defineDatas.remove(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM4);break;case 2:this._defineDatas.add(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._defineDatas.remove(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._defineDatas.remove(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._defineDatas.remove(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM4);break;case 3:this._defineDatas.add(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM3),this._defineDatas.remove(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._defineDatas.remove(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._defineDatas.remove(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM4);break;case 4:this._defineDatas.add(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM4),this._defineDatas.remove(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM1),this._defineDatas.remove(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM2),this._defineDatas.remove(laya.d3.core.material.TerrainMaterial.SHADERDEFINE_DETAIL_NUM3)}},n.disableLight=function(){this._disablePublicDefineDatas.add(ki.SHADERDEFINE_POINTLIGHT|ki.SHADERDEFINE_SPOTLIGHT|ki.SHADERDEFINE_DIRECTIONLIGHT)},n.setShaderName=function(t){e.prototype.setShaderName.call(this,t)},a(0,n,"renderMode",null,function(e){var t=this.getRenderState();switch(e){case 1:this.renderQueue=2e3,t.depthWrite=!0,t.cull=2,t.blend=0,t.depthTest=513;break;case 2:this.renderQueue=2e3,t.depthWrite=!1,t.cull=2,t.blend=1,t.srcBlend=770,t.dstBlend=771,t.depthTest=515;break;default:throw new Error("TerrainMaterial:renderMode value error.")}}),a(0,n,"diffuseTexture2",function(){return this._shaderValues.getTexture(3)},function(e){this._shaderValues.setTexture(3,e)}),a(0,n,"ambientColor",function(){return this._shaderValues.getVector(10)},function(e){this._shaderValues.setVector(10,e)}),a(0,n,"diffuseTexture4",function(){return this._shaderValues.getTexture(5)},function(e){this._shaderValues.setTexture(5,e)}),a(0,n,"diffuseColor",function(){return this._shaderValues.getVector(11)},function(e){this._shaderValues.setVector(11,e)}),a(0,n,"diffuseTexture1",function(){return this._shaderValues.getTexture(2)},function(e){this._shaderValues.setTexture(2,e)}),a(0,n,"specularColor",function(){return this._shaderValues.getVector(12)},function(e){this._shaderValues.setVector(12,e)}),a(0,n,"diffuseTexture3",function(){return this._shaderValues.getTexture(4)},function(e){this._shaderValues.setTexture(4,e)}),a(0,n,"splatAlphaTexture",function(){return this._shaderValues.getTexture(0)},function(e){this._shaderValues.setTexture(0,e)}),a(0,n,"normalTexture",function(){return this._shaderValues.getTexture(1)},function(e){this._shaderValues.setTexture(1,e)}),t.__init__=function(){t.SHADERDEFINE_DETAIL_NUM1=t.shaderDefines.registerDefine("DETAIL_NUM1"),t.SHADERDEFINE_DETAIL_NUM2=t.shaderDefines.registerDefine("DETAIL_NUM2"),t.SHADERDEFINE_DETAIL_NUM4=t.shaderDefines.registerDefine("DETAIL_NUM4"),t.SHADERDEFINE_DETAIL_NUM3=t.shaderDefines.registerDefine("DETAIL_NUM3")},t.RENDERMODE_OPAQUE=1,t.RENDERMODE_TRANSPARENT=2,t.SPLATALPHATEXTURE=0,t.NORMALTEXTURE=1,t.DIFFUSETEXTURE1=2,t.DIFFUSETEXTURE2=3,t.DIFFUSETEXTURE3=4,t.DIFFUSETEXTURE4=5,t.DIFFUSESCALE1=6,t.DIFFUSESCALE2=7,t.DIFFUSESCALE3=8,t.DIFFUSESCALE4=9,t.MATERIALAMBIENT=10,t.MATERIALDIFFUSE=11,t.MATERIALSPECULAR=12,t.SHADERDEFINE_DETAIL_NUM1=0,t.SHADERDEFINE_DETAIL_NUM2=0,t.SHADERDEFINE_DETAIL_NUM3=0,t.SHADERDEFINE_DETAIL_NUM4=0,i(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi)),er=function(e){function t(){this._albedoColor=null,this._albedoIntensity=0/0,t.__super.call(this,3),this.setShaderName("Unlit"),this._albedoColor=new Mi(1,1,1,1),this._shaderValues.setVector(2,new Mi(1,1,1,1))}r(t,"laya.d3.core.material.UnlitMaterial",e);var n=t.prototype;return a(0,n,"_ColorB",function(){return this._albedoColor.elements[2]},function(e){this._albedoColor.elements[2]=e,this.albedoColor=this._albedoColor}),a(0,n,"_ColorR",function(){return this._albedoColor.elements[0]},function(e){this._albedoColor.elements[0]=e,this.albedoColor=this._albedoColor}),a(0,n,"albedoColorA",function(){return this._ColorA},function(e){this._ColorA=e}),a(0,n,"_MainTex_STX",function(){return this._shaderValues.getVector(3).elements[0]},function(e){var t=this._shaderValues.getVector(3);t.elements[0]=e,this.tilingOffset=t}),a(0,n,"_ColorG",function(){return this._albedoColor.elements[1]},function(e){this._albedoColor.elements[1]=e,this.albedoColor=this._albedoColor}),a(0,n,"_ColorA",function(){return this._albedoColor.elements[3]},function(e){this._albedoColor.elements[3]=e,this.albedoColor=this._albedoColor}),a(0,n,"_AlbedoIntensity",function(){return this._albedoIntensity},function(e){if(this._albedoIntensity!==e){var t=this._shaderValues.getVector(2);Mi.scale(this._albedoColor,e,t),this._albedoIntensity=e,this._shaderValues.setVector(2,t)}}),a(0,n,"_MainTex_STZ",function(){return this._shaderValues.getVector(3).elements[2]},function(e){var t=this._shaderValues.getVector(3);t.elements[2]=e,this.tilingOffset=t}),a(0,n,"_MainTex_STY",function(){return this._shaderValues.getVector(3).elements[1]},function(e){var t=this._shaderValues.getVector(3);t.elements[1]=e,this.tilingOffset=t}),a(0,n,"_Cutoff",function(){return this.alphaTestValue},function(e){this.alphaTestValue=e}),a(0,n,"_MainTex_STW",function(){return this._shaderValues.getVector(3).elements[3]},function(e){var t=this._shaderValues.getVector(3);t.elements[3]=e,this.tilingOffset=t}),a(0,n,"albedoColorR",function(){return this._ColorR},function(e){this._ColorR=e}),a(0,n,"albedoColorG",function(){return this._ColorG},function(e){this._ColorG=e}),a(0,n,"albedoColorB",function(){return this._ColorB},function(e){this._ColorB=e}),a(0,n,"tilingOffsetX",function(){return this._MainTex_STX},function(e){this._MainTex_STX=e}),a(0,n,"albedoColor",function(){return this._albedoColor},function(e){var t=this._shaderValues.getVector(2);Mi.scale(e,this._albedoIntensity,t),this._albedoColor=e,this._shaderValues.setVector(2,t)}),a(0,n,"albedoIntensity",function(){return this._albedoIntensity},function(e){this._AlbedoIntensity=e}),a(0,n,"albedoTexture",function(){return this._shaderValues.getTexture(1)},function(e){e?this._defineDatas.add(laya.d3.core.material.UnlitMaterial.SHADERDEFINE_ALBEDOTEXTURE):this._defineDatas.remove(laya.d3.core.material.UnlitMaterial.SHADERDEFINE_ALBEDOTEXTURE),this._shaderValues.setTexture(1,e)}),a(0,n,"tilingOffsetY",function(){return this._MainTex_STY},function(e){this._MainTex_STY=e}),a(0,n,"tilingOffsetZ",function(){return this._MainTex_STZ},function(e){this._MainTex_STZ=e}),a(0,n,"tilingOffsetW",function(){return this._MainTex_STW},function(e){this._MainTex_STW=e}),a(0,n,"tilingOffset",function(){return this._shaderValues.getVector(3)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._defineDatas.add(laya.d3.core.material.UnlitMaterial.SHADERDEFINE_TILINGOFFSET):this._defineDatas.remove(laya.d3.core.material.UnlitMaterial.SHADERDEFINE_TILINGOFFSET)}else this._defineDatas.remove(laya.d3.core.material.UnlitMaterial.SHADERDEFINE_TILINGOFFSET);this._shaderValues.setVector(3,e)}),a(0,n,"renderMode",null,function(e){var t=this.getRenderState();switch(e){case 0:this.alphaTest=!1,this.renderQueue=2e3,t.depthWrite=!0,t.cull=2,t.blend=0,t.depthTest=513;break;case 1:this.renderQueue=2450,this.alphaTest=!0,t.depthWrite=!0,t.cull=2,t.blend=0,t.depthTest=513;break;case 2:this.renderQueue=3e3,this.alphaTest=!1,t.depthWrite=!1,t.cull=2,t.blend=1,t.srcBlend=770,t.dstBlend=771,t.depthTest=513;break;default:throw new Error("UnlitMaterial : renderMode value error.")}}),t.__init__=function(){t.SHADERDEFINE_ALBEDOTEXTURE=t.shaderDefines.registerDefine("ALBEDOTEXTURE"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET")},t.RENDERMODE_OPAQUE=0,t.RENDERMODE_CUTOUT=1,t.RENDERMODE_TRANSPARENT=2,t.RENDERMODE_ADDTIVE=3,t.SHADERDEFINE_ALBEDOTEXTURE=0,t.SHADERDEFINE_TILINGOFFSET=0,t.ALBEDOTEXTURE=1,t.ALBEDOCOLOR=2,t.TILINGOFFSET=3,i(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi),tr=function(e){function t(){t.__super.call(this,5),this.setShaderName("WaterPrimary"),this._shaderValues.setVector(0,new Mi(.172,.463,.435,0)),this._shaderValues.setNumber(3,.15),this._shaderValues.setVector(4,new Mi(19,9,-16,-7))}r(t,"laya.d3.core.material.WaterPrimaryMaterial",e);var n=t.prototype;return a(0,n,"waveSpeed",function(){return this._shaderValues.getVector(4)},function(e){this._shaderValues.setVector(4,e)}),a(0,n,"horizonColor",function(){return this._shaderValues.getVector(0)},function(e){this._shaderValues.setVector(0,e)}),a(0,n,"mainTexture",function(){return this._shaderValues.getTexture(1)},function(e){e?this._defineDatas.add(laya.d3.core.material.WaterPrimaryMaterial.SHADERDEFINE_MAINTEXTURE):this._defineDatas.remove(laya.d3.core.material.WaterPrimaryMaterial.SHADERDEFINE_MAINTEXTURE),this._shaderValues.setTexture(1,e)}),a(0,n,"normalTexture",function(){return this._shaderValues.getTexture(2)},function(e){e?this._defineDatas.add(laya.d3.core.material.WaterPrimaryMaterial.SHADERDEFINE_NORMALTEXTURE):this._defineDatas.remove(laya.d3.core.material.WaterPrimaryMaterial.SHADERDEFINE_NORMALTEXTURE),this._shaderValues.setTexture(2,e)}),a(0,n,"waveScale",function(){return this._shaderValues.getNumber(3)},function(e){this._shaderValues.setNumber(3,e)}),t.__init__=function(){t.SHADERDEFINE_MAINTEXTURE=t.shaderDefines.registerDefine("MAINTEXTURE"),t.SHADERDEFINE_NORMALTEXTURE=t.shaderDefines.registerDefine("NORMALTEXTURE")},t.HORIZONCOLOR=0,t.MAINTEXTURE=1,t.NORMALTEXTURE=2,t.WAVESCALE=3,t.WAVESPEED=4,t.SHADERDEFINE_MAINTEXTURE=0,t.SHADERDEFINE_NORMALTEXTURE=0,i(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi),nr=function(e){function t(e,n,i,r){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===i&&(i=35044),void 0===r&&(r=!1),t.__super.call(this),this._indexType=e,this._indexCount=n,this._bufferUsage=i,this._bufferType=34963,this._canRead=r;var a=0;if("ushort"==e)this._indexTypeByteCount=2;else{if("ubyte"!=e)throw new Error("unidentification index type.");this._indexTypeByteCount=1}a=this._indexTypeByteCount*n,this._byteLength=a,this.bind(),p.instance.bufferData(this._bufferType,a,this._bufferUsage),r?("ushort"==e?this._buffer=new Uint16Array(n):"ubyte"==e&&(this._buffer=new Uint8Array(n)),this._setGPUMemory(2*a)):this._setGPUMemory(a),this._activeResource()}r(t,"laya.d3.graphics.IndexBuffer3D",e);var n=t.prototype;return n._bindForVAO=function(){p.instance.bindBuffer(34963,this._glBuffer)},n.bind=function(){return w.bindVertexArray(p.instance,null),h._bindedIndexBuffer!==this._glBuffer?(p.instance.bindBuffer(34963,this._glBuffer),h._bindedIndexBuffer=this._glBuffer,!0):!1},n.setData=function(e,t,n,i){void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=4294967295);var r=0;if("ushort"==this._indexType?(r=2,(0!==n||4294967295!==i)&&(e=new Uint16Array(e.buffer,n*r,i))):"ubyte"==this._indexType&&(r=1,(0!==n||4294967295!==i)&&(e=new Uint8Array(e.buffer,n*r,i))),this.bind(),p.instance.bufferSubData(this._bufferType,t*r,e),this._canRead)if(0!==t||0!==n||4294967295!==i){var a=this._buffer.length-t;i>a&&(i=a);for(var o=0;i>o;o++)this._buffer[t+o]=e[o]}else this._buffer=e},n.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},n._disposeResource=function(){e.prototype._disposeResource.call(this),this._buffer=null,this._setGPUMemory(0)},a(0,n,"indexType",function(){return this._indexType}),a(0,n,"indexTypeByteCount",function(){return this._indexTypeByteCount}),a(0,n,"indexCount",function(){return this._indexCount}),a(0,n,"canRead",function(){return this._canRead}),t.INDEXTYPE_UBYTE="ubyte",t.INDEXTYPE_USHORT="ushort",t.create=function(e,n,i,r){return void 0===i&&(i=35044),void 0===r&&(r=!1),new t(e,n,i,r)},t}(h),ir=function(e){function t(){t.__super.call(this,4),this.setShaderName("PARTICLESHURIKEN"),this._color=new Mi(1,1,1,1),this.renderMode=0}r(t,"laya.d3.core.particleShuriKen.ShurikenParticleMaterial",e);var n=t.prototype;return a(0,n,"_TintColorB",function(){return this._color.elements[2]},function(e){this._color.elements[2]=e,this.color=this._color}),a(0,n,"_MainTex_STZ",function(){return this._shaderValues.getVector(3).elements[2]},function(e){var t=this._shaderValues.getVector(3);t.elements[2]=e,this.tilingOffset=t}),a(0,n,"texture",function(){return this._shaderValues.getTexture(1)},function(e){e?this._defineDatas.add(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_DIFFUSEMAP):this._defineDatas.remove(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_DIFFUSEMAP),this._shaderValues.setTexture(1,e)}),a(0,n,"_TintColorR",function(){return this._color.elements[0]},function(e){this._color.elements[0]=e,this.color=this._color}),a(0,n,"_MainTex_STW",function(){return this._shaderValues.getVector(3).elements[3]},function(e){var t=this._shaderValues.getVector(3);t.elements[3]=e,this.tilingOffset=t}),a(0,n,"_TintColorG",function(){return this._color.elements[1]},function(e){this._color.elements[1]=e,this.color=this._color}),a(0,n,"_TintColorA",function(){return this._color.elements[3]},function(e){this._color.elements[3]=e,this.color=this._color}),a(0,n,"_MainTex_STY",function(){return this._shaderValues.getVector(3).elements[1]},function(e){var t=this._shaderValues.getVector(3);t.elements[1]=e,this.tilingOffset=t}),a(0,n,"renderMode",null,function(e){var n=this.getRenderState();switch(e){case 1:this.renderQueue=3e3,n.depthWrite=!1,n.cull=0,n.blend=1,n.srcBlend=770,n.dstBlend=771,this.alphaTest=!1,this._defineDatas.add(t.SHADERDEFINE_ADDTIVEFOG);break;case 0:this.renderQueue=3e3,n.depthWrite=!1,n.cull=0,n.blend=1,n.srcBlend=770,n.dstBlend=1,this.alphaTest=!1,this._defineDatas.remove(t.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("ShurikenParticleMaterial : renderMode value error.")}}),a(0,n,"_MainTex_STX",function(){return this._shaderValues.getVector(3).elements[0]},function(e){var t=this._shaderValues.getVector(3);t.elements[0]=e,this.tilingOffset=t}),a(0,n,"colorR",function(){return this._TintColorR},function(e){this._TintColorR=e}),a(0,n,"colorG",function(){return this._TintColorG},function(e){this._TintColorG=e}),a(0,n,"colorB",function(){return this._TintColorB},function(e){this._TintColorB=e}),a(0,n,"colorA",function(){return this._TintColorA},function(e){this._TintColorA=e}),a(0,n,"color",function(){return this._shaderValues.getVector(2)},function(e){e?this._defineDatas.add(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TINTCOLOR):this._defineDatas.remove(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TINTCOLOR),this._shaderValues.setVector(2,e)}),a(0,n,"tilingOffsetX",function(){return this._MainTex_STX},function(e){this._MainTex_STX=e}),a(0,n,"tilingOffsetY",function(){return this._MainTex_STY},function(e){this._MainTex_STY=e}),a(0,n,"tilingOffsetZ",function(){return this._MainTex_STZ},function(e){this._MainTex_STZ=e}),a(0,n,"tilingOffsetW",function(){return this._MainTex_STW},function(e){this._MainTex_STW=e}),a(0,n,"tilingOffset",function(){return this._shaderValues.getVector(3)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._defineDatas.add(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TILINGOFFSET):this._defineDatas.remove(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TILINGOFFSET)}else this._defineDatas.remove(laya.d3.core.particleShuriKen.ShurikenParticleMaterial.SHADERDEFINE_TILINGOFFSET);this._shaderValues.setVector(3,e)}),t.__init__=function(){t.SHADERDEFINE_DIFFUSEMAP=t.shaderDefines.registerDefine("DIFFUSEMAP"),t.SHADERDEFINE_TINTCOLOR=t.shaderDefines.registerDefine("TINTCOLOR"),t.SHADERDEFINE_ADDTIVEFOG=t.shaderDefines.registerDefine("ADDTIVEFOG"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET")},t.RENDERMODE_ALPHABLENDED=0,t.RENDERMODE_ADDTIVE=1,t.SHADERDEFINE_DIFFUSEMAP=0,t.SHADERDEFINE_TINTCOLOR=0,t.SHADERDEFINE_TILINGOFFSET=0,t.SHADERDEFINE_ADDTIVEFOG=0,t.DIFFUSETEXTURE=1,t.TINTCOLOR=2,t.TILINGOFFSET=3,i(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi),rr=function(e){function t(){t.__super.call(this,1),this.setShaderName("LineShader"),this._shaderValues.setVector(0,new Mi(1,1,1,1))}r(t,"laya.d3.core.pixelLine.PixelLineMaterial",e);var n=t.prototype;return a(0,n,"color",function(){return this._shaderValues.getVector(0)},function(e){this._shaderValues.setVector(0,e)}),t.__init__=function(){},t.COLOR=0,i(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi),ar=function(e){function t(){this._color=null,t.__super.call(this,4),this.setShaderName("Trail"),this._color=new Mi(1,1,1,1),this._shaderValues.setVector(2,new Mi(1,1,1,1)),this.renderMode=0}r(t,"laya.d3.core.trail.TrailMaterial",e);var n=t.prototype;return a(0,n,"_TintColorB",function(){return this._color.elements[2]},function(e){this._color.elements[2]=e,this.color=this._color}),a(0,n,"_MainTex_STZ",function(){return this._shaderValues.getVector(3).elements[2]},function(e){var t=this._shaderValues.getVector(3);t.elements[2]=e,this.tilingOffset=t}),a(0,n,"texture",function(){return this._shaderValues.getTexture(1)},function(e){e?this._defineDatas.add(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_MAINTEXTURE):this._defineDatas.remove(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_MAINTEXTURE),this._shaderValues.setTexture(1,e)}),a(0,n,"_TintColorR",function(){return this._color.elements[0]},function(e){this._color.elements[0]=e,this.color=this._color}),a(0,n,"_MainTex_STW",function(){return this._shaderValues.getVector(3).elements[3]},function(e){var t=this._shaderValues.getVector(3);t.elements[3]=e,this.tilingOffset=t}),a(0,n,"_TintColorG",function(){return this._color.elements[1]},function(e){this._color.elements[1]=e,this.color=this._color}),a(0,n,"_TintColorA",function(){return this._color.elements[3]},function(e){this._color.elements[3]=e,this.color=this._color}),a(0,n,"_MainTex_STY",function(){return this._shaderValues.getVector(3).elements[1]},function(e){var t=this._shaderValues.getVector(3);t.elements[1]=e,this.tilingOffset=t}),a(0,n,"renderMode",null,function(e){var n=this.getRenderState();switch(e){case 1:this.renderQueue=3e3,this.alphaTest=!1,n.depthWrite=!1,n.cull=0,n.blend=1,n.srcBlend=770,n.dstBlend=1,n.depthTest=513,this._defineDatas.add(t.SHADERDEFINE_ADDTIVEFOG);break;case 0:this.renderQueue=3e3,this.alphaTest=!1,n.depthWrite=!1,n.cull=0,n.blend=1,n.srcBlend=770,n.dstBlend=771,n.depthTest=513,this._defineDatas.remove(t.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("TrailMaterial : renderMode value error.")}}),a(0,n,"_MainTex_STX",function(){return this._shaderValues.getVector(3).elements[0]},function(e){var t=this._shaderValues.getVector(3);t.elements[0]=e,this.tilingOffset=t}),a(0,n,"colorR",function(){return this._TintColorR},function(e){this._TintColorR=e}),a(0,n,"colorG",function(){return this._TintColorG},function(e){this._TintColorG=e}),a(0,n,"colorB",function(){return this._TintColorB},function(e){this._TintColorB=e}),a(0,n,"colorA",function(){return this._TintColorA},function(e){this._TintColorA=e}),a(0,n,"color",function(){return this._shaderValues.getVector(2)},function(e){this._shaderValues.setVector(2,e)}),a(0,n,"tilingOffsetX",function(){return this._MainTex_STX},function(e){this._MainTex_STX=e}),a(0,n,"tilingOffsetY",function(){return this._MainTex_STY},function(e){this._MainTex_STY=e}),a(0,n,"tilingOffsetZ",function(){return this._MainTex_STZ},function(e){this._MainTex_STZ=e}),a(0,n,"tilingOffsetW",function(){return this._MainTex_STW},function(e){this._MainTex_STW=e}),a(0,n,"tilingOffset",function(){return this._shaderValues.getVector(3)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._defineDatas.add(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_TILINGOFFSET):this._defineDatas.remove(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_TILINGOFFSET)}else this._defineDatas.remove(laya.d3.core.trail.TrailMaterial.SHADERDEFINE_TILINGOFFSET);this._shaderValues.setVector(3,e)}),t.__init__=function(){t.SHADERDEFINE_MAINTEXTURE=t.shaderDefines.registerDefine("MAINTEXTURE"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET"),t.SHADERDEFINE_ADDTIVEFOG=t.shaderDefines.registerDefine("ADDTIVEFOG")},t.RENDERMODE_ALPHABLENDED=0,t.RENDERMODE_ADDTIVE=1,t.SHADERDEFINE_MAINTEXTURE=0,t.SHADERDEFINE_TILINGOFFSET=0,t.SHADERDEFINE_ADDTIVEFOG=0,t.MAINTEXTURE=1,t.TINTCOLOR=2,t.TILINGOFFSET=3,i(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi),or=function(e){function t(e,n,i){this._vertexCount=0,this._canRead=!1,this._vertexDeclaration=null,void 0===i&&(i=!1),t.__super.call(this),this._vertexCount=-1,this._bufferUsage=n,this._bufferType=34962,this._canRead=i,this._byteLength=e,this._setGPUMemory(e),this.bind(),p.instance.bufferData(this._bufferType,this._byteLength,this._bufferUsage),i&&(this._buffer=new Float32Array(this._byteLength/4)),this._activeResource()}r(t,"laya.d3.graphics.VertexBuffer3D",e);var n=t.prototype;return n._bindForVAO=function(){p.instance.bindBuffer(34962,this._glBuffer)},n.bind=function(){return h._bindedVertexBuffer!==this._glBuffer?(p.instance.bindBuffer(34962,this._glBuffer),h._bindedVertexBuffer=this._glBuffer,!0):!1},n.setData=function(e,t,n,i){if(void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=4294967295),(0!==n||4294967295!==i)&&(e=new Float32Array(e.buffer,4*n,i)),this.bind(),p.instance.bufferSubData(this._bufferType,4*t,e),this._canRead)if(0!==t||0!==n||4294967295!==i){var r=this._buffer.length-t;i>r&&(i=r);for(var a=0;i>a;a++)this._buffer[t+a]=e[a]}else this._buffer=e},n.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},n._disposeResource=function(){e.prototype._disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this._setGPUMemory(0)},a(0,n,"vertexDeclaration",function(){return this._vertexDeclaration},function(e){this._vertexDeclaration!==e&&(this._vertexDeclaration=e,this._vertexCount=e?this._byteLength/e.vertexStride:-1)}),a(0,n,"vertexCount",function(){return this._vertexCount}),a(0,n,"canRead",function(){return this._canRead}),t}(h),sr=(function(e){function t(){this.setShaderName("CartoonShader"),this._shaderValues.setVector(5,new Mi(.6663285,.6544118,1,1)),this._shaderValues.setNumber(6,0),this._shaderValues.setNumber(7,.7956449),this._shaderValues.setNumber(8,.9820514),this._shaderValues.setNumber(9,1),this._shaderValues.setNumber(10,.01581197),this._shaderValues.setNumber(11,1),t.__super.call(this,12)}r(t,"laya.d3.extension.cartoonRender.CartoonMaterial",e);var n=t.prototype;return a(0,n,"blendTexture",function(){return this._shaderValues.getTexture(2)},function(e){e?this._defineDatas.add(laya.d3.extension.cartoonRender.CartoonMaterial.SHADERDEFINE_BLENDTEXTURE):this._defineDatas.remove(laya.d3.extension.cartoonRender.CartoonMaterial.SHADERDEFINE_BLENDTEXTURE),this._shaderValues.setTexture(2,e)}),a(0,n,"albedoTexture",function(){return this._shaderValues.getTexture(1)},function(e){e?this._defineDatas.add(laya.d3.extension.cartoonRender.CartoonMaterial.SHADERDEFINE_ALBEDOTEXTURE):this._defineDatas.remove(laya.d3.extension.cartoonRender.CartoonMaterial.SHADERDEFINE_ALBEDOTEXTURE),this._shaderValues.setTexture(1,e)}),a(0,n,"shadowColor",function(){return this._shaderValues.getVector(5)},function(e){this._shaderValues.setVector(5,e)}),a(0,n,"outlineTexture",function(){return this._shaderValues.getTexture(3)},function(e){e?this._defineDatas.add(laya.d3.extension.cartoonRender.CartoonMaterial.SHADERDEFINE_OUTLINETEXTURE):this._defineDatas.remove(laya.d3.extension.cartoonRender.CartoonMaterial.SHADERDEFINE_OUTLINETEXTURE),this._shaderValues.setTexture(3,e)}),a(0,n,"shadowIntensity",function(){return this._shaderValues.getNumber(7)},function(e){e=Math.max(0,Math.min(1,e)),this._shaderValues.setNumber(7,e)}),a(0,n,"shadowRange",function(){return this._shaderValues.getNumber(6)},function(e){e=Math.max(0,Math.min(1,e)),this._shaderValues.setNumber(6,e)}),a(0,n,"specularRange",function(){return this._shaderValues.getNumber(8)},function(e){e=Math.max(.9,Math.min(1,e)),this._shaderValues.setNumber(8,e)}),a(0,n,"specularIntensity",function(){return this._shaderValues.getNumber(9)},function(e){e=Math.max(0,Math.min(1,e)),this._shaderValues.setNumber(9,e)}),a(0,n,"outlineWidth",function(){return this._shaderValues.getNumber(10)},function(e){e=Math.max(0,Math.min(.05,e)),this._shaderValues.setNumber(10,e)}),a(0,n,"outlineLightness",function(){return this._shaderValues.getNumber(11)},function(e){e=Math.max(0,Math.min(1,e)),this._shaderValues.setNumber(11,e)}),a(0,n,"tilingOffset",function(){return this._shaderValues.getVector(4)},function(e){if(e){var t=e.elements;1!=t[0]||1!=t[1]||0!=t[2]||0!=t[3]?this._defineDatas.add(laya.d3.extension.cartoonRender.CartoonMaterial.SHADERDEFINE_TILINGOFFSET):this._defineDatas.remove(laya.d3.extension.cartoonRender.CartoonMaterial.SHADERDEFINE_TILINGOFFSET)}else this._defineDatas.remove(laya.d3.extension.cartoonRender.CartoonMaterial.SHADERDEFINE_TILINGOFFSET);this._shaderValues.setVector(4,e)}),t.__init__=function(){t.SHADERDEFINE_ALBEDOTEXTURE=t.shaderDefines.registerDefine("ALBEDOTEXTURE"),t.SHADERDEFINE_BLENDTEXTURE=t.shaderDefines.registerDefine("BLENDTEXTURE"),t.SHADERDEFINE_OUTLINETEXTURE=t.shaderDefines.registerDefine("OUTLINETEXTURE"),t.SHADERDEFINE_TILINGOFFSET=t.shaderDefines.registerDefine("TILINGOFFSET")},t.initShader=function(){t.__init__();var e={a_Position:0,a_Normal:3,a_Texcoord0:2},n={u_MvpMatrix:[yi.MVPMATRIX,2],u_WorldMat:[yi.WORLDMATRIX,2],u_CameraPos:[0,3],u_AlbedoTexture:[1,1],u_BlendTexture:[2,1],u_OutlineTexture:[3,1],u_ShadowColor:[5,1],u_ShadowRange:[6,1],u_ShadowIntensity:[7,1],u_SpecularRange:[8,1],u_SpecularIntensity:[9,1],u_OutlineWidth:[10,1],u_OutlineLightness:[11,1],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Color":[4,4]},i=sn.add("CartoonShader",e,n,Sr.shaderDefines,laya.d3.extension.cartoonRender.CartoonMaterial.shaderDefines),r="attribute vec4 a_Position;\nattribute vec3 a_Normal;\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\nuniform float u_OutlineWidth;\n\nvarying vec2 v_Texcoord0;\n\nvoid main()\n{\n	v_Texcoord0 = a_Texcoord0;\n	\n	vec4 position = vec4(a_Position.xyz + a_Normal * u_OutlineWidth, 1.0);\n	gl_Position = u_MvpMatrix * position;\n}",a="#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\nstruct DirectionLight\n{\n	vec3 Color;\n	vec3 Direction;\n};\n\nvarying vec2 v_Texcoord0;\n\n#ifdef OUTLINETEXTURE\n	uniform sampler2D u_OutlineTexture;\n#endif\nuniform float u_OutlineLightness;\n\nvoid main()\n{\n	vec4 outlineTextureColor = vec4(1.0);\n	#ifdef OUTLINETEXTURE\n		outlineTextureColor = texture2D(u_OutlineTexture, v_Texcoord0);\n	#endif\n	\n	vec3 finalColor = outlineTextureColor.rgb * u_OutlineLightness;\n	\n	gl_FragColor = vec4(finalColor,0.0);\n}\n";i._addShaderPass(r,a);var o="attribute vec4 a_Position;\nattribute vec3 a_Normal;\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\nuniform mat4 u_WorldMat;\nuniform vec3 u_CameraPos;\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_PositionWorld;\nvarying vec3 v_ViewDir;\n\nvoid main()\n{\n	gl_Position = u_MvpMatrix * a_Position;\n	\n	mat3 worldMat = mat3(u_WorldMat);\n	v_PositionWorld = (u_WorldMat * a_Position).xyz;\n	v_Normal = worldMat * a_Normal;\n	v_Texcoord0 = a_Texcoord0;\n	\n	v_ViewDir = u_CameraPos - v_PositionWorld;\n}",s="#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\nstruct DirectionLight\n{\n	vec3 Color;\n	vec3 Direction;\n};\n\nvarying vec2 v_Texcoord0;\nvarying vec3 v_Normal;\nvarying vec3 v_PositionWorld;\nvarying vec3 v_ViewDir;\n\n#ifdef ALBEDOTEXTURE\n	uniform sampler2D u_AlbedoTexture;\n#endif\n\n#ifdef BLENDTEXTURE\n	uniform sampler2D u_BlendTexture;\n#endif\n\nuniform vec4 u_ShadowColor;\nuniform float u_ShadowRange;\nuniform float u_ShadowIntensity;\nuniform float u_SpecularRange;\nuniform float u_SpecularIntensity;\n\nuniform DirectionLight u_DirectionLight;\n\nvoid main()\n{\n	vec3 normal = normalize(v_Normal);\n	vec3 viewdir = normalize(v_ViewDir);\n	vec3 lightDir = normalize(u_DirectionLight.Direction);\n	\n	vec4 albedoTextureColor = vec4(1.0);\n	#ifdef ALBEDOTEXTURE\n		albedoTextureColor = texture2D(u_AlbedoTexture, v_Texcoord0);\n	#endif\n	\n	vec4 blendTextureColor = vec4(1.0); \n	#ifdef BLENDTEXTURE\n		blendTextureColor = texture2D(u_BlendTexture, v_Texcoord0);\n	#endif\n	\n	float blendTexColorG = blendTextureColor.g;\n	\n	//Overlay BlendMode 叠加\n	vec3 albedoColor;\n	albedoColor.r = albedoTextureColor.r > 0.5 ? 1.0 - 2.0 * (1.0 - albedoTextureColor.r) * (1.0 - blendTexColorG) : 2.0 * albedoTextureColor.r * blendTexColorG;\n	albedoColor.g = albedoTextureColor.g > 0.5 ? 1.0 - 2.0 * (1.0 - albedoTextureColor.g) * (1.0 - blendTexColorG) : 2.0 * albedoTextureColor.g * blendTexColorG;\n	albedoColor.b = albedoTextureColor.b > 0.5 ? 1.0 - 2.0 * (1.0 - albedoTextureColor.b) * (1.0 - blendTexColorG) : 2.0 * albedoTextureColor.b * blendTexColorG;\n	\n	albedoColor = clamp(albedoColor, 0.0, 1.0);\n	\n	float nl = max(dot(normal, -lightDir), 0.0);\n	\n	float shadowValue = nl + blendTexColorG - 0.5;\n	float shadow = step(shadowValue, u_ShadowRange);\n	if(u_ShadowRange > (shadowValue + 0.015))\n		shadow = 1.0;\n	else if(u_ShadowRange < (shadowValue - 0.015))\n		shadow = 0.0;\n	else\n		shadow = (u_ShadowRange - (shadowValue - 0.015)) / 0.03;\n		\n	shadow = clamp(shadow, 0.0, 1.0);\n	\n	//specularTextureColor.r 影响高光范围\n	float specular = step(u_SpecularRange, clamp(pow(nl, blendTextureColor.r), 0.0, 1.0));\n	//specularTextureColor.b 影响高光强度\n	specular = step(0.1, specular * blendTextureColor.b);\n	\n	vec3 albedoAreaColor = (1.0 - shadow) * albedoColor;\n	vec3 shadowAreaColor = shadow * albedoColor * u_ShadowColor.rgb * u_ShadowIntensity;\n	vec3 speculAreaColor = (1.0 - shadow) * albedoColor * u_SpecularIntensity * specular;\n	\n	vec3 finalColor = albedoAreaColor + speculAreaColor + shadowAreaColor;\n	\n	gl_FragColor = vec4(finalColor, 1.0);\n}\n";
i._addShaderPass(o,s)},t.ALBEDOTEXTURE=1,t.BLENDTEXTURE=2,t.OUTLINETEXTURE=3,t.TILINGOFFSET=4,t.SHADOWCOLOR=5,t.SHADOWRANGE=6,t.SHADOWINTENSITY=7,t.SPECULARRANGE=8,t.SPECULARINTENSITY=9,t.OUTLINEWIDTH=10,t.OUTLINELIGHTNESS=11,t.SHADERDEFINE_ALBEDOTEXTURE=0,t.SHADERDEFINE_BLENDTEXTURE=0,t.SHADERDEFINE_OUTLINETEXTURE=0,t.SHADERDEFINE_TILINGOFFSET=0,i(t,["shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi),function(e){function t(){this.setShaderName("LineShader"),t.__super.call(this,1)}return r(t,"laya.d3.extension.lineRender.LineMaterial",e),t.__init__=function(){},t.initShader=function(){var e={a_Position:0,a_Color:1,a_Texcoord0:2},t={u_MvpMatrix:[yi.MVPMATRIX,2],u_WorldMat:[yi.WORLDMATRIX,2]},n="attribute vec4 a_Position;\nattribute vec2 a_Texcoord0;\nattribute vec4 a_Color;\n\nuniform mat4 u_MvpMatrix;\nuniform mat4 u_WorldMat;\n\nvarying vec2 v_Texcoord0;\nvarying vec4 v_Color;\n\nvoid main()\n{\n	v_Texcoord0 = a_Texcoord0;\n	v_Color = a_Color;\n	\n	gl_Position = u_MvpMatrix * a_Position;\n	\n}",i="#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\nvarying vec2 v_Texcoord0;\nvarying vec4 v_Color;\n\nvoid main()\n{\n	\n	gl_FragColor = v_Color;\n}\n\n",r=sn.add("LineShader",e,t);r._addShaderPass(n,i)},i(t,["defaultMaterial",function(){return this.defaultMaterial=new t},"shaderDefines",function(){return this.shaderDefines=new hn(Vi.shaderDefines)}]),t}(Vi)),lr=function(e){function t(e){this._terrainRes=null,this._lightmapScaleOffset=null,t.__super.call(this),this._lightmapScaleOffset=new Mi(1,1,0,0),e&&(this._terrainRes=e,this.buildTerrain(e))}r(t,"laya.d3.terrain.Terrain",e);var i=t.prototype;return i._parse=function(t,n){e.prototype._parse.call(this,t,n),this.terrainRes=E.getRes(n[t.dataPath]);var i=t.lightmapIndex;null!=i&&this.setLightmapIndex(i);var r=t.lightmapScaleOffset;r&&this.setLightmapScaleOffset(new Mi(r[0],r[1],r[2],r[3]))},i.setLightmapIndex=function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];n.terrainRender.lightmapIndex=e}},i.setLightmapScaleOffset=function(e){if(e){e.cloneTo(this._lightmapScaleOffset);for(var t=0;t<this._children.length;t++){var n=this._children[t];n.terrainRender.lightmapScaleOffset=this._lightmapScaleOffset}}},i.disableLight=function(){for(var e=0,t=this._children.length;t>e;e++)for(var n=this._children[e],i=0,r=n._render.sharedMaterials.length;r>i;i++){var a=n._render.sharedMaterials[i];a.disableLight()}},i.buildTerrain=function(e){for(var t=e._chunkNumX,n=e._chunkNumZ,i=e._heightData,r=0,a=0;n>a;a++)for(var o=0;t>o;o++){for(var s=new Dr(o,a,e._gridSize,i._terrainHeightData,i._width,i._height,e._cameraCoordinateInverse),l=e._chunkInfos[r++],h=0;h<l.alphaMap.length;h++){var c=l.detailID[h].length,_=c>0?e._detailTextureInfos[l.detailID[h][0]].diffuseTexture:null,u=c>1?e._detailTextureInfos[l.detailID[h][1]].diffuseTexture:null,d=c>2?e._detailTextureInfos[l.detailID[h][2]].diffuseTexture:null,f=c>3?e._detailTextureInfos[l.detailID[h][3]].diffuseTexture:null,m=c>0?e._detailTextureInfos[l.detailID[h][0]].scale:null,p=c>1?e._detailTextureInfos[l.detailID[h][1]].scale:null,v=c>2?e._detailTextureInfos[l.detailID[h][2]].scale:null,E=c>3?e._detailTextureInfos[l.detailID[h][3]].scale:null;s.buildRenderElementAndMaterial(c,l.normalMap,l.alphaMap[h],_,u,d,f,e._materialInfo.ambientColor,e._materialInfo.diffuseColor,e._materialInfo.specularColor,m?m.x:1,m?m.y:1,p?p.x:1,p?p.y:1,v?v.x:1,v?v.y:1,E?E.x:1,E?E.y:1)}s.terrainRender.receiveShadow=!0,s.terrainRender.lightmapScaleOffset=this._lightmapScaleOffset,this.addChild(s)}},i.width=function(){return this._terrainRes._chunkNumX*fn.CHUNK_GRID_NUM*this._terrainRes._gridSize},i.depth=function(){return this._terrainRes._chunkNumZ*fn.CHUNK_GRID_NUM*this._terrainRes._gridSize},i.getHeightXZ=function(e,n){if(!this._terrainRes)return 0/0;if(e-=this.transform.position.x,n-=this.transform.position.z,t.__VECTOR3__||(t.__VECTOR3__=new Di),t.__VECTOR3__.elements[0]=e,t.__VECTOR3__.elements[1]=0,t.__VECTOR3__.elements[2]=n,Di.transformV3ToV3(t.__VECTOR3__,fn.__ADAPT_MATRIX_INV__,t.__VECTOR3__),e=t.__VECTOR3__.elements[0],n=t.__VECTOR3__.elements[2],0>e||e>this.width()||0>n||n>this.depth())return 0/0;var i=this._terrainRes._gridSize,r=parseInt(""+e/i),a=parseInt(""+n/i),o=e-r*i,s=n-a*i,l=0/0,h=0/0,c=0/0,_=0/0,u=0/0,d=this._terrainRes._heightData;return o+s>i?(l=d._terrainHeightData[(a+1-1)*d._width+r+1],h=d._terrainHeightData[(a+1-1)*d._width+r],c=d._terrainHeightData[(a-1)*d._width+r+1],_=(i-o)/i,u=(i-s)/i,l+(h-l)*_+(c-l)*u):(l=d._terrainHeightData[Math.max(0,a-1)*d._width+r],h=d._terrainHeightData[Math.min(d._width*d._height-1,(a+1-1)*d._width+r)],c=d._terrainHeightData[Math.min(d._width*d._height-1,Math.max(0,a-1)*d._width+r+1)],_=o/i,u=s/i,l+(h-l)*u+(c-l)*_)},a(0,i,"terrainRes",null,function(e){e&&(this._terrainRes=e,this.buildTerrain(e))}),t.load=function(e){n.loader.create(e,null,null,"TERRAIN",null,null,1,!1)},t.RENDER_LINE_MODEL=!1,t.LOD_TOLERANCE_VALUE=4,t.LOD_DISTANCE_FACTOR=2,t.__VECTOR3__=null,t}(yi),hr=function(e){function t(){t.__super.call(this),this._subMeshCount=1,this._primitveGeometry=new Yn}r(t,"laya.d3.resource.models.PrimitiveMesh",e);var n=t.prototype;return n._getPositions=function(){var e,t=this._primitveGeometry._vertexBuffer,n=[],i=t.vertexDeclaration.vertexElements,r=0;for(r=0;r<i.length;r++){var a=i[r];if("vector3"===a.elementFormat&&0===a.elementUsage){e=a;break}}var o=t.getData();for(r=0;r<o.length;r+=t.vertexDeclaration.vertexStride/4){var s=r+e.offset/4,l=new Di(o[s+0],o[s+1],o[s+2]);n.push(l)}return n},n._getSubMesh=function(e){return 0===e?this._primitveGeometry:null},n.setData=function(e,t,n){this.released||this.releaseResource();var i=new or(4*t.length,35044,!0);i.vertexDeclaration=e,i.setData(t);var r=new nr("ushort",n.length,35044,!0);r.setData(n);var a=new X;a.bindBufferState(),a.applyVertexBuffer(i),a.applyIndexBuffer(r),a.unBindBufferState(),this._primitveGeometry._applyBufferState(a),this._primitveGeometry._vertexBuffer=i,this._primitveGeometry._indexBuffer=r,this._setGPUMemory(2*(i._byteLength+r._byteLength)),this._activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()},n._disposeResource=function(){this._primitveGeometry.destroy(),this._setGPUMemory(0)},t}(wi),cr=function(e){function t(){this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._inverseBindPosesBuffer=null,this._bindPoseIndices=null,this._skinDataPathMarks=null,this._vertexCount=0,t.__super.call(this),this._subMeshes=[],this._vertexBuffers=[],this._skinDataPathMarks=[]}r(t,"laya.d3.resource.models.Mesh",e);var i=t.prototype;return i._getPositions=function(){var e,t,n,i,r,a=[],o=0,s=0,l=0,h=this._vertexBuffers.length;for(o=0;h>o;o++){for(e=this._vertexBuffers[o],n=e.vertexDeclaration.vertexElements,s=0;s<n.length;s++)if(i=n[s],"vector3"===i.elementFormat&&0===i.elementUsage){t=i;break}for(r=e.getData(),s=0;s<r.length;s+=e.vertexDeclaration.vertexStride/4)l=s+t.offset/4,a.push(new Di(r[l+0],r[l+1],r[l+2]))}return a},i._setSubMeshes=function(e){this._subMeshes=e,this._subMeshCount=e.length;for(var t=0;t<this._subMeshCount;t++)e[t]._indexInMesh=t;this._positions=this._getPositions(),this._generateBoundingObject()},i._getSubMesh=function(e){return this._subMeshes[e]},i._disposeResource=function(){for(var e=0;e<this._subMeshes.length;e++)this._subMeshes[e].dispose();this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer.destroy(),this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},a(0,i,"inverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),a(0,i,"vertexCount",function(){return this._vertexCount}),t._parse=function(e){var n=new t,i=e[0],r=e[1];return Pt.read(i,n,n._subMeshes,r),n},t.load=function(e,t){n.loader.create(e,t,null,"MESH")},t}(wi),_r=function(e){function t(e){t.__super.call(this,e),this._owner.transform.off("worldmatrixneedchanged",this,this._onWorldMatNeedChange),this._skinnedDataLoopMarks=[],this._cacheAnimationNode=[],this._localBoundingBoxCorners=o(8,null),this._owner.meshFilter.on("meshchanged",this,this._$3__onMeshChanged)}r(t,"laya.d3.core.SkinnedMeshRenderer",e);var n=t.prototype;return n._getCacheAnimationNodes=function(){var e=this._cacheMesh._boneNames,t=this._cacheMesh._bindPoseIndices,n=t.length;if(x.isConchApp){this._cacheAnimationNodeIndices=new Uint16Array(n);var i=this._cacheAnimator._avatarNodeMap;for(o=0;n>o;o++){var r=i[e[t[o]]];this._cacheAnimationNodeIndices[o]=r._worldMatrixIndex}}else{this._cacheAnimationNode.length=n;for(var a=this._cacheAnimator._avatarNodeMap,o=0;n>o;o++){var s=a[e[t[o]]];this._cacheAnimationNode[o]=s}}},n._computeBoneIndexToMeshWithAsyncAvatar=function(){this._computeBoneIndexToMeshWithAsyncMesh()},n._computeBoneIndexToMeshWithAsyncMesh=function(){this._getCacheAnimationNodes()},n._$3__onMeshChanged=function(e,t,n){this._cacheMesh=n,this._onMeshLoaded(n),this._cacheAvatar&&n&&this._computeBoneIndexToMeshWithAsyncAvatar()},n._onMeshLoaded=function(e){var t=e.subMeshCount;this._skinnedData=o(t),this._skinnedDataLoopMarks.length=e._bindPoseIndices.length;for(var n=0;t>n;n++)for(var i=e._getSubMesh(n)._boneIndicesList,r=i.length,a=this._skinnedData[n]=o(r),s=0;r>s;s++)a[s]=new Float32Array(16*i[s].length)},n._computeSkinnedData=function(){if(this._cacheMesh&&this._cacheAvatar)for(var e=this._cacheMesh._inverseBindPoses,t=this._cacheMesh._bindPoseIndices,n=this._cacheMesh._skinDataPathMarks,i=0,r=this._cacheMesh.subMeshCount;r>i;i++){for(var a=this._cacheMesh._getSubMesh(i)._boneIndicesList,o=this._skinnedData[i],s=0,l=a.length;l>s;s++){var h=a[s];x.isConchApp?this._computeSubSkinnedDataNative(this._cacheAnimator._animationNodeWorldMatrixs,this._cacheAnimationNodeIndices,this._cacheMesh._inverseBindPosesBuffer,h,t,o[s]):this._computeSubSkinnedData(e,h,t,o[s],n)}this._renderElements[i].skinnedDatas=o}},n._computeSubSkinnedData=function(e,t,n,i,r){for(var a=0,o=t.length;o>a;a++){var s=t[a];if(this._skinnedDataLoopMarks[s]===C.loopCount)for(var l=r[s],h=this._skinnedData[l[0]][l[1]],c=16*l[2],_=16*a,u=0;16>u;u++)i[_+u]=h[c+u];else gn._mulMatrixArray(this._cacheAnimationNode[s].transform.getWorldMatrix(),e[n[s]],i,16*a),this._skinnedDataLoopMarks[s]=C.loopCount}},n._setCacheAnimator=function(e){this._cacheAnimator=e},n._setRootBone=function(e){this._rootBone=e},n._setCacheAvatar=function(e){this._cacheAvatar!==e&&(this._cacheMesh?(this._cacheAvatar=e,e&&(this._defineDatas.add(Sr.SHADERDEFINE_BONE),this._computeBoneIndexToMeshWithAsyncAvatar())):this._cacheAvatar=e)},n._calculateBoundingBox=function(){if(this._cacheAnimator){var t=this._cacheAnimator._avatarNodeMap[this._rootBone];null==t||null==this._localBoundBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(this._localBoundingBoxCorners)}else e.prototype._calculateBoundingBox.call(this)},n._calculateBoundingSphere=function(){if(this._cacheAnimator){var t=this._cacheAnimator._avatarNodeMap[this._rootBone];null==t||null==this.localBoundSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(this.localBoundSphere)}else e.prototype._calculateBoundingSphere.call(this)},n._updateOctreeNode=function(){var e=this._treeNode;e&&e.updateObject(this)},n._renderUpdate=function(e,t){if(this._cacheAnimator){this._computeSkinnedData();var n=this._cacheAnimator.owner._transform._parent,i=n?n.worldMatrix:Wt.DEFAULT;this._shaderValues.setMatrix4x4(yi.WORLDMATRIX,i)}else this._shaderValues.setMatrix4x4(yi.WORLDMATRIX,t.worldMatrix)},n._renderUpdateWithCamera=function(e,t){var n=e.projectionViewMatrix;if(this._cacheAnimator){var i=this._cacheAnimator.owner._transform._parent,r=i?i.worldMatrix:Wt.DEFAULT;Wt.multiply(n,r,this._projectionViewWorldMatrix)}else Wt.multiply(n,t.worldMatrix,this._projectionViewWorldMatrix);this._shaderValues.setMatrix4x4(yi.MVPMATRIX,this._projectionViewWorldMatrix),Sn.debugMode&&this._renderRenderableBoundBox()},n._computeSubSkinnedDataNative=function(e,t,n,i,r,a){p.instance.computeSubSkinnedData(e,t,n,i,r,a)},a(0,n,"localBoundBox",function(){return this._localBoundBox},function(e){this._localBoundBox=e,e.getCorners(this._localBoundingBoxCorners)}),a(0,n,"boundingSphere",function(){return this._calculateBoundingSphere(),this._boundingSphere}),a(0,n,"boundingBox",function(){return this._calculateBoundingBox(),this._boundingBox}),a(0,n,"boundingBoxCenter",function(){var e=this.boundingBox;return Di.add(e.min,e.max,this._boundingBoxCenter),Di.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenter}),t}(bi),ur=(function(e){function t(e,n){void 0===e&&(e=1),void 0===n&&(n=En.COLLISIONFILTERGROUP_ALLFILTER),t.__super.call(this,e,n)}r(t,"laya.d3.physics.PhysicsCollider",e);var n=t.prototype;return n._addToSimulation=function(){this.owner.isStatic||this._simulation._dynamicPhysicsColliders.push(this),this._simulation._addPhysicsCollider(this,this._collisionGroup,this._canCollideWith)},n._removeFromSimulation=function(){if(this._simulation._removePhysicsCollider(this),!this.owner.isStatic){var e=this._simulation._dynamicPhysicsColliders;e.splice(e.indexOf(this),1)}},n._parse=function(e){this.friction=e.friction,this.rollingFriction=e.rollingFriction,this.restitution=e.restitution,this.isTrigger=e.isTrigger,this._parseShape(e.shapes)},n._onAdded=function(){var t=Sn._physics3D,n=new t.btCollisionObject;n.setUserIndex(this.id),n.forceActivationState(5);var i=n.getCollisionFlags();this.owner.isStatic?((2&i)>0&&(i=2^i),i=1|i):((1&i)>0&&(i=1^i),i=2|i),n.setCollisionFlags(i),this._nativeColliderObject=n,e.prototype._onAdded.call(this)},t}(zi),function(e){function t(e,n){this._isKinematic=!1,this._mass=1,this._angularDamping=0,this._linearDamping=0,this._overrideGravity=!1,this._detectCollisions=!0,this._gravity=new Di(0,-10,0),this._totalTorque=new Di(0,0,0),void 0===e&&(e=1),void 0===n&&(n=En.COLLISIONFILTERGROUP_ALLFILTER),t.__super.call(this,e,n)}r(t,"laya.d3.physics.Rigidbody3D",e);var n=t.prototype;return n._delegateMotionStateGetWorldTransform=function(e){var t=this._rigidbody;if(t._colliderShape){t._simulation._updatedRigidbodies++;var n=Sn._physics3D,i=n.wrapPointer(e,n.btTransform);t._derivePhysicsTransformation(i)}},n._delegateMotionStateSetWorldTransform=function(e){var t=this._rigidbody;t._simulation._updatedRigidbodies++;var n=Sn._physics3D,i=n.wrapPointer(e,n.btTransform);t._updateTransformComponent(i)},n._delegateMotionStateClear=function(){this._rigidbody=null},n._onAdded=function(){var n=Sn._physics3D,i=new n.LayaMotionState;i.getWorldTransform=this._delegateMotionStateGetWorldTransform,i.setWorldTransform=this._delegateMotionStateSetWorldTransform,i.clear=this._delegateMotionStateClear,i._rigidbody=this,this._nativeMotionState=i;var r=new n.btRigidBodyConstructionInfo(0,i,null,t._nativeVector3Zero),a=new n.btRigidBody(r);a.setUserIndex(this.id),this._nativeColliderObject=a,e.prototype._onAdded.call(this),this.mass=this._mass,this.linearDamping=this._linearDamping,this.angularDamping=this._angularDamping,this.overrideGravity=this._overrideGravity,this.gravity=this._gravity,this.isKinematic=this._isKinematic,n.destroy(r)},n._onShapeChange=function(e){laya.d3.physics.PhysicsComponent.prototype._onShapeChange.call(this,e);var n=this._nativeColliderObject;e._nativeShape.calculateLocalInertia(this._mass,t._nativeInertia),n.setMassProps(this._mass,t._nativeInertia),n.updateInertiaTensor()},n._parse=function(e){this.friction=e.friction,this.rollingFriction=e.rollingFriction,this.restitution=e.restitution,this.isTrigger=e.isTrigger,this.mass=e.mass,this.isKinematic=e.isKinematic,this.linearDamping=e.linearDamping,this.angularDamping=e.angularDamping,this.overrideGravity=e.overrideGravity,this.gravity.fromArray(e.gravity),this.gravity=this.gravity,this._parseShape(e.shapes)},n._onDestroy=function(){var e=Sn._physics3D;this._nativeMotionState.clear(),e.destroy(this._nativeMotionState),this._simulation._removeRigidBody(this),this._destroy(),this._nativeMotionState=null,this._gravity=null,this._totalTorque=null,this._linearVelocity=null,this._angularVelocity=null,this._linearFactor=null,this._angularFactor=null},n._addToSimulation=function(){this._simulation._addRigidBody(this,this._collisionGroup,this._detectCollisions?this._canCollideWith:0)},n._removeFromSimulation=function(){this._simulation._removeRigidBody(this)},n.applyImpulse=function(e,n){if(null==this._nativeColliderObject)throw"Attempted to call a Physics function that is avaliable only when the Entity has been already added to the Scene.";var i=e.elements;if(t._nativeImpulse.setValue(-i[0],i[1],i[2]),n){var r=n.elements;t._nativeImpulseOffset.setValue(-r[0],r[1],r[2]),this._nativeColliderObject.applyImpulse(t._nativeImpulse,t._nativeImpulseOffset)}else this._nativeColliderObject.applyCentralImpulse(t._nativeImpulse)},n.applyForce=function(e,n){if(null==this._nativeColliderObject)throw"Attempted to call a Physics function that is avaliable only when the Entity has been already added to the Scene.";var i=t._nativeTempVector30,r=e.elements;if(i.setValue(-r[0],r[1],r[2]),n){var a=n.elements,o=t._nativeTempVector31;o.setValue(-a[0],a[1],a[2]),this._nativeColliderObject.applyForce(i,o)}else this._nativeColliderObject.applyCentralForce(i)},n.applyTorque=function(e){if(null==this._nativeColliderObject)throw"Attempted to call a Physics function that is avaliable only when the Entity has been already added to the Scene.";var n=t._nativeTempVector30,i=e.elements;n.setValue(-i[0],i[1],i[2]),this._nativeColliderObject.applyTorque(n)},n.applyTorqueImpulse=function(e){if(null==this._nativeColliderObject)throw"Attempted to call a Physics function that is avaliable only when the Entity has been already added to the Scene.";var n=t._nativeTempVector30,i=e.elements;n.setValue(-i[0],i[1],i[2]),this._nativeColliderObject.applyTorqueImpulse(n)},n.clearForces=function(){var e=this._nativeColliderObject;if(null==e)throw"Attempted to call a Physics function that is avaliable only when the Entity has been already added to the Scene.";e.clearForces();var n=t._nativeVector3Zero;e.setInterpolationAngularVelocity(n),e.setLinearVelocity(n),e.setInterpolationAngularVelocity(n),e.setAngularVelocity(n)},a(0,n,"angularDamping",function(){return this._angularDamping},function(e){this._angularDamping=e,this._nativeColliderObject&&this._nativeColliderObject.setDamping(this._linearDamping,e)}),a(0,n,"mass",function(){return this._mass},function(e){if(0>e)throw"Rigidbody:the mass of Rigidbody can't be negative.";this._mass=e,this._nativeColliderObject&&this._colliderShape&&(this._colliderShape._nativeShape.calculateLocalInertia(e,t._nativeInertia),this._nativeColliderObject.setMassProps(e,t._nativeInertia),this._nativeColliderObject.updateInertiaTensor())}),a(0,n,"linearDamping",function(){return this._linearDamping},function(e){this._linearDamping=e,this._nativeColliderObject&&this._nativeColliderObject.setDamping(e,this._angularDamping)}),a(0,n,"isKinematic",function(){return this._isKinematic},function(e){this._isKinematic=e;var n=this._nativeColliderObject,i=n.getCollisionFlags();e?((1&i)>0&&(i=1^i),i=2|i,n.setCollisionFlags(i),this._nativeColliderObject.forceActivationState(4),this._enableProcessCollisions=!1):((1&i)>0&&(i=1^i),(2&i)>0&&(i=2^i),n.setCollisionFlags(i),this._nativeColliderObject.setActivationState(1),this._enableProcessCollisions=!0);var r=t._nativeVector3Zero;n.setInterpolationLinearVelocity(r),n.setLinearVelocity(r),n.setInterpolationAngularVelocity(r),n.setAngularVelocity(r)}),a(0,n,"gravity",function(){return this._gravity},function(e){this._gravity=e,t._nativeGravity.setValue(-e.x,e.y,e.z),this._nativeColliderObject.setGravity(t._nativeGravity)}),a(0,n,"overrideGravity",function(){return this._overrideGravity},function(e){if(this._overrideGravity=e,this._nativeColliderObject){var t=this._nativeColliderObject.getFlags();e?0===(1&t)&&this._nativeColliderObject.setFlags(1|t):(1&t)>0&&this._nativeColliderObject.setFlags(1^t)}}),a(0,n,"totalForce",function(){return this._nativeColliderObject?this._nativeColliderObject.getTotalForce():null}),a(0,n,"angularFactor",function(){return this._angularFactor},function(e){if(this._angularFactor=e,this._nativeColliderObject){var n=e.elements,i=t._nativeTempVector30;i.setValue(n[0],n[1],n[2]),this._nativeColliderObject.setAngularFactor(i)}}),a(0,n,"detectCollisions",function(){return this._detectCollisions},function(e){this._detectCollisions!==e&&(this._detectCollisions=e,this._colliderShape&&this._enabled&&this._simulation&&(this._simulation._removeRigidBody(this),this._simulation._addRigidBody(this,this._collisionGroup,e?this._canCollideWith:0)))}),a(0,n,"linearFactor",function(){return this._linearFactor},function(e){if(this._linearFactor=e,this._nativeColliderObject){var n=e.elements,i=t._nativeTempVector30;i.setValue(n[0],n[1],n[2]),this._nativeColliderObject.setLinearFactor(i)}}),a(0,n,"linearVelocity",function(){return this._linearVelocity},function(e){if(this._linearVelocity=e,this._nativeColliderObject){var n=e.elements,i=t._nativeTempVector30;i.setValue(-n[0],n[1],n[2]),this._nativeColliderObject.setLinearVelocity(i)}}),a(0,n,"angularVelocity",function(){return this._angularVelocity},function(e){if(this._angularVelocity=e,this._nativeColliderObject){var n=e.elements,i=t._nativeTempVector30;i.setValue(-n[0],n[1],n[2]),this._nativeColliderObject.setAngularVelocity(i)}}),a(0,n,"totalTorque",function(){if(this._nativeColliderObject){var e=this._nativeColliderObject.getTotalTorque(),t=this._totalTorque.elements;t[0]=-e.x,t[1]=e.y,t[2]=e.z}return null}),t.TYPE_STATIC=0,t.TYPE_DYNAMIC=1,t.TYPE_KINEMATIC=2,t._BT_DISABLE_WORLD_GRAVITY=1,t._BT_ENABLE_GYROPSCOPIC_FORCE=2,i(t,["_nativeTempVector30",function(){return this._nativeTempVector30=new Sn._physics3D.btVector3(0,0,0)},"_nativeTempVector31",function(){return this._nativeTempVector31=new Sn._physics3D.btVector3(0,0,0)},"_nativeVector3Zero",function(){return this._nativeVector3Zero=new Sn._physics3D.btVector3(0,0,0)},"_nativeInertia",function(){return this._nativeInertia=new Sn._physics3D.btVector3(0,0,0)},"_nativeImpulse",function(){return this._nativeImpulse=new Sn._physics3D.btVector3(0,0,0)},"_nativeImpulseOffset",function(){return this._nativeImpulseOffset=new Sn._physics3D.btVector3(0,0,0)},"_nativeGravity",function(){return this._nativeGravity=new Sn._physics3D.btVector3(0,0,0)}]),t}(zi),function(e){function t(){this.simLodInfo=null,this._buffer=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,t.__super.call(this,0,!1),this._glTextureType=3553}r(t,"laya.d3.resource.DataTexture2D",e);var n=t.prototype;return n.genDebugMipmaps=function(){var e=[];return e.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),e.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),e.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),e.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),e.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),e.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),e.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),e.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),e.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),e.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),e},n._onTextureLoaded=function(){},n._createWebGlTexture=function(){if(!this._buffer&&!this._mipmaps)throw"create GLTextur err:no data";var e=p.instance;e.getExtension("EXT_shader_texture_lod");var n=this._width,i=this._height;if(w.bindTexture(e,this._glTextureType,this._glTexture),this._mipmaps)if(laya.d3.resource.DataTexture2D.lodasatlas){var r=0;e.texImage2D(this._glTextureType,0,6408,this._width,this._height,0,6408,5121,null);for(var a=0;a<this._mipmaps.length;a++){if(this._mipmaps[a].byteLength!=o*s*4)throw"mipmap size error  level:"+a;e.texSubImage2D(this._glTextureType,0,t.simLodRect[r++],t.simLodRect[r++],t.simLodRect[r++],t.simLodRect[r++],6408,5121,new Uint8Array(this._mipmaps[a]))}}else{var o=this._width,s=this._height;for(r=0,e.texImage2D(this._glTextureType,0,6408,this._width,this._height,0,6408,5121,null),a=0;a<this._mipmaps.length;a++){if(this._mipmaps[a].byteLength!=o*s*4)throw"mipmap size error  level:"+a;e.texImage2D(this._glTextureType,a,6408,o,s,0,6408,5121,new Uint8Array(this._mipmaps[a])),o/=2,s/=2,1>o&&(o=1),1>s&&(s=1)}}else e.texImage2D(this._glTextureType,0,6408,n,i,0,6408,5121,new Uint8Array(this._buffer))},n._onAsynLoaded=function(){var e;e&&(this._width=e.width,this._height=e.height,this._buffer=e.data)},n.getPixels=function(){return new Uint8Array(this._buffer)},n._disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._glTexture&&(p.instance.deleteTexture(this._glTexture),this._glTexture=null,this._buffer=null,this._setGPUMemory(0))},t.create=function(e,t,n,i,r,a){return void 0===i&&(i=9729),void 0===r&&(r=9729),void 0===a&&(a=!0),null},t.load=function(e,t,n,i,r){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=9729),void 0===r&&(r=9729),null},t.lodasatlas=!1,i(t,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),t}(s)),dr=function(e){function t(e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=0),t.__super.call(this,i,!1),this._glTextureType=3553,this._width=e,this._height=n,this._depthStencilFormat=r,this._create(e,n)}r(t,"laya.d3.resource.RenderTexture",e);var n=t.prototype;return n._create=function(e,t){var n=p.instance;this._frameBuffer=n.createFramebuffer(),w.bindTexture(n,this._glTextureType,this._glTexture);var i=this._getGLFormat();if(n.texImage2D(this._glTextureType,0,i,e,t,0,i,5121,null),this._setGPUMemory(e*t*4),n.bindFramebuffer(36160,this._frameBuffer),n.framebufferTexture2D(36160,36064,3553,this._glTexture,0),3!==this._depthStencilFormat)switch(this._depthStencilBuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,this._depthStencilBuffer),this._depthStencilFormat){case 0:n.renderbufferStorage(36161,33189,e,t),n.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 1:n.renderbufferStorage(36161,36168,e,t),n.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 2:n.renderbufferStorage(36161,34041,e,t),n.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer);break;default:throw"RenderTexture: unkonw depth format."}n.bindFramebuffer(36160,null),n.bindRenderbuffer(36161,null),this._setWarpMode(10242,this._wrapModeU),this._setWarpMode(10243,this._wrapModeV),this._setFilterMode(this._filterMode),this._setAnisotropy(this._anisoLevel),this._readyed=!0,this._activeResource()},n.generateMipmap=function(){this._isPot(this.width)&&this._isPot(this.height)?(this._mipmap=!0,p.instance.generateMipmap(this._glTextureType),this._setFilterMode(this._filterMode),this._setGPUMemory(this.width*this.height*4*(1+1/3))):(this._mipmap=!1,this._setGPUMemory(this.width*this.height*4*(1+1/3)))},n.start=function(){p.instance.bindFramebuffer(36160,this._frameBuffer),t._currentActive=this,this._readyed=!1},n.end=function(){p.instance.bindFramebuffer(36160,null),t._currentActive=null,this._readyed=!0},n.getData=function(e,t,n,i,r){var a=p.instance;a.bindFramebuffer(36160,this._frameBuffer);var o=36053===a.checkFramebufferStatus(36160);return o?(a.readPixels(e,t,n,i,6408,5121,r),a.bindFramebuffer(36160,null),r):(a.bindFramebuffer(36160,null),null)},n._disposeResource=function(){if(this._frameBuffer){var e=p.instance;e.deleteTexture(this._glTexture),e.deleteFramebuffer(this._frameBuffer),e.deleteRenderbuffer(this._depthStencilBuffer),this._glTexture=null,this._frameBuffer=null,this._depthStencilBuffer=null,this._setGPUMemory(0)}},a(0,n,"depthStencilFormat",function(){return this._depthStencilFormat}),a(0,n,"defaulteTexture",function(){return O.grayTexture}),a(1,t,"currentActive",function(){return t._currentActive},laya.webgl.resource.BaseTexture._$SET_currentActive),t._currentActive=null,t}(s),fr=function(e){function t(e,n){void 0===e&&(e=0),void 0===n&&(n=!1),t.__super.call(this,e,n),this._glTextureType=34067}r(t,"laya.d3.resource.TextureCube",e);var i=t.prototype;return i.setSixSideImageSources=function(e,t){void 0===t&&(t=!1);for(var n=0,i=0,r=0;6>r;r++){var a=e[r].width,o=e[r].height;if(r>0&&n!==a)throw"TextureCube: each side image's width and height must same.";if(n=a,i=o,n!==i)throw"TextureCube: each side image's width and height must same."}this._width=n,this._height=i;var s=p.instance;w.bindTexture(s,this._glTextureType,this._glTexture);var l=this._getGLFormat();if(x.isConchApp){if(1==t)for(var h=0;6>h;h++)e[h].setPremultiplyAlpha(t);s.texImage2D(34073,0,6408,6408,5121,e[0]),s.texImage2D(34074,0,6408,6408,5121,e[1]),s.texImage2D(34069,0,6408,6408,5121,e[2]),s.texImage2D(34070,0,6408,6408,5121,e[3]),s.texImage2D(34071,0,6408,6408,5121,e[4]),s.texImage2D(34072,0,6408,6408,5121,e[5])}else t&&s.pixelStorei(37441,!0),s.texImage2D(34073,0,l,l,5121,e[0]),s.texImage2D(34074,0,l,l,5121,e[1]),s.texImage2D(34069,0,l,l,5121,e[2]),s.texImage2D(34070,0,l,l,5121,e[3]),s.texImage2D(34071,0,l,l,5121,e[4]),s.texImage2D(34072,0,l,l,5121,e[5]),t&&s.pixelStorei(37441,!1);this._mipmap&&this._isPot(n)&&this._isPot(i)?(s.generateMipmap(this._glTextureType),this._setGPUMemory(n*i*4*(1+1/3)*6)):this._setGPUMemory(n*i*4*6),this._setWarpMode(10242,this._wrapModeU),this._setWarpMode(10243,this._wrapModeV),this._setFilterMode(this._filterMode),this._readyed=!0,this._activeResource()},i.setSixSidePixels=function(e,t,n){if(0>=e||0>=t)throw new Error("TextureCube:width or height must large than 0.");if(!n)throw new Error("TextureCube:pixels can't be null.");this._width=e,this._height=t;var i=p.instance;w.bindTexture(i,this._glTextureType,this._glTexture);var r=this._getGLFormat();i.texImage2D(34073,0,r,e,t,0,r,5121,n[0]),i.texImage2D(34074,0,r,e,t,0,r,5121,n[1]),i.texImage2D(34069,0,r,e,t,0,r,5121,n[2]),i.texImage2D(34070,0,r,e,t,0,r,5121,n[3]),i.texImage2D(34071,0,r,e,t,0,r,5121,n[4]),i.texImage2D(34072,0,r,e,t,0,r,5121,n[5]),this._mipmap&&this._isPot(e)&&this._isPot(t)?(i.generateMipmap(this._glTextureType),this._setGPUMemory(e*t*4*(1+1/3)*6)):this._setGPUMemory(e*t*4*6),this._setWarpMode(10242,this._wrapModeU),this._setWarpMode(10243,this._wrapModeV),this._setFilterMode(this._filterMode),this._readyed=!0,this._activeResource()},i._recoverResource=function(){},a(0,i,"defaulteTexture",function(){return t.grayTexture}),t.__init__=function(){var e=new Uint8Array(3);e[0]=128,e[1]=128,e[2]=128,t.grayTexture=new t(0,!1),t.grayTexture.setSixSidePixels(1,1,[e,e,e,e,e,e]),t.grayTexture.lock=!0},t._parse=function(e,n,i){var r=i?new t(i[0],i[1]):new t;return r.setSixSideImageSources(e),r},t.load=function(e,t){n.loader.create(e,t,null,"TEXTURECUBE")},t.grayTexture=null,t}(s),mr=function(e){function t(e,n,i){void 0===e&&(e=0),void 0===n&&(n=.3),void 0===i&&(i=1e3),this._viewMatrix=new Wt,this._projectionMatrix=new Wt,this._projectionViewMatrix=new Wt,this._projectionViewMatrixNoTranslateScale=new Wt,this._viewport=new Kt(0,0,0,0),this._normalizedViewport=new Kt(0,0,1,1),this._aspectRatio=e,this._boundFrustumUpdate=!0,this._boundFrustum=new Bt(Wt.DEFAULT),x.isConchApp&&(this._boundFrustumBuffer=new Float32Array(24)),t.__super.call(this,n,i),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}r(t,"laya.d3.core.Camera",e);var o=t.prototype;return o._calculationViewport=function(e,t,n){this._viewport.x=Math.min(Math.max(e.x*t,0),t),this._viewport.y=Math.min(Math.max(e.y*n,0),n),this._viewport.width=Math.min(Math.max(e.width*t,0),t),this._viewport.height=Math.min(Math.max(e.height*n,0),n)},o._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},o._parse=function(t,n){e.prototype._parse.call(this,t,n);var i=t.viewport;this.normalizedViewport=new Kt(i[0],i[1],i[2],i[3])},o._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var e=this.orthographicVerticalSize*this.aspectRatio*.5,t=.5*this.orthographicVerticalSize;
Wt.createOrthoOffCenterRH(-e,e,-t,t,this.nearPlane,this.farPlane,this._projectionMatrix)}else Wt.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},o.render=function(e){var t=p.instance,n=Et._instance,i=n.scene=this._scene;if(i.parallelSplitShadowMaps[0]){var r=i.parallelSplitShadowMaps[0];r._calcAllLightCameraInfo(this),i._defineDatas.add(ki.SHADERDEFINE_CAST_SHADOW);for(var a=0,o=r.shadowMapCount;o>a;a++){var s=r.cameras[a];n.camera=s,n.projectionViewMatrix=s.projectionViewMatrix,At.renderObjectCulling(s,i,n,i._castShadowRendersPool);var l=r.cameras[a+1].renderTarget;l.start(),n.camera=s,n.viewport=s.viewport,s._prepareCameraToRender(),s._prepareCameraViewProject(s.viewMatrix,s.projectionMatrix,s._projectionViewMatrixNoTranslateScale),i._clear(t,n);var h=i._opaqueQueue;h._render(n,!1),l.end()}i._defineDatas.remove(ki.SHADERDEFINE_CAST_SHADOW)}n.camera=this,i._preRenderScript();var c,_;c=n.viewMatrix=this.viewMatrix;var u=this._renderTarget;u?(u.start(),Wt.multiply(Wi._invertYScaleMatrix,this._projectionMatrix,Wi._invertYProjectionMatrix),Wt.multiply(Wi._invertYScaleMatrix,this.projectionViewMatrix,Wi._invertYProjectionViewMatrix),_=n.projectionMatrix=Wi._invertYProjectionMatrix,n.projectionViewMatrix=Wi._invertYProjectionViewMatrix):(_=n.projectionMatrix=this._projectionMatrix,n.projectionViewMatrix=this.projectionViewMatrix),n.viewport=this.viewport,this._prepareCameraToRender(),this._prepareCameraViewProject(c,_,this._projectionViewMatrixNoTranslateScale),i._preCulling(n,this),i._clear(t,n),i._renderScene(t,n,e),i._postRenderScript(),u&&u.end()},o.viewportPointToRay=function(e,t){Tn.calculateCursorRay(e,this.viewport,this._projectionMatrix,this.viewMatrix,null,t)},o.normalizedViewportPointToRay=function(e,n){var i=t._tempVector20,r=this.viewport,a=e.elements,o=i.elements;o[0]=a[0]*r.width,o[1]=a[1]*r.height,Tn.calculateCursorRay(i,this.viewport,this._projectionMatrix,this.viewMatrix,null,n)},o.worldToViewportPoint=function(e,t){Wt.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(e,this._projectionViewMatrix,t);var i=t.elements;i[0]=i[0]/n.stage.clientScaleX,i[1]=i[1]/n.stage.clientScaleY},o.worldToNormalizedViewportPoint=function(e,t){Wt.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(e,this._projectionViewMatrix,t);var i=t.elements;i[0]=i[0]/n.stage.clientScaleX,i[1]=i[1]/n.stage.clientScaleY},o.convertScreenCoordToOrthographicCoord=function(e,t){if(this._orthographic){var n=Et.clientWidth,i=Et.clientHeight,r=this.orthographicVerticalSize*this.aspectRatio/n,a=this.orthographicVerticalSize/i,o=e.elements,s=t.elements;return s[0]=(-n/2+o[0])*r,s[1]=(i/2-o[1])*a,s[2]=(this.nearPlane-this.farPlane)*(o[2]+1)/2-this.nearPlane,Di.transformCoordinate(t,this.transform.worldMatrix,t),!0}return!1},a(0,o,"projectionViewMatrix",function(){return Wt.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),a(0,o,"aspectRatio",function(){if(0===this._aspectRatio){var e=this.viewport;return e.width/e.height}return this._aspectRatio},function(e){if(0>e)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=e,this._calculateProjectionMatrix()}),a(0,o,"boundFrustum",function(){if(this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix,x.isConchApp)){var e=this._boundFrustum.near,t=this._boundFrustum.far,n=this._boundFrustum.left,i=this._boundFrustum.right,r=this._boundFrustum.top,a=this._boundFrustum.bottom,o=e.normal.elements,s=t.normal.elements,l=n.normal.elements,h=i.normal.elements,c=r.normal.elements,_=a.normal.elements,u=this._boundFrustumBuffer;u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=e.distance,u[4]=s[0],u[5]=s[1],u[6]=s[2],u[7]=t.distance,u[8]=l[0],u[9]=l[1],u[10]=l[2],u[11]=n.distance,u[12]=h[0],u[13]=h[1],u[14]=h[2],u[15]=i.distance,u[16]=c[0],u[17]=c[1],u[18]=c[2],u[19]=r.distance,u[20]=_[0],u[21]=_[1],u[22]=_[2],u[23]=a.distance}return this._boundFrustum}),a(0,o,"viewport",function(){var e=0,t=0;return this._renderTarget?(e=this._renderTarget.width,t=this._renderTarget.height):(e=Et.clientWidth,t=Et.clientHeight),(e!==this._canvasWidth||t!==this._canvasHeight)&&(this._calculationViewport(this._normalizedViewport,e,t),this._canvasWidth=e,this._canvasHeight=t),this._viewport},function(e){var t=0,n=0;this._renderTarget?(t=this._canvasWidth=this._renderTarget.width,n=this._canvasHeight=this._renderTarget.height):(t=this._canvasWidth=Et.clientWidth,n=this._canvasHeight=Et.clientHeight),this._normalizedViewport.x=e.x/t,this._normalizedViewport.y=e.y/n,this._normalizedViewport.width=e.width/t,this._normalizedViewport.height=e.height/n,this._calculationViewport(this._normalizedViewport,t,n),this._calculateProjectionMatrix()}),a(0,o,"normalizedViewport",function(){return this._normalizedViewport},function(e){var t=0,n=0;this._renderTarget?(t=this._canvasWidth=this._renderTarget.width,n=this._canvasHeight=this._renderTarget.height):(t=this._canvasWidth=Et.clientWidth,n=this._canvasHeight=Et.clientHeight),this._normalizedViewport=e,this._calculationViewport(e,t,n),this._calculateProjectionMatrix()}),a(0,o,"projectionMatrix",function(){return this._projectionMatrix},function(e){this._projectionMatrix=e,this._useUserProjectionMatrix=!0}),a(0,o,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),i(t,["_tempVector20",function(){return this._tempVector20=new xi}]),t}(Wi),pr=function(e){function t(){this._direction=null,t.__super.call(this),this._direction=new Di}r(t,"laya.d3.core.light.DirectionLight",e);var n=t.prototype;return n._initShadow=function(){if(this._shadow)this._parallelSplitShadowMap=new dn,this.scene.parallelSplitShadowMaps.push(this._parallelSplitShadowMap),this.transform.worldMatrix.getForward(this._direction),Di.normalize(this._direction,this._direction),this._parallelSplitShadowMap.setInfo(this.scene,this._shadowFarPlane,this._direction,this._shadowMapSize,this._shadowMapCount,this._shadowMapPCFType);else{var e=this._scene._defineDatas,t=this.scene.parallelSplitShadowMaps;t.splice(t.indexOf(this._parallelSplitShadowMap),1),this._parallelSplitShadowMap.disposeAllRenderTarget(),this._parallelSplitShadowMap=null,e.remove(ki.SHADERDEFINE_SHADOW_PSSM1),e.remove(ki.SHADERDEFINE_SHADOW_PSSM2),e.remove(ki.SHADERDEFINE_SHADOW_PSSM3)}},n._onActive=function(){e.prototype._onActive.call(this),this._shadow&&this._initShadow()},n._onInActive=function(){e.prototype._onInActive.call(this),this._scene._defineDatas.remove(ki.SHADERDEFINE_DIRECTIONLIGHT)},n._prepareToScene=function(){var e=this._scene;if(e.enableLight&&this.activeInHierarchy){var t=e._defineDatas,n=e._shaderValues;return t.add(ki.SHADERDEFINE_DIRECTIONLIGHT),Di.scale(this.color,this._intensity,this._intensityColor),n.setVector(4,this._intensityColor),this.transform.worldMatrix.getForward(this._direction),Di.normalize(this._direction,this._direction),n.setVector(3,this._direction),!0}return t.remove(ki.SHADERDEFINE_DIRECTIONLIGHT),!1},a(0,n,"shadow",e.prototype._$get_shadow,function(e){this._shadow!==e&&(this._shadow=e,this.scene&&this._initShadow())}),t}(Xi),vr=function(e){function t(){this._range=0/0,this._lightMatrix=new Wt,t.__super.call(this),this._range=6}r(t,"laya.d3.core.light.PointLight",e);var n=t.prototype;return n._onInActive=function(){e.prototype._onInActive.call(this);var t=this.scene;t._defineDatas.remove(ki.SHADERDEFINE_POINTLIGHT)},n._prepareToScene=function(){var e=this._scene;if(e.enableLight&&this.activeInHierarchy){var n=e._defineDatas,i=e._shaderValues;n.add(ki.SHADERDEFINE_POINTLIGHT),Di.scale(this.color,this._intensity,this._intensityColor),i.setVector(8,this._intensityColor),i.setVector(5,this.transform.position),i.setNumber(6,this.range);var r=this._lightMatrix,a=r.elements;r.identity(),a[0]=a[5]=a[10]=1/this._range;var o=t._tempMatrix0;return this.transform.worldMatrix.invert(o),Wt.multiply(r,o,r),i.setMatrix4x4(27,r),!0}return e._defineDatas.remove(ki.SHADERDEFINE_POINTLIGHT),!1},n._parse=function(t,n){e.prototype._parse.call(this,t,n),this.range=t.range},a(0,n,"range",function(){return this._range},function(e){this._range=e}),i(t,["_tempMatrix0",function(){return this._tempMatrix0=new Wt}]),t}(Xi),Er=function(e){function t(){this._direction=null,this._spotAngle=0/0,this._range=0/0,t.__super.call(this),this._spotAngle=30,this._range=10,this._direction=new Di}r(t,"laya.d3.core.light.SpotLight",e);var n=t.prototype;return n._onInActive=function(){e.prototype._onInActive.call(this);var t=this.scene;t._defineDatas.remove(ki.SHADERDEFINE_SPOTLIGHT)},n._prepareToScene=function(){var e=this._scene;if(e.enableLight&&this.activeInHierarchy){var t=e._defineDatas,n=e._shaderValues;return t.add(ki.SHADERDEFINE_SPOTLIGHT),Di.scale(this.color,this._intensity,this._intensityColor),n.setVector(14,this._intensityColor),n.setVector(9,this.transform.position),this.transform.worldMatrix.getForward(this._direction),Di.normalize(this._direction,this._direction),n.setVector(10,this._direction),n.setNumber(12,this.range),n.setNumber(11,this.spotAngle*Math.PI/180),!0}return e._defineDatas.remove(ki.SHADERDEFINE_SPOTLIGHT),!1},n._parse=function(t,n){e.prototype._parse.call(this,t,n),this.range=t.range,this.spotAngle=t.spotAngle},a(0,n,"spotAngle",function(){return this._spotAngle},function(e){this._spotAngle=Math.max(Math.min(e,180),0)}),a(0,n,"range",function(){return this._range},function(e){this._range=e}),i(t,["_tempMatrix0",function(){return this._tempMatrix0=new Wt},"_tempMatrix1",function(){return this._tempMatrix1=new Wt}]),t}(Xi),Tr=function(e){function t(e,n){t.__super.call(this,n),this._meshFilter=new Mn(this),this._render=new bi(this),e&&(this._meshFilter.sharedMesh=e)}r(t,"laya.d3.core.MeshSprite3D",e);var n=t.prototype;return n._parse=function(e,t){var n=this;laya.d3.core.Sprite3D.prototype._parse.call(this,e,t);var i=this.meshRenderer,r=e.lightmapIndex;null!=r&&(i.lightmapIndex=r);var a=e.lightmapScaleOffset;a&&(i.lightmapScaleOffset=new Mi(a[0],a[1],a[2],a[3]));var o;o=e.meshPath,o&&(t?this.meshFilter.sharedMesh=E.getRes(t[o]):cr.load(o,m.create(null,function(e){n.meshFilter.sharedMesh=e})));var s=e.materials;if(s){var l=i.sharedMaterials,h=s.length;l.length=h;for(var c=0;h>c;c++)t?l[c]=E.getRes(t[s[c].path]):Vi.load(s[c].path,m.create(null,function(e){l[c]=e}));i.sharedMaterials=l}},n._addToInitStaticBatchManager=function(){Xn.instance._addBatchSprite(this)},n.cloneTo=function(e){var t=e;t._meshFilter.sharedMesh=this._meshFilter.sharedMesh;var n=this._render,i=t._render;i.enable=n.enable,i.sharedMaterials=n.sharedMaterials,i.castShadow=n.castShadow;var r=n.lightmapScaleOffset;r&&(i.lightmapScaleOffset=r.clone()),i.lightmapIndex=n.lightmapIndex,i.receiveShadow=n.receiveShadow,i.sortingFudge=n.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,e)},n.destroy=function(t){void 0===t&&(t=!0),this.destroyed||(e.prototype.destroy.call(this,t),this._meshFilter.destroy())},a(0,n,"meshFilter",function(){return this._meshFilter}),a(0,n,"meshRenderer",function(){return this._render}),t.__init__=function(){t.SHADERDEFINE_UV0=t.shaderDefines.registerDefine("UV"),t.SHADERDEFINE_COLOR=t.shaderDefines.registerDefine("COLOR"),t.SHADERDEFINE_UV1=t.shaderDefines.registerDefine("UV1"),Rt._registerManager(Xn.instance),Mt._registerManager(Wn.instance)},t.SHADERDEFINE_UV0=0,t.SHADERDEFINE_COLOR=0,t.SHADERDEFINE_UV1=0,i(t,["shaderDefines",function(){return this.shaderDefines=new hn(Yi.shaderDefines)}]),t}(Yi),gr=function(e){function t(){t.__super.call(this,null),this._render=new Fi(this),this._particleSystem=new Ln(this);var e=this._render._renderElements,n=e[0]=new Tt;n.setTransform(this._transform),n.render=this._render,n.setGeometry(this._particleSystem),n.material=ir.defaultMaterial}r(t,"laya.d3.core.particleShuriKen.ShuriKenParticle3D",e);var n=t.prototype;return n._initParticleVelocity=function(e){for(var t=new at,n=e.velocitys,i=0,r=n.length;r>i;i++){var a=n[i];t.add(a.key,a.value)}return t},n._initParticleColor=function(e){var t=new j(4,4),n=e.alphas,i=0,r=0;for(i=0,r=n.length;r>i;i++){var a=n[i];3===i&&1!==a.key&&(a.key=1,console.log("GradientDataColor warning:the forth key is  be force set to 1.")),t.addColorAlpha(a.key,a.value)}var o=e.rgbs;for(i=0,r=o.length;r>i;i++){var s=o[i],l=s.value;3===i&&1!==s.key&&(s.key=1,console.log("GradientDataColor warning:the forth key is  be force set to 1.")),t.addColorRGB(s.key,new Ht(l[0],l[1],l[2],1))}return t},n._initParticleSize=function(e){for(var t=new at,n=e.sizes,i=0,r=n.length;r>i;i++){var a=n[i];t.add(a.key,a.value)}return t},n._initParticleRotation=function(e){for(var t=new at,n=e.angularVelocitys,i=0,r=n.length;r>i;i++){var a=n[i];t.add(a.key,a.value/180*Math.PI)}return t},n._initParticleFrame=function(e){for(var t=new rt,n=e.frames,i=0,r=n.length;r>i;i++){var a=n[i];t.add(a.key,a.value)}return t},n._parse=function(e,n){laya.d3.core.Sprite3D.prototype._parse.call(this,e,n);var i,r=Math.PI/180,a=0,o=0,s=this.particleRenderer,l=e.material;i=E.getRes(n[l.path]),s.sharedMaterial=i;var h=e.meshPath;h&&(s.mesh=E.getRes(n[h])),s.renderMode=e.renderMode,s.stretchedBillboardCameraSpeedScale=e.stretchedBillboardCameraSpeedScale,s.stretchedBillboardSpeedScale=e.stretchedBillboardSpeedScale,s.stretchedBillboardLengthScale=e.stretchedBillboardLengthScale,s.sortingFudge=e.sortingFudge?e.sortingFudge:0;var c=this.particleSystem;c.isPerformanceMode=e.isPerformanceMode,c.duration=e.duration,c.looping=e.looping,c.prewarm=e.prewarm,c.startDelayType=e.startDelayType,c.startDelay=e.startDelay,c.startDelayMin=e.startDelayMin,c.startDelayMax=e.startDelayMax,c.startLifetimeType=e.startLifetimeType,c.startLifetimeConstant=e.startLifetimeConstant,c.startLifeTimeGradient=t._initStartLife(e.startLifetimeGradient),c.startLifetimeConstantMin=e.startLifetimeConstantMin,c.startLifetimeConstantMax=e.startLifetimeConstantMax,c.startLifeTimeGradientMin=t._initStartLife(e.startLifetimeGradientMin),c.startLifeTimeGradientMax=t._initStartLife(e.startLifetimeGradientMax),c.startSpeedType=e.startSpeedType,c.startSpeedConstant=e.startSpeedConstant,c.startSpeedConstantMin=e.startSpeedConstantMin,c.startSpeedConstantMax=e.startSpeedConstantMax,c.threeDStartSize=e.threeDStartSize,c.startSizeType=e.startSizeType,c.startSizeConstant=e.startSizeConstant;var _=e.startSizeConstantSeparate,u=c.startSizeConstantSeparate.elements;u[0]=_[0],u[1]=_[1],u[2]=_[2],c.startSizeConstantMin=e.startSizeConstantMin,c.startSizeConstantMax=e.startSizeConstantMax;var d=e.startSizeConstantMinSeparate,f=c.startSizeConstantMinSeparate.elements;f[0]=d[0],f[1]=d[1],f[2]=d[2];var m=e.startSizeConstantMaxSeparate,p=c.startSizeConstantMaxSeparate.elements;p[0]=m[0],p[1]=m[1],p[2]=m[2],c.threeDStartRotation=e.threeDStartRotation,c.startRotationType=e.startRotationType,c.startRotationConstant=e.startRotationConstant*r;var v=e.startRotationConstantSeparate,T=c.startRotationConstantSeparate.elements;T[0]=v[0]*r,T[1]=v[1]*r,T[2]=v[2]*r,c.startRotationConstantMin=e.startRotationConstantMin*r,c.startRotationConstantMax=e.startRotationConstantMax*r;var g=e.startRotationConstantMinSeparate,S=c.startRotationConstantMinSeparate.elements;S[0]=g[0]*r,S[1]=g[1]*r,S[2]=g[2]*r;var x=e.startRotationConstantMaxSeparate,D=c.startRotationConstantMaxSeparate.elements;D[0]=x[0]*r,D[1]=x[1]*r,D[2]=x[2]*r,c.randomizeRotationDirection=e.randomizeRotationDirection,c.startColorType=e.startColorType;var M=e.startColorConstant,A=c.startColorConstant.elements;A[0]=M[0],A[1]=M[1],A[2]=M[2],A[3]=M[3];var R=e.startColorConstantMin,I=c.startColorConstantMin.elements;I[0]=R[0],I[1]=R[1],I[2]=R[2],I[3]=R[3];var C=e.startColorConstantMax,y=c.startColorConstantMax.elements;y[0]=C[0],y[1]=C[1],y[2]=C[2],y[3]=C[3],c.gravityModifier=e.gravityModifier,c.simulationSpace=e.simulationSpace,c.scaleMode=e.scaleMode,c.playOnAwake=e.playOnAwake,c.maxParticles=e.maxParticles;var O=e.autoRandomSeed;null!=O&&(c.autoRandomSeed=O);var L=e.randomSeed;null!=L&&(c.randomSeed[0]=L);var V=e.emission,w=c.emission;if(V){w.emissionRate=V.emissionRate;var N=V.bursts;if(N)for(a=0,o=N.length;o>a;a++){var P=N[a];w.addBurst(new $(P.time,P.min,P.max))}w.enbale=V.enable}else w.enbale=!1;var b=e.shape;if(b){var F;switch(b.shapeType){case 0:var B;F=B=new Un,B.radius=b.sphereRadius,B.emitFromShell=b.sphereEmitFromShell,B.randomDirection=b.sphereRandomDirection;break;case 1:var U;F=U=new Bn,U.radius=b.hemiSphereRadius,U.emitFromShell=b.hemiSphereEmitFromShell,U.randomDirection=b.hemiSphereRandomDirection;break;case 2:var G;F=G=new Fn,G.angle=b.coneAngle*r,G.radius=b.coneRadius,G.length=b.coneLength,G.emitType=b.coneEmitType,G.randomDirection=b.coneRandomDirection;break;case 3:var H;F=H=new Nn,H.x=b.boxX,H.y=b.boxY,H.z=b.boxZ,H.randomDirection=b.boxRandomDirection;break;case 7:var z;F=z=new bn,z.radius=b.circleRadius,z.arc=b.circleArc*r,z.emitFromEdge=b.circleEmitFromEdge,z.randomDirection=b.circleRandomDirection;break;default:var k;F=k=new bn,k.radius=b.circleRadius,k.arc=b.circleArc*r,k.emitFromEdge=b.circleEmitFromEdge,k.randomDirection=b.circleRandomDirection}F.enable=b.enable,c.shape=F}var W=e.velocityOverLifetime;if(W){var X,Y=W.velocity;switch(Y.type){case 0:var Z=Y.constant;X=st.createByConstant(new Di(Z[0],Z[1],Z[2]));break;case 1:X=st.createByGradient(this._initParticleVelocity(Y.gradientX),this._initParticleVelocity(Y.gradientY),this._initParticleVelocity(Y.gradientZ));break;case 2:var j=Y.constantMin,K=Y.constantMax;X=st.createByRandomTwoConstant(new Di(j[0],j[1],j[2]),new Di(K[0],K[1],K[2]));break;case 3:X=st.createByRandomTwoGradient(this._initParticleVelocity(Y.gradientXMin),this._initParticleVelocity(Y.gradientXMax),this._initParticleVelocity(Y.gradientYMin),this._initParticleVelocity(Y.gradientYMax),this._initParticleVelocity(Y.gradientZMin),this._initParticleVelocity(Y.gradientZMax))}var q=new ft(X);q.space=W.space,q.enbale=W.enable,c.velocityOverLifetime=q}var Q=e.colorOverLifetime;if(Q){var et,rt=Q.color;switch(rt.type){case 0:var at=rt.constant;et=it.createByConstant(new Mi(at[0],at[1],at[2],at[3]));break;case 1:et=it.createByGradient(this._initParticleColor(rt.gradient));break;case 2:var ht=rt.constantMin,ct=rt.constantMax;et=it.createByRandomTwoConstant(new Mi(ht[0],ht[1],ht[2],ht[3]),new Mi(ct[0],ct[1],ct[2],ct[3]));break;case 3:et=it.createByRandomTwoGradient(this._initParticleColor(rt.gradientMin),this._initParticleColor(rt.gradientMax))}var mt=new J(et);mt.enbale=Q.enable,c.colorOverLifetime=mt}var pt=e.sizeOverLifetime;if(pt){var vt,Et=pt.size;switch(Et.type){case 0:vt=Et.separateAxes?ot.createByGradientSeparate(this._initParticleSize(Et.gradientX),this._initParticleSize(Et.gradientY),this._initParticleSize(Et.gradientZ)):ot.createByGradient(this._initParticleSize(Et.gradient));break;case 1:if(Et.separateAxes){var Tt=Et.constantMinSeparate,gt=Et.constantMaxSeparate;vt=ot.createByRandomTwoConstantSeparate(new Di(Tt[0],Tt[1],Tt[2]),new Di(gt[0],gt[1],gt[2]))}else vt=ot.createByRandomTwoConstant(Et.constantMin,Et.constantMax);break;case 2:vt=Et.separateAxes?ot.createByRandomTwoGradientSeparate(this._initParticleSize(Et.gradientXMin),this._initParticleSize(Et.gradientYMin),this._initParticleSize(Et.gradientZMin),this._initParticleSize(Et.gradientXMax),this._initParticleSize(Et.gradientYMax),this._initParticleSize(Et.gradientZMax)):ot.createByRandomTwoGradient(this._initParticleSize(Et.gradientMin),this._initParticleSize(Et.gradientMax))}var St=new _t(vt);St.enbale=pt.enable,c.sizeOverLifetime=St}var xt=e.rotationOverLifetime;if(xt){var Dt,Mt=xt.angularVelocity;switch(Mt.type){case 0:Mt.separateAxes||(Dt=nt.createByConstant(Mt.constant*r));break;case 1:Mt.separateAxes||(Dt=nt.createByGradient(this._initParticleRotation(Mt.gradient)));break;case 2:if(Mt.separateAxes){var At=Mt.constantMinSeparate,Rt=Mt.constantMaxSeparate;Dt=nt.createByRandomTwoConstantSeparate(new Di(At[0]*r,At[1]*r,At[2]*r),new Di(Rt[0]*r,Rt[1]*r,Rt[2]*r))}else Dt=nt.createByRandomTwoConstant(Mt.constantMin*r,Mt.constantMax*r);break;case 3:Mt.separateAxes||(Dt=nt.createByRandomTwoGradient(this._initParticleRotation(Mt.gradientMin),this._initParticleRotation(Mt.gradientMax)))}var It=new lt(Dt);It.enbale=xt.enable,c.rotationOverLifetime=It}var Ct=e.textureSheetAnimation;if(Ct){var yt,Ot=Ct.frame;switch(Ot.type){case 0:yt=tt.createByConstant(Ot.constant);break;case 1:yt=tt.createByOverTime(this._initParticleFrame(Ot.overTime));break;case 2:yt=tt.createByRandomTwoConstant(Ot.constantMin,Ot.constantMax);break;case 3:yt=tt.createByRandomTwoOverTime(this._initParticleFrame(Ot.overTimeMin),this._initParticleFrame(Ot.overTimeMax))}var Lt,Vt=Ct.startFrame;switch(Vt.type){case 0:Lt=ut.createByConstant(Vt.constant);break;case 1:Lt=ut.createByRandomTwoConstant(Vt.constantMin,Vt.constantMax)}var wt=new dt(yt,Lt);wt.enable=Ct.enable;var Nt=Ct.tiles;wt.tiles=new xi(Nt[0],Nt[1]),wt.type=Ct.type,wt.randomRow=Ct.randomRow;var Pt=Ct.rowIndex;void 0!==Pt&&(wt.rowIndex=Pt),wt.cycles=Ct.cycles,c.textureSheetAnimation=wt}},n._activeHierarchy=function(){laya.display.Node.prototype._activeHierarchy.call(this),this.particleSystem.playOnAwake&&this.particleSystem.play()},n._inActiveHierarchy=function(){laya.display.Node.prototype._inActiveHierarchy.call(this),this.particleSystem.isAlive&&this.particleSystem.simulate(0,!0)},n.cloneTo=function(e){var t=e,n=t._particleSystem;this._particleSystem.cloneTo(n);var i=t._render,r=this._render;i.sharedMaterials=r.sharedMaterials,i.enable=r.enable,i.renderMode=r.renderMode,i.mesh=r.mesh,i.stretchedBillboardCameraSpeedScale=r.stretchedBillboardCameraSpeedScale,i.stretchedBillboardSpeedScale=r.stretchedBillboardSpeedScale,i.stretchedBillboardLengthScale=r.stretchedBillboardLengthScale,i.sortingFudge=r.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,e)},n.destroy=function(t){void 0===t&&(t=!0),this.destroyed||(e.prototype.destroy.call(this,t),this._particleSystem.destroy(),this._particleSystem=null)},a(0,n,"particleSystem",function(){return this._particleSystem}),a(0,n,"particleRenderer",function(){return this._render}),t.__init__=function(){t.SHADERDEFINE_RENDERMODE_BILLBOARD=t.shaderDefines.registerDefine("SPHERHBILLBOARD"),t.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD=t.shaderDefines.registerDefine("STRETCHEDBILLBOARD"),t.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD=t.shaderDefines.registerDefine("HORIZONTALBILLBOARD"),t.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD=t.shaderDefines.registerDefine("VERTICALBILLBOARD"),t.SHADERDEFINE_COLOROVERLIFETIME=t.shaderDefines.registerDefine("COLOROVERLIFETIME"),t.SHADERDEFINE_RANDOMCOLOROVERLIFETIME=t.shaderDefines.registerDefine("RANDOMCOLOROVERLIFETIME"),t.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT=t.shaderDefines.registerDefine("VELOCITYOVERLIFETIMECONSTANT"),t.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE=t.shaderDefines.registerDefine("VELOCITYOVERLIFETIMECURVE"),t.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT=t.shaderDefines.registerDefine("VELOCITYOVERLIFETIMERANDOMCONSTANT"),t.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE=t.shaderDefines.registerDefine("VELOCITYOVERLIFETIMERANDOMCURVE"),t.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE=t.shaderDefines.registerDefine("TEXTURESHEETANIMATIONCURVE"),t.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE=t.shaderDefines.registerDefine("TEXTURESHEETANIMATIONRANDOMCURVE"),t.SHADERDEFINE_ROTATIONOVERLIFETIME=t.shaderDefines.registerDefine("ROTATIONOVERLIFETIME"),t.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE=t.shaderDefines.registerDefine("ROTATIONOVERLIFETIMESEPERATE"),t.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT=t.shaderDefines.registerDefine("ROTATIONOVERLIFETIMECONSTANT"),t.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE=t.shaderDefines.registerDefine("ROTATIONOVERLIFETIMECURVE"),t.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS=t.shaderDefines.registerDefine("ROTATIONOVERLIFETIMERANDOMCONSTANTS"),t.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES=t.shaderDefines.registerDefine("ROTATIONOVERLIFETIMERANDOMCURVES"),t.SHADERDEFINE_SIZEOVERLIFETIMECURVE=t.shaderDefines.registerDefine("SIZEOVERLIFETIMECURVE"),t.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE=t.shaderDefines.registerDefine("SIZEOVERLIFETIMECURVESEPERATE"),t.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES=t.shaderDefines.registerDefine("SIZEOVERLIFETIMERANDOMCURVES"),t.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE=t.shaderDefines.registerDefine("SIZEOVERLIFETIMERANDOMCURVESSEPERATE"),t.SHADERDEFINE_RENDERMODE_MESH=t.shaderDefines.registerDefine("RENDERMODE_MESH"),t.SHADERDEFINE_SHAPE=t.shaderDefines.registerDefine("SHAPE"),t.WORLDPOSITION=t.shaderUniforms.registerUniform(),t.WORLDROTATION=t.shaderUniforms.registerUniform(),t.POSITIONSCALE=t.shaderUniforms.registerUniform(),t.SIZESCALE=t.shaderUniforms.registerUniform(),t.SCALINGMODE=t.shaderUniforms.registerUniform(),t.GRAVITY=t.shaderUniforms.registerUniform(),t.THREEDSTARTROTATION=t.shaderUniforms.registerUniform(),t.STRETCHEDBILLBOARDLENGTHSCALE=t.shaderUniforms.registerUniform(),t.STRETCHEDBILLBOARDSPEEDSCALE=t.shaderUniforms.registerUniform(),t.SIMULATIONSPACE=t.shaderUniforms.registerUniform(),t.CURRENTTIME=t.shaderUniforms.registerUniform(),t.VOLVELOCITYCONST=t.shaderUniforms.registerUniform(),t.VOLVELOCITYGRADIENTX=t.shaderUniforms.registerUniform(),t.VOLVELOCITYGRADIENTY=t.shaderUniforms.registerUniform(),t.VOLVELOCITYGRADIENTZ=t.shaderUniforms.registerUniform(),t.VOLVELOCITYCONSTMAX=t.shaderUniforms.registerUniform(),t.VOLVELOCITYGRADIENTXMAX=t.shaderUniforms.registerUniform(),t.VOLVELOCITYGRADIENTYMAX=t.shaderUniforms.registerUniform(),t.VOLVELOCITYGRADIENTZMAX=t.shaderUniforms.registerUniform(),t.VOLSPACETYPE=t.shaderUniforms.registerUniform(),t.COLOROVERLIFEGRADIENTALPHAS=t.shaderUniforms.registerUniform(),t.COLOROVERLIFEGRADIENTCOLORS=t.shaderUniforms.registerUniform(),t.MAXCOLOROVERLIFEGRADIENTALPHAS=t.shaderUniforms.registerUniform(),t.MAXCOLOROVERLIFEGRADIENTCOLORS=t.shaderUniforms.registerUniform(),t.SOLSIZEGRADIENT=t.shaderUniforms.registerUniform(),t.SOLSIZEGRADIENTX=t.shaderUniforms.registerUniform(),t.SOLSIZEGRADIENTY=t.shaderUniforms.registerUniform(),t.SOLSizeGradientZ=t.shaderUniforms.registerUniform(),t.SOLSizeGradientMax=t.shaderUniforms.registerUniform(),t.SOLSIZEGRADIENTXMAX=t.shaderUniforms.registerUniform(),t.SOLSIZEGRADIENTYMAX=t.shaderUniforms.registerUniform(),t.SOLSizeGradientZMAX=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYCONST=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYCONSTSEPRARATE=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYGRADIENT=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYGRADIENTX=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYGRADIENTY=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYGRADIENTZ=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYGRADIENTW=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYCONSTMAX=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYCONSTMAXSEPRARATE=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYGRADIENTMAX=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYGRADIENTXMAX=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYGRADIENTYMAX=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYGRADIENTZMAX=t.shaderUniforms.registerUniform(),t.ROLANGULARVELOCITYGRADIENTWMAX=t.shaderUniforms.registerUniform(),t.TEXTURESHEETANIMATIONCYCLES=t.shaderUniforms.registerUniform(),t.TEXTURESHEETANIMATIONSUBUVLENGTH=t.shaderUniforms.registerUniform(),t.TEXTURESHEETANIMATIONGRADIENTUVS=t.shaderUniforms.registerUniform(),t.TEXTURESHEETANIMATIONGRADIENTMAXUVS=t.shaderUniforms.registerUniform()},t._initStartLife=function(e){for(var t=new at,n=e.startLifetimes,i=0,r=n.length;r>i;i++){var a=n[i];t.add(a.key,a.value)}return t},t.SHADERDEFINE_RENDERMODE_BILLBOARD=0,t.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD=0,t.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD=0,t.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD=0,t.SHADERDEFINE_COLOROVERLIFETIME=0,t.SHADERDEFINE_RANDOMCOLOROVERLIFETIME=0,t.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT=0,t.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE=0,t.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT=0,t.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE=0,t.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE=0,t.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE=0,t.SHADERDEFINE_ROTATIONOVERLIFETIME=0,t.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE=0,t.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT=0,t.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE=0,t.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS=0,t.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES=0,t.SHADERDEFINE_SIZEOVERLIFETIMECURVE=0,t.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE=0,t.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES=0,t.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE=0,t.SHADERDEFINE_RENDERMODE_MESH=0,t.SHADERDEFINE_SHAPE=0,t.WORLDPOSITION=0,t.WORLDROTATION=0,t.POSITIONSCALE=0,t.SIZESCALE=0,t.SCALINGMODE=0,t.GRAVITY=0,t.THREEDSTARTROTATION=0,t.STRETCHEDBILLBOARDLENGTHSCALE=0,t.STRETCHEDBILLBOARDSPEEDSCALE=0,t.SIMULATIONSPACE=0,t.CURRENTTIME=0,t.VOLVELOCITYCONST=0,t.VOLVELOCITYGRADIENTX=0,t.VOLVELOCITYGRADIENTY=0,t.VOLVELOCITYGRADIENTZ=0,t.VOLVELOCITYCONSTMAX=0,t.VOLVELOCITYGRADIENTXMAX=0,t.VOLVELOCITYGRADIENTYMAX=0,t.VOLVELOCITYGRADIENTZMAX=0,t.VOLSPACETYPE=0,t.COLOROVERLIFEGRADIENTALPHAS=0,t.COLOROVERLIFEGRADIENTCOLORS=0,t.MAXCOLOROVERLIFEGRADIENTALPHAS=0,t.MAXCOLOROVERLIFEGRADIENTCOLORS=0,t.SOLSIZEGRADIENT=0,t.SOLSIZEGRADIENTX=0,t.SOLSIZEGRADIENTY=0,t.SOLSizeGradientZ=0,t.SOLSizeGradientMax=0,t.SOLSIZEGRADIENTXMAX=0,t.SOLSIZEGRADIENTYMAX=0,t.SOLSizeGradientZMAX=0,t.ROLANGULARVELOCITYCONST=0,t.ROLANGULARVELOCITYCONSTSEPRARATE=0,t.ROLANGULARVELOCITYGRADIENT=0,t.ROLANGULARVELOCITYGRADIENTX=0,t.ROLANGULARVELOCITYGRADIENTY=0,t.ROLANGULARVELOCITYGRADIENTZ=0,t.ROLANGULARVELOCITYGRADIENTW=0,t.ROLANGULARVELOCITYCONSTMAX=0,t.ROLANGULARVELOCITYCONSTMAXSEPRARATE=0,t.ROLANGULARVELOCITYGRADIENTMAX=0,t.ROLANGULARVELOCITYGRADIENTXMAX=0,t.ROLANGULARVELOCITYGRADIENTYMAX=0,t.ROLANGULARVELOCITYGRADIENTZMAX=0,t.ROLANGULARVELOCITYGRADIENTWMAX=0,t.TEXTURESHEETANIMATIONCYCLES=0,t.TEXTURESHEETANIMATIONSUBUVLENGTH=0,t.TEXTURESHEETANIMATIONGRADIENTUVS=0,t.TEXTURESHEETANIMATIONGRADIENTMAXUVS=0,i(t,["shaderDefines",function(){return this.shaderDefines=new hn(Yi.shaderDefines)},"shaderUniforms",function(){return this.shaderUniforms=new _n}]),t}(Yi),Sr=(function(e){function t(e,n){this._geometryFilter=null,this._pixelLineDatas=null,this._lineCount=0,void 0===e&&(e=2),t.__super.call(this,n),this._lineCount=e,this._pixelLineDatas=[];for(var i=0;e>i;i++){var r=new pt;Di.ZERO.cloneTo(r.startPosition),Di.ZERO.cloneTo(r.endPosition),Ht.WHITE.cloneTo(r.startColor),Ht.WHITE.cloneTo(r.endColor),this._pixelLineDatas.push(r)}this._geometryFilter=new Vn(this),this._render=new Bi(this),this._changeRenderObjects(this._render,0,rr.defaultMaterial),this._geometryFilter._initLineData()}r(t,"laya.d3.core.pixelLine.PixelLineSprite3D",e);var n=t.prototype;return n.setLine=function(e,t,n,i,r){if(e<this._pixelLineDatas.length){var a=this._pixelLineDatas[e];t.cloneTo(a.startPosition),n.cloneTo(a.endPosition),i.cloneTo(a.startColor),r.cloneTo(a.endColor),this._geometryFilter._updateLineData(e,t,n,i,r)}},n.setLines=function(e){this._pixelLineDatas.length=0;for(var t=e.length,n=0;t>n;n++){var i=new pt;e[n].cloneTo(i),this._pixelLineDatas.push(i)}this.lineCount=t},n._changeRenderObjects=function(e,t,n){var i=this._render._renderElements;n||(n=rr.defaultMaterial);var r=i[t];r||(r=i[t]=new Tt),r.setTransform(this._transform),r.setGeometry(this._geometryFilter),r.render=this._render,r.material=n},a(0,n,"pxLineFilter",function(){return this._geometryFilter}),a(0,n,"pxLineRenderer",function(){return this._render}),a(0,n,"lineCount",function(){return this._lineCount},function(e){if(this._lineCount=e,this._pixelLineDatas.length>=e)this._pixelLineDatas.length=e;else for(var t=0,n=e-this._pixelLineDatas.length;n>t;t++){var i=new pt;Di.ZERO.cloneTo(i.startPosition),Di.ZERO.cloneTo(i.endPosition),Ht.WHITE.cloneTo(i.startColor),Ht.WHITE.cloneTo(i.endColor),this._pixelLineDatas.push(i)
}this._geometryFilter._resetLineData()}),a(0,n,"pixelLineDatas",function(){return this._pixelLineDatas}),t}(Yi),function(e){function t(e,n){t.__super.call(this,n),this._meshFilter=new Mn(this),this._render=new _r(this),e&&(this._meshFilter.sharedMesh=e)}r(t,"laya.d3.core.SkinnedMeshSprite3D",e);var n=t.prototype;return n._parse=function(e,t){laya.d3.core.Sprite3D.prototype._parse.call(this,e,t);var n=this.skinnedMeshRenderer,i=e.lightmapIndex;null!=i&&(n.lightmapIndex=i);var r=e.lightmapScaleOffset;r&&(n.lightmapScaleOffset=new Mi(r[0],r[1],r[2],r[3]));var a,o;a=e.meshPath,a&&(o=E.getRes(t[a]),this.meshFilter.sharedMesh=o);var s=e.materials;if(s){var l=n.sharedMaterials,h=s.length;l.length=h;for(var c=0;h>c;c++)l[c]=E.getRes(t[s[c].path]);n.sharedMaterials=l}var _=e.rootBone;_&&n._setRootBone(_);var u=e.boundBox,d=u.min,f=u.max,m=new Ft(new Di(d[0],d[1],d[2]),new Di(f[0],f[1],f[2]));n.localBoundBox=m;var p=e.boundSphere;if(p){var v=p.center,T=new Ut(new Di(v[0],v[1],v[2]),p.radius);n.localBoundSphere=T}},n._changeHierarchyAnimator=function(t){var n=this._hierarchyAnimator;n&&n.unLinkSprite3DToAvatarNode(this),e.prototype._changeHierarchyAnimator.call(this,t),t&&t.linkSprite3DToAvatarNode(this.skinnedMeshRenderer._rootBone,this),this.skinnedMeshRenderer._setCacheAnimator(t)},n._changeAnimatorAvatar=function(e){this.skinnedMeshRenderer._setCacheAvatar(e)},n.cloneTo=function(e){var t=e;t.meshFilter.sharedMesh=this.meshFilter.sharedMesh;var n=this._render,i=t._render;i.enable=n.enable,i.sharedMaterials=n.sharedMaterials,i.castShadow=n.castShadow;var r=n.lightmapScaleOffset;r&&(i.lightmapScaleOffset=r.clone()),i.receiveShadow=n.receiveShadow,i.sortingFudge=n.sortingFudge,i._rootBone=n._rootBone;var a=n.localBoundSphere;a&&(i.localBoundSphere=a.clone());var o=n.localBoundBox;o&&(i.localBoundBox=o.clone()),laya.d3.core.Sprite3D.prototype.cloneTo.call(this,e)},n.destroy=function(t){void 0===t&&(t=!0),this.destroyed||(e.prototype.destroy.call(this,t),this._meshFilter.destroy())},a(0,n,"meshFilter",function(){return this._meshFilter}),a(0,n,"skinnedMeshRenderer",function(){return this._render}),t.__init__=function(){t.SHADERDEFINE_BONE=t.shaderDefines.registerDefine("BONE")},t.SHADERDEFINE_BONE=0,t.BONES=0,i(t,["shaderDefines",function(){return this.shaderDefines=new hn(Tr.shaderDefines)}]),t}(Yi)),xr=function(e){function t(){t.__super.call(this,this.name),this._render=new Ui(this),this._geometryFilter=new Rn(this)}r(t,"laya.d3.core.trail.TrailSprite3D",e);var n=t.prototype;return n._parse=function(e,t){laya.d3.core.Sprite3D.prototype._parse.call(this,e,t);var n=this._render,i=this._geometryFilter,r=0,a=0,o=e.materials;if(o){var s=n.sharedMaterials,l=o.length;for(s.length=l,r=0;l>r;r++)s[r]=E.getRes(t[o[r].path]);n.sharedMaterials=s}i.time=e.time,i.minVertexDistance=e.minVertexDistance,i.widthMultiplier=e.widthMultiplier,i.textureMode=e.textureMode;var h=[],c=e.widthCurve;for(r=0,a=c.length;a>r;r++){var _=new On;_.time=c[r].time,_.inTangent=c[r].inTangent,_.outTangent=c[r].outTangent,_.value=c[r].value,h.push(_)}i.widthCurve=h;var u=e.colorGradient,d=u.colorKeys,f=u.alphaKeys,m=new j(d.length,f.length);for(m.mode=u.mode,r=0,a=d.length;a>r;r++){var p=d[r];m.addColorRGB(p.time,new Ht(p.value[0],p.value[1],p.value[2],1))}for(r=0,a=f.length;a>r;r++){var v=f[r];m.addColorAlpha(v.time,v.value)}i.colorGradient=m},n.reset=function(){this.trailFilter.reset()},n.cloneTo=function(e){laya.d3.core.Sprite3D.prototype.cloneTo.call(this,e);var t=0,n=0,i=e,r=i.trailFilter;r.time=this.trailFilter.time,r.minVertexDistance=this.trailFilter.minVertexDistance,r.widthMultiplier=this.trailFilter.widthMultiplier,r.textureMode=this.trailFilter.textureMode;var a=this.trailFilter.widthCurve,o=[];for(t=0,n=a.length;n>t;t++){var s=new On;a[t].cloneTo(s),o.push(s)}r.widthCurve=o;var l=new j(this.trailFilter.colorGradient.maxColorRGBKeysCount,this.trailFilter.colorGradient.maxColorAlphaKeysCount);this.trailFilter.colorGradient.cloneTo(l),r.colorGradient=l;var h=i.trailRenderer;h.sharedMaterial=this.trailRenderer.sharedMaterial},n.destroy=function(t){void 0===t&&(t=!0),this.destroyed||(e.prototype.destroy.call(this,t),this._geometryFilter.destroy(),this._geometryFilter=null)},a(0,n,"trailFilter",function(){return this._geometryFilter}),a(0,n,"trailRenderer",function(){return this._render}),t.__init__=function(){t.SHADERDEFINE_GRADIENTMODE_BLEND=t.shaderDefines.registerDefine("GRADIENTMODE_BLEND"),t.CURTIME=t.shaderUniforms.registerUniform(),t.LIFETIME=t.shaderUniforms.registerUniform(),t.WIDTHCURVE=t.shaderUniforms.registerUniform(),t.WIDTHCURVEKEYLENGTH=t.shaderUniforms.registerUniform(),t.GRADIENTCOLORKEY=t.shaderUniforms.registerUniform(),t.GRADIENTALPHAKEY=t.shaderUniforms.registerUniform()},t.CURTIME=0,t.LIFETIME=0,t.WIDTHCURVE=0,t.WIDTHCURVEKEYLENGTH=0,t.GRADIENTCOLORKEY=0,t.GRADIENTALPHAKEY=0,t.SHADERDEFINE_GRADIENTMODE_BLEND=0,i(t,["shaderDefines",function(){return this.shaderDefines=new hn(Yi.shaderDefines)},"shaderUniforms",function(){return this.shaderUniforms=new _n(Yi.shaderUniforms)}]),t}(Yi),Dr=(function(e){function t(e,n){this._geometryFilter=null,this._geometryFilter=new Pn,this._geometryFilter._camera=e,this._render=new Gi(this),this._changeRenderObjects(this._render,0,sr.defaultMaterial),t.__super.call(this,n)}r(t,"laya.d3.extension.lineRender.LineSprite3D",e);var n=t.prototype;return n.addPosition=function(e){this._geometryFilter.addDataForVertexBuffer(e)},n._changeRenderObjects=function(e,t,n){var i=this._render._renderElements;n||(n=sr.defaultMaterial);var r=i[t];r||(r=i[t]=new Tt),r.setTransform(this._transform),r.setGeometry(this._geometryFilter),r.render=this._render,r.material=n},n._update=function(){},a(0,n,"lineFilter",function(){return this._geometryFilter}),a(0,n,"lineRender",function(){return this._render}),t.__init__=function(){},i(t,["shaderDefines",function(){return this.shaderDefines=new hn(Yi.shaderDefines)}]),t}(Yi),function(e){function t(e,n,i,r,a,o,s,l){this._terrainFilter=null,t.__super.call(this,l),this._terrainFilter=new li(this,e,n,i,r,a,o,s),this._render=new Hi(this)}r(t,"laya.d3.terrain.TerrainChunk",e);var n=t.prototype;return n.buildRenderElementAndMaterial=function(e,t,n,i,r,a,o,s,l,h,c,_,u,d,f,m,p,v){void 0===c&&(c=1),void 0===_&&(_=1),void 0===u&&(u=1),void 0===d&&(d=1),void 0===f&&(f=1),void 0===m&&(m=1),void 0===p&&(p=1),void 0===v&&(v=1);var T=new Ji;l&&(T.diffuseColor=l),s&&(T.ambientColor=s),h&&(T.specularColor=h),T.splatAlphaTexture=E.getRes(n),T.normalTexture=t?E.getRes(t):null,T.diffuseTexture1=i?E.getRes(i):null,T.diffuseTexture2=r?E.getRes(r):null,T.diffuseTexture3=a?E.getRes(a):null,T.diffuseTexture4=o?E.getRes(o):null,T.setDiffuseScale1(c,_),T.setDiffuseScale2(u,d),T.setDiffuseScale3(f,m),T.setDiffuseScale4(p,v),T.setDetailNum(e),0!=this._render._renderElements.length&&(T.renderMode=2);var g=new Tt;g.setTransform(this._transform),g.render=this._render,g.setGeometry(this._terrainFilter),this._render._renderElements.push(g),this._render.sharedMaterial=T},n.cloneTo=function(){console.log("Terrain Chunk can't clone")},n.destroy=function(t){void 0===t&&(t=!0),this.destroyed||(e.prototype.destroy.call(this,t),this._terrainFilter.destroy(),this._terrainFilter=null)},a(0,n,"terrainFilter",function(){return this._terrainFilter}),a(0,n,"terrainRender",function(){return this._render}),t}(Yi));!function(e){function t(e,n,i){this._long=0/0,this._width=0/0,this._height=0/0,void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),t.__super.call(this),this._long=e,this._height=n,this._width=i,this._create()}r(t,"laya.d3.resource.models.BoxMesh",e);var n=t.prototype;return n._create=function(){var e=ci.vertexDeclaration,t=this._long/2,n=this._height/2,i=this._width/2,r=new Float32Array([-t,n,-i,0,1,0,0,0,t,n,-i,0,1,0,1,0,t,n,i,0,1,0,1,1,-t,n,i,0,1,0,0,1,-t,-n,-i,0,-1,0,0,1,t,-n,-i,0,-1,0,1,1,t,-n,i,0,-1,0,1,0,-t,-n,i,0,-1,0,0,0,-t,n,-i,-1,0,0,0,0,-t,n,i,-1,0,0,1,0,-t,-n,i,-1,0,0,1,1,-t,-n,-i,-1,0,0,0,1,t,n,-i,1,0,0,1,0,t,n,i,1,0,0,0,0,t,-n,i,1,0,0,0,1,t,-n,-i,1,0,0,1,1,-t,n,i,0,0,1,0,0,t,n,i,0,0,1,1,0,t,-n,i,0,0,1,1,1,-t,-n,i,0,0,1,0,1,-t,n,-i,0,0,-1,1,0,t,n,-i,0,0,-1,0,0,t,-n,-i,0,0,-1,0,1,-t,-n,-i,0,0,-1,1,1]),a=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this.setData(e,r,a)},a(0,n,"long",function(){return this._long},function(e){this._long!==e&&(this._long=e,this.releaseResource(),this._create())}),a(0,n,"width",function(){return this._width},function(e){this._width!==e&&(this._width=e,this.releaseResource(),this._create())}),a(0,n,"height",function(){return this._height},function(e){this._height!==e&&(this._height=e,this.releaseResource(),this._create())}),t}(hr),function(e){function t(e,n,i,r){this._radius=0/0,this._height=0/0,this._slices=0,this._stacks=0,void 0===e&&(e=.5),void 0===n&&(n=2),void 0===i&&(i=16),void 0===r&&(r=32),t.__super.call(this),this._radius=e,this._height=2*e>n?2*e:n,this._stacks=i,this._slices=r,this._create()}r(t,"laya.d3.resource.models.CapsuleMesh",e);var n=t.prototype;return n._create=function(){var e=(this._stacks+1)*(this.slices+1)*2+2*(this._slices+1),t=3*this._stacks*(this._slices+1)*2*2+2*this._slices*3,n=ci.vertexDeclaration,i=n.vertexStride/4,r=new Float32Array(e*i),a=new Uint16Array(t),o=Math.PI/2/this._stacks,s=2*Math.PI/this._slices,l=this._height/2-this._radius,h=0,c=0,_=0,u=0,d=0,f=0,m=0,p=0;for(m=0;m<=this._stacks;m++)for(p=0;p<=this._slices;p++)h=this._radius*Math.cos(m*o)*Math.cos(p*s+Math.PI),c=this._radius*Math.sin(m*o),_=this._radius*Math.cos(m*o)*Math.sin(p*s+Math.PI),r[u++]=h,r[u++]=c+l,r[u++]=_,r[u++]=h,r[u++]=c,r[u++]=_,r[u++]=1-p/this._slices,r[u++]=(1-m/this._stacks)*(Math.PI*this._radius/2/(this._height+Math.PI*this._radius)),m<this._stacks&&(a[d++]=m*(this._slices+1)+p+(this._slices+1),a[d++]=m*(this._slices+1)+p,a[d++]=m*(this._slices+1)+p+1,a[d++]=m*(this._slices+1)+p+this._slices,a[d++]=m*(this._slices+1)+p,a[d++]=m*(this._slices+1)+p+(this._slices+1));for(f+=(this._stacks+1)*(this._slices+1),m=0;m<=this._stacks;m++)for(p=0;p<=this._slices;p++)h=this._radius*Math.cos(m*o)*Math.cos(p*s+Math.PI),c=this._radius*Math.sin(-m*o),_=this._radius*Math.cos(m*o)*Math.sin(p*s+Math.PI),r[u++]=h,r[u++]=c-l,r[u++]=_,r[u++]=h,r[u++]=c,r[u++]=_,r[u++]=1-p/this._slices,r[u++]=(m/this._stacks*(Math.PI*this._radius/2)+(this._height+Math.PI*this._radius/2))/(this._height+Math.PI*this._radius),m<this._stacks&&(a[d++]=f+m*(this._slices+1)+p,a[d++]=f+m*(this._slices+1)+p+(this._slices+1),a[d++]=f+m*(this._slices+1)+p+1,a[d++]=f+m*(this._slices+1)+p,a[d++]=f+m*(this._slices+1)+p+this._slices,a[d++]=f+m*(this._slices+1)+p+(this._slices+1));for(f+=(this._stacks+1)*(this._slices+1),p=0;p<=this._slices;p++)h=this._radius*Math.cos(p*s+Math.PI),c=l,_=this._radius*Math.sin(p*s+Math.PI),r[u++]=h,r[u+8*(this._slices+1)-1]=h,r[u++]=c,r[u+8*(this._slices+1)-1]=-c,r[u++]=_,r[u+8*(this._slices+1)-1]=_,r[u++]=h,r[u+8*(this._slices+1)-1]=h,r[u++]=0,r[u+8*(this._slices+1)-1]=0,r[u++]=_,r[u+8*(this._slices+1)-1]=_,r[u++]=1-1*p/this._slices,r[u+8*(this._slices+1)-1]=1-1*p/this._slices,r[u++]=Math.PI*this._radius/2/(this._height+Math.PI*this._radius),r[u+8*(this._slices+1)-1]=(Math.PI*this._radius/2+this._height)/(this._height+Math.PI*this._radius);for(p=0;p<this._slices;p++)a[d++]=p+f+(this._slices+1),a[d++]=p+f+1,a[d++]=p+f,a[d++]=p+f+(this._slices+1),a[d++]=p+f+(this._slices+1)+1,a[d++]=p+f+1;f+=2*(this._slices+1),this.setData(n,r,a)},a(0,n,"radius",function(){return this._radius},function(e){this._radius!==e&&(this._radius=e,this.releaseResource(),this._create())}),a(0,n,"height",function(){return this._height},function(e){this._height!==e&&(this._height=e,this.releaseResource(),this._create())}),a(0,n,"stacks",function(){return this._stacks},function(e){this._stacks!==e&&(this._stacks=e,this.releaseResource(),this._create())}),a(0,n,"slices",function(){return this._slices},function(e){this._slices!==e&&(this._slices=e,this.releaseResource(),this._create())}),t}(hr),function(e){function t(e,n,i){this._radius=0/0,this._height=0/0,this._slices=0,void 0===e&&(e=.5),void 0===n&&(n=1),void 0===i&&(i=32),t.__super.call(this),this._radius=e,this._height=n,this._slices=i,this._create()}r(t,"laya.d3.resource.models.ConeMesh",e);var n=t.prototype;return n._create=function(){for(var e=this._slices+1+1+2*(this._slices+1),t=6*this._slices+3*this._slices,n=ci.vertexDeclaration,i=n.vertexStride/4,r=new Float32Array(e*i),a=new Uint16Array(t),o=2*Math.PI/this._slices,s=this._height/2,l=0,h=0,c=0,_=0,u=0,d=new Di,f=new Di(0,-1,0),m=new Di(0,s,0),p=new Di,v=new Di,E=new Yt,T=new Di,g=0/0,S=0,x=0,D=0;D<=this._slices;D++)l=D*o,c=Math.cos(l+Math.PI)*this._radius,_=s,u=Math.sin(l+Math.PI)*this._radius,r[S++]=0,r[S+8*(this._slices+1)-1]=c,r[S++]=_,r[S+8*(this._slices+1)-1]=-_,r[S++]=0,r[S+8*(this._slices+1)-1]=u,d.x=c,d.y=0,d.z=u,p.x=c,p.y=-_,p.z=u,Di.subtract(p,m,v),Di.normalize(v,v),g=Math.acos(Di.dot(f,v)),Di.cross(f,v,T),Di.normalize(T,T),Yt.createFromAxisAngle(T,g,E),Di.normalize(d,d),Di.transformQuat(d,E,d),Di.normalize(d,d),r[S++]=d.x,r[S+8*(this._slices+1)-1]=d.x,r[S++]=d.y,r[S+8*(this._slices+1)-1]=d.y,r[S++]=d.z,r[S+8*(this._slices+1)-1]=d.z,r[S++]=1-1*D/this._slices,r[S+8*(this._slices+1)-1]=1-1*D/this._slices,r[S++]=0,r[S+8*(this._slices+1)-1]=1;S+=8*(this._slices+1);for(var M=0;M<this._slices;M++)a[x++]=M+h+(this._slices+1),a[x++]=M+h+1,a[x++]=M+h,a[x++]=M+h+(this._slices+1),a[x++]=M+h+(this._slices+1)+1,a[x++]=M+h+1;h+=2*(this._slices+1);for(var A=0;A<=this._slices;A++)0===A&&(r[S++]=0,r[S++]=-s,r[S++]=0,r[S++]=0,r[S++]=-1,r[S++]=0,r[S++]=.5,r[S++]=.5),l=A*o,c=Math.cos(l+Math.PI)*this._radius,_=-s,u=Math.sin(l+Math.PI)*this._radius,r[S++]=c,r[S++]=_,r[S++]=u,r[S++]=0,r[S++]=-1,r[S++]=0,r[S++]=.5+.5*Math.cos(l),r[S++]=.5+.5*Math.sin(l);for(var R=0;R<this._slices;R++)a[x++]=0+h,a[x++]=R+2+h,a[x++]=R+1+h;h+=this._slices+1+1,this.setData(n,r,a)},a(0,n,"radius",function(){return this._radius},function(e){this._radius!==e&&(this._radius=e,this.releaseResource(),this._create())}),a(0,n,"height",function(){return this._height},function(e){this._height!==e&&(this._height=e,this.releaseResource(),this._create())}),a(0,n,"slices",function(){return this._slices},function(e){this._slices!==e&&(this._slices=e,this.releaseResource(),this._create())}),t}(hr),function(e){function t(e,n,i){this._radius=0/0,this._height=0/0,this._slices=0,void 0===e&&(e=.5),void 0===n&&(n=2),void 0===i&&(i=32),t.__super.call(this),this._radius=e,this._height=n,this._slices=i,this._create()}r(t,"laya.d3.resource.models.CylinderMesh",e);var n=t.prototype;return n._create=function(){for(var e=this._slices+1+1+2*(this._slices+1)+(this._slices+1+1),t=3*this._slices+6*this._slices+3*this._slices,n=ci.vertexDeclaration,i=n.vertexStride/4,r=new Float32Array(e*i),a=new Uint16Array(t),o=2*Math.PI/this._slices,s=this._height/2,l=0,h=0,c=0,_=0,u=0,d=0,f=0,m=0;m<=this._slices;m++)0===m&&(r[d++]=0,r[d++]=s,r[d++]=0,r[d++]=0,r[d++]=1,r[d++]=0,r[d++]=.5,r[d++]=.5),l=m*o,c=Math.cos(l)*this._radius,_=s,u=Math.sin(l)*this._radius,r[d++]=c,r[d++]=_,r[d++]=u,r[d++]=0,r[d++]=1,r[d++]=0,r[d++]=.5+.5*Math.cos(l),r[d++]=.5+.5*Math.sin(l);for(var p=0;p<this._slices;p++)a[f++]=0,a[f++]=p+1,a[f++]=p+2;h+=this._slices+1+1;for(var v=0;v<=this._slices;v++)l=v*o,c=Math.cos(l+Math.PI)*this._radius,_=s,u=Math.sin(l+Math.PI)*this._radius,r[d++]=c,r[d+8*(this._slices+1)-1]=c,r[d++]=_,r[d+8*(this._slices+1)-1]=-_,r[d++]=u,r[d+8*(this._slices+1)-1]=u,r[d++]=c,r[d+8*(this._slices+1)-1]=c,r[d++]=0,r[d+8*(this._slices+1)-1]=0,r[d++]=u,r[d+8*(this._slices+1)-1]=u,r[d++]=1-1*v/this._slices,r[d+8*(this._slices+1)-1]=1-1*v/this._slices,r[d++]=0,r[d+8*(this._slices+1)-1]=1;d+=8*(this._slices+1);for(var E=0;E<this._slices;E++)a[f++]=E+h+(this._slices+1),a[f++]=E+h+1,a[f++]=E+h,a[f++]=E+h+(this._slices+1),a[f++]=E+h+(this._slices+1)+1,a[f++]=E+h+1;h+=2*(this._slices+1);for(var T=0;T<=this._slices;T++)0===T&&(r[d++]=0,r[d++]=-s,r[d++]=0,r[d++]=0,r[d++]=-1,r[d++]=0,r[d++]=.5,r[d++]=.5),l=T*o,c=Math.cos(l+Math.PI)*this._radius,_=-s,u=Math.sin(l+Math.PI)*this._radius,r[d++]=c,r[d++]=_,r[d++]=u,r[d++]=0,r[d++]=-1,r[d++]=0,r[d++]=.5+.5*Math.cos(l),r[d++]=.5+.5*Math.sin(l);for(var g=0;g<this._slices;g++)a[f++]=0+h,a[f++]=g+2+h,a[f++]=g+1+h;h+=this._slices+1+1,this.setData(n,r,a)},a(0,n,"radius",function(){return this._radius},function(e){this._radius!==e&&(this._radius=e,this.releaseResource(),this._create())}),a(0,n,"height",function(){return this._height},function(e){this._height!==e&&(this._height=e,this.releaseResource(),this._create())}),a(0,n,"slices",function(){return this._slices},function(e){this._slices!==e&&(this._slices=e,this.releaseResource(),this._create())}),t}(hr),function(e){function t(e,n,i,r){this._long=0/0,this._width=0/0,this._stacks=0,this._slices=0,void 0===e&&(e=10),void 0===n&&(n=10),void 0===i&&(i=10),void 0===r&&(r=10),t.__super.call(this),this._long=e,this._width=n,this._stacks=i,this._slices=r,this._create()}r(t,"laya.d3.resource.models.PlaneMesh",e);var n=t.prototype;return n._create=function(){for(var e=(this._stacks+1)*(this._slices+1),t=this._stacks*this._slices*2*3,n=new Uint16Array(t),i=ci.vertexDeclaration,r=i.vertexStride/4,a=new Float32Array(e*r),o=this._long/2,s=this._width/2,l=this._long/this._stacks,h=this._width/this._slices,c=0,_=0;_<=this._slices;_++)for(var u=0;u<=this._stacks;u++)a[c++]=u*l-o,a[c++]=0,a[c++]=_*h-s,a[c++]=0,a[c++]=1,a[c++]=0,a[c++]=1*u/this._stacks,a[c++]=1*_/this._slices;var d=0;for(_=0;_<this._slices;_++)for(u=0;u<this._stacks;u++)n[d++]=(_+1)*(this._stacks+1)+u,n[d++]=_*(this._stacks+1)+u,n[d++]=(_+1)*(this._stacks+1)+u+1,n[d++]=_*(this._stacks+1)+u,n[d++]=_*(this._stacks+1)+u+1,n[d++]=(_+1)*(this._stacks+1)+u+1;this.setData(i,a,n)},a(0,n,"long",function(){return this._long},function(e){this._long!==e&&(this._long=e,this.releaseResource(),this._create())}),a(0,n,"width",function(){return this._width},function(e){this._width!==e&&(this._width=e,this.releaseResource(),this._create())}),a(0,n,"stacks",function(){return this._stacks},function(e){this._stacks!==e&&(this._stacks=e,this.releaseResource(),this._create())}),a(0,n,"slices",function(){return this._slices},function(e){this._slices!==e&&(this._slices=e,this.releaseResource(),this._create())}),t}(hr),function(e){function t(e,n){this._long=0/0,this._width=0/0,void 0===e&&(e=1),void 0===n&&(n=1),t.__super.call(this),this._long=e,this._width=n,this._create()}r(t,"laya.d3.resource.models.QuadMesh",e);var n=t.prototype;return n._create=function(){var e=ci.vertexDeclaration,t=(e.vertexStride/4,this._long/2),n=this._width/2,i=new Float32Array([-t,n,0,0,0,1,0,0,t,n,0,0,0,1,1,0,-t,-n,0,0,0,1,0,1,t,-n,0,0,0,1,1,1]),r=new Uint16Array([0,1,2,3,2,1]);this.setData(e,i,r)},a(0,n,"long",function(){return this._long},function(e){this._long!==e&&(this._long=e,this.releaseResource(),this._create())}),a(0,n,"width",function(){return this._width},function(e){this._width!==e&&(this._width=e,this.releaseResource(),this._create())}),t}(hr),function(e){function t(e,n,i){this._radius=0/0,this._slices=0,this._stacks=0,void 0===e&&(e=.5),void 0===n&&(n=32),void 0===i&&(i=32),t.__super.call(this),this._radius=e,this._stacks=n,this._slices=i,this._create()}r(t,"laya.d3.resource.models.SphereMesh",e);var n=t.prototype;return n._create=function(){var e=(this._stacks+1)*(this._slices+1),t=3*this._stacks*(this._slices+1)*2,n=new Uint16Array(t),i=ci.vertexDeclaration,r=i.vertexStride/4,a=new Float32Array(e*r),o=Math.PI/this._stacks,s=2*Math.PI/this._slices,l=0;e=0,t=0;for(var h=0;h<this._stacks+1;h++)for(var c=Math.sin(h*o),_=Math.cos(h*o),u=0;u<this._slices+1;u++){var d=c*Math.sin(u*s+1*Math.PI/2),f=c*Math.cos(u*s+1*Math.PI/2);a[e+0]=d*this._radius,a[e+1]=_*this._radius,a[e+2]=f*this._radius,a[e+3]=d,a[e+4]=_,a[e+5]=f,a[e+6]=u/this._slices,a[e+7]=h/this._stacks,e+=r,h!=this._stacks-1&&(n[t++]=l+(this._slices+1),n[t++]=l,n[t++]=l+1,n[t++]=l+this._slices,n[t++]=l,n[t++]=l+(this._slices+1),l++)}this.setData(i,a,n)},a(0,n,"radius",function(){return this._radius},function(e){this._radius!==e&&(this._radius=e,this.releaseResource(),this._create())}),a(0,n,"slices",function(){return this._slices},function(e){this._slices!==e&&(this._slices=e,this.releaseResource(),this._create())}),a(0,n,"stacks",function(){return this._stacks},function(e){this._stacks!==e&&(this._stacks=e,this.releaseResource(),this._create())}),t}(hr),function(e){function t(e,n,i){this._minX=0/0,this._minZ=0/0,this._cellSize=null,this._heightMap=null,t.__super.call(this,e,i),this._heightMap=n,this._cellSize=new xi}r(t,"laya.d3.core.MeshTerrainSprite3D",e);var n=t.prototype;return n._disableRotation=function(){var e=this.transform.rotation;e.elements[0]=0,e.elements[1]=0,e.elements[2]=0,e.elements[3]=1,this.transform.rotation=e},n._getScaleX=function(){var e=this.transform.worldMatrix,t=e.elements,n=t[0],i=t[1],r=t[2];return Math.sqrt(n*n+i*i+r*r)},n._getScaleZ=function(){var e=this.transform.worldMatrix,t=e.elements,n=t[8],i=t[9],r=t[10];return Math.sqrt(n*n+i*i+r*r)},n._initCreateFromMesh=function(e,t){this._heightMap=K.creatFromMesh(this.meshFilter.sharedMesh,e,t,this._cellSize);{var n=this.meshFilter.sharedMesh.boundingBox,i=n.min;n.max}this._minX=i.x,this._minZ=i.z},n._initCreateFromMeshHeightMap=function(e,t,n){var i=this.meshFilter.sharedMesh.boundingBox;this._heightMap=K.createFromImage(e,t,n),this._computeCellSize(i);{var r=i.min;i.max}this._minX=r.x,this._minZ=r.z},n._computeCellSize=function(e){var t=e.min,n=e.max,i=t.x,r=t.z,a=n.x,o=n.z,s=a-i,l=o-r;this._cellSize.elements[0]=s/(this._heightMap.width-1),this._cellSize.elements[1]=l/(this._heightMap.height-1)},n._update=function(){this._disableRotation()},n.getHeight=function(e,n){t._tempVector3.elements[0]=e,t._tempVector3.elements[1]=0,t._tempVector3.elements[2]=n,this._disableRotation();var i=this.transform.worldMatrix;i.invert(t._tempMatrix4x4),Di.transformCoordinate(t._tempVector3,t._tempMatrix4x4,t._tempVector3),e=t._tempVector3.elements[0],n=t._tempVector3.elements[2];var r=(e-this._minX)/this._cellSize.x,a=(n-this._minZ)/this._cellSize.y,o=Math.floor(a),s=Math.floor(r),l=r-s,h=a-o,c=0/0,_=0/0,u=i.elements,d=u[4],f=u[5],m=u[6],p=Math.sqrt(d*d+f*f+m*m),v=u[13],E=this._heightMap.getHeight(o,s+1),T=this._heightMap.getHeight(o+1,s);if(isNaN(E)||isNaN(T))return 0/0;if(1>=l+h){var g=this._heightMap.getHeight(o,s);return isNaN(g)?0/0:(c=E-g,_=T-g,(g+l*c+h*_)*p+v)}var S=this._heightMap.getHeight(o+1,s+1);return isNaN(S)?0/0:(c=T-S,_=E-S,(S+(1-l)*c+(1-h)*_)*p+v)},a(0,n,"minX",function(){var e=this.transform.worldMatrix,t=e.elements;return this._minX*this._getScaleX()+t[12]}),a(0,n,"width",function(){return(this._heightMap.width-1)*this._cellSize.x*this._getScaleX()}),a(0,n,"minZ",function(){var e=this.transform.worldMatrix,t=e.elements;return this._minZ*this._getScaleZ()+t[14]}),a(0,n,"depth",function(){return(this._heightMap.height-1)*this._cellSize.y*this._getScaleZ()}),t.createFromMesh=function(e,n,i,r){var a=new t(e,null,r);return a._initCreateFromMesh(n,i),a},t.createFromMeshAndHeightMap=function(e,n,i,r,a){var o=new t(e,null,a);return o._initCreateFromMeshHeightMap(n,i,r),o},i(t,["_tempVector3",function(){return this._tempVector3=new Di},"_tempMatrix4x4",function(){return this._tempMatrix4x4=new Wt}]),t}(Tr)}}(window,document,Laya);

  // This is laya.physics3D.js, a port of Bullet Physics to JavaScript. zlib licensed.
  var Physics3D = function(memorySize) {
  Physics3D ={};

var c;c||(c=typeof Physics3D !== 'undefined' ? Physics3D : {});var aa={},ba;for(ba in c)c.hasOwnProperty(ba)&&(aa[ba]=c[ba]);c.arguments=[];c.thisProgram="./this.program";c.quit=function(a,b){throw b;};c.preRun=[];c.postRun=[];var ca=!1,da=!1,ea=!1,fa=!1;ca="object"===typeof window;da="function"===typeof importScripts;ea="object"===typeof process&&"function"===typeof require&&!ca&&!da;fa=!ca&&!ea&&!da;var ia="";
if(ea){ia=__dirname+"/";var ja,ka;c.read=function(a,b){var e=la(a);e||(ja||(ja=require("fs")),ka||(ka=require("path")),a=ka.normalize(a),e=ja.readFileSync(a));return b?e:e.toString()};c.readBinary=function(a){a=c.read(a,!0);a.buffer||(a=new Uint8Array(a));assert(a.buffer);return a};1<process.argv.length&&(c.thisProgram=process.argv[1].replace(/\\/g,"/"));c.arguments=process.argv.slice(2);process.on("uncaughtException",function(a){throw a;});process.on("unhandledRejection",function(){process.exit(1)});
c.quit=function(a){process.exit(a)};c.inspect=function(){return"[Emscripten Module object]"}}else if(fa)"undefined"!=typeof read&&(c.read=function(a){var b=la(a);return b?ma(b):read(a)}),c.readBinary=function(a){var b;if(b=la(a))return b;if("function"===typeof readbuffer)return new Uint8Array(readbuffer(a));b=read(a,"binary");assert("object"===typeof b);return b},"undefined"!=typeof scriptArgs?c.arguments=scriptArgs:"undefined"!=typeof arguments&&(c.arguments=arguments),"function"===typeof quit&&
(c.quit=function(a){quit(a)});else if(ca||da){if(ca){}else da&&(ia=self.location.href.split("/").slice(0,-1).join("/")+"/");c.read=function(a){try{var b=new XMLHttpRequest;b.open("GET",a,!1);b.send(null);return b.responseText}catch(e){if(a=la(a))return ma(a);throw e;}};da&&(c.readBinary=function(a){try{var b=new XMLHttpRequest;b.open("GET",a,!1);b.responseType="arraybuffer";
b.send(null);return new Uint8Array(b.response)}catch(e){if(a=la(a))return a;throw e;}});c.readAsync=function(a,b,e){var f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType="arraybuffer";f.onload=function(){if(200==f.status||0==f.status&&f.response)b(f.response);else{var g=la(a);g?b(g.buffer):e()}};f.onerror=e;f.send(null)};c.setWindowTitle=function(a){document.title=a}}
var oa=c.print||("undefined"!==typeof console?console.log.bind(console):"undefined"!==typeof print?print:null),pa=c.printErr||("undefined"!==typeof printErr?printErr:"undefined"!==typeof console&&console.warn.bind(console)||oa);for(ba in aa)aa.hasOwnProperty(ba)&&(c[ba]=aa[ba]);aa=void 0;function ra(a){var b;b||(b=16);return Math.ceil(a/b)*b}var sa=0;function assert(a,b){a||ta("Assertion failed: "+b)}var ua="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;
"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");var buffer,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea;ya=za=Aa=Ba=Ca=Da=Ea=0;
function Fa(){ta("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+Ga+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or (4) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}var Ha=c.TOTAL_STACK||5242880,Ga=c.TOTAL_MEMORY||memorySize;
Ga<Ha&&pa("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+Ga+"! (TOTAL_STACK="+Ha+")");c.buffer?buffer=c.buffer:(buffer=new ArrayBuffer(Ga),c.buffer=buffer);c.HEAP8=new Int8Array(buffer);c.HEAP16=new Int16Array(buffer);c.HEAP32=wa=new Int32Array(buffer);c.HEAPU8=va=new Uint8Array(buffer);c.HEAPU16=new Uint16Array(buffer);c.HEAPU32=new Uint32Array(buffer);c.HEAPF32=xa=new Float32Array(buffer);c.HEAPF64=new Float64Array(buffer);
function Ia(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b)b();else{var e=b.l;"number"===typeof e?void 0===b.f?c.dynCall_v(e):c.dynCall_vi(e,b.f):e(void 0===b.f?null:b.f)}}}var Ja=[],Ka=[],La=[],Ma=[],Na=!1;function Oa(){var a=c.preRun.shift();Ja.unshift(a)}Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(a,b){var e=a&65535,f=b&65535;return e*f+((a>>>16)*f+e*(b>>>16)<<16)|0});Math.imul=Math.imul;
Math.clz32||(Math.clz32=function(a){a>>>=0;for(var b=0;32>b;b++)if(a&1<<31-b)return b;return 32});Math.clz32=Math.clz32;Math.trunc||(Math.trunc=function(a){return 0>a?Math.ceil(a):Math.floor(a)});Math.trunc=Math.trunc;var Pa=Math.abs,Qa=Math.cos,Ra=Math.sin,Sa=Math.sqrt,Ta=0,Ua=null,Va=null;c.preloadedImages={};c.preloadedAudios={};
var Wa=null,Xa="data:application/octet-stream;base64,",Ya=[function(a,b,e,f,g,h,k,m){a=c.getCache(c.ConcreteContactResultCallback)[a];if(!a.hasOwnProperty("addSingleResult"))throw"a JSImplementation must implement all functions, you forgot ConcreteContactResultCallback::addSingleResult.";return a.addSingleResult(b,e,f,g,h,k,m)},function(a,b){a=c.getCache(c.LayaMotionState)[a];if(!a.hasOwnProperty("getWorldTransform"))throw"a JSImplementation must implement all functions, you forgot LayaMotionState::getWorldTransform.";
a.getWorldTransform(b)},function(a,b){a=c.getCache(c.LayaMotionState)[a];if(!a.hasOwnProperty("setWorldTransform"))throw"a JSImplementation must implement all functions, you forgot LayaMotionState::setWorldTransform.";a.setWorldTransform(b)}];ya=8;za=ya+26544;Ka.push({l:function(){Za()}},{l:function(){$a()}});Wa="data:application/octet-stream;base64,AAAAAAAAAAARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAADAxMjM0NTY3ODlBQkNERUZUISIZDQECAxFLHAwQBAsdEh4naG5vcHFiIAUGDxMUFRoIFgcoJBcYCQoOGx8lI4OCfSYqKzw9Pj9DR0pNWFlaW1xdXl9gYWNkZWZnaWprbHJzdHl6e3wAAAAAAAAAAABJbGxlZ2FsIGJ5dGUgc2VxdWVuY2UARG9tYWluIGVycm9yAFJlc3VsdCBub3QgcmVwcmVzZW50YWJsZQBOb3QgYSB0dHkAUGVybWlzc2lvbiBkZW5pZWQAT3BlcmF0aW9uIG5vdCBwZXJtaXR0ZWQATm8gc3VjaCBmaWxlIG9yIGRpcmVjdG9yeQBObyBzdWNoIHByb2Nlc3MARmlsZSBleGlzdHMAVmFsdWUgdG9vIGxhcmdlIGZvciBkYXRhIHR5cGUATm8gc3BhY2UgbGVmdCBvbiBkZXZpY2UAT3V0IG9mIG1lbW9yeQBSZXNvdXJjZSBidXN5AEludGVycnVwdGVkIHN5c3RlbSBjYWxsAFJlc291cmNlIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlAEludmFsaWQgc2VlawBDcm9zcy1kZXZpY2UgbGluawBSZWFkLW9ubHkgZmlsZSBzeXN0ZW0ARGlyZWN0b3J5IG5vdCBlbXB0eQBDb25uZWN0aW9uIHJlc2V0IGJ5IHBlZXIAT3BlcmF0aW9uIHRpbWVkIG91dABDb25uZWN0aW9uIHJlZnVzZWQASG9zdCBpcyBkb3duAEhvc3QgaXMgdW5yZWFjaGFibGUAQWRkcmVzcyBpbiB1c2UAQnJva2VuIHBpcGUASS9PIGVycm9yAE5vIHN1Y2ggZGV2aWNlIG9yIGFkZHJlc3MAQmxvY2sgZGV2aWNlIHJlcXVpcmVkAE5vIHN1Y2ggZGV2aWNlAE5vdCBhIGRpcmVjdG9yeQBJcyBhIGRpcmVjdG9yeQBUZXh0IGZpbGUgYnVzeQBFeGVjIGZvcm1hdCBlcnJvcgBJbnZhbGlkIGFyZ3VtZW50AEFyZ3VtZW50IGxpc3QgdG9vIGxvbmcAU3ltYm9saWMgbGluayBsb29wAEZpbGVuYW1lIHRvbyBsb25nAFRvbyBtYW55IG9wZW4gZmlsZXMgaW4gc3lzdGVtAE5vIGZpbGUgZGVzY3JpcHRvcnMgYXZhaWxhYmxlAEJhZCBmaWxlIGRlc2NyaXB0b3IATm8gY2hpbGQgcHJvY2VzcwBCYWQgYWRkcmVzcwBGaWxlIHRvbyBsYXJnZQBUb28gbWFueSBsaW5rcwBObyBsb2NrcyBhdmFpbGFibGUAUmVzb3VyY2UgZGVhZGxvY2sgd291bGQgb2NjdXIAU3RhdGUgbm90IHJlY292ZXJhYmxlAFByZXZpb3VzIG93bmVyIGRpZWQAT3BlcmF0aW9uIGNhbmNlbGVkAEZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZABObyBtZXNzYWdlIG9mIGRlc2lyZWQgdHlwZQBJZGVudGlmaWVyIHJlbW92ZWQARGV2aWNlIG5vdCBhIHN0cmVhbQBObyBkYXRhIGF2YWlsYWJsZQBEZXZpY2UgdGltZW91dABPdXQgb2Ygc3RyZWFtcyByZXNvdXJjZXMATGluayBoYXMgYmVlbiBzZXZlcmVkAFByb3RvY29sIGVycm9yAEJhZCBtZXNzYWdlAEZpbGUgZGVzY3JpcHRvciBpbiBiYWQgc3RhdGUATm90IGEgc29ja2V0AERlc3RpbmF0aW9uIGFkZHJlc3MgcmVxdWlyZWQATWVzc2FnZSB0b28gbGFyZ2UAUHJvdG9jb2wgd3JvbmcgdHlwZSBmb3Igc29ja2V0AFByb3RvY29sIG5vdCBhdmFpbGFibGUAUHJvdG9jb2wgbm90IHN1cHBvcnRlZABTb2NrZXQgdHlwZSBub3Qgc3VwcG9ydGVkAE5vdCBzdXBwb3J0ZWQAUHJvdG9jb2wgZmFtaWx5IG5vdCBzdXBwb3J0ZWQAQWRkcmVzcyBmYW1pbHkgbm90IHN1cHBvcnRlZCBieSBwcm90b2NvbABBZGRyZXNzIG5vdCBhdmFpbGFibGUATmV0d29yayBpcyBkb3duAE5ldHdvcmsgdW5yZWFjaGFibGUAQ29ubmVjdGlvbiByZXNldCBieSBuZXR3b3JrAENvbm5lY3Rpb24gYWJvcnRlZABObyBidWZmZXIgc3BhY2UgYXZhaWxhYmxlAFNvY2tldCBpcyBjb25uZWN0ZWQAU29ja2V0IG5vdCBjb25uZWN0ZWQAQ2Fubm90IHNlbmQgYWZ0ZXIgc29ja2V0IHNodXRkb3duAE9wZXJhdGlvbiBhbHJlYWR5IGluIHByb2dyZXNzAE9wZXJhdGlvbiBpbiBwcm9ncmVzcwBTdGFsZSBmaWxlIGhhbmRsZQBSZW1vdGUgSS9PIGVycm9yAFF1b3RhIGV4Y2VlZGVkAE5vIG1lZGl1bSBmb3VuZABXcm9uZyBtZWRpdW0gdHlwZQBObyBlcnJvciBpbmZvcm1hdGlvbgAAAAAAAOgrAABYLQAAcAkAAAAAAADAKwAAeC0AAOgrAACkLQAAiAkAAAAAAADAKwAA0i0AAOgrAAD9LQAAoAkAAAAAAADAKwAALC4AAOgrAABULgAAuAkAAAAAAADAKwAAai4AAOgrAACGLgAA0AkAAAAAAADAKwAAnS4AAMArAACtLgAA6CsAAMIuAACgCQAAAAAAAOgrAADxLgAAiAkAAAAAAADoKwAAFTEAANAJAAAAAAAA6CsAAFUxAAAwCgAAAAAAAOgrAAAnMQAA8AkAAAAAAADoKwAAdjEAAEAKAAAAAAAAwCsAAJcxAADoKwAAxTEAAOAKAAAAAAAA6CsAAAAyAACICgAAAAAAAOgrAAAwMgAA4AoAAAAAAADoKwAAbDIAAGgKAAAAAAAA6CsAAIwyAADgCgAAAAAAAOgrAADIMgAA4AoAAAAAAADoKwAA/TIAAOAKAAAAAAAA6CsAABczAADICgAAAAAAAMArAAA9MwAA6CsAAGkzAADgCgAAAAAAABAsAACZMwAAAAAAAAEAAAD4CgAAAgQAAMArAACtMwAA6CsAAPszAAAgCwAAAAAAAOgrAAC9MwAA8AkAAAAAAADoKwAAFTQAAGgMAAAAAAAA6CsAACc0AABACwAAAAAAAMArAABFNAAA6CsAAIg0AABgDAAAAAAAAOgrAACWNAAAQAoAAAAAAADoKwAAqTQAANgJAAAAAAAA6CsAAPc0AACICwAAAAAAAOgrAADFNAAAmAsAAAAAAADAKwAA3zQAAOgrAAAGNQAAsAsAAAAAAADoKwAAGDUAALgJAAAAAAAA6CsAAIY1AACYCwAAAAAAAOgrAAAxNQAA4AsAAAAAAADAKwAARjUAAOgrAABZNQAA4AsAAAAAAADoKwAAcDUAAOALAAAAAAAA6CsAAJw2AACwCwAAAAAAAOgrAACZNQAAKAwAAAAAAADAKwAABzYAAOgrAAAbNgAAKAwAAAAAAADoKwAA1TYAAKARAAAAAAAA6CsAALs2AAAoDAAAAAAAAMArAAAINwAAwCsAAIM6AADoKwAAZDkAAMgMAAAAAAAA6CsAABw3AACgCQAAAAAAAOgrAAChNwAA4AsAAAAAAADoKwAAHzgAAGARAAAAAAAA6CsAALQ4AABgEQAAAAAAAMArAABHOQAA6CsAAHo5AADYDAAAAAAAAMArAACUOQAAECwAAK85AAAAAAAAAgAAAJAQAAACAAAAmBAAAAIEAADoKwAAljoAAIgJAAAAAAAA6CsAAHU7AADgCwAAAAAAAOgrAAAaPAAAcBEAAAAAAADoKwAAyzwAAHARAAAAAAAA6CsAAHo9AADIDAAAAAAAAOgrAACsPQAA2AwAAAAAAADoKwAAkj0AAGgOAAAAAAAA6CsAAMY9AACADQAAAAAAAMArAADoPQAA6CsAAAM+AACYDQAAAAAAAMArAAAzPgAA6CsAAFQ+AACYDQAAAAAAAOgrAAB/PgAAmA0AAAAAAADoKwAAsj4AAJgNAAAAAAAA6CsAAOM+AACYDQAAAAAAAOgrAAAEPwAAmA0AAAAAAADoKwAAOD8AAJgNAAAAAAAA6CsAAG0/AACYDQAAAAAAAOgrAACaPwAAmA0AAAAAAADoKwAA0z8AAJgNAAAAAAAA6CsAAAVAAABADgAAAAAAAMArAAAYQAAA6CsAAC9AAABgDAAAAAAAAOgrAAA/QAAASA4AAAAAAADoKwAAWkAAAHgOAAAAAAAAwCsAAG1AAADAKwAAnUAAAOgrAAC5QAAAsBEAAAAAAADoKwAA3EAAALARAAAAAAAA6CsAAAFBAAC4DgAAAAAAAMArAAAaQQAA6CsAAF9BAABQEAAAAAAAAOgrAAAaQgAAsBAAAAAAAADoKwAAbEEAAPAOAAAAAAAAwCsAANpBAADoKwAAM0IAAPAOAAAAAAAA6CsAAJtCAADwDgAAAAAAAOgrAAAsQwAAoA8AAAAAAADoKwAARkMAABgPAAAAAAAA6CsAAGFDAAAYDwAAAAAAAMArAACIQwAA6CsAANFDAABIDwAAAAAAAOgrAAD4QwAAoA8AAAAAAADoKwAADEQAAGAPAAAAAAAA6CsAACFEAABgDwAAAAAAAOgrAABNRAAAYBAAAAAAAADoKwAAYUQAALAPAAAAAAAA6CsAAHlEAABIDwAAAAAAAOgrAAC0RAAAYBAAAAAAAADoKwAAiUQAAJgQAAAAAAAA6CsAAO5EAACgDwAAAAAAAOgrAAAKRQAA4A8AAAAAAADoKwAAJ0UAAOAPAAAAAAAA6CsAAEZFAAC4EgAAAAAAAOgrAABiRQAAqBEAAAAAAADoKwAAc0UAAJgQAAAAAAAA6CsAAM5FAACYEAAAAAAAAOgrAAAyRgAAoA8AAAAAAADoKwAATEYAAFAQAAAAAAAA6CsAAHhGAACgDwAAAAAAAOgrAACrRgAAuBIAAAAAAADAKwAAwEYAAMArAADVRgAA6CsAAPdGAADYEgAAAAAAAOgrAACTRwAAuBIAAAAAAADoKwAACEcAAJAQAAAAAAAA6CsAACBHAACYEAAAAAAAAOgrAAC8RwAAABEAAAAAAADoKwAAqUcAAHgOAAAAAAAAwCsAANpHAADoKwAA6UcAAAARAAAAAAAA6CsAAPtHAAAoEQAAAAAAAMArAAAcSAAA6CsAAD1IAAC4DgAAAAAAAOgrAAD8SAAAKBEAAAAAAADoKwAAUUgAAHgOAAAAAAAA6CsAACBJAACQEAAAAAAAAOgrAABXSQAAkBAAAAAAAADoKwAARUkAAFAQAAAAAAAA6CsAAHZJAAAAEQAAAAAAAMArAACPSQAAwCsAAPlJAADoKwAACkoAAEAOAAAAAAAA6CsAACtKAACwEQAAAAAAAOgrAABISgAAuA4AAAAAAADoKwAAdEoAALARAAAAAAAA6CsAAFtKAADgCwAAAAAAAOgrAAC0SgAA4BEAAAAAAADoKwAAk0oAAOALAAAAAAAA6CsAAJRLAACwEQAAAAAAAOgrAADbSgAAkBAAAAAAAADoKwAAeUsAAJAQAAAAAAAA6CsAAP9MAACYDQAAAAAAAOgrAADlTAAAsBEAAAAAAADoKwAAuEsAAGgOAAAAAAAA6CsAANNLAAB4DgAAAAAAAOgrAABgTAAAeA4AAAAAAADoKwAAJ00AAEAOAAAAAAAAwCsAAElNAADoKwAAY00AAEgPAAAAAAAAwCsAAHRNAADAKwAAHE4AAOgrAAA2TgAA0BIAAAAAAADAKwAAH08AAOgrAAB/TwAAABMAAAAAAADoKwAALE8AABATAAAAAAAAwCsAAE1PAADoKwAAWk8AAPASAAAAAAAA6CsAAIVQAAAAEwAAAAAAAOgrAABhUAAAKBMAAAAAAADoKwAAp1AAAPASAAAAAAAAAAAAAGAJAAABAAAAAgAAAAEAAAABAAAAAAAAAHAJAAADAAAABAAAAAEAAAABAAAAAAAAAHgJAAAFAAAABgAAAAIAAAABAAAAAAAAAIgJAAAHAAAACAAAAAIAAAABAAAAAAAAAJAJAAAJAAAACgAAAAMAAAACAAAAAAAAAKAJAAALAAAADAAAAAMAAAABAAAAAAAAAKgJAAANAAAADgAAAAEAAAABAAAAAQAAAAAAAAC4CQAADwAAABAAAAABAAAAAQAAAAEAAAAAAAAAwAkAABEAAAASAAAAAQAAAAIAAAAAAAAA0AkAABMAAAAUAAAAAwAAAAQAAAAAAAAA2AkAABUAAAAWAAAAAQAAAAAAAADgCQAAFwAAABgAAAADAAAAAwAAAAAAAADwCQAAGQAAABoAAAACAAAABAAAAAAAAAAACgAAGwAAABwAAAAFAAAABgAAAAAAAAAQCgAAHQAAAB4AAAABAAAABwAAAAgAAAACAAAACQAAAAoAAAALAAAAAwAAAAEAAAAMAAAAAgAAAA0AAAACAAAADgAAAAMAAAAPAAAAEAAAAAAAAAAgCgAABwAAAB8AAAACAAAABQAAAAAAAABICgAAIAAAACEAAAAiAAAAAQAAABEAAAASAAAAAQAAAAEAAAAGAAAABAAAAAMAAAACAAAAAAAAAFgKAAAjAAAAJAAAACUAAAABAAAAEwAAABQAAAACAAAAAgAAAAcAAAAFAAAABAAAAAAAAABoCgAAIAAAACYAAAAnAAAAAQAAABUAAAAWAAAAAgAAAAMAAAAIAAAABgAAAAUAAAAoAAAABwAAAAAAAAB4CgAAIAAAACkAAAAnAAAAAQAAABUAAAAXAAAAAgAAAAMAAAAIAAAACAAAAAYAAAAoAAAABwAAAAMAAAAAAAAAiAoAACAAAAAqAAAAJQAAAAEAAAATAAAAFAAAAAIAAAACAAAABwAAAAUAAAAEAAAAAAAAAJgKAAAgAAAAKwAAACwAAAABAAAAGAAAABkAAAACAAAABAAAAAkAAAAJAAAABwAAAAoAAAAAAAAAqAoAACAAAAAtAAAALgAAAAEAAAAaAAAAGwAAAAIAAAAFAAAACgAAAAsAAAAIAAAADAAAAAAAAAC4CgAALwAAADAAAAAEAAAAAQAAAAUAAAAxAAAADQAAAAEAAAABAAAAAQAAAAIAAAABAAAAAgAAAAAAAADQCgAAIAAAADIAAAAzAAAAAQAAABwAAAAdAAAAAgAAAAYAAAALAAAADgAAAAkAAAAPAAAAAAAAAOAKAAAgAAAANAAAADMAAAABAAAAAQAAAAEAAAACAAAAAQAAAAEAAAAQAAAACgAAAAAAAAAACwAANQAAADYAAAA3AAAAOAAAAB4AAAARAAAAOQAAAAIAAAADAAAABAAAAB8AAAA6AAAAIAAAAAEAAAAGAAAAIQAAACIAAAAjAAAAJAAAACUAAAA7AAAAJgAAAAUAAAAnAAAAKAAAABIAAAATAAAABAAAAAUAAAAUAAAAPAAAACkAAAAqAAAAKwAAACwAAAABAAAAAgAAAD0AAAAtAAAAAwAAAAQAAAAFAAAABgAAAC4AAAA+AAAALwAAAAcAAAAAAAAAEAsAAAcAAAA/AAAABgAAAAwAAAAAAAAAMAsAAEAAAABBAAAAAQAAAAAAAABICwAAQgAAAEMAAAAwAAAABwAAABUAAAALAAAAMQAAAAAAAABYCwAARAAAAEUAAAAEAAAAMgAAAAgAAAAJAAAABgAAAAAAAABoCwAAFQAAAEYAAAACAAAAAAAAAHgLAABHAAAASAAAAAEAAAAHAAAAAQAAAAcAAAACAAAACAAAADMAAAAWAAAAFwAAAAgAAAA0AAAASQAAAAAAAACICwAARwAAAEoAAAABAAAABwAAAAEAAAAHAAAAAgAAAAgAAAAzAAAAFgAAABcAAAAIAAAANAAAAEkAAAAAAAAAoAsAAEsAAABMAAAADAAAAAMAAAAJAAAAGAAAABkAAAAaAAAACgAAABsAAAALAAAANQAAAAwAAAANAAAAHAAAADYAAAA3AAAAAAAAAMALAABNAAAATgAAAAIAAAANAAAAAgAAAAkAAAADAAAACgAAADgAAAAdAAAAHgAAAA4AAAA5AAAATwAAAAAAAADQCwAAUAAAAFEAAAAPAAAAOgAAAAUAAAAIAAAACQAAAAAAAADoCwAAUAAAAFIAAAAQAAAAOwAAAAUAAAAIAAAACQAAAAAAAAD4CwAAUAAAAFMAAAAQAAAAPAAAAAUAAAAIAAAACQAAAAAAAAAIDAAAVAAAAFUAAAAOAAAABAAAABEAAAAfAAAAIAAAACEAAAASAAAAIgAAABMAAAA9AAAAFAAAAA8AAAAjAAAAPgAAAD8AAAAAAAAAGAwAAFYAAABXAAAACgAAAAAAAAAwDAAAVgAAAFgAAAALAAAAAAAAAEAMAABZAAAAWgAAAAEAAAAQAAAAQAAAAEEAAAARAAAAEgAAAAsAAAAkAAAADAAAACUAAAAmAAAAJwAAAA0AAABCAAAAAAAAAFAMAABWAAAAWwAAAA4AAAAAAAAAYAwAAFwAAABdAAAAMAAAAAcAAAAoAAAAEwAAAEMAAAAAAAAAaAwAAF4AAABfAAAANwAAADgAAAAeAAAAEQAAAGAAAAACAAAAAwAAAAwAAABEAAAAOgAAAEUAAAAAAAAAcAwAAGEAAABiAAAADwAAAAAAAADADAAACgAAAEYAAAAVAAAAYwAAAGQAAAAAAAAAsAwAAGUAAABmAAAADQAAAAEAAAAAAAAAoAwAAGUAAABnAAAADQAAAAIAAAAAAAAAkAwAAFAAAABoAAAAEAAAAEcAAAAFAAAACAAAAAkAAAAAAAAAgAwAAAsAAABpAAAAEAAAAA0AAAAAAAAA4AwAAGoAAABrAAAADgAAAA8AAAD8////4AwAAGwAAABtAAAAEAAAAAAAAAAwDQAAZQAAAG4AAAARAAAAAQAAAAAAAAAgDQAAZQAAAG8AAAARAAAAAgAAAAAAAAAQDQAAUAAAAHAAAAAQAAAASAAAAAUAAAAIAAAACQAAAAAAAAAADQAABwAAAHEAAAARAAAADgAAAAAAAABADQAAYQAAAHIAAAASAAAAAAAAAFANAABhAAAAcwAAABMAAAAAAAAAYA0AAHQAAAB1AAAAFgAAABcAAAADAAAAAAAAAHANAAB2AAAAdwAAACkAAAAqAAAAFAAAABUAAAAAAAAAIA4AAHgAAAB5AAAABQAAAAAAAAAQDgAAeAAAAHoAAAAGAAAAAAAAAAAOAAB4AAAAewAAAAcAAAAAAAAA8A0AAHgAAAB8AAAACAAAAAAAAADgDQAAeAAAAH0AAAAJAAAAAAAAANANAAB4AAAAfgAAAAoAAAAAAAAAwA0AAHgAAAB/AAAACwAAAAAAAACwDQAAeAAAAIAAAAAMAAAAAAAAAKANAAB4AAAAgQAAAA0AAAAAAAAAiA0AAHgAAACCAAAADgAAAAAAAAAwDgAAgwAAAIQAAAADAAAAAQAAAEkAAAAAAAAASA4AAIUAAACGAAAAMAAAAAcAAAAoAAAAEwAAAEMAAAAYAAAAEgAAAAAAAABYDgAAhwAAAIgAAAAwAAAABwAAACgAAAATAAAAQwAAABkAAAATAAAAAAAAAGgOAAB0AAAAiQAAABYAAAAXAAAABAAAAAAAAACADgAAigAAAIsAAAAaAAAASgAAAAAAAACIDgAAjAAAAI0AAAAEAAAAAgAAAEsAAAAAAAAAmA4AAI4AAACPAAAABQAAAAMAAABMAAAAAAAAAKgOAACQAAAAkQAAAAYAAAAAAAAAwA4AAJIAAACTAAAAFAAAABsAAAABAAAAAQAAAE0AAAArAAAAAQAAACwAAABOAAAACwAAAAIAAAAtAAAAFgAAAE8AAAAcAAAAHQAAAAEAAAAVAAAAFgAAAC4AAAAeAAAAFAAAAC8AAAAwAAAAFwAAAB8AAAAxAAAAGAAAAAEAAAAgAAAAAAAAANAOAACUAAAAlQAAABkAAAAbAAAAAQAAAAEAAABQAAAAMgAAAAIAAAAzAAAATgAAAAwAAAADAAAANAAAABcAAABPAAAAGgAAACEAAAAiAAAAUQAAAFIAAAAAAAAA4A4AAJYAAACXAAAAIwAAAAAAAAD4DgAAlgAAAJgAAAAkAAAAAAAAAAgPAACWAAAAmQAAACUAAAAAAAAAGA8AAJoAAACbAAAAGwAAABsAAAABAAAAAQAAAFMAAAArAAAAAwAAADUAAABUAAAADQAAAAIAAAA2AAAAGAAAAE8AAAAmAAAAJwAAAAEAAAAcAAAAFgAAADcAAAAoAAAAAAAAACgPAACaAAAAnAAAABsAAAAbAAAAAQAAAAEAAABTAAAAKwAAAAMAAAA4AAAAVAAAAA0AAAACAAAANgAAABgAAABPAAAAJgAAACcAAAABAAAAHAAAABYAAAA3AAAAKAAAAAAAAAA4DwAAmgAAAJ0AAAAbAAAAGwAAAAEAAAABAAAAUwAAACsAAAADAAAAOQAAAFQAAAANAAAAAgAAADYAAAAYAAAATwAAACYAAAAnAAAAAQAAABwAAAAWAAAANwAAACgAAAAAAAAAUA8AAJ4AAACfAAAAHQAAABsAAAABAAAAAQAAAFUAAAA6AAAABAAAADsAAABOAAAADgAAAAQAAAA8AAAAGQAAAE8AAABWAAAAoAAAAAAAAABgDwAAmgAAAKEAAAAeAAAAGwAAAAEAAAABAAAAVwAAACsAAAAFAAAAPQAAAFgAAAAPAAAAAgAAAD4AAAAaAAAATwAAACkAAAAqAAAAAQAAAB8AAAAWAAAANwAAACgAAAAAAAAAcA8AAJoAAACiAAAAHgAAABsAAAABAAAAAQAAAFcAAAArAAAABQAAAD8AAABZAAAADwAAAAIAAAA+AAAAGgAAAE8AAAApAAAAKgAAAAEAAAAfAAAAFgAAADcAAAAoAAAAAAAAAIAPAACaAAAAowAAAB4AAAAbAAAAAQAAAAEAAABXAAAAKwAAAAUAAABAAAAAWgAAAA8AAAACAAAAPgAAABoAAABPAAAAKQAAACoAAAABAAAAHwAAABYAAAA3AAAAKAAAAAAAAACQDwAApAAAAKUAAAAgAAAAGwAAAAEAAAABAAAAWwAAACsAAAAGAAAAQQAAAE4AAAAPAAAAAgAAAEIAAAAbAAAATwAAACsAAAAsAAAAAgAAACEAAAAWAAAANwAAACgAAAAUAAAAQwAAAEQAAAAiAAAALQAAAEUAAAAjAAAAAgAAAAAAAACgDwAAmgAAAKYAAAAeAAAAGwAAAAEAAAABAAAAXAAAACsAAAABAAAAAQAAAE4AAAAPAAAAAgAAAC0AAAAWAAAATwAAACYAAAABAAAAAQAAAAEAAAAWAAAANwAAACgAAAAAAAAAwA8AAJIAAACnAAAAIAAAABsAAAABAAAAAQAAAF0AAABGAAAABgAAAEcAAABOAAAADwAAAAIAAAAtAAAAFgAAAE8AAAAuAAAALwAAAAEAAAAkAAAAFgAAADcAAAAoAAAAFAAAAEgAAABJAAAAJQAAADAAAABKAAAAJgAAAAMAAAAAAAAA0A8AAKgAAACpAAAAJwAAAAAAAADgDwAAmgAAAKoAAAAoAAAAGwAAAAEAAAABAAAAXgAAACsAAAAHAAAASwAAAF8AAAAQAAAAAgAAAEwAAAAcAAAATwAAADEAAAAyAAAAAQAAACkAAAAWAAAANwAAACgAAAAFAAAAAAAAAPAPAACaAAAAqwAAACgAAAAbAAAAAQAAAAEAAABeAAAAKwAAAAcAAABNAAAAXwAAABAAAAACAAAATAAAABwAAABPAAAAMQAAADMAAAABAAAAKgAAABYAAAA3AAAAKAAAAAYAAAAAAAAAABAAAJoAAACsAAAAKAAAABsAAAABAAAAAQAAAF4AAAArAAAABwAAAE4AAABfAAAAEAAAAAIAAABMAAAAHAAAAE8AAAAxAAAANAAAAAEAAAArAAAAFgAAADcAAAAoAAAABwAAAAAAAAAQEAAArQAAAK4AAAAsAAAAGwAAAAEAAAABAAAAYAAAAE8AAAAIAAAAUAAAAE4AAAAMAAAAAwAAAFEAAAAdAAAATwAAAC0AAAAPAAAAAAAAACAQAACvAAAAsAAAAA8AAABSAAAAHgAAAGEAAABiAAAAEAAAAAAAAABAEAAAqAAAALEAAAAuAAAAAAAAADAQAACoAAAAsgAAAC8AAAAAAAAAUBAAAJIAAACzAAAAHgAAABsAAAABAAAAAQAAAFwAAAArAAAABgAAAAEAAABOAAAADwAAAAIAAAAtAAAAFgAAAE8AAAAmAAAANQAAAAEAAAAwAAAAFgAAADcAAAAoAAAAFAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAcBAAAJoAAAC0AAAAMQAAABsAAAABAAAAAQAAAFwAAAArAAAACQAAAFMAAABOAAAAEQAAAAgAAAAtAAAAFgAAAE8AAAA2AAAANwAAAAEAAAAyAAAAFgAAADcAAAAoAAAAAAAAAIAQAAC1AAAAtgAAADMAAAAbAAAAAQAAAAEAAABjAAAAVAAAAAoAAABVAAAATgAAAAwAAAADAAAAVgAAAB8AAABPAAAANAAAAAAAAACgEAAAtwAAALgAAAA1AAAAAQAAAAIAAABkAAAAZQAAAFcAAABmAAAAZwAAAFgAAAA4AAAAOQAAAFkAAAAgAAAAAAAAALAQAAC5AAAAugAAABkAAAAbAAAAAQAAAAEAAABoAAAAMgAAAAIAAABaAAAATgAAAAwAAAADAAAAUQAAAB0AAABPAAAANgAAACEAAAAiAAAAAAAAAMAQAABlAAAAuwAAADcAAAAAAAAA0BAAAKgAAAC8AAAAOAAAAAAAAADgEAAAvQAAAL4AAAABAAAAAAAAAPAQAAB0AAAAvwAAADoAAAA7AAAABQAAAAAAAAAIEQAAvQAAAMAAAAACAAAAAAAAABgRAADBAAAAwgAAAAEAAAAAAAAAMBEAAJAAAADDAAAABwAAAAAAAABAEQAAwQAAAMQAAAACAAAAAAAAAFARAAB0AAAAxQAAADwAAAA9AAAABgAAAAAAAABwEQAAZQAAAMYAAAARAAAAAQAAAAAAAACAEQAAkgAAAMcAAAA5AAAAGwAAAAEAAAABAAAAXAAAACsAAAALAAAAWwAAAE4AAAAPAAAAAgAAAC0AAAAWAAAATwAAACYAAAA+AAAAAQAAADoAAAAWAAAAXAAAAD8AAAAUAAAAXQAAAF4AAAA7AAAAQAAAAF8AAAA8AAAABAAAAD0AAAAAAAAAkBEAAL0AAADIAAAAAwAAAAAAAACoEQAAyQAAAMoAAAAPAAAAUgAAAB4AAABhAAAAYgAAAAAAAADAEQAAywAAAMwAAAAIAAAABAAAAGkAAAAAAAAA0BEAAJAAAADNAAAACQAAAAAAAADgEQAAzgAAAM8AAAAKAAAABQAAAGoAAAAAAAAA8BEAAFAAAADQAAAAEAAAAGsAAAAFAAAACAAAAAkAAAAAAAAAABIAANEAAADSAAAACwAAAAYAAABsAAAAAAAAABASAABQAAAA0wAAAEEAAABtAAAABQAAAAgAAAAJAAAAAAAAACASAADUAAAA1QAAAAwAAAAHAAAAbgAAAAAAAAAwEgAAZQAAANYAAAA+AAAAAAAAAEASAADXAAAA2AAAAD8AAAAAAAAAUBIAANkAAADaAAAAEQAAAAAAAABgEgAA2wAAANwAAAANAAAACAAAAG8AAAAAAAAAkBIAAHQAAADdAAAAQgAAAEMAAAAHAAAAAAAAAIASAAB0AAAA3gAAAEQAAABFAAAACAAAAAAAAABwEgAAdAAAAN8AAAAWAAAAFwAAAAkAAAAAAAAAoBIAAOAAAADhAAAADgAAAAkAAABwAAAAAAAAALASAADiAAAA4wAAACEAAAAiAAAAYAAAAAAAAADIEgAA5AAAAOUAAAAAAAAA2BIAAOYAAADnAAAANQAAAAEAAAACAAAAZAAAAGUAAABXAAAAcQAAAHIAAABYAAAAOAAAADkAAABZAAAAIAAAAAEAAAACAAAAAAAAAAIAAAAAAAAAAQAAAAUAAAAAAAAAAAAAAGEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACMAAAAkAAAArWcAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAP//////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAPASAADoAAAA6QAAAOoAAADrAAAAJQAAAAQAAAAPAAAAQAAAAAAAAAAYEwAA6AAAAOwAAADqAAAA6wAAACUAAAAFAAAAEAAAAEEAAAAAAAAASBMAAOgAAADtAAAA6gAAAOsAAAAlAAAABgAAABEAAABCAAAAeyB2YXIgc2VsZiA9IE1vZHVsZVsnZ2V0Q2FjaGUnXShNb2R1bGVbJ0NvbmNyZXRlQ29udGFjdFJlc3VsdENhbGxiYWNrJ10pWyQwXTsgaWYgKCFzZWxmLmhhc093blByb3BlcnR5KCdhZGRTaW5nbGVSZXN1bHQnKSkgdGhyb3cgJ2EgSlNJbXBsZW1lbnRhdGlvbiBtdXN0IGltcGxlbWVudCBhbGwgZnVuY3Rpb25zLCB5b3UgZm9yZ290IENvbmNyZXRlQ29udGFjdFJlc3VsdENhbGxiYWNrOjphZGRTaW5nbGVSZXN1bHQuJzsgcmV0dXJuIHNlbGZbJ2FkZFNpbmdsZVJlc3VsdCddKCQxLCQyLCQzLCQ0LCQ1LCQ2LCQ3KTsgfQAyOUNvbmNyZXRlQ29udGFjdFJlc3VsdENhbGxiYWNrAE4xNmJ0Q29sbGlzaW9uV29ybGQyMUNvbnRhY3RSZXN1bHRDYWxsYmFja0UATjE2YnRDb2xsaXNpb25Xb3JsZDIzQWxsQ29udmV4UmVzdWx0Q2FsbGJhY2tFAE4xNmJ0Q29sbGlzaW9uV29ybGQyMENvbnZleFJlc3VsdENhbGxiYWNrRQBOMTZidENvbGxpc2lvbldvcmxkMjRDbG9zZXN0UmF5UmVzdWx0Q2FsbGJhY2tFAE4xNmJ0Q29sbGlzaW9uV29ybGQxN1JheVJlc3VsdENhbGxiYWNrRQAxOWJ0R2hvc3RQYWlyQ2FsbGJhY2sAMjVidE92ZXJsYXBwaW5nUGFpckNhbGxiYWNrADIwYnREZWZhdWx0TW90aW9uU3RhdGUAMTNidE1vdGlvblN0YXRlADE4YnRWZWhpY2xlUmF5Y2FzdGVyAE4xNmJ0Q29sbGlzaW9uV29ybGQyNEFsbEhpdHNSYXlSZXN1bHRDYWxsYmFja0UATjE2YnRDb2xsaXNpb25Xb3JsZDI3Q2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrRQB7IHZhciBzZWxmID0gTW9kdWxlWydnZXRDYWNoZSddKE1vZHVsZVsnTGF5YU1vdGlvblN0YXRlJ10pWyQwXTsgaWYgKCFzZWxmLmhhc093blByb3BlcnR5KCdzZXRXb3JsZFRyYW5zZm9ybScpKSB0aHJvdyAnYSBKU0ltcGxlbWVudGF0aW9uIG11c3QgaW1wbGVtZW50IGFsbCBmdW5jdGlvbnMsIHlvdSBmb3Jnb3QgTGF5YU1vdGlvblN0YXRlOjpzZXRXb3JsZFRyYW5zZm9ybS4nOyBzZWxmWydzZXRXb3JsZFRyYW5zZm9ybSddKCQxKTsgfQB7IHZhciBzZWxmID0gTW9kdWxlWydnZXRDYWNoZSddKE1vZHVsZVsnTGF5YU1vdGlvblN0YXRlJ10pWyQwXTsgaWYgKCFzZWxmLmhhc093blByb3BlcnR5KCdnZXRXb3JsZFRyYW5zZm9ybScpKSB0aHJvdyAnYSBKU0ltcGxlbWVudGF0aW9uIG11c3QgaW1wbGVtZW50IGFsbCBmdW5jdGlvbnMsIHlvdSBmb3Jnb3QgTGF5YU1vdGlvblN0YXRlOjpnZXRXb3JsZFRyYW5zZm9ybS4nOyBzZWxmWydnZXRXb3JsZFRyYW5zZm9ybSddKCQxKTsgfQAxNUxheWFNb3Rpb25TdGF0ZQA0M2J0S2luZW1hdGljQ2xvc2VzdE5vdE1lQ29udmV4UmVzdWx0Q2FsbGJhY2sAMzBidEtpbmVtYXRpY0NoYXJhY3RlckNvbnRyb2xsZXIAMzBidENoYXJhY3RlckNvbnRyb2xsZXJJbnRlcmZhY2UAMTdidEFjdGlvbkludGVyZmFjZQBidENvbmVUd2lzdENvbnN0cmFpbnREYXRhADIxYnRDb25lVHdpc3RDb25zdHJhaW50AGJ0R2VuZXJpYzZEb2ZTcHJpbmcyQ29uc3RyYWludERhdGEAMTdidEZpeGVkQ29uc3RyYWludABidEdlbmVyaWM2RG9mQ29uc3RyYWludERhdGEAMjNidEdlbmVyaWM2RG9mQ29uc3RyYWludABidEdlbmVyaWM2RG9mU3ByaW5nQ29uc3RyYWludERhdGEAMjlidEdlbmVyaWM2RG9mU3ByaW5nQ29uc3RyYWludAAzMGJ0R2VuZXJpYzZEb2ZTcHJpbmcyQ29uc3RyYWludABidEhpbmdlQ29uc3RyYWludEZsb2F0RGF0YQAxN2J0SGluZ2VDb25zdHJhaW50AGJ0UG9pbnQyUG9pbnRDb25zdHJhaW50RmxvYXREYXRhADIzYnRQb2ludDJQb2ludENvbnN0cmFpbnQAMzVidFNlcXVlbnRpYWxJbXB1bHNlQ29uc3RyYWludFNvbHZlcgAxOGJ0Q29uc3RyYWludFNvbHZlcgBidFNsaWRlckNvbnN0cmFpbnREYXRhADE4YnRTbGlkZXJDb25zdHJhaW50AGJ0VHlwZWRDb25zdHJhaW50RmxvYXREYXRhADE3YnRUeXBlZENvbnN0cmFpbnQAMTNidFR5cGVkT2JqZWN0ADM0YnRDbG9zZXN0Tm90TWVDb252ZXhSZXN1bHRDYWxsYmFjawBidER5bmFtaWNzV29ybGRGbG9hdERhdGEAMjNidERpc2NyZXRlRHluYW1pY3NXb3JsZAAxNWJ0RHluYW1pY3NXb3JsZAAyN0lucGxhY2VTb2x2ZXJJc2xhbmRDYWxsYmFjawBOMjVidFNpbXVsYXRpb25Jc2xhbmRNYW5hZ2VyMTRJc2xhbmRDYWxsYmFja0UAYnRSaWdpZEJvZHlGbG9hdERhdGEAMTFidFJpZ2lkQm9keQAxNmJ0UmF5Y2FzdFZlaGljbGUAMjVidERlZmF1bHRWZWhpY2xlUmF5Y2FzdGVyADIwYnRBeGlzU3dlZXAzSW50ZXJuYWxJdEUAMjFidEJyb2FkcGhhc2VJbnRlcmZhY2UAMTJidEF4aXNTd2VlcDMAMTVidE51bGxQYWlyQ2FjaGUAMjJidE92ZXJsYXBwaW5nUGFpckNhY2hlADE4YnREYnZ0VHJlZUNvbGxpZGVyAE42YnREYnZ0OElDb2xsaWRlRQAyMEJyb2FkcGhhc2VBYWJiVGVzdGVyADE5QnJvYWRwaGFzZVJheVRlc3RlcgAxNmJ0RGJ2dEJyb2FkcGhhc2UAWk4yOGJ0SGFzaGVkT3ZlcmxhcHBpbmdQYWlyQ2FjaGUxOWNsZWFuUHJveHlGcm9tUGFpcnNFUDE3YnRCcm9hZHBoYXNlUHJveHlQMTJidERpc3BhdGNoZXJFMTdDbGVhblBhaXJDYWxsYmFjawAxN2J0T3ZlcmxhcENhbGxiYWNrAFpOMjhidEhhc2hlZE92ZXJsYXBwaW5nUGFpckNhY2hlMzdyZW1vdmVPdmVybGFwcGluZ1BhaXJzQ29udGFpbmluZ1Byb3h5RVAxN2J0QnJvYWRwaGFzZVByb3h5UDEyYnREaXNwYXRjaGVyRTE4UmVtb3ZlUGFpckNhbGxiYWNrADI4YnRIYXNoZWRPdmVybGFwcGluZ1BhaXJDYWNoZQAyM2J0Q29sbGlzaW9uUGFpckNhbGxiYWNrADIxYnRDb2xsaXNpb25EaXNwYXRjaGVyAGJ0Q29sbGlzaW9uT2JqZWN0RmxvYXREYXRhADE3YnRDb2xsaXNpb25PYmplY3QAWk4xNmJ0Q29sbGlzaW9uV29ybGQyMXJheVRlc3RTaW5nbGVJbnRlcm5hbEVSSzExYnRUcmFuc2Zvcm1TMl9QSzI0YnRDb2xsaXNpb25PYmplY3RXcmFwcGVyUk5TXzE3UmF5UmVzdWx0Q2FsbGJhY2tFRTE1TG9jYWxJbmZvQWRkZXIyAFpOMTZidENvbGxpc2lvbldvcmxkMjFyYXlUZXN0U2luZ2xlSW50ZXJuYWxFUksxMWJ0VHJhbnNmb3JtUzJfUEsyNGJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlclJOU18xN1JheVJlc3VsdENhbGxiYWNrRUU5UmF5VGVzdGVyAFpOMTZidENvbGxpc2lvbldvcmxkMjFyYXlUZXN0U2luZ2xlSW50ZXJuYWxFUksxMWJ0VHJhbnNmb3JtUzJfUEsyNGJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlclJOU18xN1JheVJlc3VsdENhbGxiYWNrRUUyOUJyaWRnZVRyaWFuZ2xlUmF5Y2FzdENhbGxiYWNrXzAAWk4xNmJ0Q29sbGlzaW9uV29ybGQyMXJheVRlc3RTaW5nbGVJbnRlcm5hbEVSSzExYnRUcmFuc2Zvcm1TMl9QSzI0YnRDb2xsaXNpb25PYmplY3RXcmFwcGVyUk5TXzE3UmF5UmVzdWx0Q2FsbGJhY2tFRTI5QnJpZGdlVHJpYW5nbGVSYXljYXN0Q2FsbGJhY2sATjEyYnRDb252ZXhDYXN0MTBDYXN0UmVzdWx0RQAxOWJ0U2luZ2xlUmF5Q2FsbGJhY2sAMjNidEJyb2FkcGhhc2VSYXlDYWxsYmFjawAyNGJ0QnJvYWRwaGFzZUFhYmJDYWxsYmFjawAxN0RlYnVnRHJhd2NhbGxiYWNrAAFPdmVyZmxvdyBpbiBBQUJCLCBvYmplY3QgcmVtb3ZlZCBmcm9tIHNpbXVsYXRpb24ASWYgeW91IGNhbiByZXByb2R1Y2UgdGhpcywgcGxlYXNlIGVtYWlsIGJ1Z3NAY29udGludW91c3BoeXNpY3MuY29tCgBQbGVhc2UgaW5jbHVkZSBhYm92ZSBpbmZvcm1hdGlvbiwgeW91ciBQbGF0Zm9ybSwgdmVyc2lvbiBvZiBPUy4KAFRoYW5rcy4KADE2YnRDb2xsaXNpb25Xb3JsZABaWk4xNmJ0Q29sbGlzaW9uV29ybGQyNW9iamVjdFF1ZXJ5U2luZ2xlSW50ZXJuYWxFUEsxM2J0Q29udmV4U2hhcGVSSzExYnRUcmFuc2Zvcm1TNV9QSzI0YnRDb2xsaXNpb25PYmplY3RXcmFwcGVyUk5TXzIwQ29udmV4UmVzdWx0Q2FsbGJhY2tFZkVOMjJidENvbXBvdW5kTGVhZkNhbGxiYWNrMTJQcm9jZXNzQ2hpbGRFaVM1X1BLMTZidENvbGxpc2lvblNoYXBlRTE0TG9jYWxJbmZvQWRkZXIAWk4xNmJ0Q29sbGlzaW9uV29ybGQyNW9iamVjdFF1ZXJ5U2luZ2xlSW50ZXJuYWxFUEsxM2J0Q29udmV4U2hhcGVSSzExYnRUcmFuc2Zvcm1TNV9QSzI0YnRDb2xsaXNpb25PYmplY3RXcmFwcGVyUk5TXzIwQ29udmV4UmVzdWx0Q2FsbGJhY2tFZkUyMmJ0Q29tcG91bmRMZWFmQ2FsbGJhY2sAWk4xNmJ0Q29sbGlzaW9uV29ybGQyNW9iamVjdFF1ZXJ5U2luZ2xlSW50ZXJuYWxFUEsxM2J0Q29udmV4U2hhcGVSSzExYnRUcmFuc2Zvcm1TNV9QSzI0YnRDb2xsaXNpb25PYmplY3RXcmFwcGVyUk5TXzIwQ29udmV4UmVzdWx0Q2FsbGJhY2tFZkUzMkJyaWRnZVRyaWFuZ2xlQ29udmV4Y2FzdENhbGxiYWNrXzAAWk4xNmJ0Q29sbGlzaW9uV29ybGQyNW9iamVjdFF1ZXJ5U2luZ2xlSW50ZXJuYWxFUEsxM2J0Q29udmV4U2hhcGVSSzExYnRUcmFuc2Zvcm1TNV9QSzI0YnRDb2xsaXNpb25PYmplY3RXcmFwcGVyUk5TXzIwQ29udmV4UmVzdWx0Q2FsbGJhY2tFZkUzMkJyaWRnZVRyaWFuZ2xlQ29udmV4Y2FzdENhbGxiYWNrADIxYnRTaW5nbGVTd2VlcENhbGxiYWNrADIzYnRCcmlkZ2VkTWFuaWZvbGRSZXN1bHQAMjNidFNpbmdsZUNvbnRhY3RDYWxsYmFjawAzMWJ0RGVmYXVsdENvbGxpc2lvbkNvbmZpZ3VyYXRpb24AMjRidENvbGxpc2lvbkNvbmZpZ3VyYXRpb24ATjMxYnRDb252ZXhQbGFuZUNvbGxpc2lvbkFsZ29yaXRobTEwQ3JlYXRlRnVuY0UAMzBidENvbGxpc2lvbkFsZ29yaXRobUNyZWF0ZUZ1bmMATjI2YnRCb3hCb3hDb2xsaXNpb25BbGdvcml0aG0xMENyZWF0ZUZ1bmNFAE4zNGJ0U3BoZXJlVHJpYW5nbGVDb2xsaXNpb25BbGdvcml0aG0xMENyZWF0ZUZ1bmNFAE4zMmJ0U3BoZXJlU3BoZXJlQ29sbGlzaW9uQWxnb3JpdGhtMTBDcmVhdGVGdW5jRQBOMTZidEVtcHR5QWxnb3JpdGhtMTBDcmVhdGVGdW5jRQBOMjhidENvbXBvdW5kQ29sbGlzaW9uQWxnb3JpdGhtMTdTd2FwcGVkQ3JlYXRlRnVuY0UATjM2YnRDb21wb3VuZENvbXBvdW5kQ29sbGlzaW9uQWxnb3JpdGhtMTBDcmVhdGVGdW5jRQBOMjhidENvbXBvdW5kQ29sbGlzaW9uQWxnb3JpdGhtMTBDcmVhdGVGdW5jRQBOMzNidENvbnZleENvbmNhdmVDb2xsaXNpb25BbGdvcml0aG0xN1N3YXBwZWRDcmVhdGVGdW5jRQBOMzNidENvbnZleENvbmNhdmVDb2xsaXNpb25BbGdvcml0aG0xMENyZWF0ZUZ1bmNFADE2YnRFbXB0eUFsZ29yaXRobQAyMGJ0Q29sbGlzaW9uQWxnb3JpdGhtADEzYnRHaG9zdE9iamVjdAAyNGJ0UGFpckNhY2hpbmdHaG9zdE9iamVjdAAxNmJ0TWFuaWZvbGRSZXN1bHQATjM2YnREaXNjcmV0ZUNvbGxpc2lvbkRldGVjdG9ySW50ZXJmYWNlNlJlc3VsdEUAMjVidFNpbXVsYXRpb25Jc2xhbmRNYW5hZ2VyADMyYnRTcGhlcmVTcGhlcmVDb2xsaXNpb25BbGdvcml0aG0AMzRidFNwaGVyZVRyaWFuZ2xlQ29sbGlzaW9uQWxnb3JpdGhtADIyU3BoZXJlVHJpYW5nbGVEZXRlY3RvcgAzNmJ0RGlzY3JldGVDb2xsaXNpb25EZXRlY3RvckludGVyZmFjZQBidENvbnZleEludGVybmFsU2hhcGVEYXRhAEJveAAxMGJ0Qm94U2hhcGUAWk5LMjJidEJ2aFRyaWFuZ2xlTWVzaFNoYXBlMTlwcm9jZXNzQWxsVHJpYW5nbGVzRVAxOGJ0VHJpYW5nbGVDYWxsYmFja1JLOWJ0VmVjdG9yM1M0X0UyMU15Tm9kZU92ZXJsYXBDYWxsYmFjawAyMWJ0Tm9kZU92ZXJsYXBDYWxsYmFjawBidFRyaWFuZ2xlTWVzaFNoYXBlRGF0YQBCVkhUUklBTkdMRU1FU0gAMjJidEJ2aFRyaWFuZ2xlTWVzaFNoYXBlAFpOMjJidEJ2aFRyaWFuZ2xlTWVzaFNoYXBlMTRwZXJmb3JtUmF5Y2FzdEVQMThidFRyaWFuZ2xlQ2FsbGJhY2tSSzlidFZlY3RvcjNTNF9FMjFNeU5vZGVPdmVybGFwQ2FsbGJhY2sAWk4yMmJ0QnZoVHJpYW5nbGVNZXNoU2hhcGUxN3BlcmZvcm1Db252ZXhjYXN0RVAxOGJ0VHJpYW5nbGVDYWxsYmFja1JLOWJ0VmVjdG9yM1M0X1M0X1M0X0UyMU15Tm9kZU92ZXJsYXBDYWxsYmFjawBidENhcHN1bGVTaGFwZURhdGEAQ2Fwc3VsZVNoYXBlADE0YnRDYXBzdWxlU2hhcGUAQ2Fwc3VsZVgAMTVidENhcHN1bGVTaGFwZVgAQ2Fwc3VsZVoAMTVidENhcHN1bGVTaGFwZVoAYnRDb2xsaXNpb25TaGFwZURhdGEAMTZidENvbGxpc2lvblNoYXBlAGJ0Q29tcG91bmRTaGFwZUNoaWxkRGF0YQBidENvbXBvdW5kU2hhcGVEYXRhAENvbXBvdW5kADE1YnRDb21wb3VuZFNoYXBlAGJ0Q29uZVNoYXBlRGF0YQBDb25lADExYnRDb25lU2hhcGUAQ29uZVoAMTJidENvbmVTaGFwZVoAQ29uZVgAMTJidENvbmVTaGFwZVgAYnRDb252ZXhIdWxsU2hhcGVEYXRhAENvbnZleAAxN2J0Q29udmV4SHVsbFNoYXBlADIxYnRDb252ZXhJbnRlcm5hbFNoYXBlADEzYnRDb252ZXhTaGFwZQAyNkxvY2FsU3VwcG9ydFZlcnRleENhbGxiYWNrAENvbnZleFRyaW1lc2gAMjVidENvbnZleFRyaWFuZ2xlTWVzaFNoYXBlAGJ0Q3lsaW5kZXJTaGFwZURhdGEAQ3lsaW5kZXJZADE1YnRDeWxpbmRlclNoYXBlAEN5bGluZGVyWAAxNmJ0Q3lsaW5kZXJTaGFwZVgAQ3lsaW5kZXJaADE2YnRDeWxpbmRlclNoYXBlWgBIRUlHSFRGSUVMRAAyNWJ0SGVpZ2h0ZmllbGRUZXJyYWluU2hhcGUAMTRidE9wdGltaXplZEJ2aABaTjE0YnRPcHRpbWl6ZWRCdmg1YnVpbGRFUDIzYnRTdHJpZGluZ01lc2hJbnRlcmZhY2ViUks5YnRWZWN0b3IzUzRfRTIwTm9kZVRyaWFuZ2xlQ2FsbGJhY2sAWk4xNGJ0T3B0aW1pemVkQnZoNWJ1aWxkRVAyM2J0U3RyaWRpbmdNZXNoSW50ZXJmYWNlYlJLOWJ0VmVjdG9yM1M0X0UyOVF1YW50aXplZE5vZGVUcmlhbmdsZUNhbGxiYWNrADIzYnRQb2x5aGVkcmFsQ29udmV4U2hhcGUAMzRidFBvbHloZWRyYWxDb252ZXhBYWJiQ2FjaGluZ1NoYXBlAFNQSEVSRQAxM2J0U3BoZXJlU2hhcGUAYnRTdGF0aWNQbGFuZVNoYXBlRGF0YQBTVEFUSUNQTEFORQAxOGJ0U3RhdGljUGxhbmVTaGFwZQAxOGJ0VHJpYW5nbGVDYWxsYmFjawAzMWJ0SW50ZXJuYWxUcmlhbmdsZUluZGV4Q2FsbGJhY2sAMTRidFRyaWFuZ2xlTWVzaAAyMVN1cHBvcnRWZXJ0ZXhDYWxsYmFjawBaTksxOWJ0VHJpYW5nbGVNZXNoU2hhcGUxOXByb2Nlc3NBbGxUcmlhbmdsZXNFUDE4YnRUcmlhbmdsZUNhbGxiYWNrUks5YnRWZWN0b3IzUzRfRTE2RmlsdGVyZWRDYWxsYmFjawBUUklBTkdMRU1FU0gAMTlidFRyaWFuZ2xlTWVzaFNoYXBlADE2YnRQb2ludENvbGxlY3RvcgAyN2J0Q29udGludW91c0NvbnZleENvbGxpc2lvbgAxMmJ0Q29udmV4Q2FzdAAxNWJ0R2prQ29udmV4Q2FzdAAzMGJ0R2prRXBhUGVuZXRyYXRpb25EZXB0aFNvbHZlcgAzMGJ0Q29udmV4UGVuZXRyYXRpb25EZXB0aFNvbHZlcgAxN2J0R2prUGFpckRldGVjdG9yAFpOMzNidE1pbmtvd3NraVBlbmV0cmF0aW9uRGVwdGhTb2x2ZXIxMmNhbGNQZW5EZXB0aEVSMjJidFZvcm9ub2lTaW1wbGV4U29sdmVyUEsxM2J0Q29udmV4U2hhcGVTNF9SSzExYnRUcmFuc2Zvcm1TN19SOWJ0VmVjdG9yM1M5X1M5X1AxMmJ0SURlYnVnRHJhd0UyMGJ0SW50ZXJtZWRpYXRlUmVzdWx0ADMzYnRNaW5rb3dza2lQZW5ldHJhdGlvbkRlcHRoU29sdmVyADI1YnRUcmlhbmdsZVJheWNhc3RDYWxsYmFjawBUcmlhbmdsZQAxNWJ0VHJpYW5nbGVTaGFwZQAyOGJ0VHJpYW5nbGVDb252ZXhjYXN0Q2FsbGJhY2sAMjJidFN1YnNpbXBsZXhDb252ZXhDYXN0ADEyYnREaXNwYXRjaGVyAGJ0T3B0aW1pemVkQnZoTm9kZURhdGEAYnRRdWFudGl6ZWRCdmhOb2RlRGF0YQBidEJ2aFN1YnRyZWVJbmZvRGF0YQBidFF1YW50aXplZEJ2aEZsb2F0RGF0YQAxNGJ0UXVhbnRpemVkQnZoADMwYnRBY3RpdmF0aW5nQ29sbGlzaW9uQWxnb3JpdGhtADI2YnRCb3hCb3hDb2xsaXNpb25BbGdvcml0aG0AMTZidEJveEJveERldGVjdG9yADIyYnRDb21wb3VuZExlYWZDYWxsYmFjawAyOGJ0Q29tcG91bmRDb2xsaXNpb25BbGdvcml0aG0AMzBidENvbXBvdW5kQ29tcG91bmRMZWFmQ2FsbGJhY2sAMzZidENvbXBvdW5kQ29tcG91bmRDb2xsaXNpb25BbGdvcml0aG0AWk4zM2J0Q29udmV4Q29uY2F2ZUNvbGxpc2lvbkFsZ29yaXRobTIxY2FsY3VsYXRlVGltZU9mSW1wYWN0RVAxN2J0Q29sbGlzaW9uT2JqZWN0UzFfUksxNmJ0RGlzcGF0Y2hlckluZm9QMTZidE1hbmlmb2xkUmVzdWx0RTMxTG9jYWxUcmlhbmdsZVNwaGVyZUNhc3RDYWxsYmFjawAyNGJ0Q29udmV4VHJpYW5nbGVDYWxsYmFjawAzM2J0Q29udmV4Q29uY2F2ZUNvbGxpc2lvbkFsZ29yaXRobQAyNGJ0UGVydHVyYmVkQ29udGFjdFJlc3VsdABaTjIzYnRDb252ZXhDb252ZXhBbGdvcml0aG0xNnByb2Nlc3NDb2xsaXNpb25FUEsyNGJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlclMyX1JLMTZidERpc3BhdGNoZXJJbmZvUDE2YnRNYW5pZm9sZFJlc3VsdEUyMWJ0V2l0aG91dE1hcmdpblJlc3VsdABaTjIzYnRDb252ZXhDb252ZXhBbGdvcml0aG0xNnByb2Nlc3NDb2xsaXNpb25FUEsyNGJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlclMyX1JLMTZidERpc3BhdGNoZXJJbmZvUDE2YnRNYW5pZm9sZFJlc3VsdEUxM2J0RHVtbXlSZXN1bHQAMjNidENvbnZleENvbnZleEFsZ29yaXRobQBOMjNidENvbnZleENvbnZleEFsZ29yaXRobTEwQ3JlYXRlRnVuY0UAMzFidENvbnZleFBsYW5lQ29sbGlzaW9uQWxnb3JpdGhtADIzYnRIYXNoZWRTaW1wbGVQYWlyQ2FjaGUAMTRidENvbmNhdmVTaGFwZQAxOGJ0Q29udmV4UG9seWhlZHJvbgBidEludEluZGV4RGF0YQBidFNob3J0SW50SW5kZXhUcmlwbGV0RGF0YQBidENoYXJJbmRleFRyaXBsZXREYXRhAGJ0VmVjdG9yM0Zsb2F0RGF0YQBidFZlY3RvcjNEb3VibGVEYXRhAGJ0TWVzaFBhcnREYXRhAGJ0U3RyaWRpbmdNZXNoSW50ZXJmYWNlRGF0YQAyM2J0U3RyaWRpbmdNZXNoSW50ZXJmYWNlADI2YnRUcmlhbmdsZUluZGV4VmVydGV4QXJyYXkAUm9vdAAtKyAgIDBYMHgAKG51bGwpAC0wWCswWCAwWC0weCsweCAweABpbmYASU5GAG5hbgBOQU4ALgB0ZXJtaW5hdGluZyB3aXRoICVzIGV4Y2VwdGlvbiBvZiB0eXBlICVzOiAlcwB0ZXJtaW5hdGluZyB3aXRoICVzIGV4Y2VwdGlvbiBvZiB0eXBlICVzAHRlcm1pbmF0aW5nIHdpdGggJXMgZm9yZWlnbiBleGNlcHRpb24AdGVybWluYXRpbmcAdW5jYXVnaHQAU3Q5ZXhjZXB0aW9uAE4xMF9fY3h4YWJpdjExNl9fc2hpbV90eXBlX2luZm9FAFN0OXR5cGVfaW5mbwBOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAHB0aHJlYWRfb25jZSBmYWlsdXJlIGluIF9fY3hhX2dldF9nbG9iYWxzX2Zhc3QoKQBjYW5ub3QgY3JlYXRlIHB0aHJlYWQga2V5IGZvciBfX2N4YV9nZXRfZ2xvYmFscygpAGNhbm5vdCB6ZXJvIG91dCB0aHJlYWQgdmFsdWUgZm9yIF9fY3hhX2dldF9nbG9iYWxzKCkAdGVybWluYXRlX2hhbmRsZXIgdW5leHBlY3RlZGx5IHJldHVybmVkAE4xMF9fY3h4YWJpdjExOV9fcG9pbnRlcl90eXBlX2luZm9FAE4xMF9fY3h4YWJpdjExN19fcGJhc2VfdHlwZV9pbmZvRQBOMTBfX2N4eGFiaXYxMjFfX3ZtaV9jbGFzc190eXBlX2luZm9F";
var ab=za;za+=16;function bb(){return!!bb.C}var cb=0,db=[],eb={};function fb(){var a=cb;if(!a)return(gb(0),0)|0;var b=eb[a],e=b.type;if(!e)return(gb(0),a)|0;var f=Array.prototype.slice.call(arguments);c.___cxa_is_pointer_type(e);fb.buffer||(fb.buffer=hb(4));wa[fb.buffer>>2]=a;a=fb.buffer;for(var g=0;g<f.length;g++)if(f[g]&&c.___cxa_can_catch(f[g],e,a))return a=wa[a>>2],b.o=a,(gb(f[g]),a)|0;a=wa[a>>2];return(gb(e),a)|0}var ib=0;function jb(){ib+=4;return wa[ib-4>>2]}var kb={};
function lb(a,b){ib=b;try{var e=jb(),f=jb(),g=jb();a=0;lb.g||(lb.g=[null,[],[]],lb.m=function(a,b){var e=lb.g[a];assert(e);if(0===b||10===b){a=1===a?oa:pa;a:{for(var f=b=0;e[f];)++f;if(16<f-b&&e.subarray&&ua)b=ua.decode(e.subarray(b,f));else for(f="";;){var g=e[b++];if(!g){b=f;break a}if(g&128){var h=e[b++]&63;if(192==(g&224))f+=String.fromCharCode((g&31)<<6|h);else{var k=e[b++]&63;if(224==(g&240))g=(g&15)<<12|h<<6|k;else{var m=e[b++]&63;if(240==(g&248))g=(g&7)<<18|h<<12|k<<6|m;else{var r=e[b++]&
63;if(248==(g&252))g=(g&3)<<24|h<<18|k<<12|m<<6|r;else{var M=e[b++]&63;g=(g&1)<<30|h<<24|k<<18|m<<12|r<<6|M}}}65536>g?f+=String.fromCharCode(g):(g-=65536,f+=String.fromCharCode(55296|g>>10,56320|g&1023))}}else f+=String.fromCharCode(g)}}a(b);e.length=0}else e.push(b)});for(b=0;b<g;b++){for(var h=wa[f+8*b>>2],k=wa[f+(8*b+4)>>2],m=0;m<k;m++)lb.m(e,va[h+m]);a+=k}return a}catch(r){return"undefined"!==typeof FS&&r instanceof FS.i||ta(r),-r.j}}var mb={},nb=1;
function ob(a,b){ob.h||(ob.h={});a in ob.h||(c.dynCall_v(b),ob.h[a]=1)}var pb=za;za=za+4+15&-16;Ea=pb;Aa=Ba=ra(za);Ca=Aa+Ha;Da=ra(Ca);wa[Ea>>2]=Da;var qb=!1;function ma(a){for(var b=[],e=0;e<a.length;e++){var f=a[e];255<f&&(qb&&assert(!1,"Character code "+f+" ("+String.fromCharCode(f)+")  at offset "+e+" not in 0x00-0xFF."),f&=255);b.push(String.fromCharCode(f))}return b.join("")}
var rb="function"===typeof atob?atob:function(a){var b="",e=0;a=a.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(e++));var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(e++));var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(e++));var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(e++));f=f<<2|g>>4;
g=(g&15)<<4|h>>2;var m=(h&3)<<6|k;b+=String.fromCharCode(f);64!==h&&(b+=String.fromCharCode(g));64!==k&&(b+=String.fromCharCode(m))}while(e<a.length);return b};
function la(a){if(String.prototype.startsWith?a.startsWith(Xa):0===a.indexOf(Xa)){a=a.slice(Xa.length);if("boolean"===typeof ea&&ea){try{var b=Buffer.from(a,"base64")}catch(h){b=new Buffer(a,"base64")}var e=new Uint8Array(b.buffer,b.byteOffset,b.byteLength)}else try{var f=rb(a),g=new Uint8Array(f.length);for(b=0;b<f.length;++b)g[b]=f.charCodeAt(b);e=g}catch(h){throw Error("Converting base64 string to bytes failed.");}return e}}
c.s={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:Infinity};
c.u={abort:ta,assert:assert,enlargeMemory:function(){Fa()},getTotalMemory:function(){return Ga},abortOnCannotGrowMemory:Fa,invoke_di:function(a,b){var e=d();try{return c.dynCall_di(a,b)}catch(f){l(e);if("number"!==typeof f&&"longjmp"!==f)throw f;c.setThrew(1,0)}},invoke_did:function(a,b,e){var f=d();try{return c.dynCall_did(a,b,e)}catch(g){l(f);if("number"!==typeof g&&"longjmp"!==g)throw g;c.setThrew(1,0)}},invoke_diidii:function(a,b,e,f,g,h){var k=d();try{return c.dynCall_diidii(a,b,e,f,g,h)}catch(m){l(k);
if("number"!==typeof m&&"longjmp"!==m)throw m;c.setThrew(1,0)}},invoke_diii:function(a,b,e,f){var g=d();try{return c.dynCall_diii(a,b,e,f)}catch(h){l(g);if("number"!==typeof h&&"longjmp"!==h)throw h;c.setThrew(1,0)}},invoke_diiidii:function(a,b,e,f,g,h,k){var m=d();try{return c.dynCall_diiidii(a,b,e,f,g,h,k)}catch(r){l(m);if("number"!==typeof r&&"longjmp"!==r)throw r;c.setThrew(1,0)}},invoke_diiii:function(a,b,e,f,g){var h=d();try{return c.dynCall_diiii(a,b,e,f,g)}catch(k){l(h);if("number"!==typeof k&&
"longjmp"!==k)throw k;c.setThrew(1,0)}},invoke_diiiii:function(a,b,e,f,g,h){var k=d();try{return c.dynCall_diiiii(a,b,e,f,g,h)}catch(m){l(k);if("number"!==typeof m&&"longjmp"!==m)throw m;c.setThrew(1,0)}},invoke_diiiiiiii:function(a,b,e,f,g,h,k,m,r){var M=d();try{return c.dynCall_diiiiiiii(a,b,e,f,g,h,k,m,r)}catch(R){l(M);if("number"!==typeof R&&"longjmp"!==R)throw R;c.setThrew(1,0)}},invoke_diiiiiiiii:function(a,b,e,f,g,h,k,m,r,M){var R=d();try{return c.dynCall_diiiiiiiii(a,b,e,f,g,h,k,m,r,M)}catch(ha){l(R);
if("number"!==typeof ha&&"longjmp"!==ha)throw ha;c.setThrew(1,0)}},invoke_diiiiiiiiii:function(a,b,e,f,g,h,k,m,r,M,R){var ha=d();try{return c.dynCall_diiiiiiiiii(a,b,e,f,g,h,k,m,r,M,R)}catch(qa){l(ha);if("number"!==typeof qa&&"longjmp"!==qa)throw qa;c.setThrew(1,0)}},invoke_ii:function(a,b){var e=d();try{return c.dynCall_ii(a,b)}catch(f){l(e);if("number"!==typeof f&&"longjmp"!==f)throw f;c.setThrew(1,0)}},invoke_iidid:function(a,b,e,f,g){var h=d();try{return c.dynCall_iidid(a,b,e,f,g)}catch(k){l(h);
if("number"!==typeof k&&"longjmp"!==k)throw k;c.setThrew(1,0)}},invoke_iii:function(a,b,e){var f=d();try{return c.dynCall_iii(a,b,e)}catch(g){l(f);if("number"!==typeof g&&"longjmp"!==g)throw g;c.setThrew(1,0)}},invoke_iiid:function(a,b,e,f){var g=d();try{return c.dynCall_iiid(a,b,e,f)}catch(h){l(g);if("number"!==typeof h&&"longjmp"!==h)throw h;c.setThrew(1,0)}},invoke_iiii:function(a,b,e,f){var g=d();try{return c.dynCall_iiii(a,b,e,f)}catch(h){l(g);if("number"!==typeof h&&"longjmp"!==h)throw h;c.setThrew(1,
0)}},invoke_iiiii:function(a,b,e,f,g){var h=d();try{return c.dynCall_iiiii(a,b,e,f,g)}catch(k){l(h);if("number"!==typeof k&&"longjmp"!==k)throw k;c.setThrew(1,0)}},invoke_iiiiii:function(a,b,e,f,g,h){var k=d();try{return c.dynCall_iiiiii(a,b,e,f,g,h)}catch(m){l(k);if("number"!==typeof m&&"longjmp"!==m)throw m;c.setThrew(1,0)}},invoke_iiiiiii:function(a,b,e,f,g,h,k){var m=d();try{return c.dynCall_iiiiiii(a,b,e,f,g,h,k)}catch(r){l(m);if("number"!==typeof r&&"longjmp"!==r)throw r;c.setThrew(1,0)}},invoke_iiiiiiiii:function(a,
b,e,f,g,h,k,m,r){var M=d();try{return c.dynCall_iiiiiiiii(a,b,e,f,g,h,k,m,r)}catch(R){l(M);if("number"!==typeof R&&"longjmp"!==R)throw R;c.setThrew(1,0)}},invoke_iiiiiiiiiii:function(a,b,e,f,g,h,k,m,r,M,R){var ha=d();try{return c.dynCall_iiiiiiiiiii(a,b,e,f,g,h,k,m,r,M,R)}catch(qa){l(ha);if("number"!==typeof qa&&"longjmp"!==qa)throw qa;c.setThrew(1,0)}},invoke_v:function(a){var b=d();try{c.dynCall_v(a)}catch(e){l(b);if("number"!==typeof e&&"longjmp"!==e)throw e;c.setThrew(1,0)}},invoke_vi:function(a,
b){var e=d();try{c.dynCall_vi(a,b)}catch(f){l(e);if("number"!==typeof f&&"longjmp"!==f)throw f;c.setThrew(1,0)}},invoke_vid:function(a,b,e){var f=d();try{c.dynCall_vid(a,b,e)}catch(g){l(f);if("number"!==typeof g&&"longjmp"!==g)throw g;c.setThrew(1,0)}},invoke_viddiii:function(a,b,e,f,g,h,k){var m=d();try{c.dynCall_viddiii(a,b,e,f,g,h,k)}catch(r){l(m);if("number"!==typeof r&&"longjmp"!==r)throw r;c.setThrew(1,0)}},invoke_vidi:function(a,b,e,f){var g=d();try{c.dynCall_vidi(a,b,e,f)}catch(h){l(g);if("number"!==
typeof h&&"longjmp"!==h)throw h;c.setThrew(1,0)}},invoke_vidii:function(a,b,e,f,g){var h=d();try{c.dynCall_vidii(a,b,e,f,g)}catch(k){l(h);if("number"!==typeof k&&"longjmp"!==k)throw k;c.setThrew(1,0)}},invoke_vii:function(a,b,e){var f=d();try{c.dynCall_vii(a,b,e)}catch(g){l(f);if("number"!==typeof g&&"longjmp"!==g)throw g;c.setThrew(1,0)}},invoke_viid:function(a,b,e,f){var g=d();try{c.dynCall_viid(a,b,e,f)}catch(h){l(g);if("number"!==typeof h&&"longjmp"!==h)throw h;c.setThrew(1,0)}},invoke_viidi:function(a,
b,e,f,g){var h=d();try{c.dynCall_viidi(a,b,e,f,g)}catch(k){l(h);if("number"!==typeof k&&"longjmp"!==k)throw k;c.setThrew(1,0)}},invoke_viidii:function(a,b,e,f,g,h){var k=d();try{c.dynCall_viidii(a,b,e,f,g,h)}catch(m){l(k);if("number"!==typeof m&&"longjmp"!==m)throw m;c.setThrew(1,0)}},invoke_viii:function(a,b,e,f){var g=d();try{c.dynCall_viii(a,b,e,f)}catch(h){l(g);if("number"!==typeof h&&"longjmp"!==h)throw h;c.setThrew(1,0)}},invoke_viiid:function(a,b,e,f,g){var h=d();try{c.dynCall_viiid(a,b,e,
f,g)}catch(k){l(h);if("number"!==typeof k&&"longjmp"!==k)throw k;c.setThrew(1,0)}},invoke_viiidii:function(a,b,e,f,g,h,k){var m=d();try{c.dynCall_viiidii(a,b,e,f,g,h,k)}catch(r){l(m);if("number"!==typeof r&&"longjmp"!==r)throw r;c.setThrew(1,0)}},invoke_viiii:function(a,b,e,f,g){var h=d();try{c.dynCall_viiii(a,b,e,f,g)}catch(k){l(h);if("number"!==typeof k&&"longjmp"!==k)throw k;c.setThrew(1,0)}},invoke_viiiid:function(a,b,e,f,g,h){var k=d();try{c.dynCall_viiiid(a,b,e,f,g,h)}catch(m){l(k);if("number"!==
typeof m&&"longjmp"!==m)throw m;c.setThrew(1,0)}},invoke_viiiidddddidi:function(a,b,e,f,g,h,k,m,r,M,R,ha,qa){var Eb=d();try{c.dynCall_viiiidddddidi(a,b,e,f,g,h,k,m,r,M,R,ha,qa)}catch(dc){l(Eb);if("number"!==typeof dc&&"longjmp"!==dc)throw dc;c.setThrew(1,0)}},invoke_viiiiddddiid:function(a,b,e,f,g,h,k,m,r,M,R,ha){var qa=d();try{c.dynCall_viiiiddddiid(a,b,e,f,g,h,k,m,r,M,R,ha)}catch(Eb){l(qa);if("number"!==typeof Eb&&"longjmp"!==Eb)throw Eb;c.setThrew(1,0)}},invoke_viiiii:function(a,b,e,f,g,h){var k=
d();try{c.dynCall_viiiii(a,b,e,f,g,h)}catch(m){l(k);if("number"!==typeof m&&"longjmp"!==m)throw m;c.setThrew(1,0)}},invoke_viiiiii:function(a,b,e,f,g,h,k){var m=d();try{c.dynCall_viiiiii(a,b,e,f,g,h,k)}catch(r){l(m);if("number"!==typeof r&&"longjmp"!==r)throw r;c.setThrew(1,0)}},invoke_viiiiiii:function(a,b,e,f,g,h,k,m){var r=d();try{c.dynCall_viiiiiii(a,b,e,f,g,h,k,m)}catch(M){l(r);if("number"!==typeof M&&"longjmp"!==M)throw M;c.setThrew(1,0)}},invoke_viiiiiiiii:function(a,b,e,f,g,h,k,m,r,M){var R=
d();try{c.dynCall_viiiiiiiii(a,b,e,f,g,h,k,m,r,M)}catch(ha){l(R);if("number"!==typeof ha&&"longjmp"!==ha)throw ha;c.setThrew(1,0)}},invoke_viiiiiiiiii:function(a,b,e,f,g,h,k,m,r,M,R){var ha=d();try{c.dynCall_viiiiiiiiii(a,b,e,f,g,h,k,m,r,M,R)}catch(qa){l(ha);if("number"!==typeof qa&&"longjmp"!==qa)throw qa;c.setThrew(1,0)}},__ZSt18uncaught_exceptionv:bb,___cxa_begin_catch:function(a){var b=eb[a];b&&!b.v&&(b.v=!0,bb.C--);b&&(b.G=!1);db.push(a);a:{if(a&&!eb[a])for(e in eb)if(b=+e,eb[b].o===a){var e=
b;break a}e=a}e&&eb[e].F++;return a},___cxa_find_matching_catch:fb,___cxa_pure_virtual:function(){sa=!0;throw"Pure virtual function called!";},___gxx_personality_v0:function(){},___resumeException:function(a){cb||(cb=a);throw a+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch.";},___setErrNo:function(a){c.___errno_location&&(wa[c.___errno_location()>>2]=a);return a},___syscall140:function(a,b){ib=
b;try{var e=kb.A();jb();var f=jb(),g=jb(),h=jb();FS.D(e,f,h);wa[g>>2]=e.position;e.B&&0===f&&0===h&&(e.B=null);return 0}catch(k){return"undefined"!==typeof FS&&k instanceof FS.i||ta(k),-k.j}},___syscall146:lb,___syscall6:function(a,b){ib=b;try{var e=kb.A();FS.close(e);return 0}catch(f){return"undefined"!==typeof FS&&f instanceof FS.i||ta(f),-f.j}},_abort:function(){c.abort()},_emscripten_asm_const_diiiiiiii:function(a,b,e,f,g,h,k,m,r){return Ya[a](b,e,f,g,h,k,m,r)},_emscripten_asm_const_iii:function(a,
b,e){return Ya[a](b,e)},_emscripten_memcpy_big:function(a,b,e){va.set(va.subarray(b,b+e),a);return a},_gettimeofday:function(a){var b=Date.now();wa[a>>2]=b/1E3|0;wa[a+4>>2]=b%1E3*1E3|0;return 0},_llvm_cos_f32:Qa,_llvm_fabs_f32:Pa,_llvm_sin_f32:Ra,_llvm_sqrt_f32:Sa,_llvm_trap:function(){ta("trap!")},_pthread_getspecific:function(a){return mb[a]||0},_pthread_key_create:function(a){if(0==a)return 22;wa[a>>2]=nb;mb[nb]=0;nb++;return 0},_pthread_once:ob,_pthread_setspecific:function(a,b){if(!(a in mb))return 22;
mb[a]=b;return 0},flush_NO_FILESYSTEM:function(){var a=c._fflush;a&&a(0);if(a=lb.m){var b=lb.g;b[1].length&&a(1,10);b[2].length&&a(2,10)}},DYNAMICTOP_PTR:Ea,tempDoublePtr:ab,ABORT:sa,STACKTOP:Ba,STACK_MAX:Ca};// EMSCRIPTEN_START_ASM
var n=(/** @suppress {uselessCode} */ function(global,env,buffer) {
"use asm";var a=new global.Int8Array(buffer);var b=new global.Int16Array(buffer);var c=new global.Int32Array(buffer);var d=new global.Uint8Array(buffer);var e=new global.Uint16Array(buffer);var f=new global.Uint32Array(buffer);var g=new global.Float32Array(buffer);var h=new global.Float64Array(buffer);var i=env.DYNAMICTOP_PTR|0;var j=env.tempDoublePtr|0;var k=env.ABORT|0;var l=env.STACKTOP|0;var m=env.STACK_MAX|0;var n=0;var o=0;var p=0;var q=0;var r=global.NaN,s=global.Infinity;var t=0,u=0,v=0,w=0,x=0.0;var y=0;var z=global.Math.floor;var A=global.Math.abs;var B=global.Math.sqrt;var C=global.Math.pow;var D=global.Math.cos;var E=global.Math.sin;var F=global.Math.tan;var G=global.Math.acos;var H=global.Math.asin;var I=global.Math.atan;var J=global.Math.atan2;var K=global.Math.exp;var L=global.Math.log;var M=global.Math.ceil;var N=global.Math.imul;var O=global.Math.min;var P=global.Math.max;var Q=global.Math.clz32;var R=env.abort;var S=env.assert;var T=env.enlargeMemory;var U=env.getTotalMemory;var V=env.abortOnCannotGrowMemory;var W=env.invoke_di;var X=env.invoke_did;var Y=env.invoke_diidii;var Z=env.invoke_diii;var _=env.invoke_diiidii;var $=env.invoke_diiii;var aa=env.invoke_diiiii;var ba=env.invoke_diiiiiiii;var ca=env.invoke_diiiiiiiii;var da=env.invoke_diiiiiiiiii;var ea=env.invoke_ii;var fa=env.invoke_iidid;var ga=env.invoke_iii;var ha=env.invoke_iiid;var ia=env.invoke_iiii;var ja=env.invoke_iiiii;var ka=env.invoke_iiiiii;var la=env.invoke_iiiiiii;var ma=env.invoke_iiiiiiiii;var na=env.invoke_iiiiiiiiiii;var oa=env.invoke_v;var pa=env.invoke_vi;var qa=env.invoke_vid;var ra=env.invoke_viddiii;var sa=env.invoke_vidi;var ta=env.invoke_vidii;var ua=env.invoke_vii;var va=env.invoke_viid;var wa=env.invoke_viidi;var xa=env.invoke_viidii;var ya=env.invoke_viii;var za=env.invoke_viiid;var Aa=env.invoke_viiidii;var Ba=env.invoke_viiii;var Ca=env.invoke_viiiid;var Da=env.invoke_viiiidddddidi;var Ea=env.invoke_viiiiddddiid;var Fa=env.invoke_viiiii;var Ga=env.invoke_viiiiii;var Ha=env.invoke_viiiiiii;var Ia=env.invoke_viiiiiiiii;var Ja=env.invoke_viiiiiiiiii;var Ka=env.__ZSt18uncaught_exceptionv;var La=env.___cxa_begin_catch;var Ma=env.___cxa_find_matching_catch;var Na=env.___cxa_pure_virtual;var Oa=env.___gxx_personality_v0;var Pa=env.___resumeException;var Qa=env.___setErrNo;var Ra=env.___syscall140;var Sa=env.___syscall146;var Ta=env.___syscall6;var Ua=env._abort;var Va=env._emscripten_asm_const_diiiiiiii;var Wa=env._emscripten_asm_const_iii;var Xa=env._emscripten_memcpy_big;var Ya=env._gettimeofday;var Za=env._llvm_cos_f32;var _a=env._llvm_fabs_f32;var $a=env._llvm_sin_f32;var ab=env._llvm_sqrt_f32;var bb=env._llvm_trap;var cb=env._pthread_getspecific;var db=env._pthread_key_create;var eb=env._pthread_once;var fb=env._pthread_setspecific;var gb=env.flush_NO_FILESYSTEM;var hb=0.0;
// EMSCRIPTEN_START_FUNCS
function de(a,b,d,e,f,h,i,j){a=a|0;b=b|0;d=d|0;e=+e;f=+f;h=+h;i=i|0;j=j|0;var k=0,m=0,n=0,o=0,p=0,q=0.0,r=0.0,s=0.0,t=0.0,u=0,v=0.0,w=0.0,x=0,y=0,z=0.0,A=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0.0,S=0.0,T=0.0,U=0.0,V=0;V=l;l=l+32|0;A=+g[d>>2];D=+g[d+4>>2];C=+g[d+8>>2];w=+g[i>>2];t=+g[i+4>>2];r=+g[i+8>>2];q=+g[j>>2];s=+g[j+4>>2];v=+g[j+8>>2];L=1.0/+B(+((e-A)*(e-A)+(f-D)*(f-D)+(h-C)*(h-C)));M=(e-A)*L==0.0?999999984306749440.0:1.0/((e-A)*L);N=(f-D)*L==0.0?999999984306749440.0:1.0/((f-D)*L);O=(h-C)*L==0.0?999999984306749440.0:1.0/((h-C)*L);P=(A>e?e:A)+w;Q=(D>f?f:D)+t;R=(C>h?h:C)+r;S=(A<e?e:A)+q;T=(D<f?f:D)+s;U=(C<h?h:C)+v;m=c[a+56>>2]|0;a:do if((m|0)>0){o=c[a+96>>2]|0;k=0;y=0;x=m;while(1){k=k+1|0;c[V>>2]=c[o>>2];c[V+4>>2]=c[o+4>>2];c[V+8>>2]=c[o+8>>2];c[V+12>>2]=c[o+12>>2];u=o+16|0;c[V+16>>2]=c[u>>2];c[V+16+4>>2]=c[u+4>>2];c[V+16+8>>2]=c[u+8>>2];c[V+16+12>>2]=c[u+12>>2];g[V>>2]=+g[V>>2]-q;g[V+4>>2]=+g[V+4>>2]-s;g[V+8>>2]=+g[V+8>>2]-v;g[V+16>>2]=+g[V+16>>2]-w;g[V+20>>2]=+g[V+20>>2]-t;g[V+24>>2]=+g[V+24>>2]-r;if(!(P>+g[u>>2])?!(S<+g[o>>2]):0)m=1;else m=0;if(!(!(R>+g[o+24>>2])?!(U<+g[o+8>>2]):0))m=0;if(((!(Q>+g[o+20>>2])?!(T<+g[o+4>>2]|m^1):0)?(F=+g[d>>2],E=M*(+g[V+((M<0.0&1)<<4)>>2]-F),F=M*(+g[V+(((M<0.0^1)&1)<<4)>>2]-F),H=+g[d+4>>2],G=N*(+g[V+((N<0.0&1)<<4)+4>>2]-H),H=N*(+g[V+(((N<0.0^1)&1)<<4)+4>>2]-H),!(G>F|E>H)):0)?(I=G>E?G:E,z=H<F?H:F,K=+g[d+8>>2],J=O*(+g[V+((O<0.0&1)<<4)+8>>2]-K),K=O*(+g[V+(((O<0.0^1)&1)<<4)+8>>2]-K),!(J>z|I>K)):0){m=(K<z?K:z)>0.0?(J>I?J:I)<(h-C)*(h-C)*L+((e-A)*(e-A)*L+(f-D)*(f-D)*L):0;n=c[o+32>>2]|0;if(m&(n|0)==-1){Mb[c[(c[b>>2]|0)+8>>2]&127](b,c[o+36>>2]|0,c[o+40>>2]|0);m=c[a+56>>2]|0;u=17}else{p=(n|0)==-1;u=16}}else{n=c[o+32>>2]|0;p=(n|0)==-1;m=0;u=16}if((u|0)==16){u=0;if(p|m){m=x;u=17}else{o=o+(n<<6)|0;n=n+y|0;m=x}}if((u|0)==17){o=o+64|0;n=y+1|0}if((n|0)>=(m|0))break a;y=n;x=m;q=+g[j>>2];s=+g[j+4>>2];v=+g[j+8>>2];w=+g[i>>2];t=+g[i+4>>2];r=+g[i+8>>2]}}else k=0;while(0);if((c[6478]|0)>=(k|0)){l=V;return}c[6478]=k;l=V;return}function ee(a){a=a|0;var b=0,d=0,e=0,f=0,h=0,i=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0,q=0.0,r=0.0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0;d=l;l=l+144|0;g[a+36>>2]=0.0;c[d+128>>2]=0;c[d+128+4>>2]=0;c[d+128+8>>2]=0;c[d+128+12>>2]=0;b=0;do{e=d+128+(b<<2)|0;g[e>>2]=1.0;h=c[a+28>>2]|0;I=c[h+4>>2]|0;c[d+80>>2]=I;F=c[h+20>>2]|0;c[d+80+4>>2]=F;C=c[h+36>>2]|0;c[d+80+8>>2]=C;g[d+80+12>>2]=0.0;H=c[h+8>>2]|0;c[d+80+16>>2]=H;E=c[h+24>>2]|0;c[d+80+20>>2]=E;B=c[h+40>>2]|0;c[d+80+24>>2]=B;g[d+80+28>>2]=0.0;G=c[h+12>>2]|0;c[d+80+32>>2]=G;D=c[h+28>>2]|0;c[d+80+36>>2]=D;A=c[h+44>>2]|0;c[d+80+40>>2]=A;g[d+80+44>>2]=0.0;f=c[a+32>>2]|0;z=c[f+4>>2]|0;c[d+32>>2]=z;w=c[f+20>>2]|0;c[d+32+4>>2]=w;t=c[f+36>>2]|0;c[d+32+8>>2]=t;g[d+32+12>>2]=0.0;y=c[f+8>>2]|0;c[d+32+16>>2]=y;v=c[f+24>>2]|0;c[d+32+20>>2]=v;s=c[f+40>>2]|0;c[d+32+24>>2]=s;g[d+32+28>>2]=0.0;x=c[f+12>>2]|0;c[d+32+32>>2]=x;u=c[f+28>>2]|0;c[d+32+36>>2]=u;p=c[f+44>>2]|0;c[d+32+40>>2]=p;g[d+32+44>>2]=0.0;q=+g[a+300>>2];m=q*(c[j>>2]=I,+g[j>>2]);i=+g[a+304>>2];m=m+i*(c[j>>2]=H,+g[j>>2]);k=+g[a+308>>2];m=m+k*(c[j>>2]=G,+g[j>>2]);r=q*(c[j>>2]=F,+g[j>>2]);r=r+i*(c[j>>2]=E,+g[j>>2]);r=r+k*(c[j>>2]=D,+g[j>>2]);q=q*(c[j>>2]=C,+g[j>>2]);i=q+i*(c[j>>2]=B,+g[j>>2]);q=+g[h+52>>2];o=+g[h+56>>2];n=+g[h+60>>2];n=i+k*(c[j>>2]=A,+g[j>>2])+n-n;g[d+16>>2]=m+q-q;g[d+16+4>>2]=r+o-o;g[d+16+8>>2]=n;g[d+16+12>>2]=0.0;n=+g[a+316>>2];o=n*(c[j>>2]=z,+g[j>>2]);r=+g[a+320>>2];o=o+r*(c[j>>2]=y,+g[j>>2]);q=+g[a+324>>2];o=o+q*(c[j>>2]=x,+g[j>>2]);m=n*(c[j>>2]=w,+g[j>>2]);m=m+r*(c[j>>2]=v,+g[j>>2]);m=m+q*(c[j>>2]=u,+g[j>>2]);n=n*(c[j>>2]=t,+g[j>>2]);r=n+r*(c[j>>2]=s,+g[j>>2]);n=+g[f+52>>2];k=+g[f+56>>2];i=+g[f+60>>2];i=r+q*(c[j>>2]=p,+g[j>>2])+i-i;g[d>>2]=o+n-n;g[d+4>>2]=m+k-k;g[d+8>>2]=i;g[d+12>>2]=0.0;Wf(a+48+(b*84|0)|0,d+80|0,d+32|0,d+16|0,d,d+128|0,h+456|0,+g[h+404>>2],f+456|0,+g[f+404>>2]);g[e>>2]=0.0;b=b+1|0}while((b|0)!=3);l=d;return}function fe(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,h=0,i=0,j=0,k=0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0;if(!(c[a+204>>2]&2)){c[a+68>>2]=c[b>>2];c[a+68+4>>2]=c[b+4>>2];c[a+68+8>>2]=c[b+8>>2];c[a+68+12>>2]=c[b+12>>2];c[a+84>>2]=c[b+16>>2];c[a+84+4>>2]=c[b+16+4>>2];c[a+84+8>>2]=c[b+16+8>>2];c[a+84+12>>2]=c[b+16+12>>2];c[a+100>>2]=c[b+32>>2];c[a+100+4>>2]=c[b+32+4>>2];c[a+100+8>>2]=c[b+32+8>>2];c[a+100+12>>2]=c[b+32+12>>2];c[a+116>>2]=c[b+48>>2];c[a+116+4>>2]=c[b+48+4>>2];c[a+116+8>>2]=c[b+48+8>>2];c[a+116+12>>2]=c[b+48+12>>2];d=a+20|0;e=b+16|0;f=a+36|0;h=b+32|0;i=a+52|0;j=b+48|0;k=a+4|0}else{c[a+68>>2]=c[a+4>>2];c[a+68+4>>2]=c[a+4+4>>2];c[a+68+8>>2]=c[a+4+8>>2];c[a+68+12>>2]=c[a+4+12>>2];c[a+84>>2]=c[a+20>>2];c[a+84+4>>2]=c[a+20+4>>2];c[a+84+8>>2]=c[a+20+8>>2];c[a+84+12>>2]=c[a+20+12>>2];c[a+100>>2]=c[a+36>>2];c[a+100+4>>2]=c[a+36+4>>2];c[a+100+8>>2]=c[a+36+8>>2];c[a+100+12>>2]=c[a+36+12>>2];c[a+116>>2]=c[a+52>>2];c[a+116+4>>2]=c[a+52+4>>2];c[a+116+8>>2]=c[a+52+8>>2];c[a+116+12>>2]=c[a+52+12>>2];d=a+20|0;e=b+16|0;f=a+36|0;h=b+32|0;i=a+52|0;j=b+48|0;k=a+4|0}c[a+132>>2]=c[a+372>>2];c[a+132+4>>2]=c[a+372+4>>2];c[a+132+8>>2]=c[a+372+8>>2];c[a+132+12>>2]=c[a+372+12>>2];c[a+148>>2]=c[a+388>>2];c[a+148+4>>2]=c[a+388+4>>2];c[a+148+8>>2]=c[a+388+8>>2];c[a+148+12>>2]=c[a+388+12>>2];c[k>>2]=c[b>>2];c[k+4>>2]=c[b+4>>2];c[k+8>>2]=c[b+8>>2];c[k+12>>2]=c[b+12>>2];c[d>>2]=c[e>>2];c[d+4>>2]=c[e+4>>2];c[d+8>>2]=c[e+8>>2];c[d+12>>2]=c[e+12>>2];c[f>>2]=c[h>>2];c[f+4>>2]=c[h+4>>2];c[f+8>>2]=c[h+8>>2];c[f+12>>2]=c[h+12>>2];c[i>>2]=c[j>>2];c[i+4>>2]=c[j+4>>2];c[i+8>>2]=c[j+8>>2];c[i+12>>2]=c[j+12>>2];w=+g[a+4>>2];q=+g[a+456>>2];v=+g[a+8>>2];o=+g[a+460>>2];u=+g[a+12>>2];m=+g[a+464>>2];t=+g[a+20>>2];s=+g[a+24>>2];r=+g[a+28>>2];p=+g[a+36>>2];n=+g[a+40>>2];l=+g[a+44>>2];g[a+324>>2]=w*w*q+v*v*o+u*u*m;g[a+328>>2]=w*q*t+v*o*s+u*m*r;g[a+332>>2]=w*q*p+v*o*n+u*m*l;g[a+336>>2]=0.0;g[a+340>>2]=w*q*t+v*o*s+u*m*r;g[a+344>>2]=t*q*t+s*o*s+r*m*r;g[a+348>>2]=q*t*p+o*s*n+m*r*l;g[a+352>>2]=0.0;g[a+356>>2]=w*q*p+v*o*n+u*m*l;g[a+360>>2]=t*q*p+s*o*n+r*m*l;g[a+364>>2]=p*q*p+n*o*n+l*m*l;g[a+368>>2]=0.0;return}function ge(){if(a[24208]|0)return;if(!(lx(24208)|0))return;c[5196]=0;c[5197]=-2147483648;c[5198]=-1082130432;g[5199]=0.0;c[5200]=1060716128;c[5201]=-1090087446;c[5202]=-1092290076;g[5203]=0.0;c[5204]=-1098022214;c[5205]=-1084636126;c[5206]=-1092290076;g[5207]=0.0;c[5208]=-1083901670;c[5209]=-2147483648;c[5210]=-1092290177;g[5211]=0.0;c[5212]=-1098022214;c[5213]=1062847522;c[5214]=-1092290043;g[5215]=0.0;c[5216]=1060716128;c[5217]=1057396202;c[5218]=-1092290076;g[5219]=0.0;c[5220]=1049461434;c[5221]=-1084636126;c[5222]=1055193605;g[5223]=0.0;c[5224]=-1086767520;c[5225]=-1090087446;c[5226]=1055193572;g[5227]=0.0;c[5228]=-1086767520;c[5229]=1057396202;c[5230]=1055193572;g[5231]=0.0;c[5232]=1049461434;c[5233]=1062847522;c[5234]=1055193572;g[5235]=0.0;c[5236]=1063581978;c[5237]=0;c[5238]=1055193471;g[5239]=0.0;c[5240]=-2147483648;c[5241]=0;c[5242]=1065353216;g[5243]=0.0;c[5244]=1054458864;c[5245]=-1096927567;c[5246]=-1084636042;g[5247]=0.0;c[5248]=-1104782626;c[5249]=-1090519208;c[5250]=-1084636042;g[5251]=0.0;c[5252]=1049007812;c[5253]=-1085334679;c[5254]=-1090087228;g[5255]=0.0;c[5256]=1054458864;c[5257]=1050556081;c[5258]=-1084636042;g[5259]=0.0;c[5260]=1062847505;c[5261]=-2147483648;c[5262]=-1090087262;g[5263]=0.0;c[5264]=-1090087362;c[5265]=-2147483648;c[5266]=-1084636076;g[5267]=0.0;c[5268]=-1087361736;c[5269]=-1090519141;c[5270]=-1090087262;g[5271]=0.0;c[5272]=-1104782626;c[5273]=1056964440;c[5274]=-1084636042;g[5275]=0.0;c[5276]=-1087361736;c[5277]=1056964507;c[5278]=-1090087262;g[5279]=0.0;c[5280]=1049007812;c[5281]=1062148969;c[5282]=-1090087228;g[5283]=0.0;c[5284]=1064532105;c[5285]=1050556148;c[5286]=0;g[5287]=0.0;c[5288]=1064532105;c[5289]=-1096927500;c[5290]=0;g[5291]=0.0;c[5292]=1058437413;c[5293]=-1085334595;c[5294]=0;g[5295]=0.0;c[5296]=0;c[5297]=-1082130432;c[5298]=0;g[5299]=0.0;c[5300]=-1089046235;c[5301]=-1085334595;c[5302]=0;g[5303]=0.0;c[5304]=-1082951543;c[5305]=-1096927500;c[5306]=-2147483648;g[5307]=0.0;c[5308]=-1082951543;c[5309]=1050556148;c[5310]=-2147483648;g[5311]=0.0;c[5312]=-1089046235;c[5313]=1062149053;c[5314]=-2147483648;g[5315]=0.0;c[5316]=-2147483648;c[5317]=1065353216;c[5318]=-2147483648;g[5319]=0.0;c[5320]=1058437413;c[5321]=1062149053;c[5322]=-2147483648;g[5323]=0.0;c[5324]=1060121912;c[5325]=-1090519141;c[5326]=1057396386;g[5327]=0.0;c[5328]=-1098475836;c[5329]=-1085334679;c[5330]=1057396420;g[5331]=0.0;c[5332]=-1084636143;c[5333]=0;c[5334]=1057396386;g[5335]=0.0;c[5336]=-1098475836;c[5337]=1062148969;c[5338]=1057396420;g[5339]=0.0;c[5340]=1060121912;c[5341]=1056964507;c[5342]=1057396386;g[5343]=0.0;c[5344]=1057396286;c[5345]=0;c[5346]=1062847572;g[5347]=0.0;c[5348]=1042701022;c[5349]=-1090519208;c[5350]=1062847606;g[5351]=0.0;c[5352]=-1093024784;c[5353]=-1096927567;c[5354]=1062847606;g[5355]=0.0;c[5356]=-1093024784;c[5357]=1050556081;c[5358]=1062847606;g[5359]=0.0;c[5360]=1042701022;c[5361]=1056964440;c[5362]=1062847606;g[5363]=0.0;return}function he(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0,j=0.0,k=0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0;k=c[b+18504>>2]|0;if(!k){c[b>>2]=5;k=0;return k|0}i=c[k+48>>2]|0;if(i|0)c[i+44>>2]=c[k+44>>2];i=c[k+44>>2]|0;if(i|0)c[i+48>>2]=c[k+48>>2];if((c[b+18504>>2]|0)==(k|0))c[b+18504>>2]=c[k+48>>2];c[b+18508>>2]=(c[b+18508>>2]|0)+-1;c[k+44>>2]=0;c[k+48>>2]=c[b+18496>>2];i=c[b+18496>>2]|0;if(i|0)c[i+44>>2]=k;c[b+18496>>2]=k;c[b+18500>>2]=(c[b+18500>>2]|0)+1;a[k+55>>0]=0;c[k+20>>2]=d;c[k+24>>2]=e;c[k+28>>2]=f;j=+g[d+16>>2];n=+g[e+16>>2]-j;m=+g[d+20>>2];l=+g[e+20>>2]-m;o=+g[d+24>>2];p=+g[e+24>>2]-o;j=+g[f+16>>2]-j;m=+g[f+20>>2]-m;o=+g[f+24>>2]-o;g[k>>2]=l*o-p*m;g[k+4>>2]=p*j-n*o;g[k+8>>2]=n*m-l*j;g[k+12>>2]=0.0;j=+B(+((l*o-p*m)*(l*o-p*m)+(p*j-n*o)*(p*j-n*o)+(n*m-l*j)*(n*m-l*j)));if(!(j>9.999999747378752e-05)){c[b>>2]=2;i=c[k+48>>2]|0;if(i|0)c[i+44>>2]=c[k+44>>2];i=c[k+44>>2]|0;if(i|0)c[i+48>>2]=c[k+48>>2];if((c[b+18496>>2]|0)==(k|0))c[b+18496>>2]=c[k+48>>2];c[b+18500>>2]=(c[b+18500>>2]|0)+-1;c[k+44>>2]=0;c[k+48>>2]=c[b+18504>>2];i=c[b+18504>>2]|0;if(i|0)c[i+44>>2]=k;c[b+18504>>2]=k;c[b+18508>>2]=(c[b+18508>>2]|0)+1;k=0;return k|0}if((!(vj(+g[k>>2],+g[k+4>>2],+g[k+8>>2],+g[d+16>>2],+g[d+20>>2],+g[d+24>>2],+g[e+16>>2],+g[e+20>>2],+g[e+24>>2],k+16|0)|0)?!(vj(+g[k>>2],+g[k+4>>2],+g[k+8>>2],+g[e+16>>2],+g[e+20>>2],+g[e+24>>2],+g[f+16>>2],+g[f+20>>2],+g[f+24>>2],k+16|0)|0):0)?!(vj(+g[k>>2],+g[k+4>>2],+g[k+8>>2],+g[f+16>>2],+g[f+20>>2],+g[f+24>>2],+g[d+16>>2],+g[d+20>>2],+g[d+24>>2],k+16|0)|0):0)g[k+16>>2]=(+g[d+16>>2]*+g[k>>2]+ +g[d+20>>2]*+g[k+4>>2]+ +g[d+24>>2]*+g[k+8>>2])/j;g[k>>2]=1.0/j*+g[k>>2];g[k+4>>2]=1.0/j*+g[k+4>>2];g[k+8>>2]=1.0/j*+g[k+8>>2];if(h)return k|0;if(+g[k+16>>2]>=-9.999999747378752e-06)return k|0;c[b>>2]=3;i=c[k+48>>2]|0;if(i|0)c[i+44>>2]=c[k+44>>2];i=c[k+44>>2]|0;if(i|0)c[i+48>>2]=c[k+48>>2];if((c[b+18496>>2]|0)==(k|0))c[b+18496>>2]=c[k+48>>2];c[b+18500>>2]=(c[b+18500>>2]|0)+-1;c[k+44>>2]=0;c[k+48>>2]=c[b+18504>>2];i=c[b+18504>>2]|0;if(i|0)c[i+44>>2]=k;c[b+18504>>2]=k;c[b+18508>>2]=(c[b+18508>>2]|0)+1;k=0;return k|0}function ie(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0.0,i=0.0,j=0.0,k=0,m=0,n=0,o=0,p=0.0,q=0;o=l;l=l+144|0;i=+g[b>>2];j=+g[b+16>>2];p=i<j?i:j;h=+g[b+32>>2];if((p<h?p:h)>+g[a+20>>2]){l=o;return}m=i>j?b:b+16|0;if(+g[(+g[m>>2]>h?m:b+32|0)>>2]<+g[a+4>>2]){l=o;return}h=+g[b+8>>2];i=+g[b+24>>2];p=h<i?h:i;j=+g[b+40>>2];if((p<j?p:j)>+g[a+28>>2]){l=o;return}m=h>i?b+8|0:b+24|0;if(+g[(+g[m>>2]>j?m:b+40|0)>>2]<+g[a+12>>2]){l=o;return}h=+g[b+4>>2];i=+g[b+20>>2];p=h<i?h:i;j=+g[b+36>>2];if((p<j?p:j)>+g[a+24>>2]){l=o;return}m=h>i?b+4|0:b+20|0;if(+g[(+g[m>>2]>j?m:b+36|0)>>2]<+g[a+8>>2]){l=o;return}m=c[a+48>>2]|0;f=c[a+36>>2]|0;if((c[(c[f+4>>2]|0)+4>>2]|0)>=20){l=o;return}c[o+24+8>>2]=0;c[o+24+12>>2]=-1;c[o+24+16>>2]=1065353216;c[o+24+20>>2]=1065353216;c[o+24+24>>2]=1065353216;g[o+24+28>>2]=0.0;c[o+24+56>>2]=0;c[o+24>>2]=10340;c[o+24+4>>2]=1;c[o+24+60>>2]=c[b>>2];c[o+24+60+4>>2]=c[b+4>>2];c[o+24+60+8>>2]=c[b+8>>2];c[o+24+60+12>>2]=c[b+12>>2];c[o+24+76>>2]=c[b+16>>2];c[o+24+76+4>>2]=c[b+16+4>>2];c[o+24+76+8>>2]=c[b+16+8>>2];c[o+24+76+12>>2]=c[b+16+12>>2];c[o+24+92>>2]=c[b+32>>2];c[o+24+92+4>>2]=c[b+32+4>>2];c[o+24+92+8>>2]=c[b+32+8>>2];c[o+24+92+12>>2]=c[b+32+12>>2];c[o+24+48>>2]=c[a+56>>2];q=c[a+40>>2]|0;k=c[q+8>>2]|0;b=c[q+12>>2]|0;c[o>>2]=q;c[o+4>>2]=o+24;c[o+8>>2]=k;c[o+12>>2]=b;c[o+16>>2]=d;c[o+20>>2]=e;b=c[(c[m>>2]|0)+8>>2]|0;if(+g[(c[a+44>>2]|0)+32>>2]>0.0)k=yb[b&1](m,f,o,0,2)|0;else k=yb[b&1](m,f,o,c[a+64>>2]|0,1)|0;f=c[a+44>>2]|0;b=c[f+8>>2]|0;if((c[b+8>>2]|0)==(c[(c[a+40>>2]|0)+8>>2]|0)){c[f+8>>2]=o;Mb[c[(c[f>>2]|0)+8>>2]&127](f,d,e)}else{b=c[f+12>>2]|0;c[f+12>>2]=o;Mb[c[(c[f>>2]|0)+12>>2]&127](f,d,e)}Tb[c[(c[k>>2]|0)+8>>2]&31](k,c[a+36>>2]|0,o,c[a+52>>2]|0,c[a+44>>2]|0);q=c[a+44>>2]|0;c[((c[(c[q+8>>2]|0)+8>>2]|0)==(c[(c[a+40>>2]|0)+8>>2]|0)?q+8|0:q+12|0)>>2]=b;Db[c[c[k>>2]>>2]&255](k);Ib[c[(c[m>>2]|0)+60>>2]&127](m,k);c[o+24>>2]=9660;b=c[o+24+56>>2]|0;if(b|0?(Db[c[c[b>>2]>>2]&255](b),n=c[o+24+56>>2]|0,n|0):0){c[6486]=(c[6486]|0)+1;gd(c[n+-4>>2]|0)}l=o;return}function je(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;k=c[b+220>>2]|0;Mb[c[(c[k>>2]|0)+8>>2]&127](k,b,c[b+24>>2]|0);k=c[b+324>>2]|0;if((k|0)>0){j=c[b+332>>2]|0;i=0;do{e=c[j+(i<<2)>>2]|0;d=c[e+772>>2]|0;e=c[e+776>>2]|0;if((d|0?(e|0?(c[d+204>>2]&3|0)==0:0):0)?(c[e+204>>2]&3|0)==0:0){f=c[d+208>>2]|0;d=c[e+208>>2]|0;h=c[(c[b+220>>2]|0)+16>>2]|0;e=c[h+(f<<3)>>2]|0;if((e|0)!=(f|0)){c[h+(f<<3)>>2]=c[h+(e<<3)>>2];f=c[h+(e<<3)>>2]|0;e=c[h+(f<<3)>>2]|0;if((f|0)!=(e|0)){g=h+(f<<3)|0;do{f=h+(e<<3)|0;c[g>>2]=c[f>>2];f=c[f>>2]|0;g=h+(f<<3)|0;e=c[g>>2]|0}while((f|0)!=(e|0))}}e=c[h+(d<<3)>>2]|0;if((e|0)!=(d|0)){c[h+(d<<3)>>2]=c[h+(e<<3)>>2];d=c[h+(e<<3)>>2]|0;e=c[h+(d<<3)>>2]|0;if((d|0)!=(e|0)){g=h+(d<<3)|0;do{d=h+(e<<3)|0;c[g>>2]=c[d>>2];d=c[d>>2]|0;g=h+(d<<3)|0;e=c[g>>2]|0}while((d|0)!=(e|0))}}if((f|0)!=(d|0)){c[h+(f<<3)>>2]=d;g=h+(d<<3)+4|0;c[g>>2]=(c[g>>2]|0)+(c[h+(f<<3)+4>>2]|0)}}i=i+1|0}while((i|0)!=(k|0))}j=c[b+228>>2]|0;if((j|0)<=0){m=c[b+220>>2]|0;l=c[m>>2]|0;l=l+12|0;l=c[l>>2]|0;Ib[l&127](m,b);return}k=c[b+236>>2]|0;i=0;do{d=c[k+(i<<2)>>2]|0;if((a[d+20>>0]|0?(l=c[d+28>>2]|0,(c[l+204>>2]&3|0)==0):0)?(m=c[d+32>>2]|0,(c[m+204>>2]&3|0)==0):0){e=c[l+208>>2]|0;d=c[m+208>>2]|0;h=c[(c[b+220>>2]|0)+16>>2]|0;f=c[h+(e<<3)>>2]|0;if((f|0)!=(e|0)){c[h+(e<<3)>>2]=c[h+(f<<3)>>2];e=c[h+(f<<3)>>2]|0;f=c[h+(e<<3)>>2]|0;if((e|0)!=(f|0)){g=h+(e<<3)|0;do{e=h+(f<<3)|0;c[g>>2]=c[e>>2];e=c[e>>2]|0;g=h+(e<<3)|0;f=c[g>>2]|0}while((e|0)!=(f|0))}}f=c[h+(d<<3)>>2]|0;if((f|0)!=(d|0)){c[h+(d<<3)>>2]=c[h+(f<<3)>>2];d=c[h+(f<<3)>>2]|0;f=c[h+(d<<3)>>2]|0;if((d|0)!=(f|0)){g=h+(d<<3)|0;do{d=h+(f<<3)|0;c[g>>2]=c[d>>2];d=c[d>>2]|0;g=h+(d<<3)|0;f=c[g>>2]|0}while((d|0)!=(f|0))}}if((e|0)!=(d|0)){c[h+(e<<3)>>2]=d;g=h+(d<<3)+4|0;c[g>>2]=(c[g>>2]|0)+(c[h+(e<<3)+4>>2]|0)}}i=i+1|0}while((i|0)!=(j|0));m=c[b+220>>2]|0;l=c[m>>2]|0;l=l+12|0;l=c[l>>2]|0;Ib[l&127](m,b);return}function ke(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0;h=l;l=l+48|0;c[b+8>>2]=0;c[b+12>>2]=-1;g[b+16>>2]=0.0;c[b>>2]=10036;c[b+52>>2]=d;c[b+4>>2]=21;if(sb[c[(c[d>>2]|0)+40>>2]&127](d)|0)Mb[c[(c[d>>2]|0)+48>>2]&127](d,b+20|0,b+36|0);else{d=h+32+4|0;c[d>>2]=0;c[d+4>>2]=0;c[d+8>>2]=0;g[h+32>>2]=1.0;Mb[c[(c[b>>2]|0)+68>>2]&127](h+16|0,b,h+32|0);g[b+36>>2]=+g[h+16>>2]+ +g[b+16>>2];g[h+32>>2]=-1.0;Mb[c[(c[b>>2]|0)+68>>2]&127](h,b,h+32|0);c[h+16>>2]=c[h>>2];c[h+16+4>>2]=c[h+4>>2];c[h+16+8>>2]=c[h+8>>2];c[h+16+12>>2]=c[h+12>>2];g[b+20>>2]=+g[h+16>>2]-+g[b+16>>2];c[h+32>>2]=0;c[h+32+4>>2]=0;c[h+32+8>>2]=0;c[h+32+12>>2]=0;g[d>>2]=1.0;Mb[c[(c[b>>2]|0)+68>>2]&127](h+16|0,b,h+32|0);g[b+40>>2]=+g[h+16+4>>2]+ +g[b+16>>2];g[d>>2]=-1.0;Mb[c[(c[b>>2]|0)+68>>2]&127](h,b,h+32|0);c[h+16>>2]=c[h>>2];c[h+16+4>>2]=c[h+4>>2];c[h+16+8>>2]=c[h+8>>2];c[h+16+12>>2]=c[h+12>>2];g[b+24>>2]=+g[h+16+4>>2]-+g[b+16>>2];c[h+32>>2]=0;c[h+32+4>>2]=0;c[h+32+8>>2]=0;c[h+32+12>>2]=0;g[h+32+8>>2]=1.0;Mb[c[(c[b>>2]|0)+68>>2]&127](h+16|0,b,h+32|0);g[b+44>>2]=+g[h+16+8>>2]+ +g[b+16>>2];g[h+32+8>>2]=-1.0;Mb[c[(c[b>>2]|0)+68>>2]&127](h,b,h+32|0);c[h+16>>2]=c[h>>2];c[h+16+4>>2]=c[h+4>>2];c[h+16+8>>2]=c[h+8>>2];c[h+16+12>>2]=c[h+12>>2];g[b+28>>2]=+g[h+16+8>>2]-+g[b+16>>2]}c[b>>2]=7972;c[b+56>>2]=0;c[b+60>>2]=0;a[b+64>>0]=e&1;a[b+65>>0]=0;c[b+4>>2]=21;if(!f){l=h;return}c[6485]=(c[6485]|0)+1;d=ec(191)|0;if(!d)d=0;else{c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16}c[d+52>>2]=287;a[d+60>>0]=0;a[d+80>>0]=1;c[d+76>>2]=0;c[d+68>>2]=0;c[d+72>>2]=0;a[d+100>>0]=1;c[d+96>>2]=0;c[d+88>>2]=0;c[d+92>>2]=0;a[d+120>>0]=1;c[d+116>>2]=0;c[d+108>>2]=0;c[d+112>>2]=0;a[d+140>>0]=1;c[d+136>>2]=0;c[d+128>>2]=0;c[d+132>>2]=0;c[d+144>>2]=0;a[d+164>>0]=1;c[d+160>>2]=0;c[d+152>>2]=0;c[d+156>>2]=0;c[d+168>>2]=0;c[d+4>>2]=-8388609;c[d+8>>2]=-8388609;c[d+12>>2]=-8388609;g[d+16>>2]=0.0;c[d+20>>2]=2139095039;c[d+24>>2]=2139095039;c[d+28>>2]=2139095039;g[d+32>>2]=0.0;c[d>>2]=9580;c[b+56>>2]=d;Lc(d,c[b+52>>2]|0,(a[b+64>>0]|0)!=0,b+20|0,b+36|0);a[b+65>>0]=1;l=h;return}function le(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0,j=0,k=0,l=0,m=0;h=c[d+8>>2]|0;if((h|0)>0){i=c[d+16>>2]|0;f=0;e=0;do{j=c[i+(f<<2)>>2]|0;if(!(c[j+204>>2]&3)){c[j+208>>2]=e;e=e+1|0}c[j+212>>2]=-1;g[j+268>>2]=1.0;f=f+1|0}while((f|0)!=(h|0));j=e}else j=0;i=c[b+8>>2]|0;if((i|0)<(j|0)){if((c[b+12>>2]|0)<(j|0)){if(!j){e=0;h=i}else{c[6485]=(c[6485]|0)+1;e=ec((j<<3|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}h=c[b+8>>2]|0}if((h|0)>0){f=0;do{m=(c[b+16>>2]|0)+(f<<3)|0;k=c[m+4>>2]|0;l=e+(f<<3)|0;c[l>>2]=c[m>>2];c[l+4>>2]=k;f=f+1|0}while((f|0)!=(h|0))}f=c[b+16>>2]|0;if(f|0){if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[b+16>>2]=0}a[b+20>>0]=1;c[b+16>>2]=e;c[b+12>>2]=j;f=b+16|0}else f=b+16|0;e=i;do{m=(c[f>>2]|0)+(e<<3)|0;c[m>>2]=0;c[m+4>>2]=0;e=e+1|0}while((e|0)!=(j|0))}c[b+8>>2]=j;if((j|0)>0){f=c[b+16>>2]|0;e=0;do{c[f+(e<<3)>>2]=e;c[f+(e<<3)+4>>2]=1;e=e+1|0}while((e|0)!=(j|0))}e=c[d+68>>2]|0;e=sb[c[(c[e>>2]|0)+36>>2]&127](e)|0;l=sb[c[(c[e>>2]|0)+36>>2]&127](e)|0;if(!l)return;k=sb[c[(c[e>>2]|0)+20>>2]&127](e)|0;if((l|0)<=0)return;d=0;do{e=c[c[k+(d<<4)>>2]>>2]|0;f=c[c[k+(d<<4)+4>>2]>>2]|0;if((e|0?(f|0?(c[e+204>>2]&7|0)==0:0):0)?(c[f+204>>2]&7|0)==0:0){h=c[e+208>>2]|0;e=c[f+208>>2]|0;j=c[b+16>>2]|0;f=c[j+(h<<3)>>2]|0;if((f|0)!=(h|0)){c[j+(h<<3)>>2]=c[j+(f<<3)>>2];h=c[j+(f<<3)>>2]|0;f=c[j+(h<<3)>>2]|0;if((h|0)!=(f|0)){i=j+(h<<3)|0;do{h=j+(f<<3)|0;c[i>>2]=c[h>>2];h=c[h>>2]|0;i=j+(h<<3)|0;f=c[i>>2]|0}while((h|0)!=(f|0))}}f=c[j+(e<<3)>>2]|0;if((f|0)!=(e|0)){c[j+(e<<3)>>2]=c[j+(f<<3)>>2];e=c[j+(f<<3)>>2]|0;f=c[j+(e<<3)>>2]|0;if((e|0)!=(f|0)){i=j+(e<<3)|0;do{e=j+(f<<3)|0;c[i>>2]=c[e>>2];e=c[e>>2]|0;i=j+(e<<3)|0;f=c[i>>2]|0}while((e|0)!=(f|0))}}if((h|0)!=(e|0)){c[j+(h<<3)>>2]=e;m=j+(e<<3)+4|0;c[m>>2]=(c[m>>2]|0)+(c[j+(h<<3)+4>>2]|0)}}d=d+1|0}while((d|0)!=(l|0));return}function me(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;if(!b)if(!e){if(f|0){c[f>>2]=(a>>>0)%(d>>>0);c[f+4>>2]=0}e=0;f=(a>>>0)/(d>>>0)>>>0;return (y=e,f)|0}else{if(!f){e=0;f=0;return (y=e,f)|0}c[f>>2]=a|0;c[f+4>>2]=b&0;e=0;f=0;return (y=e,f)|0}do if(d){if(e|0){h=(Q(e|0)|0)-(Q(b|0)|0)|0;if(h>>>0<=31){n=h+1|0;i=a>>>((h+1|0)>>>0)&h-31>>31|b<<31-h;m=b>>>((h+1|0)>>>0)&h-31>>31;g=0;h=a<<31-h;break}if(!f){e=0;f=0;return (y=e,f)|0}c[f>>2]=a|0;c[f+4>>2]=b|b&0;e=0;f=0;return (y=e,f)|0}if(d-1&d|0){h=(Q(d|0)|0)+33-(Q(b|0)|0)|0;n=h;i=32-h-1>>31&b>>>((h-32|0)>>>0)|(b<<32-h|a>>>(h>>>0))&h-32>>31;m=h-32>>31&b>>>(h>>>0);g=a<<64-h&32-h>>31;h=(b<<64-h|a>>>((h-32|0)>>>0))&32-h>>31|a<<32-h&h-33>>31;break}if(f|0){c[f>>2]=d-1&a;c[f+4>>2]=0}if((d|0)==1){e=b|b&0;f=a|0|0;return (y=e,f)|0}else{f=SC(d|0)|0;e=b>>>(f>>>0)|0;f=b<<32-f|a>>>(f>>>0)|0;return (y=e,f)|0}}else{if(!e){if(f|0){c[f>>2]=(b>>>0)%(d>>>0);c[f+4>>2]=0}e=0;f=(b>>>0)/(d>>>0)>>>0;return (y=e,f)|0}if(!a){if(f|0){c[f>>2]=0;c[f+4>>2]=(b>>>0)%(e>>>0)}d=0;f=(b>>>0)/(e>>>0)>>>0;return (y=d,f)|0}if(!(e-1&e)){if(f|0){c[f>>2]=a|0;c[f+4>>2]=e-1&b|b&0}d=0;f=b>>>((SC(e|0)|0)>>>0);return (y=d,f)|0}h=(Q(e|0)|0)-(Q(b|0)|0)|0;if(h>>>0<=30){n=h+1|0;i=b<<31-h|a>>>((h+1|0)>>>0);m=b>>>((h+1|0)>>>0);g=0;h=a<<31-h;break}if(!f){e=0;f=0;return (y=e,f)|0}c[f>>2]=a|0;c[f+4>>2]=b|b&0;e=0;f=0;return (y=e,f)|0}while(0);if(!n){j=h;b=m;a=0;h=0}else{k=_t(d|0|0,e|e&0|0,-1,-1)|0;l=y;j=h;b=m;a=n;h=0;do{p=j;j=g>>>31|j<<1;g=h|g<<1;p=i<<1|p>>>31|0;o=i>>>31|b<<1|0;Nt(k|0,l|0,p|0,o|0)|0;n=y;m=n>>31|((n|0)<0?-1:0)<<1;h=m&1;i=Nt(p|0,o|0,m&(d|0)|0,(((n|0)<0?-1:0)>>31|((n|0)<0?-1:0)<<1)&(e|e&0)|0)|0;b=y;a=a-1|0}while((a|0)!=0);a=0}if(f|0){c[f>>2]=i;c[f+4>>2]=b}o=(g|0)>>>31|j<<1|(0<<1|g>>>31)&0|a;p=(g<<1|0>>>31)&-2|h;return (y=o,p)|0}function ne(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0,j=0,k=0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0;j=l;l=l+64|0;k=(a[b+76>>0]|0)!=0;i=k?e:d;d=k?d:e;e=c[d+4>>2]|0;if(((c[e+4>>2]|0)+-21|0)>>>0>=9){l=j;return}if((c[(c[i+4>>2]|0)+4>>2]|0)>=20){l=j;return}m=+ib[c[(c[e>>2]|0)+48>>2]&15](e);c[h+4>>2]=c[b+72>>2];c[b+44>>2]=i;c[b+48>>2]=d;c[b+60>>2]=f;g[b+64>>2]=m;c[b+52>>2]=h;k=c[d+12>>2]|0;B=+g[k>>2];A=+g[k+16>>2];z=+g[k+32>>2];y=+g[k+4>>2];x=+g[k+20>>2];w=+g[k+36>>2];s=+g[k+8>>2];q=+g[k+24>>2];o=+g[k+40>>2];v=-+g[k+48>>2];u=-+g[k+52>>2];t=-+g[k+56>>2];k=c[i+12>>2]|0;K=+g[k>>2];J=+g[k+16>>2];I=+g[k+32>>2];H=+g[k+4>>2];G=+g[k+20>>2];F=+g[k+36>>2];E=+g[k+8>>2];D=+g[k+24>>2];C=+g[k+40>>2];r=+g[k+48>>2];p=+g[k+52>>2];n=+g[k+56>>2];g[j>>2]=B*K+A*J+z*I;g[j+4>>2]=B*H+A*G+z*F;g[j+8>>2]=B*E+A*D+z*C;g[j+12>>2]=0.0;g[j+16>>2]=y*K+x*J+w*I;g[j+20>>2]=y*H+x*G+w*F;g[j+24>>2]=y*E+x*D+w*C;g[j+28>>2]=0.0;g[j+32>>2]=s*K+q*J+o*I;g[j+36>>2]=s*H+q*G+o*F;g[j+40>>2]=s*E+q*D+o*C;g[j+44>>2]=0.0;g[j+48>>2]=B*v+A*u+z*t+(B*r+A*p+z*n);g[j+52>>2]=y*v+x*u+w*t+(y*r+x*p+w*n);g[j+56>>2]=s*v+q*u+o*t+(s*r+q*p+o*n);g[j+60>>2]=0.0;k=c[i+4>>2]|0;Pb[c[(c[k>>2]|0)+8>>2]&127](k,j,b+12|0,b+28|0);m=+g[h+32>>2]+m;g[b+28>>2]=m+ +g[b+28>>2];g[b+32>>2]=m+ +g[b+32>>2];g[b+36>>2]=m+ +g[b+36>>2];g[b+12>>2]=+g[b+12>>2]-m;g[b+16>>2]=+g[b+16>>2]-m;g[b+20>>2]=+g[b+20>>2]-m;k=c[b+72>>2]|0;d=c[d+8>>2]|0;c[k+772>>2]=c[i+8>>2];c[k+776>>2]=d;Pb[c[(c[e>>2]|0)+64>>2]&127](e,b+8|0,b+12|0,b+28|0);d=c[h+4>>2]|0;do if(c[d+780>>2]|0){e=c[d+772>>2]|0;f=c[(c[h+8>>2]|0)+8>>2]|0;if((e|0)==(f|0)){te(d,e+4|0,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0);break}else{te(d,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0,f+4|0);break}}while(0);c[b+44>>2]=0;c[b+48>>2]=0;l=j;return}function oe(a,b,f){a=a|0;b=b|0;f=f|0;var i=0,j=0.0,k=0,m=0.0,n=0.0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0.0;u=l;l=l+32|0;c[a+60>>2]=(c[a+60>>2]|0)+1;o=c[a+4>>2]|0;Xb[c[(c[o>>2]|0)+16>>2]&3](o,u+28|0,u+24|0,u+20|0,u+16|0,u+12|0,u+8|0,u+4|0,u,b);o=(c[u+12>>2]|0)+(N(c[u+8>>2]|0,f)|0)|0;s=c[a+4>>2]|0;p=c[u>>2]|0;switch(p|0){case 3:{i=e[o+4>>1]|0;break}case 2:{i=c[o+8>>2]|0;break}default:i=d[o+2>>0]|0}t=(c[u+20>>2]|0)==0;q=c[u+28>>2]|0;r=c[u+16>>2]|0;i=q+(N(r,i)|0)|0;if(t){m=+g[i+4>>2]*+g[s+8>>2];n=+g[i>>2]*+g[s+4>>2];k=i+8|0;j=+g[s+12>>2]}else{m=+g[s+8>>2]*+h[i+8>>3];n=+g[s+4>>2]*+h[i>>3];k=s+12|0;j=+h[i+16>>3]}j=+g[k>>2]*j;g[a+44>>2]=n;g[a+48>>2]=m;g[a+52>>2]=j;g[a+56>>2]=0.0;switch(p|0){case 3:{i=e[o+2>>1]|0;break}case 2:{i=c[o+4>>2]|0;break}default:i=d[o+1>>0]|0}i=q+(N(r,i)|0)|0;if(t){k=i+8|0;m=+g[i+4>>2]*+g[s+8>>2];n=+g[i>>2]*+g[s+4>>2];j=+g[s+12>>2]}else{k=s+12|0;m=+g[s+8>>2]*+h[i+8>>3];n=+g[s+4>>2]*+h[i>>3];j=+h[i+16>>3]}j=+g[k>>2]*j;g[a+28>>2]=n;g[a+32>>2]=m;g[a+36>>2]=j;g[a+40>>2]=0.0;switch(p|0){case 3:{i=e[o>>1]|0;break}case 2:{i=c[o>>2]|0;break}default:i=d[o>>0]|0}i=q+(N(r,i)|0)|0;if(t){m=+g[i+4>>2]*+g[s+8>>2];j=+g[i>>2]*+g[s+4>>2];r=i+8|0;n=+g[s+12>>2];v=+g[r>>2];n=v*n;s=a+12|0;g[s>>2]=j;s=a+16|0;g[s>>2]=m;s=a+20|0;g[s>>2]=n;s=a+24|0;g[s>>2]=0.0;s=a+8|0;s=c[s>>2]|0;r=c[s>>2]|0;r=r+8|0;r=c[r>>2]|0;t=a+12|0;Pb[r&127](s,t,b,f);t=c[a+4>>2]|0;s=c[t>>2]|0;s=s+24|0;s=c[s>>2]|0;Ib[s&127](t,b);l=u;return}else{n=+g[s+8>>2]*+h[i+8>>3];m=+g[s+4>>2]*+h[i>>3];s=s+12|0;v=+h[i+16>>3];j=+g[s>>2];v=j*v;s=a+12|0;g[s>>2]=m;s=a+16|0;g[s>>2]=n;s=a+20|0;g[s>>2]=v;s=a+24|0;g[s>>2]=0.0;s=a+8|0;s=c[s>>2]|0;r=c[s>>2]|0;r=r+8|0;r=c[r>>2]|0;t=a+12|0;Pb[r&127](s,t,b,f);t=c[a+4>>2]|0;s=c[t>>2]|0;s=s+24|0;s=c[s>>2]|0;Ib[s&127](t,b);l=u;return}}function pe(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0;c[b+16>>2]=c[a+4>>2];c[b+20>>2]=c[a+8>>2];c[b+24>>2]=c[a+12>>2];c[b+28>>2]=c[a+16>>2];c[b+32>>2]=c[a+20>>2];c[b+36>>2]=c[a+24>>2];c[b+40>>2]=c[a+28>>2];c[b+44>>2]=c[a+32>>2];c[b+48>>2]=c[a+36>>2];c[b+52>>2]=c[a+40>>2];c[b+56>>2]=c[a+44>>2];c[b+60>>2]=c[a+48>>2];c[b+64>>2]=c[a+52>>2];c[b+68>>2]=c[a+56>>2];c[b+72>>2]=c[a+60>>2];c[b+76>>2]=c[a+64>>2];c[b+80>>2]=c[a+68>>2];c[b+84>>2]=c[a+72>>2];c[b+88>>2]=c[a+76>>2];c[b+92>>2]=c[a+80>>2];c[b+96>>2]=c[a+84>>2];c[b+100>>2]=c[a+88>>2];c[b+104>>2]=c[a+92>>2];c[b+108>>2]=c[a+96>>2];c[b+112>>2]=c[a+100>>2];c[b+116>>2]=c[a+104>>2];c[b+120>>2]=c[a+108>>2];c[b+124>>2]=c[a+112>>2];c[b+128>>2]=c[a+116>>2];c[b+132>>2]=c[a+120>>2];c[b+136>>2]=c[a+124>>2];c[b+140>>2]=c[a+128>>2];c[b+144>>2]=c[a+132>>2];c[b+148>>2]=c[a+136>>2];c[b+152>>2]=c[a+140>>2];c[b+156>>2]=c[a+144>>2];c[b+160>>2]=c[a+148>>2];c[b+164>>2]=c[a+152>>2];c[b+168>>2]=c[a+156>>2];c[b+172>>2]=c[a+160>>2];c[b+176>>2]=c[a+164>>2];c[b+180>>2]=c[a+168>>2];c[b+184>>2]=c[a+172>>2];c[b+188>>2]=c[a+176>>2];c[b+232>>2]=c[a+180>>2];c[b+192>>2]=c[a+184>>2];c[b>>2]=0;c[b+4>>2]=ub[c[(c[d>>2]|0)+28>>2]&31](d,c[a+192>>2]|0)|0;c[b+8>>2]=0;c[b+236>>2]=c[a+204>>2];c[b+240>>2]=c[a+208>>2];c[b+244>>2]=c[a+212>>2];c[b+248>>2]=c[a+220>>2];c[b+196>>2]=c[a+224>>2];c[b+200>>2]=c[a+228>>2];c[b+204>>2]=c[a+236>>2];c[b+208>>2]=c[a+244>>2];c[b+212>>2]=c[a+248>>2];c[b+216>>2]=c[a+232>>2];c[b+252>>2]=c[a+252>>2];e=ub[c[(c[d>>2]|0)+40>>2]&31](d,a)|0;f=ub[c[(c[d>>2]|0)+28>>2]&31](d,e)|0;c[b+12>>2]=f;if(!f){f=a+268|0;f=c[f>>2]|0;d=b+220|0;c[d>>2]=f;d=a+272|0;d=c[d>>2]|0;f=b+224|0;c[f>>2]=d;f=a+276|0;f=c[f>>2]|0;d=b+228|0;c[d>>2]=f;d=a+280|0;d=c[d>>2]|0;f=b+256|0;c[f>>2]=d;f=b+260|0;c[f>>2]=0;return 14061}Ib[c[(c[d>>2]|0)+48>>2]&127](d,e);f=a+268|0;f=c[f>>2]|0;d=b+220|0;c[d>>2]=f;d=a+272|0;d=c[d>>2]|0;f=b+224|0;c[f>>2]=d;f=a+276|0;f=c[f>>2]|0;d=b+228|0;c[d>>2]=f;d=a+280|0;d=c[d>>2]|0;f=b+256|0;c[f>>2]=d;f=b+260|0;c[f>>2]=0;return 14061}function qe(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0;e=c[b+548>>2]|0;a:do if((e|0)>0){g=c[b+556>>2]|0;f=0;while(1){if((c[g+(f<<2)>>2]|0)==(d|0))break;f=f+1|0;if((f|0)>=(e|0))break a}if((f|0)!=(e|0))return}while(0);if((e|0)==(c[b+552>>2]|0)?(h=(e|0)==0?1:e<<1,(e|0)<(h|0)):0){if(!h)g=0;else{c[6485]=(c[6485]|0)+1;e=ec((h<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}g=e;e=c[b+548>>2]|0}if((e|0)>0){f=0;do{c[g+(f<<2)>>2]=c[(c[b+556>>2]|0)+(f<<2)>>2];f=f+1|0}while((f|0)!=(e|0))}f=c[b+556>>2]|0;if(f){if(a[b+560>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0);e=c[b+548>>2]|0}c[b+556>>2]=0}a[b+560>>0]=1;c[b+556>>2]=g;c[b+552>>2]=h}c[(c[b+556>>2]|0)+(e<<2)>>2]=d;c[b+548>>2]=e+1;i=c[d+28>>2]|0;d=c[d+32>>2]|0;if((i|0)==(b|0)){f=c[b+288>>2]|0;if((f|0)==(c[b+292>>2]|0)?(k=(f|0)==0?1:f<<1,(f|0)<(k|0)):0){if(!k)e=0;else{c[6485]=(c[6485]|0)+1;e=ec((k<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}f=c[b+288>>2]|0}if((f|0)>0){g=0;do{c[e+(g<<2)>>2]=c[(c[b+296>>2]|0)+(g<<2)>>2];g=g+1|0}while((g|0)!=(f|0))}g=c[b+296>>2]|0;if(g){if(a[b+300>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0);f=c[b+288>>2]|0}c[b+296>>2]=0}a[b+300>>0]=1;c[b+296>>2]=e;c[b+292>>2]=k;h=b+288|0;g=d;e=b}else{h=b+288|0;g=d;e=b}}else{f=c[d+288>>2]|0;if((f|0)==(c[d+292>>2]|0)?(j=(f|0)==0?1:f<<1,(f|0)<(j|0)):0){if(!j)e=0;else{c[6485]=(c[6485]|0)+1;e=ec((j<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}f=c[d+288>>2]|0}if((f|0)>0){g=0;do{c[e+(g<<2)>>2]=c[(c[d+296>>2]|0)+(g<<2)>>2];g=g+1|0}while((g|0)!=(f|0))}g=c[d+296>>2]|0;if(g){if(a[d+300>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0);f=c[d+288>>2]|0}c[d+296>>2]=0}a[d+300>>0]=1;c[d+296>>2]=e;c[d+292>>2]=j;h=d+288|0;g=i;e=d}else{h=d+288|0;g=i;e=d}}c[(c[e+296>>2]|0)+(f<<2)>>2]=g;c[h>>2]=f+1;c[e+280>>2]=f>>>31^1;return}function re(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0,w=0.0,x=0.0,y=0.0,z=0.0;v=a[h+16>>0]&-16;a[h+16>>0]=v;w=+g[e>>2];x=+g[d>>2];n=+g[e+4>>2];o=+g[d+4>>2];p=+g[e+8>>2];q=+g[d+8>>2];r=+g[f>>2];s=+g[f+4>>2];t=+g[f+8>>2];l=+g[b>>2];m=+g[b+4>>2];i=+g[b+8>>2];y=(w-x)*(l-x)+(n-o)*(m-o)+(p-q)*(i-q);z=(r-x)*(l-x)+(s-o)*(m-o)+(t-q)*(i-q);do if(y<=0.0&z<=0.0){c[h>>2]=c[d>>2];c[h+4>>2]=c[d+4>>2];c[h+8>>2]=c[d+8>>2];c[h+12>>2]=c[d+12>>2];a[h+16>>0]=v|1;j=0.0;k=0.0;i=1.0}else{u=(w-x)*(l-w)+(n-o)*(m-n)+(p-q)*(i-p);k=(r-x)*(l-w)+(s-o)*(m-n)+(t-q)*(i-p);if(!(!(u>=0.0)|!(k<=u))){c[h>>2]=c[e>>2];c[h+4>>2]=c[e+4>>2];c[h+8>>2]=c[e+8>>2];c[h+12>>2]=c[e+12>>2];a[h+16>>0]=v|2;j=0.0;k=1.0;i=0.0;break}if(u<=0.0&(y>=0.0?y*k-u*z<=0.0:0)){g[h>>2]=x+(w-x)*(y/(y-u));g[h+4>>2]=o+(n-o)*(y/(y-u));g[h+8>>2]=q+(p-q)*(y/(y-u));g[h+12>>2]=0.0;a[h+16>>0]=v|3;j=0.0;k=y/(y-u);i=1.0-y/(y-u);break}j=(w-x)*(l-r)+(n-o)*(m-s)+(p-q)*(i-t);i=(r-x)*(l-r)+(s-o)*(m-s)+(t-q)*(i-t);if(!(!(i>=0.0)|!(j<=i))){c[h>>2]=c[f>>2];c[h+4>>2]=c[f+4>>2];c[h+8>>2]=c[f+8>>2];c[h+12>>2]=c[f+12>>2];a[h+16>>0]=v|4;j=1.0;k=0.0;i=0.0;break}if(i<=0.0&(z>=0.0?j*z-y*i<=0.0:0)){g[h>>2]=x+(r-x)*(z/(z-i));g[h+4>>2]=o+(s-o)*(z/(z-i));g[h+8>>2]=q+(t-q)*(z/(z-i));g[h+12>>2]=0.0;a[h+16>>0]=v|5;j=z/(z-i);k=0.0;i=1.0-z/(z-i);break}if((u*i-j*k<=0.0?k-u>=0.0:0)?j-i>=0.0:0){k=(k-u)/(k-u+(j-i));g[h>>2]=w+(r-w)*k;g[h+4>>2]=n+(s-n)*k;g[h+8>>2]=p+(t-p)*k;g[h+12>>2]=0.0;a[h+16>>0]=v|6;j=k;k=1.0-k;i=0.0;break}l=1.0/(y*k-u*z+(u*i-j*k+(j*z-y*i)));m=(j*z-y*i)*l;i=(y*k-u*z)*l;g[h>>2]=(r-x)*i+(x+(w-x)*m);g[h+4>>2]=(s-o)*i+(o+(n-o)*m);g[h+8>>2]=(t-q)*i+(q+(p-q)*m);g[h+12>>2]=0.0;a[h+16>>0]=v|7;j=i;k=m;i=1.0-m-i}while(0);g[h+20>>2]=i;g[h+24>>2]=k;g[h+28>>2]=j;g[h+32>>2]=0.0;return}function se(b,d,e,f,h){b=b|0;d=+d;e=e|0;f=f|0;h=h|0;var i=0;i=l;l=l+144|0;c[b>>2]=6888;c[b+132>>2]=0;c[b+132+4>>2]=0;c[b+132+8>>2]=0;c[b+132+12>>2]=0;c[b+132+16>>2]=0;c[b+132+20>>2]=0;c[b+132+24>>2]=0;c[b+132+28>>2]=0;c[b+164>>2]=1065353216;c[b+168>>2]=1065353216;c[b+172>>2]=1065353216;g[b+176>>2]=0.0;c[b+180>>2]=0;g[b+184>>2]=999999984306749440.0;c[b+188>>2]=0;c[b+188+4>>2]=0;c[b+188+8>>2]=0;c[b+188+12>>2]=0;c[b+204>>2]=1;c[b+208>>2]=-1;c[b+212>>2]=-1;c[b+216>>2]=-1;c[b+220>>2]=1;g[b+224>>2]=0.0;g[b+228>>2]=.5;g[b+232>>2]=0.0;g[b+236>>2]=0.0;g[b+240>>2]=0.0;g[b+244>>2]=.10000000149011612;g[b+248>>2]=1.0e4;c[b+252>>2]=1;c[b+256>>2]=0;c[b+260>>2]=-1;c[b+264>>2]=-1;g[b+268>>2]=1.0;g[b+272>>2]=0.0;g[b+276>>2]=0.0;c[b+280>>2]=0;a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;c[b+292>>2]=0;c[b+304>>2]=0;c[b+4>>2]=1065353216;c[b+8>>2]=0;c[b+8+4>>2]=0;c[b+8+8>>2]=0;c[b+8+12>>2]=0;c[b+24>>2]=1065353216;c[b+28>>2]=0;c[b+28+4>>2]=0;c[b+28+8>>2]=0;c[b+28+12>>2]=0;c[b+44>>2]=1065353216;c[b+48>>2]=0;c[b+48+4>>2]=0;c[b+48+8>>2]=0;c[b+48+12>>2]=0;c[b+48+16>>2]=0;c[b+68>>2]=1065353216;c[b+72>>2]=0;c[b+72+4>>2]=0;c[b+72+8>>2]=0;c[b+72+12>>2]=0;c[b+88>>2]=1065353216;c[b+92>>2]=0;c[b+92+4>>2]=0;c[b+92+8>>2]=0;c[b+92+12>>2]=0;c[b+108>>2]=1065353216;c[b+112>>2]=0;c[b+112+4>>2]=0;c[b+112+8>>2]=0;c[b+112+12>>2]=0;c[b+112+16>>2]=0;c[b>>2]=6212;a[b+560>>0]=1;c[b+556>>2]=0;c[b+548>>2]=0;c[b+552>>2]=0;g[i>>2]=d;c[i+4>>2]=e;c[i+72>>2]=f;c[i+76>>2]=c[h>>2];c[i+76+4>>2]=c[h+4>>2];c[i+76+8>>2]=c[h+8>>2];c[i+76+12>>2]=c[h+12>>2];g[i+92>>2]=0.0;g[i+96>>2]=0.0;g[i+100>>2]=.5;g[i+104>>2]=0.0;g[i+108>>2]=0.0;g[i+112>>2]=0.0;g[i+116>>2]=.800000011920929;g[i+120>>2]=1.0;a[i+124>>0]=0;g[i+128>>2]=.004999999888241291;g[i+132>>2]=.009999999776482582;g[i+136>>2]=.009999999776482582;g[i+140>>2]=.009999999776482582;c[i+8>>2]=1065353216;c[i+12>>2]=0;c[i+12+4>>2]=0;c[i+12+8>>2]=0;c[i+12+12>>2]=0;c[i+28>>2]=1065353216;c[i+32>>2]=0;c[i+32+4>>2]=0;c[i+32+8>>2]=0;c[i+32+12>>2]=0;c[i+48>>2]=1065353216;c[i+52>>2]=0;c[i+52+4>>2]=0;c[i+52+8>>2]=0;c[i+52+12>>2]=0;c[i+52+16>>2]=0;kd(b,i);l=i;return}function te(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,h=0.0,i=0.0,j=0,k=0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0;f=c[a+780>>2]|0;if((f|0)<=0)return;e=f;do{j=e;e=e+-1|0;p=+g[a+4+(e*192|0)>>2];q=+g[a+4+(e*192|0)+4>>2];h=+g[a+4+(e*192|0)+8>>2];o=p*+g[b>>2]+q*+g[b+4>>2]+h*+g[b+8>>2]+ +g[b+48>>2];m=p*+g[b+16>>2]+q*+g[b+20>>2]+h*+g[b+24>>2]+ +g[b+52>>2];h=p*+g[b+32>>2]+q*+g[b+36>>2]+h*+g[b+40>>2]+ +g[b+56>>2];g[a+4+(e*192|0)+48>>2]=o;g[a+4+(e*192|0)+52>>2]=m;g[a+4+(e*192|0)+56>>2]=h;g[a+4+(e*192|0)+60>>2]=0.0;q=+g[a+4+(e*192|0)+16>>2];p=+g[a+4+(e*192|0)+20>>2];i=+g[a+4+(e*192|0)+24>>2];n=q*+g[d>>2]+p*+g[d+4>>2]+i*+g[d+8>>2]+ +g[d+48>>2];l=q*+g[d+16>>2]+p*+g[d+20>>2]+i*+g[d+24>>2]+ +g[d+52>>2];i=q*+g[d+32>>2]+p*+g[d+36>>2]+i*+g[d+40>>2]+ +g[d+56>>2];g[a+4+(e*192|0)+32>>2]=n;g[a+4+(e*192|0)+36>>2]=l;g[a+4+(e*192|0)+40>>2]=i;g[a+4+(e*192|0)+44>>2]=0.0;g[a+4+(e*192|0)+80>>2]=(o-n)*+g[a+4+(e*192|0)+64>>2]+(m-l)*+g[a+4+(e*192|0)+68>>2]+(h-i)*+g[a+4+(e*192|0)+72>>2];k=a+4+(e*192|0)+156|0;c[k>>2]=(c[k>>2]|0)+1}while((j|0)>1);do{d=f;f=f+-1|0;b=a+4+(f*192|0)|0;h=+g[a+4+(f*192|0)+80>>2];i=+g[a+784>>2];if(h<=i){o=+g[a+4+(f*192|0)+32>>2]-(+g[a+4+(f*192|0)+48>>2]-+g[a+4+(f*192|0)+64>>2]*h);p=+g[a+4+(f*192|0)+36>>2]-(+g[a+4+(f*192|0)+52>>2]-h*+g[a+4+(f*192|0)+68>>2]);q=+g[a+4+(f*192|0)+40>>2]-(+g[a+4+(f*192|0)+56>>2]-h*+g[a+4+(f*192|0)+72>>2]);if(o*o+p*p+q*q>i*i){e=(c[a+780>>2]|0)+-1|0;if((e|0)!=(f|0)){$g(b|0,a+4+(e*192|0)|0,192)|0;c[a+4+(e*192|0)+156>>2]=0;c[a+4+(e*192|0)+116>>2]=0;c[a+4+(e*192|0)+116+4>>2]=0;c[a+4+(e*192|0)+116+8>>2]=0;c[a+4+(e*192|0)+116+12>>2]=0;c[a+4+(e*192|0)+116+16>>2]=0;e=(c[a+780>>2]|0)+-1|0}c[a+780>>2]=e}}else{e=(c[a+780>>2]|0)+-1|0;if((e|0)!=(f|0)){$g(b|0,a+4+(e*192|0)|0,192)|0;c[a+4+(e*192|0)+156>>2]=0;c[a+4+(e*192|0)+116>>2]=0;c[a+4+(e*192|0)+116+4>>2]=0;c[a+4+(e*192|0)+116+8>>2]=0;c[a+4+(e*192|0)+116+12>>2]=0;c[a+4+(e*192|0)+116+16>>2]=0;e=(c[a+780>>2]|0)+-1|0}c[a+780>>2]=e}}while((d|0)>1);return}function ue(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0,h=0,i=0,j=0.0,k=0.0,l=0,m=0,n=0.0;if(!(c[a>>2]|0)){c[a>>2]=d;c[d+32>>2]=0;return}f=c[b+40>>2]|0;if(!f)l=b;else{e=+g[d>>2]+ +g[d+16>>2];j=+g[d+4>>2]+ +g[d+20>>2];k=+g[d+8>>2]+ +g[d+24>>2];do{m=c[b+36>>2]|0;n=+A(+(e-(+g[m>>2]+ +g[m+16>>2])))+ +A(+(j-(+g[m+4>>2]+ +g[m+20>>2])))+ +A(+(k-(+g[m+8>>2]+ +g[m+24>>2])));b=c[b+36+((!(n<+A(+(e-(+g[f>>2]+ +g[f+16>>2])))+ +A(+(j-(+g[f+4>>2]+ +g[f+20>>2])))+ +A(+(k-(+g[f+8>>2]+ +g[f+24>>2]))))&1)<<2)>>2]|0;f=c[b+40>>2]|0}while((f|0)!=0);l=b}m=l+32|0;h=c[m>>2]|0;b=c[a+4>>2]|0;if(!b){c[6485]=(c[6485]|0)+1;b=ec(63)|0;if(!b)b=0;else{c[(b+4+15&-16)+-4>>2]=b;b=b+4+15&-16}f=b;i=f+44|0;do{c[f>>2]=0;f=f+4|0}while((f|0)<(i|0))}else c[a+4>>2]=0;c[b+32>>2]=h;c[b+36>>2]=0;f=b+40|0;c[f>>2]=0;n=+g[d>>2];k=+g[l>>2];g[b>>2]=n<k?n:k;k=+g[d+16>>2];n=+g[l+16>>2];g[b+16>>2]=k>n?k:n;n=+g[d+4>>2];k=+g[l+4>>2];g[b+4>>2]=n<k?n:k;k=+g[d+20>>2];n=+g[l+20>>2];g[b+20>>2]=k>n?k:n;n=+g[d+8>>2];k=+g[l+8>>2];g[b+8>>2]=n<k?n:k;k=+g[d+24>>2];n=+g[l+24>>2];g[b+24>>2]=k>n?k:n;if(!h){c[b+36>>2]=l;c[m>>2]=b;c[f>>2]=d;c[d+32>>2]=b;c[a>>2]=b;return}c[h+36+(((c[(c[m>>2]|0)+40>>2]|0)==(l|0)&1)<<2)>>2]=b;c[b+36>>2]=l;c[m>>2]=b;c[f>>2]=d;c[d+32>>2]=b;f=b;e=+g[b>>2];while(1){b=h+4|0;if(((((+g[h>>2]<=e?+g[b>>2]<=+g[f+4>>2]:0)?+g[h+8>>2]<=+g[f+8>>2]:0)?+g[h+16>>2]>=+g[f+16>>2]:0)?+g[h+20>>2]>=+g[f+20>>2]:0)?+g[h+24>>2]>=+g[f+24>>2]:0){b=21;break}a=c[h+36>>2]|0;d=c[h+40>>2]|0;k=+g[a>>2];e=+g[d>>2];e=k<e?k:e;g[h>>2]=e;k=+g[a+16>>2];n=+g[d+16>>2];g[h+16>>2]=k>n?k:n;n=+g[a+4>>2];k=+g[d+4>>2];g[b>>2]=n<k?n:k;k=+g[a+20>>2];n=+g[d+20>>2];g[h+20>>2]=k>n?k:n;n=+g[a+8>>2];k=+g[d+8>>2];g[h+8>>2]=n<k?n:k;k=+g[a+24>>2];n=+g[d+24>>2];g[h+24>>2]=k>n?k:n;b=c[h+32>>2]|0;if(!b){b=21;break}else{f=h;h=b}}if((b|0)==21)return}function ve(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,i=0,j=0,k=0;a:do if(!(SA(b,c[d+8>>2]|0)|0)){if(!(SA(b,c[d>>2]|0)|0)){i=c[b+12>>2]|0;nm(b+16|0,d,e,f,g);if((i|0)<=1)break;h=c[b+8>>2]|0;if((h&2|0)==0?(c[d+36>>2]|0)!=1:0){if(!(h&1)){h=b+24|0;while(1){if(a[d+54>>0]|0)break a;if((c[d+36>>2]|0)==1)break a;nm(h,d,e,f,g);h=h+8|0;if(h>>>0>=(b+16+(i<<3)|0)>>>0)break a}}h=b+24|0;while(1){if(a[d+54>>0]|0)break a;if((c[d+36>>2]|0)==1?(c[d+24>>2]|0)==1:0)break a;nm(h,d,e,f,g);h=h+8|0;if(h>>>0>=(b+16+(i<<3)|0)>>>0)break a}}h=b+24|0;while(1){if(a[d+54>>0]|0)break a;nm(h,d,e,f,g);h=h+8|0;if(h>>>0>=(b+16+(i<<3)|0)>>>0)break a}}if((c[d+16>>2]|0)!=(e|0)?(c[d+20>>2]|0)!=(e|0):0){c[d+32>>2]=f;if((c[d+44>>2]|0)==4)break;j=b+16+(c[b+12>>2]<<3)|0;h=0;i=b+16|0;k=0;b:while(1){if(i>>>0>=j>>>0){f=18;break}a[d+52>>0]=0;a[d+53>>0]=0;dm(i,d,e,e,1,g);if(a[d+54>>0]|0){f=18;break}do if(a[d+53>>0]|0){if(!(a[d+52>>0]|0))if(!(c[b+8>>2]&1)){h=1;f=18;break b}else{h=1;f=k;break}if((c[d+24>>2]|0)==1){f=23;break b}if(!(c[b+8>>2]&2)){f=23;break b}else{h=1;f=1}}else f=k;while(0);i=i+8|0;k=f}do if((f|0)==18){if((!k?(c[d+20>>2]=e,c[d+40>>2]=(c[d+40>>2]|0)+1,(c[d+36>>2]|0)==1):0)?(c[d+24>>2]|0)==2:0){a[d+54>>0]=1;if(h){f=23;break}else{h=4;break}}if(h)f=23;else h=4}while(0);if((f|0)==23)h=3;c[d+44>>2]=h;break}if((f|0)==1)c[d+32>>2]=1}else hq(d,e,f);while(0);return}function we(b,d){b=b|0;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,k=0,l=0.0,m=0.0;if(a[b+48>>0]|0){c[d>>2]=0;c[d+4>>2]=0;return}c[d>>2]=4;c[d+4>>2]=2;Jc(b,(c[b+28>>2]|0)+4|0,(c[b+32>>2]|0)+4|0);g[b+1088>>2]=0.0;a[b+297>>0]=0;l=+g[b+192>>2];m=+g[b+196>>2];do if(l<=m){h=+g[b+892>>2];i=+g[b+908>>2];f=+g[b+924>>2];f=+J(+(+g[b+832>>2]*h+ +g[b+848>>2]*i+ +g[b+864>>2]*f),+(+g[b+828>>2]*h+ +g[b+844>>2]*i+ +g[b+860>>2]*f));do if(!(l>=m)){if(f<l){if(!((l-f)%6.2831854820251465<-3.1415927410125732))if((l-f)%6.2831854820251465>3.1415927410125732)h=(l-f)%6.2831854820251465+-6.2831854820251465;else h=(l-f)%6.2831854820251465;else h=(l-f)%6.2831854820251465+6.2831854820251465;i=+A(+h);if(!((m-f)%6.2831854820251465<-3.1415927410125732))if((m-f)%6.2831854820251465>3.1415927410125732)h=(m-f)%6.2831854820251465+-6.2831854820251465;else h=(m-f)%6.2831854820251465;else h=(m-f)%6.2831854820251465+6.2831854820251465;k=i<+A(+h);f=k?f:f+6.2831854820251465;break}if(f>m){if(!((f-m)%6.2831854820251465<-3.1415927410125732))if((f-m)%6.2831854820251465>3.1415927410125732)h=(f-m)%6.2831854820251465+-6.2831854820251465;else h=(f-m)%6.2831854820251465;else h=(f-m)%6.2831854820251465+6.2831854820251465;i=+A(+h);if(!((f-l)%6.2831854820251465<-3.1415927410125732))if((f-l)%6.2831854820251465>3.1415927410125732)h=(f-l)%6.2831854820251465+-6.2831854820251465;else h=(f-l)%6.2831854820251465;else h=(f-l)%6.2831854820251465+6.2831854820251465;k=+A(+h)<i;f=k?f+-6.2831854820251465:f}}while(0);g[b+1084>>2]=f;if(f<l){g[b+1088>>2]=f-l;a[b+297>>0]=1;k=1;break}if(f>m){g[b+1088>>2]=f-m;a[b+297>>0]=1;k=1}else k=0}else k=0;while(0);a[b+296>>0]=0;e=c[b+1032>>2]|0;c[b+1080>>2]=e;f=+g[b+184>>2];h=+g[b+188>>2];i=(c[j>>2]=e,+g[j>>2]);do if(!(f<=h))e=32;else{if(!(h<i)){if(!(f>i)){e=32;break}}else f=h;g[b+1032>>2]=i-f;a[b+296>>0]=1;e=34}while(0);if((e|0)==32?(g[b+1032>>2]=0.0,a[b+1096>>0]|0):0)e=34;if((e|0)==34){c[d>>2]=(c[d>>2]|0)+1;c[d+4>>2]=(c[d+4>>2]|0)+-1}if(k<<24>>24==0?(a[b+1112>>0]|0)==0:0)return;c[d>>2]=(c[d>>2]|0)+1;c[d+4>>2]=(c[d+4>>2]|0)+-1;return}function xe(b){b=b|0;var d=0,e=0;c[b>>2]=7360;if(a[b+20>>0]|0){d=c[b+16>>2]|0;e=c[d+16>>2]|0;if(e){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0);d=c[b+16>>2]|0}if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}}if(a[b+12>>0]|0){d=c[b+8>>2]|0;e=c[d+16>>2]|0;if(e){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0);d=c[b+8>>2]|0}if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}}d=c[b+28>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+28>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+32>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+32>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+36>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+36>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+40>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+40>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+44>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+44>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+48>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+48>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+52>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+52>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+56>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+56>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+72>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+72>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+76>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+76>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+68>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+68>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+84>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+84>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+80>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+80>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+24>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+24>>2]|0;if(!d)return;c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);return}function ye(b,d){b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0,s=0;r=l;l=l+64|0;Uf(c[b+108>>2]|0,d,0);e=+g[d+204>>2]+ +g[d+212>>2];p=e*+g[d+56>>2]+ +g[d+40>>2];q=e*+g[d+60>>2]+ +g[d+44>>2];g[d+16>>2]=+g[d+52>>2]*e+ +g[d+36>>2];g[d+20>>2]=p;g[d+24>>2]=q;g[d+28>>2]=0.0;g[r+32>>2]=-1.0;s=c[b+92>>2]|0;s=xb[c[(c[s>>2]|0)+8>>2]&31](s,d+36|0,d+16|0,r)|0;c[d+88>>2]=0;if(!s){c[d+32>>2]=c[d+204>>2];g[d+272>>2]=0.0;p=-+g[d+56>>2];q=-+g[d+60>>2];g[d>>2]=-+g[d+52>>2];g[d+4>>2]=p;g[d+8>>2]=q;g[d+12>>2]=0.0;q=-1.0;p=1.0;s=d+268|0;g[s>>2]=p;l=r;return +q}q=e*+g[r+32>>2];c[d>>2]=c[r+16>>2];c[d+4>>2]=c[r+16+4>>2];c[d+8>>2]=c[r+16+8>>2];c[d+12>>2]=c[r+16+12>>2];a[d+84>>0]=1;if((a[24192]|0)==0?lx(24192)|0:0){c[r+40>>2]=0;c[r+40+4>>2]=0;c[r+40+8>>2]=0;c[r+40+12>>2]=0;se(25208,0.0,0,0,r+40|0)}c[6353]=c[6353]|1;g[6403]=0.0;p=+g[6413]*0.0;e=+g[6414]*0.0;g[6408]=+g[6412]*0.0;g[6409]=p;g[6410]=e;g[6411]=0.0;c[6416]=0;c[6417]=0;c[6418]=0;c[6419]=0;e=+g[6405]*0.0;p=+g[6406]*0.0;g[6457]=+g[6404]*0.0;g[6458]=e;g[6459]=p;g[6460]=0.0;c[d+88>>2]=25208;p=q-+g[d+212>>2];g[d+32>>2]=p;e=+g[d+204>>2];f=+g[d+208>>2]*.009999999776482582;h=p<e-f?e-f:p;if(p<e-f|h>e+f)g[d+32>>2]=h>e+f?e+f:h;c[d+16>>2]=c[r>>2];c[d+16+4>>2]=c[r+4>>2];c[d+16+8>>2]=c[r+8>>2];c[d+16+12>>2]=c[r+12>>2];m=+g[d>>2];n=+g[d+4>>2];o=+g[d+8>>2];p=m*+g[d+52>>2]+n*+g[d+56>>2]+o*+g[d+60>>2];b=c[b+108>>2]|0;h=+g[d+16>>2]-+g[b+52>>2];i=+g[d+20>>2]-+g[b+56>>2];j=+g[d+24>>2]-+g[b+60>>2];k=+g[b+392>>2];e=+g[b+396>>2];f=+g[b+388>>2];if(!(p>=-.10000000149011612)){g[d+272>>2]=-1.0/p*(m*(k*j-i*e+ +g[b+372>>2])+n*(h*e-j*f+ +g[b+376>>2])+o*(i*f-h*k+ +g[b+380>>2]));p=-1.0/p;s=d+268|0;g[s>>2]=p;l=r;return +q}else{g[d+272>>2]=0.0;p=10.0;s=d+268|0;g[s>>2]=p;l=r;return +q}return 0.0}function ze(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0.0;u=+g[b>>2];t=+g[b+4>>2];s=+g[b+8>>2];r=1.0/+B(+(u*u+t*t+s*s));y=+g[d>>2];x=+g[d+4>>2];w=+g[d+8>>2];v=1.0/+B(+(y*y+x*x+w*w));C=s*r*x*v-t*r*w*v;A=u*r*w*v-s*r*y*v;z=t*r*y*v-u*r*x*v;d=c[a+28>>2]|0;e=+g[d+4>>2];h=+g[d+20>>2];j=+g[d+36>>2];f=+g[d+8>>2];i=+g[d+24>>2];k=+g[d+40>>2];l=+g[d+12>>2];n=+g[d+28>>2];p=+g[d+44>>2];m=-+g[d+52>>2];o=-+g[d+56>>2];q=-+g[d+60>>2];g[a+48>>2]=j*z+(e*C+h*A);g[a+52>>2]=j*w*v+(e*y*v+h*x*v);g[a+56>>2]=e*u*r+t*r*h+s*r*j;g[a+60>>2]=0.0;g[a+64>>2]=z*k+(f*C+i*A);g[a+68>>2]=y*v*f+x*v*i+w*v*k;g[a+72>>2]=u*r*f+t*r*i+s*r*k;g[a+76>>2]=0.0;g[a+80>>2]=C*l+A*n+z*p;g[a+84>>2]=y*v*l+x*v*n+w*v*p;g[a+88>>2]=u*r*l+t*r*n+s*r*p;g[a+92>>2]=0.0;g[a+96>>2]=e*0.0+h*0.0+j*0.0+(e*m+h*o+j*q);g[a+100>>2]=f*0.0+i*0.0+k*0.0+(f*m+i*o+k*q);g[a+104>>2]=l*0.0+n*0.0+p*0.0+(l*m+n*o+p*q);g[a+108>>2]=0.0;d=c[a+32>>2]|0;q=+g[d+4>>2];p=+g[d+20>>2];o=+g[d+36>>2];n=+g[d+8>>2];m=+g[d+24>>2];l=+g[d+40>>2];k=+g[d+12>>2];i=+g[d+28>>2];f=+g[d+44>>2];j=-+g[d+52>>2];h=-+g[d+56>>2];e=-+g[d+60>>2];g[a+112>>2]=C*q+A*p+z*o;g[a+116>>2]=y*v*q+x*v*p+w*v*o;g[a+120>>2]=u*r*q+t*r*p+s*r*o;g[a+124>>2]=0.0;g[a+128>>2]=C*n+A*m+z*l;g[a+132>>2]=y*v*n+x*v*m+w*v*l;g[a+136>>2]=u*r*n+t*r*m+s*r*l;g[a+140>>2]=0.0;g[a+144>>2]=C*k+A*i+z*f;g[a+148>>2]=y*v*k+x*v*i+w*v*f;g[a+152>>2]=u*r*k+t*r*i+s*r*f;g[a+156>>2]=0.0;g[a+160>>2]=q*0.0+p*0.0+o*0.0+(q*j+p*h+o*e);g[a+164>>2]=n*0.0+m*0.0+l*0.0+(n*j+m*h+l*e);g[a+168>>2]=k*0.0+i*0.0+f*0.0+(k*j+i*h+f*e);g[a+172>>2]=0.0;Qc(a,(c[a+28>>2]|0)+4|0,(c[a+32>>2]|0)+4|0);return}function Ae(a,b){a=a|0;b=b|0;var d=0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0,z=0;d=c[a+780>>2]|0;if((d|0)!=4){c[a+780>>2]=d+1;z=d;y=(z|0)>0;z=y?z:0;a=a+4+(z*192|0)|0;$g(a|0,b|0,192)|0;return z|0}k=+g[b+80>>2];x=+g[a+84>>2];w=x<k?x:k;v=+g[a+276>>2];u=v<w?v:w;t=+g[a+468>>2];z=+g[a+660>>2]<(t<u?t:u);d=z?3:t<u?2:v<w?1:(x<k^1)<<31>>31;k=+g[b>>2];if(d){o=+g[a+196>>2];f=+g[b+4>>2];m=+g[a+200>>2];h=+g[b+8>>2];s=+g[a+204>>2];n=+g[a+580>>2];q=+g[a+388>>2];j=+g[a+584>>2];p=+g[a+392>>2];e=+g[a+588>>2];l=+g[a+396>>2];i=((k-o)*(j-p)-(f-m)*(n-q))*((k-o)*(j-p)-(f-m)*(n-q))+(((f-m)*(e-l)-(h-s)*(j-p))*((f-m)*(e-l)-(h-s)*(j-p))+((h-s)*(n-q)-(k-o)*(e-l))*((h-s)*(n-q)-(k-o)*(e-l)));if((d|0)==1){k=k-+g[a+4>>2];u=f-+g[a+8>>2];t=h-+g[a+12>>2];r=q;h=0.0;f=s;y=7}else{t=n-q;u=j-p;r=e-l;y=6}}else{n=+g[a+580>>2];q=+g[a+388>>2];j=+g[a+584>>2];p=+g[a+392>>2];e=+g[a+588>>2];l=+g[a+396>>2];t=n-q;u=j-p;r=e-l;o=+g[a+196>>2];m=+g[a+200>>2];s=+g[a+204>>2];i=0.0;f=+g[b+4>>2];h=+g[b+8>>2];y=6}if((y|0)==6){k=k-+g[a+4>>2];f=f-+g[a+8>>2];h=h-+g[a+12>>2];x=f*r-h*u;w=h*t-k*r;v=k*u-f*t;if((d|0)==2){u=f;t=h;r=q;j=l;f=s;e=0.0;h=v*v+(x*x+w*w);y=8}else{u=f;t=h;r=q;h=v*v+(x*x+w*w);f=s;y=7}}if((y|0)==7){n=n-o;x=j-m;e=e-f;q=u*e-t*x;e=t*n-k*e;n=k*x-u*n;if(z){e=n*n+(q*q+e*e);f=0.0}else{j=l;e=n*n+(q*q+e*e);y=8}}if((y|0)==8){w=r-o;v=p-m;f=j-f;x=u*f-t*v;f=t*w-k*f;w=k*v-u*w;f=w*w+(x*x+f*f)}x=+A(+i);v=+A(+h);t=+A(+e);s=+A(+f);w=x>-999999984306749440.0?x:-999999984306749440.0;u=v>w?v:w;z=s>(t>u?t:u)?3:t>u?2:v>w?1:(x>-999999984306749440.0^1)<<31>>31;y=(z|0)>0;z=y?z:0;a=a+4+(z*192|0)|0;$g(a|0,b|0,192)|0;return z|0}function Be(b){b=b|0;var d=0.0,e=0.0,f=0.0,h=0,i=0,j=0,k=0;h=l;l=l+16|0;if(!(a[b+1308>>0]|0)){l=h;return}g[b+928>>2]=0.0;g[b+992>>2]=0.0;g[b+1056>>2]=0.0;c[b+712>>2]=0;c[b+712+4>>2]=0;c[b+712+8>>2]=0;c[b+712+12>>2]=0;Qc(b,(c[b+28>>2]|0)+4|0,(c[b+32>>2]|0)+4|0);Db[c[(c[b>>2]|0)+44>>2]&255](b);d=+g[b+1284>>2];e=+g[b+1288>>2];f=+g[b+1292>>2];if(+g[b+696>>2]>=+g[b+680>>2]){k=(a[b+1300>>0]|0)==0;i=c[(k?b+1160|0:b+1096|0)>>2]|0;j=c[(k?b+1144|0:b+1080|0)>>2]|0;c[h>>2]=c[(k?b+1128|0:b+1064|0)>>2];c[h+4>>2]=j;c[h+8>>2]=i;g[h+12>>2]=0.0;Dg(c[b+28>>2]|0,c[b+32>>2]|0,b+176|0,h,d,e,f,d,e,f)}if(+g[b+700>>2]>=+g[b+684>>2]){i=(a[b+1300>>0]|0)==0;k=c[(i?b+1164|0:b+1100|0)>>2]|0;j=c[(i?b+1148|0:b+1084|0)>>2]|0;c[h>>2]=c[(i?b+1132|0:b+1068|0)>>2];c[h+4>>2]=j;c[h+8>>2]=k;g[h+12>>2]=0.0;Dg(c[b+28>>2]|0,c[b+32>>2]|0,b+260|0,h,d,e,f,d,e,f)}if(+g[b+704>>2]>=+g[b+688>>2]){i=(a[b+1300>>0]|0)==0;k=c[(i?b+1168|0:b+1104|0)>>2]|0;j=c[(i?b+1152|0:b+1088|0)>>2]|0;c[h>>2]=c[(i?b+1136|0:b+1072|0)>>2];c[h+4>>2]=j;c[h+8>>2]=k;g[h+12>>2]=0.0;Dg(c[b+28>>2]|0,c[b+32>>2]|0,b+344|0,h,d,e,f,d,e,f)}if(kf(b,0)|0){c[h>>2]=c[b+1208>>2];c[h+4>>2]=c[b+1208+4>>2];c[h+8>>2]=c[b+1208+8>>2];c[h+12>>2]=c[b+1208+12>>2];Qf(c[b+28>>2]|0,c[b+32>>2]|0,b+428|0,h)}if(kf(b,1)|0){c[h>>2]=c[b+1224>>2];c[h+4>>2]=c[b+1224+4>>2];c[h+8>>2]=c[b+1224+8>>2];c[h+12>>2]=c[b+1224+12>>2];Qf(c[b+28>>2]|0,c[b+32>>2]|0,b+512|0,h)}if(kf(b,2)|0){c[h>>2]=c[b+1240>>2];c[h+4>>2]=c[b+1240+4>>2];c[h+8>>2]=c[b+1240+8>>2];c[h+12>>2]=c[b+1240+12>>2];Qf(c[b+28>>2]|0,c[b+32>>2]|0,b+596|0,h)}l=h;return}function Ce(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;c[6473]=(c[6473]|0)+1;f=c[b+24>>2]|0;if(!f){if(!(c[e+8>>2]&c[d+4>>2])){b=0;return b|0}if(!(c[d+8>>2]&c[e+4>>2])){b=0;return b|0}}else if(!(wb[c[(c[f>>2]|0)+8>>2]&63](f,d,e)|0)){b=0;return b|0}k=(c[d+12>>2]|0)>(c[e+12>>2]|0);l=k?e:d;h=c[l+12>>2]|0;k=k?d:e;e=c[k+12>>2]|0;i=(((e<<16|h)+~((e<<16|h)<<15)|0)>>>10^(e<<16|h)+~((e<<16|h)<<15))*9|0;i=((i>>>6^i)+~((i>>>6^i)<<11)|0)>>>16^(i>>>6^i)+~((i>>>6^i)<<11);j=c[b+12>>2]|0;f=c[(c[b+40>>2]|0)+((i&j+-1)<<2)>>2]|0;a:do if((f|0)!=-1){g=c[b+16>>2]|0;d=f;while(1){f=g+(d<<4)|0;if((c[(c[f>>2]|0)+12>>2]|0)==(h|0)?(c[(c[g+(d<<4)+4>>2]|0)+12>>2]|0)==(e|0):0)break;d=c[(c[b+60>>2]|0)+(d<<2)>>2]|0;if((d|0)==-1)break a}return f|0}while(0);h=c[b+8>>2]|0;if((h|0)==(j|0)){g=(j|0)==0?1:j<<1;if((j|0)<(g|0)){if(!g){f=0;e=j}else{c[6485]=(c[6485]|0)+1;f=ec((g<<4|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}e=c[b+8>>2]|0}if((e|0)>0){d=0;do{m=c[b+16>>2]|0;c[f+(d<<4)>>2]=c[m+(d<<4)>>2];c[f+(d<<4)+4>>2]=c[m+(d<<4)+4>>2];c[f+(d<<4)+8>>2]=c[m+(d<<4)+8>>2];c[f+(d<<4)+12>>2]=c[m+(d<<4)+12>>2];d=d+1|0}while((d|0)!=(e|0))}d=c[b+16>>2]|0;if(d|0){if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+16>>2]=0}a[b+20>>0]=1;c[b+16>>2]=f;c[b+12>>2]=g;d=c[b+8>>2]|0;f=g}else{d=j;f=j}}else{d=h;f=j}c[b+8>>2]=d+1;e=c[b+16>>2]|0;d=c[b+68>>2]|0;if(d){wb[c[(c[d>>2]|0)+8>>2]&63](d,l,k)|0;f=c[b+12>>2]|0}if((j|0)<(f|0)){Te(b);f=(c[b+12>>2]|0)+-1&i}else f=i&j+-1;m=(c[l+12>>2]|0)<(c[k+12>>2]|0);c[e+(h<<4)>>2]=m?l:k;c[e+(h<<4)+4>>2]=m?k:l;c[e+(h<<4)+8>>2]=0;c[e+(h<<4)+8+4>>2]=0;m=(c[b+40>>2]|0)+(f<<2)|0;c[(c[b+60>>2]|0)+(h<<2)>>2]=c[m>>2];c[m>>2]=h;m=e+(h<<4)|0;return m|0}function De(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,m=0,n=0,o=0,p=0,q=0;q=l;l=l+32|0;a[q+16>>0]=1;c[q+12>>2]=0;c[q+4>>2]=0;c[q+8>>2]=0;if((c[b+8>>2]|0)>0){m=0;g=0;h=0;e=0;f=0;while(1){n=c[b+16>>2]|0;o=n+(m<<4)|0;if((g|0)==(f|0)){k=(f|0)==0?1:f<<1;if((f|0)<(k|0)){if(k){c[6485]=(c[6485]|0)+1;e=ec((k<<4|3)+16|0)|0;if(!e){h=0;f=g}else{c[(e+4+15&-16)+-4>>2]=e;h=e+4+15&-16;f=g}}else h=0;if((f|0)>0){e=0;do{j=c[q+12>>2]|0;c[h+(e<<4)>>2]=c[j+(e<<4)>>2];c[h+(e<<4)+4>>2]=c[j+(e<<4)+4>>2];c[h+(e<<4)+8>>2]=c[j+(e<<4)+8>>2];c[h+(e<<4)+12>>2]=c[j+(e<<4)+12>>2];e=e+1|0}while((e|0)!=(f|0))}e=c[q+12>>2]|0;if(!e)g=f;else{if(!(a[q+16>>0]|0))g=f;else{c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[q+12>>2]=0}a[q+16>>0]=1;c[q+12>>2]=h;j=k;i=g;e=k}else{j=f;i=f}}else{j=f;i=g}c[h+(i<<4)>>2]=c[o>>2];c[h+(i<<4)+4>>2]=c[n+(m<<4)+4>>2];c[h+(i<<4)+8>>2]=c[n+(m<<4)+8>>2];c[h+(i<<4)+12>>2]=c[n+(m<<4)+12>>2];g=i+1|0;m=m+1|0;if((m|0)>=(c[b+8>>2]|0))break;else f=j}c[q+4>>2]=g;c[q+8>>2]=e;if((i|0)>-1){f=c[q+12>>2]|0;e=0;while(1){xb[c[(c[b>>2]|0)+12>>2]&31](b,c[f+(e<<4)>>2]|0,c[f+(e<<4)+4>>2]|0,d)|0;if((e|0)<(i|0))e=e+1|0;else break}}}else g=0;if((c[b+52>>2]|0)>0){f=c[b+60>>2]|0;e=0;do{c[f+(e<<2)>>2]=-1;e=e+1|0}while((e|0)<(c[b+52>>2]|0))}if((g|0)<=1)if((g|0)<=0){e=c[q+12>>2]|0;if(!e){l=q;return}}else p=26;else{Nd(q,0,g+-1|0);p=26}if((p|0)==26){e=c[q+12>>2]|0;f=0;do{wb[c[(c[b>>2]|0)+8>>2]&63](b,c[e+(f<<4)>>2]|0,c[e+(f<<4)+4>>2]|0)|0;f=f+1|0}while((f|0)<(g|0))}c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0);c[q+12>>2]=0;l=q;return}function Ee(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0.0,j=0.0,k=0.0,m=0,n=0,o=0.0,p=0.0,q=0.0,r=0.0,s=0,t=0.0,u=0,v=0.0,w=0.0,x=0.0,y=0;y=l;l=l+32|0;s=c[a+12>>2]|0;t=+g[s+(((e+d|0)/2|0)*24|0)>>2];v=+g[s+(((e+d|0)/2|0)*24|0)+4>>2];w=+g[s+(((e+d|0)/2|0)*24|0)+8>>2];x=+g[s+(((e+d|0)/2|0)*24|0)+16>>2];u=c[s+(((e+d|0)/2|0)*24|0)+20>>2]|0;f=e;h=d;while(1){o=+g[b>>2];p=+g[b+4>>2];q=+g[b+8>>2];r=(t-o)*(t-o)+(v-p)*(v-p)+(w-q)*(w-q);a:while(1){n=s+(h*24|0)|0;i=+g[s+(h*24|0)+16>>2];do if(i!=x){if(!(i<x))break a}else{i=+g[n>>2]-o;j=+g[s+(h*24|0)+4>>2]-p;k=+g[s+(h*24|0)+8>>2]-q;if(i*i+j*j+k*k!=r)if(i*i+j*j+k*k<r)break;else break a;else if((c[s+(h*24|0)+20>>2]|0)<(u|0))break;else break a}while(0);h=h+1|0}b:while(1){m=s+(f*24|0)|0;i=+g[s+(f*24|0)+16>>2];do if(x!=i){if(!(x<i))break b}else{i=+g[m>>2]-o;j=+g[s+(f*24|0)+4>>2]-p;k=+g[s+(f*24|0)+8>>2]-q;if(r!=i*i+j*j+k*k)if(r<i*i+j*j+k*k)break;else break b;else if((u|0)<(c[s+(f*24|0)+20>>2]|0))break;else break b}while(0);f=f+-1|0}if((h|0)<=(f|0)){c[y>>2]=c[n>>2];c[y+4>>2]=c[n+4>>2];c[y+8>>2]=c[n+8>>2];c[y+12>>2]=c[n+12>>2];c[y+16>>2]=c[n+16>>2];c[y+20>>2]=c[n+20>>2];c[n>>2]=c[m>>2];c[n+4>>2]=c[m+4>>2];c[n+8>>2]=c[m+8>>2];c[n+12>>2]=c[m+12>>2];c[n+16>>2]=c[m+16>>2];c[n+20>>2]=c[m+20>>2];s=(c[a+12>>2]|0)+(f*24|0)|0;c[s>>2]=c[y>>2];c[s+4>>2]=c[y+4>>2];c[s+8>>2]=c[y+8>>2];c[s+12>>2]=c[y+12>>2];c[s+16>>2]=c[y+16>>2];c[s+20>>2]=c[y+20>>2];f=f+-1|0;h=h+1|0}if((h|0)>(f|0))break;s=c[a+12>>2]|0}if((f|0)>(d|0))Ee(a,b,d,f);if((h|0)>=(e|0)){l=y;return}Ee(a,b,h,e);l=y;return}function Fe(a,b){a=a|0;b=b|0;var d=0.0,e=0.0,f=0,h=0,i=0,j=0,k=0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0;j=c[a+28>>2]|0;k=c[a+32>>2]|0;h=c[b+8>>2]|0;g[h>>2]=1.0;f=c[b+24>>2]|0;g[h+(f+1<<2)>>2]=1.0;g[h+((f<<1)+2<<2)>>2]=1.0;l=+g[a+300>>2];q=+g[a+304>>2];e=+g[a+308>>2];o=+g[j+4>>2]*l+ +g[j+8>>2]*q+ +g[j+12>>2]*e;m=l*+g[j+20>>2]+q*+g[j+24>>2]+e*+g[j+28>>2];e=l*+g[j+36>>2]+q*+g[j+40>>2]+e*+g[j+44>>2];h=c[b+12>>2]|0;c[h>>2]=0;g[h+4>>2]=e;g[h+8>>2]=-m;g[h+12>>2]=0.0;g[h+(f<<2)>>2]=-e;c[h+(f<<2)+4>>2]=0;g[h+(f<<2)+8>>2]=o;g[h+(f<<2)+12>>2]=0.0;g[h+(f<<1<<2)>>2]=m;g[h+(f<<1<<2)+4>>2]=-o;c[h+(f<<1<<2)+8>>2]=0;g[h+(f<<1<<2)+12>>2]=0.0;h=c[b+16>>2]|0;g[h>>2]=-1.0;g[h+(f+1<<2)>>2]=-1.0;g[h+((f<<1)+2<<2)>>2]=-1.0;q=+g[a+316>>2];l=+g[a+320>>2];d=+g[a+324>>2];p=+g[k+4>>2]*q+ +g[k+8>>2]*l+ +g[k+12>>2]*d;n=q*+g[k+20>>2]+l*+g[k+24>>2]+d*+g[k+28>>2];d=q*+g[k+36>>2]+l*+g[k+40>>2]+d*+g[k+44>>2];h=c[b+20>>2]|0;c[h>>2]=0;g[h+4>>2]=-d;g[h+8>>2]=n;g[h+12>>2]=0.0;g[h+(f<<2)>>2]=d;c[h+(f<<2)+4>>2]=0;g[h+(f<<2)+8>>2]=-p;g[h+(f<<2)+12>>2]=0.0;g[h+(f<<1<<2)>>2]=-n;g[h+(f<<1<<2)+4>>2]=p;c[h+(f<<1<<2)+8>>2]=0;g[h+(f<<1<<2)+12>>2]=0.0;h=c[a+332>>2]|0;l=+g[((h&1|0)==0?b+4|0:a+336|0)>>2]*+g[b>>2];i=c[b+28>>2]|0;g[i>>2]=l*(p+ +g[k+52>>2]-o-+g[j+52>>2]);g[i+(f<<2)>>2]=l*(n+ +g[k+56>>2]-m-+g[j+56>>2]);g[i+(f<<1<<2)>>2]=l*(d+ +g[k+60>>2]-e-+g[j+60>>2]);if(h&2|0){k=c[b+32>>2]|0;c[k>>2]=c[a+340>>2];c[k+(f<<2)>>2]=c[a+340>>2];c[k+(f<<1<<2)>>2]=c[a+340>>2]}e=+g[a+356>>2];if(e>0.0){g[c[b+36>>2]>>2]=-e;g[c[b+40>>2]>>2]=e;d=+g[a+356>>2]}else d=e;if(d>0.0){g[(c[b+36>>2]|0)+(f<<2)>>2]=-e;g[(c[b+40>>2]|0)+(f<<2)>>2]=e;d=+g[a+356>>2]}if(!(d>0.0)){j=a+352|0;j=c[j>>2]|0;k=b+48|0;c[k>>2]=j;return}g[(c[b+36>>2]|0)+(f<<1<<2)>>2]=-e;g[(c[b+40>>2]|0)+(f<<1<<2)>>2]=e;j=a+352|0;j=c[j>>2]|0;k=b+48|0;c[k>>2]=j;return}function Ge(a,b,e){a=a|0;b=b|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0;Og(a,b,e)|0;c[b+52>>2]=c[a+552>>2];c[b+56>>2]=c[a+556>>2];c[b+60>>2]=c[a+560>>2];c[b+64>>2]=c[a+564>>2];c[b+68>>2]=c[a+568>>2];c[b+72>>2]=c[a+572>>2];c[b+76>>2]=c[a+576>>2];c[b+80>>2]=c[a+580>>2];c[b+84>>2]=c[a+584>>2];c[b+88>>2]=c[a+588>>2];c[b+92>>2]=c[a+592>>2];c[b+96>>2]=c[a+596>>2];c[b+100>>2]=c[a+600>>2];c[b+104>>2]=c[a+604>>2];c[b+108>>2]=c[a+608>>2];c[b+112>>2]=c[a+612>>2];c[b+116>>2]=c[a+616>>2];c[b+120>>2]=c[a+620>>2];c[b+124>>2]=c[a+624>>2];c[b+128>>2]=c[a+628>>2];c[b+132>>2]=c[a+632>>2];c[b+136>>2]=c[a+636>>2];c[b+140>>2]=c[a+640>>2];c[b+144>>2]=c[a+644>>2];c[b+148>>2]=c[a+648>>2];c[b+152>>2]=c[a+652>>2];c[b+156>>2]=c[a+656>>2];c[b+160>>2]=c[a+660>>2];c[b+164>>2]=c[a+664>>2];c[b+168>>2]=c[a+668>>2];c[b+172>>2]=c[a+672>>2];c[b+176>>2]=c[a+676>>2];c[b+184>>2]=d[a+736>>0];c[b+188>>2]=d[a+737>>0];c[b+196>>2]=c[a+684>>2];c[b+192>>2]=c[a+680>>2];c[b+180>>2]=d[a+740>>0];h=+g[a+688>>2];i=+g[a+692>>2];if(!((h-i)%6.2831854820251465<-3.1415927410125732))if((h-i)%6.2831854820251465>3.1415927410125732)f=(h-i)%6.2831854820251465+-6.2831854820251465;else f=(h-i)%6.2831854820251465;else f=(h-i)%6.2831854820251465+6.2831854820251465;g[b+200>>2]=f;if((h+i)%6.2831854820251465<-3.1415927410125732){i=(h+i)%6.2831854820251465+6.2831854820251465;e=b+204|0;g[e>>2]=i;e=a+696|0;e=c[e>>2]|0;j=b+208|0;c[j>>2]=e;j=a+700|0;j=c[j>>2]|0;e=b+212|0;c[e>>2]=j;a=a+704|0;a=c[a>>2]|0;b=b+216|0;c[b>>2]=a;return 12973}if(!((h+i)%6.2831854820251465>3.1415927410125732)){i=(h+i)%6.2831854820251465;j=b+204|0;g[j>>2]=i;j=a+696|0;j=c[j>>2]|0;e=b+208|0;c[e>>2]=j;e=a+700|0;e=c[e>>2]|0;j=b+212|0;c[j>>2]=e;a=a+704|0;a=c[a>>2]|0;j=b+216|0;c[j>>2]=a;return 12973}i=(h+i)%6.2831854820251465+-6.2831854820251465;j=b+204|0;g[j>>2]=i;j=a+696|0;j=c[j>>2]|0;e=b+208|0;c[e>>2]=j;e=a+700|0;e=c[e>>2]|0;j=b+212|0;c[j>>2]=e;a=a+704|0;a=c[a>>2]|0;j=b+216|0;c[j>>2]=a;return 12973}function He(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0,q=0.0,r=0.0,s=0.0,t=0,u=0.0,v=0.0,w=0,x=0.0,y=0,z=0,A=0,B=0,C=0,D=0.0,E=0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0;B=(a[b+68>>0]|0)!=0;C=B?e:d;B=B?d:e;z=c[b+52>>2]|0;if((z|0)<=0){x=1.0;return +x}A=(c[C+192>>2]|0)+28|0;j=+g[C+4>>2];u=+g[C+8>>2];v=+g[C+12>>2];w=c[C+16>>2]|0;x=+g[C+20>>2];k=+g[C+24>>2];l=+g[C+28>>2];e=c[C+32>>2]|0;m=+g[C+36>>2];n=+g[C+40>>2];o=+g[C+44>>2];p=c[C+48>>2]|0;q=+g[C+52>>2];r=+g[C+56>>2];s=+g[C+60>>2];t=c[C+64>>2]|0;i=1.0;d=0;y=c[C+304>>2]|0;do{E=c[A>>2]|0;P=+g[E+(d*80|0)>>2];O=+g[E+(d*80|0)+16>>2];N=+g[E+(d*80|0)+32>>2];M=+g[E+(d*80|0)+4>>2];L=+g[E+(d*80|0)+20>>2];K=+g[E+(d*80|0)+36>>2];J=+g[E+(d*80|0)+8>>2];I=+g[E+(d*80|0)+24>>2];H=+g[E+(d*80|0)+40>>2];G=+g[E+(d*80|0)+48>>2];F=+g[E+(d*80|0)+52>>2];D=+g[E+(d*80|0)+56>>2];c[C+304>>2]=y+1;g[C+4>>2]=j*P+u*O+v*N;g[C+8>>2]=j*M+u*L+v*K;g[C+12>>2]=j*J+u*I+v*H;g[C+16>>2]=0.0;g[C+20>>2]=x*P+k*O+l*N;g[C+24>>2]=x*M+k*L+l*K;g[C+28>>2]=x*J+k*I+l*H;g[C+32>>2]=0.0;g[C+36>>2]=m*P+n*O+o*N;g[C+40>>2]=m*M+n*L+o*K;g[C+44>>2]=m*J+n*I+o*H;g[C+48>>2]=0.0;g[C+52>>2]=q+(j*G+u*F+v*D);g[C+56>>2]=r+(x*G+k*F+l*D);g[C+60>>2]=s+(m*G+n*F+o*D);g[C+64>>2]=0.0;E=c[(c[b+60>>2]|0)+(d<<2)>>2]|0;D=+ob[c[(c[E>>2]|0)+12>>2]&15](E,C,B,f,h);i=D<i?D:i;y=(c[C+304>>2]|0)+1|0;c[C+304>>2]=y;g[C+4>>2]=j;g[C+8>>2]=u;g[C+12>>2]=v;c[C+16>>2]=w;g[C+20>>2]=x;g[C+24>>2]=k;g[C+28>>2]=l;c[C+32>>2]=e;g[C+36>>2]=m;g[C+40>>2]=n;g[C+44>>2]=o;c[C+48>>2]=p;g[C+52>>2]=q;g[C+56>>2]=r;g[C+60>>2]=s;c[C+64>>2]=t;d=d+1|0}while((d|0)!=(z|0));return +i}function Ie(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0;i=Sq()|0;c[i+4>>2]=7;c[i+8>>2]=-1;c[i+12>>2]=-1;g[i+16>>2]=3402823466385288598117041.0e14;a[i+20>>0]=1;a[i+21>>0]=0;c[i+24>>2]=-1;c[i+28>>2]=b;c[i+32>>2]=d;g[i+36>>2]=0.0;g[i+40>>2]=.05000000074505806;c[i+44>>2]=0;c[i>>2]=5864;a[i+48>>0]=0;c[i+52>>2]=c[e>>2];c[i+52+4>>2]=c[e+4>>2];c[i+52+8>>2]=c[e+8>>2];c[i+52+12>>2]=c[e+12>>2];c[i+68>>2]=c[e+16>>2];c[i+68+4>>2]=c[e+16+4>>2];c[i+68+8>>2]=c[e+16+8>>2];c[i+68+12>>2]=c[e+16+12>>2];c[i+84>>2]=c[e+32>>2];c[i+84+4>>2]=c[e+32+4>>2];c[i+84+8>>2]=c[e+32+8>>2];c[i+84+12>>2]=c[e+32+12>>2];c[i+100>>2]=c[e+48>>2];c[i+100+4>>2]=c[e+48+4>>2];c[i+100+8>>2]=c[e+48+8>>2];c[i+100+12>>2]=c[e+48+12>>2];c[i+116>>2]=c[f>>2];c[i+116+4>>2]=c[f+4>>2];c[i+116+8>>2]=c[f+8>>2];c[i+116+12>>2]=c[f+12>>2];c[i+132>>2]=c[f+16>>2];c[i+132+4>>2]=c[f+16+4>>2];c[i+132+8>>2]=c[f+16+8>>2];c[i+132+12>>2]=c[f+16+12>>2];c[i+148>>2]=c[f+32>>2];c[i+148+4>>2]=c[f+32+4>>2];c[i+148+8>>2]=c[f+32+8>>2];c[i+148+12>>2]=c[f+32+12>>2];c[i+164>>2]=c[f+48>>2];c[i+164+4>>2]=c[f+48+4>>2];c[i+164+8>>2]=c[f+48+8>>2];c[i+164+12>>2]=c[f+48+12>>2];a[i+180>>0]=h&1;g[i+184>>2]=1.0;g[i+188>>2]=-1.0;g[i+192>>2]=0.0;g[i+196>>2]=0.0;g[i+200>>2]=1.0;g[i+204>>2]=.699999988079071;g[i+208>>2]=0.0;g[i+212>>2]=0.0;g[i+216>>2]=1.0;g[i+220>>2]=.699999988079071;g[i+224>>2]=0.0;g[i+228>>2]=0.0;g[i+264>>2]=1.0;g[i+268>>2]=.699999988079071;g[i+272>>2]=1.0;g[i+276>>2]=0.0;g[i+280>>2]=1.0;g[i+284>>2]=.699999988079071;g[i+288>>2]=1.0;g[i+292>>2]=0.0;g[i+232>>2]=1.0;g[i+236>>2]=.699999988079071;g[i+240>>2]=1.0;g[i+244>>2]=0.0;g[i+248>>2]=1.0;g[i+252>>2]=.699999988079071;g[i+256>>2]=1.0;g[i+260>>2]=0.0;a[i+1096>>0]=0;g[i+1116>>2]=0.0;g[i+1120>>2]=0.0;g[i+1124>>2]=0.0;c[i+300>>2]=0;c[i+1100>>2]=0;c[i+1100+4>>2]=0;c[i+1100+8>>2]=0;a[i+1100+12>>0]=0;a[i+49>>0]=1;Jc(i,(c[i+28>>2]|0)+4|0,(c[i+32>>2]|0)+4|0);return i|0}function Je(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0;c[6472]=(c[6472]|0)+1;j=(c[b+12>>2]|0)>(c[d+12>>2]|0);l=j?d:b;h=c[l+12>>2]|0;j=j?b:d;f=c[j+12>>2]|0;i=(((f<<16|h)+~((f<<16|h)<<15)|0)>>>10^(f<<16|h)+~((f<<16|h)<<15))*9|0;i=(((i>>>6^i)+~((i>>>6^i)<<11)|0)>>>16^(i>>>6^i)+~((i>>>6^i)<<11))&(c[a+12>>2]|0)+-1;b=c[(c[a+40>>2]|0)+(i<<2)>>2]|0;if((b|0)==-1){o=0;return o|0}g=c[a+16>>2]|0;while(1){d=g+(b<<4)|0;if((c[(c[d>>2]|0)+12>>2]|0)==(h|0)?(c[(c[g+(b<<4)+4>>2]|0)+12>>2]|0)==(f|0):0)break;b=c[(c[a+60>>2]|0)+(b<<2)>>2]|0;if((b|0)==-1){b=0;o=25;break}}if((o|0)==25)return b|0;Mb[c[(c[a>>2]|0)+32>>2]&127](a,d,e);n=c[g+(b<<4)+12>>2]|0;m=d-(c[a+16>>2]|0)>>4;h=(c[a+40>>2]|0)+(i<<2)|0;b=c[h>>2]|0;f=c[a+60>>2]|0;if((b|0)!=(m|0)){d=b;while(1){g=f+(d<<2)|0;b=c[g>>2]|0;if((b|0)==(m|0))break;else d=b}b=c[f+(m<<2)>>2]|0;if((d|0)==-1)o=12;else c[g>>2]=b}else{b=c[f+(m<<2)>>2]|0;o=12}if((o|0)==12)c[h>>2]=b;k=(c[a+8>>2]|0)+-1|0;b=c[a+68>>2]|0;if(b|0)xb[c[(c[b>>2]|0)+12>>2]&31](b,l,j,e)|0;if((k|0)==(m|0)){c[a+8>>2]=(c[a+8>>2]|0)+-1;o=n;return o|0}j=c[a+16>>2]|0;h=c[(c[j+(k<<4)+4>>2]|0)+12>>2]<<16|c[(c[j+(k<<4)>>2]|0)+12>>2];h=((h+~(h<<15)|0)>>>10^h+~(h<<15))*9|0;h=(((h>>>6^h)+~((h>>>6^h)<<11)|0)>>>16^(h>>>6^h)+~((h>>>6^h)<<11))&(c[a+12>>2]|0)+-1;i=(c[a+40>>2]|0)+(h<<2)|0;b=c[i>>2]|0;f=c[a+60>>2]|0;if((b|0)!=(k|0)){d=b;while(1){g=f+(d<<2)|0;b=c[g>>2]|0;if((b|0)==(k|0))break;else d=b}b=c[f+(k<<2)>>2]|0;if((d|0)==-1)o=23;else c[g>>2]=b}else{b=c[f+(k<<2)>>2]|0;o=23}if((o|0)==23)c[i>>2]=b;c[j+(m<<4)>>2]=c[j+(k<<4)>>2];c[j+(m<<4)+4>>2]=c[j+(k<<4)+4>>2];c[j+(m<<4)+8>>2]=c[j+(k<<4)+8>>2];c[j+(m<<4)+12>>2]=c[j+(k<<4)+12>>2];o=(c[a+40>>2]|0)+(h<<2)|0;c[(c[a+60>>2]|0)+(m<<2)>>2]=c[o>>2];c[o>>2]=m;c[a+8>>2]=(c[a+8>>2]|0)+-1;o=n;return o|0}function Ke(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,h=0,i=0,j=0,k=0,m=0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0,u=0,v=0,w=0;w=l;l=l+256|0;if(!a){l=w;return}o=+g[b>>2];p=+g[b+4>>2];q=+g[b+8>>2];r=+g[b+16>>2];s=+g[b+20>>2];n=+g[b+24>>2];c[w>>2]=a;k=64;e=1;i=w;b=0;while(1){a=e+-1|0;m=c[i+(a<<2)>>2]|0;do if(((((+g[m>>2]<=r?+g[m+16>>2]>=o:0)?+g[m+4>>2]<=s:0)?+g[m+20>>2]>=p:0)?+g[m+8>>2]<=n:0)?+g[m+24>>2]>=q:0){if(!(c[m+40>>2]|0)){Ib[c[(c[d>>2]|0)+12>>2]&127](d,m);f=k;e=a;a=i;break}j=c[m+36>>2]|0;do if((a|0)==(k|0)){f=(k|0)==0?1:k<<1;if((e|0)<=(f|0)){if((f|0)!=0?(c[6485]=(c[6485]|0)+1,t=ec((f<<2|3)+16|0)|0,(t|0)!=0):0){c[(t+4+15&-16)+-4>>2]=t;h=t+4+15&-16}else h=0;if((e|0)<=1){if(!i){b=1;k=0;break}}else{a=0;do{c[h+(a<<2)>>2]=c[i+(a<<2)>>2];a=a+1|0}while((a|0)!=(k|0))}if(!(b<<24>>24))b=1;else{c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0);b=1}}else{f=k;h=i}}else{f=k;h=i;k=a}while(0);c[h+(k<<2)>>2]=j;j=k+1|0;i=c[m+40>>2]|0;do if((j|0)==(f|0)?(u=(f|0)==0?1:f<<1,(f|0)<(u|0)):0){if((u|0)!=0?(c[6485]=(c[6485]|0)+1,v=ec((u<<2|3)+16|0)|0,(v|0)!=0):0){c[(v+4+15&-16)+-4>>2]=v;e=v+4+15&-16}else e=0;if((k|0)>-1){a=0;do{c[e+(a<<2)>>2]=c[h+(a<<2)>>2];a=a+1|0}while((a|0)!=(f|0));if(!(b<<24>>24)){f=u;a=e;b=1;break}}else if((h|0)==0|b<<24>>24==0){f=u;a=e;b=1;break}c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0);f=u;a=e;b=1}else a=h;while(0);c[a+(j<<2)>>2]=i;e=k+2|0}else{f=k;e=a;a=i}while(0);if((e|0)<=0)break;k=f;i=a}if((a|0)==0|b<<24>>24==0){l=w;return}c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);l=w;return}function Le(b,d){b=b|0;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0;o=l;l=l+64|0;e=c[d+192>>2]|0;Pb[c[(c[e>>2]|0)+8>>2]&127](e,d+4|0,o+48|0,o+32|0);h=+g[o+48>>2]+-.019999999552965164;g[o+48>>2]=h;i=+g[o+48+4>>2]+-.019999999552965164;g[o+48+4>>2]=i;j=+g[o+48+8>>2]+-.019999999552965164;g[o+48+8>>2]=j;f=+g[o+32>>2]+.019999999552965164;g[o+32>>2]=f;k=+g[o+32+4>>2]+.019999999552965164;g[o+32+4>>2]=k;m=+g[o+32+8>>2]+.019999999552965164;g[o+32+8>>2]=m;if(((a[b+44>>0]|0)!=0?(c[d+252>>2]|0)==2:0)?(c[d+204>>2]&3|0)==0:0){e=c[d+192>>2]|0;Pb[c[(c[e>>2]|0)+8>>2]&127](e,d+68|0,o+16|0,o);h=+g[o+16>>2]+-.019999999552965164;g[o+16>>2]=h;j=+g[o+16+4>>2]+-.019999999552965164;g[o+16+4>>2]=j;k=+g[o+16+8>>2]+-.019999999552965164;g[o+16+8>>2]=k;f=+g[o>>2]+.019999999552965164;g[o>>2]=f;m=+g[o+4>>2]+.019999999552965164;g[o+4>>2]=m;n=+g[o+8>>2]+.019999999552965164;g[o+8>>2]=n;i=+g[o+48>>2];if(h<i)g[o+48>>2]=h;else h=i;i=+g[o+48+4>>2];if(j<i){g[o+48+4>>2]=j;i=j}j=+g[o+48+8>>2];if(k<j){g[o+48+8>>2]=k;j=k}k=+g[o+16+12>>2];if(k<+g[o+48+12>>2])g[o+48+12>>2]=k;k=+g[o+32>>2];if(k<f)g[o+32>>2]=f;else f=k;k=+g[o+32+4>>2];if(k<m){g[o+32+4>>2]=m;k=m}m=+g[o+32+8>>2];if(m<n){g[o+32+8>>2]=n;m=n}n=+g[o+12>>2];if(+g[o+32+12>>2]<n)g[o+32+12>>2]=n}e=c[b+68>>2]|0;if((c[d+204>>2]&1|0)==0?(h=f-h,k=k-i,n=m-j,!(h*h+k*k+n*n<999999995904.0)):0){if((c[d+220>>2]&-2|0)!=4)c[d+220>>2]=5;if(!(a[14787]|0)){l=o;return}e=c[b+72>>2]|0;if(!e){l=o;return}a[14787]=0;Ib[c[(c[e>>2]|0)+44>>2]&127](e,14788);d=c[b+72>>2]|0;Ib[c[(c[d>>2]|0)+44>>2]&127](d,14837);d=c[b+72>>2]|0;Ib[c[(c[d>>2]|0)+44>>2]&127](d,14905);b=c[b+72>>2]|0;Ib[c[(c[b>>2]|0)+44>>2]&127](b,14970);l=o;return}Tb[c[(c[e>>2]|0)+16>>2]&31](e,c[d+188>>2]|0,o+48|0,o+32|0,c[b+24>>2]|0);l=o;return}function Me(a,b,d,e,f,h,i){a=a|0;b=+b;d=+d;e=+e;f=f|0;h=+h;i=i|0;var j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0;t=l;l=l+16|0;j=d*h+ +g[a+52>>2];k=e*h+ +g[a+56>>2];g[i+48>>2]=b*h+ +g[a+48>>2];g[i+52>>2]=j;g[i+56>>2]=k;g[i+60>>2]=0.0;k=+g[f>>2];e=+g[f+4>>2];b=+g[f+8>>2];j=+B(+(k*k+e*e+b*b));j=k*k+e*e+b*b>1.1920928955078125e-07?j:0.0;j=j*h>.7853981852531433?.7853981852531433/h:j;if(j<1.0000000474974513e-03)d=h*.5-j*h*h*h*.02083333395421505*j;else d=+E(+(j*.5*h))/j;s=b*d;r=e*d;q=k*d;h=+D(+(j*h*.5));yg(a,t);m=+g[t>>2];n=+g[t+12>>2];o=+g[t+8>>2];p=+g[t+4>>2];b=(h*n-q*m-r*p-s*o)*(h*n-q*m-r*p-s*o)+((s*n+h*o+q*p-r*m)*(s*n+h*o+q*p-r*m)+((h*m+q*n+r*o-s*p)*(h*m+q*n+r*o-s*p)+(s*m+(r*n+h*p)-q*o)*(s*m+(r*n+h*p)-q*o)));if(b>1.1920928955078125e-07){k=1.0/+B(+b);e=(h*m+q*n+r*o-s*p)*k;b=(s*m+(r*n+h*p)-q*o)*k;j=(s*n+h*o+q*p-r*m)*k;k=(h*n-q*m-r*p-s*o)*k;d=k*k+(j*j+(b*b+e*e))}else{d=b;e=h*m+q*n+r*o-s*p;j=s*n+h*o+q*p-r*m;k=h*n-q*m-r*p-s*o;b=s*m+(r*n+h*p)-q*o}if(d>1.1920928955078125e-07){m=2.0/d;r=e*m;s=b*m;m=j*m;q=k*r;o=k*s;h=k*m;r=e*r;k=e*s;n=e*m;s=b*s;p=b*m;m=j*m;g[i>>2]=1.0-(s+m);g[i+4>>2]=k-h;g[i+8>>2]=n+o;g[i+12>>2]=0.0;g[i+16>>2]=k+h;g[i+20>>2]=1.0-(r+m);g[i+24>>2]=p-q;g[i+28>>2]=0.0;g[i+32>>2]=n-o;g[i+36>>2]=p+q;g[i+40>>2]=1.0-(r+s);g[i+44>>2]=0.0;l=t;return}else{c[i>>2]=c[a>>2];c[i+4>>2]=c[a+4>>2];c[i+8>>2]=c[a+8>>2];c[i+12>>2]=c[a+12>>2];c[i+16>>2]=c[a+16>>2];c[i+16+4>>2]=c[a+16+4>>2];c[i+16+8>>2]=c[a+16+8>>2];c[i+16+12>>2]=c[a+16+12>>2];c[i+32>>2]=c[a+32>>2];c[i+32+4>>2]=c[a+32+4>>2];c[i+32+8>>2]=c[a+32+8>>2];c[i+32+12>>2]=c[a+32+12>>2];l=t;return}}function Ne(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0;b=l;l=l+608|0;p=+g[d+116>>2]-+g[d+52>>2];o=+g[d+120>>2]-+g[d+56>>2];n=+g[d+124>>2]-+g[d+60>>2];i=+g[e+116>>2]-+g[e+52>>2];j=+g[e+120>>2]-+g[e+56>>2];k=+g[e+124>>2]-+g[e+60>>2];m=+g[d+276>>2];if(p*p+o*o+n*n<m*m?(p=+g[e+276>>2],i*i+j*j+k*k<p*p):0){p=1.0;l=b;return +p}h=c[d+192>>2]|0;f=c[e+272>>2]|0;c[b+552+8>>2]=0;c[b+552+12>>2]=-1;q=b+552+28|0;c[b+552>>2]=9792;c[b+552+4>>2]=8;c[b+552+16>>2]=1065353216;c[b+552+20>>2]=1065353216;c[b+552+24>>2]=1065353216;c[q>>2]=0;c[q+4>>2]=0;c[q+8>>2]=0;c[q+12>>2]=0;c[q+16>>2]=0;c[b+552+32>>2]=f;c[b+552+48>>2]=f;g[b+552+52>>2]=0.0;c[b+376>>2]=7004;g[b+376+164>>2]=999999984306749440.0;c[b+376+168>>2]=0;g[b+376+172>>2]=0.0;g[b+16+308>>2]=9.999999747378752e-05;a[b+16+332>>0]=0;c[b>>2]=10208;c[b+4>>2]=b+16;c[b+8>>2]=h;c[b+12>>2]=b+552;if(ed(b,d+4|0,d+68|0,e+4|0,e+68|0,b+376|0)|0){i=+g[b+376+164>>2];if(+g[d+268>>2]>i)g[d+268>>2]=i;if(+g[e+268>>2]>i)g[e+268>>2]=i;if(!(i<1.0))i=1.0}else i=1.0;q=c[e+192>>2]|0;h=c[d+272>>2]|0;c[b+552+8>>2]=0;c[b+552+12>>2]=-1;f=b+552+28|0;c[b+552>>2]=9792;c[b+552+4>>2]=8;c[b+552+16>>2]=1065353216;c[b+552+20>>2]=1065353216;c[b+552+24>>2]=1065353216;c[f>>2]=0;c[f+4>>2]=0;c[f+8>>2]=0;c[f+12>>2]=0;c[f+16>>2]=0;c[b+552+32>>2]=h;c[b+552+48>>2]=h;g[b+552+52>>2]=0.0;c[b+376>>2]=7004;g[b+376+164>>2]=999999984306749440.0;c[b+376+168>>2]=0;g[b+376+172>>2]=0.0;g[b+16+308>>2]=9.999999747378752e-05;a[b+16+332>>0]=0;c[b>>2]=10208;c[b+4>>2]=b+16;c[b+8>>2]=b+552;c[b+12>>2]=q;if(ed(b,d+4|0,d+68|0,e+4|0,e+68|0,b+376|0)|0){j=+g[b+376+164>>2];if(+g[d+268>>2]>j)g[d+268>>2]=j;if(+g[e+268>>2]>j)g[e+268>>2]=j;if(i>j)i=j}p=i;l=b;return +p}function Oe(a,b,e){a=a|0;b=b|0;e=e|0;Og(a,b,e)|0;c[b+52>>2]=c[a+48>>2];c[b+56>>2]=c[a+52>>2];c[b+60>>2]=c[a+56>>2];c[b+64>>2]=c[a+60>>2];c[b+68>>2]=c[a+64>>2];c[b+72>>2]=c[a+68>>2];c[b+76>>2]=c[a+72>>2];c[b+80>>2]=c[a+76>>2];c[b+84>>2]=c[a+80>>2];c[b+88>>2]=c[a+84>>2];c[b+92>>2]=c[a+88>>2];c[b+96>>2]=c[a+92>>2];c[b+100>>2]=c[a+96>>2];c[b+104>>2]=c[a+100>>2];c[b+108>>2]=c[a+104>>2];c[b+112>>2]=c[a+108>>2];c[b+116>>2]=c[a+112>>2];c[b+120>>2]=c[a+116>>2];c[b+124>>2]=c[a+120>>2];c[b+128>>2]=c[a+124>>2];c[b+132>>2]=c[a+128>>2];c[b+136>>2]=c[a+132>>2];c[b+140>>2]=c[a+136>>2];c[b+144>>2]=c[a+140>>2];c[b+148>>2]=c[a+144>>2];c[b+152>>2]=c[a+148>>2];c[b+156>>2]=c[a+152>>2];c[b+160>>2]=c[a+156>>2];c[b+164>>2]=c[a+160>>2];c[b+168>>2]=c[a+164>>2];c[b+172>>2]=c[a+168>>2];c[b+176>>2]=c[a+172>>2];c[b+228>>2]=c[a+868>>2];c[b+212>>2]=c[a+872>>2];c[b+196>>2]=c[a+680>>2];c[b+180>>2]=c[a+696>>2];c[b+232>>2]=c[a+932>>2];c[b+216>>2]=c[a+936>>2];c[b+200>>2]=c[a+684>>2];c[b+184>>2]=c[a+700>>2];c[b+236>>2]=c[a+996>>2];c[b+220>>2]=c[a+1e3>>2];c[b+204>>2]=c[a+688>>2];c[b+188>>2]=c[a+704>>2];c[b+244>>2]=d[a+1300>>0];c[b+248>>2]=d[a+1301>>0];c[b+276>>2]=c[a+1316>>2];c[b+324>>2]=c[a+1364>>2];c[b+252>>2]=d[a+1309>>0];c[b+300>>2]=c[a+1340>>2];c[b+280>>2]=c[a+1320>>2];c[b+328>>2]=c[a+1368>>2];c[b+256>>2]=d[a+1310>>0];c[b+304>>2]=c[a+1344>>2];c[b+284>>2]=c[a+1324>>2];c[b+332>>2]=c[a+1372>>2];c[b+260>>2]=d[a+1311>>0];c[b+308>>2]=c[a+1348>>2];c[b+288>>2]=c[a+1328>>2];c[b+336>>2]=c[a+1376>>2];c[b+264>>2]=d[a+1312>>0];c[b+312>>2]=c[a+1352>>2];c[b+292>>2]=c[a+1332>>2];c[b+340>>2]=c[a+1380>>2];c[b+268>>2]=d[a+1313>>0];c[b+316>>2]=c[a+1356>>2];c[b+296>>2]=c[a+1336>>2];c[b+344>>2]=c[a+1384>>2];c[b+272>>2]=d[a+1314>>0];c[b+320>>2]=c[a+1360>>2];return 12874}function Pe(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0.0,i=0;f=l;l=l+784|0;c[f+720>>2]=1065353216;c[f+720+4>>2]=0;c[f+720+4+4>>2]=0;c[f+720+4+8>>2]=0;c[f+720+4+12>>2]=0;c[f+720+20>>2]=1065353216;c[f+720+24>>2]=0;c[f+720+24+4>>2]=0;c[f+720+24+8>>2]=0;c[f+720+24+12>>2]=0;c[f+720+40>>2]=1065353216;e=f+720+44|0;c[e>>2]=0;c[e+4>>2]=0;c[e+8>>2]=0;c[e+12>>2]=0;c[e+16>>2]=0;c[f+544>>2]=7004;c[f+544+168>>2]=0;g[f+544+172>>2]=0.0;c[f+544+164>>2]=c[b+200>>2];e=c[b+196>>2]|0;c[f+488+8>>2]=0;c[f+488+12>>2]=-1;i=f+488+28|0;c[f+488>>2]=9792;c[f+488+4>>2]=8;c[f+488+16>>2]=1065353216;c[f+488+20>>2]=1065353216;c[f+488+24>>2]=1065353216;c[i>>2]=0;c[i+4>>2]=0;c[i+8>>2]=0;c[i+12>>2]=0;c[i+16>>2]=0;c[f+488+32>>2]=e;c[f+488+48>>2]=e;g[f+488+52>>2]=0.0;c[f+376+8>>2]=0;c[f+376+12>>2]=-1;c[f+376+16>>2]=1065353216;c[f+376+20>>2]=1065353216;c[f+376+24>>2]=1065353216;g[f+376+28>>2]=0.0;g[f+376+48>>2]=.03999999910593033;c[f+376+56>>2]=0;c[f+376>>2]=10340;c[f+376+4>>2]=1;c[f+376+60>>2]=c[d>>2];c[f+376+60+4>>2]=c[d+4>>2];c[f+376+60+8>>2]=c[d+8>>2];c[f+376+60+12>>2]=c[d+12>>2];c[f+376+76>>2]=c[d+16>>2];c[f+376+76+4>>2]=c[d+16+4>>2];c[f+376+76+8>>2]=c[d+16+8>>2];c[f+376+76+12>>2]=c[d+16+12>>2];c[f+376+92>>2]=c[d+32>>2];c[f+376+92+4>>2]=c[d+32+4>>2];c[f+376+92+8>>2]=c[d+32+8>>2];c[f+376+92+12>>2]=c[d+32+12>>2];g[f+16+308>>2]=9.999999747378752e-05;a[f+16+332>>0]=0;c[f>>2]=10476;c[f+4>>2]=f+16;c[f+8>>2]=f+488;c[f+12>>2]=f+376;if(Oc(f,b+4|0,b+68|0,f+720|0,f+720|0,f+544|0)|0?(h=+g[f+544+164>>2],+g[b+200>>2]>h):0)g[b+200>>2]=h;c[f+376>>2]=9660;e=c[f+376+56>>2]|0;if(!e){l=f;return}Db[c[c[e>>2]>>2]&255](e);e=c[f+376+56>>2]|0;if(!e){l=f;return}c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0);l=f;return}function Qe(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0;i=c[b+4>>2]|0;if((i|0)==(c[b+8>>2]|0)?(h=(i|0)==0?1:i<<1,(i|0)<(h|0)):0){if(!h){e=0;g=i}else{c[6485]=(c[6485]|0)+1;e=ec((h*244|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}g=c[b+4>>2]|0}if((g|0)>0){f=0;do{k=e+(f*244|0)|0;j=c[b+12>>2]|0;l=j+(f*244|0)|0;c[k>>2]=c[l>>2];c[k+4>>2]=c[l+4>>2];c[k+8>>2]=c[l+8>>2];c[k+12>>2]=c[l+12>>2];k=j+(f*244|0)+16|0;l=e+(f*244|0)+16|0;c[l>>2]=c[k>>2];c[l+4>>2]=c[k+4>>2];c[l+8>>2]=c[k+8>>2];c[l+12>>2]=c[k+12>>2];l=j+(f*244|0)+32|0;k=e+(f*244|0)+32|0;c[k>>2]=c[l>>2];c[k+4>>2]=c[l+4>>2];c[k+8>>2]=c[l+8>>2];c[k+12>>2]=c[l+12>>2];k=e+(f*244|0)+48|0;l=j+(f*244|0)+48|0;c[k>>2]=c[l>>2];c[k+4>>2]=c[l+4>>2];c[k+8>>2]=c[l+8>>2];c[k+12>>2]=c[l+12>>2];$g(e+(f*244|0)+64|0,j+(f*244|0)+64|0,180)|0;f=f+1|0}while((f|0)!=(g|0))}f=c[b+12>>2]|0;if(f|0){if(a[b+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[b+12>>2]=0}a[b+16>>0]=1;c[b+12>>2]=e;c[b+8>>2]=h;e=c[b+4>>2]|0}else e=i;c[b+4>>2]=e+1;l=c[b+12>>2]|0;c[l+(i*244|0)>>2]=c[d>>2];c[l+(i*244|0)+4>>2]=c[d+4>>2];c[l+(i*244|0)+8>>2]=c[d+8>>2];c[l+(i*244|0)+12>>2]=c[d+12>>2];c[l+(i*244|0)+16>>2]=c[d+16>>2];c[l+(i*244|0)+16+4>>2]=c[d+16+4>>2];c[l+(i*244|0)+16+8>>2]=c[d+16+8>>2];c[l+(i*244|0)+16+12>>2]=c[d+16+12>>2];c[l+(i*244|0)+32>>2]=c[d+32>>2];c[l+(i*244|0)+32+4>>2]=c[d+32+4>>2];c[l+(i*244|0)+32+8>>2]=c[d+32+8>>2];c[l+(i*244|0)+32+12>>2]=c[d+32+12>>2];c[l+(i*244|0)+48>>2]=c[d+48>>2];c[l+(i*244|0)+48+4>>2]=c[d+48+4>>2];c[l+(i*244|0)+48+8>>2]=c[d+48+8>>2];c[l+(i*244|0)+48+12>>2]=c[d+48+12>>2];$g(l+(i*244|0)+64|0,d+64|0,180)|0;return (c[b+12>>2]|0)+(i*244|0)|0}function Re(a,b,d){a=a|0;b=b|0;d=+d;var e=0.0,f=0.0,h=0.0,i=0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0;i=l;l=l+32|0;k=+g[a+60>>2];q=+g[a+76>>2]-k;j=+g[a+64>>2];o=+g[a+80>>2]-j;m=+g[a+68>>2];r=+g[a+84>>2]-m;n=+g[a+92>>2]-k;p=+g[a+96>>2]-j;f=+g[a+100>>2]-m;h=1.0/+B(+((q*p-o*n)*(q*p-o*n)+((o*f-r*p)*(o*f-r*p)+(r*n-q*f)*(r*n-q*f))));e=(o*f-r*p)*h;f=(r*n-q*f)*h;h=(q*p-o*n)*h;j=+g[b+8>>2]*h+(+g[b>>2]*e+ +g[b+4>>2]*f)-(m*h+(k*e+j*f));if(!(j>=-d)|!(j<=d)){b=0;l=i;return b|0}Pb[c[(c[a>>2]|0)+104>>2]&127](a,0,i+16|0,i);m=+g[i+16>>2];q=+g[i>>2]-m;o=+g[i+16+4>>2];n=+g[i+4>>2]-o;k=+g[i+16+8>>2];p=+g[i+8>>2]-k;r=1.0/+B(+((f*q-e*n)*(f*q-e*n)+((h*n-f*p)*(h*n-f*p)+(e*p-h*q)*(e*p-h*q))));if(+g[b+8>>2]*(f*q-e*n)*r+(+g[b>>2]*(h*n-f*p)*r+ +g[b+4>>2]*(e*p-h*q)*r)-(k*(f*q-e*n)*r+(m*(h*n-f*p)*r+o*(e*p-h*q)*r))<-d){b=0;l=i;return b|0}Pb[c[(c[a>>2]|0)+104>>2]&127](a,1,i+16|0,i);m=+g[i+16>>2];q=+g[i>>2]-m;o=+g[i+16+4>>2];n=+g[i+4>>2]-o;k=+g[i+16+8>>2];p=+g[i+8>>2]-k;r=1.0/+B(+((f*q-e*n)*(f*q-e*n)+((h*n-f*p)*(h*n-f*p)+(e*p-h*q)*(e*p-h*q))));if(+g[b+8>>2]*(f*q-e*n)*r+(+g[b>>2]*(h*n-f*p)*r+ +g[b+4>>2]*(e*p-h*q)*r)-(k*(f*q-e*n)*r+(m*(h*n-f*p)*r+o*(e*p-h*q)*r))<-d){b=0;l=i;return b|0}Pb[c[(c[a>>2]|0)+104>>2]&127](a,2,i+16|0,i);m=+g[i+16>>2];q=+g[i>>2]-m;o=+g[i+16+4>>2];n=+g[i+4>>2]-o;k=+g[i+16+8>>2];p=+g[i+8>>2]-k;r=1.0/+B(+((f*q-e*n)*(f*q-e*n)+((h*n-f*p)*(h*n-f*p)+(e*p-h*q)*(e*p-h*q))));if(+g[b+8>>2]*(f*q-e*n)*r+(+g[b>>2]*(h*n-f*p)*r+ +g[b+4>>2]*(e*p-h*q)*r)-(k*(f*q-e*n)*r+(m*(h*n-f*p)*r+o*(e*p-h*q)*r))<-d){b=0;l=i;return b|0}b=1;l=i;return b|0}function Se(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0;k=l;l=l+64|0;n=+g[a+20>>2];u=+g[a+40>>2];p=+g[a+24>>2];s=+g[a+36>>2];t=+g[a+32>>2];m=+g[a+16>>2];j=+g[a>>2];i=+g[a+4>>2];q=+g[a+8>>2];h=1.0/((n*u-p*s)*j+i*(p*t-u*m)+(s*m-n*t)*q);z=+g[b>>2];y=+g[b+4>>2];A=+g[b+8>>2];x=+g[b+16>>2];w=+g[b+20>>2];v=+g[b+24>>2];r=+g[b+32>>2];o=+g[b+36>>2];f=+g[b+40>>2];g[k+16>>2]=A*(s*m-n*t)*h+(z*(n*u-p*s)*h+y*(p*t-u*m)*h);g[k+16+4>>2]=A*(t*i-s*j)*h+(z*(s*q-u*i)*h+y*(u*j-t*q)*h);g[k+16+8>>2]=A*(n*j-m*i)*h+(z*(p*i-n*q)*h+y*(m*q-p*j)*h);g[k+16+12>>2]=0.0;g[k+16+16>>2]=(n*u-p*s)*h*x+(p*t-u*m)*h*w+(s*m-n*t)*h*v;g[k+16+20>>2]=(s*q-u*i)*h*x+(u*j-t*q)*h*w+(t*i-s*j)*h*v;g[k+16+24>>2]=(p*i-n*q)*h*x+(m*q-p*j)*h*w+(n*j-m*i)*h*v;g[k+16+28>>2]=0.0;g[k+16+32>>2]=(n*u-p*s)*h*r+(p*t-u*m)*h*o+(s*m-n*t)*h*f;g[k+16+36>>2]=(s*q-u*i)*h*r+(u*j-t*q)*h*o+(t*i-s*j)*h*f;g[k+16+40>>2]=(p*i-n*q)*h*r+(m*q-p*j)*h*o+(n*j-m*i)*h*f;g[k+16+44>>2]=0.0;yg(k+16|0,k);f=+g[k>>2];h=+g[k+4>>2];i=+g[k+8>>2];m=+g[k+12>>2];j=1.0/+B(+(f*f+h*h+i*i+m*m));g[k>>2]=f*j;g[k+4>>2]=h*j;g[k+8>>2]=i*j;g[k+12>>2]=m*j;m=m*j<-1.0?-1.0:m*j;g[e>>2]=+G(+(m>1.0?1.0:m))*2.0;g[d>>2]=f*j;g[d+4>>2]=h*j;g[d+8>>2]=i*j;g[d+12>>2]=0.0;if(f*j*f*j+h*j*h*j+i*j*i*j<1.4210854715202004e-14){c[d>>2]=1065353216;c[d+4>>2]=0;c[d+8>>2]=0;g[d+12>>2]=0.0;l=k;return}else{A=1.0/+B(+(f*j*f*j+h*j*h*j+i*j*i*j));g[d>>2]=f*j*A;g[d+4>>2]=h*j*A;g[d+8>>2]=i*j*A;l=k;return}}function Te(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0;j=c[b+12>>2]|0;k=c[b+32>>2]|0;if((k|0)>=(j|0))return;do if((c[b+36>>2]|0)<(j|0)){if(!j){d=0;f=k}else{c[6485]=(c[6485]|0)+1;d=ec((j<<2|3)+16|0)|0;if(!d)d=0;else{c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16}f=c[b+32>>2]|0}g=c[b+40>>2]|0;if((f|0)<=0){if(!g){a[b+44>>0]=1;c[b+40>>2]=d;c[b+36>>2]=j;i=b+40|0;break}}else{e=0;do{c[d+(e<<2)>>2]=c[g+(e<<2)>>2];e=e+1|0}while((e|0)!=(f|0))}if(a[b+44>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0)}a[b+44>>0]=1;c[b+40>>2]=d;c[b+36>>2]=j;i=b+40|0}else{i=b+40|0;d=c[b+40>>2]|0}while(0);uj(d+(k<<2)|0,0,(j<<2)-(k<<2)|0)|0;c[b+32>>2]=j;h=c[b+52>>2]|0;if((h|0)<(j|0)){do if((c[b+56>>2]|0)<(j|0)){if(!j){d=0;f=h}else{c[6485]=(c[6485]|0)+1;d=ec((j<<2|3)+16|0)|0;if(!d)d=0;else{c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16}f=c[b+52>>2]|0}g=c[b+60>>2]|0;if((f|0)<=0){if(!g){a[b+64>>0]=1;c[b+60>>2]=d;c[b+56>>2]=j;break}}else{e=0;do{c[d+(e<<2)>>2]=c[g+(e<<2)>>2];e=e+1|0}while((e|0)!=(f|0))}if(a[b+64>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0)}a[b+64>>0]=1;c[b+60>>2]=d;c[b+56>>2]=j}else d=c[b+60>>2]|0;while(0);uj(d+(h<<2)|0,0,(j<<2)-(h<<2)|0)|0}c[b+52>>2]=j;if((j|0)>0){uj(c[i>>2]|0,-1,j<<2|0)|0;uj(c[b+60>>2]|0,-1,j<<2|0)|0}if((k|0)<=0)return;g=c[b+16>>2]|0;e=c[i>>2]|0;f=c[b+60>>2]|0;d=0;do{j=c[(c[g+(d<<4)+4>>2]|0)+12>>2]<<16|c[(c[g+(d<<4)>>2]|0)+12>>2];j=((j+~(j<<15)|0)>>>10^j+~(j<<15))*9|0;j=e+(((((j>>>6^j)+~((j>>>6^j)<<11)|0)>>>16^(j>>>6^j)+~((j>>>6^j)<<11))&(c[b+12>>2]|0)+-1)<<2)|0;c[f+(d<<2)>>2]=c[j>>2];c[j>>2]=d;d=d+1|0}while((d|0)!=(k|0));return}function Ue(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0;j=c[b+12>>2]|0;k=c[b+28>>2]|0;if((k|0)>=(j|0))return;do if((c[b+32>>2]|0)<(j|0)){if(!j){d=0;f=k}else{c[6485]=(c[6485]|0)+1;d=ec((j<<2|3)+16|0)|0;if(!d)d=0;else{c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16}f=c[b+28>>2]|0}g=c[b+36>>2]|0;if((f|0)<=0){if(!g){a[b+40>>0]=1;c[b+36>>2]=d;c[b+32>>2]=j;i=b+36|0;break}}else{e=0;do{c[d+(e<<2)>>2]=c[g+(e<<2)>>2];e=e+1|0}while((e|0)!=(f|0))}if(a[b+40>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0)}a[b+40>>0]=1;c[b+36>>2]=d;c[b+32>>2]=j;i=b+36|0}else{i=b+36|0;d=c[b+36>>2]|0}while(0);uj(d+(k<<2)|0,0,(j<<2)-(k<<2)|0)|0;c[b+28>>2]=j;h=c[b+48>>2]|0;if((h|0)<(j|0)){do if((c[b+52>>2]|0)<(j|0)){if(!j){d=0;f=h}else{c[6485]=(c[6485]|0)+1;d=ec((j<<2|3)+16|0)|0;if(!d)d=0;else{c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16}f=c[b+48>>2]|0}g=c[b+56>>2]|0;if((f|0)<=0){if(!g){a[b+60>>0]=1;c[b+56>>2]=d;c[b+52>>2]=j;break}}else{e=0;do{c[d+(e<<2)>>2]=c[g+(e<<2)>>2];e=e+1|0}while((e|0)!=(f|0))}if(a[b+60>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0)}a[b+60>>0]=1;c[b+56>>2]=d;c[b+52>>2]=j}else d=c[b+56>>2]|0;while(0);uj(d+(h<<2)|0,0,(j<<2)-(h<<2)|0)|0}c[b+48>>2]=j;if((j|0)>0){uj(c[i>>2]|0,-1,j<<2|0)|0;uj(c[b+56>>2]|0,-1,j<<2|0)|0}if((k|0)<=0)return;g=c[b+16>>2]|0;e=c[i>>2]|0;f=c[b+56>>2]|0;d=0;do{j=c[g+(d*12|0)+4>>2]<<16|c[g+(d*12|0)>>2];j=((j+~(j<<15)|0)>>>10^j+~(j<<15))*9|0;j=e+(((((j>>>6^j)+~((j>>>6^j)<<11)|0)>>>16^(j>>>6^j)+~((j>>>6^j)<<11))&(c[b+12>>2]|0)+-1)<<2)|0;c[f+(d<<2)>>2]=c[j>>2];c[j>>2]=d;d=d+1|0}while((d|0)!=(k|0));return}function Ve(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0;e=ub[c[(c[d>>2]|0)+40>>2]&31](d,a)|0;g=ub[c[(c[d>>2]|0)+28>>2]&31](d,e)|0;c[b>>2]=g;if(g|0)Ib[c[(c[d>>2]|0)+48>>2]&127](d,e);c[b+4>>2]=c[a+4>>2];c[b+8>>2]=0;c[b+20>>2]=c[a+76>>2];e=c[a+20>>2]|0;c[b+16>>2]=e;c[b+12>>2]=0;if(!e)return 17332;g=wb[c[(c[d>>2]|0)+16>>2]&63](d,76,e)|0;e=c[g+8>>2]|0;c[b+12>>2]=ub[c[(c[d>>2]|0)+28>>2]&31](d,e)|0;if((c[b+16>>2]|0)>0){f=0;while(1){h=c[a+28>>2]|0;c[e+72>>2]=c[h+(f*80|0)+72>>2];c[e+64>>2]=ub[c[(c[d>>2]|0)+28>>2]&31](d,c[h+(f*80|0)+64>>2]|0)|0;if(!(ub[c[(c[d>>2]|0)+24>>2]&31](d,c[(c[a+28>>2]|0)+(f*80|0)+64>>2]|0)|0)){h=c[(c[d>>2]|0)+16>>2]|0;i=c[(c[a+28>>2]|0)+(f*80|0)+64>>2]|0;i=sb[c[(c[i>>2]|0)+52>>2]&127](i)|0;i=wb[h&63](d,i,1)|0;h=c[(c[a+28>>2]|0)+(f*80|0)+64>>2]|0;h=wb[c[(c[h>>2]|0)+56>>2]&63](h,c[i+8>>2]|0,d)|0;Tb[c[(c[d>>2]|0)+20>>2]&31](d,i,h,1346455635,c[(c[a+28>>2]|0)+(f*80|0)+64>>2]|0)}i=c[a+28>>2]|0;c[e+68>>2]=c[i+(f*80|0)+68>>2];c[e>>2]=c[i+(f*80|0)>>2];c[e+4>>2]=c[i+(f*80|0)+4>>2];c[e+8>>2]=c[i+(f*80|0)+8>>2];c[e+12>>2]=c[i+(f*80|0)+12>>2];c[e+16>>2]=c[i+(f*80|0)+16>>2];c[e+20>>2]=c[i+(f*80|0)+20>>2];c[e+24>>2]=c[i+(f*80|0)+24>>2];c[e+28>>2]=c[i+(f*80|0)+28>>2];c[e+32>>2]=c[i+(f*80|0)+32>>2];c[e+36>>2]=c[i+(f*80|0)+36>>2];c[e+40>>2]=c[i+(f*80|0)+40>>2];c[e+44>>2]=c[i+(f*80|0)+44>>2];c[e+48>>2]=c[i+(f*80|0)+48>>2];c[e+52>>2]=c[i+(f*80|0)+52>>2];c[e+56>>2]=c[i+(f*80|0)+56>>2];c[e+60>>2]=c[i+(f*80|0)+60>>2];f=f+1|0;if((f|0)>=(c[b+16>>2]|0)){e=d;break}else e=e+76|0}}else e=d;Tb[c[(c[e>>2]|0)+20>>2]&31](d,g,17307,1497453121,c[g+8>>2]|0);return 17332}function We(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;if((c[b+8>>2]|0)>=(d|0))return;if((d|0)!=0?(c[6485]=(c[6485]|0)+1,e=ec((d*36|3)+16|0)|0,(e|0)!=0):0){c[(e+4+15&-16)+-4>>2]=e;r=e+4+15&-16}else r=0;n=c[b+4>>2]|0;if((n|0)>0){m=0;do{o=c[b+12>>2]|0;i=r+(m*36|0)+16|0;a[i>>0]=1;j=r+(m*36|0)+12|0;c[j>>2]=0;k=r+(m*36|0)+4|0;c[k>>2]=0;l=r+(m*36|0)+8|0;c[l>>2]=0;p=c[o+(m*36|0)+4>>2]|0;if((p|0)>0){c[6485]=(c[6485]|0)+1;e=ec((p<<2|3)+16|0)|0;if(!e)f=0;else{c[(e+4+15&-16)+-4>>2]=e;f=e+4+15&-16}g=c[k>>2]|0;h=c[j>>2]|0;if((g|0)<=0){if(h|0)q=14}else{e=0;do{c[f+(e<<2)>>2]=c[h+(e<<2)>>2];e=e+1|0}while((e|0)!=(g|0));q=14}if((q|0)==14?(q=0,a[i>>0]|0):0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}a[i>>0]=1;c[j>>2]=f;c[l>>2]=p;uj(f|0,0,p<<2|0)|0;c[k>>2]=p;f=c[j>>2]|0;g=c[o+(m*36|0)+12>>2]|0;e=0;do{c[f+(e<<2)>>2]=c[g+(e<<2)>>2];e=e+1|0}while((e|0)!=(p|0))}else c[k>>2]=p;p=r+(m*36|0)+20|0;o=o+(m*36|0)+20|0;c[p>>2]=c[o>>2];c[p+4>>2]=c[o+4>>2];c[p+8>>2]=c[o+8>>2];c[p+12>>2]=c[o+12>>2];m=m+1|0}while((m|0)!=(n|0));f=c[b+4>>2]|0;if((f|0)>0){e=0;do{h=c[b+12>>2]|0;i=h+(e*36|0)+4|0;j=h+(e*36|0)+12|0;k=c[j>>2]|0;g=h+(e*36|0)+16|0;if(k|0){if(a[g>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}c[j>>2]=0}a[g>>0]=1;c[j>>2]=0;c[i>>2]=0;c[h+(e*36|0)+8>>2]=0;e=e+1|0}while((e|0)!=(f|0))}}e=c[b+12>>2]|0;if(e|0){if(a[b+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[b+12>>2]=0}a[b+16>>0]=1;c[b+12>>2]=r;c[b+8>>2]=d;return}function Xe(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0.0,i=0.0,j=0.0,k=0,m=0,n=0.0,o=0.0,p=0.0,q=0.0;f=l;l=l+256|0;c[f+32>>2]=6984;k=f+32+36|0;c[k>>2]=c[b>>2];c[k+4>>2]=c[b+4>>2];c[k+8>>2]=c[b+8>>2];c[k+12>>2]=c[b+12>>2];m=f+32+52|0;c[m>>2]=c[d>>2];c[m+4>>2]=c[d+4>>2];c[m+8>>2]=c[d+8>>2];c[m+12>>2]=c[d+12>>2];c[f+32+212>>2]=a;c[f+32+216>>2]=e;c[f+32+68>>2]=1065353216;c[f+32+72>>2]=0;c[f+32+72+4>>2]=0;c[f+32+72+8>>2]=0;c[f+32+72+12>>2]=0;c[f+32+88>>2]=1065353216;c[f+32+92>>2]=0;c[f+32+92+4>>2]=0;c[f+32+92+8>>2]=0;c[f+32+92+12>>2]=0;c[f+32+108>>2]=1065353216;c[f+32+112>>2]=0;c[f+32+116>>2]=c[k>>2];c[f+32+116+4>>2]=c[k+4>>2];c[f+32+116+8>>2]=c[k+8>>2];c[f+32+116+12>>2]=c[k+12>>2];c[f+32+132>>2]=1065353216;c[f+32+136>>2]=0;c[f+32+136+4>>2]=0;c[f+32+136+8>>2]=0;c[f+32+136+12>>2]=0;c[f+32+152>>2]=1065353216;c[f+32+156>>2]=0;c[f+32+156+4>>2]=0;c[f+32+156+8>>2]=0;c[f+32+156+12>>2]=0;c[f+32+172>>2]=1065353216;c[f+32+176>>2]=0;c[f+32+180>>2]=c[d>>2];c[f+32+180+4>>2]=c[d+4>>2];c[f+32+180+8>>2]=c[d+8>>2];c[f+32+180+12>>2]=c[d+12>>2];n=+g[d>>2]-+g[b>>2];j=+g[d+4>>2]-+g[b+4>>2];i=+g[d+8>>2]-+g[b+8>>2];h=1.0/+B(+(n*n+j*j+i*i));q=n*h==0.0?999999984306749440.0:1.0/(n*h);g[f+32+4>>2]=q;p=j*h==0.0?999999984306749440.0:1.0/(j*h);g[f+32+8>>2]=p;o=i*h==0.0?999999984306749440.0:1.0/(i*h);g[f+32+12>>2]=o;c[f+32+20>>2]=q<0.0&1;c[f+32+24>>2]=p<0.0&1;c[f+32+28>>2]=o<0.0&1;g[f+32+32>>2]=n*h*(+g[m>>2]-+g[k>>2])+j*h*(+g[f+32+56>>2]-+g[f+32+40>>2])+i*h*(+g[f+32+60>>2]-+g[f+32+44>>2]);e=c[a+68>>2]|0;a=c[(c[e>>2]|0)+24>>2]|0;c[f+16>>2]=0;c[f+16+4>>2]=0;c[f+16+8>>2]=0;c[f+16+12>>2]=0;c[f>>2]=0;c[f+4>>2]=0;c[f+8>>2]=0;c[f+12>>2]=0;Ub[a&7](e,b,d,f+32|0,f+16|0,f);l=f;return}function Ye(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0,j=0,k=0;c[b+8>>2]=0;c[b+12>>2]=-1;c[b>>2]=8424;a[b+32>>0]=1;c[b+28>>2]=0;c[b+20>>2]=0;c[b+24>>2]=0;c[b+36>>2]=1566444395;c[b+40>>2]=1566444395;c[b+44>>2]=1566444395;g[b+48>>2]=0.0;c[b+52>>2]=-581039253;c[b+56>>2]=-581039253;c[b+60>>2]=-581039253;g[b+64>>2]=0.0;c[b+68>>2]=0;c[b+72>>2]=1;g[b+76>>2]=0.0;c[b+80>>2]=1065353216;c[b+84>>2]=1065353216;c[b+88>>2]=1065353216;g[b+92>>2]=0.0;c[b+4>>2]=31;if(d){c[6485]=(c[6485]|0)+1;d=ec(59)|0;if(!d)d=0;else{c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16}a[d+36>>0]=1;c[d+32>>2]=0;c[d+24>>2]=0;c[d+28>>2]=0;c[d>>2]=0;c[d+4>>2]=0;c[d+8>>2]=-1;c[d+12>>2]=0;c[d+16>>2]=0;c[b+68>>2]=d;d=c[b+24>>2]|0}else d=0;if((d|0)>=(e|0))return;if((e|0)!=0?(c[6485]=(c[6485]|0)+1,f=ec((e*80|3)+16|0)|0,(f|0)!=0):0){c[(f+4+15&-16)+-4>>2]=f;h=f+4+15&-16}else h=0;f=c[b+20>>2]|0;if((f|0)>0){d=0;do{i=h+(d*80|0)|0;j=c[b+28>>2]|0;k=j+(d*80|0)|0;c[i>>2]=c[k>>2];c[i+4>>2]=c[k+4>>2];c[i+8>>2]=c[k+8>>2];c[i+12>>2]=c[k+12>>2];i=j+(d*80|0)+16|0;k=h+(d*80|0)+16|0;c[k>>2]=c[i>>2];c[k+4>>2]=c[i+4>>2];c[k+8>>2]=c[i+8>>2];c[k+12>>2]=c[i+12>>2];k=j+(d*80|0)+32|0;i=h+(d*80|0)+32|0;c[i>>2]=c[k>>2];c[i+4>>2]=c[k+4>>2];c[i+8>>2]=c[k+8>>2];c[i+12>>2]=c[k+12>>2];i=h+(d*80|0)+48|0;k=j+(d*80|0)+48|0;c[i>>2]=c[k>>2];c[i+4>>2]=c[k+4>>2];c[i+8>>2]=c[k+8>>2];c[i+12>>2]=c[k+12>>2];i=h+(d*80|0)+64|0;j=j+(d*80|0)+64|0;c[i>>2]=c[j>>2];c[i+4>>2]=c[j+4>>2];c[i+8>>2]=c[j+8>>2];c[i+12>>2]=c[j+12>>2];d=d+1|0}while((d|0)!=(f|0))}d=c[b+28>>2]|0;if(d|0){if(a[b+32>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+28>>2]=0}a[b+32>>0]=1;c[b+28>>2]=h;c[b+24>>2]=e;return}function Ze(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0;Db[c[(c[b>>2]|0)+32>>2]&255](b);e=wb[c[(c[b>>2]|0)+16>>2]&63](b,104,1)|0;d=c[e+8>>2]|0;f=d;g=f+104|0;do{c[f>>2]=0;f=f+4|0}while((f|0)<(g|0));c[d+88>>2]=c[a+264>>2];c[d+92>>2]=c[a+268>>2];c[d+96>>2]=c[a+272>>2];c[d+100>>2]=c[a+276>>2];c[d>>2]=c[a+92>>2];c[d+4>>2]=c[a+96>>2];c[d+8>>2]=c[a+100>>2];c[d+12>>2]=c[a+104>>2];c[d+16>>2]=c[a+108>>2];c[d+20>>2]=c[a+116>>2];c[d+24>>2]=c[a+120>>2];c[d+28>>2]=c[a+124>>2];c[d+32>>2]=c[a+128>>2];c[d+36>>2]=c[a+132>>2];c[d+40>>2]=c[a+148>>2];c[d+44>>2]=c[a+152>>2];c[d+48>>2]=c[a+156>>2];c[d+52>>2]=c[a+160>>2];c[d+56>>2]=c[a+176>>2];c[d+60>>2]=c[a+180>>2];c[d+64>>2]=c[a+112>>2];c[d+68>>2]=c[a+164>>2];c[d+72>>2]=c[a+168>>2];c[d+76>>2]=c[a+172>>2];c[d+80>>2]=c[a+144>>2];c[d+84>>2]=0;Tb[c[(c[b>>2]|0)+20>>2]&31](b,e,13282,1145853764,d);Zc(a,b);d=c[a+8>>2]|0;if((d|0)>0){f=0;do{e=c[(c[a+16>>2]|0)+(f<<2)>>2]|0;if(c[e+252>>2]&2){g=sb[c[(c[e>>2]|0)+16>>2]&127](e)|0;g=wb[c[(c[b>>2]|0)+16>>2]&63](b,g,1)|0;d=wb[c[(c[e>>2]|0)+20>>2]&63](e,c[g+8>>2]|0,b)|0;Tb[c[(c[b>>2]|0)+20>>2]&31](b,g,d,1497645650,e);d=c[a+8>>2]|0}f=f+1|0}while((f|0)<(d|0))}if((c[a+228>>2]|0)<=0){a=c[b>>2]|0;a=a+36|0;a=c[a>>2]|0;Db[a&255](b);return}d=0;do{g=c[(c[a+236>>2]|0)+(d<<2)>>2]|0;e=sb[c[(c[g>>2]|0)+36>>2]&127](g)|0;e=wb[c[(c[b>>2]|0)+16>>2]&63](b,e,1)|0;f=wb[c[(c[g>>2]|0)+40>>2]&63](g,c[e+8>>2]|0,b)|0;Tb[c[(c[b>>2]|0)+20>>2]&31](b,e,f,1397641027,g);d=d+1|0}while((d|0)<(c[a+228>>2]|0));a=c[b>>2]|0;a=a+36|0;a=c[a>>2]|0;Db[a&255](b);return}function _e(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0,j=0,k=0,m=0,n=0,o=0.0,p=0;k=l;l=l+160|0;i=c[b+12>>2]|0;if(!i){l=k;return}m=(a[b+16>>0]|0)!=0;n=m?e:d;e=m?d:e;p=c[n+4>>2]|0;d=c[e+4>>2]|0;c[h+4>>2]=i;o=+g[i+784>>2]+ +g[h+32>>2];c[k+136>>2]=7816;c[k+136+4>>2]=p;c[k+136+8>>2]=d;g[k+136+12>>2]=o;g[k+128>>2]=999999984306749440.0;i=c[n+12>>2]|0;c[k>>2]=c[i>>2];c[k+4>>2]=c[i+4>>2];c[k+8>>2]=c[i+8>>2];c[k+12>>2]=c[i+12>>2];c[k+16>>2]=c[i+16>>2];c[k+16+4>>2]=c[i+16+4>>2];c[k+16+8>>2]=c[i+16+8>>2];c[k+16+12>>2]=c[i+16+12>>2];c[k+32>>2]=c[i+32>>2];c[k+32+4>>2]=c[i+32+4>>2];c[k+32+8>>2]=c[i+32+8>>2];c[k+32+12>>2]=c[i+32+12>>2];c[k+48>>2]=c[i+48>>2];c[k+48+4>>2]=c[i+48+4>>2];c[k+48+8>>2]=c[i+48+8>>2];c[k+48+12>>2]=c[i+48+12>>2];i=c[e+12>>2]|0;c[k+64>>2]=c[i>>2];c[k+64+4>>2]=c[i+4>>2];c[k+64+8>>2]=c[i+8>>2];c[k+64+12>>2]=c[i+12>>2];c[k+80>>2]=c[i+16>>2];c[k+80+4>>2]=c[i+16+4>>2];c[k+80+8>>2]=c[i+16+8>>2];c[k+80+12>>2]=c[i+16+12>>2];c[k+96>>2]=c[i+32>>2];c[k+96+4>>2]=c[i+32+4>>2];c[k+96+8>>2]=c[i+32+8>>2];c[k+96+12>>2]=c[i+32+12>>2];c[k+112>>2]=c[i+48>>2];c[k+112+4>>2]=c[i+48+4>>2];c[k+112+8>>2]=c[i+48+8>>2];c[k+112+12>>2]=c[i+48+12>>2];wd(k+136|0,k,h,c[f+20>>2]|0,m);do if(a[b+8>>0]|0?(j=c[h+4>>2]|0,c[j+780>>2]|0):0){b=c[j+772>>2]|0;d=c[(c[h+8>>2]|0)+8>>2]|0;if((b|0)==(d|0)){te(j,b+4|0,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0);break}else{te(j,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0,d+4|0);break}}while(0);l=k;return}function $e(b){b=b|0;var d=0;c[b>>2]=5804;d=c[b+204>>2]|0;if(d|0){if(a[b+208>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+204>>2]=0}a[b+208>>0]=1;c[b+204>>2]=0;c[b+196>>2]=0;c[b+200>>2]=0;d=c[b+176>>2]|0;if(d|0){if(a[b+180>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+176>>2]=0}a[b+180>>0]=1;c[b+176>>2]=0;c[b+168>>2]=0;c[b+172>>2]=0;d=c[b+156>>2]|0;if(d|0){if(a[b+160>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+156>>2]=0}a[b+160>>0]=1;c[b+156>>2]=0;c[b+148>>2]=0;c[b+152>>2]=0;d=c[b+136>>2]|0;if(d|0){if(a[b+140>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+136>>2]=0}a[b+140>>0]=1;c[b+136>>2]=0;c[b+128>>2]=0;c[b+132>>2]=0;d=c[b+116>>2]|0;if(d|0){if(a[b+120>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+116>>2]=0}a[b+120>>0]=1;c[b+116>>2]=0;c[b+108>>2]=0;c[b+112>>2]=0;d=c[b+96>>2]|0;if(d|0){if(a[b+100>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+96>>2]=0}a[b+100>>0]=1;c[b+96>>2]=0;c[b+88>>2]=0;c[b+92>>2]=0;d=c[b+76>>2]|0;if(d|0){if(a[b+80>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+76>>2]=0}a[b+80>>0]=1;c[b+76>>2]=0;c[b+68>>2]=0;c[b+72>>2]=0;d=c[b+56>>2]|0;if(d|0){if(a[b+60>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+56>>2]=0}a[b+60>>0]=1;c[b+56>>2]=0;c[b+48>>2]=0;c[b+52>>2]=0;d=c[b+36>>2]|0;if(d|0){if(a[b+40>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+36>>2]=0}a[b+40>>0]=1;c[b+36>>2]=0;c[b+28>>2]=0;c[b+32>>2]=0;d=c[b+16>>2]|0;if(!d){a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;b=b+12|0;c[b>>2]=0;return}if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+16>>2]=0;a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;b=b+12|0;c[b>>2]=0;return}function af(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0;e=c[a+56>>2]|0;if(!e){e=c[a+52>>2]|0;if(!e){c[6485]=(c[6485]|0)+1;e=ec(31)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}f=c[a+60>>2]|0;c[e+4>>2]=f;g=e+8|0;c[g>>2]=0;c[6485]=(c[6485]|0)+1;f=ec((f*24|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}c[e>>2]=f;c[g>>2]=c[a+48>>2];c[a+48>>2]=e}else c[a+52>>2]=c[e+8>>2];h=c[e>>2]|0;g=c[e+4>>2]|0;if((g|0)>0?(c[h>>2]=(g|0)!=1?h+24|0:0,(g|0)!=1):0){e=1;f=h+24|0;do{e=e+1|0;i=(e|0)<(g|0);j=f;f=f+24|0;c[j>>2]=i?f:0}while(i)}}else h=e;c[a+56>>2]=c[h>>2];c[h>>2]=0;c[h+4>>2]=0;c[h+8>>2]=0;c[h+12>>2]=0;c[h+16>>2]=0;c[h+20>>2]=0;e=c[a+56>>2]|0;if(!e){e=c[a+52>>2]|0;if(!e){c[6485]=(c[6485]|0)+1;e=ec(31)|0;if(!e)f=0;else{c[(e+4+15&-16)+-4>>2]=e;f=e+4+15&-16}e=c[a+60>>2]|0;c[f+4>>2]=e;g=f+8|0;c[g>>2]=0;c[6485]=(c[6485]|0)+1;e=ec((e*24|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}c[f>>2]=e;c[g>>2]=c[a+48>>2];c[a+48>>2]=f}else{c[a+52>>2]=c[e+8>>2];f=e}e=c[f>>2]|0;i=c[f+4>>2]|0;if((i|0)>0?(c[e>>2]=(i|0)!=1?e+24|0:0,(i|0)!=1):0){f=1;g=e+24|0;do{f=f+1|0;j=(f|0)<(i|0);k=g;g=g+24|0;c[k>>2]=j?g:0}while(j)}}c[a+56>>2]=c[e>>2];k=e;c[k>>2]=0;c[k+4>>2]=0;c[h+8>>2]=e;c[e+8>>2]=h;k=c[a+100>>2]|0;c[h+20>>2]=k;c[e+20>>2]=k;c[h+12>>2]=d;c[e+12>>2]=b;c[h+16>>2]=0;c[e+16>>2]=0;e=c[a+116>>2]|0;c[a+116>>2]=e+1;if((e|0)<(c[a+120>>2]|0))return h|0;c[a+120>>2]=e+1;return h|0}function bf(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0;d=l;l=l+128|0;F=c[(c[a+8>>2]|0)+28>>2]|0;f=c[F+(b*80|0)+64>>2]|0;e=c[a+12>>2]|0;w=+g[F+(b*80|0)>>2];C=+g[e>>2];v=+g[F+(b*80|0)+16>>2];B=+g[e+4>>2];u=+g[F+(b*80|0)+32>>2];A=+g[e+8>>2];t=+g[F+(b*80|0)+4>>2];s=+g[F+(b*80|0)+20>>2];r=+g[F+(b*80|0)+36>>2];q=+g[F+(b*80|0)+8>>2];o=+g[F+(b*80|0)+24>>2];m=+g[F+(b*80|0)+40>>2];z=+g[e+16>>2];y=+g[e+20>>2];x=+g[e+24>>2];p=+g[e+32>>2];n=+g[e+36>>2];k=+g[e+40>>2];E=+g[F+(b*80|0)+48>>2];D=+g[F+(b*80|0)+52>>2];h=+g[F+(b*80|0)+56>>2];j=+g[e+48>>2]+(C*E+B*D+A*h);i=z*E+y*D+x*h+ +g[e+52>>2];h=p*E+n*D+k*h+ +g[e+56>>2];g[d+56>>2]=w*C+v*B+u*A;g[d+56+4>>2]=C*t+B*s+A*r;g[d+56+8>>2]=C*q+B*o+A*m;g[d+56+12>>2]=0.0;g[d+56+16>>2]=w*z+v*y+u*x;g[d+56+20>>2]=t*z+s*y+r*x;g[d+56+24>>2]=q*z+o*y+m*x;g[d+56+28>>2]=0.0;g[d+56+32>>2]=w*p+v*n+u*k;g[d+56+36>>2]=t*p+s*n+r*k;g[d+56+40>>2]=q*p+o*n+m*k;g[d+56+44>>2]=0.0;g[d+56+48>>2]=j;g[d+56+52>>2]=i;g[d+56+56>>2]=h;g[d+56+60>>2]=0.0;e=c[a+4>>2]|0;c[d+32>>2]=0;c[d+32+4>>2]=f;c[d+32+8>>2]=e;c[d+32+12>>2]=d+56;c[d+32+16>>2]=-1;c[d+32+20>>2]=b;e=c[a+24>>2]|0;g[d+4>>2]=1.0;c[d+8>>2]=0;c[d+12>>2]=1;c[d+16>>2]=-1;c[d+20>>2]=0;c[d>>2]=7116;c[d+24>>2]=e;c[d+28>>2]=b;c[d+4>>2]=c[e+4>>2];c[d+20>>2]=c[e+20>>2];Ac(c[a+16>>2]|0,c[a+20>>2]|0,d+32|0,d);l=d;return}function cf(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0.0,i=0,j=0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0;i=l;l=l+80|0;h=+ib[c[(c[a>>2]|0)+48>>2]&15](a);f=0;do{q=i+64+(f<<2)|0;c[i+64>>2]=0;c[i+64+4>>2]=0;c[i+64+8>>2]=0;c[i+64+12>>2]=0;g[q>>2]=1.0;j=c[(c[a>>2]|0)+64>>2]|0;k=+g[i+64>>2];m=+g[i+64+4>>2];n=+g[i+64+8>>2];o=k*+g[b+4>>2]+m*+g[b+20>>2]+n*+g[b+36>>2];p=k*+g[b+8>>2]+m*+g[b+24>>2]+n*+g[b+40>>2];g[i+32>>2]=+g[b>>2]*k+ +g[b+16>>2]*m+ +g[b+32>>2]*n;g[i+32+4>>2]=o;g[i+32+8>>2]=p;g[i+32+12>>2]=0.0;Mb[j&127](i+48|0,a,i+32|0);p=+g[i+48>>2];o=+g[i+48+4>>2];n=+g[i+48+8>>2];m=p*+g[b+16>>2]+o*+g[b+20>>2]+n*+g[b+24>>2]+ +g[b+52>>2];k=p*+g[b+32>>2]+o*+g[b+36>>2]+n*+g[b+40>>2]+ +g[b+56>>2];g[i+32>>2]=p*+g[b>>2]+o*+g[b+4>>2]+n*+g[b+8>>2]+ +g[b+48>>2];g[i+32+4>>2]=m;g[i+32+8>>2]=k;g[i+32+12>>2]=0.0;j=i+32+(f<<2)|0;g[e+(f<<2)>>2]=h+ +g[j>>2];g[q>>2]=-1.0;q=c[(c[a>>2]|0)+64>>2]|0;k=+g[i+64>>2];m=+g[i+64+4>>2];n=+g[i+64+8>>2];o=k*+g[b+4>>2]+m*+g[b+20>>2]+n*+g[b+36>>2];p=k*+g[b+8>>2]+m*+g[b+24>>2]+n*+g[b+40>>2];g[i>>2]=+g[b>>2]*k+ +g[b+16>>2]*m+ +g[b+32>>2]*n;g[i+4>>2]=o;g[i+8>>2]=p;g[i+12>>2]=0.0;Mb[q&127](i+16|0,a,i);p=+g[i+16>>2];o=+g[i+16+4>>2];n=+g[i+16+8>>2];m=p*+g[b+16>>2]+o*+g[b+20>>2]+n*+g[b+24>>2]+ +g[b+52>>2];k=p*+g[b+32>>2]+o*+g[b+36>>2]+n*+g[b+40>>2]+ +g[b+56>>2];g[i+32>>2]=p*+g[b>>2]+o*+g[b+4>>2]+n*+g[b+8>>2]+ +g[b+48>>2];g[i+32+4>>2]=m;g[i+32+8>>2]=k;g[i+32+12>>2]=0.0;g[d+(f<<2)>>2]=+g[j>>2]-h;f=f+1|0}while((f|0)!=3);l=i;return}function df(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0,j=0,k=0,m=0,n=0;k=l;l=l+144|0;i=c[b+12>>2]|0;if(!i){l=k;return}n=c[d+4>>2]|0;m=c[e+4>>2]|0;c[h+4>>2]=i;g[k+12+128>>2]=999999984306749440.0;i=c[d+12>>2]|0;c[k+12>>2]=c[i>>2];c[k+12+4>>2]=c[i+4>>2];c[k+12+8>>2]=c[i+8>>2];c[k+12+12>>2]=c[i+12>>2];c[k+12+16>>2]=c[i+16>>2];c[k+12+16+4>>2]=c[i+16+4>>2];c[k+12+16+8>>2]=c[i+16+8>>2];c[k+12+16+12>>2]=c[i+16+12>>2];c[k+12+32>>2]=c[i+32>>2];c[k+12+32+4>>2]=c[i+32+4>>2];c[k+12+32+8>>2]=c[i+32+8>>2];c[k+12+32+12>>2]=c[i+32+12>>2];c[k+12+48>>2]=c[i+48>>2];c[k+12+48+4>>2]=c[i+48+4>>2];c[k+12+48+8>>2]=c[i+48+8>>2];c[k+12+48+12>>2]=c[i+48+12>>2];i=c[e+12>>2]|0;c[k+12+64>>2]=c[i>>2];c[k+12+64+4>>2]=c[i+4>>2];c[k+12+64+8>>2]=c[i+8>>2];c[k+12+64+12>>2]=c[i+12>>2];c[k+12+80>>2]=c[i+16>>2];c[k+12+80+4>>2]=c[i+16+4>>2];c[k+12+80+8>>2]=c[i+16+8>>2];c[k+12+80+12>>2]=c[i+16+12>>2];c[k+12+96>>2]=c[i+32>>2];c[k+12+96+4>>2]=c[i+32+4>>2];c[k+12+96+8>>2]=c[i+32+8>>2];c[k+12+96+12>>2]=c[i+32+12>>2];c[k+12+112>>2]=c[i+48>>2];c[k+12+112+4>>2]=c[i+48+4>>2];c[k+12+112+8>>2]=c[i+48+8>>2];c[k+12+112+12>>2]=c[i+48+12>>2];c[k>>2]=10560;c[k+4>>2]=n;c[k+8>>2]=m;bc(k,k+12|0,h,c[f+20>>2]|0,0);do if(a[b+8>>0]|0?(j=c[h+4>>2]|0,c[j+780>>2]|0):0){b=c[j+772>>2]|0;d=c[(c[h+8>>2]|0)+8>>2]|0;if((b|0)==(d|0)){te(j,b+4|0,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0);break}else{te(j,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0,d+4|0);break}}while(0);l=k;return}function ef(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0,H=0.0,I=0;I=l;l=l+32|0;j=+g[b+16>>2];f=+g[b>>2];k=+g[b+20>>2];h=+g[b+4>>2];n=+g[b+24>>2];i=+g[b+8>>2];r=+g[b+32>>2];v=+g[b+36>>2];w=+g[b+40>>2];C=(k-h)*(w-i)-(n-i)*(v-h);D=(n-i)*(r-f)-(j-f)*(w-i);E=(j-f)*(v-h)-(k-h)*(r-f);g[I+16>>2]=C;g[I+16+4>>2]=D;g[I+16+8>>2]=E;g[I+16+12>>2]=0.0;o=+g[a+4>>2];s=+g[a+8>>2];x=+g[a+12>>2];F=C*o+D*s+E*x-(i*E+(f*C+h*D));p=+g[a+20>>2];t=+g[a+24>>2];y=+g[a+28>>2];if(F*(C*p+D*t+E*y-(i*E+(f*C+h*D)))>=0.0){l=I;return}G=c[a+36>>2]|0;if(F<=0.0&(G&1|0)!=0){l=I;return}H=F/(F-(C*p+D*t+E*y-(i*E+(f*C+h*D))));if(!(H<+g[a+40>>2])){l=I;return}A=(E*E+(C*C+D*D))*-9.999999747378752e-05;z=f-(p*H+o*(1.0-H));u=h-(t*H+s*(1.0-H));q=i-(y*H+x*(1.0-H));m=j-(p*H+o*(1.0-H));k=k-(t*H+s*(1.0-H));j=n-(y*H+x*(1.0-H));if(!(E*(k*z-u*m)+(C*(u*j-q*k)+D*(q*m-j*z))>=A)){l=I;return}i=r-(p*H+o*(1.0-H));h=v-(t*H+s*(1.0-H));f=w-(y*H+x*(1.0-H));if(!(E*(h*m-k*i)+(C*(k*f-j*h)+D*(j*i-f*m))>=A)){l=I;return}if(!(E*(u*i-h*z)+(C*(h*q-f*u)+D*(f*z-q*i))>=A)){l=I;return}f=1.0/+B(+(E*E+(C*C+D*D)));g[I+16>>2]=C*f;g[I+16+4>>2]=D*f;g[I+16+8>>2]=E*f;b=c[(c[a>>2]|0)+12>>2]|0;if(F<=0.0&(G&2|0)==0){g[I>>2]=-(C*f);g[I+4>>2]=-(D*f);g[I+8>>2]=-(E*f);g[I+12>>2]=0.0;g[a+40>>2]=+kb[b&3](a,I,H,d,e);l=I;return}else{g[a+40>>2]=+kb[b&3](a,I+16|0,H,d,e);l=I;return}}function ff(b,d,e,f,g,h,i,j){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;var k=0,m=0;m=l;l=l+48|0;c[6485]=(c[6485]|0)+1;f=ec(83)|0;if(!f)k=0;else{c[(f+4+15&-16)+-4>>2]=f;k=f+4+15&-16}c[k>>2]=g;c[k+4>>2]=h;c[k+8>>2]=i;h=k+16|0;c[h>>2]=c[d>>2];c[h+4>>2]=c[d+4>>2];c[h+8>>2]=c[d+8>>2];c[h+12>>2]=c[d+12>>2];h=k+32|0;c[h>>2]=c[e>>2];c[h+4>>2]=c[e+4>>2];c[h+8>>2]=c[e+8>>2];c[h+12>>2]=c[e+12>>2];h=k+56|0;c[h>>2]=0;i=k+52|0;c[i>>2]=0;c[m+16>>2]=c[d>>2];c[m+16+4>>2]=c[d+4>>2];c[m+16+8>>2]=c[d+8>>2];c[m+16+12>>2]=c[d+12>>2];c[m+16+16>>2]=c[e>>2];c[m+16+16+4>>2]=c[e+4>>2];c[m+16+16+8>>2]=c[e+8>>2];c[m+16+16+12>>2]=c[e+12>>2];c[k+60>>2]=c[b+104>>2];f=(c[b+148>>2]|0)+1|0;c[b+148>>2]=f;c[k+12>>2]=f;f=c[b+8>>2]|0;if(!f){c[6485]=(c[6485]|0)+1;f=ec(63)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}j=f;g=j+44|0;do{c[j>>2]=0;j=j+4|0}while((j|0)<(g|0))}else c[b+8>>2]=0;c[f+32>>2]=0;c[f+36>>2]=k;c[f+40>>2]=0;c[f>>2]=c[m+16>>2];c[f+4>>2]=c[m+16+4>>2];c[f+8>>2]=c[m+16+8>>2];c[f+12>>2]=c[m+16+12>>2];c[f+16>>2]=c[m+16+16>>2];c[f+20>>2]=c[m+16+20>>2];c[f+24>>2]=c[m+16+24>>2];c[f+28>>2]=c[m+16+28>>2];ue(b+4|0,c[b+4>>2]|0,f);c[b+16>>2]=(c[b+16>>2]|0)+1;c[k+48>>2]=f;j=b+84+(c[b+104>>2]<<2)|0;c[i>>2]=0;c[h>>2]=c[j>>2];f=c[j>>2]|0;if(f|0)c[f+52>>2]=k;c[j>>2]=k;if(a[b+153>>0]|0){l=m;return k|0}c[m>>2]=6572;c[m+4>>2]=b;c[m+8>>2]=k;Ke(c[b+4>>2]|0,m+16|0,m);Ke(c[b+44>>2]|0,m+16|0,m);l=m;return k|0}function gf(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0;f=Xq()|0;ni(f,4,b);c[f>>2]=5692;c[f+552>>2]=c[d>>2];c[f+552+4>>2]=c[d+4>>2];c[f+552+8>>2]=c[d+8>>2];c[f+552+12>>2]=c[d+12>>2];c[f+568>>2]=c[d+16>>2];c[f+568+4>>2]=c[d+16+4>>2];c[f+568+8>>2]=c[d+16+8>>2];c[f+568+12>>2]=c[d+16+12>>2];c[f+584>>2]=c[d+32>>2];c[f+584+4>>2]=c[d+32+4>>2];c[f+584+8>>2]=c[d+32+8>>2];c[f+584+12>>2]=c[d+32+12>>2];c[f+600>>2]=c[d+48>>2];c[f+600+4>>2]=c[d+48+4>>2];c[f+600+8>>2]=c[d+48+8>>2];c[f+600+12>>2]=c[d+48+12>>2];c[f+616>>2]=c[d>>2];c[f+616+4>>2]=c[d+4>>2];c[f+616+8>>2]=c[d+8>>2];c[f+616+12>>2]=c[d+12>>2];c[f+632>>2]=c[d+16>>2];c[f+632+4>>2]=c[d+16+4>>2];c[f+632+8>>2]=c[d+16+8>>2];c[f+632+12>>2]=c[d+16+12>>2];c[f+648>>2]=c[d+32>>2];c[f+648+4>>2]=c[d+32+4>>2];c[f+648+8>>2]=c[d+32+8>>2];c[f+648+12>>2]=c[d+32+12>>2];c[f+664>>2]=c[d+48>>2];c[f+664+4>>2]=c[d+48+4>>2];c[f+664+8>>2]=c[d+48+8>>2];c[f+664+12>>2]=c[d+48+12>>2];g[f+688>>2]=0.0;g[f+692>>2]=-1.0;g[f+696>>2]=.8999999761581421;g[f+700>>2]=.30000001192092896;g[f+704>>2]=1.0;g[f+708>>2]=0.0;g[f+712>>2]=0.0;a[f+716>>0]=0;a[f+736>>0]=0;a[f+737>>0]=0;a[f+738>>0]=0;a[f+739>>0]=1;a[f+740>>0]=e&1;c[f+748>>2]=0;c[f+748+4>>2]=0;c[f+748+8>>2]=0;c[f+748+12>>2]=0;c[f+748+16>>2]=0;d=c[f+28>>2]|0;l=+g[f+600>>2];k=+g[f+604>>2];j=+g[f+608>>2];i=l*+g[d+20>>2]+k*+g[d+24>>2]+j*+g[d+28>>2]+ +g[d+56>>2];h=l*+g[d+36>>2]+k*+g[d+40>>2]+j*+g[d+44>>2]+ +g[d+60>>2];g[f+664>>2]=l*+g[d+4>>2]+k*+g[d+8>>2]+j*+g[d+12>>2]+ +g[d+52>>2];g[f+668>>2]=i;g[f+672>>2]=h;g[f+676>>2]=0.0;g[f+732>>2]=e?-1.0:1.0;return f|0}function hf(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0;i=l;l=l+64|0;h=c[a+28>>2]|0;c[h+(b*80|0)>>2]=c[d>>2];c[h+(b*80|0)+4>>2]=c[d+4>>2];c[h+(b*80|0)+8>>2]=c[d+8>>2];c[h+(b*80|0)+12>>2]=c[d+12>>2];c[h+(b*80|0)+16>>2]=c[d+16>>2];c[h+(b*80|0)+16+4>>2]=c[d+16+4>>2];c[h+(b*80|0)+16+8>>2]=c[d+16+8>>2];c[h+(b*80|0)+16+12>>2]=c[d+16+12>>2];c[h+(b*80|0)+32>>2]=c[d+32>>2];c[h+(b*80|0)+32+4>>2]=c[d+32+4>>2];c[h+(b*80|0)+32+8>>2]=c[d+32+8>>2];c[h+(b*80|0)+32+12>>2]=c[d+32+12>>2];c[h+(b*80|0)+48>>2]=c[d+48>>2];c[h+(b*80|0)+48+4>>2]=c[d+48+4>>2];c[h+(b*80|0)+48+8>>2]=c[d+48+8>>2];c[h+(b*80|0)+48+12>>2]=c[d+48+12>>2];if(!(c[a+68>>2]|0)){h=c[a>>2]|0;h=h+68|0;h=c[h>>2]|0;Db[h&255](a);l=i;return}h=c[(c[a+28>>2]|0)+(b*80|0)+64>>2]|0;Pb[c[(c[h>>2]|0)+8>>2]&127](h,d,i+48|0,i+32|0);c[i>>2]=c[i+48>>2];c[i+4>>2]=c[i+48+4>>2];c[i+8>>2]=c[i+48+8>>2];c[i+12>>2]=c[i+48+12>>2];c[i+16>>2]=c[i+32>>2];c[i+16+4>>2]=c[i+32+4>>2];c[i+16+8>>2]=c[i+32+8>>2];c[i+16+12>>2]=c[i+32+12>>2];h=c[a+68>>2]|0;g=c[(c[a+28>>2]|0)+(b*80|0)+76>>2]|0;d=fg(h,g)|0;a:do if(d){f=c[h+8>>2]|0;if((f|0)<=-1){d=c[h>>2]|0;break}if(f){b=0;while(1){e=c[d+32>>2]|0;b=b+1|0;if(!e)break a;if((b|0)>=(f|0)){d=e;break}else d=e}}}else d=0;while(0);c[g>>2]=c[i>>2];c[g+4>>2]=c[i+4>>2];c[g+8>>2]=c[i+8>>2];c[g+12>>2]=c[i+12>>2];c[g+16>>2]=c[i+16>>2];c[g+20>>2]=c[i+20>>2];c[g+24>>2]=c[i+24>>2];c[g+28>>2]=c[i+28>>2];ue(h,d,g);h=c[a>>2]|0;h=h+68|0;h=c[h>>2]|0;Db[h&255](a);l=i;return}function jf(b,d,e,f,h,i,j,k,m){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;m=m|0;var n=0,o=0,p=0,q=0,r=0;r=l;l=l+80|0;g[r+16+60>>2]=0.0;g[r+16+8>>2]=0.0;g[r+16+12>>2]=.10000000149011612;g[r+16+16>>2]=300.0;g[r+16>>2]=1.0;g[r+16+4>>2]=-1.0;g[r+16+28>>2]=0.0;g[r+16+32>>2]=.20000000298023224;g[r+16+36>>2]=0.0;g[r+16+40>>2]=0.0;g[r+16+20>>2]=1.0;g[r+16+24>>2]=.5;c[r+16+56>>2]=0;g[r+16+48>>2]=0.0;a[r+16+44>>0]=0;p=0;do{o=c[b+856+(p<<2)>>2]|0;n=a[b+788+p>>0]|0;if(!o){if(n<<24>>24){n=1;q=5}}else q=5;if((q|0)==5){q=0;g[r+16+40>>2]=0.0;c[r+16+56>>2]=o;c[r+16+52>>2]=c[b+840+(p<<2)>>2];c[r+16+48>>2]=c[b+824+(p<<2)>>2];c[r+16+20>>2]=c[b+732>>2];a[r+16+44>>0]=n;c[r+16+4>>2]=c[b+696+(p<<2)>>2];c[r+16+24>>2]=c[b+728>>2];c[r+16>>2]=c[b+680+(p<<2)>>2];g[r+16+16>>2]=0.0;c[r+16+12>>2]=c[b+808+(p<<2)>>2];c[r+16+8>>2]=c[b+792+(p<<2)>>2];c[r>>2]=c[b+1064+(p<<2)>>2];c[r+4>>2]=c[b+1080+(p<<2)>>2];c[r+8>>2]=c[b+1096+(p<<2)>>2];g[r+12>>2]=0.0;o=c[b+1304>>2]>>p*3;if(!(o&1))n=c[d+32>>2]|0;else n=b+740+(p<<2)|0;c[r+16+28>>2]=c[n>>2];if(!(o&2))n=c[d+32>>2]|0;else n=b+772+(p<<2)|0;c[r+16+36>>2]=c[n>>2];c[r+16+32>>2]=c[((o&4|0)==0?d+4|0:b+756+(p<<2)|0)>>2];if(a[b+1301>>0]|0){o=p+1|0;if(!(c[b+868+(((o|0)==3?0:o)<<6)+56>>2]|0))n=1;else n=(c[b+868+((((p+2|0)>>>0)%3|0)<<6)+56>>2]|0)==0&1}else n=0;e=(fd(b,r+16|0,f,h,i,j,k,m,d,e,r,0,n)|0)+e|0}p=p+1|0}while((p|0)!=3);l=r;return e|0}function kf(b,d){b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0,l=0,m=0;e=+g[b+1192+(d<<2)>>2];i=+g[b+868+(d<<6)>>2];j=+g[b+868+(d<<6)+4>>2];do if(!(i>=j)){if(e<i){if(!((i-e)%6.2831854820251465<-3.1415927410125732))if((i-e)%6.2831854820251465>3.1415927410125732)f=(i-e)%6.2831854820251465+-6.2831854820251465;else f=(i-e)%6.2831854820251465;else f=(i-e)%6.2831854820251465+6.2831854820251465;h=+A(+f);if(!((j-e)%6.2831854820251465<-3.1415927410125732))if((j-e)%6.2831854820251465>3.1415927410125732)f=(j-e)%6.2831854820251465+-6.2831854820251465;else f=(j-e)%6.2831854820251465;else f=(j-e)%6.2831854820251465+6.2831854820251465;m=h<+A(+f);e=m?e:e+6.2831854820251465;break}if(e>j){if(!((e-j)%6.2831854820251465<-3.1415927410125732))if((e-j)%6.2831854820251465>3.1415927410125732)f=(e-j)%6.2831854820251465+-6.2831854820251465;else f=(e-j)%6.2831854820251465;else f=(e-j)%6.2831854820251465+6.2831854820251465;h=+A(+f);if(!((e-i)%6.2831854820251465<-3.1415927410125732))if((e-i)%6.2831854820251465>3.1415927410125732)f=(e-i)%6.2831854820251465+-6.2831854820251465;else f=(e-i)%6.2831854820251465;else f=(e-i)%6.2831854820251465+6.2831854820251465;m=+A(+f)<h;e=m?e+-6.2831854820251465:e}}while(0);g[b+868+(d<<6)+52>>2]=e;do if(!(i>j)){if(i>e){c[b+868+(d<<6)+56>>2]=1;e=e-i;g[b+868+(d<<6)+48>>2]=e;if(e>3.1415927410125732){g[b+868+(d<<6)+48>>2]=e+-6.2831854820251465;break}if(!(e<-3.1415927410125732))break;g[b+868+(d<<6)+48>>2]=e+6.2831854820251465;break}if(j<e){c[b+868+(d<<6)+56>>2]=2;e=e-j;g[b+868+(d<<6)+48>>2]=e;if(e>3.1415927410125732){g[b+868+(d<<6)+48>>2]=e+-6.2831854820251465;break}if(e<-3.1415927410125732)g[b+868+(d<<6)+48>>2]=e+6.2831854820251465}else{k=b+868+(d<<6)+56|0;l=34}}else{k=b+868+(d<<6)+56|0;l=34}while(0);if((l|0)==34?(c[k>>2]=0,(a[b+868+(d<<6)+44>>0]|0)==0):0){m=0;return m|0}m=1;return m|0}function lf(b,d){b=b|0;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0;e=Xq()|0;ni(e,4,b);c[e>>2]=5692;c[e+552>>2]=c[d>>2];c[e+552+4>>2]=c[d+4>>2];c[e+552+8>>2]=c[d+8>>2];c[e+552+12>>2]=c[d+12>>2];c[e+568>>2]=c[d+16>>2];c[e+568+4>>2]=c[d+16+4>>2];c[e+568+8>>2]=c[d+16+8>>2];c[e+568+12>>2]=c[d+16+12>>2];c[e+584>>2]=c[d+32>>2];c[e+584+4>>2]=c[d+32+4>>2];c[e+584+8>>2]=c[d+32+8>>2];c[e+584+12>>2]=c[d+32+12>>2];c[e+600>>2]=c[d+48>>2];c[e+600+4>>2]=c[d+48+4>>2];c[e+600+8>>2]=c[d+48+8>>2];c[e+600+12>>2]=c[d+48+12>>2];c[e+616>>2]=c[d>>2];c[e+616+4>>2]=c[d+4>>2];c[e+616+8>>2]=c[d+8>>2];c[e+616+12>>2]=c[d+12>>2];c[e+632>>2]=c[d+16>>2];c[e+632+4>>2]=c[d+16+4>>2];c[e+632+8>>2]=c[d+16+8>>2];c[e+632+12>>2]=c[d+16+12>>2];c[e+648>>2]=c[d+32>>2];c[e+648+4>>2]=c[d+32+4>>2];c[e+648+8>>2]=c[d+32+8>>2];c[e+648+12>>2]=c[d+32+12>>2];c[e+664>>2]=c[d+48>>2];c[e+664+4>>2]=c[d+48+4>>2];c[e+664+8>>2]=c[d+48+8>>2];c[e+664+12>>2]=c[d+48+12>>2];g[e+688>>2]=0.0;g[e+692>>2]=-1.0;g[e+696>>2]=.8999999761581421;g[e+700>>2]=.30000001192092896;g[e+704>>2]=1.0;g[e+708>>2]=0.0;g[e+712>>2]=0.0;a[e+716>>0]=0;a[e+736>>0]=0;a[e+737>>0]=0;a[e+738>>0]=0;a[e+739>>0]=1;a[e+740>>0]=0;c[e+748>>2]=0;c[e+748+4>>2]=0;c[e+748+8>>2]=0;c[e+748+12>>2]=0;c[e+748+16>>2]=0;d=c[e+28>>2]|0;k=+g[e+600>>2];j=+g[e+604>>2];i=+g[e+608>>2];h=k*+g[d+20>>2]+j*+g[d+24>>2]+i*+g[d+28>>2]+ +g[d+56>>2];f=k*+g[d+36>>2]+j*+g[d+40>>2]+i*+g[d+44>>2]+ +g[d+60>>2];g[e+664>>2]=k*+g[d+4>>2]+j*+g[d+8>>2]+i*+g[d+12>>2]+ +g[d+52>>2];g[e+668>>2]=h;g[e+672>>2]=f;g[e+676>>2]=0.0;g[e+732>>2]=1.0;return e|0}function mf(b,d){b=b|0;d=+d;var e=0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0,q=0,r=0.0;e=c[b+248>>2]|0;if((e|0)<=0)return;q=0;do{p=c[(c[b+256>>2]|0)+(q<<2)>>2]|0;if(!(c[p+204>>2]&3)){n=+g[p+504>>2];i=+C(+(1.0-n),+d);f=+g[p+372>>2]*i;g[p+372>>2]=f;h=i*+g[p+376>>2];g[p+376>>2]=h;i=i*+g[p+380>>2];g[p+380>>2]=i;o=+g[p+508>>2];j=+C(+(1.0-o),+d);k=+g[p+388>>2]*j;g[p+388>>2]=k;l=j*+g[p+392>>2];g[p+392>>2]=l;j=j*+g[p+396>>2];g[p+396>>2]=j;do if(a[p+512>>0]|0){if(k*k+l*l+j*j<+g[p+524>>2]?f*f+h*h+i*i<+g[p+520>>2]:0){r=+g[p+516>>2];g[p+388>>2]=k*r;g[p+392>>2]=l*r;g[p+396>>2]=j*r;g[p+372>>2]=f*r;g[p+376>>2]=h*r;g[p+380>>2]=i*r;f=f*r;h=h*r;m=i*r;k=k*r;l=l*r;j=j*r}else m=i;i=+B(+(f*f+h*h+m*m));do if(i<n)if(i>.004999999888241291){g[p+372>>2]=f-f*(1.0/i)*.004999999888241291;g[p+376>>2]=h-h*(1.0/i)*.004999999888241291;g[p+380>>2]=m-m*(1.0/i)*.004999999888241291;break}else{c[p+372>>2]=0;c[p+372+4>>2]=0;c[p+372+8>>2]=0;c[p+372+12>>2]=0;break}while(0);f=+B(+(k*k+l*l+j*j));if(f<o)if(f>.004999999888241291){g[p+388>>2]=k-k*(1.0/f)*.004999999888241291;g[p+392>>2]=l-l*(1.0/f)*.004999999888241291;g[p+396>>2]=j-j*(1.0/f)*.004999999888241291;break}else{c[p+388>>2]=0;c[p+388+4>>2]=0;c[p+388+8>>2]=0;c[p+388+12>>2]=0;break}}while(0);Me(p+4|0,+g[p+372>>2],+g[p+376>>2],+g[p+380>>2],p+388|0,d,p+68|0);e=c[b+248>>2]|0}q=q+1|0}while((q|0)<(e|0));return}function nf(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0;j=l;l=l+64|0;i=c[a+28>>2]|0;c[i+(b*80|0)>>2]=c[d>>2];c[i+(b*80|0)+4>>2]=c[d+4>>2];c[i+(b*80|0)+8>>2]=c[d+8>>2];c[i+(b*80|0)+12>>2]=c[d+12>>2];c[i+(b*80|0)+16>>2]=c[d+16>>2];c[i+(b*80|0)+16+4>>2]=c[d+16+4>>2];c[i+(b*80|0)+16+8>>2]=c[d+16+8>>2];c[i+(b*80|0)+16+12>>2]=c[d+16+12>>2];c[i+(b*80|0)+32>>2]=c[d+32>>2];c[i+(b*80|0)+32+4>>2]=c[d+32+4>>2];c[i+(b*80|0)+32+8>>2]=c[d+32+8>>2];c[i+(b*80|0)+32+12>>2]=c[d+32+12>>2];c[i+(b*80|0)+48>>2]=c[d+48>>2];c[i+(b*80|0)+48+4>>2]=c[d+48+4>>2];c[i+(b*80|0)+48+8>>2]=c[d+48+8>>2];c[i+(b*80|0)+48+12>>2]=c[d+48+12>>2];if(c[a+68>>2]|0){i=c[(c[a+28>>2]|0)+(b*80|0)+64>>2]|0;Pb[c[(c[i>>2]|0)+8>>2]&127](i,d,j+48|0,j+32|0);c[j>>2]=c[j+48>>2];c[j+4>>2]=c[j+48+4>>2];c[j+8>>2]=c[j+48+8>>2];c[j+12>>2]=c[j+48+12>>2];c[j+16>>2]=c[j+32>>2];c[j+16+4>>2]=c[j+32+4>>2];c[j+16+8>>2]=c[j+32+8>>2];c[j+16+12>>2]=c[j+32+12>>2];i=c[a+68>>2]|0;h=c[(c[a+28>>2]|0)+(b*80|0)+76>>2]|0;d=fg(i,h)|0;a:do if(d){g=c[i+8>>2]|0;if((g|0)<=-1){d=c[i>>2]|0;break}if(g){b=0;while(1){f=c[d+32>>2]|0;b=b+1|0;if(!f)break a;if((b|0)>=(g|0)){d=f;break}else d=f}}}else d=0;while(0);c[h>>2]=c[j>>2];c[h+4>>2]=c[j+4>>2];c[h+8>>2]=c[j+8>>2];c[h+12>>2]=c[j+12>>2];c[h+16>>2]=c[j+16>>2];c[h+20>>2]=c[j+20>>2];c[h+24>>2]=c[j+24>>2];c[h+28>>2]=c[j+28>>2];ue(i,d,h)}if(!e){l=j;return}Db[c[(c[a>>2]|0)+68>>2]&255](a);l=j;return}function of(a,b,c,d,e,f,h,i,j,k,l){a=a|0;b=b|0;c=+c;d=+d;e=+e;f=+f;h=h|0;i=i|0;j=j|0;k=k|0;l=+l;var m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0;x=+g[j+(h<<2)>>2];y=+g[j+16+(h<<2)>>2];w=+g[j+32+(h<<2)>>2];o=+g[k+(i<<2)>>2];p=+g[k+16+(i<<2)>>2];s=+g[k+32+(i<<2)>>2];t=+g[k+48>>2]-+g[j+48>>2];u=+g[k+52>>2]-+g[j+52>>2];v=+g[k+56>>2]-+g[j+56>>2];m=1.0-(x*o+y*p+w*s)*(x*o+y*p+w*s);if(!(m==0.0)){m=(x*t+y*u+w*v-(x*o+y*p+w*s)*(o*t+p*u+s*v))/m;if(!(m<-c)){if(m>c)m=c}else m=-c}else m=0.0;n=(x*o+y*p+w*s)*m-(o*t+p*u+s*v);if(n<-e){m=(x*o+y*p+w*s)*-e+(x*t+y*u+w*v);if(!(m<-c))if(m>c){n=-e;m=c}else n=-e;else{n=-e;m=-c}}else if(n>e){m=(x*o+y*p+w*s)*e+(x*t+y*u+w*v);if(!(m<-c))if(m>c){n=e;m=c}else n=e;else{n=e;m=-c}}r=o*n;q=p*n;p=s*n;n=r+(t-x*m);c=q+(u-y*m);m=p+(v-w*m);o=+B(+(m*m+(n*n+c*c)));if(o-d-f>l)return +(o-d-f);do if(m*m+(n*n+c*c)<=1.4210854715202004e-14)if(+A(+w)>.7071067690849304){m=1.0/+B(+(y*y+w*w));g[a>>2]=0.0;g[a+4>>2]=-(w*m);g[a+8>>2]=y*m;e=0.0;n=-(w*m);m=y*m;break}else{n=1.0/+B(+(x*x+y*y));g[a>>2]=-(y*n);g[a+4>>2]=x*n;g[a+8>>2]=0.0;e=-(y*n);n=x*n;m=0.0;break}else{g[a>>2]=n*-(1.0/o);g[a+4>>2]=c*-(1.0/o);g[a+8>>2]=m*-(1.0/o);g[a+12>>2]=0.0;e=n*-(1.0/o);n=c*-(1.0/o);m=m*-(1.0/o)}while(0);x=q+ +g[k+52>>2]+n*f;y=p+ +g[k+56>>2]+m*f;g[b>>2]=r+ +g[k+48>>2]+e*f;g[b+4>>2]=x;g[b+8>>2]=y;g[b+12>>2]=0.0;return +(o-d-f)}function pf(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0;c[b+4>>2]=1065353216;c[b+8>>2]=1065353216;c[b+12>>2]=1065353216;g[b+16>>2]=0.0;a[b+36>>0]=1;c[b+32>>2]=0;c[b+24>>2]=0;c[b+28>>2]=0;c[b+48>>2]=0;c[b>>2]=9968;a[b+100>>0]=1;c[b+96>>2]=0;c[b+88>>2]=0;c[b+92>>2]=0;a[b+120>>0]=1;c[b+116>>2]=0;c[b+108>>2]=0;c[b+112>>2]=0;a[b+140>>0]=1;c[b+136>>2]=0;c[b+128>>2]=0;c[b+132>>2]=0;a[b+160>>0]=1;c[b+156>>2]=0;c[b+148>>2]=0;c[b+152>>2]=0;a[b+164>>0]=d&1;a[b+165>>0]=e&1;g[b+168>>2]=0.0;c[6485]=(c[6485]|0)+1;d=ec(51)|0;if(!d)f=0;else{c[(d+4+15&-16)+-4>>2]=d;f=d+4+15&-16}e=c[b+24>>2]|0;if((e|0)>0){d=0;do{h=f+(d<<5)|0;i=(c[b+32>>2]|0)+(d<<5)|0;c[h>>2]=c[i>>2];c[h+4>>2]=c[i+4>>2];c[h+8>>2]=c[i+8>>2];c[h+12>>2]=c[i+12>>2];c[h+16>>2]=c[i+16>>2];c[h+20>>2]=c[i+20>>2];c[h+24>>2]=c[i+24>>2];c[h+28>>2]=c[i+28>>2];d=d+1|0}while((d|0)!=(e|0))}d=c[b+32>>2]|0;if(d|0){if(a[b+36>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+32>>2]=0}a[b+36>>0]=1;c[b+32>>2]=f;c[b+28>>2]=1;i=c[b+24>>2]|0;c[f+(i<<5)>>2]=0;c[f+(i<<5)+4>>2]=0;c[f+(i<<5)+8>>2]=12;c[f+(i<<5)+12>>2]=0;c[f+(i<<5)+16>>2]=0;c[f+(i<<5)+20>>2]=16;c[f+(i<<5)+24>>2]=2;c[f+(i<<5)+28>>2]=0;c[b+24>>2]=(c[b+24>>2]|0)+1;i=(a[b+164>>0]|0)==0;d=c[b+32>>2]|0;c[d>>2]=(c[(i?b+148|0:b+128|0)>>2]|0)/3|0;c[d+4>>2]=0;c[d+24>>2]=i?3:2;c[d+8>>2]=i?6:12;if(!(a[b+165>>0]|0)){h=12;b=(c[b+108>>2]|0)/3|0;i=d+12|0;c[i>>2]=b;i=d+16|0;c[i>>2]=0;i=d+20|0;c[i>>2]=h;return}else{h=16;b=c[b+88>>2]|0;i=d+12|0;c[i>>2]=b;i=d+16|0;c[i>>2]=0;i=d+20|0;c[i>>2]=h;return}}function qf(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0;f=l;l=l+112|0;h=c[a+28>>2]|0;x=+g[d>>2];D=+g[h>>2];w=+g[d+16>>2];C=+g[h+4>>2];v=+g[d+32>>2];B=+g[h+8>>2];u=+g[d+4>>2];t=+g[d+20>>2];s=+g[d+36>>2];r=+g[d+8>>2];p=+g[d+24>>2];n=+g[d+40>>2];A=+g[h+16>>2];z=+g[h+20>>2];y=+g[h+24>>2];q=+g[h+32>>2];o=+g[h+36>>2];m=+g[h+40>>2];F=+g[d+48>>2];E=+g[d+52>>2];i=+g[d+56>>2];k=+g[h+48>>2]+(D*F+C*E+B*i);j=A*F+z*E+y*i+ +g[h+52>>2];i=q*F+o*E+m*i+ +g[h+56>>2];g[f+48>>2]=x*D+w*C+v*B;g[f+48+4>>2]=D*u+C*t+B*s;g[f+48+8>>2]=D*r+C*p+B*n;g[f+48+12>>2]=0.0;g[f+48+16>>2]=x*A+w*z+v*y;g[f+48+20>>2]=u*A+t*z+s*y;g[f+48+24>>2]=r*A+p*z+n*y;g[f+48+28>>2]=0.0;g[f+48+32>>2]=x*q+w*o+v*m;g[f+48+36>>2]=u*q+t*o+s*m;g[f+48+40>>2]=r*q+p*o+n*m;g[f+48+44>>2]=0.0;g[f+48+48>>2]=k;g[f+48+52>>2]=j;g[f+48+56>>2]=i;g[f+48+60>>2]=0.0;h=c[a+32>>2]|0;g[f+24+4>>2]=1.0;c[f+24+8>>2]=1;c[f+24+12>>2]=-1;c[f+24>>2]=7268;c[f+24+16>>2]=h;c[f+24+20>>2]=b;c[f+24+4>>2]=c[h+4>>2];h=c[a+4>>2]|0;d=c[h+8>>2]|0;c[f>>2]=h;c[f+4>>2]=e;c[f+8>>2]=d;c[f+12>>2]=f+48;c[f+16>>2]=-1;c[f+20>>2]=b;jc(c[a+8>>2]|0,c[a+12>>2]|0,c[a+16>>2]|0,f,f+24|0,+g[a+20>>2]);l=f;return}function rf(){var b=0,d=0,e=0;b=yq(348)|0;c[b>>2]=6888;c[b+132>>2]=0;c[b+132+4>>2]=0;c[b+132+8>>2]=0;c[b+132+12>>2]=0;c[b+132+16>>2]=0;c[b+132+20>>2]=0;c[b+132+24>>2]=0;c[b+132+28>>2]=0;c[b+164>>2]=1065353216;c[b+168>>2]=1065353216;c[b+172>>2]=1065353216;g[b+176>>2]=0.0;c[b+180>>2]=0;g[b+184>>2]=999999984306749440.0;c[b+188>>2]=0;c[b+188+4>>2]=0;c[b+188+8>>2]=0;c[b+188+12>>2]=0;c[b+204>>2]=1;c[b+208>>2]=-1;c[b+212>>2]=-1;c[b+216>>2]=-1;c[b+220>>2]=1;g[b+224>>2]=0.0;g[b+228>>2]=.5;g[b+232>>2]=0.0;g[b+236>>2]=0.0;g[b+240>>2]=0.0;g[b+244>>2]=.10000000149011612;g[b+248>>2]=1.0e4;c[b+256>>2]=0;c[b+260>>2]=-1;c[b+264>>2]=-1;g[b+268>>2]=1.0;g[b+272>>2]=0.0;g[b+276>>2]=0.0;c[b+280>>2]=0;a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;c[b+292>>2]=0;c[b+304>>2]=0;c[b+4>>2]=1065353216;c[b+8>>2]=0;c[b+8+4>>2]=0;c[b+8+8>>2]=0;c[b+8+12>>2]=0;c[b+24>>2]=1065353216;c[b+28>>2]=0;c[b+28+4>>2]=0;c[b+28+8>>2]=0;c[b+28+12>>2]=0;c[b+44>>2]=1065353216;c[b+48>>2]=0;c[b+48+4>>2]=0;c[b+48+8>>2]=0;c[b+48+12>>2]=0;c[b+48+16>>2]=0;c[b+68>>2]=1065353216;c[b+72>>2]=0;c[b+72+4>>2]=0;c[b+72+8>>2]=0;c[b+72+12>>2]=0;c[b+88>>2]=1065353216;c[b+92>>2]=0;c[b+92+4>>2]=0;c[b+92+8>>2]=0;c[b+92+12>>2]=0;c[b+108>>2]=1065353216;c[b+112>>2]=0;c[b+112+4>>2]=0;c[b+112+8>>2]=0;c[b+112+12>>2]=0;c[b+112+16>>2]=0;a[b+340>>0]=1;c[b+336>>2]=0;c[b+328>>2]=0;c[b+332>>2]=0;c[b+252>>2]=4;c[b>>2]=7664;c[6485]=(c[6485]|0)+1;d=ec(91)|0;if(!d){e=0;zh(e);d=b+344|0;c[d>>2]=e;return b|0}c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16;zh(d);e=b+344|0;c[e>>2]=d;return b|0}function sf(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,m=0,n=0;n=l;l=l+32|0;if((b|0)<0)b=c[a+12>>2]|0;d=c[a>>2]|0;if(!((b|0)>0&(d|0)!=0)){l=n;return}while(1){e=d+40|0;if(c[e>>2]|0){m=0;while(1){g=d+32|0;h=c[g>>2]|0;if(h>>>0>d>>>0){i=(c[h+40>>2]|0)==(d|0);j=c[h+36+(((i^1)&1)<<2)>>2]|0;k=c[h+32>>2]|0;if(!k)f=a;else f=k+36+(((c[k+40>>2]|0)==(h|0)&1)<<2)|0;c[f>>2]=d;c[j+32>>2]=d;c[h+32>>2]=d;c[g>>2]=k;k=d+36|0;c[h+36>>2]=c[k>>2];c[h+40>>2]=c[e>>2];c[(c[k>>2]|0)+32>>2]=h;c[(c[e>>2]|0)+32>>2]=h;c[d+36+((i&1)<<2)>>2]=h;c[d+36+(((i^1)&1)<<2)>>2]=j;c[n>>2]=c[h>>2];c[n+4>>2]=c[h+4>>2];c[n+8>>2]=c[h+8>>2];c[n+12>>2]=c[h+12>>2];c[n+16>>2]=c[h+16>>2];c[n+20>>2]=c[h+20>>2];c[n+24>>2]=c[h+24>>2];c[n+28>>2]=c[h+28>>2];c[h>>2]=c[d>>2];c[h+4>>2]=c[d+4>>2];c[h+8>>2]=c[d+8>>2];c[h+12>>2]=c[d+12>>2];c[h+16>>2]=c[d+16>>2];c[h+20>>2]=c[d+20>>2];c[h+24>>2]=c[d+24>>2];c[h+28>>2]=c[d+28>>2];c[d>>2]=c[n>>2];c[d+4>>2]=c[n+4>>2];c[d+8>>2]=c[n+8>>2];c[d+12>>2]=c[n+12>>2];c[d+16>>2]=c[n+16>>2];c[d+20>>2]=c[n+20>>2];c[d+24>>2]=c[n+24>>2];c[d+28>>2]=c[n+28>>2];d=h}d=c[d+36+(((c[a+16>>2]|0)>>>m&1)<<2)>>2]|0;e=d+40|0;if(!(c[e>>2]|0))break;else m=m+1&31}}if(!(fg(a,d)|0))e=0;else e=c[a>>2]|0;ue(a,e,d);c[a+16>>2]=(c[a+16>>2]|0)+1;b=b+-1|0;if(!b)break;d=c[a>>2]|0}l=n;return}function tf(a,b,d,e,f,h,i){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;var j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0,t=0;s=l;l=l+48|0;q=+g[d>>2];p=+g[d+4>>2];r=+g[d+8>>2];j=q*+g[b+4>>2]+p*+g[b+20>>2]+r*+g[b+36>>2];k=q*+g[b+8>>2]+p*+g[b+24>>2]+r*+g[b+40>>2];g[s+32>>2]=+g[b>>2]*q+ +g[b+16>>2]*p+ +g[b+32>>2]*r;g[s+32+4>>2]=j;g[s+32+8>>2]=k;g[s+32+12>>2]=0.0;Mb[c[(c[a>>2]|0)+64>>2]&127](s+16|0,a,s+32|0);k=+g[s+16>>2];j=+g[s+16+4>>2];r=+g[s+16+8>>2];p=k*+g[b>>2]+j*+g[b+4>>2]+r*+g[b+8>>2]+ +g[b+48>>2];q=k*+g[b+16>>2]+j*+g[b+20>>2]+r*+g[b+24>>2]+ +g[b+52>>2];r=k*+g[b+32>>2]+j*+g[b+36>>2]+r*+g[b+40>>2]+ +g[b+56>>2];t=c[(c[a>>2]|0)+64>>2]|0;j=-+g[s+32+4>>2];k=-+g[s+32+8>>2];g[s>>2]=-+g[s+32>>2];g[s+4>>2]=j;g[s+8>>2]=k;g[s+12>>2]=0.0;Mb[t&127](s+16|0,a,s);k=+g[s+16>>2];j=+g[s+16+4>>2];m=+g[s+16+8>>2];n=k*+g[b>>2]+j*+g[b+4>>2]+m*+g[b+8>>2]+ +g[b+48>>2];o=k*+g[b+16>>2]+j*+g[b+20>>2]+m*+g[b+24>>2]+ +g[b+52>>2];m=k*+g[b+32>>2]+j*+g[b+36>>2]+m*+g[b+40>>2]+ +g[b+56>>2];g[e>>2]=p*+g[d>>2]+q*+g[d+4>>2]+r*+g[d+8>>2];g[f>>2]=n*+g[d>>2]+o*+g[d+4>>2]+m*+g[d+8>>2];g[i>>2]=n;g[i+4>>2]=o;g[i+8>>2]=m;g[i+12>>2]=0.0;g[h>>2]=p;g[h+4>>2]=q;g[h+8>>2]=r;g[h+12>>2]=0.0;j=+g[e>>2];k=+g[f>>2];if(!(j>k)){l=s;return}g[e>>2]=k;g[f>>2]=j;g[i>>2]=p;g[i+4>>2]=q;g[i+8>>2]=r;g[i+12>>2]=0.0;g[h>>2]=n;g[h+4>>2]=o;g[h+8>>2]=m;g[h+12>>2]=0.0;l=s;return}function uf(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0.0,j=0.0,k=0,l=0,m=0.0;c[6475]=(c[6475]|0)+1;if(!(c[b+4>>2]&2))j=.019999999552965164;else{k=c[d+192>>2]|0;i=+jb[c[(c[k>>2]|0)+20>>2]&1](k,.019999999552965164);k=c[e+192>>2]|0;j=+jb[c[(c[k>>2]|0)+20>>2]&1](k,.019999999552965164);j=i<j?i:j}m=+g[d+184>>2];i=+g[e+184>>2];i=m<i?m:i;f=c[b+72>>2]|0;h=c[f+12>>2]|0;if(!h){if(c[b+4>>2]&4|0){b=0;return b|0}c[6485]=(c[6485]|0)+1;f=ec(823)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}k=f}else{c[f+12>>2]=c[h>>2];c[f+8>>2]=(c[f+8>>2]|0)+-1;k=h;f=h}c[f>>2]=1025;f=k+120|0;h=f+44|0;do{c[f>>2]=0;f=f+4|0}while((f|0)<(h|0));f=k+312|0;h=f+44|0;do{c[f>>2]=0;f=f+4|0}while((f|0)<(h|0));f=k+504|0;h=f+44|0;do{c[f>>2]=0;f=f+4|0}while((f|0)<(h|0));f=k+696|0;h=f+44|0;do{c[f>>2]=0;f=f+4|0}while((f|0)<(h|0));c[k+772>>2]=d;c[k+776>>2]=e;c[k+780>>2]=0;g[k+784>>2]=j;g[k+788>>2]=i;e=k;f=c[b+12>>2]|0;c[k+800>>2]=f;if((f|0)==(c[b+16>>2]|0)?(l=(f|0)==0?1:f<<1,(f|0)<(l|0)):0){if(!l)d=0;else{c[6485]=(c[6485]|0)+1;f=ec((l<<2|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}d=f;f=c[b+12>>2]|0}if((f|0)>0){h=0;do{c[d+(h<<2)>>2]=c[(c[b+20>>2]|0)+(h<<2)>>2];h=h+1|0}while((h|0)!=(f|0))}h=c[b+20>>2]|0;if(h){if(a[b+24>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0);f=c[b+12>>2]|0}c[b+20>>2]=0}a[b+24>>0]=1;c[b+20>>2]=d;c[b+16>>2]=l}c[(c[b+20>>2]|0)+(f<<2)>>2]=e;c[b+12>>2]=f+1;b=k;return b|0}function vf(b,d,e,f,g,h,i,j,k){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;k=k|0;var m=0,n=0;n=l;l=l+16|0;if(!((c[b+924>>2]|0)==0?(a[b+912>>0]|0)==0:0)){c[n>>2]=c[b+1208>>2];c[n+4>>2]=c[b+1208+4>>2];c[n+8>>2]=c[b+1208+8>>2];c[n+12>>2]=c[b+1208+12>>2];m=c[b+1304>>2]|0;if(!(m&512))c[b+896>>2]=c[c[d+32>>2]>>2];if(!(m&1024))c[b+904>>2]=c[c[d+32>>2]>>2];if(!(m&2048))c[b+900>>2]=c[d+4>>2];e=(fd(b,b+868|0,f,g,h,i,j,k,d,e,n,1,0)|0)+e|0}if(!((c[b+988>>2]|0)==0?(a[b+976>>0]|0)==0:0)){c[n>>2]=c[b+1224>>2];c[n+4>>2]=c[b+1224+4>>2];c[n+8>>2]=c[b+1224+8>>2];c[n+12>>2]=c[b+1224+12>>2];m=c[b+1304>>2]|0;if(!(m&4096))c[b+960>>2]=c[c[d+32>>2]>>2];if(!(m&8192))c[b+968>>2]=c[c[d+32>>2]>>2];if(!(m&16384))c[b+964>>2]=c[d+4>>2];e=(fd(b,b+932|0,f,g,h,i,j,k,d,e,n,1,0)|0)+e|0}if((c[b+1052>>2]|0)==0?(a[b+1040>>0]|0)==0:0){k=e;l=n;return k|0}c[n>>2]=c[b+1240>>2];c[n+4>>2]=c[b+1240+4>>2];c[n+8>>2]=c[b+1240+8>>2];c[n+12>>2]=c[b+1240+12>>2];m=c[b+1304>>2]|0;if(!(m&32768))c[b+1024>>2]=c[c[d+32>>2]>>2];if(!(m&65536))c[b+1032>>2]=c[c[d+32>>2]>>2];if(!(m&131072))c[b+1028>>2]=c[d+4>>2];k=(fd(b,b+996|0,f,g,h,i,j,k,d,e,n,1,0)|0)+e|0;l=n;return k|0}function wf(a,b,e){a=a|0;b=b|0;e=e|0;pe(a,b,e)|0;c[b+264>>2]=c[a+324>>2];c[b+268>>2]=c[a+328>>2];c[b+272>>2]=c[a+332>>2];c[b+276>>2]=c[a+336>>2];c[b+280>>2]=c[a+340>>2];c[b+284>>2]=c[a+344>>2];c[b+288>>2]=c[a+348>>2];c[b+292>>2]=c[a+352>>2];c[b+296>>2]=c[a+356>>2];c[b+300>>2]=c[a+360>>2];c[b+304>>2]=c[a+364>>2];c[b+308>>2]=c[a+368>>2];c[b+312>>2]=c[a+372>>2];c[b+316>>2]=c[a+376>>2];c[b+320>>2]=c[a+380>>2];c[b+324>>2]=c[a+384>>2];c[b+328>>2]=c[a+388>>2];c[b+332>>2]=c[a+392>>2];c[b+336>>2]=c[a+396>>2];c[b+340>>2]=c[a+400>>2];c[b+456>>2]=c[a+404>>2];c[b+344>>2]=c[a+604>>2];c[b+348>>2]=c[a+608>>2];c[b+352>>2]=c[a+612>>2];c[b+356>>2]=c[a+616>>2];c[b+360>>2]=c[a+408>>2];c[b+364>>2]=c[a+412>>2];c[b+368>>2]=c[a+416>>2];c[b+372>>2]=c[a+420>>2];c[b+376>>2]=c[a+424>>2];c[b+380>>2]=c[a+428>>2];c[b+384>>2]=c[a+432>>2];c[b+388>>2]=c[a+436>>2];c[b+392>>2]=c[a+440>>2];c[b+396>>2]=c[a+444>>2];c[b+400>>2]=c[a+448>>2];c[b+404>>2]=c[a+452>>2];c[b+408>>2]=c[a+456>>2];c[b+412>>2]=c[a+460>>2];c[b+416>>2]=c[a+464>>2];c[b+420>>2]=c[a+468>>2];c[b+424>>2]=c[a+472>>2];c[b+428>>2]=c[a+476>>2];c[b+432>>2]=c[a+480>>2];c[b+436>>2]=c[a+484>>2];c[b+440>>2]=c[a+488>>2];c[b+444>>2]=c[a+492>>2];c[b+448>>2]=c[a+496>>2];c[b+452>>2]=c[a+500>>2];c[b+460>>2]=c[a+504>>2];c[b+464>>2]=c[a+508>>2];c[b+492>>2]=d[a+512>>0];c[b+468>>2]=c[a+516>>2];c[b+472>>2]=c[a+520>>2];c[b+476>>2]=c[a+524>>2];c[b+480>>2]=c[a+528>>2];c[b+484>>2]=c[a+532>>2];c[b+488>>2]=c[a+536>>2];return 13427}function xf(b,d){b=b|0;d=d|0;var e=0,f=0;pc(b,(c[b+28>>2]|0)+4|0,(c[b+32>>2]|0)+4|0);c[d>>2]=0;c[d+4>>2]=0;switch(c[b+956>>2]|0){case 4:{e=2;f=3;break}case 0:{e=0;break}default:{e=1;f=3}}if((f|0)==3)c[d>>2]=e;if(a[b+792>>0]|0){e=e+1|0;c[d>>2]=e}if(a[b+798>>0]|0){e=e+1|0;c[d>>2]=e}switch(c[b+960>>2]|0){case 4:{e=e+2|0;f=32;break}case 0:break;default:{e=e+1|0;f=32}}if((f|0)==32)c[d>>2]=e;if(a[b+793>>0]|0){e=e+1|0;c[d>>2]=e}if(a[b+799>>0]|0){e=e+1|0;c[d>>2]=e}switch(c[b+964>>2]|0){case 4:{e=e+2|0;f=40;break}case 0:break;default:{e=e+1|0;f=40}}if((f|0)==40)c[d>>2]=e;if(a[b+794>>0]|0){e=e+1|0;c[d>>2]=e}if(a[b+800>>0]|0)c[d>>2]=e+1;dg(b,0);switch(c[b+1052>>2]|0){case 4:{e=2;f=10;break}case 0:break;default:{e=1;f=10}}if((f|0)==10)c[d>>2]=(c[d>>2]|0)+e;if(a[b+996>>0]|0)c[d>>2]=(c[d>>2]|0)+1;if(a[b+1016>>0]|0)c[d>>2]=(c[d>>2]|0)+1;dg(b,1);switch(c[b+1140>>2]|0){case 4:{e=2;f=17;break}case 0:break;default:{e=1;f=17}}if((f|0)==17)c[d>>2]=(c[d>>2]|0)+e;if(a[b+1084>>0]|0)c[d>>2]=(c[d>>2]|0)+1;if(a[b+1104>>0]|0)c[d>>2]=(c[d>>2]|0)+1;dg(b,2);switch(c[b+1228>>2]|0){case 4:{e=2;f=24;break}case 0:break;default:{e=1;f=24}}if((f|0)==24)c[d>>2]=(c[d>>2]|0)+e;if(a[b+1172>>0]|0)c[d>>2]=(c[d>>2]|0)+1;if(!(a[b+1192>>0]|0))return;c[d>>2]=(c[d>>2]|0)+1;return}function yf(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0;l=c[d>>2]|0;l=ub[c[(c[l>>2]|0)+56>>2]&31](l,116)|0;Vj(l,d,e,f,0);c[l>>2]=10644;a[l+104>>0]=1;c[l+100>>2]=0;c[l+92>>2]=0;c[l+96>>2]=0;c[6485]=(c[6485]|0)+1;b=ec(83)|0;if(!b)h=0;else{c[(b+4+15&-16)+-4>>2]=b;h=b+4+15&-16}c[h>>2]=10936;i=h+20|0;a[i>>0]=1;j=h+16|0;c[j>>2]=0;d=h+8|0;c[d>>2]=0;k=h+12|0;c[k>>2]=0;a[h+40>>0]=1;c[h+36>>2]=0;c[h+28>>2]=0;c[h+32>>2]=0;a[h+60>>0]=1;c[h+56>>2]=0;c[h+48>>2]=0;c[h+52>>2]=0;c[6485]=(c[6485]|0)+1;b=ec(43)|0;if(!b)g=0;else{c[(b+4+15&-16)+-4>>2]=b;g=b+4+15&-16}d=c[d>>2]|0;if((d|0)>0){b=0;do{m=g+(b*12|0)|0;n=(c[j>>2]|0)+(b*12|0)|0;c[m>>2]=c[n>>2];c[m+4>>2]=c[n+4>>2];c[m+8>>2]=c[n+8>>2];b=b+1|0}while((b|0)!=(d|0))}b=c[j>>2]|0;if(!b){a[i>>0]=1;c[j>>2]=g;c[k>>2]=2;Ue(h);n=l+84|0;c[n>>2]=h;n=e+4|0;n=c[n>>2]|0;n=n+72|0;n=c[n>>2]|0;m=l+108|0;c[m>>2]=n;m=f+4|0;m=c[m>>2]|0;m=m+72|0;m=c[m>>2]|0;n=l+112|0;c[n>>2]=m;return l|0}if(a[i>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[b+-4>>2]|0)}c[j>>2]=0;a[i>>0]=1;c[j>>2]=g;c[k>>2]=2;Ue(h);n=l+84|0;c[n>>2]=h;n=e+4|0;n=c[n>>2]|0;n=n+72|0;n=c[n>>2]|0;m=l+108|0;c[m>>2]=n;m=f+4|0;m=c[m>>2]|0;m=m+72|0;m=c[m>>2]|0;n=l+112|0;c[n>>2]=m;return l|0}function zf(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0;c[6479]=(c[6479]|0)+1;g=(((d<<16|b)+~((d<<16|b)<<15)|0)>>>10^(d<<16|b)+~((d<<16|b)<<15))*9|0;l=c[a+36>>2]|0;g=l+(((c[a+12>>2]|0)+-1&(((g>>>6^g)+~((g>>>6^g)<<11)|0)>>>16^(g>>>6^g)+~((g>>>6^g)<<11)))<<2)|0;f=c[g>>2]|0;if((f|0)==-1){n=0;return n|0}m=c[a+16>>2]|0;e=f;while(1){k=m+(e*12|0)|0;if((c[k>>2]|0)==(b|0)?(c[m+(e*12|0)+4>>2]|0)==(d|0):0)break;e=c[(c[a+56>>2]|0)+(e<<2)>>2]|0;if((e|0)==-1){e=0;n=23;break}}if((n|0)==23)return e|0;if(!k){n=0;return n|0}j=c[m+(e*12|0)+8>>2]|0;i=(e*12|0)/12|0;h=c[a+56>>2]|0;if((f|0)!=(i|0)){b=f;while(1){d=h+(b<<2)|0;e=c[d>>2]|0;if((e|0)==(i|0))break;else b=e}e=c[h+(i<<2)>>2]|0;if((b|0)==-1)n=12;else c[d>>2]=e}else{e=c[h+(f<<2)>>2]|0;n=12}if((n|0)==12)c[g>>2]=e;f=(c[a+8>>2]|0)+-1|0;if((f|0)==(i|0)){c[a+8>>2]=i;n=j;return n|0}g=c[m+(f*12|0)+4>>2]<<16|c[m+(f*12|0)>>2];g=((g+~(g<<15)|0)>>>10^g+~(g<<15))*9|0;g=(((g>>>6^g)+~((g>>>6^g)<<11)|0)>>>16^(g>>>6^g)+~((g>>>6^g)<<11))&(c[a+12>>2]|0)+-1;e=c[l+(g<<2)>>2]|0;if((e|0)!=(f|0)){b=e;while(1){d=h+(b<<2)|0;e=c[d>>2]|0;if((e|0)==(f|0))break;else b=e}e=c[h+(f<<2)>>2]|0;if((b|0)==-1)n=21;else c[d>>2]=e}else{e=c[h+(f<<2)>>2]|0;n=21}if((n|0)==21)c[l+(g<<2)>>2]=e;c[k>>2]=c[m+(f*12|0)>>2];c[k+4>>2]=c[m+(f*12|0)+4>>2];c[k+8>>2]=c[m+(f*12|0)+8>>2];n=(c[a+36>>2]|0)+(g<<2)|0;c[(c[a+56>>2]|0)+(i<<2)>>2]=c[n>>2];c[n>>2]=i;c[a+8>>2]=(c[a+8>>2]|0)+-1;n=j;return n|0}function Af(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0;e=ub[c[(c[d>>2]|0)+40>>2]&31](d,a)|0;g=ub[c[(c[d>>2]|0)+28>>2]&31](d,e)|0;c[b>>2]=g;if(g|0)Ib[c[(c[d>>2]|0)+48>>2]&127](d,e);c[b+4>>2]=c[a+4>>2];c[b+8>>2]=0;g=c[a+52>>2]|0;wb[c[(c[g>>2]|0)+56>>2]&63](g,b+12|0,d)|0;c[b+52>>2]=c[a+16>>2];do if((c[a+56>>2]|0)!=0?((sb[c[(c[d>>2]|0)+52>>2]&127](d)|0)&1|0)==0:0){e=ub[c[(c[d>>2]|0)+24>>2]&31](d,c[a+56>>2]|0)|0;if(!e){c[b+40>>2]=ub[c[(c[d>>2]|0)+28>>2]&31](d,c[a+56>>2]|0)|0;c[b+44>>2]=0;e=c[a+56>>2]|0;e=sb[c[(c[e>>2]|0)+12>>2]&127](e)|0;e=wb[c[(c[d>>2]|0)+16>>2]&63](d,e,1)|0;g=c[a+56>>2]|0;g=wb[c[(c[g>>2]|0)+16>>2]&63](g,c[e+8>>2]|0,d)|0;Tb[c[(c[d>>2]|0)+20>>2]&31](d,e,g,1213612625,c[a+56>>2]|0);break}else{c[b+40>>2]=e;c[b+44>>2]=0;break}}else f=8;while(0);if((f|0)==8){c[b+40>>2]=0;c[b+44>>2]=0}if(c[a+60>>2]|0?((sb[c[(c[d>>2]|0)+52>>2]&127](d)|0)&2|0)==0:0){e=ub[c[(c[d>>2]|0)+24>>2]&31](d,c[a+60>>2]|0)|0;if(!e){c[b+48>>2]=ub[c[(c[d>>2]|0)+28>>2]&31](d,c[a+60>>2]|0)|0;f=c[a+60>>2]|0;f=sb[c[(c[f>>2]|0)+8>>2]&127](f)|0;f=wb[c[(c[d>>2]|0)+16>>2]&63](d,f,1)|0;g=c[a+60>>2]|0;g=wb[c[(c[g>>2]|0)+12>>2]&63](g,c[f+8>>2]|0,d)|0;Tb[c[(c[d>>2]|0)+20>>2]&31](d,f,g,1346456916,c[a+60>>2]|0);g=b+56|0;c[g>>2]=0;return 16882}else{c[b+48>>2]=e;g=b+56|0;c[g>>2]=0;return 16882}}c[b+48>>2]=0;g=b+56|0;c[g>>2]=0;return 16882}function Bf(a,b){a=a|0;b=+b;var d=0,e=0,f=0,h=0,i=0.0,j=0.0,k=0.0;h=l;l=l+32|0;d=c[a+8>>2]|0;if((d|0)<=0){l=h;return}f=0;do{e=c[(c[a+16>>2]|0)+(f<<2)>>2]|0;if((!((e|0)==0?1:(c[e+252>>2]&2|0)==0)?(c[e+220>>2]|0)!=2:0)?!(b==0.0?1:(c[e+204>>2]&2|0)==0):0){d=c[e+540>>2]|0;if(!d)d=e+4|0;else{Ib[c[(c[d>>2]|0)+8>>2]&127](d,e+4|0);d=e+4|0}j=1.0/b*(+g[e+56>>2]-+g[e+120>>2]);k=1.0/b*(+g[e+60>>2]-+g[e+124>>2]);g[e+372>>2]=1.0/b*(+g[e+52>>2]-+g[e+116>>2]);g[e+376>>2]=j;g[e+380>>2]=k;g[e+384>>2]=0.0;Se(e+68|0,d,h+8|0,h);k=+g[h>>2];j=1.0/b*k*+g[h+8+4>>2];i=1.0/b*k*+g[h+8+8>>2];g[e+388>>2]=1.0/b*+g[h+8>>2]*k;g[e+392>>2]=j;g[e+396>>2]=i;g[e+400>>2]=0.0;c[e+132>>2]=c[e+372>>2];c[e+132+4>>2]=c[e+372+4>>2];c[e+132+8>>2]=c[e+372+8>>2];c[e+132+12>>2]=c[e+372+12>>2];c[e+148>>2]=c[e+388>>2];c[e+148+4>>2]=c[e+388+4>>2];c[e+148+8>>2]=c[e+388+8>>2];c[e+148+12>>2]=c[e+388+12>>2];c[e+68>>2]=c[d>>2];c[e+68+4>>2]=c[d+4>>2];c[e+68+8>>2]=c[d+8>>2];c[e+68+12>>2]=c[d+12>>2];c[e+84>>2]=c[e+20>>2];c[e+84+4>>2]=c[e+20+4>>2];c[e+84+8>>2]=c[e+20+8>>2];c[e+84+12>>2]=c[e+20+12>>2];c[e+100>>2]=c[e+36>>2];c[e+100+4>>2]=c[e+36+4>>2];c[e+100+8>>2]=c[e+36+8>>2];c[e+100+12>>2]=c[e+36+12>>2];c[e+116>>2]=c[e+52>>2];c[e+116+4>>2]=c[e+52+4>>2];c[e+116+8>>2]=c[e+52+8>>2];c[e+116+12>>2]=c[e+52+12>>2];d=c[a+8>>2]|0}f=f+1|0}while((f|0)<(d|0));l=h;return}function Cf(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0;i=Xq()|0;c[i+4>>2]=4;c[i+8>>2]=-1;c[i+12>>2]=-1;g[i+16>>2]=3402823466385288598117041.0e14;a[i+20>>0]=1;a[i+21>>0]=0;c[i+24>>2]=-1;c[i+28>>2]=b;c[i+32>>2]=d;g[i+36>>2]=0.0;g[i+40>>2]=.05000000074505806;c[i+44>>2]=0;c[i>>2]=5692;c[i+552>>2]=c[e>>2];c[i+552+4>>2]=c[e+4>>2];c[i+552+8>>2]=c[e+8>>2];c[i+552+12>>2]=c[e+12>>2];c[i+568>>2]=c[e+16>>2];c[i+568+4>>2]=c[e+16+4>>2];c[i+568+8>>2]=c[e+16+8>>2];c[i+568+12>>2]=c[e+16+12>>2];c[i+584>>2]=c[e+32>>2];c[i+584+4>>2]=c[e+32+4>>2];c[i+584+8>>2]=c[e+32+8>>2];c[i+584+12>>2]=c[e+32+12>>2];c[i+600>>2]=c[e+48>>2];c[i+600+4>>2]=c[e+48+4>>2];c[i+600+8>>2]=c[e+48+8>>2];c[i+600+12>>2]=c[e+48+12>>2];c[i+616>>2]=c[f>>2];c[i+616+4>>2]=c[f+4>>2];c[i+616+8>>2]=c[f+8>>2];c[i+616+12>>2]=c[f+12>>2];c[i+632>>2]=c[f+16>>2];c[i+632+4>>2]=c[f+16+4>>2];c[i+632+8>>2]=c[f+16+8>>2];c[i+632+12>>2]=c[f+16+12>>2];c[i+648>>2]=c[f+32>>2];c[i+648+4>>2]=c[f+32+4>>2];c[i+648+8>>2]=c[f+32+8>>2];c[i+648+12>>2]=c[f+32+12>>2];c[i+664>>2]=c[f+48>>2];c[i+664+4>>2]=c[f+48+4>>2];c[i+664+8>>2]=c[f+48+8>>2];c[i+664+12>>2]=c[f+48+12>>2];g[i+688>>2]=0.0;g[i+692>>2]=-1.0;g[i+696>>2]=.8999999761581421;g[i+700>>2]=.30000001192092896;g[i+704>>2]=1.0;g[i+708>>2]=0.0;g[i+712>>2]=0.0;a[i+716>>0]=0;a[i+736>>0]=0;a[i+737>>0]=0;a[i+738>>0]=0;a[i+739>>0]=1;a[i+740>>0]=h&1;c[i+748>>2]=0;c[i+748+4>>2]=0;c[i+748+8>>2]=0;c[i+748+12>>2]=0;c[i+748+16>>2]=0;g[i+732>>2]=h?-1.0:1.0;return i|0}function Df(b,d,e,f){b=b|0;d=d|0;e=+e;f=f|0;var h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0,o=0;o=l;l=l+16|0;n=wq()|0;c[n>>2]=5300;a[n+216>>0]=1;c[n+212>>2]=0;c[n+204>>2]=0;c[n+208>>2]=0;c[n+8>>2]=b;c[n+256>>2]=0;c[n+260>>2]=0;c[n+264>>2]=1065353216;g[n+268>>2]=0.0;c[n+272>>2]=0;c[n+276>>2]=0;c[n+280>>2]=1065353216;g[n+284>>2]=0.0;g[n+64>>2]=.019999999552965164;c[n+68>>2]=0;c[n+68+4>>2]=0;c[n+68+8>>2]=0;c[n+68+12>>2]=0;c[n+100>>2]=0;c[n+100+4>>2]=0;c[n+100+8>>2]=0;c[n+100+12>>2]=0;a[n+250>>0]=1;g[n+56>>2]=0.0;c[n+12>>2]=d;a[n+251>>0]=1;g[n+252>>2]=0.0;g[n+20>>2]=0.0;g[n+24>>2]=0.0;g[n+52>>2]=29.399999618530273;g[n+28>>2]=55.0;g[n+32>>2]=10.0;g[n+36>>2]=10.0;a[n+248>>0]=0;a[n+249>>0]=0;a[n+288>>0]=1;g[n+148>>2]=0.0;g[n+16>>2]=.20000000298023224;a[n+289>>0]=0;a[n+290>>0]=0;g[n+240>>2]=0.0;g[n+244>>2]=0.0;j=+g[f>>2];k=+g[f+4>>2];m=+g[f+8>>2];if(!(j*j+k*k+m*m>0.0)){Qd(n,f);f=n+60|0;g[f>>2]=e;f=n+44|0;g[f>>2]=.7853981852531433;f=n+48|0;g[f>>2]=.7071067690849304;l=o;return n|0}h=1.0/+B(+(j*j+k*k+m*m));i=m*h*-29.399999618530273*m*h*-29.399999618530273+(j*h*-29.399999618530273*j*h*-29.399999618530273+k*h*-29.399999618530273*k*h*-29.399999618530273);if(i>0.0){g[o>>2]=-(j*h*-29.399999618530273);g[o+4>>2]=-(k*h*-29.399999618530273);g[o+8>>2]=-(m*h*-29.399999618530273);g[o+12>>2]=0.0;Qd(n,o)}g[n+52>>2]=+B(+i);f=n+60|0;g[f>>2]=e;f=n+44|0;g[f>>2]=.7853981852531433;f=n+48|0;g[f>>2]=.7071067690849304;l=o;return n|0}function Ef(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0,y=0.0;x=l;l=l+48|0;u=+g[e>>2];v=+g[d>>2];w=+g[e+4>>2];t=+g[d+4>>2];s=+g[e+8>>2];n=+g[d+8>>2];o=+B(+((u-v)*.5*(u-v)*.5+(w-t)*.5*(w-t)*.5+(s-n)*.5*(s-n)*.5));p=+g[a+60>>2];if(+A(+p)>.7071067690849304){r=+g[a+56>>2];m=1.0/+B(+(p*p+r*r));q=+g[a+52>>2];f=q*-(p*m);h=(p*p+r*r)*m;i=0.0;j=-(q*r*m);k=-(p*m);m=r*m}else{q=+g[a+52>>2];r=+g[a+56>>2];k=1.0/+B(+(q*q+r*r));f=(q*q+r*r)*k;h=-(p*q*k);i=-(r*k);j=p*-(r*k);k=q*k;m=0.0}y=p*(s+n)*.5+((u+v)*.5*q+(w+t)*.5*r)-+g[a+68>>2];t=(w+t)*.5-r*y;q=(u+v)*.5-q*y;i=o*i;u=o*k;w=o*m;m=o*h;r=o*j;v=o*f;g[x>>2]=m+(i+q);g[x+4>>2]=r+(u+t);g[x+8>>2]=v+(w+((s+n)*.5-p*y));g[x+12>>2]=0.0;g[x+16>>2]=i+q-m;g[x+20>>2]=u+t-r;g[x+24>>2]=w+((s+n)*.5-p*y)-v;g[x+28>>2]=0.0;g[x+32>>2]=q-i-m;g[x+36>>2]=t-u-r;g[x+40>>2]=(s+n)*.5-p*y-w-v;g[x+44>>2]=0.0;Pb[c[(c[b>>2]|0)+8>>2]&127](b,x,0,0);g[x>>2]=q-i-m;g[x+4>>2]=t-u-r;g[x+8>>2]=(s+n)*.5-p*y-w-v;g[x+12>>2]=0.0;g[x+16>>2]=m+(q-i);g[x+20>>2]=r+(t-u);g[x+24>>2]=v+((s+n)*.5-p*y-w);g[x+28>>2]=0.0;g[x+32>>2]=m+(i+q);g[x+36>>2]=r+(u+t);g[x+40>>2]=v+(w+((s+n)*.5-p*y));g[x+44>>2]=0.0;Pb[c[(c[b>>2]|0)+8>>2]&127](b,x,0,1);l=x;return}function Ff(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0.0,i=0.0,j=0.0,k=0.0,m=0,n=0.0;m=l;l=l+688|0;c[m+568+8>>2]=0;c[m+568+12>>2]=-1;c[m+568+16>>2]=1065353216;c[m+568+20>>2]=1065353216;c[m+568+24>>2]=1065353216;g[m+568+28>>2]=0.0;c[m+568+56>>2]=0;c[m+568>>2]=10340;c[m+568+4>>2]=1;c[m+568+60>>2]=c[d>>2];c[m+568+60+4>>2]=c[d+4>>2];c[m+568+60+8>>2]=c[d+8>>2];c[m+568+60+12>>2]=c[d+12>>2];c[m+568+76>>2]=c[d+16>>2];c[m+568+76+4>>2]=c[d+16+4>>2];c[m+568+76+8>>2]=c[d+16+8>>2];c[m+568+76+12>>2]=c[d+16+12>>2];c[m+568+92>>2]=c[d+32>>2];c[m+568+92+4>>2]=c[d+32+4>>2];c[m+568+92+8>>2]=c[d+32+8>>2];c[m+568+92+12>>2]=c[d+32+12>>2];c[m+568+48>>2]=c[b+204>>2];g[m+208+308>>2]=9.999999747378752e-05;a[m+208+332>>0]=0;c[m+200>>2]=10228;d=c[b+4>>2]|0;c[m+176>>2]=10160;c[m+176+4>>2]=m+208;c[m+176+8>>2]=m+200;c[m+176+12>>2]=d;c[m+176+16>>2]=m+568;c[m+176+20>>2]=0;c[m>>2]=7004;c[m+168>>2]=0;g[m+164>>2]=1.0;c[m+172>>2]=c[b+208>>2];if((vd(m+176|0,b+8|0,b+72|0,b+136|0,b+136|0,m)|0?(h=+g[m+132>>2],i=+g[m+136>>2],j=+g[m+140>>2],h*h+i*i+j*j>9.999999747378752e-05):0)?(k=+g[m+164>>2],k<+g[b+200>>2]):0){n=1.0/+B(+(h*h+i*i+j*j));g[m+132>>2]=h*n;g[m+136>>2]=i*n;g[m+140>>2]=j*n;+mb[c[(c[b>>2]|0)+12>>2]&3](b,m+132|0,m+148|0,k,e,f)}c[m+568>>2]=9660;b=c[m+568+56>>2]|0;if(!b){l=m;return}Db[c[c[b>>2]>>2]&255](b);b=c[m+568+56>>2]|0;if(!b){l=m;return}c[6486]=(c[6486]|0)+1;gd(c[b+-4>>2]|0);l=m;return}function Gf(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0;h=Xq()|0;c[h+4>>2]=4;c[h+8>>2]=-1;c[h+12>>2]=-1;g[h+16>>2]=3402823466385288598117041.0e14;a[h+20>>0]=1;a[h+21>>0]=0;c[h+24>>2]=-1;c[h+28>>2]=b;c[h+32>>2]=d;g[h+36>>2]=0.0;g[h+40>>2]=.05000000074505806;c[h+44>>2]=0;c[h>>2]=5692;c[h+552>>2]=c[e>>2];c[h+552+4>>2]=c[e+4>>2];c[h+552+8>>2]=c[e+8>>2];c[h+552+12>>2]=c[e+12>>2];c[h+568>>2]=c[e+16>>2];c[h+568+4>>2]=c[e+16+4>>2];c[h+568+8>>2]=c[e+16+8>>2];c[h+568+12>>2]=c[e+16+12>>2];c[h+584>>2]=c[e+32>>2];c[h+584+4>>2]=c[e+32+4>>2];c[h+584+8>>2]=c[e+32+8>>2];c[h+584+12>>2]=c[e+32+12>>2];c[h+600>>2]=c[e+48>>2];c[h+600+4>>2]=c[e+48+4>>2];c[h+600+8>>2]=c[e+48+8>>2];c[h+600+12>>2]=c[e+48+12>>2];c[h+616>>2]=c[f>>2];c[h+616+4>>2]=c[f+4>>2];c[h+616+8>>2]=c[f+8>>2];c[h+616+12>>2]=c[f+12>>2];c[h+632>>2]=c[f+16>>2];c[h+632+4>>2]=c[f+16+4>>2];c[h+632+8>>2]=c[f+16+8>>2];c[h+632+12>>2]=c[f+16+12>>2];c[h+648>>2]=c[f+32>>2];c[h+648+4>>2]=c[f+32+4>>2];c[h+648+8>>2]=c[f+32+8>>2];c[h+648+12>>2]=c[f+32+12>>2];c[h+664>>2]=c[f+48>>2];c[h+664+4>>2]=c[f+48+4>>2];c[h+664+8>>2]=c[f+48+8>>2];c[h+664+12>>2]=c[f+48+12>>2];g[h+688>>2]=0.0;g[h+692>>2]=-1.0;g[h+696>>2]=.8999999761581421;g[h+700>>2]=.30000001192092896;g[h+704>>2]=1.0;g[h+708>>2]=0.0;g[h+712>>2]=0.0;a[h+716>>0]=0;a[h+736>>0]=0;a[h+737>>0]=0;a[h+738>>0]=0;a[h+739>>0]=1;a[h+740>>0]=0;c[h+748>>2]=0;c[h+748+4>>2]=0;c[h+748+8>>2]=0;c[h+748+12>>2]=0;c[h+748+16>>2]=0;g[h+732>>2]=1.0;return h|0}function Hf(d,e){d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0;if(!(a[d+164>>0]|0)){f=c[d+148>>2]|0;if((f|0)==(c[d+152>>2]|0)?(k=(f|0)==0?1:f<<1,(f|0)<(k|0)):0){if(!k)i=0;else{c[6485]=(c[6485]|0)+1;f=ec((k<<1)+19|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}i=f;f=c[d+148>>2]|0}h=c[d+156>>2]|0;if((f|0)<=0)if(!h)g=d+160|0;else l=29;else{g=0;do{b[i+(g<<1)>>1]=b[h+(g<<1)>>1]|0;g=g+1|0}while((g|0)!=(f|0));l=29}if((l|0)==29){if(a[d+160>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0);f=c[d+148>>2]|0}c[d+156>>2]=0;g=d+160|0}a[g>>0]=1;c[d+156>>2]=i;c[d+152>>2]=k}l=c[d+156>>2]|0;b[l+(f<<1)>>1]=e;c[d+148>>2]=f+1;c[(c[d+32>>2]|0)+4>>2]=l;return}else{f=c[d+128>>2]|0;if((f|0)==(c[d+132>>2]|0)?(j=(f|0)==0?1:f<<1,(f|0)<(j|0)):0){if(!j)i=0;else{c[6485]=(c[6485]|0)+1;f=ec((j<<2|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}i=f;f=c[d+128>>2]|0}h=c[d+136>>2]|0;if((f|0)<=0)if(!h)g=d+140|0;else l=13;else{g=0;do{c[i+(g<<2)>>2]=c[h+(g<<2)>>2];g=g+1|0}while((g|0)!=(f|0));l=13}if((l|0)==13){if(a[d+140>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[d+136>>2]=0;g=d+140|0;f=c[d+128>>2]|0}a[g>>0]=1;c[d+136>>2]=i;c[d+132>>2]=j}l=c[d+136>>2]|0;c[l+(f<<2)>>2]=e;c[d+128>>2]=(c[d+128>>2]|0)+1;c[(c[d+32>>2]|0)+4>>2]=l;return}}function If(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0;h=Oq()|0;c[h+4>>2]=5;c[h+8>>2]=-1;c[h+12>>2]=-1;g[h+16>>2]=3402823466385288598117041.0e14;a[h+20>>0]=1;a[h+21>>0]=0;c[h+24>>2]=-1;c[h+28>>2]=b;c[h+32>>2]=d;g[h+36>>2]=0.0;g[h+40>>2]=.05000000074505806;c[h+44>>2]=0;c[h>>2]=5408;c[h+300>>2]=c[e>>2];c[h+300+4>>2]=c[e+4>>2];c[h+300+8>>2]=c[e+8>>2];c[h+300+12>>2]=c[e+12>>2];c[h+316>>2]=c[e+16>>2];c[h+316+4>>2]=c[e+16+4>>2];c[h+316+8>>2]=c[e+16+8>>2];c[h+316+12>>2]=c[e+16+12>>2];c[h+332>>2]=c[e+32>>2];c[h+332+4>>2]=c[e+32+4>>2];c[h+332+8>>2]=c[e+32+8>>2];c[h+332+12>>2]=c[e+32+12>>2];c[h+348>>2]=c[e+48>>2];c[h+348+4>>2]=c[e+48+4>>2];c[h+348+8>>2]=c[e+48+8>>2];c[h+348+12>>2]=c[e+48+12>>2];c[h+364>>2]=c[f>>2];c[h+364+4>>2]=c[f+4>>2];c[h+364+8>>2]=c[f+8>>2];c[h+364+12>>2]=c[f+12>>2];c[h+380>>2]=c[f+16>>2];c[h+380+4>>2]=c[f+16+4>>2];c[h+380+8>>2]=c[f+16+8>>2];c[h+380+12>>2]=c[f+16+12>>2];c[h+396>>2]=c[f+32>>2];c[h+396+4>>2]=c[f+32+4>>2];c[h+396+8>>2]=c[f+32+8>>2];c[h+396+12>>2]=c[f+32+12>>2];c[h+412>>2]=c[f+48>>2];c[h+412+4>>2]=c[f+48+4>>2];c[h+412+8>>2]=c[f+48+8>>2];c[h+412+12>>2]=c[f+48+12>>2];a[h+552>>0]=0;c[h+524>>2]=0;g[h+572>>2]=-1.0;g[h+444>>2]=999999984306749440.0;g[h+448>>2]=999999984306749440.0;g[h+452>>2]=999999984306749440.0;g[h+428>>2]=1.0;g[h+432>>2]=.30000001192092896;g[h+436>>2]=1.0;g[h+440>>2]=.009999999776482582;g[h+456>>2]=.05000000074505806;c[h+592>>2]=0;g[h+596>>2]=0.0;g[h+600>>2]=.699999988079071;g[h+604>>2]=0.0;return h|0}function Jf(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0;e=+g[d+128>>2];if(!(e!=0.0)){i=0.0;return +i}c[6130]=(c[6130]|0)+1;k=+g[d+96>>2];f=+g[d+16>>2];h=+g[d+20>>2];i=+g[d+24>>2];j=+g[d+108>>2];j=e-k*+g[d+116>>2]-(f*+g[a+144>>2]+h*+g[a+148>>2]+i*+g[a+152>>2]+(+g[d>>2]*+g[a+160>>2]+ +g[d+4>>2]*+g[a+164>>2]+ +g[d+8>>2]*+g[a+168>>2]))*j-j*(+g[d+48>>2]*+g[b+144>>2]+ +g[d+52>>2]*+g[b+148>>2]+ +g[d+56>>2]*+g[b+152>>2]+(+g[d+32>>2]*+g[b+160>>2]+ +g[d+36>>2]*+g[b+164>>2]+ +g[d+40>>2]*+g[b+168>>2]));l=+g[d+120>>2];e=k+j<l?l-k:j;g[d+96>>2]=k+j<l?l:k+j;if(c[a+240>>2]|0){l=e*h*+g[a+132>>2]*+g[a+116>>2];k=e*i*+g[a+136>>2]*+g[a+120>>2];g[a+144>>2]=+g[a+112>>2]*e*f*+g[a+128>>2]+ +g[a+144>>2];g[a+148>>2]=l+ +g[a+148>>2];g[a+152>>2]=k+ +g[a+152>>2];k=e*+g[a+100>>2]*+g[d+68>>2];l=e*+g[a+104>>2]*+g[d+72>>2];g[a+160>>2]=e*+g[a+96>>2]*+g[d+64>>2]+ +g[a+160>>2];g[a+164>>2]=k+ +g[a+164>>2];g[a+168>>2]=l+ +g[a+168>>2]}if(!(c[b+240>>2]|0)){l=e;return +l}l=e*+g[d+52>>2]*+g[b+132>>2]*+g[b+116>>2];k=e*+g[d+56>>2]*+g[b+136>>2]*+g[b+120>>2];g[b+144>>2]=+g[b+112>>2]*e*+g[d+48>>2]*+g[b+128>>2]+ +g[b+144>>2];g[b+148>>2]=l+ +g[b+148>>2];g[b+152>>2]=k+ +g[b+152>>2];k=e*+g[b+100>>2]*+g[d+84>>2];l=e*+g[b+104>>2]*+g[d+88>>2];g[b+160>>2]=e*+g[b+96>>2]*+g[d+80>>2]+ +g[b+160>>2];g[b+164>>2]=k+ +g[b+164>>2];g[b+168>>2]=l+ +g[b+168>>2];l=e;return +l}function Kf(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0;f=+g[d+100>>2];j=+g[d+16>>2];k=+g[d+20>>2];l=+g[d+24>>2];h=+g[d+108>>2];h=+g[d+112>>2]-f*+g[d+116>>2]-(j*+g[a+64>>2]+k*+g[a+68>>2]+l*+g[a+72>>2]+(+g[d>>2]*+g[a+80>>2]+ +g[d+4>>2]*+g[a+84>>2]+ +g[d+8>>2]*+g[a+88>>2]))*h-h*(+g[d+48>>2]*+g[b+64>>2]+ +g[d+52>>2]*+g[b+68>>2]+ +g[d+56>>2]*+g[b+72>>2]+(+g[d+32>>2]*+g[b+80>>2]+ +g[d+36>>2]*+g[b+84>>2]+ +g[d+40>>2]*+g[b+88>>2]));e=+g[d+120>>2];if(!(f+h<e)){e=+g[d+124>>2];if(f+h>e)i=e-f;else{i=h;e=f+h}}else i=e-f;g[d+100>>2]=e;if(c[a+240>>2]|0){h=i*k*+g[a+132>>2]*+g[a+116>>2];k=i*l*+g[a+136>>2]*+g[a+120>>2];g[a+64>>2]=+g[a+112>>2]*i*j*+g[a+128>>2]+ +g[a+64>>2];g[a+68>>2]=h+ +g[a+68>>2];g[a+72>>2]=k+ +g[a+72>>2];k=i*+g[a+100>>2]*+g[d+68>>2];l=i*+g[a+104>>2]*+g[d+72>>2];g[a+80>>2]=i*+g[a+96>>2]*+g[d+64>>2]+ +g[a+80>>2];g[a+84>>2]=k+ +g[a+84>>2];g[a+88>>2]=l+ +g[a+88>>2]}if(!(c[b+240>>2]|0))return +i;l=i*+g[d+52>>2]*+g[b+132>>2]*+g[b+116>>2];k=i*+g[d+56>>2]*+g[b+136>>2]*+g[b+120>>2];g[b+64>>2]=+g[b+112>>2]*i*+g[d+48>>2]*+g[b+128>>2]+ +g[b+64>>2];g[b+68>>2]=l+ +g[b+68>>2];g[b+72>>2]=k+ +g[b+72>>2];k=i*+g[b+100>>2]*+g[d+84>>2];l=i*+g[b+104>>2]*+g[d+88>>2];g[b+80>>2]=i*+g[b+96>>2]*+g[d+80>>2]+ +g[b+80>>2];g[b+84>>2]=k+ +g[b+84>>2];g[b+88>>2]=l+ +g[b+88>>2];return +i}function Lf(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0;c[6480]=(c[6480]|0)+1;k=(((e<<16|d)+~((e<<16|d)<<15)|0)>>>10^(e<<16|d)+~((e<<16|d)<<15))*9|0;k=((k>>>6^k)+~((k>>>6^k)<<11)|0)>>>16^(k>>>6^k)+~((k>>>6^k)<<11);l=c[b+12>>2]|0;f=c[(c[b+36>>2]|0)+((l+-1&k)<<2)>>2]|0;a:do if((f|0)!=-1){h=c[b+16>>2]|0;while(1){g=h+(f*12|0)|0;if((c[g>>2]|0)==(d|0)?(c[h+(f*12|0)+4>>2]|0)==(e|0):0)break;f=c[(c[b+56>>2]|0)+(f<<2)>>2]|0;if((f|0)==-1)break a}if(g|0){e=g;return e|0}}while(0);j=c[b+8>>2]|0;if((j|0)==(l|0)){h=(l|0)==0?1:l<<1;if((l|0)<(h|0)){if(!h){f=0;i=l}else{c[6485]=(c[6485]|0)+1;f=ec((h*12|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}i=c[b+8>>2]|0}if((i|0)>0){g=0;do{m=f+(g*12|0)|0;n=(c[b+16>>2]|0)+(g*12|0)|0;c[m>>2]=c[n>>2];c[m+4>>2]=c[n+4>>2];c[m+8>>2]=c[n+8>>2];g=g+1|0}while((g|0)!=(i|0))}g=c[b+16>>2]|0;if(g|0){if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0)}c[b+16>>2]=0}a[b+20>>0]=1;c[b+16>>2]=f;c[b+12>>2]=h;f=c[b+8>>2]|0}else{f=l;h=l}}else{f=j;h=l}c[b+8>>2]=f+1;g=c[b+16>>2]|0;if((l|0)<(h|0)){Ue(b);f=(c[b+12>>2]|0)+-1&k}else f=l+-1&k;c[g+(j*12|0)>>2]=d;c[g+(j*12|0)+4>>2]=e;c[g+(j*12|0)+8>>2]=0;n=(c[b+36>>2]|0)+(f<<2)|0;c[(c[b+56>>2]|0)+(j<<2)>>2]=c[n>>2];c[n>>2]=j;n=g+(j*12|0)|0;return n|0}function Mf(b){b=b|0;var d=0;d=yq(676)|0;c[d>>2]=6888;c[d+132>>2]=0;c[d+132+4>>2]=0;c[d+132+8>>2]=0;c[d+132+12>>2]=0;c[d+132+16>>2]=0;c[d+132+20>>2]=0;c[d+132+24>>2]=0;c[d+132+28>>2]=0;c[d+164>>2]=1065353216;c[d+168>>2]=1065353216;c[d+172>>2]=1065353216;g[d+176>>2]=0.0;c[d+180>>2]=0;g[d+184>>2]=999999984306749440.0;c[d+188>>2]=0;c[d+188+4>>2]=0;c[d+188+8>>2]=0;c[d+188+12>>2]=0;c[d+204>>2]=1;c[d+208>>2]=-1;c[d+212>>2]=-1;c[d+216>>2]=-1;c[d+220>>2]=1;g[d+224>>2]=0.0;g[d+228>>2]=.5;g[d+232>>2]=0.0;g[d+236>>2]=0.0;g[d+240>>2]=0.0;g[d+244>>2]=.10000000149011612;g[d+248>>2]=1.0e4;c[d+252>>2]=1;c[d+256>>2]=0;c[d+260>>2]=-1;c[d+264>>2]=-1;g[d+268>>2]=1.0;g[d+272>>2]=0.0;g[d+276>>2]=0.0;c[d+280>>2]=0;a[d+300>>0]=1;c[d+296>>2]=0;c[d+288>>2]=0;c[d+292>>2]=0;c[d+304>>2]=0;c[d+4>>2]=1065353216;c[d+8>>2]=0;c[d+8+4>>2]=0;c[d+8+8>>2]=0;c[d+8+12>>2]=0;c[d+24>>2]=1065353216;c[d+28>>2]=0;c[d+28+4>>2]=0;c[d+28+8>>2]=0;c[d+28+12>>2]=0;c[d+44>>2]=1065353216;c[d+48>>2]=0;c[d+48+4>>2]=0;c[d+48+8>>2]=0;c[d+48+12>>2]=0;c[d+48+16>>2]=0;c[d+68>>2]=1065353216;c[d+72>>2]=0;c[d+72+4>>2]=0;c[d+72+8>>2]=0;c[d+72+12>>2]=0;c[d+88>>2]=1065353216;c[d+92>>2]=0;c[d+92+4>>2]=0;c[d+92+8>>2]=0;c[d+92+12>>2]=0;c[d+108>>2]=1065353216;c[d+112>>2]=0;c[d+112+4>>2]=0;c[d+112+8>>2]=0;c[d+112+12>>2]=0;c[d+112+16>>2]=0;c[d>>2]=6212;a[d+560>>0]=1;c[d+556>>2]=0;c[d+548>>2]=0;c[d+552>>2]=0;kd(d,b);return d|0}function Nf(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0;k=+g[d+100>>2];f=+g[d+16>>2];h=+g[d+20>>2];i=+g[d+24>>2];j=+g[d+108>>2];j=+g[d+112>>2]-k*+g[d+116>>2]-(f*+g[a+64>>2]+h*+g[a+68>>2]+i*+g[a+72>>2]+(+g[d>>2]*+g[a+80>>2]+ +g[d+4>>2]*+g[a+84>>2]+ +g[d+8>>2]*+g[a+88>>2]))*j-j*(+g[d+48>>2]*+g[b+64>>2]+ +g[d+52>>2]*+g[b+68>>2]+ +g[d+56>>2]*+g[b+72>>2]+(+g[d+32>>2]*+g[b+80>>2]+ +g[d+36>>2]*+g[b+84>>2]+ +g[d+40>>2]*+g[b+88>>2]));l=+g[d+120>>2];e=k+j<l?l-k:j;g[d+100>>2]=k+j<l?l:k+j;if(c[a+240>>2]|0){l=e*h*+g[a+132>>2]*+g[a+116>>2];k=e*i*+g[a+136>>2]*+g[a+120>>2];g[a+64>>2]=+g[a+112>>2]*e*f*+g[a+128>>2]+ +g[a+64>>2];g[a+68>>2]=l+ +g[a+68>>2];g[a+72>>2]=k+ +g[a+72>>2];k=e*+g[a+100>>2]*+g[d+68>>2];l=e*+g[a+104>>2]*+g[d+72>>2];g[a+80>>2]=e*+g[a+96>>2]*+g[d+64>>2]+ +g[a+80>>2];g[a+84>>2]=k+ +g[a+84>>2];g[a+88>>2]=l+ +g[a+88>>2]}if(!(c[b+240>>2]|0))return +e;l=e*+g[d+52>>2]*+g[b+132>>2]*+g[b+116>>2];k=e*+g[d+56>>2]*+g[b+136>>2]*+g[b+120>>2];g[b+64>>2]=+g[b+112>>2]*e*+g[d+48>>2]*+g[b+128>>2]+ +g[b+64>>2];g[b+68>>2]=l+ +g[b+68>>2];g[b+72>>2]=k+ +g[b+72>>2];k=e*+g[b+100>>2]*+g[d+84>>2];l=e*+g[b+104>>2]*+g[d+88>>2];g[b+80>>2]=e*+g[b+96>>2]*+g[d+80>>2]+ +g[b+80>>2];g[b+84>>2]=k+ +g[b+84>>2];g[b+88>>2]=l+ +g[b+88>>2];return +e}function Of(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0;k=l;l=l+96|0;g=c[b+8>>2]|0;c[d+216>>2]=g;if((g|0)==(c[b+12>>2]|0)?(j=(g|0)==0?1:g<<1,(g|0)<(j|0)):0){if(!j)i=0;else{c[6485]=(c[6485]|0)+1;g=ec((j<<2|3)+16|0)|0;if(!g)g=0;else{c[(g+4+15&-16)+-4>>2]=g;g=g+4+15&-16}i=g;g=c[b+8>>2]|0}if((g|0)>0){h=0;do{c[i+(h<<2)>>2]=c[(c[b+16>>2]|0)+(h<<2)>>2];h=h+1|0}while((h|0)!=(g|0))}h=c[b+16>>2]|0;if(h){if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0);g=c[b+8>>2]|0}c[b+16>>2]=0}a[b+20>>0]=1;c[b+16>>2]=i;c[b+12>>2]=j}c[(c[b+16>>2]|0)+(g<<2)>>2]=d;c[b+8>>2]=g+1;c[k+32>>2]=c[d+4>>2];c[k+32+4>>2]=c[d+4+4>>2];c[k+32+8>>2]=c[d+4+8>>2];c[k+32+12>>2]=c[d+4+12>>2];c[k+32+16>>2]=c[d+20>>2];c[k+32+16+4>>2]=c[d+20+4>>2];c[k+32+16+8>>2]=c[d+20+8>>2];c[k+32+16+12>>2]=c[d+20+12>>2];c[k+32+32>>2]=c[d+36>>2];c[k+32+32+4>>2]=c[d+36+4>>2];c[k+32+32+8>>2]=c[d+36+8>>2];c[k+32+32+12>>2]=c[d+36+12>>2];c[k+32+48>>2]=c[d+52>>2];c[k+32+48+4>>2]=c[d+52+4>>2];c[k+32+48+8>>2]=c[d+52+8>>2];c[k+32+48+12>>2]=c[d+52+12>>2];j=c[d+192>>2]|0;Pb[c[(c[j>>2]|0)+8>>2]&127](j,k+32|0,k+16|0,k);j=c[b+68>>2]|0;c[d+188>>2]=Ab[c[(c[j>>2]|0)+8>>2]&3](j,k+16|0,k,c[(c[d+192>>2]|0)+4>>2]|0,d,e,f,c[b+24>>2]|0)|0;l=k;return}function Pf(){var b=0;b=yq(344)|0;c[b>>2]=6888;c[b+132>>2]=0;c[b+132+4>>2]=0;c[b+132+8>>2]=0;c[b+132+12>>2]=0;c[b+132+16>>2]=0;c[b+132+20>>2]=0;c[b+132+24>>2]=0;c[b+132+28>>2]=0;c[b+164>>2]=1065353216;c[b+168>>2]=1065353216;c[b+172>>2]=1065353216;g[b+176>>2]=0.0;c[b+180>>2]=0;g[b+184>>2]=999999984306749440.0;c[b+188>>2]=0;c[b+188+4>>2]=0;c[b+188+8>>2]=0;c[b+188+12>>2]=0;c[b+204>>2]=1;c[b+208>>2]=-1;c[b+212>>2]=-1;c[b+216>>2]=-1;c[b+220>>2]=1;g[b+224>>2]=0.0;g[b+228>>2]=.5;g[b+232>>2]=0.0;g[b+236>>2]=0.0;g[b+240>>2]=0.0;g[b+244>>2]=.10000000149011612;g[b+248>>2]=1.0e4;c[b+256>>2]=0;c[b+260>>2]=-1;c[b+264>>2]=-1;g[b+268>>2]=1.0;g[b+272>>2]=0.0;g[b+276>>2]=0.0;c[b+280>>2]=0;a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;c[b+292>>2]=0;c[b+304>>2]=0;c[b+4>>2]=1065353216;c[b+8>>2]=0;c[b+8+4>>2]=0;c[b+8+8>>2]=0;c[b+8+12>>2]=0;c[b+24>>2]=1065353216;c[b+28>>2]=0;c[b+28+4>>2]=0;c[b+28+8>>2]=0;c[b+28+12>>2]=0;c[b+44>>2]=1065353216;c[b+48>>2]=0;c[b+48+4>>2]=0;c[b+48+8>>2]=0;c[b+48+12>>2]=0;c[b+48+16>>2]=0;c[b+68>>2]=1065353216;c[b+72>>2]=0;c[b+72+4>>2]=0;c[b+72+8>>2]=0;c[b+72+12>>2]=0;c[b+88>>2]=1065353216;c[b+92>>2]=0;c[b+92+4>>2]=0;c[b+92+8>>2]=0;c[b+92+12>>2]=0;c[b+108>>2]=1065353216;c[b+112>>2]=0;c[b+112+4>>2]=0;c[b+112+8>>2]=0;c[b+112+12>>2]=0;c[b+112+16>>2]=0;c[b>>2]=7620;a[b+340>>0]=1;c[b+336>>2]=0;c[b+328>>2]=0;c[b+332>>2]=0;c[b+252>>2]=4;return b|0}function Qf(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0;J=+g[a+4>>2];I=+g[a+20>>2];H=+g[a+36>>2];F=+g[a+8>>2];E=+g[a+24>>2];D=+g[a+40>>2];B=+g[a+12>>2];z=+g[a+28>>2];x=+g[a+44>>2];u=+g[b+4>>2];t=+g[b+20>>2];s=+g[b+36>>2];q=+g[b+8>>2];p=+g[b+24>>2];o=+g[b+40>>2];m=+g[b+12>>2];k=+g[b+28>>2];i=+g[b+44>>2];c[d>>2]=0;c[d+4>>2]=0;c[d+8>>2]=0;c[d+12>>2]=0;A=+g[e>>2];y=+g[e+4>>2];w=+g[e+8>>2];g[d+16>>2]=J*A+I*y+H*w;g[d+20>>2]=F*A+E*y+D*w;g[d+24>>2]=B*A+z*y+x*w;g[d+28>>2]=0.0;l=-+g[e>>2];j=-+g[e+4>>2];h=-+g[e+8>>2];g[d+32>>2]=u*l+t*j+s*h;g[d+36>>2]=q*l+p*j+o*h;g[d+40>>2]=m*l+k*j+i*h;g[d+44>>2]=0.0;G=(J*A+I*y+H*w)*+g[a+456>>2];C=(F*A+E*y+D*w)*+g[a+460>>2];v=(B*A+z*y+x*w)*+g[a+464>>2];g[d+48>>2]=G;g[d+52>>2]=C;g[d+56>>2]=v;g[d+60>>2]=0.0;r=(u*l+t*j+s*h)*+g[b+456>>2];n=(q*l+p*j+o*h)*+g[b+460>>2];f=(m*l+k*j+i*h)*+g[b+464>>2];g[d+64>>2]=r;g[d+68>>2]=n;g[d+72>>2]=f;g[d+76>>2]=0.0;g[d+80>>2]=(J*A+I*y+H*w)*G+(F*A+E*y+D*w)*C+(B*A+z*y+x*w)*v+((u*l+t*j+s*h)*r+(q*l+p*j+o*h)*n+(m*l+k*j+i*h)*f);return}function Rf(b,d,e,f,h,i,j,k,l){b=b|0;d=d|0;e=e|0;f=+f;h=+h;i=+i;j=j|0;k=k|0;l=l|0;var m=0.0,n=0.0,o=0.0,p=0;p=Gq()|0;c[p+8>>2]=0;c[p+12>>2]=-1;g[p+16>>2]=0.0;c[p>>2]=9500;c[p+4>>2]=24;c[p+68>>2]=b;c[p+72>>2]=d;g[p+76>>2]=h;g[p+80>>2]=i;g[p+84>>2]=+(b+-1|0);g[p+88>>2]=+(d+-1|0);g[p+92>>2]=f;c[p+96>>2]=e;c[p+100>>2]=k;a[p+104>>0]=l&1;a[p+105>>0]=0;a[p+106>>0]=0;c[p+108>>2]=j;c[p+112>>2]=1065353216;c[p+116>>2]=1065353216;c[p+120>>2]=1065353216;g[p+124>>2]=0.0;switch(j|0){case 0:{g[p+20>>2]=h;c[p+24>>2]=0;c[p+28>>2]=0;g[p+32>>2]=0.0;g[p+36>>2]=i;g[p+40>>2]=+(b+-1|0);g[p+44>>2]=+(d+-1|0);g[p+48>>2]=0.0;m=h;n=i;o=0.0;f=+(b+-1|0);h=0.0;i=+(d+-1|0);break}case 1:{c[p+20>>2]=0;g[p+24>>2]=h;c[p+28>>2]=0;g[p+32>>2]=0.0;g[p+36>>2]=+(b+-1|0);g[p+40>>2]=i;g[p+44>>2]=+(d+-1|0);g[p+48>>2]=0.0;m=0.0;n=+(b+-1|0);o=h;f=i;h=0.0;i=+(d+-1|0);break}case 2:{c[p+20>>2]=0;c[p+24>>2]=0;g[p+28>>2]=h;g[p+32>>2]=0.0;g[p+36>>2]=+(b+-1|0);g[p+40>>2]=+(d+-1|0);g[p+44>>2]=i;g[p+48>>2]=0.0;m=0.0;n=+(b+-1|0);o=0.0;f=+(d+-1|0);break}default:{m=+g[p+20>>2];n=+g[p+36>>2];o=+g[p+24>>2];f=+g[p+40>>2];h=+g[p+28>>2];i=+g[p+44>>2]}}g[p+52>>2]=(m+n)*.5;g[p+56>>2]=(o+f)*.5;g[p+60>>2]=(h+i)*.5;g[p+64>>2]=0.0;return p|0}function Sf(b){b=b|0;var d=0,e=0,f=0;c[b>>2]=5972;if(a[b+288>>0]|0?(d=c[b+220>>2]|0,Db[c[c[d>>2]>>2]&255](d),d=c[b+220>>2]|0,d|0):0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+212>>2]|0;if(d|0?(Db[c[c[d>>2]>>2]&255](d),e=c[b+212>>2]|0,e|0):0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}if(a[b+289>>0]|0?(f=c[b+216>>2]|0,Db[c[c[f>>2]>>2]&255](f),f=c[b+216>>2]|0,f|0):0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}d=c[b+332>>2]|0;if(d|0){if(a[b+336>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+332>>2]=0}a[b+336>>0]=1;c[b+332>>2]=0;c[b+324>>2]=0;c[b+328>>2]=0;d=c[b+304>>2]|0;if(d|0){if(a[b+308>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+304>>2]=0}a[b+308>>0]=1;c[b+304>>2]=0;c[b+296>>2]=0;c[b+300>>2]=0;d=c[b+256>>2]|0;if(d|0){if(a[b+260>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+256>>2]=0}a[b+260>>0]=1;c[b+256>>2]=0;c[b+248>>2]=0;c[b+252>>2]=0;d=c[b+236>>2]|0;if(d|0){if(a[b+240>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+236>>2]=0}a[b+240>>0]=1;c[b+236>>2]=0;c[b+228>>2]=0;c[b+232>>2]=0;d=c[b+204>>2]|0;if(!d){a[b+208>>0]=1;c[b+204>>2]=0;c[b+196>>2]=0;f=b+200|0;c[f>>2]=0;qi(b);return}if(a[b+208>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+204>>2]=0;a[b+208>>0]=1;c[b+204>>2]=0;c[b+196>>2]=0;f=b+200|0;c[f>>2]=0;qi(b);return}function Tf(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0;while(1){m=c[a+12>>2]|0;n=c[m+(((b+d|0)/2|0)<<2)>>2]|0;e=b;f=d;while(1){l=c[(c[n+772>>2]|0)+208>>2]|0;if((l|0)>-1)while(1){i=m+(e<<2)|0;h=c[i>>2]|0;g=c[(c[h+772>>2]|0)+208>>2]|0;if((g|0)<=-1)g=c[(c[h+776>>2]|0)+208>>2]|0;if((g|0)<(l|0))e=e+1|0;else{k=i;break}}else{i=c[(c[n+776>>2]|0)+208>>2]|0;while(1){j=m+(e<<2)|0;h=c[j>>2]|0;g=c[(c[h+772>>2]|0)+208>>2]|0;if((g|0)<=-1)g=c[(c[h+776>>2]|0)+208>>2]|0;if((g|0)<(i|0))e=e+1|0;else{k=j;break}}}if((l|0)>-1)while(1){g=m+(f<<2)|0;i=c[g>>2]|0;h=c[(c[i+772>>2]|0)+208>>2]|0;if((h|0)<=-1)h=c[(c[i+776>>2]|0)+208>>2]|0;if((l|0)<(h|0))f=f+-1|0;else break}else{j=c[(c[n+776>>2]|0)+208>>2]|0;while(1){g=m+(f<<2)|0;i=c[g>>2]|0;h=c[(c[i+772>>2]|0)+208>>2]|0;if((h|0)<=-1)h=c[(c[i+776>>2]|0)+208>>2]|0;if((j|0)<(h|0))f=f+-1|0;else break}}if((e|0)<=(f|0)){m=c[k>>2]|0;c[k>>2]=c[g>>2];c[(c[a+12>>2]|0)+(f<<2)>>2]=m;e=e+1|0;f=f+-1|0}if((e|0)>(f|0))break;m=c[a+12>>2]|0}if((f|0)>(b|0))Tf(a,b,f);if((e|0)<(d|0))b=e;else break}return}function Uf(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0;h=l;l=l+64|0;a[d+84>>0]=0;c[h>>2]=c[b+4>>2];c[h+4>>2]=c[b+4+4>>2];c[h+8>>2]=c[b+4+8>>2];c[h+12>>2]=c[b+4+12>>2];c[h+16>>2]=c[b+20>>2];c[h+16+4>>2]=c[b+20+4>>2];c[h+16+8>>2]=c[b+20+8>>2];c[h+16+12>>2]=c[b+20+12>>2];c[h+32>>2]=c[b+36>>2];c[h+32+4>>2]=c[b+36+4>>2];c[h+32+8>>2]=c[b+36+8>>2];c[h+32+12>>2]=c[b+36+12>>2];c[h+48>>2]=c[b+52>>2];c[h+48+4>>2]=c[b+52+4>>2];c[h+48+8>>2]=c[b+52+8>>2];c[h+48+12>>2]=c[b+52+12>>2];if(e?(f=c[b+540>>2]|0,f|0):0)Ib[c[(c[f>>2]|0)+8>>2]&127](f,h);w=+g[d+156>>2];u=+g[h>>2];v=+g[d+160>>2];t=+g[h+4>>2];n=+g[d+164>>2];s=+g[h+8>>2];r=+g[h+16>>2];q=+g[h+20>>2];p=+g[h+24>>2];o=+g[h+32>>2];m=+g[h+36>>2];j=+g[h+40>>2];k=w*r+v*q+n*p+ +g[h+52>>2];i=w*o+v*m+n*j+ +g[h+56>>2];g[d+36>>2]=w*u+v*t+n*s+ +g[h+48>>2];g[d+40>>2]=k;g[d+44>>2]=i;g[d+48>>2]=0.0;i=+g[d+172>>2];k=+g[d+176>>2];n=+g[d+180>>2];g[d+52>>2]=u*i+t*k+s*n;g[d+56>>2]=i*r+k*q+n*p;g[d+60>>2]=i*o+k*m+n*j;g[d+64>>2]=0.0;n=+g[d+188>>2];k=+g[d+192>>2];i=+g[d+196>>2];g[d+68>>2]=u*n+t*k+s*i;g[d+72>>2]=r*n+q*k+p*i;g[d+76>>2]=o*n+m*k+j*i;g[d+80>>2]=0.0;l=h;return}function Vf(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0.0;a:do if(b>>>0<=20)do switch(b|0){case 9:{e=(c[d>>2]|0)+(4-1)&~(4-1);b=c[e>>2]|0;c[d>>2]=e+4;c[a>>2]=b;break a}case 10:{b=(c[d>>2]|0)+(4-1)&~(4-1);e=c[b>>2]|0;c[d>>2]=b+4;c[a>>2]=e;c[a+4>>2]=((e|0)<0)<<31>>31;break a}case 11:{b=(c[d>>2]|0)+(4-1)&~(4-1);e=c[b>>2]|0;c[d>>2]=b+4;c[a>>2]=e;c[a+4>>2]=0;break a}case 12:{f=(c[d>>2]|0)+(8-1)&~(8-1);b=c[f>>2]|0;e=c[f+4>>2]|0;c[d>>2]=f+8;c[a>>2]=b;c[a+4>>2]=e;break a}case 13:{e=(c[d>>2]|0)+(4-1)&~(4-1);f=c[e>>2]|0;c[d>>2]=e+4;c[a>>2]=(f&65535)<<16>>16;c[a+4>>2]=(((f&65535)<<16>>16|0)<0)<<31>>31;break a}case 14:{e=(c[d>>2]|0)+(4-1)&~(4-1);f=c[e>>2]|0;c[d>>2]=e+4;c[a>>2]=f&65535;c[a+4>>2]=0;break a}case 15:{e=(c[d>>2]|0)+(4-1)&~(4-1);f=c[e>>2]|0;c[d>>2]=e+4;c[a>>2]=(f&255)<<24>>24;c[a+4>>2]=(((f&255)<<24>>24|0)<0)<<31>>31;break a}case 16:{e=(c[d>>2]|0)+(4-1)&~(4-1);f=c[e>>2]|0;c[d>>2]=e+4;c[a>>2]=f&255;c[a+4>>2]=0;break a}case 17:{f=(c[d>>2]|0)+(8-1)&~(8-1);g=+h[f>>3];c[d>>2]=f+8;h[a>>3]=g;break a}case 18:{f=(c[d>>2]|0)+(8-1)&~(8-1);g=+h[f>>3];c[d>>2]=f+8;h[a>>3]=g;break a}default:break a}while(0);while(0);return}function Wf(a,b,d,e,f,h,i,j,k,l){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;j=+j;k=k|0;l=+l;var m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0;c[a>>2]=c[h>>2];c[a+4>>2]=c[h+4>>2];c[a+8>>2]=c[h+8>>2];c[a+12>>2]=c[h+12>>2];t=+g[e+4>>2];q=+g[a+8>>2];o=+g[e+8>>2];u=+g[a+4>>2];n=+g[a>>2];w=+g[e>>2];x=(t*q-o*u)*+g[b>>2]+ +g[b+4>>2]*(o*n-q*w)+(u*w-t*n)*+g[b+8>>2];v=(t*q-o*u)*+g[b+16>>2]+(o*n-q*w)*+g[b+20>>2]+(u*w-t*n)*+g[b+24>>2];t=(t*q-o*u)*+g[b+32>>2]+(o*n-q*w)*+g[b+36>>2]+(u*w-t*n)*+g[b+40>>2];g[a+16>>2]=x;g[a+20>>2]=v;g[a+24>>2]=t;g[a+28>>2]=0.0;w=+g[f+4>>2];o=+g[f+8>>2];s=+g[f>>2];r=+g[d>>2]*(w*-q-o*-u)+ +g[d+4>>2]*(o*-n-s*-q)+(s*-u-w*-n)*+g[d+8>>2];p=(w*-q-o*-u)*+g[d+16>>2]+(o*-n-s*-q)*+g[d+20>>2]+(s*-u-w*-n)*+g[d+24>>2];n=(w*-q-o*-u)*+g[d+32>>2]+(o*-n-s*-q)*+g[d+36>>2]+(s*-u-w*-n)*+g[d+40>>2];g[a+32>>2]=r;g[a+36>>2]=p;g[a+40>>2]=n;g[a+44>>2]=0.0;w=+g[i>>2]*x;u=+g[i+4>>2]*v;s=+g[i+8>>2]*t;g[a+48>>2]=w;g[a+52>>2]=u;g[a+56>>2]=s;g[a+60>>2]=0.0;q=+g[k>>2]*r;o=+g[k+4>>2]*p;m=+g[k+8>>2]*n;g[a+64>>2]=q;g[a+68>>2]=o;g[a+72>>2]=m;g[a+76>>2]=0.0;g[a+80>>2]=x*w+v*u+t*s+j+l+(r*q+p*o+n*m);return}function Xf(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0.0,j=0,k=0.0,m=0.0,n=0.0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0.0,y=0;w=l;l=l+2048|0;if((e|0)<=0){l=w;return}f=0;do{g[d+(f<<4)+12>>2]=-999999984306749440.0;f=f+1|0}while((f|0)!=(e|0));p=0;do{if((sb[c[(c[a>>2]|0)+96>>2]&127](a)|0)>0){q=b+(p<<4)|0;r=b+(p<<4)+4|0;s=b+(p<<4)+8|0;t=d+(p<<4)+12|0;u=d+(p<<4)|0;o=0;do{if(((sb[c[(c[a>>2]|0)+96>>2]&127](a)|0)-o|0)<128){f=(sb[c[(c[a>>2]|0)+96>>2]&127](a)|0)-o|0;if((f|0)>0)v=11;else{i=-3402823466385288598117041.0e14;f=-1}}else{f=128;v=11}if((v|0)==11){v=0;h=0;do{Mb[c[(c[a>>2]|0)+108>>2]&127](a,h,w+(h<<4)|0);h=h+1|0}while((h|0)!=(f|0));k=+g[q>>2];m=+g[r>>2];n=+g[s>>2];h=-1;j=0;i=-3402823466385288598117041.0e14;do{x=k*+g[w+(j<<4)>>2]+m*+g[w+(j<<4)+4>>2]+n*+g[w+(j<<4)+8>>2];y=x>i;h=y?j:h;i=y?x:i;j=j+1|0}while((j|0)!=(f|0));f=h}if(i>+g[t>>2]){y=w+(f<<4)|0;c[u>>2]=c[y>>2];c[u+4>>2]=c[y+4>>2];c[u+8>>2]=c[y+8>>2];c[u+12>>2]=c[y+12>>2];g[t>>2]=i}o=o+128|0}while((o|0)<(sb[c[(c[a>>2]|0)+96>>2]&127](a)|0))}p=p+1|0}while((p|0)!=(e|0));l=w;return}function Yf(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;while(1){l=c[a+12>>2]|0;m=c[l+(((b+d|0)/2|0)<<2)>>2]|0;e=b;f=d;while(1){k=c[(c[m+28>>2]|0)+208>>2]|0;if((k|0)>-1)while(1){i=l+(e<<2)|0;h=c[i>>2]|0;g=c[(c[h+28>>2]|0)+208>>2]|0;if((g|0)<=-1)g=c[(c[h+32>>2]|0)+208>>2]|0;if((g|0)<(k|0))e=e+1|0;else{j=i;break}}else{i=c[(c[m+32>>2]|0)+208>>2]|0;while(1){j=l+(e<<2)|0;h=c[j>>2]|0;g=c[(c[h+28>>2]|0)+208>>2]|0;if((g|0)<=-1)g=c[(c[h+32>>2]|0)+208>>2]|0;if((g|0)<(i|0))e=e+1|0;else break}}if((k|0)>-1)while(1){g=l+(f<<2)|0;i=c[g>>2]|0;h=c[(c[i+28>>2]|0)+208>>2]|0;if((h|0)<=-1)h=c[(c[i+32>>2]|0)+208>>2]|0;if((k|0)<(h|0))f=f+-1|0;else break}else{k=c[(c[m+32>>2]|0)+208>>2]|0;while(1){g=l+(f<<2)|0;i=c[g>>2]|0;h=c[(c[i+28>>2]|0)+208>>2]|0;if((h|0)<=-1)h=c[(c[i+32>>2]|0)+208>>2]|0;if((k|0)<(h|0))f=f+-1|0;else break}}if((e|0)<=(f|0)){l=c[j>>2]|0;c[j>>2]=c[g>>2];c[(c[a+12>>2]|0)+(f<<2)>>2]=l;e=e+1|0;f=f+-1|0}if((e|0)>(f|0))break;l=c[a+12>>2]|0}if((f|0)>(b|0))Yf(a,b,f);if((e|0)<(d|0))b=e;else break}return}function Zf(b,d){b=b|0;d=d|0;var e=0;e=Oq()|0;ni(e,5,b);c[e>>2]=5408;c[e+300>>2]=c[d>>2];c[e+300+4>>2]=c[d+4>>2];c[e+300+8>>2]=c[d+8>>2];c[e+300+12>>2]=c[d+12>>2];c[e+316>>2]=c[d+16>>2];c[e+316+4>>2]=c[d+16+4>>2];c[e+316+8>>2]=c[d+16+8>>2];c[e+316+12>>2]=c[d+16+12>>2];c[e+332>>2]=c[d+32>>2];c[e+332+4>>2]=c[d+32+4>>2];c[e+332+8>>2]=c[d+32+8>>2];c[e+332+12>>2]=c[d+32+12>>2];c[e+348>>2]=c[d+48>>2];c[e+348+4>>2]=c[d+48+4>>2];c[e+348+8>>2]=c[d+48+8>>2];c[e+348+12>>2]=c[d+48+12>>2];a[e+527>>0]=0;c[e+364>>2]=c[e+300>>2];c[e+364+4>>2]=c[e+300+4>>2];c[e+364+8>>2]=c[e+300+8>>2];c[e+364+12>>2]=c[e+300+12>>2];c[e+380>>2]=c[e+316>>2];c[e+380+4>>2]=c[e+316+4>>2];c[e+380+8>>2]=c[e+316+8>>2];c[e+380+12>>2]=c[e+316+12>>2];c[e+396>>2]=c[e+332>>2];c[e+396+4>>2]=c[e+332+4>>2];c[e+396+8>>2]=c[e+332+8>>2];c[e+396+12>>2]=c[e+332+12>>2];a[e+524>>0]=0;a[e+525>>0]=0;a[e+526>>0]=0;a[e+552>>0]=0;c[e+412>>2]=0;c[e+412+4>>2]=0;c[e+412+8>>2]=0;c[e+412+12>>2]=0;g[e+572>>2]=-1.0;g[e+444>>2]=999999984306749440.0;g[e+448>>2]=999999984306749440.0;g[e+452>>2]=999999984306749440.0;g[e+428>>2]=1.0;g[e+432>>2]=.30000001192092896;g[e+436>>2]=1.0;g[e+440>>2]=.009999999776482582;g[e+456>>2]=.05000000074505806;c[e+592>>2]=0;g[e+596>>2]=0.0;g[e+600>>2]=.699999988079071;g[e+604>>2]=0.0;return e|0}function _f(a,b,d,e,f,h,i){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;var k=0.0,m=0.0,n=0,o=0.0,p=0,q=0.0,r=0,s=0.0,t=0;r=l;l=l+16|0;g[e>>2]=3402823466385288598117041.0e14;g[f>>2]=-3402823466385288598117041.0e14;p=c[a+100>>2]|0;if((p|0)>0){n=0;do{t=c[a+108>>2]|0;s=+g[t+(n<<4)>>2]*+g[a+16>>2];q=+g[t+(n<<4)+4>>2]*+g[a+20>>2];o=+g[t+(n<<4)+8>>2]*+g[a+24>>2];k=s*+g[b>>2]+q*+g[b+4>>2]+o*+g[b+8>>2]+ +g[b+48>>2];m=s*+g[b+16>>2]+q*+g[b+20>>2]+o*+g[b+24>>2]+ +g[b+52>>2];o=s*+g[b+32>>2]+q*+g[b+36>>2]+o*+g[b+40>>2]+ +g[b+56>>2];q=k*+g[d>>2]+m*+g[d+4>>2]+o*+g[d+8>>2];if(q<+g[e>>2]){g[e>>2]=q;g[h>>2]=k;g[h+4>>2]=m;g[h+8>>2]=o;g[h+12>>2]=0.0}if(q>+g[f>>2]){g[f>>2]=q;g[i>>2]=k;g[i+4>>2]=m;g[i+8>>2]=o;g[i+12>>2]=0.0}n=n+1|0}while((n|0)!=(p|0));s=+g[f>>2];m=s;n=(g[j>>2]=s,c[j>>2]|0)}else{m=-3402823466385288598117041.0e14;n=-8388609}k=+g[e>>2];if(!(k>m)){l=r;return}c[e>>2]=n;g[f>>2]=k;c[r>>2]=c[h>>2];c[r+4>>2]=c[h+4>>2];c[r+8>>2]=c[h+8>>2];c[r+12>>2]=c[h+12>>2];c[h>>2]=c[i>>2];c[h+4>>2]=c[i+4>>2];c[h+8>>2]=c[i+8>>2];c[h+12>>2]=c[i+12>>2];c[i>>2]=c[r>>2];c[i+4>>2]=c[r+4>>2];c[i+8>>2]=c[r+8>>2];c[i+12>>2]=c[r+12>>2];l=r;return}function $f(a,b){a=a|0;b=b|0;var d=0,e=0;d=l;l=l+48|0;e=(c[a+52>>2]|0)+4|0;c[e>>2]=c[b>>2];c[e+4>>2]=c[b+4>>2];c[e+8>>2]=c[b+8>>2];c[e+12>>2]=c[b+12>>2];b=d+32+4|0;c[b>>2]=0;c[b+4>>2]=0;c[b+8>>2]=0;g[d+32>>2]=1.0;Mb[c[(c[a>>2]|0)+68>>2]&127](d+16|0,a,d+32|0);g[a+36>>2]=+g[d+16>>2]+ +g[a+16>>2];g[d+32>>2]=-1.0;Mb[c[(c[a>>2]|0)+68>>2]&127](d,a,d+32|0);c[d+16>>2]=c[d>>2];c[d+16+4>>2]=c[d+4>>2];c[d+16+8>>2]=c[d+8>>2];c[d+16+12>>2]=c[d+12>>2];g[a+20>>2]=+g[d+16>>2]-+g[a+16>>2];c[d+32>>2]=0;c[d+32+4>>2]=0;c[d+32+8>>2]=0;c[d+32+12>>2]=0;g[b>>2]=1.0;Mb[c[(c[a>>2]|0)+68>>2]&127](d+16|0,a,d+32|0);g[a+40>>2]=+g[d+16+4>>2]+ +g[a+16>>2];g[b>>2]=-1.0;Mb[c[(c[a>>2]|0)+68>>2]&127](d,a,d+32|0);c[d+16>>2]=c[d>>2];c[d+16+4>>2]=c[d+4>>2];c[d+16+8>>2]=c[d+8>>2];c[d+16+12>>2]=c[d+12>>2];g[a+24>>2]=+g[d+16+4>>2]-+g[a+16>>2];c[d+32>>2]=0;c[d+32+4>>2]=0;c[d+32+8>>2]=0;c[d+32+12>>2]=0;g[d+32+8>>2]=1.0;Mb[c[(c[a>>2]|0)+68>>2]&127](d+16|0,a,d+32|0);g[a+44>>2]=+g[d+16+8>>2]+ +g[a+16>>2];g[d+32+8>>2]=-1.0;Mb[c[(c[a>>2]|0)+68>>2]&127](d,a,d+32|0);c[d+16>>2]=c[d>>2];c[d+16+4>>2]=c[d+4>>2];c[d+16+8>>2]=c[d+8>>2];c[d+16+12>>2]=c[d+12>>2];g[a+28>>2]=+g[d+16+8>>2]-+g[a+16>>2];l=d;return}function ag(){var b=0;b=yq(324)|0;c[b>>2]=6888;c[b+132>>2]=0;c[b+132+4>>2]=0;c[b+132+8>>2]=0;c[b+132+12>>2]=0;c[b+132+16>>2]=0;c[b+132+20>>2]=0;c[b+132+24>>2]=0;c[b+132+28>>2]=0;c[b+164>>2]=1065353216;c[b+168>>2]=1065353216;c[b+172>>2]=1065353216;g[b+176>>2]=0.0;c[b+180>>2]=0;g[b+184>>2]=999999984306749440.0;c[b+188>>2]=0;c[b+188+4>>2]=0;c[b+188+8>>2]=0;c[b+188+12>>2]=0;c[b+204>>2]=1;c[b+208>>2]=-1;c[b+212>>2]=-1;c[b+216>>2]=-1;c[b+220>>2]=1;g[b+224>>2]=0.0;g[b+228>>2]=.5;g[b+232>>2]=0.0;g[b+236>>2]=0.0;g[b+240>>2]=0.0;g[b+244>>2]=.10000000149011612;g[b+248>>2]=1.0e4;c[b+252>>2]=1;c[b+256>>2]=0;c[b+260>>2]=-1;c[b+264>>2]=-1;g[b+268>>2]=1.0;g[b+272>>2]=0.0;g[b+276>>2]=0.0;c[b+280>>2]=0;a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;c[b+292>>2]=0;c[b+304>>2]=0;c[b+4>>2]=1065353216;c[b+8>>2]=0;c[b+8+4>>2]=0;c[b+8+8>>2]=0;c[b+8+12>>2]=0;c[b+24>>2]=1065353216;c[b+28>>2]=0;c[b+28+4>>2]=0;c[b+28+8>>2]=0;c[b+28+12>>2]=0;c[b+44>>2]=1065353216;c[b+48>>2]=0;c[b+48+4>>2]=0;c[b+48+8>>2]=0;c[b+48+12>>2]=0;c[b+48+16>>2]=0;c[b+68>>2]=1065353216;c[b+72>>2]=0;c[b+72+4>>2]=0;c[b+72+8>>2]=0;c[b+72+12>>2]=0;c[b+88>>2]=1065353216;c[b+92>>2]=0;c[b+92+4>>2]=0;c[b+92+8>>2]=0;c[b+92+12>>2]=0;c[b+108>>2]=1065353216;c[b+112>>2]=0;c[b+112+4>>2]=0;c[b+112+8>>2]=0;c[b+112+12>>2]=0;c[b+112+16>>2]=0;return b|0}function bg(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,m=0,n=0,o=0;o=l;l=l+16|0;j=c[a+12>>2]|0;k=c[j+(((d+b|0)/2|0)<<4)>>2]|0;m=c[j+(((d+b|0)/2|0)<<4)+4>>2]|0;n=c[j+(((d+b|0)/2|0)<<4)+8>>2]|0;f=d;e=b;while(1){while(1){i=j+(e<<4)|0;g=c[j+(e<<4)+4>>2]|0;if((g|0)>=(m|0)){if((g|0)!=(m|0))break;g=c[i>>2]|0;if((g|0)>=(k|0)){if((g|0)!=(k|0))break;if((c[j+(e<<4)+8>>2]|0)>=(n|0))break}}e=e+1|0}while(1){h=j+(f<<4)|0;g=c[j+(f<<4)+4>>2]|0;if((m|0)>=(g|0)){if((m|0)!=(g|0))break;g=c[h>>2]|0;if((k|0)>=(g|0)){if((k|0)!=(g|0))break;if((n|0)>=(c[j+(f<<4)+8>>2]|0))break}}f=f+-1|0}if((e|0)<=(f|0)){c[o>>2]=c[i>>2];c[o+4>>2]=c[i+4>>2];c[o+8>>2]=c[i+8>>2];c[o+12>>2]=c[i+12>>2];c[i>>2]=c[h>>2];c[i+4>>2]=c[h+4>>2];c[i+8>>2]=c[h+8>>2];c[i+12>>2]=c[h+12>>2];j=(c[a+12>>2]|0)+(f<<4)|0;c[j>>2]=c[o>>2];c[j+4>>2]=c[o+4>>2];c[j+8>>2]=c[o+8>>2];c[j+12>>2]=c[o+12>>2];f=f+-1|0;e=e+1|0}if((e|0)>(f|0))break;j=c[a+12>>2]|0}if((f|0)>(b|0))bg(a,b,f);if((e|0)>=(d|0)){l=o;return}bg(a,e,d);l=o;return}function cg(a){a=a|0;var b=0,d=0,e=0.0,f=0.0,h=0.0,i=0,j=0;i=c[a+28>>2]|0;e=0.0;f=0.0;h=0.0;j=0;a:while(1){switch(j&2147483647|0){case 0:{e=+g[a+80>>2]+ +g[a+64>>2];f=+g[a+84>>2]+ +g[a+68>>2];h=+g[a+88>>2]+ +g[a+72>>2];break}case 1:{e=+g[a+80>>2]+ +g[a+64>>2];f=+g[a+84>>2]+ +g[a+68>>2];h=+g[a+72>>2]-+g[a+88>>2];break}case 2:{e=+g[a+80>>2]+ +g[a+64>>2];f=+g[a+68>>2]-+g[a+84>>2];h=+g[a+88>>2]+ +g[a+72>>2];break}case 3:{e=+g[a+80>>2]+ +g[a+64>>2];f=+g[a+68>>2]-+g[a+84>>2];h=+g[a+72>>2]-+g[a+88>>2];break}case 4:{e=+g[a+64>>2]-+g[a+80>>2];f=+g[a+84>>2]+ +g[a+68>>2];h=+g[a+88>>2]+ +g[a+72>>2];break}case 5:{e=+g[a+64>>2]-+g[a+80>>2];f=+g[a+84>>2]+ +g[a+68>>2];h=+g[a+72>>2]-+g[a+88>>2];break}case 6:{e=+g[a+64>>2]-+g[a+80>>2];f=+g[a+68>>2]-+g[a+84>>2];h=+g[a+88>>2]+ +g[a+72>>2];break}case 7:{e=+g[a+64>>2]-+g[a+80>>2];f=+g[a+68>>2]-+g[a+84>>2];h=+g[a+72>>2]-+g[a+88>>2];break}default:{}}if((i|0)>0){d=c[a+36>>2]|0;b=0;do{if(+g[d+(b*36|0)+32>>2]+(e*+g[d+(b*36|0)+20>>2]+f*+g[d+(b*36|0)+24>>2]+h*+g[d+(b*36|0)+28>>2])>0.0){b=0;d=16;break a}b=b+1|0}while((b|0)<(i|0))}j=j+1|0;if(j>>>0>=8){b=1;d=16;break}}if((d|0)==16)return b|0;return 0}function dg(a,b){a=a|0;b=b|0;var d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0;d=+g[a+1364+(b<<2)>>2];h=+g[a+968+(b*88|0)>>2];i=+g[a+968+(b*88|0)+4>>2];do if(!(h>=i)){if(d<h){if(!((h-d)%6.2831854820251465<-3.1415927410125732))if((h-d)%6.2831854820251465>3.1415927410125732)e=(h-d)%6.2831854820251465+-6.2831854820251465;else e=(h-d)%6.2831854820251465;else e=(h-d)%6.2831854820251465+6.2831854820251465;f=+A(+e);if(!((i-d)%6.2831854820251465<-3.1415927410125732))if((i-d)%6.2831854820251465>3.1415927410125732)e=(i-d)%6.2831854820251465+-6.2831854820251465;else e=(i-d)%6.2831854820251465;else e=(i-d)%6.2831854820251465+6.2831854820251465;j=f<+A(+e);d=j?d:d+6.2831854820251465;break}if(d>i){if(!((d-i)%6.2831854820251465<-3.1415927410125732))if((d-i)%6.2831854820251465>3.1415927410125732)e=(d-i)%6.2831854820251465+-6.2831854820251465;else e=(d-i)%6.2831854820251465;else e=(d-i)%6.2831854820251465+6.2831854820251465;f=+A(+e);if(!((d-h)%6.2831854820251465<-3.1415927410125732))if((d-h)%6.2831854820251465>3.1415927410125732)e=(d-h)%6.2831854820251465+-6.2831854820251465;else e=(d-h)%6.2831854820251465;else e=(d-h)%6.2831854820251465+6.2831854820251465;j=+A(+e)<f;d=j?d+-6.2831854820251465:d}}while(0);g[a+968+(b*88|0)+80>>2]=d;if(h>i){c[a+968+(b*88|0)+84>>2]=0;g[a+968+(b*88|0)+72>>2]=0.0;return}g[a+968+(b*88|0)+72>>2]=d-h;if(h==i){c[a+968+(b*88|0)+84>>2]=3;return}else{g[a+968+(b*88|0)+76>>2]=d-i;c[a+968+(b*88|0)+84>>2]=4;return}}function eg(a,b,d,e,f,h,i){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;var k=0.0,m=0.0,n=0,o=0.0,p=0.0,q=0,r=0,s=0.0,t=0;r=l;l=l+16|0;g[e>>2]=3402823466385288598117041.0e14;g[f>>2]=-3402823466385288598117041.0e14;q=c[a+8>>2]|0;if((q|0)>0){n=0;do{t=c[a+16>>2]|0;s=+g[t+(n<<4)>>2];p=+g[t+(n<<4)+4>>2];o=+g[t+(n<<4)+8>>2];k=s*+g[b>>2]+p*+g[b+4>>2]+o*+g[b+8>>2]+ +g[b+48>>2];m=s*+g[b+16>>2]+p*+g[b+20>>2]+o*+g[b+24>>2]+ +g[b+52>>2];o=s*+g[b+32>>2]+p*+g[b+36>>2]+o*+g[b+40>>2]+ +g[b+56>>2];p=k*+g[d>>2]+m*+g[d+4>>2]+o*+g[d+8>>2];if(p<+g[e>>2]){g[e>>2]=p;g[h>>2]=k;g[h+4>>2]=m;g[h+8>>2]=o;g[h+12>>2]=0.0}if(p>+g[f>>2]){g[f>>2]=p;g[i>>2]=k;g[i+4>>2]=m;g[i+8>>2]=o;g[i+12>>2]=0.0}n=n+1|0}while((n|0)!=(q|0));s=+g[f>>2];m=s;n=(g[j>>2]=s,c[j>>2]|0)}else{m=-3402823466385288598117041.0e14;n=-8388609}k=+g[e>>2];if(!(k>m)){l=r;return}c[e>>2]=n;g[f>>2]=k;c[r>>2]=c[h>>2];c[r+4>>2]=c[h+4>>2];c[r+8>>2]=c[h+8>>2];c[r+12>>2]=c[h+12>>2];c[h>>2]=c[i>>2];c[h+4>>2]=c[i+4>>2];c[h+8>>2]=c[i+8>>2];c[h+12>>2]=c[i+12>>2];c[i>>2]=c[r>>2];c[i+4>>2]=c[r+4>>2];c[i+8>>2]=c[r+8>>2];c[i+12>>2]=c[r+12>>2];l=r;return}function fg(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0,v=0,w=0,x=0,y=0;if((c[a>>2]|0)==(b|0)){c[a>>2]=0;a=0;return a|0}e=c[b+32>>2]|0;d=c[e+32>>2]|0;b=c[e+36+(((c[e+40>>2]|0)!=(b|0)&1)<<2)>>2]|0;if(!d){c[a>>2]=b;c[b+32>>2]=0;d=c[a+4>>2]|0;if(!d)d=b;else{c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);d=c[a>>2]|0}c[a+4>>2]=e;a=d;return a|0}c[d+36+(((c[d+40>>2]|0)==(e|0)&1)<<2)>>2]=b;c[b+32>>2]=d;b=c[a+4>>2]|0;if(b|0){c[6486]=(c[6486]|0)+1;gd(c[b+-4>>2]|0)}c[a+4>>2]=e;do{q=+g[d>>2];x=d+4|0;o=+g[x>>2];v=d+8|0;m=+g[v>>2];y=d+16|0;s=+g[y>>2];w=d+20|0;k=+g[w>>2];e=d+24|0;i=+g[e>>2];u=c[d+36>>2]|0;b=c[d+40>>2]|0;t=+g[u>>2];p=+g[b>>2];p=t<p?t:p;g[d>>2]=p;t=+g[u+16>>2];r=+g[b+16>>2];r=t>r?t:r;g[y>>2]=r;t=+g[u+4>>2];n=+g[b+4>>2];n=t<n?t:n;g[x>>2]=n;t=+g[u+20>>2];j=+g[b+20>>2];j=t>j?t:j;g[w>>2]=j;t=+g[u+8>>2];l=+g[b+8>>2];l=t<l?t:l;g[v>>2]=l;t=+g[u+24>>2];h=+g[b+24>>2];h=t>h?t:h;g[e>>2]=h;if(!(s!=r|(q!=p|o!=n|m!=l))?!(k!=j|i!=h):0){f=14;break}d=c[d+32>>2]|0}while((d|0)!=0);if((f|0)==14)return d|0;y=c[a>>2]|0;return y|0}function gg(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0;f=c[a+548>>2]|0;if((f|0)<=0)return;g=c[a+556>>2]|0;d=0;while(1){if((c[g+(d<<2)>>2]|0)==(b|0))break;d=d+1|0;if((d|0)>=(f|0)){e=26;break}}if((e|0)==26)return;if((d|0)>=(f|0))return;d=0;while(1){if((c[g+(d<<2)>>2]|0)==(b|0))break;d=d+1|0;if((d|0)>=(f|0)){d=f;break}}if((f|0)>(d|0)){d=g+(d<<2)|0;e=c[d>>2]|0;c[d>>2]=c[g+(f+-1<<2)>>2];c[(c[a+556>>2]|0)+(f+-1<<2)>>2]=e;c[a+548>>2]=f+-1}g=c[b+28>>2]|0;b=c[b+32>>2]|0;if((g|0)==(a|0)){d=c[a+288>>2]|0;a:do if((d|0)>0){f=c[a+296>>2]|0;e=0;while(1){if((c[f+(e<<2)>>2]|0)==(b|0))break a;e=e+1|0;if((e|0)>=(d|0)){e=d;break}}}else e=d;while(0);if((d|0)>(e|0)){f=c[a+296>>2]|0;g=f+(e<<2)|0;b=c[g>>2]|0;c[g>>2]=c[f+(d+-1<<2)>>2];c[(c[a+296>>2]|0)+(d+-1<<2)>>2]=b;c[a+288>>2]=d+-1;d=d+-1|0}c[a+280>>2]=(d|0)>0&1;return}else{d=c[b+288>>2]|0;b:do if((d|0)>0){f=c[b+296>>2]|0;e=0;while(1){if((c[f+(e<<2)>>2]|0)==(g|0))break b;e=e+1|0;if((e|0)>=(d|0)){e=d;break}}}else e=d;while(0);if((d|0)>(e|0)){f=c[b+296>>2]|0;g=f+(e<<2)|0;a=c[g>>2]|0;c[g>>2]=c[f+(d+-1<<2)>>2];c[(c[b+296>>2]|0)+(d+-1<<2)>>2]=a;c[b+288>>2]=d+-1;d=d+-1|0}c[b+280>>2]=(d|0)>0&1;return}}function hg(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,m=0;m=l;l=l+32|0;j=(a[b+68>>0]|0)!=0;k=j?e:d;j=j?d:e;h=c[k+4>>2]|0;i=c[h+20>>2]|0;g=c[b+52>>2]|0;if((g|0)<(i|0)){if((c[b+56>>2]|0)<(i|0)){if(!i){d=0;f=g}else{c[6485]=(c[6485]|0)+1;d=ec((i<<2|3)+16|0)|0;if(!d)d=0;else{c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16}f=c[b+52>>2]|0}if((f|0)>0){e=0;do{c[d+(e<<2)>>2]=c[(c[b+60>>2]|0)+(e<<2)>>2];e=e+1|0}while((e|0)!=(f|0))}e=c[b+60>>2]|0;if(e|0){if(a[b+64>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[b+60>>2]=0}a[b+64>>0]=1;c[b+60>>2]=d;c[b+56>>2]=i;e=b+60|0}else e=b+60|0;d=g;do{c[(c[e>>2]|0)+(d<<2)>>2]=0;d=d+1|0}while((d|0)!=(i|0))}c[b+52>>2]=i;if((i|0)<=0){l=m;return}d=0;do{if(!(c[h+68>>2]|0)){e=c[(c[h+28>>2]|0)+(d*80|0)+64>>2]|0;f=c[k+8>>2]|0;g=c[k+12>>2]|0;c[m>>2]=k;c[m+4>>2]=e;c[m+8>>2]=f;c[m+12>>2]=g;c[m+16>>2]=-1;c[m+20>>2]=d;g=c[b+4>>2]|0;g=yb[c[(c[g>>2]|0)+8>>2]&1](g,m,j,c[b+72>>2]|0,1)|0;c[(c[b+60>>2]|0)+(d<<2)>>2]=g}else c[(c[b+60>>2]|0)+(d<<2)>>2]=0;d=d+1|0}while((d|0)!=(i|0));l=m;return}function ig(a,b,e){a=a|0;b=b|0;e=e|0;Og(a,b,e)|0;c[b+52>>2]=c[a+48>>2];c[b+56>>2]=c[a+52>>2];c[b+60>>2]=c[a+56>>2];c[b+64>>2]=c[a+60>>2];c[b+68>>2]=c[a+64>>2];c[b+72>>2]=c[a+68>>2];c[b+76>>2]=c[a+72>>2];c[b+80>>2]=c[a+76>>2];c[b+84>>2]=c[a+80>>2];c[b+88>>2]=c[a+84>>2];c[b+92>>2]=c[a+88>>2];c[b+96>>2]=c[a+92>>2];c[b+100>>2]=c[a+96>>2];c[b+104>>2]=c[a+100>>2];c[b+108>>2]=c[a+104>>2];c[b+112>>2]=c[a+108>>2];c[b+116>>2]=c[a+112>>2];c[b+120>>2]=c[a+116>>2];c[b+124>>2]=c[a+120>>2];c[b+128>>2]=c[a+124>>2];c[b+132>>2]=c[a+128>>2];c[b+136>>2]=c[a+132>>2];c[b+140>>2]=c[a+136>>2];c[b+144>>2]=c[a+140>>2];c[b+148>>2]=c[a+144>>2];c[b+152>>2]=c[a+148>>2];c[b+156>>2]=c[a+152>>2];c[b+160>>2]=c[a+156>>2];c[b+164>>2]=c[a+160>>2];c[b+168>>2]=c[a+164>>2];c[b+172>>2]=c[a+168>>2];c[b+176>>2]=c[a+172>>2];c[b+228>>2]=c[a+868>>2];c[b+212>>2]=c[a+872>>2];c[b+196>>2]=c[a+680>>2];c[b+180>>2]=c[a+696>>2];c[b+232>>2]=c[a+932>>2];c[b+216>>2]=c[a+936>>2];c[b+200>>2]=c[a+684>>2];c[b+184>>2]=c[a+700>>2];c[b+236>>2]=c[a+996>>2];c[b+220>>2]=c[a+1e3>>2];c[b+204>>2]=c[a+688>>2];c[b+188>>2]=c[a+704>>2];c[b+244>>2]=d[a+1300>>0];c[b+248>>2]=d[a+1301>>0];return 12820}function jg(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0;e=c[b+32>>2]|0;if(!e)f=0;else f=c[b+40>>2]|0;i=c[b+52>>2]|0;if(!i)g=0;else g=c[b+60>>2]|0;d=c[b+72>>2]|0;if(!d)h=0;else h=c[b+80>>2]|0;j=c[b+8>>2]|0;+rb[c[(c[j>>2]|0)+12>>2]&3](j,f,e,g,i,h,d,c[b+4>>2]|0,c[b+20>>2]|0,c[b+24>>2]|0);d=c[b+32>>2]|0;if((d|0)<0){if((c[b+36>>2]|0)<0){e=c[b+40>>2]|0;if(e|0){if(a[b+44>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[b+40>>2]=0}a[b+44>>0]=1;c[b+40>>2]=0;c[b+36>>2]=0}do{c[(c[b+40>>2]|0)+(d<<2)>>2]=0;d=d+1|0}while((d|0)!=0)}c[b+32>>2]=0;d=c[b+52>>2]|0;if((d|0)<0){if((c[b+56>>2]|0)<0){e=c[b+60>>2]|0;if(e|0){if(a[b+64>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[b+60>>2]=0}a[b+64>>0]=1;c[b+60>>2]=0;c[b+56>>2]=0}do{c[(c[b+60>>2]|0)+(d<<2)>>2]=0;d=d+1|0}while((d|0)!=0)}c[b+52>>2]=0;d=c[b+72>>2]|0;if((d|0)>=0){c[b+72>>2]=0;return}if((c[b+76>>2]|0)<0){e=c[b+80>>2]|0;if(e|0){if(a[b+84>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[b+80>>2]=0}a[b+84>>0]=1;c[b+80>>2]=0;c[b+76>>2]=0}do{c[(c[b+80>>2]|0)+(d<<2)>>2]=0;d=d+1|0}while((d|0)!=0);c[b+72>>2]=0;return}function kg(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;e=c[b+4>>2]|0;if((e|0)==(c[b+8>>2]|0)){We(b,(e|0)==0?1:e<<1);e=c[b+4>>2]|0}o=c[b+12>>2]|0;j=o+(e*36|0)+16|0;a[j>>0]=1;k=o+(e*36|0)+12|0;c[k>>2]=0;l=o+(e*36|0)+4|0;c[l>>2]=0;m=o+(e*36|0)+8|0;c[m>>2]=0;p=c[d+4>>2]|0;if((p|0)<=0){c[l>>2]=p;p=o+(e*36|0)+20|0;d=d+20|0;c[p>>2]=c[d>>2];c[p+4>>2]=c[d+4>>2];c[p+8>>2]=c[d+8>>2];c[p+12>>2]=c[d+12>>2];d=c[b+4>>2]|0;d=d+1|0;c[b+4>>2]=d;return}c[6485]=(c[6485]|0)+1;f=ec((p<<2|3)+16|0)|0;if(!f)g=0;else{c[(f+4+15&-16)+-4>>2]=f;g=f+4+15&-16}h=c[l>>2]|0;i=c[k>>2]|0;if((h|0)<=0){if(i|0)n=10}else{f=0;do{c[g+(f<<2)>>2]=c[i+(f<<2)>>2];f=f+1|0}while((f|0)!=(h|0));n=10}if((n|0)==10?a[j>>0]|0:0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}a[j>>0]=1;c[k>>2]=g;c[m>>2]=p;uj(g|0,0,p<<2|0)|0;c[l>>2]=p;g=c[k>>2]|0;h=c[d+12>>2]|0;f=0;do{c[g+(f<<2)>>2]=c[h+(f<<2)>>2];f=f+1|0}while((f|0)!=(p|0));p=o+(e*36|0)+20|0;d=d+20|0;c[p>>2]=c[d>>2];c[p+4>>2]=c[d+4>>2];c[p+8>>2]=c[d+8>>2];c[p+12>>2]=c[d+12>>2];d=c[b+4>>2]|0;d=d+1|0;c[b+4>>2]=d;return}function lg(a,b,d,e,f,h){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0,k=0,l=0,m=0.0,n=0,o=0,p=0.0,q=0.0;Pb[c[(c[a>>2]|0)+8>>2]&127](a,b,f,h);n=c[h>>2]|0;k=c[h+4>>2]|0;b=c[h+8>>2]|0;l=c[f>>2]|0;o=c[f+4>>2]|0;i=c[f+8>>2]|0;m=+g[d>>2];p=+g[d+4>>2];q=+g[d+8>>2];if(m>0.0)n=(g[j>>2]=m+(c[j>>2]=n,+g[j>>2]),c[j>>2]|0);else l=(g[j>>2]=m+(c[j>>2]=l,+g[j>>2]),c[j>>2]|0);if(p>0.0){d=o;k=(g[j>>2]=p+(c[j>>2]=k,+g[j>>2]),c[j>>2]|0)}else d=(g[j>>2]=p+(c[j>>2]=o,+g[j>>2]),c[j>>2]|0);if(q>0.0)b=(g[j>>2]=q+(c[j>>2]=b,+g[j>>2]),c[j>>2]|0);else i=(g[j>>2]=q+(c[j>>2]=i,+g[j>>2]),c[j>>2]|0);m=+g[e>>2];p=+g[e+4>>2];q=+g[e+8>>2];q=+B(+(m*m+p*p+q*q));q=q*+ib[c[(c[a>>2]|0)+16>>2]&15](a);c[f>>2]=l;c[f+4>>2]=d;c[f+8>>2]=i;g[f+12>>2]=0.0;c[h>>2]=n;c[h+4>>2]=k;c[h+8>>2]=b;g[h+12>>2]=0.0;g[f>>2]=+g[f>>2]-q;g[f+4>>2]=+g[f+4>>2]-q;g[f+8>>2]=+g[f+8>>2]-q;g[h>>2]=q+ +g[h>>2];g[h+4>>2]=q+ +g[h+4>>2];g[h+8>>2]=q+ +g[h+8>>2];return}function mg(b,d){b=b|0;d=d|0;var e=0,f=0,h=0.0,i=0,j=0,k=0.0,l=0.0;e=c[d+204>>2]|0;if((e&3|0)==0?(c[d+564>>2]&1|0)==0:0){h=+g[d+404>>2];if(h!=0.0){l=1.0/h*+g[b+268>>2];k=1.0/h*+g[b+272>>2];g[d+424>>2]=1.0/h*+g[b+264>>2];g[d+428>>2]=l;g[d+432>>2]=k;g[d+436>>2]=0.0}c[d+440>>2]=c[b+264>>2];c[d+440+4>>2]=c[b+264+4>>2];c[d+440+8>>2]=c[b+264+8>>2];c[d+440+12>>2]=c[b+264+12>>2]}if(!(c[d+192>>2]|0))return;if(e&1)if((c[d+220>>2]&-2|0)==4)e=e&3;else{c[d+220>>2]=2;e=e&3}else{f=c[b+248>>2]|0;if((f|0)==(c[b+252>>2]|0)?(j=(f|0)==0?1:f<<1,(f|0)<(j|0)):0){if(!j)e=0;else{c[6485]=(c[6485]|0)+1;e=ec((j<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}f=c[b+248>>2]|0}if((f|0)>0){i=0;do{c[e+(i<<2)>>2]=c[(c[b+256>>2]|0)+(i<<2)>>2];i=i+1|0}while((i|0)!=(f|0))}i=c[b+256>>2]|0;if(i){if(a[b+260>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0);f=c[b+248>>2]|0}c[b+256>>2]=0}a[b+260>>0]=1;c[b+256>>2]=e;c[b+252>>2]=j;e=c[d+204>>2]&3}else e=e&3;c[(c[b+256>>2]|0)+(f<<2)>>2]=d;c[b+248>>2]=f+1}j=(e|0)!=0;Pb[c[(c[b>>2]|0)+36>>2]&127](b,d,j?2:1,j?-3:-1);return}function ng(b){b=b|0;var d=0,e=0.0,f=0,h=0,i=0.0,j=0.0,k=0;k=l;l=l+64|0;if(!(a[b+290>>0]|0)){d=c[b+248>>2]|0;if((d|0)<=0){l=k;return}h=0;do{f=c[(c[b+256>>2]|0)+(h<<2)>>2]|0;switch(c[f+220>>2]|0){case 2:case 5:break;default:if((c[f+540>>2]|0)!=0?(c[f+204>>2]&3|0)==0:0){if((a[b+316>>0]|0)!=0?(j=+g[b+284>>2],j!=0.0):0)e=+g[b+280>>2]-j;else e=+g[b+280>>2]*+g[f+268>>2];Me(f+68|0,+g[f+132>>2],+g[f+136>>2],+g[f+140>>2],f+148|0,e,k);d=c[f+540>>2]|0;Ib[c[(c[d>>2]|0)+12>>2]&127](d,k);d=c[b+248>>2]|0}}h=h+1|0}while((h|0)<(d|0));l=k;return}else{d=c[b+8>>2]|0;if((d|0)<=0){l=k;return}h=0;do{f=c[(c[b+16>>2]|0)+(h<<2)>>2]|0;if((!((f|0)==0?1:(c[f+252>>2]&2|0)==0)?(c[f+540>>2]|0)!=0:0)?(c[f+204>>2]&3|0)==0:0){if((a[b+316>>0]|0)!=0?(i=+g[b+284>>2],i!=0.0):0)e=+g[b+280>>2]-i;else e=+g[b+280>>2]*+g[f+268>>2];Me(f+68|0,+g[f+132>>2],+g[f+136>>2],+g[f+140>>2],f+148|0,e,k);d=c[f+540>>2]|0;Ib[c[(c[d>>2]|0)+12>>2]&127](d,k);d=c[b+8>>2]|0}h=h+1|0}while((h|0)<(d|0));l=k;return}}function og(b,e,f,h,i,j){b=b|0;e=e|0;f=f|0;h=h|0;i=i|0;j=j|0;var k=0;if((d[h+55>>0]|0|0)==(e|0)){h=0;return h|0}k=c[11040+(i<<2)>>2]|0;if(+g[h>>2]*+g[f+16>>2]+ +g[h+4>>2]*+g[f+20>>2]+ +g[h+8>>2]*+g[f+24>>2]-+g[h+16>>2]<-9.999999747378752e-06){e=he(b,c[h+20+(k<<2)>>2]|0,c[h+20+(i<<2)>>2]|0,f,0)|0;if(!e){h=0;return h|0}a[e+52>>0]=i;c[e+32>>2]=h;a[h+52+i>>0]=0;c[h+32+(i<<2)>>2]=e;i=c[j>>2]|0;if(!i)c[j+4>>2]=e;else{a[i+53>>0]=2;c[i+36>>2]=e;a[e+54>>0]=1;c[e+40>>2]=i}c[j>>2]=e;c[j+8>>2]=(c[j+8>>2]|0)+1;h=1;return h|0}i=c[11052+(i<<2)>>2]|0;a[h+55>>0]=e;if(!(og(b,e,f,c[h+32+(k<<2)>>2]|0,d[h+52+k>>0]|0,j)|0)){h=0;return h|0}if(!(og(b,e,f,c[h+32+(i<<2)>>2]|0,d[h+52+i>>0]|0,j)|0)){h=0;return h|0}i=c[h+48>>2]|0;if(i|0)c[i+44>>2]=c[h+44>>2];i=c[h+44>>2]|0;if(i|0)c[i+48>>2]=c[h+48>>2];if((c[b+18496>>2]|0)==(h|0))c[b+18496>>2]=c[h+48>>2];c[b+18500>>2]=(c[b+18500>>2]|0)+-1;c[h+44>>2]=0;c[h+48>>2]=c[b+18504>>2];i=c[b+18504>>2]|0;if(i|0)c[i+44>>2]=h;c[b+18504>>2]=h;c[b+18508>>2]=(c[b+18508>>2]|0)+1;h=1;return h|0}function pg(b,d){b=b|0;d=+d;var e=0,f=0,h=0,i=0,j=0,k=0,l=0.0,m=0.0,n=0.0,o=0.0;e=c[b+248>>2]|0;if((e|0)<=0)return;k=(a[26532]|0)==0;j=0;do{i=c[(c[b+256>>2]|0)+(j<<2)>>2]|0;a:do if(i){f=c[i+220>>2]|0;b:do switch(f|0){case 4:case 2:{if((f|0)==4)break a;break}default:{o=+g[i+372>>2];n=+g[i+376>>2];m=+g[i+380>>2];l=+g[i+532>>2];if(o*o+n*n+m*m<l*l?(l=+g[i+388>>2],m=+g[i+392>>2],n=+g[i+396>>2],o=+g[i+536>>2],l*l+m*m+n*n<o*o):0){g[i+224>>2]=+g[i+224>>2]+d;break b}g[i+224>>2]=0.0;if((f&-2|0)!=4){c[i+220>>2]=0;f=0}}}while(0);h=f&-2;do if(k){if((h|0)!=2?!(+g[i+224>>2]>2.0):0)break;if(c[i+204>>2]&3|0){if((h|0)==4)break a;c[i+220>>2]=2;break a}if((f|0)==1){c[i+220>>2]=3;break a}if((f|0)!=2)break a;e=(c[i+304>>2]|0)+2|0;c[i+388>>2]=0;c[i+388+4>>2]=0;c[i+388+8>>2]=0;c[i+388+12>>2]=0;c[i+304>>2]=e;c[i+372>>2]=0;c[i+372+4>>2]=0;c[i+372+8>>2]=0;c[i+372+12>>2]=0;e=c[b+248>>2]|0;break a}while(0);if((h|0)!=4)c[i+220>>2]=1}while(0);j=j+1|0}while((j|0)<(e|0));return}function qg(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0,j=0,k=0,m=0.0,n=0.0,o=0,p=0,q=0.0,r=0;p=l;l=l+2048|0;c[a>>2]=0;c[a+4>>2]=0;c[a+8>>2]=0;c[a+12>>2]=0;e=+g[d>>2];h=+g[d+4>>2];f=+g[d+8>>2];if(e*e+h*h+f*f<9.999999747378752e-05){n=1.0;m=0.0;h=0.0}else{q=1.0/+B(+(e*e+h*h+f*f));n=e*q;m=h*q;h=f*q}if((sb[c[(c[b>>2]|0)+96>>2]&127](b)|0)<=0){l=p;return}k=0;f=-999999984306749440.0;while(1){if(((sb[c[(c[b>>2]|0)+96>>2]&127](b)|0)-k|0)<128){d=(sb[c[(c[b>>2]|0)+96>>2]&127](b)|0)-k|0;if((d|0)>0)o=8;else{e=-3402823466385288598117041.0e14;d=-1}}else{d=128;o=8}if((o|0)==8){o=0;i=0;do{Mb[c[(c[b>>2]|0)+108>>2]&127](b,i,p+(i<<4)|0);i=i+1|0}while((i|0)!=(d|0));i=-1;j=0;e=-3402823466385288598117041.0e14;do{q=n*+g[p+(j<<4)>>2]+m*+g[p+(j<<4)+4>>2]+h*+g[p+(j<<4)+8>>2];r=q>e;i=r?j:i;e=r?q:e;j=j+1|0}while((j|0)!=(d|0));d=i}if(e>f){r=p+(d<<4)|0;c[a>>2]=c[r>>2];c[a+4>>2]=c[r+4>>2];c[a+8>>2]=c[r+8>>2];c[a+12>>2]=c[r+12>>2]}else e=f;k=k+128|0;if((k|0)>=(sb[c[(c[b>>2]|0)+96>>2]&127](b)|0))break;else f=e}l=p;return}function rg(a,d,f,g){a=a|0;d=d|0;f=f|0;g=g|0;var h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;i=c[a+68+(d<<2)>>2]|0;j=b[i+((f&65535)<<2)+-4>>1]|0;if((e[i+((f&65535)<<2)>>1]|0)>=(j&65535))return;k=c[a+60>>2]|0;m=k+((e[i+((f&65535)<<2)+2>>1]|0)<<6)+54+(d<<1)|0;h=i+((f&65535)<<2)+-4|0;l=i+((f&65535)<<2)|0;while(1){i=e[l+-2>>1]|0;if(!(j&1)){f=e[l+2>>1]|0;if(((((e[k+(f<<6)+54+((1<<d&3)<<1)>>1]|0)>=(e[k+(i<<6)+48+((1<<d&3)<<1)>>1]|0)?(e[k+(i<<6)+54+((1<<d&3)<<1)>>1]|0)>=(e[k+(f<<6)+48+((1<<d&3)<<1)>>1]|0):0)?(e[k+(f<<6)+54+((1<<(1<<d&3)&3)<<1)>>1]|0)>=(e[k+(i<<6)+48+((1<<(1<<d&3)&3)<<1)>>1]|0):0)?(e[k+(i<<6)+54+((1<<(1<<d&3)&3)<<1)>>1]|0)>=(e[k+(f<<6)+48+((1<<(1<<d&3)&3)<<1)>>1]|0):0)?(p=c[a+92>>2]|0,n=k+(f<<6)|0,o=k+(i<<6)|0,xb[c[(c[p>>2]|0)+12>>2]&31](p,n,o,g)|0,p=c[a+96>>2]|0,p|0):0)xb[c[(c[p>>2]|0)+12>>2]&31](p,n,o,g)|0;f=k+(i<<6)+48+(d<<1)|0}else f=k+(i<<6)+54+(d<<1)|0;b[f>>1]=(b[f>>1]|0)+1<<16>>16;b[m>>1]=(b[m>>1]|0)+-1<<16>>16;f=e[l>>1]|e[l+2>>1]<<16;j=e[h>>1]|e[h+2>>1]<<16;b[l>>1]=j;b[l+2>>1]=j>>>16;b[h>>1]=f;b[h+2>>1]=f>>>16;f=l+-4|0;h=h+-4|0;j=b[h>>1]|0;if((e[f>>1]|0)>=(j&65535))break;l=f;k=c[a+60>>2]|0}return}function sg(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0,i=0.0,j=0,k=0,l=0,m=0.0,n=0.0;h=c[d+204>>2]|0;if((h&3|0)==0?(c[d+564>>2]&1|0)==0:0){i=+g[d+404>>2];if(i!=0.0){n=1.0/i*+g[b+268>>2];m=1.0/i*+g[b+272>>2];g[d+424>>2]=1.0/i*+g[b+264>>2];g[d+428>>2]=n;g[d+432>>2]=m;g[d+436>>2]=0.0}c[d+440>>2]=c[b+264>>2];c[d+440+4>>2]=c[b+264+4>>2];c[d+440+8>>2]=c[b+264+8>>2];c[d+440+12>>2]=c[b+264+12>>2]}if(!(c[d+192>>2]|0))return;if(h&1){if((c[d+220>>2]&-2|0)!=4)c[d+220>>2]=2}else{h=c[b+248>>2]|0;if((h|0)==(c[b+252>>2]|0)?(l=(h|0)==0?1:h<<1,(h|0)<(l|0)):0){if(!l)k=0;else{c[6485]=(c[6485]|0)+1;h=ec((l<<2|3)+16|0)|0;if(!h)h=0;else{c[(h+4+15&-16)+-4>>2]=h;h=h+4+15&-16}k=h;h=c[b+248>>2]|0}if((h|0)>0){j=0;do{c[k+(j<<2)>>2]=c[(c[b+256>>2]|0)+(j<<2)>>2];j=j+1|0}while((j|0)!=(h|0))}j=c[b+256>>2]|0;if(j){if(a[b+260>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0);h=c[b+248>>2]|0}c[b+256>>2]=0}a[b+260>>0]=1;c[b+256>>2]=k;c[b+252>>2]=l}c[(c[b+256>>2]|0)+(h<<2)>>2]=d;c[b+248>>2]=h+1}Pb[c[(c[b>>2]|0)+36>>2]&127](b,d,e,f);return}function tg(a,d,f){a=a|0;d=d|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0;g=c[a+68+(d<<2)>>2]|0;l=c[a+60>>2]|0;m=e[g+((f&65535)<<2)+2>>1]|0;h=b[g+((f&65535)<<2)+6>>1]|0;if(!(h<<16>>16))return;k=g+((f&65535)<<2)|0;while(1){j=k;k=k+4|0;g=b[k>>1]|0;if((e[j>>1]|0)<(g&65535)){f=14;break}i=c[a+60>>2]|0;f=h&65535;if(!(g&1)){if(((((e[l+(m<<6)+54+((1<<d&3)<<1)>>1]|0)>=(e[i+(f<<6)+48+((1<<d&3)<<1)>>1]|0)?(e[i+(f<<6)+54+((1<<d&3)<<1)>>1]|0)>=(e[l+(m<<6)+48+((1<<d&3)<<1)>>1]|0):0)?(e[l+(m<<6)+54+((1<<(1<<d&3)&3)<<1)>>1]|0)>=(e[i+(f<<6)+48+((1<<(1<<d&3)&3)<<1)>>1]|0):0)?(e[i+(f<<6)+54+((1<<(1<<d&3)&3)<<1)>>1]|0)>=(e[l+(m<<6)+48+((1<<(1<<d&3)&3)<<1)>>1]|0):0)?(o=c[a+92>>2]|0,n=i+((e[j+2>>1]|0)<<6)|0,wb[c[(c[o>>2]|0)+8>>2]&63](o,n,i+(f<<6)|0)|0,o=c[a+96>>2]|0,o|0):0)wb[c[(c[o>>2]|0)+8>>2]&63](o,n,i+(f<<6)|0)|0;f=i+(f<<6)+48+(d<<1)|0}else f=i+(f<<6)+54+(d<<1)|0;b[f>>1]=(b[f>>1]|0)+-1<<16>>16;b[l+(m<<6)+54+(d<<1)>>1]=(b[l+(m<<6)+54+(d<<1)>>1]|0)+1<<16>>16;h=e[j>>1]|e[j+2>>1]<<16;i=e[k>>1]|e[k+2>>1]<<16;b[j>>1]=i;b[j+2>>1]=i>>>16;b[k>>1]=h;b[k+2>>1]=h>>>16;h=b[j+10>>1]|0;if(!(h<<16>>16)){f=14;break}}if((f|0)==14)return}function ug(a,d,f,g){a=a|0;d=d|0;f=f|0;g=g|0;var h=0,i=0,j=0,k=0,l=0,m=0,n=0;h=c[a+68+(d<<2)>>2]|0;i=b[h+((f&65535)<<2)+6>>1]|0;if(!(i<<16>>16))return;m=(c[a+60>>2]|0)+((e[h+((f&65535)<<2)+2>>1]|0)<<6)+48+(d<<1)|0;l=h+((f&65535)<<2)|0;while(1){k=l;l=l+4|0;f=b[l>>1]|0;if((e[k>>1]|0)<(f&65535)){f=14;break}j=c[a+60>>2]|0;h=i&65535;if(!(f&1))f=j+(h<<6)+48+(d<<1)|0;else{f=e[k+2>>1]|0;if(((((e[j+(f<<6)+54+((1<<d&3)<<1)>>1]|0)>=(e[j+(h<<6)+48+((1<<d&3)<<1)>>1]|0)?(e[j+(h<<6)+54+((1<<d&3)<<1)>>1]|0)>=(e[j+(f<<6)+48+((1<<d&3)<<1)>>1]|0):0)?(e[j+(f<<6)+54+((1<<(1<<d&3)&3)<<1)>>1]|0)>=(e[j+(h<<6)+48+((1<<(1<<d&3)&3)<<1)>>1]|0):0)?(e[j+(h<<6)+54+((1<<(1<<d&3)&3)<<1)>>1]|0)>=(e[j+(f<<6)+48+((1<<(1<<d&3)&3)<<1)>>1]|0):0)?(n=c[a+92>>2]|0,xb[c[(c[n>>2]|0)+12>>2]&31](n,j+(f<<6)|0,j+(h<<6)|0,g)|0,n=c[a+96>>2]|0,n|0):0)xb[c[(c[n>>2]|0)+12>>2]&31](n,j+(f<<6)|0,j+(h<<6)|0,g)|0;f=j+(h<<6)+54+(d<<1)|0}b[f>>1]=(b[f>>1]|0)+-1<<16>>16;b[m>>1]=(b[m>>1]|0)+1<<16>>16;i=e[k>>1]|e[k+2>>1]<<16;j=e[l>>1]|e[l+2>>1]<<16;b[k>>1]=j;b[k+2>>1]=j>>>16;b[l>>1]=i;b[l+2>>1]=i>>>16;i=b[k+10>>1]|0;if(!(i<<16>>16)){f=14;break}}if((f|0)==14)return}function vg(b,d,e,f,h,i,j,k){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;var l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0,y=0,z=0.0;y=c[(j|0?f+12|0:f+8|0)>>2]|0;x=c[(j|0?f+20|0:f+16|0)>>2]|0;c[y+(h<<2)>>2]=c[i>>2];c[y+(h+1<<2)>>2]=c[i+4>>2];c[y+(h+2<<2)>>2]=c[i+8>>2];g[x+(h<<2)>>2]=-+g[i>>2];g[x+(h+1<<2)>>2]=-+g[i+4>>2];g[x+(h+2<<2)>>2]=-+g[i+8>>2];if(j|0)return;v=+g[b+1348>>2]-+g[e+48>>2];w=+g[b+1352>>2]-+g[e+52>>2];t=+g[b+1356>>2]-+g[e+56>>2];m=+g[b+1284>>2]-+g[d+48>>2];n=+g[b+1288>>2]-+g[d+52>>2];l=+g[b+1292>>2]-+g[d+56>>2];r=+g[i+8>>2];u=+g[i+4>>2];s=+g[i>>2];if((k|0)!=0|(a[b+1452>>0]|0)==0){q=n*r-l*u;p=l*s-m*r;n=m*u-n*s;o=w*r-t*u;m=t*s-v*r;l=v*u-w*s}else{o=+g[b+1444>>2];z=+g[b+1448>>2];q=(n*r-l*u)*o;p=(l*s-m*r)*o;n=(m*u-n*s)*o;o=(w*r-t*u)*z;m=(t*s-v*r)*z;l=(v*u-w*s)*z}y=(c[f+12>>2]|0)+(h<<2)|0;g[y>>2]=q;g[y+4>>2]=p;g[y+8>>2]=n;y=c[f+20>>2]|0;g[y+(h<<2)>>2]=-o;g[y+(h+1<<2)>>2]=-m;g[y+(h+2<<2)>>2]=-l;return}function wg(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0;o=(+g[a+36>>2]-+g[a+20>>2])*.5;l=(+g[a+40>>2]-+g[a+24>>2])*.5;i=(+g[a+44>>2]-+g[a+28>>2])*.5;n=+ib[c[(c[a>>2]|0)+48>>2]&15](a);k=+ib[c[(c[a>>2]|0)+48>>2]&15](a);i=i+ +ib[c[(c[a>>2]|0)+48>>2]&15](a);C=(+g[a+36>>2]+ +g[a+20>>2])*.5;z=(+g[a+40>>2]+ +g[a+24>>2])*.5;x=(+g[a+44>>2]+ +g[a+28>>2])*.5;G=+g[b>>2];w=+A(+G);F=+g[b+4>>2];v=+A(+F);t=+g[b+8>>2];u=+A(+t);E=+g[b+16>>2];s=+A(+E);D=+g[b+20>>2];r=+A(+D);p=+g[b+24>>2];q=+A(+p);B=+g[b+32>>2];m=+A(+B);y=+g[b+36>>2];j=+A(+y);f=+g[b+40>>2];h=+A(+f);t=C*G+z*F+x*t+ +g[b+48>>2];p=C*E+z*D+x*p+ +g[b+52>>2];f=C*B+z*y+x*f+ +g[b+56>>2];g[d>>2]=t-((o+n)*w+(l+k)*v+i*u);g[d+4>>2]=p-((o+n)*s+(l+k)*r+i*q);g[d+8>>2]=f-((o+n)*m+(l+k)*j+i*h);g[d+12>>2]=0.0;g[e>>2]=(o+n)*w+(l+k)*v+i*u+t;g[e+4>>2]=(o+n)*s+(l+k)*r+i*q+p;g[e+8>>2]=(o+n)*m+(l+k)*j+i*h+f;g[e+12>>2]=0.0;return}function xg(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0,H=0.0,I=0.0;I=+g[a+52>>2];z=+g[a+36>>2];H=+g[a+56>>2];x=+g[a+40>>2];F=+g[a+60>>2];v=+g[a+44>>2];G=(c[a+20>>2]|0)==0;m=+ib[c[(c[a>>2]|0)+48>>2]&15](a);k=+ib[c[(c[a>>2]|0)+48>>2]&15](a);i=+ib[c[(c[a>>2]|0)+48>>2]&15](a);m=(G?0.0:(I-z)*.5)+m;k=(G?0.0:(H-x)*.5)+k;i=(G?0.0:(F-v)*.5)+i;E=+g[b>>2];u=+A(+E);D=+g[b+4>>2];t=+A(+D);r=+g[b+8>>2];s=+A(+r);C=+g[b+16>>2];q=+A(+C);B=+g[b+20>>2];p=+A(+B);n=+g[b+24>>2];o=+A(+n);y=+g[b+32>>2];l=+A(+y);w=+g[b+36>>2];j=+A(+w);f=+g[b+40>>2];h=+A(+f);z=G?0.0:(I+z)*.5;x=G?0.0:(H+x)*.5;v=G?0.0:(F+v)*.5;r=z*E+x*D+v*r+ +g[b+48>>2];n=z*C+x*B+v*n+ +g[b+52>>2];f=z*y+x*w+v*f+ +g[b+56>>2];g[d>>2]=r-(m*u+k*t+i*s);g[d+4>>2]=n-(m*q+k*p+i*o);g[d+8>>2]=f-(m*l+k*j+i*h);g[d+12>>2]=0.0;g[e>>2]=m*u+k*t+i*s+r;g[e+4>>2]=m*q+k*p+i*o+n;g[e+8>>2]=m*l+k*j+i*h+f;g[e+12>>2]=0.0;return}function yg(a,b){a=a|0;b=b|0;var c=0.0,d=0.0,e=0.0,f=0,h=0,i=0,j=0,k=0;f=l;l=l+16|0;d=+g[(AF(a)|0)>>2];e=+g[(jF(a+16|0)|0)>>2];c=+g[(iF(a+32|0)|0)>>2];if(d+e+c>0.0){e=+qF(d+e+c+1.0);g[f+12>>2]=e*.5;d=+g[(jF(a+32|0)|0)>>2];g[f>>2]=(d-+g[(iF(a+16|0)|0)>>2])*(.5/e);d=+g[(iF(a)|0)>>2];g[f+4>>2]=(d-+g[(AF(a+32|0)|0)>>2])*(.5/e);d=+g[(AF(a+16|0)|0)>>2];g[f+8>>2]=(d-+g[(jF(a)|0)>>2])*(.5/e);i=f+4|0;h=f+8|0;a=f+12|0;j=f;Up(b,j,i,h,a);l=f;return}else{h=d<e?(e<c?2:1):d<c?2:0;i=AF(a+(h<<4)|0)|0;e=+g[i+(h<<2)>>2];k=AF(a+((((h+1|0)>>>0)%3|0)<<4)|0)|0;e=e-+g[k+((((h+1|0)>>>0)%3|0)<<2)>>2];j=AF(a+((((h+2|0)>>>0)%3|0)<<4)|0)|0;e=+qF(e-+g[j+((((h+2|0)>>>0)%3|0)<<2)>>2]+1.0);g[f+(h<<2)>>2]=e*.5;g[f+12>>2]=(+g[j+((((h+1|0)>>>0)%3|0)<<2)>>2]-+g[k+((((h+2|0)>>>0)%3|0)<<2)>>2])*(.5/e);g[f+((((h+1|0)>>>0)%3|0)<<2)>>2]=(+g[k+(h<<2)>>2]+ +g[i+((((h+1|0)>>>0)%3|0)<<2)>>2])*(.5/e);g[f+((((h+2|0)>>>0)%3|0)<<2)>>2]=(+g[j+(h<<2)>>2]+ +g[i+((((h+2|0)>>>0)%3|0)<<2)>>2])*(.5/e);h=f+4|0;i=f+8|0;j=f+12|0;a=f;Up(b,a,h,i,j);l=f;return}}function zg(a,d,f){a=a|0;d=d|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0;h=c[a+68+(d<<2)>>2]|0;k=c[a+60>>2]|0;l=e[h+((f&65535)<<2)+2>>1]|0;i=b[h+((f&65535)<<2)+-4>>1]|0;if((e[h+((f&65535)<<2)>>1]|0)>=(i&65535))return;g=h+((f&65535)<<2)+-4|0;j=h+((f&65535)<<2)|0;h=k;while(1){f=e[j+-2>>1]|0;if(!(i&1))f=h+(f<<6)+48+(d<<1)|0;else{if(((((e[k+(l<<6)+54+((1<<d&3)<<1)>>1]|0)>=(e[h+(f<<6)+48+((1<<d&3)<<1)>>1]|0)?(e[h+(f<<6)+54+((1<<d&3)<<1)>>1]|0)>=(e[k+(l<<6)+48+((1<<d&3)<<1)>>1]|0):0)?(e[k+(l<<6)+54+((1<<(1<<d&3)&3)<<1)>>1]|0)>=(e[h+(f<<6)+48+((1<<(1<<d&3)&3)<<1)>>1]|0):0)?(e[h+(f<<6)+54+((1<<(1<<d&3)&3)<<1)>>1]|0)>=(e[k+(l<<6)+48+((1<<(1<<d&3)&3)<<1)>>1]|0):0)?(n=c[a+92>>2]|0,m=h+(f<<6)|0,wb[c[(c[n>>2]|0)+8>>2]&63](n,k+(l<<6)|0,m)|0,n=c[a+96>>2]|0,n|0):0)wb[c[(c[n>>2]|0)+8>>2]&63](n,k+(l<<6)|0,m)|0;f=h+(f<<6)+54+(d<<1)|0}b[f>>1]=(b[f>>1]|0)+1<<16>>16;b[k+(l<<6)+48+(d<<1)>>1]=(b[k+(l<<6)+48+(d<<1)>>1]|0)+-1<<16>>16;f=e[j>>1]|e[j+2>>1]<<16;i=e[g>>1]|e[g+2>>1]<<16;b[j>>1]=i;b[j+2>>1]=i>>>16;b[g>>1]=f;b[g+2>>1]=f>>>16;f=j+-4|0;g=g+-4|0;i=b[g>>1]|0;if((e[f>>1]|0)>=(i&65535))break;j=f;h=c[a+60>>2]|0}return}function Ag(b,d){b=b|0;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,j=0;j=sb[c[(c[b>>2]|0)+28>>2]&127](b)|0;i=+g[j>>2]-+g[d>>2];h=+g[j+4>>2]-+g[d+4>>2];f=+g[j+8>>2]-+g[d+8>>2];if(!(i*i+h*h+f*f>1.1920928955078125e-07))return;$f(b,d);if((a[b+65>>0]|0)!=0?(e=c[b+56>>2]|0,Db[c[c[e>>2]>>2]&255](e),e=c[b+56>>2]|0,(e|0)!=0):0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0);e=b+56|0}else e=b+56|0;c[6485]=(c[6485]|0)+1;d=ec(191)|0;if(!d)d=0;else{c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16}c[d+52>>2]=287;a[d+60>>0]=0;a[d+80>>0]=1;c[d+76>>2]=0;c[d+68>>2]=0;c[d+72>>2]=0;a[d+100>>0]=1;c[d+96>>2]=0;c[d+88>>2]=0;c[d+92>>2]=0;a[d+120>>0]=1;c[d+116>>2]=0;c[d+108>>2]=0;c[d+112>>2]=0;a[d+140>>0]=1;c[d+136>>2]=0;c[d+128>>2]=0;c[d+132>>2]=0;c[d+144>>2]=0;a[d+164>>0]=1;c[d+160>>2]=0;c[d+152>>2]=0;c[d+156>>2]=0;c[d+168>>2]=0;c[d+4>>2]=-8388609;c[d+8>>2]=-8388609;c[d+12>>2]=-8388609;g[d+16>>2]=0.0;c[d+20>>2]=2139095039;c[d+24>>2]=2139095039;c[d+28>>2]=2139095039;g[d+32>>2]=0.0;c[d>>2]=9580;c[e>>2]=d;Lc(d,c[b+52>>2]|0,(a[b+64>>0]|0)!=0,b+20|0,b+36|0);a[b+65>>0]=1;return}function Bg(b,d){b=b|0;d=d|0;var e=0.0,f=0.0;if(a[b+1309>>0]|0){e=(+g[b+1256>>2]-+g[b+1316>>2])*+g[b+1340>>2];g[b+792>>2]=e*(+g[d>>2]*+g[b+1364>>2]/+(c[d+44>>2]|0));e=+A(+e);g[b+808>>2]=e/+g[d>>2]}if(a[b+1310>>0]|0){e=(+g[b+1260>>2]-+g[b+1320>>2])*+g[b+1344>>2];g[b+796>>2]=e*(+g[d>>2]*+g[b+1368>>2]/+(c[d+44>>2]|0));e=+A(+e);g[b+812>>2]=e/+g[d>>2]}if(a[b+1311>>0]|0){e=(+g[b+1264>>2]-+g[b+1324>>2])*+g[b+1348>>2];g[b+800>>2]=e*(+g[d>>2]*+g[b+1372>>2]/+(c[d+44>>2]|0));e=+A(+e);g[b+816>>2]=e/+g[d>>2]}if(a[b+1312>>0]|0){f=-((+g[b+1192>>2]-+g[b+1328>>2])*+g[b+1352>>2]);e=+g[d>>2];g[b+876>>2]=e*+g[b+1376>>2]/+(c[d+44>>2]|0)*f;g[b+880>>2]=+A(+f)/e}if(a[b+1313>>0]|0){e=-((+g[b+1196>>2]-+g[b+1332>>2])*+g[b+1356>>2]);f=+g[d>>2];g[b+940>>2]=f*+g[b+1380>>2]/+(c[d+44>>2]|0)*e;g[b+944>>2]=+A(+e)/f}if(!(a[b+1314>>0]|0)){Hi(b,d);return}e=-((+g[b+1200>>2]-+g[b+1336>>2])*+g[b+1360>>2]);f=+g[d>>2];g[b+1004>>2]=f*+g[b+1384>>2]/+(c[d+44>>2]|0)*e;g[b+1008>>2]=+A(+e)/f;Hi(b,d);return}function Cg(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,h=0.0,i=0.0,j=0.0;e=l;l=l+160|0;c[e+136>>2]=0;c[e+136+4>>2]=0;c[e+136+8>>2]=0;c[e+136+12>>2]=0;c[e+136+16>>2]=0;c[e+32>>2]=10120;f=e+32+4|0;c[f>>2]=0;c[f+4>>2]=0;c[f+8>>2]=0;c[f+12>>2]=0;c[e+32+20>>2]=1065353216;c[e+32+24>>2]=0;c[e+32+24+4>>2]=0;c[e+32+24+8>>2]=0;c[e+32+24+12>>2]=0;c[e+32+40>>2]=1065353216;c[e+32+44>>2]=0;c[e+32+44+4>>2]=0;c[e+32+44+8>>2]=0;c[e+32+44+12>>2]=0;c[e+32+60>>2]=1065353216;c[e+32+64>>2]=0;c[e+32+68>>2]=c[e+136+4>>2];c[e+32+68+4>>2]=c[e+136+4+4>>2];c[e+32+68+8>>2]=c[e+136+4+8>>2];c[e+32+68+12>>2]=c[e+136+4+12>>2];g[e+32+84>>2]=-999999984306749440.0;j=+g[d>>2];i=+g[d+4>>2];h=+g[d+8>>2];g[e+32+88>>2]=j+i*0.0+h*0.0;g[e+32+92>>2]=j*0.0+i+h*0.0;g[e+32+96>>2]=j*0.0+i*0.0+h;g[e+32+100>>2]=0.0;c[e+16>>2]=1566444395;c[e+16+4>>2]=1566444395;c[e+16+8>>2]=1566444395;g[e+16+12>>2]=0.0;d=c[(c[b>>2]|0)+64>>2]|0;g[e>>2]=-999999984306749440.0;g[e+4>>2]=-999999984306749440.0;g[e+8>>2]=-999999984306749440.0;g[e+12>>2]=0.0;Pb[d&127](b,e+32|0,e,e+16|0);c[a>>2]=c[f>>2];c[a+4>>2]=c[f+4>>2];c[a+8>>2]=c[f+8>>2];c[a+12>>2]=c[f+12>>2];l=e;return}function Dg(a,b,d,e,f,h,i,j,k,m){a=a|0;b=b|0;d=d|0;e=e|0;f=+f;h=+h;i=+i;j=+j;k=+k;m=+m;var n=0;n=l;l=l+128|0;c[n+80>>2]=c[a+4>>2];c[n+80+4>>2]=c[a+20>>2];c[n+80+8>>2]=c[a+36>>2];g[n+80+12>>2]=0.0;c[n+80+16>>2]=c[a+8>>2];c[n+80+20>>2]=c[a+24>>2];c[n+80+24>>2]=c[a+40>>2];g[n+80+28>>2]=0.0;c[n+80+32>>2]=c[a+12>>2];c[n+80+36>>2]=c[a+28>>2];c[n+80+40>>2]=c[a+44>>2];g[n+80+44>>2]=0.0;c[n+32>>2]=c[b+4>>2];c[n+32+4>>2]=c[b+20>>2];c[n+32+8>>2]=c[b+36>>2];g[n+32+12>>2]=0.0;c[n+32+16>>2]=c[b+8>>2];c[n+32+20>>2]=c[b+24>>2];c[n+32+24>>2]=c[b+40>>2];g[n+32+28>>2]=0.0;c[n+32+32>>2]=c[b+12>>2];c[n+32+36>>2]=c[b+28>>2];c[n+32+40>>2]=c[b+44>>2];g[n+32+44>>2]=0.0;h=h-+g[a+56>>2];i=i-+g[a+60>>2];g[n+16>>2]=f-+g[a+52>>2];g[n+16+4>>2]=h;g[n+16+8>>2]=i;g[n+16+12>>2]=0.0;i=k-+g[b+56>>2];m=m-+g[b+60>>2];g[n>>2]=j-+g[b+52>>2];g[n+4>>2]=i;g[n+8>>2]=m;g[n+12>>2]=0.0;Wf(d,n+80|0,n+32|0,n+16|0,n,e,a+456|0,+g[a+404>>2],b+456|0,+g[b+404>>2]);l=n;return}function Eg(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,k=0.0,m=0.0,n=0.0,o=0,p=0.0,q=0,r=0,s=0,t=0.0,u=0,v=0,w=0;v=l;l=l+16|0;if((e|0)<=0){l=v;return}u=0;do{c[v>>2]=0;c[v+4>>2]=0;c[v+8>>2]=0;c[v+12>>2]=0;o=c[a+56>>2]|0;w=c[a+32+(o<<2)>>2]|0;c[v+(o<<2)>>2]=w;f=+g[v>>2];i=+g[v+4>>2];h=+g[v+8>>2];q=b+(u<<4)|0;p=+g[q>>2];r=b+(u<<4)+4|0;m=+g[r>>2];s=b+(u<<4)+8|0;k=+g[s>>2];n=(c[j>>2]=w,+g[j>>2]);if(f*p+i*m+h*k>-999999984306749440.0){o=c[v+12>>2]|0;g[d+(u<<4)>>2]=f;g[d+(u<<4)+4>>2]=i;g[d+(u<<4)+8>>2]=h;c[d+(u<<4)+12>>2]=o;o=c[a+56>>2]|0;t=f*p+i*m+h*k;n=+g[a+32+(o<<2)>>2];p=+g[q>>2];m=+g[r>>2];k=+g[s>>2]}else t=-999999984306749440.0;c[v>>2]=0;c[v+4>>2]=0;c[v+8>>2]=0;c[v+12>>2]=0;g[v+(o<<2)>>2]=-n;f=+g[v>>2];i=+g[v+4>>2];h=+g[v+8>>2];if(f*p+i*m+h*k>t){w=c[v+12>>2]|0;g[d+(u<<4)>>2]=f;g[d+(u<<4)+4>>2]=i;g[d+(u<<4)+8>>2]=h;c[d+(u<<4)+12>>2]=w}u=u+1|0}while((u|0)!=(e|0));l=v;return}function Fg(a,b,d,e,f){a=a|0;b=+b;d=+d;e=+e;f=f|0;var h=0,i=0,j=0,k=0,m=0.0,n=0.0;j=l;l=l+48|0;m=1.0/+B(+(b*b+d*d+e*e));g[f>>2]=m*b;g[f+4>>2]=m*d;g[f+8>>2]=m*e;g[f+12>>2]=0.0;h=c[a+120>>2]|0;k=c[a+124>>2]|0;i=(c[a>>2]|0)+(k>>1)|0;if(k&1)h=c[(c[i>>2]|0)+h>>2]|0;Mb[h&127](j,i,f);b=-+g[f>>2];d=-+g[f+4>>2];e=-+g[f+8>>2];h=c[a+120>>2]|0;k=c[a+124>>2]|0;i=(c[a+4>>2]|0)+(k>>1)|0;if(k&1)h=c[(c[i>>2]|0)+h>>2]|0;m=+g[a+24>>2]*b+ +g[a+28>>2]*d+ +g[a+32>>2]*e;n=+g[a+40>>2]*b+ +g[a+44>>2]*d+ +g[a+48>>2]*e;g[j+16>>2]=+g[a+8>>2]*b+ +g[a+12>>2]*d+ +g[a+16>>2]*e;g[j+16+4>>2]=m;g[j+16+8>>2]=n;g[j+16+12>>2]=0.0;Mb[h&127](j+32|0,i,j+16|0);n=+g[j+32>>2];b=+g[j+32+4>>2];d=+g[j+32+8>>2];e=+g[j+4>>2]-(n*+g[a+72>>2]+b*+g[a+76>>2]+d*+g[a+80>>2]+ +g[a+108>>2]);m=+g[j+8>>2]-(n*+g[a+88>>2]+b*+g[a+92>>2]+d*+g[a+96>>2]+ +g[a+112>>2]);g[f+16>>2]=+g[j>>2]-(n*+g[a+56>>2]+b*+g[a+60>>2]+d*+g[a+64>>2]+ +g[a+104>>2]);g[f+20>>2]=e;g[f+24>>2]=m;g[f+28>>2]=0.0;l=j;return}function Gg(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0,j=0.0,k=0.0;i=c[b>>2]|0;if((i|0)==(c[a+84>>2]|0)){h=1.0;return +h}if(c[i+204>>2]&4|0){h=1.0;return +h}if(d){e=+g[b+8>>2];f=+g[b+12>>2];h=+g[b+16>>2]}else{k=+g[b+8>>2];j=+g[b+12>>2];h=+g[b+16>>2];e=+g[i+4>>2]*k+ +g[i+8>>2]*j+ +g[i+12>>2]*h;f=k*+g[i+20>>2]+j*+g[i+24>>2]+h*+g[i+28>>2];h=k*+g[i+36>>2]+j*+g[i+40>>2]+h*+g[i+44>>2]}if(e*+g[a+88>>2]+f*+g[a+92>>2]+h*+g[a+96>>2]<+g[a+104>>2]){k=1.0;return +k}c[a+4>>2]=c[b+40>>2];c[a+80>>2]=i;if(d){c[a+48>>2]=c[b+8>>2];c[a+48+4>>2]=c[b+8+4>>2];c[a+48+8>>2]=c[b+8+8>>2];c[a+48+12>>2]=c[b+8+12>>2]}else{e=+g[b+8>>2];f=+g[b+12>>2];h=+g[b+16>>2];j=e*+g[i+20>>2]+f*+g[i+24>>2]+h*+g[i+28>>2];k=e*+g[i+36>>2]+f*+g[i+40>>2]+h*+g[i+44>>2];g[a+48>>2]=+g[i+4>>2]*e+ +g[i+8>>2]*f+ +g[i+12>>2]*h;g[a+52>>2]=j;g[a+56>>2]=k;g[a+60>>2]=0.0}c[a+64>>2]=c[b+24>>2];c[a+64+4>>2]=c[b+24+4>>2];c[a+64+8>>2]=c[b+24+8>>2];c[a+64+12>>2]=c[b+24+12>>2];k=+g[b+40>>2];return +k}function Hg(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0;if(a[b+165>>0]|0){if((c[b+92>>2]|0)>=(d|0))return;if((d|0)!=0?(c[6485]=(c[6485]|0)+1,e=ec((d<<4|3)+16|0)|0,(e|0)!=0):0){c[(e+4+15&-16)+-4>>2]=e;g=e+4+15&-16}else g=0;f=c[b+88>>2]|0;if((f|0)>0){e=0;do{i=g+(e<<4)|0;h=(c[b+96>>2]|0)+(e<<4)|0;c[i>>2]=c[h>>2];c[i+4>>2]=c[h+4>>2];c[i+8>>2]=c[h+8>>2];c[i+12>>2]=c[h+12>>2];e=e+1|0}while((e|0)!=(f|0))}e=c[b+96>>2]|0;if(e|0){if(a[b+100>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[b+96>>2]=0}a[b+100>>0]=1;c[b+96>>2]=g;c[b+92>>2]=d;return}if((c[b+112>>2]|0)>=(d|0))return;if((d|0)!=0?(c[6485]=(c[6485]|0)+1,f=ec((d<<2|3)+16|0)|0,(f|0)!=0):0){c[(f+4+15&-16)+-4>>2]=f;h=f+4+15&-16}else h=0;f=c[b+108>>2]|0;g=c[b+116>>2]|0;if((f|0)<=0)if(!g)e=b+120|0;else i=23;else{e=0;do{c[h+(e<<2)>>2]=c[g+(e<<2)>>2];e=e+1|0}while((e|0)!=(f|0));i=23}if((i|0)==23){if(a[b+120>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0)}c[b+116>>2]=0;e=b+120|0}a[e>>0]=1;c[b+116>>2]=h;c[b+112>>2]=d;return}function Ig(d,e){d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0;if(!(a[d+164>>0]|0)){if((c[d+152>>2]|0)>=(e|0))return;if((e|0)!=0?(c[6485]=(c[6485]|0)+1,g=ec((e<<1)+19|0)|0,(g|0)!=0):0){c[(g+4+15&-16)+-4>>2]=g;i=g+4+15&-16}else i=0;g=c[d+148>>2]|0;h=c[d+156>>2]|0;if((g|0)<=0)if(!h)f=d+160|0;else j=24;else{f=0;do{b[i+(f<<1)>>1]=b[h+(f<<1)>>1]|0;f=f+1|0}while((f|0)!=(g|0));j=24}if((j|0)==24){if(a[d+160>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[d+156>>2]=0;f=d+160|0}a[f>>0]=1;c[d+156>>2]=i;c[d+152>>2]=e;return}else{if((c[d+132>>2]|0)>=(e|0))return;if((e|0)!=0?(c[6485]=(c[6485]|0)+1,f=ec((e<<2|3)+16|0)|0,(f|0)!=0):0){c[(f+4+15&-16)+-4>>2]=f;i=f+4+15&-16}else i=0;g=c[d+128>>2]|0;h=c[d+136>>2]|0;if((g|0)<=0)if(!h)f=d+140|0;else j=11;else{f=0;do{c[i+(f<<2)>>2]=c[h+(f<<2)>>2];f=f+1|0}while((f|0)!=(g|0));j=11}if((j|0)==11){if(a[d+140>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[d+136>>2]=0;f=d+140|0}a[f>>0]=1;c[d+136>>2]=i;c[d+132>>2]=e;return}}function Jg(a,b,d){a=a|0;b=b|0;d=d|0;Og(a,b,d)|0;c[b+52>>2]=c[a+300>>2];c[b+56>>2]=c[a+304>>2];c[b+60>>2]=c[a+308>>2];c[b+64>>2]=c[a+312>>2];c[b+68>>2]=c[a+316>>2];c[b+72>>2]=c[a+320>>2];c[b+76>>2]=c[a+324>>2];c[b+80>>2]=c[a+328>>2];c[b+84>>2]=c[a+332>>2];c[b+88>>2]=c[a+336>>2];c[b+92>>2]=c[a+340>>2];c[b+96>>2]=c[a+344>>2];c[b+100>>2]=c[a+348>>2];c[b+104>>2]=c[a+352>>2];c[b+108>>2]=c[a+356>>2];c[b+112>>2]=c[a+360>>2];c[b+116>>2]=c[a+364>>2];c[b+120>>2]=c[a+368>>2];c[b+124>>2]=c[a+372>>2];c[b+128>>2]=c[a+376>>2];c[b+132>>2]=c[a+380>>2];c[b+136>>2]=c[a+384>>2];c[b+140>>2]=c[a+388>>2];c[b+144>>2]=c[a+392>>2];c[b+148>>2]=c[a+396>>2];c[b+152>>2]=c[a+400>>2];c[b+156>>2]=c[a+404>>2];c[b+160>>2]=c[a+408>>2];c[b+164>>2]=c[a+412>>2];c[b+168>>2]=c[a+416>>2];c[b+172>>2]=c[a+420>>2];c[b+176>>2]=c[a+424>>2];c[b+180>>2]=c[a+444>>2];c[b+184>>2]=c[a+448>>2];c[b+188>>2]=c[a+452>>2];c[b+192>>2]=c[a+428>>2];c[b+196>>2]=c[a+432>>2];c[b+200>>2]=c[a+436>>2];c[b+204>>2]=c[a+440>>2];return 12715}function Kg(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0;o=+ib[c[(c[a>>2]|0)+48>>2]&15](a);u=+g[a+76>>2];t=+g[a+60>>2];r=+g[a+80>>2];q=+g[a+64>>2];n=+g[a+84>>2];m=+g[a+68>>2];F=+g[b>>2];y=+A(+F);E=+g[b+4>>2];x=+A(+E);k=+g[b+8>>2];l=+A(+k);D=+g[b+16>>2];w=+A(+D);C=+g[b+20>>2];v=+A(+C);i=+g[b+24>>2];j=+A(+i);B=+g[b+32>>2];s=+A(+B);z=+g[b+36>>2];p=+A(+z);f=+g[b+40>>2];h=+A(+f);k=(u+t)*.5*F+(r+q)*.5*E+(n+m)*.5*k+ +g[b+48>>2];i=(u+t)*.5*D+(r+q)*.5*C+(n+m)*.5*i+ +g[b+52>>2];f=(u+t)*.5*B+(r+q)*.5*z+(n+m)*.5*f+ +g[b+56>>2];l=(o+(u-t)*.5)*y+(o+(r-q)*.5)*x+(o+(n-m)*.5)*l;j=(o+(u-t)*.5)*w+(o+(r-q)*.5)*v+(o+(n-m)*.5)*j;h=(o+(u-t)*.5)*s+(o+(r-q)*.5)*p+(o+(n-m)*.5)*h;g[d>>2]=k-l;g[d+4>>2]=i-j;g[d+8>>2]=f-h;g[d+12>>2]=0.0;g[e>>2]=l+k;g[e+4>>2]=j+i;g[e+8>>2]=h+f;g[e+12>>2]=0.0;return}function Lg(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0;e=ub[c[(c[d>>2]|0)+40>>2]&31](d,a)|0;h=ub[c[(c[d>>2]|0)+28>>2]&31](d,e)|0;c[b>>2]=h;if(h|0)Ib[c[(c[d>>2]|0)+48>>2]&127](d,e);c[b+4>>2]=c[a+4>>2];c[b+8>>2]=0;c[b+28>>2]=c[a+32>>2];c[b+32>>2]=c[a+36>>2];c[b+36>>2]=c[a+40>>2];c[b+40>>2]=c[a+44>>2];c[b+12>>2]=c[a+16>>2];c[b+16>>2]=c[a+20>>2];c[b+20>>2]=c[a+24>>2];c[b+24>>2]=c[a+28>>2];c[b+44>>2]=c[a+48>>2];c[b+48>>2]=0;g=c[a+100>>2]|0;c[b+60>>2]=g;if(!g){c[b+52>>2]=0;c[b+56>>2]=0;d=b+64|0;c[d>>2]=0;return 17456}c[b+52>>2]=ub[c[(c[d>>2]|0)+28>>2]&31](d,c[a+108>>2]|0)|0;c[b+56>>2]=0;h=wb[c[(c[d>>2]|0)+16>>2]&63](d,16,g)|0;if((g|0)>0){e=c[a+108>>2]|0;a=c[h+8>>2]|0;f=0;while(1){c[a>>2]=c[e+(f<<4)>>2];c[a+4>>2]=c[e+(f<<4)+4>>2];c[a+8>>2]=c[e+(f<<4)+8>>2];c[a+12>>2]=c[e+(f<<4)+12>>2];f=f+1|0;if((f|0)==(g|0))break;else a=a+16|0}}else e=c[a+108>>2]|0;Tb[c[(c[d>>2]|0)+20>>2]&31](d,h,19914,1497453121,e);d=b+64|0;c[d>>2]=0;return 17456}function Mg(b){b=b|0;var d=0,e=0,f=0,g=0,h=0;d=c[b+16>>2]|0;if(d|0){if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+16>>2]=0}a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;c[b+12>>2]=0;d=c[b+36>>2]|0;if(d|0){if(a[b+40>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+36>>2]=0}a[b+40>>0]=1;c[b+36>>2]=0;c[b+28>>2]=0;c[b+32>>2]=0;d=c[b+56>>2]|0;if(d|0){if(a[b+60>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+56>>2]=0}a[b+60>>0]=1;c[b+56>>2]=0;c[b+48>>2]=0;c[b+52>>2]=0;if((c[b+12>>2]|0)>=2){Ue(b);return}c[6485]=(c[6485]|0)+1;d=ec(43)|0;if(!d)f=0;else{c[(d+4+15&-16)+-4>>2]=d;f=d+4+15&-16}e=c[b+8>>2]|0;if((e|0)>0){d=0;do{g=f+(d*12|0)|0;h=(c[b+16>>2]|0)+(d*12|0)|0;c[g>>2]=c[h>>2];c[g+4>>2]=c[h+4>>2];c[g+8>>2]=c[h+8>>2];d=d+1|0}while((d|0)!=(e|0))}d=c[b+16>>2]|0;if(d|0){if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+16>>2]=0}a[b+20>>0]=1;c[b+16>>2]=f;c[b+12>>2]=2;Ue(b);return}function Ng(a,b,e){a=a|0;b=b|0;e=e|0;Og(a,b,e)|0;c[b+52>>2]=c[a+52>>2];c[b+56>>2]=c[a+56>>2];c[b+60>>2]=c[a+60>>2];c[b+64>>2]=c[a+64>>2];c[b+68>>2]=c[a+68>>2];c[b+72>>2]=c[a+72>>2];c[b+76>>2]=c[a+76>>2];c[b+80>>2]=c[a+80>>2];c[b+84>>2]=c[a+84>>2];c[b+88>>2]=c[a+88>>2];c[b+92>>2]=c[a+92>>2];c[b+96>>2]=c[a+96>>2];c[b+100>>2]=c[a+100>>2];c[b+104>>2]=c[a+104>>2];c[b+108>>2]=c[a+108>>2];c[b+112>>2]=c[a+112>>2];c[b+116>>2]=c[a+116>>2];c[b+120>>2]=c[a+120>>2];c[b+124>>2]=c[a+124>>2];c[b+128>>2]=c[a+128>>2];c[b+132>>2]=c[a+132>>2];c[b+136>>2]=c[a+136>>2];c[b+140>>2]=c[a+140>>2];c[b+144>>2]=c[a+144>>2];c[b+148>>2]=c[a+148>>2];c[b+152>>2]=c[a+152>>2];c[b+156>>2]=c[a+156>>2];c[b+160>>2]=c[a+160>>2];c[b+164>>2]=c[a+164>>2];c[b+168>>2]=c[a+168>>2];c[b+172>>2]=c[a+172>>2];c[b+176>>2]=c[a+176>>2];c[b+180>>2]=c[a+188>>2];c[b+184>>2]=c[a+184>>2];c[b+188>>2]=c[a+196>>2];c[b+192>>2]=c[a+192>>2];c[b+196>>2]=d[a+180>>0];c[b+200>>2]=d[a+49>>0];return 13138}function Og(a,b,e){a=a|0;b=b|0;e=e|0;var f=0,g=0;c[b>>2]=ub[c[(c[e>>2]|0)+28>>2]&31](e,c[a+28>>2]|0)|0;c[b+4>>2]=ub[c[(c[e>>2]|0)+28>>2]&31](e,c[a+32>>2]|0)|0;f=ub[c[(c[e>>2]|0)+40>>2]&31](e,a)|0;g=ub[c[(c[e>>2]|0)+28>>2]&31](e,f)|0;c[b+8>>2]=g;if(g|0)Ib[c[(c[e>>2]|0)+48>>2]&127](e,f);c[b+12>>2]=c[a+4>>2];c[b+24>>2]=d[a+21>>0];c[b+40>>2]=c[a+24>>2];c[b+44>>2]=c[a+16>>2];c[b+48>>2]=d[a+20>>0];c[b+20>>2]=c[a+12>>2];c[b+16>>2]=c[a+8>>2];c[b+28>>2]=c[a+36>>2];c[b+32>>2]=c[a+40>>2];c[b+36>>2]=0;f=c[a+28>>2]|0;g=c[f+548>>2]|0;if((g|0)>0){e=c[f+556>>2]|0;if((c[e>>2]|0)==(a|0))c[b+36>>2]=1;if((g|0)>1){f=1;do{if((c[e+(f<<2)>>2]|0)==(a|0))c[b+36>>2]=1;f=f+1|0}while((f|0)!=(g|0))}}f=c[a+32>>2]|0;g=c[f+548>>2]|0;if((g|0)<=0)return 13182;e=c[f+556>>2]|0;if((c[e>>2]|0)==(a|0))c[b+36>>2]=1;if((g|0)<=1)return 13182;f=1;do{if((c[e+(f<<2)>>2]|0)==(a|0))c[b+36>>2]=1;f=f+1|0}while((f|0)!=(g|0));return 13182}function Pg(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0.0,i=0.0,j=0.0,k=0.0;f=l;l=l+96|0;g[f+4>>2]=1.0;c[f+8>>2]=0;c[f+12>>2]=1;c[f+16>>2]=-1;c[f+20>>2]=0;c[f>>2]=5056;c[f+24>>2]=c[b>>2];c[f+24+4>>2]=c[b+4>>2];c[f+24+8>>2]=c[b+8>>2];c[f+24+12>>2]=c[b+12>>2];c[f+40>>2]=c[d>>2];c[f+40+4>>2]=c[d+4>>2];c[f+40+8>>2]=c[d+8>>2];c[f+40+12>>2]=c[d+12>>2];a=c[a+4>>2]|0;Pb[c[(c[a>>2]|0)+32>>2]&127](a,b,d,f);a=c[f+8>>2]|0;if(!a){e=0;l=f;return e|0}if(!(c[a+252>>2]&2)){e=0;l=f;return e|0}if(c[a+204>>2]&4|0){e=0;l=f;return e|0}c[e>>2]=c[f+72>>2];c[e+4>>2]=c[f+72+4>>2];c[e+8>>2]=c[f+72+8>>2];c[e+12>>2]=c[f+72+12>>2];c[e+16>>2]=c[f+56>>2];c[e+16+4>>2]=c[f+56+4>>2];c[e+16+8>>2]=c[f+56+8>>2];c[e+16+12>>2]=c[f+56+12>>2];k=+g[e+16>>2];j=+g[e+20>>2];i=+g[e+24>>2];h=1.0/+B(+(k*k+j*j+i*i));g[e+16>>2]=k*h;g[e+20>>2]=j*h;g[e+24>>2]=i*h;c[e+32>>2]=c[f+4>>2];e=a;l=f;return e|0}function Qg(b,d){b=b|0;d=d|0;if((c[b+16>>2]|0)!=(0-(c[b+56>>2]|0)|0))return;d=c[b+4>>2]|0;if(d|0)Tl(b+4|0,d);d=c[b+8>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+8>>2]=0;c[b+12>>2]=-1;d=c[b+36>>2]|0;if(d|0){if(a[b+40>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+36>>2]=0}a[b+40>>0]=1;c[b+36>>2]=0;c[b+28>>2]=0;c[b+32>>2]=0;c[b+20>>2]=0;d=c[b+44>>2]|0;if(d|0)Tl(b+44|0,d);d=c[b+48>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+48>>2]=0;c[b+52>>2]=-1;d=c[b+76>>2]|0;if(d|0){if(a[b+80>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+76>>2]=0}a[b+80>>0]=1;c[b+76>>2]=0;c[b+68>>2]=0;c[b+72>>2]=0;c[b+60>>2]=0;a[b+153>>0]=0;a[b+154>>0]=1;c[b+104>>2]=0;c[b+124>>2]=0;c[b+108>>2]=1;c[b+112>>2]=0;c[b+116>>2]=10;c[b+120>>2]=1;c[b+84>>2]=0;c[b+84+4>>2]=0;c[b+84+8>>2]=0;c[b+128>>2]=0;c[b+128+4>>2]=0;c[b+128+8>>2]=0;c[b+128+12>>2]=0;c[b+128+16>>2]=0;c[b+128+20>>2]=0;return}function Rg(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0,j=0.0;i=l;l=l+32|0;c[i+16>>2]=c[d>>2];c[i+16+4>>2]=c[d+4>>2];c[i+16+8>>2]=c[d+8>>2];c[i+16+12>>2]=c[d+12>>2];f=+g[i+16>>2];h=+g[i+16+4>>2];e=+g[i+16+8>>2];if(f*f+h*h+e*e<1.4210854715202004e-14){c[i+16>>2]=-1082130432;c[i+16+4>>2]=-1082130432;c[i+16+8>>2]=-1082130432;g[i+16+12>>2]=0.0;f=-1.0;h=-1.0;e=-1.0}j=1.0/+B(+(f*f+h*h+e*e));g[i+16>>2]=f*j;g[i+16+4>>2]=h*j;g[i+16+8>>2]=e*j;qd(i,b,i+16|0);switch(c[b+4>>2]|0){case 8:{e=+g[b+32>>2]*+g[b+16>>2];break}case 0:{e=+g[b+48>>2];break}case 1:{e=+g[b+48>>2];break}case 13:{e=+g[b+48>>2];break}case 11:{e=+g[b+48>>2];break}case 10:{e=+g[b+48>>2];break}case 4:case 5:{e=+g[b+48>>2];break}default:e=+ib[c[(c[b>>2]|0)+48>>2]&15](b)}h=e*+g[i+16+4>>2]+ +g[i+4>>2];j=e*+g[i+16+8>>2]+ +g[i+8>>2];g[a>>2]=e*+g[i+16>>2]+ +g[i>>2];g[a+4>>2]=h;g[a+8>>2]=j;g[a+12>>2]=0.0;l=i;return}function Sg(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0,i=0.0,k=0,m=0,n=0,o=0.0;m=l;l=l+80|0;c[a>>2]=0;c[a+4>>2]=0;c[a+8>>2]=0;c[a+12>>2]=0;e=+g[d>>2];f=+g[d+4>>2];i=+g[d+8>>2];if(e*e+f*f+i*i<9.999999747378752e-05){k=1065353216;h=0;e=0.0;d=0}else{o=1.0/+B(+(e*e+f*f+i*i));k=(g[j>>2]=e*o,c[j>>2]|0);n=(g[j>>2]=f*o,c[j>>2]|0);h=(g[j>>2]=i*o,c[j>>2]|0);e=+g[d+12>>2];d=n}c[m+32>>2]=9168;n=m+32+4|0;c[n>>2]=0;c[n+4>>2]=0;c[n+8>>2]=0;c[n+12>>2]=0;g[m+32+20>>2]=-999999984306749440.0;c[m+32+24>>2]=k;c[m+32+28>>2]=d;c[m+32+32>>2]=h;g[m+32+36>>2]=e;c[m+16>>2]=1566444395;c[m+16+4>>2]=1566444395;c[m+16+8>>2]=1566444395;g[m+16+12>>2]=0.0;b=c[b+96>>2]|0;k=c[(c[b>>2]|0)+8>>2]|0;g[m>>2]=-999999984306749440.0;g[m+4>>2]=-999999984306749440.0;g[m+8>>2]=-999999984306749440.0;g[m+12>>2]=0.0;Pb[k&127](b,m+32|0,m,m+16|0);c[a>>2]=c[n>>2];c[a+4>>2]=c[n+4>>2];c[a+8>>2]=c[n+8>>2];c[a+12>>2]=c[n+12>>2];l=m;return}function Tg(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0,q=0,r=0;p=l;l=l+32|0;e=c[a+12>>2]|0;if(!e){l=p;return}c[f+4>>2]=e;q=c[b+4>>2]|0;a=c[d+4>>2]|0;r=c[b+12>>2]|0;b=c[d+12>>2]|0;h=+g[r+48>>2]-+g[b+48>>2];i=+g[r+52>>2]-+g[b+52>>2];k=+g[r+56>>2]-+g[b+56>>2];m=+B(+(h*h+i*i+k*k));n=+g[q+32>>2]*+g[q+16>>2];o=+g[a+32>>2]*+g[a+16>>2];c[e+780>>2]=0;if(m>n+o+ +g[f+32>>2]){l=p;return}c[p+16>>2]=1065353216;c[p+16+4>>2]=0;c[p+16+8>>2]=0;g[p+16+12>>2]=0.0;if(m>1.1920928955078125e-07){g[p+16>>2]=h*(1.0/m);g[p+16+4>>2]=i*(1.0/m);g[p+16+8>>2]=k*(1.0/m);g[p+16+12>>2]=0.0;j=h*(1.0/m);i=i*(1.0/m);h=k*(1.0/m)}else{j=1.0;i=0.0;h=0.0}r=c[d+12>>2]|0;i=o*i+ +g[r+52>>2];k=o*h+ +g[r+56>>2];g[p>>2]=o*j+ +g[r+48>>2];g[p+4>>2]=i;g[p+8>>2]=k;g[p+12>>2]=0.0;Nb[c[(c[f>>2]|0)+16>>2]&15](f,p+16|0,p,m-(n+o));l=p;return}function Ug(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0.0,h=0,i=0.0,j=0.0,k=0.0,l=0,m=0.0;k=+g[b+64>>2]*.5;l=c[b+72>>2]|0;f=+g[d>>2];i=+g[d+4>>2];j=+g[d+8>>2];j=+B(+(f*f+i*i+j*j));h=c[b+68>>2]|0;do if(!(+g[d+(l<<2)>>2]>+g[b+56>>2]*j)){f=+g[d+(h<<2)>>2];e=c[b+76>>2]|0;i=+g[d+(e<<2)>>2];j=+B(+(f*f+i*i));if(j>1.1920928955078125e-07){j=+g[b+60>>2]/j;g[a+(h<<2)>>2]=f*j;g[a+(l<<2)>>2]=-k;f=i*j;break}else{g[a+(h<<2)>>2]=0.0;g[a+(l<<2)>>2]=-k;f=0.0;break}}else{g[a+(h<<2)>>2]=0.0;g[a+(l<<2)>>2]=k;f=0.0;e=c[b+76>>2]|0}while(0);g[a+(e<<2)>>2]=f;if(!(+ib[c[(c[b>>2]|0)+48>>2]&15](b)!=0.0))return;i=+g[d>>2];k=+g[d+4>>2];j=+g[d+8>>2];m=i*i+k*k+j*j<1.4210854715202004e-14?-1.0:i;f=i*i+k*k+j*j<1.4210854715202004e-14?-1.0:k;j=i*i+k*k+j*j<1.4210854715202004e-14?-1.0:j;k=1.0/+B(+(j*j+(m*m+f*f)));i=+ib[c[(c[b>>2]|0)+48>>2]&15](b);g[a>>2]=+g[a>>2]+i*m*k;g[a+4>>2]=+g[a+4>>2]+i*f*k;g[a+8>>2]=+g[a+8>>2]+i*j*k;return}function Vg(a,b,d){a=a|0;b=b|0;d=d|0;c[a+300>>2]=c[b>>2];c[a+300+4>>2]=c[b+4>>2];c[a+300+8>>2]=c[b+8>>2];c[a+300+12>>2]=c[b+12>>2];c[a+316>>2]=c[b+16>>2];c[a+316+4>>2]=c[b+16+4>>2];c[a+316+8>>2]=c[b+16+8>>2];c[a+316+12>>2]=c[b+16+12>>2];c[a+332>>2]=c[b+32>>2];c[a+332+4>>2]=c[b+32+4>>2];c[a+332+8>>2]=c[b+32+8>>2];c[a+332+12>>2]=c[b+32+12>>2];c[a+348>>2]=c[b+48>>2];c[a+348+4>>2]=c[b+48+4>>2];c[a+348+8>>2]=c[b+48+8>>2];c[a+348+12>>2]=c[b+48+12>>2];c[a+364>>2]=c[d>>2];c[a+364+4>>2]=c[d+4>>2];c[a+364+8>>2]=c[d+8>>2];c[a+364+12>>2]=c[d+12>>2];c[a+380>>2]=c[d+16>>2];c[a+380+4>>2]=c[d+16+4>>2];c[a+380+8>>2]=c[d+16+8>>2];c[a+380+12>>2]=c[d+16+12>>2];c[a+396>>2]=c[d+32>>2];c[a+396+4>>2]=c[d+32+4>>2];c[a+396+8>>2]=c[d+32+8>>2];c[a+396+12>>2]=c[d+32+12>>2];c[a+412>>2]=c[d+48>>2];c[a+412+4>>2]=c[d+48+4>>2];c[a+412+8>>2]=c[d+48+8>>2];c[a+412+12>>2]=c[d+48+12>>2];Db[c[(c[a>>2]|0)+8>>2]&255](a);return}function Wg(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0;n=c[a+4>>2]|0;a=c[a+44>>2]|0;do if(!n)if(!a){e=0.0;m=0.0;j=0.0;l=0.0;i=0.0;k=0.0;h=0.0;f=0.0}else{e=+g[a>>2];m=+g[a+12>>2];j=+g[a+16>>2];l=+g[a+20>>2];i=+g[a+24>>2];k=+g[a+28>>2];h=+g[a+4>>2];f=+g[a+8>>2]}else{e=+g[n>>2];if(!a){m=+g[n+12>>2];j=+g[n+16>>2];l=+g[n+20>>2];i=+g[n+24>>2];k=+g[n+28>>2];h=+g[n+4>>2];f=+g[n+8>>2];break}k=+g[a>>2];e=e<k?e:k;k=+g[n+16>>2];j=+g[a+16>>2];j=k>j?k:j;k=+g[n+4>>2];h=+g[a+4>>2];h=k<h?k:h;k=+g[n+20>>2];l=+g[a+20>>2];l=k>l?k:l;k=+g[n+8>>2];f=+g[a+8>>2];f=k<f?k:f;k=+g[n+24>>2];i=+g[a+24>>2];if(k>i){m=0.0;i=k;k=0.0}else{m=0.0;k=0.0}}while(0);g[b>>2]=e;g[b+4>>2]=h;g[b+8>>2]=f;g[b+12>>2]=m;g[d>>2]=j;g[d+4>>2]=l;g[d+8>>2]=i;g[d+12>>2]=k;return}function Xg(a){a=a|0;var b=0,d=0,e=0;id(a);if((sb[c[(c[a>>2]|0)+20>>2]&127](a)|0?(d=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0,(sb[c[(c[d>>2]|0)+56>>2]&127](d)|0)&6144|0):0)?(b=sb[c[(c[a>>2]|0)+104>>2]&127](a)|0,(b|0)>0):0)do{d=b;b=b+-1|0;e=ub[c[(c[a>>2]|0)+108>>2]&31](a,b)|0;Ib[c[(c[a>>2]|0)+172>>2]&127](a,e)}while((d|0)>1);if((((sb[c[(c[a>>2]|0)+20>>2]&127](a)|0?(e=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0,(sb[c[(c[e>>2]|0)+56>>2]&127](e)|0)&16387|0):0)?sb[c[(c[a>>2]|0)+20>>2]&127](a)|0:0)?(e=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0,sb[c[(c[e>>2]|0)+56>>2]&127](e)|0):0)?(c[a+296>>2]|0)>0:0){b=0;do{e=c[(c[a+304>>2]|0)+(b<<2)>>2]|0;Ib[c[(c[e>>2]|0)+12>>2]&127](e,c[a+72>>2]|0);b=b+1|0}while((b|0)<(c[a+296>>2]|0))}if(!(sb[c[(c[a>>2]|0)+20>>2]&127](a)|0))return;e=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;Db[c[(c[e>>2]|0)+104>>2]&255](e);return}function Yg(a,b){a=a|0;b=b|0;var c=0,d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0;c=l;l=l+48|0;yg(a+364|0,c+16|0);h=-+g[c+16>>2];e=-+g[c+16+4>>2];m=-+g[c+16+8>>2];k=+g[c+16+12>>2];f=+g[b>>2];n=+g[b+12>>2];j=+g[b+8>>2];i=+g[b+4>>2];yg(a+300|0,c);p=+g[c>>2];q=+g[c+12>>2];d=+g[c+8>>2];o=+g[c+4>>2];g[c+32>>2]=(k*n-f*h-i*e-j*m)*p+(k*f+n*h+j*e-i*m)*q+(f*m+(n*e+k*i)-j*h)*d-(n*m+k*j+i*h-f*e)*o;g[c+32+4>>2]=p*(n*m+k*j+i*h-f*e)+(q*(f*m+(n*e+k*i)-j*h)+(k*n-f*h-i*e-j*m)*o)-(k*f+n*h+j*e-i*m)*d;g[c+32+8>>2]=(n*m+k*j+i*h-f*e)*q+(k*n-f*h-i*e-j*m)*d+(k*f+n*h+j*e-i*m)*o-p*(f*m+(n*e+k*i)-j*h);g[c+32+12>>2]=(k*n-f*h-i*e-j*m)*q-(k*f+n*h+j*e-i*m)*p-(f*m+(n*e+k*i)-j*h)*o-(n*m+k*j+i*h-f*e)*d;Yd(a,c+32|0);l=c;return}function Zg(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;do if(!(SA(b,c[d+8>>2]|0)|0)){if(!(SA(b,c[d>>2]|0)|0)){b=c[b+8>>2]|0;Tb[c[(c[b>>2]|0)+24>>2]&31](b,d,e,f,g);break}if((c[d+16>>2]|0)!=(e|0)?(c[d+20>>2]|0)!=(e|0):0){c[d+32>>2]=f;if((c[d+44>>2]|0)==4)break;a[d+52>>0]=0;a[d+53>>0]=0;f=c[b+8>>2]|0;Ub[c[(c[f>>2]|0)+20>>2]&7](f,d,e,e,1,g);if(a[d+53>>0]|0)if(!(a[d+52>>0]|0)){b=1;f=11}else f=15;else{b=0;f=11}do if((f|0)==11){c[d+20>>2]=e;c[d+40>>2]=(c[d+40>>2]|0)+1;if((c[d+36>>2]|0)==1?(c[d+24>>2]|0)==2:0){a[d+54>>0]=1;if(b){f=15;break}else{b=4;break}}if(b)f=15;else b=4}while(0);if((f|0)==15)b=3;c[d+44>>2]=b;break}if((f|0)==1)c[d+32>>2]=1}else hq(d,e,f);while(0);return}function _g(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0;if(!e)e=c[b+188>>2]|0;j=c[d>>2]|0;f=c[b+328>>2]|0;a:do if((f|0)>0){h=c[b+336>>2]|0;g=0;while(1){if((c[h+(g<<2)>>2]|0)==(j|0))break;g=g+1|0;if((g|0)>=(f|0))break a}if((g|0)!=(f|0))return}while(0);if((f|0)==(c[b+332>>2]|0)?(i=(f|0)==0?1:f<<1,(f|0)<(i|0)):0){if(!i)h=0;else{c[6485]=(c[6485]|0)+1;f=ec((i<<2|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}h=f;f=c[b+328>>2]|0}if((f|0)>0){g=0;do{c[h+(g<<2)>>2]=c[(c[b+336>>2]|0)+(g<<2)>>2];g=g+1|0}while((g|0)!=(f|0))}g=c[b+336>>2]|0;if(g){if(a[b+340>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0);f=c[b+328>>2]|0}c[b+336>>2]=0}a[b+340>>0]=1;c[b+336>>2]=h;c[b+332>>2]=i}c[(c[b+336>>2]|0)+(f<<2)>>2]=j;c[b+328>>2]=f+1;b=c[b+344>>2]|0;wb[c[(c[b>>2]|0)+8>>2]&63](b,e,d)|0;return}function $g(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0;if((e|0)>=8192)return Xa(b|0,d|0,e|0)|0;h=b|0;g=b+e|0;if((b&3)==(d&3)){while(b&3){if(!e)return h|0;a[b>>0]=a[d>>0]|0;b=b+1|0;d=d+1|0;e=e-1|0}e=g&-4|0;f=e-64|0;while((b|0)<=(f|0)){c[b>>2]=c[d>>2];c[b+4>>2]=c[d+4>>2];c[b+8>>2]=c[d+8>>2];c[b+12>>2]=c[d+12>>2];c[b+16>>2]=c[d+16>>2];c[b+20>>2]=c[d+20>>2];c[b+24>>2]=c[d+24>>2];c[b+28>>2]=c[d+28>>2];c[b+32>>2]=c[d+32>>2];c[b+36>>2]=c[d+36>>2];c[b+40>>2]=c[d+40>>2];c[b+44>>2]=c[d+44>>2];c[b+48>>2]=c[d+48>>2];c[b+52>>2]=c[d+52>>2];c[b+56>>2]=c[d+56>>2];c[b+60>>2]=c[d+60>>2];b=b+64|0;d=d+64|0}while((b|0)<(e|0)){c[b>>2]=c[d>>2];b=b+4|0;d=d+4|0}}else{e=g-4|0;while((b|0)<(e|0)){a[b>>0]=a[d>>0]|0;a[b+1>>0]=a[d+1>>0]|0;a[b+2>>0]=a[d+2>>0]|0;a[b+3>>0]=a[d+3>>0]|0;b=b+4|0;d=d+4|0}}while((b|0)<(g|0)){a[b>>0]=a[d>>0]|0;b=b+1|0;d=d+1|0}return h|0}function ah(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0;c[b>>2]=10964;d=c[b+56>>2]|0;if(d|0){if(a[b+60>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+56>>2]=0}a[b+60>>0]=1;c[b+56>>2]=0;c[b+48>>2]=0;c[b+52>>2]=0;f=c[b+28>>2]|0;if((f|0)>0){d=0;do{g=c[b+36>>2]|0;h=g+(d*36|0)+4|0;i=g+(d*36|0)+12|0;j=c[i>>2]|0;e=g+(d*36|0)+16|0;if(j|0){if(a[e>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}c[i>>2]=0}a[e>>0]=1;c[i>>2]=0;c[h>>2]=0;c[g+(d*36|0)+8>>2]=0;d=d+1|0}while((d|0)!=(f|0))}d=c[b+36>>2]|0;if(d|0){if(a[b+40>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+36>>2]=0}a[b+40>>0]=1;c[b+36>>2]=0;c[b+28>>2]=0;c[b+32>>2]=0;d=c[b+16>>2]|0;if(!d){a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;b=b+12|0;c[b>>2]=0;return}if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+16>>2]=0;a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;b=b+12|0;c[b>>2]=0;return}function bh(b){b=b|0;var d=0;c[b>>2]=9968;d=c[b+156>>2]|0;if(d|0){if(a[b+160>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+156>>2]=0}a[b+160>>0]=1;c[b+156>>2]=0;c[b+148>>2]=0;c[b+152>>2]=0;d=c[b+136>>2]|0;if(d|0){if(a[b+140>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+136>>2]=0}a[b+140>>0]=1;c[b+136>>2]=0;c[b+128>>2]=0;c[b+132>>2]=0;d=c[b+116>>2]|0;if(d|0){if(a[b+120>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+116>>2]=0}a[b+120>>0]=1;c[b+116>>2]=0;c[b+108>>2]=0;c[b+112>>2]=0;d=c[b+96>>2]|0;if(d|0){if(a[b+100>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+96>>2]=0}a[b+100>>0]=1;c[b+96>>2]=0;c[b+88>>2]=0;c[b+92>>2]=0;c[b>>2]=10980;d=c[b+32>>2]|0;if(!d){a[b+36>>0]=1;c[b+32>>2]=0;c[b+24>>2]=0;b=b+28|0;c[b>>2]=0;return}if(a[b+36>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+32>>2]=0;a[b+36>>0]=1;c[b+32>>2]=0;c[b+24>>2]=0;b=b+28|0;c[b>>2]=0;return}function ch(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0;d=c[b+188>>2]|0;if(d|0){f=c[a+68>>2]|0;f=sb[c[(c[f>>2]|0)+36>>2]&127](f)|0;Mb[c[(c[f>>2]|0)+40>>2]&127](f,d,c[a+24>>2]|0);f=c[a+68>>2]|0;Mb[c[(c[f>>2]|0)+12>>2]&127](f,d,c[a+24>>2]|0);c[b+188>>2]=0}d=c[b+216>>2]|0;f=c[a+8>>2]|0;if((d|0)>-1&(d|0)<(f|0)){g=c[a+16>>2]|0;e=c[g+(d<<2)>>2]|0;c[g+(d<<2)>>2]=c[g+(f+-1<<2)>>2];c[(c[a+16>>2]|0)+(f+-1<<2)>>2]=e;c[a+8>>2]=f+-1;if((d|0)>=(f+-1|0)){c[b+216>>2]=-1;return}c[(c[(c[a+16>>2]|0)+(d<<2)>>2]|0)+216>>2]=d;c[b+216>>2]=-1;return}a:do if((f|0)>0){e=c[a+16>>2]|0;d=0;while(1){if((c[e+(d<<2)>>2]|0)==(b|0))break a;d=d+1|0;if((d|0)>=(f|0)){d=f;break}}}else d=f;while(0);if((f|0)<=(d|0)){c[b+216>>2]=-1;return}h=c[a+16>>2]|0;e=h+(d<<2)|0;g=c[e>>2]|0;c[e>>2]=c[h+(f+-1<<2)>>2];c[(c[a+16>>2]|0)+(f+-1<<2)>>2]=g;c[a+8>>2]=f+-1;c[b+216>>2]=-1;return}function dh(b,d){b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0;c[b+68>>2]=c[d>>2];c[b+68+4>>2]=c[d+4>>2];c[b+68+8>>2]=c[d+8>>2];c[b+68+12>>2]=c[d+12>>2];n=+g[b+68>>2];o=+g[b+72>>2];m=+g[b+76>>2];if(!(n*n+o*o+m*m>0.0)){g[b+20>>2]=0.0;return}k=+g[d>>2];l=+g[d+4>>2];e=+g[d+8>>2];f=1.0/+B(+(k*k+l*l+e*e));h=+g[b+256>>2];i=+g[b+260>>2];j=+g[b+264>>2];if(!(j*e*f+(h*k*f+i*l*f)!=0.0))return;p=j*e*f+(h*k*f+i*l*f)<-1.0?-1.0:j*e*f+(h*k*f+i*l*f);p=+B(+(n*n+o*o+m*m))*+E(+(1.5707963705062866-+G(+(p>1.0?1.0:p))));g[b+68>>2]=n-h*p;g[b+72>>2]=o-i*p;g[b+76>>2]=m-j*p;g[b+20>>2]=(j*e*f+(h*k*f+i*l*f)<0.0?-1.0:1.0)*+B(+(j*p*j*p+(h*p*h*p+i*p*i*p)));if(!(j*e*f+(h*k*f+i*l*f)>0.0))return;a[b+249>>0]=1;d=(c[b+8>>2]|0)+52|0;c[b+116>>2]=c[d>>2];c[b+116+4>>2]=c[d+4>>2];c[b+116+8>>2]=c[d+8>>2];c[b+116+12>>2]=c[d+12>>2];return}function eh(b){b=b|0;var d=0;c[b>>2]=10496;d=c[b+160>>2]|0;if(d|0){if(a[b+164>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+160>>2]=0}a[b+164>>0]=1;c[b+160>>2]=0;c[b+152>>2]=0;c[b+156>>2]=0;d=c[b+136>>2]|0;if(d|0){if(a[b+140>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+136>>2]=0}a[b+140>>0]=1;c[b+136>>2]=0;c[b+128>>2]=0;c[b+132>>2]=0;d=c[b+116>>2]|0;if(d|0){if(a[b+120>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+116>>2]=0}a[b+120>>0]=1;c[b+116>>2]=0;c[b+108>>2]=0;c[b+112>>2]=0;d=c[b+96>>2]|0;if(d|0){if(a[b+100>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+96>>2]=0}a[b+100>>0]=1;c[b+96>>2]=0;c[b+88>>2]=0;c[b+92>>2]=0;d=c[b+76>>2]|0;if(!d){a[b+80>>0]=1;c[b+76>>2]=0;c[b+68>>2]=0;b=b+72|0;c[b>>2]=0;return}if(a[b+80>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+76>>2]=0;a[b+80>>0]=1;c[b+76>>2]=0;c[b+68>>2]=0;b=b+72|0;c[b>>2]=0;return}function fh(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0.0,i=0,j=0,k=0.0,m=0.0,n=0.0,o=0,p=0;p=l;l=l+16|0;if((e|0)<=0){l=p;return}o=0;do{h=+g[a+64>>2]*.5;i=c[a+72>>2]|0;k=+g[b+(o<<4)>>2];m=+g[b+(o<<4)+4>>2];n=+g[b+(o<<4)+8>>2];n=+B(+(k*k+m*m+n*n));j=c[a+68>>2]|0;do if(!(+g[b+(o<<4)+(i<<2)>>2]>+g[a+56>>2]*n)){k=+g[b+(o<<4)+(j<<2)>>2];f=c[a+76>>2]|0;m=+g[b+(o<<4)+(f<<2)>>2];n=+B(+(k*k+m*m));if(n>1.1920928955078125e-07){n=+g[a+60>>2]/n;g[p+(j<<2)>>2]=k*n;g[p+(i<<2)>>2]=-h;h=m*n;break}else{g[p+(j<<2)>>2]=0.0;g[p+(i<<2)>>2]=-h;h=0.0;break}}else{g[p+(j<<2)>>2]=0.0;g[p+(i<<2)>>2]=h;h=0.0;f=c[a+76>>2]|0}while(0);g[p+(f<<2)>>2]=h;j=d+(o<<4)|0;c[j>>2]=c[p>>2];c[j+4>>2]=c[p+4>>2];c[j+8>>2]=c[p+8>>2];c[j+12>>2]=c[p+12>>2];o=o+1|0}while((o|0)!=(e|0));l=p;return}function gh(b){b=b|0;var d=0;c[b>>2]=6248;d=c[b+136>>2]|0;if(d|0){if(a[b+140>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+136>>2]=0}a[b+140>>0]=1;c[b+136>>2]=0;c[b+128>>2]=0;c[b+132>>2]=0;d=c[b+76>>2]|0;if(d|0){if(a[b+80>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+76>>2]=0}a[b+80>>0]=1;c[b+76>>2]=0;c[b+68>>2]=0;c[b+72>>2]=0;d=c[b+56>>2]|0;if(d|0){if(a[b+60>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+56>>2]=0}a[b+60>>0]=1;c[b+56>>2]=0;c[b+48>>2]=0;c[b+52>>2]=0;d=c[b+36>>2]|0;if(d|0){if(a[b+40>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+36>>2]=0}a[b+40>>0]=1;c[b+36>>2]=0;c[b+28>>2]=0;c[b+32>>2]=0;d=c[b+16>>2]|0;if(!d){a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;b=b+12|0;c[b>>2]=0;return}if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+16>>2]=0;a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;b=b+12|0;c[b>>2]=0;return}function hh(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0;o=(+g[a+36>>2]-+g[a+20>>2])*+g[a+112>>2]*.5;m=(+g[a+40>>2]-+g[a+24>>2])*+g[a+116>>2]*.5;k=(+g[a+44>>2]-+g[a+28>>2])*+g[a+120>>2]*.5;t=+A(+(+g[b>>2]));s=+A(+(+g[b+4>>2]));r=+A(+(+g[b+8>>2]));n=+A(+(+g[b+16>>2]));l=+A(+(+g[b+20>>2]));j=+A(+(+g[b+24>>2]));w=+A(+(+g[b+32>>2]));v=+A(+(+g[b+36>>2]));f=+A(+(+g[b+40>>2]));u=+g[b+48>>2];p=+g[b+52>>2];h=+g[b+56>>2];q=+ib[c[(c[a>>2]|0)+48>>2]&15](a);i=+ib[c[(c[a>>2]|0)+48>>2]&15](a);f=o*w+m*v+k*f+ +ib[c[(c[a>>2]|0)+48>>2]&15](a);g[d>>2]=u-(o*t+m*s+k*r+q);g[d+4>>2]=p-(o*n+m*l+k*j+i);g[d+8>>2]=h-f;g[d+12>>2]=0.0;g[e>>2]=u+(o*t+m*s+k*r+q);g[e+4>>2]=p+(o*n+m*l+k*j+i);g[e+8>>2]=h+f;g[e+12>>2]=0.0;return}function ih(a,b){a=a|0;b=b|0;var d=0,e=0;d=l;l=l+64|0;b=c[b+36>>2]|0;e=c[(c[a+24>>2]|0)+28>>2]|0;c[d>>2]=c[e+(b*80|0)>>2];c[d+4>>2]=c[e+(b*80|0)+4>>2];c[d+8>>2]=c[e+(b*80|0)+8>>2];c[d+12>>2]=c[e+(b*80|0)+12>>2];c[d+16>>2]=c[e+(b*80|0)+16>>2];c[d+16+4>>2]=c[e+(b*80|0)+16+4>>2];c[d+16+8>>2]=c[e+(b*80|0)+16+8>>2];c[d+16+12>>2]=c[e+(b*80|0)+16+12>>2];c[d+32>>2]=c[e+(b*80|0)+32>>2];c[d+32+4>>2]=c[e+(b*80|0)+32+4>>2];c[d+32+8>>2]=c[e+(b*80|0)+32+8>>2];c[d+32+12>>2]=c[e+(b*80|0)+32+12>>2];c[d+48>>2]=c[e+(b*80|0)+48>>2];c[d+48+4>>2]=c[e+(b*80|0)+48+4>>2];c[d+48+8>>2]=c[e+(b*80|0)+48+8>>2];c[d+48+12>>2]=c[e+(b*80|0)+48+12>>2];qf(a,b,d,c[e+(b*80|0)+64>>2]|0);l=d;return}function jh(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0;e=c[b>>2]|0;if((e|0)==(c[a+84>>2]|0)){f=1.0;return +f}if(c[e+204>>2]&4|0){f=1.0;return +f}if((+g[a+32>>2]-+g[a+16>>2])*+g[b+8>>2]+(+g[a+36>>2]-+g[a+20>>2])*+g[b+12>>2]+(+g[a+40>>2]-+g[a+24>>2])*+g[b+16>>2]>=-+g[a+88>>2]){f=1.0;return +f}c[a+4>>2]=c[b+40>>2];c[a+80>>2]=e;if(d){c[a+48>>2]=c[b+8>>2];c[a+48+4>>2]=c[b+8+4>>2];c[a+48+8>>2]=c[b+8+8>>2];c[a+48+12>>2]=c[b+8+12>>2]}else{k=+g[b+8>>2];j=+g[b+12>>2];i=+g[b+16>>2];h=k*+g[e+20>>2]+j*+g[e+24>>2]+i*+g[e+28>>2];f=k*+g[e+36>>2]+j*+g[e+40>>2]+i*+g[e+44>>2];g[a+48>>2]=+g[e+4>>2]*k+ +g[e+8>>2]*j+ +g[e+12>>2]*i;g[a+52>>2]=h;g[a+56>>2]=f;g[a+60>>2]=0.0}c[a+64>>2]=c[b+24>>2];c[a+64+4>>2]=c[b+24+4>>2];c[a+64+8>>2]=c[b+24+8>>2];c[a+64+12>>2]=c[b+24+12>>2];k=+g[b+40>>2];return +k}function kh(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0;f=c[b+100>>2]|0;if((f|0)==(c[b+104>>2]|0)?(i=(f|0)==0?1:f<<1,(f|0)<(i|0)):0){if(!i)h=0;else{c[6485]=(c[6485]|0)+1;f=ec((i<<4|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}h=f;f=c[b+100>>2]|0}if((f|0)>0){g=0;do{j=h+(g<<4)|0;k=(c[b+108>>2]|0)+(g<<4)|0;c[j>>2]=c[k>>2];c[j+4>>2]=c[k+4>>2];c[j+8>>2]=c[k+8>>2];c[j+12>>2]=c[k+12>>2];g=g+1|0}while((g|0)!=(f|0))}f=c[b+108>>2]|0;if(f|0){if(a[b+112>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[b+108>>2]=0}a[b+112>>0]=1;c[b+108>>2]=h;c[b+104>>2]=i;f=c[b+100>>2]|0}k=(c[b+108>>2]|0)+(f<<4)|0;c[k>>2]=c[d>>2];c[k+4>>2]=c[d+4>>2];c[k+8>>2]=c[d+8>>2];c[k+12>>2]=c[d+12>>2];c[b+100>>2]=(c[b+100>>2]|0)+1;if(!e)return;di(b);return}function lh(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0;i=l;l=l+48|0;e=c[a+28>>2]|0;c[i>>2]=e;e=(c[a+20>>2]|0)-e|0;c[i+4>>2]=e;c[i+8>>2]=b;c[i+12>>2]=d;c[i+16>>2]=c[a+60>>2];c[i+16+4>>2]=i;c[i+16+8>>2]=2;f=pA(Sa(146,i+16|0)|0)|0;a:do if((e+d|0)!=(f|0)){b=2;g=e+d|0;e=i;while(1){if((f|0)<0)break;g=g-f|0;j=c[e+4>>2]|0;k=f>>>0>j>>>0;e=k?e+8|0:e;b=b+(k<<31>>31)|0;j=f-(k?j:0)|0;c[e>>2]=(c[e>>2]|0)+j;c[e+4>>2]=(c[e+4>>2]|0)-j;c[i+32>>2]=c[a+60>>2];c[i+32+4>>2]=e;c[i+32+8>>2]=b;f=pA(Sa(146,i+32|0)|0)|0;if((g|0)==(f|0)){h=3;break a}}c[a+16>>2]=0;c[a+28>>2]=0;c[a+20>>2]=0;c[a>>2]=c[a>>2]|32;if((b|0)==2)d=0;else d=d-(c[e+4>>2]|0)|0}else h=3;while(0);if((h|0)==3){k=c[a+44>>2]|0;c[a+16>>2]=k+(c[a+48>>2]|0);c[a+28>>2]=k;c[a+20>>2]=k}l=i;return d|0}function mh(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0;o=l;l=l+16|0;c[a>>2]=0;c[a+4>>2]=0;c[a+8>>2]=0;c[a+12>>2]=0;e=+g[d>>2];h=+g[d+4>>2];f=+g[d+8>>2];if(e*e+h*h+f*f<9.999999747378752e-05){n=1.0;m=0.0;k=0.0}else{k=1.0/+B(+(e*e+h*h+f*f));n=e*k;m=h*k;k=f*k}c[o>>2]=0;c[o+4>>2]=0;c[o+8>>2]=0;c[o+12>>2]=0;d=c[b+56>>2]|0;j=+g[b+32+(d<<2)>>2];g[o+(d<<2)>>2]=j;e=+g[o>>2];h=+g[o+4>>2];f=+g[o+8>>2];i=n*e+m*h+k*f;if(i>-999999984306749440.0){b=c[o+12>>2]|0;g[a>>2]=e;g[a+4>>2]=h;g[a+8>>2]=f;c[a+12>>2]=b}else i=-999999984306749440.0;c[o>>2]=0;c[o+4>>2]=0;c[o+8>>2]=0;c[o+12>>2]=0;g[o+(d<<2)>>2]=-j;e=+g[o>>2];h=+g[o+4>>2];f=+g[o+8>>2];if(!(n*e+m*h+k*f>i)){l=o;return}b=c[o+12>>2]|0;g[a>>2]=e;g[a+4>>2]=h;g[a+8>>2]=f;c[a+12>>2]=b;l=o;return}function nh(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0,j=0,k=0;i=l;l=l+80|0;if((e|0)<=0){l=i;return}f=0;do{g[d+(f<<4)+12>>2]=-999999984306749440.0;f=f+1|0}while((f|0)!=(e|0));h=i+32+4|0;f=0;do{j=b+(f<<4)|0;c[i+32>>2]=9168;c[h>>2]=0;c[h+4>>2]=0;c[h+8>>2]=0;c[h+12>>2]=0;g[i+32+20>>2]=-999999984306749440.0;c[i+32+24>>2]=c[j>>2];c[i+32+24+4>>2]=c[j+4>>2];c[i+32+24+8>>2]=c[j+8>>2];c[i+32+24+12>>2]=c[j+12>>2];c[i+16>>2]=1566444395;c[i+16+4>>2]=1566444395;c[i+16+8>>2]=1566444395;g[i+16+12>>2]=0.0;j=c[a+96>>2]|0;k=c[(c[j>>2]|0)+8>>2]|0;g[i>>2]=-999999984306749440.0;g[i+4>>2]=-999999984306749440.0;g[i+8>>2]=-999999984306749440.0;g[i+12>>2]=0.0;Pb[k&127](j,i+32|0,i,i+16|0);j=d+(f<<4)|0;c[j>>2]=c[h>>2];c[j+4>>2]=c[h+4>>2];c[j+8>>2]=c[h+8>>2];c[j+12>>2]=c[h+12>>2];f=f+1|0}while((f|0)<(e|0));l=i;return}function oh(a,b){a=a|0;b=b|0;var d=0,e=0,f=0;d=l;l=l+96|0;b=c[b>>2]|0;if((b|0)==(c[a+4>>2]|0)){l=d;return 1}e=c[a+12>>2]|0;if(!(ub[c[(c[e>>2]|0)+8>>2]&31](e,c[b+188>>2]|0)|0)){l=d;return 1}e=c[a+4>>2]|0;f=c[e+192>>2]|0;c[d+64>>2]=0;c[d+64+4>>2]=f;c[d+64+8>>2]=e;c[d+64+12>>2]=e+4;c[d+64+16>>2]=-1;c[d+64+20>>2]=-1;e=c[b+192>>2]|0;c[d+40>>2]=0;c[d+40+4>>2]=e;c[d+40+8>>2]=b;c[d+40+12>>2]=b+4;c[d+40+16>>2]=-1;c[d+40+20>>2]=-1;b=c[(c[a+8>>2]|0)+24>>2]|0;b=yb[c[(c[b>>2]|0)+8>>2]&1](b,d+64|0,d+40|0,0,2)|0;if(b|0){f=c[a+12>>2]|0;c[d+4>>2]=0;c[d+8>>2]=d+64;c[d+12>>2]=d+40;g[d+32>>2]=0.0;c[d>>2]=7332;c[d+36>>2]=f;Tb[c[(c[b>>2]|0)+8>>2]&31](b,d+64|0,d+40|0,(c[a+8>>2]|0)+28|0,d);Db[c[c[b>>2]>>2]&255](b);f=c[(c[a+8>>2]|0)+24>>2]|0;Ib[c[(c[f>>2]|0)+60>>2]&127](f,b)}l=d;return 1}function ph(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0,h=0,i=0,j=0,k=0;k=l;l=l+96|0;i=c[c[a>>2]>>2]|0;h=c[c[a+4>>2]>>2]|0;if(!(wb[c[(c[b>>2]|0)+24>>2]&63](b,i,h)|0)){l=k;return}f=c[i+192>>2]|0;c[k+64>>2]=0;c[k+64+4>>2]=f;c[k+64+8>>2]=i;c[k+64+12>>2]=i+4;c[k+64+16>>2]=-1;c[k+64+20>>2]=-1;f=c[h+192>>2]|0;c[k+40>>2]=0;c[k+40+4>>2]=f;c[k+40+8>>2]=h;c[k+40+12>>2]=h+4;c[k+40+16>>2]=-1;c[k+40+20>>2]=-1;f=c[a+8>>2]|0;if(!f){f=yb[c[(c[b>>2]|0)+8>>2]&1](b,k+64|0,k+40|0,0,1)|0;c[a+8>>2]=f;if(f|0)j=4}else j=4;if((j|0)==4){c[k>>2]=7708;c[k+4>>2]=0;c[k+8>>2]=k+64;c[k+12>>2]=k+40;g[k+32>>2]=0.0;if((c[d+8>>2]|0)!=1){e=+ob[c[(c[f>>2]|0)+12>>2]&15](f,i,h,d,k);if(+g[d+12>>2]>e)g[d+12>>2]=e}else Tb[c[(c[f>>2]|0)+8>>2]&31](f,k+64|0,k+40|0,d,k)}l=k;return}function qh(a){a=a|0;var b=0.0,d=0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0;d=ur()|0;c[d+4>>2]=35;c[d+8>>2]=0;c[d+12>>2]=-1;c[d+16>>2]=1065353216;c[d+20>>2]=1065353216;c[d+24>>2]=1065353216;g[d+28>>2]=0.0;g[d+48>>2]=.03999999910593033;c[d>>2]=9188;c[d+56>>2]=1;e=+g[a>>2]+-.03999999910593033;f=+g[a+4>>2]+-.03999999910593033;h=+g[a+8>>2]+-.03999999910593033;g[d+32>>2]=e;g[d+36>>2]=f;g[d+40>>2]=h;g[d+44>>2]=0.0;j=+g[a>>2];i=+g[a+4>>2];b=+g[a+8>>2];b=+g[a+((j<i?(j<b?0:2):i<b?1:2)<<2)>>2]*.10000000149011612;if(!(b<.03999999910593033)){c[d+4>>2]=13;c[d>>2]=9396;c[d+56>>2]=2;return d|0}l=+hD(d);k=+hD(d);j=+hD(d)+h;g[d+48>>2]=b;h=+hD(d);i=+hD(d);j=j-+hD(d);g[d+32>>2]=l+e-h;g[d+36>>2]=k+f-i;g[d+40>>2]=j;g[d+44>>2]=0.0;c[d+4>>2]=13;c[d>>2]=9396;c[d+56>>2]=2;return d|0}function rh(a){a=a|0;var b=0.0,d=0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0;d=ur()|0;c[d+4>>2]=35;c[d+8>>2]=0;c[d+12>>2]=-1;c[d+16>>2]=1065353216;c[d+20>>2]=1065353216;c[d+24>>2]=1065353216;g[d+28>>2]=0.0;g[d+48>>2]=.03999999910593033;c[d>>2]=9188;c[d+56>>2]=1;e=+g[a>>2]+-.03999999910593033;f=+g[a+4>>2]+-.03999999910593033;h=+g[a+8>>2]+-.03999999910593033;g[d+32>>2]=e;g[d+36>>2]=f;g[d+40>>2]=h;g[d+44>>2]=0.0;j=+g[a>>2];i=+g[a+4>>2];b=+g[a+8>>2];b=+g[a+((j<i?(j<b?0:2):i<b?1:2)<<2)>>2]*.10000000149011612;if(!(b<.03999999910593033)){c[d+4>>2]=13;c[d>>2]=9292;c[d+56>>2]=0;return d|0}l=+hD(d);k=+hD(d);j=+hD(d)+h;g[d+48>>2]=b;h=+hD(d);i=+hD(d);j=j-+hD(d);g[d+32>>2]=l+e-h;g[d+36>>2]=k+f-i;g[d+40>>2]=j;g[d+44>>2]=0.0;c[d+4>>2]=13;c[d>>2]=9292;c[d+56>>2]=0;return d|0}function sh(b,d,e,f){b=b|0;d=+d;e=e|0;f=+f;var h=0,i=0.0,j=0;Ya(c[6488]|0,0)|0;if(e){g[b+284>>2]=f;i=+g[b+280>>2]+d;g[b+280>>2]=i;if(!(i>=f)){d=f;j=0}else{g[b+280>>2]=i-+(~~(i/f)|0)*f;d=f;j=~~(i/f)}}else{g[b+280>>2]=(a[b+316>>0]|0)==0?d:0.0;g[b+284>>2]=0.0;j=!(+A(+d)<1.1920928955078125e-07)&1;e=j}if(sb[c[(c[b>>2]|0)+20>>2]&127](b)|0){h=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;a[26532]=(sb[c[(c[h>>2]|0)+56>>2]&127](h)|0)>>>4&1}if(j){h=(j|0)>(e|0)?e:j;Eb[c[(c[b>>2]|0)+168>>2]&31](b,d*+(h|0));Db[c[(c[b>>2]|0)+176>>2]&255](b);if((h|0)>0){e=0;do{Eb[c[(c[b>>2]|0)+160>>2]&31](b,d);Db[c[(c[b>>2]|0)+80>>2]&255](b);e=e+1|0}while((e|0)<(h|0));e=b}else e=b}else{Db[c[(c[b>>2]|0)+80>>2]&255](b);e=b}Db[c[(c[e>>2]|0)+120>>2]&255](b);c[6487]=(c[6487]|0)+1;return j|0}function th(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0;f=l;l=l+16|0;x=c[a+56>>2]|0;v=+g[a+32+(((x+2|0)%3|0)<<2)>>2];g[f>>2]=v;g[f+4>>2]=v;g[f+8>>2]=v;g[f+12>>2]=0.0;g[f+(x<<2)>>2]=v+ +g[a+32+(x<<2)>>2];v=+A(+(+g[b>>2]));u=+A(+(+g[b+4>>2]));t=+A(+(+g[b+8>>2]));r=+A(+(+g[b+16>>2]));q=+A(+(+g[b+20>>2]));p=+A(+(+g[b+24>>2]));n=+A(+(+g[b+32>>2]));k=+A(+(+g[b+36>>2]));i=+A(+(+g[b+40>>2]));w=+g[b+48>>2];s=+g[b+52>>2];o=+g[b+56>>2];m=+g[f>>2];j=+g[f+4>>2];h=+g[f+8>>2];g[d>>2]=w-(v*m+u*j+t*h);g[d+4>>2]=s-(r*m+q*j+p*h);g[d+8>>2]=o-(n*m+k*j+i*h);g[d+12>>2]=0.0;g[e>>2]=w+(v*m+u*j+t*h);g[e+4>>2]=s+(r*m+q*j+p*h);g[e+8>>2]=o+(n*m+k*j+i*h);g[e+12>>2]=0.0;l=f;return}function uh(b){b=b|0;var d=0,e=0,f=0;c[b>>2]=10580;e=c[b+52>>2]|0;if((e|0)>0){d=0;do{f=c[(c[b+60>>2]|0)+(d<<2)>>2]|0;if(f|0){Db[c[c[f>>2]>>2]&255](f);f=c[b+4>>2]|0;Ib[c[(c[f>>2]|0)+60>>2]&127](f,c[(c[b+60>>2]|0)+(d<<2)>>2]|0)}d=d+1|0}while((d|0)!=(e|0))}d=c[b+60>>2]|0;if(d|0){if(a[b+64>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+60>>2]=0}a[b+64>>0]=1;c[b+60>>2]=0;c[b+52>>2]=0;c[b+56>>2]=0;d=c[b+40>>2]|0;if(d|0){if(a[b+44>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+40>>2]=0}a[b+44>>0]=1;c[b+40>>2]=0;c[b+32>>2]=0;c[b+36>>2]=0;d=c[b+20>>2]|0;if(!d){a[b+24>>0]=1;c[b+20>>2]=0;c[b+12>>2]=0;b=b+16|0;c[b>>2]=0;return}if(a[b+24>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+20>>2]=0;a[b+24>>0]=1;c[b+20>>2]=0;c[b+12>>2]=0;b=b+16|0;c[b>>2]=0;return}function vh(a,b,c,d,e,f,h,i,j,k,l){a=a|0;b=b|0;c=+c;d=+d;e=+e;f=+f;h=+h;i=+i;j=j|0;k=k|0;l=+l;var m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0;x=+g[a>>2]*f+ +g[a+16>>2]*h+ +g[a+32>>2]*i;v=+g[a+4>>2]*f+ +g[a+20>>2]*h+ +g[a+36>>2]*i;t=+g[a+8>>2]*f+ +g[a+24>>2]*h+ +g[a+40>>2]*i;s=+g[b>>2]*f+ +g[b+16>>2]*h+ +g[b+32>>2]*i;q=+g[b+4>>2]*f+ +g[b+20>>2]*h+ +g[b+36>>2]*i;o=+g[b+8>>2]*f+ +g[b+24>>2]*h+ +g[b+40>>2]*i;w=+g[j+80>>2];u=+g[j+84>>2];p=+g[j+88>>2];r=+g[k+80>>2];m=+g[k+84>>2];n=+g[k+88>>2];p=x*(x<0.0?-w:w)+v*(v<0.0?-u:u)+t*(t<0.0?-p:p);n=s*(s<0.0?-r:r)+q*(q<0.0?-m:m)+o*(o<0.0?-n:n);o=+g[j+96>>2];m=+g[k+96>>2];m=(p>o?p:o)+(n>m?n:m);return !((c*f+d*h+e*i+m<m-(c*f+d*h+e*i)?c*f+d*h+e*i+m:m-(c*f+d*h+e*i))>l)|0}function wh(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0.0,i=0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0,q=0,r=0,s=0.0,t=0;if((e|0)<=0)return;f=0;do{g[d+(f<<4)+12>>2]=-999999984306749440.0;f=f+1|0}while((f|0)!=(e|0));r=0;do{j=+g[a+16>>2];k=+g[b+(r<<4)>>2]*j;l=+g[a+20>>2];m=+g[b+(r<<4)+4>>2]*l;n=+g[a+24>>2];o=+g[b+(r<<4)+8>>2]*n;p=c[a+100>>2]|0;if((p|0)>0){q=c[a+108>>2]|0;f=-1;i=0;h=-3402823466385288598117041.0e14;do{s=k*+g[q+(i<<4)>>2]+m*+g[q+(i<<4)+4>>2]+o*+g[q+(i<<4)+8>>2];t=s>h;f=t?i:f;h=t?s:h;i=i+1|0}while((i|0)!=(p|0));o=+g[q+(f<<4)+4>>2]*l;s=+g[q+(f<<4)+8>>2]*n;g[d+(r<<4)>>2]=+g[q+(f<<4)>>2]*j;g[d+(r<<4)+4>>2]=o;g[d+(r<<4)+8>>2]=s}else h=-999999984306749440.0;g[d+(r<<4)+12>>2]=h;r=r+1|0}while((r|0)!=(e|0));return}function xh(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0;g=c[d>>2]|0;d=c[b+328>>2]|0;a:do if((d|0)>0){f=c[b+336>>2]|0;e=0;while(1){if((c[f+(e<<2)>>2]|0)==(g|0))break;e=e+1|0;if((e|0)>=(d|0))break a}if((e|0)!=(d|0))return}while(0);if((d|0)==(c[b+332>>2]|0)?(h=(d|0)==0?1:d<<1,(d|0)<(h|0)):0){if(!h)f=0;else{c[6485]=(c[6485]|0)+1;d=ec((h<<2|3)+16|0)|0;if(!d)d=0;else{c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16}f=d;d=c[b+328>>2]|0}if((d|0)>0){e=0;do{c[f+(e<<2)>>2]=c[(c[b+336>>2]|0)+(e<<2)>>2];e=e+1|0}while((e|0)!=(d|0))}e=c[b+336>>2]|0;if(e){if(a[b+340>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0);d=c[b+328>>2]|0}c[b+336>>2]=0}a[b+340>>0]=1;c[b+336>>2]=f;c[b+332>>2]=h}c[(c[b+336>>2]|0)+(d<<2)>>2]=g;c[b+328>>2]=d+1;return}function yh(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0;c[b>>2]=6508;if(a[b+152>>0]|0?(d=c[b+96>>2]|0,Db[c[c[d>>2]>>2]&255](d),d=c[b+96>>2]|0,d|0):0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}f=c[b+160>>2]|0;if((f|0)>0){d=0;do{g=c[b+168>>2]|0;h=g+(d*20|0)+4|0;i=g+(d*20|0)+12|0;j=c[i>>2]|0;e=g+(d*20|0)+16|0;if(j|0){if(a[e>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}c[i>>2]=0}a[e>>0]=1;c[i>>2]=0;c[h>>2]=0;c[g+(d*20|0)+8>>2]=0;d=d+1|0}while((d|0)!=(f|0))}d=c[b+168>>2]|0;if(!d){a[b+172>>0]=1;c[b+168>>2]=0;c[b+160>>2]=0;j=b+164|0;c[j>>2]=0;j=b+4|0;b=b+44|0;$j(b);$j(j);return}if(a[b+172>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+168>>2]=0;a[b+172>>0]=1;c[b+168>>2]=0;c[b+160>>2]=0;j=b+164|0;c[j>>2]=0;j=b+4|0;b=b+44|0;$j(b);$j(j);return}function zh(b){b=b|0;var d=0,e=0,f=0,g=0;c[b>>2]=6680;a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;c[b+12>>2]=0;c[b+24>>2]=0;a[b+44>>0]=1;c[b+40>>2]=0;c[b+32>>2]=0;c[b+36>>2]=0;a[b+64>>0]=1;c[b+60>>2]=0;c[b+52>>2]=0;c[b+56>>2]=0;c[b+68>>2]=0;c[6485]=(c[6485]|0)+1;d=ec(51)|0;if(!d)f=0;else{c[(d+4+15&-16)+-4>>2]=d;f=d+4+15&-16}e=c[b+8>>2]|0;if((e|0)>0){d=0;do{g=c[b+16>>2]|0;c[f+(d<<4)>>2]=c[g+(d<<4)>>2];c[f+(d<<4)+4>>2]=c[g+(d<<4)+4>>2];c[f+(d<<4)+8>>2]=c[g+(d<<4)+8>>2];c[f+(d<<4)+12>>2]=c[g+(d<<4)+12>>2];d=d+1|0}while((d|0)!=(e|0))}d=c[b+16>>2]|0;if(!d){a[b+20>>0]=1;c[b+16>>2]=f;c[b+12>>2]=2;Te(b);return}if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+16>>2]=0;a[b+20>>0]=1;c[b+16>>2]=f;c[b+12>>2]=2;Te(b);return}function Ah(a){a=a|0;var b=0.0,d=0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0;d=ur()|0;c[d+4>>2]=35;c[d+8>>2]=0;c[d+12>>2]=-1;c[d+16>>2]=1065353216;c[d+20>>2]=1065353216;c[d+24>>2]=1065353216;g[d+28>>2]=0.0;g[d+48>>2]=.03999999910593033;c[d>>2]=9188;c[d+56>>2]=1;e=+g[a>>2]+-.03999999910593033;f=+g[a+4>>2]+-.03999999910593033;h=+g[a+8>>2]+-.03999999910593033;g[d+32>>2]=e;g[d+36>>2]=f;g[d+40>>2]=h;g[d+44>>2]=0.0;j=+g[a>>2];i=+g[a+4>>2];b=+g[a+8>>2];b=+g[a+((j<i?(j<b?0:2):i<b?1:2)<<2)>>2]*.10000000149011612;if(!(b<.03999999910593033)){c[d+4>>2]=13;return d|0}l=+hD(d);k=+hD(d);j=+hD(d)+h;g[d+48>>2]=b;h=+hD(d);i=+hD(d);j=j-+hD(d);g[d+32>>2]=l+e-h;g[d+36>>2]=k+f-i;g[d+40>>2]=j;g[d+44>>2]=0.0;c[d+4>>2]=13;return d|0}function Bh(b){b=b|0;var d=0,e=0;d=c[b+92>>2]|0;if(d|0){if(a[b+96>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+92>>2]=0}a[b+96>>0]=1;c[b+92>>2]=0;c[b+84>>2]=0;c[b+88>>2]=0;d=c[b+64>>2]|0;if(d|0)do{c[b+64>>2]=c[d+8>>2];e=c[d>>2]|0;if(e|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);d=c[b+64>>2]|0}while((d|0)!=0);d=c[b+48>>2]|0;if(d|0)do{c[b+48>>2]=c[d+8>>2];e=c[d>>2]|0;if(e|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);d=c[b+48>>2]|0}while((d|0)!=0);d=c[b+32>>2]|0;if(!d)return;do{c[b+32>>2]=c[d+8>>2];e=c[d>>2]|0;if(e|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);d=c[b+32>>2]|0}while((d|0)!=0);return}function Ch(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0;i=c[d>>2]|0;i=ub[c[(c[i>>2]|0)+56>>2]&31](i,28)|0;j=(a[b+4>>0]|0)==0;h=c[b+8>>2]|0;g=c[b+12>>2]|0;b=c[d>>2]|0;c[i+4>>2]=b;c[i>>2]=10908;a[i+8>>0]=0;c[i+12>>2]=0;if(j){a[i+16>>0]=0;c[i+20>>2]=h;c[i+24>>2]=g;if(!(wb[c[(c[b>>2]|0)+24>>2]&63](b,c[e+8>>2]|0,c[f+8>>2]|0)|0))return i|0;j=c[i+4>>2]|0;c[i+12>>2]=wb[c[(c[j>>2]|0)+12>>2]&63](j,c[e+8>>2]|0,c[f+8>>2]|0)|0;a[i+8>>0]=1;return i|0}else{a[i+16>>0]=1;c[i+20>>2]=h;c[i+24>>2]=g;if(!(wb[c[(c[b>>2]|0)+24>>2]&63](b,c[f+8>>2]|0,c[e+8>>2]|0)|0))return i|0;j=c[i+4>>2]|0;c[i+12>>2]=wb[c[(c[j>>2]|0)+12>>2]&63](j,c[f+8>>2]|0,c[e+8>>2]|0)|0;a[i+8>>0]=1;return i|0}return 0}function Dh(a,b,d){a=a|0;b=+b;d=+d;var e=0.0,f=0.0,h=0.0;f=+g[a+692>>2];do if(f>0.0){h=+g[a+688>>2];if(!((b-h)%6.2831854820251465<-3.1415927410125732))if((b-h)%6.2831854820251465>3.1415927410125732)e=(b-h)%6.2831854820251465+-6.2831854820251465;else e=(b-h)%6.2831854820251465;else e=(b-h)%6.2831854820251465+6.2831854820251465;if(!(!(e<-f)&e<=f))if(e>0.0){if((f+h)%6.2831854820251465<-3.1415927410125732){b=(f+h)%6.2831854820251465+6.2831854820251465;break}if(!((f+h)%6.2831854820251465>3.1415927410125732)){b=(f+h)%6.2831854820251465;break}b=(f+h)%6.2831854820251465+-6.2831854820251465;break}else{if((h-f)%6.2831854820251465<-3.1415927410125732){b=(h-f)%6.2831854820251465+6.2831854820251465;break}if(!((h-f)%6.2831854820251465>3.1415927410125732)){b=(h-f)%6.2831854820251465;break}b=(h-f)%6.2831854820251465+-6.2831854820251465;break}}while(0);g[a+680>>2]=(b-+Ph(a,(c[a+28>>2]|0)+4|0,(c[a+32>>2]|0)+4|0))/d;return}function Eh(b,d,e,f,g,h){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;var i=0,j=0,k=0,l=0;if(SA(b,c[d+8>>2]|0)|0)Lj(d,e,f,g);else{j=a[d+52>>0]|0;k=a[d+53>>0]|0;l=c[b+12>>2]|0;a[d+52>>0]=0;a[d+53>>0]=0;dm(b+16|0,d,e,f,g,h);a:do if((l|0)>1){i=b+24|0;do{if(a[d+54>>0]|0)break a;if(!(a[d+52>>0]|0)){if(a[d+53>>0]|0?(c[b+8>>2]&1|0)==0:0)break a}else{if((c[d+24>>2]|0)==1)break a;if(!(c[b+8>>2]&2))break a}a[d+52>>0]=0;a[d+53>>0]=0;dm(i,d,e,f,g,h);i=i+8|0}while(i>>>0<(b+16+(l<<3)|0)>>>0)}while(0);a[d+52>>0]=j;a[d+53>>0]=k}return}function Fh(b,d){b=b|0;d=d|0;var e=0,f=0,h=0,i=0.0,j=0.0,k=0,m=0;f=l;l=l+48|0;if((c[b+128>>2]|0)<=0){l=f;return}e=0;do{m=c[b+136>>2]|0;c[f+32>>2]=(a[m+(e*284|0)+84>>0]|0)==0?1065353216:0;c[f+32+4>>2]=0;c[f+32+8>>2]=1065353216;g[f+32+12>>2]=0.0;k=m+(e*284|0)+140|0;c[f+16>>2]=c[k>>2];c[f+16+4>>2]=c[k+4>>2];c[f+16+8>>2]=c[k+8>>2];c[f+16+12>>2]=c[k+12>>2];k=c[b+112>>2]|0;h=c[(c[d>>2]|0)+16>>2]|0;j=+g[m+(e*284|0)+108+(k<<2)>>2]+ +g[f+16+4>>2];i=+g[m+(e*284|0)+124+(k<<2)>>2]+ +g[f+16+8>>2];g[f>>2]=+g[m+(e*284|0)+92+(k<<2)>>2]+ +g[f+16>>2];g[f+4>>2]=j;g[f+8>>2]=i;g[f+12>>2]=0.0;Pb[h&127](d,f+16|0,f,f+32|0);Pb[c[(c[d>>2]|0)+16>>2]&127](d,f+16|0,(c[b+136>>2]|0)+(e*284|0)+16|0,f+32|0);e=e+1|0}while((e|0)<(c[b+128>>2]|0));l=f;return}function Gh(a,b,d,e){a=a|0;b=b|0;d=+d;e=e|0;switch(b|0){case 2:{if((e|0)<1){g[a+232>>2]=d;c[a+300>>2]=c[a+300>>2]|512;return}if((e|0)<3){g[a+264>>2]=d;c[a+300>>2]=c[a+300>>2]|32;return}if((e|0)==3){g[a+248>>2]=d;c[a+300>>2]=c[a+300>>2]|2048;return}if((e|0)>=6)return;g[a+280>>2]=d;c[a+300>>2]=c[a+300>>2]|128;return}case 3:{if((e|0)<1){g[a+212>>2]=d;c[a+300>>2]=c[a+300>>2]|1;return}if((e|0)!=3)return;g[a+228>>2]=d;c[a+300>>2]=c[a+300>>2]|4;return}case 4:{if((e|0)<1){g[a+244>>2]=d;c[a+300>>2]=c[a+300>>2]|256;return}if((e|0)<3){g[a+276>>2]=d;c[a+300>>2]=c[a+300>>2]|16;return}if((e|0)==3){g[a+260>>2]=d;c[a+300>>2]=c[a+300>>2]|1024;return}if((e|0)>=6)return;g[a+292>>2]=d;c[a+300>>2]=c[a+300>>2]|64;return}default:return}}
function Lc(d,e,f,h,i){d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;var j=0.0,k=0,m=0.0,n=0,o=0,p=0.0,q=0.0,r=0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0;y=l;l=l+128|0;a[d+60>>0]=f&1;if(f){q=+g[h>>2]+-1.0;s=+g[h+4>>2]+-1.0;v=+g[h+8>>2]+-1.0;g[d+4>>2]=q;g[d+8>>2]=s;g[d+12>>2]=v;g[d+16>>2]=0.0;w=+g[i>>2]+1.0;m=+g[i+4>>2]+1.0;x=+g[i+8>>2]+1.0;g[d+20>>2]=w;g[d+24>>2]=m;g[d+28>>2]=x;g[d+32>>2]=0.0;g[d+36>>2]=65533.0/(w-q);g[d+40>>2]=65533.0/(m-s);g[d+44>>2]=65533.0/(x-v);g[d+48>>2]=0.0;a[d+60>>0]=1;j=q+ +(~~((q-q)*(65533.0/(w-q)))&65535&-2&65535)/(65533.0/(w-q))+-1.0;p=s+ +(~~((s-s)*(65533.0/(m-s)))&65535&-2&65535)/(65533.0/(m-s))+-1.0;u=v+ +(~~((v-v)*(65533.0/(x-v)))&65535&-2&65535)/(65533.0/(x-v))+-1.0;if(j<q){g[d+4>>2]=j;q=j}if(p<s)g[d+8>>2]=p;else p=s;if(u<v){g[d+12>>2]=u;t=x-u;j=65533.0/(x-u);v=u}else{t=x-v;j=65533.0/(x-v)}s=w-q;u=m-p;g[d+36>>2]=65533.0/s;g[d+40>>2]=65533.0/u;g[d+44>>2]=j;g[d+48>>2]=0.0;s=q+ +((~~(65533.0/s*s+1.0)&65535|1)&65535)/(65533.0/s)+1.0;u=p+ +((~~(65533.0/u*u+1.0)&65535|1)&65535)/(65533.0/u)+1.0;t=v+ +((~~(j*t+1.0)&65535|1)&65535)/j+1.0;if(w<s)g[d+20>>2]=s;else s=w;if(m<u){g[d+24>>2]=u;m=u}if(x<t){g[d+28>>2]=t;j=65533.0/(t-v)}g[d+36>>2]=65533.0/(s-q);g[d+40>>2]=65533.0/(m-p);g[d+44>>2]=j;g[d+48>>2]=0.0;c[y+96>>2]=9620;c[y+96+4>>2]=d+104;c[y+96+8>>2]=d;Pb[c[(c[e>>2]|0)+8>>2]&127](e,y+96|0,d+4|0,d+20|0);f=c[d+108>>2]|0;c[y+80>>2]=0;c[y+80+4>>2]=0;c[y+80+8>>2]=0;c[y+80+12>>2]=0;k=c[d+128>>2]|0;if((k|0)<(f<<1|0)){if((c[d+132>>2]|0)<(f<<1|0)){if(!f){h=0;e=k}else{c[6485]=(c[6485]|0)+1;h=ec(f<<5|19)|0;if(!h)h=0;else{c[(h+4+15&-16)+-4>>2]=h;h=h+4+15&-16}e=c[d+128>>2]|0}if((e|0)>0){i=0;do{r=h+(i<<4)|0;o=(c[d+136>>2]|0)+(i<<4)|0;c[r>>2]=c[o>>2];c[r+4>>2]=c[o+4>>2];c[r+8>>2]=c[o+8>>2];c[r+12>>2]=c[o+12>>2];i=i+1|0}while((i|0)!=(e|0))}i=c[d+136>>2]|0;if(i|0){if(a[d+140>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[d+136>>2]=0}a[d+140>>0]=1;c[d+136>>2]=h;c[d+132>>2]=f<<1;i=d+136|0}else i=d+136|0;h=k;do{r=(c[i>>2]|0)+(h<<4)|0;c[r>>2]=c[y+80>>2];c[r+4>>2]=c[y+80+4>>2];c[r+8>>2]=c[y+80+8>>2];c[r+12>>2]=c[y+80+12>>2];h=h+1|0}while((h|0)!=(f<<1|0))}c[d+128>>2]=f<<1}else{c[y+96>>2]=9640;c[y+96+4>>2]=d+64;c[y+80>>2]=-581039253;c[y+80+4>>2]=-581039253;c[y+80+8>>2]=-581039253;g[y+80+12>>2]=0.0;c[y+64>>2]=1566444395;c[y+64+4>>2]=1566444395;c[y+64+8>>2]=1566444395;g[y+64+12>>2]=0.0;Pb[c[(c[e>>2]|0)+8>>2]&127](e,y+96|0,y+80|0,y+64|0);f=c[d+68>>2]|0;k=y;o=k+64|0;do{c[k>>2]=0;k=k+4|0}while((k|0)<(o|0));r=c[d+88>>2]|0;if((r|0)<(f<<1|0)){if((c[d+92>>2]|0)<(f<<1|0)){if(!f){h=0;e=r}else{c[6485]=(c[6485]|0)+1;h=ec(f<<7|19)|0;if(!h)h=0;else{c[(h+4+15&-16)+-4>>2]=h;h=h+4+15&-16}e=c[d+88>>2]|0}if((e|0)>0){i=0;do{k=h+(i<<6)|0;n=(c[d+96>>2]|0)+(i<<6)|0;o=k+64|0;do{c[k>>2]=c[n>>2];k=k+4|0;n=n+4|0}while((k|0)<(o|0));i=i+1|0}while((i|0)!=(e|0))}i=c[d+96>>2]|0;if(i|0){if(a[d+100>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[d+96>>2]=0}a[d+100>>0]=1;c[d+96>>2]=h;c[d+92>>2]=f<<1;i=d+96|0}else i=d+96|0;h=r;do{k=(c[i>>2]|0)+(h<<6)|0;n=y;o=k+64|0;do{c[k>>2]=c[n>>2];k=k+4|0;n=n+4|0}while((k|0)<(o|0));h=h+1|0}while((h|0)!=(f<<1|0))}c[d+88>>2]=f<<1}c[d+56>>2]=0;rc(d,0,f);if(a[d+60>>0]|0?(c[d+152>>2]|0)==0:0){if(!(c[d+156>>2]|0)){c[6485]=(c[6485]|0)+1;f=ec(51)|0;if(!f)e=0;else{c[(f+4+15&-16)+-4>>2]=f;e=f+4+15&-16}h=c[d+152>>2]|0;if((h|0)>0){f=0;do{r=e+(f<<5)|0;o=(c[d+160>>2]|0)+(f<<5)|0;c[r>>2]=c[o>>2];c[r+4>>2]=c[o+4>>2];c[r+8>>2]=c[o+8>>2];c[r+12>>2]=c[o+12>>2];c[r+16>>2]=c[o+16>>2];c[r+20>>2]=c[o+20>>2];c[r+24>>2]=c[o+24>>2];c[r+28>>2]=c[o+28>>2];f=f+1|0}while((f|0)!=(h|0))}f=c[d+160>>2]|0;if(f|0){if(a[d+164>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[d+160>>2]=0}a[d+164>>0]=1;c[d+160>>2]=e;c[d+156>>2]=1;h=d+160|0;i=(c[d+152>>2]|0)+1|0;f=e}else{h=d+160|0;i=1;f=c[d+160>>2]|0}c[d+152>>2]=i;c[f>>2]=c[y+96>>2];c[f+4>>2]=c[y+96+4>>2];c[f+8>>2]=c[y+96+8>>2];c[f+12>>2]=c[y+96+12>>2];c[f+16>>2]=c[y+96+16>>2];c[f+20>>2]=c[y+96+20>>2];c[f+24>>2]=c[y+96+24>>2];c[f+28>>2]=c[y+96+28>>2];r=c[h>>2]|0;o=c[d+136>>2]|0;b[r>>1]=b[o>>1]|0;b[r+2>>1]=b[o+2>>1]|0;b[r+4>>1]=b[o+4>>1]|0;b[r+6>>1]=b[o+6>>1]|0;b[r+8>>1]=b[o+8>>1]|0;b[r+10>>1]=b[o+10>>1]|0;c[r+12>>2]=0;o=c[o+12>>2]|0;c[r+16>>2]=(o|0)>-1?1:0-o|0}c[d+168>>2]=c[d+152>>2];f=c[d+116>>2]|0;if(f|0){if(a[d+120>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[d+116>>2]=0}a[d+120>>0]=1;c[d+116>>2]=0;c[d+108>>2]=0;c[d+112>>2]=0;f=c[d+76>>2]|0;if(!f){a[d+80>>0]=1;c[d+76>>2]=0;c[d+68>>2]=0;d=d+72|0;c[d>>2]=0;l=y;return}if(a[d+80>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[d+76>>2]=0;a[d+80>>0]=1;c[d+76>>2]=0;c[d+68>>2]=0;d=d+72|0;c[d>>2]=0;l=y;return}function Mc(b,d,e,f,h,i,k,l,m,n,o,p){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;k=k|0;l=l|0;m=+m;n=n|0;o=+o;p=+p;var q=0.0,r=0,s=0,t=0,u=0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0,Q=0,R=0.0,S=0.0;Q=c[b+68>>2]|0;if((Q|0)==(c[b+72>>2]|0)?(u=(Q|0)==0?1:Q<<1,(Q|0)<(u|0)):0){if(!u){r=0;t=Q}else{c[6485]=(c[6485]|0)+1;r=ec((u*152|3)+16|0)|0;if(!r)r=0;else{c[(r+4+15&-16)+-4>>2]=r;r=r+4+15&-16}t=c[b+68>>2]|0}if((t|0)>0){s=0;do{$g(r+(s*152|0)|0,(c[b+76>>2]|0)+(s*152|0)|0,152)|0;s=s+1|0}while((s|0)!=(t|0))}s=c[b+76>>2]|0;if(s|0){if(a[b+80>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[s+-4>>2]|0)}c[b+76>>2]=0}a[b+80>>0]=1;c[b+76>>2]=r;c[b+72>>2]=u;r=c[b+68>>2]|0}else r=Q;c[b+68>>2]=r+1;P=c[b+76>>2]|0;c[P+(Q*152|0)+140>>2]=h;t=c[b+16>>2]|0;r=c[t+(e*244|0)+240>>2]|0;s=c[t+(f*244|0)+240>>2]|0;c[P+(Q*152|0)+144>>2]=e;c[P+(Q*152|0)+148>>2]=f;u=c[i+84>>2]|0;c[P+(Q*152|0)+104>>2]=u;c[P+(Q*152|0)+132>>2]=0;g[P+(Q*152|0)+100>>2]=0.0;g[P+(Q*152|0)+96>>2]=0.0;O=(c[j>>2]=u,+g[j>>2]);if(r|0){c[P+(Q*152|0)+16>>2]=c[d>>2];c[P+(Q*152|0)+16+4>>2]=c[d+4>>2];c[P+(Q*152|0)+16+8>>2]=c[d+8>>2];c[P+(Q*152|0)+16+12>>2]=c[d+12>>2];N=+g[k+4>>2];J=+g[P+(Q*152|0)+24>>2];H=+g[k+8>>2];L=+g[P+(Q*152|0)+20>>2];K=+g[P+(Q*152|0)+16>>2];M=+g[k>>2];g[P+(Q*152|0)>>2]=N*J-H*L;g[P+(Q*152|0)+4>>2]=H*K-J*M;g[P+(Q*152|0)+8>>2]=L*M-N*K;g[P+(Q*152|0)+12>>2]=0.0;w=((N*J-H*L)*+g[r+324>>2]+(H*K-J*M)*+g[r+328>>2]+(L*M-N*K)*+g[r+332>>2])*+g[r+604>>2];q=((N*J-H*L)*+g[r+340>>2]+(H*K-J*M)*+g[r+344>>2]+(L*M-N*K)*+g[r+348>>2])*+g[r+608>>2];v=((N*J-H*L)*+g[r+356>>2]+(H*K-J*M)*+g[r+360>>2]+(L*M-N*K)*+g[r+364>>2])*+g[r+612>>2];g[P+(Q*152|0)+64>>2]=w;g[P+(Q*152|0)+68>>2]=q;g[P+(Q*152|0)+72>>2]=v;g[P+(Q*152|0)+76>>2]=0.0;C=K;D=L;E=J;I=N*J-H*L;J=H*K-J*M;K=L*M-N*K}else{c[P+(Q*152|0)+64>>2]=0;c[P+(Q*152|0)+64+4>>2]=0;c[P+(Q*152|0)+64+8>>2]=0;c[P+(Q*152|0)+64+12>>2]=0;c[P+(Q*152|0)>>2]=0;c[P+(Q*152|0)+4>>2]=0;c[P+(Q*152|0)+8>>2]=0;c[P+(Q*152|0)+12>>2]=0;c[P+(Q*152|0)+16>>2]=0;c[P+(Q*152|0)+20>>2]=0;c[P+(Q*152|0)+24>>2]=0;c[P+(Q*152|0)+28>>2]=0;q=0.0;v=0.0;w=0.0;C=0.0;D=0.0;E=0.0;I=0.0;J=0.0;K=0.0}if(s|0){N=-+g[d>>2];A=-+g[d+4>>2];M=-+g[d+8>>2];g[P+(Q*152|0)+48>>2]=N;g[P+(Q*152|0)+52>>2]=A;g[P+(Q*152|0)+56>>2]=M;g[P+(Q*152|0)+60>>2]=0.0;B=+g[l+4>>2];S=+g[l+8>>2];R=+g[l>>2];g[P+(Q*152|0)+32>>2]=B*M-S*A;g[P+(Q*152|0)+36>>2]=S*N-R*M;g[P+(Q*152|0)+40>>2]=R*A-B*N;g[P+(Q*152|0)+44>>2]=0.0;x=((B*M-S*A)*+g[s+324>>2]+(S*N-R*M)*+g[s+328>>2]+(R*A-B*N)*+g[s+332>>2])*+g[s+604>>2];y=((B*M-S*A)*+g[s+340>>2]+(S*N-R*M)*+g[s+344>>2]+(R*A-B*N)*+g[s+348>>2])*+g[s+608>>2];z=((B*M-S*A)*+g[s+356>>2]+(S*N-R*M)*+g[s+360>>2]+(R*A-B*N)*+g[s+364>>2])*+g[s+612>>2];g[P+(Q*152|0)+80>>2]=x;g[P+(Q*152|0)+84>>2]=y;g[P+(Q*152|0)+88>>2]=z;g[P+(Q*152|0)+92>>2]=0.0;F=N;G=A;H=M;L=B*M-S*A;M=S*N-R*M;N=R*A-B*N}else{c[P+(Q*152|0)+80>>2]=0;c[P+(Q*152|0)+80+4>>2]=0;c[P+(Q*152|0)+80+8>>2]=0;c[P+(Q*152|0)+80+12>>2]=0;c[P+(Q*152|0)+32>>2]=0;c[P+(Q*152|0)+32+4>>2]=0;c[P+(Q*152|0)+32+8>>2]=0;c[P+(Q*152|0)+32+12>>2]=0;c[P+(Q*152|0)+32+16>>2]=0;c[P+(Q*152|0)+32+20>>2]=0;c[P+(Q*152|0)+32+24>>2]=0;c[P+(Q*152|0)+32+28>>2]=0;x=0.0;y=0.0;z=0.0;F=0.0;G=0.0;H=0.0;L=0.0;M=0.0;N=0.0}if(r|0){B=+g[k+8>>2];R=+g[k+4>>2];S=+g[k>>2];v=+g[r+404>>2]+((q*B-v*R)*+g[d>>2]+(v*S-B*w)*+g[d+4>>2]+(R*w-q*S)*+g[d+8>>2])}else v=0.0;if(s|0){R=-x;q=-y;z=-z;A=+g[l+8>>2];B=+g[l+4>>2];S=+g[l>>2];q=+g[s+404>>2]+((A*q-B*z)*+g[d>>2]+(S*z-A*R)*+g[d+4>>2]+(B*R-S*q)*+g[d+8>>2])}else q=0.0;B=m/(v+q);g[P+(Q*152|0)+108>>2]=B;if(r|0){z=+g[t+(e*244|0)+192>>2];m=+g[t+(e*244|0)+196>>2];A=+g[t+(e*244|0)+200>>2];y=(+g[t+(e*244|0)+176>>2]+ +g[t+(e*244|0)+208>>2])*C+(+g[t+(e*244|0)+180>>2]+ +g[t+(e*244|0)+212>>2])*D+(+g[t+(e*244|0)+184>>2]+ +g[t+(e*244|0)+216>>2])*E}else{z=0.0;m=0.0;A=0.0;y=C*0.0+D*0.0+E*0.0}if(s|0){v=+g[t+(f*244|0)+192>>2];w=+g[t+(f*244|0)+196>>2];x=+g[t+(f*244|0)+200>>2];q=(+g[t+(f*244|0)+176>>2]+ +g[t+(f*244|0)+208>>2])*F+(+g[t+(f*244|0)+180>>2]+ +g[t+(f*244|0)+212>>2])*G+(+g[t+(f*244|0)+184>>2]+ +g[t+(f*244|0)+216>>2])*H}else{v=0.0;w=0.0;x=0.0;q=F*0.0+G*0.0+H*0.0}q=B*(o-(y+(z*I+m*J+A*K)+(q+(v*L+w*M+x*N))));if(!(c[i+120>>2]&16)){S=0.0;S=q+S;n=P+(Q*152|0)+112|0;g[n>>2]=S;n=P+(Q*152|0)+128|0;g[n>>2]=0.0;n=P+(Q*152|0)+116|0;g[n>>2]=p;S=-O;n=P+(Q*152|0)+120|0;g[n>>2]=S;n=P+(Q*152|0)+124|0;c[n>>2]=u;return}S=B*(-(+g[n+44>>2]*((+g[i+48>>2]-+g[i+32>>2])*+g[d>>2]+(+g[i+52>>2]-+g[i+36>>2])*+g[d+4>>2]+(+g[i+56>>2]-+g[i+40>>2])*+g[d+8>>2]))/+g[n+12>>2]);S=q+S;n=P+(Q*152|0)+112|0;g[n>>2]=S;n=P+(Q*152|0)+128|0;g[n>>2]=0.0;n=P+(Q*152|0)+116|0;g[n>>2]=p;S=-O;n=P+(Q*152|0)+120|0;g[n>>2]=S;n=P+(Q*152|0)+124|0;c[n>>2]=u;return}function Nc(b,d,e,f,h,i,j,k,l,m,n,o,p){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;l=l|0;m=m|0;n=n|0;o=o|0;p=p|0;var q=0.0,r=0.0,s=0.0,t=0,u=0,v=0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0,D=0.0,E=0.0;t=N(c[l+24>>2]|0,m)|0;switch(c[d+84>>2]|0){case 4:{if(o|0){s=+g[n>>2];D=+g[n+4>>2];y=+g[n+8>>2];y=+g[j>>2]*s+ +g[j+4>>2]*D+ +g[j+8>>2]*y-(s*+g[k>>2]+D*+g[k+4>>2]+y*+g[k+8>>2]);vg(b,e,f,l,t,n,o,p)}else{s=+g[n>>2];D=+g[n+4>>2];y=+g[n+8>>2];y=+g[h>>2]*s+ +g[h+4>>2]*D+ +g[h+8>>2]*y-(s*+g[i>>2]+D*+g[i+4>>2]+y*+g[i+8>>2]);vg(b,e,f,l,t,n,0,p)}s=o|0?-1.0:1.0;q=s*+g[l>>2]*+g[d+12>>2]*+g[d+72>>2];m=(c[l+28>>2]|0)+(t<<2)|0;g[m>>2]=q;r=q-y*+g[d+12>>2];if(o|0){if(r>0.0?(w=-(y*+g[d+8>>2]),q<w):0)g[m>>2]=w}else if(r<0.0?(x=-(y*+g[d+8>>2]),q>x):0)g[m>>2]=x;g[(c[l+36>>2]|0)+(t<<2)>>2]=o|0?0.0:-3402823466385288598117041.0e14;g[(c[l+40>>2]|0)+(t<<2)>>2]=o|0?3402823466385288598117041.0e14:0.0;c[(c[l+32>>2]|0)+(t<<2)>>2]=c[d+16>>2];u=(c[l+24>>2]|0)+t|0;vg(b,e,f,l,u,n,o,p);q=s*+g[l>>2]*+g[d+12>>2]*+g[d+76>>2];m=(c[l+28>>2]|0)+(u<<2)|0;g[m>>2]=q;r=q-y*+g[d+12>>2];if(o|0){if(r<0.0?(z=-(y*+g[d+8>>2]),q>z):0)g[m>>2]=z}else if(r>0.0?(A=-(y*+g[d+8>>2]),q<A):0)g[m>>2]=A;g[(c[l+36>>2]|0)+(u<<2)>>2]=o|0?-3402823466385288598117041.0e14:0.0;g[(c[l+40>>2]|0)+(u<<2)>>2]=o|0?0.0:3402823466385288598117041.0e14;m=2;v=d+16|0;t=l+32|0;C=21;break}case 3:{vg(b,e,f,l,t,n,o,p);g[(c[l+28>>2]|0)+(t<<2)>>2]=((o|0)==0?1.0:-1.0)*+g[l>>2]*+g[d+12>>2]*+g[d+72>>2];g[(c[l+36>>2]|0)+(t<<2)>>2]=-3402823466385288598117041.0e14;g[(c[l+40>>2]|0)+(t<<2)>>2]=3402823466385288598117041.0e14;m=1;v=d+16|0;u=t;t=l+32|0;C=21;break}default:m=0}if((C|0)==21){c[(c[t>>2]|0)+(u<<2)>>2]=c[v>>2];t=(c[l+24>>2]|0)+u|0}do if(a[d+28>>0]|0){if(!(a[d+40>>0]|0)){vg(b,e,f,l,t,n,o,p);y=+g[d+32>>2];q=(o|0)==0?-y:y;r=+g[d+80>>2];s=+g[d>>2];w=+g[d+4>>2];x=+g[l>>2]*+g[d+20>>2];do if(!(s>w))if(!(s==w)){if(q/x<0.0)if(r>=s?s-q/x>r:0){q=(s-r)/(q/x);break}else{q=r<s?0.0:1.0;break}if(q/x>0.0)if(r<=w?w-q/x<r:0){q=(w-r)/(q/x);break}else{q=r>w?0.0:1.0;break}else q=0.0}else q=0.0;else q=1.0;while(0);g[(c[l+28>>2]|0)+(t<<2)>>2]=q*y;g[(c[l+36>>2]|0)+(t<<2)>>2]=-+g[d+36>>2];c[(c[l+40>>2]|0)+(t<<2)>>2]=c[d+36>>2];c[(c[l+32>>2]|0)+(t<<2)>>2]=c[d+24>>2];t=(c[l+24>>2]|0)+t|0;m=m+1|0;if(!(a[d+28>>0]|0))break;if(!(a[d+40>>0]|0))break;else C=d+80|0}else C=d+80|0;r=+g[d+44>>2];q=+g[C>>2]-r;if(o|0){r=q>3.1415927410125732?r+6.2831854820251465:r;q=q>3.1415927410125732?q+-6.2831854820251465:q;if(q<-3.1415927410125732){q=q+6.2831854820251465;r=r+-6.2831854820251465}}vg(b,e,f,l,t,n,o,p);v=q<0.0;y=+g[d+32>>2];y=v?-y:y;do if(q!=0.0){s=+g[d>>2];x=+g[d+4>>2];u=q>0.0;if(s>x){w=u?r:-3402823466385288598117041.0e14;s=v?r:3402823466385288598117041.0e14}else{w=u&r>s?r:s;s=v&r<x?r:x}q=+g[C>>2];r=+g[l>>2]*+g[d+20>>2];if(!(w>s))if(!(w==s)){if(-y/r<0.0)if(q>=w?w- -y/r>q:0){q=(w-q)/(-y/r);break}else{q=q<w?0.0:1.0;break}if(-y/r>0.0)if(q<=s?s- -y/r<q:0){q=(s-q)/(-y/r);break}else{q=q>s?0.0:1.0;break}else q=0.0}else q=0.0;else q=1.0}else q=0.0;while(0);g[(c[l+28>>2]|0)+(t<<2)>>2]=(o|0?-1.0:1.0)*y*q;g[(c[l+36>>2]|0)+(t<<2)>>2]=-+g[d+36>>2];c[(c[l+40>>2]|0)+(t<<2)>>2]=c[d+36>>2];c[(c[l+32>>2]|0)+(t<<2)>>2]=c[d+24>>2];m=m+1|0;t=(c[l+24>>2]|0)+t|0}while(0);if(!(a[d+48>>0]|0)){l=m;return l|0}D=+g[d+80>>2]-+g[d+68>>2];vg(b,e,f,l,t,n,o,p);z=1.0/+g[l>>2];A=+g[d+60>>2];q=+g[d+52>>2];if(o|0){E=+g[n>>2];s=+g[n+4>>2];r=+g[n+8>>2];w=r;x=s;y=E;u=k;s=+g[j>>2]*E+ +g[j+4>>2]*s;r=+g[j+8>>2]*r}else{E=+g[n>>2];s=+g[n+4>>2];r=+g[n+8>>2];w=r;x=s;y=E;u=i;s=+g[h>>2]*E+ +g[h+4>>2]*s;r=+g[h+8>>2]*r}s=s+r-(y*+g[u>>2]+x*+g[u+4>>2]+w*+g[u+8>>2]);r=1.0/+g[(c[b+28>>2]|0)+404>>2];E=1.0/+g[(c[b+32>>2]|0)+404>>2];r=r>E?E:r;E=+B(+(q/r));if((a[d+56>>0]|0)!=0&z*E>.25)q=1.0/z/z*.0625*r;y=o|0?-1.0:1.0;E=z*y*s*(A*z>r&(a[d+64>>0]|0)!=0?r/z:A);q=z*D*q-E;g[(c[l+28>>2]|0)+(t<<2)>>2]=s+y*q;r=q<-E?q:-E;q=q<-E?-E:q;if(o|0){g[(c[l+36>>2]|0)+(t<<2)>>2]=-q>0.0?0.0:-q;q=-r}else g[(c[l+36>>2]|0)+(t<<2)>>2]=r>0.0?0.0:r;g[(c[l+40>>2]|0)+(t<<2)>>2]=q<0.0?0.0:q;g[(c[l+32>>2]|0)+(t<<2)>>2]=0.0;l=m+1|0;return l|0}function Oc(b,d,e,f,h,i){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;var j=0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0,t=0.0,u=0.0,v=0,w=0.0,x=0,y=0.0,z=0.0,A=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0.0,S=0.0,T=0.0,U=0.0,V=0.0,W=0.0,X=0.0,Y=0.0,Z=0.0,_=0.0,$=0.0,aa=0,ba=0.0,ca=0.0,da=0.0,ea=0,fa=0.0;ea=l;l=l+32|0;J=c[b+4>>2]|0;a[J+312>>0]=0;c[J>>2]=0;a[J+356>>0]=1;c[J+292>>2]=1566444395;c[J+296>>2]=1566444395;c[J+300>>2]=1566444395;g[J+304>>2]=0.0;c[J+336>>2]=0;c[J+336+4>>2]=0;c[J+336+8>>2]=0;c[J+336+12>>2]=0;a[J+336+16>>0]=0;a[J+332>>0]=a[J+332>>0]&-16;p=+g[d+48>>2];r=+g[d+52>>2];u=+g[d+56>>2];o=+g[f+48>>2];q=+g[f+52>>2];t=+g[f+56>>2];L=+g[d>>2];X=+g[d+4>>2];Z=+g[d+8>>2];$=+g[d+16>>2];N=+g[d+20>>2];P=+g[d+24>>2];R=+g[d+32>>2];T=+g[d+36>>2];V=+g[d+40>>2];K=+g[f>>2];W=+g[f+4>>2];Y=+g[f+8>>2];_=+g[f+16>>2];M=+g[f+20>>2];O=+g[f+24>>2];Q=+g[f+32>>2];S=+g[f+36>>2];U=+g[f+40>>2];ba=+g[e+48>>2]-p-(+g[h+48>>2]-o);ca=+g[e+52>>2]-r-(+g[h+52>>2]-q);da=+g[e+56>>2]-u-(+g[h+56>>2]-t);J=c[b+8>>2]|0;x=c[(c[J>>2]|0)+64>>2]|0;g[ea>>2]=L*-ba+$*-ca+R*-da;g[ea+4>>2]=X*-ba+N*-ca+T*-da;g[ea+8>>2]=Z*-ba+P*-ca+V*-da;g[ea+12>>2]=0.0;Mb[x&127](ea+16|0,J,ea);H=+g[ea+16>>2];I=+g[ea+16+4>>2];G=+g[ea+16+8>>2];m=H*+g[d>>2]+I*+g[d+4>>2]+G*+g[d+8>>2]+ +g[d+48>>2];w=H*+g[d+16>>2]+I*+g[d+20>>2]+G*+g[d+24>>2]+ +g[d+52>>2];G=H*+g[d+32>>2]+I*+g[d+36>>2]+G*+g[d+40>>2]+ +g[d+56>>2];J=c[b+12>>2]|0;x=c[(c[J>>2]|0)+64>>2]|0;I=ba*+g[f+4>>2]+ca*+g[f+20>>2]+da*+g[f+36>>2];H=ba*+g[f+8>>2]+ca*+g[f+24>>2]+da*+g[f+40>>2];g[ea>>2]=ba*+g[f>>2]+ca*+g[f+16>>2]+da*+g[f+32>>2];g[ea+4>>2]=I;g[ea+8>>2]=H;g[ea+12>>2]=0.0;Mb[x&127](ea+16|0,J,ea);H=+g[ea+16>>2];I=+g[ea+16+4>>2];n=+g[ea+16+8>>2];m=m-(H*+g[f>>2]+I*+g[f+4>>2]+n*+g[f+8>>2]+ +g[f+48>>2]);w=w-(H*+g[f+16>>2]+I*+g[f+20>>2]+n*+g[f+24>>2]+ +g[f+52>>2]);n=G-(H*+g[f+32>>2]+I*+g[f+36>>2]+n*+g[f+40>>2]+ +g[f+56>>2]);a:do if(m*m+w*w+n*n>9.999999747378752e-05){k=0.0;J=32;I=m;j=0;H=n;s=0;z=o;o=0.0;n=0.0;m=0.0;while(1){if(!J)break a;J=J+-1|0;x=c[b+8>>2]|0;v=c[(c[x>>2]|0)+64>>2]|0;D=-I;fa=-w;y=-H;g[ea>>2]=L*D+$*fa+R*y;g[ea+4>>2]=X*D+N*fa+T*y;g[ea+8>>2]=Z*D+P*fa+V*y;g[ea+12>>2]=0.0;Mb[v&127](ea+16|0,x,ea);y=+g[ea+16>>2];fa=+g[ea+16+4>>2];D=+g[ea+16+8>>2];A=p+(L*y+X*fa+Z*D);C=r+($*y+N*fa+P*D);D=u+(R*y+T*fa+V*D);x=c[b+12>>2]|0;v=c[(c[x>>2]|0)+64>>2]|0;g[ea>>2]=K*I+_*w+Q*H;g[ea+4>>2]=W*I+M*w+S*H;g[ea+8>>2]=Y*I+O*w+U*H;g[ea+12>>2]=0.0;Mb[v&127](ea+16|0,x,ea);fa=+g[ea+16>>2];y=+g[ea+16+4>>2];G=+g[ea+16+8>>2];E=z+(K*fa+W*y+Y*G);F=q+(_*fa+M*y+O*G);G=t+(Q*fa+S*y+U*G);y=(A-E)*I+(C-F)*w+(D-G)*H;if(k>1.0){j=0;aa=25;break}if(y>0.0){m=ba*I+ca*w+da*H;if(m>=-1.4210854715202004e-14){j=0;aa=25;break}u=k-y/m;k=u;j=s;y=(1.0-u)*+g[f+48>>2]+u*+g[h+48>>2];p=(1.0-u)*+g[d+48>>2]+u*+g[e+48>>2];q=(1.0-u)*+g[f+52>>2]+u*+g[h+52>>2];r=(1.0-u)*+g[d+52>>2]+u*+g[e+52>>2];t=(1.0-u)*+g[f+56>>2]+u*+g[h+56>>2];u=(1.0-u)*+g[d+56>>2]+u*+g[e+56>>2];m=I;n=w;o=H}else y=z;s=c[b+4>>2]|0;x=c[s>>2]|0;b:do if((x|0)>0){w=+g[s+308>>2];v=0;while(1){H=A-E-+g[s+4+(v<<4)>>2];I=C-F-+g[s+4+(v<<4)+4>>2];fa=D-G-+g[s+4+(v<<4)+8>>2];v=v+1|0;if(H*H+I*I+fa*fa<=w){v=1;break b}if((v|0)>=(x|0)){v=0;break}}}else v=0;while(0);if((+g[s+304>>2]==0.0?D-G==+g[s+300>>2]:0)?C-F==+g[s+296>>2]:0){if(!(A-E==+g[s+292>>2]|v))aa=17}else if(!v)aa=17;if((aa|0)==17){aa=0;g[s+292>>2]=A-E;g[s+296>>2]=C-F;g[s+300>>2]=D-G;g[s+304>>2]=0.0;a[s+356>>0]=1;g[s+4+(x<<4)>>2]=A-E;g[s+4+(x<<4)+4>>2]=C-F;g[s+4+(x<<4)+8>>2]=D-G;g[s+4+(x<<4)+12>>2]=0.0;x=c[s>>2]|0;g[s+84+(x<<4)>>2]=A;g[s+84+(x<<4)+4>>2]=C;g[s+84+(x<<4)+8>>2]=D;g[s+84+(x<<4)+12>>2]=0.0;x=c[s>>2]|0;g[s+164+(x<<4)>>2]=E;g[s+164+(x<<4)+4>>2]=F;g[s+164+(x<<4)+8>>2]=G;g[s+164+(x<<4)+12>>2]=0.0;c[s>>2]=(c[s>>2]|0)+1;s=c[b+4>>2]|0}x=ic(s)|0;I=+g[s+276>>2];w=+g[s+280>>2];H=+g[s+284>>2];if(!x)break a;if(!(I*I+w*w+H*H>9.999999747378752e-05))break a;else{s=c[s+288>>2]|0;z=y}}if((aa|0)==25){l=ea;return j|0}}else{k=0.0;o=0.0;n=0.0;m=0.0;j=0}while(0);g[i+164>>2]=k;k=m*m+n*n+o*o;if(!(k>=1.4210854715202004e-14)){c[i+132>>2]=0;c[i+132+4>>2]=0;c[i+132+8>>2]=0;c[i+132+12>>2]=0;k=0.0;m=0.0;n=0.0}else{fa=1.0/+B(+k);k=m*fa;m=n*fa;n=o*fa;g[i+132>>2]=k;g[i+136>>2]=m;g[i+140>>2]=n;c[i+144>>2]=j}if(ba*k+ca*m+da*n>=-+g[i+172>>2]){i=0;l=ea;return i|0}b=c[b+4>>2]|0;ic(b)|0;Zn(i+148|0,b+260|0,16)|0;i=1;l=ea;return i|0}function Pc(b,d,e,f,h){b=b|0;d=d|0;e=+e;f=+f;h=+h;var i=0.0,j=0.0,k=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0.0;u=l;l=l+240|0;i=+g[b+136>>2]+f;j=+g[b+140>>2]+h;g[b+152>>2]=+g[b+132>>2]+e;g[b+156>>2]=i;g[b+160>>2]=j;g[b+164>>2]=0.0;c[u+176>>2]=1065353216;m=u+176+4|0;c[m>>2]=0;c[m+4>>2]=0;c[m+8>>2]=0;c[m+12>>2]=0;c[u+176+20>>2]=1065353216;n=u+176+24|0;c[n>>2]=0;c[n+4>>2]=0;c[n+8>>2]=0;c[n+12>>2]=0;c[u+176+40>>2]=1065353216;o=u+176+44|0;c[o>>2]=0;c[o+4>>2]=0;c[o+8>>2]=0;c[o+12>>2]=0;c[o+16>>2]=0;c[u+112>>2]=1065353216;p=u+112+4|0;c[p>>2]=0;c[p+4>>2]=0;c[p+8>>2]=0;c[p+12>>2]=0;c[u+112+20>>2]=1065353216;q=u+112+24|0;c[q>>2]=0;c[q+4>>2]=0;c[q+8>>2]=0;c[q+12>>2]=0;c[u+112+40>>2]=1065353216;r=u+112+44|0;c[r>>2]=0;c[r+4>>2]=0;c[r+8>>2]=0;c[r+12>>2]=0;c[r+16>>2]=0;j=1.0;k=10;while(1){if(!k){t=30;break}k=k+-1|0;c[u+176+48>>2]=c[b+132>>2];c[u+176+48+4>>2]=c[b+132+4>>2];c[u+176+48+8>>2]=c[b+132+8>>2];c[u+176+48+12>>2]=c[b+132+12>>2];c[u+112+48>>2]=c[b+152>>2];c[u+112+48+4>>2]=c[b+152+4>>2];c[u+112+48+8>>2]=c[b+152+8>>2];c[u+112+48+12>>2]=c[b+152+12>>2];h=+g[b+132>>2]-+g[b+152>>2];i=+g[b+136>>2]-+g[b+156>>2];e=+g[b+140>>2]-+g[b+160>>2];z=+g[b+168>>2];w=+g[b+172>>2];A=+g[b+176>>2];x=+g[b+180>>2];C=z*(2.0/(z*z+w*w+A*A+x*x));y=w*(2.0/(z*z+w*w+A*A+x*x));f=A*(2.0/(z*z+w*w+A*A+x*x));g[u+176>>2]=1.0-(w*y+A*f);g[m>>2]=z*y-x*f;g[u+176+8>>2]=z*f+x*y;g[u+176+12>>2]=0.0;g[u+176+16>>2]=z*y+x*f;g[u+176+20>>2]=1.0-(z*C+A*f);g[n>>2]=w*f-x*C;g[u+176+28>>2]=0.0;g[u+176+32>>2]=z*f-x*y;g[u+176+36>>2]=w*f+x*C;g[u+176+40>>2]=1.0-(z*C+w*y);g[o>>2]=0.0;y=+g[b+184>>2];w=+g[b+188>>2];C=+g[b+192>>2];z=+g[b+196>>2];x=y*(2.0/(y*y+w*w+C*C+z*z));f=w*(2.0/(y*y+w*w+C*C+z*z));A=C*(2.0/(y*y+w*w+C*C+z*z));g[u+112>>2]=1.0-(w*f+C*A);g[p>>2]=y*f-z*A;g[u+112+8>>2]=y*A+z*f;g[u+112+12>>2]=0.0;g[u+112+16>>2]=y*f+z*A;g[u+112+20>>2]=1.0-(y*x+C*A);g[q>>2]=w*A-z*x;g[u+112+28>>2]=0.0;g[u+112+32>>2]=y*A-z*f;g[u+112+36>>2]=w*A+z*x;g[u+112+40>>2]=1.0-(y*x+w*f);g[r>>2]=0.0;v=c[b+8>>2]|0;g[u+4>>2]=1.0;c[u+80>>2]=0;c[u+16>>2]=0;c[u+16+4>>2]=0;c[u+16+8>>2]=0;c[u+16+12>>2]=0;c[u+16+16>>2]=0;c[u+16+20>>2]=0;c[u+16+24>>2]=0;c[u+16+28>>2]=0;c[u>>2]=5384;c[u+84>>2]=v;g[u+88>>2]=h;g[u+92>>2]=i;g[u+96>>2]=e;g[u+100>>2]=0.0;g[u+104>>2]=0.0;v=c[v+188>>2]|0;c[u+8>>2]=c[v+4>>2];c[u+12>>2]=c[v+8>>2];v=c[b+12>>2]|0;e=+ib[c[(c[v>>2]|0)+48>>2]&15](v);v=c[b+12>>2]|0;Eb[c[(c[v>>2]|0)+44>>2]&31](v,e+ +g[b+64>>2]);if(!((((((((((((+g[u+176>>2]==+g[u+112>>2]?+g[u+176+16>>2]==+g[u+112+16>>2]:0)?+g[u+176+32>>2]==+g[u+112+32>>2]:0)?+g[m>>2]==+g[p>>2]:0)?+g[u+176+20>>2]==+g[u+112+20>>2]:0)?+g[u+176+36>>2]==+g[u+112+36>>2]:0)?+g[u+176+8>>2]==+g[u+112+8>>2]:0)?+g[n>>2]==+g[q>>2]:0)?+g[u+176+40>>2]==+g[u+112+40>>2]:0)?+g[u+176+60>>2]==+g[u+112+60>>2]:0)?+g[u+176+56>>2]==+g[u+112+56>>2]:0)?+g[u+176+52>>2]==+g[u+112+52>>2]:0)?+g[u+176+48>>2]==+g[u+112+48>>2]:0))t=16;do if((t|0)==16){t=0;if(!(a[b+250>>0]|0)){ud(d,c[b+12>>2]|0,u+176|0,u+112|0,u,+g[d+56>>2]);break}else{Xc(c[b+8>>2]|0,c[b+12>>2]|0,u+176|0,u+112|0,u,+g[d+56>>2]);break}}while(0);v=c[b+12>>2]|0;Eb[c[(c[v>>2]|0)+44>>2]&31](v,e);C=+g[u+4>>2];j=j-C;if((C<1.0?(s=c[b+8>>2]|0,(c[s+204>>2]&4|0)==0):0)?wb[c[(c[b>>2]|0)+56>>2]&63](b,s,c[u+80>>2]|0)|0:0){e=+g[b+152>>2]-+g[b+132>>2];f=+g[b+156>>2]-+g[b+136>>2];h=+g[b+160>>2]-+g[b+140>>2];i=+B(+(e*e+f*f+h*h));if(i>1.1920928955078125e-07){w=+g[u+48>>2];x=+g[u+52>>2];A=+g[u+56>>2];y=(e*(1.0/i)*w+f*(1.0/i)*x+h*(1.0/i)*A)*2.0;z=1.0/+B(+((h*(1.0/i)-A*y)*(h*(1.0/i)-A*y)+((e*(1.0/i)-w*y)*(e*(1.0/i)-w*y)+(f*(1.0/i)-x*y)*(f*(1.0/i)-x*y))));C=A*(h*(1.0/i)-A*y)*z+(w*(e*(1.0/i)-w*y)*z+x*(f*(1.0/i)-x*y)*z);c[b+152>>2]=c[b+132>>2];c[b+152+4>>2]=c[b+132+4>>2];c[b+152+8>>2]=c[b+132+8>>2];c[b+152+12>>2]=c[b+132+12>>2];e=i*((e*(1.0/i)-w*y)*z-w*C)+ +g[b+152>>2];g[b+152>>2]=e;f=i*((f*(1.0/i)-x*y)*z-x*C)+ +g[b+156>>2];g[b+156>>2]=f;i=i*((h*(1.0/i)-A*y)*z-A*C)+ +g[b+160>>2];g[b+160>>2]=i}else{e=+g[b+152>>2];f=+g[b+156>>2];i=+g[b+160>>2]}h=e-+g[b+132>>2];f=f-+g[b+136>>2];e=i-+g[b+140>>2];if(!(h*h+f*f+e*e>1.1920928955078125e-07)){t=28;break}C=1.0/+B(+(h*h+f*f+e*e));if(h*C*+g[b+84>>2]+f*C*+g[b+88>>2]+e*C*+g[b+92>>2]<=0.0){t=28;break}}else{c[b+132>>2]=c[b+152>>2];c[b+132+4>>2]=c[b+152+4>>2];c[b+132+8>>2]=c[b+152+8>>2];c[b+132+12>>2]=c[b+152+12>>2]}if(!(j>.009999999776482582)){t=30;break}}if((t|0)==28){l=u;return}else if((t|0)==30){l=u;return}}function Qc(b,d,e){b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,I=0.0;A=+g[b+48>>2];i=+g[d>>2];C=+g[b+64>>2];j=+g[d+4>>2];I=+g[b+80>>2];p=+g[d+8>>2];s=+g[b+52>>2];r=+g[b+68>>2];q=+g[b+84>>2];w=+g[b+56>>2];G=+g[b+72>>2];x=+g[b+88>>2];v=+g[d+16>>2];u=+g[d+20>>2];t=+g[d+24>>2];F=+g[d+32>>2];D=+g[d+36>>2];E=+g[d+40>>2];k=+g[b+96>>2];h=+g[b+100>>2];z=+g[b+104>>2];y=+g[d+48>>2]+(i*k+j*h+p*z);f=v*k+u*h+t*z+ +g[d+52>>2];z=F*k+D*h+E*z+ +g[d+56>>2];g[b+1064>>2]=A*i+C*j+I*p;g[b+1068>>2]=i*s+j*r+p*q;g[b+1072>>2]=i*w+j*G+p*x;g[b+1076>>2]=0.0;g[b+1080>>2]=A*v+C*u+I*t;g[b+1084>>2]=s*v+r*u+q*t;g[b+1088>>2]=w*v+G*u+x*t;g[b+1092>>2]=0.0;g[b+1096>>2]=A*F+C*D+I*E;g[b+1100>>2]=s*F+r*D+q*E;g[b+1104>>2]=w*F+G*D+x*E;g[b+1108>>2]=0.0;g[b+1112>>2]=y;g[b+1116>>2]=f;g[b+1120>>2]=z;g[b+1124>>2]=0.0;z=+g[b+112>>2];f=+g[e>>2];y=+g[b+128>>2];E=+g[e+4>>2];x=+g[b+144>>2];D=+g[e+8>>2];G=+g[b+116>>2];F=+g[b+132>>2];w=+g[b+148>>2];q=+g[b+120>>2];r=+g[b+136>>2];s=+g[b+152>>2];I=+g[e+16>>2];C=+g[e+20>>2];A=+g[e+24>>2];t=+g[e+32>>2];u=+g[e+36>>2];v=+g[e+40>>2];p=+g[b+160>>2];j=+g[b+164>>2];i=+g[b+168>>2];h=+g[e+48>>2]+(f*p+E*j+D*i);k=I*p+C*j+A*i+ +g[e+52>>2];i=t*p+u*j+v*i+ +g[e+56>>2];g[b+1128>>2]=z*f+y*E+x*D;g[b+1132>>2]=f*G+E*F+D*w;g[b+1136>>2]=f*q+E*r+D*s;g[b+1140>>2]=0.0;g[b+1144>>2]=z*I+y*C+x*A;g[b+1148>>2]=G*I+F*C+w*A;g[b+1152>>2]=q*I+r*C+s*A;g[b+1156>>2]=0.0;g[b+1160>>2]=z*t+y*u+x*v;g[b+1164>>2]=G*t+F*u+w*v;g[b+1168>>2]=q*t+r*u+s*v;g[b+1172>>2]=0.0;g[b+1176>>2]=h;g[b+1180>>2]=k;g[b+1184>>2]=i;g[b+1188>>2]=0.0;h=h-+g[b+1112>>2];k=k-+g[b+1116>>2];i=i-+g[b+1120>>2];w=+g[b+1084>>2];F=+g[b+1104>>2];G=+g[b+1088>>2];x=+g[b+1100>>2];y=+g[b+1096>>2];z=+g[b+1080>>2];A=+g[b+1064>>2];C=+g[b+1068>>2];I=+g[b+1072>>2];D=1.0/((w*F-G*x)*A+C*(G*y-F*z)+(x*z-w*y)*I);E=(x*z-w*y)*D;f=i*(G*C-w*I)*D+(h*(w*F-G*x)*D+k*(x*I-F*C)*D);j=i*(z*I-G*A)*D+(h*(G*y-F*z)*D+k*(F*A-y*I)*D);k=i*(w*A-z*C)*D+(h*E+k*(y*C-x*A)*D);g[b+1256>>2]=f;g[b+1260>>2]=j;g[b+1264>>2]=k;g[b+1268>>2]=0.0;g[b+840>>2]=f;h=+g[b+680>>2];i=+g[b+696>>2];do if(!(h>i)){if(h>f){c[b+856>>2]=2;f=f-h;break}if(i<f){c[b+856>>2]=1;f=f-i;break}else{c[b+856>>2]=0;f=0.0;break}}else{c[b+856>>2]=0;f=0.0}while(0);g[b+824>>2]=f;g[b+844>>2]=j;f=+g[b+684>>2];h=+g[b+700>>2];do if(!(f>h)){if(f>j){c[b+860>>2]=2;f=j-f;break}if(h<j){c[b+860>>2]=1;f=j-h;break}else{c[b+860>>2]=0;f=0.0;break}}else{c[b+860>>2]=0;f=0.0}while(0);g[b+828>>2]=f;g[b+848>>2]=k;f=+g[b+688>>2];h=+g[b+704>>2];do if(!(f>h)){if(f>k){c[b+864>>2]=2;f=k-f;break}if(h<k){c[b+864>>2]=1;f=k-h;break}else{c[b+864>>2]=0;f=0.0;break}}else{c[b+864>>2]=0;f=0.0}while(0);g[b+832>>2]=f;n=+g[b+1128>>2];o=+g[b+1144>>2];p=+g[b+1160>>2];h=+g[b+1132>>2];i=+g[b+1148>>2];j=+g[b+1164>>2];k=(w*F-G*x)*D*h+(x*I-F*C)*D*i+(G*C-w*I)*D*j;l=h*(G*y-F*z)*D+(F*A-y*I)*D*i+(z*I-G*A)*D*j;m=p*(w*A-z*C)*D+(n*E+o*(y*C-x*A)*D);f=E*+g[b+1136>>2]+(y*C-x*A)*D*+g[b+1152>>2]+(w*A-z*C)*D*(q*t+r*u+s*v);do if(m<1.0)if(m>-1.0){g[b+1192>>2]=+J(+-(h*E+(y*C-x*A)*D*i+(w*A-z*C)*D*j),+f);f=m<-1.0?-1.0:m;g[b+1196>>2]=+H(+(f>1.0?1.0:f));f=+J(+-(p*(z*I-G*A)*D+(n*(G*y-F*z)*D+o*(F*A-y*I)*D)),+(p*(G*C-w*I)*D+(n*(w*F-G*x)*D+o*(x*I-F*C)*D)));break}else{g[b+1192>>2]=-+J(+k,+l);g[b+1196>>2]=-1.5707963705062866;f=0.0;break}else{g[b+1192>>2]=+J(+k,+l);g[b+1196>>2]=1.5707963705062866;f=0.0}while(0);g[b+1200>>2]=f;g[b+1236>>2]=0.0;x=F*(n*F-p*I)-G*(o*I-n*G);y=I*(o*I-n*G)-F*(p*G-o*F);z=G*(p*G-o*F)-I*(n*F-p*I);g[b+1220>>2]=0.0;C=o*(o*I-n*G)-p*(n*F-p*I);D=p*(p*G-o*F)-n*(o*I-n*G);E=n*(n*F-p*I)-o*(p*G-o*F);g[b+1252>>2]=0.0;A=1.0/+B(+(x*x+y*y+z*z));g[b+1208>>2]=x*A;g[b+1212>>2]=y*A;g[b+1216>>2]=z*A;A=1.0/+B(+((o*I-n*G)*(o*I-n*G)+((n*F-p*I)*(n*F-p*I)+(p*G-o*F)*(p*G-o*F))));g[b+1224>>2]=(p*G-o*F)*A;g[b+1228>>2]=(n*F-p*I)*A;g[b+1232>>2]=(o*I-n*G)*A;I=1.0/+B(+(C*C+D*D+E*E));g[b+1240>>2]=C*I;g[b+1244>>2]=D*I;g[b+1248>>2]=E*I;if(!(a[b+1301>>0]|0))return;G=+g[(c[b+28>>2]|0)+404>>2];I=+g[(c[b+32>>2]|0)+404>>2];a[b+1280>>0]=(G<1.1920928955078125e-07|I<1.1920928955078125e-07)&1;I=G+I>0.0?I/(G+I):.5;g[b+1272>>2]=I;g[b+1276>>2]=1.0-I;return}function Rc(b,d){b=b|0;d=+d;var e=0,f=0,h=0.0,i=0,j=0.0,k=0.0,m=0.0,n=0.0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0.0,x=0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0;E=l;l=l+480|0;e=c[b+332>>2]|0;if((c[b+324>>2]|0)>0){f=0;do{v=c[b+24>>2]|0;Ib[c[(c[v>>2]|0)+16>>2]&127](v,c[e+(f<<2)>>2]|0);f=f+1|0;e=c[b+332>>2]|0}while((f|0)<(c[b+324>>2]|0))}if(e|0){if(a[b+336>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[b+332>>2]=0}a[b+336>>0]=1;c[b+332>>2]=0;c[b+324>>2]=0;c[b+328>>2]=0;q=c[b+248>>2]|0;if((q|0)<=0){l=E;return}r=c[b+256>>2]|0;s=E+416+48|0;t=E+256+28|0;u=E+312+48|0;o=0;do{v=c[r+(o<<2)>>2]|0;g[v+268>>2]=1.0;switch(c[v+220>>2]|0){case 2:case 5:break;default:if(((((c[v+204>>2]&3|0)==0?(Me(v+4|0,+g[v+372>>2],+g[v+376>>2],+g[v+380>>2],v+388|0,d,E+416|0),y=+g[s>>2],z=y-+g[v+52>>2],A=+g[E+416+52>>2],B=A-+g[v+56>>2],C=+g[E+416+56>>2],D=C-+g[v+60>>2],a[b+44>>0]|0):0)?(n=+g[v+276>>2],n*n!=0.0?n*n<z*z+B*B+D*D:0):0)?(c[(c[v+192>>2]|0)+4>>2]|0)<20:0)?(c[6300]=(c[6300]|0)+1,i=c[b+68>>2]|0,i=sb[c[(c[i>>2]|0)+36>>2]&127](i)|0,p=c[b+24>>2]|0,g[E+312+4>>2]=1.0,c[E+312+16>>2]=c[v+52>>2],c[E+312+16+4>>2]=c[v+52+4>>2],c[E+312+16+8>>2]=c[v+52+8>>2],c[E+312+16+12>>2]=c[v+52+12>>2],c[E+312+32>>2]=c[s>>2],c[E+312+32+4>>2]=c[s+4>>2],c[E+312+32+8>>2]=c[s+8>>2],c[E+312+32+12>>2]=c[s+12>>2],c[E+312+80>>2]=0,c[E+312>>2]=6168,c[E+312+84>>2]=v,c[E+312+92>>2]=i,c[E+312+96>>2]=p,p=c[v+272>>2]|0,c[E+256+8>>2]=0,c[E+256+12>>2]=-1,c[E+256>>2]=9792,c[E+256+4>>2]=8,c[E+256+16>>2]=1065353216,c[E+256+20>>2]=1065353216,c[E+256+24>>2]=1065353216,c[t>>2]=0,c[t+4>>2]=0,c[t+8>>2]=0,c[t+12>>2]=0,c[t+16>>2]=0,c[E+256+32>>2]=p,c[E+256+48>>2]=p,g[E+256+52>>2]=0.0,c[E+312+88>>2]=c[b+56>>2],p=c[v+188>>2]|0,c[E+312+8>>2]=c[p+4>>2],c[E+312+12>>2]=c[p+8>>2],c[E+192+48>>2]=c[s>>2],c[E+192+48+4>>2]=c[s+4>>2],c[E+192+48+8>>2]=c[s+8>>2],c[E+192+48+12>>2]=c[s+12>>2],c[E+192>>2]=c[v+4>>2],c[E+192+4>>2]=c[v+4+4>>2],c[E+192+8>>2]=c[v+4+8>>2],c[E+192+12>>2]=c[v+4+12>>2],c[E+192+16>>2]=c[v+20>>2],c[E+192+16+4>>2]=c[v+20+4>>2],c[E+192+16+8>>2]=c[v+20+8>>2],c[E+192+16+12>>2]=c[v+20+12>>2],c[E+192+32>>2]=c[v+36>>2],c[E+192+32+4>>2]=c[v+36+4>>2],c[E+192+32+8>>2]=c[v+36+8>>2],c[E+192+32+12>>2]=c[v+36+12>>2],ud(b,E+256|0,v+4|0,E+192|0,E+312|0,0.0),w=+g[E+312+4>>2],w<1.0):0){h=w*(y-+g[v+52>>2]);j=w*(A-+g[v+56>>2]);m=w*(C-+g[v+60>>2]);n=-(j*+g[E+312+52>>2])-h*+g[u>>2]-m*+g[E+312+56>>2];p=c[b+24>>2]|0;p=wb[c[(c[p>>2]|0)+12>>2]&63](p,v,c[E+312+80>>2]|0)|0;f=c[b+324>>2]|0;if((f|0)==(c[b+328>>2]|0)?(x=(f|0)==0?1:f<<1,(f|0)<(x|0)):0){if(!x)e=0;else{c[6485]=(c[6485]|0)+1;e=ec((x<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}f=c[b+324>>2]|0}if((f|0)>0){i=0;do{c[e+(i<<2)>>2]=c[(c[b+332>>2]|0)+(i<<2)>>2];i=i+1|0}while((i|0)!=(f|0))}i=c[b+332>>2]|0;if(i){if(a[b+336>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0);f=c[b+324>>2]|0}c[b+332>>2]=0}a[b+336>>0]=1;c[b+332>>2]=e;c[b+328>>2]=x;e=f}else e=f;c[(c[b+332>>2]|0)+(e<<2)>>2]=p;c[b+324>>2]=e+1;k=h+ +g[v+52>>2];j=j+ +g[v+56>>2];h=m+ +g[v+60>>2];e=c[E+312+80>>2]|0;P=+g[e+4>>2];O=+g[e+20>>2];N=+g[e+36>>2];M=+g[e+8>>2];L=+g[e+24>>2];K=+g[e+40>>2];J=+g[e+12>>2];H=+g[e+28>>2];F=+g[e+44>>2];I=-+g[e+52>>2];G=-+g[e+56>>2];m=-+g[e+60>>2];c[E>>2]=0;c[E+4>>2]=0;c[E+8>>2]=0;c[E+12>>2]=0;g[E+16>>2]=k*P+j*O+h*N+(P*I+O*G+N*m);g[E+20>>2]=k*M+j*L+h*K+(M*I+L*G+K*m);g[E+24>>2]=k*J+j*H+h*F+(J*I+H*G+F*m);g[E+28>>2]=0.0;c[E+64>>2]=c[u>>2];c[E+64+4>>2]=c[u+4>>2];c[E+64+8>>2]=c[u+8>>2];c[E+64+12>>2]=c[u+12>>2];g[E+80>>2]=n;c[E+84>>2]=0;c[E+84+4>>2]=0;c[E+84+8>>2]=0;c[E+84+12>>2]=0;e=E+116|0;f=e+44|0;do{c[e>>2]=0;e=e+4|0}while((e|0)<(f|0));i=Ae(p,E)|0;g[p+4+(i*192|0)+96>>2]=0.0;P=+g[v+228>>2]*+g[(c[E+312+80>>2]|0)+228>>2];P=P<-10.0?-10.0:P;g[p+4+(i*192|0)+84>>2]=P>10.0?10.0:P;c[p+4+(i*192|0)+48>>2]=c[v+52>>2];c[p+4+(i*192|0)+48+4>>2]=c[v+52+4>>2];c[p+4+(i*192|0)+48+8>>2]=c[v+52+8>>2];c[p+4+(i*192|0)+48+12>>2]=c[v+52+12>>2];g[p+4+(i*192|0)+32>>2]=k;g[p+4+(i*192|0)+36>>2]=j;g[p+4+(i*192|0)+40>>2]=h;g[p+4+(i*192|0)+44>>2]=0.0}}o=o+1|0}while((o|0)<(q|0));l=E;return}function Sc(b,d){b=b|0;d=d|0;var e=0,f=0,h=0,i=0,j=0,k=0,m=0,n=0,o=0,p=0.0;o=l;l=l+112|0;k=c[b+28>>2]|0;m=c[b+32>>2]|0;switch(c[b+1232>>2]|0){case 5:{i=1;j=0;f=2;break}case 1:{i=2;j=1;f=0;break}case 2:{i=0;j=2;f=1;break}case 3:{i=2;j=0;f=1;break}case 4:{i=0;j=1;f=2;break}default:{i=1;j=2;f=0}}e=b+968+(f*88|0)|0;if(((c[b+968+(f*88|0)+84>>2]|0)==0?(a[b+968+(f*88|0)+28>>0]|0)==0:0)?(a[b+968+(f*88|0)+48>>0]|0)==0:0)e=0;else{h=b+1380+(f<<4)|0;c[o+16>>2]=c[h>>2];c[o+16+4>>2]=c[h+4>>2];c[o+16+8>>2]=c[h+8>>2];c[o+16+12>>2]=c[h+12>>2];h=c[b+1456>>2]>>(f<<2)+12;if(!(h&1))c[b+968+(f*88|0)+16>>2]=c[c[d+32>>2]>>2];if(!(h&2))c[b+968+(f*88|0)+12>>2]=c[d+4>>2];if(!(h&4))c[b+968+(f*88|0)+24>>2]=c[c[d+32>>2]>>2];if(!(h&8))c[b+968+(f*88|0)+20>>2]=c[d+4>>2];e=Nc(b,e,k+4|0,m+4|0,k+372|0,m+372|0,k+388|0,m+388|0,d,0,o+16|0,1,0)|0}f=b+968+(i*88|0)|0;if(!(((c[b+968+(i*88|0)+84>>2]|0)==0?(a[b+968+(i*88|0)+28>>0]|0)==0:0)?(a[b+968+(i*88|0)+48>>0]|0)==0:0)){h=b+1380+(i<<4)|0;c[o+16>>2]=c[h>>2];c[o+16+4>>2]=c[h+4>>2];c[o+16+8>>2]=c[h+8>>2];c[o+16+12>>2]=c[h+12>>2];h=c[b+1456>>2]>>(i<<2)+12;if(!(h&1))c[b+968+(i*88|0)+16>>2]=c[c[d+32>>2]>>2];if(!(h&2))c[b+968+(i*88|0)+12>>2]=c[d+4>>2];if(!(h&4))c[b+968+(i*88|0)+24>>2]=c[c[d+32>>2]>>2];if(!(h&8))c[b+968+(i*88|0)+20>>2]=c[d+4>>2];e=(Nc(b,f,k+4|0,m+4|0,k+372|0,m+372|0,k+388|0,m+388|0,d,e,o+16|0,1,0)|0)+e|0}h=b+968+(j*88|0)|0;if(!(((c[b+968+(j*88|0)+84>>2]|0)==0?(a[b+968+(j*88|0)+28>>0]|0)==0:0)?(a[b+968+(j*88|0)+48>>0]|0)==0:0)){f=b+1380+(j<<4)|0;c[o+16>>2]=c[f>>2];c[o+16+4>>2]=c[f+4>>2];c[o+16+8>>2]=c[f+8>>2];c[o+16+12>>2]=c[f+12>>2];f=c[b+1456>>2]>>(j<<2)+12;if(!(f&1))c[b+968+(j*88|0)+16>>2]=c[c[d+32>>2]>>2];if(!(f&2))c[b+968+(j*88|0)+12>>2]=c[d+4>>2];if(!(f&4))c[b+968+(j*88|0)+24>>2]=c[c[d+32>>2]>>2];if(!(f&8))c[b+968+(j*88|0)+20>>2]=c[d+4>>2];e=(Nc(b,h,k+4|0,m+4|0,k+372|0,m+372|0,k+388|0,m+388|0,d,e,o+16|0,1,0)|0)+e|0}g[o+16>>2]=1.0;g[o+16+4>>2]=-1.0;g[o+16+8>>2]=0.0;g[o+16+12>>2]=.20000000298023224;g[o+16+16>>2]=0.0;g[o+16+20>>2]=.8999999761581421;g[o+16+24>>2]=0.0;a[o+16+28>>0]=0;g[o+16+32>>2]=0.0;g[o+16+36>>2]=.10000000149011612;a[o+16+40>>0]=0;g[o+16+44>>2]=0.0;a[o+16+48>>0]=0;g[o+16+52>>2]=0.0;a[o+16+56>>0]=0;g[o+16+60>>2]=0.0;a[o+16+64>>0]=0;j=o+16+68|0;c[j>>2]=0;c[j+4>>2]=0;c[j+8>>2]=0;c[j+12>>2]=0;c[j+16>>2]=0;f=0;do{i=c[b+956+(f<<2)>>2]|0;h=a[b+792+f>>0]|0;if(!i)if(!(h<<24>>24))if(!(a[b+798+f>>0]|0))f=f+1|0;else{h=0;n=48}else{h=1;n=48}else n=48;if((n|0)==48){n=0;c[o+16+8>>2]=c[b+712+(f<<2)>>2];c[o+16+84>>2]=i;c[o+16+80>>2]=c[b+940+(f<<2)>>2];c[o+16+72>>2]=c[b+908+(f<<2)>>2];c[o+16+76>>2]=c[b+924+(f<<2)>>2];a[o+16+28>>0]=h;a[o+16+40>>0]=a[b+795+f>>0]|0;c[o+16+44>>2]=c[b+804+(f<<2)>>2];a[o+16+48>>0]=a[b+798+f>>0]|0;c[o+16+52>>2]=c[b+820+(f<<2)>>2];a[o+16+56>>0]=a[b+836+f>>0]|0;c[o+16+60>>2]=c[b+840+(f<<2)>>2];a[o+16+64>>0]=a[b+856+f>>0]|0;c[j>>2]=c[b+860+(f<<2)>>2];c[o+16+4>>2]=c[b+696+(f<<2)>>2];c[o+16>>2]=c[b+680+(f<<2)>>2];c[o+16+36>>2]=c[b+892+(f<<2)>>2];c[o+16+32>>2]=c[b+876+(f<<2)>>2];c[o>>2]=c[b+1236+(f<<2)>>2];c[o+4>>2]=c[b+1252+(f<<2)>>2];c[o+8>>2]=c[b+1268+(f<<2)>>2];g[o+12>>2]=0.0;i=c[b+1456>>2]>>(f<<2);if(!(i&1))h=c[d+32>>2]|0;else h=b+744+(f<<2)|0;c[o+16+16>>2]=c[h>>2];c[o+16+12>>2]=c[((i&2|0)==0?d+4|0:b+728+(f<<2)|0)>>2];if(!(i&4))h=c[d+32>>2]|0;else h=b+776+(f<<2)|0;c[o+16+24>>2]=c[h>>2];c[o+16+20>>2]=c[((i&8|0)==0?d+4|0:b+760+(f<<2)|0)>>2];i=f+1|0;h=(i|0)==3?0:i;f=((f+2|0)>>>0)%3|0;switch(c[b+968+(h*88|0)+84>>2]|0){case 2:case 1:{h=1;break}case 3:{p=+g[b+968+(h*88|0)+72>>2];h=p<-.001|p>.001;break}case 4:{if(+g[b+968+(h*88|0)+72>>2]<-.001)h=1;else h=+g[b+968+(h*88|0)+76>>2]>.001;break}default:h=0}switch(c[b+968+(f*88|0)+84>>2]|0){case 2:case 1:{n=63;break}case 3:{p=+g[b+968+(f*88|0)+72>>2];if(p<-.001|p>.001)n=63;else f=1;break}case 4:{if(!(+g[b+968+(f*88|0)+72>>2]<-.001)?!(+g[b+968+(f*88|0)+76>>2]>.001):0)f=1;else n=63;break}default:f=1}if((n|0)==63){n=0;f=0}e=(Nc(b,o+16|0,k+4|0,m+4|0,k+372|0,m+372|0,k+388|0,m+388|0,d,e,o,0,h?f:1)|0)+e|0;f=i}}while((f|0)!=3);l=o;return}function Tc(b,d){b=b|0;d=d|0;var e=0,f=0,h=0,i=0.0,j=0,k=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0;r=l;l=l+32|0;sf(b+4|0,((N(c[b+112>>2]|0,c[b+16>>2]|0)|0)/100|0)+1|0);if(c[b+124>>2]|0){p=((N(c[b+108>>2]|0,c[b+56>>2]|0)|0)/100|0)+1|0;sf(b+44|0,p);p=(c[b+124>>2]|0)-p|0;c[b+124>>2]=(p|0)>0?p:0}f=((c[b+104>>2]|0)+1|0)%2|0;c[b+104>>2]=f;f=c[b+84+(f<<2)>>2]|0;if(f|0){do{j=f+56|0;m=f;f=c[j>>2]|0;h=c[m+52>>2]|0;if(!h)h=b+84+(c[m+60>>2]<<2)|0;else h=h+56|0;c[h>>2]=f;h=c[j>>2]|0;if(h|0)c[h+52>>2]=c[m+52>>2];c[m+52>>2]=0;c[j>>2]=c[b+92>>2];h=c[b+92>>2]|0;if(h|0)c[h+52>>2]=m;c[b+92>>2]=m;h=c[m+48>>2]|0;fg(b+4|0,h)|0;j=c[b+8>>2]|0;if(j|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}c[b+8>>2]=h;c[b+16>>2]=(c[b+16>>2]|0)+-1;c[r>>2]=c[m+16>>2];c[r+4>>2]=c[m+16+4>>2];c[r+8>>2]=c[m+16+8>>2];c[r+12>>2]=c[m+16+12>>2];c[r+16>>2]=c[m+32>>2];c[r+16+4>>2]=c[m+32+4>>2];c[r+16+8>>2]=c[m+32+8>>2];c[r+16+12>>2]=c[m+32+12>>2];h=c[b+48>>2]|0;if(!h){c[6485]=(c[6485]|0)+1;h=ec(63)|0;if(!h)h=0;else{c[(h+4+15&-16)+-4>>2]=h;h=h+4+15&-16}j=h;k=j+44|0;do{c[j>>2]=0;j=j+4|0}while((j|0)<(k|0))}else c[b+48>>2]=0;c[h+32>>2]=0;c[h+36>>2]=m;c[h+40>>2]=0;c[h>>2]=c[r>>2];c[h+4>>2]=c[r+4>>2];c[h+8>>2]=c[r+8>>2];c[h+12>>2]=c[r+12>>2];c[h+16>>2]=c[r+16>>2];c[h+20>>2]=c[r+20>>2];c[h+24>>2]=c[r+24>>2];c[h+28>>2]=c[r+28>>2];ue(b+44|0,c[b+44>>2]|0,h);j=(c[b+56>>2]|0)+1|0;c[b+56>>2]=j;c[m+48>>2]=h;c[m+60>>2]=2}while((f|0)!=0);c[b+124>>2]=j;a[b+154>>0]=1}c[r>>2]=6572;c[r+4>>2]=b;if(a[b+153>>0]|0?(Jd(b+4|0,c[b+4>>2]|0,c[b+44>>2]|0,r),a[b+153>>0]|0):0){p=c[b+4>>2]|0;Jd(b+4|0,p,p,r)}if(a[b+154>>0]|0?(n=c[b+96>>2]|0,n=sb[c[(c[n>>2]|0)+28>>2]&127](n)|0,e=c[n+4>>2]|0,(e|0)>0):0){f=(N(c[b+116>>2]|0,e)|0)/100|0;p=c[b+120>>2]|0;f=(p|0)>(f|0)?p:f;f=(e|0)<(f|0)?e:f;if((f|0)>0){h=0;do{k=((c[b+144>>2]|0)+h|0)%(e|0)|0;o=c[n+12>>2]|0;j=c[o+(k<<4)>>2]|0;k=c[o+(k<<4)+4>>2]|0;o=c[j+48>>2]|0;p=c[k+48>>2]|0;if(!(((((+g[o>>2]<=+g[p+16>>2]?+g[o+16>>2]>=+g[p>>2]:0)?+g[o+4>>2]<=+g[p+20>>2]:0)?+g[o+20>>2]>=+g[p+4>>2]:0)?+g[o+8>>2]<=+g[p+24>>2]:0)?+g[o+24>>2]>=+g[p+8>>2]:0)){e=c[b+96>>2]|0;xb[c[(c[e>>2]|0)+12>>2]&31](e,j,k,d)|0;f=f+-1|0;h=h+-1|0;e=c[n+4>>2]|0}h=h+1|0}while((h|0)<(f|0));if((e|0)>0)q=37;else e=0}else q=37;if((q|0)==37)e=((c[b+144>>2]|0)+f|0)%(e|0)|0;c[b+144>>2]=e}c[b+140>>2]=(c[b+140>>2]|0)+1;c[b+120>>2]=1;a[b+154>>0]=0;f=c[b+128>>2]|0;e=c[b+132>>2]|0;if(!f)i=0.0;else i=+(e>>>0)/+(f>>>0);g[b+136>>2]=i;c[b+132>>2]=e>>>1;c[b+128>>2]=f>>>1;p=c[b+96>>2]|0;if(!(sb[c[(c[p>>2]|0)+56>>2]&127](p)|0)){l=r;return}p=c[b+96>>2]|0;p=sb[c[(c[p>>2]|0)+28>>2]&127](p)|0;e=c[p+4>>2]|0;if((e|0)>1){Nd(p,0,e+-1|0);e=c[p+4>>2]|0}if((e|0)>0){n=0;m=0;o=0;f=0;while(1){j=c[p+12>>2]|0;h=j+(n<<4)|0;s=o;o=c[h>>2]|0;j=j+(n<<4)+4|0;k=c[j>>2]|0;if(!((o|0)==(s|0)&(k|0)==(f|0))){f=c[o+48>>2]|0;s=c[k+48>>2]|0;if(((((+g[f>>2]<=+g[s+16>>2]?+g[f+16>>2]>=+g[s>>2]:0)?+g[f+4>>2]<=+g[s+20>>2]:0)?+g[f+20>>2]>=+g[s+4>>2]:0)?+g[f+8>>2]<=+g[s+24>>2]:0)?+g[f+24>>2]>=+g[s+8>>2]:0){h=m;f=k}else{f=k;q=53}}else q=53;if((q|0)==53){q=0;e=c[b+96>>2]|0;Mb[c[(c[e>>2]|0)+32>>2]&127](e,h,d);c[h>>2]=0;c[j>>2]=0;h=m+1|0;e=c[p+4>>2]|0}n=n+1|0;if((n|0)>=(e|0))break;else m=h}if((e|0)>1){Nd(p,0,e+-1|0);e=c[p+4>>2]|0}k=e-h|0;if((h|0)<0){if((c[p+8>>2]|0)<(k|0)){if(!k){f=0;j=e}else{c[6485]=(c[6485]|0)+1;f=ec((k<<4|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}j=c[p+4>>2]|0}if((j|0)>0){h=0;do{s=c[p+12>>2]|0;c[f+(h<<4)>>2]=c[s+(h<<4)>>2];c[f+(h<<4)+4>>2]=c[s+(h<<4)+4>>2];c[f+(h<<4)+8>>2]=c[s+(h<<4)+8>>2];c[f+(h<<4)+12>>2]=c[s+(h<<4)+12>>2];h=h+1|0}while((h|0)!=(j|0))}h=c[p+12>>2]|0;if(h|0){if(a[p+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[p+12>>2]=0}a[p+16>>0]=1;c[p+12>>2]=f;c[p+8>>2]=k}do{s=(c[p+12>>2]|0)+(e<<4)|0;e=e+1|0;c[s>>2]=0;c[s+4>>2]=0;c[s+8>>2]=0;c[s+12>>2]=0}while((e|0)!=(k|0));e=k}else e=k}c[p+4>>2]=e;l=r;return}function Uc(b){b=b|0;var d=0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0,t=0,u=0.0,v=0.0,w=0;s=l;l=l+176|0;if(!(a[b+527>>0]|0)){l=s;return}g[b+36>>2]=0.0;g[b+520>>2]=0.0;g[b+516>>2]=0.0;c[b+576>>2]=0;c[b+576+4>>2]=0;c[b+576+8>>2]=0;c[b+576+12>>2]=0;if(!(a[b+524>>0]|0)){t=c[b+28>>2]|0;h=+g[b+348>>2];i=+g[b+352>>2];o=+g[b+356>>2];q=h*+g[t+20>>2]+i*+g[t+24>>2]+o*+g[t+28>>2]+ +g[t+56>>2];d=c[b+32>>2]|0;j=+g[b+412>>2];k=+g[b+416>>2];p=+g[b+420>>2];r=j*+g[d+20>>2]+k*+g[d+24>>2]+p*+g[d+28>>2]+ +g[d+56>>2];m=j*+g[d+36>>2]+k*+g[d+40>>2]+p*+g[d+44>>2]+ +g[d+60>>2];n=h*+g[t+4>>2]+i*+g[t+8>>2]+o*+g[t+12>>2]+ +g[t+52>>2];o=h*+g[t+36>>2]+i*+g[t+40>>2]+o*+g[t+44>>2]+ +g[t+60>>2];p=j*+g[d+4>>2]+k*+g[d+8>>2]+p*+g[d+12>>2]+ +g[d+52>>2];if((p-n)*(p-n)+(r-q)*(r-q)+(m-o)*(m-o)>1.1920928955078125e-07){f=1.0/+B(+((p-n)*(p-n)+(r-q)*(r-q)+(m-o)*(m-o)));g[s>>2]=(p-n)*f;g[s+4>>2]=(r-q)*f;g[s+8>>2]=(m-o)*f;c[s+12>>2]=0;h=(m-o)*f;e=(r-q)*f;f=(p-n)*f}else{c[s>>2]=1065353216;c[s+4>>2]=0;c[s+8>>2]=0;g[s+12>>2]=0.0;h=0.0;e=0.0;f=1.0}if(+A(+h)>.7071067690849304){v=h*h+e*e;u=1.0/+B(+v);h=-(h*u);i=e*u;k=-(f*i);j=f*h;e=v*u;f=i;i=0.0}else{u=f*f+e*e;j=1.0/+B(+u);i=-(e*j);v=f*j;k=h*i;j=u*j;e=-(h*v);f=0.0;h=v}g[s+16>>2]=i;g[s+20>>2]=h;g[s+24>>2]=f;g[s+32>>2]=e;g[s+36>>2]=k;g[s+40>>2]=j;t=c[b+28>>2]|0;c[s+128>>2]=c[t+4>>2];c[s+128+4>>2]=c[t+20>>2];c[s+128+8>>2]=c[t+36>>2];g[s+128+12>>2]=0.0;c[s+128+16>>2]=c[t+8>>2];c[s+128+20>>2]=c[t+24>>2];c[s+128+24>>2]=c[t+40>>2];g[s+128+28>>2]=0.0;c[s+128+32>>2]=c[t+12>>2];c[s+128+36>>2]=c[t+28>>2];c[s+128+40>>2]=c[t+44>>2];g[s+128+44>>2]=0.0;d=c[b+32>>2]|0;c[s+80>>2]=c[d+4>>2];c[s+80+4>>2]=c[d+20>>2];c[s+80+8>>2]=c[d+36>>2];g[s+80+12>>2]=0.0;c[s+80+16>>2]=c[d+8>>2];c[s+80+20>>2]=c[d+24>>2];c[s+80+24>>2]=c[d+40>>2];g[s+80+28>>2]=0.0;c[s+80+32>>2]=c[d+12>>2];c[s+80+36>>2]=c[d+28>>2];c[s+80+40>>2]=c[d+44>>2];g[s+80+44>>2]=0.0;v=q-+g[t+56>>2];u=o-+g[t+60>>2];g[s+64>>2]=n-+g[t+52>>2];g[s+64+4>>2]=v;g[s+64+8>>2]=u;g[s+64+12>>2]=0.0;u=r-+g[d+56>>2];v=m-+g[d+60>>2];g[s+48>>2]=p-+g[d+52>>2];g[s+48+4>>2]=u;g[s+48+8>>2]=v;g[s+48+12>>2]=0.0;Wf(b+48|0,s+128|0,s+80|0,s+64|0,s+48|0,s,t+456|0,+g[t+404>>2],d+456|0,+g[d+404>>2]);d=c[b+28>>2]|0;c[s+128>>2]=c[d+4>>2];c[s+128+4>>2]=c[d+20>>2];c[s+128+8>>2]=c[d+36>>2];g[s+128+12>>2]=0.0;c[s+128+16>>2]=c[d+8>>2];c[s+128+20>>2]=c[d+24>>2];c[s+128+24>>2]=c[d+40>>2];g[s+128+28>>2]=0.0;c[s+128+32>>2]=c[d+12>>2];c[s+128+36>>2]=c[d+28>>2];c[s+128+40>>2]=c[d+44>>2];g[s+128+44>>2]=0.0;t=c[b+32>>2]|0;c[s+80>>2]=c[t+4>>2];c[s+80+4>>2]=c[t+20>>2];c[s+80+8>>2]=c[t+36>>2];g[s+80+12>>2]=0.0;c[s+80+16>>2]=c[t+8>>2];c[s+80+20>>2]=c[t+24>>2];c[s+80+24>>2]=c[t+40>>2];g[s+80+28>>2]=0.0;c[s+80+32>>2]=c[t+12>>2];c[s+80+36>>2]=c[t+28>>2];c[s+80+40>>2]=c[t+44>>2];g[s+80+44>>2]=0.0;v=q-+g[d+56>>2];u=o-+g[d+60>>2];g[s+64>>2]=n-+g[d+52>>2];g[s+64+4>>2]=v;g[s+64+8>>2]=u;g[s+64+12>>2]=0.0;u=r-+g[t+56>>2];v=m-+g[t+60>>2];g[s+48>>2]=p-+g[t+52>>2];g[s+48+4>>2]=u;g[s+48+8>>2]=v;g[s+48+12>>2]=0.0;Wf(b+132|0,s+128|0,s+80|0,s+64|0,s+48|0,s+16|0,d+456|0,+g[d+404>>2],t+456|0,+g[t+404>>2]);t=c[b+28>>2]|0;c[s+128>>2]=c[t+4>>2];c[s+128+4>>2]=c[t+20>>2];c[s+128+8>>2]=c[t+36>>2];g[s+128+12>>2]=0.0;c[s+128+16>>2]=c[t+8>>2];c[s+128+20>>2]=c[t+24>>2];c[s+128+24>>2]=c[t+40>>2];g[s+128+28>>2]=0.0;c[s+128+32>>2]=c[t+12>>2];c[s+128+36>>2]=c[t+28>>2];c[s+128+40>>2]=c[t+44>>2];g[s+128+44>>2]=0.0;d=c[b+32>>2]|0;c[s+80>>2]=c[d+4>>2];c[s+80+4>>2]=c[d+20>>2];c[s+80+8>>2]=c[d+36>>2];g[s+80+12>>2]=0.0;c[s+80+16>>2]=c[d+8>>2];c[s+80+20>>2]=c[d+24>>2];c[s+80+24>>2]=c[d+40>>2];g[s+80+28>>2]=0.0;c[s+80+32>>2]=c[d+12>>2];c[s+80+36>>2]=c[d+28>>2];c[s+80+40>>2]=c[d+44>>2];g[s+80+44>>2]=0.0;v=q-+g[t+56>>2];u=o-+g[t+60>>2];g[s+64>>2]=n-+g[t+52>>2];g[s+64+4>>2]=v;g[s+64+8>>2]=u;g[s+64+12>>2]=0.0;u=r-+g[d+56>>2];v=m-+g[d+60>>2];g[s+48>>2]=p-+g[d+52>>2];g[s+48+4>>2]=u;g[s+48+8>>2]=v;g[s+48+12>>2]=0.0;Wf(b+216|0,s+128|0,s+80|0,s+64|0,s+48|0,s+32|0,t+456|0,+g[t+404>>2],d+456|0,+g[d+404>>2]);d=b+32|0}else d=b+32|0;w=c[b+28>>2]|0;t=c[d>>2]|0;lc(b,w+4|0,t+4|0,w+324|0,t+324|0);l=s;return}function Vc(a,d,f,h,i,j,k,l){a=a|0;d=d|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;l=l|0;var m=0,n=0,o=0,p=0.0,q=0,r=0,s=0.0,t=0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0,A=0.0,B=0.0,C=0,D=0,E=0,F=0,G=0;v=+g[a+8>>2];x=+g[a+12>>2];A=+g[a+16>>2];w=+g[a+40>>2];p=(+g[d>>2]-v)*w;y=+g[a+44>>2];s=(+g[d+4>>2]-x)*y;B=+g[a+48>>2];u=(+g[d+8>>2]-A)*B;if(!(p<=0.0)){t=b[a+6>>1]|0;t=b[a+4>>1]&(!(p>=+(t&65535))?~~p&65535:t)}else t=0;if(!(s<=0.0)){r=b[a+6>>1]|0;r=b[a+4>>1]&(!(s>=+(r&65535))?~~s&65535:r)}else r=0;if(!(u<=0.0)){q=b[a+6>>1]|0;q=b[a+4>>1]&(!(u>=+(q&65535))?~~u&65535:q)}else q=0;u=(+g[f>>2]-v)*w;s=(+g[f+4>>2]-x)*y;p=(+g[f+8>>2]-A)*B;if(!(u<=0.0)){o=b[a+6>>1]|0;o=b[a+4>>1]&(!(u>=+(o&65535))?~~u&65535:o)|1}else o=1;if(!(s<=0.0)){n=b[a+6>>1]|0;n=b[a+4>>1]&(!(s>=+(n&65535))?~~s&65535:n)|1}else n=1;if(!(p<=0.0)){m=b[a+6>>1]|0;m=b[a+4>>1]&(!(p>=+(m&65535))?~~p&65535:m)|1}else m=1;D=b[a+64>>1]|0;C=c[a+60>>2]|0;b[a+64>>1]=b[C+((D&65535)<<6)+48>>1]|0;z=(b[a+56>>1]|0)+1<<16>>16;b[a+56>>1]=z;c[C+((D&65535)<<6)+12>>2]=D&65535;c[C+((D&65535)<<6)>>2]=i;c[C+((D&65535)<<6)+4>>2]=j;c[C+((D&65535)<<6)+8>>2]=k;E=(z&65535)<<1&65534;b[C+54>>1]=(e[C+54>>1]|0)+2;F=c[a+68>>2]|0;G=e[F+(E+-1<<2)>>1]|e[F+(E+-1<<2)+2>>1]<<16;b[F+((E|1)<<2)>>1]=G;b[F+((E|1)<<2)+2>>1]=G>>>16;F=c[a+68>>2]|0;b[F+(E+-1<<2)>>1]=t;b[F+(E+-1<<2)+2>>1]=D;b[F+(E<<2)>>1]=o;b[F+(E<<2)+2>>1]=D;b[C+((D&65535)<<6)+48>>1]=E+-1;b[C+((D&65535)<<6)+54>>1]=(z&65535)<<1;o=(c[a+60>>2]|0)+56|0;b[o>>1]=(e[o>>1]|0)+2;o=c[a+72>>2]|0;t=e[o+(E+-1<<2)>>1]|e[o+(E+-1<<2)+2>>1]<<16;b[o+((E|1)<<2)>>1]=t;b[o+((E|1)<<2)+2>>1]=t>>>16;o=c[a+72>>2]|0;b[o+(E+-1<<2)>>1]=r;b[o+(E+-1<<2)+2>>1]=D;b[o+(E<<2)>>1]=n;b[o+(E<<2)+2>>1]=D;b[C+((D&65535)<<6)+50>>1]=E+-1;b[C+((D&65535)<<6)+56>>1]=(z&65535)<<1;n=(c[a+60>>2]|0)+58|0;b[n>>1]=(e[n>>1]|0)+2;n=c[a+76>>2]|0;o=e[n+(E+-1<<2)>>1]|e[n+(E+-1<<2)+2>>1]<<16;b[n+((E|1)<<2)>>1]=o;b[n+((E|1)<<2)+2>>1]=o>>>16;n=c[a+76>>2]|0;b[n+(E+-1<<2)>>1]=q;b[n+(E+-1<<2)+2>>1]=D;b[n+(E<<2)>>1]=m;b[n+(E<<2)+2>>1]=D;b[C+((D&65535)<<6)+52>>1]=E+-1;b[C+((D&65535)<<6)+58>>1]=(z&65535)<<1;n=c[a+68>>2]|0;o=e[C+((D&65535)<<6)+48>>1]|0;t=c[a+60>>2]|0;q=b[n+(o<<2)+-4>>1]|0;if((e[n+(o<<2)>>1]|0)<(q&65535)){z=t+((e[n+(o<<2)+2>>1]|0)<<6)+48|0;m=n+(o<<2)+-4|0;r=n+(o<<2)|0;o=q;n=t;while(1){G=e[r+-2>>1]|0;n=(o&1)==0?n+(G<<6)+48|0:n+(G<<6)+54|0;b[n>>1]=(b[n>>1]|0)+1<<16>>16;b[z>>1]=(b[z>>1]|0)+-1<<16>>16;n=e[r>>1]|e[r+2>>1]<<16;o=e[m>>1]|e[m+2>>1]<<16;b[r>>1]=o;b[r+2>>1]=o>>>16;b[m>>1]=n;b[m+2>>1]=n>>>16;n=r+-4|0;m=m+-4|0;o=b[m>>1]|0;if((e[n>>1]|0)>=(o&65535))break;r=n;n=c[a+60>>2]|0}n=c[a+68>>2]|0}m=e[C+((D&65535)<<6)+54>>1]|0;o=n+(m<<2)|0;r=b[o+-4>>1]|0;a:do if((e[o>>1]|0)<(r&65535)){G=c[a+60>>2]|0;t=G+((e[n+(m<<2)+2>>1]|0)<<6)+54|0;m=o+-4|0;q=o;n=r;o=G;while(1){G=e[q+-2>>1]|0;o=(n&1)==0?o+(G<<6)+48|0:o+(G<<6)+54|0;b[o>>1]=(b[o>>1]|0)+1<<16>>16;b[t>>1]=(b[t>>1]|0)+-1<<16>>16;o=e[q>>1]|e[q+2>>1]<<16;n=e[m>>1]|e[m+2>>1]<<16;b[q>>1]=n;b[q+2>>1]=n>>>16;b[m>>1]=o;b[m+2>>1]=o>>>16;o=q+-4|0;m=m+-4|0;n=b[m>>1]|0;if((e[o>>1]|0)>=(n&65535))break a;q=o;o=c[a+60>>2]|0}}while(0);n=c[a+72>>2]|0;o=e[C+((D&65535)<<6)+50>>1]|0;t=c[a+60>>2]|0;q=b[n+(o<<2)+-4>>1]|0;if((e[n+(o<<2)>>1]|0)<(q&65535)){z=t+((e[n+(o<<2)+2>>1]|0)<<6)+50|0;m=n+(o<<2)+-4|0;r=n+(o<<2)|0;o=q;n=t;while(1){G=e[r+-2>>1]|0;n=(o&1)==0?n+(G<<6)+50|0:n+(G<<6)+56|0;b[n>>1]=(b[n>>1]|0)+1<<16>>16;b[z>>1]=(b[z>>1]|0)+-1<<16>>16;n=e[r>>1]|e[r+2>>1]<<16;o=e[m>>1]|e[m+2>>1]<<16;b[r>>1]=o;b[r+2>>1]=o>>>16;b[m>>1]=n;b[m+2>>1]=n>>>16;n=r+-4|0;m=m+-4|0;o=b[m>>1]|0;if((e[n>>1]|0)>=(o&65535))break;r=n;n=c[a+60>>2]|0}n=c[a+72>>2]|0}m=e[C+((D&65535)<<6)+56>>1]|0;o=n+(m<<2)|0;r=b[o+-4>>1]|0;b:do if((e[o>>1]|0)<(r&65535)){G=c[a+60>>2]|0;t=G+((e[n+(m<<2)+2>>1]|0)<<6)+56|0;m=o+-4|0;q=o;n=r;o=G;while(1){G=e[q+-2>>1]|0;o=(n&1)==0?o+(G<<6)+50|0:o+(G<<6)+56|0;b[o>>1]=(b[o>>1]|0)+1<<16>>16;b[t>>1]=(b[t>>1]|0)+-1<<16>>16;o=e[q>>1]|e[q+2>>1]<<16;n=e[m>>1]|e[m+2>>1]<<16;b[q>>1]=n;b[q+2>>1]=n>>>16;b[m>>1]=o;b[m+2>>1]=o>>>16;o=q+-4|0;m=m+-4|0;n=b[m>>1]|0;if((e[o>>1]|0)>=(n&65535))break b;q=o;o=c[a+60>>2]|0}}while(0);zg(a,2,b[C+((D&65535)<<6)+52>>1]|0);rg(a,2,b[C+((D&65535)<<6)+58>>1]|0,l);n=c[a+60>>2]|0;m=c[a+108>>2]|0;if(!m){G=n+((D&65535)<<6)|0;return G|0}c[n+((D&65535)<<6)+60>>2]=Ab[c[(c[m>>2]|0)+8>>2]&3](m,d,f,h,i,j,k,l)|0;G=n+((D&65535)<<6)|0;return G|0}function Wc(b,d){b=b|0;d=d|0;var e=0.0,f=0,h=0,i=0,j=0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0,q=0,r=0,s=0,t=0,u=0.0,v=0.0,w=0.0,x=0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0;j=c[b+28>>2]|0;p=c[b+32>>2]|0;lc(b,j+4|0,p+4|0,j+324|0,p+324|0);t=c[d+8>>2]|0;g[t>>2]=1.0;q=c[d+24>>2]|0;g[t+(q+1<<2)>>2]=1.0;g[t+((q<<1)+2<<2)>>2]=1.0;m=+g[b+348>>2];w=+g[b+352>>2];o=+g[b+356>>2];u=+g[j+4>>2]*m+ +g[j+8>>2]*w+ +g[j+12>>2]*o;n=m*+g[j+20>>2]+w*+g[j+24>>2]+o*+g[j+28>>2];o=m*+g[j+36>>2]+w*+g[j+40>>2]+o*+g[j+44>>2];t=c[d+12>>2]|0;c[t>>2]=0;g[t+4>>2]=o;g[t+8>>2]=-n;g[t+12>>2]=0.0;g[t+(q<<2)>>2]=-o;c[t+(q<<2)+4>>2]=0;g[t+(q<<2)+8>>2]=u;g[t+(q<<2)+12>>2]=0.0;g[t+(q<<1<<2)>>2]=n;g[t+(q<<1<<2)+4>>2]=-u;c[t+(q<<1<<2)+8>>2]=0;g[t+(q<<1<<2)+12>>2]=0.0;r=c[d+16>>2]|0;g[r>>2]=-1.0;g[r+(q+1<<2)>>2]=-1.0;g[r+((q<<1)+2<<2)>>2]=-1.0;w=+g[b+412>>2];m=+g[b+416>>2];l=+g[b+420>>2];v=+g[p+4>>2]*w+ +g[p+8>>2]*m+ +g[p+12>>2]*l;k=w*+g[p+20>>2]+m*+g[p+24>>2]+l*+g[p+28>>2];l=w*+g[p+36>>2]+m*+g[p+40>>2]+l*+g[p+44>>2];r=c[d+20>>2]|0;c[r>>2]=0;g[r+4>>2]=-l;g[r+8>>2]=k;g[r+12>>2]=0.0;g[r+(q<<2)>>2]=l;c[r+(q<<2)+4>>2]=0;g[r+(q<<2)+8>>2]=-v;g[r+(q<<2)+12>>2]=0.0;g[r+(q<<1<<2)>>2]=-k;g[r+(q<<1<<2)+4>>2]=v;c[r+(q<<1<<2)+8>>2]=0;g[r+(q<<1<<2)+12>>2]=0.0;s=c[b+592>>2]|0;m=+g[((s&2|0)==0?d+4|0:b+600|0)>>2]*+g[d>>2];h=c[d+28>>2]|0;f=c[d+36>>2]|0;i=c[d+40>>2]|0;g[h>>2]=m*(v+ +g[p+52>>2]-u-+g[j+52>>2]);g[f>>2]=-3402823466385288598117041.0e14;g[i>>2]=3402823466385288598117041.0e14;if(!(s&1)){g[h+(q<<2)>>2]=m*(k+ +g[p+56>>2]-n-+g[j+56>>2]);g[f+(q<<2)>>2]=-3402823466385288598117041.0e14;g[i+(q<<2)>>2]=3402823466385288598117041.0e14;g[h+(q<<1<<2)>>2]=m*(l+ +g[p+60>>2]-o-+g[j+60>>2]);g[f+(q<<1<<2)>>2]=-3402823466385288598117041.0e14;g[i+(q<<1<<2)>>2]=3402823466385288598117041.0e14}else{x=c[d+32>>2]|0;c[x>>2]=c[b+596>>2];g[h+(q<<2)>>2]=m*(k+ +g[p+56>>2]-n-+g[j+56>>2]);g[f+(q<<2)>>2]=-3402823466385288598117041.0e14;g[i+(q<<2)>>2]=3402823466385288598117041.0e14;c[x+(q<<2)>>2]=c[b+596>>2];g[h+(q<<1<<2)>>2]=m*(l+ +g[p+60>>2]-o-+g[j+60>>2]);g[f+(q<<1<<2)>>2]=-3402823466385288598117041.0e14;g[i+(q<<1<<2)>>2]=3402823466385288598117041.0e14;c[x+(q<<1<<2)>>2]=c[b+596>>2]}do if(!(a[b+526>>0]|0))j=q*3|0;else{w=+g[b+456>>2];if(+g[b+444>>2]<w?+g[b+448>>2]<w:0){A=+g[j+4>>2];z=+g[j+8>>2];y=+g[j+12>>2];E=+g[b+304>>2];D=+g[b+320>>2];C=+g[b+336>>2];m=+g[b+308>>2];o=+g[b+324>>2];v=+g[b+340>>2];e=+g[j+20>>2];k=+g[j+24>>2];l=+g[j+28>>2];n=+g[j+36>>2];u=+g[j+40>>2];w=+g[j+44>>2];g[t+(q*3<<2)>>2]=A*E+z*D+y*C;g[t+((q*3|0)+1<<2)>>2]=E*e+D*k+C*l;g[t+((q*3|0)+2<<2)>>2]=E*n+D*u+C*w;g[t+(q<<2<<2)>>2]=A*m+z*o+y*v;g[t+((q<<2|1)<<2)>>2]=m*e+o*k+v*l;g[t+((q<<2|2)<<2)>>2]=m*n+o*u+v*w;g[r+(q*3<<2)>>2]=-(A*E+z*D+y*C);g[r+((q*3|0)+1<<2)>>2]=-(E*e+D*k+C*l);g[r+((q*3|0)+2<<2)>>2]=-(E*n+D*u+C*w);g[r+(q<<2<<2)>>2]=-(A*m+z*o+y*v);g[r+((q<<2|1)<<2)>>2]=-(m*e+o*k+v*l);g[r+((q<<2|2)<<2)>>2]=-(m*n+o*u+v*w);B=+g[d>>2]*+g[b+436>>2];h=c[d+28>>2]|0;g[h+(q*3<<2)>>2]=B*((A*E+z*D+y*C)*+g[b+460>>2]+(E*e+D*k+C*l)*+g[b+464>>2]+(E*n+D*u+C*w)*+g[b+468>>2]);g[h+(q<<2<<2)>>2]=B*((A*m+z*o+y*v)*+g[b+460>>2]+(m*e+o*k+v*l)*+g[b+464>>2]+(m*n+o*u+v*w)*+g[b+468>>2]);f=c[d+36>>2]|0;g[f+(q*3<<2)>>2]=-3402823466385288598117041.0e14;i=c[d+40>>2]|0;g[i+(q*3<<2)>>2]=3402823466385288598117041.0e14;g[f+(q<<2<<2)>>2]=-3402823466385288598117041.0e14;g[i+(q<<2<<2)>>2]=3402823466385288598117041.0e14;j=q*5|0;break}E=+g[b+436>>2];C=E*+g[b+460>>2]*E;D=E*E*+g[b+464>>2];E=E*E*+g[b+468>>2];g[t+(q*3<<2)>>2]=C;g[t+((q*3|0)+1<<2)>>2]=D;g[t+((q*3|0)+2<<2)>>2]=E;g[r+(q*3<<2)>>2]=-C;g[r+((q*3|0)+1<<2)>>2]=-D;g[r+((q*3|0)+2<<2)>>2]=-E;g[h+(q*3<<2)>>2]=+g[d>>2]*+g[b+432>>2]*+g[b+504>>2];if(s&4|0)c[(c[d+32>>2]|0)+(q*3<<2)>>2]=c[b+604>>2];g[f+(q*3<<2)>>2]=0.0;if(!((a[b+552>>0]|0)!=0?(e=+g[b+572>>2],e>=0.0):0))e=3402823466385288598117041.0e14;g[i+(q*3<<2)>>2]=e;j=q<<2}while(0);if(!(a[b+525>>0]|0))return;E=+g[b+436>>2];C=E*+g[b+476>>2]*E;D=E*E*+g[b+480>>2];E=E*E*+g[b+484>>2];g[t+(j<<2)>>2]=C;q=j+1|0;g[t+(q<<2)>>2]=D;x=j+2|0;g[t+(x<<2)>>2]=E;g[r+(j<<2)>>2]=-C;g[r+(q<<2)>>2]=-D;g[r+(x<<2)>>2]=-E;g[h+(j<<2)>>2]=+g[d>>2]*+g[b+432>>2]*+g[b+508>>2];if(s&4|0)c[(c[d+32>>2]|0)+(j<<2)>>2]=c[b+604>>2];do if(+g[b+452>>2]>0.0){f=f+(j<<2)|0;if(+g[b+508>>2]>0.0){g[f>>2]=0.0;e=3402823466385288598117041.0e14;break}else{g[f>>2]=-3402823466385288598117041.0e14;e=0.0;break}}else{g[f+(j<<2)>>2]=-3402823466385288598117041.0e14;e=3402823466385288598117041.0e14}while(0);g[i+(j<<2)>>2]=e;return}function Xc(a,b,d,e,f,h){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;h=+h;var i=0.0,j=0.0,k=0,m=0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0,A=0,B=0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0;B=l;l=l+272|0;c[B+128>>2]=c[d>>2];c[B+128+4>>2]=c[d+4>>2];c[B+128+8>>2]=c[d+8>>2];c[B+128+12>>2]=c[d+12>>2];c[B+128+16>>2]=c[d+16>>2];c[B+128+16+4>>2]=c[d+16+4>>2];c[B+128+16+8>>2]=c[d+16+8>>2];c[B+128+16+12>>2]=c[d+16+12>>2];c[B+128+32>>2]=c[d+32>>2];c[B+128+32+4>>2]=c[d+32+4>>2];c[B+128+32+8>>2]=c[d+32+8>>2];c[B+128+32+12>>2]=c[d+32+12>>2];c[B+128+48>>2]=c[d+48>>2];c[B+128+48+4>>2]=c[d+48+4>>2];c[B+128+48+8>>2]=c[d+48+8>>2];c[B+128+48+12>>2]=c[d+48+12>>2];c[B+64>>2]=c[e>>2];c[B+64+4>>2]=c[e+4>>2];c[B+64+8>>2]=c[e+8>>2];c[B+64+12>>2]=c[e+12>>2];c[B+64+16>>2]=c[e+16>>2];c[B+64+16+4>>2]=c[e+16+4>>2];c[B+64+16+8>>2]=c[e+16+8>>2];c[B+64+16+12>>2]=c[e+16+12>>2];c[B+64+32>>2]=c[e+32>>2];c[B+64+32+4>>2]=c[e+32+4>>2];c[B+64+32+8>>2]=c[e+32+8>>2];c[B+64+32+12>>2]=c[e+32+12>>2];c[B+64+48>>2]=c[e+48>>2];c[B+64+48+4>>2]=c[e+48+4>>2];c[B+64+48+8>>2]=c[e+48+8>>2];c[B+64+48+12>>2]=c[e+48+12>>2];i=+g[B+64+52>>2]-+g[B+128+52>>2];G=+g[B+64+56>>2]-+g[B+128+56>>2];g[B+16>>2]=+g[B+64+48>>2]-+g[B+128+48>>2];g[B+16+4>>2]=i;g[B+16+8>>2]=G;g[B+16+12>>2]=0.0;Se(B+128|0,B+64|0,B+208|0,B+192|0);G=+g[B+192>>2];i=G*+g[B+208+4>>2];D=G*+g[B+208+8>>2];g[B>>2]=+g[B+208>>2]*G;g[B+4>>2]=i;g[B+8>>2]=D;g[B+12>>2]=0.0;c[B+208+48>>2]=0;c[B+208+48+4>>2]=0;c[B+208+48+8>>2]=0;c[B+208+48+12>>2]=0;yg(B+128|0,B+192|0);D=+g[B+192>>2];i=+g[B+192+4>>2];G=+g[B+192+8>>2];E=+g[B+192+12>>2];C=D*(2.0/(D*D+i*i+G*G+E*E));j=i*(2.0/(D*D+i*i+G*G+E*E));F=G*(2.0/(D*D+i*i+G*G+E*E));g[B+208>>2]=1.0-(i*j+G*F);g[B+208+4>>2]=D*j-E*F;g[B+208+8>>2]=D*F+E*j;g[B+208+12>>2]=0.0;g[B+208+16>>2]=D*j+E*F;g[B+208+20>>2]=1.0-(D*C+G*F);g[B+208+24>>2]=i*F-E*C;g[B+208+28>>2]=0.0;g[B+208+32>>2]=D*F-E*j;g[B+208+36>>2]=i*F+E*C;g[B+208+40>>2]=1.0-(D*C+i*j);g[B+208+44>>2]=0.0;lg(b,B+208|0,B+16|0,B,B+48|0,B+32|0);if((c[a+328>>2]|0)<=0){l=B;return}k=0;do{m=c[(c[a+336>>2]|0)+(k<<2)>>2]|0;if(ub[c[(c[f>>2]|0)+8>>2]&31](f,c[m+188>>2]|0)|0?(z=c[m+192>>2]|0,Pb[c[(c[z>>2]|0)+8>>2]&127](z,m+4|0,B+192|0,B+16|0),n=+g[B+192>>2]+ +g[B+48>>2],o=+g[B+192+4>>2]+ +g[B+48+4>>2],p=+g[B+192+8>>2]+ +g[B+48+8>>2],g[B+192>>2]=n,g[B+192+4>>2]=o,g[B+192+8>>2]=p,g[B+192+12>>2]=0.0,q=+g[B+16>>2]+ +g[B+32>>2],r=+g[B+16+4>>2]+ +g[B+32+4>>2],s=+g[B+16+8>>2]+ +g[B+32+8>>2],g[B+16>>2]=q,g[B+16+4>>2]=r,g[B+16+8>>2]=s,g[B+16+12>>2]=0.0,t=+g[d+48>>2]-(q+n)*.5,u=+g[d+52>>2]-(r+o)*.5,v=+g[d+56>>2]-(s+p)*.5,w=+g[e+48>>2]-(q+n)*.5,x=+g[e+52>>2]-(r+o)*.5,y=+g[e+56>>2]-(s+p)*.5,z=(t>(q-n)*.5?8:0)|t<-((q-n)*.5)|(u<-((r-o)*.5)?2:0)|(u>(r-o)*.5?16:0)|(v<-((s-p)*.5)?4:0)|(v>(s-p)*.5?32:0),A=(w>(q-n)*.5?8:0)|w<-((q-n)*.5)|(x<-((r-o)*.5)?2:0)|(x>(r-o)*.5?16:0)|(y<-((s-p)*.5)?4:0)|(y>(s-p)*.5?32:0),(A&z|0)==0):0){if(t<-((q-n)*.5))if(!((-t-(q-n)*.5)/(w-t)>=0.0)){i=0.0;j=1.0}else{i=(-t-(q-n)*.5)/(w-t);j=1.0}else if(w<-((q-n)*.5)?(-t-(q-n)*.5)/(w-t)<1.0:0){i=0.0;j=(-t-(q-n)*.5)/(w-t)}else{i=0.0;j=1.0}if(u<-((r-o)*.5)){if(i<=(-u-(r-o)*.5)/(x-u))i=(-u-(r-o)*.5)/(x-u)}else if(x<-((r-o)*.5)?(-u-(r-o)*.5)/(x-u)<j:0)j=(-u-(r-o)*.5)/(x-u);if(v<-((s-p)*.5)){if(i<=(-v-(s-p)*.5)/(y-v))i=(-v-(s-p)*.5)/(y-v)}else if(y<-((s-p)*.5)?(-v-(s-p)*.5)/(y-v)<j:0)j=(-v-(s-p)*.5)/(y-v);if(t>(q-n)*.5){if(i<=((q-n)*.5-t)/(w-t))i=((q-n)*.5-t)/(w-t)}else if(w>(q-n)*.5?((q-n)*.5-t)/(w-t)<j:0)j=((q-n)*.5-t)/(w-t);if(u>(r-o)*.5){if(i<=((r-o)*.5-u)/(x-u))i=((r-o)*.5-u)/(x-u)}else if(x>(r-o)*.5?((r-o)*.5-u)/(x-u)<j:0)j=((r-o)*.5-u)/(x-u);if(!(z&32)){if((A&32|0)!=0?((s-p)*.5-v)/(y-v)<j:0)j=((s-p)*.5-v)/(y-v)}else if(i<=((s-p)*.5-v)/(y-v))i=((s-p)*.5-v)/(y-v);if(i<=j){H=c[m+192>>2]|0;c[B+208>>2]=0;c[B+208+4>>2]=H;c[B+208+8>>2]=m;c[B+208+12>>2]=m+4;c[B+208+16>>2]=-1;c[B+208+20>>2]=-1;jc(b,B+128|0,B+64|0,B+208|0,f,h)}}k=k+1|0}while((k|0)<(c[a+328>>2]|0));l=B;return}function Yc(b,d,e,f,h,i,j,k,l,m){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;l=l|0;m=m|0;var n=0.0,o=0.0,p=0,q=0,r=0,s=0,t=0,u=0,v=0.0;h=c[b+48>>2]|0;r=c[b+28>>2]|0;s=c[b+68>>2]|0;if(c[l+72>>2]&1|0){if((h|0)>0){i=c[b+136>>2]|0;f=0;q=c[b+232>>2]|0;do{m=i+(f<<2)|0;p=c[m>>2]|0;f=f+1|0;q=(N(q,1664525)|0)+1013904223|0;if(f>>>0<65537){e=q>>>16^q;if(f>>>0<257)if(f>>>0<17){e=(e>>>8^e)>>>4^(e>>>8^e);e=f>>>0<5?(f>>>0<3?(e>>>2^e)>>>1:0)^(e>>>2^e):e}else e=e>>>8^e}else e=q;e=i+(((e>>>0)%(f>>>0)|0)<<2)|0;c[m>>2]=c[e>>2];c[e>>2]=p}while((f|0)!=(h|0));c[b+232>>2]=q}if((c[l+20>>2]|0)>(d|0)){if((r|0)>0){h=c[b+116>>2]|0;f=0;p=c[b+232>>2]|0;do{i=h+(f<<2)|0;m=c[i>>2]|0;f=f+1|0;p=(N(p,1664525)|0)+1013904223|0;if(f>>>0<65537){e=p>>>16^p;if(f>>>0<257)if(f>>>0<17){e=(e>>>8^e)>>>4^(e>>>8^e);e=f>>>0<5?(f>>>0<3?(e>>>2^e)>>>1:0)^(e>>>2^e):e}else e=e>>>8^e}else e=p;q=h+(((e>>>0)%(f>>>0)|0)<<2)|0;c[i>>2]=c[q>>2];c[q>>2]=m}while((f|0)!=(r|0));c[b+232>>2]=p}if((s|0)>0){h=c[b+156>>2]|0;f=0;p=c[b+232>>2]|0;do{i=h+(f<<2)|0;m=c[i>>2]|0;f=f+1|0;p=(N(p,1664525)|0)+1013904223|0;if(f>>>0<65537){e=p>>>16^p;if(f>>>0<257)if(f>>>0<17){e=(e>>>8^e)>>>4^(e>>>8^e);e=f>>>0<5?(f>>>0<3?(e>>>2^e)>>>1:0)^(e>>>2^e):e}else e=e>>>8^e}else e=p;r=h+(((e>>>0)%(f>>>0)|0)<<2)|0;c[i>>2]=c[r>>2];c[r>>2]=m}while((f|0)!=(s|0));c[b+232>>2]=p}}}e=c[b+48>>2]|0;if((e|0)>0){i=0;n=0.0;do{f=c[(c[b+136>>2]|0)+(i<<2)>>2]|0;h=c[b+56>>2]|0;if((c[h+(f*152|0)+136>>2]|0)>(d|0)){e=c[b+16>>2]|0;o=+lb[c[b+212>>2]&31](e+((c[h+(f*152|0)+144>>2]|0)*244|0)|0,e+((c[h+(f*152|0)+148>>2]|0)*244|0)|0,h+(f*152|0)|0);n=n+o*o;e=c[b+48>>2]|0}i=i+1|0}while((i|0)<(e|0))}else n=0.0;if((c[l+20>>2]|0)<=(d|0)){o=n;return +o}if((k|0)>0){e=0;do{f=j+(e<<2)|0;h=c[f>>2]|0;if(a[h+20>>0]|0){r=od(b,c[h+28>>2]|0,+g[l+12>>2])|0;d=od(b,c[(c[f>>2]|0)+32>>2]|0,+g[l+12>>2])|0;s=c[b+16>>2]|0;q=c[f>>2]|0;Nb[c[(c[q>>2]|0)+24>>2]&15](q,s+(r*244|0)|0,s+(d*244|0)|0,+g[l+12>>2])}e=e+1|0}while((e|0)!=(k|0))}m=c[l+72>>2]|0;p=c[b+28>>2]|0;if(!(m&512)){if((p|0)>0){e=0;do{l=c[(c[b+116>>2]|0)+(e<<2)>>2]|0;u=c[b+36>>2]|0;t=c[b+16>>2]|0;o=+lb[c[b+216>>2]&31](t+((c[u+(l*152|0)+144>>2]|0)*244|0)|0,t+((c[u+(l*152|0)+148>>2]|0)*244|0)|0,u+(l*152|0)|0);n=n+o*o;e=e+1|0}while((e|0)!=(p|0))}i=c[b+68>>2]|0;if((i|0)>0){h=0;do{e=c[(c[b+156>>2]|0)+(h<<2)>>2]|0;f=c[b+76>>2]|0;o=+g[(c[b+36>>2]|0)+((c[f+(e*152|0)+140>>2]|0)*152|0)+100>>2];if(o>0.0){o=o*+g[f+(e*152|0)+104>>2];g[f+(e*152|0)+120>>2]=-o;g[f+(e*152|0)+124>>2]=o;l=c[b+16>>2]|0;o=+lb[c[b+212>>2]&31](l+((c[f+(e*152|0)+144>>2]|0)*244|0)|0,l+((c[f+(e*152|0)+148>>2]|0)*244|0)|0,f+(e*152|0)|0);n=n+o*o}h=h+1|0}while((h|0)!=(i|0))}}else if((p|0)>0){i=0;do{h=c[(c[b+116>>2]|0)+(i<<2)>>2]|0;e=c[b+36>>2]|0;f=c[b+16>>2]|0;o=+lb[c[b+216>>2]&31](f+((c[e+(h*152|0)+144>>2]|0)*244|0)|0,f+((c[e+(h*152|0)+148>>2]|0)*244|0)|0,e+(h*152|0)|0);n=n+o*o;o=+g[e+(h*152|0)+100>>2];h=N(i,(m>>>4&1)+1|0)|0;e=c[(c[b+156>>2]|0)+(h<<2)>>2]|0;f=c[b+76>>2]|0;if(o>0.0){v=o*+g[f+(e*152|0)+104>>2];g[f+(e*152|0)+120>>2]=-v;g[f+(e*152|0)+124>>2]=v;k=c[b+16>>2]|0;v=+lb[c[b+212>>2]&31](k+((c[f+(e*152|0)+144>>2]|0)*244|0)|0,k+((c[f+(e*152|0)+148>>2]|0)*244|0)|0,f+(e*152|0)|0);n=n+v*v}if((c[l+72>>2]&16|0)!=0?(t=c[(c[b+156>>2]|0)+(h+1<<2)>>2]|0,u=c[b+76>>2]|0,o>0.0):0){v=o*+g[u+(t*152|0)+104>>2];g[u+(t*152|0)+120>>2]=-v;g[u+(t*152|0)+124>>2]=v;k=c[b+16>>2]|0;v=+lb[c[b+212>>2]&31](k+((c[u+(t*152|0)+144>>2]|0)*244|0)|0,k+((c[u+(t*152|0)+148>>2]|0)*244|0)|0,u+(t*152|0)|0);n=n+v*v}i=i+1|0}while((i|0)!=(p|0))}h=c[b+88>>2]|0;if((h|0)<=0){v=n;return +v}f=0;do{e=c[b+96>>2]|0;o=+g[(c[b+36>>2]|0)+((c[e+(f*152|0)+140>>2]|0)*152|0)+100>>2];if(o>0.0){v=+g[e+(f*152|0)+104>>2];v=o*v>v?v:o*v;g[e+(f*152|0)+120>>2]=-v;g[e+(f*152|0)+124>>2]=v;l=c[b+16>>2]|0;v=+lb[c[b+212>>2]&31](l+((c[e+(f*152|0)+144>>2]|0)*244|0)|0,l+((c[e+(f*152|0)+148>>2]|0)*244|0)|0,e+(f*152|0)|0);n=n+v*v}f=f+1|0}while((f|0)!=(h|0));return +n}function Zc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0;h=c[a+8>>2]|0;if((h|0)<=0)return;i=0;o=0;s=0;r=0;g=0;f=0;y=0;x=0;w=0;e=0;q=0;p=0;d=0;l=0;n=0;while(1){z=c[(c[(c[a+16>>2]|0)+(i<<2)>>2]|0)+192>>2]|0;t=((~(z<<15)+z|0)>>>10^~(z<<15)+z)*9|0;t=((t>>>6^t)+~((t>>>6^t)<<11)|0)>>>16^(t>>>6^t)+~((t>>>6^t)<<11);j=t&p+-1;a:do if(j>>>0<y>>>0?(A=c[f+(j<<2)>>2]|0,(A|0)!=-1):0){j=A;while(1){if((c[g+(j<<3)>>2]|0)==(z|0))break;j=c[e+(j<<2)>>2]|0;if((j|0)==-1){G=9;break a}}if(d+(j<<2)|0){j=y;m=x;k=w}else G=9}else G=9;while(0);if((G|0)==9){G=0;m=t&p+-1;b:do if(m>>>0<y>>>0?(B=c[f+(m<<2)>>2]|0,(B|0)!=-1):0){h=B;while(1){if((c[g+(h<<3)>>2]|0)==(z|0))break;h=c[e+(h<<2)>>2]|0;if((h|0)==-1){G=15;break b}}c[d+(h<<2)>>2]=z;j=y;m=x;k=w}else G=15;while(0);if((G|0)==15){G=0;do if((q|0)==(p|0)){j=(p|0)==0?1:p<<1;if((p|0)<(j|0)){if((j|0)!=0?(c[6485]=(c[6485]|0)+1,E=ec((j<<2|3)+16|0)|0,(E|0)!=0):0){c[(E+4+15&-16)+-4>>2]=E;k=E+4+15&-16}else k=0;if((p|0)<=0){if(!d){v=j;d=k;h=p;break}}else{h=0;do{c[k+(h<<2)>>2]=c[d+(h<<2)>>2];h=h+1|0}while((h|0)!=(p|0))}c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);v=j;d=k;h=p}else{v=p;h=p}}else{v=p;h=q}while(0);c[d+(h<<2)>>2]=z;u=h+1|0;do if((s|0)==(r|0)){j=(s|0)==0?1:s<<1;if((s|0)<(j|0)){if((j|0)!=0?(c[6485]=(c[6485]|0)+1,F=ec((j<<3|3)+16|0)|0,(F|0)!=0):0){c[(F+4+15&-16)+-4>>2]=F;k=F+4+15&-16}else k=0;if((s|0)<=0){if(!g){r=j;g=k;break}}else{h=0;do{I=g+(h<<3)|0;H=c[I+4>>2]|0;r=k+(h<<3)|0;c[r>>2]=c[I>>2];c[r+4>>2]=H;h=h+1|0}while((h|0)!=(s|0))}c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0);r=j;g=k}else r=s}while(0);I=g+(s<<3)|0;c[I>>2]=z;c[I+4>>2]=0;s=s+1|0;if((p|0)<(v|0)){if((y|0)<(v|0)){do if((o|0)<(v|0)){if((v|0)!=0?(c[6485]=(c[6485]|0)+1,C=ec((v<<2|3)+16|0)|0,(C|0)!=0):0){c[(C+4+15&-16)+-4>>2]=C;j=C+4+15&-16}else j=0;if((y|0)<=0){if(!f){o=v;f=j;n=j;break}}else{h=0;do{c[j+(h<<2)>>2]=c[f+(h<<2)>>2];h=h+1|0}while((h|0)!=(y|0))}c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0);o=v;f=j;n=j}while(0);m=v<<2;uj(f+(y<<2)|0,0,m-(y<<2)|0)|0;if((x|0)<(v|0)){do if((w|0)<(v|0)){if((v|0)!=0?(c[6485]=(c[6485]|0)+1,D=ec((m|3)+16|0)|0,(D|0)!=0):0){c[(D+4+15&-16)+-4>>2]=D;j=D+4+15&-16}else j=0;if((x|0)<=0){if(!e){k=v;e=j;h=j;break}}else{h=0;do{c[j+(h<<2)>>2]=c[e+(h<<2)>>2];h=h+1|0}while((h|0)!=(x|0))}c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0);k=v;e=j;h=j}else{k=w;h=l}while(0);uj(e+(x<<2)|0,0,m-(x<<2)|0)|0;l=h}else k=w;if((v|0)>0){uj(n|0,-1,m|0)|0;uj(l|0,-1,m|0)|0}if((y|0)>0){j=v+-1|0;h=0;do{I=c[g+(h<<3)>>2]|0;I=((I+~(I<<15)|0)>>>10^I+~(I<<15))*9|0;I=f+(((((I>>>6^I)+~((I>>>6^I)<<11)|0)>>>16^(I>>>6^I)+~((I>>>6^I)<<11))&j)<<2)|0;c[e+(h<<2)>>2]=c[I>>2];c[I>>2]=h;h=h+1|0}while((h|0)!=(y|0));j=v;m=v;h=n}else{j=v;m=v;h=n}}else{j=y;m=x;k=w;h=n}p=t&v+-1}else{p=m;j=y;m=x;k=w;h=n}p=f+(p<<2)|0;c[e+(q<<2)>>2]=c[p>>2];c[p>>2]=q;q=u;p=v;n=h}Ib[c[(c[z>>2]|0)+60>>2]&127](z,b);h=c[a+8>>2]|0}i=i+1|0;if((i|0)>=(h|0))break;y=j;x=m;w=k}c:do if((h|0)>0){j=0;while(1){i=c[(c[a+16>>2]|0)+(j<<2)>>2]|0;switch(c[i+252>>2]|0){case 64:case 1:{Ib[c[(c[i>>2]|0)+24>>2]&127](i,b);h=c[a+8>>2]|0;break}default:{}}j=j+1|0;if((j|0)>=(h|0))break c}}while(0);if(g|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0)}if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}if(e|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}if(!f)return;c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0);return}function _c(a,d,f){a=a|0;d=d|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0;g=c[a+108>>2]|0;if(g|0)Mb[c[(c[g>>2]|0)+12>>2]&127](g,c[d+60>>2]|0,f);o=c[d+12>>2]|0;m=c[a+60>>2]|0;n=c[a+92>>2]|0;if(!(sb[c[(c[n>>2]|0)+56>>2]&127](n)|0)){n=c[a+92>>2]|0;Mb[c[(c[n>>2]|0)+16>>2]&127](n,m+((o&65535)<<6)|0,f)}n=e[a+56>>1]|0;d=c[a+60>>2]|0;b[d+54>>1]=(e[d+54>>1]|0)+65534;b[d+56>>1]=(e[d+56>>1]|0)+65534;b[d+58>>1]=(e[d+58>>1]|0)+65534;l=c[a+68>>2]|0;g=b[a+6>>1]|0;f=e[m+((o&65535)<<6)+54>>1]|0;b[l+(f<<2)>>1]=g;h=b[l+(f<<2)+6>>1]|0;if(!(h<<16>>16))f=l;else{j=d+((e[l+(f<<2)+2>>1]|0)<<6)+54|0;i=l+(f<<2)|0;while(1){f=i;i=i+4|0;d=b[i>>1]|0;if((g&65535)<(d&65535))break;g=c[a+60>>2]|0;k=h&65535;d=(d&1)==0?g+(k<<6)+48|0:g+(k<<6)+54|0;b[d>>1]=(b[d>>1]|0)+-1<<16>>16;b[j>>1]=(b[j>>1]|0)+1<<16>>16;d=e[f>>1]|e[f+2>>1]<<16;k=e[i>>1]|e[i+2>>1]<<16;b[f>>1]=k;b[f+2>>1]=k>>>16;b[i>>1]=d;b[i+2>>1]=d>>>16;h=b[f+10>>1]|0;if(!(h<<16>>16))break;else g=d&65535}g=b[a+6>>1]|0;f=c[a+68>>2]|0}d=e[m+((o&65535)<<6)+48>>1]|0;b[l+(d<<2)>>1]=g;i=f+(d<<2)|0;h=b[i+6>>1]|0;if(h<<16>>16){k=(c[a+60>>2]|0)+((e[f+(d<<2)+2>>1]|0)<<6)+48|0;j=i;f=b[i>>1]|0;while(1){g=j;j=j+4|0;d=b[j>>1]|0;if((f&65535)<(d&65535))break;f=c[a+60>>2]|0;i=h&65535;d=(d&1)==0?f+(i<<6)+48|0:f+(i<<6)+54|0;b[d>>1]=(b[d>>1]|0)+-1<<16>>16;b[k>>1]=(b[k>>1]|0)+1<<16>>16;d=e[g>>1]|e[g+2>>1]<<16;i=e[j>>1]|e[j+2>>1]<<16;b[g>>1]=i;b[g+2>>1]=i>>>16;b[j>>1]=d;b[j+2>>1]=d>>>16;h=b[g+10>>1]|0;if(!(h<<16>>16))break;else f=d&65535}g=b[a+6>>1]|0}b[l+((n<<1)+-1<<2)+2>>1]=0;b[l+((n<<1)+-1<<2)>>1]=g;l=c[a+72>>2]|0;d=e[m+((o&65535)<<6)+56>>1]|0;b[l+(d<<2)>>1]=g;f=b[l+(d<<2)+6>>1]|0;if(!(f<<16>>16))f=l;else{j=(c[a+60>>2]|0)+((e[l+(d<<2)+2>>1]|0)<<6)+56|0;i=l+(d<<2)|0;while(1){h=i;i=i+4|0;d=b[i>>1]|0;if((g&65535)<(d&65535))break;g=c[a+60>>2]|0;k=f&65535;d=(d&1)==0?g+(k<<6)+50|0:g+(k<<6)+56|0;b[d>>1]=(b[d>>1]|0)+-1<<16>>16;b[j>>1]=(b[j>>1]|0)+1<<16>>16;d=e[h>>1]|e[h+2>>1]<<16;k=e[i>>1]|e[i+2>>1]<<16;b[h>>1]=k;b[h+2>>1]=k>>>16;b[i>>1]=d;b[i+2>>1]=d>>>16;f=b[h+10>>1]|0;if(!(f<<16>>16))break;else g=d&65535}g=b[a+6>>1]|0;f=c[a+72>>2]|0}d=e[m+((o&65535)<<6)+50>>1]|0;b[l+(d<<2)>>1]=g;h=f+(d<<2)|0;i=b[h+6>>1]|0;if(i<<16>>16){k=(c[a+60>>2]|0)+((e[f+(d<<2)+2>>1]|0)<<6)+50|0;j=h;f=b[h>>1]|0;h=i;while(1){g=j;j=j+4|0;d=b[j>>1]|0;if((f&65535)<(d&65535))break;f=c[a+60>>2]|0;i=h&65535;d=(d&1)==0?f+(i<<6)+50|0:f+(i<<6)+56|0;b[d>>1]=(b[d>>1]|0)+-1<<16>>16;b[k>>1]=(b[k>>1]|0)+1<<16>>16;d=e[g>>1]|e[g+2>>1]<<16;i=e[j>>1]|e[j+2>>1]<<16;b[g>>1]=i;b[g+2>>1]=i>>>16;b[j>>1]=d;b[j+2>>1]=d>>>16;h=b[g+10>>1]|0;if(!(h<<16>>16))break;else f=d&65535}g=b[a+6>>1]|0}b[l+((n<<1)+-1<<2)+2>>1]=0;b[l+((n<<1)+-1<<2)>>1]=g;l=c[a+76>>2]|0;d=e[m+((o&65535)<<6)+58>>1]|0;b[l+(d<<2)>>1]=g;f=b[l+(d<<2)+6>>1]|0;if(!(f<<16>>16))f=l;else{j=(c[a+60>>2]|0)+((e[l+(d<<2)+2>>1]|0)<<6)+58|0;i=l+(d<<2)|0;while(1){h=i;i=i+4|0;d=b[i>>1]|0;if((g&65535)<(d&65535))break;g=c[a+60>>2]|0;k=f&65535;d=(d&1)==0?g+(k<<6)+52|0:g+(k<<6)+58|0;b[d>>1]=(b[d>>1]|0)+-1<<16>>16;b[j>>1]=(b[j>>1]|0)+1<<16>>16;d=e[h>>1]|e[h+2>>1]<<16;k=e[i>>1]|e[i+2>>1]<<16;b[h>>1]=k;b[h+2>>1]=k>>>16;b[i>>1]=d;b[i+2>>1]=d>>>16;f=b[h+10>>1]|0;if(!(f<<16>>16))break;else g=d&65535}g=b[a+6>>1]|0;f=c[a+76>>2]|0}d=e[m+((o&65535)<<6)+52>>1]|0;b[l+(d<<2)>>1]=g;h=f+(d<<2)|0;i=b[h+6>>1]|0;if(!(i<<16>>16)){k=g;m=l+((n<<1)+-1<<2)+2|0;b[m>>1]=0;m=l+((n<<1)+-1<<2)|0;b[m>>1]=k;m=c[a+60>>2]|0;n=a+64|0;l=b[n>>1]|0;m=m+((o&65535)<<6)+48|0;b[m>>1]=l;b[n>>1]=o;o=b[a+56>>1]|0;o=o+-1<<16>>16;b[a+56>>1]=o;return}k=(c[a+60>>2]|0)+((e[f+(d<<2)+2>>1]|0)<<6)+52|0;j=h;f=b[h>>1]|0;h=i;while(1){g=j;j=j+4|0;d=b[j>>1]|0;if((f&65535)<(d&65535))break;i=c[a+60>>2]|0;m=h&65535;d=(d&1)==0?i+(m<<6)+52|0:i+(m<<6)+58|0;b[d>>1]=(b[d>>1]|0)+-1<<16>>16;b[k>>1]=(b[k>>1]|0)+1<<16>>16;d=e[g>>1]|e[g+2>>1]<<16;m=e[j>>1]|e[j+2>>1]<<16;b[g>>1]=m;b[g+2>>1]=m>>>16;b[j>>1]=d;b[j+2>>1]=d>>>16;h=b[g+10>>1]|0;if(!(h<<16>>16))break;else f=d&65535}k=b[a+6>>1]|0;m=l+((n<<1)+-1<<2)+2|0;b[m>>1]=0;m=l+((n<<1)+-1<<2)|0;b[m>>1]=k;m=c[a+60>>2]|0;n=a+64|0;l=b[n>>1]|0;m=m+((o&65535)<<6)+48|0;b[m>>1]=l;b[n>>1]=o;o=b[a+56>>1]|0;o=o+-1<<16>>16;b[a+56>>1]=o;return}function $c(d,e){d=d|0;e=e|0;var f=0,i=0,j=0,k=0,m=0,n=0,o=0,p=0,q=0;q=l;l=l+64|0;g[d+20>>2]=+h[e+32>>3];g[d+24>>2]=+h[e+40>>3];g[d+28>>2]=+h[e+48>>3];g[d+32>>2]=+h[e+56>>3];g[d+4>>2]=+h[e>>3];g[d+8>>2]=+h[e+8>>3];g[d+12>>2]=+h[e+16>>3];g[d+16>>2]=+h[e+24>>3];g[d+36>>2]=+h[e+64>>3];g[d+40>>2]=+h[e+72>>3];g[d+44>>2]=+h[e+80>>3];g[d+48>>2]=+h[e+88>>3];c[d+56>>2]=c[e+96>>2];a[d+60>>0]=(c[e+100>>2]|0)!=0&1;p=c[e+104>>2]|0;k=q;n=k+64|0;do{c[k>>2]=0;k=k+4|0}while((k|0)<(n|0));o=c[d+88>>2]|0;if((o|0)<(p|0)){if((c[d+92>>2]|0)<(p|0)){if(!p){f=0;j=o}else{c[6485]=(c[6485]|0)+1;f=ec(p<<6|19)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}j=c[d+88>>2]|0}if((j|0)>0){i=0;do{k=f+(i<<6)|0;m=(c[d+96>>2]|0)+(i<<6)|0;n=k+64|0;do{c[k>>2]=c[m>>2];k=k+4|0;m=m+4|0}while((k|0)<(n|0));i=i+1|0}while((i|0)!=(j|0))}i=c[d+96>>2]|0;if(i|0){if(a[d+100>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[d+96>>2]=0}a[d+100>>0]=1;c[d+96>>2]=f;c[d+92>>2]=p;i=d+96|0}else i=d+96|0;f=o;do{k=(c[i>>2]|0)+(f<<6)|0;m=q;n=k+64|0;do{c[k>>2]=c[m>>2];k=k+4|0;m=m+4|0}while((k|0)<(n|0));f=f+1|0}while((f|0)!=(p|0))}c[d+88>>2]=p;if((p|0)>0){j=c[d+96>>2]|0;f=c[e+112>>2]|0;i=0;while(1){g[j+(i<<6)+16>>2]=+h[f+32>>3];g[j+(i<<6)+20>>2]=+h[f+40>>3];g[j+(i<<6)+24>>2]=+h[f+48>>3];g[j+(i<<6)+28>>2]=+h[f+56>>3];g[j+(i<<6)>>2]=+h[f>>3];g[j+(i<<6)+4>>2]=+h[f+8>>3];g[j+(i<<6)+8>>2]=+h[f+16>>3];g[j+(i<<6)+12>>2]=+h[f+24>>3];c[j+(i<<6)+32>>2]=c[f+64>>2];c[j+(i<<6)+36>>2]=c[f+68>>2];c[j+(i<<6)+40>>2]=c[f+72>>2];i=i+1|0;if((i|0)==(p|0))break;else f=f+80|0}}m=c[e+108>>2]|0;c[q>>2]=0;c[q+4>>2]=0;c[q+8>>2]=0;c[q+12>>2]=0;k=c[d+128>>2]|0;if((k|0)<(m|0)){if((c[d+132>>2]|0)<(m|0)){if(!m){f=0;j=k}else{c[6485]=(c[6485]|0)+1;f=ec((m<<4|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}j=c[d+128>>2]|0}if((j|0)>0){i=0;do{p=f+(i<<4)|0;o=(c[d+136>>2]|0)+(i<<4)|0;c[p>>2]=c[o>>2];c[p+4>>2]=c[o+4>>2];c[p+8>>2]=c[o+8>>2];c[p+12>>2]=c[o+12>>2];i=i+1|0}while((i|0)!=(j|0))}i=c[d+136>>2]|0;if(i|0){if(a[d+140>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[d+136>>2]=0}a[d+140>>0]=1;c[d+136>>2]=f;c[d+132>>2]=m;i=d+136|0}else i=d+136|0;f=k;do{p=(c[i>>2]|0)+(f<<4)|0;c[p>>2]=c[q>>2];c[p+4>>2]=c[q+4>>2];c[p+8>>2]=c[q+8>>2];c[p+12>>2]=c[q+12>>2];f=f+1|0}while((f|0)!=(m|0))}c[d+128>>2]=m;if((m|0)>0){j=c[d+136>>2]|0;f=0;i=c[e+116>>2]|0;while(1){c[j+(f<<4)+12>>2]=c[i+12>>2];b[j+(f<<4)+6>>1]=b[i+6>>1]|0;b[j+(f<<4)+8>>1]=b[i+8>>1]|0;b[j+(f<<4)+10>>1]=b[i+10>>1]|0;b[j+(f<<4)>>1]=b[i>>1]|0;b[j+(f<<4)+2>>1]=b[i+2>>1]|0;b[j+(f<<4)+4>>1]=b[i+4>>1]|0;f=f+1|0;if((f|0)==(m|0))break;else i=i+16|0}}c[d+144>>2]=c[e+120>>2];m=c[e+124>>2]|0;k=c[d+152>>2]|0;if((k|0)<(m|0)){if((c[d+156>>2]|0)<(m|0)){if(!m){f=0;j=k}else{c[6485]=(c[6485]|0)+1;f=ec(m<<5|19)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}j=c[d+152>>2]|0}if((j|0)>0){i=0;do{p=f+(i<<5)|0;o=(c[d+160>>2]|0)+(i<<5)|0;c[p>>2]=c[o>>2];c[p+4>>2]=c[o+4>>2];c[p+8>>2]=c[o+8>>2];c[p+12>>2]=c[o+12>>2];c[p+16>>2]=c[o+16>>2];c[p+20>>2]=c[o+20>>2];c[p+24>>2]=c[o+24>>2];c[p+28>>2]=c[o+28>>2];i=i+1|0}while((i|0)!=(j|0))}i=c[d+160>>2]|0;if(i|0){if(a[d+164>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[d+160>>2]=0}a[d+164>>0]=1;c[d+160>>2]=f;c[d+156>>2]=m;i=d+160|0}else i=d+160|0;f=k;do{p=(c[i>>2]|0)+(f<<5)|0;c[p>>2]=c[q>>2];c[p+4>>2]=c[q+4>>2];c[p+8>>2]=c[q+8>>2];c[p+12>>2]=c[q+12>>2];c[p+16>>2]=c[q+16>>2];c[p+20>>2]=c[q+20>>2];c[p+24>>2]=c[q+24>>2];c[p+28>>2]=c[q+28>>2];f=f+1|0}while((f|0)!=(m|0))}c[d+152>>2]=m;if((m|0)<=0){l=q;return}j=c[d+160>>2]|0;i=0;f=c[e+128>>2]|0;while(1){b[j+(i<<5)+6>>1]=b[f+14>>1]|0;b[j+(i<<5)+8>>1]=b[f+16>>1]|0;b[j+(i<<5)+10>>1]=b[f+18>>1]|0;b[j+(i<<5)>>1]=b[f+8>>1]|0;b[j+(i<<5)+2>>1]=b[f+10>>1]|0;b[j+(i<<5)+4>>1]=b[f+12>>1]|0;c[j+(i<<5)+12>>2]=c[f>>2];c[j+(i<<5)+16>>2]=c[f+4>>2];i=i+1|0;if((i|0)==(m|0))break;else f=f+20|0}l=q;return}function ad(d,e){d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,m=0,n=0,o=0;o=l;l=l+64|0;c[d+20>>2]=c[e+16>>2];c[d+24>>2]=c[e+20>>2];c[d+28>>2]=c[e+24>>2];c[d+32>>2]=c[e+28>>2];c[d+4>>2]=c[e>>2];c[d+8>>2]=c[e+4>>2];c[d+12>>2]=c[e+8>>2];c[d+16>>2]=c[e+12>>2];c[d+36>>2]=c[e+32>>2];c[d+40>>2]=c[e+36>>2];c[d+44>>2]=c[e+40>>2];c[d+48>>2]=c[e+44>>2];c[d+56>>2]=c[e+48>>2];a[d+60>>0]=(c[e+52>>2]|0)!=0&1;n=c[e+56>>2]|0;i=o;k=i+64|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(k|0));m=c[d+88>>2]|0;if((m|0)<(n|0)){if((c[d+92>>2]|0)<(n|0)){if(!n){f=0;h=m}else{c[6485]=(c[6485]|0)+1;f=ec(n<<6|19)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}h=c[d+88>>2]|0}if((h|0)>0){g=0;do{i=f+(g<<6)|0;j=(c[d+96>>2]|0)+(g<<6)|0;k=i+64|0;do{c[i>>2]=c[j>>2];i=i+4|0;j=j+4|0}while((i|0)<(k|0));g=g+1|0}while((g|0)!=(h|0))}g=c[d+96>>2]|0;if(g|0){if(a[d+100>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0)}c[d+96>>2]=0}a[d+100>>0]=1;c[d+96>>2]=f;c[d+92>>2]=n;g=d+96|0}else g=d+96|0;f=m;do{i=(c[g>>2]|0)+(f<<6)|0;j=o;k=i+64|0;do{c[i>>2]=c[j>>2];i=i+4|0;j=j+4|0}while((i|0)<(k|0));f=f+1|0}while((f|0)!=(n|0))}c[d+88>>2]=n;if((n|0)>0){h=c[d+96>>2]|0;f=c[e+64>>2]|0;g=0;while(1){c[h+(g<<6)+16>>2]=c[f+16>>2];c[h+(g<<6)+20>>2]=c[f+20>>2];c[h+(g<<6)+24>>2]=c[f+24>>2];c[h+(g<<6)+28>>2]=c[f+28>>2];c[h+(g<<6)>>2]=c[f>>2];c[h+(g<<6)+4>>2]=c[f+4>>2];c[h+(g<<6)+8>>2]=c[f+8>>2];c[h+(g<<6)+12>>2]=c[f+12>>2];c[h+(g<<6)+32>>2]=c[f+32>>2];c[h+(g<<6)+36>>2]=c[f+36>>2];c[h+(g<<6)+40>>2]=c[f+40>>2];g=g+1|0;if((g|0)==(n|0))break;else f=f+48|0}}j=c[e+60>>2]|0;c[o>>2]=0;c[o+4>>2]=0;c[o+8>>2]=0;c[o+12>>2]=0;i=c[d+128>>2]|0;if((i|0)<(j|0)){if((c[d+132>>2]|0)<(j|0)){if(!j){f=0;h=i}else{c[6485]=(c[6485]|0)+1;f=ec((j<<4|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}h=c[d+128>>2]|0}if((h|0)>0){g=0;do{n=f+(g<<4)|0;m=(c[d+136>>2]|0)+(g<<4)|0;c[n>>2]=c[m>>2];c[n+4>>2]=c[m+4>>2];c[n+8>>2]=c[m+8>>2];c[n+12>>2]=c[m+12>>2];g=g+1|0}while((g|0)!=(h|0))}g=c[d+136>>2]|0;if(g|0){if(a[d+140>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0)}c[d+136>>2]=0}a[d+140>>0]=1;c[d+136>>2]=f;c[d+132>>2]=j;g=d+136|0}else g=d+136|0;f=i;do{n=(c[g>>2]|0)+(f<<4)|0;c[n>>2]=c[o>>2];c[n+4>>2]=c[o+4>>2];c[n+8>>2]=c[o+8>>2];c[n+12>>2]=c[o+12>>2];f=f+1|0}while((f|0)!=(j|0))}c[d+128>>2]=j;if((j|0)>0){h=c[d+136>>2]|0;f=0;g=c[e+68>>2]|0;while(1){c[h+(f<<4)+12>>2]=c[g+12>>2];b[h+(f<<4)+6>>1]=b[g+6>>1]|0;b[h+(f<<4)+8>>1]=b[g+8>>1]|0;b[h+(f<<4)+10>>1]=b[g+10>>1]|0;b[h+(f<<4)>>1]=b[g>>1]|0;b[h+(f<<4)+2>>1]=b[g+2>>1]|0;b[h+(f<<4)+4>>1]=b[g+4>>1]|0;f=f+1|0;if((f|0)==(j|0))break;else g=g+16|0}}c[d+144>>2]=c[e+76>>2];j=c[e+80>>2]|0;i=c[d+152>>2]|0;if((i|0)<(j|0)){if((c[d+156>>2]|0)<(j|0)){if(!j){f=0;h=i}else{c[6485]=(c[6485]|0)+1;f=ec(j<<5|19)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}h=c[d+152>>2]|0}if((h|0)>0){g=0;do{n=f+(g<<5)|0;m=(c[d+160>>2]|0)+(g<<5)|0;c[n>>2]=c[m>>2];c[n+4>>2]=c[m+4>>2];c[n+8>>2]=c[m+8>>2];c[n+12>>2]=c[m+12>>2];c[n+16>>2]=c[m+16>>2];c[n+20>>2]=c[m+20>>2];c[n+24>>2]=c[m+24>>2];c[n+28>>2]=c[m+28>>2];g=g+1|0}while((g|0)!=(h|0))}g=c[d+160>>2]|0;if(g|0){if(a[d+164>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0)}c[d+160>>2]=0}a[d+164>>0]=1;c[d+160>>2]=f;c[d+156>>2]=j;g=d+160|0}else g=d+160|0;f=i;do{n=(c[g>>2]|0)+(f<<5)|0;c[n>>2]=c[o>>2];c[n+4>>2]=c[o+4>>2];c[n+8>>2]=c[o+8>>2];c[n+12>>2]=c[o+12>>2];c[n+16>>2]=c[o+16>>2];c[n+20>>2]=c[o+20>>2];c[n+24>>2]=c[o+24>>2];c[n+28>>2]=c[o+28>>2];f=f+1|0}while((f|0)!=(j|0))}c[d+152>>2]=j;if((j|0)<=0){l=o;return}h=c[d+160>>2]|0;g=0;f=c[e+72>>2]|0;while(1){b[h+(g<<5)+6>>1]=b[f+14>>1]|0;b[h+(g<<5)+8>>1]=b[f+16>>1]|0;b[h+(g<<5)+10>>1]=b[f+18>>1]|0;b[h+(g<<5)>>1]=b[f+8>>1]|0;b[h+(g<<5)+2>>1]=b[f+10>>1]|0;b[h+(g<<5)+4>>1]=b[f+12>>1]|0;c[h+(g<<5)+12>>2]=c[f>>2];c[h+(g<<5)+16>>2]=c[f+4>>2];g=g+1|0;if((g|0)==(j|0))break;else f=f+20|0}l=o;return}function bd(b,d){b=b|0;d=+d;var e=0,f=0.0,h=0,i=0,j=0.0,k=0.0,m=0,n=0,o=0,p=0.0,q=0.0,r=0,s=0.0,t=0,u=0;r=l;l=l+288|0;o=c[b+248>>2]|0;if((o|0)>0){h=c[b+256>>2]|0;i=r+224+48|0;m=r+64+28|0;e=0;do{n=c[h+(e<<2)>>2]|0;g[n+268>>2]=1.0;a:do switch(c[n+220>>2]|0){case 2:case 5:break;default:if(!(c[n+204>>2]&3)){Me(n+4|0,+g[n+372>>2],+g[n+376>>2],+g[n+380>>2],n+388|0,d,r+224|0);f=+g[i>>2]-+g[n+52>>2];j=+g[r+224+52>>2]-+g[n+56>>2];k=+g[r+224+56>>2]-+g[n+60>>2];do if((a[b+44>>0]|0?(s=+g[n+276>>2],s*s!=0.0?s*s<f*f+j*j+k*k:0):0)?(c[(c[n+192>>2]|0)+4>>2]|0)<20:0){c[6300]=(c[6300]|0)+1;u=c[b+68>>2]|0;u=sb[c[(c[u>>2]|0)+36>>2]&127](u)|0;t=c[b+24>>2]|0;g[r+120+4>>2]=1.0;c[r+120+16>>2]=c[n+52>>2];c[r+120+16+4>>2]=c[n+52+4>>2];c[r+120+16+8>>2]=c[n+52+8>>2];c[r+120+16+12>>2]=c[n+52+12>>2];c[r+120+32>>2]=c[i>>2];c[r+120+32+4>>2]=c[i+4>>2];c[r+120+32+8>>2]=c[i+8>>2];c[r+120+32+12>>2]=c[i+12>>2];c[r+120+80>>2]=0;c[r+120>>2]=6168;c[r+120+84>>2]=n;c[r+120+92>>2]=u;c[r+120+96>>2]=t;t=c[n+272>>2]|0;c[r+64+8>>2]=0;c[r+64+12>>2]=-1;c[r+64>>2]=9792;c[r+64+4>>2]=8;c[r+64+16>>2]=1065353216;c[r+64+20>>2]=1065353216;c[r+64+24>>2]=1065353216;c[m>>2]=0;c[m+4>>2]=0;c[m+8>>2]=0;c[m+12>>2]=0;c[m+16>>2]=0;c[r+64+32>>2]=t;c[r+64+48>>2]=t;g[r+64+52>>2]=0.0;c[r+120+88>>2]=c[b+56>>2];t=c[n+188>>2]|0;c[r+120+8>>2]=c[t+4>>2];c[r+120+12>>2]=c[t+8>>2];c[r+48>>2]=c[i>>2];c[r+48+4>>2]=c[i+4>>2];c[r+48+8>>2]=c[i+8>>2];c[r+48+12>>2]=c[i+12>>2];c[r>>2]=c[n+4>>2];c[r+4>>2]=c[n+4+4>>2];c[r+8>>2]=c[n+4+8>>2];c[r+12>>2]=c[n+4+12>>2];c[r+16>>2]=c[n+20>>2];c[r+16+4>>2]=c[n+20+4>>2];c[r+16+8>>2]=c[n+20+8>>2];c[r+16+12>>2]=c[n+20+12>>2];c[r+32>>2]=c[n+36>>2];c[r+32+4>>2]=c[n+36+4>>2];c[r+32+8>>2]=c[n+36+8>>2];c[r+32+12>>2]=c[n+36+12>>2];ud(b,r+64|0,n+4|0,r,r+120|0,0.0);f=+g[r+120+4>>2];if(f<1.0){g[n+268>>2]=f;Me(n+4|0,+g[n+372>>2],+g[n+376>>2],+g[n+380>>2],n+388|0,f*d,r+224|0);g[n+268>>2]=0.0;fe(n,r+224|0);break a}else break}while(0);fe(n,r+224|0)}}while(0);e=e+1|0}while((e|0)<(o|0))}if(!(a[b+291>>0]|0)){l=r;return}if((c[b+324>>2]|0)<=0){l=r;return}n=0;do{o=c[(c[b+332>>2]|0)+(n<<2)>>2]|0;h=c[o+772>>2]|0;h=(c[h+252>>2]&2|0)==0?0:h;m=c[o+776>>2]|0;m=(c[m+252>>2]&2|0)==0?0:m;e=c[o+780>>2]|0;if((e|0)>0)if(!h){h=0;do{f=+g[58]*+g[m+232>>2];if(f>0.0?(p=+g[o+4+(h*192|0)+124>>2],p!=0.0):0){k=f*p*+g[o+4+(h*192|0)+64>>2];d=f*p*+g[o+4+(h*192|0)+68>>2];s=f*p*+g[o+4+(h*192|0)+72>>2];f=+g[o+4+(h*192|0)+36>>2]-+g[m+56>>2];j=+g[o+4+(h*192|0)+40>>2]-+g[m+60>>2];g[r+64>>2]=+g[o+4+(h*192|0)+32>>2]-+g[m+52>>2];g[r+64+4>>2]=f;g[r+64+8>>2]=j;g[r+64+12>>2]=0.0;g[r>>2]=k;g[r+4>>2]=d;g[r+8>>2]=s;g[r+12>>2]=0.0;Ij(m,r,r+64|0);e=c[o+780>>2]|0}h=h+1|0}while((h|0)<(e|0))}else{i=0;do{f=+g[h+232>>2]*+g[m+232>>2];if(f>0.0?(q=+g[o+4+(i*192|0)+124>>2],q!=0.0):0){k=f*q*+g[o+4+(i*192|0)+64>>2];d=f*q*+g[o+4+(i*192|0)+68>>2];s=f*q*+g[o+4+(i*192|0)+72>>2];g[r+224>>2]=-k;g[r+224+4>>2]=-d;g[r+224+8>>2]=-s;g[r+224+12>>2]=0.0;j=+g[o+4+(i*192|0)+52>>2]-+g[h+56>>2];f=+g[o+4+(i*192|0)+56>>2]-+g[h+60>>2];g[r+120>>2]=+g[o+4+(i*192|0)+48>>2]-+g[h+52>>2];g[r+120+4>>2]=j;g[r+120+8>>2]=f;g[r+120+12>>2]=0.0;f=+g[o+4+(i*192|0)+36>>2]-+g[m+56>>2];j=+g[o+4+(i*192|0)+40>>2]-+g[m+60>>2];g[r+64>>2]=+g[o+4+(i*192|0)+32>>2]-+g[m+52>>2];g[r+64+4>>2]=f;g[r+64+8>>2]=j;g[r+64+12>>2]=0.0;Ij(h,r+224|0,r+120|0);g[r>>2]=k;g[r+4>>2]=d;g[r+8>>2]=s;g[r+12>>2]=0.0;Ij(m,r,r+64|0);e=c[o+780>>2]|0}i=i+1|0}while((i|0)<(e|0))}n=n+1|0}while((n|0)<(c[b+324>>2]|0));l=r;return}function cd(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,h=0.0,i=0.0,j=0.0,k=0.0,m=0,n=0.0,o=0,p=0,q=0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0,K=0;q=l;l=l+240|0;c[a+4>>2]=(c[a+4>>2]|0)+1;p=c[b+36>>2]|0;o=c[d+36>>2]|0;J=c[a+8>>2]|0;f=c[a+12>>2]|0;K=c[(c[J+4>>2]|0)+28>>2]|0;d=c[K+(p*80|0)+64>>2]|0;b=(c[f+4>>2]|0)+28|0;e=c[(c[b>>2]|0)+(o*80|0)+64>>2]|0;J=c[J+12>>2]|0;n=+g[J>>2];H=+g[J+4>>2];I=+g[J+8>>2];h=+g[J+16>>2];k=+g[J+20>>2];t=+g[J+24>>2];r=+g[J+32>>2];u=+g[J+36>>2];C=+g[J+40>>2];v=+g[K+(p*80|0)>>2];w=+g[K+(p*80|0)+16>>2];x=+g[K+(p*80|0)+32>>2];y=+g[K+(p*80|0)+4>>2];z=+g[K+(p*80|0)+20>>2];A=+g[K+(p*80|0)+36>>2];i=+g[K+(p*80|0)+8>>2];B=+g[K+(p*80|0)+24>>2];D=+g[K+(p*80|0)+40>>2];s=+g[K+(p*80|0)+48>>2];j=+g[K+(p*80|0)+52>>2];G=+g[K+(p*80|0)+56>>2];E=+g[J+48>>2]+(n*s+H*j+I*G);F=+g[J+52>>2]+(h*s+k*j+t*G);G=+g[J+56>>2]+(r*s+u*j+C*G);g[q+176>>2]=n*v+H*w+I*x;g[q+176+4>>2]=n*y+H*z+I*A;g[q+176+8>>2]=n*i+H*B+I*D;g[q+176+12>>2]=0.0;g[q+176+16>>2]=h*v+k*w+t*x;g[q+176+20>>2]=h*y+k*z+t*A;g[q+176+24>>2]=h*i+k*B+t*D;g[q+176+28>>2]=0.0;g[q+176+32>>2]=r*v+u*w+C*x;g[q+176+36>>2]=r*y+u*z+C*A;g[q+176+40>>2]=r*i+u*B+C*D;g[q+176+44>>2]=0.0;g[q+176+48>>2]=E;g[q+176+52>>2]=F;g[q+176+56>>2]=G;g[q+176+60>>2]=0.0;f=c[f+12>>2]|0;G=+g[f>>2];F=+g[f+4>>2];E=+g[f+8>>2];D=+g[f+16>>2];C=+g[f+20>>2];B=+g[f+24>>2];u=+g[f+32>>2];i=+g[f+36>>2];r=+g[f+40>>2];b=c[b>>2]|0;A=+g[b+(o*80|0)>>2];z=+g[b+(o*80|0)+16>>2];y=+g[b+(o*80|0)+32>>2];x=+g[b+(o*80|0)+4>>2];w=+g[b+(o*80|0)+20>>2];v=+g[b+(o*80|0)+36>>2];t=+g[b+(o*80|0)+8>>2];k=+g[b+(o*80|0)+24>>2];h=+g[b+(o*80|0)+40>>2];I=+g[b+(o*80|0)+48>>2];H=+g[b+(o*80|0)+52>>2];n=+g[b+(o*80|0)+56>>2];j=+g[f+48>>2]+(G*I+F*H+E*n);s=+g[f+52>>2]+(D*I+C*H+B*n);n=+g[f+56>>2]+(u*I+i*H+r*n);g[q+112>>2]=G*A+F*z+E*y;g[q+112+4>>2]=G*x+F*w+E*v;g[q+112+8>>2]=G*t+F*k+E*h;g[q+112+12>>2]=0.0;g[q+112+16>>2]=D*A+C*z+B*y;g[q+112+20>>2]=D*x+C*w+B*v;g[q+112+24>>2]=D*t+C*k+B*h;g[q+112+28>>2]=0.0;g[q+112+32>>2]=u*A+i*z+r*y;g[q+112+36>>2]=u*x+i*w+r*v;g[q+112+40>>2]=u*t+i*k+r*h;g[q+112+44>>2]=0.0;g[q+112+48>>2]=j;g[q+112+52>>2]=s;g[q+112+56>>2]=n;g[q+112+60>>2]=0.0;Pb[c[(c[d>>2]|0)+8>>2]&127](d,q+176|0,q+96|0,q+80|0);Pb[c[(c[e>>2]|0)+8>>2]&127](e,q+112|0,q+64|0,q+48|0);n=+g[(c[a+24>>2]|0)+32>>2];s=+g[q+96>>2]-n;g[q+96>>2]=s;j=+g[q+96+4>>2]-n;g[q+96+4>>2]=j;h=+g[q+96+8>>2]-n;g[q+96+8>>2]=h;r=n+ +g[q+80>>2];g[q+80>>2]=r;k=n+ +g[q+80+4>>2];g[q+80+4>>2]=k;i=n+ +g[q+80+8>>2];g[q+80+8>>2]=i;if(!(s>+g[q+48>>2])?!(r<+g[q+64>>2]):0)b=1;else b=0;if(!(!(h>+g[q+48+8>>2])?!(i<+g[q+64+8>>2]):0))b=0;if(j>+g[q+48+4>>2]){l=q;return}if(k<+g[q+64+4>>2]|b^1){l=q;return}f=c[a+8>>2]|0;b=c[f+8>>2]|0;c[q+24>>2]=f;c[q+24+4>>2]=d;c[q+24+8>>2]=b;c[q+24+12>>2]=q+176;c[q+24+16>>2]=-1;c[q+24+20>>2]=p;b=c[a+12>>2]|0;f=c[b+8>>2]|0;c[q>>2]=b;c[q+4>>2]=e;c[q+8>>2]=f;c[q+12>>2]=q+112;c[q+16>>2]=-1;c[q+20>>2]=o;f=c[a+28>>2]|0;c[6481]=(c[6481]|0)+1;b=(((o<<16|p)+~((o<<16|p)<<15)|0)>>>10^(o<<16|p)+~((o<<16|p)<<15))*9|0;b=(c[f+12>>2]|0)+-1&(((b>>>6^b)+~((b>>>6^b)<<11)|0)>>>16^(b>>>6^b)+~((b>>>6^b)<<11));a:do if((b|0)<(c[f+28>>2]|0)?(m=c[(c[f+36>>2]|0)+(b<<2)>>2]|0,(m|0)!=-1):0){e=c[f+16>>2]|0;d=m;while(1){b=e+(d*12|0)|0;if((c[b>>2]|0)==(p|0)?(c[e+(d*12|0)+4>>2]|0)==(o|0):0)break a;d=c[(c[f+56>>2]|0)+(d<<2)>>2]|0;if((d|0)==-1){b=0;break}}}else b=0;while(0);do if(!(n>0.0))if(!b){b=c[a+16>>2]|0;b=yb[c[(c[b>>2]|0)+8>>2]&1](b,q+24|0,q,c[a+32>>2]|0,1)|0;K=c[a+28>>2]|0;c[(wb[c[(c[K>>2]|0)+12>>2]&63](K,p,o)|0)+8>>2]=b;break}else{b=c[b+8>>2]|0;break}else{b=c[a+16>>2]|0;b=yb[c[(c[b>>2]|0)+8>>2]&1](b,q+24|0,q,0,2)|0}while(0);K=c[a+24>>2]|0;m=c[K+8>>2]|0;J=c[K+12>>2]|0;c[K+8>>2]=q+24;c[K+12>>2]=q;Mb[c[(c[K>>2]|0)+8>>2]&127](K,-1,p);K=c[a+24>>2]|0;Mb[c[(c[K>>2]|0)+12>>2]&127](K,-1,o);Tb[c[(c[b>>2]|0)+8>>2]&31](b,q+24|0,q,c[a+20>>2]|0,c[a+24>>2]|0);K=c[a+24>>2]|0;c[K+8>>2]=m;c[K+12>>2]=J;l=q;return}function dd(b,d,e){b=b|0;d=d|0;e=e|0;Og(b,d,e)|0;c[d+52>>2]=c[b+48>>2];c[d+56>>2]=c[b+52>>2];c[d+60>>2]=c[b+56>>2];c[d+64>>2]=c[b+60>>2];c[d+68>>2]=c[b+64>>2];c[d+72>>2]=c[b+68>>2];c[d+76>>2]=c[b+72>>2];c[d+80>>2]=c[b+76>>2];c[d+84>>2]=c[b+80>>2];c[d+88>>2]=c[b+84>>2];c[d+92>>2]=c[b+88>>2];c[d+96>>2]=c[b+92>>2];c[d+100>>2]=c[b+96>>2];c[d+104>>2]=c[b+100>>2];c[d+108>>2]=c[b+104>>2];c[d+112>>2]=c[b+108>>2];c[d+116>>2]=c[b+112>>2];c[d+120>>2]=c[b+116>>2];c[d+124>>2]=c[b+120>>2];c[d+128>>2]=c[b+124>>2];c[d+132>>2]=c[b+128>>2];c[d+136>>2]=c[b+132>>2];c[d+140>>2]=c[b+136>>2];c[d+144>>2]=c[b+140>>2];c[d+148>>2]=c[b+144>>2];c[d+152>>2]=c[b+148>>2];c[d+156>>2]=c[b+152>>2];c[d+160>>2]=c[b+156>>2];c[d+164>>2]=c[b+160>>2];c[d+168>>2]=c[b+164>>2];c[d+172>>2]=c[b+168>>2];c[d+176>>2]=c[b+172>>2];c[d+428>>2]=c[b+968>>2];c[d+412>>2]=c[b+972>>2];c[d+444>>2]=c[b+976>>2];c[d+460>>2]=c[b+980>>2];c[d+476>>2]=c[b+984>>2];c[d+492>>2]=c[b+988>>2];c[d+508>>2]=c[b+992>>2];c[d+524>>2]=c[b+1e3>>2];c[d+540>>2]=c[b+1004>>2];c[d+556>>2]=c[b+1012>>2];c[d+572>>2]=c[b+1020>>2];c[d+588>>2]=c[b+1028>>2];c[d+604>>2]=c[b+1036>>2];c[d+432>>2]=c[b+1056>>2];c[d+416>>2]=c[b+1060>>2];c[d+448>>2]=c[b+1064>>2];c[d+464>>2]=c[b+1068>>2];c[d+480>>2]=c[b+1072>>2];c[d+496>>2]=c[b+1076>>2];c[d+512>>2]=c[b+1080>>2];c[d+528>>2]=c[b+1088>>2];c[d+544>>2]=c[b+1092>>2];c[d+560>>2]=c[b+1100>>2];c[d+576>>2]=c[b+1108>>2];c[d+592>>2]=c[b+1116>>2];c[d+608>>2]=c[b+1124>>2];c[d+436>>2]=c[b+1144>>2];c[d+420>>2]=c[b+1148>>2];c[d+452>>2]=c[b+1152>>2];c[d+468>>2]=c[b+1156>>2];c[d+484>>2]=c[b+1160>>2];c[d+500>>2]=c[b+1164>>2];c[d+516>>2]=c[b+1168>>2];c[d+532>>2]=c[b+1176>>2];c[d+548>>2]=c[b+1180>>2];c[d+564>>2]=c[b+1188>>2];c[d+580>>2]=c[b+1196>>2];c[d+596>>2]=c[b+1204>>2];c[d+612>>2]=c[b+1212>>2];g[d+440>>2]=0.0;g[d+424>>2]=0.0;g[d+456>>2]=0.0;g[d+472>>2]=0.0;g[d+488>>2]=0.0;g[d+504>>2]=0.0;g[d+520>>2]=0.0;g[d+536>>2]=0.0;g[d+552>>2]=0.0;g[d+568>>2]=0.0;g[d+584>>2]=0.0;g[d+600>>2]=0.0;g[d+616>>2]=0.0;a[d+620>>0]=a[b+996>>0]|0;a[d+624>>0]=a[b+1008>>0]|0;a[d+628>>0]=a[b+1016>>0]|0;a[d+632>>0]=a[b+1024>>0]|0;a[d+636>>0]=a[b+1032>>0]|0;a[d+621>>0]=a[b+1084>>0]|0;a[d+625>>0]=a[b+1096>>0]|0;a[d+629>>0]=a[b+1104>>0]|0;a[d+633>>0]=a[b+1112>>0]|0;a[d+637>>0]=a[b+1120>>0]|0;a[d+622>>0]=a[b+1172>>0]|0;a[d+626>>0]=a[b+1184>>0]|0;a[d+630>>0]=a[b+1192>>0]|0;a[d+634>>0]=a[b+1200>>0]|0;a[d+638>>0]=a[b+1208>>0]|0;a[d+623>>0]=0;a[d+627>>0]=0;a[d+631>>0]=0;a[d+635>>0]=0;a[d+639>>0]=0;c[d+196>>2]=c[b+680>>2];c[d+200>>2]=c[b+684>>2];c[d+204>>2]=c[b+688>>2];c[d+208>>2]=c[b+692>>2];c[d+180>>2]=c[b+696>>2];c[d+184>>2]=c[b+700>>2];c[d+188>>2]=c[b+704>>2];c[d+192>>2]=c[b+708>>2];c[d+212>>2]=c[b+712>>2];c[d+216>>2]=c[b+716>>2];c[d+220>>2]=c[b+720>>2];c[d+224>>2]=c[b+724>>2];c[d+228>>2]=c[b+728>>2];c[d+232>>2]=c[b+732>>2];c[d+236>>2]=c[b+736>>2];c[d+240>>2]=c[b+740>>2];c[d+244>>2]=c[b+744>>2];c[d+248>>2]=c[b+748>>2];c[d+252>>2]=c[b+752>>2];c[d+256>>2]=c[b+756>>2];c[d+260>>2]=c[b+760>>2];c[d+264>>2]=c[b+764>>2];c[d+268>>2]=c[b+768>>2];c[d+272>>2]=c[b+772>>2];c[d+276>>2]=c[b+776>>2];c[d+280>>2]=c[b+780>>2];c[d+284>>2]=c[b+784>>2];c[d+288>>2]=c[b+788>>2];c[d+292>>2]=c[b+876>>2];c[d+296>>2]=c[b+880>>2];c[d+300>>2]=c[b+884>>2];c[d+304>>2]=c[b+888>>2];c[d+308>>2]=c[b+892>>2];c[d+312>>2]=c[b+896>>2];c[d+316>>2]=c[b+900>>2];c[d+320>>2]=c[b+904>>2];c[d+324>>2]=c[b+804>>2];c[d+328>>2]=c[b+808>>2];c[d+332>>2]=c[b+812>>2];c[d+336>>2]=c[b+816>>2];c[d+340>>2]=c[b+820>>2];c[d+344>>2]=c[b+824>>2];c[d+348>>2]=c[b+828>>2];c[d+352>>2]=c[b+832>>2];c[d+356>>2]=c[b+840>>2];c[d+360>>2]=c[b+844>>2];c[d+364>>2]=c[b+848>>2];c[d+368>>2]=c[b+852>>2];c[d+372>>2]=c[b+860>>2];c[d+376>>2]=c[b+864>>2];c[d+380>>2]=c[b+868>>2];c[d+384>>2]=c[b+872>>2];a[d+388>>0]=a[b+792>>0]|0;a[d+392>>0]=a[b+795>>0]|0;a[d+396>>0]=a[b+798>>0]|0;a[d+400>>0]=a[b+836>>0]|0;a[d+404>>0]=a[b+856>>0]|0;a[d+389>>0]=a[b+793>>0]|0;a[d+393>>0]=a[b+796>>0]|0;a[d+397>>0]=a[b+799>>0]|0;a[d+401>>0]=a[b+837>>0]|0;a[d+405>>0]=a[b+857>>0]|0;a[d+390>>0]=a[b+794>>0]|0;a[d+394>>0]=a[b+797>>0]|0;a[d+398>>0]=a[b+800>>0]|0;a[d+402>>0]=a[b+838>>0]|0;a[d+406>>0]=a[b+858>>0]|0;a[d+391>>0]=0;a[d+395>>0]=0;a[d+399>>0]=0;a[d+403>>0]=0;a[d+407>>0]=0;c[d+640>>2]=c[b+1232>>2];c[d+408>>2]=0;return 12765}function ed(b,d,e,f,h,i){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;var k=0.0,m=0,n=0.0,o=0,p=0,q=0,r=0.0,s=0.0,t=0.0,u=0,v=0.0,w=0.0;u=l;l=l+288|0;q=c[b+4>>2]|0;a[q+312>>0]=0;c[q>>2]=0;a[q+356>>0]=1;c[q+292>>2]=1566444395;c[q+296>>2]=1566444395;c[q+300>>2]=1566444395;g[q+304>>2]=0.0;c[q+336>>2]=0;c[q+336+4>>2]=0;c[q+336+8>>2]=0;c[q+336+12>>2]=0;a[q+336+16>>0]=0;a[q+332>>0]=a[q+332>>0]&-16;r=+g[e+48>>2]-+g[d+48>>2]-(+g[h+48>>2]-+g[f+48>>2]);s=+g[e+52>>2]-+g[d+52>>2]-(+g[h+52>>2]-+g[f+52>>2]);t=+g[e+56>>2]-+g[d+56>>2]-(+g[h+56>>2]-+g[f+56>>2]);c[u+216>>2]=10180;g[u+216+36>>2]=999999984306749440.0;a[u+216+40>>0]=0;q=c[b+8>>2]|0;p=c[b+12>>2]|0;o=c[b+4>>2]|0;c[u+136>>2]=10248;c[u+136+4>>2]=0;c[u+136+8>>2]=1065353216;c[u+136+12>>2]=0;g[u+136+16>>2]=0.0;c[u+136+20>>2]=0;c[u+136+24>>2]=o;c[u+136+28>>2]=q;c[u+136+32>>2]=p;c[u+136+36>>2]=c[q+4>>2];c[u+136+40>>2]=c[p+4>>2];g[u+136+44>>2]=+ib[c[(c[q>>2]|0)+48>>2]&15](q);g[u+136+48>>2]=+ib[c[(c[p>>2]|0)+48>>2]&15](p);a[u+136+52>>0]=0;c[u+136+60>>2]=-1;c[u+136+72>>2]=1;c[u+136+76>>2]=1;g[u+128>>2]=999999984306749440.0;c[u>>2]=c[d>>2];c[u+4>>2]=c[d+4>>2];c[u+8>>2]=c[d+8>>2];c[u+12>>2]=c[d+12>>2];c[u+16>>2]=c[d+16>>2];c[u+16+4>>2]=c[d+16+4>>2];c[u+16+8>>2]=c[d+16+8>>2];c[u+16+12>>2]=c[d+16+12>>2];c[u+32>>2]=c[d+32>>2];c[u+32+4>>2]=c[d+32+4>>2];c[u+32+8>>2]=c[d+32+8>>2];c[u+32+12>>2]=c[d+32+12>>2];c[u+48>>2]=c[d+48>>2];c[u+48+4>>2]=c[d+48+4>>2];c[u+48+8>>2]=c[d+48+8>>2];c[u+48+12>>2]=c[d+48+12>>2];c[u+64>>2]=c[f>>2];c[u+64+4>>2]=c[f+4>>2];c[u+64+8>>2]=c[f+8>>2];c[u+64+12>>2]=c[f+12>>2];c[u+80>>2]=c[f+16>>2];c[u+80+4>>2]=c[f+16+4>>2];c[u+80+8>>2]=c[f+16+8>>2];c[u+80+12>>2]=c[f+16+12>>2];c[u+96>>2]=c[f+32>>2];c[u+96+4>>2]=c[f+32+4>>2];c[u+96+8>>2]=c[f+32+8>>2];c[u+96+12>>2]=c[f+32+12>>2];c[u+112>>2]=c[f+48>>2];c[u+112+4>>2]=c[f+48+4>>2];c[u+112+8>>2]=c[f+48+8>>2];c[u+112+12>>2]=c[f+48+12>>2];qc(u+136|0,u,u+216|0,0,0);p=(a[u+216+40>>0]|0)==0;q=u+216+20|0;c[u+264>>2]=c[q>>2];c[u+264+4>>2]=c[q+4>>2];c[u+264+8>>2]=c[q+8>>2];c[u+264+12>>2]=c[q+12>>2];if(p){i=0;l=u;return i|0}n=+g[u+216+36>>2];k=+g[u+216+16>>2];b=c[u+216+12>>2]|0;m=c[u+216+8>>2]|0;o=c[u+216+4>>2]|0;do if(n>1.0000000474974513e-03){p=0;k=0.0;while(1){if(p>>>0>31){b=0;p=13;break}w=r*(c[j>>2]=o,+g[j>>2]);w=s*(c[j>>2]=m,+g[j>>2])+w;v=k;k=k-n/(t*(c[j>>2]=b,+g[j>>2])+w);if(!(!(k<=v)&(!(k<0.0)&!(k>1.0)))){b=0;p=13;break}Eb[c[c[i>>2]>>2]&31](i,k);w=1.0-k;g[u+48>>2]=w*+g[d+48>>2]+k*+g[e+48>>2];g[u+52>>2]=w*+g[d+52>>2]+k*+g[e+52>>2];g[u+56>>2]=w*+g[d+56>>2]+k*+g[e+56>>2];g[u+112>>2]=w*+g[f+48>>2]+k*+g[h+48>>2];g[u+116>>2]=w*+g[f+52>>2]+k*+g[h+52>>2];g[u+120>>2]=w*+g[f+56>>2]+k*+g[h+56>>2];qc(u+136|0,u,u+216|0,0,0);if(!(a[u+216+40>>0]|0)){b=0;p=13;break}n=+g[u+216+36>>2];if(n<0.0){p=8;break}c[u+264>>2]=c[q>>2];c[u+264+4>>2]=c[q+4>>2];c[u+264+8>>2]=c[q+8>>2];c[u+264+12>>2]=c[q+12>>2];b=c[u+216+12>>2]|0;m=c[u+216+8>>2]|0;o=c[u+216+4>>2]|0;if(!(n>1.0000000474974513e-03)){p=10;break}else p=p+1|0}if((p|0)==8){g[i+164>>2]=k;e=c[u+216+8>>2]|0;f=c[u+216+12>>2]|0;h=c[u+216+16>>2]|0;c[i+132>>2]=c[u+216+4>>2];c[i+136>>2]=e;c[i+140>>2]=f;c[i+144>>2]=h;c[i+148>>2]=c[q>>2];c[i+148+4>>2]=c[q+4>>2];c[i+148+8>>2]=c[q+8>>2];c[i+148+12>>2]=c[q+12>>2];i=1;l=u;return i|0}else if((p|0)==10){n=k;k=+g[u+216+16>>2];break}else if((p|0)==13){l=u;return b|0}}else n=0.0;while(0);w=r*(c[j>>2]=o,+g[j>>2]);w=s*(c[j>>2]=m,+g[j>>2])+w;if(t*(c[j>>2]=b,+g[j>>2])+w>=-+g[i+172>>2]){i=0;l=u;return i|0}g[i+164>>2]=n;c[i+132>>2]=o;c[i+136>>2]=m;c[i+140>>2]=b;g[i+144>>2]=k;c[i+148>>2]=c[u+264>>2];c[i+148+4>>2]=c[u+264+4>>2];c[i+148+8>>2]=c[u+264+8>>2];c[i+148+12>>2]=c[u+264+12>>2];i=1;l=u;return i|0}function fd(b,d,e,f,h,i,j,k,l,m,n,o,p){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;l=l|0;m=m|0;n=n|0;o=o|0;p=p|0;var q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0,z=0,A=0,B=0,C=0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0;A=N(c[l+24>>2]|0,m)|0;y=(a[d+44>>0]|0)!=0;B=c[d+56>>2]|0;if(!(y|(B|0)!=0)){l=0;return l|0}C=c[(o|0?l+12|0:l+8|0)>>2]|0;m=c[(o|0?l+20|0:l+16|0)>>2]|0;c[C+(A<<2)>>2]=c[n>>2];c[C+(A+1<<2)>>2]=c[n+4>>2];c[C+(A+2<<2)>>2]=c[n+8>>2];g[m+(A<<2)>>2]=-+g[n>>2];g[m+(A+1<<2)>>2]=-+g[n+4>>2];g[m+(A+2<<2)>>2]=-+g[n+8>>2];do if(!o){q=+g[b+1176>>2];if(!(a[b+1301>>0]|0)){t=q-+g[e+48>>2];w=+g[b+1180>>2]-+g[e+52>>2];x=+g[b+1184>>2]-+g[e+56>>2];v=+g[n+8>>2];s=+g[n+4>>2];u=+g[n>>2];C=c[l+12>>2]|0;g[C+(A<<2)>>2]=w*v-x*s;g[C+(A+1<<2)>>2]=x*u-t*v;g[C+(A+2<<2)>>2]=t*s-w*u;u=+g[b+1176>>2]-+g[f+48>>2];w=+g[b+1180>>2]-+g[f+52>>2];s=+g[b+1184>>2]-+g[f+56>>2];t=+g[n+8>>2];v=+g[n+4>>2];x=+g[n>>2];C=c[l+20>>2]|0;g[C+(A<<2)>>2]=-(w*t-s*v);g[C+(A+1<<2)>>2]=-(s*x-u*t);g[C+(A+2<<2)>>2]=-(u*v-w*x);break}I=q-+g[f+48>>2];G=+g[b+1180>>2]-+g[f+52>>2];E=+g[b+1184>>2]-+g[f+56>>2];H=+g[n>>2];F=+g[n+4>>2];D=+g[n+8>>2];K=+g[b+1112>>2]-+g[e+48>>2];s=+g[b+1116>>2]-+g[e+52>>2];t=+g[b+1120>>2]-+g[e+56>>2];r=+g[d+52>>2]-+g[d+48>>2];J=H*(H*K+F*s+D*t)+H*r-H*(I*H+G*F+E*D);q=F*(H*K+F*s+D*t)+F*r-F*(I*H+G*F+E*D);r=D*(H*K+F*s+D*t)+D*r-D*(I*H+G*F+E*D);w=+g[b+1272>>2];x=+g[b+1276>>2];u=D*(s-F*(H*K+F*s+D*t)+w*q)-F*(t-D*(H*K+F*s+D*t)+w*r);v=H*(t-D*(H*K+F*s+D*t)+w*r)-D*(K-H*(H*K+F*s+D*t)+w*J);t=F*(K-H*(H*K+F*s+D*t)+w*J)-H*(s-F*(H*K+F*s+D*t)+w*q);s=D*(G-F*(I*H+G*F+E*D)-x*q)-F*(E-D*(I*H+G*F+E*D)-x*r);r=H*(E-D*(I*H+G*F+E*D)-x*r)-D*(I-H*(I*H+G*F+E*D)-x*J);q=F*(I-H*(I*H+G*F+E*D)-x*J)-H*(G-F*(I*H+G*F+E*D)-x*q);if(!((p|0)!=0|(a[b+1280>>0]|0)==0)){u=w*u;v=w*v;t=w*t;s=x*s;r=x*r;q=x*q}C=(c[l+12>>2]|0)+(A<<2)|0;g[C>>2]=u;g[C+4>>2]=v;g[C+8>>2]=t;C=c[l+20>>2]|0;g[C+(A<<2)>>2]=-s;g[C+(A+1<<2)>>2]=-r;g[C+(A+2<<2)>>2]=-q}while(0);if(B|0?+g[d>>2]==+g[d+4>>2]:0){e=(c[l+28>>2]|0)+(A<<2)|0;g[e>>2]=0.0;q=0.0}else z=11;do if((z|0)==11){m=(c[l+28>>2]|0)+(A<<2)|0;g[m>>2]=0.0;if(!y){if(B|0){e=m;q=0.0;break}else i=1;return i|0}c[(c[l+32>>2]|0)+(A<<2)>>2]=c[d+28>>2];if(B|0){e=m;q=+g[m>>2];break}v=+g[d+8>>2];q=o|0?v:-v;r=+g[d+52>>2];s=+g[d>>2];t=+g[d+4>>2];u=+g[l>>2]*+g[d+32>>2];do if(!(s>t))if(!(s==t)){if(q/u<0.0)if(r>=s?s-q/u>r:0){q=(s-r)/(q/u);break}else{q=r<s?0.0:1.0;break}if(q/u>0.0)if(r<=t?t-q/u<r:0){q=(t-r)/(q/u);break}else{q=r>t?0.0:1.0;break}else q=0.0}else q=0.0;else q=1.0;while(0);g[m>>2]=q*v+ +g[m>>2];g[(c[l+36>>2]|0)+(A<<2)>>2]=-+g[d+12>>2];c[(c[l+40>>2]|0)+(A<<2)>>2]=c[d+12>>2];C=1;return C|0}while(0);K=+g[l>>2]*+g[d+32>>2]*+g[d+48>>2];g[e>>2]=q+(o|0?-K:K);c[(c[l+32>>2]|0)+(A<<2)>>2]=c[d+36>>2];if(+g[d>>2]==+g[d+4>>2]){g[(c[l+36>>2]|0)+(A<<2)>>2]=-3402823466385288598117041.0e14;g[(c[l+40>>2]|0)+(A<<2)>>2]=3402823466385288598117041.0e14;C=1;return C|0}g[(c[l+36>>2]|0)+(A<<2)>>2]=(B|0)==1?0.0:-3402823466385288598117041.0e14;g[(c[l+40>>2]|0)+(A<<2)>>2]=(B|0)==1?3402823466385288598117041.0e14:0.0;v=+g[d+40>>2];if(!(v>0.0)){C=1;return C|0}if(o|0){K=+g[n>>2];r=+g[n+4>>2];q=+g[n+8>>2];s=q;t=r;u=K;i=k;r=+g[j>>2]*K+ +g[j+4>>2]*r;q=+g[j+8>>2]*q}else{K=+g[n>>2];r=+g[n+4>>2];q=+g[n+8>>2];s=q;t=r;u=K;r=+g[h>>2]*K+ +g[h+4>>2]*r;q=+g[h+8>>2]*q}q=r+q-(u*+g[i>>2]+t*+g[i+4>>2]+s*+g[i+8>>2]);if((B|0)==1){if(!(q<0.0)){C=1;return C|0}if(!(+g[e>>2]<-(v*q))){C=1;return C|0}g[e>>2]=-(v*q);C=1;return C|0}else{if(!(q>0.0)){C=1;return C|0}if(!(+g[e>>2]>-(v*q))){C=1;return C|0}g[e>>2]=-(v*q);C=1;return C|0}return 0}function gd(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0;if(!a)return;b=c[6493]|0;d=c[a+-4>>2]|0;j=a+-8+(d&-8)|0;do if(!(d&1)){e=c[a+-8>>2]|0;if(!(d&3))return;h=a+-8+(0-e)|0;g=e+(d&-8)|0;if(h>>>0<b>>>0)return;if((c[6494]|0)==(h|0)){b=c[j+4>>2]|0;if((b&3|0)!=3){i=h;b=g;break}c[6491]=g;c[j+4>>2]=b&-2;c[h+4>>2]=g|1;c[h+g>>2]=g;return}if(e>>>0<256){b=c[h+8>>2]|0;a=c[h+12>>2]|0;if((a|0)==(b|0)){c[6489]=c[6489]&~(1<<(e>>>3));i=h;b=g;break}else{c[b+12>>2]=a;c[a+8>>2]=b;i=h;b=g;break}}f=c[h+24>>2]|0;b=c[h+12>>2]|0;do if((b|0)==(h|0)){b=c[h+16+4>>2]|0;if(!b){b=c[h+16>>2]|0;if(!b){b=0;break}else a=h+16|0}else a=h+16+4|0;while(1){e=b+20|0;d=c[e>>2]|0;if(!d){e=b+16|0;d=c[e>>2]|0;if(!d)break;else{b=d;a=e}}else{b=d;a=e}}c[a>>2]=0}else{i=c[h+8>>2]|0;c[i+12>>2]=b;c[b+8>>2]=i}while(0);if(f){a=c[h+28>>2]|0;if((c[26260+(a<<2)>>2]|0)==(h|0)){c[26260+(a<<2)>>2]=b;if(!b){c[6490]=c[6490]&~(1<<a);i=h;b=g;break}}else{c[((c[f+16>>2]|0)==(h|0)?f+16|0:f+20|0)>>2]=b;if(!b){i=h;b=g;break}}c[b+24>>2]=f;a=c[h+16>>2]|0;if(a|0){c[b+16>>2]=a;c[a+24>>2]=b}a=c[h+16+4>>2]|0;if(a){c[b+20>>2]=a;c[a+24>>2]=b;i=h;b=g}else{i=h;b=g}}else{i=h;b=g}}else{i=a+-8|0;b=d&-8;h=a+-8|0}while(0);if(h>>>0>=j>>>0)return;d=c[j+4>>2]|0;if(!(d&1))return;if(!(d&2)){if((c[6495]|0)==(j|0)){j=(c[6492]|0)+b|0;c[6492]=j;c[6495]=i;c[i+4>>2]=j|1;if((i|0)!=(c[6494]|0))return;c[6494]=0;c[6491]=0;return}if((c[6494]|0)==(j|0)){j=(c[6491]|0)+b|0;c[6491]=j;c[6494]=h;c[i+4>>2]=j|1;c[h+j>>2]=j;return}f=(d&-8)+b|0;do if(d>>>0<256){a=c[j+8>>2]|0;b=c[j+12>>2]|0;if((b|0)==(a|0)){c[6489]=c[6489]&~(1<<(d>>>3));break}else{c[a+12>>2]=b;c[b+8>>2]=a;break}}else{g=c[j+24>>2]|0;b=c[j+12>>2]|0;do if((b|0)==(j|0)){b=c[j+16+4>>2]|0;if(!b){b=c[j+16>>2]|0;if(!b){a=0;break}else a=j+16|0}else a=j+16+4|0;while(1){e=b+20|0;d=c[e>>2]|0;if(!d){e=b+16|0;d=c[e>>2]|0;if(!d)break;else{b=d;a=e}}else{b=d;a=e}}c[a>>2]=0;a=b}else{a=c[j+8>>2]|0;c[a+12>>2]=b;c[b+8>>2]=a;a=b}while(0);if(g|0){b=c[j+28>>2]|0;if((c[26260+(b<<2)>>2]|0)==(j|0)){c[26260+(b<<2)>>2]=a;if(!a){c[6490]=c[6490]&~(1<<b);break}}else{c[((c[g+16>>2]|0)==(j|0)?g+16|0:g+20|0)>>2]=a;if(!a)break}c[a+24>>2]=g;b=c[j+16>>2]|0;if(b|0){c[a+16>>2]=b;c[b+24>>2]=a}b=c[j+16+4>>2]|0;if(b|0){c[a+20>>2]=b;c[b+24>>2]=a}}}while(0);c[i+4>>2]=f|1;c[h+f>>2]=f;if((i|0)==(c[6494]|0)){c[6491]=f;return}}else{c[j+4>>2]=d&-2;c[i+4>>2]=b|1;c[h+b>>2]=b;f=b}d=f>>>3;if(f>>>0<256){b=c[6489]|0;if(!(b&1<<d)){c[6489]=b|1<<d;b=25996+(d<<1<<2)|0;a=25996+(d<<1<<2)+8|0}else{b=c[25996+(d<<1<<2)+8>>2]|0;a=25996+(d<<1<<2)+8|0}c[a>>2]=i;c[b+12>>2]=i;c[i+8>>2]=b;c[i+12>>2]=25996+(d<<1<<2);return}b=f>>>8;if(b)if(f>>>0>16777215)e=31;else{e=b<<((b+1048320|0)>>>16&8)<<(((b<<((b+1048320|0)>>>16&8))+520192|0)>>>16&4);e=14-(((b<<((b+1048320|0)>>>16&8))+520192|0)>>>16&4|(b+1048320|0)>>>16&8|(e+245760|0)>>>16&2)+(e<<((e+245760|0)>>>16&2)>>>15)|0;e=f>>>(e+7|0)&1|e<<1}else e=0;b=26260+(e<<2)|0;c[i+28>>2]=e;c[i+20>>2]=0;c[i+16>>2]=0;a=c[6490]|0;d=1<<e;a:do if(!(a&d)){c[6490]=a|d;c[b>>2]=i;c[i+24>>2]=b;c[i+12>>2]=i;c[i+8>>2]=i}else{b=c[b>>2]|0;b:do if((c[b+4>>2]&-8|0)!=(f|0)){e=f<<((e|0)==31?0:25-(e>>>1)|0);while(1){d=b+16+(e>>>31<<2)|0;a=c[d>>2]|0;if(!a)break;if((c[a+4>>2]&-8|0)==(f|0)){b=a;break b}else{e=e<<1;b=a}}c[d>>2]=i;c[i+24>>2]=b;c[i+12>>2]=i;c[i+8>>2]=i;break a}while(0);h=b+8|0;j=c[h>>2]|0;c[j+12>>2]=i;c[h>>2]=i;c[i+8>>2]=j;c[i+12>>2]=b;c[i+24>>2]=0}while(0);j=(c[6497]|0)+-1|0;c[6497]=j;if(j|0)return;b=26412;while(1){b=c[b>>2]|0;if(!b)break;else b=b+8|0}c[6497]=-1;return}function hd(a,b,d,e,f,g,h){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;var i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0;j=c[d+8>>2]|0;if(!j){h=0;return h|0}i=0;D=j;do{if((c[D+20>>2]|0)>(c[a+100>>2]|0)){B=c[D+12>>2]|0;w=c[B+88>>2]|0;x=w-(c[d+88>>2]|0)|0;z=c[B+92>>2]|0;A=z-(c[d+92>>2]|0)|0;B=c[B+96>>2]|0;C=B-(c[d+96>>2]|0)|0;k=Iq(c[g>>2]|0,c[g+4>>2]|0,x|0,((x|0)<0)<<31>>31|0)|0;p=y;j=Iq(c[g+8>>2]|0,c[g+8+4>>2]|0,A|0,((A|0)<0)<<31>>31|0)|0;p=_t(j|0,y|0,k|0,p|0)|0;k=y;j=Iq(c[g+16>>2]|0,c[g+16+4>>2]|0,C|0,((C|0)<0)<<31>>31|0)|0;j=_t(p|0,k|0,j|0,y|0)|0;k=y;p=Iq(c[f>>2]|0,c[f+4>>2]|0,x|0,((x|0)<0)<<31>>31|0)|0;v=y;o=Iq(c[f+8>>2]|0,c[f+8+4>>2]|0,A|0,((A|0)<0)<<31>>31|0)|0;v=_t(o|0,y|0,p|0,v|0)|0;p=y;o=Iq(c[f+16>>2]|0,c[f+16+4>>2]|0,C|0,((C|0)<0)<<31>>31|0)|0;o=_t(v|0,p|0,o|0,y|0)|0;p=y;if((k|0)>0|(k|0)==0&j>>>0>0){l=1;m=-1;v=j}else{v=Nt(0,0,j|0,k|0)|0;l=((j|0)!=0|(k|0)!=0)<<31>>31;m=((j|0)!=0|(k|0)!=0)&1;v=(j|0)!=0|(k|0)!=0?v:0;k=(j|0)!=0|(k|0)!=0?y:0}if(!((p|0)>0|(p|0)==0&o>>>0>0)){j=Nt(0,0,o|0,p|0)|0;j=(o|0)!=0|(p|0)!=0?j:0;n=(o|0)!=0|(p|0)!=0?y:0;if(!((((o|0)!=0|(p|0)!=0?m:l)|0)==0&((j|0)==0&(n|0)==0))){l=(o|0)!=0|(p|0)!=0?m:l;o=j;q=8}}else{n=p;q=8}a:do if((q|0)==8){q=0;if(!i){c[h>>2]=v;c[h+4>>2]=k;c[h+8>>2]=o;c[h+8+4>>2]=n;c[h+16>>2]=l;i=D;break}j=c[h+16>>2]|0;if((l|0)==(j|0)){if(l|0){p=c[h+8>>2]|0;s=c[h+8+4>>2]|0;m=Iq(p|0,0,v|0,0)|0;j=y;t=Iq(s|0,0,v|0,0)|0;r=y;p=Iq(p|0,0,k|0,0)|0;q=y;s=Iq(s|0,0,k|0,0)|0;G=y;p=_t(t|0,0,p|0,0)|0;t=y;G=_t(r|0,0,s|0,G|0)|0;q=_t(G|0,y|0,q|0,0)|0;t=_t(q|0,y|0,t|0,0)|0;q=y;j=_t(0,p|0,m|0,j|0)|0;m=y;p=_t(t|0,q|0,(m>>>0<p>>>0|(m|0)==(p|0)&j>>>0<0)&1|0,0)|0;q=y;t=c[h>>2]|0;G=c[h+4>>2]|0;s=Iq(t|0,0,o|0,0)|0;r=y;E=Iq(G|0,0,o|0,0)|0;H=y;t=Iq(t|0,0,n|0,0)|0;u=y;G=Iq(G|0,0,n|0,0)|0;F=y;t=_t(E|0,0,t|0,0)|0;E=y;F=_t(H|0,0,G|0,F|0)|0;u=_t(F|0,y|0,u|0,0)|0;E=_t(u|0,y|0,E|0,0)|0;u=y;r=_t(0,t|0,s|0,r|0)|0;s=y;t=_t(E|0,u|0,(s>>>0<t>>>0|(s|0)==(t|0)&r>>>0<0)&1|0,0)|0;u=y;if(!(q>>>0<u>>>0|(q|0)==(u|0)&p>>>0<t>>>0))if(q>>>0>u>>>0|(q|0)==(u|0)&p>>>0>t>>>0)j=1;else j=m>>>0<s>>>0|(m|0)==(s|0)&j>>>0<r>>>0?-1:(m>>>0>s>>>0|(m|0)==(s|0)&j>>>0>r>>>0)&1;else j=-1;j=N(j,l)|0;q=17}}else{j=l-j|0;q=17}do if((q|0)==17){q=0;if((j|0)>=0)if(!j)break;else break a;else{c[h>>2]=v;c[h+4>>2]=k;c[h+8>>2]=o;c[h+8+4>>2]=n;c[h+16>>2]=l;i=D;break a}}while(0);j=(c[i+4>>2]|0)==(D|0);if((c[i>>2]|0)==(D|0))if(j){H=c[e+8>>2]|0;E=N(H,A)|0;u=c[e+4>>2]|0;E=E-(N(u,C)|0)|0;G=c[e>>2]|0;H=(N(G,C)|0)-(N(H,x)|0)|0;G=(N(u,x)|0)-(N(G,A)|0)|0;u=c[i+12>>2]|0;j=c[(c[D+8>>2]|0)+12>>2]|0;C=c[j+88>>2]|0;x=(c[u+88>>2]|0)-C|0;v=c[j+92>>2]|0;A=(c[u+92>>2]|0)-v|0;j=c[j+96>>2]|0;u=(c[u+96>>2]|0)-j|0;F=(N(B-j|0,A)|0)-(N(u,z-v|0)|0)|0;j=(N(u,w-C|0)|0)-(N(B-j|0,x)|0)|0;C=(N(z-v|0,x)|0)-(N(A,w-C|0)|0)|0;E=Iq(F|0,((F|0)<0)<<31>>31|0,E|0,((E|0)<0)<<31>>31|0)|0;F=y;H=Iq(j|0,((j|0)<0)<<31>>31|0,H|0,((H|0)<0)<<31>>31|0)|0;j=y;G=Iq(C|0,((C|0)<0)<<31>>31|0,G|0,((G|0)<0)<<31>>31|0)|0;G=_t(E|0,F|0,G|0,y|0)|0;j=_t(G|0,y|0,H|0,j|0)|0;H=y;j=(H|0)>0|(H|0)==0&j>>>0>0?2:1}else j=2;else j=j&1;i=(j|0)==2^b?i:D}while(0);j=c[d+8>>2]|0}D=c[D>>2]|0}while((D|0)!=(j|0));return i|0}function id(b){b=b|0;var d=0.0,e=0,f=0,h=0,i=0,j=0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0,r=0;q=l;l=l+192|0;if(!(sb[c[(c[b>>2]|0)+20>>2]&127](b)|0)){l=q;return}i=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Db[c[(c[i>>2]|0)+100>>2]&255](i);i=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Ib[c[(c[i>>2]|0)+8>>2]&127](q+80|0,i);i=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;if(((sb[c[(c[i>>2]|0)+56>>2]&127](i)|0)&8|0?(e=c[b+24>>2]|0,e|0):0)?(j=sb[c[(c[e>>2]|0)+36>>2]&127](e)|0,(j|0)>0):0){f=0;do{h=c[b+24>>2]|0;h=ub[c[(c[h>>2]|0)+40>>2]&31](h,f)|0;i=c[h+780>>2]|0;if((i|0)>0){e=0;do{r=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Ob[c[(c[r>>2]|0)+40>>2]&0](r,h+4+(e*192|0)+32|0,h+4+(e*192|0)+64|0,+g[h+4+(e*192|0)+80>>2],c[h+4+(e*192|0)+156>>2]|0,q+80+96|0);e=e+1|0}while((e|0)!=(i|0))}f=f+1|0}while((f|0)!=(j|0))}r=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;if((sb[c[(c[r>>2]|0)+56>>2]&127](r)|0)&3|0?(c[b+8>>2]|0)>0:0){h=0;do{e=c[(c[b+16>>2]|0)+(h<<2)>>2]|0;if(!(c[e+204>>2]&32)){if(sb[c[(c[b>>2]|0)+20>>2]&127](b)|0?(r=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0,(sb[c[(c[r>>2]|0)+56>>2]&127](r)|0)&1|0):0){c[q+64>>2]=1053609165;c[q+64+4>>2]=1053609165;c[q+64+8>>2]=1053609165;g[q+64+12>>2]=0.0;switch(c[e+220>>2]|0){case 1:{c[q+64>>2]=c[q+80>>2];c[q+64+4>>2]=c[q+80+4>>2];c[q+64+8>>2]=c[q+80+8>>2];c[q+64+12>>2]=c[q+80+12>>2];break}case 2:{c[q+64>>2]=c[q+80+16>>2];c[q+64+4>>2]=c[q+80+16+4>>2];c[q+64+8>>2]=c[q+80+16+8>>2];c[q+64+12>>2]=c[q+80+16+12>>2];break}case 3:{c[q+64>>2]=c[q+80+32>>2];c[q+64+4>>2]=c[q+80+32+4>>2];c[q+64+8>>2]=c[q+80+32+8>>2];c[q+64+12>>2]=c[q+80+32+12>>2];break}case 4:{c[q+64>>2]=c[q+80+48>>2];c[q+64+4>>2]=c[q+80+48+4>>2];c[q+64+8>>2]=c[q+80+48+8>>2];c[q+64+12>>2]=c[q+80+48+12>>2];break}case 5:{c[q+64>>2]=c[q+80+64>>2];c[q+64+4>>2]=c[q+80+64+4>>2];c[q+64+8>>2]=c[q+80+64+8>>2];c[q+64+12>>2]=c[q+80+64+12>>2];break}default:{c[q+64>>2]=1050253722;c[q+64+4>>2]=1050253722;c[q+64+8>>2]=1050253722;g[q+64+12>>2]=0.0}}if(c[e+204>>2]&256|0){c[q+64>>2]=c[e+308>>2];c[q+64+4>>2]=c[e+308+4>>2];c[q+64+8>>2]=c[e+308+8>>2];c[q+64+12>>2]=c[e+308+12>>2]}Pb[c[(c[b>>2]|0)+28>>2]&127](b,e+4|0,c[e+192>>2]|0,q+64|0)}f=c[b+72>>2]|0;if(f|0?(sb[c[(c[f>>2]|0)+56>>2]&127](f)|0)&2|0:0){c[q+32>>2]=c[q+80+80>>2];c[q+32+4>>2]=c[q+80+80+4>>2];c[q+32+8>>2]=c[q+80+80+8>>2];c[q+32+12>>2]=c[q+80+80+12>>2];r=c[e+192>>2]|0;Pb[c[(c[r>>2]|0)+8>>2]&127](r,e+4|0,q+64|0,q+48|0);g[q+64>>2]=+g[q+64>>2]+-.019999999552965164;g[q+64+4>>2]=+g[q+64+4>>2]+-.019999999552965164;g[q+64+8>>2]=+g[q+64+8>>2]+-.019999999552965164;g[q+48>>2]=+g[q+48>>2]+.019999999552965164;g[q+48+4>>2]=+g[q+48+4>>2]+.019999999552965164;g[q+48+8>>2]=+g[q+48+8>>2]+.019999999552965164;do if((a[b+44>>0]|0?(c[e+252>>2]|0)==2:0)?(c[e+204>>2]&3|0)==0:0){r=c[e+192>>2]|0;Pb[c[(c[r>>2]|0)+8>>2]&127](r,e+68|0,q+16|0,q);d=+g[q+16>>2]+-.019999999552965164;g[q+16>>2]=d;k=+g[q+16+4>>2]+-.019999999552965164;g[q+16+4>>2]=k;m=+g[q+16+8>>2]+-.019999999552965164;g[q+16+8>>2]=m;n=+g[q>>2]+.019999999552965164;g[q>>2]=n;o=+g[q+4>>2]+.019999999552965164;g[q+4>>2]=o;p=+g[q+8>>2]+.019999999552965164;g[q+8>>2]=p;if(d<+g[q+64>>2])g[q+64>>2]=d;if(k<+g[q+64+4>>2])g[q+64+4>>2]=k;if(m<+g[q+64+8>>2])g[q+64+8>>2]=m;d=+g[q+16+12>>2];if(d<+g[q+64+12>>2])g[q+64+12>>2]=d;if(+g[q+48>>2]<n)g[q+48>>2]=n;if(+g[q+48+4>>2]<o)g[q+48+4>>2]=o;if(+g[q+48+8>>2]<p)g[q+48+8>>2]=p;d=+g[q+12>>2];if(!(+g[q+48+12>>2]<d))break;g[q+48+12>>2]=d}while(0);r=c[b+72>>2]|0;Pb[c[(c[r>>2]|0)+60>>2]&127](r,q+64|0,q+48|0,q+32|0)}}h=h+1|0}while((h|0)<(c[b+8>>2]|0))}l=q;return}function jd(d,e,f){d=d|0;e=e|0;f=f|0;var g=0,i=0,j=0,k=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0;t=l;l=l+32|0;g=sb[c[(c[d>>2]|0)+28>>2]&127](d)|0;c[e+20>>2]=g;c[e>>2]=0;if(!g){s=e+24|0;c[s>>2]=0;s=d+4|0;f=e+4|0;s=c[s>>2]|0;c[f>>2]=s;f=d+8|0;f=c[f>>2]|0;s=e+8|0;c[s>>2]=f;s=d+12|0;s=c[s>>2]|0;f=e+12|0;c[f>>2]=s;d=d+16|0;d=c[d>>2]|0;f=e+16|0;c[f>>2]=d;l=t;return 19968}s=wb[c[(c[f>>2]|0)+16>>2]&63](f,32,g)|0;g=c[s+8>>2]|0;c[e>>2]=ub[c[(c[f>>2]|0)+28>>2]&31](f,g)|0;r=sb[c[(c[d>>2]|0)+28>>2]&127](d)|0;a:do if((r|0)>0){q=0;while(1){Xb[c[(c[d>>2]|0)+16>>2]&3](d,t+28|0,t+4|0,t+16|0,t+8|0,t+24|0,t+20|0,t,t+12|0,q);i=c[t>>2]|0;c[g+24>>2]=i;c[g+28>>2]=c[t+4>>2];j=g+12|0;m=g+16|0;p=g+4|0;c[g>>2]=0;c[g+4>>2]=0;c[g+8>>2]=0;c[g+12>>2]=0;c[g+16>>2]=0;c[g+20>>2]=0;switch(c[t+12>>2]|0){case 2:{if(i|0){j=wb[c[(c[f>>2]|0)+16>>2]&63](f,4,i*3|0)|0;k=c[j+8>>2]|0;c[g+8>>2]=ub[c[(c[f>>2]|0)+28>>2]&31](f,k)|0;if((c[t>>2]|0)>0){m=c[t+24>>2]|0;i=0;do{n=m+(N(c[t+20>>2]|0,i)|0)|0;o=i*3|0;c[k+(o<<2)>>2]=c[n>>2];c[k+(o+1<<2)>>2]=c[n+4>>2];c[k+(o+2<<2)>>2]=c[n+8>>2];i=i+1|0}while((i|0)<(c[t>>2]|0))}Tb[c[(c[f>>2]|0)+20>>2]&31](f,j,19849,1497453121,c[j+8>>2]|0)}break}case 3:{if(i|0){n=wb[c[(c[f>>2]|0)+16>>2]&63](f,8,i)|0;o=c[n+8>>2]|0;c[j>>2]=ub[c[(c[f>>2]|0)+28>>2]&31](f,o)|0;j=c[t>>2]|0;if((j|0)>0){k=c[t+24>>2]|0;m=c[t+20>>2]|0;i=0;do{u=k+(N(m,i)|0)|0;b[o+(i<<3)>>1]=b[u>>1]|0;b[o+(i<<3)+2>>1]=b[u+2>>1]|0;b[o+(i<<3)+4>>1]=b[u+4>>1]|0;a[o+(i<<3)+6>>0]=0;a[o+(i<<3)+7>>0]=0;i=i+1|0}while((i|0)!=(j|0))}Tb[c[(c[f>>2]|0)+20>>2]&31](f,n,19864,1497453121,c[n+8>>2]|0)}break}case 5:{if(i|0){j=wb[c[(c[f>>2]|0)+16>>2]&63](f,4,i)|0;k=c[j+8>>2]|0;c[m>>2]=ub[c[(c[f>>2]|0)+28>>2]&31](f,k)|0;if((c[t>>2]|0)>0){i=0;do{u=(c[t+24>>2]|0)+(N(c[t+20>>2]|0,i)|0)|0;a[k+(i<<2)>>0]=a[u>>0]|0;a[k+(i<<2)+1>>0]=a[u+1>>0]|0;a[k+(i<<2)+2>>0]=a[u+2>>0]|0;a[k+(i<<2)+3>>0]=0;i=i+1|0}while((i|0)<(c[t>>2]|0))}Tb[c[(c[f>>2]|0)+20>>2]&31](f,j,19891,1497453121,c[j+8>>2]|0)}break}default:{}}switch(c[t+16>>2]|0){case 0:{i=c[t+4>>2]|0;if(i|0){j=wb[c[(c[f>>2]|0)+16>>2]&63](f,16,i)|0;k=c[j+8>>2]|0;c[g>>2]=ub[c[(c[f>>2]|0)+28>>2]&31](f,k)|0;m=c[t+4>>2]|0;if((m|0)>0){n=c[t+28>>2]|0;o=c[t+8>>2]|0;i=0;do{u=n+(N(o,i)|0)|0;c[k+(i<<4)>>2]=c[u>>2];c[k+(i<<4)+4>>2]=c[u+4>>2];c[k+(i<<4)+8>>2]=c[u+8>>2];i=i+1|0}while((i|0)!=(m|0))}Tb[c[(c[f>>2]|0)+20>>2]&31](f,j,19914,1497453121,c[j+8>>2]|0)}break}case 1:{i=c[t+4>>2]|0;if(i|0){n=wb[c[(c[f>>2]|0)+16>>2]&63](f,32,i)|0;o=c[n+8>>2]|0;c[p>>2]=ub[c[(c[f>>2]|0)+28>>2]&31](f,o)|0;j=c[t+4>>2]|0;if((j|0)>0){k=c[t+28>>2]|0;m=c[t+8>>2]|0;i=0;do{u=k+(N(m,i)|0)|0;h[o+(i<<5)>>3]=+h[u>>3];h[o+(i<<5)+8>>3]=+h[u+8>>3];h[o+(i<<5)+16>>3]=+h[u+16>>3];i=i+1|0}while((i|0)!=(j|0))}Tb[c[(c[f>>2]|0)+20>>2]&31](f,n,19933,1497453121,c[n+8>>2]|0)}break}default:{}}Ib[c[(c[d>>2]|0)+24>>2]&127](d,q);q=q+1|0;if((q|0)==(r|0)){g=f;break a}else g=g+32|0}}else g=f;while(0);Tb[c[(c[g>>2]|0)+20>>2]&31](f,s,19953,1497453121,c[s+8>>2]|0);u=e+24|0;c[u>>2]=0;u=d+4|0;f=e+4|0;u=c[u>>2]|0;c[f>>2]=u;f=d+8|0;f=c[f>>2]|0;u=e+8|0;c[u>>2]=f;u=d+12|0;u=c[u>>2]|0;f=e+12|0;c[f>>2]=u;f=d+16|0;f=c[f>>2]|0;u=e+16|0;c[u>>2]=f;l=t;return 19968}function kd(b,d){b=b|0;d=d|0;var e=0,f=0.0,h=0,i=0,k=0,m=0.0,n=0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0;n=l;l=l+16|0;c[b+252>>2]=2;c[b+372>>2]=0;c[b+372+4>>2]=0;c[b+372+8>>2]=0;c[b+372+12>>2]=0;c[b+372+16>>2]=0;c[b+372+20>>2]=0;c[b+372+24>>2]=0;c[b+372+28>>2]=0;c[b+604>>2]=1065353216;c[b+608>>2]=1065353216;c[b+612>>2]=1065353216;g[b+616>>2]=0.0;c[b+408>>2]=1065353216;c[b+412>>2]=1065353216;c[b+416>>2]=1065353216;e=b+420|0;h=e+36|0;do{c[e>>2]=0;e=e+4|0}while((e|0)<(h|0));c[b+472>>2]=0;c[b+472+4>>2]=0;c[b+472+8>>2]=0;c[b+472+12>>2]=0;c[b+472+16>>2]=0;c[b+472+20>>2]=0;c[b+472+24>>2]=0;c[b+472+28>>2]=0;f=+g[d+92>>2];m=+g[d+96>>2];g[n+12>>2]=f;g[n+8>>2]=m;g[n+4>>2]=0.0;g[n>>2]=1.0;c[b+504>>2]=c[(f<0.0?n+4|0:f>1.0?n:n+12|0)>>2];g[n+4>>2]=0.0;g[n>>2]=1.0;c[b+508>>2]=c[(m<0.0?n+4|0:m>1.0?n:n+8|0)>>2];c[b+532>>2]=c[d+116>>2];c[b+536>>2]=c[d+120>>2];e=c[d+4>>2]|0;c[b+540>>2]=e;c[b+668>>2]=0;c[b+672>>2]=0;a[b+512>>0]=a[d+124>>0]|0;c[b+516>>2]=c[d+128>>2];c[b+520>>2]=c[d+132>>2];c[b+524>>2]=c[d+136>>2];c[b+528>>2]=c[d+140>>2];if(!e){c[b+4>>2]=c[d+8>>2];c[b+4+4>>2]=c[d+8+4>>2];c[b+4+8>>2]=c[d+8+8>>2];c[b+4+12>>2]=c[d+8+12>>2];c[b+20>>2]=c[d+24>>2];c[b+20+4>>2]=c[d+24+4>>2];c[b+20+8>>2]=c[d+24+8>>2];c[b+20+12>>2]=c[d+24+12>>2];c[b+36>>2]=c[d+40>>2];c[b+36+4>>2]=c[d+40+4>>2];c[b+36+8>>2]=c[d+40+8>>2];c[b+36+12>>2]=c[d+40+12>>2];c[b+52>>2]=c[d+56>>2];c[b+52+4>>2]=c[d+56+4>>2];c[b+52+8>>2]=c[d+56+8>>2];c[b+52+12>>2]=c[d+56+12>>2];e=b+20|0;h=b+36|0;i=b+52|0;k=b+4|0}else{Ib[c[(c[e>>2]|0)+8>>2]&127](e,b+4|0);e=b+20|0;h=b+36|0;i=b+52|0;k=b+4|0}c[b+68>>2]=c[k>>2];c[b+68+4>>2]=c[k+4>>2];c[b+68+8>>2]=c[k+8>>2];c[b+68+12>>2]=c[k+12>>2];c[b+84>>2]=c[e>>2];c[b+84+4>>2]=c[e+4>>2];c[b+84+8>>2]=c[e+8>>2];c[b+84+12>>2]=c[e+12>>2];c[b+100>>2]=c[h>>2];c[b+100+4>>2]=c[h+4>>2];c[b+100+8>>2]=c[h+8>>2];c[b+100+12>>2]=c[h+12>>2];c[b+116>>2]=c[i>>2];c[b+116+4>>2]=c[i+4>>2];c[b+116+8>>2]=c[i+8>>2];c[b+116+12>>2]=c[i+12>>2];c[b+132>>2]=0;c[b+132+4>>2]=0;c[b+132+8>>2]=0;c[b+132+12>>2]=0;c[b+132+16>>2]=0;c[b+132+20>>2]=0;c[b+132+24>>2]=0;c[b+132+28>>2]=0;c[b+228>>2]=c[d+100>>2];c[b+236>>2]=c[d+104>>2];c[b+240>>2]=c[d+108>>2];c[b+232>>2]=c[d+112>>2];Ib[c[(c[b>>2]|0)+8>>2]&127](b,c[d+72>>2]|0);e=c[6301]|0;c[6301]=e+1;c[b+568>>2]=e;f=+g[d>>2];e=c[b+204>>2]|0;if(f==0.0){c[b+204>>2]=e|1;m=0.0}else{c[b+204>>2]=e&-2;m=1.0/f}g[b+404>>2]=m;p=f*+g[b+444>>2];o=f*+g[b+448>>2];g[b+424>>2]=f*+g[b+440>>2];g[b+428>>2]=p;g[b+432>>2]=o;g[b+436>>2]=0.0;f=+g[d+76>>2];h=f!=0.0?(g[j>>2]=1.0/f,c[j>>2]|0):0;f=+g[d+80>>2];e=f!=0.0?(g[j>>2]=1.0/f,c[j>>2]|0):0;f=+g[d+84>>2];d=f!=0.0?(g[j>>2]=1.0/f,c[j>>2]|0):0;c[b+456>>2]=h;c[b+460>>2]=e;c[b+464>>2]=d;g[b+468>>2]=0.0;r=m*+g[b+412>>2];y=m*+g[b+416>>2];g[b+620>>2]=m*+g[b+408>>2];g[b+624>>2]=r;g[b+628>>2]=y;g[b+632>>2]=0.0;y=+g[b+4>>2];r=(c[j>>2]=h,+g[j>>2]);x=+g[b+8>>2];f=(c[j>>2]=e,+g[j>>2]);w=+g[b+12>>2];o=(c[j>>2]=d,+g[j>>2]);v=+g[b+20>>2];u=+g[b+24>>2];t=+g[b+28>>2];s=+g[b+36>>2];q=+g[b+40>>2];p=+g[b+44>>2];g[b+324>>2]=y*y*r+x*x*f+w*w*o;g[b+328>>2]=y*r*v+x*f*u+w*o*t;g[b+332>>2]=y*r*s+x*f*q+w*o*p;g[b+336>>2]=0.0;g[b+340>>2]=y*v*r+x*u*f+w*t*o;g[b+344>>2]=v*v*r+u*u*f+t*t*o;g[b+348>>2]=v*r*s+u*f*q+t*o*p;g[b+352>>2]=0.0;g[b+356>>2]=y*s*r+x*q*f+w*p*o;g[b+360>>2]=v*s*r+u*q*f+t*p*o;g[b+364>>2]=s*s*r+q*q*f+p*p*o;g[b+368>>2]=0.0;c[b+564>>2]=8;c[b+572>>2]=0;c[b+572+4>>2]=0;c[b+572+8>>2]=0;c[b+572+12>>2]=0;c[b+572+16>>2]=0;c[b+572+20>>2]=0;c[b+572+24>>2]=0;c[b+572+28>>2]=0;o=m*+g[b+412>>2];p=m*+g[b+416>>2];g[b+620>>2]=m*+g[b+408>>2];g[b+624>>2]=o;g[b+628>>2]=p;e=b+632|0;h=e+36|0;do{c[e>>2]=0;e=e+4|0}while((e|0)<(h|0));l=n;return}function ld(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0,j=0.0,k=0,m=0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0,C=0,D=0,E=0,F=0.0,G=0.0,H=0.0;E=l;l=l+48|0;j=+g[e>>2];g[E+32>>2]=j;w=+g[e+4>>2];g[E+28>>2]=w;x=+g[e+8>>2];g[E+24>>2]=x;C=c[e+12>>2]|0;y=+g[f>>2];g[E+20>>2]=y;z=+g[f+4>>2];g[E+16>>2]=z;A=+g[f+8>>2];g[E+12>>2]=A;D=c[f+12>>2]|0;do if((c[d+60>>2]|0)==2){h=c[d+48>>2]|0;fg(b+44|0,h)|0;i=c[b+48>>2]|0;if(i|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[b+48>>2]=h;c[b+56>>2]=(c[b+56>>2]|0)+-1;h=c[b+8>>2]|0;if(!h){c[6485]=(c[6485]|0)+1;h=ec(63)|0;if(!h)h=0;else{c[(h+4+15&-16)+-4>>2]=h;h=h+4+15&-16;j=+g[E+32>>2]}i=h;k=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(k|0))}else c[b+8>>2]=0;c[h+32>>2]=0;c[h+36>>2]=d;c[h+40>>2]=0;g[h>>2]=j;c[h+4>>2]=c[E+28>>2];c[h+8>>2]=c[E+24>>2];c[h+12>>2]=C;c[h+16>>2]=c[E+20>>2];c[h+20>>2]=c[E+16>>2];c[h+24>>2]=c[E+12>>2];c[h+28>>2]=D;ue(b+4|0,c[b+4>>2]|0,h);c[b+16>>2]=(c[b+16>>2]|0)+1;c[d+48>>2]=h;k=1}else{c[b+128>>2]=(c[b+128>>2]|0)+1;B=c[d+48>>2]|0;q=+g[B>>2];if(((((q<=y?(r=+g[B+16>>2],r>=j):0)?(s=+g[B+4>>2],s<=z):0)?(t=+g[B+20>>2],t>=w):0)?(u=+g[B+8>>2],u<=A):0)?(v=+g[B+24>>2],v>=x):0){H=+g[d+16>>2];G=+g[d+20>>2];F=+g[d+24>>2];p=+g[b+100>>2];n=(+g[d+32>>2]-H)*.5*p;o=p*(+g[d+36>>2]-G)*.5;p=p*(+g[d+40>>2]-F)*.5;n=j-H<0.0?-n:n;o=w-G<0.0?-o:o;p=x-F<0.0?-p:p;if(!(!(q<=j)|!(s<=w)|!(u<=x)|!(r>=y)|!(t>=z)|!(v>=A))){k=0;break}g[E+32>>2]=j+-.05000000074505806;g[E+28>>2]=w+-.05000000074505806;g[E+24>>2]=x+-.05000000074505806;g[E+20>>2]=y+.05000000074505806;g[E+16>>2]=z+.05000000074505806;g[E+12>>2]=A+.05000000074505806;g[(n>0.0?E+20|0:E+32|0)>>2]=(n>0.0?y+.05000000074505806:j+-.05000000074505806)+n;g[(o>0.0?E+16|0:E+28|0)>>2]=(o>0.0?z+.05000000074505806:w+-.05000000074505806)+o;g[(p>0.0?E+12|0:E+24|0)>>2]=(p>0.0?A+.05000000074505806:x+-.05000000074505806)+p;h=fg(b+4|0,B)|0;a:do if(h){m=c[b+12>>2]|0;if((m|0)<=-1){h=c[b+4>>2]|0;break}if(m){i=0;while(1){k=c[h+32>>2]|0;i=i+1|0;if(!k)break a;if((i|0)>=(m|0)){h=k;break}else h=k}}}else h=0;while(0);c[B>>2]=c[E+32>>2];c[B+4>>2]=c[E+28>>2];c[B+8>>2]=c[E+24>>2];c[B+12>>2]=C;c[B+16>>2]=c[E+20>>2];c[B+20>>2]=c[E+16>>2];c[B+24>>2]=c[E+12>>2];c[B+28>>2]=D;ue(b+4|0,h,B);c[b+132>>2]=(c[b+132>>2]|0)+1;k=1;break}h=fg(b+4|0,B)|0;b:do if(h){m=c[b+12>>2]|0;if((m|0)<=-1){h=c[b+4>>2]|0;break}if(m){i=0;while(1){k=c[h+32>>2]|0;i=i+1|0;if(!k)break b;if((i|0)>=(m|0)){h=k;break}else h=k}}}else h=0;while(0);g[B>>2]=j;g[B+4>>2]=w;g[B+8>>2]=x;c[B+12>>2]=C;g[B+16>>2]=y;g[B+20>>2]=z;g[B+24>>2]=A;c[B+28>>2]=D;ue(b+4|0,h,B);c[b+132>>2]=(c[b+132>>2]|0)+1;k=1}while(0);h=c[d+52>>2]|0;if(!h)h=b+84+(c[d+60>>2]<<2)|0;else h=h+56|0;c[h>>2]=c[d+56>>2];h=c[d+56>>2]|0;if(h|0)c[h+52>>2]=c[d+52>>2];c[d+16>>2]=c[e>>2];c[d+16+4>>2]=c[e+4>>2];c[d+16+8>>2]=c[e+8>>2];c[d+16+12>>2]=c[e+12>>2];c[d+32>>2]=c[f>>2];c[d+32+4>>2]=c[f+4>>2];c[d+32+8>>2]=c[f+8>>2];c[d+32+12>>2]=c[f+12>>2];h=c[b+104>>2]|0;c[d+60>>2]=h;c[d+52>>2]=0;c[d+56>>2]=c[b+84+(h<<2)>>2];i=c[b+84+(h<<2)>>2]|0;if(i|0)c[i+52>>2]=d;c[b+84+(h<<2)>>2]=d;if(!k){l=E;return}a[b+154>>0]=1;if(a[b+153>>0]|0){l=E;return}c[E>>2]=6572;c[E+4>>2]=b;Jd(b+44|0,c[b+44>>2]|0,c[d+48>>2]|0,E);Jd(b+4|0,c[b+4>>2]|0,c[d+48>>2]|0,E);l=E;return}function md(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0,L=0,M=0,N=0,O=0;h=l;l=l+240|0;if(!(c[b+16>>2]|0)){K=c[b+12>>2]|0;b=c[b+20>>2]|0;x=+g[d>>2];q=+g[d+4>>2];u=+g[d+8>>2];j=+g[d+16>>2];r=+g[d+20>>2];i=+g[d+24>>2];m=+g[d+32>>2];s=+g[d+36>>2];n=+g[d+40>>2];F=+g[d+48>>2];E=+g[d+52>>2];D=+g[d+56>>2];J=+g[e>>2];I=+g[e+16>>2];z=+g[e+32>>2];H=+g[e+4>>2];G=+g[e+20>>2];y=+g[e+36>>2];v=+g[e+8>>2];k=+g[e+24>>2];p=+g[e+40>>2];C=-+g[e+48>>2];B=-+g[e+52>>2];w=-+g[e+56>>2];d=c[(c[K>>2]|0)+64>>2]|0;A=-+g[b+52>>2];t=-+g[b+56>>2];o=-+g[b+60>>2];g[h+16>>2]=(x*J+j*I+m*z)*A+(x*H+j*G+m*y)*t+(x*v+j*k+m*p)*o;g[h+16+4>>2]=(q*J+r*I+s*z)*A+(q*H+r*G+s*y)*t+(q*v+r*k+s*p)*o;g[h+16+8>>2]=(u*J+i*I+n*z)*A+(u*H+i*G+n*y)*t+(u*v+i*k+n*p)*o;g[h+16+12>>2]=0.0;Mb[d&127](h+152|0,K,h+16|0);o=+g[h+152>>2];t=+g[h+152+4>>2];A=+g[h+152+8>>2];z=F*J+E*I+D*z+(J*C+I*B+z*w)+((x*J+j*I+m*z)*o+(q*J+r*I+s*z)*t+(u*J+i*I+n*z)*A);y=F*H+E*G+D*y+(H*C+G*B+y*w)+((x*H+j*G+m*y)*o+(q*H+r*G+s*y)*t+(u*H+i*G+n*y)*A);A=F*v+E*k+D*p+(v*C+k*B+p*w)+((x*v+j*k+m*p)*o+(q*v+r*k+s*p)*t+(u*v+i*k+n*p)*A);p=+g[b+52>>2];n=+g[b+56>>2];k=+g[b+60>>2];i=k*A+(p*z+n*y)-+g[b+68>>2];v=+g[e>>2];u=+g[e+4>>2];t=+g[e+8>>2];s=+g[e+16>>2];r=+g[e+20>>2];q=+g[e+24>>2];o=+g[e+32>>2];m=+g[e+36>>2];j=+g[e+40>>2];x=(z-p*i)*s+(y-n*i)*r+(A-k*i)*q+ +g[e+52>>2];w=(z-p*i)*o+(y-n*i)*m+(A-k*i)*j+ +g[e+56>>2];g[h+16>>2]=t*(A-k*i)+(v*(z-p*i)+u*(y-n*i))+ +g[e+48>>2];g[h+16+4>>2]=x;g[h+16+8>>2]=w;g[h+16+12>>2]=0.0;g[h>>2]=p*v+n*u+k*t;g[h+4>>2]=p*s+n*r+k*q;g[h+8>>2]=p*o+n*m+k*j;g[h+12>>2]=0.0;Nb[c[(c[f>>2]|0)+16>>2]&15](f,h,h+16|0,i);l=h;return}else{N=c[b+4>>2]|0;a[N+312>>0]=0;c[N>>2]=0;a[N+356>>0]=1;c[N+292>>2]=1566444395;c[N+296>>2]=1566444395;c[N+300>>2]=1566444395;g[N+304>>2]=0.0;c[N+336>>2]=0;c[N+336+4>>2]=0;c[N+336+8>>2]=0;c[N+336+12>>2]=0;a[N+336+16>>0]=0;a[N+332>>0]=a[N+332>>0]&-16;N=c[b+12>>2]|0;M=c[b+16>>2]|0;L=c[N+4>>2]|0;K=c[M+4>>2]|0;I=+ib[c[(c[N>>2]|0)+48>>2]&15](N);O=c[b+16>>2]|0;J=+ib[c[(c[O>>2]|0)+48>>2]&15](O);O=c[b+4>>2]|0;b=c[b+8>>2]|0;c[h+152>>2]=10248;c[h+152+4>>2]=0;c[h+152+8>>2]=1065353216;c[h+152+12>>2]=0;g[h+152+16>>2]=0.0;c[h+152+20>>2]=b;c[h+152+24>>2]=O;c[h+152+28>>2]=N;c[h+152+32>>2]=M;c[h+152+36>>2]=L;c[h+152+40>>2]=K;g[h+152+44>>2]=I;g[h+152+48>>2]=J;a[h+152+52>>0]=0;c[h+152+60>>2]=-1;c[h+152+72>>2]=1;c[h+152+76>>2]=1;g[h+16+128>>2]=999999984306749440.0;c[h+16>>2]=c[d>>2];c[h+16+4>>2]=c[d+4>>2];c[h+16+8>>2]=c[d+8>>2];c[h+16+12>>2]=c[d+12>>2];c[h+16+16>>2]=c[d+16>>2];c[h+16+16+4>>2]=c[d+16+4>>2];c[h+16+16+8>>2]=c[d+16+8>>2];c[h+16+16+12>>2]=c[d+16+12>>2];c[h+16+32>>2]=c[d+32>>2];c[h+16+32+4>>2]=c[d+32+4>>2];c[h+16+32+8>>2]=c[d+32+8>>2];c[h+16+32+12>>2]=c[d+32+12>>2];c[h+16+48>>2]=c[d+48>>2];c[h+16+48+4>>2]=c[d+48+4>>2];c[h+16+48+8>>2]=c[d+48+8>>2];c[h+16+48+12>>2]=c[d+48+12>>2];c[h+16+64>>2]=c[e>>2];c[h+16+64+4>>2]=c[e+4>>2];c[h+16+64+8>>2]=c[e+8>>2];c[h+16+64+12>>2]=c[e+12>>2];c[h+16+80>>2]=c[e+16>>2];c[h+16+80+4>>2]=c[e+16+4>>2];c[h+16+80+8>>2]=c[e+16+8>>2];c[h+16+80+12>>2]=c[e+16+12>>2];c[h+16+96>>2]=c[e+32>>2];c[h+16+96+4>>2]=c[e+32+4>>2];c[h+16+96+8>>2]=c[e+32+8>>2];c[h+16+96+12>>2]=c[e+32+12>>2];c[h+16+112>>2]=c[e+48>>2];c[h+16+112+4>>2]=c[e+48+4>>2];c[h+16+112+8>>2]=c[e+48+8>>2];c[h+16+112+12>>2]=c[e+48+12>>2];qc(h+152|0,h+16|0,f,0,0);l=h;return}}function nd(b,d,e,f,h,i){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=+i;var k=0,l=0,m=0.0,n=0,o=0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0,B=0;B=c[b+88>>2]|0;if((B|0)==(c[b+92>>2]|0)?(o=(B|0)==0?1:B<<1,(B|0)<(o|0)):0){if(!o){k=0;n=B}else{c[6485]=(c[6485]|0)+1;k=ec((o*152|3)+16|0)|0;if(!k)k=0;else{c[(k+4+15&-16)+-4>>2]=k;k=k+4+15&-16}n=c[b+88>>2]|0}if((n|0)>0){l=0;do{$g(k+(l*152|0)|0,(c[b+96>>2]|0)+(l*152|0)|0,152)|0;l=l+1|0}while((l|0)!=(n|0))}l=c[b+96>>2]|0;if(l|0){if(a[b+100>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[l+-4>>2]|0)}c[b+96>>2]=0}a[b+100>>0]=1;c[b+96>>2]=k;c[b+92>>2]=o;k=c[b+88>>2]|0}else k=B;c[b+88>>2]=k+1;A=c[b+96>>2]|0;c[A+(B*152|0)+140>>2]=h;c[A+(B*152|0)+16>>2]=0;c[A+(B*152|0)+16+4>>2]=0;c[A+(B*152|0)+16+8>>2]=0;c[A+(B*152|0)+16+12>>2]=0;g[A+(B*152|0)+48>>2]=-0.0;g[A+(B*152|0)+52>>2]=-0.0;g[A+(B*152|0)+56>>2]=-0.0;g[A+(B*152|0)+60>>2]=0.0;b=c[b+16>>2]|0;o=c[b+(e*244|0)+240>>2]|0;h=c[b+(f*244|0)+240>>2]|0;c[A+(B*152|0)+144>>2]=e;c[A+(B*152|0)+148>>2]=f;g[A+(B*152|0)+104>>2]=i;c[A+(B*152|0)+132>>2]=0;g[A+(B*152|0)+100>>2]=0.0;g[A+(B*152|0)+96>>2]=0.0;x=-+g[d>>2];y=-+g[d+4>>2];z=-+g[d+8>>2];g[A+(B*152|0)>>2]=x;g[A+(B*152|0)+4>>2]=y;g[A+(B*152|0)+8>>2]=z;g[A+(B*152|0)+12>>2]=0.0;if(o|0){k=(g[j>>2]=(+g[o+324>>2]*x+ +g[o+328>>2]*y+ +g[o+332>>2]*z)*+g[o+604>>2],c[j>>2]|0);l=(g[j>>2]=(+g[o+340>>2]*x+ +g[o+344>>2]*y+ +g[o+348>>2]*z)*+g[o+608>>2],c[j>>2]|0);n=(g[j>>2]=(+g[o+356>>2]*x+ +g[o+360>>2]*y+ +g[o+364>>2]*z)*+g[o+612>>2],c[j>>2]|0)}else{k=0;l=0;n=0}c[A+(B*152|0)+64>>2]=k;c[A+(B*152|0)+68>>2]=l;c[A+(B*152|0)+72>>2]=n;g[A+(B*152|0)+76>>2]=0.0;u=+g[d>>2];v=+g[d+4>>2];w=+g[d+8>>2];d=c[d+12>>2]|0;g[A+(B*152|0)+32>>2]=u;g[A+(B*152|0)+36>>2]=v;g[A+(B*152|0)+40>>2]=w;c[A+(B*152|0)+44>>2]=d;if(h|0){k=(g[j>>2]=(u*+g[h+324>>2]+v*+g[h+328>>2]+w*+g[h+332>>2])*+g[h+604>>2],c[j>>2]|0);l=(g[j>>2]=(u*+g[h+340>>2]+v*+g[h+344>>2]+w*+g[h+348>>2])*+g[h+608>>2],c[j>>2]|0);n=(g[j>>2]=(u*+g[h+356>>2]+v*+g[h+360>>2]+w*+g[h+364>>2])*+g[h+612>>2],c[j>>2]|0)}else{k=0;l=0;n=0}c[A+(B*152|0)+80>>2]=k;c[A+(B*152|0)+84>>2]=l;c[A+(B*152|0)+88>>2]=n;g[A+(B*152|0)+92>>2]=0.0;if(o|0){m=+g[o+324>>2]*x+ +g[o+328>>2]*y+ +g[o+332>>2]*z;p=+g[o+340>>2]*x+ +g[o+344>>2]*y+ +g[o+348>>2]*z;q=+g[o+356>>2]*x+ +g[o+360>>2]*y+ +g[o+364>>2]*z}else{m=0.0;p=0.0;q=0.0}if(h|0){r=+g[h+324>>2]*u+ +g[h+328>>2]*v+ +g[h+332>>2]*w;s=u*+g[h+340>>2]+v*+g[h+344>>2]+w*+g[h+348>>2];t=u*+g[h+356>>2]+v*+g[h+360>>2]+w*+g[h+364>>2]}else{r=0.0;s=0.0;t=0.0}s=1.0/(m*x+p*y+q*z+0.0+(r*u+s*v+t*w));g[A+(B*152|0)+108>>2]=s;if(o|0){p=+g[b+(e*244|0)+192>>2];q=+g[b+(e*244|0)+196>>2];r=+g[b+(e*244|0)+200>>2];m=(+g[b+(e*244|0)+176>>2]+ +g[b+(e*244|0)+208>>2])*0.0+(+g[b+(e*244|0)+180>>2]+ +g[b+(e*244|0)+212>>2])*0.0+(+g[b+(e*244|0)+184>>2]+ +g[b+(e*244|0)+216>>2])*0.0}else{p=0.0;q=0.0;r=0.0;m=0.0}m=m+(r*z+(q*y+p*x));if(!h){z=0.0;t=0.0;x=0.0;y=-0.0;z=u*z;v=v*t;z=v+z;x=w*x;z=x+z;z=y+z;z=m+z;z=0.0-z;z=s*z;f=A+(B*152|0)+112|0;g[f>>2]=z;f=A+(B*152|0)+116|0;g[f>>2]=0.0;z=-i;f=A+(B*152|0)+120|0;g[f>>2]=z;B=A+(B*152|0)+124|0;g[B>>2]=i;return}z=+g[b+(f*244|0)+192>>2];t=+g[b+(f*244|0)+196>>2];x=+g[b+(f*244|0)+200>>2];y=(+g[b+(f*244|0)+176>>2]+ +g[b+(f*244|0)+208>>2])*-0.0+(+g[b+(f*244|0)+180>>2]+ +g[b+(f*244|0)+212>>2])*-0.0+(+g[b+(f*244|0)+184>>2]+ +g[b+(f*244|0)+216>>2])*-0.0;z=u*z;v=v*t;z=v+z;x=w*x;z=x+z;z=y+z;z=m+z;z=0.0-z;z=s*z;f=A+(B*152|0)+112|0;g[f>>2]=z;f=A+(B*152|0)+116|0;g[f>>2]=0.0;z=-i;f=A+(B*152|0)+120|0;g[f>>2]=z;B=A+(B*152|0)+124|0;g[B>>2]=i;return}function od(a,b,d){a=a|0;b=b|0;d=+d;var e=0,f=0,h=0,i=0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0;i=l;l=l+256|0;e=c[b+212>>2]|0;if((e|0)>-1){b=e;l=i;return b|0}h=(c[b+252>>2]&2|0)==0;e=h?0:b;do if(!h){if(!(+g[e+404>>2]!=0.0)?(c[e+204>>2]&2|0)==0:0)break;h=c[a+8>>2]|0;uj(i|0,0,244)|0;a=Qe(a+4|0,i)|0;f=(c[b+252>>2]&2|0)==0;e=f?0:b;c[a+64>>2]=0;c[a+64+4>>2]=0;c[a+64+8>>2]=0;c[a+64+12>>2]=0;c[a+64+16>>2]=0;c[a+64+20>>2]=0;c[a+64+24>>2]=0;c[a+64+28>>2]=0;c[a+144>>2]=0;c[a+144+4>>2]=0;c[a+144+8>>2]=0;c[a+144+12>>2]=0;c[a+144+16>>2]=0;c[a+144+20>>2]=0;c[a+144+24>>2]=0;c[a+144+28>>2]=0;if(f){c[a>>2]=1065353216;c[a+4>>2]=0;c[a+4+4>>2]=0;c[a+4+8>>2]=0;c[a+4+12>>2]=0;c[a+20>>2]=1065353216;c[a+24>>2]=0;c[a+24+4>>2]=0;c[a+24+8>>2]=0;c[a+24+12>>2]=0;c[a+40>>2]=1065353216;c[a+44>>2]=0;c[a+44+4>>2]=0;c[a+44+8>>2]=0;c[a+44+12>>2]=0;c[a+44+16>>2]=0;c[a+240>>2]=0;c[a+128>>2]=0;c[a+128+4>>2]=0;c[a+128+8>>2]=0;c[a+128+12>>2]=0;c[a+96>>2]=1065353216;c[a+100>>2]=1065353216;c[a+104>>2]=1065353216;g[a+108>>2]=0.0;c[a+112>>2]=1065353216;c[a+116>>2]=1065353216;c[a+120>>2]=1065353216;g[a+124>>2]=0.0;e=a+176|0;f=e+60|0;do{c[e>>2]=0;e=e+4|0}while((e|0)<(f|0))}else{c[a>>2]=c[e+4>>2];c[a+4>>2]=c[e+4+4>>2];c[a+8>>2]=c[e+4+8>>2];c[a+12>>2]=c[e+4+12>>2];c[a+16>>2]=c[e+20>>2];c[a+16+4>>2]=c[e+20+4>>2];c[a+16+8>>2]=c[e+20+8>>2];c[a+16+12>>2]=c[e+20+12>>2];c[a+32>>2]=c[e+36>>2];c[a+32+4>>2]=c[e+36+4>>2];c[a+32+8>>2]=c[e+36+8>>2];c[a+32+12>>2]=c[e+36+12>>2];c[a+48>>2]=c[e+52>>2];c[a+48+4>>2]=c[e+52+4>>2];c[a+48+8>>2]=c[e+52+8>>2];c[a+48+12>>2]=c[e+52+12>>2];o=+g[e+404>>2];n=o*+g[e+412>>2];m=o*+g[e+416>>2];g[a+128>>2]=o*+g[e+408>>2];g[a+132>>2]=n;g[a+136>>2]=m;g[a+140>>2]=0.0;c[a+240>>2]=e;c[a+96>>2]=c[e+604>>2];c[a+96+4>>2]=c[e+604+4>>2];c[a+96+8>>2]=c[e+604+8>>2];c[a+96+12>>2]=c[e+604+12>>2];c[a+112>>2]=c[e+408>>2];c[a+112+4>>2]=c[e+408+4>>2];c[a+112+8>>2]=c[e+408+8>>2];c[a+112+12>>2]=c[e+408+12>>2];c[a+176>>2]=c[e+372>>2];c[a+176+4>>2]=c[e+372+4>>2];c[a+176+8>>2]=c[e+372+8>>2];c[a+176+12>>2]=c[e+372+12>>2];c[a+192>>2]=c[e+388>>2];c[a+192+4>>2]=c[e+388+4>>2];c[a+192+8>>2]=c[e+388+8>>2];c[a+192+12>>2]=c[e+388+12>>2];m=+g[e+404>>2];n=m*+g[e+476>>2]*d;o=m*+g[e+480>>2]*d;g[a+208>>2]=m*+g[e+472>>2]*d;g[a+212>>2]=n;g[a+216>>2]=o;g[a+220>>2]=0.0;o=+g[e+488>>2];n=+g[e+492>>2];m=+g[e+496>>2];k=(o*+g[e+328>>2]+n*+g[e+344>>2]+m*+g[e+360>>2])*d;j=(o*+g[e+332>>2]+n*+g[e+348>>2]+m*+g[e+364>>2])*d;g[a+224>>2]=(+g[e+324>>2]*o+ +g[e+340>>2]*n+ +g[e+356>>2]*m)*d;g[a+228>>2]=k;g[a+232>>2]=j}g[a+236>>2]=0.0;c[b+212>>2]=h;b=h;l=i;return b|0}while(0);e=c[a+188>>2]|0;if((e|0)>=0){b=e;l=i;return b|0}c[a+188>>2]=c[a+8>>2];uj(i|0,0,244)|0;e=Qe(a+4|0,i)|0;c[e+64>>2]=0;c[e+64+4>>2]=0;c[e+64+8>>2]=0;c[e+64+12>>2]=0;c[e+64+16>>2]=0;c[e+64+20>>2]=0;c[e+64+24>>2]=0;c[e+64+28>>2]=0;c[e+144>>2]=0;c[e+144+4>>2]=0;c[e+144+8>>2]=0;c[e+144+12>>2]=0;c[e+144+16>>2]=0;c[e+144+20>>2]=0;c[e+144+24>>2]=0;c[e+144+28>>2]=0;c[e>>2]=1065353216;c[e+4>>2]=0;c[e+4+4>>2]=0;c[e+4+8>>2]=0;c[e+4+12>>2]=0;c[e+20>>2]=1065353216;c[e+24>>2]=0;c[e+24+4>>2]=0;c[e+24+8>>2]=0;c[e+24+12>>2]=0;c[e+40>>2]=1065353216;c[e+44>>2]=0;c[e+44+4>>2]=0;c[e+44+8>>2]=0;c[e+44+12>>2]=0;c[e+44+16>>2]=0;c[e+240>>2]=0;c[e+128>>2]=0;c[e+128+4>>2]=0;c[e+128+8>>2]=0;c[e+128+12>>2]=0;c[e+96>>2]=1065353216;c[e+100>>2]=1065353216;c[e+104>>2]=1065353216;g[e+108>>2]=0.0;c[e+112>>2]=1065353216;c[e+116>>2]=1065353216;c[e+120>>2]=1065353216;g[e+124>>2]=0.0;e=e+176|0;f=e+64|0;do{c[e>>2]=0;e=e+4|0}while((e|0)<(f|0));b=c[a+188>>2]|0;l=i;return b|0}function pd(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0,j=0,k=0.0,l=0.0,m=0.0,n=0.0,o=0,p=0,q=0.0,r=0.0,s=0.0;if(a[b+165>>0]|0){h=c[b+88>>2]|0;a:do if((h|0)>0&e){f=c[b+96>>2]|0;k=+g[d>>2];l=+g[d+4>>2];m=+g[d+8>>2];n=+g[b+168>>2];e=0;while(1){s=+g[f+(e<<4)>>2]-k;r=+g[f+(e<<4)+4>>2]-l;q=+g[f+(e<<4)+8>>2]-m;if(s*s+r*r+q*q<=n)break;e=e+1|0;if((e|0)>=(h|0))break a}return e|0}while(0);p=(c[b+32>>2]|0)+12|0;c[p>>2]=(c[p>>2]|0)+1;if((h|0)==(c[b+92>>2]|0)?(i=(h|0)==0?1:h<<1,(h|0)<(i|0)):0){if(!i)e=0;else{c[6485]=(c[6485]|0)+1;e=ec((i<<4|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}h=c[b+88>>2]|0}if((h|0)>0){f=0;do{p=e+(f<<4)|0;o=(c[b+96>>2]|0)+(f<<4)|0;c[p>>2]=c[o>>2];c[p+4>>2]=c[o+4>>2];c[p+8>>2]=c[o+8>>2];c[p+12>>2]=c[o+12>>2];f=f+1|0}while((f|0)!=(h|0))}f=c[b+96>>2]|0;if(f|0){if(a[b+100>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[b+96>>2]=0}a[b+100>>0]=1;c[b+96>>2]=e;c[b+92>>2]=i;e=c[b+88>>2]|0}else e=h;p=(c[b+96>>2]|0)+(e<<4)|0;c[p>>2]=c[d>>2];c[p+4>>2]=c[d+4>>2];c[p+8>>2]=c[d+8>>2];c[p+12>>2]=c[d+12>>2];d=c[b+88>>2]|0;c[b+88>>2]=d+1;c[(c[b+32>>2]|0)+16>>2]=c[b+96>>2];return d|0}j=c[b+108>>2]|0;b:do if((j|0)>0&e){f=c[b+116>>2]|0;k=+g[d>>2];l=+g[d+4>>2];m=+g[d+8>>2];n=+g[b+168>>2];e=0;while(1){q=+g[f+(e<<2)>>2]-k;r=+g[f+(e+1<<2)>>2]-l;s=+g[f+(e+2<<2)>>2]-m;h=e+3|0;if(q*q+r*r+s*s<=n)break;if((h|0)<(j|0))e=h;else break b}d=(e>>>0)/3|0;return d|0}while(0);e=c[b+112>>2]|0;if((j|0)==(e|0)){e=(j|0)==0?1:j<<1;if((j|0)<(e|0)){if(!e)f=0;else{c[6485]=(c[6485]|0)+1;f=ec((e<<2|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}j=c[b+108>>2]|0}i=c[b+116>>2]|0;if((j|0)<=0)if(!i){i=b+120|0;h=j}else p=36;else{h=0;do{c[f+(h<<2)>>2]=c[i+(h<<2)>>2];h=h+1|0}while((h|0)!=(j|0));p=36}if((p|0)==36){if(!(a[b+120>>0]|0))h=j;else{c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0);h=c[b+108>>2]|0}c[b+116>>2]=0;i=b+120|0}a[i>>0]=1;c[b+116>>2]=f;c[b+112>>2]=e}else{h=j;e=j}}else h=j;j=c[b+116>>2]|0;c[j+(h<<2)>>2]=c[d>>2];f=h+1|0;c[b+108>>2]=f;if((f|0)==(e|0)){o=(e|0)==0?1:e<<1;if((e|0)<(o|0)){if(!o){i=0;h=j}else{c[6485]=(c[6485]|0)+1;e=ec((o<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}i=e;e=c[b+108>>2]|0;h=c[b+116>>2]|0}if((e|0)<=0)if(!h)f=b+120|0;else p=51;else{f=0;do{c[i+(f<<2)>>2]=c[h+(f<<2)>>2];f=f+1|0}while((f|0)!=(e|0));p=51}if((p|0)==51){if(a[b+120>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0);e=c[b+108>>2]|0}c[b+116>>2]=0;f=b+120|0}a[f>>0]=1;c[b+116>>2]=i;c[b+112>>2]=o;f=e;e=o}else{i=j;f=e}}else i=j;c[i+(f<<2)>>2]=c[d+4>>2];f=f+1|0;c[b+108>>2]=f;if((f|0)==(e|0)){j=(e|0)==0?1:e<<1;if((e|0)<(j|0)){if(!j)h=0;else{c[6485]=(c[6485]|0)+1;e=ec((j<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}h=e;e=c[b+108>>2]|0;i=c[b+116>>2]|0}if((e|0)<=0)if(!i)f=b+120|0;else p=66;else{f=0;do{c[h+(f<<2)>>2]=c[i+(f<<2)>>2];f=f+1|0}while((f|0)!=(e|0));p=66}if((p|0)==66){if(a[b+120>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0);e=c[b+108>>2]|0}c[b+116>>2]=0;f=b+120|0}a[f>>0]=1;c[b+116>>2]=h;c[b+112>>2]=j}else h=i}else{h=i;e=f}c[h+(e<<2)>>2]=c[d+8>>2];d=e+1|0;c[b+108>>2]=d;b=c[b+32>>2]|0;c[b+12>>2]=(c[b+12>>2]|0)+1;c[b+16>>2]=h;d=((d|0)/3|0)+-1|0;return d|0}function qd(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,k=0.0,m=0.0,n=0.0,o=0,p=0,q=0,r=0.0,s=0.0,t=0;t=l;l=l+48|0;switch(c[b+4>>2]|0){case 8:{c[a>>2]=0;c[a+4>>2]=0;c[a+8>>2]=0;c[a+12>>2]=0;l=t;return}case 0:{n=+g[b+32>>2];r=+g[b+36>>2];r=+g[d+4>>2]>=0.0?r:-r;s=+g[b+40>>2];s=+g[d+8>>2]>=0.0?s:-s;g[a>>2]=+g[d>>2]>=0.0?n:-n;g[a+4>>2]=r;g[a+8>>2]=s;g[a+12>>2]=0.0;l=t;return}case 1:{k=+g[d>>2];m=+g[d+4>>2];s=+g[d+8>>2];r=k*+g[b+60>>2]+m*+g[b+60+4>>2]+s*+g[b+60+8>>2];n=k*+g[b+60+16>>2]+m*+g[b+60+20>>2]+s*+g[b+60+24>>2];s=k*+g[b+60+32>>2]+m*+g[b+60+36>>2]+s*+g[b+60+40>>2];o=r<n?(n<s?2:1):r<s?2:0;p=c[b+60+(o<<4)+4>>2]|0;q=c[b+60+(o<<4)+8>>2]|0;c[a>>2]=c[b+60+(o<<4)>>2];c[a+4>>2]=p;c[a+8>>2]=q;g[a+12>>2]=0.0;l=t;return}case 13:{c[t+32>>2]=c[b+32>>2];c[t+32+4>>2]=c[b+32+4>>2];c[t+32+8>>2]=c[b+32+8>>2];c[t+32+12>>2]=c[b+32+12>>2];c[t+16>>2]=c[d>>2];e=c[d+4>>2]|0;c[t+16+4>>2]=e;q=c[d+8>>2]|0;c[t+16+8>>2]=q;g[t+16+12>>2]=0.0;b=c[b+56>>2]|0;f=(c[j>>2]=q,+g[j>>2]);switch(b|0){case 2:{d=0;o=2;p=1;h=(c[j>>2]=e,+g[j>>2]);break}case 1:{d=0;o=1;p=2;h=f;break}default:{d=1;o=0;p=2;h=f}}f=+g[t+32+(d<<2)>>2];i=+g[t+32+(b<<2)>>2];n=+g[t+16+(d<<2)>>2];m=+B(+(n*n+h*h));if(m!=0.0){k=h*(f/m);h=+g[t+16+(o<<2)>>2]<0.0?-i:i;f=n*(f/m)}else{k=0.0;h=+g[t+16+(o<<2)>>2]<0.0?-i:i}g[t+(d<<2)>>2]=f;g[t+(o<<2)>>2]=h;g[t+(p<<2)>>2]=k;c[a>>2]=c[t>>2];c[a+4>>2]=c[t+4>>2];c[a+8>>2]=c[t+8>>2];g[a+12>>2]=0.0;l=t;return}case 10:{f=+g[d>>2];h=+g[d+4>>2];i=+g[d+8>>2];e=c[b+56>>2]|0;r=+g[b+32+(e<<2)>>2];if(f*f+h*h+i*i<1.4210854715202004e-14){s=1.0;n=0.0;m=0.0}else{m=1.0/+B(+(f*f+h*h+i*i));s=f*m;n=h*m;m=i*m}c[t+32>>2]=0;c[t+32+4>>2]=0;c[t+32+8>>2]=0;c[t+32+12>>2]=0;g[t+32+(e<<2)>>2]=r;k=+g[t+32>>2];h=+g[t+32+4>>2];f=+g[t+32+8>>2];i=s*k+n*h+m*f;if(i>-999999984306749440.0){p=(g[j>>2]=f,c[j>>2]|0);q=(g[j>>2]=h,c[j>>2]|0);o=(g[j>>2]=k,c[j>>2]|0)}else{i=-999999984306749440.0;o=0;p=0;q=0}c[t+32>>2]=0;c[t+32+4>>2]=0;c[t+32+8>>2]=0;c[t+32+12>>2]=0;g[t+32+(e<<2)>>2]=-r;k=+g[t+32>>2];r=+g[t+32+4>>2];f=+g[t+32+8>>2];e=s*k+n*r+m*f>i;b=(g[j>>2]=k,c[j>>2]|0);d=(g[j>>2]=r,c[j>>2]|0);p=e?(g[j>>2]=f,c[j>>2]|0):p;c[a>>2]=e?b:o;c[a+4>>2]=e?d:q;c[a+8>>2]=p;g[a+12>>2]=0.0;l=t;return}case 5:{p=c[b+96>>2]|0;o=c[b+100>>2]|0;r=+g[b+16>>2];s=+g[b+20>>2];n=+g[b+24>>2];k=+g[d>>2]*r;m=+g[d+4>>2]*s;h=+g[d+8>>2]*n;if((o|0)>0){e=-1;b=0;f=-3402823466385288598117041.0e14;while(1){i=k*+g[p+(b<<4)>>2]+m*+g[p+(b<<4)+4>>2]+h*+g[p+(b<<4)+8>>2];d=i>f;e=d?b:e;b=b+1|0;if((b|0)==(o|0))break;else f=d?i:f}}else e=-1;m=s*+g[p+(e<<4)+4>>2];s=n*+g[p+(e<<4)+8>>2];g[a>>2]=r*+g[p+(e<<4)>>2];g[a+4>>2]=m;g[a+8>>2]=s;g[a+12>>2]=0.0;l=t;return}case 4:{p=c[b+108>>2]|0;o=c[b+100>>2]|0;r=+g[b+16>>2];s=+g[b+20>>2];n=+g[b+24>>2];k=+g[d>>2]*r;m=+g[d+4>>2]*s;h=+g[d+8>>2]*n;if((o|0)>0){e=-1;b=0;f=-3402823466385288598117041.0e14;while(1){i=k*+g[p+(b<<4)>>2]+m*+g[p+(b<<4)+4>>2]+h*+g[p+(b<<4)+8>>2];d=i>f;e=d?b:e;b=b+1|0;if((b|0)==(o|0))break;else f=d?i:f}}else e=-1;m=s*+g[p+(e<<4)+4>>2];s=n*+g[p+(e<<4)+8>>2];g[a>>2]=r*+g[p+(e<<4)>>2];g[a+4>>2]=m;g[a+8>>2]=s;g[a+12>>2]=0.0;l=t;return}default:{Mb[c[(c[b>>2]|0)+68>>2]&127](a,b,d);l=t;return}}}function rd(b,d,e){b=b|0;d=d|0;e=e|0;var f=0.0,h=0,i=0,j=0,k=0,m=0,n=0,o=0.0,p=0,q=0,r=0,s=0;p=l;l=l+128|0;c[b+72>>2]=(c[b+72>>2]|0)+1;c[p>>2]=c[d>>2];c[p+4>>2]=c[d+4>>2];c[p+8>>2]=c[d+8>>2];c[p+12>>2]=c[d+12>>2];c[p+16>>2]=c[d+16>>2];c[p+16+4>>2]=c[d+16+4>>2];c[p+16+8>>2]=c[d+16+8>>2];c[p+16+12>>2]=c[d+16+12>>2];c[p+32>>2]=c[d+32>>2];c[p+32+4>>2]=c[d+32+4>>2];c[p+32+8>>2]=c[d+32+8>>2];c[p+32+12>>2]=c[d+32+12>>2];c[p+48>>2]=c[d+48>>2];c[p+48+4>>2]=c[d+48+4>>2];c[p+48+8>>2]=c[d+48+8>>2];c[p+48+12>>2]=c[d+48+12>>2];n=c[e+4>>2]|0;o=+ib[c[(c[e>>2]|0)+48>>2]&15](e);Pb[c[(c[e>>2]|0)+8>>2]&127](e,d,p+112|0,p+96|0);f=+g[p+112>>2];if(+g[b+36>>2]>f)g[b+36>>2]=f;f=+g[p+96>>2];if(+g[b+52>>2]<f)g[b+52>>2]=f;f=+g[p+112+4>>2];if(+g[b+40>>2]>f)g[b+40>>2]=f;f=+g[p+96+4>>2];if(+g[b+56>>2]<f)g[b+56>>2]=f;f=+g[p+112+8>>2];if(+g[b+44>>2]>f)g[b+44>>2]=f;f=+g[p+96+8>>2];if(+g[b+60>>2]<f)g[b+60>>2]=f;k=c[b+68>>2]|0;if(!k){k=b+20|0;j=0}else{c[p+64>>2]=c[p+112>>2];c[p+64+4>>2]=c[p+112+4>>2];c[p+64+8>>2]=c[p+112+8>>2];c[p+64+12>>2]=c[p+112+12>>2];c[p+64+16>>2]=c[p+96>>2];c[p+64+16+4>>2]=c[p+96+4>>2];c[p+64+16+8>>2]=c[p+96+8>>2];c[p+64+16+12>>2]=c[p+96+12>>2];j=c[b+20>>2]|0;d=c[k+4>>2]|0;if(!d){c[6485]=(c[6485]|0)+1;d=ec(63)|0;if(!d)d=0;else{c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16}h=d;i=h+44|0;do{c[h>>2]=0;h=h+4|0}while((h|0)<(i|0))}else c[k+4>>2]=0;c[d+32>>2]=0;c[d+36>>2]=j;c[d+40>>2]=0;c[d>>2]=c[p+64>>2];c[d+4>>2]=c[p+64+4>>2];c[d+8>>2]=c[p+64+8>>2];c[d+12>>2]=c[p+64+12>>2];c[d+16>>2]=c[p+64+16>>2];c[d+20>>2]=c[p+64+20>>2];c[d+24>>2]=c[p+64+24>>2];c[d+28>>2]=c[p+64+28>>2];ue(k,c[k>>2]|0,d);c[k+12>>2]=(c[k+12>>2]|0)+1;k=b+20|0;j=d}d=c[k>>2]|0;if((d|0)==(c[b+24>>2]|0)?(m=(d|0)==0?1:d<<1,(d|0)<(m|0)):0){if(!m)i=0;else{c[6485]=(c[6485]|0)+1;d=ec((m*80|3)+16|0)|0;if(!d)d=0;else{c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16}i=d;d=c[k>>2]|0}if((d|0)>0){h=0;do{q=i+(h*80|0)|0;r=c[b+28>>2]|0;s=r+(h*80|0)|0;c[q>>2]=c[s>>2];c[q+4>>2]=c[s+4>>2];c[q+8>>2]=c[s+8>>2];c[q+12>>2]=c[s+12>>2];q=r+(h*80|0)+16|0;s=i+(h*80|0)+16|0;c[s>>2]=c[q>>2];c[s+4>>2]=c[q+4>>2];c[s+8>>2]=c[q+8>>2];c[s+12>>2]=c[q+12>>2];s=r+(h*80|0)+32|0;q=i+(h*80|0)+32|0;c[q>>2]=c[s>>2];c[q+4>>2]=c[s+4>>2];c[q+8>>2]=c[s+8>>2];c[q+12>>2]=c[s+12>>2];q=i+(h*80|0)+48|0;s=r+(h*80|0)+48|0;c[q>>2]=c[s>>2];c[q+4>>2]=c[s+4>>2];c[q+8>>2]=c[s+8>>2];c[q+12>>2]=c[s+12>>2];q=i+(h*80|0)+64|0;r=r+(h*80|0)+64|0;c[q>>2]=c[r>>2];c[q+4>>2]=c[r+4>>2];c[q+8>>2]=c[r+8>>2];c[q+12>>2]=c[r+12>>2];h=h+1|0}while((h|0)!=(d|0))}d=c[b+28>>2]|0;if(d|0){if(a[b+32>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+28>>2]=0}a[b+32>>0]=1;c[b+28>>2]=i;c[b+24>>2]=m;d=c[k>>2]|0}s=c[b+28>>2]|0;r=s+(d*80|0)|0;c[r>>2]=c[p>>2];c[r+4>>2]=c[p+4>>2];c[r+8>>2]=c[p+8>>2];c[r+12>>2]=c[p+12>>2];r=s+(d*80|0)+16|0;c[r>>2]=c[p+16>>2];c[r+4>>2]=c[p+16+4>>2];c[r+8>>2]=c[p+16+8>>2];c[r+12>>2]=c[p+16+12>>2];r=s+(d*80|0)+32|0;c[r>>2]=c[p+32>>2];c[r+4>>2]=c[p+32+4>>2];c[r+8>>2]=c[p+32+8>>2];c[r+12>>2]=c[p+32+12>>2];r=s+(d*80|0)+48|0;c[r>>2]=c[p+48>>2];c[r+4>>2]=c[p+48+4>>2];c[r+8>>2]=c[p+48+8>>2];c[r+12>>2]=c[p+48+12>>2];s=s+(d*80|0)+64|0;c[s>>2]=e;c[s+4>>2]=n;g[s+8>>2]=o;c[s+12>>2]=j;c[k>>2]=(c[k>>2]|0)+1;l=p;return}function sd(a,b,d,e){a=a|0;b=b|0;d=d|0;e=+e;var f=0,h=0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0,p=0,q=0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0,x=0,y=0,z=0,C=0.0,D=0.0;z=l;l=l+192|0;o=c[a+4>>2]|0;s=+g[o+784>>2];if(s<e){l=z;return}x=c[o+772>>2]|0;q=(c[a+8>>2]|0)+8|0;y=c[q>>2]|0;i=+g[d>>2];m=+g[b>>2]*e+i;j=+g[d+4>>2];n=+g[b+4>>2]*e+j;k=+g[d+8>>2];r=+g[b+8>>2]*e+k;if((x|0)!=(y|0)){p=c[a+12>>2]|0;w=c[p+8>>2]|0;D=m-+g[w+52>>2];C=n-+g[w+56>>2];v=r-+g[w+60>>2];f=y;t=D*+g[w+4>>2]+C*+g[w+20>>2]+v*+g[w+36>>2];u=D*+g[w+8>>2]+C*+g[w+24>>2]+v*+g[w+40>>2];v=D*+g[w+12>>2]+C*+g[w+28>>2]+v*+g[w+44>>2]}else{C=m-+g[x+52>>2];D=n-+g[x+56>>2];v=r-+g[x+60>>2];p=c[a+12>>2]|0;f=c[p+8>>2]|0;t=C*+g[x+4>>2]+D*+g[x+20>>2]+v*+g[x+36>>2];u=C*+g[x+8>>2]+D*+g[x+24>>2]+v*+g[x+40>>2];v=C*+g[x+12>>2]+D*+g[x+28>>2]+v*+g[x+44>>2]}i=i-+g[f+52>>2];j=j-+g[f+56>>2];D=k-+g[f+60>>2];k=i*+g[f+4>>2]+j*+g[f+20>>2]+D*+g[f+36>>2];C=i*+g[f+8>>2]+j*+g[f+24>>2]+D*+g[f+40>>2];D=i*+g[f+12>>2]+j*+g[f+28>>2]+D*+g[f+44>>2];g[z>>2]=t;g[z+4>>2]=u;g[z+8>>2]=v;g[z+12>>2]=0.0;g[z+16>>2]=k;g[z+20>>2]=C;g[z+24>>2]=D;g[z+28>>2]=0.0;c[z+64>>2]=c[b>>2];c[z+64+4>>2]=c[b+4>>2];c[z+64+8>>2]=c[b+8>>2];c[z+64+12>>2]=c[b+12>>2];g[z+80>>2]=e;c[z+84>>2]=0;c[z+84+4>>2]=0;c[z+84+8>>2]=0;c[z+84+12>>2]=0;f=z+116|0;b=f+44|0;do{c[f>>2]=0;f=f+4|0}while((f|0)<(b|0));g[z+48>>2]=m;g[z+52>>2]=n;g[z+56>>2]=r;g[z+60>>2]=0.0;c[z+32>>2]=c[d>>2];c[z+32+4>>2]=c[d+4>>2];c[z+32+8>>2]=c[d+8>>2];c[z+32+12>>2]=c[d+12>>2];h=c[o+780>>2]|0;if((h|0)>0){f=-1;d=0;i=s*s;while(1){j=+g[o+4+(d*192|0)>>2]-t;e=+g[o+4+(d*192|0)+4>>2]-u;k=+g[o+4+(d*192|0)+8>>2]-v;b=j*j+e*e+k*k<i;f=b?d:f;d=d+1|0;if((d|0)==(h|0)){w=f;break}else i=b?j*j+e*e+k*k:i}}else w=-1;d=c[q>>2]|0;h=p+8|0;b=c[h>>2]|0;D=+g[d+228>>2];C=+g[b+228>>2];v=D*C<-10.0?-10.0:D*C;g[z+84>>2]=v>10.0?10.0:v;g[z+96>>2]=+g[d+232>>2]*+g[b+232>>2];v=C*+g[d+236>>2]+D*+g[b+236>>2];v=v<-10.0?-10.0:v;g[z+88>>2]=v>10.0?10.0:v;D=C*+g[d+240>>2]+D*+g[b+240>>2];D=D<-10.0?-10.0:D;g[z+92>>2]=D>10.0?10.0:D;f=c[d+204>>2]|0;if((f&128|0)==0?(c[b+204>>2]&128|0)==0:0)b=16;else{g[z+148>>2]=+g[d+244>>2]+ +g[b+244>>2];g[z+144>>2]=1.0/(1.0/+g[(c[q>>2]|0)+248>>2]+1.0/+g[(c[h>>2]|0)+248>>2]);c[z+120>>2]=8;f=c[(c[q>>2]|0)+204>>2]|0;b=24}if(!((f&512|0)==0?!(c[(c[h>>2]|0)+204>>2]&512|0):0))c[z+120>>2]=b;i=+g[z+72>>2];if(+A(+i)>.7071067690849304){n=+g[z+68>>2];j=1.0/+B(+(i*i+n*n));k=+g[z+64>>2];e=-(k*n*j);k=k*-(i*j);m=(i*i+n*n)*j;n=n*j;i=-(i*j);j=0.0}else{C=+g[z+64>>2];D=+g[z+68>>2];j=1.0/+B(+(C*C+D*D));e=i*-(D*j);k=(C*C+D*D)*j;m=-(i*C*j);n=0.0;i=C*j;j=-(D*j)}g[z+160>>2]=j;g[z+164>>2]=i;g[z+168>>2]=n;g[z+176>>2]=m;g[z+180>>2]=e;g[z+184>>2]=k;if((x|0)!=(y|0)){f=a+24|0;b=a+28|0;d=a+16|0;h=a+20|0}else{f=a+28|0;b=a+24|0;d=a+20|0;h=a+16|0}f=c[f>>2]|0;y=c[b>>2]|0;x=c[d>>2]|0;c[z+100>>2]=c[h>>2];c[z+104>>2]=x;c[z+108>>2]=y;c[z+112>>2]=f;f=c[a+4>>2]|0;if((w|0)>-1){b=f+4+(w*192|0)|0;d=f+4+(w*192|0)+156|0;h=c[d>>2]|0;o=f+4+(w*192|0)+124|0;i=+g[o>>2];p=f+4+(w*192|0)+128|0;j=+g[p>>2];q=f+4+(w*192|0)+132|0;e=+g[q>>2];if(!((c[z+120>>2]&16|0)!=0?(D=i*+g[f+4+(w*192|0)+84>>2]+0.0,!(j*j+e*e>D*D)):0)){a=f+4+(w*192|0)+116|0;y=c[a>>2]|0;$g(b|0,z|0,192)|0;c[a>>2]=y;g[o>>2]=i;g[p>>2]=j;g[q>>2]=e}c[d>>2]=h}else Ae(f,z)|0;l=z;return}function td(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0;h=Nq()|0;c[h>>2]=6924;a[h+20>>0]=1;c[h+16>>2]=0;c[h+8>>2]=0;c[h+12>>2]=0;c[h+24>>2]=b;g[h+28>>2]=0.0;c[h+32>>2]=0;c[h+36>>2]=1;g[h+40>>2]=1.0;a[h+44>>0]=1;c[h+48>>2]=0;a[h+52>>0]=0;a[h+53>>0]=1;a[h+54>>0]=1;g[h+56>>2]=.03999999910593033;a[h+60>>0]=0;g[h+64>>2]=0.0;c[h+68>>2]=d;c[h+72>>2]=0;a[h+76>>0]=1;c[h+80>>2]=0;c[h+84>>2]=0;c[h+88>>2]=0;g[h+92>>2]=.6000000238418579;g[h+96>>2]=1.0;g[h+100>>2]=.30000001192092896;g[h+104>>2]=.01666666753590107;g[h+108>>2]=0.0;g[h+116>>2]=20.0;c[h+112>>2]=10;g[h+124>>2]=.20000000298023224;g[h+128>>2]=.20000000298023224;g[h+132>>2]=0.0;g[h+136>>2]=.20000000298023224;g[h+140>>2]=0.0;g[h+120>>2]=1.0;c[h+144>>2]=1;g[h+148>>2]=-.03999999910593033;g[h+152>>2]=.10000000149011612;g[h+156>>2]=0.0;g[h+160>>2]=.8500000238418579;c[h+164>>2]=260;c[h+168>>2]=2;c[h+172>>2]=128;g[h+176>>2]=100.0;g[h+180>>2]=1000000015047466219876688.0e6;g[h+184>>2]=0.0;g[h+188>>2]=.20000000298023224;c[h>>2]=5972;a[h+208>>0]=1;c[h+204>>2]=0;c[h+196>>2]=0;c[h+200>>2]=0;c[h+212>>2]=0;c[h+216>>2]=e;a[h+240>>0]=1;c[h+236>>2]=0;c[h+228>>2]=0;c[h+232>>2]=0;a[h+260>>0]=1;c[h+256>>2]=0;c[h+248>>2]=0;c[h+252>>2]=0;c[h+264>>2]=0;c[h+268>>2]=-1054867456;a[h+290>>0]=0;a[h+291>>0]=0;c[h+272>>2]=0;c[h+272+4>>2]=0;c[h+272+8>>2]=0;c[h+272+12>>2]=0;a[h+308>>0]=1;c[h+304>>2]=0;c[h+296>>2]=0;c[h+300>>2]=0;c[h+312>>2]=0;a[h+316>>0]=1;a[h+336>>0]=1;c[h+332>>2]=0;c[h+324>>2]=0;c[h+328>>2]=0;c[h+340>>2]=0;if(!e){c[6485]=(c[6485]|0)+1;f=ec(255)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}c[f>>2]=5804;a[f+20>>0]=1;c[f+16>>2]=0;c[f+8>>2]=0;c[f+12>>2]=0;a[f+40>>0]=1;c[f+36>>2]=0;c[f+28>>2]=0;c[f+32>>2]=0;a[f+60>>0]=1;c[f+56>>2]=0;c[f+48>>2]=0;c[f+52>>2]=0;a[f+80>>0]=1;c[f+76>>2]=0;c[f+68>>2]=0;c[f+72>>2]=0;a[f+100>>0]=1;c[f+96>>2]=0;c[f+88>>2]=0;c[f+92>>2]=0;a[f+120>>0]=1;c[f+116>>2]=0;c[f+108>>2]=0;c[f+112>>2]=0;a[f+140>>0]=1;c[f+136>>2]=0;c[f+128>>2]=0;c[f+132>>2]=0;a[f+160>>0]=1;c[f+156>>2]=0;c[f+148>>2]=0;c[f+152>>2]=0;a[f+180>>0]=1;c[f+176>>2]=0;c[f+168>>2]=0;c[f+172>>2]=0;a[f+208>>0]=1;c[f+204>>2]=0;c[f+196>>2]=0;c[f+200>>2]=0;c[f+232>>2]=0;c[f+224>>2]=0;c[f+212>>2]=16;c[f+216>>2]=17;c[f+220>>2]=18;c[h+216>>2]=f;f=1}else f=0;a[h+289>>0]=f;c[6485]=(c[6485]|0)+1;f=ec(87)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}c[f>>2]=7736;a[f+20>>0]=1;c[f+16>>2]=0;c[f+8>>2]=0;c[f+12>>2]=0;a[f+40>>0]=1;c[f+36>>2]=0;c[f+28>>2]=0;c[f+32>>2]=0;a[f+60>>0]=1;c[f+56>>2]=0;c[f+48>>2]=0;c[f+52>>2]=0;a[f+64>>0]=1;c[h+220>>2]=f;a[h+288>>0]=1;c[6485]=(c[6485]|0)+1;f=ec(107)|0;if(!f){e=0;f=c[h+216>>2]|0;c[e>>2]=6192;d=e+4|0;c[d>>2]=0;d=e+8|0;c[d>>2]=f;d=e+12|0;c[d>>2]=0;d=e+16|0;c[d>>2]=0;d=e+20|0;c[d>>2]=0;d=e+24|0;c[d>>2]=b;b=e+44|0;a[b>>0]=1;b=e+40|0;c[b>>2]=0;b=e+32|0;c[b>>2]=0;b=e+36|0;c[b>>2]=0;b=e+64|0;a[b>>0]=1;b=e+60|0;c[b>>2]=0;b=e+52|0;c[b>>2]=0;b=e+56|0;c[b>>2]=0;b=e+84|0;a[b>>0]=1;b=e+80|0;c[b>>2]=0;b=e+72|0;c[b>>2]=0;b=e+76|0;c[b>>2]=0;c[h+212>>2]=e;return h|0}c[(f+4+15&-16)+-4>>2]=f;e=f+4+15&-16;f=c[h+216>>2]|0;c[e>>2]=6192;d=e+4|0;c[d>>2]=0;d=e+8|0;c[d>>2]=f;d=e+12|0;c[d>>2]=0;d=e+16|0;c[d>>2]=0;d=e+20|0;c[d>>2]=0;d=e+24|0;c[d>>2]=b;b=e+44|0;a[b>>0]=1;b=e+40|0;c[b>>2]=0;b=e+32|0;c[b>>2]=0;b=e+36|0;c[b>>2]=0;b=e+64|0;a[b>>0]=1;b=e+60|0;c[b>>2]=0;b=e+52|0;c[b>>2]=0;b=e+56|0;c[b>>2]=0;b=e+84|0;a[b>>0]=1;b=e+80|0;c[b>>2]=0;b=e+72|0;c[b>>2]=0;b=e+76|0;c[b>>2]=0;c[h+212>>2]=e;return h|0}function ud(a,b,d,e,f,h){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;h=+h;var i=0,j=0,k=0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0,t=0.0;i=l;l=l+464|0;c[i+128>>2]=c[d>>2];c[i+128+4>>2]=c[d+4>>2];c[i+128+8>>2]=c[d+8>>2];c[i+128+12>>2]=c[d+12>>2];c[i+128+16>>2]=c[d+16>>2];c[i+128+16+4>>2]=c[d+16+4>>2];c[i+128+16+8>>2]=c[d+16+8>>2];c[i+128+16+12>>2]=c[d+16+12>>2];c[i+128+32>>2]=c[d+32>>2];c[i+128+32+4>>2]=c[d+32+4>>2];c[i+128+32+8>>2]=c[d+32+8>>2];c[i+128+32+12>>2]=c[d+32+12>>2];k=i+128+48|0;c[k>>2]=c[d+48>>2];c[k+4>>2]=c[d+48+4>>2];c[k+8>>2]=c[d+48+8>>2];c[k+12>>2]=c[d+48+12>>2];c[i+64>>2]=c[e>>2];c[i+64+4>>2]=c[e+4>>2];c[i+64+8>>2]=c[e+8>>2];c[i+64+12>>2]=c[e+12>>2];c[i+64+16>>2]=c[e+16>>2];c[i+64+16+4>>2]=c[e+16+4>>2];c[i+64+16+8>>2]=c[e+16+8>>2];c[i+64+16+12>>2]=c[e+16+12>>2];c[i+64+32>>2]=c[e+32>>2];c[i+64+32+4>>2]=c[e+32+4>>2];c[i+64+32+8>>2]=c[e+32+8>>2];c[i+64+32+12>>2]=c[e+32+12>>2];j=i+64+48|0;c[j>>2]=c[e+48>>2];c[j+4>>2]=c[e+48+4>>2];c[j+8>>2]=c[e+48+8>>2];c[j+12>>2]=c[e+48+12>>2];Se(i+128|0,i+64|0,i+256|0,i+192|0);t=+g[i+192>>2];m=t*+g[i+256+4>>2];r=t*+g[i+256+8>>2];g[i+16>>2]=+g[i+256>>2]*t;g[i+16+4>>2]=m;g[i+16+8>>2]=r;g[i+16+12>>2]=0.0;c[i+256>>2]=0;c[i+256+4>>2]=0;c[i+256+8>>2]=0;c[i+256+12>>2]=0;c[i+192+48>>2]=0;c[i+192+48+4>>2]=0;c[i+192+48+8>>2]=0;c[i+192+48+12>>2]=0;yg(i+128|0,i);r=+g[i>>2];m=+g[i+4>>2];t=+g[i+8>>2];q=+g[i+12>>2];o=r*(2.0/(r*r+m*m+t*t+q*q));n=m*(2.0/(r*r+m*m+t*t+q*q));p=t*(2.0/(r*r+m*m+t*t+q*q));g[i+192>>2]=1.0-(m*n+t*p);g[i+192+4>>2]=r*n-q*p;g[i+192+8>>2]=r*p+q*n;g[i+192+12>>2]=0.0;g[i+192+16>>2]=r*n+q*p;g[i+192+20>>2]=1.0-(r*o+t*p);g[i+192+24>>2]=m*p-q*o;g[i+192+28>>2]=0.0;g[i+192+32>>2]=r*p-q*n;g[i+192+36>>2]=m*p+q*o;g[i+192+40>>2]=1.0-(r*o+m*n);g[i+192+44>>2]=0.0;lg(b,i+192|0,i+256|0,i+16|0,i+48|0,i+32|0);c[i+256>>2]=7292;c[i+256+36>>2]=c[d>>2];c[i+256+36+4>>2]=c[d+4>>2];c[i+256+36+8>>2]=c[d+8>>2];c[i+256+36+12>>2]=c[d+12>>2];c[i+256+52>>2]=c[d+16>>2];c[i+256+52+4>>2]=c[d+16+4>>2];c[i+256+52+8>>2]=c[d+16+8>>2];c[i+256+52+12>>2]=c[d+16+12>>2];c[i+256+68>>2]=c[d+32>>2];c[i+256+68+4>>2]=c[d+32+4>>2];c[i+256+68+8>>2]=c[d+32+8>>2];c[i+256+68+12>>2]=c[d+32+12>>2];s=i+256+84|0;c[s>>2]=c[d+48>>2];c[s+4>>2]=c[d+48+4>>2];c[s+8>>2]=c[d+48+8>>2];c[s+12>>2]=c[d+48+12>>2];c[i+256+100>>2]=c[e>>2];c[i+256+100+4>>2]=c[e+4>>2];c[i+256+100+8>>2]=c[e+8>>2];c[i+256+100+12>>2]=c[e+12>>2];c[i+256+116>>2]=c[e+16>>2];c[i+256+116+4>>2]=c[e+16+4>>2];c[i+256+116+8>>2]=c[e+16+8>>2];c[i+256+116+12>>2]=c[e+16+12>>2];c[i+256+132>>2]=c[e+32>>2];c[i+256+132+4>>2]=c[e+32+4>>2];c[i+256+132+8>>2]=c[e+32+8>>2];c[i+256+132+12>>2]=c[e+32+12>>2];d=i+256+148|0;c[d>>2]=c[e+48>>2];c[d+4>>2]=c[e+48+4>>2];c[d+8>>2]=c[e+48+8>>2];c[d+12>>2]=c[e+48+12>>2];c[i+256+180>>2]=a;c[i+256+184>>2]=f;g[i+256+188>>2]=h;c[i+256+192>>2]=b;n=+g[d>>2]-+g[s>>2];m=+g[i+256+152>>2]-+g[i+256+88>>2];o=+g[i+256+156>>2]-+g[i+256+92>>2];h=1.0/+B(+(n*n+m*m+o*o));r=n*h==0.0?999999984306749440.0:1.0/(n*h);g[i+256+4>>2]=r;q=m*h==0.0?999999984306749440.0:1.0/(m*h);g[i+256+8>>2]=q;p=o*h==0.0?999999984306749440.0:1.0/(o*h);g[i+256+12>>2]=p;c[i+256+20>>2]=r<0.0&1;c[i+256+24>>2]=q<0.0&1;c[i+256+28>>2]=p<0.0&1;g[i+256+32>>2]=o*o*h+(n*n*h+m*m*h);f=c[a+68>>2]|0;Ub[c[(c[f>>2]|0)+24>>2]&7](f,k,j,i+256|0,i+48|0,i+32|0);l=i;return}function vd(b,d,e,f,h,i){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;var k=0,m=0.0,n=0,o=0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0.0,D=0,E=0;D=l;l=l+272|0;z=+g[e+48>>2]-+g[d+48>>2];A=+g[e+52>>2]-+g[d+52>>2];C=+g[e+56>>2]-+g[d+56>>2];Se(d,e,D+256|0,D+208|0);v=+g[D+208>>2];t=+g[D+256>>2]*v;u=v*+g[D+256+4>>2];v=v*+g[D+256+8>>2];g[D+192>>2]=t;g[D+192+4>>2]=u;g[D+192+8>>2]=v;g[D+192+12>>2]=0.0;w=+g[h+48>>2]-+g[f+48>>2];x=+g[h+52>>2]-+g[f+52>>2];y=+g[h+56>>2]-+g[f+56>>2];Se(f,h,D+256|0,D+208|0);r=+g[D+208>>2];p=+g[D+256>>2]*r;q=r*+g[D+256+4>>2];r=r*+g[D+256+8>>2];g[D+176>>2]=p;g[D+176+4>>2]=q;g[D+176+8>>2]=r;g[D+176+12>>2]=0.0;e=c[b+12>>2]|0;s=+ib[c[(c[e>>2]|0)+16>>2]&15](e);e=c[b+16>>2]|0;if(!e)m=0.0;else m=+ib[c[(c[e>>2]|0)+16>>2]&15](e);s=s*+B(+(t*t+u*u+v*v))+m*+B(+(p*p+q*q+r*r));if(s+ +B(+((w-z)*(w-z)+(x-A)*(x-A)+(y-C)*(y-C)))==0.0){i=0;l=D;return i|0}c[D+208>>2]=10180;g[D+208+36>>2]=999999984306749440.0;a[D+208+40>>0]=0;md(b,d,f,D+208|0);h=(a[D+208+40>>0]|0)==0;c[D+256>>2]=c[D+208+20>>2];c[D+256+4>>2]=c[D+208+20+4>>2];c[D+256+8>>2]=c[D+208+20+8>>2];c[D+256+12>>2]=c[D+208+20+12>>2];a:do if(!h?(o=c[D+208+4>>2]|0,k=c[D+208+8>>2]|0,n=c[D+208+12>>2]|0,v=(w-z)*(c[j>>2]=o,+g[j>>2]),v=v+(x-A)*(c[j>>2]=k,+g[j>>2]),!(s+(v+(y-C)*(c[j>>2]=n,+g[j>>2]))<=1.1920928955078125e-07)):0){m=+g[D+208+16>>2];p=+g[i+172>>2]+ +g[D+208+36>>2];b:do if(p>1.0000000474974513e-03){h=0;q=0.0;r=p;while(1){e=c[i+168>>2]|0;if(e|0){E=c[(c[e>>2]|0)+28>>2]|0;c[D+112>>2]=1065353216;c[D+112+4>>2]=1065353216;c[D+112+8>>2]=1065353216;g[D+112+12>>2]=0.0;Kb[E&7](e,D+256|0,.20000000298023224,D+112|0)}m=(w-z)*(c[j>>2]=o,+g[j>>2]);m=m+(x-A)*(c[j>>2]=k,+g[j>>2]);m=s+(m+(y-C)*(c[j>>2]=n,+g[j>>2]));if(m<=1.1920928955078125e-07){k=0;break a}p=q+r/m;if(!(!(p<=q)&(!(p<0.0)&!(p>1.0)))){k=0;break a}Me(d,z,A,C,D+192|0,p,D+112|0);Me(f,w,x,y,D+176|0,p,D+48|0);k=c[i+168>>2]|0;if(k|0){E=c[(c[k>>2]|0)+28>>2]|0;c[D>>2]=1065353216;c[D+4>>2]=0;c[D+8>>2]=0;g[D+12>>2]=0.0;Kb[E&7](k,D+112+48|0,.20000000298023224,D)}Eb[c[c[i>>2]>>2]&31](i,p);c[D>>2]=10180;g[D+36>>2]=999999984306749440.0;a[D+40>>0]=0;md(b,D+112|0,D+48|0,D);if(!(a[D+40>>0]|0)){k=17;break}r=+g[D+36>>2]+ +g[i+172>>2];c[D+256>>2]=c[D+20>>2];c[D+256+4>>2]=c[D+20+4>>2];c[D+256+8>>2]=c[D+20+8>>2];c[D+256+12>>2]=c[D+20+12>>2];o=c[D+4>>2]|0;k=c[D+8>>2]|0;n=c[D+12>>2]|0;e=h+1|0;if(h>>>0>63){k=18;break}if(!(r>1.0000000474974513e-03)){m=+g[D+16>>2];break b}else{h=e;q=p}}if((k|0)==17)Mb[c[(c[i>>2]|0)+8>>2]&127](i,-1,h);else if((k|0)==18)Mb[c[(c[i>>2]|0)+8>>2]&127](i,-2,e);k=0;break a}else p=0.0;while(0);g[i+164>>2]=p;c[i+132>>2]=o;c[i+136>>2]=k;c[i+140>>2]=n;g[i+144>>2]=m;c[i+148>>2]=c[D+256>>2];c[i+148+4>>2]=c[D+256+4>>2];c[i+148+8>>2]=c[D+256+8>>2];c[i+148+12>>2]=c[D+256+12>>2];k=1}else k=0;while(0);E=k;l=D;return E|0}function wd(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0,A=0.0,C=0.0,D=0.0,E=0.0,F=0,G=0;F=l;l=l+32|0;A=+g[b+48>>2]-+g[b+112>>2];h=+g[b+52>>2]-+g[b+116>>2];E=+g[b+56>>2]-+g[b+120>>2];C=A*+g[b+64>>2]+h*+g[b+80>>2]+E*+g[b+96>>2];D=A*+g[b+68>>2]+h*+g[b+84>>2]+E*+g[b+100>>2];E=A*+g[b+72>>2]+h*+g[b+88>>2]+E*+g[b+104>>2];e=c[a+8>>2]|0;z=c[a+4>>2]|0;h=+g[z+32>>2]*+g[z+16>>2];A=h+ +g[a+12>>2];p=+g[e+76>>2];q=+g[e+60>>2];r=+g[e+80>>2];s=+g[e+64>>2];t=+g[e+84>>2];u=+g[e+68>>2];v=+g[e+92>>2];w=+g[e+96>>2];x=+g[e+100>>2];j=(r-s)*(x-u)-(t-u)*(w-s);m=(t-u)*(v-q)-(p-q)*(x-u);o=(p-q)*(w-s)-(r-s)*(v-q);if(!(o*o+(j*j+m*m)>=1.4210854715202004e-14)){l=F;return}n=1.0/+B(+(o*o+(j*j+m*m)));i=j*n*(C-q)+m*n*(D-s)+o*n*(E-u);if(i<0.0){y=-i;k=-(j*n);i=-(m*n);j=-(o*n)}else{y=i;k=j*n;i=m*n;j=o*n}if(!(y<A)){l=F;return}o=(E-u)*(i*(p-q)-k*(r-s))+((C-q)*(j*(r-s)-i*(t-u))+(D-s)*(k*(t-u)-j*(p-q)));t=(E-t)*(i*(v-p)-k*(w-r))+((C-p)*(j*(w-r)-i*(x-t))+(D-r)*(k*(x-t)-j*(v-p)));x=(E-x)*(i*(q-v)-k*(s-w))+((C-v)*(j*(s-w)-i*(u-x))+(D-w)*(k*(u-x)-j*(q-v)));if(!(x>0.0&(o>0.0&t>0.0)|x<=0.0&(o<=0.0&t<=0.0))){if((sb[c[(c[e>>2]|0)+100>>2]&127](e)|0)<=0){l=F;return}e=0;z=0;s=0.0;r=0.0;q=0.0;do{G=c[a+8>>2]|0;Pb[c[(c[G>>2]|0)+104>>2]&127](G,z,F+16|0,F);p=+g[F+16>>2];x=+g[F+16+4>>2];u=+g[F+16+8>>2];t=+g[F>>2]-p;y=+g[F+4>>2]-x;v=+g[F+8>>2]-u;do if((C-p)*t+(D-x)*y+(E-u)*v>0.0)if((C-p)*t+(D-x)*y+(E-u)*v<t*t+y*y+v*v){o=((C-p)*t+(D-x)*y+(E-u)*v)/(t*t+y*y+v*v);w=o;m=C-p-t*o;n=D-x-y*o;o=E-u-v*o;break}else{w=1.0;m=C-p-t;n=D-x-y;o=E-u-v;break}else{w=0.0;m=C-p;n=D-x;o=E-u}while(0);if(m*m+n*n+o*o<A*A){e=1;s=p+t*w;r=u+v*w;q=x+y*w}z=z+1|0;G=c[a+8>>2]|0}while((z|0)<(sb[c[(c[G>>2]|0)+100>>2]&127](G)|0));if(!(e&1)){l=F;return}else p=A*A}else{p=A*A;s=C-y*k;r=E-y*j;q=D-y*i}n=C-s;o=D-q;m=E-r;if(!(n*n+o*o+m*m<p)){l=F;return}if(n*n+o*o+m*m>1.1920928955078125e-07){i=+B(+(n*n+o*o+m*m));h=h-i;k=n*(1.0/i);j=m*(1.0/i);i=o*(1.0/i)}h=-h;if(f){x=+g[b+64>>2];y=+g[b+68>>2];A=+g[b+72>>2];C=x*k+y*i+A*j;o=+g[b+80>>2];p=+g[b+84>>2];t=+g[b+88>>2];D=k*o+i*p+j*t;u=+g[b+96>>2];v=+g[b+100>>2];w=+g[b+104>>2];E=k*u+i*v+j*w;g[F+16>>2]=-C;g[F+16+4>>2]=-D;g[F+16+8>>2]=-E;g[F+16+12>>2]=0.0;D=s*o+q*p+r*t+ +g[b+116>>2]+D*h;E=s*u+q*v+r*w+ +g[b+120>>2]+E*h;g[F>>2]=s*x+q*y+r*A+ +g[b+112>>2]+C*h;g[F+4>>2]=D;g[F+8>>2]=E;g[F+12>>2]=0.0;Nb[c[(c[d>>2]|0)+16>>2]&15](d,F+16|0,F,h);l=F;return}else{G=c[(c[d>>2]|0)+16>>2]|0;y=+g[b+64>>2];A=+g[b+68>>2];C=+g[b+72>>2];u=+g[b+80>>2];v=+g[b+84>>2];D=+g[b+88>>2];w=+g[b+96>>2];x=+g[b+100>>2];E=+g[b+104>>2];g[F+16>>2]=y*k+A*i+C*j;g[F+16+4>>2]=k*u+i*v+j*D;g[F+16+8>>2]=k*w+i*x+j*E;g[F+16+12>>2]=0.0;D=s*u+q*v+r*D+ +g[b+116>>2];E=s*w+q*x+r*E+ +g[b+120>>2];g[F>>2]=s*y+q*A+r*C+ +g[b+112>>2];g[F+4>>2]=D;g[F+8>>2]=E;g[F+12>>2]=0.0;Nb[G&15](d,F+16|0,F,h);l=F;return}}function xd(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0;h=vq()|0;c[h+4>>2]=12;c[h+8>>2]=-1;c[h+12>>2]=-1;g[h+16>>2]=3402823466385288598117041.0e14;a[h+20>>0]=1;a[h+21>>0]=0;c[h+24>>2]=-1;c[h+28>>2]=b;c[h+32>>2]=d;g[h+36>>2]=0.0;g[h+40>>2]=.05000000074505806;c[h+44>>2]=0;c[h>>2]=5640;c[h+48>>2]=c[e>>2];c[h+48+4>>2]=c[e+4>>2];c[h+48+8>>2]=c[e+8>>2];c[h+48+12>>2]=c[e+12>>2];c[h+64>>2]=c[e+16>>2];c[h+64+4>>2]=c[e+16+4>>2];c[h+64+8>>2]=c[e+16+8>>2];c[h+64+12>>2]=c[e+16+12>>2];c[h+80>>2]=c[e+32>>2];c[h+80+4>>2]=c[e+32+4>>2];c[h+80+8>>2]=c[e+32+8>>2];c[h+80+12>>2]=c[e+32+12>>2];c[h+96>>2]=c[e+48>>2];c[h+96+4>>2]=c[e+48+4>>2];c[h+96+8>>2]=c[e+48+8>>2];c[h+96+12>>2]=c[e+48+12>>2];c[h+112>>2]=c[f>>2];c[h+112+4>>2]=c[f+4>>2];c[h+112+8>>2]=c[f+8>>2];c[h+112+12>>2]=c[f+12>>2];c[h+128>>2]=c[f+16>>2];c[h+128+4>>2]=c[f+16+4>>2];c[h+128+8>>2]=c[f+16+8>>2];c[h+128+12>>2]=c[f+16+12>>2];c[h+144>>2]=c[f+32>>2];c[h+144+4>>2]=c[f+32+4>>2];c[h+144+8>>2]=c[f+32+8>>2];c[h+144+12>>2]=c[f+32+12>>2];c[h+160>>2]=c[f+48>>2];c[h+160+4>>2]=c[f+48+4>>2];c[h+160+8>>2]=c[f+48+8>>2];c[h+160+12>>2]=c[f+48+12>>2];b=h+680|0;d=b+48|0;do{c[b>>2]=0;b=b+4|0}while((b|0)<(d|0));c[h+728>>2]=1045220557;c[h+732>>2]=1045220557;c[h+736>>2]=1045220557;c[h+740>>2]=0;c[h+740+4>>2]=0;c[h+740+8>>2]=0;c[h+740+12>>2]=0;c[h+740+16>>2]=0;c[h+760>>2]=1063675494;c[h+764>>2]=1063675494;c[h+768>>2]=1063675494;c[h+804>>2]=0;c[h+804+4>>2]=0;c[h+804+8>>2]=0;c[h+820>>2]=0;c[h+820+4>>2]=0;c[h+820+8>>2]=0;a[h+836>>0]=0;a[h+836+1>>0]=0;a[h+836+2>>0]=0;c[h+840>>2]=0;c[h+840+4>>2]=0;c[h+840+8>>2]=0;a[h+856>>0]=0;a[h+856+1>>0]=0;a[h+856+2>>0]=0;c[h+860>>2]=0;c[h+860+4>>2]=0;c[h+860+8>>2]=0;c[h+876>>2]=0;c[h+876+4>>2]=0;c[h+876+8>>2]=0;c[h+892>>2]=0;c[h+892+4>>2]=0;c[h+892+8>>2]=0;c[h+772>>2]=0;c[h+772+4>>2]=0;c[h+772+8>>2]=0;c[h+772+12>>2]=0;c[h+772+16>>2]=0;c[h+772+20>>2]=0;c[h+772+24>>2]=0;a[h+772+28>>0]=0;b=h+908|0;d=b+60|0;do{c[b>>2]=0;b=b+4|0}while((b|0)<(d|0));g[h+968>>2]=1.0;g[h+972>>2]=-1.0;g[h+976>>2]=0.0;g[h+980>>2]=.20000000298023224;g[h+984>>2]=0.0;g[h+988>>2]=.8999999761581421;g[h+992>>2]=0.0;a[h+996>>0]=0;g[h+1e3>>2]=0.0;g[h+1004>>2]=.10000000149011612;a[h+1008>>0]=0;g[h+1012>>2]=0.0;a[h+1016>>0]=0;g[h+1020>>2]=0.0;a[h+1024>>0]=0;g[h+1028>>2]=0.0;a[h+1032>>0]=0;c[h+1036>>2]=0;c[h+1036+4>>2]=0;c[h+1036+8>>2]=0;c[h+1036+12>>2]=0;c[h+1036+16>>2]=0;g[h+1056>>2]=1.0;g[h+1060>>2]=-1.0;g[h+1064>>2]=0.0;g[h+1068>>2]=.20000000298023224;g[h+1072>>2]=0.0;g[h+1076>>2]=.8999999761581421;g[h+1080>>2]=0.0;a[h+1084>>0]=0;g[h+1088>>2]=0.0;g[h+1092>>2]=.10000000149011612;a[h+1096>>0]=0;g[h+1100>>2]=0.0;a[h+1104>>0]=0;g[h+1108>>2]=0.0;a[h+1112>>0]=0;g[h+1116>>2]=0.0;a[h+1120>>0]=0;c[h+1124>>2]=0;c[h+1124+4>>2]=0;c[h+1124+8>>2]=0;c[h+1124+12>>2]=0;c[h+1124+16>>2]=0;g[h+1144>>2]=1.0;g[h+1148>>2]=-1.0;g[h+1152>>2]=0.0;g[h+1156>>2]=.20000000298023224;g[h+1160>>2]=0.0;g[h+1164>>2]=.8999999761581421;g[h+1168>>2]=0.0;a[h+1172>>0]=0;g[h+1176>>2]=0.0;g[h+1180>>2]=.10000000149011612;a[h+1184>>0]=0;g[h+1188>>2]=0.0;a[h+1192>>0]=0;g[h+1196>>2]=0.0;a[h+1200>>0]=0;g[h+1204>>2]=0.0;a[h+1208>>0]=0;c[h+1456>>2]=0;c[h+1212>>2]=0;c[h+1212+4>>2]=0;c[h+1212+8>>2]=0;c[h+1212+12>>2]=0;c[h+1212+16>>2]=0;c[h+1212+20>>2]=0;pc(h,(c[h+28>>2]|0)+4|0,(c[h+32>>2]|0)+4|0);c[h>>2]=5464;g[h+968>>2]=0.0;g[h+1056>>2]=0.0;g[h+1144>>2]=0.0;g[h+972>>2]=0.0;g[h+1060>>2]=0.0;g[h+1148>>2]=0.0;c[h+680>>2]=0;c[h+680+4>>2]=0;c[h+680+8>>2]=0;c[h+680+12>>2]=0;c[h+680+16>>2]=0;c[h+680+20>>2]=0;c[h+680+24>>2]=0;c[h+680+28>>2]=0;return h|0}function yd(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0,i=0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0;i=l;l=l+16|0;if((a[24184]|0)==0?lx(24184)|0:0){c[i>>2]=0;c[i+4>>2]=0;c[i+8>>2]=0;c[i+12>>2]=0;se(24524,0.0,0,0,i)}c[6182]=c[6182]|1;g[6232]=0.0;j=+g[6242]*0.0;k=+g[6243]*0.0;g[6237]=+g[6241]*0.0;g[6238]=j;g[6239]=k;g[6240]=0.0;c[6245]=0;c[6246]=0;c[6247]=0;c[6248]=0;k=+g[6234]*0.0;j=+g[6235]*0.0;g[6286]=+g[6233]*0.0;g[6287]=k;g[6288]=j;g[6289]=0.0;c[b+4>>2]=6;c[b+8>>2]=-1;c[b+12>>2]=-1;g[b+16>>2]=3402823466385288598117041.0e14;a[b+20>>0]=1;a[b+21>>0]=0;c[b+24>>2]=-1;c[b+28>>2]=24524;c[b+32>>2]=d;g[b+36>>2]=0.0;g[b+40>>2]=.05000000074505806;c[b+44>>2]=0;c[b>>2]=5516;c[b+112>>2]=c[e>>2];c[b+112+4>>2]=c[e+4>>2];c[b+112+8>>2]=c[e+8>>2];c[b+112+12>>2]=c[e+12>>2];c[b+128>>2]=c[e+16>>2];c[b+128+4>>2]=c[e+16+4>>2];c[b+128+8>>2]=c[e+16+8>>2];c[b+128+12>>2]=c[e+16+12>>2];c[b+144>>2]=c[e+32>>2];c[b+144+4>>2]=c[e+32+4>>2];c[b+144+8>>2]=c[e+32+8>>2];c[b+144+12>>2]=c[e+32+12>>2];c[b+160>>2]=c[e+48>>2];c[b+160+4>>2]=c[e+48+4>>2];c[b+160+8>>2]=c[e+48+8>>2];c[b+160+12>>2]=c[e+48+12>>2];e=b+680|0;h=e+48|0;do{c[e>>2]=0;e=e+4|0}while((e|0)<(h|0));c[b+740>>2]=0;c[b+740+4>>2]=0;c[b+740+8>>2]=0;c[b+740+12>>2]=0;c[b+756>>2]=1045220557;c[b+760>>2]=1045220557;c[b+764>>2]=1045220557;c[b+768>>2]=0;c[b+768+4>>2]=0;c[b+768+8>>2]=0;c[b+768+12>>2]=0;c[b+768+16>>2]=0;g[b+728>>2]=.699999988079071;g[b+732>>2]=1.0;g[b+736>>2]=.5;a[b+788>>0]=0;a[b+788+1>>0]=0;a[b+788+2>>0]=0;c[b+792>>2]=0;c[b+792+4>>2]=0;c[b+792+8>>2]=0;c[b+808>>2]=0;c[b+808+4>>2]=0;c[b+808+8>>2]=0;g[b+928>>2]=0.0;g[b+876>>2]=0.0;g[b+880>>2]=.10000000149011612;g[b+884>>2]=300.0;g[b+868>>2]=1.0;g[b+872>>2]=-1.0;g[b+896>>2]=0.0;g[b+900>>2]=.20000000298023224;g[b+904>>2]=0.0;g[b+908>>2]=0.0;g[b+888>>2]=1.0;g[b+892>>2]=.5;c[b+924>>2]=0;g[b+916>>2]=0.0;a[b+912>>0]=0;g[b+992>>2]=0.0;g[b+940>>2]=0.0;g[b+944>>2]=.10000000149011612;g[b+948>>2]=300.0;g[b+932>>2]=1.0;g[b+936>>2]=-1.0;g[b+960>>2]=0.0;g[b+964>>2]=.20000000298023224;g[b+968>>2]=0.0;g[b+972>>2]=0.0;g[b+952>>2]=1.0;g[b+956>>2]=.5;c[b+988>>2]=0;g[b+980>>2]=0.0;a[b+976>>0]=0;g[b+1056>>2]=0.0;g[b+1004>>2]=0.0;g[b+1008>>2]=.10000000149011612;g[b+1012>>2]=300.0;g[b+996>>2]=1.0;g[b+1e3>>2]=-1.0;g[b+1024>>2]=0.0;g[b+1028>>2]=.20000000298023224;g[b+1032>>2]=0.0;g[b+1036>>2]=0.0;g[b+1016>>2]=1.0;g[b+1020>>2]=.5;c[b+1052>>2]=0;g[b+1044>>2]=0.0;a[b+1040>>0]=0;a[b+1300>>0]=f&1;a[b+1301>>0]=1;c[b+1304>>2]=0;a[b+1308>>0]=0;y=+g[b+112>>2];E=+g[d+4>>2];x=+g[b+128>>2];D=+g[d+8>>2];w=+g[b+144>>2];C=+g[d+12>>2];v=+g[b+116>>2];u=+g[b+132>>2];t=+g[b+148>>2];s=+g[b+120>>2];q=+g[b+136>>2];o=+g[b+152>>2];B=+g[d+20>>2];A=+g[d+24>>2];z=+g[d+28>>2];r=+g[d+36>>2];p=+g[d+40>>2];n=+g[d+44>>2];G=+g[b+160>>2];F=+g[b+164>>2];k=+g[b+168>>2];m=+g[d+52>>2]+(E*G+D*F+C*k);j=B*G+A*F+z*k+ +g[d+56>>2];k=r*G+p*F+n*k+ +g[d+60>>2];g[b+48>>2]=y*E+x*D+w*C;g[b+52>>2]=E*v+D*u+C*t;g[b+56>>2]=E*s+D*q+C*o;g[b+60>>2]=0.0;g[b+64>>2]=y*B+x*A+w*z;g[b+68>>2]=v*B+u*A+t*z;g[b+72>>2]=s*B+q*A+o*z;g[b+76>>2]=0.0;g[b+80>>2]=y*r+x*p+w*n;g[b+84>>2]=v*r+u*p+t*n;g[b+88>>2]=s*r+q*p+o*n;g[b+92>>2]=0.0;g[b+96>>2]=m;g[b+100>>2]=j;g[b+104>>2]=k;g[b+108>>2]=0.0;Qc(b,(c[b+28>>2]|0)+4|0,(c[b+32>>2]|0)+4|0);l=i;return}function zd(b,d,e,f,h,i,j,k){b=b|0;d=d|0;e=e|0;f=f|0;h=+h;i=+i;j=j|0;k=k|0;var m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0;w=l;l=l+288|0;c[w+208>>2]=c[d>>2];c[w+208+4>>2]=c[d+4>>2];c[w+208+8>>2]=c[d+8>>2];c[w+208+12>>2]=c[d+12>>2];o=w+208+16|0;c[o>>2]=c[e>>2];c[o+4>>2]=c[e+4>>2];c[o+8>>2]=c[e+8>>2];c[o+12>>2]=c[e+12>>2];e=w+208+32|0;c[e>>2]=c[f>>2];c[e+4>>2]=c[f+4>>2];c[e+8>>2]=c[f+8>>2];c[e+12>>2]=c[f+12>>2];v=c[j>>2]|0;q=c[j+4>>2]|0;r=c[j+8>>2]|0;s=c[j+16>>2]|0;t=c[j+12>>2]|0;p=c[j+20>>2]|0;c[w+156>>2]=c[w+208>>2];c[w+156+4>>2]=c[w+208+4>>2];c[w+156+8>>2]=c[w+208+8>>2];c[w+156+12>>2]=c[w+208+12>>2];c[w+172>>2]=c[o>>2];c[w+172+4>>2]=c[o+4>>2];c[w+172+8>>2]=c[o+8>>2];c[w+172+12>>2]=c[o+12>>2];c[w+188>>2]=c[e>>2];c[w+188+4>>2]=c[e+4>>2];c[w+188+8>>2]=c[e+8>>2];c[w+188+12>>2]=c[e+12>>2];e=c[b+128>>2]|0;if((e|0)==(c[b+132>>2]|0)?(u=(e|0)==0?1:e<<1,(e|0)<(u|0)):0){if(!u)d=0;else{c[6485]=(c[6485]|0)+1;d=ec((u*284|3)+16|0)|0;if(!d)d=0;else{c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16}e=c[b+128>>2]|0}if((e|0)>0){f=0;do{j=c[b+136>>2]|0;m=d+(f*284|0)|0;n=j+(f*284|0)|0;o=m+92|0;do{c[m>>2]=c[n>>2];m=m+4|0;n=n+4|0}while((m|0)<(o|0));m=d+(f*284|0)+92|0;n=j+(f*284|0)+92|0;c[m>>2]=c[n>>2];c[m+4>>2]=c[n+4>>2];c[m+8>>2]=c[n+8>>2];c[m+12>>2]=c[n+12>>2];m=j+(f*284|0)+108|0;n=d+(f*284|0)+108|0;c[n>>2]=c[m>>2];c[n+4>>2]=c[m+4>>2];c[n+8>>2]=c[m+8>>2];c[n+12>>2]=c[m+12>>2];n=j+(f*284|0)+124|0;m=d+(f*284|0)+124|0;c[m>>2]=c[n>>2];c[m+4>>2]=c[n+4>>2];c[m+8>>2]=c[n+8>>2];c[m+12>>2]=c[n+12>>2];m=d+(f*284|0)+140|0;n=j+(f*284|0)+140|0;c[m>>2]=c[n>>2];c[m+4>>2]=c[n+4>>2];c[m+8>>2]=c[n+8>>2];c[m+12>>2]=c[n+12>>2];m=d+(f*284|0)+156|0;n=j+(f*284|0)+156|0;o=m+128|0;do{c[m>>2]=c[n>>2];m=m+4|0;n=n+4|0}while((m|0)<(o|0));f=f+1|0}while((f|0)!=(e|0))}e=c[b+136>>2]|0;if(e|0){if(a[b+140>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[b+136>>2]=0}a[b+140>>0]=1;c[b+136>>2]=d;c[b+132>>2]=u;e=c[b+128>>2]|0}d=c[b+136>>2]|0;m=d+(e*284|0)|0;n=w;o=m+92|0;do{c[m>>2]=c[n>>2];m=m+4|0;n=n+4|0}while((m|0)<(o|0));m=d+(e*284|0)+92|0;c[m>>2]=c[w+92>>2];c[m+4>>2]=c[w+92+4>>2];c[m+8>>2]=c[w+92+8>>2];c[m+12>>2]=c[w+92+12>>2];m=d+(e*284|0)+108|0;c[m>>2]=c[w+108>>2];c[m+4>>2]=c[w+108+4>>2];c[m+8>>2]=c[w+108+8>>2];c[m+12>>2]=c[w+108+12>>2];m=d+(e*284|0)+124|0;c[m>>2]=c[w+124>>2];c[m+4>>2]=c[w+124+4>>2];c[m+8>>2]=c[w+124+8>>2];c[m+12>>2]=c[w+124+12>>2];m=d+(e*284|0)+140|0;c[m>>2]=c[w+140>>2];c[m+4>>2]=c[w+140+4>>2];c[m+8>>2]=c[w+140+8>>2];c[m+12>>2]=c[w+140+12>>2];d=d+(e*284|0)+156|0;m=d;n=w+156|0;o=m+48|0;do{c[m>>2]=c[n>>2];m=m+4|0;n=n+4|0}while((m|0)<(o|0));g[d+48>>2]=h;c[d+52>>2]=t;g[d+56>>2]=i;c[d+60>>2]=v;c[d+64>>2]=q;c[d+68>>2]=r;c[d+72>>2]=s;g[d+76>>2]=0.0;g[d+80>>2]=0.0;g[d+84>>2]=0.0;g[d+88>>2]=.10000000149011612;c[d+92>>2]=p;g[d+96>>2]=0.0;g[d+100>>2]=0.0;a[d+104>>0]=k&1;m=d+105|0;n=w+256|0;o=m+23|0;do{a[m>>0]=a[n>>0]|0;m=m+1|0;n=n+1|0}while((m|0)<(o|0));k=c[b+128>>2]|0;c[b+128>>2]=k+1;k=(c[b+136>>2]|0)+(k*284|0)|0;Uf(c[b+108>>2]|0,k,0);Xd(c[b+108>>2]|0,c[b+136>>2]|0,(c[b+128>>2]|0)+-1|0,0);l=w;return k|0}function Ad(b,d,e,f,g,h){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;var i=0,j=0,k=0,l=0,m=0,n=0,o=0;if((h|0)<0){h=c[b+8>>2]|0;+rb[c[(c[h>>2]|0)+12>>2]&3](h,d,e,f,g,c[b+12>>2]|0,c[b+16>>2]|0,c[b+4>>2]|0,c[b+20>>2]|0,c[b+24>>2]|0);return}o=c[b+16>>2]|0;a:do if((o|0)>0){l=c[b+12>>2]|0;i=0;while(1){m=l+(i<<2)|0;k=c[m>>2]|0;j=c[(c[k+28>>2]|0)+208>>2]|0;if((j|0)<=-1)j=c[(c[k+32>>2]|0)+208>>2]|0;if((j|0)==(h|0))break a;i=i+1|0;if((i|0)>=(o|0)){m=0;break}}}else{i=0;m=0}while(0);if((i|0)<(o|0)){n=c[b+12>>2]|0;j=0;do{l=c[n+(i<<2)>>2]|0;k=c[(c[l+28>>2]|0)+208>>2]|0;if((k|0)<=-1)k=c[(c[l+32>>2]|0)+208>>2]|0;j=j+((k|0)==(h|0)&1)|0;i=i+1|0}while((i|0)!=(o|0));h=j}else h=0;i=c[b+4>>2]|0;if((c[i+80>>2]|0)<2){o=c[b+8>>2]|0;+rb[c[(c[o>>2]|0)+12>>2]&3](o,d,e,f,g,m,h,i,c[b+20>>2]|0,c[b+24>>2]|0);return}if((e|0)>0){n=0;i=c[b+32>>2]|0;j=c[b+36>>2]|0;do{o=d+(n<<2)|0;if((i|0)==(j|0)){l=(j|0)==0?1:j<<1;if((j|0)<(l|0)){if(!l)i=0;else{c[6485]=(c[6485]|0)+1;i=ec((l<<2|3)+16|0)|0;if(!i)i=0;else{c[(i+4+15&-16)+-4>>2]=i;i=i+4+15&-16}j=c[b+32>>2]|0}if((j|0)>0){k=0;do{c[i+(k<<2)>>2]=c[(c[b+40>>2]|0)+(k<<2)>>2];k=k+1|0}while((k|0)!=(j|0))}k=c[b+40>>2]|0;if(k){if(a[b+44>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0);j=c[b+32>>2]|0}c[b+40>>2]=0}a[b+44>>0]=1;c[b+40>>2]=i;c[b+36>>2]=l;i=j;j=l}else i=j}c[(c[b+40>>2]|0)+(i<<2)>>2]=c[o>>2];i=i+1|0;c[b+32>>2]=i;n=n+1|0}while((n|0)!=(e|0))}if((g|0)>0){n=0;i=c[b+52>>2]|0;j=c[b+56>>2]|0;do{o=f+(n<<2)|0;if((i|0)==(j|0)){l=(j|0)==0?1:j<<1;if((j|0)<(l|0)){if(!l)i=0;else{c[6485]=(c[6485]|0)+1;i=ec((l<<2|3)+16|0)|0;if(!i)i=0;else{c[(i+4+15&-16)+-4>>2]=i;i=i+4+15&-16}j=c[b+52>>2]|0}if((j|0)>0){k=0;do{c[i+(k<<2)>>2]=c[(c[b+60>>2]|0)+(k<<2)>>2];k=k+1|0}while((k|0)!=(j|0))}k=c[b+60>>2]|0;if(k){if(a[b+64>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0);j=c[b+52>>2]|0}c[b+60>>2]=0}a[b+64>>0]=1;c[b+60>>2]=i;c[b+56>>2]=l;i=j;j=l}else i=j}c[(c[b+60>>2]|0)+(i<<2)>>2]=c[o>>2];i=i+1|0;c[b+52>>2]=i;n=n+1|0}while((n|0)!=(g|0))}if(!h)i=c[b+72>>2]|0;else{o=0;i=c[b+72>>2]|0;j=c[b+76>>2]|0;do{n=m+(o<<2)|0;if((i|0)==(j|0)){l=(j|0)==0?1:j<<1;if((j|0)<(l|0)){if(!l){k=0;i=j}else{c[6485]=(c[6485]|0)+1;i=ec((l<<2|3)+16|0)|0;if(!i)i=0;else{c[(i+4+15&-16)+-4>>2]=i;i=i+4+15&-16}k=i;i=c[b+72>>2]|0}if((i|0)>0){j=0;do{c[k+(j<<2)>>2]=c[(c[b+80>>2]|0)+(j<<2)>>2];j=j+1|0}while((j|0)!=(i|0))}j=c[b+80>>2]|0;if(j){if(a[b+84>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0);i=c[b+72>>2]|0}c[b+80>>2]=0}a[b+84>>0]=1;c[b+80>>2]=k;c[b+76>>2]=l;j=l}else i=j}c[(c[b+80>>2]|0)+(i<<2)>>2]=c[n>>2];i=i+1|0;c[b+72>>2]=i;o=o+1|0}while((o|0)!=(h|0))}if(((c[b+52>>2]|0)+i|0)<=(c[(c[b+4>>2]|0)+80>>2]|0))return;jg(b);return}function Bd(d,f,h,i){d=d|0;f=f|0;h=h|0;i=i|0;var j=0,k=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0;w=l;l=l+80|0;v=c[d+52>>2]|0;c[w>>2]=8064;c[w+4>>2]=v;c[w+8>>2]=f;c[w+60>>2]=0;v=c[d+56>>2]|0;if(!(a[v+60>>0]|0)){f=c[v+56>>2]|0;if((f|0)>0){p=0;d=0;m=c[v+96>>2]|0;while(1){d=d+1|0;if(!(+g[h>>2]>+g[m+16>>2])?!(+g[i>>2]<+g[m>>2]):0)j=1;else j=0;if(!(!(+g[h+8>>2]>+g[m+24>>2])?!(+g[i+8>>2]<+g[m+8>>2]):0))j=0;if(!(+g[h+4>>2]>+g[m+20>>2])?!(+g[i+4>>2]<+g[m+4>>2]):0){k=c[m+32>>2]|0;if(j&(k|0)==-1){Mb[c[(c[w>>2]|0)+8>>2]&127](w,c[m+36>>2]|0,c[m+40>>2]|0);f=c[v+56>>2]|0;o=44}else{n=(k|0)==-1;o=43}}else{k=c[m+32>>2]|0;n=(k|0)==-1;j=0;o=43}if((o|0)==43){o=0;if(n|j)o=44;else{m=m+(k<<6)|0;j=k+p|0}}if((o|0)==44){m=m+64|0;j=p+1|0}if((j|0)<(f|0))p=j;else break}}else d=0;if((c[6478]|0)>=(d|0)){l=w;return}c[6478]=d;l=w;return}y=+g[h>>2];C=+g[h+4>>2];G=+g[h+8>>2];F=+g[v+4>>2];y=y<F?F:y;B=+g[v+8>>2];C=C<B?B:C;x=+g[v+12>>2];G=G<x?x:G;H=+g[v+20>>2];D=+g[v+24>>2];z=+g[v+28>>2];I=+g[v+36>>2];E=+g[v+40>>2];A=+g[v+44>>2];s=~~(((H<y?H:y)-F)*I)&65535&-2;b[w+70>>1]=s;t=~~(((D<C?D:C)-B)*E)&65535&-2;u=~~(((z<G?z:G)-x)*A)&65535&-2;b[w+70+2>>1]=t;b[w+70+4>>1]=u;G=+g[i>>2];C=+g[i+4>>2];y=+g[i+8>>2];G=G<F?F:G;C=C<B?B:C;y=y<x?x:y;i=~~(I*((H<G?H:G)-F)+1.0)&65535|1;b[w+64>>1]=i;q=~~(E*((D<C?D:C)-B)+1.0)&65535|1;r=~~(A*((z<y?z:y)-x)+1.0)&65535|1;b[w+64+2>>1]=q;b[w+64+4>>1]=r;switch(c[v+144>>2]|0){case 0:{o=c[v+56>>2]|0;if((o|0)>0){d=0;f=c[v+136>>2]|0;j=0;do{d=d+1|0;k=((i&65535)>=(e[f>>1]|0)?(s&65535)<=(e[f+6>>1]|0):0)&(u&65535)<=(e[f+10>>1]|0)&(r&65535)>=(e[f+4>>1]|0)&(t&65535)<=(e[f+8>>1]|0)&(q&65535)>=(e[f+2>>1]|0);m=f+12|0;n=c[m>>2]|0;if((n|0)>-1&k)Mb[c[(c[w>>2]|0)+8>>2]&127](w,n>>>21,n&2097151);if(k|(n|0)>-1){j=j+1|0;f=f+16|0}else{v=c[m>>2]|0;j=j-v|0;f=f+(0-v<<4)|0}}while((j|0)<(o|0))}else d=0;if((c[6478]|0)<(d|0))c[6478]=d;break}case 1:{if((c[v+152>>2]|0)>0){h=0;do{d=c[v+160>>2]|0;if(((i&65535)>=(e[d+(h<<5)>>1]|0)?(s&65535)<=(e[d+(h<<5)+6>>1]|0):0)&(u&65535)<=(e[d+(h<<5)+10>>1]|0)&(r&65535)>=(e[d+(h<<5)+4>>1]|0)&(t&65535)<=(e[d+(h<<5)+8>>1]|0)&(q&65535)>=(e[d+(h<<5)+2>>1]|0)){p=c[d+(h<<5)+12>>2]|0;o=c[d+(h<<5)+16>>2]|0;a:do if((o|0)>0){d=0;f=(c[v+136>>2]|0)+(p<<4)|0;j=p;while(1){d=d+1|0;k=((i&65535)>=(e[f>>1]|0)?(s&65535)<=(e[f+6>>1]|0):0)&(u&65535)<=(e[f+10>>1]|0)&(r&65535)>=(e[f+4>>1]|0)&(t&65535)<=(e[f+8>>1]|0)&(q&65535)>=(e[f+2>>1]|0);m=f+12|0;n=c[m>>2]|0;if((n|0)>-1&k)Mb[c[(c[w>>2]|0)+8>>2]&127](w,n>>>21,n&2097151);if(k|(n|0)>-1){j=j+1|0;f=f+16|0}else{n=c[m>>2]|0;j=j-n|0;f=f+(0-n<<4)|0}if((j|0)>=(o+p|0))break a}}else d=0;while(0);if((c[6478]|0)<(d|0))c[6478]=d}h=h+1|0}while((h|0)<(c[v+152>>2]|0))}break}case 2:{cj(c[v+136>>2]|0,w,w+70|0,w+64|0);break}default:{}}l=w;return}function Cd(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0;c[b>>2]=7360;k=(c[d+20>>2]|0)==0;c[6485]=(c[6485]|0)+1;e=ec(23)|0;c[(e+4+15&-16)+-4>>2]=e;c[(e+4+15&-16)>>2]=k?10268:10228;c[b+24>>2]=e+4+15&-16;c[6485]=(c[6485]|0)+1;e=ec(39)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}k=c[b+24>>2]|0;a[e+4>>0]=0;c[e>>2]=10776;c[e+12>>2]=0;c[e+16>>2]=3;c[e+8>>2]=k;c[b+28>>2]=e;c[6485]=(c[6485]|0)+1;e=ec(27)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}a[e+4>>0]=0;c[e>>2]=7392;c[b+32>>2]=e;c[6485]=(c[6485]|0)+1;e=ec(27)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}a[e+4>>0]=0;c[e>>2]=7412;c[b+36>>2]=e;c[6485]=(c[6485]|0)+1;e=ec(27)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}a[e+4>>0]=0;c[e>>2]=7432;c[b+40>>2]=e;c[6485]=(c[6485]|0)+1;e=ec(27)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}a[e+4>>0]=0;c[e>>2]=7452;c[b+44>>2]=e;c[6485]=(c[6485]|0)+1;e=ec(27)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}a[e+4>>0]=0;c[e>>2]=7472;c[b+48>>2]=e;c[6485]=(c[6485]|0)+1;e=ec(27)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}a[e+4>>0]=0;c[e>>2]=7492;c[b+52>>2]=e;c[6485]=(c[6485]|0)+1;e=ec(27)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}a[e+4>>0]=0;c[e>>2]=7512;c[b+56>>2]=e;c[6485]=(c[6485]|0)+1;e=ec(27)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}a[e+4>>0]=0;c[e>>2]=7532;c[b+72>>2]=e;c[6485]=(c[6485]|0)+1;e=ec(27)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}c[e>>2]=7532;c[b+76>>2]=e;a[e+4>>0]=1;c[6485]=(c[6485]|0)+1;e=ec(27)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}a[e+4>>0]=0;c[e>>2]=7552;c[b+68>>2]=e;c[6485]=(c[6485]|0)+1;e=ec(35)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}a[e+4>>0]=0;c[e>>2]=7572;c[e+8>>2]=1;c[e+12>>2]=0;c[b+84>>2]=e;c[6485]=(c[6485]|0)+1;e=ec(35)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}c[e>>2]=7572;c[e+8>>2]=1;c[e+12>>2]=0;c[b+80>>2]=e;a[e+4>>0]=1;k=c[d+16>>2]|0;k=(k|0)>80?k:80;e=c[d>>2]|0;if(!e){a[b+12>>0]=1;c[6485]=(c[6485]|0)+1;e=ec(43)|0;if(!e)j=0;else{c[(e+4+15&-16)+-4>>2]=e;j=e+4+15&-16}e=c[d+8>>2]|0;c[j>>2]=804;f=j+4|0;c[f>>2]=e;c[j+20>>2]=0;c[6485]=(c[6485]|0)+1;e=ec((e*804|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}c[j+16>>2]=e;c[j+12>>2]=e;g=c[f>>2]|0;c[j+8>>2]=g;if(g+-1|0){h=c[j>>2]|0;f=e;i=g+-1|0;do{l=f;f=f+h|0;c[l>>2]=f;i=i+-1|0}while((i|0)!=0);e=e+(N(h,g+-1|0)|0)|0}c[e>>2]=0;c[b+8>>2]=j}else{a[b+12>>0]=0;c[b+8>>2]=e}g=(k|0)>116?k+16&-16:128;e=c[d+4>>2]|0;if(e|0){a[b+20>>0]=0;c[b+16>>2]=e;return}a[b+20>>0]=1;c[6485]=(c[6485]|0)+1;e=ec(43)|0;if(!e)j=0;else{c[(e+4+15&-16)+-4>>2]=e;j=e+4+15&-16}e=c[d+12>>2]|0;c[j>>2]=g;f=j+4|0;c[f>>2]=e;c[j+20>>2]=0;e=N(e,g)|0;c[6485]=(c[6485]|0)+1;e=ec((e|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}c[j+16>>2]=e;c[j+12>>2]=e;g=c[f>>2]|0;c[j+8>>2]=g;if(g+-1|0){h=c[j>>2]|0;f=e;i=g+-1|0;do{l=f;f=f+h|0;c[l>>2]=f;i=i+-1|0}while((i|0)!=0);e=e+(N(h,g+-1|0)|0)|0}c[e>>2]=0;c[b+16>>2]=j;return}function Dd(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var h=0.0,i=0.0,k=0,l=0,m=0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0;G=+g[a>>2];H=+g[b>>2];I=+g[a+4>>2];w=+g[b+4>>2];x=+g[a+8>>2];y=+g[b+8>>2];z=+g[d>>2];A=+g[d+4>>2];C=+g[d+8>>2];D=(I-w)*(y-C)-(x-y)*(w-A);E=(x-y)*(H-z)-(G-H)*(y-C);F=(G-H)*(w-A)-(I-w)*(H-z);if(!(F*F+(D*D+E*E)>0.0)){I=-1.0;return +I}if(G*(F*(I-w)-E*(x-y))+I*(D*(x-y)-F*(G-H))+(E*(G-H)-D*(I-w))*x>0.0){do if((H-G)*(H-G)+(w-I)*(w-I)+(y-x)*(y-x)>0.0){h=-(G*(H-G)+I*(w-I)+x*(y-x))/((H-G)*(H-G)+(w-I)*(w-I)+(y-x)*(y-x));if(h>=1.0){l=2;i=H*H+w*w+y*y;m=0;k=1065353216;break}if(!(h<=0.0)){k=(g[j>>2]=h,c[j>>2]|0);l=3;i=(x+(y-x)*h)*(x+(y-x)*h)+((G+(H-G)*h)*(G+(H-G)*h)+(I+(w-I)*h)*(I+(w-I)*h));m=(g[j>>2]=1.0-h,c[j>>2]|0);break}else{l=1;i=G*G+I*I+x*x;m=1065353216;k=0;break}}else{l=0;i=-1.0;m=0;k=0}while(0);c[f>>2]=l;c[e>>2]=m;c[e+4>>2]=k;g[e+8>>2]=0.0;q=+g[b>>2];r=+g[b+4>>2];s=+g[b+8>>2]}else{i=-1.0;l=0;m=0;k=0;q=H;r=w;s=y}if(q*(F*(w-A)-E*(y-C))+r*(D*(y-C)-F*(H-z))+(E*(H-z)-D*(w-A))*s>0.0){t=+g[d>>2];h=t-q;u=+g[d+4>>2];o=u-r;v=+g[d+8>>2];p=v-s;do if(h*h+o*o+p*p>0.0){n=-(q*h+r*o+s*p)/(h*h+o*o+p*p);if(n>=1.0){l=2;h=t*t+u*u+v*v;m=0;k=1065353216;break}if(!(n<=0.0)){k=(g[j>>2]=n,c[j>>2]|0);v=q+h*n;h=r+o*n;u=s+p*n;l=3;h=u*u+(v*v+h*h);m=(g[j>>2]=1.0-n,c[j>>2]|0);break}else{l=1;h=q*q+r*r+s*s;m=1065353216;k=0;break}}else h=-1.0;while(0);if(i<0.0|h<i){c[f>>2]=l<<1&6;c[e+4>>2]=m;c[e+8>>2]=k;g[e>>2]=0.0;i=h}}h=+g[d>>2];o=+g[d+4>>2];p=+g[d+8>>2];if(h*(F*(A-I)-E*(C-x))+o*(D*(C-x)-F*(z-G))+(E*(z-G)-D*(A-I))*p>0.0){q=+g[a>>2];r=+g[a+4>>2];s=+g[a+8>>2];do if((q-h)*(q-h)+(r-o)*(r-o)+(s-p)*(s-p)>0.0){n=-(h*(q-h)+o*(r-o)+p*(s-p))/((q-h)*(q-h)+(r-o)*(r-o)+(s-p)*(s-p));if(n>=1.0){l=2;h=q*q+r*r+s*s;m=0;k=1065353216;break}if(!(n<=0.0)){k=(g[j>>2]=n,c[j>>2]|0);l=3;h=(p+(s-p)*n)*(p+(s-p)*n)+((h+(q-h)*n)*(h+(q-h)*n)+(o+(r-o)*n)*(o+(r-o)*n));m=(g[j>>2]=1.0-n,c[j>>2]|0);break}else{l=1;h=h*h+o*o+p*p;m=1065353216;k=0;break}}else h=-1.0;while(0);if(i<0.0|h<i){c[f>>2]=l<<2&4|l>>>1&1;c[e+8>>2]=m;c[e>>2]=k;g[e+4>>2]=0.0}else h=i}else h=i;if(!(h<0.0)){I=h;return +I}u=+B(+(F*F+(D*D+E*E)));v=(D*+g[a>>2]+E*+g[a+4>>2]+F*+g[a+8>>2])/(F*F+(D*D+E*E));c[f>>2]=7;s=+g[b>>2]-D*v;r=+g[b+4>>2]-E*v;t=+g[b+8>>2]-F*v;H=+B(+(((H-z)*r-(w-A)*s)*((H-z)*r-(w-A)*s)+(((w-A)*t-(y-C)*r)*((w-A)*t-(y-C)*r)+((y-C)*s-(H-z)*t)*((y-C)*s-(H-z)*t))))/u;g[e>>2]=H;w=+g[d>>2]-D*v;t=+g[d+4>>2]-E*v;y=+g[d+8>>2]-F*v;I=+B(+(((z-G)*t-(A-I)*w)*((z-G)*t-(A-I)*w)+(((A-I)*y-(C-x)*t)*((A-I)*y-(C-x)*t)+((C-x)*w-(z-G)*y)*((C-x)*w-(z-G)*y))))/u;g[e+4>>2]=I;g[e+8>>2]=1.0-(H+I);I=F*v*F*v+(D*v*D*v+E*v*E*v);return +I}function Ed(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,h=0,i=0,j=0,k=0,m=0,n=0,o=0,p=0,q=0.0,r=0.0;p=l;l=l+144|0;if((c[a+20>>2]|0)<=0){o=a+80|0;c[o>>2]=c[b>>2];c[o+4>>2]=c[b+4>>2];c[o+8>>2]=c[b+8>>2];c[o+12>>2]=c[b+12>>2];o=c[a>>2]|0;o=o+68|0;o=c[o>>2]|0;Db[o&255](a);l=p;return}j=p+16+16|0;k=p+16+32|0;m=p+16+48|0;i=0;do{o=c[a+28>>2]|0;n=o+(i*80|0)|0;c[p+16>>2]=c[n>>2];c[p+16+4>>2]=c[n+4>>2];c[p+16+8>>2]=c[n+8>>2];c[p+16+12>>2]=c[n+12>>2];n=o+(i*80|0)+16|0;c[j>>2]=c[n>>2];c[j+4>>2]=c[n+4>>2];c[j+8>>2]=c[n+8>>2];c[j+12>>2]=c[n+12>>2];n=o+(i*80|0)+32|0;c[k>>2]=c[n>>2];c[k+4>>2]=c[n+4>>2];c[k+8>>2]=c[n+8>>2];c[k+12>>2]=c[n+12>>2];n=o+(i*80|0)+48|0;c[m>>2]=c[n>>2];c[m+4>>2]=c[n+4>>2];c[m+8>>2]=c[n+8>>2];c[m+12>>2]=c[n+12>>2];o=c[o+(i*80|0)+64>>2]|0;o=sb[c[(c[o>>2]|0)+28>>2]&127](o)|0;c[p>>2]=c[o>>2];c[p+4>>2]=c[o+4>>2];c[p+8>>2]=c[o+8>>2];q=+g[p+4>>2]*+g[b+4>>2]/+g[a+84>>2];r=+g[p+8>>2]*+g[b+8>>2]/+g[a+88>>2];g[p>>2]=+g[p>>2]*+g[b>>2]/+g[a+80>>2];g[p+4>>2]=q;g[p+8>>2]=r;g[p+12>>2]=0.0;o=c[(c[a+28>>2]|0)+(i*80|0)+64>>2]|0;Ib[c[(c[o>>2]|0)+24>>2]&127](o,p);r=+g[p+16+52>>2]*+g[b+4>>2]/+g[a+84>>2];q=+g[p+16+56>>2]*+g[b+8>>2]/+g[a+88>>2];g[p+16+48>>2]=+g[m>>2]*+g[b>>2]/+g[a+80>>2];g[p+16+52>>2]=r;g[p+16+56>>2]=q;g[p+16+60>>2]=0.0;o=c[a+28>>2]|0;n=o+(i*80|0)|0;c[n>>2]=c[p+16>>2];c[n+4>>2]=c[p+16+4>>2];c[n+8>>2]=c[p+16+8>>2];c[n+12>>2]=c[p+16+12>>2];n=o+(i*80|0)+16|0;c[n>>2]=c[j>>2];c[n+4>>2]=c[j+4>>2];c[n+8>>2]=c[j+8>>2];c[n+12>>2]=c[j+12>>2];n=o+(i*80|0)+32|0;c[n>>2]=c[k>>2];c[n+4>>2]=c[k+4>>2];c[n+8>>2]=c[k+8>>2];c[n+12>>2]=c[k+12>>2];o=o+(i*80|0)+48|0;c[o>>2]=c[m>>2];c[o+4>>2]=c[m+4>>2];c[o+8>>2]=c[m+8>>2];c[o+12>>2]=c[m+12>>2];if(c[a+68>>2]|0){n=c[(c[a+28>>2]|0)+(i*80|0)+64>>2]|0;Pb[c[(c[n>>2]|0)+8>>2]&127](n,p+16|0,p+128|0,p+112|0);c[p+80>>2]=c[p+128>>2];c[p+80+4>>2]=c[p+128+4>>2];c[p+80+8>>2]=c[p+128+8>>2];c[p+80+12>>2]=c[p+128+12>>2];c[p+80+16>>2]=c[p+112>>2];c[p+80+16+4>>2]=c[p+112+4>>2];c[p+80+16+8>>2]=c[p+112+8>>2];c[p+80+16+12>>2]=c[p+112+12>>2];n=c[a+68>>2]|0;o=c[(c[a+28>>2]|0)+(i*80|0)+76>>2]|0;d=fg(n,o)|0;a:do if(d){h=c[n+8>>2]|0;if((h|0)<=-1){d=c[n>>2]|0;break}if(h){e=0;while(1){f=c[d+32>>2]|0;e=e+1|0;if(!f)break a;if((e|0)>=(h|0)){d=f;break}else d=f}}}else d=0;while(0);c[o>>2]=c[p+80>>2];c[o+4>>2]=c[p+80+4>>2];c[o+8>>2]=c[p+80+8>>2];c[o+12>>2]=c[p+80+12>>2];c[o+16>>2]=c[p+80+16>>2];c[o+20>>2]=c[p+80+20>>2];c[o+24>>2]=c[p+80+24>>2];c[o+28>>2]=c[p+80+28>>2];ue(n,d,o)}i=i+1|0}while((i|0)<(c[a+20>>2]|0));o=a+80|0;c[o>>2]=c[b>>2];c[o+4>>2]=c[b+4>>2];c[o+8>>2]=c[b+8>>2];c[o+12>>2]=c[b+12>>2];o=c[a>>2]|0;o=o+68|0;o=c[o>>2]|0;Db[o&255](a);l=p;return}function Fd(b,d){b=b|0;d=d|0;var e=0,f=0,h=0,i=0.0,j=0.0,k=0.0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0.0,u=0.0;s=l;l=l+96|0;q=c[b+12>>2]|0;Pb[c[(c[q>>2]|0)+8>>2]&127](q,(c[b+8>>2]|0)+4|0,s+80|0,s+64|0);q=c[d+68>>2]|0;Tb[c[(c[q>>2]|0)+16>>2]&31](q,c[(c[b+8>>2]|0)+188>>2]|0,s+80|0,s+64|0,c[d+24>>2]|0);q=c[d+24>>2]|0;Pb[c[(c[q>>2]|0)+32>>2]&127](q,c[(c[b+8>>2]|0)+344>>2]|0,d+28|0,q);q=c[b+8>>2]|0;c[b+132>>2]=c[q+52>>2];c[b+132+4>>2]=c[q+52+4>>2];c[b+132+8>>2]=c[q+52+8>>2];c[b+132+12>>2]=c[q+52+12>>2];q=c[q+344>>2]|0;if((sb[c[(c[q>>2]|0)+36>>2]&127](q)|0)>0){d=0;q=0;do{e=c[b+204>>2]|0;if((e|0)<0){if((c[b+208>>2]|0)<0){f=c[b+212>>2]|0;if(f|0){if(a[b+216>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[b+212>>2]=0}a[b+216>>0]=1;c[b+212>>2]=0;c[b+208>>2]=0}do{c[(c[b+212>>2]|0)+(e<<2)>>2]=0;e=e+1|0}while((e|0)!=0)}c[b+204>>2]=0;e=c[(c[b+8>>2]|0)+344>>2]|0;e=c[(sb[c[(c[e>>2]|0)+28>>2]&127](e)|0)+12>>2]|0;f=c[c[e+(q<<4)>>2]>>2]|0;h=c[c[e+(q<<4)+4>>2]>>2]|0;if(!((f|0)!=0?(c[f+204>>2]&4|0)!=0:0))r=15;do if((r|0)==15){r=0;if(h|0?c[h+204>>2]&4|0:0)break;if(wb[c[(c[b>>2]|0)+56>>2]&63](b,f,h)|0){e=c[e+(q<<4)+8>>2]|0;if(e|0)Ib[c[(c[e>>2]|0)+16>>2]&127](e,b+200|0);n=c[b+204>>2]|0;if((n|0)>0){o=c[b+212>>2]|0;p=c[b+8>>2]|0;m=0;do{f=c[o+(m<<2)>>2]|0;j=(c[f+772>>2]|0)==(p|0)?-1.0:1.0;h=c[f+780>>2]|0;if((h|0)>0){k=-+g[b+16>>2];e=0;do{i=+g[f+4+(e*192|0)+80>>2];if(i<k){u=i*j*+g[f+4+(e*192|0)+68>>2]*.20000000298023224;t=i*j*+g[f+4+(e*192|0)+72>>2]*.20000000298023224;g[b+132>>2]=i*j*+g[f+4+(e*192|0)+64>>2]*.20000000298023224+ +g[b+132>>2];g[b+136>>2]=u+ +g[b+136>>2];g[b+140>>2]=t+ +g[b+140>>2];d=1}e=e+1|0}while((e|0)!=(h|0))}m=m+1|0}while((m|0)!=(n|0))}}}while(0);q=q+1|0;p=c[(c[b+8>>2]|0)+344>>2]|0}while((q|0)<(sb[c[(c[p>>2]|0)+36>>2]&127](p)|0))}else d=0;r=c[b+8>>2]|0;c[s>>2]=c[r+4>>2];c[s+4>>2]=c[r+4+4>>2];c[s+8>>2]=c[r+4+8>>2];c[s+12>>2]=c[r+4+12>>2];c[s+16>>2]=c[r+20>>2];c[s+16+4>>2]=c[r+20+4>>2];c[s+16+8>>2]=c[r+20+8>>2];c[s+16+12>>2]=c[r+20+12>>2];c[s+32>>2]=c[r+36>>2];c[s+32+4>>2]=c[r+36+4>>2];c[s+32+8>>2]=c[r+36+8>>2];c[s+32+12>>2]=c[r+36+12>>2];c[s+48>>2]=c[b+132>>2];c[s+48+4>>2]=c[b+132+4>>2];c[s+48+8>>2]=c[b+132+8>>2];c[s+48+12>>2]=c[b+132+12>>2];c[r+304>>2]=(c[r+304>>2]|0)+1;c[r+4>>2]=c[s>>2];c[r+4+4>>2]=c[s+4>>2];c[r+4+8>>2]=c[s+8>>2];c[r+4+12>>2]=c[s+12>>2];c[r+20>>2]=c[s+16>>2];c[r+20+4>>2]=c[s+16+4>>2];c[r+20+8>>2]=c[s+16+8>>2];c[r+20+12>>2]=c[s+16+12>>2];c[r+36>>2]=c[s+32>>2];c[r+36+4>>2]=c[s+32+4>>2];c[r+36+8>>2]=c[s+32+8>>2];c[r+36+12>>2]=c[s+32+12>>2];c[r+52>>2]=c[s+48>>2];c[r+52+4>>2]=c[s+48+4>>2];c[r+52+8>>2]=c[s+48+8>>2];c[r+52+12>>2]=c[s+48+12>>2];l=s;return d|0}function Gd(d,f,h,i,j,k){d=d|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;var l=0.0,m=0.0,n=0.0;c[d>>2]=6368;b[d+4>>1]=-2;b[d+6>>1]=-1;c[d+92>>2]=j;c[d+96>>2]=0;a[d+100>>0]=0;c[d+104>>2]=0;c[d+108>>2]=0;if(!j){c[6485]=(c[6485]|0)+1;j=ec(91)|0;if(!j)j=0;else{c[(j+4+15&-16)+-4>>2]=j;j=j+4+15&-16}zh(j);c[d+92>>2]=j;a[d+100>>0]=1}if(!k){c[6485]=(c[6485]|0)+1;j=ec(43)|0;if(!j)j=0;else{c[(j+4+15&-16)+-4>>2]=j;j=j+4+15&-16}k=j+4|0;c[k>>2]=0;c[k+4>>2]=0;c[k+8>>2]=0;c[k+12>>2]=0;c[k+16>>2]=0;c[j>>2]=6432;a[j+20>>0]=1;c[j+16>>2]=0;c[j+8>>2]=0;c[j+12>>2]=0;c[d+112>>2]=j;c[6485]=(c[6485]|0)+1;j=ec(195)|0;if(!j)j=0;else{c[(j+4+15&-16)+-4>>2]=j;j=j+4+15&-16}ce(j,c[d+112>>2]|0);c[d+108>>2]=j;a[j+153>>0]=1}c[d+8>>2]=c[f>>2];c[d+8+4>>2]=c[f+4>>2];c[d+8+8>>2]=c[f+8>>2];c[d+8+12>>2]=c[f+12>>2];c[d+24>>2]=c[h>>2];c[d+24+4>>2]=c[h+4>>2];c[d+24+8>>2]=c[h+8>>2];c[d+24+12>>2]=c[h+12>>2];n=+(e[d+6>>1]|0);m=n/(+g[d+28>>2]-+g[d+12>>2]);l=n/(+g[d+32>>2]-+g[d+16>>2]);g[d+40>>2]=n/(+g[d+24>>2]-+g[d+8>>2]);g[d+44>>2]=m;g[d+48>>2]=l;g[d+52>>2]=0.0;h=i+1&65535;c[6485]=(c[6485]|0)+1;j=ec(h<<6|19)|0;if(!j)f=0;else{c[(j+4+15&-16)+-4>>2]=j;f=j+4+15&-16}if(i+1<<16>>16<<16>>16){j=f+(h<<6)|0;k=f;do{c[k>>2]=0;k=k+64|0}while((k|0)!=(j|0))}c[d+60>>2]=f;b[d+58>>1]=(i&65535)+1;b[d+56>>1]=0;b[d+64>>1]=1;if((i+1&65535)>1?(b[f+112>>1]=2,i+1<<16>>16<<16>>16!=2):0){j=2;do{i=j;j=j+1|0;b[f+(i<<6)+48>>1]=j}while((j|0)!=(h|0))}b[f+(h+-1<<6)+48>>1]=0;c[6485]=(c[6485]|0)+1;j=ec((h<<3|3)+16|0)|0;if(!j)j=0;else{c[(j+4+15&-16)+-4>>2]=j;j=j+4+15&-16}c[d+80>>2]=j;c[d+68>>2]=j;c[6485]=(c[6485]|0)+1;j=ec((h<<3|3)+16|0)|0;if(!j)j=0;else{c[(j+4+15&-16)+-4>>2]=j;j=j+4+15&-16}c[d+84>>2]=j;c[d+72>>2]=j;c[6485]=(c[6485]|0)+1;j=ec((h<<3|3)+16|0)|0;if(!j){f=0;i=d+88|0;c[i>>2]=f;i=d+76|0;c[i>>2]=f;f=c[d+60>>2]|0;c[f>>2]=0;h=f+48|0;b[h>>1]=0;h=f+54|0;b[h>>1]=1;h=c[d+68>>2]|0;b[h>>1]=0;k=h+2|0;b[k>>1]=0;k=b[d+6>>1]|0;j=h+4|0;b[j>>1]=k;h=h+6|0;b[h>>1]=0;h=f+50|0;b[h>>1]=0;h=f+56|0;b[h>>1]=1;h=c[d+72>>2]|0;b[h>>1]=0;j=h+2|0;b[j>>1]=0;j=b[d+6>>1]|0;k=h+4|0;b[k>>1]=j;h=h+6|0;b[h>>1]=0;h=f+52|0;b[h>>1]=0;f=f+58|0;b[f>>1]=1;i=c[i>>2]|0;b[i>>1]=0;f=i+2|0;b[f>>1]=0;f=b[d+6>>1]|0;h=i+4|0;b[h>>1]=f;i=i+6|0;b[i>>1]=0;c[d>>2]=6304;return}c[(j+4+15&-16)+-4>>2]=j;f=j+4+15&-16;i=d+88|0;c[i>>2]=f;i=d+76|0;c[i>>2]=f;f=c[d+60>>2]|0;c[f>>2]=0;h=f+48|0;b[h>>1]=0;h=f+54|0;b[h>>1]=1;h=c[d+68>>2]|0;b[h>>1]=0;k=h+2|0;b[k>>1]=0;k=b[d+6>>1]|0;j=h+4|0;b[j>>1]=k;h=h+6|0;b[h>>1]=0;h=f+50|0;b[h>>1]=0;h=f+56|0;b[h>>1]=1;h=c[d+72>>2]|0;b[h>>1]=0;j=h+2|0;b[j>>1]=0;j=b[d+6>>1]|0;k=h+4|0;b[k>>1]=j;h=h+6|0;b[h>>1]=0;h=f+52|0;b[h>>1]=0;f=f+58|0;b[f>>1]=1;i=c[i>>2]|0;b[i>>1]=0;f=i+2|0;b[f>>1]=0;f=b[d+6>>1]|0;h=i+4|0;b[h>>1]=f;i=i+6|0;b[i>>1]=0;c[d>>2]=6304;return}function Hd(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0.0,S=0.0,T=0.0,U=0.0,V=0.0,W=0,X=0.0,Y=0.0;W=l;l=l+240|0;f=(a[b+76>>0]|0)!=0;h=f?e:d;f=f?d:e;S=+g[h+116>>2]-+g[h+52>>2];T=+g[h+120>>2]-+g[h+56>>2];U=+g[h+124>>2]-+g[h+60>>2];V=+g[h+276>>2];if(S*S+T*T+U*U<V*V){X=1.0;l=W;return +X}H=+g[f+4>>2];I=+g[f+20>>2];J=+g[f+36>>2];K=+g[f+8>>2];L=+g[f+24>>2];M=+g[f+40>>2];N=+g[f+12>>2];O=+g[f+28>>2];P=+g[f+44>>2];j=-+g[f+52>>2];k=-+g[f+56>>2];m=-+g[f+60>>2];Q=+g[h+4>>2];R=+g[h+20>>2];S=+g[h+36>>2];T=+g[h+8>>2];U=+g[h+24>>2];V=+g[h+40>>2];p=+g[h+12>>2];q=+g[h+28>>2];r=+g[h+44>>2];w=+g[h+52>>2];v=+g[h+56>>2];u=+g[h+60>>2];s=H*j+I*k+J*m+(H*w+I*v+J*u);t=K*j+L*k+M*m+(K*w+L*v+M*u);u=N*j+O*k+P*m+(N*w+O*v+P*u);v=+g[h+68>>2];w=+g[h+84>>2];x=+g[h+100>>2];y=+g[h+72>>2];z=+g[h+88>>2];A=+g[h+104>>2];B=+g[h+76>>2];C=+g[h+92>>2];D=+g[h+108>>2];n=+g[h+116>>2];o=+g[h+120>>2];G=+g[h+124>>2];E=H*j+I*k+J*m+(H*n+I*o+J*G);F=K*j+L*k+M*m+(K*n+L*o+M*G);G=N*j+O*k+P*m+(N*n+O*o+P*G);f=c[f+192>>2]|0;if(((c[f+4>>2]|0)+-21|0)>>>0>=9){X=1.0;l=W;return +X}g[W+224>>2]=s;g[W+224+4>>2]=t;g[W+224+8>>2]=u;g[W+224+12>>2]=0.0;if(E<s){g[W+224>>2]=E;i=E}else i=s;if(F<t){g[W+224+4>>2]=F;j=F}else j=t;if(G<u){g[W+224+8>>2]=G;k=G}else k=u;g[W+208>>2]=s;g[W+208+4>>2]=t;g[W+208+8>>2]=u;g[W+208+12>>2]=0.0;if(s<E){g[W+208>>2]=E;m=E}else m=s;if(t<F){g[W+208+4>>2]=F;n=F}else n=t;if(u<G){g[W+208+8>>2]=G;o=G}else o=u;Y=+g[h+272>>2];g[W+224>>2]=i-Y;g[W+224+4>>2]=j-Y;g[W+224+8>>2]=k-Y;g[W+208>>2]=Y+m;g[W+208+4>>2]=Y+n;g[W+208+8>>2]=Y+o;c[W>>2]=10736;g[W+4>>2]=H*Q+I*R+J*S;g[W+8>>2]=H*T+I*U+J*V;g[W+12>>2]=H*p+I*q+J*r;g[W+16>>2]=0.0;g[W+20>>2]=K*Q+L*R+M*S;g[W+24>>2]=K*T+L*U+M*V;g[W+28>>2]=K*p+L*q+M*r;g[W+32>>2]=0.0;g[W+36>>2]=N*Q+O*R+P*S;g[W+40>>2]=N*T+O*U+P*V;g[W+44>>2]=N*p+O*q+P*r;g[W+48>>2]=0.0;g[W+52>>2]=s;g[W+56>>2]=t;g[W+60>>2]=u;g[W+64>>2]=0.0;g[W+68>>2]=H*v+I*w+J*x;g[W+72>>2]=H*y+I*z+J*A;g[W+76>>2]=H*B+I*C+J*D;g[W+80>>2]=0.0;g[W+84>>2]=K*v+L*w+M*x;g[W+88>>2]=K*y+L*z+M*A;g[W+92>>2]=K*B+L*C+M*D;g[W+96>>2]=0.0;g[W+100>>2]=N*v+O*w+P*x;g[W+104>>2]=N*y+O*z+P*A;g[W+108>>2]=N*B+O*C+P*D;g[W+112>>2]=0.0;g[W+116>>2]=E;g[W+120>>2]=F;g[W+124>>2]=G;g[W+128>>2]=0.0;g[W+196>>2]=Y;c[W+200>>2]=c[h+268>>2];if(f|0?(Pb[c[(c[f>>2]|0)+64>>2]&127](f,W,W+224|0,W+208|0),X=+g[W+200>>2],X<+g[h+268>>2]):0){g[h+268>>2]=X;Y=X;l=W;return +Y}Y=1.0;l=W;return +Y}function Id(d,e,f,h){d=d|0;e=e|0;f=f|0;h=h|0;var i=0,k=0,l=0,m=0.0,n=0,o=0,p=0.0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0;p=+g[e>>2];i=(g[j>>2]=p,c[j>>2]|0);u=p<999999984306749440.0?i:1566444395;m=+g[e+4>>2];l=(g[j>>2]=m,c[j>>2]|0);v=m<999999984306749440.0?l:1566444395;y=+g[e+8>>2];o=(g[j>>2]=y,c[j>>2]|0);w=y<999999984306749440.0?o:1566444395;i=p>-999999984306749440.0?i:-581039253;l=m>-999999984306749440.0?l:-581039253;o=y>-999999984306749440.0?o:-581039253;y=+g[e+16>>2];t=y<(c[j>>2]=u,+g[j>>2]);k=(g[j>>2]=y,c[j>>2]|0);u=t?k:u;m=+g[e+20>>2];t=m<(c[j>>2]=v,+g[j>>2]);n=(g[j>>2]=m,c[j>>2]|0);v=t?n:v;p=+g[e+24>>2];t=p<(c[j>>2]=w,+g[j>>2]);q=(g[j>>2]=p,c[j>>2]|0);w=t?q:w;k=y>(c[j>>2]=i,+g[j>>2])?k:i;i=m>(c[j>>2]=l,+g[j>>2])?n:l;o=p>(c[j>>2]=o,+g[j>>2])?q:o;y=+g[e+32>>2];q=y<(c[j>>2]=u,+g[j>>2]);r=(g[j>>2]=y,c[j>>2]|0);m=+g[e+36>>2];s=m<(c[j>>2]=v,+g[j>>2]);t=(g[j>>2]=m,c[j>>2]|0);p=+g[e+40>>2];l=p<(c[j>>2]=w,+g[j>>2]);n=(g[j>>2]=p,c[j>>2]|0);k=y>(c[j>>2]=k,+g[j>>2])?r:k;i=m>(c[j>>2]=i,+g[j>>2])?t:i;o=p>(c[j>>2]=o,+g[j>>2])?n:o;G=(c[j>>2]=k,+g[j>>2]);H=(c[j>>2]=q?r:u,+g[j>>2]);C=(c[j>>2]=i,+g[j>>2]);D=(c[j>>2]=s?t:v,+g[j>>2]);m=(c[j>>2]=o,+g[j>>2]);z=(c[j>>2]=l?n:w,+g[j>>2]);o=c[d+8>>2]|0;F=+g[o+4>>2];B=+g[o+8>>2];p=+g[o+12>>2];E=+g[o+36>>2];A=+g[o+40>>2];y=+g[o+44>>2];o=~~(((G-H<2.0000000949949026e-03?H+-1.0000000474974513e-03:H)-F)*E)&65535&-2;q=~~(((C-D<2.0000000949949026e-03?D+-1.0000000474974513e-03:D)-B)*A)&65535&-2;r=~~(((m-z<2.0000000949949026e-03?z+-1.0000000474974513e-03:z)-p)*y)&65535&-2;s=~~(((G-H<2.0000000949949026e-03?G+1.0000000474974513e-03:G)-F)*E+1.0)&65535|1;t=~~(((C-D<2.0000000949949026e-03?C+1.0000000474974513e-03:C)-B)*A+1.0)&65535|1;e=~~(((m-z<2.0000000949949026e-03?m+1.0000000474974513e-03:m)-p)*y+1.0)&65535|1;n=c[d+4>>2]|0;i=c[n+4>>2]|0;if((i|0)==(c[n+8>>2]|0)?(x=(i|0)==0?1:i<<1,(i|0)<(x|0)):0){if(!x)l=0;else{c[6485]=(c[6485]|0)+1;i=ec((x<<4|3)+16|0)|0;if(!i)i=0;else{c[(i+4+15&-16)+-4>>2]=i;i=i+4+15&-16}l=i;i=c[n+4>>2]|0}if((i|0)>0){k=0;do{d=l+(k<<4)|0;w=(c[n+12>>2]|0)+(k<<4)|0;c[d>>2]=c[w>>2];c[d+4>>2]=c[w+4>>2];c[d+8>>2]=c[w+8>>2];c[d+12>>2]=c[w+12>>2];k=k+1|0}while((k|0)!=(i|0))}i=c[n+12>>2]|0;if(i|0){if(a[n+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[n+12>>2]=0}a[n+16>>0]=1;c[n+12>>2]=l;c[n+8>>2]=x;i=c[n+4>>2]|0}x=c[n+12>>2]|0;b[x+(i<<4)>>1]=o;b[x+(i<<4)+2>>1]=q;b[x+(i<<4)+4>>1]=r;b[x+(i<<4)+6>>1]=s;b[x+(i<<4)+8>>1]=t;b[x+(i<<4)+10>>1]=e;c[x+(i<<4)+12>>2]=f<<21|h;c[n+4>>2]=(c[n+4>>2]|0)+1;return}function Jd(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;if(!((d|0)!=0&(e|0)!=0))return;if((c[b+24>>2]|0)<128?(c[b+28>>2]|0)<128:0){c[6485]=(c[6485]|0)+1;h=ec(1043)|0;if(!h)j=0;else{c[(h+4+15&-16)+-4>>2]=h;j=h+4+15&-16}i=c[b+24>>2]|0;if((i|0)>0){h=0;do{l=(c[b+32>>2]|0)+(h<<3)|0;m=c[l+4>>2]|0;n=j+(h<<3)|0;c[n>>2]=c[l>>2];c[n+4>>2]=m;h=h+1|0}while((h|0)!=(i|0))}h=c[b+32>>2]|0;if(h|0){if(a[b+36>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[b+32>>2]=0}a[b+36>>0]=1;c[b+32>>2]=j;c[b+28>>2]=128}c[b+24>>2]=128;h=c[b+32>>2]|0;c[h>>2]=d;c[h+4>>2]=e;h=1;i=124;do{n=h+-1|0;j=c[b+32>>2]|0;l=c[j+(n<<3)>>2]|0;m=c[j+(n<<3)+4>>2]|0;if((n|0)>(i|0)){k=c[b+24>>2]|0;if((k|0)<(k<<1|0)?(c[b+28>>2]|0)<(k<<1|0):0){if(k){c[6485]=(c[6485]|0)+1;i=ec((k<<4|3)+16|0)|0;if(!i)e=0;else{c[(i+4+15&-16)+-4>>2]=i;e=i+4+15&-16}j=c[b+24>>2]|0;if((j|0)>0){i=0;do{p=(c[b+32>>2]|0)+(i<<3)|0;o=c[p+4>>2]|0;d=e+(i<<3)|0;c[d>>2]=c[p>>2];c[d+4>>2]=o;i=i+1|0}while((i|0)!=(j|0));d=e;j=e}else{d=e;j=e}}else{d=0;j=0}i=c[b+32>>2]|0;if(i|0){if(a[b+36>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[b+32>>2]=0}a[b+36>>0]=1;c[b+32>>2]=d;c[b+28>>2]=k<<1}c[b+24>>2]=k<<1;i=(k<<1)+-4|0}do if((l|0)==(m|0))if(!(c[l+40>>2]|0))h=n;else{o=c[l+36>>2]|0;c[j+(n<<3)>>2]=o;c[j+(n<<3)+4>>2]=o;o=c[l+40>>2]|0;p=h+1|0;n=c[b+32>>2]|0;c[n+(h<<3)>>2]=o;c[n+(h<<3)+4>>2]=o;n=c[l+40>>2]|0;o=c[b+32>>2]|0;c[o+(p<<3)>>2]=c[l+36>>2];c[o+(p<<3)+4>>2]=n;h=h+2|0}else if(((((+g[l>>2]<=+g[m+16>>2]?+g[l+16>>2]>=+g[m>>2]:0)?+g[l+4>>2]<=+g[m+20>>2]:0)?+g[l+20>>2]>=+g[m+4>>2]:0)?+g[l+8>>2]<=+g[m+24>>2]:0)?+g[l+24>>2]>=+g[m+8>>2]:0){d=(c[m+40>>2]|0)!=0;if(!(c[l+40>>2]|0))if(d){o=c[m+36>>2]|0;c[j+(n<<3)>>2]=l;c[j+(n<<3)+4>>2]=o;o=c[m+40>>2]|0;p=c[b+32>>2]|0;c[p+(h<<3)>>2]=l;c[p+(h<<3)+4>>2]=o;h=h+1|0;break}else{Mb[c[(c[f>>2]|0)+8>>2]&127](f,l,m);h=n;break}else{e=c[l+36>>2]|0;if(d){p=c[m+36>>2]|0;c[j+(n<<3)>>2]=e;c[j+(n<<3)+4>>2]=p;p=c[m+36>>2]|0;n=h+1|0;k=c[b+32>>2]|0;c[k+(h<<3)>>2]=c[l+40>>2];c[k+(h<<3)+4>>2]=p;k=c[m+40>>2]|0;p=h+2|0;o=c[b+32>>2]|0;c[o+(n<<3)>>2]=c[l+36>>2];c[o+(n<<3)+4>>2]=k;n=c[m+40>>2]|0;o=c[b+32>>2]|0;c[o+(p<<3)>>2]=c[l+40>>2];c[o+(p<<3)+4>>2]=n;h=h+3|0;break}else{c[j+(n<<3)>>2]=e;c[j+(n<<3)+4>>2]=m;p=c[b+32>>2]|0;c[p+(h<<3)>>2]=c[l+40>>2];c[p+(h<<3)+4>>2]=m;h=h+1|0;break}}}else h=n;while(0)}while((h|0)!=0);return}function Kd(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0;h=l;l=l+16|0;f=Sq()|0;if((a[24184]|0)==0?lx(24184)|0:0){c[h>>2]=0;c[h+4>>2]=0;c[h+8>>2]=0;c[h+12>>2]=0;se(24524,0.0,0,0,h)}c[6182]=c[6182]|1;g[6232]=0.0;x=+g[6242]*0.0;D=+g[6243]*0.0;g[6237]=+g[6241]*0.0;g[6238]=x;g[6239]=D;g[6240]=0.0;c[6245]=0;c[6246]=0;c[6247]=0;c[6248]=0;D=+g[6234]*0.0;x=+g[6235]*0.0;g[6286]=+g[6233]*0.0;g[6287]=D;g[6288]=x;g[6289]=0.0;c[f+4>>2]=7;c[f+8>>2]=-1;c[f+12>>2]=-1;g[f+16>>2]=3402823466385288598117041.0e14;a[f+20>>0]=1;a[f+21>>0]=0;c[f+24>>2]=-1;c[f+28>>2]=24524;c[f+32>>2]=b;g[f+36>>2]=0.0;g[f+40>>2]=.05000000074505806;c[f+44>>2]=0;c[f>>2]=5864;a[f+48>>0]=0;c[f+116>>2]=c[d>>2];c[f+116+4>>2]=c[d+4>>2];c[f+116+8>>2]=c[d+8>>2];c[f+116+12>>2]=c[d+12>>2];c[f+132>>2]=c[d+16>>2];c[f+132+4>>2]=c[d+16+4>>2];c[f+132+8>>2]=c[d+16+8>>2];c[f+132+12>>2]=c[d+16+12>>2];c[f+148>>2]=c[d+32>>2];c[f+148+4>>2]=c[d+32+4>>2];c[f+148+8>>2]=c[d+32+8>>2];c[f+148+12>>2]=c[d+32+12>>2];c[f+164>>2]=c[d+48>>2];c[f+164+4>>2]=c[d+48+4>>2];c[f+164+8>>2]=c[d+48+8>>2];c[f+164+12>>2]=c[d+48+12>>2];a[f+180>>0]=e&1;x=+g[f+116>>2];D=+g[b+4>>2];w=+g[f+132>>2];C=+g[b+8>>2];v=+g[f+148>>2];B=+g[b+12>>2];u=+g[f+120>>2];t=+g[f+136>>2];s=+g[f+152>>2];r=+g[f+124>>2];p=+g[f+140>>2];n=+g[f+156>>2];A=+g[b+20>>2];z=+g[b+24>>2];y=+g[b+28>>2];q=+g[b+36>>2];o=+g[b+40>>2];m=+g[b+44>>2];F=+g[f+164>>2];E=+g[f+168>>2];i=+g[f+172>>2];k=+g[b+52>>2]+(D*F+C*E+B*i);j=A*F+z*E+y*i+ +g[b+56>>2];i=q*F+o*E+m*i+ +g[b+60>>2];g[f+52>>2]=x*D+w*C+v*B;g[f+56>>2]=D*u+C*t+B*s;g[f+60>>2]=D*r+C*p+B*n;g[f+64>>2]=0.0;g[f+68>>2]=x*A+w*z+v*y;g[f+72>>2]=u*A+t*z+s*y;g[f+76>>2]=r*A+p*z+n*y;g[f+80>>2]=0.0;g[f+84>>2]=x*q+w*o+v*m;g[f+88>>2]=u*q+t*o+s*m;g[f+92>>2]=r*q+p*o+n*m;g[f+96>>2]=0.0;g[f+100>>2]=k;g[f+104>>2]=j;g[f+108>>2]=i;g[f+112>>2]=0.0;g[f+184>>2]=1.0;g[f+188>>2]=-1.0;g[f+192>>2]=0.0;g[f+196>>2]=0.0;g[f+200>>2]=1.0;g[f+204>>2]=.699999988079071;g[f+208>>2]=0.0;g[f+212>>2]=0.0;g[f+216>>2]=1.0;g[f+220>>2]=.699999988079071;g[f+224>>2]=0.0;g[f+228>>2]=0.0;g[f+264>>2]=1.0;g[f+268>>2]=.699999988079071;g[f+272>>2]=1.0;g[f+276>>2]=0.0;g[f+280>>2]=1.0;g[f+284>>2]=.699999988079071;g[f+288>>2]=1.0;g[f+292>>2]=0.0;g[f+232>>2]=1.0;g[f+236>>2]=.699999988079071;g[f+240>>2]=1.0;g[f+244>>2]=0.0;g[f+248>>2]=1.0;g[f+252>>2]=.699999988079071;g[f+256>>2]=1.0;g[f+260>>2]=0.0;a[f+1096>>0]=0;g[f+1116>>2]=0.0;g[f+1120>>2]=0.0;g[f+1124>>2]=0.0;c[f+300>>2]=0;c[f+1100>>2]=0;c[f+1100+4>>2]=0;c[f+1100+8>>2]=0;a[f+1100+12>>0]=0;a[f+49>>0]=1;Jc(f,(c[f+28>>2]|0)+4|0,(c[f+32>>2]|0)+4|0);l=h;return f|0}function Ld(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0;g=l;l=l+80|0;c[a+72>>2]=(c[a+72>>2]|0)+1;f=c[a+68>>2]|0;if(f|0){d=c[(c[a+28>>2]|0)+(b*80|0)+76>>2]|0;fg(f,d)|0;e=c[f+4>>2]|0;if(e|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[f+4>>2]=d;c[f+12>>2]=(c[f+12>>2]|0)+-1}f=(c[a+20>>2]|0)+-1|0;e=c[a+28>>2]|0;c[g>>2]=c[e+(b*80|0)>>2];c[g+4>>2]=c[e+(b*80|0)+4>>2];c[g+8>>2]=c[e+(b*80|0)+8>>2];c[g+12>>2]=c[e+(b*80|0)+12>>2];c[g+16>>2]=c[e+(b*80|0)+16>>2];c[g+16+4>>2]=c[e+(b*80|0)+16+4>>2];c[g+16+8>>2]=c[e+(b*80|0)+16+8>>2];c[g+16+12>>2]=c[e+(b*80|0)+16+12>>2];c[g+32>>2]=c[e+(b*80|0)+32>>2];c[g+32+4>>2]=c[e+(b*80|0)+32+4>>2];c[g+32+8>>2]=c[e+(b*80|0)+32+8>>2];c[g+32+12>>2]=c[e+(b*80|0)+32+12>>2];c[g+48>>2]=c[e+(b*80|0)+48>>2];c[g+48+4>>2]=c[e+(b*80|0)+48+4>>2];c[g+48+8>>2]=c[e+(b*80|0)+48+8>>2];c[g+48+12>>2]=c[e+(b*80|0)+48+12>>2];c[g+64>>2]=c[e+(b*80|0)+64>>2];c[g+64+4>>2]=c[e+(b*80|0)+64+4>>2];c[g+64+8>>2]=c[e+(b*80|0)+64+8>>2];c[g+64+12>>2]=c[e+(b*80|0)+64+12>>2];c[e+(b*80|0)>>2]=c[e+(f*80|0)>>2];c[e+(b*80|0)+4>>2]=c[e+(f*80|0)+4>>2];c[e+(b*80|0)+8>>2]=c[e+(f*80|0)+8>>2];c[e+(b*80|0)+12>>2]=c[e+(f*80|0)+12>>2];c[e+(b*80|0)+16>>2]=c[e+(f*80|0)+16>>2];c[e+(b*80|0)+16+4>>2]=c[e+(f*80|0)+16+4>>2];c[e+(b*80|0)+16+8>>2]=c[e+(f*80|0)+16+8>>2];c[e+(b*80|0)+16+12>>2]=c[e+(f*80|0)+16+12>>2];c[e+(b*80|0)+32>>2]=c[e+(f*80|0)+32>>2];c[e+(b*80|0)+32+4>>2]=c[e+(f*80|0)+32+4>>2];c[e+(b*80|0)+32+8>>2]=c[e+(f*80|0)+32+8>>2];c[e+(b*80|0)+32+12>>2]=c[e+(f*80|0)+32+12>>2];c[e+(b*80|0)+48>>2]=c[e+(f*80|0)+48>>2];c[e+(b*80|0)+48+4>>2]=c[e+(f*80|0)+48+4>>2];c[e+(b*80|0)+48+8>>2]=c[e+(f*80|0)+48+8>>2];c[e+(b*80|0)+48+12>>2]=c[e+(f*80|0)+48+12>>2];c[e+(b*80|0)+64>>2]=c[e+(f*80|0)+64>>2];c[e+(b*80|0)+64+4>>2]=c[e+(f*80|0)+64+4>>2];c[e+(b*80|0)+64+8>>2]=c[e+(f*80|0)+64+8>>2];c[e+(b*80|0)+64+12>>2]=c[e+(f*80|0)+64+12>>2];e=c[a+28>>2]|0;c[e+(f*80|0)>>2]=c[g>>2];c[e+(f*80|0)+4>>2]=c[g+4>>2];c[e+(f*80|0)+8>>2]=c[g+8>>2];c[e+(f*80|0)+12>>2]=c[g+12>>2];c[e+(f*80|0)+16>>2]=c[g+16>>2];c[e+(f*80|0)+16+4>>2]=c[g+16+4>>2];c[e+(f*80|0)+16+8>>2]=c[g+16+8>>2];c[e+(f*80|0)+16+12>>2]=c[g+16+12>>2];c[e+(f*80|0)+32>>2]=c[g+32>>2];c[e+(f*80|0)+32+4>>2]=c[g+32+4>>2];c[e+(f*80|0)+32+8>>2]=c[g+32+8>>2];c[e+(f*80|0)+32+12>>2]=c[g+32+12>>2];c[e+(f*80|0)+48>>2]=c[g+48>>2];c[e+(f*80|0)+48+4>>2]=c[g+48+4>>2];c[e+(f*80|0)+48+8>>2]=c[g+48+8>>2];c[e+(f*80|0)+48+12>>2]=c[g+48+12>>2];c[e+(f*80|0)+64>>2]=c[g+64>>2];c[e+(f*80|0)+64+4>>2]=c[g+64+4>>2];c[e+(f*80|0)+64+8>>2]=c[g+64+8>>2];c[e+(f*80|0)+64+12>>2]=c[g+64+12>>2];if(!(c[a+68>>2]|0)){f=c[a+20>>2]|0;f=f+-1|0;c[a+20>>2]=f;l=g;return}c[(c[(c[a+28>>2]|0)+(b*80|0)+76>>2]|0)+36>>2]=b;f=c[a+20>>2]|0;f=f+-1|0;c[a+20>>2]=f;l=g;return}function Md(b,d){b=b|0;d=d|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;o=c[b+92>>2]|0;if(!(sb[c[(c[o>>2]|0)+56>>2]&127](o)|0))return;o=c[b+92>>2]|0;o=sb[c[(c[o>>2]|0)+28>>2]&127](o)|0;f=c[o+4>>2]|0;if((f|0)>1){Nd(o,0,f+-1|0);j=c[o+4>>2]|0}else j=f;m=c[b+104>>2]|0;f=j-m|0;if((m|0)<0){if((c[o+8>>2]|0)<(f|0)){if(!f){g=0;i=j}else{c[6485]=(c[6485]|0)+1;g=ec((f<<4|3)+16|0)|0;if(!g)g=0;else{c[(g+4+15&-16)+-4>>2]=g;g=g+4+15&-16}i=c[o+4>>2]|0}if((i|0)>0){h=0;do{m=c[o+12>>2]|0;c[g+(h<<4)>>2]=c[m+(h<<4)>>2];c[g+(h<<4)+4>>2]=c[m+(h<<4)+4>>2];c[g+(h<<4)+8>>2]=c[m+(h<<4)+8>>2];c[g+(h<<4)+12>>2]=c[m+(h<<4)+12>>2];h=h+1|0}while((h|0)!=(i|0))}h=c[o+12>>2]|0;if(h|0){if(a[o+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[o+12>>2]=0}a[o+16>>0]=1;c[o+12>>2]=g;c[o+8>>2]=f;h=o+12|0}else h=o+12|0;g=j;do{m=(c[h>>2]|0)+(g<<4)|0;g=g+1|0;c[m>>2]=0;c[m+4>>2]=0;c[m+8>>2]=0;c[m+12>>2]=0}while((g|0)!=(f|0))}c[o+4>>2]=f;c[b+104>>2]=0;if((f|0)>0){l=0;m=0;g=0;h=0;do{k=c[o+12>>2]|0;j=k+(l<<4)|0;p=m;m=c[j>>2]|0;k=k+(l<<4)+4|0;i=c[k>>2]|0;if(!((m|0)==(p|0)&(i|0)==(g|0))){p=m+48|0;if((((((e[m+54>>1]|0)>=(e[i+48>>1]|0)?(e[i+54>>1]|0)>=(e[p>>1]|0):0)?(e[m+56>>1]|0)>=(e[i+48+2>>1]|0):0)?(e[i+56>>1]|0)>=(e[p+2>>1]|0):0)?(e[m+58>>1]|0)>=(e[i+52>>1]|0):0)?(e[i+58>>1]|0)>=(e[m+52>>1]|0):0)g=i;else{f=i;n=30}}else{f=g;n=30}if((n|0)==30){n=0;h=c[b+92>>2]|0;Mb[c[(c[h>>2]|0)+32>>2]&127](h,j,d);c[j>>2]=0;c[k>>2]=0;h=(c[b+104>>2]|0)+1|0;c[b+104>>2]=h;c[6471]=(c[6471]|0)+-1;g=f;f=c[o+4>>2]|0}l=l+1|0}while((l|0)<(f|0));if((f|0)>1){Nd(o,0,f+-1|0);g=c[o+4>>2]|0;h=c[b+104>>2]|0}else g=f;f=g-h|0;if((h|0)<0){if((c[o+8>>2]|0)<(f|0)){if(!f){h=0;j=g}else{c[6485]=(c[6485]|0)+1;h=ec((f<<4|3)+16|0)|0;if(!h)h=0;else{c[(h+4+15&-16)+-4>>2]=h;h=h+4+15&-16}j=c[o+4>>2]|0}if((j|0)>0){i=0;do{p=c[o+12>>2]|0;c[h+(i<<4)>>2]=c[p+(i<<4)>>2];c[h+(i<<4)+4>>2]=c[p+(i<<4)+4>>2];c[h+(i<<4)+8>>2]=c[p+(i<<4)+8>>2];c[h+(i<<4)+12>>2]=c[p+(i<<4)+12>>2];i=i+1|0}while((i|0)!=(j|0))}i=c[o+12>>2]|0;if(i|0){if(a[o+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[o+12>>2]=0}a[o+16>>0]=1;c[o+12>>2]=h;c[o+8>>2]=f}do{p=(c[o+12>>2]|0)+(g<<4)|0;g=g+1|0;c[p>>2]=0;c[p+4>>2]=0;c[p+8>>2]=0;c[p+12>>2]=0}while((g|0)!=(f|0))}}c[o+4>>2]=f;c[b+104>>2]=0;return}function Nd(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;while(1){o=c[a+12>>2]|0;q=(b+d|0)/2|0;r=c[o+(q<<4)>>2]|0;p=c[o+(q<<4)+4>>2]|0;q=c[o+(q<<4)+8>>2]|0;e=d;f=b;while(1){a:do if(!r)while(1){l=o+(f<<4)|0;j=c[l>>2]|0;if(!j)g=-1;else g=c[j+12>>2]|0;k=c[o+(f<<4)+4>>2]|0;if(!k)h=-1;else h=c[k+12>>2]|0;if(!p)i=-1;else i=c[p+12>>2]|0;do if((g|0)<=-1){g=(h|0)>(i|0);if(g|(j|0)==0^1)if((j|0)==0&g)break;else break a;if((k|0)!=(p|0))break a;if((c[o+(f<<4)+8>>2]|0)>>>0<=q>>>0)break a}while(0);f=f+1|0}else{m=c[r+12>>2]|0;while(1){l=o+(f<<4)|0;j=c[l>>2]|0;if(!j)g=-1;else g=c[j+12>>2]|0;k=c[o+(f<<4)+4>>2]|0;if(!k)h=-1;else h=c[k+12>>2]|0;if(!p)i=-1;else i=c[p+12>>2]|0;do if((g|0)<=(m|0)){g=(h|0)>(i|0);if(g|(j|0)==(r|0)^1)if((j|0)==(r|0)&g)break;else break a;if((k|0)!=(p|0))break a;if((c[o+(f<<4)+8>>2]|0)>>>0<=q>>>0)break a}while(0);f=f+1|0}}while(0);b:do if(!r)while(1){g=o+(e<<4)|0;k=c[g>>2]|0;if(!k)h=-1;else h=c[k+12>>2]|0;if(!p)i=-1;else i=c[p+12>>2]|0;m=c[o+(e<<4)+4>>2]|0;if(!m)j=-1;else j=c[m+12>>2]|0;do if((h|0)>=-1){h=(i|0)>(j|0);if(h|(k|0)==0^1)if((k|0)==0&h)break;else break b;if((p|0)!=(m|0))break b;if((c[o+(e<<4)+8>>2]|0)>>>0>=q>>>0)break b}while(0);e=e+-1|0}else{n=c[r+12>>2]|0;while(1){g=o+(e<<4)|0;k=c[g>>2]|0;if(!k)h=-1;else h=c[k+12>>2]|0;if(!p)i=-1;else i=c[p+12>>2]|0;m=c[o+(e<<4)+4>>2]|0;if(!m)j=-1;else j=c[m+12>>2]|0;do if((n|0)<=(h|0)){h=(i|0)>(j|0);if(h|(r|0)==(k|0)^1)if((r|0)==(k|0)&h)break;else break b;if((p|0)!=(m|0))break b;if((c[o+(e<<4)+8>>2]|0)>>>0>=q>>>0)break b}while(0);e=e+-1|0}}while(0);if((f|0)<=(e|0)){j=c[l>>2]|0;k=c[o+(f<<4)+4>>2]|0;m=c[o+(f<<4)+8>>2]|0;n=c[o+(f<<4)+12>>2]|0;c[l>>2]=c[g>>2];c[l+4>>2]=c[g+4>>2];c[l+8>>2]=c[g+8>>2];c[l+12>>2]=c[g+12>>2];o=c[a+12>>2]|0;c[o+(e<<4)>>2]=j;c[o+(e<<4)+4>>2]=k;c[o+(e<<4)+8>>2]=m;c[o+(e<<4)+12>>2]=n;e=e+-1|0;f=f+1|0}if((f|0)>(e|0))break;o=c[a+12>>2]|0}if((e|0)>(b|0))Nd(a,b,e);if((f|0)<(d|0))b=f;else break}return}function Od(a,d,f,h,i,j,k,m,n){a=a|0;d=d|0;f=f|0;h=+h;i=+i;j=+j;k=k|0;m=m|0;n=n|0;var o=0,p=0,q=0,r=0,s=0.0,t=0.0,u=0.0,v=0.0,w=0,x=0,y=0,z=0,A=0,C=0,D=0,E=0.0,F=0.0,G=0,H=0,I=0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0.0,S=0,T=0,U=0,V=0,W=0.0,X=0.0,Y=0.0,Z=0.0,_=0.0,$=0.0,aa=0.0,ba=0.0,ca=0.0,da=0.0,ea=0.0;V=l;l=l+32|0;R=+g[f>>2];F=+g[f+4>>2];J=+g[f+8>>2];K=1.0/+B(+((h-R)*(h-R)+(i-F)*(i-F)+(j-J)*(j-J)));O=(h-R)*K==0.0?999999984306749440.0:1.0/((h-R)*K);P=(i-F)*K==0.0?999999984306749440.0:1.0/((i-F)*K);Q=(j-J)*K==0.0?999999984306749440.0:1.0/((j-J)*K);ea=(R>h?h:R)+ +g[k>>2];da=(F>i?i:F)+ +g[k+4>>2];ca=(J>j?j:J)+ +g[k+8>>2];aa=(R<h?h:R)+ +g[m>>2];Y=(F<i?i:F)+ +g[m+4>>2];t=(J<j?j:J)+ +g[m+8>>2];$=+g[a+4>>2];ea=ea<$?$:ea;X=+g[a+8>>2];da=da<X?X:da;u=+g[a+12>>2];ca=ca<u?u:ca;ba=+g[a+20>>2];Z=+g[a+24>>2];s=+g[a+28>>2];_=+g[a+36>>2];W=+g[a+40>>2];v=+g[a+44>>2];S=~~(((ba<ea?ba:ea)-$)*_)&65535&-2;T=~~(((Z<da?Z:da)-X)*W)&65535&-2;U=~~(((s<ca?s:ca)-u)*v)&65535&-2;aa=aa<$?$:aa;Y=Y<X?X:Y;t=t<u?u:t;G=~~(((ba<aa?ba:aa)-$)*_+1.0)&65535|1;H=~~(((Z<Y?Z:Y)-X)*W+1.0)&65535|1;I=~~(((s<t?s:t)-u)*v+1.0)&65535|1;if((n|0)>0){p=0;o=0;q=c[a+136>>2]|0;do{o=o+1|0;r=q+6|0;w=b[q>>1]|0;x=q+10|0;y=b[q+4>>1]|0;z=q+8|0;A=b[q+2>>1]|0;C=q+12|0;D=(c[C>>2]|0)>-1;do if(((G&65535)>=(w&65535)?(S&65535)<=(e[r>>1]|0):0)&(U&65535)<=(e[x>>1]|0)&(I&65535)>=(y&65535)&(T&65535)<=(e[z>>1]|0)&(H&65535)>=(A&65535)){aa=+g[a+36>>2];ca=+g[a+40>>2];ea=+g[a+44>>2];ba=+g[a+4>>2];da=+g[a+8>>2];u=+g[a+12>>2];g[V+12>>2]=0.0;v=ba+ +(e[r>>1]|0)/aa;s=da+ +(e[z>>1]|0)/ca;t=u+ +(e[x>>1]|0)/ea;g[V+28>>2]=0.0;g[V>>2]=+(w&65535)/aa+ba-+g[m>>2];g[V+4>>2]=+(A&65535)/ca+da-+g[m+4>>2];g[V+8>>2]=+(y&65535)/ea+u-+g[m+8>>2];g[V+16>>2]=v-+g[k>>2];g[V+20>>2]=s-+g[k+4>>2];g[V+24>>2]=t-+g[k+8>>2];t=+g[f>>2];s=O*(+g[V+((O<0.0&1)<<4)>>2]-t);t=O*(+g[V+(((O<0.0^1)&1)<<4)>>2]-t);v=+g[f+4>>2];u=P*(+g[V+((P<0.0&1)<<4)+4>>2]-v);v=P*(+g[V+(((P<0.0^1)&1)<<4)+4>>2]-v);if(!(u>t|s>v)?(L=u>s?u:s,E=v<t?v:t,N=+g[f+8>>2],M=Q*(+g[V+((Q<0.0&1)<<4)+8>>2]-N),N=Q*(+g[V+(((Q<0.0^1)&1)<<4)+8>>2]-N),!(M>E|L>N)):0){r=(N<E?N:E)>0.0?(M>L?M:L)<(j-J)*(j-J)*K+((h-R)*(h-R)*K+(i-F)*(i-F)*K):0;if(!(D&r)){w=9;break}w=c[C>>2]|0;Mb[c[(c[d>>2]|0)+8>>2]&127](d,w>>21,w&2097151);w=10;break}r=0;w=9}else{r=0;w=9}while(0);if((w|0)==9){w=0;if(D|r)w=10;else{D=c[C>>2]|0;p=p-D|0;q=q+(0-D<<4)|0}}if((w|0)==10){p=p+1|0;q=q+16|0}}while((p|0)<(n|0))}else o=0;if((c[6478]|0)>=(o|0)){l=V;return}c[6478]=o;l=V;return}function Pd(b,d,e,f,h,i,j,k,m){b=b|0;d=d|0;e=e|0;f=f|0;h=+h;i=i|0;j=j|0;k=k|0;m=m|0;var n=0,o=0,p=0,q=0,r=0,s=0.0,t=0.0,u=0.0,v=0.0,w=0,x=0,y=0,z=0,A=0.0,B=0.0,C=0.0,D=0.0,E=0,F=0.0;E=l;l=l+32|0;if(!b){l=E;return}n=c[k+4>>2]|0;if((n|0)<128){if((c[k+8>>2]|0)<128){c[6485]=(c[6485]|0)+1;o=ec(531)|0;if(!o)q=0;else{c[(o+4+15&-16)+-4>>2]=o;q=o+4+15&-16}p=c[k+4>>2]|0;if((p|0)>0){o=0;do{c[q+(o<<2)>>2]=c[(c[k+12>>2]|0)+(o<<2)>>2];o=o+1|0}while((o|0)!=(p|0))}o=c[k+12>>2]|0;if(o|0){if(a[k+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[o+-4>>2]|0)}c[k+12>>2]=0}a[k+16>>0]=1;c[k+12>>2]=q;c[k+8>>2]=128;o=k+12|0}else o=k+12|0;do{c[(c[o>>2]|0)+(n<<2)>>2]=0;n=n+1|0}while((n|0)!=128);z=k+8|0}else{o=k+12|0;z=k+8|0}c[k+4>>2]=128;c[c[o>>2]>>2]=b;p=1;n=126;do{x=p+-1|0;q=c[o>>2]|0;y=c[q+(x<<2)>>2]|0;v=+g[y+4>>2]-+g[j+4>>2];t=+g[y+8>>2]-+g[j+8>>2];g[E>>2]=+g[y>>2]-+g[j>>2];g[E+4>>2]=v;g[E+8>>2]=t;g[E+12>>2]=0.0;t=+g[y+20>>2]-+g[i+4>>2];v=+g[y+24>>2]-+g[i+8>>2];g[E+16>>2]=+g[y+16>>2]-+g[i>>2];g[E+20>>2]=t;g[E+24>>2]=v;g[E+28>>2]=0.0;w=c[f>>2]|0;v=+g[d>>2];t=+g[e>>2];u=(+g[E+(w<<4)>>2]-v)*t;v=t*(+g[E+(1-w<<4)>>2]-v);w=c[f+4>>2]|0;t=+g[d+4>>2];F=+g[e+4>>2];s=(+g[E+(w<<4)+4>>2]-t)*F;t=F*(+g[E+(1-w<<4)+4>>2]-t);do if((!(s>v|u>t)?(B=s>u?s:u,A=t<v?t:v,w=c[f+8>>2]|0,D=+g[d+8>>2],F=+g[e+8>>2],C=(+g[E+(w<<4)+8>>2]-D)*F,D=F*(+g[E+(1-w<<4)+8>>2]-D),!(C>A|B>D)):0)?((D<A?D:A)>0.0?(C>B?C:B)<h:0):0){if(!(c[y+40>>2]|0)){Ib[c[(c[m>>2]|0)+12>>2]&127](m,y);p=x;break}if((x|0)>(n|0)){w=c[k+4>>2]|0;if((w|0)<(w<<1|0)){if((c[z>>2]|0)<(w<<1|0)){if(w){c[6485]=(c[6485]|0)+1;n=ec((w<<3|3)+16|0)|0;if(!n)r=0;else{c[(n+4+15&-16)+-4>>2]=n;r=n+4+15&-16}q=c[k+4>>2]|0;if((q|0)>0){n=0;do{c[r+(n<<2)>>2]=c[(c[o>>2]|0)+(n<<2)>>2];n=n+1|0}while((n|0)!=(q|0));b=r;n=r}else{b=r;n=r}}else{b=0;n=0}q=c[o>>2]|0;if(q|0){if(a[k+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[q+-4>>2]|0)}c[o>>2]=0}a[k+16>>0]=1;c[o>>2]=b;c[z>>2]=w<<1}else n=q;q=w;do{c[n+(q<<2)>>2]=0;q=q+1|0;n=c[o>>2]|0}while((q|0)!=(w<<1|0));q=n+(x<<2)|0}else q=q+(x<<2)|0;c[k+4>>2]=w<<1;n=(w<<1)+-2|0}else q=q+(x<<2)|0;c[q>>2]=c[y+36>>2];c[(c[o>>2]|0)+(p<<2)>>2]=c[y+40>>2];p=p+1|0}else p=x;while(0)}while((p|0)!=0);l=E;return}function Qd(a,b){a=a|0;b=b|0;var d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0,p=0.0,q=0,r=0,s=0,t=0.0;o=l;l=l+80|0;h=+g[b+12>>2];k=+g[a+264>>2];f=+g[b+8>>2];n=+g[a+260>>2];e=+g[b+4>>2];if((k==f?+g[a+268>>2]==h:0)&n==e?+g[a+256>>2]==+g[b>>2]:0){l=o;return}m=+g[a+256>>2];d=+g[b>>2];if(d*d+e*e+f*f>0.0){j=1.0/+B(+(d*d+e*e+f*f));g[a+256>>2]=d*j;g[a+260>>2]=e*j;g[a+264>>2]=f*j;i=d*j;e=e*j;f=f*j;d=h}else{c[a+256>>2]=0;c[a+260>>2]=0;c[a+264>>2]=0;i=0.0;e=0.0;f=0.0;d=0.0}g[a+268>>2]=d;b=c[a+8>>2]|0;if(!b){l=o;return}d=i*i+e*e+f*f;do if(!(d==0.0)?!(m*m+n*n+k*k==0.0):0){d=1.0/+B(+d);j=i*d;g[a+256>>2]=j;h=e*d;g[a+260>>2]=h;d=f*d;g[a+264>>2]=d;e=1.0/+B(+(m*m+n*n+k*k));if(!(k*e*d+(n*e*h+m*e*j)<-.9999998807907104)){p=+B(+((k*e*d+(n*e*h+m*e*j)+1.0)*2.0));i=(m*e*d-k*e*j)*(1.0/p);f=(k*e*h-n*e*d)*(1.0/p);d=(n*e*j-m*e*h)*(1.0/p);e=p*.5;break}if(+A(+d)>.7071067690849304){e=1.0/+B(+(h*h+d*d));i=-(d*e);f=0.0;d=h*e;e=0.0;break}else{f=1.0/+B(+(h*h+j*j));i=j*f;f=-(h*f);d=0.0;e=0.0;break}}else{i=0.0;f=0.0;d=0.0;e=0.0}while(0);c[o+16>>2]=c[b+4>>2];c[o+16+4>>2]=c[b+4+4>>2];c[o+16+8>>2]=c[b+4+8>>2];c[o+16+12>>2]=c[b+4+12>>2];s=o+16+16|0;c[s>>2]=c[b+20>>2];c[s+4>>2]=c[b+20+4>>2];c[s+8>>2]=c[b+20+8>>2];c[s+12>>2]=c[b+20+12>>2];r=o+16+32|0;c[r>>2]=c[b+36>>2];c[r+4>>2]=c[b+36+4>>2];c[r+8>>2]=c[b+36+8>>2];c[r+12>>2]=c[b+36+12>>2];q=o+16+48|0;c[q>>2]=c[b+52>>2];c[q+4>>2]=c[b+52+4>>2];c[q+8>>2]=c[b+52+8>>2];c[q+12>>2]=c[b+52+12>>2];f=-f;p=-i;j=-d;yg(o+16|0,o);d=+g[o>>2];t=+g[o+12>>2];m=+g[o+8>>2];i=+g[o+4>>2];k=e*d+t*f+m*p-i*j;n=d*j+(t*p+e*i)-m*f;h=t*j+e*m+i*f-d*p;j=e*t-d*f-i*p-m*j;m=k*(2.0/(j*j+(h*h+(k*k+n*n))));p=n*(2.0/(j*j+(h*h+(k*k+n*n))));i=h*(2.0/(j*j+(h*h+(k*k+n*n))));g[o+16>>2]=1.0-(n*p+h*i);g[o+16+4>>2]=k*p-j*i;g[o+16+8>>2]=k*i+j*p;g[o+16+12>>2]=0.0;g[o+16+16>>2]=k*p+j*i;g[o+16+20>>2]=1.0-(k*m+h*i);g[o+16+24>>2]=n*i-j*m;g[o+16+28>>2]=0.0;g[o+16+32>>2]=k*i-j*p;g[o+16+36>>2]=n*i+j*m;g[o+16+40>>2]=1.0-(k*m+n*p);g[o+16+44>>2]=0.0;a=c[a+8>>2]|0;c[a+304>>2]=(c[a+304>>2]|0)+1;c[a+4>>2]=c[o+16>>2];c[a+4+4>>2]=c[o+16+4>>2];c[a+4+8>>2]=c[o+16+8>>2];c[a+4+12>>2]=c[o+16+12>>2];c[a+20>>2]=c[s>>2];c[a+20+4>>2]=c[s+4>>2];c[a+20+8>>2]=c[s+8>>2];c[a+20+12>>2]=c[s+12>>2];c[a+36>>2]=c[r>>2];c[a+36+4>>2]=c[r+4>>2];c[a+36+8>>2]=c[r+8>>2];c[a+36+12>>2]=c[r+12>>2];c[a+52>>2]=c[q>>2];c[a+52+4>>2]=c[q+4>>2];c[a+52+8>>2]=c[q+8>>2];c[a+52+12>>2]=c[q+12>>2];l=o;return}function Rd(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,h=0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0;h=l;l=l+160|0;e=c[a+4>>2]|0;f=c[e+12>>2]|0;D=+g[f>>2];C=+g[f+4>>2];B=+g[f+8>>2];A=+g[f+16>>2];z=+g[f+20>>2];y=+g[f+24>>2];r=+g[f+32>>2];p=+g[f+36>>2];n=+g[f+40>>2];e=c[(c[e+4>>2]|0)+28>>2]|0;x=+g[e+(d*80|0)>>2];w=+g[e+(d*80|0)+16>>2];v=+g[e+(d*80|0)+32>>2];u=+g[e+(d*80|0)+4>>2];t=+g[e+(d*80|0)+20>>2];s=+g[e+(d*80|0)+36>>2];q=+g[e+(d*80|0)+8>>2];o=+g[e+(d*80|0)+24>>2];m=+g[e+(d*80|0)+40>>2];F=+g[e+(d*80|0)+48>>2];E=+g[e+(d*80|0)+52>>2];i=+g[e+(d*80|0)+56>>2];k=+g[f+48>>2]+(D*F+C*E+B*i);j=+g[f+52>>2]+(A*F+z*E+y*i);i=+g[f+56>>2]+(r*F+p*E+n*i);g[h+88>>2]=D*x+C*w+B*v;g[h+88+4>>2]=D*u+C*t+B*s;g[h+88+8>>2]=D*q+C*o+B*m;g[h+88+12>>2]=0.0;g[h+88+16>>2]=A*x+z*w+y*v;g[h+88+20>>2]=A*u+z*t+y*s;g[h+88+24>>2]=A*q+z*o+y*m;g[h+88+28>>2]=0.0;g[h+88+32>>2]=r*x+p*w+n*v;g[h+88+36>>2]=r*u+p*t+n*s;g[h+88+40>>2]=r*q+p*o+n*m;g[h+88+44>>2]=0.0;g[h+88+48>>2]=k;g[h+88+52>>2]=j;g[h+88+56>>2]=i;g[h+88+60>>2]=0.0;Pb[c[(c[b>>2]|0)+8>>2]&127](b,h+88|0,h+72|0,h+56|0);i=+g[(c[a+20>>2]|0)+32>>2];g[h+72>>2]=+g[h+72>>2]-i;g[h+72+4>>2]=+g[h+72+4>>2]-i;g[h+72+8>>2]=+g[h+72+8>>2]-i;g[h+56>>2]=i+ +g[h+56>>2];g[h+56+4>>2]=i+ +g[h+56+4>>2];g[h+56+8>>2]=i+ +g[h+56+8>>2];f=c[a+8>>2]|0;e=c[f+4>>2]|0;Pb[c[(c[e>>2]|0)+8>>2]&127](e,c[f+12>>2]|0,h+40|0,h+24|0);if(!(+g[h+72>>2]>+g[h+24>>2])?!(+g[h+56>>2]<+g[h+40>>2]):0)e=1;else e=0;if(!(!(+g[h+72+8>>2]>+g[h+24+8>>2])?!(+g[h+56+8>>2]<+g[h+40+8>>2]):0))e=0;if(+g[h+72+4>>2]>+g[h+24+4>>2]){l=h;return}if(+g[h+56+4>>2]<+g[h+40+4>>2]|e^1){l=h;return}e=c[a+4>>2]|0;f=c[e+8>>2]|0;c[h>>2]=e;c[h+4>>2]=b;c[h+8>>2]=f;c[h+12>>2]=h+88;c[h+16>>2]=-1;c[h+20>>2]=d;if(!(+g[(c[a+20>>2]|0)+32>>2]>0.0)){e=c[(c[a+24>>2]|0)+(d<<2)>>2]|0;if(!e){f=c[a+12>>2]|0;f=yb[c[(c[f>>2]|0)+8>>2]&1](f,h,c[a+8>>2]|0,c[a+28>>2]|0,1)|0;c[(c[a+24>>2]|0)+(d<<2)>>2]=f;f=c[(c[a+24>>2]|0)+(d<<2)>>2]|0}else f=e}else{f=c[a+12>>2]|0;f=yb[c[(c[f>>2]|0)+8>>2]&1](f,h,c[a+8>>2]|0,0,2)|0}b=c[a+20>>2]|0;e=c[b+8>>2]|0;if((c[e+8>>2]|0)==(c[(c[a+4>>2]|0)+8>>2]|0)){c[b+8>>2]=h;Mb[c[(c[b>>2]|0)+8>>2]&127](b,-1,d)}else{e=c[b+12>>2]|0;c[b+12>>2]=h;Mb[c[(c[b>>2]|0)+12>>2]&127](b,-1,d)}Tb[c[(c[f>>2]|0)+8>>2]&31](f,h,c[a+8>>2]|0,c[a+16>>2]|0,c[a+20>>2]|0);d=c[a+20>>2]|0;c[((c[(c[d+8>>2]|0)+8>>2]|0)==(c[(c[a+4>>2]|0)+8>>2]|0)?d+8|0:d+12|0)>>2]=e;l=h;return}function Sd(b,d,e,f,h,i,k,l){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;k=k|0;l=l|0;var m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,C=0.0,D=0.0;c[b+4>>2]=4;c[b+8>>2]=-1;c[b+12>>2]=-1;g[b+16>>2]=3402823466385288598117041.0e14;a[b+20>>0]=1;a[b+21>>0]=0;c[b+24>>2]=-1;c[b+28>>2]=d;c[b+32>>2]=e;g[b+36>>2]=0.0;g[b+40>>2]=.05000000074505806;c[b+44>>2]=0;c[b>>2]=5692;g[b+688>>2]=0.0;g[b+692>>2]=-1.0;g[b+696>>2]=.8999999761581421;g[b+700>>2]=.30000001192092896;g[b+704>>2]=1.0;g[b+708>>2]=0.0;g[b+712>>2]=0.0;a[b+716>>0]=0;a[b+736>>0]=0;a[b+737>>0]=0;a[b+738>>0]=0;a[b+739>>0]=1;a[b+740>>0]=l&1;c[b+748>>2]=0;c[b+748+4>>2]=0;c[b+748+8>>2]=0;c[b+748+12>>2]=0;c[b+748+16>>2]=0;c[b+600>>2]=c[f>>2];c[b+600+4>>2]=c[f+4>>2];c[b+600+8>>2]=c[f+8>>2];c[b+600+12>>2]=c[f+12>>2];m=+g[d+4>>2];n=+g[d+20>>2];o=+g[d+36>>2];p=+g[i>>2];q=+g[i+4>>2];r=+g[i+8>>2];do if(!(m*p+n*q+o*r>=.9999998807907104))if(!(m*p+n*q+o*r<=-.9999998807907104)){e=(g[j>>2]=o*q-n*r,c[j>>2]|0);s=(g[j>>2]=m*r-o*p,c[j>>2]|0);f=(g[j>>2]=n*p-m*q,c[j>>2]|0);x=r*(m*r-o*p)-q*(n*p-m*q);y=p*(n*p-m*q)-r*(o*q-n*r);w=q*(o*q-n*r)-p*(m*r-o*p);break}else{e=c[d+8>>2]|0;f=c[d+40>>2]|0;s=c[d+24>>2]|0;x=+g[d+12>>2];y=+g[d+28>>2];w=+g[d+44>>2];break}else{e=c[d+8>>2]|0;f=c[d+40>>2]|0;s=c[d+24>>2]|0;x=-+g[d+12>>2];y=-+g[d+28>>2];w=-+g[d+44>>2]}while(0);g[b+552>>2]=x;c[b+556>>2]=e;c[b+560>>2]=c[i>>2];g[b+564>>2]=0.0;g[b+568>>2]=y;c[b+572>>2]=s;c[b+576>>2]=c[i+4>>2];g[b+580>>2]=0.0;g[b+584>>2]=w;c[b+588>>2]=f;c[b+592>>2]=c[i+8>>2];g[b+596>>2]=0.0;p=+g[i+4>>2];t=+g[k+8>>2];q=+g[i+8>>2];u=+g[k+4>>2];v=+g[k>>2];m=+g[i>>2];do if(t*q+(p*u+v*m)<-.9999998807907104)if(+A(+q)>.7071067690849304){n=1.0/+B(+(p*p+q*q));o=-(q*n);r=0.0;n=p*n;m=0.0;break}else{q=1.0/+B(+(p*p+m*m));o=m*q;r=0.0;n=0.0;m=-(p*q);break}else{z=+B(+((t*q+(p*u+v*m)+1.0)*2.0));o=(q*v-t*m)*(1.0/z);r=z*.5;n=(u*m-p*v)*(1.0/z);m=(p*t-q*u)*(1.0/z)}while(0);D=x*r+w*o-y*n;q=y*r+x*n-w*m;p=w*r+y*m-x*o;C=-(x*m)-y*o-w*n;x=-m;o=-o;w=-n;z=q*w+(r*D+C*x)-p*o;y=p*x+(r*q+C*o)-D*w;x=D*o+(C*w+r*p)-q*x;c[b+664>>2]=c[h>>2];c[b+664+4>>2]=c[h+4>>2];c[b+664+8>>2]=c[h+8>>2];c[b+664+12>>2]=c[h+12>>2];g[b+616>>2]=z;g[b+620>>2]=u*x-t*y;c[b+624>>2]=c[k>>2];g[b+628>>2]=0.0;g[b+632>>2]=y;g[b+636>>2]=t*z-v*x;c[b+640>>2]=c[k+4>>2];g[b+644>>2]=0.0;g[b+648>>2]=x;g[b+652>>2]=v*y-u*z;c[b+656>>2]=c[k+8>>2];g[b+660>>2]=0.0;g[b+732>>2]=l?-1.0:1.0;return}function Td(b,d){b=b|0;d=+d;var e=0,f=0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0,p=0,q=0,r=0,s=0,t=0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0;s=l;l=l+32|0;e=c[b+128>>2]|0;if((e|0)>0){f=0;do{Xd(c[b+108>>2]|0,c[b+136>>2]|0,f,0);f=f+1|0;e=c[b+128>>2]|0}while((f|0)<(e|0))}r=c[b+108>>2]|0;m=+g[r+372>>2];n=+g[r+376>>2];h=+g[r+380>>2];h=+B(+(m*m+n*n+h*h))*3.5999999046325684;g[b+104>>2]=h;q=c[b+120>>2]|0;if(+g[r+4+(q<<2)>>2]*+g[r+372>>2]+ +g[r+20+(q<<2)>>2]*+g[r+376>>2]+ +g[r+36+(q<<2)>>2]*+g[r+380>>2]<0.0)g[b+104>>2]=-h;if((e|0)>0){e=0;do{+ye(b,(c[b+136>>2]|0)+(e*284|0)|0);e=e+1|0;f=c[b+128>>2]|0}while((e|0)<(f|0));i=1.0/+g[(c[b+108>>2]|0)+404>>2];if((f|0)>0){f=0;do{e=c[b+136>>2]|0;if(!(a[e+(f*284|0)+84>>0]|0))h=0.0;else{h=+g[e+(f*284|0)+272>>2];h=i*(+g[e+(f*284|0)+216>>2]*(+g[e+(f*284|0)+204>>2]-+g[e+(f*284|0)+32>>2])*+g[e+(f*284|0)+268>>2]-h*+g[(h<0.0?e+(f*284|0)+220|0:e+(f*284|0)+224|0)>>2]);h=h<0.0?0.0:h}g[e+(f*284|0)+276>>2]=h;f=f+1|0;e=c[b+128>>2]|0}while((f|0)<(e|0));if((e|0)>0){e=0;do{q=c[b+136>>2]|0;k=+g[q+(e*284|0)+276>>2];n=+g[q+(e*284|0)+248>>2];k=k>n?n:k;n=k*+g[q+(e*284|0)+4>>2]*d;m=k*+g[q+(e*284|0)+8>>2]*d;g[s+16>>2]=+g[q+(e*284|0)>>2]*k*d;g[s+16+4>>2]=n;g[s+16+8>>2]=m;g[s+16+12>>2]=0.0;r=c[b+108>>2]|0;m=+g[q+(e*284|0)+20>>2]-+g[r+56>>2];n=+g[q+(e*284|0)+24>>2]-+g[r+60>>2];g[s>>2]=+g[q+(e*284|0)+16>>2]-+g[r+52>>2];g[s+4>>2]=m;g[s+8>>2]=n;g[s+12>>2]=0.0;Ij(r,s+16|0,s);e=e+1|0}while((e|0)<(c[b+128>>2]|0))}}}Eb[c[(c[b>>2]|0)+20>>2]&31](b,d);p=c[b+128>>2]|0;if((p|0)<=0){l=s;return}q=c[b+136>>2]|0;r=c[b+108>>2]|0;o=0;do{h=+g[q+(o*284|0)+36>>2]-+g[r+52>>2];i=+g[q+(o*284|0)+40>>2]-+g[r+56>>2];j=+g[q+(o*284|0)+44>>2]-+g[r+60>>2];k=+g[r+392>>2];m=+g[r+396>>2];n=+g[r+388>>2];if(!(a[q+(o*284|0)+84>>0]|0)){e=q+(o*284|0)+240|0;j=+g[e>>2];t=q+(o*284|0)+236|0;f=t;h=j;i=+g[t>>2]}else{e=c[b+120>>2]|0;z=+g[r+4+(e<<2)>>2];x=+g[r+20+(e<<2)>>2];v=+g[r+36+(e<<2)>>2];y=+g[q+(o*284|0)>>2];w=+g[q+(o*284|0)+4>>2];u=+g[q+(o*284|0)+8>>2];j=((i*n-h*k+ +g[r+380>>2])*(v-u*(z*y+x*w+v*u))+((k*j-i*m+ +g[r+372>>2])*(z-y*(z*y+x*w+v*u))+(h*m-j*n+ +g[r+376>>2])*(x-w*(z*y+x*w+v*u))))*d/+g[q+(o*284|0)+212>>2];e=q+(o*284|0)+240|0;g[e>>2]=j;t=q+(o*284|0)+236|0;f=t;h=+g[t>>2];i=j}g[f>>2]=h+i;g[e>>2]=j*.9900000095367432;o=o+1|0}while((o|0)!=(p|0));l=s;return}function Ud(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0,i=0,k=0,m=0,n=0,o=0,p=0.0,q=0.0,r=0.0,s=0.0,t=0,u=0,v=0,w=0,x=0,y=0.0,z=0,A=0,B=0,C=0,D=0,E=0.0;D=l;l=l+32|0;q=+g[d>>2];h=(g[j>>2]=q,c[j>>2]|0);t=q<999999984306749440.0?h:1566444395;p=+g[d+4>>2];k=(g[j>>2]=p,c[j>>2]|0);u=p<999999984306749440.0?k:1566444395;E=+g[d+8>>2];n=(g[j>>2]=E,c[j>>2]|0);w=E<999999984306749440.0?n:1566444395;r=+g[d+12>>2];y=r<0.0?r:0.0;h=q>-999999984306749440.0?h:-581039253;k=p>-999999984306749440.0?k:-581039253;n=E>-999999984306749440.0?n:-581039253;r=r>0.0?r:0.0;E=+g[d+16>>2];B=E<(c[j>>2]=t,+g[j>>2]);i=(g[j>>2]=E,c[j>>2]|0);t=B?i:t;p=+g[d+20>>2];B=p<(c[j>>2]=u,+g[j>>2]);m=(g[j>>2]=p,c[j>>2]|0);u=B?m:u;q=+g[d+24>>2];B=q<(c[j>>2]=w,+g[j>>2]);o=(g[j>>2]=q,c[j>>2]|0);w=B?o:w;s=+g[d+28>>2];y=s<y?s:y;x=E>(c[j>>2]=h,+g[j>>2])?i:h;v=p>(c[j>>2]=k,+g[j>>2])?m:k;m=q>(c[j>>2]=n,+g[j>>2])?o:n;s=r<s?s:r;E=+g[d+32>>2];B=E<(c[j>>2]=t,+g[j>>2]);h=(g[j>>2]=E,c[j>>2]|0);B=B?h:t;q=+g[d+36>>2];A=q<(c[j>>2]=u,+g[j>>2]);i=(g[j>>2]=q,c[j>>2]|0);A=A?i:u;r=+g[d+40>>2];z=r<(c[j>>2]=w,+g[j>>2]);k=(g[j>>2]=r,c[j>>2]|0);z=z?k:w;p=+g[d+44>>2];y=p<y?p:y;w=E>(c[j>>2]=x,+g[j>>2])?h:x;v=q>(c[j>>2]=v,+g[j>>2])?i:v;u=r>(c[j>>2]=m,+g[j>>2])?k:m;p=s<p?p:s;t=c[b+4>>2]|0;h=c[t+4>>2]|0;if((h|0)==(c[t+8>>2]|0)?(C=(h|0)==0?1:h<<1,(h|0)<(C|0)):0){if(!C)o=0;else{c[6485]=(c[6485]|0)+1;h=ec(C<<6|19)|0;if(!h)h=0;else{c[(h+4+15&-16)+-4>>2]=h;h=h+4+15&-16}o=h;h=c[t+4>>2]|0}if((h|0)>0){i=0;do{k=o+(i<<6)|0;m=(c[t+12>>2]|0)+(i<<6)|0;n=k+64|0;do{c[k>>2]=c[m>>2];k=k+4|0;m=m+4|0}while((k|0)<(n|0));i=i+1|0}while((i|0)!=(h|0))}h=c[t+12>>2]|0;if(h|0){if(a[t+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[t+12>>2]=0}a[t+16>>0]=1;c[t+12>>2]=o;c[t+8>>2]=C;h=c[t+4>>2]|0}C=c[t+12>>2]|0;c[C+(h<<6)>>2]=B;c[C+(h<<6)+4>>2]=A;c[C+(h<<6)+8>>2]=z;g[C+(h<<6)+12>>2]=y;c[C+(h<<6)+16>>2]=w;c[C+(h<<6)+20>>2]=v;c[C+(h<<6)+24>>2]=u;g[C+(h<<6)+28>>2]=p;c[C+(h<<6)+32>>2]=-1;c[C+(h<<6)+36>>2]=e;c[C+(h<<6)+40>>2]=f;f=C+(h<<6)+44|0;c[f>>2]=c[D>>2];c[f+4>>2]=c[D+4>>2];c[f+8>>2]=c[D+8>>2];c[f+12>>2]=c[D+12>>2];c[f+16>>2]=c[D+16>>2];c[t+4>>2]=(c[t+4>>2]|0)+1;l=D;return}function Vd(a,b,d){a=a|0;b=b|0;d=d|0;var f=0.0,i=0.0,j=0.0,k=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0;s=l;l=l+80|0;o=c[a+4>>2]|0;Xb[c[(c[o>>2]|0)+16>>2]&3](o,s+76|0,s+72|0,s+68|0,s+64|0,s+60|0,s+56|0,s+52|0,s+48|0,b);o=(c[s+60>>2]|0)+(N(c[s+56>>2]|0,d)|0)|0;r=c[a+4>>2]|0;q=(c[s+68>>2]|0)==0;p=c[s+76>>2]|0;if((c[s+48>>2]|0)==3){n=c[s+64>>2]|0;k=p+(N(n,e[o+4>>1]|0)|0)|0;if(q){i=+g[k+4>>2]*+g[r+8>>2];j=+g[k>>2]*+g[r+4>>2];m=k+8|0;f=+g[r+12>>2]}else{i=+g[r+8>>2]*+h[k+8>>3];j=+g[r+4>>2]*+h[k>>3];m=r+12|0;f=+h[k+16>>3]}f=+g[m>>2]*f;g[s+32>>2]=j;g[s+36>>2]=i;g[s+40>>2]=f;g[s+44>>2]=0.0;k=p+(N(n,e[o+2>>1]|0)|0)|0;if(q){i=+g[k+4>>2]*+g[r+8>>2];j=+g[k>>2]*+g[r+4>>2];m=k+8|0;f=+g[r+12>>2]}else{i=+g[r+8>>2]*+h[k+8>>3];j=+g[r+4>>2]*+h[k>>3];m=r+12|0;f=+h[k+16>>3]}f=+g[m>>2]*f;g[s+16>>2]=j;g[s+20>>2]=i;g[s+24>>2]=f;g[s+28>>2]=0.0;m=p+(N(n,e[o>>1]|0)|0)|0;if(q){i=+g[m+4>>2]*+g[r+8>>2];j=+g[m>>2]*+g[r+4>>2];k=m+8|0;f=+g[r+12>>2]}else{i=+g[r+8>>2]*+h[m+8>>3];j=+g[r+4>>2]*+h[m>>3];k=r+12|0;f=+h[m+16>>3]}f=+g[k>>2]*f;g[s>>2]=j;r=s+4|0;g[r>>2]=i;r=s+8|0;g[r>>2]=f;r=s+12|0;g[r>>2]=0.0;r=a+8|0;r=c[r>>2]|0;q=c[r>>2]|0;q=q+8|0;q=c[q>>2]|0;Pb[q&127](r,s,b,d);d=c[a+4>>2]|0;a=c[d>>2]|0;a=a+24|0;a=c[a>>2]|0;Ib[a&127](d,b);l=s;return}else{n=c[s+64>>2]|0;k=p+(N(n,c[o+8>>2]|0)|0)|0;if(q){m=k+8|0;i=+g[k+4>>2]*+g[r+8>>2];j=+g[k>>2]*+g[r+4>>2];f=+g[r+12>>2]}else{m=r+12|0;i=+g[r+8>>2]*+h[k+8>>3];j=+g[r+4>>2]*+h[k>>3];f=+h[k+16>>3]}f=+g[m>>2]*f;g[s+32>>2]=j;g[s+36>>2]=i;g[s+40>>2]=f;g[s+44>>2]=0.0;k=p+(N(n,c[o+4>>2]|0)|0)|0;if(q){i=+g[k+4>>2]*+g[r+8>>2];j=+g[k>>2]*+g[r+4>>2];m=k+8|0;f=+g[r+12>>2]}else{i=+g[r+8>>2]*+h[k+8>>3];j=+g[r+4>>2]*+h[k>>3];m=r+12|0;f=+h[k+16>>3]}f=+g[m>>2]*f;g[s+16>>2]=j;g[s+20>>2]=i;g[s+24>>2]=f;g[s+28>>2]=0.0;m=p+(N(n,c[o>>2]|0)|0)|0;if(q){i=+g[m+4>>2]*+g[r+8>>2];j=+g[m>>2]*+g[r+4>>2];k=m+8|0;f=+g[r+12>>2]}else{i=+g[r+8>>2]*+h[m+8>>3];j=+g[r+4>>2]*+h[m>>3];k=r+12|0;f=+h[m+16>>3]}f=+g[k>>2]*f;g[s>>2]=j;r=s+4|0;g[r>>2]=i;r=s+8|0;g[r>>2]=f;r=s+12|0;g[r>>2]=0.0;r=a+8|0;r=c[r>>2]|0;q=c[r>>2]|0;q=q+8|0;q=c[q>>2]|0;Pb[q&127](r,s,b,d);d=c[a+4>>2]|0;a=c[d>>2]|0;a=a+24|0;a=c[a>>2]|0;Ib[a&127](d,b);l=s;return}}function Wd(b,d,e,f){b=b|0;d=d|0;e=e|0;f=+f;var h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0;o=l;l=l+16|0;n=+g[d>>2];i=+g[d+4>>2];j=+g[d+8>>2];k=+g[e>>2];m=+g[e+4>>2];h=+g[e+8>>2];if(!(a[b+232>>0]|0)){z=+g[b+104>>2];w=+g[b+120>>2];C=+g[b+136>>2];y=+g[b+108>>2];u=+g[b+124>>2];B=+g[b+140>>2];x=+g[b+112>>2];s=+g[b+128>>2];A=+g[b+144>>2];F=-+g[b+152>>2];E=-+g[b+156>>2];D=-+g[b+160>>2];J=+g[b+168>>2];I=+g[b+172>>2];r=+g[b+176>>2];H=+g[b+184>>2];G=+g[b+188>>2];q=+g[b+192>>2];v=+g[b+200>>2];t=+g[b+204>>2];p=+g[b+208>>2];r=h*(C*J+B*I+A*r)+(k*(z*J+y*I+x*r)+m*(w*J+u*I+s*r))+(J*(z*F+w*E+C*D)+(y*F+u*E+B*D)*I+(x*F+s*E+A*D)*r+ +g[b+216>>2]);q=h*(C*H+B*G+A*q)+(k*(z*H+y*G+x*q)+m*(w*H+u*G+s*q))+((z*F+w*E+C*D)*H+(y*F+u*E+B*D)*G+(x*F+s*E+A*D)*q+ +g[b+220>>2]);p=(z*F+w*E+C*D)*v+(y*F+u*E+B*D)*t+(x*F+s*E+A*D)*p+ +g[b+224>>2]+(h*(C*v+B*t+A*p)+(k*(z*v+y*t+x*p)+m*(w*v+u*t+s*p)));g[o>>2]=r;g[o+4>>2]=q;n=n*(n*f+k-r)+i*(i*f+m-q)+j*(j*f+h-p);f=p;e=o+8|0;g[e>>2]=f;e=o+12|0;g[e>>2]=0.0;b=b+36|0;b=c[b>>2]|0;e=c[b>>2]|0;e=e+16|0;e=c[e>>2]|0;Nb[e&15](b,d,o,n);l=o;return}else{z=+g[b+40>>2];C=+g[b+56>>2];w=+g[b+72>>2];A=+g[b+44>>2];E=+g[b+60>>2];x=+g[b+76>>2];B=+g[b+48>>2];J=+g[b+64>>2];y=+g[b+80>>2];t=-+g[b+88>>2];u=-+g[b+92>>2];v=-+g[b+96>>2];p=+g[b+168>>2];q=+g[b+172>>2];G=+g[b+176>>2];r=+g[b+184>>2];s=+g[b+188>>2];H=+g[b+192>>2];D=+g[b+200>>2];F=+g[b+204>>2];I=+g[b+208>>2];G=(j*f+h)*(w*p+x*q+y*G)+((n*f+k)*(z*p+A*q+B*G)+(i*f+m)*(C*p+E*q+J*G))+(p*(z*t+C*u+w*v)+(A*t+E*u+x*v)*q+(B*t+J*u+y*v)*G+ +g[b+216>>2]);H=(j*f+h)*(w*r+x*s+y*H)+((n*f+k)*(z*r+A*s+B*H)+(i*f+m)*(C*r+E*s+J*H))+((z*t+C*u+w*v)*r+(A*t+E*u+x*v)*s+(B*t+J*u+y*v)*H+ +g[b+220>>2]);I=(z*t+C*u+w*v)*D+(A*t+E*u+x*v)*F+(B*t+J*u+y*v)*I+ +g[b+224>>2]+((j*f+h)*(w*D+x*F+y*I)+((n*f+k)*(z*D+A*F+B*I)+(i*f+m)*(C*D+E*F+J*I)));g[o>>2]=G+n*(n*(G-k)+i*(H-m)+j*(I-h));g[o+4>>2]=H+i*(n*(G-k)+i*(H-m)+j*(I-h));J=n*(G-k)+i*(H-m)+j*(I-h);I=I+j*(n*(G-k)+i*(H-m)+j*(I-h));e=o+8|0;g[e>>2]=I;e=o+12|0;g[e>>2]=0.0;b=b+36|0;b=c[b>>2]|0;e=c[b>>2]|0;e=e+16|0;e=c[e>>2]|0;Nb[e&15](b,d,o,J);l=o;return}}function Xd(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0;Uf(a,b+(c*284|0)|0,d);i=+g[b+(c*284|0)+52>>2];f=+g[b+(c*284|0)+56>>2];e=+g[b+(c*284|0)+60>>2];J=+g[b+(c*284|0)+76>>2];x=+g[b+(c*284|0)+72>>2];z=+g[b+(c*284|0)+68>>2];w=1.0/+B(+((x*-i-z*-f)*(x*-i-z*-f)+((J*-f-x*-e)*(J*-f-x*-e)+(z*-e-J*-i)*(z*-e-J*-i))));v=(J*-f-x*-e)*w;u=(z*-e-J*-i)*w;w=(x*-i-z*-f)*w;j=+g[b+(c*284|0)+232>>2]*.5;n=+E(+j)/+B(+(i*i+f*f+e*e));j=+D(+j);m=2.0/(j*j+(n*-e*n*-e+(n*-i*n*-i+n*-f*n*-f)));H=1.0-(n*-f*n*-f*m+n*-e*n*-e*m);G=n*-i*n*-f*m-j*n*-e*m;I=n*-i*n*-e*m+j*n*-f*m;C=n*-i*n*-f*m+j*n*-e*m;A=1.0-(n*-i*n*-i*m+n*-e*n*-e*m);F=n*-f*n*-e*m-j*n*-i*m;l=n*-i*n*-e*m-j*n*-f*m;j=n*-f*n*-e*m+j*n*-i*m;m=1.0-(n*-i*n*-i*m+n*-f*n*-f*m);n=+g[b+(c*284|0)+236>>2]*-.5;y=+E(+n)/+B(+(J*J+(x*x+z*z)));n=+D(+n);r=2.0/(n*n+(J*y*J*y+(z*y*z*y+x*y*x*y)));o=1.0-(x*y*x*y*r+J*y*J*y*r);k=z*y*x*y*r-n*J*y*r;t=z*y*J*y*r+n*x*y*r;p=z*y*x*y*r+n*J*y*r;h=1.0-(z*y*z*y*r+J*y*J*y*r);s=x*y*J*y*r-n*z*y*r;q=z*y*J*y*r-n*x*y*r;n=x*y*J*y*r+n*z*y*r;r=1.0-(z*y*z*y*r+x*y*x*y*r);y=+g[b+(c*284|0)+68>>2];x=+g[b+(c*284|0)+72>>2];z=+g[b+(c*284|0)+76>>2];g[b+(c*284|0)+92>>2]=z*(H*t+G*s+I*r)+(y*(I*q+(G*p+H*o))+x*(I*n+(H*k+G*h)));g[b+(c*284|0)+96>>2]=w*(H*t+G*s+I*r)+(v*(I*q+(G*p+H*o))+u*(I*n+(H*k+G*h)));g[b+(c*284|0)+100>>2]=(H*t+G*s+I*r)*-e+((I*q+(G*p+H*o))*-i+(I*n+(H*k+G*h))*-f);g[b+(c*284|0)+104>>2]=0.0;g[b+(c*284|0)+108>>2]=z*(C*t+s*A+F*r)+(y*(F*q+(p*A+C*o))+x*(F*n+(C*k+A*h)));g[b+(c*284|0)+112>>2]=w*(C*t+s*A+F*r)+(v*(F*q+(p*A+C*o))+u*(F*n+(C*k+A*h)));g[b+(c*284|0)+116>>2]=(C*t+s*A+F*r)*-e+((F*q+(p*A+C*o))*-i+(F*n+(C*k+A*h))*-f);g[b+(c*284|0)+120>>2]=0.0;g[b+(c*284|0)+124>>2]=z*(l*t+j*s+m*r)+(y*(q*m+(j*p+l*o))+x*(n*m+(l*k+j*h)));g[b+(c*284|0)+128>>2]=w*(l*t+j*s+m*r)+(v*(q*m+(j*p+l*o))+u*(n*m+(l*k+j*h)));g[b+(c*284|0)+132>>2]=(l*t+j*s+m*r)*-e+((q*m+(j*p+l*o))*-i+(n*m+(l*k+j*h))*-f);g[b+(c*284|0)+136>>2]=0.0;h=+g[b+(c*284|0)+32>>2];f=f*h+ +g[b+(c*284|0)+40>>2];e=e*h+ +g[b+(c*284|0)+44>>2];g[b+(c*284|0)+140>>2]=+g[b+(c*284|0)+36>>2]+i*h;g[b+(c*284|0)+144>>2]=f;g[b+(c*284|0)+148>>2]=e;g[b+(c*284|0)+152>>2]=0.0;return}function Yd(a,b){a=a|0;b=b|0;var d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0;c[a+556>>2]=c[b>>2];c[a+556+4>>2]=c[b+4>>2];c[a+556+8>>2]=c[b+8>>2];c[a+556+12>>2]=c[b+12>>2];q=+g[a+568>>2];j=+g[6126];r=+g[a+560>>2];e=+g[6128];o=+g[a+564>>2];h=+g[6127];p=+g[a+556>>2];i=(j*o+q*h-e*p)*-o+(q*(q*j+r*e-o*h)+(-(j*p)-r*h-e*o)*-p)-(q*e+h*p-j*r)*-r;k=(q*e+h*p-j*r)*-p+(q*(j*o+q*h-e*p)+(-(j*p)-r*h-e*o)*-r)-(q*j+r*e-o*h)*-o;d=(q*j+r*e-o*h)*-r+((-(j*p)-r*h-e*o)*-o+q*(q*e+h*p-j*r))-(j*o+q*h-e*p)*-p;do if(e*d+(h*k+j*i)<-.9999998807907104)if(+A(+e)>.7071067690849304){d=1.0/+B(+(e*e+h*h));l=-(e*d);f=0.0;d=h*d;e=0.0;break}else{f=1.0/+B(+(j*j+h*h));l=j*f;f=-(h*f);d=0.0;e=0.0;break}else{v=+B(+((e*d+(h*k+j*i)+1.0)*2.0));l=(e*i-j*d)*(1.0/v);f=(h*d-e*k)*(1.0/v);d=(j*k-h*i)*(1.0/v);e=v*.5}while(0);m=1.0/+B(+(f*f+l*l+d*d+e*e));t=f*m;n=l*m;s=d*m;m=e*m;e=1.0/+B(+((q*m-p*-t-r*-n-o*-s)*(q*m-p*-t-r*-n-o*-s)+((r*-t+(o*m+q*-s)-p*-n)*(r*-t+(o*m+q*-s)-p*-n)+((o*-n+(p*m+q*-t)-r*-s)*(o*-n+(p*m+q*-t)-r*-s)+(p*-s+(q*-n+r*m)-o*-t)*(p*-s+(q*-n+r*m)-o*-t)))));h=(o*-n+(p*m+q*-t)-r*-s)*e;v=(p*-s+(q*-n+r*m)-o*-t)*e;f=(r*-t+(o*m+q*-s)-p*-n)*e;p=(q*m-p*-t-r*-n-o*-s)*e;e=+g[a+444>>2];if(e>=.05000000074505806?(u=+g[a+448>>2],u>=.05000000074505806):0){d=m<-1.0?-1.0:m;d=+G(+(d>1.0?1.0:d))*2.0;if(d>1.1920928955078125e-07){i=1.0/+B(+(s*s+(t*t+n*n)));if(+A(+(n*i))>1.1920928955078125e-07){k=t*i;j=n*i;l=s*i;e=+B(+((s*i*s*i/(n*i*n*i)+1.0)/(s*i*s*i/(n*i*n*i)/(e*e)+1.0/(u*u))))}else{k=t*i;j=n*i;l=s*i}}else{k=0.0;j=0.0;l=0.0;e=0.0}if(+A(+d)>1.1920928955078125e-07){if(!(d>e)){e=-e;if(d<e)d=e}else d=e;m=d*.5;u=+E(+m)/+B(+(k*k+j*j+l*l));n=j*u;m=+D(+m);o=k*u;l=l*u}else{o=t;l=s}}else{o=t;l=s}k=+g[a+452>>2];if(k>=.05000000074505806){d=p<-1.0?-1.0:p;d=+G(+(d>1.0?1.0:d))*2.0;if(d>3.1415927410125732){d=-p<-1.0?-1.0:-p;d=+G(+(d>1.0?1.0:d))*2.0;e=-h;i=-v;j=-f}else{e=h;i=v;j=f}if(d>1.1920928955078125e-07){u=1.0/+B(+(e*e+i*i+j*j));e=e*u;i=i*u;j=j*u}if(+A(+d)>1.1920928955078125e-07){if(!(d>k)){if(d<-k)d=-k}else d=k;v=d*.5;d=+E(+v)/+B(+(j*j+(i*i+e*e)));h=e*d;f=j*d;e=+D(+v);d=i*d}else{e=p;d=v}}else{e=p;d=v}g[a+556>>2]=n*f+(m*h+o*e)-l*d;g[a+560>>2]=l*h+(m*d+n*e)-o*f;g[a+564>>2]=o*d+(m*f+l*e)-n*h;g[a+568>>2]=m*e-o*h-n*d-l*f;return}function Zd(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0,H=0.0,I=0.0,J=0.0;d=l;l=l+96|0;k=+g[b>>2];m=+g[a+28>>2];n=+g[b+4>>2];o=+g[a+32>>2];p=+g[b+8>>2];q=+g[a+36>>2];r=+g[a+44>>2];s=+g[a+48>>2];t=+g[a+52>>2];u=+g[a+60>>2];v=+g[a+64>>2];w=+g[a+68>>2];x=+g[a+76>>2];y=+g[a+80>>2];z=+g[a+84>>2];g[d+80>>2]=k*m+n*o+p*q+x;g[d+80+4>>2]=k*r+n*s+p*t+y;g[d+80+8>>2]=k*u+n*v+p*w+z;g[d+80+12>>2]=0.0;A=+g[b+16>>2];C=+g[b+20>>2];D=+g[b+24>>2];g[d+64>>2]=x+(m*A+o*C+q*D);g[d+64+4>>2]=y+(r*A+s*C+t*D);g[d+64+8>>2]=z+(u*A+v*C+w*D);g[d+64+12>>2]=0.0;E=+g[b+32>>2];F=+g[b+36>>2];j=+g[b+40>>2];g[d+48>>2]=x+(m*E+o*F+q*j);g[d+48+4>>2]=y+(r*E+s*F+t*j);g[d+48+8>>2]=z+(u*E+v*F+w*j);g[d+48+12>>2]=0.0;f=(k*m+n*o+p*q+x+(x+(m*A+o*C+q*D))+(x+(m*E+o*F+q*j)))*.3333333432674408;h=(k*r+n*s+p*t+y+(y+(r*A+s*C+t*D))+(y+(r*E+s*F+t*j)))*.3333333432674408;i=(k*u+n*v+p*w+z+(z+(u*A+v*C+w*D))+(z+(u*E+v*F+w*j)))*.3333333432674408;g[d+32>>2]=f;g[d+32+4>>2]=h;g[d+32+8>>2]=i;g[d+32+12>>2]=0.0;b=c[a+8>>2]|0;if(!((sb[c[(c[b>>2]|0)+56>>2]&127](b)|0)&16384)){e=c[a+8>>2]|0;G=c[e>>2]|0;G=G+16|0;G=c[G>>2]|0;b=a+12|0;Pb[G&127](e,d+80|0,d+64|0,b);e=c[a+8>>2]|0;G=c[e>>2]|0;G=G+16|0;G=c[G>>2]|0;Pb[G&127](e,d+64|0,d+48|0,b);a=c[a+8>>2]|0;e=c[a>>2]|0;e=e+16|0;e=c[e>>2]|0;Pb[e&127](a,d+48|0,d+80|0,b);l=d;return}J=+g[d+80>>2];I=y+(r*A+s*C+t*D)-(k*r+n*s+p*t+y);H=z+(u*A+v*C+w*D)-(k*u+n*v+p*w+z);y=y+(r*E+s*F+t*j)-(k*r+n*s+p*t+y);w=z+(u*E+v*F+w*j)-(k*u+n*v+p*w+z);z=H*(x+(m*E+o*F+q*j)-J)-(x+(m*A+o*C+q*D)-J)*w;E=(x+(m*A+o*C+q*D)-J)*y-I*(x+(m*E+o*F+q*j)-J);F=1.0/+B(+(E*E+((I*w-H*y)*(I*w-H*y)+z*z)));c[d+16>>2]=1065353216;c[d+16+4>>2]=1065353216;c[d+16+8>>2]=0;g[d+16+12>>2]=0.0;b=c[a+8>>2]|0;e=c[(c[b>>2]|0)+16>>2]|0;g[d>>2]=(I*w-H*y)*F+f;g[d+4>>2]=z*F+h;g[d+8>>2]=E*F+i;g[d+12>>2]=0.0;Pb[e&127](b,d+32|0,d,d+16|0);b=c[a+8>>2]|0;e=c[b>>2]|0;e=e+16|0;e=c[e>>2]|0;G=a+12|0;Pb[e&127](b,d+80|0,d+64|0,G);b=c[a+8>>2]|0;e=c[b>>2]|0;e=e+16|0;e=c[e>>2]|0;Pb[e&127](b,d+64|0,d+48|0,G);a=c[a+8>>2]|0;b=c[a>>2]|0;b=b+16|0;b=c[b>>2]|0;Pb[b&127](a,d+48|0,d+80|0,G);l=d;return}function _d(b,d,e,f,h,i){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;c[b+4>>2]=6;c[b+8>>2]=-1;c[b+12>>2]=-1;g[b+16>>2]=3402823466385288598117041.0e14;a[b+20>>0]=1;a[b+21>>0]=0;c[b+24>>2]=-1;c[b+28>>2]=d;c[b+32>>2]=e;g[b+36>>2]=0.0;g[b+40>>2]=.05000000074505806;c[b+44>>2]=0;c[b>>2]=5516;c[b+48>>2]=c[f>>2];c[b+48+4>>2]=c[f+4>>2];c[b+48+8>>2]=c[f+8>>2];c[b+48+12>>2]=c[f+12>>2];c[b+64>>2]=c[f+16>>2];c[b+64+4>>2]=c[f+16+4>>2];c[b+64+8>>2]=c[f+16+8>>2];c[b+64+12>>2]=c[f+16+12>>2];c[b+80>>2]=c[f+32>>2];c[b+80+4>>2]=c[f+32+4>>2];c[b+80+8>>2]=c[f+32+8>>2];c[b+80+12>>2]=c[f+32+12>>2];c[b+96>>2]=c[f+48>>2];c[b+96+4>>2]=c[f+48+4>>2];c[b+96+8>>2]=c[f+48+8>>2];c[b+96+12>>2]=c[f+48+12>>2];c[b+112>>2]=c[h>>2];c[b+112+4>>2]=c[h+4>>2];c[b+112+8>>2]=c[h+8>>2];c[b+112+12>>2]=c[h+12>>2];c[b+128>>2]=c[h+16>>2];c[b+128+4>>2]=c[h+16+4>>2];c[b+128+8>>2]=c[h+16+8>>2];c[b+128+12>>2]=c[h+16+12>>2];c[b+144>>2]=c[h+32>>2];c[b+144+4>>2]=c[h+32+4>>2];c[b+144+8>>2]=c[h+32+8>>2];c[b+144+12>>2]=c[h+32+12>>2];c[b+160>>2]=c[h+48>>2];c[b+160+4>>2]=c[h+48+4>>2];c[b+160+8>>2]=c[h+48+8>>2];c[b+160+12>>2]=c[h+48+12>>2];d=b+680|0;e=d+48|0;do{c[d>>2]=0;d=d+4|0}while((d|0)<(e|0));c[b+740>>2]=0;c[b+740+4>>2]=0;c[b+740+8>>2]=0;c[b+740+12>>2]=0;c[b+756>>2]=1045220557;c[b+760>>2]=1045220557;c[b+764>>2]=1045220557;c[b+768>>2]=0;c[b+768+4>>2]=0;c[b+768+8>>2]=0;c[b+768+12>>2]=0;c[b+768+16>>2]=0;g[b+728>>2]=.699999988079071;g[b+732>>2]=1.0;g[b+736>>2]=.5;a[b+788>>0]=0;a[b+788+1>>0]=0;a[b+788+2>>0]=0;c[b+792>>2]=0;c[b+792+4>>2]=0;c[b+792+8>>2]=0;c[b+808>>2]=0;c[b+808+4>>2]=0;c[b+808+8>>2]=0;g[b+928>>2]=0.0;g[b+876>>2]=0.0;g[b+880>>2]=.10000000149011612;g[b+884>>2]=300.0;g[b+868>>2]=1.0;g[b+872>>2]=-1.0;g[b+896>>2]=0.0;g[b+900>>2]=.20000000298023224;g[b+904>>2]=0.0;g[b+908>>2]=0.0;g[b+888>>2]=1.0;g[b+892>>2]=.5;c[b+924>>2]=0;g[b+916>>2]=0.0;a[b+912>>0]=0;g[b+992>>2]=0.0;g[b+940>>2]=0.0;g[b+944>>2]=.10000000149011612;g[b+948>>2]=300.0;g[b+932>>2]=1.0;g[b+936>>2]=-1.0;g[b+960>>2]=0.0;g[b+964>>2]=.20000000298023224;g[b+968>>2]=0.0;g[b+972>>2]=0.0;g[b+952>>2]=1.0;g[b+956>>2]=.5;c[b+988>>2]=0;g[b+980>>2]=0.0;a[b+976>>0]=0;g[b+1056>>2]=0.0;g[b+1004>>2]=0.0;g[b+1008>>2]=.10000000149011612;g[b+1012>>2]=300.0;g[b+996>>2]=1.0;g[b+1e3>>2]=-1.0;g[b+1024>>2]=0.0;g[b+1028>>2]=.20000000298023224;g[b+1032>>2]=0.0;g[b+1036>>2]=0.0;g[b+1016>>2]=1.0;g[b+1020>>2]=.5;c[b+1052>>2]=0;g[b+1044>>2]=0.0;a[b+1040>>0]=0;a[b+1300>>0]=i&1;a[b+1301>>0]=1;c[b+1304>>2]=0;a[b+1308>>0]=0;Qc(b,(c[b+28>>2]|0)+4|0,(c[b+32>>2]|0)+4|0);return}function $d(a,e,f){a=a|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0;c[e+16>>2]=c[a+20>>2];c[e+20>>2]=c[a+24>>2];c[e+24>>2]=c[a+28>>2];c[e+28>>2]=c[a+32>>2];c[e>>2]=c[a+4>>2];c[e+4>>2]=c[a+8>>2];c[e+8>>2]=c[a+12>>2];c[e+12>>2]=c[a+16>>2];c[e+32>>2]=c[a+36>>2];c[e+36>>2]=c[a+40>>2];c[e+40>>2]=c[a+44>>2];c[e+44>>2]=c[a+48>>2];c[e+48>>2]=c[a+56>>2];c[e+52>>2]=d[a+60>>0];k=c[a+88>>2]|0;c[e+56>>2]=k;if(k){k=ub[c[(c[f>>2]|0)+28>>2]&31](f,c[a+96>>2]|0)|0;c[e+64>>2]=k;if(k|0){i=c[a+88>>2]|0;j=wb[c[(c[f>>2]|0)+16>>2]&63](f,48,i)|0;if((i|0)>0){g=c[j+8>>2]|0;h=0;while(1){k=c[a+96>>2]|0;c[g+16>>2]=c[k+(h<<6)+16>>2];c[g+20>>2]=c[k+(h<<6)+20>>2];c[g+24>>2]=c[k+(h<<6)+24>>2];c[g+28>>2]=c[k+(h<<6)+28>>2];c[g>>2]=c[k+(h<<6)>>2];c[g+4>>2]=c[k+(h<<6)+4>>2];c[g+8>>2]=c[k+(h<<6)+8>>2];c[g+12>>2]=c[k+(h<<6)+12>>2];c[g+32>>2]=c[k+(h<<6)+32>>2];c[g+36>>2]=c[k+(h<<6)+36>>2];c[g+40>>2]=c[k+(h<<6)+40>>2];c[g+44>>2]=0;h=h+1|0;if((h|0)==(i|0))break;else g=g+48|0}}Tb[c[(c[f>>2]|0)+20>>2]&31](f,j,18846,1497453121,c[a+96>>2]|0)}}else c[e+64>>2]=0;k=c[a+128>>2]|0;c[e+60>>2]=k;if(k){k=ub[c[(c[f>>2]|0)+28>>2]&31](f,c[a+136>>2]|0)|0;c[e+68>>2]=k;if(k|0){j=c[a+128>>2]|0;k=wb[c[(c[f>>2]|0)+16>>2]&63](f,16,j)|0;if((j|0)>0){g=c[a+136>>2]|0;h=c[k+8>>2]|0;i=0;while(1){c[h+12>>2]=c[g+(i<<4)+12>>2];b[h+6>>1]=b[g+(i<<4)+6>>1]|0;b[h+8>>1]=b[g+(i<<4)+8>>1]|0;b[h+10>>1]=b[g+(i<<4)+10>>1]|0;b[h>>1]=b[g+(i<<4)>>1]|0;b[h+2>>1]=b[g+(i<<4)+2>>1]|0;b[h+4>>1]=b[g+(i<<4)+4>>1]|0;i=i+1|0;if((i|0)==(j|0))break;else h=h+16|0}}else g=c[a+136>>2]|0;Tb[c[(c[f>>2]|0)+20>>2]&31](f,k,18869,1497453121,g)}}else c[e+68>>2]=0;c[e+76>>2]=c[a+144>>2];k=c[a+152>>2]|0;c[e+80>>2]=k;if(!k){c[e+72>>2]=0;return 18913}k=ub[c[(c[f>>2]|0)+28>>2]&31](f,c[a+160>>2]|0)|0;c[e+72>>2]=k;if(!k)return 18913;j=c[a+152>>2]|0;k=wb[c[(c[f>>2]|0)+16>>2]&63](f,20,j)|0;if((j|0)>0){g=c[a+160>>2]|0;h=c[k+8>>2]|0;i=0;while(1){b[h+14>>1]=b[g+(i<<5)+6>>1]|0;b[h+16>>1]=b[g+(i<<5)+8>>1]|0;b[h+18>>1]=b[g+(i<<5)+10>>1]|0;b[h+8>>1]=b[g+(i<<5)>>1]|0;b[h+10>>1]=b[g+(i<<5)+2>>1]|0;b[h+12>>1]=b[g+(i<<5)+4>>1]|0;c[h>>2]=c[g+(i<<5)+12>>2];c[h+4>>2]=c[g+(i<<5)+16>>2];i=i+1|0;if((i|0)==(j|0))break;else h=h+20|0}}else g=c[a+160>>2]|0;Tb[c[(c[f>>2]|0)+20>>2]&31](f,k,18892,1497453121,g);return 18913}function ae(a,b,d,e){a=a|0;b=b|0;d=d|0;e=+e;var f=0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0,p=0.0,q=0.0,r=0.0,s=0,t=0,u=0,v=0.0,w=0.0,x=0,y=0;t=l;l=l+192|0;s=c[(c[a+4>>2]|0)+772>>2]|0;o=c[(c[a+8>>2]|0)+8>>2]|0;k=+g[d>>2];p=+g[b>>2]*e+k;m=+g[d+4>>2];q=+g[b+4>>2]*e+m;n=+g[d+8>>2];r=+g[b+8>>2]*e+n;if((s|0)!=(o|0)){u=c[(c[a+12>>2]|0)+8>>2]|0;w=p-+g[u+52>>2];v=q-+g[u+56>>2];j=r-+g[u+60>>2];f=o;h=w*+g[u+4>>2]+v*+g[u+20>>2]+j*+g[u+36>>2];i=w*+g[u+8>>2]+v*+g[u+24>>2]+j*+g[u+40>>2];j=w*+g[u+12>>2]+v*+g[u+28>>2]+j*+g[u+44>>2]}else{v=p-+g[s+52>>2];w=q-+g[s+56>>2];j=r-+g[s+60>>2];f=c[(c[a+12>>2]|0)+8>>2]|0;h=v*+g[s+4>>2]+w*+g[s+20>>2]+j*+g[s+36>>2];i=v*+g[s+8>>2]+w*+g[s+24>>2]+j*+g[s+40>>2];j=v*+g[s+12>>2]+w*+g[s+28>>2]+j*+g[s+44>>2]}k=k-+g[f+52>>2];m=m-+g[f+56>>2];w=n-+g[f+60>>2];n=k*+g[f+4>>2]+m*+g[f+20>>2]+w*+g[f+36>>2];v=k*+g[f+8>>2]+m*+g[f+24>>2]+w*+g[f+40>>2];w=k*+g[f+12>>2]+m*+g[f+28>>2]+w*+g[f+44>>2];g[t>>2]=h;g[t+4>>2]=i;g[t+8>>2]=j;g[t+12>>2]=0.0;g[t+16>>2]=n;g[t+20>>2]=v;g[t+24>>2]=w;g[t+28>>2]=0.0;c[t+64>>2]=c[b>>2];c[t+64+4>>2]=c[b+4>>2];c[t+64+8>>2]=c[b+8>>2];c[t+64+12>>2]=c[b+12>>2];g[t+80>>2]=e;c[t+84>>2]=0;c[t+84+4>>2]=0;c[t+84+8>>2]=0;c[t+84+12>>2]=0;f=t+116|0;b=f+44|0;do{c[f>>2]=0;f=f+4|0}while((f|0)<(b|0));g[t+48>>2]=p;g[t+52>>2]=q;g[t+56>>2]=r;g[t+60>>2]=0.0;c[t+32>>2]=c[d>>2];c[t+32+4>>2]=c[d+4>>2];c[t+32+8>>2]=c[d+8>>2];c[t+32+12>>2]=c[d+12>>2];if((s|0)!=(o|0)){u=a+24|0;b=a+28|0;d=a+16|0;f=a+20|0;u=c[u>>2]|0;b=c[b>>2]|0;d=c[d>>2]|0;f=c[f>>2]|0;y=t+100|0;c[y>>2]=f;y=t+104|0;c[y>>2]=d;y=t+108|0;c[y>>2]=b;y=t+112|0;c[y>>2]=u;y=a+12|0;x=(s|0)!=(o|0)?y:a+8|0;x=c[x>>2]|0;s=(s|0)!=(o|0)?a+8|0:y;s=c[s>>2]|0;o=a+36|0;o=c[o>>2]|0;a=c[o>>2]|0;a=a+12|0;a=c[a>>2]|0;+pb[a&1](o,t,x,f,b,s,d,u);l=t;return}else{y=a+28|0;d=a+24|0;x=a+20|0;b=a+16|0;y=c[y>>2]|0;d=c[d>>2]|0;x=c[x>>2]|0;b=c[b>>2]|0;u=t+100|0;c[u>>2]=b;u=t+104|0;c[u>>2]=x;u=t+108|0;c[u>>2]=d;u=t+112|0;c[u>>2]=y;u=a+12|0;f=(s|0)!=(o|0)?u:a+8|0;f=c[f>>2]|0;u=(s|0)!=(o|0)?a+8|0:u;u=c[u>>2]|0;s=a+36|0;s=c[s>>2]|0;o=c[s>>2]|0;o=o+12|0;o=c[o>>2]|0;+pb[o&1](s,t,f,b,d,u,x,y);l=t;return}}function be(a,d,f,h,i){a=a|0;d=d|0;f=f|0;h=h|0;i=i|0;var j=0,k=0,l=0,m=0,n=0.0,o=0.0,p=0.0,q=0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0;c[d+16>>2]=c[f>>2];c[d+16+4>>2]=c[f+4>>2];c[d+16+8>>2]=c[f+8>>2];c[d+16+12>>2]=c[f+12>>2];c[d+32>>2]=c[h>>2];c[d+32+4>>2]=c[h+4>>2];c[d+32+8>>2]=c[h+8>>2];c[d+32+12>>2]=c[h+12>>2];B=c[a+60>>2]|0;C=c[d+12>>2]&65535;r=+g[a+8>>2];t=+g[a+12>>2];v=+g[a+16>>2];s=+g[a+40>>2];n=(+g[f>>2]-r)*s;u=+g[a+44>>2];o=(+g[f+4>>2]-t)*u;w=+g[a+48>>2];p=(+g[f+8>>2]-v)*w;if(!(n<=0.0)){z=b[a+6>>1]|0;z=b[a+4>>1]&(!(n>=+(z&65535))?~~n&65535:z)}else z=0;if(!(o<=0.0)){A=b[a+6>>1]|0;A=b[a+4>>1]&(!(o>=+(A&65535))?~~o&65535:A)}else A=0;if(!(p<=0.0)){D=b[a+6>>1]|0;D=b[a+4>>1]&(!(p>=+(D&65535))?~~p&65535:D)}else D=0;p=(+g[h>>2]-r)*s;o=(+g[h+4>>2]-t)*u;n=(+g[h+8>>2]-v)*w;if(!(p<=0.0)){q=b[a+6>>1]|0;q=b[a+4>>1]&(!(p>=+(q&65535))?~~p&65535:q)|1}else q=1;if(!(o<=0.0)){x=b[a+6>>1]|0;x=b[a+4>>1]&(!(o>=+(x&65535))?~~o&65535:x)|1}else x=1;if(!(n<=0.0)){y=b[a+6>>1]|0;y=b[a+4>>1]&(!(n>=+(y&65535))?~~n&65535:y)|1}else y=1;j=b[B+(C<<6)+48>>1]|0;k=b[B+(C<<6)+54>>1]|0;E=c[a+68>>2]|0;l=(z&65535)-(e[E+((j&65535)<<2)>>1]|0)|0;m=(q&65535)-(e[E+((k&65535)<<2)>>1]|0)|0;b[E+((j&65535)<<2)>>1]=z;b[E+((k&65535)<<2)>>1]=q;if((l|0)<0)zg(a,0,j);if((m|0)>0)tg(a,0,k);if((l|0)>0)ug(a,0,j,i);if((m|0)<0)rg(a,0,k,i);j=b[B+(C<<6)+50>>1]|0;k=b[B+(C<<6)+56>>1]|0;E=c[a+72>>2]|0;l=(A&65535)-(e[E+((j&65535)<<2)>>1]|0)|0;m=(x&65535)-(e[E+((k&65535)<<2)>>1]|0)|0;b[E+((j&65535)<<2)>>1]=A;b[E+((k&65535)<<2)>>1]=x;if((l|0)<0)zg(a,1,j);if((m|0)>0)tg(a,1,k);if((l|0)>0)ug(a,1,j,i);if((m|0)<0)rg(a,1,k,i);m=b[B+(C<<6)+52>>1]|0;j=b[B+(C<<6)+58>>1]|0;E=c[a+76>>2]|0;k=(D&65535)-(e[E+((m&65535)<<2)>>1]|0)|0;l=(y&65535)-(e[E+((j&65535)<<2)>>1]|0)|0;b[E+((m&65535)<<2)>>1]=D;b[E+((j&65535)<<2)>>1]=y;if((k|0)<0)zg(a,2,m);if((l|0)>0)tg(a,2,j);if((k|0)>0)ug(a,2,m,i);if((l|0)<0)rg(a,2,j,i);j=c[a+108>>2]|0;if(!j)return;Tb[c[(c[j>>2]|0)+16>>2]&31](j,c[d+60>>2]|0,f,h,i);return}function ce(b,d){b=b|0;d=d|0;var e=0,f=0,h=0,i=0,j=0,k=0,m=0,n=0,o=0;o=l;l=l+32|0;c[b>>2]=6508;a[b+40>>0]=1;c[b+36>>2]=0;c[b+28>>2]=0;c[b+32>>2]=0;c[b+4>>2]=0;c[b+8>>2]=0;c[b+12>>2]=-1;c[b+16>>2]=0;c[b+20>>2]=0;a[b+80>>0]=1;c[b+76>>2]=0;c[b+68>>2]=0;c[b+72>>2]=0;c[b+44>>2]=0;c[b+48>>2]=0;c[b+52>>2]=-1;c[b+56>>2]=0;c[b+60>>2]=0;a[b+172>>0]=1;c[b+168>>2]=0;c[b+160>>2]=0;c[b+164>>2]=0;a[b+153>>0]=0;a[b+154>>0]=1;a[b+152>>0]=((d|0)!=0^1)&1;g[b+100>>2]=0.0;c[b+104>>2]=0;c[b+124>>2]=0;c[b+108>>2]=1;c[b+112>>2]=0;c[b+116>>2]=10;c[b+120>>2]=1;c[b+128>>2]=0;c[b+132>>2]=0;g[b+136>>2]=0.0;if(d|0)n=0;else{c[6485]=(c[6485]|0)+1;d=ec(91)|0;if(!d)d=0;else{c[(d+4+15&-16)+-4>>2]=d;d=d+4+15&-16}zh(d);n=c[b+160>>2]|0}c[b+96>>2]=d;c[b+148>>2]=0;c[b+140>>2]=0;c[b+144>>2]=0;c[b+84>>2]=0;c[b+84+4>>2]=0;c[b+84+8>>2]=0;a[o+16>>0]=1;c[o+12>>2]=0;c[o+4>>2]=0;c[o+8>>2]=0;if((n|0)<=1){if((n|0)!=1){if((c[b+164>>2]|0)<1){c[6485]=(c[6485]|0)+1;d=ec(39)|0;if(!d)m=0;else{c[(d+4+15&-16)+-4>>2]=d;m=d+4+15&-16}e=c[b+160>>2]|0;if((e|0)>0){d=0;do{Zh(m+(d*20|0)|0,(c[b+168>>2]|0)+(d*20|0)|0);d=d+1|0}while((d|0)!=(e|0));e=c[b+160>>2]|0;if((e|0)>0){d=0;do{h=c[b+168>>2]|0;i=h+(d*20|0)+4|0;j=h+(d*20|0)+12|0;k=c[j>>2]|0;f=h+(d*20|0)+16|0;if(k|0){if(a[f>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}c[j>>2]=0}a[f>>0]=1;c[j>>2]=0;c[i>>2]=0;c[h+(d*20|0)+8>>2]=0;d=d+1|0}while((d|0)!=(e|0))}}d=c[b+168>>2]|0;if(d|0){if(a[b+172>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+168>>2]=0}a[b+172>>0]=1;c[b+168>>2]=m;c[b+164>>2]=1}d=n;while(1){Zh((c[b+168>>2]|0)+(d*20|0)|0,o);if(!d)break;else d=d+1|0}d=c[o+12>>2]|0;c[b+160>>2]=1;if(!d){l=o;return}if(a[o+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[o+12>>2]=0;l=o;return}}else{d=1;do{f=c[b+168>>2]|0;h=f+(d*20|0)+4|0;i=f+(d*20|0)+12|0;j=c[i>>2]|0;e=f+(d*20|0)+16|0;if(j|0){if(a[e>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}c[i>>2]=0}a[e>>0]=1;c[i>>2]=0;c[h>>2]=0;c[f+(d*20|0)+8>>2]=0;d=d+1|0}while((d|0)!=(n|0))}c[b+160>>2]=1;l=o;return}
function ic(b){b=b|0;var d=0,e=0.0,f=0.0,h=0,i=0,j=0.0,k=0.0,m=0.0,n=0.0,o=0,p=0,q=0,r=0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0,I=0,J=0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0.0,S=0.0,T=0.0,U=0.0,V=0.0,W=0.0,X=0;J=l;l=l+64|0;if(!(a[b+356>>0]|0)){b=a[b+312>>0]|0;b=b<<24>>24!=0;l=J;return b|0}c[b+336>>2]=0;c[b+336+4>>2]=0;c[b+336+8>>2]=0;c[b+336+12>>2]=0;a[b+336+16>>0]=0;p=a[b+332>>0]|0;a[b+332>>0]=p&-16;a[b+356>>0]=0;switch(c[b>>2]|0){case 0:{a[b+312>>0]=0;b=0;b=b<<24>>24!=0;l=J;return b|0}case 1:{c[b+244>>2]=c[b+84>>2];c[b+244+4>>2]=c[b+84+4>>2];c[b+244+8>>2]=c[b+84+8>>2];c[b+244+12>>2]=c[b+84+12>>2];c[b+260>>2]=c[b+164>>2];c[b+260+4>>2]=c[b+164+4>>2];c[b+260+8>>2]=c[b+164+8>>2];c[b+260+12>>2]=c[b+164+12>>2];F=+g[b+248>>2]-+g[b+264>>2];G=+g[b+252>>2]-+g[b+268>>2];g[b+276>>2]=+g[b+244>>2]-+g[b+260>>2];g[b+280>>2]=F;g[b+284>>2]=G;g[b+288>>2]=0.0;a[b+352>>0]=0;a[b+332>>0]=p&-16;g[b+336>>2]=1.0;g[b+340>>2]=0.0;g[b+344>>2]=0.0;g[b+348>>2]=0.0;a[b+312>>0]=1;b=1;b=b<<24>>24!=0;l=J;return b|0}case 2:{e=+g[b+4>>2];f=+g[b+8>>2];j=+g[b+12>>2];k=+g[b+20>>2]-e;m=+g[b+24>>2]-f;n=+g[b+28>>2]-j;if((0.0-e)*k+(0.0-f)*m+(0.0-j)*n>0.0)if((0.0-e)*k+(0.0-f)*m+(0.0-j)*n<k*k+m*m+n*n){f=((0.0-e)*k+(0.0-f)*m+(0.0-j)*n)/(k*k+m*m+n*n);h=3}else{f=1.0;h=2}else{f=0.0;h=1}a[b+332>>0]=p&-16|h;e=1.0-f;g[b+336>>2]=e;g[b+340>>2]=f;g[b+344>>2]=0.0;g[b+348>>2]=0.0;B=+g[b+84>>2];D=+g[b+88>>2];F=+g[b+92>>2];B=B+f*(+g[b+100>>2]-B);D=D+f*(+g[b+104>>2]-D);F=F+f*(+g[b+108>>2]-F);g[b+244>>2]=B;g[b+248>>2]=D;g[b+252>>2]=F;g[b+256>>2]=0.0;C=+g[b+164>>2];E=+g[b+168>>2];G=+g[b+172>>2];C=C+f*(+g[b+180>>2]-C);E=E+f*(+g[b+184>>2]-E);G=G+f*(+g[b+188>>2]-G);g[b+260>>2]=C;g[b+264>>2]=E;g[b+268>>2]=G;g[b+272>>2]=0.0;g[b+276>>2]=B-C;g[b+280>>2]=D-E;g[b+284>>2]=F-G;g[b+288>>2]=0.0;if(!(h&2)){c[b>>2]=1;d=0}else d=1;if(!(h&1)){r=b+4+(d<<4)|0;H=b+84+(d<<4)|0;I=b+164+(d<<4)|0;c[b>>2]=d;c[b+4>>2]=c[r>>2];c[b+4+4>>2]=c[r+4>>2];c[b+4+8>>2]=c[r+8>>2];c[b+4+12>>2]=c[r+12>>2];c[b+84>>2]=c[H>>2];c[b+84+4>>2]=c[H+4>>2];c[b+84+8>>2]=c[H+8>>2];c[b+84+12>>2]=c[H+12>>2];c[b+164>>2]=c[I>>2];c[b+164+4>>2]=c[I+4>>2];c[b+164+8>>2]=c[I+8>>2];c[b+164+12>>2]=c[I+12>>2]}I=f>=0.0&e>=0.0&1;a[b+312>>0]=I;b=I;b=b<<24>>24!=0;l=J;return b|0}case 3:{c[J+16>>2]=0;c[J+16+4>>2]=0;c[J+16+8>>2]=0;c[J+16+12>>2]=0;re(J+16|0,b+4|0,b+20|0,b+36|0,b+316|0);G=+g[b+336>>2];e=+g[b+340>>2];f=+g[b+344>>2];B=+g[b+84>>2]*G+ +g[b+100>>2]*e+ +g[b+116>>2]*f;D=G*+g[b+88>>2]+e*+g[b+104>>2]+f*+g[b+120>>2];F=G*+g[b+92>>2]+e*+g[b+108>>2]+f*+g[b+124>>2];g[b+244>>2]=B;g[b+248>>2]=D;g[b+252>>2]=F;g[b+256>>2]=0.0;C=G*+g[b+164>>2]+e*+g[b+180>>2]+f*+g[b+196>>2];E=G*+g[b+168>>2]+e*+g[b+184>>2]+f*+g[b+200>>2];G=G*+g[b+172>>2]+e*+g[b+188>>2]+f*+g[b+204>>2];g[b+260>>2]=C;g[b+264>>2]=E;g[b+268>>2]=G;g[b+272>>2]=0.0;g[b+276>>2]=B-C;g[b+280>>2]=D-E;g[b+284>>2]=F-G;g[b+288>>2]=0.0;p=c[b>>2]|0;do if((p|0)>3){d=a[b+332>>0]|0;if(!(d&8)){h=b+164+(p+-1<<4)|0;o=b+84+(p+-1<<4)|0;i=b+4+(p+-1<<4)|0;c[b>>2]=p+-1;c[b+52>>2]=c[i>>2];c[b+52+4>>2]=c[i+4>>2];c[b+52+8>>2]=c[i+8>>2];c[b+52+12>>2]=c[i+12>>2];c[b+132>>2]=c[o>>2];c[b+132+4>>2]=c[o+4>>2];c[b+132+8>>2]=c[o+8>>2];c[b+132+12>>2]=c[o+12>>2];c[b+212>>2]=c[h>>2];c[b+212+4>>2]=c[h+4>>2];c[b+212+8>>2]=c[h+8>>2];c[b+212+12>>2]=c[h+12>>2];h=b+332|0;o=d;i=p+-1|0;I=19}else{h=b+332|0;o=d;i=p;I=19}}else{if((p|0)==3){h=b+332|0;o=a[b+332>>0]|0;i=3;I=19;break}if((p|0)<=1){if((p|0)==1){d=1;I=26}}else{d=2;I=22}}while(0);if((I|0)==19){d=i+-1|0;if(!(o&4)){c[b>>2]=d;c[b+36>>2]=c[b+4+(d<<4)>>2];c[b+36+4>>2]=c[b+4+(d<<4)+4>>2];c[b+36+8>>2]=c[b+4+(d<<4)+8>>2];c[b+36+12>>2]=c[b+4+(d<<4)+12>>2];c[b+116>>2]=c[b+84+(d<<4)>>2];c[b+116+4>>2]=c[b+84+(d<<4)+4>>2];c[b+116+8>>2]=c[b+84+(d<<4)+8>>2];c[b+116+12>>2]=c[b+84+(d<<4)+12>>2];c[b+196>>2]=c[b+164+(d<<4)>>2];c[b+196+4>>2]=c[b+164+(d<<4)+4>>2];c[b+196+8>>2]=c[b+164+(d<<4)+8>>2];c[b+196+12>>2]=c[b+164+(d<<4)+12>>2];I=23}else{d=i;I=22}}if((I|0)==22){h=b+332|0;I=23}if((I|0)==23){i=d+-1|0;if(!(a[h>>0]&2)){c[b>>2]=i;c[b+20>>2]=c[b+4+(i<<4)>>2];c[b+20+4>>2]=c[b+4+(i<<4)+4>>2];c[b+20+8>>2]=c[b+4+(i<<4)+8>>2];c[b+20+12>>2]=c[b+4+(i<<4)+12>>2];c[b+100>>2]=c[b+84+(i<<4)>>2];c[b+100+4>>2]=c[b+84+(i<<4)+4>>2];c[b+100+8>>2]=c[b+84+(i<<4)+8>>2];c[b+100+12>>2]=c[b+84+(i<<4)+12>>2];c[b+180>>2]=c[b+164+(i<<4)>>2];c[b+180+4>>2]=c[b+164+(i<<4)+4>>2];c[b+180+8>>2]=c[b+164+(i<<4)+8>>2];c[b+180+12>>2]=c[b+164+(i<<4)+12>>2];o=h;I=27}else I=26}if((I|0)==26){o=b+332|0;i=d;I=27}if((I|0)==27?(q=i+-1|0,(a[o>>0]&1)==0):0){c[b>>2]=q;c[b+4>>2]=c[b+4+(q<<4)>>2];c[b+4+4>>2]=c[b+4+(q<<4)+4>>2];c[b+4+8>>2]=c[b+4+(q<<4)+8>>2];c[b+4+12>>2]=c[b+4+(q<<4)+12>>2];c[b+84>>2]=c[b+84+(q<<4)>>2];c[b+84+4>>2]=c[b+84+(q<<4)+4>>2];c[b+84+8>>2]=c[b+84+(q<<4)+8>>2];c[b+84+12>>2]=c[b+84+(q<<4)+12>>2];c[b+164>>2]=c[b+164+(q<<4)>>2];c[b+164+4>>2]=c[b+164+(q<<4)+4>>2];c[b+164+8>>2]=c[b+164+(q<<4)+8>>2];c[b+164+12>>2]=c[b+164+(q<<4)+12>>2]}if((e>=0.0?!(+g[b+336>>2]>=0.0):1)|!(f>=0.0))d=0;else d=+g[b+348>>2]>=0.0&1;a[b+312>>0]=d;b=d;b=b<<24>>24!=0;l=J;return b|0}case 4:{c[J>>2]=0;c[J+4>>2]=0;c[J+8>>2]=0;c[J+12>>2]=0;r=J+16+16|0;a[r>>0]=0;c[b+316>>2]=0;c[b+316+4>>2]=0;c[b+316+8>>2]=0;c[b+316+12>>2]=0;a[b+332>>0]=p|15;L=+g[b+20>>2];U=+g[b+4>>2];R=+g[b+24>>2];K=+g[b+8>>2];N=+g[b+28>>2];V=+g[b+12>>2];Q=+g[b+36>>2];S=+g[b+40>>2];O=+g[b+44>>2];M=+g[b+52>>2];T=+g[b+56>>2];P=+g[b+60>>2];W=((R-K)*(O-V)-(N-V)*(S-K))*(M-U)+((N-V)*(Q-U)-(L-U)*(O-V))*(T-K)+((L-U)*(S-K)-(R-K)*(Q-U))*(P-V);i=W*W<9.99999905104687e-09?-1:((0.0-U)*((R-K)*(O-V)-(N-V)*(S-K))+(0.0-K)*((N-V)*(Q-U)-(L-U)*(O-V))+((L-U)*(S-K)-(R-K)*(Q-U))*(0.0-V))*W<0.0&1;W=(N-V)*((Q-U)*(T-K)-(S-K)*(M-U))+((L-U)*((S-K)*(P-V)-(O-V)*(T-K))+(R-K)*((O-V)*(M-U)-(Q-U)*(P-V)));o=W*W<9.99999905104687e-09?-1:((0.0-V)*((Q-U)*(T-K)-(S-K)*(M-U))+((0.0-U)*((S-K)*(P-V)-(O-V)*(T-K))+(0.0-K)*((O-V)*(M-U)-(Q-U)*(P-V))))*W<0.0&1;W=(O-V)*((R-K)*(M-U)-(L-U)*(T-K))+((Q-U)*((N-V)*(T-K)-(R-K)*(P-V))+(S-K)*((L-U)*(P-V)-(N-V)*(M-U)));p=W*W<9.99999905104687e-09?-1:((0.0-V)*((R-K)*(M-U)-(L-U)*(T-K))+((0.0-U)*((N-V)*(T-K)-(R-K)*(P-V))+(0.0-K)*((L-U)*(P-V)-(N-V)*(M-U))))*W<0.0&1;K=(V-N)*((S-R)*(M-L)-(Q-L)*(T-R))+((U-L)*((O-N)*(T-R)-(S-R)*(P-N))+(K-R)*((Q-L)*(P-N)-(O-N)*(M-L)));q=K*K<9.99999905104687e-09?-1:((0.0-N)*((S-R)*(M-L)-(Q-L)*(T-R))+((0.0-L)*((O-N)*(T-R)-(S-R)*(P-N))+(0.0-R)*((Q-L)*(P-N)-(O-N)*(M-L))))*K<0.0&1;do if((o|i|p|q|0)<0){a[b+352>>0]=1;d=b+312|0;I=68}else{if(!(o|i|p|q)){if(a[b+352>>0]|0){d=b+312|0;I=68;break}a[b+312>>0]=1;c[b+276>>2]=0;c[b+276+4>>2]=0;c[b+276+8>>2]=0;c[b+276+12>>2]=0;d=1;break}if((i|0)!=0?(re(J,b+4|0,b+20|0,b+36|0,J+16|0),e=+g[J+16>>2],f=+g[J+16+4>>2],j=+g[J+16+8>>2],k=e-+g[J>>2],m=f-+g[J+4>>2],n=j-+g[J+8>>2],k*k+m*m+n*n<3402823466385288598117041.0e14):0){X=c[J+16+12>>2]|0;g[b+316>>2]=e;g[b+320>>2]=f;g[b+324>>2]=j;c[b+328>>2]=X;X=a[r>>0]|0;a[b+332>>0]=X&1|a[b+332>>0]&-16|X&2|X&4;X=c[J+16+24>>2]|0;i=c[J+16+28>>2]|0;c[b+336>>2]=c[J+16+20>>2];c[b+340>>2]=X;c[b+344>>2]=i;g[b+348>>2]=0.0;e=k*k+m*m+n*n}else e=3402823466385288598117041.0e14;if((o|0)!=0?(re(J,b+4|0,b+36|0,b+52|0,J+16|0),s=+g[J+16>>2],t=+g[J+16+4>>2],u=+g[J+16+8>>2],v=s-+g[J>>2],w=t-+g[J+4>>2],x=u-+g[J+8>>2],v*v+w*w+x*x<e):0){o=c[J+16+12>>2]|0;g[b+316>>2]=s;g[b+320>>2]=t;g[b+324>>2]=u;c[b+328>>2]=o;o=a[r>>0]|0;a[b+332>>0]=o&1|a[b+332>>0]&-16|o<<1&4|o<<1&8;o=c[J+16+24>>2]|0;X=c[J+16+28>>2]|0;c[b+336>>2]=c[J+16+20>>2];g[b+340>>2]=0.0;c[b+344>>2]=o;c[b+348>>2]=X;e=v*v+w*w+x*x}if((p|0)!=0?(re(J,b+4|0,b+52|0,b+20|0,J+16|0),y=+g[J+16>>2],z=+g[J+16+4>>2],A=+g[J+16+8>>2],B=y-+g[J>>2],C=z-+g[J+4>>2],D=A-+g[J+8>>2],B*B+C*C+D*D<e):0){p=c[J+16+12>>2]|0;g[b+316>>2]=y;g[b+320>>2]=z;g[b+324>>2]=A;c[b+328>>2]=p;p=a[r>>0]|0;a[b+332>>0]=p&1|a[b+332>>0]&-16|(p&255)>>>1&2|p<<2&8;p=c[J+16+28>>2]|0;X=c[J+16+24>>2]|0;c[b+336>>2]=c[J+16+20>>2];c[b+340>>2]=p;g[b+344>>2]=0.0;c[b+348>>2]=X;e=B*B+C*C+D*D}if(q|0?(re(J,b+20|0,b+52|0,b+36|0,J+16|0),E=+g[J+16>>2],F=+g[J+16+4>>2],G=+g[J+16+8>>2],U=E-+g[J>>2],V=F-+g[J+4>>2],W=G-+g[J+8>>2],U*U+V*V+W*W<e):0){q=c[J+16+12>>2]|0;g[b+316>>2]=E;g[b+320>>2]=F;g[b+324>>2]=G;c[b+328>>2]=q;q=a[r>>0]|0;a[b+332>>0]=q&4|a[b+332>>0]&-16|q<<1&2|q<<2&8;q=c[J+16+20>>2]|0;r=c[J+16+28>>2]|0;X=c[J+16+24>>2]|0;g[b+336>>2]=0.0;c[b+340>>2]=q;c[b+344>>2]=r;c[b+348>>2]=X}P=+g[b+336>>2];Q=+g[b+340>>2];W=+g[b+344>>2];e=+g[b+348>>2];R=+g[b+84>>2]*P+ +g[b+100>>2]*Q+ +g[b+116>>2]*W+ +g[b+132>>2]*e;T=P*+g[b+88>>2]+Q*+g[b+104>>2]+W*+g[b+120>>2]+e*+g[b+136>>2];V=P*+g[b+92>>2]+Q*+g[b+108>>2]+W*+g[b+124>>2]+e*+g[b+140>>2];g[b+244>>2]=R;g[b+248>>2]=T;g[b+252>>2]=V;g[b+256>>2]=0.0;S=P*+g[b+164>>2]+Q*+g[b+180>>2]+W*+g[b+196>>2]+e*+g[b+212>>2];U=P*+g[b+168>>2]+Q*+g[b+184>>2]+W*+g[b+200>>2]+e*+g[b+216>>2];W=P*+g[b+172>>2]+Q*+g[b+188>>2]+W*+g[b+204>>2]+e*+g[b+220>>2];g[b+260>>2]=S;g[b+264>>2]=U;g[b+268>>2]=W;g[b+272>>2]=0.0;g[b+276>>2]=R-S;g[b+280>>2]=T-U;g[b+284>>2]=V-W;g[b+288>>2]=0.0;i=c[b>>2]|0;do if((i|0)>3){d=a[b+332>>0]|0;if(!(d&8)){h=b+164+(i+-1<<4)|0;o=b+84+(i+-1<<4)|0;I=b+4+(i+-1<<4)|0;c[b>>2]=i+-1;c[b+52>>2]=c[I>>2];c[b+52+4>>2]=c[I+4>>2];c[b+52+8>>2]=c[I+8>>2];c[b+52+12>>2]=c[I+12>>2];c[b+132>>2]=c[o>>2];c[b+132+4>>2]=c[o+4>>2];c[b+132+8>>2]=c[o+8>>2];c[b+132+12>>2]=c[o+12>>2];c[b+212>>2]=c[h>>2];c[b+212+4>>2]=c[h+4>>2];c[b+212+8>>2]=c[h+8>>2];c[b+212+12>>2]=c[h+12>>2];h=b+332|0;o=d;i=i+-1|0;I=52}else{h=b+332|0;o=d;I=52}}else{if((i|0)==3){h=b+332|0;o=a[b+332>>0]|0;i=3;I=52;break}if((i|0)<=1){if((i|0)==1){d=1;I=59}}else{d=2;I=55}}while(0);if((I|0)==52){d=i+-1|0;if(!(o&4)){c[b>>2]=d;c[b+36>>2]=c[b+4+(d<<4)>>2];c[b+36+4>>2]=c[b+4+(d<<4)+4>>2];c[b+36+8>>2]=c[b+4+(d<<4)+8>>2];c[b+36+12>>2]=c[b+4+(d<<4)+12>>2];c[b+116>>2]=c[b+84+(d<<4)>>2];c[b+116+4>>2]=c[b+84+(d<<4)+4>>2];c[b+116+8>>2]=c[b+84+(d<<4)+8>>2];c[b+116+12>>2]=c[b+84+(d<<4)+12>>2];c[b+196>>2]=c[b+164+(d<<4)>>2];c[b+196+4>>2]=c[b+164+(d<<4)+4>>2];c[b+196+8>>2]=c[b+164+(d<<4)+8>>2];c[b+196+12>>2]=c[b+164+(d<<4)+12>>2];I=56}else{d=i;I=55}}if((I|0)==55){h=b+332|0;I=56}if((I|0)==56){i=d+-1|0;if(!(a[h>>0]&2)){c[b>>2]=i;c[b+20>>2]=c[b+4+(i<<4)>>2];c[b+20+4>>2]=c[b+4+(i<<4)+4>>2];c[b+20+8>>2]=c[b+4+(i<<4)+8>>2];c[b+20+12>>2]=c[b+4+(i<<4)+12>>2];c[b+100>>2]=c[b+84+(i<<4)>>2];c[b+100+4>>2]=c[b+84+(i<<4)+4>>2];c[b+100+8>>2]=c[b+84+(i<<4)+8>>2];c[b+100+12>>2]=c[b+84+(i<<4)+12>>2];c[b+180>>2]=c[b+164+(i<<4)>>2];c[b+180+4>>2]=c[b+164+(i<<4)+4>>2];c[b+180+8>>2]=c[b+164+(i<<4)+8>>2];c[b+180+12>>2]=c[b+164+(i<<4)+12>>2];d=i;I=60}else I=59}if((I|0)==59){h=b+332|0;I=60}if((I|0)==60?(H=d+-1|0,(a[h>>0]&1)==0):0){c[b>>2]=H;c[b+4>>2]=c[b+4+(H<<4)>>2];c[b+4+4>>2]=c[b+4+(H<<4)+4>>2];c[b+4+8>>2]=c[b+4+(H<<4)+8>>2];c[b+4+12>>2]=c[b+4+(H<<4)+12>>2];c[b+84>>2]=c[b+84+(H<<4)>>2];c[b+84+4>>2]=c[b+84+(H<<4)+4>>2];c[b+84+8>>2]=c[b+84+(H<<4)+8>>2];c[b+84+12>>2]=c[b+84+(H<<4)+12>>2];c[b+164>>2]=c[b+164+(H<<4)>>2];c[b+164+4>>2]=c[b+164+(H<<4)+4>>2];c[b+164+8>>2]=c[b+164+(H<<4)+8>>2];c[b+164+12>>2]=c[b+164+(H<<4)+12>>2]}if((+g[b+336>>2]>=0.0?+g[b+340>>2]>=0.0:0)?+g[b+344>>2]>=0.0:0)d=e>=0.0&1;else d=0;a[b+312>>0]=d}while(0);if((I|0)==68){a[d>>0]=0;d=0}X=d;X=X<<24>>24!=0;l=J;return X|0}default:{a[b+312>>0]=0;X=0;X=X<<24>>24!=0;l=J;return X|0}}return 0}function jc(b,d,e,f,h,i){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=+i;var j=0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0,u=0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0.0,D=0,E=0,F=0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0;F=l;l=l+960|0;E=c[f+4>>2]|0;D=c[f+12>>2]|0;j=c[E+4>>2]|0;if((j|0)<20){c[F+776>>2]=7004;c[F+776+168>>2]=0;g[F+776+172>>2]=i;c[F+776+164>>2]=c[h+4>>2];g[F+416+308>>2]=9.999999747378752e-05;a[F+416+332>>0]=0;c[F+352>>2]=10228;c[F+128>>2]=10160;c[F+128+4>>2]=F+416;c[F+128+8>>2]=F+352;c[F+128+12>>2]=b;c[F+128+16>>2]=E;c[F+128+20>>2]=0;if((vd(F+128|0,d,e,D,D,F+776|0)|0?(u=F+776+132|0,p=+g[u>>2],q=+g[F+776+136>>2],r=+g[F+776+140>>2],p*p+q*q+r*r>9.999999747378752e-05):0)?(s=+g[F+776+164>>2],s<+g[h+4>>2]):0){i=1.0/+B(+(p*p+q*q+r*r));g[u>>2]=p*i;g[F+776+136>>2]=q*i;g[F+776+140>>2]=r*i;c[F+64>>2]=c[f+8>>2];c[F+64+4>>2]=0;c[F+64+8>>2]=c[u>>2];c[F+64+8+4>>2]=c[u+4>>2];c[F+64+8+8>>2]=c[u+8>>2];c[F+64+8+12>>2]=c[u+12>>2];c[F+64+24>>2]=c[F+776+148>>2];c[F+64+24+4>>2]=c[F+776+148+4>>2];c[F+64+24+8>>2]=c[F+776+148+8>>2];c[F+64+24+12>>2]=c[F+776+148+12>>2];g[F+64+40>>2]=s;+lb[c[(c[h>>2]|0)+12>>2]&31](h,F+64|0,1)}l=F;return}if((j+-21|0)>>>0>=9){if((j|0)!=31){l=F;return}u=c[(c[b>>2]|0)+8>>2]|0;M=+g[D>>2];N=+g[D+16>>2];O=+g[D+32>>2];w=+g[D+4>>2];v=+g[D+20>>2];s=+g[D+36>>2];r=+g[D+8>>2];p=+g[D+24>>2];n=+g[D+40>>2];C=-+g[D+48>>2];z=-+g[D+52>>2];x=-+g[D+56>>2];k=+g[d>>2];A=+g[d+16>>2];y=+g[d+32>>2];G=+g[d+4>>2];H=+g[d+20>>2];I=+g[d+36>>2];J=+g[d+8>>2];K=+g[d+24>>2];L=+g[d+40>>2];q=+g[d+48>>2];o=+g[d+52>>2];m=+g[d+56>>2];g[F+64>>2]=M*k+N*A+O*y;g[F+64+4>>2]=M*G+N*H+O*I;g[F+64+8>>2]=M*J+N*K+O*L;g[F+64+12>>2]=0.0;g[F+64+16>>2]=w*k+v*A+s*y;g[F+64+20>>2]=w*G+v*H+s*I;g[F+64+24>>2]=w*J+v*K+s*L;g[F+64+28>>2]=0.0;g[F+64+32>>2]=r*k+p*A+n*y;g[F+64+36>>2]=r*G+p*H+n*I;g[F+64+40>>2]=r*J+p*K+n*L;g[F+64+44>>2]=0.0;g[F+64+48>>2]=M*C+N*z+O*x+(M*q+N*o+O*m);g[F+64+52>>2]=w*C+v*z+s*x+(w*q+v*o+s*m);g[F+64+56>>2]=r*C+p*z+n*x+(r*q+p*o+n*m);g[F+64+60>>2]=0.0;Pb[u&127](b,F+64|0,F+776|0,F+416|0);u=c[(c[b>>2]|0)+8>>2]|0;m=+g[D>>2];n=+g[D+16>>2];o=+g[D+32>>2];p=+g[D+4>>2];q=+g[D+20>>2];r=+g[D+36>>2];x=+g[D+8>>2];z=+g[D+24>>2];C=+g[D+40>>2];s=-+g[D+48>>2];v=-+g[D+52>>2];w=-+g[D+56>>2];O=+g[e>>2];N=+g[e+16>>2];M=+g[e+32>>2];L=+g[e+4>>2];K=+g[e+20>>2];J=+g[e+36>>2];I=+g[e+8>>2];H=+g[e+24>>2];G=+g[e+40>>2];y=+g[e+48>>2];A=+g[e+52>>2];k=+g[e+56>>2];g[F+64>>2]=m*O+n*N+o*M;g[F+64+4>>2]=m*L+n*K+o*J;g[F+64+8>>2]=m*I+n*H+o*G;g[F+64+12>>2]=0.0;g[F+64+16>>2]=p*O+q*N+r*M;g[F+64+20>>2]=p*L+q*K+r*J;g[F+64+24>>2]=p*I+q*H+r*G;g[F+64+28>>2]=0.0;g[F+64+32>>2]=x*O+z*N+C*M;g[F+64+36>>2]=x*L+z*K+C*J;g[F+64+40>>2]=x*I+z*H+C*G;g[F+64+44>>2]=0.0;g[F+64+48>>2]=m*s+n*v+o*w+(m*y+n*A+o*k);g[F+64+52>>2]=p*s+q*v+r*w+(p*y+q*A+r*k);g[F+64+56>>2]=x*s+z*v+C*w+(x*y+z*A+C*k);g[F+64+60>>2]=0.0;Pb[u&127](b,F+64|0,F+352|0,F+128|0);k=+g[F+352>>2];if(k<+g[F+776>>2])g[F+776>>2]=k;k=+g[F+352+4>>2];if(k<+g[F+776+4>>2])g[F+776+4>>2]=k;k=+g[F+352+8>>2];if(k<+g[F+776+8>>2])g[F+776+8>>2]=k;k=+g[F+352+12>>2];if(k<+g[F+776+12>>2])g[F+776+12>>2]=k;k=+g[F+128>>2];if(+g[F+416>>2]<k)g[F+416>>2]=k;k=+g[F+128+4>>2];if(+g[F+416+4>>2]<k)g[F+416+4>>2]=k;k=+g[F+128+8>>2];if(+g[F+416+8>>2]<k)g[F+416+8>>2]=k;k=+g[F+128+12>>2];if(+g[F+416+12>>2]<k)g[F+416+12>>2]=k;c[F+64>>2]=7232;c[F+64+4>>2]=f;c[F+64+8>>2]=b;c[F+64+12>>2]=d;c[F+64+16>>2]=e;g[F+64+20>>2]=i;c[F+64+24>>2]=E;c[F+64+28>>2]=D;c[F+64+32>>2]=h;j=c[E+68>>2]|0;if(!j){if((c[E+20>>2]|0)>0){j=0;do{f=c[E+28>>2]|0;h=c[f+(j*80|0)+64>>2]|0;e=f+(j*80|0)|0;c[F>>2]=c[e>>2];c[F+4>>2]=c[e+4>>2];c[F+8>>2]=c[e+8>>2];c[F+12>>2]=c[e+12>>2];e=f+(j*80|0)+16|0;c[F+16>>2]=c[e>>2];c[F+16+4>>2]=c[e+4>>2];c[F+16+8>>2]=c[e+8>>2];c[F+16+12>>2]=c[e+12>>2];e=f+(j*80|0)+32|0;c[F+32>>2]=c[e>>2];c[F+32+4>>2]=c[e+4>>2];c[F+32+8>>2]=c[e+8>>2];c[F+32+12>>2]=c[e+12>>2];f=f+(j*80|0)+48|0;c[F+48>>2]=c[f>>2];c[F+48+4>>2]=c[f+4>>2];c[F+48+8>>2]=c[f+8>>2];c[F+48+12>>2]=c[f+12>>2];qf(F+64|0,j,F,h);j=j+1|0}while((j|0)<(c[E+20>>2]|0))}}else{c[F>>2]=c[F+776>>2];c[F+4>>2]=c[F+776+4>>2];c[F+8>>2]=c[F+776+8>>2];c[F+12>>2]=c[F+776+12>>2];c[F+16>>2]=c[F+416>>2];c[F+16+4>>2]=c[F+416+4>>2];c[F+16+8>>2]=c[F+416+8>>2];c[F+16+12>>2]=c[F+416+12>>2];Ke(c[j>>2]|0,F,F+64|0)}l=F;return}switch(j|0){case 21:{o=+g[D>>2];p=+g[D+16>>2];q=+g[D+32>>2];r=+g[D+4>>2];s=+g[D+20>>2];v=+g[D+36>>2];w=+g[D+8>>2];x=+g[D+24>>2];y=+g[D+40>>2];z=-+g[D+48>>2];A=-+g[D+52>>2];C=-+g[D+56>>2];n=+g[d+48>>2];m=+g[d+52>>2];k=+g[d+56>>2];g[F+416>>2]=o*z+p*A+q*C+(o*n+p*m+q*k);g[F+416+4>>2]=r*z+s*A+v*C+(r*n+s*m+v*k);g[F+416+8>>2]=w*z+x*A+y*C+(w*n+x*m+y*k);g[F+416+12>>2]=0.0;k=+g[e+48>>2];m=+g[e+52>>2];n=+g[e+56>>2];G=+g[e>>2];H=+g[e+16>>2];I=+g[e+32>>2];J=+g[e+4>>2];K=+g[e+20>>2];L=+g[e+36>>2];M=+g[e+8>>2];N=+g[e+24>>2];O=+g[e+40>>2];g[F+352>>2]=o*G+p*H+q*I;g[F+352+4>>2]=o*J+p*K+q*L;g[F+352+8>>2]=o*M+p*N+q*O;g[F+352+12>>2]=0.0;g[F+352+16>>2]=r*G+s*H+v*I;g[F+352+20>>2]=r*J+s*K+v*L;g[F+352+24>>2]=r*M+s*N+v*O;g[F+352+28>>2]=0.0;g[F+352+32>>2]=w*G+x*H+y*I;g[F+352+36>>2]=w*J+x*K+y*L;g[F+352+40>>2]=w*M+x*N+y*O;j=F+352+44|0;c[j>>2]=0;c[j+4>>2]=0;c[j+8>>2]=0;c[j+12>>2]=0;c[j+16>>2]=0;j=c[f+8>>2]|0;O=+ib[c[(c[E>>2]|0)+48>>2]&15](E);c[F+128>>2]=10316;c[F+128+4>>2]=b;c[F+128+8>>2]=c[d>>2];c[F+128+8+4>>2]=c[d+4>>2];c[F+128+8+8>>2]=c[d+8>>2];c[F+128+8+12>>2]=c[d+12>>2];c[F+128+24>>2]=c[d+16>>2];c[F+128+24+4>>2]=c[d+16+4>>2];c[F+128+24+8>>2]=c[d+16+8>>2];c[F+128+24+12>>2]=c[d+16+12>>2];c[F+128+40>>2]=c[d+32>>2];c[F+128+40+4>>2]=c[d+32+4>>2];c[F+128+40+8>>2]=c[d+32+8>>2];c[F+128+40+12>>2]=c[d+32+12>>2];c[F+128+56>>2]=c[d+48>>2];c[F+128+56+4>>2]=c[d+48+4>>2];c[F+128+56+8>>2]=c[d+48+8>>2];c[F+128+56+12>>2]=c[d+48+12>>2];c[F+128+72>>2]=c[e>>2];c[F+128+72+4>>2]=c[e+4>>2];c[F+128+72+8>>2]=c[e+8>>2];c[F+128+72+12>>2]=c[e+12>>2];c[F+128+88>>2]=c[e+16>>2];c[F+128+88+4>>2]=c[e+16+4>>2];c[F+128+88+8>>2]=c[e+16+8>>2];c[F+128+88+12>>2]=c[e+16+12>>2];c[F+128+104>>2]=c[e+32>>2];c[F+128+104+4>>2]=c[e+32+4>>2];c[F+128+104+8>>2]=c[e+32+8>>2];c[F+128+104+12>>2]=c[e+32+12>>2];c[F+128+120>>2]=c[e+48>>2];c[F+128+120+4>>2]=c[e+48+4>>2];c[F+128+120+8>>2]=c[e+48+8>>2];c[F+128+120+12>>2]=c[e+48+12>>2];c[F+128+136>>2]=c[D>>2];c[F+128+136+4>>2]=c[D+4>>2];c[F+128+136+8>>2]=c[D+8>>2];c[F+128+136+12>>2]=c[D+12>>2];c[F+128+152>>2]=c[D+16>>2];c[F+128+152+4>>2]=c[D+16+4>>2];c[F+128+152+8>>2]=c[D+16+8>>2];c[F+128+152+12>>2]=c[D+16+12>>2];c[F+128+168>>2]=c[D+32>>2];c[F+128+168+4>>2]=c[D+32+4>>2];c[F+128+168+8>>2]=c[D+32+8>>2];c[F+128+168+12>>2]=c[D+32+12>>2];c[F+128+184>>2]=c[D+48>>2];c[F+128+184+4>>2]=c[D+48+4>>2];c[F+128+184+8>>2]=c[D+48+8>>2];c[F+128+184+12>>2]=c[D+48+12>>2];g[F+128+204>>2]=O;c[F+128>>2]=7184;c[F+128+212>>2]=h;c[F+128+216>>2]=j;c[F+128+220>>2]=E;c[F+128+200>>2]=c[h+4>>2];g[F+128+208>>2]=i;Pb[c[(c[b>>2]|0)+8>>2]&127](b,F+352|0,F+64|0,F);j=c[E+52>>2]|0;c[F+776>>2]=8104;c[F+776+4>>2]=j;c[F+776+8>>2]=F+128;j=c[E+56>>2]|0;if(!(a[j+60>>0]|0))de(j,F+776|0,F+416|0,o*z+p*A+q*C+(o*k+p*m+q*n),r*z+s*A+v*C+(r*k+s*m+v*n),w*z+x*A+y*C+(w*k+x*m+y*n),F+64|0,F);else Od(j,F+776|0,F+416|0,o*z+p*A+q*C+(o*k+p*m+q*n),r*z+s*A+v*C+(r*k+s*m+v*n),w*z+x*A+y*C+(w*k+x*m+y*n),F+64|0,F,c[j+56>>2]|0);l=F;return}case 28:{c[F+776>>2]=7004;c[F+776+168>>2]=0;g[F+776+172>>2]=i;c[F+776+164>>2]=c[h+4>>2];c[F+416>>2]=10160;c[F+416+4>>2]=0;c[F+416+8>>2]=0;c[F+416+12>>2]=b;c[F+416+16>>2]=0;c[F+416+20>>2]=E;if((vd(F+416|0,d,e,D,D,F+776|0)|0?(t=F+776+132|0,k=+g[t>>2],m=+g[F+776+136>>2],n=+g[F+776+140>>2],k*k+m*m+n*n>9.999999747378752e-05):0)?(o=+g[F+776+164>>2],o<+g[h+4>>2]):0){O=1.0/+B(+(k*k+m*m+n*n));g[t>>2]=k*O;g[F+776+136>>2]=m*O;g[F+776+140>>2]=n*O;c[F+352>>2]=c[f+8>>2];c[F+352+4>>2]=0;c[F+352+8>>2]=c[t>>2];c[F+352+8+4>>2]=c[t+4>>2];c[F+352+8+8>>2]=c[t+8>>2];c[F+352+8+12>>2]=c[t+12>>2];c[F+352+24>>2]=c[F+776+148>>2];c[F+352+24+4>>2]=c[F+776+148+4>>2];c[F+352+24+8>>2]=c[F+776+148+8>>2];c[F+352+24+12>>2]=c[F+776+148+12>>2];g[F+352+40>>2]=o;+lb[c[(c[h>>2]|0)+12>>2]&31](h,F+352|0,1)}l=F;return}default:{o=+g[D>>2];p=+g[D+16>>2];q=+g[D+32>>2];w=+g[D+4>>2];x=+g[D+20>>2];y=+g[D+36>>2];J=+g[D+8>>2];L=+g[D+24>>2];N=+g[D+40>>2];H=-+g[D+48>>2];G=-+g[D+52>>2];C=-+g[D+56>>2];z=+g[d+48>>2];A=+g[d+52>>2];k=+g[d+56>>2];n=o*H+p*G+q*C+(o*z+p*A+q*k);m=w*H+x*G+y*C+(w*z+x*A+y*k);k=J*H+L*G+N*C+(J*z+L*A+N*k);A=+g[e+48>>2];z=+g[e+52>>2];v=+g[e+56>>2];r=o*H+p*G+q*C+(o*A+p*z+q*v);s=w*H+x*G+y*C+(w*A+x*z+y*v);v=J*H+L*G+N*C+(J*A+L*z+N*v);z=+g[e>>2];A=+g[e+16>>2];C=+g[e+32>>2];G=+g[e+4>>2];H=+g[e+20>>2];I=+g[e+36>>2];K=+g[e+8>>2];M=+g[e+24>>2];O=+g[e+40>>2];g[F+776>>2]=o*z+p*A+q*C;g[F+776+4>>2]=o*G+p*H+q*I;g[F+776+8>>2]=o*K+p*M+q*O;g[F+776+12>>2]=0.0;g[F+776+16>>2]=w*z+x*A+y*C;g[F+776+20>>2]=w*G+x*H+y*I;g[F+776+24>>2]=w*K+x*M+y*O;g[F+776+28>>2]=0.0;g[F+776+32>>2]=J*z+L*A+N*C;g[F+776+36>>2]=J*G+L*H+N*I;g[F+776+40>>2]=J*K+L*M+N*O;u=F+776+44|0;c[u>>2]=0;c[u+4>>2]=0;c[u+8>>2]=0;c[u+12>>2]=0;c[u+16>>2]=0;f=c[f+8>>2]|0;O=+ib[c[(c[E>>2]|0)+48>>2]&15](E);c[F+416>>2]=10316;c[F+416+4>>2]=b;c[F+416+8>>2]=c[d>>2];c[F+416+8+4>>2]=c[d+4>>2];c[F+416+8+8>>2]=c[d+8>>2];c[F+416+8+12>>2]=c[d+12>>2];c[F+416+24>>2]=c[d+16>>2];c[F+416+24+4>>2]=c[d+16+4>>2];c[F+416+24+8>>2]=c[d+16+8>>2];c[F+416+24+12>>2]=c[d+16+12>>2];c[F+416+40>>2]=c[d+32>>2];c[F+416+40+4>>2]=c[d+32+4>>2];c[F+416+40+8>>2]=c[d+32+8>>2];c[F+416+40+12>>2]=c[d+32+12>>2];c[F+416+56>>2]=c[d+48>>2];c[F+416+56+4>>2]=c[d+48+4>>2];c[F+416+56+8>>2]=c[d+48+8>>2];c[F+416+56+12>>2]=c[d+48+12>>2];c[F+416+72>>2]=c[e>>2];c[F+416+72+4>>2]=c[e+4>>2];c[F+416+72+8>>2]=c[e+8>>2];c[F+416+72+12>>2]=c[e+12>>2];c[F+416+88>>2]=c[e+16>>2];c[F+416+88+4>>2]=c[e+16+4>>2];c[F+416+88+8>>2]=c[e+16+8>>2];c[F+416+88+12>>2]=c[e+16+12>>2];c[F+416+104>>2]=c[e+32>>2];c[F+416+104+4>>2]=c[e+32+4>>2];c[F+416+104+8>>2]=c[e+32+8>>2];c[F+416+104+12>>2]=c[e+32+12>>2];c[F+416+120>>2]=c[e+48>>2];c[F+416+120+4>>2]=c[e+48+4>>2];c[F+416+120+8>>2]=c[e+48+8>>2];c[F+416+120+12>>2]=c[e+48+12>>2];c[F+416+136>>2]=c[D>>2];c[F+416+136+4>>2]=c[D+4>>2];c[F+416+136+8>>2]=c[D+8>>2];c[F+416+136+12>>2]=c[D+12>>2];c[F+416+152>>2]=c[D+16>>2];c[F+416+152+4>>2]=c[D+16+4>>2];c[F+416+152+8>>2]=c[D+16+8>>2];c[F+416+152+12>>2]=c[D+16+12>>2];c[F+416+168>>2]=c[D+32>>2];c[F+416+168+4>>2]=c[D+32+4>>2];c[F+416+168+8>>2]=c[D+32+8>>2];c[F+416+168+12>>2]=c[D+32+12>>2];c[F+416+184>>2]=c[D+48>>2];c[F+416+184+4>>2]=c[D+48+4>>2];c[F+416+184+8>>2]=c[D+48+8>>2];c[F+416+184+12>>2]=c[D+48+12>>2];g[F+416+204>>2]=O;c[F+416>>2]=7208;c[F+416+212>>2]=h;c[F+416+216>>2]=f;c[F+416+220>>2]=E;c[F+416+200>>2]=c[h+4>>2];g[F+416+208>>2]=i;Pb[c[(c[b>>2]|0)+8>>2]&127](b,F+776|0,F+352|0,F+128|0);g[F+64>>2]=n;g[F+64+4>>2]=m;g[F+64+8>>2]=k;g[F+64+12>>2]=0.0;if(r<n){g[F+64>>2]=r;o=r}else o=n;if(s<m){g[F+64+4>>2]=s;p=s}else p=m;if(v<k){g[F+64+8>>2]=v;q=v}else q=k;g[F>>2]=n;g[F+4>>2]=m;g[F+8>>2]=k;g[F+12>>2]=0.0;if(n<r){g[F>>2]=r;n=r}if(m<s){g[F+4>>2]=s;m=s}if(k<v){g[F+8>>2]=v;k=v}g[F+64>>2]=+g[F+352>>2]+o;g[F+64+4>>2]=+g[F+352+4>>2]+p;g[F+64+8>>2]=+g[F+352+8>>2]+q;g[F>>2]=+g[F+128>>2]+n;g[F+4>>2]=+g[F+128+4>>2]+m;g[F+8>>2]=+g[F+128+8>>2]+k;Pb[c[(c[E>>2]|0)+64>>2]&127](E,F+416|0,F+64|0,F);l=F;return}}}function kc(b,e,f,h,i,j,k,m,n,o){b=b|0;e=e|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;m=m|0;n=n|0;o=o|0;var p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0,w=0.0,x=0.0,y=0.0,z=0,A=0,C=0.0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0.0,S=0.0,T=0.0,U=0.0,V=0.0,W=0.0,X=0.0,Y=0.0,Z=0;L=l;l=l+19056|0;W=+g[j+52>>2]-+g[i+52>>2];Q=+g[j+56>>2]-+g[i+56>>2];g[L>>2]=+g[j+48>>2]-+g[i+48>>2];g[L+4>>2]=W;g[L+8>>2]=Q;g[L+12>>2]=0.0;c[L+18912>>2]=f;c[L+18912+4>>2]=h;Q=+g[j>>2];W=+g[i>>2];P=+g[j+16>>2];V=+g[i+16>>2];O=+g[j+32>>2];U=+g[i+32>>2];T=+g[i+4>>2];S=+g[i+20>>2];R=+g[i+36>>2];t=+g[i+8>>2];w=+g[i+24>>2];y=+g[i+40>>2];N=+g[j+4>>2];M=+g[j+20>>2];p=+g[j+36>>2];u=+g[j+8>>2];x=+g[j+24>>2];C=+g[j+40>>2];g[L+18912+8>>2]=Q*W+P*V+O*U;g[L+18912+12>>2]=Q*T+P*S+O*R;g[L+18912+16>>2]=Q*t+P*w+O*y;g[L+18912+20>>2]=0.0;g[L+18912+24>>2]=W*N+V*M+U*p;g[L+18912+28>>2]=T*N+S*M+R*p;g[L+18912+32>>2]=t*N+w*M+y*p;g[L+18912+36>>2]=0.0;g[L+18912+40>>2]=W*u+V*x+U*C;g[L+18912+44>>2]=T*u+S*x+R*C;g[L+18912+48>>2]=t*u+w*x+y*C;g[L+18912+52>>2]=0.0;Y=+g[j+48>>2]-+g[i+48>>2];X=+g[j+52>>2]-+g[i+52>>2];q=+g[j+56>>2]-+g[i+56>>2];s=Y*+g[i>>2]+X*+g[i+16>>2]+q*+g[i+32>>2];r=Y*+g[i+4>>2]+X*+g[i+20>>2]+q*+g[i+36>>2];q=Y*+g[i+8>>2]+X*+g[i+24>>2]+q*y;g[L+18912+56>>2]=Q*W+P*V+O*U;g[L+18912+60>>2]=W*N+V*M+U*p;g[L+18912+64>>2]=W*u+V*x+U*C;g[L+18912+68>>2]=0.0;g[L+18912+72>>2]=Q*T+P*S+O*R;g[L+18912+76>>2]=T*N+S*M+R*p;g[L+18912+80>>2]=T*u+S*x+R*C;g[L+18912+84>>2]=0.0;g[L+18912+88>>2]=Q*t+P*w+O*y;g[L+18912+92>>2]=t*N+w*M+y*p;g[L+18912+96>>2]=t*u+w*x+y*C;g[L+18912+100>>2]=0.0;g[L+18912+104>>2]=s;g[L+18912+108>>2]=r;g[L+18912+112>>2]=q;g[L+18912+116>>2]=0.0;c[L+18912+120>>2]=71;c[L+18912+124>>2]=0;c[L+18528+364>>2]=0;c[L+18528+128>>2]=0;c[L+18528+128+4>>2]=0;c[L+18528+128+8>>2]=0;c[L+18528+128+12>>2]=0;c[L+18528+376>>2]=2;c[L+18528+368>>2]=0;g[L+18528+144>>2]=0.0;q=+g[L>>2];r=+g[L+4>>2];s=+g[L+8>>2];g[L+19040>>2]=-q;g[L+19040+4>>2]=-r;g[L+19040+8>>2]=-s;g[L+19040+12>>2]=0.0;a:do if((wc(L+18528|0,L+18912|0,L+19040|0)|0)==1){H=L+16+18496|0;I=L+16+18504|0;c[H>>2]=0;c[H+4>>2]=0;c[H+8>>2]=0;c[H+12>>2]=0;c[L+16>>2]=9;K=L+16+40|0;c[L+16+18492>>2]=0;c[K>>2]=0;c[K+4>>2]=0;c[K+8>>2]=0;c[K+12>>2]=0;c[K+16>>2]=0;b=0;do{e=256-b+-1|0;c[L+16+4156+(e*56|0)+44>>2]=0;o=c[I>>2]|0;c[L+16+4156+(e*56|0)+48>>2]=o;if(o|0)c[o+44>>2]=L+16+4156+(e*56|0);c[I>>2]=L+16+4156+(e*56|0);b=b+1|0}while((b|0)!=256);F=L+16+18508|0;c[F>>2]=256;E=c[L+18528+372>>2]|0;do if((c[E+32>>2]|0)>>>0>1?Ic(L+18528|0)|0:0){G=L+16+18496|0;b=c[G>>2]|0;if(b|0){z=c[L+16+18500>>2]|0;A=c[F>>2]|0;do{e=b+44|0;v=b+48|0;o=c[v>>2]|0;if(o|0)c[o+44>>2]=c[e>>2];e=c[e>>2]|0;if(e|0)c[e+48>>2]=c[v>>2];if((c[G>>2]|0)==(b|0))c[G>>2]=c[v>>2];z=z+-1|0;c[b+44>>2]=0;c[v>>2]=c[I>>2];e=c[I>>2]|0;if(e|0)c[e+44>>2]=b;c[I>>2]=b;A=A+1|0;b=c[G>>2]|0}while((b|0)!=0);c[L+16+18500>>2]=z;c[F>>2]=A}c[L+16>>2]=0;c[L+16+18492>>2]=0;b=c[E>>2]|0;e=c[E+12>>2]|0;Y=+g[e+16>>2];Q=+g[b+16>>2]-Y;S=+g[e+20>>2];T=+g[b+20>>2]-S;V=+g[e+24>>2];W=+g[b+24>>2]-V;e=c[E+4>>2]|0;U=+g[e+16>>2]-Y;X=+g[e+20>>2]-S;R=+g[e+24>>2]-V;o=c[E+8>>2]|0;Y=+g[o+16>>2]-Y;S=+g[o+20>>2]-S;V=+g[o+24>>2]-V;if(Q*X*V+(T*R*Y+W*U*S-Q*R*S-T*U*V)-W*X*Y<0.0){c[E>>2]=e;c[E+4>>2]=b;v=c[E+16>>2]|0;c[E+16>>2]=c[E+20>>2];c[E+20>>2]=v;v=e}else{v=b;b=e}v=he(L+16|0,v,b,o,1)|0;z=he(L+16|0,c[E+4>>2]|0,c[E>>2]|0,c[E+12>>2]|0,1)|0;A=he(L+16|0,c[E+8>>2]|0,c[E+4>>2]|0,c[E+12>>2]|0,1)|0;D=he(L+16|0,c[E>>2]|0,c[E+8>>2]|0,c[E+12>>2]|0,1)|0;if((c[L+16+18500>>2]|0)==4){e=c[H>>2]|0;p=+g[e+16>>2];b=c[e+48>>2]|0;if(!b)b=e;else{q=p*p;while(1){p=+g[b+16>>2];o=p*p<q;e=o?b:e;b=c[b+48>>2]|0;if(!b)break;else q=o?p*p:q}b=e;p=+g[e+16>>2]}t=+g[b>>2];s=+g[b+4>>2];r=+g[b+8>>2];q=+g[b+12>>2];o=c[b+20>>2]|0;Z=c[b+24>>2]|0;e=c[b+28>>2]|0;a[v+52>>0]=0;c[v+32>>2]=z;a[z+52>>0]=0;c[z+32>>2]=v;a[v+53>>0]=0;c[v+36>>2]=A;a[A+52>>0]=1;c[A+32>>2]=v;a[v+54>>0]=0;c[v+40>>2]=D;a[D+52>>0]=2;c[D+32>>2]=v;a[z+53>>0]=2;c[z+36>>2]=D;a[D+54>>0]=1;c[D+40>>2]=z;a[z+54>>0]=1;c[z+40>>2]=A;a[A+53>>0]=2;c[A+36>>2]=z;a[A+54>>0]=1;c[A+40>>2]=D;a[D+53>>0]=2;c[D+36>>2]=A;c[L+16>>2]=0;D=b;E=0;z=Z;A=e;while(1){e=c[L+16+18492>>2]|0;if(e>>>0>=128){J=45;break}c[L+19040>>2]=0;c[L+19040+4>>2]=0;c[L+19040+8>>2]=0;c[L+16+18492>>2]=e+1;E=E+1|0;a[D+55>>0]=E;v=D+4|0;Z=D+8|0;Fg(L+18528|0,+g[D>>2],+g[v>>2],+g[Z>>2],L+16+60+(e<<5)|0);if(!(+g[D>>2]*+g[L+16+60+(e<<5)+16>>2]+ +g[v>>2]*+g[L+16+60+(e<<5)+20>>2]+ +g[Z>>2]*+g[L+16+60+(e<<5)+24>>2]-+g[D+16>>2]>9.999999747378752e-05)){b=7;J=44;break}b=0;do{v=og(L+16|0,E,L+16+60+(e<<5)|0,c[D+32+(b<<2)>>2]|0,d[D+52+b>>0]|0,L+19040|0)|0;b=b+1|0}while(v&b>>>0<3);if(!(v&(c[L+19040+8>>2]|0)>>>0>2)){b=4;J=44;break}o=c[L+19040>>2]|0;b=c[L+19040+4>>2]|0;a[o+53>>0]=2;c[o+36>>2]=b;a[b+54>>0]=1;c[b+40>>2]=o;b=D+44|0;o=D+48|0;e=c[o>>2]|0;if(e|0)c[e+44>>2]=c[b>>2];b=c[b>>2]|0;if(b|0)c[b+48>>2]=c[o>>2];if((c[G>>2]|0)==(D|0))c[G>>2]=c[o>>2];c[L+16+18500>>2]=(c[L+16+18500>>2]|0)+-1;c[D+44>>2]=0;c[o>>2]=c[I>>2];b=c[I>>2]|0;if(b|0)c[b+44>>2]=D;c[I>>2]=D;c[F>>2]=(c[F>>2]|0)+1;e=c[H>>2]|0;p=+g[e+16>>2];b=c[e+48>>2]|0;if(b){q=p*p;o=e;while(1){p=+g[b+16>>2];e=p*p<q;o=e?b:o;b=c[b+48>>2]|0;if(!b)break;else q=e?p*p:q}e=o;p=+g[o+16>>2]}t=+g[e>>2];s=+g[e+4>>2];r=+g[e+8>>2];q=+g[e+12>>2];o=c[e+20>>2]|0;v=c[e+24>>2]|0;b=c[e+28>>2]|0;if(E>>>0>=255){e=v;break}else{D=e;z=v;A=b}}if((J|0)==44){c[L+16>>2]=b;e=z;b=A}else if((J|0)==45){c[L+16>>2]=6;e=z;b=A}U=t*p;S=s*p;Y=r*p;g[L+16+40>>2]=t;g[L+16+44>>2]=s;g[L+16+48>>2]=r;g[L+16+52>>2]=q;g[L+16+56>>2]=p;c[L+16+36>>2]=3;c[L+16+4>>2]=o;c[L+16+8>>2]=e;c[L+16+12>>2]=b;Z=e;V=+g[Z+16>>2]-U;Q=+g[Z+20>>2]-S;T=+g[Z+24>>2]-Y;I=b;P=+g[I+16>>2]-U;R=+g[I+20>>2]-S;W=+g[I+24>>2]-Y;W=+B(+((V*R-Q*P)*(V*R-Q*P)+((Q*W-T*R)*(Q*W-T*R)+(T*P-V*W)*(T*P-V*W))));g[L+16+20>>2]=W;V=+g[I+16>>2]-U;P=+g[I+20>>2]-S;T=+g[I+24>>2]-Y;I=o;R=+g[I+16>>2]-U;Q=+g[I+20>>2]-S;X=+g[I+24>>2]-Y;X=+B(+((V*Q-P*R)*(V*Q-P*R)+((P*X-T*Q)*(P*X-T*Q)+(T*R-V*X)*(T*R-V*X))));g[L+16+24>>2]=X;V=+g[I+16>>2]-U;R=+g[I+20>>2]-S;T=+g[I+24>>2]-Y;U=+g[Z+16>>2]-U;S=+g[Z+20>>2]-S;Y=+g[Z+24>>2]-Y;Y=+B(+((V*S-R*U)*(V*S-R*U)+((R*Y-T*S)*(R*Y-T*S)+(T*U-V*Y)*(T*U-V*Y))));g[L+16+20>>2]=W/(W+X+Y);g[L+16+24>>2]=X/(W+X+Y);g[L+16+28>>2]=Y/(W+X+Y);if((c[L+16>>2]|0)!=9)if(!(c[L+16+36>>2]|0)){r=0.0;q=0.0;p=0.0;break}else{v=L+16+36|0;J=54;break}else break a}else J=48}else J=48;while(0);if((J|0)==48){c[L+16>>2]=8;g[L+16+40>>2]=q;g[L+16+44>>2]=r;g[L+16+48>>2]=s;g[L+16+52>>2]=0.0;p=+B(+(q*q+r*r+s*s));if(p>0.0){g[L+16+40>>2]=1.0/p*q;g[L+16+44>>2]=1.0/p*r;g[L+16+48>>2]=1.0/p*s}else{c[K>>2]=1065353216;c[L+16+44>>2]=0;c[L+16+48>>2]=0}g[L+16+52>>2]=0.0;g[L+16+56>>2]=0.0;c[L+16+36>>2]=1;c[L+16+4>>2]=c[E>>2];g[L+16+20>>2]=1.0;v=L+16+36|0;J=54}if((J|0)==54){o=0;p=0.0;q=0.0;r=0.0;do{b=c[L+18912+120>>2]|0;Z=c[L+18912+124>>2]|0;e=(c[L+18912>>2]|0)+(Z>>1)|0;if(Z&1)b=c[(c[e>>2]|0)+b>>2]|0;Mb[b&127](L+19040|0,e,c[L+16+4+(o<<2)>>2]|0);Y=+g[L+16+20+(o<<2)>>2];p=p+ +g[L+19040>>2]*Y;q=q+Y*+g[L+19040+4>>2];r=r+Y*+g[L+19040+8>>2];o=o+1|0}while(o>>>0<(c[v>>2]|0)>>>0)}u=+g[i>>2];w=+g[i+4>>2];x=+g[i+8>>2];C=+g[i+16>>2];M=+g[i+20>>2];N=+g[i+24>>2];Q=+g[i+32>>2];S=+g[i+36>>2];U=+g[i+40>>2];y=+g[i+48>>2];O=+g[i+52>>2];V=+g[i+56>>2];W=+g[K>>2];T=+g[L+16+56>>2];X=+g[L+16+44>>2];Y=+g[L+16+48>>2];P=p-W*T;R=q-T*X;T=r-T*Y;g[m>>2]=p*u+q*w+r*x+y;g[m+4>>2]=p*C+q*M+r*N+O;g[m+8>>2]=p*Q+q*S+r*U+V;g[m+12>>2]=0.0;g[n>>2]=P*u+R*w+T*x+y;g[n+4>>2]=P*C+R*M+T*N+O;g[n+8>>2]=P*Q+R*S+T*U+V;g[n+12>>2]=0.0;g[k>>2]=-W;g[k+4>>2]=-X;g[k+8>>2]=-Y;g[k+12>>2]=0.0;Z=1;l=L;return Z|0}while(0);c[L+18528>>2]=f;c[L+18528+4>>2]=h;r=+g[j>>2];N=+g[i>>2];s=+g[j+16>>2];O=+g[i+16>>2];t=+g[j+32>>2];P=+g[i+32>>2];Q=+g[i+4>>2];R=+g[i+20>>2];S=+g[i+36>>2];U=+g[i+8>>2];W=+g[i+24>>2];Y=+g[i+40>>2];u=+g[j+4>>2];w=+g[j+20>>2];x=+g[j+36>>2];y=+g[j+8>>2];C=+g[j+24>>2];M=+g[j+40>>2];g[L+18528+8>>2]=r*N+s*O+t*P;g[L+18528+12>>2]=r*Q+s*R+t*S;g[L+18528+16>>2]=r*U+s*W+t*Y;g[L+18528+20>>2]=0.0;g[L+18528+24>>2]=N*u+O*w+P*x;g[L+18528+28>>2]=Q*u+R*w+S*x;g[L+18528+32>>2]=U*u+W*w+Y*x;g[L+18528+36>>2]=0.0;g[L+18528+40>>2]=N*y+O*C+P*M;g[L+18528+44>>2]=Q*y+R*C+S*M;g[L+18528+48>>2]=U*y+W*C+Y*M;g[L+18528+52>>2]=0.0;T=+g[j+48>>2]-+g[i+48>>2];V=+g[j+52>>2]-+g[i+52>>2];X=+g[j+56>>2]-+g[i+56>>2];g[L+18528+56>>2]=r*N+s*O+t*P;g[L+18528+60>>2]=N*u+O*w+P*x;g[L+18528+64>>2]=N*y+O*C+P*M;g[L+18528+68>>2]=0.0;g[L+18528+72>>2]=r*Q+s*R+t*S;g[L+18528+76>>2]=Q*u+R*w+S*x;g[L+18528+80>>2]=Q*y+R*C+S*M;g[L+18528+84>>2]=0.0;g[L+18528+88>>2]=r*U+s*W+t*Y;g[L+18528+92>>2]=U*u+W*w+Y*x;g[L+18528+96>>2]=U*y+W*C+Y*M;g[L+18528+100>>2]=0.0;g[L+18528+104>>2]=T*N+V*O+X*P;g[L+18528+108>>2]=T*Q+V*R+X*S;g[L+18528+112>>2]=T*U+V*W+X*Y;g[L+18528+116>>2]=0.0;c[L+18528+120>>2]=72;c[L+18528+124>>2]=0;c[L+16+364>>2]=0;c[L+16+128>>2]=0;c[L+16+128+4>>2]=0;c[L+16+128+8>>2]=0;c[L+16+128+12>>2]=0;c[L+16+376>>2]=2;c[L+16+368>>2]=0;g[L+16+144>>2]=0.0;if(wc(L+16|0,L+18528|0,L)|0){Z=0;l=L;return Z|0}b=c[L+16+372>>2]|0;if(!(c[b+32>>2]|0)){u=0.0;t=0.0;s=0.0;r=0.0;q=0.0;p=0.0}else{v=0;s=0.0;t=0.0;u=0.0;p=0.0;q=0.0;r=0.0;do{C=+g[b+16+(v<<2)>>2];e=c[L+18528+120>>2]|0;Z=c[L+18528+124>>2]|0;o=(c[L+18528>>2]|0)+(Z>>1)|0;if(Z&1)e=c[(c[o>>2]|0)+e>>2]|0;Mb[e&127](L+19040|0,o,c[b+(v<<2)>>2]|0);s=s+C*+g[L+19040>>2];t=t+C*+g[L+19040+4>>2];u=u+C*+g[L+19040+8>>2];b=c[(c[L+16+372>>2]|0)+(v<<2)>>2]|0;w=-+g[b>>2];x=-+g[b+4>>2];y=-+g[b+8>>2];b=c[L+18528+120>>2]|0;Z=c[L+18528+124>>2]|0;e=(c[L+18528+4>>2]|0)+(Z>>1)|0;if(Z&1)b=c[(c[e>>2]|0)+b>>2]|0;X=+g[L+18528+24>>2]*w+ +g[L+18528+28>>2]*x+ +g[L+18528+32>>2]*y;W=+g[L+18528+40>>2]*w+ +g[L+18528+44>>2]*x+ +g[L+18528+48>>2]*y;g[L+18912>>2]=+g[L+18528+8>>2]*w+ +g[L+18528+12>>2]*x+ +g[L+18528+16>>2]*y;g[L+18912+4>>2]=X;g[L+18912+8>>2]=W;g[L+18912+12>>2]=0.0;Mb[b&127](L+19040|0,e,L+18912|0);W=+g[L+19040>>2];X=+g[L+19040+4>>2];Y=+g[L+19040+8>>2];p=p+C*(W*+g[L+18528+56>>2]+X*+g[L+18528+60>>2]+Y*+g[L+18528+64>>2]+ +g[L+18528+104>>2]);q=q+C*(W*+g[L+18528+72>>2]+X*+g[L+18528+76>>2]+Y*+g[L+18528+80>>2]+ +g[L+18528+108>>2]);r=r+C*(W*+g[L+18528+88>>2]+X*+g[L+18528+92>>2]+Y*+g[L+18528+96>>2]+ +g[L+18528+112>>2]);v=v+1|0;b=c[L+16+372>>2]|0}while(v>>>0<(c[b+32>>2]|0)>>>0)}x=+g[i>>2];y=+g[i+4>>2];C=+g[i+8>>2];N=+g[i+16>>2];O=+g[i+20>>2];P=+g[i+24>>2];R=+g[i+32>>2];S=+g[i+36>>2];T=+g[i+40>>2];M=+g[i+48>>2];Q=+g[i+52>>2];U=+g[i+56>>2];V=s-p;W=t-q;X=u-r;Y=+B(+(V*V+W*W+X*X));Y=Y>9.999999747378752e-05?1.0/Y:1.0;g[m>>2]=s*x+t*y+u*C+M;g[m+4>>2]=s*N+t*O+u*P+Q;g[m+8>>2]=s*R+t*S+u*T+U;g[m+12>>2]=0.0;g[n>>2]=p*x+q*y+r*C+M;g[n+4>>2]=p*N+q*O+r*P+Q;g[n+8>>2]=p*R+q*S+r*T+U;g[n+12>>2]=0.0;g[k>>2]=V*Y;g[k+4>>2]=W*Y;g[k+8>>2]=X*Y;g[k+12>>2]=0.0;Z=0;l=L;return Z|0}function lc(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,C=0.0,F=0.0,H=0.0,I=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0,R=0.0,S=0.0,T=0.0,U=0.0,V=0.0,W=0.0,X=0.0,Y=0.0,Z=0.0,_=0.0,$=0.0,aa=0.0,ba=0.0,ca=0.0,da=0.0,ea=0.0,fa=0.0,ga=0.0,ha=0.0,ia=0.0,ja=0.0,ka=0.0,la=0.0,ma=0.0,na=0,oa=0.0,pa=0.0,qa=0.0,ra=0.0,sa=0.0;na=l;l=l+80|0;g[b+504>>2]=0.0;g[b+500>>2]=0.0;a[b+525>>0]=0;a[b+526>>0]=0;if(a[b+552>>0]|0?(a[b+527>>0]|0)==0:0){sa=+g[b+556>>2];qa=+g[b+560>>2];ma=+g[b+564>>2];pa=+g[b+568>>2];ba=sa*(2.0/(sa*sa+qa*qa+ma*ma+pa*pa));ra=qa*(2.0/(sa*sa+qa*qa+ma*ma+pa*pa));oa=ma*(2.0/(sa*sa+qa*qa+ma*ma+pa*pa));ca=+g[b+300>>2];U=+g[d>>2];da=+g[b+316>>2];V=+g[d+4>>2];ea=+g[b+332>>2];W=+g[d+8>>2];ga=+g[b+304>>2];ia=+g[b+320>>2];ka=+g[b+336>>2];_=+g[b+308>>2];$=+g[b+324>>2];aa=+g[b+340>>2];X=+g[d+16>>2];Y=+g[d+20>>2];Z=+g[d+24>>2];ha=+g[d+32>>2];ja=+g[d+36>>2];la=+g[d+40>>2];s=+g[b+348>>2];r=+g[b+352>>2];q=+g[b+356>>2];w=+g[b+364>>2];m=+g[e>>2];x=+g[b+380>>2];n=+g[e+4>>2];y=+g[b+396>>2];k=+g[e+8>>2];z=+g[b+368>>2];C=+g[b+384>>2];F=+g[b+400>>2];t=+g[b+372>>2];u=+g[b+388>>2];v=+g[b+404>>2];o=+g[e+16>>2];p=+g[e+20>>2];j=+g[e+24>>2];H=+g[e+32>>2];K=+g[e+36>>2];M=+g[e+40>>2];I=+g[b+412>>2];L=+g[b+416>>2];i=+g[b+420>>2];O=(1.0-(qa*ra+ma*oa))*(w*m+x*n+y*k)+(sa*ra+pa*oa)*(m*z+n*C+k*F)+(sa*oa-pa*ra)*(m*t+n*u+k*v);P=(sa*ra-pa*oa)*(w*m+x*n+y*k)+(1.0-(sa*ba+ma*oa))*(m*z+n*C+k*F)+(qa*oa+pa*ba)*(m*t+n*u+k*v);N=(sa*oa+pa*ra)*(w*m+x*n+y*k)+(qa*oa-pa*ba)*(m*z+n*C+k*F)+(1.0-(sa*ba+qa*ra))*(m*t+n*u+k*v);S=(sa*oa-pa*ra)*(t*o+u*p+v*j)+((1.0-(qa*ra+ma*oa))*(w*o+x*p+y*j)+(sa*ra+pa*oa)*(z*o+C*p+F*j));T=(qa*oa+pa*ba)*(t*o+u*p+v*j)+((sa*ra-pa*oa)*(w*o+x*p+y*j)+(1.0-(sa*ba+ma*oa))*(z*o+C*p+F*j));R=(1.0-(sa*ba+qa*ra))*(t*o+u*p+v*j)+((sa*oa+pa*ra)*(w*o+x*p+y*j)+(qa*oa-pa*ba)*(z*o+C*p+F*j));fa=(sa*oa-pa*ra)*(t*H+u*K+v*M)+((1.0-(qa*ra+ma*oa))*(w*H+x*K+y*M)+(sa*ra+pa*oa)*(z*H+C*K+F*M));ma=(qa*oa+pa*ba)*(t*H+u*K+v*M)+((sa*ra-pa*oa)*(w*H+x*K+y*M)+(1.0-(sa*ba+ma*oa))*(z*H+C*K+F*M));ba=(1.0-(sa*ba+qa*ra))*(t*H+u*K+v*M)+((sa*oa+pa*ra)*(w*H+x*K+y*M)+(qa*oa-pa*ba)*(z*H+C*K+F*M));pa=-(+g[d+48>>2]+(U*s+V*r+W*q));oa=-(X*s+Y*r+Z*q+ +g[d+52>>2]);q=-(ha*s+ja*r+la*q+ +g[d+56>>2]);r=(ca*U+da*V+ea*W)*pa+(ca*X+da*Y+ea*Z)*oa+(ca*ha+da*ja+ea*la)*q;s=(U*ga+V*ia+W*ka)*pa+(ga*X+ia*Y+ka*Z)*oa+(ga*ha+ia*ja+ka*la)*q;q=(U*_+V*$+W*aa)*pa+(_*X+$*Y+aa*Z)*oa+(_*ha+$*ja+aa*la)*q;k=q*N+(r*O+s*P)+((w*m+x*n+y*k)*0.0+(m*z+n*C+k*F)*0.0+(m*t+n*u+k*v)*0.0+(+g[e+48>>2]+(m*I+n*L+k*i)));j=q*R+(r*S+s*T)+((t*o+u*p+v*j)*0.0+((w*o+x*p+y*j)*0.0+(z*o+C*p+F*j)*0.0)+(o*I+p*L+j*i+ +g[e+52>>2]));i=q*ba+(r*fa+s*ma)+((t*H+u*K+v*M)*0.0+((w*H+x*K+y*M)*0.0+(z*H+C*K+F*M)*0.0)+(H*I+K*L+M*i+ +g[e+56>>2]));g[na+16>>2]=(U*_+V*$+W*aa)*N+((ca*U+da*V+ea*W)*O+(U*ga+V*ia+W*ka)*P);g[na+16+4>>2]=(_*X+$*Y+aa*Z)*N+((ca*X+da*Y+ea*Z)*O+(ga*X+ia*Y+ka*Z)*P);g[na+16+8>>2]=(_*ha+$*ja+aa*la)*N+((ca*ha+da*ja+ea*la)*O+(ga*ha+ia*ja+ka*la)*P);g[na+16+12>>2]=0.0;g[na+16+16>>2]=(U*_+V*$+W*aa)*R+((ca*U+da*V+ea*W)*S+(U*ga+V*ia+W*ka)*T);g[na+16+20>>2]=(_*X+$*Y+aa*Z)*R+((ca*X+da*Y+ea*Z)*S+(ga*X+ia*Y+ka*Z)*T);g[na+16+24>>2]=(_*ha+$*ja+aa*la)*R+((ca*ha+da*ja+ea*la)*S+(ga*ha+ia*ja+ka*la)*T);g[na+16+28>>2]=0.0;g[na+16+32>>2]=(U*_+V*$+W*aa)*ba+((ca*U+da*V+ea*W)*fa+(U*ga+V*ia+W*ka)*ma);g[na+16+36>>2]=(_*X+$*Y+aa*Z)*ba+((ca*X+da*Y+ea*Z)*fa+(ga*X+ia*Y+ka*Z)*ma);g[na+16+40>>2]=(_*ha+$*ja+aa*la)*ba+((ca*ha+da*ja+ea*la)*fa+(ga*ha+ia*ja+ka*la)*ma);g[na+16+44>>2]=0.0;g[na+16+48>>2]=k;g[na+16+52>>2]=j;g[na+16+56>>2]=i;g[na+16+60>>2]=0.0;yg(na+16|0,na);i=+g[na>>2];j=+g[na+4>>2];k=+g[na+8>>2];if(!(+A(+(i*i+j*j+k*k))<1.1920928955078125e-07)?(g[b+472>>2]=0.0,sa=1.0/+B(+(i*i+j*j+k*k)),g[b+460>>2]=sa*i,g[b+464>>2]=sa*j,g[b+468>>2]=sa*k,sa=+g[na+12>>2],sa=sa<-1.0?-1.0:sa,sa=+G(+(sa>1.0?1.0:sa))*2.0,g[b+504>>2]=sa,!(+A(+sa)<1.1920928955078125e-07)):0)a[b+526>>0]=1;l=na;return}yg(d,na+16|0);yg(b+300|0,na);W=+g[na+16+12>>2];X=+g[na>>2];Y=+g[na+16>>2];Z=+g[na+12>>2];_=+g[na+16+4>>2];$=+g[na+8>>2];aa=+g[na+16+8>>2];ba=+g[na+4>>2];yg(e,na+16|0);yg(b+364|0,na);ca=+g[na+16+12>>2];da=+g[na>>2];ea=+g[na+16>>2];fa=+g[na+12>>2];ga=+g[na+16+4>>2];ha=+g[na+8>>2];ia=+g[na+16+8>>2];ja=+g[na+4>>2];ka=-(ca*da+ea*fa+ga*ha-ia*ja);la=-(da*ia+(fa*ga+ca*ja)-ea*ha);ma=-(ca*ha+fa*ia+ea*ja-da*ga);s=(W*Z-X*Y-_*ba-$*aa)*ka+(W*X+Y*Z+_*$-aa*ba)*(ca*fa-da*ea-ga*ja-ha*ia)+(W*$+Z*aa+Y*ba-X*_)*la-(X*aa+(Z*_+W*ba)-Y*$)*ma;t=(W*X+Y*Z+_*$-aa*ba)*ma+((X*aa+(Z*_+W*ba)-Y*$)*(ca*fa-da*ea-ga*ja-ha*ia)+(W*Z-X*Y-_*ba-$*aa)*la)-(W*$+Z*aa+Y*ba-X*_)*ka;u=(X*aa+(Z*_+W*ba)-Y*$)*ka+((W*$+Z*aa+Y*ba-X*_)*(ca*fa-da*ea-ga*ja-ha*ia)+(W*Z-X*Y-_*ba-$*aa)*ma)-(W*X+Y*Z+_*$-aa*ba)*la;v=(W*Z-X*Y-_*ba-$*aa)*(ca*fa-da*ea-ga*ja-ha*ia)-(W*X+Y*Z+_*$-aa*ba)*ka-(X*aa+(Z*_+W*ba)-Y*$)*la-(W*$+Z*aa+Y*ba-X*_)*ma;k=+g[6126];i=+g[6128];m=+g[6127];n=(k*u+m*v-i*s)*-u+(v*(k*v+i*t-m*u)+(-(k*s)-m*t-i*u)*-s)-(i*v+m*s-k*t)*-t;o=(i*v+m*s-k*t)*-s+(v*(k*u+m*v-i*s)+(-(k*s)-m*t-i*u)*-t)-(k*v+i*t-m*u)*-u;j=(k*v+i*t-m*u)*-t+(v*(i*v+m*s-k*t)+(-(k*s)-m*t-i*u)*-u)-(k*u+m*v-i*s)*-s;p=1.0/+B(+(j*j+(n*n+o*o)));do if(i*j*p+(m*o*p+k*n*p)<-.9999998807907104)if(+A(+i)>.7071067690849304){j=1.0/+B(+(i*i+m*m));r=-(i*j);q=0.0;i=m*j;j=0.0;break}else{q=1.0/+B(+(k*k+m*m));r=k*q;q=-(m*q);i=0.0;j=0.0;break}else{sa=+B(+((i*j*p+(m*o*p+k*n*p)+1.0)*2.0));r=(i*n*p-k*j*p)*(1.0/sa);q=(m*j*p-i*o*p)*(1.0/sa);i=(k*o*p-m*n*p)*(1.0/sa);j=sa*.5}while(0);k=1.0/+B(+(q*q+r*r+i*i+j*j));m=q*k;q=r*k;p=i*k;k=j*k;U=1.0/+B(+((v*k-s*-m-t*-q-u*-p)*(v*k-s*-m-t*-q-u*-p)+((t*-m+(u*k+v*-p)-s*-q)*(t*-m+(u*k+v*-p)-s*-q)+((u*-q+(s*k+v*-m)-t*-p)*(u*-q+(s*k+v*-m)-t*-p)+(s*-p+(v*-q+t*k)-u*-m)*(s*-p+(v*-q+t*k)-u*-m)))));V=(u*-q+(s*k+v*-m)-t*-p)*U;j=(s*-p+(v*-q+t*k)-u*-m)*U;i=(t*-m+(u*k+v*-p)-s*-q)*U;U=(v*k-s*-m-t*-q-u*-p)*U;T=+g[b+444>>2];t=+g[b+456>>2];if(T>=t?(w=+g[b+448>>2],w>=t):0){r=k<-1.0?-1.0:k;r=+G(+(r>1.0?1.0:r))*2.0;if(r>1.1920928955078125e-07){o=1.0/+B(+(p*p+(m*m+q*q)));if(+A(+(q*o))>1.1920928955078125e-07){n=m*o;m=p*o;k=q*o;p=+B(+((p*o*p*o/(q*o*q*o)+1.0)/(p*o*p*o/(q*o*q*o)/(T*T)+1.0/(w*w))))}else{n=m*o;m=p*o;k=q*o;p=T}}else{n=0.0;m=0.0;k=0.0;p=0.0}o=+g[b+428>>2];q=p*o;if(r>q){a[b+526>>0]=1;if(r<p&o<.9999998807907104)o=(r-q)/(p-q);else o=1.0;g[b+528>>2]=o;g[b+504>>2]=r-q;if(+A(+k)>1.1920928955078125e-07){sa=+A(+(k*w/T*(-m/k)));m=m<-0.0?sa:-sa;sa=1.0/+B(+(n*n+k*k+m*m));n=n*sa;m=-(m*sa);k=k*sa}ra=-n;qa=-k;oa=-m;T=(ca*fa-da*ea-ga*ja-ha*ia)*ra+(da*ia+(fa*ga+ca*ja)-ea*ha)*oa-(ca*ha+fa*ia+ea*ja-da*ga)*qa;sa=(ca*ha+fa*ia+ea*ja-da*ga)*ra+(ca*fa-da*ea-ga*ja-ha*ia)*qa-(ca*da+ea*fa+ga*ha-ia*ja)*oa;pa=(ca*da+ea*fa+ga*ha-ia*ja)*qa+(ca*fa-da*ea-ga*ja-ha*ia)*oa-(da*ia+(fa*ga+ca*ja)-ea*ha)*ra;oa=-((ca*da+ea*fa+ga*ha-ia*ja)*ra)-(da*ia+(fa*ga+ca*ja)-ea*ha)*qa-(ca*ha+fa*ia+ea*ja-da*ga)*oa;qa=sa*ma+(oa*ka+(ca*fa-da*ea-ga*ja-ha*ia)*T)-pa*la;ra=pa*ka+((ca*fa-da*ea-ga*ja-ha*ia)*sa+oa*la)-T*ma;sa=T*la+(oa*ma+(ca*fa-da*ea-ga*ja-ha*ia)*pa)-sa*ka;g[b+460>>2]=qa;g[b+464>>2]=ra;g[b+468>>2]=sa;g[b+472>>2]=0.0;c[b+536>>2]=0;c[b+536+4>>2]=0;c[b+536+8>>2]=0;c[b+536+12>>2]=0;g[b+492>>2]=1.0/(qa*(+g[f>>2]*qa+ +g[f+16>>2]*ra+ +g[f+32>>2]*sa)+ra*(qa*+g[f+4>>2]+ra*+g[f+20>>2]+sa*+g[f+36>>2])+sa*(qa*+g[f+8>>2]+ra*+g[f+24>>2]+sa*+g[f+40>>2])+(qa*(qa*+g[h>>2]+ra*+g[h+16>>2]+sa*+g[h+32>>2])+ra*(qa*+g[h+4>>2]+ra*+g[h+20>>2]+sa*+g[h+36>>2])+sa*(qa*+g[h+8>>2]+ra*+g[h+24>>2]+sa*+g[h+40>>2])))}}else Q=23;a:do if((Q|0)==23){K=+g[b+300>>2];L=+g[b+316>>2];M=+g[b+332>>2];q=+g[d>>2];r=+g[d+4>>2];s=+g[d+8>>2];u=+g[d+16>>2];v=+g[d+20>>2];w=+g[d+24>>2];N=+g[d+32>>2];O=+g[d+36>>2];x=+g[d+40>>2];y=+g[b+304>>2];z=+g[b+320>>2];C=+g[b+336>>2];F=+g[b+308>>2];H=+g[b+324>>2];I=+g[b+340>>2];n=+g[b+364>>2];p=+g[b+380>>2];P=+g[b+396>>2];R=n*+g[e>>2]+p*+g[e+4>>2]+P*+g[e+8>>2];S=n*+g[e+16>>2]+p*+g[e+20>>2]+P*+g[e+24>>2];P=n*+g[e+32>>2]+p*+g[e+36>>2]+P*+g[e+40>>2];p=(K*q+L*r+M*s)*R+(K*u+L*v+M*w)*S+(K*N+L*O+M*x)*P;n=(q*y+r*z+s*C)*R+(u*y+v*z+w*C)*S+(N*y+O*z+x*C)*P;m=(q*F+r*H+s*I)*R+(u*F+v*H+w*I)*S+(N*F+O*H+x*I)*P;do if(T<t){o=+g[b+448>>2];if(o<t){if(+A(+n)<1.1920928955078125e-07&+A(+m)<1.1920928955078125e-07)break a;a[b+526>>0]=1;g[b+460>>2]=-((K*N+L*O+M*x)*S-(K*u+L*v+M*w)*P);g[b+464>>2]=-((K*q+L*r+M*s)*P-(K*N+L*O+M*x)*R);g[b+468>>2]=-((K*u+L*v+M*w)*R-(K*q+L*r+M*s)*S);g[b+472>>2]=0.0;break a}if(!(+A(+p)<1.1920928955078125e-07&+A(+m)<1.1920928955078125e-07)?(a[b+526>>0]=1,o>=t):0){k=+J(+m,+p);if(k>o){m=+E(+o);n=0.0;k=+D(+o);break}if(k<-o){m=-+E(+o);n=0.0;k=+D(+o)}else{n=0.0;k=p}}else k=p}else if(!(+A(+p)<1.1920928955078125e-07&+A(+n)<1.1920928955078125e-07)?(a[b+526>>0]=1,T>=t):0){k=+J(+n,+p);if(k>T){m=0.0;n=+E(+T);k=+D(+T);break}if(k<-T){m=0.0;n=-+E(+T);k=+D(+T)}else{m=0.0;k=p}}else k=p;while(0);p=(q*F+r*H+s*I)*m+((q*y+r*z+s*C)*n+(K*q+L*r+M*s)*k);o=(u*F+v*H+w*I)*m+((u*y+v*z+w*C)*n+(K*u+L*v+M*w)*k);k=(N*F+O*H+x*I)*m+((N*y+O*z+x*C)*n+(K*N+L*O+M*x)*k);m=1.0/+B(+(k*k+(p*p+o*o)));g[b+460>>2]=-(S*k*m-P*o*m);g[b+464>>2]=-(P*p*m-R*k*m);g[b+468>>2]=-(R*o*m-S*p*m);g[b+472>>2]=0.0;n=+B(+((S*k*m-P*o*m)*(S*k*m-P*o*m)+(P*p*m-R*k*m)*(P*p*m-R*k*m)+(R*o*m-S*p*m)*(R*o*m-S*p*m)));g[b+504>>2]=n;if(!(+A(+n)<1.1920928955078125e-07)){g[b+460>>2]=1.0/n*-(S*k*m-P*o*m);g[b+464>>2]=1.0/n*-(P*p*m-R*k*m);g[b+468>>2]=1.0/n*-(R*o*m-S*p*m)}}while(0);p=+g[b+452>>2];if(!(p>=0.0)){g[b+512>>2]=0.0;l=na;return}m=U<-1.0?-1.0:U;m=+G(+(m>1.0?1.0:m))*2.0;if(m>3.1415927410125732){o=-U<-1.0?-1.0:-U;k=-V;j=-j;i=-i;o=+G(+(o>1.0?1.0:o))*2.0}else{k=V;o=m}g[b+512>>2]=o;if(o>1.1920928955078125e-07){sa=1.0/+B(+(k*k+j*j+i*i));k=k*sa;n=i*sa;j=j*sa}else n=i;i=+g[b+428>>2];if(o>p*i){a[b+525>>0]=1;m=o-p*i;if(o<p&i<.9999998807907104)i=m/(p-p*i);else i=1.0;g[b+532>>2]=i;g[b+508>>2]=m;ra=-k;qa=-j;oa=-n;V=(ca*fa-da*ea-ga*ja-ha*ia)*ra+(da*ia+(fa*ga+ca*ja)-ea*ha)*oa-(ca*ha+fa*ia+ea*ja-da*ga)*qa;sa=(ca*ha+fa*ia+ea*ja-da*ga)*ra+(ca*fa-da*ea-ga*ja-ha*ia)*qa-(ca*da+ea*fa+ga*ha-ia*ja)*oa;pa=(ca*da+ea*fa+ga*ha-ia*ja)*qa+(ca*fa-da*ea-ga*ja-ha*ia)*oa-(da*ia+(fa*ga+ca*ja)-ea*ha)*ra;oa=-((ca*da+ea*fa+ga*ha-ia*ja)*ra)-(da*ia+(fa*ga+ca*ja)-ea*ha)*qa-(ca*ha+fa*ia+ea*ja-da*ga)*oa;qa=sa*ma+(oa*ka+(ca*fa-da*ea-ga*ja-ha*ia)*V)-pa*la;ra=pa*ka+((ca*fa-da*ea-ga*ja-ha*ia)*sa+oa*la)-V*ma;sa=V*la+(oa*ma+(ca*fa-da*ea-ga*ja-ha*ia)*pa)-sa*ka;g[b+476>>2]=qa;g[b+480>>2]=ra;g[b+484>>2]=sa;g[b+488>>2]=0.0;g[b+496>>2]=1.0/(qa*(+g[f>>2]*qa+ +g[f+16>>2]*ra+ +g[f+32>>2]*sa)+ra*(qa*+g[f+4>>2]+ra*+g[f+20>>2]+sa*+g[f+36>>2])+sa*(qa*+g[f+8>>2]+ra*+g[f+24>>2]+sa*+g[f+40>>2])+(qa*(qa*+g[h>>2]+ra*+g[h+16>>2]+sa*+g[h+32>>2])+ra*(qa*+g[h+4>>2]+ra*+g[h+20>>2]+sa*+g[h+36>>2])+sa*(qa*+g[h+8>>2]+ra*+g[h+24>>2]+sa*+g[h+40>>2])))}if(!(a[b+526>>0]|0)){l=na;return}ma=-k;sa=-j;oa=-n;la=(W*Z-X*Y-_*ba-$*aa)*ma+(X*aa+(Z*_+W*ba)-Y*$)*oa-(W*$+Z*aa+Y*ba-X*_)*sa;ra=(W*$+Z*aa+Y*ba-X*_)*ma+(W*Z-X*Y-_*ba-$*aa)*sa-(W*X+Y*Z+_*$-aa*ba)*oa;qa=(W*X+Y*Z+_*$-aa*ba)*sa+(W*Z-X*Y-_*ba-$*aa)*oa-(X*aa+(Z*_+W*ba)-Y*$)*ma;oa=-((W*X+Y*Z+_*$-aa*ba)*ma)-(X*aa+(Z*_+W*ba)-Y*$)*sa-(W*$+Z*aa+Y*ba-X*_)*oa;sa=-(W*X+Y*Z+_*$-aa*ba);ma=-(X*aa+(Z*_+W*ba)-Y*$);pa=-(W*$+Z*aa+Y*ba-X*_);g[b+536>>2]=ra*pa+(oa*sa+(W*Z-X*Y-_*ba-$*aa)*la)-qa*ma;g[b+540>>2]=qa*sa+((W*Z-X*Y-_*ba-$*aa)*ra+oa*ma)-la*pa;g[b+544>>2]=la*ma+(oa*pa+(W*Z-X*Y-_*ba-$*aa)*qa)-ra*sa;g[b+548>>2]=0.0;l=na;return}function mc(b,d){b=b|0;d=d|0;var e=0.0,f=0.0,h=0,i=0.0,j=0.0,k=0.0,l=0,m=0,n=0.0,o=0,p=0.0,q=0,r=0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0,S=0,T=0.0,U=0.0,V=0.0,W=0.0,X=0.0,Y=0.0,Z=0.0,_=0.0,$=0.0,aa=0.0,ba=0.0,ca=0.0,da=0.0,ea=0.0,fa=0.0,ga=0.0,ha=0.0,ia=0.0,ja=0.0,ka=0.0,la=0.0,ma=0,na=0,oa=0;na=c[b+28>>2]|0;oa=c[b+32>>2]|0;ma=c[d+24>>2]|0;if(!(a[b+739>>0]|0)){k=+g[b+552>>2];T=+g[na+4>>2];n=+g[b+568>>2];U=+g[na+8>>2];p=+g[b+584>>2];V=+g[na+12>>2];s=+g[b+556>>2];t=+g[b+572>>2];u=+g[b+588>>2];W=+g[b+560>>2];X=+g[b+576>>2];Y=+g[b+592>>2];Z=+g[na+20>>2];_=+g[na+24>>2];$=+g[na+28>>2];aa=+g[na+36>>2];ba=+g[na+40>>2];ca=+g[na+44>>2];v=+g[b+600>>2];w=+g[b+604>>2];x=+g[b+608>>2];y=+g[na+52>>2];z=+g[na+56>>2];A=+g[na+60>>2];C=+g[oa+4>>2];D=+g[oa+8>>2];E=+g[oa+12>>2];F=+g[b+624>>2];G=+g[b+640>>2];H=+g[b+656>>2];I=+g[oa+20>>2];J=+g[oa+24>>2];K=+g[oa+28>>2];L=+g[oa+36>>2];M=+g[oa+40>>2];N=+g[oa+44>>2];ka=+g[b+664>>2];la=+g[b+668>>2];Q=+g[b+672>>2];O=+g[oa+52>>2]+(C*ka+D*la+E*Q);P=I*ka+J*la+K*Q+ +g[oa+56>>2];Q=L*ka+M*la+N*Q+ +g[oa+60>>2];l=(a[b+736>>0]|0)==0;if(l){h=c[d+8>>2]|0;g[h>>2]=1.0;g[h+(ma+1<<2)>>2]=1.0;g[h+((ma<<1)+2<<2)>>2]=1.0;h=c[d+16>>2]|0;g[h>>2]=-1.0;g[h+(ma+1<<2)>>2]=-1.0;g[h+((ma<<1)+2<<2)>>2]=-1.0;h=ma<<1;e=+g[na+52>>2];f=+g[na+56>>2];i=+g[na+60>>2]}else{h=ma<<1;e=y;f=z;i=A}j=y+(T*v+U*w+V*x)-e;e=Z*v+_*w+$*x+z-f;la=aa*v+ba*w+ca*x+A-i;m=c[d+12>>2]|0;r=m+(h<<2)|0;c[m>>2]=0;g[m+4>>2]=la;g[m+8>>2]=-e;g[m+12>>2]=0.0;g[m+(ma<<2)>>2]=-la;c[m+(ma<<2)+4>>2]=0;g[m+(ma<<2)+8>>2]=j;g[m+(ma<<2)+12>>2]=0.0;g[r>>2]=e;g[r+4>>2]=-j;c[r+8>>2]=0;g[r+12>>2]=0.0;j=O-+g[oa+52>>2];e=P-+g[oa+56>>2];la=Q-+g[oa+60>>2];r=c[d+20>>2]|0;S=r+(h<<2)|0;c[r>>2]=0;g[r+4>>2]=-la;g[r+8>>2]=e;g[r+12>>2]=0.0;g[r+(ma<<2)>>2]=la;c[r+(ma<<2)+4>>2]=0;g[r+(ma<<2)+8>>2]=-j;g[r+(ma<<2)+12>>2]=0.0;g[S>>2]=-e;g[S+4>>2]=j;c[S+8>>2]=0;g[S+12>>2]=0.0;S=c[b+748>>2]|0;j=+g[((S&8|0)==0?d+4|0:b+756|0)>>2];e=j*+g[d>>2];R=c[d+28>>2]|0;if(l){g[R>>2]=e*(O-(y+(T*v+U*w+V*x)));g[R+(ma<<2)>>2]=e*(P-(Z*v+_*w+$*x+z));g[R+(ma<<1<<2)>>2]=e*(Q-(aa*v+ba*w+ca*x+A))}g[m+(ma*3<<2)>>2]=k*T+n*U+p*V;g[m+((ma*3|0)+1<<2)>>2]=k*Z+n*_+p*$;g[m+((ma*3|0)+2<<2)>>2]=k*aa+n*ba+p*ca;g[m+(ma<<2<<2)>>2]=T*s+U*t+V*u;g[m+((ma<<2|1)<<2)>>2]=s*Z+t*_+u*$;g[m+((ma<<2|2)<<2)>>2]=s*aa+t*ba+u*ca;g[r+(ma*3<<2)>>2]=-(k*T+n*U+p*V);g[r+((ma*3|0)+1<<2)>>2]=-(k*Z+n*_+p*$);g[r+((ma*3|0)+2<<2)>>2]=-(k*aa+n*ba+p*ca);g[r+(ma<<2<<2)>>2]=-(T*s+U*t+V*u);g[r+((ma<<2|1)<<2)>>2]=-(s*Z+t*_+u*$);g[r+((ma<<2|2)<<2)>>2]=-(s*aa+t*ba+u*ca);ka=(W*Z+X*_+Y*$)*(F*L+G*M+H*N)-(W*aa+X*ba+Y*ca)*(F*I+G*J+H*K);la=(W*aa+X*ba+Y*ca)*(C*F+D*G+E*H)-(T*W+U*X+V*Y)*(F*L+G*M+H*N);ja=(T*W+U*X+V*Y)*(F*I+G*J+H*K)-(W*Z+X*_+Y*$)*(C*F+D*G+E*H);g[R+(ma*3<<2)>>2]=((k*aa+n*ba+p*ca)*ja+((k*T+n*U+p*V)*ka+(k*Z+n*_+p*$)*la))*e;g[R+(ma<<2<<2)>>2]=((s*aa+t*ba+u*ca)*ja+((T*s+U*t+V*u)*ka+(s*Z+t*_+u*$)*la))*e;if(!(a[b+716>>0]|0))if(!(a[b+737>>0]|0))return;else{p=0.0;q=0;o=0;h=1}else{la=+g[b+708>>2]*+g[b+732>>2];p=la;q=la>0.0?1:2;o=1;h=(a[b+737>>0]|0)!=0}g[m+(ma*5<<2)>>2]=T*W+U*X+V*Y;g[m+((ma*5|0)+1<<2)>>2]=W*Z+X*_+Y*$;g[m+((ma*5|0)+2<<2)>>2]=W*aa+X*ba+Y*ca;g[r+(ma*5<<2)>>2]=-(T*W+U*X+V*Y);g[r+((ma*5|0)+1<<2)>>2]=-(W*Z+X*_+Y*$);g[r+((ma*5|0)+2<<2)>>2]=-(W*aa+X*ba+Y*ca);e=+g[b+688>>2];f=+g[b+692>>2];if(!((e-f)%6.2831854820251465<-3.1415927410125732))if((e-f)%6.2831854820251465>3.1415927410125732)n=(e-f)%6.2831854820251465+-6.2831854820251465;else n=(e-f)%6.2831854820251465;else n=(e-f)%6.2831854820251465+6.2831854820251465;if(!((e+f)%6.2831854820251465<-3.1415927410125732))if((e+f)%6.2831854820251465>3.1415927410125732)k=(e+f)%6.2831854820251465+-6.2831854820251465;else k=(e+f)%6.2831854820251465;else k=(e+f)%6.2831854820251465+6.2831854820251465;l=n==k;m=R+(ma*5<<2)|0;g[m>>2]=0.0;if(S&2)j=+g[b+764>>2];if(h&(o&l^1)){if(S&4|0)c[(c[d+32>>2]|0)+(ma*5<<2)>>2]=c[b+752>>2];f=+g[b+728>>2];i=+g[b+680>>2];e=n>k?1.0:0.0;do if(!(n>=k)){e=i/(j*+g[d>>2]);if(e<0.0)if(f>=n&n-e>f){e=(n-f)/e;break}else{e=f<n?0.0:1.0;break}if(e>0.0)if(f<=k&k-e<f){e=(k-f)/e;break}else{e=f>k?0.0:1.0;break}else e=0.0}while(0);g[m>>2]=e*i*+g[b+732>>2]+ +g[m>>2];g[(c[d+36>>2]|0)+(ma*5<<2)>>2]=-+g[b+684>>2];c[(c[d+40>>2]|0)+(ma*5<<2)>>2]=c[b+684>>2]}if(!o)return;g[m>>2]=+g[m>>2]+p*j*+g[d>>2];if(S&1|0)c[(c[d+32>>2]|0)+(ma*5<<2)>>2]=c[b+760>>2];do if(!l){h=(c[d+36>>2]|0)+(ma*5<<2)|0;if((q|0)==1){g[h>>2]=0.0;e=3402823466385288598117041.0e14;break}else{g[h>>2]=-3402823466385288598117041.0e14;e=0.0;break}}else{g[(c[d+36>>2]|0)+(ma*5<<2)>>2]=-3402823466385288598117041.0e14;e=3402823466385288598117041.0e14}while(0);g[(c[d+40>>2]|0)+(ma*5<<2)>>2]=e;f=+g[b+704>>2];do if(f>0.0){e=(T*W+U*X+V*Y)*+g[na+388>>2]+(W*Z+X*_+Y*$)*+g[na+392>>2]+(W*aa+X*ba+Y*ca)*+g[na+396>>2]-((T*W+U*X+V*Y)*+g[oa+388>>2]+(W*Z+X*_+Y*$)*+g[oa+392>>2]+(W*aa+X*ba+Y*ca)*+g[oa+396>>2]);if((q|0)==1){if(!(e<0.0))break;if(!(+g[m>>2]<-(f*e)))break;g[m>>2]=-(f*e);break}else{if(!(e>0.0))break;if(!(+g[m>>2]>-(f*e)))break;g[m>>2]=-(f*e);break}}while(0);g[m>>2]=+g[b+700>>2]*+g[m>>2];return}T=+g[na+4>>2];U=+g[na+8>>2];V=+g[na+12>>2];p=+g[b+556>>2];t=+g[b+572>>2];u=+g[b+588>>2];W=+g[b+560>>2];X=+g[b+576>>2];Y=+g[b+592>>2];Z=+g[na+20>>2];_=+g[na+24>>2];$=+g[na+28>>2];aa=+g[na+36>>2];ba=+g[na+40>>2];ca=+g[na+44>>2];x=+g[b+600>>2];z=+g[b+604>>2];y=+g[b+608>>2];f=+g[na+52>>2];s=+g[na+56>>2];k=+g[na+60>>2];da=+g[oa+4>>2];ea=+g[oa+8>>2];fa=+g[oa+12>>2];ga=+g[b+624>>2];ha=+g[b+640>>2];K=+g[b+656>>2];L=+g[oa+20>>2];M=+g[oa+24>>2];N=+g[oa+28>>2];O=+g[oa+36>>2];P=+g[oa+40>>2];Q=+g[oa+44>>2];D=+g[b+664>>2];C=+g[b+668>>2];i=+g[b+672>>2];e=+g[oa+52>>2];n=+g[oa+56>>2];j=+g[oa+60>>2];F=e+(da*D+ea*C+fa*i)-(f+(T*x+U*z+V*y));G=L*D+M*C+N*i+n-(Z*x+_*z+$*y+s);H=O*D+P*C+Q*i+j-(aa*x+ba*z+ca*y+k);v=+g[(c[b+28>>2]|0)+404>>2];w=+g[(c[b+32>>2]|0)+404>>2];E=v+w>0.0?w/(v+w):.5;ia=(T*W+U*X+V*Y)*E+(da*ga+ea*ha+fa*K)*(1.0-E);ja=(W*Z+X*_+Y*$)*E+(ga*L+ha*M+K*N)*(1.0-E);ka=(W*aa+X*ba+Y*ca)*E+(ga*O+ha*P+K*Q)*(1.0-E);la=1.0/+B(+(ka*ka+(ia*ia+ja*ja)));A=(O*D+P*C+Q*i+j-j)*ka*la+((e+(da*D+ea*C+fa*i)-e)*ia*la+(L*D+M*C+N*i+n-n)*ja*la);e=e+(da*D+ea*C+fa*i)-e-ia*la*A;n=L*D+M*C+N*i+n-n-ja*la*A;j=O*D+P*C+Q*i+j-j-ka*la*A;i=(aa*x+ba*z+ca*y+k-k)*ka*la+((f+(T*x+U*z+V*y)-f)*ia*la+(Z*x+_*z+$*y+s-s)*ja*la);f=f+(T*x+U*z+V*y)-f-ia*la*i;s=Z*x+_*z+$*y+s-s-ja*la*i;k=aa*x+ba*z+ca*y+k-k-ka*la*i;y=f+E*(ia*la*i-ia*la*A);z=s+E*(ja*la*i-ja*la*A);x=k+E*(ka*la*i-ka*la*A);C=e-(1.0-E)*(ia*la*i-ia*la*A);D=n-(1.0-E)*(ja*la*i-ja*la*A);A=j-(1.0-E)*(ka*la*i-ka*la*A);i=(E*j+(1.0-E)*k)*(E*j+(1.0-E)*k)+((E*e+(1.0-E)*f)*(E*e+(1.0-E)*f)+(E*n+(1.0-E)*s)*(E*n+(1.0-E)*s));if(i>1.1920928955078125e-07){p=1.0/+B(+i);J=(E*e+(1.0-E)*f)*p;I=(E*j+(1.0-E)*k)*p;p=(E*n+(1.0-E)*s)*p}else{J=T*p+U*t+V*u;I=p*aa+t*ba+u*ca;p=p*Z+t*_+u*$}s=ja*la*I-ka*la*p;t=ka*la*J-ia*la*I;u=ia*la*p-ja*la*J;S=c[d+12>>2]|0;g[S>>2]=z*I-x*p;g[S+4>>2]=x*J-y*I;g[S+8>>2]=y*p-z*J;S=c[d+20>>2]|0;g[S>>2]=-(D*I-A*p);g[S+4>>2]=-(A*J-C*I);g[S+8>>2]=-(C*p-D*J);if(v<1.1920928955078125e-07|w<1.1920928955078125e-07?(a[b+716>>0]|0)!=0:0){e=E*(z*u-x*t);f=E*(x*s-y*u);i=E*(y*t-z*s);j=(1.0-E)*(D*u-A*t);k=(1.0-E)*(A*s-C*u);n=(1.0-E)*(C*t-D*s)}else{e=z*u-x*t;f=x*s-y*u;i=y*t-z*s;j=D*u-A*t;k=A*s-C*u;n=C*t-D*s}S=(c[d+12>>2]|0)+(ma<<2)|0;g[S>>2]=e;g[S+4>>2]=f;g[S+8>>2]=i;S=c[d+20>>2]|0;g[S+(ma<<2)>>2]=-j;g[S+(ma+1<<2)>>2]=-k;g[S+(ma+2<<2)>>2]=-n;if(v<1.1920928955078125e-07|w<1.1920928955078125e-07){n=E*(z*ka*la-x*ja*la);k=E*(x*ia*la-y*ka*la);f=E*(y*ja*la-z*ia*la);j=(1.0-E)*(D*ka*la-A*ja*la);i=(1.0-E)*(A*ia*la-C*ka*la);e=(1.0-E)*(C*ja*la-D*ia*la)}else{n=z*ka*la-x*ja*la;k=x*ia*la-y*ka*la;f=y*ja*la-z*ia*la;j=D*ka*la-A*ja*la;i=A*ia*la-C*ka*la;e=C*ja*la-D*ia*la}m=(c[d+12>>2]|0)+(ma<<1<<2)|0;g[m>>2]=n;g[m+4>>2]=k;g[m+8>>2]=f;m=c[d+20>>2]|0;g[m+(ma<<1<<2)>>2]=-j;g[m+((ma<<1|1)<<2)>>2]=-i;g[m+((ma<<1)+2<<2)>>2]=-e;j=+g[((c[b+748>>2]&8|0)==0?d+4|0:b+756|0)>>2];e=j*+g[d>>2];if(!(a[b+736>>0]|0)){o=c[d+8>>2]|0;g[o>>2]=J;g[o+4>>2]=p;g[o+8>>2]=I;o=(c[d+8>>2]|0)+(ma<<2)|0;g[o>>2]=s;g[o+4>>2]=t;g[o+8>>2]=u;o=(c[d+8>>2]|0)+(ma<<1<<2)|0;g[o>>2]=ia*la;g[o+4>>2]=ja*la;g[o+8>>2]=ka*la;o=c[d+16>>2]|0;f=-J;g[o>>2]=f;g[o+4>>2]=-p;g[o+8>>2]=-I;g[o+(ma<<2)>>2]=-s;g[o+(ma+1<<2)>>2]=-t;g[o+(ma+2<<2)>>2]=-u;g[o+(ma<<1<<2)>>2]=-(ia*la);g[o+((ma<<1|1)<<2)>>2]=-(ja*la);g[o+((ma<<1)+2<<2)>>2]=-(ka*la);o=c[d+28>>2]|0;g[o>>2]=e*(F*J+G*p+H*I);g[o+(ma<<2)>>2]=e*(F*s+G*t+H*u);g[o+(ma<<1<<2)>>2]=e*(F*ia*la+G*ja*la+H*ka*la);e=f;f=-s;i=-t;k=-u;m=c[d+20>>2]|0}else{e=-J;f=-s;i=-t;k=-u;o=c[d+28>>2]|0}l=c[d+12>>2]|0;g[l+(ma*3<<2)>>2]=J;g[l+((ma*3|0)+1<<2)>>2]=p;g[l+((ma*3|0)+2<<2)>>2]=I;g[l+(ma<<2<<2)>>2]=s;g[l+((ma<<2|1)<<2)>>2]=t;g[l+((ma<<2|2)<<2)>>2]=u;g[m+(ma*3<<2)>>2]=e;g[m+((ma*3|0)+1<<2)>>2]=-p;g[m+((ma*3|0)+2<<2)>>2]=-I;g[m+(ma<<2<<2)>>2]=f;g[m+((ma<<2|1)<<2)>>2]=i;g[m+((ma<<2|2)<<2)>>2]=k;G=j*+g[d>>2];H=(W*Z+X*_+Y*$)*(ga*O+ha*P+K*Q)-(W*aa+X*ba+Y*ca)*(ga*L+ha*M+K*N);ca=(W*aa+X*ba+Y*ca)*(da*ga+ea*ha+fa*K)-(T*W+U*X+V*Y)*(ga*O+ha*P+K*Q);ha=(T*W+U*X+V*Y)*(ga*L+ha*M+K*N)-(W*Z+X*_+Y*$)*(da*ga+ea*ha+fa*K);g[o+(ma*3<<2)>>2]=G*(H*J+ca*p+ha*I);g[o+(ma<<2<<2)>>2]=G*(H*s+ca*t+ha*u);if(!(a[b+716>>0]|0))if(!(a[b+737>>0]|0))return;else{p=0.0;r=0;q=0;h=1}else{ha=+g[b+708>>2]*+g[b+732>>2];p=ha;r=ha>0.0?1:2;q=1;h=(a[b+737>>0]|0)!=0}g[l+(ma*5<<2)>>2]=ia*la;g[l+((ma*5|0)+1<<2)>>2]=ja*la;g[l+((ma*5|0)+2<<2)>>2]=ka*la;g[m+(ma*5<<2)>>2]=-(ia*la);g[m+((ma*5|0)+1<<2)>>2]=-(ja*la);g[m+((ma*5|0)+2<<2)>>2]=-(ka*la);e=+g[b+688>>2];f=+g[b+692>>2];if(!((e-f)%6.2831854820251465<-3.1415927410125732))if((e-f)%6.2831854820251465>3.1415927410125732)n=(e-f)%6.2831854820251465+-6.2831854820251465;else n=(e-f)%6.2831854820251465;else n=(e-f)%6.2831854820251465+6.2831854820251465;if(!((e+f)%6.2831854820251465<-3.1415927410125732))if((e+f)%6.2831854820251465>3.1415927410125732)k=(e+f)%6.2831854820251465+-6.2831854820251465;else k=(e+f)%6.2831854820251465;else k=(e+f)%6.2831854820251465+6.2831854820251465;m=n==k;o=o+(ma*5<<2)|0;g[o>>2]=0.0;l=c[b+748>>2]|0;if(l&2)j=+g[b+764>>2];if(h&(q&m^1)){if(l&4|0)c[(c[d+32>>2]|0)+(ma*5<<2)>>2]=c[b+752>>2];f=+g[b+728>>2];i=+g[b+680>>2];e=n>k?1.0:0.0;do if(!(n>=k)){e=i/(j*+g[d>>2]);if(e<0.0)if(f>=n&n-e>f){e=(n-f)/e;break}else{e=f<n?0.0:1.0;break}if(e>0.0)if(f<=k&k-e<f){e=(k-f)/e;break}else{e=f>k?0.0:1.0;break}else e=0.0}while(0);g[o>>2]=e*i*+g[b+732>>2]+ +g[o>>2];g[(c[d+36>>2]|0)+(ma*5<<2)>>2]=-+g[b+684>>2];c[(c[d+40>>2]|0)+(ma*5<<2)>>2]=c[b+684>>2]}if(!q)return;g[o>>2]=+g[o>>2]+p*j*+g[d>>2];if(l&1|0)c[(c[d+32>>2]|0)+(ma*5<<2)>>2]=c[b+760>>2];do if(!m){h=(c[d+36>>2]|0)+(ma*5<<2)|0;if((r|0)==1){g[h>>2]=0.0;e=3402823466385288598117041.0e14;break}else{g[h>>2]=-3402823466385288598117041.0e14;e=0.0;break}}else{g[(c[d+36>>2]|0)+(ma*5<<2)>>2]=-3402823466385288598117041.0e14;e=3402823466385288598117041.0e14}while(0);g[(c[d+40>>2]|0)+(ma*5<<2)>>2]=e;f=+g[b+704>>2];do if(f>0.0){e=+g[na+388>>2]*ia*la+ +g[na+392>>2]*ja*la+ +g[na+396>>2]*ka*la-(+g[oa+388>>2]*ia*la+ +g[oa+392>>2]*ja*la+ +g[oa+396>>2]*ka*la);if((r|0)==1){if(!(e<0.0))break;if(!(+g[o>>2]<-(f*e)))break;g[o>>2]=-(f*e);break}else{if(!(e>0.0))break;if(!(+g[o>>2]>-(f*e)))break;g[o>>2]=-(f*e);break}}while(0);g[o>>2]=+g[b+700>>2]*+g[o>>2];return}function nc(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0,j=0,k=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0.0,S=0.0,T=0.0,U=0.0,V=0.0,W=0.0,X=0.0,Y=0.0,Z=0.0,_=0.0,$=0.0,aa=0.0,ba=0.0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0.0,ia=0.0,ja=0.0,ka=0.0,la=0.0,ma=0.0,na=0.0,oa=0.0,pa=0.0,qa=0.0,ra=0.0;ga=l;l=l+4352|0;da=c[d+4>>2]|0;ea=c[e+4>>2]|0;r=c[da+68>>2]|0;s=c[ea+68>>2]|0;if(!((r|0)!=0&(s|0)!=0)){xc(b,d,e,f,h);l=ga;return}if(!((c[da+72>>2]|0)==(c[b+108>>2]|0)?(c[ea+72>>2]|0)==(c[b+112>>2]|0):0)){i=c[b+84>>2]|0;k=c[i+8>>2]|0;if((k|0)>0){j=0;do{m=c[(c[i+16>>2]|0)+(j*12|0)+8>>2]|0;if(m|0){Db[c[c[m>>2]>>2]&255](m);u=c[b+4>>2]|0;Ib[c[(c[u>>2]|0)+60>>2]&127](u,m)}j=j+1|0}while((j|0)!=(k|0));i=c[b+84>>2]|0}Mg(i);c[b+108>>2]=c[da+72>>2];c[b+112>>2]=c[ea+72>>2]}a[ga+3216+16>>0]=1;q=ga+3216+12|0;c[q>>2]=0;p=ga+3216+4|0;c[p>>2]=0;c[ga+3216+8>>2]=0;c[ga>>2]=1025;i=ga+120|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=ga+312|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=ga+504|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=ga+696|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));c[ga+772>>2]=0;c[ga+776>>2]=0;c[ga+780>>2]=0;c[ga+800>>2]=0;c[ga+804>>2]=1025;i=ga+924|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=ga+1116|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=ga+1308|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=ga+1500|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));c[ga+1576>>2]=0;c[ga+1580>>2]=0;c[ga+1584>>2]=0;c[ga+1604>>2]=0;c[ga+1608>>2]=1025;i=ga+1728|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=ga+1920|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=ga+2112|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=ga+2304|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));c[ga+2380>>2]=0;c[ga+2384>>2]=0;c[ga+2388>>2]=0;c[ga+2408>>2]=0;c[ga+2412>>2]=1025;i=ga+2532|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=ga+2724|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=ga+2916|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));i=ga+3108|0;j=i+44|0;do{c[i>>2]=0;i=i+4|0}while((i|0)<(j|0));c[ga+3184>>2]=0;c[ga+3188>>2]=0;c[ga+3192>>2]=0;c[ga+3212>>2]=0;a[p+12>>0]=0;c[q>>2]=ga;c[p>>2]=0;c[ga+3216+8>>2]=4;o=c[b+84>>2]|0;i=c[o+8>>2]|0;if((i|0)>0){n=0;do{j=c[(c[o+16>>2]|0)+(n*12|0)+8>>2]|0;if(j){Ib[c[(c[j>>2]|0)+16>>2]&127](j,ga+3216|0);i=c[p>>2]|0;if((i|0)>0){m=0;do{k=c[(c[q>>2]|0)+(m<<2)>>2]|0;if(c[k+780>>2]|0){c[h+4>>2]=k;i=c[k+772>>2]|0;j=c[(c[h+8>>2]|0)+8>>2]|0;if((i|0)==(j|0))te(k,i+4|0,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0);else te(k,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0,j+4|0);c[h+4>>2]=0;i=c[p>>2]|0}m=m+1|0}while((m|0)<(i|0))}if((i|0)<0){if((c[ga+3216+8>>2]|0)<0){j=c[q>>2]|0;if(j|0){if(a[ga+3216+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}c[q>>2]=0}a[ga+3216+16>>0]=1;c[q>>2]=0;c[ga+3216+8>>2]=0}do{c[(c[q>>2]|0)+(i<<2)>>2]=0;i=i+1|0}while((i|0)!=0)}c[p>>2]=0;i=c[o+8>>2]|0}n=n+1|0}while((n|0)<(i|0));i=c[q>>2]|0;if(i|0)if((a[ga+3216+16>>0]|0)==0|(i|0)==0)ca=37;else{c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0);ca=37}}else ca=37;if((ca|0)==37)c[q>>2]=0;u=c[b+4>>2]|0;i=c[b+84>>2]|0;j=c[b+72>>2]|0;c[ga>>2]=10672;c[ga+4>>2]=0;c[ga+8>>2]=d;c[ga+12>>2]=e;c[ga+16>>2]=u;c[ga+20>>2]=f;c[ga+24>>2]=h;c[ga+28>>2]=i;c[ga+32>>2]=j;j=c[d+12>>2]|0;G=+g[j>>2];H=+g[j+16>>2];I=+g[j+32>>2];J=+g[j+4>>2];K=+g[j+20>>2];L=+g[j+36>>2];M=+g[j+8>>2];N=+g[j+24>>2];O=+g[j+40>>2];P=-+g[j+48>>2];Q=-+g[j+52>>2];R=-+g[j+56>>2];j=c[e+12>>2]|0;S=+g[j>>2];T=+g[j+16>>2];U=+g[j+32>>2];V=+g[j+4>>2];W=+g[j+20>>2];X=+g[j+36>>2];Y=+g[j+8>>2];Z=+g[j+24>>2];_=+g[j+40>>2];$=+g[j+48>>2];aa=+g[j+52>>2];ba=+g[j+56>>2];j=c[r>>2]|0;i=c[s>>2]|0;F=+g[h+32>>2];if((j|0)!=0&(i|0)!=0){c[ga+3216>>2]=j;c[ga+3216+4>>2]=i;v=+A(+(G*S+H*T+I*U));w=+A(+(G*V+H*W+I*X));x=+A(+(G*Y+H*Z+I*_));y=+A(+(J*S+K*T+L*U));z=+A(+(J*V+K*W+L*X));B=+A(+(J*Y+K*Z+L*_));C=+A(+(M*S+N*T+O*U));D=+A(+(M*V+N*W+O*X));E=+A(+(M*Y+N*Z+O*_));o=1;m=124;n=128;f=ga+3216|0;k=128;t=0;while(1){u=o+-1|0;r=c[f+(u<<3)>>2]|0;s=c[f+(u<<3)+4>>2]|0;ra=+g[s+16>>2];qa=+g[s>>2];pa=+g[s+20>>2];oa=+g[s+4>>2];na=+g[s+24>>2];ha=+g[s+8>>2];ma=G*P+H*Q+I*R+(G*$+H*aa+I*ba)+((G*S+H*T+I*U)*(ra+qa)*.5+(G*V+H*W+I*X)*(pa+oa)*.5+(G*Y+H*Z+I*_)*(na+ha)*.5);ka=J*P+K*Q+L*R+(J*$+K*aa+L*ba)+((J*S+K*T+L*U)*(ra+qa)*.5+(J*V+K*W+L*X)*(pa+oa)*.5+(J*Y+K*Z+L*_)*(na+ha)*.5);ia=M*P+N*Q+O*R+(M*$+N*aa+O*ba)+((M*S+N*T+O*U)*(ra+qa)*.5+(M*V+N*W+O*X)*(pa+oa)*.5+(M*Y+N*Z+O*_)*(na+ha)*.5);la=v*((ra-qa)*.5+0.0)+w*((pa-oa)*.5+0.0)+x*((na-ha)*.5+0.0);ja=y*((ra-qa)*.5+0.0)+z*((pa-oa)*.5+0.0)+B*((na-ha)*.5+0.0);ha=C*((ra-qa)*.5+0.0)+D*((pa-oa)*.5+0.0)+E*((na-ha)*.5+0.0);do if(((((+g[r>>2]<=F+(la+ma)?+g[r+16>>2]>=ma-la-F:0)?+g[r+4>>2]<=F+(ja+ka):0)?+g[r+20>>2]>=ka-ja-F:0)?+g[r+8>>2]<=F+(ha+ia):0)?+g[r+24>>2]>=ia-ha-F:0){if((u|0)>(m|0)){p=k<<1;a:do if((k|0)<(p|0)&(n|0)<(p|0)){do if(k){c[6485]=(c[6485]|0)+1;i=ec((k<<4|3)+16|0)|0;if(!i)i=0;else{c[(i+4+15&-16)+-4>>2]=i;i=i+4+15&-16}if((k|0)<=0){ca=54;break}j=0;do{m=f+(j<<3)|0;n=c[m+4>>2]|0;q=i+(j<<3)|0;c[q>>2]=c[m>>2];c[q+4>>2]=n;j=j+1|0}while((j|0)!=(k|0));if(!(t<<24>>24)){k=p;j=1;break a}}else{i=0;ca=54}while(0);if((ca|0)==54){ca=0;if((f|0)==0|t<<24>>24==0){k=p;j=1;break}}c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0);k=p;j=1}else{k=n;i=f;j=t}while(0);q=p+-4|0;n=k}else{q=m;i=f;p=k;j=t}k=(c[s+40>>2]|0)!=0;if(!(c[r+40>>2]|0))if(k){m=c[s+36>>2]|0;c[i+(u<<3)>>2]=r;c[i+(u<<3)+4>>2]=m;m=c[s+40>>2]|0;c[i+(o<<3)>>2]=r;c[i+(o<<3)+4>>2]=m;o=o+1|0;m=q;k=p;break}else{Mb[c[(c[ga>>2]|0)+8>>2]&127](ga,r,s);o=u;m=q;k=p;break}else{m=c[r+36>>2]|0;if(k){k=c[s+36>>2]|0;c[i+(u<<3)>>2]=m;c[i+(u<<3)+4>>2]=k;u=c[s+36>>2]|0;k=o+1|0;c[i+(o<<3)>>2]=c[r+40>>2];c[i+(o<<3)+4>>2]=u;u=c[s+40>>2]|0;m=o+2|0;c[i+(k<<3)>>2]=c[r+36>>2];c[i+(k<<3)+4>>2]=u;k=c[s+40>>2]|0;c[i+(m<<3)>>2]=c[r+40>>2];c[i+(m<<3)+4>>2]=k;o=o+3|0;m=q;k=p;break}else{c[i+(u<<3)>>2]=m;c[i+(u<<3)+4>>2]=s;c[i+(o<<3)>>2]=c[r+40>>2];c[i+(o<<3)+4>>2]=s;o=o+1|0;m=q;k=p;break}}}else{o=u;i=f;j=t}while(0);if(!o)break;else{f=i;t=j}}if(!((i|0)==0|j<<24>>24==0)){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}}p=c[b+84>>2]|0;if((c[p+8>>2]|0)>0){o=0;do{i=c[p+16>>2]|0;j=c[i+(o*12|0)+8>>2]|0;if(j|0?(ca=c[i+(o*12|0)>>2]|0,u=c[da+28>>2]|0,t=c[u+(ca*80|0)+64>>2]|0,s=c[d+12>>2]|0,S=+g[s>>2],R=+g[s+4>>2],oa=+g[s+8>>2],la=+g[s+16>>2],ja=+g[s+20>>2],ha=+g[s+24>>2],ka=+g[s+32>>2],Y=+g[s+36>>2],W=+g[s+40>>2],ba=+g[u+(ca*80|0)>>2],aa=+g[u+(ca*80|0)+16>>2],$=+g[u+(ca*80|0)+32>>2],_=+g[u+(ca*80|0)+4>>2],Z=+g[u+(ca*80|0)+20>>2],ma=+g[u+(ca*80|0)+36>>2],ia=+g[u+(ca*80|0)+8>>2],X=+g[u+(ca*80|0)+24>>2],V=+g[u+(ca*80|0)+40>>2],ra=+g[u+(ca*80|0)+48>>2],pa=+g[u+(ca*80|0)+52>>2],qa=+g[u+(ca*80|0)+56>>2],U=+g[s+48>>2]+(S*ra+R*pa+oa*qa),T=+g[s+52>>2]+(la*ra+ja*pa+ha*qa),qa=+g[s+56>>2]+(ka*ra+Y*pa+W*qa),g[ga+4240>>2]=S*ba+R*aa+oa*$,g[ga+4240+4>>2]=S*_+R*Z+oa*ma,g[ga+4240+8>>2]=S*ia+R*X+oa*V,g[ga+4240+12>>2]=0.0,g[ga+4240+16>>2]=la*ba+ja*aa+ha*$,g[ga+4240+20>>2]=la*_+ja*Z+ha*ma,g[ga+4240+24>>2]=la*ia+ja*X+ha*V,g[ga+4240+28>>2]=0.0,g[ga+4240+32>>2]=ka*ba+Y*aa+W*$,g[ga+4240+36>>2]=ka*_+Y*Z+W*ma,g[ga+4240+40>>2]=ka*ia+Y*X+W*V,g[ga+4240+44>>2]=0.0,g[ga+4240+48>>2]=U,g[ga+4240+52>>2]=T,g[ga+4240+56>>2]=qa,g[ga+4240+60>>2]=0.0,Pb[c[(c[t>>2]|0)+8>>2]&127](t,ga+4240|0,ga+3216|0,ga+4336|0),qa=+g[h+32>>2],g[ga+3216>>2]=+g[ga+3216>>2]-qa,g[ga+3216+4>>2]=+g[ga+3216+4>>2]-qa,g[ga+3216+8>>2]=+g[ga+3216+8>>2]-qa,g[ga+4336>>2]=qa+ +g[ga+4336>>2],g[ga+4336+4>>2]=qa+ +g[ga+4336+4>>2],g[ga+4336+8>>2]=qa+ +g[ga+4336+8>>2],t=c[(c[p+16>>2]|0)+(o*12|0)+4>>2]|0,s=c[ea+28>>2]|0,ca=c[s+(t*80|0)+64>>2]|0,u=c[e+12>>2]|0,T=+g[u>>2],U=+g[u+4>>2],V=+g[u+8>>2],W=+g[u+16>>2],X=+g[u+20>>2],Y=+g[u+24>>2],ia=+g[u+32>>2],ka=+g[u+36>>2],ma=+g[u+40>>2],Z=+g[s+(t*80|0)>>2],_=+g[s+(t*80|0)+16>>2],$=+g[s+(t*80|0)+32>>2],aa=+g[s+(t*80|0)+4>>2],ba=+g[s+(t*80|0)+20>>2],ha=+g[s+(t*80|0)+36>>2],ja=+g[s+(t*80|0)+8>>2],la=+g[s+(t*80|0)+24>>2],oa=+g[s+(t*80|0)+40>>2],R=+g[s+(t*80|0)+48>>2],S=+g[s+(t*80|0)+52>>2],pa=+g[s+(t*80|0)+56>>2],ra=+g[u+48>>2]+(T*R+U*S+V*pa),na=+g[u+52>>2]+(W*R+X*S+Y*pa),pa=+g[u+56>>2]+(ia*R+ka*S+ma*pa),g[ga+4240>>2]=T*Z+U*_+V*$,g[ga+4240+4>>2]=T*aa+U*ba+V*ha,g[ga+4240+8>>2]=T*ja+U*la+V*oa,g[ga+4240+12>>2]=0.0,g[ga+4240+16>>2]=W*Z+X*_+Y*$,g[ga+4240+20>>2]=W*aa+X*ba+Y*ha,g[ga+4240+24>>2]=W*ja+X*la+Y*oa,g[ga+4240+28>>2]=0.0,g[ga+4240+32>>2]=ia*Z+ka*_+ma*$,g[ga+4240+36>>2]=ia*aa+ka*ba+ma*ha,g[ga+4240+40>>2]=ia*ja+ka*la+ma*oa,g[ga+4240+44>>2]=0.0,g[ga+4240+48>>2]=ra,g[ga+4240+52>>2]=na,g[ga+4240+56>>2]=pa,g[ga+4240+60>>2]=0.0,Pb[c[(c[ca>>2]|0)+8>>2]&127](ca,ga+4240|0,ga+4320|0,ga+4304|0),pa=+g[ga+4320>>2]-qa,g[ga+4320>>2]=pa,na=+g[ga+4320+4>>2]-qa,g[ga+4320+4>>2]=na,ra=+g[ga+4320+8>>2]-qa,g[ga+4320+8>>2]=ra,oa=qa+ +g[ga+4304>>2],g[ga+4304>>2]=oa,ma=qa+ +g[ga+4304+4>>2],g[ga+4304+4>>2]=ma,qa=qa+ +g[ga+4304+8>>2],g[ga+4304+8>>2]=qa,(+g[ga+3216+4>>2]>ma?1:+g[ga+4336+4>>2]<na)|(+g[ga+3216>>2]>oa?0:!(+g[ga+4336>>2]<pa))&(+g[ga+3216+8>>2]>qa?0:!(+g[ga+4336+8>>2]<ra))^1):0){Db[c[c[j>>2]>>2]&255](j);n=c[b+4>>2]|0;Ib[c[(c[n>>2]|0)+60>>2]&127](n,j);n=c[p+16>>2]|0;m=c[n+(o*12|0)>>2]|0;n=c[n+(o*12|0)+4>>2]|0;j=c[b+92>>2]|0;if((j|0)==(c[b+96>>2]|0)?(fa=(j|0)==0?1:j<<1,(j|0)<(fa|0)):0){if(!fa)i=0;else{c[6485]=(c[6485]|0)+1;i=ec((fa*12|3)+16|0)|0;if(!i)i=0;else{c[(i+4+15&-16)+-4>>2]=i;i=i+4+15&-16}j=c[b+92>>2]|0}if((j|0)>0){k=0;do{ca=i+(k*12|0)|0;u=(c[b+100>>2]|0)+(k*12|0)|0;c[ca>>2]=c[u>>2];c[ca+4>>2]=c[u+4>>2];c[ca+8>>2]=c[u+8>>2];k=k+1|0}while((k|0)!=(j|0))}j=c[b+100>>2]|0;if(j|0){if(a[b+104>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}c[b+100>>2]=0}a[b+104>>0]=1;c[b+100>>2]=i;c[b+96>>2]=fa;i=c[b+92>>2]|0}else i=j;ca=c[b+100>>2]|0;c[ca+(i*12|0)>>2]=m;c[ca+(i*12|0)+4>>2]=n;c[ca+(i*12|0)+8>>2]=0;c[b+92>>2]=(c[b+92>>2]|0)+1}o=o+1|0}while((o|0)<(c[p+8>>2]|0));j=b+100|0;k=b+92|0}else{j=b+100|0;k=b+92|0}if((c[k>>2]|0)>0){i=0;do{h=c[b+84>>2]|0;fa=c[j>>2]|0;wb[c[(c[h>>2]|0)+8>>2]&63](h,c[fa+(i*12|0)>>2]|0,c[fa+(i*12|0)+4>>2]|0)|0;i=i+1|0}while((i|0)<(c[k>>2]|0))}i=c[j>>2]|0;if(i|0){if(a[b+104>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[j>>2]=0}a[b+104>>0]=1;c[j>>2]=0;c[k>>2]=0;c[b+96>>2]=0;l=ga;return}function oc(b,d){b=b|0;d=d|0;var e=0.0,f=0.0,h=0,i=0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0,s=0.0,t=0.0,u=0,v=0.0,w=0,x=0,y=0.0,z=0.0,C=0.0,D=0,E=0,F=0,G=0,H=0,I=0,J=0.0,K=0.0,L=0.0,M=0.0,O=0.0,P=0,Q=0,R=0,S=0.0,T=0.0,U=0.0,V=0,W=0.0,X=0.0,Y=0.0,Z=0,_=0,$=0,aa=0,ba=0,ca=0.0,da=0,ea=0;da=c[b+28>>2]|0;ea=c[b+32>>2]|0;W=+g[da+404>>2];X=+g[ea+404>>2];_=c[d+24>>2]|0;ca=(a[b+180>>0]|0)==0?-1.0:1.0;S=+g[b+936>>2]-+g[b+872>>2];T=+g[b+940>>2]-+g[b+876>>2];U=+g[b+944>>2]-+g[b+880>>2];Y=W+X>0.0?X/(W+X):.5;D=c[b+824>>2]|0;E=c[b+840>>2]|0;F=c[b+856>>2]|0;G=c[b+888>>2]|0;H=c[b+904>>2]|0;I=c[b+920>>2]|0;V=(a[b+49>>0]|0)==0;if(V){r=c[b+828>>2]|0;i=c[b+844>>2]|0;w=c[b+860>>2]|0;x=c[b+832>>2]|0;h=c[b+848>>2]|0;R=c[b+864>>2]|0;n=(c[j>>2]=r,+g[j>>2]);f=(c[j>>2]=i,+g[j>>2]);p=(c[j>>2]=w,+g[j>>2]);q=(c[j>>2]=x,+g[j>>2]);s=(c[j>>2]=h,+g[j>>2]);$=D;u=R;aa=E;ba=F;o=(c[j>>2]=R,+g[j>>2])}else{e=Y*(c[j>>2]=D,+g[j>>2]);l=Y*(c[j>>2]=E,+g[j>>2]);k=Y*(c[j>>2]=F,+g[j>>2]);f=(1.0-Y)*(c[j>>2]=G,+g[j>>2]);m=(1.0-Y)*(c[j>>2]=H,+g[j>>2]);k=k+(1.0-Y)*(c[j>>2]=I,+g[j>>2]);n=1.0/+B(+((e+f)*(e+f)+(l+m)*(l+m)+k*k));h=(g[j>>2]=(e+f)*n,c[j>>2]|0);i=(g[j>>2]=(l+m)*n,c[j>>2]|0);r=(g[j>>2]=k*n,c[j>>2]|0);if(+A(+(k*n))>.7071067690849304){O=1.0/+B(+(k*n*k*n+(l+m)*n*(l+m)*n));s=-((e+f)*n*(l+m)*n*O);o=(e+f)*n*-(k*n*O);q=(k*n*k*n+(l+m)*n*(l+m)*n)*O;p=(l+m)*n*O;f=-(k*n*O);e=0.0}else{o=(e+f)*n*(e+f)*n+(l+m)*n*(l+m)*n;O=1.0/+B(+o);s=k*n*-((l+m)*n*O);o=o*O;q=-(k*n*(e+f)*n*O);p=0.0;f=(e+f)*n*O;e=-((l+m)*n*O)}R=(g[j>>2]=e,c[j>>2]|0);Q=(g[j>>2]=f,c[j>>2]|0);w=(g[j>>2]=p,c[j>>2]|0);x=(g[j>>2]=q,c[j>>2]|0);P=(g[j>>2]=s,c[j>>2]|0);$=h;u=(g[j>>2]=o,c[j>>2]|0);aa=i;ba=r;h=P;i=Q;r=R;n=e}R=c[d+12>>2]|0;c[R>>2]=r;c[R+4>>2]=i;c[R+8>>2]=w;c[R+(_<<2)>>2]=x;c[R+(_+1<<2)>>2]=h;c[R+(_+2<<2)>>2]=u;k=-n;P=c[d+20>>2]|0;g[P>>2]=k;g[P+4>>2]=-f;g[P+8>>2]=-p;g[P+(_<<2)>>2]=-q;g[P+(_+1<<2)>>2]=-s;g[P+(_+2<<2)>>2]=-o;Q=c[b+300>>2]|0;e=+g[b+280>>2];if(!(Q&128))e=e*+g[d+4>>2];z=e*+g[d>>2];M=(c[j>>2]=E,+g[j>>2]);J=(c[j>>2]=I,+g[j>>2]);C=(c[j>>2]=F,+g[j>>2]);L=(c[j>>2]=H,+g[j>>2]);O=(c[j>>2]=G,+g[j>>2]);K=(c[j>>2]=D,+g[j>>2]);u=c[d+28>>2]|0;g[u>>2]=z*((M*J-C*L)*n+(C*O-K*J)*f+(K*L-M*O)*p);g[u+(_<<2)>>2]=z*((M*J-C*L)*q+(C*O-K*J)*s+(K*L-M*O)*o);if(Q&64|0){I=c[d+32>>2]|0;c[I>>2]=c[b+292>>2];c[I+(_<<2)>>2]=c[b+292>>2]}y=+g[da+52>>2];t=+g[da+56>>2];v=+g[da+60>>2];m=+g[ea+52>>2];e=+g[ea+56>>2];l=+g[ea+60>>2];if(V){M=(e-t)*p-(l-v)*f;O=(l-v)*n-(m-y)*p;L=(m-y)*f-(e-t)*n;g[R+(_<<1<<2)>>2]=Y*M;g[R+((_<<1|1)<<2)>>2]=Y*O;g[R+((_<<1)+2<<2)>>2]=Y*L;g[P+(_<<1<<2)>>2]=(1.0-Y)*M;g[P+((_<<1|1)<<2)>>2]=(1.0-Y)*O;g[P+((_<<1)+2<<2)>>2]=(1.0-Y)*L;L=(e-t)*o-(l-v)*s;O=(l-v)*q-(m-y)*o;M=(m-y)*s-(e-t)*q;g[R+(_*3<<2)>>2]=Y*L;g[R+((_*3|0)+1<<2)>>2]=Y*O;g[R+((_*3|0)+2<<2)>>2]=Y*M;g[P+(_*3<<2)>>2]=(1.0-Y)*L;g[P+((_*3|0)+1<<2)>>2]=(1.0-Y)*O;g[P+((_*3|0)+2<<2)>>2]=(1.0-Y)*M;i=c[d+8>>2]|0;g[i+(_<<1<<2)>>2]=n;g[i+((_<<1|1)<<2)>>2]=f;g[i+((_<<1)+2<<2)>>2]=p;g[i+(_*3<<2)>>2]=q;g[i+((_*3|0)+1<<2)>>2]=s;g[i+((_*3|0)+2<<2)>>2]=o;r=c[d+16>>2]|0;g[r+(_<<1<<2)>>2]=k;g[r+((_<<1|1)<<2)>>2]=-f;g[r+((_<<1)+2<<2)>>2]=-p;g[r+(_*3<<2)>>2]=-q;g[r+((_*3|0)+1<<2)>>2]=-s;h=r+((_*3|0)+2<<2)|0;M=n;O=0.0;L=0.0;K=0.0;J=0.0;C=0.0;z=0.0;n=e-t;l=l-v;k=m-y}else{q=+g[b+936>>2]-m;s=+g[b+940>>2]-e;L=+g[b+944>>2]-l;n=(c[j>>2]=$,+g[j>>2]);o=(c[j>>2]=aa,+g[j>>2]);m=(c[j>>2]=ba,+g[j>>2]);M=+g[b+872>>2]-y;O=+g[b+876>>2]-t;e=+g[b+880>>2]-v;C=+g[b+1080>>2]-+g[b+1032>>2];z=(M*n+O*o+e*m)*n+C*n-(q*n+s*o+L*m)*n;J=(M*n+O*o+e*m)*o+C*o-(q*n+s*o+L*m)*o;C=(M*n+O*o+e*m)*m+C*m-(q*n+s*o+L*m)*m;K=M-(M*n+O*o+e*m)*n+Y*z;t=O-(M*n+O*o+e*m)*o+Y*J;v=e-(M*n+O*o+e*m)*m+Y*C;z=q-(q*n+s*o+L*m)*n-(1.0-Y)*z;J=s-(q*n+s*o+L*m)*o-(1.0-Y)*J;C=L-(q*n+s*o+L*m)*m-(1.0-Y)*C;k=Y*(q-(q*n+s*o+L*m)*n)+(1.0-Y)*(M-(M*n+O*o+e*m)*n);f=Y*(s-(q*n+s*o+L*m)*o)+(1.0-Y)*(O-(M*n+O*o+e*m)*o);e=Y*(L-(q*n+s*o+L*m)*m)+(1.0-Y)*(e-(M*n+O*o+e*m)*m);if(e*e+(k*k+f*f)>1.1920928955078125e-07){O=1.0/+B(+(e*e+(k*k+f*f)));i=(g[j>>2]=f*O,c[j>>2]|0);r=(g[j>>2]=e*O,c[j>>2]|0);l=e*O;e=f*O;p=k*O;h=(g[j>>2]=k*O,c[j>>2]|0)}else{h=c[b+828>>2]|0;i=c[b+844>>2]|0;r=c[b+860>>2]|0;l=(c[j>>2]=r,+g[j>>2]);e=(c[j>>2]=i,+g[j>>2]);p=(c[j>>2]=h,+g[j>>2])}q=l*o-e*m;s=p*m-l*n;o=e*n-p*o;g[R+(_<<1<<2)>>2]=t*l-v*e;g[R+(_<<1<<2)+4>>2]=v*p-K*l;g[R+(_<<1<<2)+8>>2]=K*e-t*p;g[P+(_<<1<<2)>>2]=-(J*l-C*e);g[P+((_<<1|1)<<2)>>2]=-(C*p-z*l);g[P+((_<<1)+2<<2)>>2]=-(z*e-J*p);if(W<1.1920928955078125e-07|X<1.1920928955078125e-07?(a[b+297>>0]|0)!=0:0){e=Y*(t*o-v*s);f=Y*(K*s-t*q);k=Y*(v*q-K*o);l=(1.0-Y)*(J*o-C*s);m=(1.0-Y)*(C*q-z*o);n=(1.0-Y)*(z*s-J*q)}else{e=t*o-v*s;f=K*s-t*q;k=v*q-K*o;l=J*o-C*s;m=C*q-z*o;n=z*s-J*q}g[R+(_*3<<2)>>2]=e;g[R+(_*3<<2)+4>>2]=k;g[R+(_*3<<2)+8>>2]=f;g[P+(_*3<<2)>>2]=-l;g[P+((_*3|0)+1<<2)>>2]=-m;g[P+((_*3|0)+2<<2)>>2]=-n;H=c[d+8>>2]|0;c[H+(_<<1<<2)>>2]=h;c[H+((_<<1|1)<<2)>>2]=i;c[H+((_<<1)+2<<2)>>2]=r;g[H+(_*3<<2)>>2]=q;g[H+((_*3|0)+1<<2)>>2]=s;g[H+((_*3|0)+2<<2)>>2]=o;I=c[d+16>>2]|0;g[I+(_<<1<<2)>>2]=-p;f=(c[j>>2]=i,+g[j>>2]);g[I+((_<<1|1)<<2)>>2]=-f;O=(c[j>>2]=r,+g[j>>2]);g[I+((_<<1)+2<<2)>>2]=-O;g[I+(_*3<<2)>>2]=-q;g[I+((_*3|0)+1<<2)>>2]=-s;h=I+((_*3|0)+2<<2)|0;M=p;p=O;i=H;r=I;O=t;L=v;n=0.0;l=0.0;k=0.0}g[h>>2]=-o;e=+g[b+264>>2];if(!(Q&32))e=e*+g[d+4>>2];y=e*+g[d>>2];g[u+(_<<1<<2)>>2]=y*(S*M+T*f+U*p);g[u+(_*3<<2)>>2]=y*(S*q+T*s+U*o);if(Q&16|0){I=c[d+32>>2]|0;c[I+(_<<1<<2)>>2]=c[b+276>>2];c[I+(_*3<<2)>>2]=c[b+276>>2]}if(!(a[b+296>>0]|0))if(!(a[b+1096>>0]|0))h=4;else{o=0.0;x=0;w=0;h=1;Z=27}else{U=ca*+g[b+1032>>2];o=U;x=U>0.0?2:1;w=1;h=(a[b+1096>>0]|0)!=0;Z=27}if((Z|0)==27){c[i+(_<<2<<2)>>2]=$;c[i+((_<<2|1)<<2)>>2]=aa;c[i+((_<<2|2)<<2)>>2]=ba;p=(c[j>>2]=$,+g[j>>2]);g[r+(_<<2<<2)>>2]=-p;q=(c[j>>2]=aa,+g[j>>2]);g[r+((_<<2|1)<<2)>>2]=-q;s=(c[j>>2]=ba,+g[j>>2]);g[r+((_<<2|2)<<2)>>2]=-s;if(!V){if(!(W<1.1920928955078125e-07|X<1.1920928955078125e-07)){g[R+(_<<2<<2)>>2]=O*s-L*q;g[R+((_<<2|1)<<2)>>2]=L*p-K*s;g[R+((_<<2|2)<<2)>>2]=K*q-O*p;g[P+(_<<2<<2)>>2]=-(J*s-C*q);g[P+((_<<2|1)<<2)>>2]=-(C*p-z*s);e=-(z*q-J*p);Z=31}}else{W=n*s-l*q;X=l*p-k*s;e=k*q-n*p;g[R+(_<<2<<2)>>2]=Y*W;g[R+((_<<2|1)<<2)>>2]=Y*X;g[R+((_<<2|2)<<2)>>2]=Y*e;g[P+(_<<2<<2)>>2]=(1.0-Y)*W;g[P+((_<<2|1)<<2)>>2]=(1.0-Y)*X;e=(1.0-Y)*e;Z=31}if((Z|0)==31)g[P+((_<<2|2)<<2)>>2]=e;r=+g[b+184>>2]==+g[b+188>>2];g[u+(_<<2<<2)>>2]=0.0;i=(c[d+36>>2]|0)+(_<<2<<2)|0;g[i>>2]=0.0;u=(c[d+40>>2]|0)+(_<<2<<2)|0;g[u>>2]=0.0;n=+g[((Q&512|0)==0?d+4|0:b+232|0)>>2];if(h&(w&r^1)){if(Q&1|0)c[(c[d+32>>2]|0)+(_<<2<<2)>>2]=c[b+212>>2];m=+g[b+1100>>2];e=+g[b+1080>>2];f=+g[b+184>>2];k=+g[b+188>>2];l=n*+g[d>>2];do if(!(f>k))if(!(f==k)){if(m/l<0.0)if(e>=f?f-m/l>e:0){e=(f-e)/(m/l);break}else{e=e<f?0.0:1.0;break}if(m/l>0.0)if(e<=k?k-m/l<e:0){e=(k-e)/(m/l);break}else{e=e>k?0.0:1.0;break}else e=0.0}else e=0.0;else e=1.0;while(0);Z=(c[d+28>>2]|0)+(_<<2<<2)|0;g[Z>>2]=+g[Z>>2]-ca*e*m;g[i>>2]=-+g[b+1104>>2]/+g[d>>2]+ +g[i>>2];g[u>>2]=+g[b+1104>>2]/+g[d>>2]+ +g[u>>2]}if(w){h=(c[d+28>>2]|0)+(_<<2<<2)|0;g[h>>2]=+g[h>>2]+o*n*+g[d>>2];if(c[b+300>>2]&256|0)c[(c[d+32>>2]|0)+(_<<2<<2)>>2]=c[b+244>>2];do if(!r)if((x|0)==1){g[i>>2]=-3402823466385288598117041.0e14;e=0.0;break}else{g[i>>2]=0.0;e=3402823466385288598117041.0e14;break}else{g[i>>2]=-3402823466385288598117041.0e14;e=3402823466385288598117041.0e14}while(0);g[u>>2]=e;Y=1.0-+g[b+240>>2];f=+A(+Y);do if(!(Y!=Y|0.0!=0.0|Y==0.0)){e=ca*(+g[da+372>>2]*p+ +g[da+376>>2]*q+ +g[da+380>>2]*s-(+g[ea+372>>2]*p+ +g[ea+376>>2]*q+ +g[ea+380>>2]*s));if((x|0)==1){if(!(e<0.0))break;if(!(+g[h>>2]<-(f*e)))break;g[h>>2]=-(f*e);break}else{if(!(e>0.0))break;if(!(+g[h>>2]>-(f*e)))break;g[h>>2]=-(f*e);break}}while(0);g[h>>2]=+g[b+232>>2]*+g[h>>2];h=5}else h=5}if(!(a[b+297>>0]|0))if(!(a[b+1112>>0]|0))return;else{s=0.0;w=0;r=0;i=1}else{ca=+g[b+1088>>2];s=ca;w=ca>0.0?1:2;r=1;i=(a[b+1112>>0]|0)!=0}u=N(c[d+24>>2]|0,h)|0;h=c[d+12>>2]|0;c[h+(u<<2)>>2]=$;c[h+(u+1<<2)>>2]=aa;c[h+(u+2<<2)>>2]=ba;v=(c[j>>2]=$,+g[j>>2]);h=c[d+20>>2]|0;g[h+(u<<2)>>2]=-v;t=(c[j>>2]=aa,+g[j>>2]);g[h+(u+1<<2)>>2]=-t;q=(c[j>>2]=ba,+g[j>>2]);g[h+(u+2<<2)>>2]=-q;n=+g[b+192>>2];o=+g[b+196>>2];h=c[b+300>>2]|0;p=+g[((h&2048|0)==0?d+4|0:b+248|0)>>2];if(i&(r&n==o^1)){if(!(h&4)){k=n;l=o}else{c[(c[d+32>>2]|0)+(u<<2)>>2]=c[b+228>>2];k=+g[b+192>>2];l=+g[b+196>>2]}e=+g[b+1084>>2];m=+g[b+1116>>2];f=p*+g[d>>2];do if(!(k>l))if(!(k==l)){if(m/f<0.0)if(e>=k?k-m/f>e:0){e=(k-e)/(m/f);break}else{e=e<k?0.0:1.0;break}if(m/f>0.0)if(e<=l?l-m/f<e:0){e=(l-e)/(m/f);break}else{e=e>l?0.0:1.0;break}else e=0.0}else e=0.0;else e=1.0;while(0);g[(c[d+28>>2]|0)+(u<<2)>>2]=e*m;g[(c[d+36>>2]|0)+(u<<2)>>2]=-+g[b+1120>>2]/+g[d>>2];g[(c[d+40>>2]|0)+(u<<2)>>2]=+g[b+1120>>2]/+g[d>>2]}if(!r)return;i=(c[d+28>>2]|0)+(u<<2)|0;g[i>>2]=+g[i>>2]+s*p*+g[d>>2];if(h&1024|0)c[(c[d+32>>2]|0)+(u<<2)>>2]=c[b+260>>2];do if(!(n==o)){h=(c[d+36>>2]|0)+(u<<2)|0;if((w|0)==1){g[h>>2]=0.0;e=3402823466385288598117041.0e14;break}else{g[h>>2]=-3402823466385288598117041.0e14;e=0.0;break}}else{g[(c[d+36>>2]|0)+(u<<2)>>2]=-3402823466385288598117041.0e14;e=3402823466385288598117041.0e14}while(0);g[(c[d+40>>2]|0)+(u<<2)>>2]=e;ca=1.0-+g[b+256>>2];f=+A(+ca);do if(!(ca!=ca|0.0!=0.0|ca==0.0)){ea=c[b+28>>2]|0;d=c[b+32>>2]|0;e=+g[ea+388>>2]*v+ +g[ea+392>>2]*t+ +g[ea+396>>2]*q-(+g[d+388>>2]*v+ +g[d+392>>2]*t+ +g[d+396>>2]*q);if((w|0)==1){if(!(e<0.0))break;if(!(+g[i>>2]<-(f*e)))break;g[i>>2]=-(f*e);break}else{if(!(e>0.0))break;if(!(+g[i>>2]>-(f*e)))break;g[i>>2]=-(f*e);break}}while(0);g[i>>2]=+g[b+248>>2]*+g[i>>2];return}function pc(b,d,e){b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,I=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0.0,S=0.0,T=0.0,U=0.0,V=0.0,W=0.0,X=0.0,Y=0.0;W=+g[b+48>>2];i=+g[d>>2];X=+g[b+64>>2];y=+g[d+4>>2];Y=+g[b+80>>2];f=+g[d+8>>2];C=+g[b+52>>2];A=+g[b+68>>2];z=+g[b+84>>2];S=+g[b+56>>2];U=+g[b+72>>2];Q=+g[b+88>>2];F=+g[d+16>>2];E=+g[d+20>>2];D=+g[d+24>>2];T=+g[d+32>>2];x=+g[d+36>>2];s=+g[d+40>>2];k=+g[b+96>>2];h=+g[b+100>>2];V=+g[b+104>>2];R=+g[d+48>>2]+(i*k+y*h+f*V);w=F*k+E*h+D*V+ +g[d+52>>2];V=T*k+x*h+s*V+ +g[d+56>>2];g[b+1236>>2]=W*i+X*y+Y*f;g[b+1240>>2]=i*C+y*A+f*z;g[b+1244>>2]=i*S+y*U+f*Q;g[b+1248>>2]=0.0;g[b+1252>>2]=W*F+X*E+Y*D;g[b+1256>>2]=C*F+A*E+z*D;g[b+1260>>2]=S*F+U*E+Q*D;g[b+1264>>2]=0.0;g[b+1268>>2]=W*T+X*x+Y*s;g[b+1272>>2]=C*T+A*x+z*s;g[b+1276>>2]=S*T+U*x+Q*s;g[b+1280>>2]=0.0;g[b+1284>>2]=R;g[b+1288>>2]=w;g[b+1292>>2]=V;g[b+1296>>2]=0.0;V=+g[b+112>>2];w=+g[e>>2];R=+g[b+128>>2];s=+g[e+4>>2];Q=+g[b+144>>2];x=+g[e+8>>2];U=+g[b+116>>2];T=+g[b+132>>2];S=+g[b+148>>2];z=+g[b+120>>2];A=+g[b+136>>2];C=+g[b+152>>2];Y=+g[e+16>>2];X=+g[e+20>>2];W=+g[e+24>>2];D=+g[e+32>>2];E=+g[e+36>>2];F=+g[e+40>>2];f=+g[b+160>>2];y=+g[b+164>>2];i=+g[b+168>>2];h=+g[e+48>>2]+(w*f+s*y+x*i);k=Y*f+X*y+W*i+ +g[e+52>>2];i=D*f+E*y+F*i+ +g[e+56>>2];g[b+1300>>2]=V*w+R*s+Q*x;g[b+1304>>2]=w*U+s*T+x*S;g[b+1308>>2]=w*z+s*A+x*C;g[b+1312>>2]=0.0;g[b+1316>>2]=V*Y+R*X+Q*W;g[b+1320>>2]=U*Y+T*X+S*W;g[b+1324>>2]=z*Y+A*X+C*W;g[b+1328>>2]=0.0;g[b+1332>>2]=V*D+R*E+Q*F;g[b+1336>>2]=U*D+T*E+S*F;g[b+1340>>2]=z*D+A*E+C*F;g[b+1344>>2]=0.0;g[b+1348>>2]=h;g[b+1352>>2]=k;g[b+1356>>2]=i;g[b+1360>>2]=0.0;h=h-+g[b+1284>>2];k=k-+g[b+1288>>2];i=i-+g[b+1292>>2];S=+g[b+1256>>2];T=+g[b+1276>>2];U=+g[b+1260>>2];Q=+g[b+1272>>2];R=+g[b+1268>>2];V=+g[b+1252>>2];W=+g[b+1236>>2];X=+g[b+1240>>2];Y=+g[b+1244>>2];x=1.0/((S*T-U*Q)*W+X*(U*R-T*V)+(Q*V-S*R)*Y);s=(S*T-U*Q)*x;w=(U*R-T*V)*x;y=(Q*V-S*R)*x;f=i*(U*X-S*Y)*x+(h*s+k*(Q*Y-T*X)*x);j=i*(V*Y-U*W)*x+(h*w+k*(T*W-R*Y)*x);k=i*(S*W-V*X)*x+(h*y+k*(R*X-Q*W)*x);g[b+1428>>2]=f;g[b+1432>>2]=j;g[b+1436>>2]=k;g[b+1440>>2]=0.0;g[b+940>>2]=f;h=+g[b+680>>2];i=+g[b+696>>2];if(!(h>i)){g[b+908>>2]=f-h;if(h==i)d=3;else{g[b+924>>2]=f-i;d=4}}else{g[b+908>>2]=0.0;d=0}c[b+956>>2]=d;g[b+944>>2]=j;f=+g[b+684>>2];h=+g[b+700>>2];if(!(f>h)){g[b+912>>2]=j-f;if(f==h)d=3;else{g[b+928>>2]=j-h;d=4}}else{g[b+912>>2]=0.0;d=0}c[b+960>>2]=d;g[b+948>>2]=k;f=+g[b+688>>2];h=+g[b+704>>2];if(!(f>h)){g[b+916>>2]=k-f;if(f==h)d=3;else{g[b+932>>2]=k-h;d=4}}else{g[b+916>>2]=0.0;d=0}c[b+964>>2]=d;K=+g[b+1300>>2];L=+g[b+1316>>2];M=+g[b+1332>>2];u=M*(U*X-S*Y)*x+(K*s+L*(Q*Y-T*X)*x);N=+g[b+1304>>2];O=+g[b+1320>>2];P=+g[b+1336>>2];v=s*N+(Q*Y-T*X)*x*O+(U*X-S*Y)*x*P;G=+g[b+1308>>2];I=+g[b+1324>>2];k=s*G+(Q*Y-T*X)*x*I+(U*X-S*Y)*x*(z*D+A*E+C*F);s=M*(V*Y-U*W)*x+(K*w+L*(T*W-R*Y)*x);t=N*w+(T*W-R*Y)*x*O+(V*Y-U*W)*x*P;h=w*G+(T*W-R*Y)*x*I+(V*Y-U*W)*x*(z*D+A*E+C*F);i=M*(S*W-V*X)*x+(K*y+L*(R*X-Q*W)*x);j=N*y+(R*X-Q*W)*x*O+(S*W-V*X)*x*P;f=y*G+(R*X-Q*W)*x*I+(S*W-V*X)*x*(z*D+A*E+C*F);switch(c[b+1232>>2]|0){case 0:{do if(i<1.0)if(i>-1.0){g[b+1364>>2]=+J(+-j,+f);f=i<-1.0?-1.0:i;g[b+1368>>2]=+H(+(f>1.0?1.0:f));f=+J(+-s,+u);break}else{g[b+1364>>2]=-+J(+v,+t);g[b+1368>>2]=-1.5707963705062866;f=0.0;break}else{g[b+1364>>2]=+J(+v,+t);g[b+1368>>2]=1.5707963705062866;f=0.0}while(0);g[b+1372>>2]=f;g[b+1396>>2]=M*U-L*T;g[b+1400>>2]=K*T-M*Y;g[b+1404>>2]=L*Y-K*U;g[b+1408>>2]=0.0;g[b+1380>>2]=T*(K*T-M*Y)-U*(L*Y-K*U);g[b+1384>>2]=Y*(L*Y-K*U)-T*(M*U-L*T);g[b+1388>>2]=U*(M*U-L*T)-Y*(K*T-M*Y);g[b+1392>>2]=0.0;g[b+1412>>2]=L*(L*Y-K*U)-M*(K*T-M*Y);g[b+1416>>2]=M*(M*U-L*T)-K*(L*Y-K*U);g[b+1420>>2]=K*(K*T-M*Y)-L*(M*U-L*T);g[b+1424>>2]=0.0;d=b+1380|0;e=b+1384|0;l=b+1388|0;m=b+1396|0;n=b+1400|0;o=b+1404|0;p=b+1412|0;q=b+1416|0;r=b+1420|0;i=T*(K*T-M*Y)-U*(L*Y-K*U);j=Y*(L*Y-K*U)-T*(M*U-L*T);k=U*(M*U-L*T)-Y*(K*T-M*Y);s=M*U-L*T;t=K*T-M*Y;u=L*Y-K*U;v=L*(L*Y-K*U)-M*(K*T-M*Y);h=M*(M*U-L*T)-K*(L*Y-K*U);f=K*(K*T-M*Y)-L*(M*U-L*T);break}case 1:{do if(s<1.0)if(s>-1.0){g[b+1364>>2]=+J(+h,+t);g[b+1368>>2]=+J(+i,+u);f=-s<-1.0?-1.0:-s;f=+H(+(f>1.0?1.0:f));break}else{g[b+1364>>2]=-+J(+-k,+f);g[b+1368>>2]=0.0;f=1.5707963705062866;break}else{g[b+1364>>2]=+J(+-k,+f);g[b+1368>>2]=0.0;f=-1.5707963705062866}while(0);g[b+1372>>2]=f;g[b+1412>>2]=L*Q-M*S;g[b+1416>>2]=M*X-K*Q;g[b+1420>>2]=K*S-L*X;g[b+1424>>2]=0.0;g[b+1380>>2]=S*(K*S-L*X)-Q*(M*X-K*Q);g[b+1384>>2]=Q*(L*Q-M*S)-X*(K*S-L*X);g[b+1388>>2]=X*(M*X-K*Q)-S*(L*Q-M*S);g[b+1392>>2]=0.0;g[b+1396>>2]=M*(M*X-K*Q)-L*(K*S-L*X);g[b+1400>>2]=K*(K*S-L*X)-M*(L*Q-M*S);g[b+1404>>2]=L*(L*Q-M*S)-K*(M*X-K*Q);g[b+1408>>2]=0.0;d=b+1380|0;e=b+1384|0;l=b+1388|0;m=b+1396|0;n=b+1400|0;o=b+1404|0;p=b+1412|0;q=b+1416|0;r=b+1420|0;i=S*(K*S-L*X)-Q*(M*X-K*Q);j=Q*(L*Q-M*S)-X*(K*S-L*X);k=X*(M*X-K*Q)-S*(L*Q-M*S);s=M*(M*X-K*Q)-L*(K*S-L*X);t=K*(K*S-L*X)-M*(L*Q-M*S);u=L*(L*Q-M*S)-K*(M*X-K*Q);v=L*Q-M*S;h=M*X-K*Q;f=K*S-L*X;break}case 2:{do if(j<1.0)if(j>-1.0){X=-j<-1.0?-1.0:-j;g[b+1364>>2]=+H(+(X>1.0?1.0:X));g[b+1368>>2]=+J(+i,+f);f=+J(+v,+t);break}else{g[b+1364>>2]=1.5707963705062866;g[b+1368>>2]=-+J(+-s,+u);f=0.0;break}else{g[b+1364>>2]=-1.5707963705062866;g[b+1368>>2]=+J(+-s,+u);f=0.0}while(0);g[b+1372>>2]=f;g[b+1380>>2]=O*T-P*U;g[b+1384>>2]=P*Y-N*T;g[b+1388>>2]=N*U-O*Y;g[b+1392>>2]=0.0;g[b+1396>>2]=U*(N*U-O*Y)-T*(P*Y-N*T);g[b+1400>>2]=T*(O*T-P*U)-Y*(N*U-O*Y);g[b+1404>>2]=Y*(P*Y-N*T)-U*(O*T-P*U);g[b+1408>>2]=0.0;g[b+1412>>2]=P*(P*Y-N*T)-O*(N*U-O*Y);g[b+1416>>2]=N*(N*U-O*Y)-P*(O*T-P*U);g[b+1420>>2]=O*(O*T-P*U)-N*(P*Y-N*T);g[b+1424>>2]=0.0;d=b+1380|0;e=b+1384|0;l=b+1388|0;m=b+1396|0;n=b+1400|0;o=b+1404|0;p=b+1412|0;q=b+1416|0;r=b+1420|0;i=O*T-P*U;j=P*Y-N*T;k=N*U-O*Y;s=U*(N*U-O*Y)-T*(P*Y-N*T);t=T*(O*T-P*U)-Y*(N*U-O*Y);u=Y*(P*Y-N*T)-U*(O*T-P*U);v=P*(P*Y-N*T)-O*(N*U-O*Y);h=N*(N*U-O*Y)-P*(O*T-P*U);f=O*(O*T-P*U)-N*(P*Y-N*T);break}case 3:{do if(v<1.0)if(v>-1.0){g[b+1364>>2]=+J(+-j,+t);g[b+1368>>2]=+J(+-k,+u);f=v<-1.0?-1.0:v;f=+H(+(f>1.0?1.0:f));break}else{g[b+1364>>2]=0.0;g[b+1368>>2]=-+J(+h,+f);f=-1.5707963705062866;break}else{g[b+1364>>2]=0.0;g[b+1368>>2]=+J(+h,+f);f=1.5707963705062866}while(0);g[b+1372>>2]=f;g[b+1412>>2]=V*P-R*O;g[b+1416>>2]=R*N-W*P;g[b+1420>>2]=W*O-V*N;g[b+1424>>2]=0.0;g[b+1380>>2]=O*(W*O-V*N)-P*(R*N-W*P);g[b+1384>>2]=P*(V*P-R*O)-N*(W*O-V*N);g[b+1388>>2]=N*(R*N-W*P)-O*(V*P-R*O);g[b+1392>>2]=0.0;g[b+1396>>2]=R*(R*N-W*P)-V*(W*O-V*N);g[b+1400>>2]=W*(W*O-V*N)-R*(V*P-R*O);g[b+1404>>2]=V*(V*P-R*O)-W*(R*N-W*P);g[b+1408>>2]=0.0;d=b+1380|0;e=b+1384|0;l=b+1388|0;m=b+1396|0;n=b+1400|0;o=b+1404|0;p=b+1412|0;q=b+1416|0;r=b+1420|0;i=O*(W*O-V*N)-P*(R*N-W*P);j=P*(V*P-R*O)-N*(W*O-V*N);k=N*(R*N-W*P)-O*(V*P-R*O);s=R*(R*N-W*P)-V*(W*O-V*N);t=W*(W*O-V*N)-R*(V*P-R*O);u=V*(V*P-R*O)-W*(R*N-W*P);v=V*P-R*O;h=R*N-W*P;f=W*O-V*N;break}case 4:{do if(h<1.0)if(h>-1.0){Y=h<-1.0?-1.0:h;g[b+1364>>2]=+H(+(Y>1.0?1.0:Y));g[b+1368>>2]=+J(+-k,+f);f=+J(+-s,+t);break}else{g[b+1364>>2]=-1.5707963705062866;g[b+1368>>2]=0.0;f=-+J(+i,+u);break}else{g[b+1364>>2]=1.5707963705062866;g[b+1368>>2]=0.0;f=+J(+i,+u)}while(0);g[b+1372>>2]=f;Y=S*(z*D+A*E+C*F)-Q*I;f=Q*G-X*(z*D+A*E+C*F);g[b+1380>>2]=Y;g[b+1384>>2]=f;g[b+1388>>2]=X*I-S*G;g[b+1392>>2]=0.0;s=I*(X*I-S*G)-(z*D+A*E+C*F)*f;t=(z*D+A*E+C*F)*Y-G*(X*I-S*G);g[b+1396>>2]=s;g[b+1400>>2]=t;g[b+1404>>2]=G*f-I*Y;g[b+1408>>2]=0.0;g[b+1412>>2]=Q*f-S*(X*I-S*G);g[b+1416>>2]=X*(X*I-S*G)-Q*Y;g[b+1420>>2]=S*Y-X*f;g[b+1424>>2]=0.0;d=b+1380|0;e=b+1384|0;l=b+1388|0;m=b+1396|0;n=b+1400|0;o=b+1404|0;p=b+1412|0;q=b+1416|0;r=b+1420|0;i=Y;j=f;k=X*I-S*G;u=G*f-I*Y;v=Q*f-S*(X*I-S*G);h=X*(X*I-S*G)-Q*Y;f=S*Y-X*f;break}case 5:{do if(k<1.0)if(k>-1.0){g[b+1364>>2]=+J(+h,+f);f=-k<-1.0?-1.0:-k;g[b+1368>>2]=+H(+(f>1.0?1.0:f));f=+J(+v,+u);break}else{g[b+1364>>2]=0.0;g[b+1368>>2]=1.5707963705062866;f=-+J(+s,+i);break}else{g[b+1364>>2]=0.0;g[b+1368>>2]=-1.5707963705062866;f=+J(+-s,+-i)}while(0);g[b+1372>>2]=f;f=R*I-V*(z*D+A*E+C*F);Y=W*(z*D+A*E+C*F)-R*G;g[b+1396>>2]=f;g[b+1400>>2]=Y;g[b+1404>>2]=V*G-W*I;g[b+1408>>2]=0.0;i=(z*D+A*E+C*F)*Y-I*(V*G-W*I);j=G*(V*G-W*I)-(z*D+A*E+C*F)*f;g[b+1380>>2]=i;g[b+1384>>2]=j;g[b+1388>>2]=I*f-G*Y;g[b+1392>>2]=0.0;g[b+1412>>2]=V*(V*G-W*I)-R*Y;g[b+1416>>2]=R*f-W*(V*G-W*I);g[b+1420>>2]=W*Y-V*f;g[b+1424>>2]=0.0;d=b+1380|0;e=b+1384|0;l=b+1388|0;m=b+1396|0;n=b+1400|0;o=b+1404|0;p=b+1412|0;q=b+1416|0;r=b+1420|0;k=I*f-G*Y;s=f;t=Y;u=V*G-W*I;v=V*(V*G-W*I)-R*Y;h=R*f-W*(V*G-W*I);f=W*Y-V*f;break}default:{d=b+1380|0;e=b+1384|0;l=b+1388|0;m=b+1396|0;n=b+1400|0;o=b+1404|0;p=b+1412|0;q=b+1416|0;r=b+1420|0;i=+g[b+1380>>2];j=+g[b+1384>>2];k=+g[b+1388>>2];s=+g[b+1396>>2];t=+g[b+1400>>2];u=+g[b+1404>>2];v=+g[b+1412>>2];h=+g[b+1416>>2];f=+g[b+1420>>2]}}X=1.0/+B(+(i*i+j*j+k*k));g[d>>2]=i*X;g[e>>2]=j*X;g[l>>2]=k*X;X=1.0/+B(+(s*s+t*t+u*u));g[m>>2]=s*X;g[n>>2]=t*X;g[o>>2]=u*X;X=1.0/+B(+(v*v+h*h+f*f));g[p>>2]=v*X;g[q>>2]=h*X;g[r>>2]=f*X;X=+g[(c[b+28>>2]|0)+404>>2];Y=+g[(c[b+32>>2]|0)+404>>2];a[b+1452>>0]=(X<1.1920928955078125e-07|Y<1.1920928955078125e-07)&1;Y=X+Y>0.0?Y/(X+Y):.5;g[b+1444>>2]=Y;g[b+1448>>2]=1.0-Y;return}function qc(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0.0,K=0.0,L=0,M=0.0,N=0,O=0.0,P=0,Q=0.0,R=0,S=0.0,T=0;T=l;l=l+208|0;g[b+56>>2]=0.0;H=T+192+4|0;I=T+192+8|0;c[T+192>>2]=0;c[T+192+4>>2]=0;c[T+192+8>>2]=0;c[T+192+12>>2]=0;c[T+128>>2]=c[d>>2];c[T+128+4>>2]=c[d+4>>2];c[T+128+8>>2]=c[d+8>>2];c[T+128+12>>2]=c[d+12>>2];c[T+128+16>>2]=c[d+16>>2];c[T+128+16+4>>2]=c[d+16+4>>2];c[T+128+16+8>>2]=c[d+16+8>>2];c[T+128+16+12>>2]=c[d+16+12>>2];c[T+128+32>>2]=c[d+32>>2];c[T+128+32+4>>2]=c[d+32+4>>2];c[T+128+32+8>>2]=c[d+32+8>>2];c[T+128+32+12>>2]=c[d+32+12>>2];D=T+128+48|0;c[D>>2]=c[d+48>>2];c[D+4>>2]=c[d+48+4>>2];c[D+8>>2]=c[d+48+8>>2];c[D+12>>2]=c[d+48+12>>2];c[T+64>>2]=c[d+64>>2];c[T+64+4>>2]=c[d+64+4>>2];c[T+64+8>>2]=c[d+64+8>>2];c[T+64+12>>2]=c[d+64+12>>2];c[T+64+16>>2]=c[d+80>>2];c[T+64+16+4>>2]=c[d+80+4>>2];c[T+64+16+8>>2]=c[d+80+8>>2];c[T+64+16+12>>2]=c[d+80+12>>2];c[T+64+32>>2]=c[d+96>>2];c[T+64+32+4>>2]=c[d+96+4>>2];c[T+64+32+8>>2]=c[d+96+8>>2];c[T+64+32+12>>2]=c[d+96+12>>2];E=T+64+48|0;c[E>>2]=c[d+112>>2];c[E+4>>2]=c[d+112+4>>2];c[E+8>>2]=c[d+112+8>>2];c[E+12>>2]=c[d+112+12>>2];J=+g[D>>2];K=+g[E>>2];L=T+128+52|0;M=+g[L>>2];N=T+64+52|0;O=+g[N>>2];P=T+128+56|0;Q=+g[P>>2];R=T+64+56|0;S=+g[R>>2];g[D>>2]=J-(J+K)*.5;g[L>>2]=M-(M+O)*.5;g[P>>2]=Q-(Q+S)*.5;g[E>>2]=K-(J+K)*.5;g[N>>2]=O-(M+O)*.5;g[R>>2]=S-(Q+S)*.5;if(((c[(c[b+28>>2]|0)+4>>2]|0)+-17|0)>>>0<2)D=((c[(c[b+32>>2]|0)+4>>2]|0)+-17|0)>>>0<2;else D=0;v=+g[b+44>>2];u=+g[b+48>>2];c[6477]=(c[6477]|0)+1;E=a[b+52>>0]|0;c[b+64>>2]=0;c[b+4>>2]=0;c[b+8>>2]=1065353216;c[b+12>>2]=0;g[b+16>>2]=0.0;c[b+68>>2]=0;c[b+60>>2]=-1;q=c[b+24>>2]|0;a[q+312>>0]=0;c[q>>2]=0;a[q+356>>0]=1;c[q+292>>2]=1566444395;c[q+296>>2]=1566444395;c[q+300>>2]=1566444395;g[q+304>>2]=0.0;c[q+336>>2]=0;c[q+336+4>>2]=0;c[q+336+8>>2]=0;c[q+336+12>>2]=0;a[q+336+16>>0]=0;a[q+332>>0]=a[q+332>>0]&-16;q=0;p=999999984306749440.0;do{m=+g[b+4>>2];k=+g[b+8>>2];j=+g[b+12>>2];s=+g[d+4>>2]*-m+ +g[d+20>>2]*-k+ +g[d+36>>2]*-j;t=+g[d+8>>2]*-m+ +g[d+24>>2]*-k+ +g[d+40>>2]*-j;g[T+48>>2]=+g[d>>2]*-m+ +g[d+16>>2]*-k+ +g[d+32>>2]*-j;g[T+48+4>>2]=s;g[T+48+8>>2]=t;g[T+48+12>>2]=0.0;t=m*+g[d+68>>2]+k*+g[d+84>>2]+j*+g[d+100>>2];s=m*+g[d+72>>2]+k*+g[d+88>>2]+j*+g[d+104>>2];g[T+32>>2]=m*+g[d+64>>2]+k*+g[d+80>>2]+j*+g[d+96>>2];g[T+32+4>>2]=t;g[T+32+8>>2]=s;g[T+32+12>>2]=0.0;qd(T+16|0,c[b+28>>2]|0,T+48|0);qd(T,c[b+32>>2]|0,T+32|0);s=+g[T+16>>2];t=+g[T+16+4>>2];j=+g[T+16+8>>2];k=s*+g[T+128>>2]+t*+g[T+128+4>>2]+j*+g[T+128+8>>2]+ +g[T+128+48>>2];m=s*+g[T+128+16>>2]+t*+g[T+128+20>>2]+j*+g[T+128+24>>2]+ +g[L>>2];j=s*+g[T+128+32>>2]+t*+g[T+128+36>>2]+j*+g[T+128+40>>2]+ +g[P>>2];t=+g[T>>2];s=+g[T+4>>2];r=+g[T+8>>2];n=t*+g[T+64>>2]+s*+g[T+64+4>>2]+r*+g[T+64+8>>2]+ +g[T+64+48>>2];o=t*+g[T+64+16>>2]+s*+g[T+64+20>>2]+r*+g[T+64+24>>2]+ +g[N>>2];r=t*+g[T+64+32>>2]+s*+g[T+64+36>>2]+r*+g[T+64+40>>2]+ +g[R>>2];s=D?0.0:r;t=D?0.0:j;r=D?0.0:j-r;j=(k-n)*+g[b+4>>2]+(m-o)*+g[b+8>>2]+r*+g[b+12>>2];if(j>0.0?j*j>p*+g[d+128>>2]:0){c[b+68>>2]=10;q=1;h=0}else G=7;do if((G|0)==7){G=0;A=c[b+24>>2]|0;C=c[A>>2]|0;a:do if((C|0)>0){i=+g[A+308>>2];h=0;while(1){x=k-n-+g[A+4+(h<<4)>>2];y=m-o-+g[A+4+(h<<4)+4>>2];z=r-+g[A+4+(h<<4)+8>>2];h=h+1|0;if(x*x+y*y+z*z<=i){h=1;break a}if((h|0)>=(C|0)){h=0;break}}}else h=0;while(0);if((+g[A+304>>2]==0.0?r==+g[A+300>>2]:0)?m-o==+g[A+296>>2]:0){if(k-n==+g[A+292>>2]|h)G=16}else G=15;if((G|0)==15?(G=0,h):0)G=16;if((G|0)==16){G=0;c[b+68>>2]=1;q=1;h=0;break}i=p-j;if(i<=p*9.999999974752427e-07){c[b+68>>2]=!(i<=0.0)?11:2;q=1;h=0;break}g[A+292>>2]=k-n;g[A+296>>2]=m-o;g[A+300>>2]=r;g[A+304>>2]=0.0;a[A+356>>0]=1;g[A+4+(C<<4)>>2]=k-n;g[A+4+(C<<4)+4>>2]=m-o;g[A+4+(C<<4)+8>>2]=r;g[A+4+(C<<4)+12>>2]=0.0;h=c[A>>2]|0;g[A+84+(h<<4)>>2]=k;g[A+84+(h<<4)+4>>2]=m;g[A+84+(h<<4)+8>>2]=t;g[A+84+(h<<4)+12>>2]=0.0;h=c[A>>2]|0;g[A+164+(h<<4)>>2]=n;g[A+164+(h<<4)+4>>2]=o;g[A+164+(h<<4)+8>>2]=s;g[A+164+(h<<4)+12>>2]=0.0;c[A>>2]=(c[A>>2]|0)+1;h=c[b+24>>2]|0;C=ic(h)|0;i=+g[h+276>>2];j=+g[h+280>>2];k=+g[h+284>>2];h=c[h+288>>2]|0;if(!C){c[b+68>>2]=3;q=1;h=0;break}if(i*i+j*j+k*k<9.999999974752427e-07){g[b+4>>2]=i;g[b+8>>2]=j;g[b+12>>2]=k;c[b+16>>2]=h;c[b+68>>2]=6;q=1;h=0;break}if(p-(i*i+j*j+k*k)<=p*1.1920928955078125e-07){c[b+68>>2]=12;p=i*i+j*j+k*k;q=1;h=0;break}g[b+4>>2]=i;g[b+8>>2]=j;g[b+12>>2]=k;c[b+16>>2]=h;C=c[b+64>>2]|0;c[b+64>>2]=C+1;if((C|0)<=1e3)if((c[c[b+24>>2]>>2]|0)==4){c[b+68>>2]=13;p=i*i+j*j+k*k;h=0}else{p=i*i+j*j+k*k;h=1}else{p=i*i+j*j+k*k;h=0}}while(0)}while(h);t=E<<24>>24==0?u:0.0;s=(E<<24>>24==0?v:0.0)+t;if(q){E=c[b+24>>2]|0;ic(E)|0;o=+g[E+260>>2];n=+g[E+264>>2];m=+g[E+268>>2];c[T+192>>2]=c[b+4>>2];c[T+192+4>>2]=c[b+4+4>>2];c[T+192+8>>2]=c[b+4+8>>2];c[T+192+12>>2]=c[b+4+12>>2];i=+g[b+4>>2];j=+g[b+8>>2];k=+g[b+12>>2];if(i*i+j*j+k*k<9.999999974752427e-07)c[b+68>>2]=5;if(i*i+j*j+k*k>1.4210854715202004e-14){y=1.0/+B(+(i*i+j*j+k*k));g[T+192>>2]=y*+g[T+192>>2];g[H>>2]=y*+g[H>>2];g[I>>2]=y*+g[I>>2];z=t/+B(+p);p=1.0/y-s;q=1;h=1;o=z*i+o;n=z*j+n;m=z*k+m}else{p=0.0;q=0;h=2}c[b+60>>2]=h}else{p=0.0;q=0;o=0.0;n=0.0;m=0.0}if(((c[b+72>>2]|0)!=0?(c[b+20>>2]|0)!=0:0)?(c[b+68>>2]|0)!=0:0)h=s+p<1.0000000474974513e-03;else h=0;A=q^1;do if(h|A?(F=c[b+20>>2]|0,(F|0)!=0):0){c[6476]=(c[6476]|0)+1;c[b+4>>2]=0;c[b+4+4>>2]=0;c[b+4+8>>2]=0;c[b+4+12>>2]=0;if(!(Bb[c[(c[F>>2]|0)+8>>2]&3](F,c[b+24>>2]|0,c[b+28>>2]|0,c[b+32>>2]|0,T+128|0,T+64|0,b+4|0,T+48|0,T+32|0,f)|0)){j=+g[b+4>>2];k=+g[b+8>>2];r=+g[b+12>>2];if(!(j*j+k*k+r*r>0.0)){if(q)break;l=T;return}y=+g[T+48>>2]-+g[T+32>>2];z=+g[T+48+4>>2]-+g[T+32+4>>2];i=+g[T+48+8>>2]-+g[T+32+8>>2];i=+B(+(y*y+z*z+i*i))-s;if(i<p|A){o=t*j+ +g[T+32>>2];n=t*k+ +g[T+32+4>>2];m=t*r+ +g[T+32+8>>2];c[T+192>>2]=c[b+4>>2];c[T+192+4>>2]=c[b+4+4>>2];c[T+192+8>>2]=c[b+4+8>>2];c[T+192+12>>2]=c[b+4+12>>2];x=+g[T+192>>2];y=+g[H>>2];z=+g[I>>2];p=1.0/+B(+(x*x+y*y+z*z));g[T+192>>2]=x*p;g[H>>2]=y*p;g[I>>2]=z*p;c[b+60>>2]=6;p=i;break}c[b+60>>2]=5;if(q)break;l=T;return}j=+g[T+32>>2];k=+g[T+48>>2];r=+g[T+32+4>>2];s=+g[T+48+4>>2];t=+g[T+32+8>>2];u=+g[T+48+8>>2];if(!((j-k)*(j-k)+(r-s)*(r-s)+(t-u)*(t-u)<=1.4210854715202004e-14)){i=(j-k)*(j-k)+(r-s)*(r-s)+(t-u)*(t-u);w=j-k;x=t-u;y=0.0;z=r-s}else{w=+g[b+4>>2];z=+g[b+8>>2];x=+g[b+12>>2];i=w*w+z*z+x*x;y=+g[b+16>>2]}if(!(i>1.4210854715202004e-14)){c[b+60>>2]=9;if(q)break;l=T;return}v=1.0/+B(+i);i=-+B(+((k-j)*(k-j)+(s-r)*(s-r)+(u-t)*(u-t)));c[b+60>>2]=3;if(p>i|A){o=+g[T+32>>2];n=+g[T+32+4>>2];m=+g[T+32+8>>2];g[T+192>>2]=w*v;g[H>>2]=z*v;g[I>>2]=x*v;g[T+192+12>>2]=y;p=i;break}c[b+60>>2]=8;if(!q){l=T;return}}else G=54;while(0);if((G|0)==54)if(!q){l=T;return}if(!(p<0.0)?!(p*p<+g[d+128>>2]):0){l=T;return}c[b+4>>2]=c[T+192>>2];c[b+4+4>>2]=c[T+192+4>>2];c[b+4+8>>2]=c[T+192+8>>2];c[b+4+12>>2]=c[T+192+12>>2];g[b+56>>2]=p;u=+g[T+192>>2];v=+g[H>>2];z=+g[I>>2];j=u*+g[d+4>>2]+v*+g[d+20>>2]+z*+g[d+36>>2];i=u*+g[d+8>>2]+v*+g[d+24>>2]+z*+g[d+40>>2];g[T+48>>2]=+g[d>>2]*u+ +g[d+16>>2]*v+ +g[d+32>>2]*z;g[T+48+4>>2]=j;g[T+48+8>>2]=i;g[T+48+12>>2]=0.0;i=+g[d+68>>2]*-u+ +g[d+84>>2]*-v+ +g[d+100>>2]*-z;j=+g[d+72>>2]*-u+ +g[d+88>>2]*-v+ +g[d+104>>2]*-z;g[T+32>>2]=+g[d+64>>2]*-u+ +g[d+80>>2]*-v+ +g[d+96>>2]*-z;g[T+32+4>>2]=i;g[T+32+8>>2]=j;g[T+32+12>>2]=0.0;qd(T+16|0,c[b+28>>2]|0,T+48|0);qd(T,c[b+32>>2]|0,T+32|0);j=+g[T+16>>2];i=+g[T+16+4>>2];z=+g[T+16+8>>2];v=+g[T>>2];u=+g[T+4>>2];t=+g[T+8>>2];y=+g[T+192>>2];x=+g[H>>2];w=+g[I>>2];t=(j*+g[T+128>>2]+i*+g[T+128+4>>2]+z*+g[T+128+8>>2]+ +g[T+128+48>>2]-(v*+g[T+64>>2]+u*+g[T+64+4>>2]+t*+g[T+64+8>>2]+ +g[T+64+48>>2]))*-y+(j*+g[T+128+16>>2]+i*+g[T+128+20>>2]+z*+g[T+128+24>>2]+ +g[L>>2]-(v*+g[T+64+16>>2]+u*+g[T+64+20>>2]+t*+g[T+64+24>>2]+ +g[N>>2]))*-x+(j*+g[T+128+32>>2]+i*+g[T+128+36>>2]+z*+g[T+128+40>>2]+ +g[P>>2]-(v*+g[T+64+32>>2]+u*+g[T+64+36>>2]+t*+g[T+64+40>>2]+ +g[R>>2]))*-w;u=+g[d+4>>2]*-y+ +g[d+20>>2]*-x+ +g[d+36>>2]*-w;v=+g[d+8>>2]*-y+ +g[d+24>>2]*-x+ +g[d+40>>2]*-w;g[T+48>>2]=+g[d>>2]*-y+ +g[d+16>>2]*-x+ +g[d+32>>2]*-w;g[T+48+4>>2]=u;g[T+48+8>>2]=v;g[T+48+12>>2]=0.0;v=y*+g[d+68>>2]+x*+g[d+84>>2]+w*+g[d+100>>2];u=y*+g[d+72>>2]+x*+g[d+88>>2]+w*+g[d+104>>2];g[T+32>>2]=y*+g[d+64>>2]+x*+g[d+80>>2]+w*+g[d+96>>2];g[T+32+4>>2]=v;g[T+32+8>>2]=u;g[T+32+12>>2]=0.0;qd(T+16|0,c[b+28>>2]|0,T+48|0);qd(T,c[b+32>>2]|0,T+32|0);u=+g[T+16>>2];v=+g[T+16+4>>2];w=+g[T+16+8>>2];x=+g[T>>2];y=+g[T+4>>2];z=+g[T+8>>2];i=+g[T+192>>2];j=+g[H>>2];k=+g[I>>2];if(t>(u*+g[T+128>>2]+v*+g[T+128+4>>2]+w*+g[T+128+8>>2]+ +g[T+128+48>>2]-(x*+g[T+64>>2]+y*+g[T+64+4>>2]+z*+g[T+64+8>>2]+ +g[T+64+48>>2]))*i+(u*+g[T+128+16>>2]+v*+g[T+128+20>>2]+w*+g[T+128+24>>2]+ +g[L>>2]-(x*+g[T+64+16>>2]+y*+g[T+64+20>>2]+z*+g[T+64+24>>2]+ +g[N>>2]))*j+(u*+g[T+128+32>>2]+v*+g[T+128+36>>2]+w*+g[T+128+40>>2]+ +g[P>>2]-(x*+g[T+64+32>>2]+y*+g[T+64+36>>2]+z*+g[T+64+40>>2]+ +g[R>>2]))*k){c[b+60>>2]=10;g[T+192>>2]=-i;g[H>>2]=-j;g[I>>2]=-k}b=c[(c[e>>2]|0)+16>>2]|0;g[T+48>>2]=(J+K)*.5+o;g[T+48+4>>2]=(M+O)*.5+n;g[T+48+8>>2]=(Q+S)*.5+m;g[T+48+12>>2]=0.0;Nb[b&15](e,T+192|0,T+48|0,p);l=T;return}function rc(d,f,h){d=d|0;f=f|0;h=h|0;var i=0,j=0,k=0.0,m=0.0,n=0,o=0.0,p=0.0,q=0,r=0,s=0,t=0.0,u=0.0,v=0,w=0,x=0.0,y=0.0,z=0.0,A=0,B=0,C=0.0,D=0.0,E=0.0,F=0,G=0,H=0,I=0,J=0,K=0,L=0.0,M=0.0,N=0.0;K=l;l=l+96|0;H=c[d+56>>2]|0;if((h-f|0)==1){if(!(a[d+60>>0]|0)){q=(c[d+96>>2]|0)+(H<<6)|0;r=(c[d+76>>2]|0)+(f<<6)|0;s=q+64|0;do{c[q>>2]=c[r>>2];q=q+4|0;r=r+4|0}while((q|0)<(s|0))}else{I=(c[d+116>>2]|0)+(f<<4)|0;J=(c[d+136>>2]|0)+(H<<4)|0;c[J>>2]=c[I>>2];c[J+4>>2]=c[I+4>>2];c[J+8>>2]=c[I+8>>2];c[J+12>>2]=c[I+12>>2]}c[d+56>>2]=(c[d+56>>2]|0)+1;l=K;return}if((h|0)>(f|0)){n=(a[d+60>>0]|0)==0;if(n){j=c[d+76>>2]|0;i=f;k=0.0;m=0.0;o=0.0;do{k=k+(+g[j+(i<<6)+16>>2]+ +g[j+(i<<6)>>2])*.5;m=m+(+g[j+(i<<6)+20>>2]+ +g[j+(i<<6)+4>>2])*.5;o=o+(+g[j+(i<<6)+24>>2]+ +g[j+(i<<6)+8>>2])*.5;i=i+1|0}while((i|0)!=(h|0))}else{j=c[d+116>>2]|0;p=+g[d+36>>2];t=+g[d+40>>2];u=+g[d+44>>2];x=+g[d+4>>2];y=+g[d+8>>2];z=+g[d+12>>2];i=f;k=0.0;m=0.0;o=0.0;do{k=k+(+(e[j+(i<<4)+6>>1]|0)/p+x+(+(e[j+(i<<4)>>1]|0)/p+x))*.5;m=m+(+(e[j+(i<<4)+8>>1]|0)/t+y+(+(e[j+(i<<4)+2>>1]|0)/t+y))*.5;o=o+(+(e[j+(i<<4)+10>>1]|0)/u+z+(+(e[j+(i<<4)+4>>1]|0)/u+z))*.5;i=i+1|0}while((i|0)!=(h|0))}C=1.0/+(h-f|0);E=C*k;D=C*m;C=C*o;if(n){j=c[d+76>>2]|0;i=f;k=0.0;o=0.0;p=0.0;do{x=(+g[j+(i<<6)+16>>2]+ +g[j+(i<<6)>>2])*.5-E;y=(+g[j+(i<<6)+20>>2]+ +g[j+(i<<6)+4>>2])*.5-D;z=(+g[j+(i<<6)+24>>2]+ +g[j+(i<<6)+8>>2])*.5-C;k=k+x*x;o=o+y*y;p=p+z*z;i=i+1|0}while((i|0)!=(h|0));m=+(h-f|0)}else{j=c[d+116>>2]|0;m=+g[d+36>>2];t=+g[d+40>>2];u=+g[d+44>>2];x=+g[d+4>>2];y=+g[d+8>>2];z=+g[d+12>>2];i=f;k=0.0;o=0.0;p=0.0;do{N=(+(e[j+(i<<4)+6>>1]|0)/m+x+(+(e[j+(i<<4)>>1]|0)/m+x))*.5-E;M=(+(e[j+(i<<4)+8>>1]|0)/t+y+(+(e[j+(i<<4)+2>>1]|0)/t+y))*.5-D;L=(+(e[j+(i<<4)+10>>1]|0)/u+z+(+(e[j+(i<<4)+4>>1]|0)/u+z))*.5-C;k=k+N*N;o=o+M*M;p=p+L*L;i=i+1|0}while((i|0)!=(h|0));m=+(h-f|0)}}else{p=0.0;o=0.0;k=0.0;m=+(h-f|0)}N=1.0/(m+-1.0);M=N*k;L=N*o;N=N*p;w=M<L?(L<N?2:1):M<N?2:0;c[K+16>>2]=0;c[K+16+4>>2]=0;c[K+16+8>>2]=0;c[K+16+12>>2]=0;if((h|0)>(f|0)){if(!(a[d+60>>0]|0)){j=c[d+76>>2]|0;i=f;o=0.0;m=0.0;k=0.0;do{o=(+g[j+(i<<6)+16>>2]+ +g[j+(i<<6)>>2])*.5+o;m=(+g[j+(i<<6)+20>>2]+ +g[j+(i<<6)+4>>2])*.5+m;k=(+g[j+(i<<6)+24>>2]+ +g[j+(i<<6)+8>>2])*.5+k;i=i+1|0}while((i|0)!=(h|0))}else{j=c[d+116>>2]|0;p=+g[d+36>>2];t=+g[d+40>>2];u=+g[d+44>>2];x=+g[d+4>>2];y=+g[d+8>>2];z=+g[d+12>>2];i=f;o=0.0;m=0.0;k=0.0;do{o=(+(e[j+(i<<4)+6>>1]|0)/p+x+(+(e[j+(i<<4)>>1]|0)/p+x))*.5+o;m=(+(e[j+(i<<4)+8>>1]|0)/t+y+(+(e[j+(i<<4)+2>>1]|0)/t+y))*.5+m;k=(+(e[j+(i<<4)+10>>1]|0)/u+z+(+(e[j+(i<<4)+4>>1]|0)/u+z))*.5+k;i=i+1|0}while((i|0)!=(h|0))}g[K+16>>2]=o;g[K+16+4>>2]=m;g[K+16+8>>2]=k;i=K+16|0}else{i=K+16|0;o=0.0;m=0.0;k=0.0}g[i>>2]=1.0/+(h-f|0)*o;g[K+16+4>>2]=1.0/+(h-f|0)*m;g[K+16+8>>2]=1.0/+(h-f|0)*k;x=+g[K+16+(w<<2)>>2];if((h|0)>(f|0)){i=f;v=f;do{j=(a[d+60>>0]|0)==0;if(j){G=c[d+76>>2]|0;k=+g[G+(v<<6)>>2];m=+g[G+(v<<6)+16>>2];o=+g[G+(v<<6)+4>>2];p=+g[G+(v<<6)+20>>2];t=+g[G+(v<<6)+8>>2];u=+g[G+(v<<6)+24>>2]}else{G=c[d+116>>2]|0;o=+g[d+36>>2];t=+g[d+40>>2];N=+g[d+44>>2];m=+g[d+4>>2];p=+g[d+8>>2];u=+g[d+12>>2];k=+(e[G+(v<<4)>>1]|0)/o+m;m=+(e[G+(v<<4)+6>>1]|0)/o+m;o=+(e[G+(v<<4)+2>>1]|0)/t+p;p=+(e[G+(v<<4)+8>>1]|0)/t+p;t=+(e[G+(v<<4)+4>>1]|0)/N+u;u=+(e[G+(v<<4)+10>>1]|0)/N+u}g[K>>2]=(m+k)*.5;g[K+4>>2]=(p+o)*.5;g[K+8>>2]=(u+t)*.5;g[K+12>>2]=0.0;if(+g[K+(w<<2)>>2]>x){if(j){j=c[d+76>>2]|0;n=j+(v<<6)|0;q=K+32|0;r=n;s=q+64|0;do{c[q>>2]=c[r>>2];q=q+4|0;r=r+4|0}while((q|0)<(s|0));q=n;r=j+(i<<6)|0;s=q+64|0;do{c[q>>2]=c[r>>2];q=q+4|0;r=r+4|0}while((q|0)<(s|0));q=(c[d+76>>2]|0)+(i<<6)|0;r=K+32|0;s=q+64|0;do{c[q>>2]=c[r>>2];q=q+4|0;r=r+4|0}while((q|0)<(s|0))}else{F=c[d+116>>2]|0;G=F+(v<<4)|0;c[K+32>>2]=c[G>>2];c[K+32+4>>2]=c[G+4>>2];c[K+32+8>>2]=c[G+8>>2];c[K+32+12>>2]=c[G+12>>2];F=F+(i<<4)|0;c[G>>2]=c[F>>2];c[G+4>>2]=c[F+4>>2];c[G+8>>2]=c[F+8>>2];c[G+12>>2]=c[F+12>>2];G=(c[d+116>>2]|0)+(i<<4)|0;c[G>>2]=c[K+32>>2];c[G+4>>2]=c[K+32+4>>2];c[G+8>>2]=c[K+32+8>>2];c[G+12>>2]=c[K+32+12>>2]}i=i+1|0}v=v+1|0}while((v|0)!=(h|0))}else i=f;if(!((i|0)>(((h-f|0)/3|0)+f|0)?(i|0)<(h+-1-((h-f|0)/3|0)|0):0))i=(h-f>>1)+f|0;G=c[d+56>>2]|0;if(!(a[d+60>>0]|0)){F=(c[d+96>>2]|0)+(G<<6)|0;c[F>>2]=c[d+20>>2];c[F+4>>2]=c[d+20+4>>2];c[F+8>>2]=c[d+20+8>>2];c[F+12>>2]=c[d+20+12>>2]}else{F=c[d+136>>2]|0;M=(+g[d+24>>2]-+g[d+8>>2])*+g[d+40>>2];N=(+g[d+28>>2]-+g[d+12>>2])*+g[d+44>>2];b[F+(G<<4)>>1]=~~((+g[d+20>>2]-+g[d+4>>2])*+g[d+36>>2])&65535&-2;b[F+(G<<4)+2>>1]=~~M&65535&-2;b[F+(G<<4)+4>>1]=~~N&65535&-2}j=c[d+56>>2]|0;if(!(a[d+60>>0]|0)){F=(c[d+96>>2]|0)+(j<<6)+16|0;c[F>>2]=c[d+4>>2];c[F+4>>2]=c[d+4+4>>2];c[F+8>>2]=c[d+4+8>>2];c[F+12>>2]=c[d+4+12>>2]}else{F=c[d+136>>2]|0;L=+g[d+4>>2];M=+g[d+8>>2];N=+g[d+12>>2];M=(M-M)*+g[d+40>>2];N=(N-N)*+g[d+44>>2];b[F+(j<<4)+6>>1]=~~((L-L)*+g[d+36>>2]+1.0)&65535|1;b[F+(j<<4)+8>>1]=~~(M+1.0)&65535|1;b[F+(j<<4)+10>>1]=~~(N+1.0)&65535|1}F=c[d+56>>2]|0;if((h|0)>(f|0)){B=a[d+60>>0]|0;A=f;do{if(!(B<<24>>24)){j=c[d+76>>2]|0;m=+g[j+(A<<6)>>2];u=+g[j+(A<<6)+4>>2];y=+g[j+(A<<6)+8>>2];p=+g[j+(A<<6)+12>>2];k=+g[j+(A<<6)+16>>2];x=+g[j+(A<<6)+20>>2];o=+g[j+(A<<6)+24>>2];t=+g[j+(A<<6)+28>>2];j=c[d+96>>2]|0;if(m<+g[j+(F<<6)>>2])g[j+(F<<6)>>2]=m;if(u<+g[j+(F<<6)+4>>2])g[j+(F<<6)+4>>2]=u;if(y<+g[j+(F<<6)+8>>2])g[j+(F<<6)+8>>2]=y;if(p<+g[j+(F<<6)+12>>2])g[j+(F<<6)+12>>2]=p;if(+g[j+(F<<6)+16>>2]<k)g[j+(F<<6)+16>>2]=k;if(+g[j+(F<<6)+20>>2]<x)g[j+(F<<6)+20>>2]=x;if(+g[j+(F<<6)+24>>2]<o)g[j+(F<<6)+24>>2]=o;if(+g[j+(F<<6)+28>>2]<t)g[j+(F<<6)+28>>2]=t}else{v=c[d+116>>2]|0;t=+g[d+36>>2];z=+g[d+40>>2];L=+g[d+44>>2];u=+g[d+4>>2];C=+g[d+8>>2];M=+g[d+12>>2];x=+g[d+4>>2];D=+g[d+8>>2];N=+g[d+12>>2];p=+g[d+36>>2];y=+g[d+40>>2];E=+g[d+44>>2];j=~~((+(e[v+(A<<4)>>1]|0)/t+u-x)*p)&65535&-2;n=~~((+(e[v+(A<<4)+2>>1]|0)/z+C-D)*y)&65535&-2;q=~~((+(e[v+(A<<4)+4>>1]|0)/L+M-N)*E)&65535&-2;r=~~(p*(+(e[v+(A<<4)+6>>1]|0)/t+u-x)+1.0)&65535|1;s=~~(y*(+(e[v+(A<<4)+8>>1]|0)/z+C-D)+1.0)&65535|1;v=~~(E*(+(e[v+(A<<4)+10>>1]|0)/L+M-N)+1.0)&65535|1;w=c[d+136>>2]|0;if((e[w+(F<<4)>>1]|0)>(j&65535))b[w+(F<<4)>>1]=j;if((e[w+(F<<4)+6>>1]|0)<(r&65535))b[w+(F<<4)+6>>1]=r;if((e[w+(F<<4)+2>>1]|0)>(n&65535))b[w+(F<<4)+2>>1]=n;if((e[w+(F<<4)+8>>1]|0)<(s&65535))b[w+(F<<4)+8>>1]=s;if((e[w+(F<<4)+4>>1]|0)>(q&65535))b[w+(F<<4)+4>>1]=q;if((e[w+(F<<4)+10>>1]|0)<(v&65535))b[w+(F<<4)+10>>1]=v}A=A+1|0}while((A|0)!=(h|0))}c[d+56>>2]=F+1;rc(d,f,i);A=c[d+56>>2]|0;rc(d,i,h);w=(c[d+56>>2]|0)-H|0;i=a[d+60>>0]|0;if(i<<24>>24!=0&(w|0)>128){s=c[d+136>>2]|0;r=c[s+(F+1<<4)+12>>2]|0;r=(r|0)>-1?1:0-r|0;v=c[s+(A<<4)+12>>2]|0;v=(v|0)>-1?1:0-v|0;if((r|0)<129){q=c[d+152>>2]|0;if((q|0)==(c[d+156>>2]|0)?(I=(q|0)==0?1:q<<1,(q|0)<(I|0)):0){if(!I){i=0;n=q}else{c[6485]=(c[6485]|0)+1;i=ec(I<<5|19)|0;if(!i)i=0;else{c[(i+4+15&-16)+-4>>2]=i;i=i+4+15&-16}n=c[d+152>>2]|0}if((n|0)>0){j=0;do{H=i+(j<<5)|0;h=(c[d+160>>2]|0)+(j<<5)|0;c[H>>2]=c[h>>2];c[H+4>>2]=c[h+4>>2];c[H+8>>2]=c[h+8>>2];c[H+12>>2]=c[h+12>>2];c[H+16>>2]=c[h+16>>2];c[H+20>>2]=c[h+20>>2];c[H+24>>2]=c[h+24>>2];c[H+28>>2]=c[h+28>>2];j=j+1|0}while((j|0)!=(n|0))}j=c[d+160>>2]|0;if(j|0){if(a[d+164>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}c[d+160>>2]=0}a[d+164>>0]=1;c[d+160>>2]=i;c[d+156>>2]=I;i=c[d+152>>2]|0}else i=q;c[d+152>>2]=i+1;I=(c[d+160>>2]|0)+(q<<5)|0;c[I>>2]=c[K+32>>2];c[I+4>>2]=c[K+32+4>>2];c[I+8>>2]=c[K+32+8>>2];c[I+12>>2]=c[K+32+12>>2];c[I+16>>2]=c[K+32+16>>2];c[I+20>>2]=c[K+32+20>>2];c[I+24>>2]=c[K+32+24>>2];c[I+28>>2]=c[K+32+28>>2];I=c[d+160>>2]|0;b[I+(q<<5)>>1]=b[s+(F+1<<4)>>1]|0;b[I+(q<<5)+2>>1]=b[s+(F+1<<4)+2>>1]|0;b[I+(q<<5)+4>>1]=b[s+(F+1<<4)+4>>1]|0;b[I+(q<<5)+6>>1]=b[s+(F+1<<4)+6>>1]|0;b[I+(q<<5)+8>>1]=b[s+(F+1<<4)+8>>1]|0;b[I+(q<<5)+10>>1]=b[s+(F+1<<4)+10>>1]|0;c[I+(q<<5)+12>>2]=F+1;c[I+(q<<5)+16>>2]=r}if((v|0)<129){q=c[d+152>>2]|0;if((q|0)==(c[d+156>>2]|0)?(J=(q|0)==0?1:q<<1,(q|0)<(J|0)):0){if(!J){i=0;n=q}else{c[6485]=(c[6485]|0)+1;i=ec(J<<5|19)|0;if(!i)i=0;else{c[(i+4+15&-16)+-4>>2]=i;i=i+4+15&-16}n=c[d+152>>2]|0}if((n|0)>0){j=0;do{I=i+(j<<5)|0;H=(c[d+160>>2]|0)+(j<<5)|0;c[I>>2]=c[H>>2];c[I+4>>2]=c[H+4>>2];c[I+8>>2]=c[H+8>>2];c[I+12>>2]=c[H+12>>2];c[I+16>>2]=c[H+16>>2];c[I+20>>2]=c[H+20>>2];c[I+24>>2]=c[H+24>>2];c[I+28>>2]=c[H+28>>2];j=j+1|0}while((j|0)!=(n|0))}j=c[d+160>>2]|0;if(j|0){if(a[d+164>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}c[d+160>>2]=0}a[d+164>>0]=1;c[d+160>>2]=i;c[d+156>>2]=J;i=c[d+152>>2]|0}else i=q;c[d+152>>2]=i+1;i=(c[d+160>>2]|0)+(q<<5)|0;c[i>>2]=c[K+32>>2];c[i+4>>2]=c[K+32+4>>2];c[i+8>>2]=c[K+32+8>>2];c[i+12>>2]=c[K+32+12>>2];c[i+16>>2]=c[K+32+16>>2];c[i+20>>2]=c[K+32+20>>2];c[i+24>>2]=c[K+32+24>>2];c[i+28>>2]=c[K+32+28>>2];i=c[d+160>>2]|0;b[i+(q<<5)>>1]=b[s+(A<<4)>>1]|0;b[i+(q<<5)+2>>1]=b[s+(A<<4)+2>>1]|0;b[i+(q<<5)+4>>1]=b[s+(A<<4)+4>>1]|0;b[i+(q<<5)+6>>1]=b[s+(A<<4)+6>>1]|0;b[i+(q<<5)+8>>1]=b[s+(A<<4)+8>>1]|0;b[i+(q<<5)+10>>1]=b[s+(A<<4)+10>>1]|0;c[i+(q<<5)+12>>2]=A;c[i+(q<<5)+16>>2]=v;i=d+152|0}else i=d+152|0;c[d+168>>2]=c[i>>2];i=a[d+60>>0]|0}if(!(i<<24>>24)){c[(c[d+96>>2]|0)+(G<<6)+32>>2]=w;l=K;return}else{c[(c[d+136>>2]|0)+(G<<4)+12>>2]=0-w;l=K;return}}function sc(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0.0,i=0.0,j=0.0,k=0.0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0,N=0;s=l;l=l+208|0;if(sb[c[(c[a>>2]|0)+20>>2]&127](a)|0?(r=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0,(sb[c[(c[r>>2]|0)+56>>2]&127](r)|0)&32768|0):0){r=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;Jb[c[(c[r>>2]|0)+64>>2]&7](r,b,.10000000149011612)}f=c[d+4>>2]|0;switch(f|0){case 31:{f=c[d+20>>2]|0;if((f|0)<=0){l=s;return}do{r=f;f=f+-1|0;q=c[d+28>>2]|0;D=+g[q+(f*80|0)>>2];A=+g[q+(f*80|0)+4>>2];x=+g[q+(f*80|0)+8>>2];C=+g[q+(f*80|0)+16>>2];z=+g[q+(f*80|0)+20>>2];v=+g[q+(f*80|0)+24>>2];B=+g[q+(f*80|0)+32>>2];y=+g[q+(f*80|0)+36>>2];t=+g[q+(f*80|0)+40>>2];L=+g[q+(f*80|0)+48>>2];K=+g[q+(f*80|0)+52>>2];k=+g[q+(f*80|0)+56>>2];q=c[q+(f*80|0)+64>>2]|0;p=c[(c[a>>2]|0)+28>>2]|0;J=+g[b>>2];I=+g[b+4>>2];H=+g[b+8>>2];G=+g[b+16>>2];F=+g[b+20>>2];E=+g[b+24>>2];w=+g[b+32>>2];u=+g[b+36>>2];h=+g[b+40>>2];i=L*J+K*I+k*H+ +g[b+48>>2];j=L*G+K*F+k*E+ +g[b+52>>2];k=L*w+K*u+k*h+ +g[b+56>>2];g[s+144>>2]=D*J+C*I+B*H;g[s+144+4>>2]=A*J+z*I+y*H;g[s+144+8>>2]=x*J+v*I+t*H;g[s+144+12>>2]=0.0;g[s+144+16>>2]=D*G+C*F+B*E;g[s+144+20>>2]=A*G+z*F+y*E;g[s+144+24>>2]=x*G+v*F+t*E;g[s+144+28>>2]=0.0;g[s+144+32>>2]=D*w+C*u+B*h;g[s+144+36>>2]=A*w+z*u+y*h;g[s+144+40>>2]=x*w+v*u+t*h;g[s+144+44>>2]=0.0;g[s+144+48>>2]=i;g[s+144+52>>2]=j;g[s+144+56>>2]=k;g[s+144+60>>2]=0.0;Pb[p&127](a,s+144|0,q,e)}while((r|0)>1);l=s;return}case 0:{c[s+144>>2]=c[d+32>>2];c[s+144+4>>2]=c[d+32+4>>2];c[s+144+8>>2]=c[d+32+8>>2];c[s+144+12>>2]=c[d+32+12>>2];J=+ib[c[(c[d>>2]|0)+48>>2]&15](d);K=+ib[c[(c[d>>2]|0)+48>>2]&15](d);L=+ib[c[(c[d>>2]|0)+48>>2]&15](d);J=J+ +g[s+144>>2];g[s+144>>2]=J;K=K+ +g[s+144+4>>2];g[s+144+4>>2]=K;L=L+ +g[s+144+8>>2];g[s+144+8>>2]=L;d=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;a=c[(c[d>>2]|0)+80>>2]|0;g[s+128>>2]=-J;g[s+128+4>>2]=-K;g[s+128+8>>2]=-L;g[s+128+12>>2]=0.0;Tb[a&31](d,s+128|0,s+144|0,b,e);l=s;return}case 8:{L=+ib[c[(c[d>>2]|0)+48>>2]&15](d);d=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;Hb[c[(c[d>>2]|0)+24>>2]&0](d,L,b,e);l=s;return}case 9:{f=c[d+96>>2]|0;if((f|0)<=0){l=s;return}do{r=f;f=f+-1|0;q=c[d+104>>2]|0;x=+g[q+(f<<4)>>2];y=+g[q+(f<<4)+4>>2];K=+g[q+(f<<4)+8>>2];q=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;p=c[(c[q>>2]|0)+24>>2]|0;L=+g[(c[d+124>>2]|0)+(f<<2)>>2];A=+g[b>>2];B=+g[b+4>>2];z=+g[b+8>>2];D=+g[b+16>>2];E=+g[b+20>>2];C=+g[b+24>>2];G=+g[b+32>>2];H=+g[b+36>>2];F=+g[b+40>>2];I=x*A+y*B+K*z+ +g[b+48>>2];J=x*D+y*E+K*C+ +g[b+52>>2];K=x*G+y*H+K*F+ +g[b+56>>2];g[s+144>>2]=A+B*0.0+z*0.0;g[s+144+4>>2]=A*0.0+B+z*0.0;g[s+144+8>>2]=z+(A*0.0+B*0.0);g[s+144+12>>2]=0.0;g[s+144+16>>2]=D+E*0.0+C*0.0;g[s+144+20>>2]=D*0.0+E+C*0.0;g[s+144+24>>2]=C+(D*0.0+E*0.0);g[s+144+28>>2]=0.0;g[s+144+32>>2]=G+H*0.0+F*0.0;g[s+144+36>>2]=G*0.0+H+F*0.0;g[s+144+40>>2]=F+(G*0.0+H*0.0);g[s+144+44>>2]=0.0;g[s+144+48>>2]=I;g[s+144+52>>2]=J;g[s+144+56>>2]=K;g[s+144+60>>2]=0.0;Hb[p&0](q,L,s+144|0,e)}while((r|0)>1);l=s;return}case 10:{r=c[d+56>>2]|0;K=+g[d+32+(((r+2|0)%3|0)<<2)>>2];L=+g[d+32+(r<<2)>>2];d=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;Fb[c[(c[d>>2]|0)+84>>2]&0](d,K,L,r,b,e);l=s;return}case 11:{K=+g[d+60>>2];L=+g[d+64>>2];d=c[d+72>>2]|0;a=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;Fb[c[(c[a>>2]|0)+92>>2]&0](a,K,L,d,b,e);l=s;return}case 13:{r=c[d+56>>2]|0;K=+ib[c[(c[d>>2]|0)+92>>2]&15](d);c[s+112>>2]=c[d+32>>2];c[s+112+4>>2]=c[d+32+4>>2];c[s+112+8>>2]=c[d+32+8>>2];c[s+112+12>>2]=c[d+32+12>>2];I=+ib[c[(c[d>>2]|0)+48>>2]&15](d);J=+ib[c[(c[d>>2]|0)+48>>2]&15](d);L=+ib[c[(c[d>>2]|0)+48>>2]&15](d);g[s+112>>2]=I+ +g[s+112>>2];g[s+112+4>>2]=J+ +g[s+112+4>>2];g[s+112+8>>2]=L+ +g[s+112+8>>2];L=+g[s+112+(r<<2)>>2];d=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;Fb[c[(c[d>>2]|0)+88>>2]&0](d,K,L,r,b,e);l=s;return}case 28:{L=+g[d+68>>2];a=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;Lb[c[(c[a>>2]|0)+96>>2]&0](a,d+52|0,L,b,e);l=s;return}default:{a:do if((f|0)<7){r=c[d+56>>2]|0;if(!r){if((sb[c[(c[d>>2]|0)+100>>2]&127](d)|0)<=0)break;f=0;while(1){Pb[c[(c[d>>2]|0)+104>>2]&127](d,f,s+144|0,s+128|0);L=+g[s+144>>2];y=+g[b>>2];J=+g[s+144+4>>2];z=+g[b+4>>2];H=+g[s+144+8>>2];A=+g[b+8>>2];C=+g[b+16>>2];D=+g[b+20>>2];E=+g[b+24>>2];G=+g[b+32>>2];I=+g[b+36>>2];K=+g[b+40>>2];x=+g[b+48>>2];B=+g[b+52>>2];F=+g[b+56>>2];g[s+16>>2]=L*y+J*z+H*A+x;g[s+16+4>>2]=L*C+J*D+H*E+B;g[s+16+8>>2]=L*G+J*I+H*K+F;g[s+16+12>>2]=0.0;H=+g[s+128>>2];J=+g[s+128+4>>2];L=+g[s+128+8>>2];g[s>>2]=x+(y*H+z*J+A*L);g[s+4>>2]=B+(C*H+D*J+E*L);g[s+8>>2]=F+(G*H+I*J+K*L);g[s+12>>2]=0.0;r=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;Pb[c[(c[r>>2]|0)+16>>2]&127](r,s+16|0,s,e);f=f+1|0;if((f|0)>=(sb[c[(c[d>>2]|0)+100>>2]&127](d)|0))break a}}if((c[r+28>>2]|0)>0){q=0;do{f=c[r+36>>2]|0;p=c[f+(q*36|0)+4>>2]|0;b:do if((p|0)>0){m=c[f+(q*36|0)+12>>2]|0;f=0;n=c[m+(p+-1<<2)>>2]|0;h=0.0;i=0.0;k=0.0;while(1){o=c[m+(f<<2)>>2]|0;m=c[r+16>>2]|0;h=h+ +g[m+(o<<4)>>2];i=i+ +g[m+(o<<4)+4>>2];k=k+ +g[m+(o<<4)+8>>2];m=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;M=c[(c[m>>2]|0)+16>>2]|0;N=c[r+16>>2]|0;L=+g[N+(n<<4)>>2];y=+g[b>>2];J=+g[N+(n<<4)+4>>2];z=+g[b+4>>2];H=+g[N+(n<<4)+8>>2];A=+g[b+8>>2];C=+g[b+16>>2];D=+g[b+20>>2];E=+g[b+24>>2];G=+g[b+32>>2];I=+g[b+36>>2];K=+g[b+40>>2];x=+g[b+48>>2];B=+g[b+52>>2];F=+g[b+56>>2];g[s+144>>2]=L*y+J*z+H*A+x;g[s+144+4>>2]=L*C+J*D+H*E+B;g[s+144+8>>2]=L*G+J*I+H*K+F;g[s+144+12>>2]=0.0;H=+g[N+(o<<4)>>2];J=+g[N+(o<<4)+4>>2];L=+g[N+(o<<4)+8>>2];g[s+128>>2]=x+(y*H+z*J+A*L);g[s+128+4>>2]=B+(C*H+D*J+E*L);g[s+128+8>>2]=F+(G*H+I*J+K*L);g[s+128+12>>2]=0.0;Pb[M&127](m,s+144|0,s+128|0,e);f=f+1|0;m=c[r+36>>2]|0;if((f|0)>=(c[m+(q*36|0)+4>>2]|0))break b;n=o;m=c[m+(q*36|0)+12>>2]|0}}else{h=0.0;i=0.0;k=0.0}while(0);j=1.0/+(p|0)*h;i=1.0/+(p|0)*i;h=1.0/+(p|0)*k;N=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;if((sb[c[(c[N>>2]|0)+56>>2]&127](N)|0)&16384|0){c[s+144>>2]=1065353216;c[s+144+4>>2]=1065353216;c[s+144+8>>2]=0;g[s+144+12>>2]=0.0;N=c[r+36>>2]|0;F=+g[N+(q*36|0)+20>>2];H=+g[N+(q*36|0)+24>>2];J=+g[N+(q*36|0)+28>>2];N=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;M=c[(c[N>>2]|0)+16>>2]|0;x=+g[b>>2];y=+g[b+4>>2];z=+g[b+8>>2];B=+g[b+16>>2];C=+g[b+20>>2];D=+g[b+24>>2];G=+g[b+32>>2];I=+g[b+36>>2];K=+g[b+40>>2];A=+g[b+48>>2];E=+g[b+52>>2];L=+g[b+56>>2];g[s+128>>2]=j*x+i*y+h*z+A;g[s+128+4>>2]=j*B+i*C+h*D+E;g[s+128+8>>2]=j*G+i*I+h*K+L;g[s+128+12>>2]=0.0;g[s+16>>2]=(j+F)*x+(i+H)*y+(h+J)*z+A;g[s+16+4>>2]=(j+F)*B+(i+H)*C+(h+J)*D+E;g[s+16+8>>2]=(j+F)*G+(i+H)*I+(h+J)*K+L;g[s+16+12>>2]=0.0;Pb[M&127](N,s+128|0,s+16|0,s+144|0)}q=q+1|0}while((q|0)<(c[r+28>>2]|0))}}while(0);f=c[d+4>>2]|0;if((f+-21|0)>>>0<9){c[s+144>>2]=1566444395;c[s+144+4>>2]=1566444395;c[s+144+8>>2]=1566444395;g[s+144+12>>2]=0.0;c[s+128>>2]=-581039253;c[s+128+4>>2]=-581039253;c[s+128+8>>2]=-581039253;g[s+128+12>>2]=0.0;f=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;c[s+16>>2]=7140;c[s+16+4>>2]=7164;c[s+16+8>>2]=f;c[s+16+12>>2]=c[e>>2];c[s+16+12+4>>2]=c[e+4>>2];c[s+16+12+8>>2]=c[e+8>>2];c[s+16+12+12>>2]=c[e+12>>2];c[s+16+28>>2]=c[b>>2];c[s+16+28+4>>2]=c[b+4>>2];c[s+16+28+8>>2]=c[b+8>>2];c[s+16+28+12>>2]=c[b+12>>2];c[s+16+44>>2]=c[b+16>>2];c[s+16+44+4>>2]=c[b+16+4>>2];c[s+16+44+8>>2]=c[b+16+8>>2];c[s+16+44+12>>2]=c[b+16+12>>2];c[s+16+60>>2]=c[b+32>>2];c[s+16+60+4>>2]=c[b+32+4>>2];c[s+16+60+8>>2]=c[b+32+8>>2];c[s+16+60+12>>2]=c[b+32+12>>2];c[s+16+76>>2]=c[b+48>>2];c[s+16+76+4>>2]=c[b+48+4>>2];c[s+16+76+8>>2]=c[b+48+8>>2];c[s+16+76+12>>2]=c[b+48+12>>2];Pb[c[(c[d>>2]|0)+64>>2]&127](d,s+16|0,s+128|0,s+144|0);f=c[d+4>>2]|0}if((f|0)!=3){l=s;return}c[s+144>>2]=1566444395;c[s+144+4>>2]=1566444395;c[s+144+8>>2]=1566444395;g[s+144+12>>2]=0.0;c[s+128>>2]=-581039253;c[s+128+4>>2]=-581039253;c[s+128+8>>2]=-581039253;g[s+128+12>>2]=0.0;N=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;c[s+16>>2]=7140;c[s+16+4>>2]=7164;c[s+16+8>>2]=N;c[s+16+12>>2]=c[e>>2];c[s+16+12+4>>2]=c[e+4>>2];c[s+16+12+8>>2]=c[e+8>>2];c[s+16+12+12>>2]=c[e+12>>2];c[s+16+28>>2]=c[b>>2];c[s+16+28+4>>2]=c[b+4>>2];c[s+16+28+8>>2]=c[b+8>>2];c[s+16+28+12>>2]=c[b+12>>2];c[s+16+44>>2]=c[b+16>>2];c[s+16+44+4>>2]=c[b+16+4>>2];c[s+16+44+8>>2]=c[b+16+8>>2];c[s+16+44+12>>2]=c[b+16+12>>2];c[s+16+60>>2]=c[b+32>>2];c[s+16+60+4>>2]=c[b+32+4>>2];c[s+16+60+8>>2]=c[b+32+8>>2];c[s+16+60+12>>2]=c[b+32+12>>2];c[s+16+76>>2]=c[b+48>>2];c[s+16+76+4>>2]=c[b+48+4>>2];c[s+16+76+8>>2]=c[b+48+8>>2];c[s+16+76+12>>2]=c[b+48+12>>2];N=c[d+96>>2]|0;Pb[c[(c[N>>2]|0)+8>>2]&127](N,s+16+4|0,s+128|0,s+144|0);l=s;return}}}function tc(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0,i=0.0,j=0,k=0,m=0,n=0,o=0,p=0.0,q=0.0,r=0.0,s=0,t=0,u=0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0;u=l;l=l+48|0;A=1.0/+g[b+112>>2];B=1.0/+g[b+116>>2];C=1.0/+g[b+120>>2];v=+g[b+52>>2];w=A*+g[e>>2]+v;p=+g[b+56>>2];i=B*+g[e+4>>2]+p;r=+g[b+60>>2];q=C*+g[e+8>>2]+r;v=A*+g[f>>2]+v;p=B*+g[f+4>>2]+p;r=C*+g[f+8>>2]+r;C=+g[b+20>>2];w=w<C?C:w;B=+g[b+24>>2];i=i<B?B:i;A=+g[b+28>>2];q=q<A?A:q;z=+g[b+36>>2];w=z<w?z:w;y=+g[b+40>>2];i=y<i?y:i;x=+g[b+44>>2];q=x<q?x:q;v=v<C?C:v;p=p<B?B:p;r=r<A?A:r;v=z<v?z:v;p=y<p?y:p;r=x<r?x:r;n=~~((w<0.0?-.5:.5)+w)+-1|0;j=~~((v<0.0?-.5:.5)+v)+1|0;o=~~((i<0.0?-.5:.5)+i)+-1|0;k=~~((p<0.0?-.5:.5)+p)+1|0;h=~~((q<0.0?-.5:.5)+q)+-1|0;e=~~((r<0.0?-.5:.5)+r)+1|0;m=(c[b+68>>2]|0)+-1|0;f=(c[b+72>>2]|0)+-1|0;switch(c[b+108>>2]|0){case 0:{f=(e|0)<(f|0)?e:f;e=(h|0)>0?h:0;m=(k|0)<(m|0)?k:m;o=(o|0)>0?o:0;break}case 1:{f=(e|0)<(f|0)?e:f;e=(h|0)>0?h:0;m=(j|0)<(m|0)?j:m;o=(n|0)>0?n:0;break}case 2:{f=(k|0)<(f|0)?k:f;e=(o|0)>0?o:0;m=(j|0)<(m|0)?j:m;o=(n|0)>0?n:0;break}default:{e=0;o=0}}if((e|0)>=(f|0)){l=u;return}s=(o|0)<(m|0);do if(s){k=(e&1|0)==0;n=e+1|0;r=+(e|0);h=o;while(1){do if(!(a[b+104>>0]|0)){if(a[b+105>>0]|0?(h+e&1|0)==0:0){t=16;break}if(!(k&(a[b+106>>0]|0)!=0)){i=+lb[c[(c[b>>2]|0)+68>>2]&31](b,h,e);switch(c[b+108>>2]|0){case 0:{i=i-+g[b+52>>2];p=+(h|0)-+g[b+84>>2]*.5;q=r-+g[b+88>>2]*.5;g[u>>2]=i;g[u+4>>2]=p;g[u+8>>2]=q;g[u+12>>2]=0.0;break}case 1:{C=+(h|0)-+g[b+84>>2]*.5;p=i-+g[b+56>>2];q=r-+g[b+88>>2]*.5;g[u>>2]=C;g[u+4>>2]=p;g[u+8>>2]=q;g[u+12>>2]=0.0;i=C;break}case 2:{C=+(h|0)-+g[b+84>>2]*.5;p=r-+g[b+88>>2]*.5;q=i-+g[b+60>>2];g[u>>2]=C;g[u+4>>2]=p;g[u+8>>2]=q;g[u+12>>2]=0.0;i=C;break}default:{i=+g[u>>2];p=+g[u+4>>2];q=+g[u+8>>2]}}g[u>>2]=i*+g[b+112>>2];g[u+4>>2]=p*+g[b+116>>2];g[u+8>>2]=q*+g[b+120>>2];i=+lb[c[(c[b>>2]|0)+68>>2]&31](b,h,n);switch(c[b+108>>2]|0){case 0:{i=i-+g[b+52>>2];p=+(h|0)-+g[b+84>>2]*.5;q=+(n|0)-+g[b+88>>2]*.5;g[u+16>>2]=i;g[u+20>>2]=p;g[u+24>>2]=q;g[u+28>>2]=0.0;break}case 1:{C=+(h|0)-+g[b+84>>2]*.5;p=i-+g[b+56>>2];q=+(n|0)-+g[b+88>>2]*.5;g[u+16>>2]=C;g[u+20>>2]=p;g[u+24>>2]=q;g[u+28>>2]=0.0;i=C;break}case 2:{C=+(h|0)-+g[b+84>>2]*.5;p=+(n|0)-+g[b+88>>2]*.5;q=i-+g[b+60>>2];g[u+16>>2]=C;g[u+20>>2]=p;g[u+24>>2]=q;g[u+28>>2]=0.0;i=C;break}default:{i=+g[u+16>>2];p=+g[u+20>>2];q=+g[u+24>>2]}}g[u+16>>2]=i*+g[b+112>>2];g[u+20>>2]=p*+g[b+116>>2];g[u+24>>2]=q*+g[b+120>>2];j=h+1|0;i=+lb[c[(c[b>>2]|0)+68>>2]&31](b,j,e);switch(c[b+108>>2]|0){case 0:{i=i-+g[b+52>>2];p=+(j|0)-+g[b+84>>2]*.5;q=r-+g[b+88>>2]*.5;g[u+32>>2]=i;g[u+36>>2]=p;g[u+40>>2]=q;g[u+44>>2]=0.0;break}case 1:{C=+(j|0)-+g[b+84>>2]*.5;p=i-+g[b+56>>2];q=r-+g[b+88>>2]*.5;g[u+32>>2]=C;g[u+36>>2]=p;g[u+40>>2]=q;g[u+44>>2]=0.0;i=C;break}case 2:{C=+(j|0)-+g[b+84>>2]*.5;p=r-+g[b+88>>2]*.5;q=i-+g[b+60>>2];g[u+32>>2]=C;g[u+36>>2]=p;g[u+40>>2]=q;g[u+44>>2]=0.0;i=C;break}default:{i=+g[u+32>>2];p=+g[u+36>>2];q=+g[u+40>>2]}}g[u+32>>2]=i*+g[b+112>>2];g[u+36>>2]=p*+g[b+116>>2];g[u+40>>2]=q*+g[b+120>>2];Pb[c[(c[d>>2]|0)+8>>2]&127](d,u,h,e);i=+lb[c[(c[b>>2]|0)+68>>2]&31](b,j,e);switch(c[b+108>>2]|0){case 0:{i=i-+g[b+52>>2];p=+(j|0)-+g[b+84>>2]*.5;q=r-+g[b+88>>2]*.5;g[u>>2]=i;g[u+4>>2]=p;g[u+8>>2]=q;g[u+12>>2]=0.0;break}case 1:{C=+(j|0)-+g[b+84>>2]*.5;p=i-+g[b+56>>2];q=r-+g[b+88>>2]*.5;g[u>>2]=C;g[u+4>>2]=p;g[u+8>>2]=q;g[u+12>>2]=0.0;i=C;break}case 2:{C=+(j|0)-+g[b+84>>2]*.5;p=r-+g[b+88>>2]*.5;q=i-+g[b+60>>2];g[u>>2]=C;g[u+4>>2]=p;g[u+8>>2]=q;g[u+12>>2]=0.0;i=C;break}default:{i=+g[u>>2];p=+g[u+4>>2];q=+g[u+8>>2]}}g[u>>2]=i*+g[b+112>>2];g[u+4>>2]=p*+g[b+116>>2];g[u+8>>2]=q*+g[b+120>>2];i=+lb[c[(c[b>>2]|0)+68>>2]&31](b,j,n);switch(c[b+108>>2]|0){case 0:{i=i-+g[b+52>>2];p=+(j|0)-+g[b+84>>2]*.5;q=+(n|0)-+g[b+88>>2]*.5;g[u+32>>2]=i;g[u+36>>2]=p;g[u+40>>2]=q;g[u+44>>2]=0.0;break}case 1:{C=+(j|0)-+g[b+84>>2]*.5;p=i-+g[b+56>>2];q=+(n|0)-+g[b+88>>2]*.5;g[u+32>>2]=C;g[u+36>>2]=p;g[u+40>>2]=q;g[u+44>>2]=0.0;i=C;break}case 2:{C=+(j|0)-+g[b+84>>2]*.5;p=+(n|0)-+g[b+88>>2]*.5;q=i-+g[b+60>>2];g[u+32>>2]=C;g[u+36>>2]=p;g[u+40>>2]=q;g[u+44>>2]=0.0;i=C;break}default:{i=+g[u+32>>2];p=+g[u+36>>2];q=+g[u+40>>2]}}g[u+32>>2]=i*+g[b+112>>2];g[u+36>>2]=p*+g[b+116>>2];g[u+40>>2]=q*+g[b+120>>2];Pb[c[(c[d>>2]|0)+8>>2]&127](d,u,h,e);h=j}else t=16}else t=16;while(0);if((t|0)==16){t=0;i=+lb[c[(c[b>>2]|0)+68>>2]&31](b,h,e);switch(c[b+108>>2]|0){case 0:{i=i-+g[b+52>>2];p=+(h|0)-+g[b+84>>2]*.5;q=r-+g[b+88>>2]*.5;g[u>>2]=i;g[u+4>>2]=p;g[u+8>>2]=q;g[u+12>>2]=0.0;break}case 1:{C=+(h|0)-+g[b+84>>2]*.5;p=i-+g[b+56>>2];q=r-+g[b+88>>2]*.5;g[u>>2]=C;g[u+4>>2]=p;g[u+8>>2]=q;g[u+12>>2]=0.0;i=C;break}case 2:{C=+(h|0)-+g[b+84>>2]*.5;p=r-+g[b+88>>2]*.5;q=i-+g[b+60>>2];g[u>>2]=C;g[u+4>>2]=p;g[u+8>>2]=q;g[u+12>>2]=0.0;i=C;break}default:{i=+g[u>>2];p=+g[u+4>>2];q=+g[u+8>>2]}}g[u>>2]=i*+g[b+112>>2];g[u+4>>2]=p*+g[b+116>>2];g[u+8>>2]=q*+g[b+120>>2];i=+lb[c[(c[b>>2]|0)+68>>2]&31](b,h,n);switch(c[b+108>>2]|0){case 0:{i=i-+g[b+52>>2];p=+(h|0)-+g[b+84>>2]*.5;q=+(n|0)-+g[b+88>>2]*.5;g[u+16>>2]=i;g[u+20>>2]=p;g[u+24>>2]=q;g[u+28>>2]=0.0;break}case 1:{C=+(h|0)-+g[b+84>>2]*.5;p=i-+g[b+56>>2];q=+(n|0)-+g[b+88>>2]*.5;g[u+16>>2]=C;g[u+20>>2]=p;g[u+24>>2]=q;g[u+28>>2]=0.0;i=C;break}case 2:{C=+(h|0)-+g[b+84>>2]*.5;p=+(n|0)-+g[b+88>>2]*.5;q=i-+g[b+60>>2];g[u+16>>2]=C;g[u+20>>2]=p;g[u+24>>2]=q;g[u+28>>2]=0.0;i=C;break}default:{i=+g[u+16>>2];p=+g[u+20>>2];q=+g[u+24>>2]}}g[u+16>>2]=i*+g[b+112>>2];g[u+20>>2]=p*+g[b+116>>2];g[u+24>>2]=q*+g[b+120>>2];j=h+1|0;i=+lb[c[(c[b>>2]|0)+68>>2]&31](b,j,n);switch(c[b+108>>2]|0){case 0:{i=i-+g[b+52>>2];p=+(j|0)-+g[b+84>>2]*.5;q=+(n|0)-+g[b+88>>2]*.5;g[u+32>>2]=i;g[u+36>>2]=p;g[u+40>>2]=q;g[u+44>>2]=0.0;break}case 1:{C=+(j|0)-+g[b+84>>2]*.5;p=i-+g[b+56>>2];q=+(n|0)-+g[b+88>>2]*.5;g[u+32>>2]=C;g[u+36>>2]=p;g[u+40>>2]=q;g[u+44>>2]=0.0;i=C;break}case 2:{C=+(j|0)-+g[b+84>>2]*.5;p=+(n|0)-+g[b+88>>2]*.5;q=i-+g[b+60>>2];g[u+32>>2]=C;g[u+36>>2]=p;g[u+40>>2]=q;g[u+44>>2]=0.0;i=C;break}default:{i=+g[u+32>>2];p=+g[u+36>>2];q=+g[u+40>>2]}}g[u+32>>2]=i*+g[b+112>>2];g[u+36>>2]=p*+g[b+116>>2];g[u+40>>2]=q*+g[b+120>>2];Pb[c[(c[d>>2]|0)+8>>2]&127](d,u,h,e);i=+lb[c[(c[b>>2]|0)+68>>2]&31](b,j,n);switch(c[b+108>>2]|0){case 0:{i=i-+g[b+52>>2];p=+(j|0)-+g[b+84>>2]*.5;q=+(n|0)-+g[b+88>>2]*.5;g[u+16>>2]=i;g[u+20>>2]=p;g[u+24>>2]=q;g[u+28>>2]=0.0;break}case 1:{C=+(j|0)-+g[b+84>>2]*.5;p=i-+g[b+56>>2];q=+(n|0)-+g[b+88>>2]*.5;g[u+16>>2]=C;g[u+20>>2]=p;g[u+24>>2]=q;g[u+28>>2]=0.0;i=C;break}case 2:{C=+(j|0)-+g[b+84>>2]*.5;p=+(n|0)-+g[b+88>>2]*.5;q=i-+g[b+60>>2];g[u+16>>2]=C;g[u+20>>2]=p;g[u+24>>2]=q;g[u+28>>2]=0.0;i=C;break}default:{i=+g[u+16>>2];p=+g[u+20>>2];q=+g[u+24>>2]}}g[u+16>>2]=i*+g[b+112>>2];g[u+20>>2]=p*+g[b+116>>2];g[u+24>>2]=q*+g[b+120>>2];i=+lb[c[(c[b>>2]|0)+68>>2]&31](b,j,e);switch(c[b+108>>2]|0){case 0:{i=i-+g[b+52>>2];p=+(j|0)-+g[b+84>>2]*.5;q=r-+g[b+88>>2]*.5;g[u+32>>2]=i;g[u+36>>2]=p;g[u+40>>2]=q;g[u+44>>2]=0.0;break}case 1:{C=+(j|0)-+g[b+84>>2]*.5;p=i-+g[b+56>>2];q=r-+g[b+88>>2]*.5;g[u+32>>2]=C;g[u+36>>2]=p;g[u+40>>2]=q;g[u+44>>2]=0.0;i=C;break}case 2:{C=+(j|0)-+g[b+84>>2]*.5;p=r-+g[b+88>>2]*.5;q=i-+g[b+60>>2];g[u+32>>2]=C;g[u+36>>2]=p;g[u+40>>2]=q;g[u+44>>2]=0.0;i=C;break}default:{i=+g[u+32>>2];p=+g[u+36>>2];q=+g[u+40>>2]}}g[u+32>>2]=i*+g[b+112>>2];g[u+36>>2]=p*+g[b+116>>2];g[u+40>>2]=q*+g[b+120>>2];Pb[c[(c[d>>2]|0)+8>>2]&127](d,u,h,e);h=j}if((h|0)==(m|0)){e=n;break}}}else e=e+1|0;while((e|0)!=(f|0));l=u;return}function uc(b,d){b=b|0;d=+d;var e=0,f=0.0,h=0,i=0,j=0,k=0.0,m=0.0,n=0,o=0,p=0,q=0.0,r=0,s=0,t=0.0,u=0.0,v=0.0,w=0.0,x=0,y=0,z=0.0,A=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0.0;r=l;l=l+96|0;o=c[b+128>>2]|0;if(!o){l=r;return}e=c[b+8>>2]|0;if((e|0)<(o|0)){if((c[b+12>>2]|0)<(o|0)){c[6485]=(c[6485]|0)+1;h=ec((o<<4|3)+16|0)|0;if(!h)j=0;else{c[(h+4+15&-16)+-4>>2]=h;j=h+4+15&-16}i=c[b+8>>2]|0;if((i|0)>0){h=0;do{n=j+(h<<4)|0;s=(c[b+16>>2]|0)+(h<<4)|0;c[n>>2]=c[s>>2];c[n+4>>2]=c[s+4>>2];c[n+8>>2]=c[s+8>>2];c[n+12>>2]=c[s+12>>2];h=h+1|0}while((h|0)!=(i|0))}h=c[b+16>>2]|0;if(h|0){if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[b+16>>2]=0}a[b+20>>0]=1;c[b+16>>2]=j;c[b+12>>2]=o;h=b+16|0}else h=b+16|0;do{s=(c[h>>2]|0)+(e<<4)|0;c[s>>2]=c[r+48>>2];c[s+4>>2]=c[r+48+4>>2];c[s+8>>2]=c[r+48+8>>2];c[s+12>>2]=c[r+48+12>>2];e=e+1|0}while((e|0)!=(o|0))}c[b+8>>2]=o;e=c[b+28>>2]|0;if((e|0)<(o|0)){if((c[b+32>>2]|0)<(o|0)){c[6485]=(c[6485]|0)+1;h=ec((o<<4|3)+16|0)|0;if(!h)j=0;else{c[(h+4+15&-16)+-4>>2]=h;j=h+4+15&-16}i=c[b+28>>2]|0;if((i|0)>0){h=0;do{s=j+(h<<4)|0;n=(c[b+36>>2]|0)+(h<<4)|0;c[s>>2]=c[n>>2];c[s+4>>2]=c[n+4>>2];c[s+8>>2]=c[n+8>>2];c[s+12>>2]=c[n+12>>2];h=h+1|0}while((h|0)!=(i|0))}h=c[b+36>>2]|0;if(h|0){if(a[b+40>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[b+36>>2]=0}a[b+40>>0]=1;c[b+36>>2]=j;c[b+32>>2]=o;h=b+36|0}else h=b+36|0;do{s=(c[h>>2]|0)+(e<<4)|0;c[s>>2]=c[r+48>>2];c[s+4>>2]=c[r+48+4>>2];c[s+8>>2]=c[r+48+8>>2];c[s+12>>2]=c[r+48+12>>2];e=e+1|0}while((e|0)!=(o|0))}c[b+28>>2]=o;n=c[b+48>>2]|0;if((n|0)<(o|0)){do if((c[b+52>>2]|0)<(o|0)){c[6485]=(c[6485]|0)+1;e=ec((o<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}i=c[b+48>>2]|0;j=c[b+56>>2]|0;if((i|0)<=0){if(!j){a[b+60>>0]=1;c[b+56>>2]=e;c[b+52>>2]=o;h=o<<2;break}}else{h=0;do{c[e+(h<<2)>>2]=c[j+(h<<2)>>2];h=h+1|0}while((h|0)!=(i|0))}if(a[b+60>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}a[b+60>>0]=1;c[b+56>>2]=e;c[b+52>>2]=o;h=o<<2}else{h=o<<2;e=c[b+56>>2]|0}while(0);uj(e+(n<<2)|0,0,h-(n<<2)|0)|0}c[b+48>>2]=o;n=c[b+68>>2]|0;if((n|0)<(o|0)){do if((c[b+72>>2]|0)<(o|0)){c[6485]=(c[6485]|0)+1;e=ec((o<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}i=c[b+68>>2]|0;j=c[b+76>>2]|0;if((i|0)<=0){if(!j){a[b+80>>0]=1;c[b+76>>2]=e;c[b+72>>2]=o;h=o<<2;break}}else{h=0;do{c[e+(h<<2)>>2]=c[j+(h<<2)>>2];h=h+1|0}while((h|0)!=(i|0))}if(a[b+80>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}a[b+80>>0]=1;c[b+76>>2]=e;c[b+72>>2]=o;h=o<<2}else{h=o<<2;e=c[b+76>>2]|0}while(0);uj(e+(n<<2)|0,0,h-(n<<2)|0)|0}c[b+68>>2]=o;e=c[b+128>>2]|0;if((e|0)<=0){l=r;return}i=c[b+76>>2]|0;j=c[b+56>>2]|0;h=0;do{g[i+(h<<2)>>2]=0.0;g[j+(h<<2)>>2]=0.0;h=h+1|0}while((h|0)!=(e|0));j=0;do{h=c[b+136>>2]|0;i=c[h+(j*284|0)+88>>2]|0;if(i){x=h+(j*284|0)+92|0;c[r+48>>2]=c[x>>2];c[r+48+4>>2]=c[x+4>>2];c[r+48+8>>2]=c[x+8>>2];c[r+48+12>>2]=c[x+12>>2];x=h+(j*284|0)+108|0;c[r+48+16>>2]=c[x>>2];c[r+48+16+4>>2]=c[x+4>>2];c[r+48+16+8>>2]=c[x+8>>2];c[r+48+16+12>>2]=c[x+12>>2];x=h+(j*284|0)+124|0;c[r+48+32>>2]=c[x>>2];c[r+48+32+4>>2]=c[x+4>>2];c[r+48+32+8>>2]=c[x+8>>2];c[r+48+32+12>>2]=c[x+12>>2];x=c[b+112>>2]|0;e=c[r+48+16+(x<<2)>>2]|0;y=c[r+48+32+(x<<2)>>2]|0;n=c[b+36>>2]|0;c[n+(j<<4)>>2]=c[r+48+(x<<2)>>2];c[n+(j<<4)+4>>2]=e;c[n+(j<<4)+8>>2]=y;g[n+(j<<4)+12>>2]=0.0;n=c[b+36>>2]|0;y=n+(j<<4)|0;z=+g[y>>2];e=h+(j*284|0)|0;f=+g[e>>2];x=n+(j<<4)+4|0;w=+g[x>>2];s=h+(j*284|0)+4|0;k=+g[s>>2];n=n+(j<<4)+8|0;t=+g[n>>2];o=h+(j*284|0)+8|0;v=+g[o>>2];m=z-f*(z*f+w*k+t*v);u=w-k*(z*f+w*k+t*v);v=t-v*(z*f+w*k+t*v);t=1.0/+B(+(v*v+(m*m+u*u)));g[y>>2]=m*t;g[x>>2]=u*t;g[n>>2]=v*t;k=+g[s>>2];w=+g[o>>2];f=+g[e>>2];e=c[b+16>>2]|0;g[e+(j<<4)>>2]=k*v*t-w*u*t;g[e+(j<<4)+4>>2]=w*m*t-v*t*f;g[e+(j<<4)+8>>2]=u*t*f-k*m*t;g[e+(j<<4)+12>>2]=0.0;e=c[b+16>>2]|0;o=e+(j<<4)|0;t=+g[o>>2];s=e+(j<<4)+4|0;m=+g[s>>2];e=e+(j<<4)+8|0;k=+g[e>>2];f=1.0/+B(+(t*t+m*m+k*k));g[o>>2]=t*f;g[s>>2]=m*f;g[e>>2]=k*f;e=c[b+108>>2]|0;s=c[b+36>>2]|0;f=+g[s+(j<<4)>>2];k=+g[s+(j<<4)+4>>2];m=+g[s+(j<<4)+8>>2];if(f*f+k*k+m*m>1.100000023841858)f=0.0;else{D=+g[h+(j*284|0)+16>>2];H=D-+g[e+52>>2];F=+g[h+(j*284|0)+20>>2];J=F-+g[e+56>>2];K=+g[h+(j*284|0)+24>>2];M=K-+g[e+60>>2];D=D-+g[i+52>>2];F=F-+g[i+56>>2];K=K-+g[i+60>>2];G=+g[e+392>>2];N=+g[e+396>>2];I=+g[e+388>>2];C=+g[i+392>>2];L=+g[i+396>>2];E=+g[i+388>>2];A=(m*J-k*M)*+g[e+4>>2]+(f*M-m*H)*+g[e+20>>2]+(k*H-f*J)*+g[e+36>>2];t=(m*J-k*M)*+g[e+8>>2]+(f*M-m*H)*+g[e+24>>2]+(k*H-f*J)*+g[e+40>>2];u=(m*J-k*M)*+g[e+12>>2]+(f*M-m*H)*+g[e+28>>2]+(k*H-f*J)*+g[e+44>>2];v=(F*-m-K*-k)*+g[i+4>>2]+(K*-f-D*-m)*+g[i+20>>2]+(D*-k-F*-f)*+g[i+36>>2];w=(F*-m-K*-k)*+g[i+8>>2]+(K*-f-D*-m)*+g[i+24>>2]+(D*-k-F*-f)*+g[i+40>>2];z=(F*-m-K*-k)*+g[i+12>>2]+(K*-f-D*-m)*+g[i+28>>2]+(D*-k-F*-f)*+g[i+44>>2];f=(f*(M*G-J*N+ +g[e+372>>2]-(K*C-F*L+ +g[i+372>>2]))+k*(+g[e+376>>2]+(H*N-M*I)-(+g[i+376>>2]+(D*L-K*E)))+m*(J*I-H*G+ +g[e+380>>2]-(F*E-D*C+ +g[i+380>>2])))*-.20000000298023224*(1.0/(+g[i+404>>2]+(+g[e+404>>2]+(A*A*+g[e+456>>2]+t*t*+g[e+460>>2]+u*u*+g[e+464>>2]))+(v*v*+g[i+456>>2]+w*w*+g[i+460>>2]+z*z*+g[i+464>>2])))}g[(c[b+76>>2]|0)+(j<<2)>>2]=f;e=c[b+128>>2]|0}j=j+1|0}while((j|0)<(e|0));if((e|0)<=0){l=r;return}h=0;n=0;i=c[b+136>>2]|0;while(1){e=c[i+(n*284|0)+88>>2]|0;if(e){f=+g[i+(n*284|0)+252>>2];if(f!=0.0){f=f*d;e=i}else{N=+g[i+(n*284|0)+256>>2];N=N==0.0?0.0:N;y=c[b+108>>2]|0;x=c[b+16>>2]|0;H=+g[i+(n*284|0)+16>>2];F=+g[i+(n*284|0)+20>>2];A=+g[i+(n*284|0)+24>>2];w=+g[x+(n<<4)>>2];E=+g[x+(n<<4)+4>>2];f=+g[x+(n<<4)+8>>2];P=H-+g[y+52>>2];Q=F-+g[y+56>>2];k=A-+g[y+60>>2];m=+g[y+324>>2]*(Q*f-k*E)+ +g[y+340>>2]*(k*w-P*f)+(P*E-Q*w)*+g[y+356>>2];R=(Q*f-k*E)*+g[y+328>>2]+(k*w-P*f)*+g[y+344>>2]+(P*E-Q*w)*+g[y+360>>2];O=(Q*f-k*E)*+g[y+332>>2]+(k*w-P*f)*+g[y+348>>2]+(P*E-Q*w)*+g[y+364>>2];L=H-+g[e+52>>2];J=F-+g[e+56>>2];D=A-+g[e+60>>2];v=(E*L-w*J)*+g[e+356>>2]+(+g[e+324>>2]*(f*J-E*D)+ +g[e+340>>2]*(w*D-f*L));t=(f*J-E*D)*+g[e+328>>2]+(w*D-f*L)*+g[e+344>>2]+(E*L-w*J)*+g[e+360>>2];u=(f*J-E*D)*+g[e+332>>2]+(w*D-f*L)*+g[e+348>>2]+(E*L-w*J)*+g[e+364>>2];H=H-+g[y+52>>2];F=F-+g[y+56>>2];A=A-+g[y+60>>2];I=+g[y+392>>2];z=+g[y+396>>2];G=+g[y+388>>2];M=+g[e+392>>2];C=+g[e+396>>2];K=+g[e+388>>2];f=-(1.0/(+g[y+404>>2]+(f*(Q*m-P*R)+(w*(k*R-Q*O)+E*(P*O-k*m)))+(+g[e+404>>2]+(f*(J*v-L*t)+(w*(D*t-J*u)+E*(L*u-D*v)))))*((A*I-F*z+ +g[y+372>>2]-(D*M-J*C+ +g[e+372>>2]))*w+(+g[y+376>>2]+(H*z-A*G)-(+g[e+376>>2]+(L*C-D*K)))*E+(F*G-H*I+ +g[y+380>>2]-(J*K-L*M+ +g[e+380>>2]))*f));f=N<f?N:f;f=f<-N?-N:f;e=c[b+136>>2]|0}y=(c[b+56>>2]|0)+(n<<2)|0;g[y>>2]=0.0;j=e+(n*284|0)+280|0;g[j>>2]=1.0;m=+g[i+(n*284|0)+276>>2]*d*+g[i+(n*284|0)+228>>2];g[y>>2]=f;f=f*.5;k=+g[(c[b+76>>2]|0)+(n<<2)>>2];if(f*f+k*k>m*m){R=m/+B(+(f*f+k*k));g[j>>2]=R*+g[j>>2];h=1}}else{g[(c[b+56>>2]|0)+(n<<2)>>2]=0.0;g[i+(n*284|0)+280>>2]=1.0;e=i}n=n+1|0;j=c[b+128>>2]|0;if((n|0)>=(j|0))break;else i=e}if(h&(j|0)>0){h=c[b+76>>2]|0;e=0;do{i=h+(e<<2)|0;if(+g[i>>2]!=0.0?(p=(c[b+136>>2]|0)+(e*284|0)+280|0,q=+g[p>>2],q<1.0):0){y=(c[b+56>>2]|0)+(e<<2)|0;g[y>>2]=q*+g[y>>2];g[i>>2]=+g[p>>2]*+g[i>>2]}e=e+1|0}while((e|0)!=(j|0))}if((j|0)<=0){l=r;return}h=0;do{i=c[b+136>>2]|0;e=c[b+108>>2]|0;j=i+(h*284|0)+16|0;k=+g[j>>2]-+g[e+52>>2];n=i+(h*284|0)+20|0;m=+g[n>>2]-+g[e+56>>2];o=i+(h*284|0)+24|0;d=+g[o>>2]-+g[e+60>>2];g[r+48>>2]=k;g[r+48+4>>2]=m;g[r+48+8>>2]=d;g[r+48+12>>2]=0.0;f=+g[(c[b+56>>2]|0)+(h<<2)>>2];if(f!=0.0){y=c[b+16>>2]|0;Q=f*+g[y+(h<<4)+4>>2];R=f*+g[y+(h<<4)+8>>2];g[r+32>>2]=f*+g[y+(h<<4)>>2];g[r+32+4>>2]=Q;g[r+32+8>>2]=R;g[r+32+12>>2]=0.0;Ij(e,r+32|0,r+48|0)}f=+g[(c[b+76>>2]|0)+(h<<2)>>2];if(f!=0.0){y=c[(c[b+136>>2]|0)+(h*284|0)+88>>2]|0;Q=+g[n>>2]-+g[y+56>>2];P=+g[o>>2]-+g[y+60>>2];g[r+32>>2]=+g[j>>2]-+g[y+52>>2];g[r+32+4>>2]=Q;g[r+32+8>>2]=P;g[r+32+12>>2]=0.0;x=c[b+36>>2]|0;P=+g[x+(h<<4)>>2]*f;Q=f*+g[x+(h<<4)+4>>2];R=f*+g[x+(h<<4)+8>>2];g[r+16>>2]=P;g[r+16+4>>2]=Q;g[r+16+8>>2]=R;g[r+16+12>>2]=0.0;x=c[b+108>>2]|0;s=c[b+116>>2]|0;L=+g[x+4+(s<<2)>>2];M=+g[x+20+(s<<2)>>2];N=+g[x+36+(s<<2)>>2];O=(L*k+M*m+N*d)*(1.0-+g[i+(h*284|0)+244>>2]);g[r+48>>2]=k-L*O;g[r+48+4>>2]=m-M*O;g[r+48+8>>2]=d-N*O;Ij(x,r+16|0,r+48|0);g[r>>2]=-P;g[r+4>>2]=-Q;g[r+8>>2]=-R;g[r+12>>2]=0.0;Ij(y,r,r+32|0)}h=h+1|0}while((h|0)<(c[b+128>>2]|0));l=r;return}function vc(b){b=b|0;var d=0.0,e=0,f=0,h=0.0,i=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0.0;u=l;l=l+176|0;if(!(a[b+738>>0]|0)){l=u;return}g[b+36>>2]=0.0;g[b+744>>2]=0.0;if(!(a[b+736>>0]|0)){e=c[b+28>>2]|0;i=+g[b+600>>2];k=+g[b+604>>2];q=+g[b+608>>2];s=i*+g[e+20>>2]+k*+g[e+24>>2]+q*+g[e+28>>2]+ +g[e+56>>2];f=c[b+32>>2]|0;m=+g[b+664>>2];n=+g[b+668>>2];r=+g[b+672>>2];t=m*+g[f+20>>2]+n*+g[f+24>>2]+r*+g[f+28>>2]+ +g[f+56>>2];o=m*+g[f+36>>2]+n*+g[f+40>>2]+r*+g[f+44>>2]+ +g[f+60>>2];p=i*+g[e+4>>2]+k*+g[e+8>>2]+q*+g[e+12>>2]+ +g[e+52>>2];q=i*+g[e+36>>2]+k*+g[e+40>>2]+q*+g[e+44>>2]+ +g[e+60>>2];r=m*+g[f+4>>2]+n*+g[f+8>>2]+r*+g[f+12>>2]+ +g[f+52>>2];if((r-p)*(r-p)+(t-s)*(t-s)+(o-q)*(o-q)>1.1920928955078125e-07){h=1.0/+B(+((r-p)*(r-p)+(t-s)*(t-s)+(o-q)*(o-q)));g[u>>2]=(r-p)*h;g[u+4>>2]=(t-s)*h;g[u+8>>2]=(o-q)*h;c[u+12>>2]=0;i=(o-q)*h;d=(t-s)*h;h=(r-p)*h}else{c[u>>2]=1065353216;c[u+4>>2]=0;c[u+8>>2]=0;g[u+12>>2]=0.0;i=0.0;d=0.0;h=1.0}if(+A(+i)>.7071067690849304){w=i*i+d*d;v=1.0/+B(+w);i=-(i*v);k=d*v;n=-(h*k);m=h*i;d=w*v;h=k;k=0.0}else{v=h*h+d*d;m=1.0/+B(+v);k=-(d*m);w=h*m;n=i*k;m=v*m;d=-(i*w);h=0.0;i=w}g[u+16>>2]=k;g[u+20>>2]=i;g[u+24>>2]=h;g[u+32>>2]=d;g[u+36>>2]=n;g[u+40>>2]=m;e=c[b+28>>2]|0;c[u+128>>2]=c[e+4>>2];c[u+128+4>>2]=c[e+20>>2];c[u+128+8>>2]=c[e+36>>2];g[u+128+12>>2]=0.0;c[u+128+16>>2]=c[e+8>>2];c[u+128+20>>2]=c[e+24>>2];c[u+128+24>>2]=c[e+40>>2];g[u+128+28>>2]=0.0;c[u+128+32>>2]=c[e+12>>2];c[u+128+36>>2]=c[e+28>>2];c[u+128+40>>2]=c[e+44>>2];g[u+128+44>>2]=0.0;f=c[b+32>>2]|0;c[u+80>>2]=c[f+4>>2];c[u+80+4>>2]=c[f+20>>2];c[u+80+8>>2]=c[f+36>>2];g[u+80+12>>2]=0.0;c[u+80+16>>2]=c[f+8>>2];c[u+80+20>>2]=c[f+24>>2];c[u+80+24>>2]=c[f+40>>2];g[u+80+28>>2]=0.0;c[u+80+32>>2]=c[f+12>>2];c[u+80+36>>2]=c[f+28>>2];c[u+80+40>>2]=c[f+44>>2];g[u+80+44>>2]=0.0;w=s-+g[e+56>>2];v=q-+g[e+60>>2];g[u+64>>2]=p-+g[e+52>>2];g[u+64+4>>2]=w;g[u+64+8>>2]=v;g[u+64+12>>2]=0.0;v=t-+g[f+56>>2];w=o-+g[f+60>>2];g[u+48>>2]=r-+g[f+52>>2];g[u+48+4>>2]=v;g[u+48+8>>2]=w;g[u+48+12>>2]=0.0;Wf(b+48|0,u+128|0,u+80|0,u+64|0,u+48|0,u,e+456|0,+g[e+404>>2],f+456|0,+g[f+404>>2]);f=c[b+28>>2]|0;c[u+128>>2]=c[f+4>>2];c[u+128+4>>2]=c[f+20>>2];c[u+128+8>>2]=c[f+36>>2];g[u+128+12>>2]=0.0;c[u+128+16>>2]=c[f+8>>2];c[u+128+20>>2]=c[f+24>>2];c[u+128+24>>2]=c[f+40>>2];g[u+128+28>>2]=0.0;c[u+128+32>>2]=c[f+12>>2];c[u+128+36>>2]=c[f+28>>2];c[u+128+40>>2]=c[f+44>>2];g[u+128+44>>2]=0.0;e=c[b+32>>2]|0;c[u+80>>2]=c[e+4>>2];c[u+80+4>>2]=c[e+20>>2];c[u+80+8>>2]=c[e+36>>2];g[u+80+12>>2]=0.0;c[u+80+16>>2]=c[e+8>>2];c[u+80+20>>2]=c[e+24>>2];c[u+80+24>>2]=c[e+40>>2];g[u+80+28>>2]=0.0;c[u+80+32>>2]=c[e+12>>2];c[u+80+36>>2]=c[e+28>>2];c[u+80+40>>2]=c[e+44>>2];g[u+80+44>>2]=0.0;w=s-+g[f+56>>2];v=q-+g[f+60>>2];g[u+64>>2]=p-+g[f+52>>2];g[u+64+4>>2]=w;g[u+64+8>>2]=v;g[u+64+12>>2]=0.0;v=t-+g[e+56>>2];w=o-+g[e+60>>2];g[u+48>>2]=r-+g[e+52>>2];g[u+48+4>>2]=v;g[u+48+8>>2]=w;g[u+48+12>>2]=0.0;Wf(b+132|0,u+128|0,u+80|0,u+64|0,u+48|0,u+16|0,f+456|0,+g[f+404>>2],e+456|0,+g[e+404>>2]);e=c[b+28>>2]|0;c[u+128>>2]=c[e+4>>2];c[u+128+4>>2]=c[e+20>>2];c[u+128+8>>2]=c[e+36>>2];g[u+128+12>>2]=0.0;c[u+128+16>>2]=c[e+8>>2];c[u+128+20>>2]=c[e+24>>2];c[u+128+24>>2]=c[e+40>>2];g[u+128+28>>2]=0.0;c[u+128+32>>2]=c[e+12>>2];c[u+128+36>>2]=c[e+28>>2];c[u+128+40>>2]=c[e+44>>2];g[u+128+44>>2]=0.0;f=c[b+32>>2]|0;c[u+80>>2]=c[f+4>>2];c[u+80+4>>2]=c[f+20>>2];c[u+80+8>>2]=c[f+36>>2];g[u+80+12>>2]=0.0;c[u+80+16>>2]=c[f+8>>2];c[u+80+20>>2]=c[f+24>>2];c[u+80+24>>2]=c[f+40>>2];g[u+80+28>>2]=0.0;c[u+80+32>>2]=c[f+12>>2];c[u+80+36>>2]=c[f+28>>2];c[u+80+40>>2]=c[f+44>>2];g[u+80+44>>2]=0.0;w=s-+g[e+56>>2];v=q-+g[e+60>>2];g[u+64>>2]=p-+g[e+52>>2];g[u+64+4>>2]=w;g[u+64+8>>2]=v;g[u+64+12>>2]=0.0;v=t-+g[f+56>>2];w=o-+g[f+60>>2];g[u+48>>2]=r-+g[f+52>>2];g[u+48+4>>2]=v;g[u+48+8>>2]=w;g[u+48+12>>2]=0.0;Wf(b+216|0,u+128|0,u+80|0,u+64|0,u+48|0,u+32|0,e+456|0,+g[e+404>>2],f+456|0,+g[f+404>>2])}e=c[b+560>>2]|0;f=c[b+576>>2]|0;q=+g[b+592>>2];if(+A(+q)>.7071067690849304){w=(c[j>>2]=f,+g[j>>2]);p=1.0/+B(+(q*q+w*w));o=(c[j>>2]=e,+g[j>>2]);d=o;h=w;i=o*-(q*p);k=(q*q+w*w)*p;m=0.0;n=p*w;o=-(p*w*o);p=-(q*p)}else{p=(c[j>>2]=e,+g[j>>2]);o=(c[j>>2]=f,+g[j>>2]);w=1.0/+B(+(p*p+o*o));d=p;h=o;i=(p*p+o*o)*w;k=-(q*w*p);m=-(w*o);n=0.0;o=q*-(w*o);p=w*p}e=c[b+28>>2]|0;R=+g[e+4>>2];L=+g[e+8>>2];E=+g[e+12>>2];I=m*R+p*L+n*E;Q=+g[e+20>>2];C=+g[e+24>>2];J=+g[e+28>>2];y=m*Q+p*C+n*J;P=+g[e+36>>2];r=+g[e+40>>2];G=+g[e+44>>2];N=m*P+p*r+n*G;F=k*R+o*L+i*E;H=k*Q+o*C+i*J;K=k*P+o*r+i*G;s=R*d+L*h+q*E;v=Q*d+C*h+q*J;h=P*d+r*h+q*G;f=c[b+32>>2]|0;z=+g[f+4>>2];x=+g[f+20>>2];i=+g[f+36>>2];o=+g[f+8>>2];p=+g[f+24>>2];t=+g[f+40>>2];m=+g[f+12>>2];q=+g[f+28>>2];M=+g[f+44>>2];c[b+300>>2]=0;c[b+300+4>>2]=0;c[b+300+8>>2]=0;c[b+300+12>>2]=0;g[b+316>>2]=I*R+y*Q+N*P;g[b+320>>2]=I*L+y*C+N*r;g[b+324>>2]=I*E+y*J+N*G;g[b+328>>2]=0.0;g[b+332>>2]=z*-I+x*-y+i*-N;g[b+336>>2]=o*-I+p*-y+t*-N;g[b+340>>2]=m*-I+q*-y+M*-N;g[b+344>>2]=0.0;k=(I*R+y*Q+N*P)*+g[e+456>>2];d=(I*L+y*C+N*r)*+g[e+460>>2];D=(I*E+y*J+N*G)*+g[e+464>>2];g[b+348>>2]=k;g[b+352>>2]=d;g[b+356>>2]=D;g[b+360>>2]=0.0;n=(z*-I+x*-y+i*-N)*+g[f+456>>2];w=(o*-I+p*-y+t*-N)*+g[f+460>>2];O=(m*-I+q*-y+M*-N)*+g[f+464>>2];g[b+364>>2]=n;g[b+368>>2]=w;g[b+372>>2]=O;g[b+376>>2]=0.0;g[b+380>>2]=(I*R+y*Q+N*P)*k+(I*L+y*C+N*r)*d+(I*E+y*J+N*G)*D+((z*-I+x*-y+i*-N)*n+(o*-I+p*-y+t*-N)*w+(m*-I+q*-y+M*-N)*O);O=+g[e+4>>2];N=+g[e+20>>2];M=+g[e+36>>2];q=+g[e+8>>2];m=+g[e+24>>2];y=+g[e+40>>2];I=+g[e+12>>2];w=+g[e+28>>2];t=+g[e+44>>2];p=+g[f+4>>2];o=+g[f+20>>2];n=+g[f+36>>2];i=+g[f+8>>2];x=+g[f+24>>2];z=+g[f+40>>2];D=+g[f+12>>2];G=+g[f+28>>2];J=+g[f+44>>2];c[b+384>>2]=0;c[b+384+4>>2]=0;c[b+384+8>>2]=0;c[b+384+12>>2]=0;g[b+400>>2]=F*O+H*N+K*M;g[b+404>>2]=F*q+H*m+K*y;g[b+408>>2]=F*I+H*w+K*t;g[b+412>>2]=0.0;g[b+416>>2]=p*-F+o*-H+n*-K;g[b+420>>2]=i*-F+x*-H+z*-K;g[b+424>>2]=D*-F+G*-H+J*-K;g[b+428>>2]=0.0;d=(F*O+H*N+K*M)*+g[e+456>>2];E=(F*q+H*m+K*y)*+g[e+460>>2];r=(F*I+H*w+K*t)*+g[e+464>>2];g[b+432>>2]=d;g[b+436>>2]=E;g[b+440>>2]=r;g[b+444>>2]=0.0;k=(p*-F+o*-H+n*-K)*+g[f+456>>2];C=(i*-F+x*-H+z*-K)*+g[f+460>>2];L=(D*-F+G*-H+J*-K)*+g[f+464>>2];g[b+448>>2]=k;g[b+452>>2]=C;g[b+456>>2]=L;g[b+460>>2]=0.0;g[b+464>>2]=(F*O+H*N+K*M)*d+(F*q+H*m+K*y)*E+(F*I+H*w+K*t)*r+((p*-F+o*-H+n*-K)*k+(i*-F+x*-H+z*-K)*C+(D*-F+G*-H+J*-K)*L);L=+g[e+4>>2];K=+g[e+20>>2];J=+g[e+36>>2];H=+g[e+8>>2];G=+g[e+24>>2];F=+g[e+40>>2];D=+g[e+12>>2];C=+g[e+28>>2];z=+g[e+44>>2];x=+g[f+4>>2];i=+g[f+20>>2];k=+g[f+36>>2];n=+g[f+8>>2];o=+g[f+24>>2];p=+g[f+40>>2];r=+g[f+12>>2];t=+g[f+28>>2];w=+g[f+44>>2];c[b+468>>2]=0;c[b+468+4>>2]=0;c[b+468+8>>2]=0;c[b+468+12>>2]=0;g[b+484>>2]=s*L+v*K+h*J;g[b+488>>2]=s*H+v*G+h*F;g[b+492>>2]=s*D+v*C+h*z;g[b+496>>2]=0.0;g[b+500>>2]=x*-s+i*-v+k*-h;g[b+504>>2]=n*-s+o*-v+p*-h;g[b+508>>2]=r*-s+t*-v+w*-h;g[b+512>>2]=0.0;I=(s*L+v*K+h*J)*+g[e+456>>2];E=(s*H+v*G+h*F)*+g[e+460>>2];y=(s*D+v*C+h*z)*+g[e+464>>2];g[b+516>>2]=I;g[b+520>>2]=E;g[b+524>>2]=y;g[b+528>>2]=0.0;m=(x*-s+i*-v+k*-h)*+g[f+456>>2];q=(n*-s+o*-v+p*-h)*+g[f+460>>2];d=(r*-s+t*-v+w*-h)*+g[f+464>>2];g[b+532>>2]=m;g[b+536>>2]=q;g[b+540>>2]=d;g[b+544>>2]=0.0;g[b+548>>2]=(s*L+v*K+h*J)*I+(s*H+v*G+h*F)*E+(s*D+v*C+h*z)*y+((x*-s+i*-v+k*-h)*m+(n*-s+o*-v+p*-h)*q+(r*-s+t*-v+w*-h)*d);g[b+724>>2]=0.0;d=+Ph(b,e+4|0,f+4|0);g[b+728>>2]=d;g[b+708>>2]=0.0;g[b+712>>2]=0.0;a[b+716>>0]=0;h=+g[b+692>>2];do if(h>=0.0){d=(d-+g[b+688>>2])%6.2831854820251465;if(!(d<-3.1415927410125732)){if(d>3.1415927410125732)d=d+-6.2831854820251465}else d=d+6.2831854820251465;if(d<-h){a[b+716>>0]=1;g[b+708>>2]=-(h+d);g[b+712>>2]=1.0;break}if(d>h){a[b+716>>0]=1;g[b+708>>2]=h-d;g[b+712>>2]=-1.0}}while(0);e=c[b+28>>2]|0;N=+g[b+560>>2];O=+g[b+576>>2];R=+g[b+592>>2];P=N*+g[e+4>>2]+O*+g[e+8>>2]+R*+g[e+12>>2];Q=N*+g[e+20>>2]+O*+g[e+24>>2]+R*+g[e+28>>2];R=N*+g[e+36>>2]+O*+g[e+40>>2]+R*+g[e+44>>2];f=c[b+32>>2]|0;g[b+720>>2]=1.0/(P*(P*+g[e+324>>2]+Q*+g[e+340>>2]+R*+g[e+356>>2])+Q*(P*+g[e+328>>2]+Q*+g[e+344>>2]+R*+g[e+360>>2])+R*(P*+g[e+332>>2]+Q*+g[e+348>>2]+R*+g[e+364>>2])+(P*(P*+g[f+324>>2]+Q*+g[f+340>>2]+R*+g[f+356>>2])+Q*(P*+g[f+328>>2]+Q*+g[f+344>>2]+R*+g[f+360>>2])+R*(P*+g[f+332>>2]+Q*+g[f+348>>2]+R*+g[f+364>>2])));l=u;return}function wc(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0,k=0.0,m=0.0,n=0.0,o=0.0,p=0,q=0,r=0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0.0,D=0,E=0,F=0,G=0.0,H=0.0,I=0.0,J=0,K=0,L=0;K=l;l=l+112|0;c[a+348>>2]=a+220;c[a+352>>2]=a+252;c[a+356>>2]=a+284;c[a+360>>2]=a+316;c[a+364>>2]=4;c[a+368>>2]=0;c[a+376>>2]=0;F=c[b+4>>2]|0;c[a>>2]=c[b>>2];c[a+4>>2]=F;c[a+8>>2]=c[b+8>>2];c[a+8+4>>2]=c[b+8+4>>2];c[a+8+8>>2]=c[b+8+8>>2];c[a+8+12>>2]=c[b+8+12>>2];c[a+24>>2]=c[b+24>>2];c[a+24+4>>2]=c[b+24+4>>2];c[a+24+8>>2]=c[b+24+8>>2];c[a+24+12>>2]=c[b+24+12>>2];c[a+40>>2]=c[b+40>>2];c[a+40+4>>2]=c[b+40+4>>2];c[a+40+8>>2]=c[b+40+8>>2];c[a+40+12>>2]=c[b+40+12>>2];c[a+56>>2]=c[b+56>>2];c[a+56+4>>2]=c[b+56+4>>2];c[a+56+8>>2]=c[b+56+8>>2];c[a+56+12>>2]=c[b+56+12>>2];c[a+72>>2]=c[b+72>>2];c[a+72+4>>2]=c[b+72+4>>2];c[a+72+8>>2]=c[b+72+8>>2];c[a+72+12>>2]=c[b+72+12>>2];c[a+88>>2]=c[b+88>>2];c[a+88+4>>2]=c[b+88+4>>2];c[a+88+8>>2]=c[b+88+8>>2];c[a+88+12>>2]=c[b+88+12>>2];c[a+104>>2]=c[b+104>>2];c[a+104+4>>2]=c[b+104+4>>2];c[a+104+8>>2]=c[b+104+8>>2];c[a+104+12>>2]=c[b+104+12>>2];F=c[b+124>>2]|0;c[a+120>>2]=c[b+120>>2];c[a+124>>2]=F;g[a+144>>2]=0.0;c[a+180>>2]=0;c[a+128>>2]=c[d>>2];c[a+128+4>>2]=c[d+4>>2];c[a+128+8>>2]=c[d+8>>2];c[a+128+12>>2]=c[d+12>>2];e=+g[a+128>>2];f=+g[a+132>>2];h=+g[a+136>>2];if(e*e+f*f+h*h>0.0){g[a+164>>2]=0.0;c[a+364>>2]=3;c[a+148>>2]=a+316;c[a+180>>2]=1;Fg(a,-e,-f,-h,a+316|0);b=a+148|0;d=a+164|0}else{g[a+164>>2]=0.0;c[a+364>>2]=3;c[a+148>>2]=a+316;c[a+180>>2]=1;Fg(a,1.0,0.0,0.0,a+316|0);b=a+148|0;d=a+164|0}g[d>>2]=1.0;F=(c[b>>2]|0)+16|0;c[a+128>>2]=c[F>>2];c[a+128+4>>2]=c[F+4>>2];c[a+128+8>>2]=c[F+8>>2];c[a+128+12>>2]=c[F+12>>2];c[K+16+48>>2]=c[F>>2];c[K+16+48+4>>2]=c[F+4>>2];c[K+16+48+8>>2]=c[F+8>>2];c[K+16+48+12>>2]=c[F+12>>2];c[K+16+32>>2]=c[F>>2];c[K+16+32+4>>2]=c[F+4>>2];c[K+16+32+8>>2]=c[F+8>>2];c[K+16+32+12>>2]=c[F+12>>2];c[K+16+16>>2]=c[F>>2];c[K+16+16+4>>2]=c[F+4>>2];c[K+16+16+8>>2]=c[F+8>>2];c[K+16+16+12>>2]=c[F+12>>2];c[K+16>>2]=c[F>>2];c[K+16+4>>2]=c[F+4>>2];c[K+16+8>>2]=c[F+8>>2];c[K+16+12>>2]=c[F+12>>2];F=0;G=0.0;e=e*e+f*f+h*h;E=0;D=c[a+368>>2]|0;f=+g[a+128>>2];k=+g[a+132>>2];h=+g[a+136>>2];a:while(1){b=1-D|0;p=a+148+(D*36|0)|0;m=+B(+(f*f+k*k+h*h));if(m<9.999999747378752e-05){J=6;break}r=a+148+(D*36|0)+32|0;i=c[r>>2]|0;g[a+148+(D*36|0)+16+(i<<2)>>2]=0.0;d=(c[a+364>>2]|0)+-1|0;c[a+364>>2]=d;d=c[a+348+(d<<2)>>2]|0;c[a+148+(D*36|0)+(i<<2)>>2]=d;c[r>>2]=i+1;Fg(a,-f,-k,-h,d);d=c[r>>2]|0;i=c[a+148+(D*36|0)+(d+-1<<2)>>2]|0;f=+g[i+16>>2];h=+g[i+20>>2];k=+g[i+24>>2];z=f-+g[K+16>>2];A=h-+g[K+16+4>>2];C=k-+g[K+16+8>>2];if(z*z+A*A+C*C<9.999999747378752e-05){J=9;break}z=f-+g[K+16+16>>2];A=h-+g[K+16+20>>2];C=k-+g[K+16+24>>2];if(z*z+A*A+C*C<9.999999747378752e-05){J=9;break}z=f-+g[K+16+32>>2];A=h-+g[K+16+36>>2];C=k-+g[K+16+40>>2];if(z*z+A*A+C*C<9.999999747378752e-05){J=9;break}z=f-+g[K+16+48>>2];A=h-+g[K+16+52>>2];C=k-+g[K+16+56>>2];if(z*z+A*A+C*C<9.999999747378752e-05){J=9;break}E=E+1&3;q=K+16+(E<<4)|0;c[q>>2]=c[i+16>>2];c[q+4>>2]=c[i+16+4>>2];c[q+8>>2]=c[i+16+8>>2];c[q+12>>2]=c[i+16+12>>2];C=(+g[a+128>>2]*f+ +g[a+132>>2]*h+ +g[a+136>>2]*k)/m;G=C>G?C:G;if(m-G-m*9.999999747378752e-05<=0.0){J=10;break}c[K+80>>2]=0;b:do switch(d|0){case 2:{q=c[p>>2]|0;p=c[a+148+(D*36|0)+4>>2]|0;e=+g[p+16>>2];f=+g[q+16>>2];h=+g[p+20>>2];k=+g[q+20>>2];m=+g[p+24>>2];n=+g[q+24>>2];if(!((e-f)*(e-f)+(h-k)*(h-k)+(m-n)*(m-n)>0.0)){J=46;break a}o=-(f*(e-f)+k*(h-k)+n*(m-n))/((e-f)*(e-f)+(h-k)*(h-k)+(m-n)*(m-n));if(o>=1.0){g[K>>2]=0.0;g[K+4>>2]=1.0;c[K+80>>2]=2;e=e*e+h*h+m*m;break b}if(!(o<=0.0)){g[K+4>>2]=o;g[K>>2]=1.0-o;c[K+80>>2]=3;e=(n+(m-n)*o)*(n+(m-n)*o)+((f+(e-f)*o)*(f+(e-f)*o)+(k+(h-k)*o)*(k+(h-k)*o));break b}else{g[K>>2]=1.0;g[K+4>>2]=0.0;c[K+80>>2]=1;e=f*f+k*k+n*n;break b}}case 3:{e=+Dd((c[p>>2]|0)+16|0,(c[a+148+(D*36|0)+4>>2]|0)+16|0,(c[a+148+(D*36|0)+8>>2]|0)+16|0,K,K+80|0);break}case 4:{d=c[p>>2]|0;i=c[a+148+(D*36|0)+4>>2]|0;p=c[a+148+(D*36|0)+8>>2]|0;q=c[a+148+(D*36|0)+12>>2]|0;s=+g[d+16>>2];t=+g[q+16>>2];u=+g[d+20>>2];v=+g[q+20>>2];w=+g[d+24>>2];x=+g[q+24>>2];f=+g[i+16>>2];h=+g[i+20>>2];k=+g[i+24>>2];y=+g[p+16>>2];z=+g[p+20>>2];A=+g[p+24>>2];C=(s-t)*(h-v)*(A-x)+((u-v)*(k-x)*(y-t)+(w-x)*(f-t)*(z-v)-(s-t)*(k-x)*(z-v)-(u-v)*(f-t)*(A-x))-(w-x)*(h-v)*(y-t);if(!(C==C&0.0==0.0&C!=0.0&C*(w*((u-h)*(f-y)-(s-f)*(h-z))+(s*((w-k)*(h-z)-(u-h)*(k-A))+u*((s-f)*(k-A)-(w-k)*(f-y))))<=0.0)){J=46;break a}c[K+88>>2]=0;c[K+88+4>>2]=0;c[K+88+8>>2]=0;c[K+84>>2]=0;if(C*(((u-v)*(k-x)-(w-x)*(h-v))*t+v*((w-x)*(f-t)-(s-t)*(k-x))+((s-t)*(h-v)-(u-v)*(f-t))*x)>0.0){e=+Dd(d+16|0,i+16|0,q+16|0,K+88|0,K+84|0);L=c[K+84>>2]|0;c[K+80>>2]=L&2|L<<1&8|L&1;c[K>>2]=c[K+88>>2];c[K+4>>2]=c[K+88+4>>2];g[K+8>>2]=0.0;c[K+12>>2]=c[K+88+8>>2];m=+g[q+16>>2];n=+g[q+20>>2];o=+g[q+24>>2]}else{e=-1.0;m=t;n=v;o=x}if(C*(((h-v)*(A-x)-(k-x)*(z-v))*m+n*((k-x)*(y-t)-(A-x)*(f-t))+((z-v)*(f-t)-(h-v)*(y-t))*o)>0.0?(H=+Dd(i+16|0,p+16|0,q+16|0,K+88|0,K+84|0),e<0.0|H<e):0){c[K+80>>2]=c[K+84>>2]<<1&14;c[K+4>>2]=c[K+88>>2];c[K+8>>2]=c[K+88+4>>2];g[K>>2]=0.0;c[K+12>>2]=c[K+88+8>>2];e=H}if(C*(((z-v)*(w-x)-(A-x)*(u-v))*+g[q+16>>2]+ +g[q+20>>2]*((A-x)*(s-t)-(w-x)*(y-t))+((u-v)*(y-t)-(z-v)*(s-t))*+g[q+24>>2])>0.0?(I=+Dd(p+16|0,d+16|0,q+16|0,K+88|0,K+84|0),e<0.0|I<e):0){L=c[K+84>>2]|0;c[K+80>>2]=L>>>1&1|L<<1&8|L<<2&4;c[K+8>>2]=c[K+88>>2];c[K>>2]=c[K+88+4>>2];g[K+4>>2]=0.0;c[K+12>>2]=c[K+88+8>>2];e=I}if(e<0.0){c[K+80>>2]=15;s=+g[p+20>>2];A=+g[i+24>>2];z=+g[q+16>>2];n=+g[p+24>>2];y=+g[i+16>>2];t=+g[q+20>>2];o=+g[p+16>>2];x=+g[q+24>>2];v=+g[i+20>>2];g[K>>2]=(s*A*z+n*y*t-t*A*o-s*y*x+x*o*v-z*n*v)/C;e=+g[d+20>>2];u=+g[d+24>>2];w=+g[d+16>>2];g[K+4>>2]=(e*n*z+u*o*t-t*n*w-e*o*x+x*w*s-z*u*s)/C;g[K+8>>2]=(v*u*z+A*w*t-t*u*y-v*w*x+x*y*e-z*A*e)/C;g[K+12>>2]=1.0-((s*A*z+n*y*t-t*A*o-s*y*x+x*o*v-z*n*v)/C+(e*n*z+u*o*t-t*n*w-e*o*x+x*w*s-z*u*s)/C+(v*u*z+A*w*t-t*u*y-v*w*x+x*y*e-z*A*e)/C);e=0.0}break}default:{}}while(0);if(!(e>=0.0)){J=46;break}c[a+148+(b*36|0)+32>>2]=0;c[a+128>>2]=0;c[a+128+4>>2]=0;c[a+128+8>>2]=0;c[a+128+12>>2]=0;c[a+368>>2]=b;q=c[r>>2]|0;r=c[K+80>>2]|0;if(q){d=a+148+(D*36|0)|0;i=c[d>>2]|0;if(!(r&1)){L=c[a+364>>2]|0;c[a+364>>2]=L+1;c[a+348+(L<<2)>>2]=i;h=0.0;k=0.0;f=0.0}else{L=c[a+148+(b*36|0)+32>>2]|0;c[a+148+(b*36|0)+(L<<2)>>2]=i;p=c[K>>2]|0;c[a+148+(b*36|0)+32>>2]=L+1;c[a+148+(b*36|0)+16+(L<<2)>>2]=p;L=c[d>>2]|0;f=(c[j>>2]=p,+g[j>>2]);k=+g[L+20>>2]*f;h=+g[L+24>>2]*f;f=+g[L+16>>2]*f+ +g[a+128>>2];g[a+128>>2]=f;k=k+ +g[a+132>>2];g[a+132>>2]=k;h=h+ +g[a+136>>2];g[a+136>>2]=h}if((q|0)!=1){p=1;do{d=a+148+(D*36|0)+(p<<2)|0;i=c[d>>2]|0;if(!(r&1<<p)){L=c[a+364>>2]|0;c[a+364>>2]=L+1;c[a+348+(L<<2)>>2]=i}else{L=c[a+148+(b*36|0)+32>>2]|0;c[a+148+(b*36|0)+(L<<2)>>2]=i;i=c[K+(p<<2)>>2]|0;c[a+148+(b*36|0)+32>>2]=L+1;c[a+148+(b*36|0)+16+(L<<2)>>2]=i;L=c[d>>2]|0;f=(c[j>>2]=i,+g[j>>2]);k=+g[L+20>>2]*f;h=+g[L+24>>2]*f;f=+g[L+16>>2]*f+ +g[a+128>>2];g[a+128>>2]=f;k=k+ +g[a+132>>2];g[a+132>>2]=k;h=h+ +g[a+136>>2];g[a+136>>2]=h}p=p+1|0}while((p|0)!=(q|0))}}else{h=0.0;k=0.0;f=0.0}if((r|0)==15)c[a+376>>2]=1;F=F+1|0;if(F>>>0>=128){J=45;break}d=c[a+376>>2]|0;if(d|0)break;else D=b}if((J|0)==6){c[a+376>>2]=1;b=D;J=48}else if((J|0)==9){b=c[a+368>>2]|0;F=(c[a+148+(b*36|0)+32>>2]|0)+-1|0;c[a+148+(b*36|0)+32>>2]=F;F=c[a+148+(b*36|0)+(F<<2)>>2]|0;L=c[a+364>>2]|0;c[a+364>>2]=L+1;c[a+348+(L<<2)>>2]=F;J=48}else if((J|0)==10){b=c[a+368>>2]|0;F=(c[a+148+(b*36|0)+32>>2]|0)+-1|0;c[a+148+(b*36|0)+32>>2]=F;F=c[a+148+(b*36|0)+(F<<2)>>2]|0;L=c[a+364>>2]|0;c[a+364>>2]=L+1;c[a+348+(L<<2)>>2]=F;J=48}else if((J|0)==45){c[a+376>>2]=2;c[a+372>>2]=a+148+(b*36|0);L=2;l=K;return L|0}else if((J|0)==46){b=c[a+368>>2]|0;F=(c[a+148+(b*36|0)+32>>2]|0)+-1|0;c[a+148+(b*36|0)+32>>2]=F;F=c[a+148+(b*36|0)+(F<<2)>>2]|0;L=c[a+364>>2]|0;c[a+364>>2]=L+1;c[a+348+(L<<2)>>2]=F;J=48}if((J|0)==48)d=c[a+376>>2]|0;c[a+372>>2]=a+148+(b*36|0);switch(d|0){case 0:{G=+g[a+128>>2];H=+g[a+132>>2];I=+g[a+136>>2];g[a+144>>2]=+B(+(G*G+H*H+I*I));L=0;l=K;return L|0}case 1:{g[a+144>>2]=0.0;L=1;l=K;return L|0}default:{L=d;l=K;return L|0}}return 0}function xc(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0,j=0,k=0,m=0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0,u=0,v=0,w=0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0;w=l;l=l+208|0;u=(a[b+68>>0]|0)!=0;t=u?e:d;u=u?d:e;v=c[t+4>>2]|0;if((c[v+72>>2]|0)!=(c[b+80>>2]|0)){j=c[b+52>>2]|0;if((j|0)>0){i=0;do{k=c[(c[b+60>>2]|0)+(i<<2)>>2]|0;if(k|0){Db[c[c[k>>2]>>2]&255](k);m=c[b+4>>2]|0;Ib[c[(c[m>>2]|0)+60>>2]&127](m,c[(c[b+60>>2]|0)+(i<<2)>>2]|0)}i=i+1|0}while((i|0)!=(j|0))}hg(b,d,e);c[b+80>>2]=c[v+72>>2]}d=c[b+52>>2]|0;if(!d){l=w;return}m=c[v+68>>2]|0;j=c[b+4>>2]|0;k=c[b+60>>2]|0;i=c[b+72>>2]|0;c[w+176>>2]=10608;c[w+176+4>>2]=t;c[w+176+8>>2]=u;c[w+176+12>>2]=j;c[w+176+16>>2]=f;c[w+176+20>>2]=h;c[w+176+24>>2]=k;c[w+176+28>>2]=i;i=c[b+32>>2]|0;if((i|0)<0){if((c[b+36>>2]|0)<0){d=c[b+40>>2]|0;if(d|0){if(a[b+44>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+40>>2]=0}a[b+44>>0]=1;c[b+40>>2]=0;c[b+36>>2]=0}do{c[(c[b+40>>2]|0)+(i<<2)>>2]=0;i=i+1|0}while((i|0)!=0);d=c[b+52>>2]|0}c[b+32>>2]=0;if((d|0)>0){k=0;do{i=c[(c[b+60>>2]|0)+(k<<2)>>2]|0;if(i){Ib[c[(c[i>>2]|0)+16>>2]&127](i,b+28|0);i=c[b+32>>2]|0;if((i|0)>0){j=0;do{e=c[(c[b+40>>2]|0)+(j<<2)>>2]|0;if(c[e+780>>2]|0){c[h+4>>2]=e;i=c[e+772>>2]|0;d=c[(c[h+8>>2]|0)+8>>2]|0;if((i|0)==(d|0))te(e,i+4|0,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0);else te(e,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0,d+4|0);c[h+4>>2]=0;i=c[b+32>>2]|0}j=j+1|0}while((j|0)<(i|0))}if((i|0)<0){if((c[b+36>>2]|0)<0){d=c[b+40>>2]|0;if(d|0){if(a[b+44>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+40>>2]=0}a[b+44>>0]=1;c[b+40>>2]=0;c[b+36>>2]=0}do{c[(c[b+40>>2]|0)+(i<<2)>>2]=0;i=i+1|0}while((i|0)!=0)}c[b+32>>2]=0;d=c[b+52>>2]|0}k=k+1|0}while((k|0)<(d|0))}if(!m){if((d|0)>0){i=0;do{Rd(w+176|0,c[(c[v+28>>2]|0)+(i*80|0)+64>>2]|0,i);i=i+1|0}while((i|0)<(d|0))}}else{k=c[t+12>>2]|0;F=+g[k>>2];E=+g[k+16>>2];D=+g[k+32>>2];C=+g[k+4>>2];B=+g[k+20>>2];A=+g[k+36>>2];r=+g[k+8>>2];p=+g[k+24>>2];n=+g[k+40>>2];z=-+g[k+48>>2];y=-+g[k+52>>2];x=-+g[k+56>>2];k=c[u+12>>2]|0;O=+g[k>>2];N=+g[k+16>>2];M=+g[k+32>>2];L=+g[k+4>>2];K=+g[k+20>>2];J=+g[k+36>>2];I=+g[k+8>>2];H=+g[k+24>>2];G=+g[k+40>>2];q=+g[k+48>>2];o=+g[k+52>>2];s=+g[k+56>>2];g[w+32>>2]=F*O+E*N+D*M;g[w+32+4>>2]=F*L+E*K+D*J;g[w+32+8>>2]=F*I+E*H+D*G;g[w+32+12>>2]=0.0;g[w+32+16>>2]=C*O+B*N+A*M;g[w+32+20>>2]=C*L+B*K+A*J;g[w+32+24>>2]=C*I+B*H+A*G;g[w+32+28>>2]=0.0;g[w+32+32>>2]=r*O+p*N+n*M;g[w+32+36>>2]=r*L+p*K+n*J;g[w+32+40>>2]=r*I+p*H+n*G;g[w+32+44>>2]=0.0;g[w+32+48>>2]=F*z+E*y+D*x+(F*q+E*o+D*s);g[w+32+52>>2]=C*z+B*y+A*x+(C*q+B*o+A*s);g[w+32+56>>2]=r*z+p*y+n*x+(r*q+p*o+n*s);g[w+32+60>>2]=0.0;k=c[u+4>>2]|0;Pb[c[(c[k>>2]|0)+8>>2]&127](k,w+32|0,w+112|0,w+96|0);s=+g[h+32>>2];n=+g[w+112>>2]-s;g[w+112>>2]=n;o=+g[w+112+4>>2]-s;g[w+112+4>>2]=o;p=+g[w+112+8>>2]-s;g[w+112+8>>2]=p;q=s+ +g[w+96>>2];g[w+96>>2]=q;r=s+ +g[w+96+4>>2];g[w+96+4>>2]=r;s=s+ +g[w+96+8>>2];g[w+96+8>>2]=s;k=c[m>>2]|0;if(k|0){i=c[b+12>>2]|0;d=c[b+16>>2]|0;if((i|0)<0){if((d|0)<0){d=c[b+20>>2]|0;if(d|0){if(a[b+24>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+20>>2]=0}a[b+24>>0]=1;c[b+20>>2]=0;c[b+16>>2]=0;d=0}do{c[(c[b+20>>2]|0)+(i<<2)>>2]=0;i=i+1|0}while((i|0)!=0)}c[b+12>>2]=0;if((d|0)<64){c[6485]=(c[6485]|0)+1;i=ec(275)|0;if(!i)e=0;else{c[(i+4+15&-16)+-4>>2]=i;e=i+4+15&-16}i=c[b+12>>2]|0;if((i|0)>0){d=0;do{c[e+(d<<2)>>2]=c[(c[b+20>>2]|0)+(d<<2)>>2];d=d+1|0}while((d|0)!=(i|0))}d=c[b+20>>2]|0;if(d){if(a[b+24>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);i=c[b+12>>2]|0}c[b+20>>2]=0}a[b+24>>0]=1;c[b+20>>2]=e;c[b+16>>2]=64;d=64}else i=0;if((i|0)==(d|0)){j=d<<1;if((d|0)<(j|0)){c[6485]=(c[6485]|0)+1;i=ec((d<<3|3)+16|0)|0;if(!i)e=0;else{c[(i+4+15&-16)+-4>>2]=i;e=i+4+15&-16}i=c[b+12>>2]|0;if((i|0)>0){d=0;do{c[e+(d<<2)>>2]=c[(c[b+20>>2]|0)+(d<<2)>>2];d=d+1|0}while((d|0)!=(i|0))}d=c[b+20>>2]|0;if(d){if(a[b+24>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);i=c[b+12>>2]|0}c[b+20>>2]=0}a[b+24>>0]=1;c[b+20>>2]=e;c[b+16>>2]=j}else i=d}c[(c[b+20>>2]|0)+(i<<2)>>2]=k;d=i+1|0;c[b+12>>2]=d;while(1){i=d+-1|0;e=(c[b+20>>2]|0)+(i<<2)|0;f=c[e>>2]|0;c[b+12>>2]=i;do if(((((+g[f>>2]<=q?+g[f+16>>2]>=n:0)?+g[f+4>>2]<=r:0)?+g[f+20>>2]>=o:0)?+g[f+8>>2]<=s:0)?+g[f+24>>2]>=p:0){if(!(c[f+40>>2]|0)){Ib[c[(c[w+176>>2]|0)+12>>2]&127](w+176|0,f);i=c[b+12>>2]|0;break}k=c[f+36>>2]|0;j=c[b+16>>2]|0;do if((i|0)==(j|0)){j=(i|0)==0?1:i<<1;if((d|0)>(j|0)){d=i;break}if(!j)e=0;else{c[6485]=(c[6485]|0)+1;i=ec((j<<2|3)+16|0)|0;if(!i)i=0;else{c[(i+4+15&-16)+-4>>2]=i;i=i+4+15&-16}e=i;i=c[b+12>>2]|0}if((i|0)>0){d=0;do{c[e+(d<<2)>>2]=c[(c[b+20>>2]|0)+(d<<2)>>2];d=d+1|0}while((d|0)!=(i|0))}d=c[b+20>>2]|0;if(d){if(a[b+24>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);i=c[b+12>>2]|0}c[b+20>>2]=0}a[b+24>>0]=1;c[b+20>>2]=e;c[b+16>>2]=j;e=e+(i<<2)|0;d=i;i=j}else{d=i;i=j}while(0);c[e>>2]=k;d=d+1|0;c[b+12>>2]=d;k=c[f+40>>2]|0;do if((d|0)==(i|0)){j=(i|0)==0?1:i<<1;if((i|0)>=(j|0))break;if(!j)e=0;else{c[6485]=(c[6485]|0)+1;i=ec((j<<2|3)+16|0)|0;if(!i)i=0;else{c[(i+4+15&-16)+-4>>2]=i;i=i+4+15&-16}e=i;i=c[b+12>>2]|0}if((i|0)>0){d=0;do{c[e+(d<<2)>>2]=c[(c[b+20>>2]|0)+(d<<2)>>2];d=d+1|0}while((d|0)!=(i|0))}d=c[b+20>>2]|0;if(d){if(a[b+24>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);i=c[b+12>>2]|0}c[b+20>>2]=0}a[b+24>>0]=1;c[b+20>>2]=e;c[b+16>>2]=j}else i=d;while(0);c[(c[b+20>>2]|0)+(i<<2)>>2]=k;i=i+1|0;c[b+12>>2]=i}while(0);if((i|0)>0)d=i;else break}}}e=c[b+52>>2]|0;i=c[b+32>>2]|0;if((i|0)<0){if((c[b+36>>2]|0)<0){d=c[b+40>>2]|0;if(d|0){if(a[b+44>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+40>>2]=0}a[b+44>>0]=1;c[b+40>>2]=0;c[b+36>>2]=0}do{c[(c[b+40>>2]|0)+(i<<2)>>2]=0;i=i+1|0}while((i|0)!=0)}c[b+32>>2]=0;if((e|0)>0){d=0;do{do if(c[(c[b+60>>2]|0)+(d<<2)>>2]|0){f=c[v+28>>2]|0;m=c[f+(d*80|0)+64>>2]|0;h=c[t+12>>2]|0;q=+g[h>>2];r=+g[h+4>>2];s=+g[h+8>>2];x=+g[h+16>>2];y=+g[h+20>>2];z=+g[h+24>>2];G=+g[h+32>>2];I=+g[h+36>>2];K=+g[h+40>>2];A=+g[f+(d*80|0)>>2];B=+g[f+(d*80|0)+16>>2];C=+g[f+(d*80|0)+32>>2];D=+g[f+(d*80|0)+4>>2];E=+g[f+(d*80|0)+20>>2];F=+g[f+(d*80|0)+36>>2];H=+g[f+(d*80|0)+8>>2];J=+g[f+(d*80|0)+24>>2];L=+g[f+(d*80|0)+40>>2];o=+g[f+(d*80|0)+48>>2];p=+g[f+(d*80|0)+52>>2];O=+g[f+(d*80|0)+56>>2];M=+g[h+48>>2]+(q*o+r*p+s*O);N=+g[h+52>>2]+(x*o+y*p+z*O);O=+g[h+56>>2]+(G*o+I*p+K*O);g[w+112>>2]=q*A+r*B+s*C;g[w+112+4>>2]=q*D+r*E+s*F;g[w+112+8>>2]=q*H+r*J+s*L;g[w+112+12>>2]=0.0;g[w+112+16>>2]=x*A+y*B+z*C;g[w+112+20>>2]=x*D+y*E+z*F;g[w+112+24>>2]=x*H+y*J+z*L;g[w+112+28>>2]=0.0;g[w+112+32>>2]=G*A+I*B+K*C;g[w+112+36>>2]=G*D+I*E+K*F;g[w+112+40>>2]=G*H+I*J+K*L;g[w+112+44>>2]=0.0;g[w+112+48>>2]=M;g[w+112+52>>2]=N;g[w+112+56>>2]=O;g[w+112+60>>2]=0.0;Pb[c[(c[m>>2]|0)+8>>2]&127](m,w+112|0,w+96|0,w+32|0);m=c[u+4>>2]|0;Pb[c[(c[m>>2]|0)+8>>2]&127](m,c[u+12>>2]|0,w+16|0,w);if(!(+g[w+96>>2]>+g[w>>2])?!(+g[w+32>>2]<+g[w+16>>2]):0)i=1;else i=0;if(!(!(+g[w+96+8>>2]>+g[w+8>>2])?!(+g[w+32+8>>2]<+g[w+16+8>>2]):0))i=0;if(!(+g[w+96+4>>2]>+g[w+4>>2])?!(+g[w+32+4>>2]<+g[w+16+4>>2]|i^1):0)break;m=c[(c[b+60>>2]|0)+(d<<2)>>2]|0;Db[c[c[m>>2]>>2]&255](m);m=c[b+4>>2]|0;Ib[c[(c[m>>2]|0)+60>>2]&127](m,c[(c[b+60>>2]|0)+(d<<2)>>2]|0);c[(c[b+60>>2]|0)+(d<<2)>>2]=0}while(0);d=d+1|0}while((d|0)<(e|0))}l=w;return}function yc(b,d,e,f,h,i,j,k){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=+i;j=+j;k=k|0;var m=0,n=0.0,o=0,p=0,q=0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0.0,Z=0.0,_=0.0,$=0.0,aa=0;X=l;l=l+16|0;m=c[h+4>>2]|0;if((m|0)<0){if((c[h+8>>2]|0)<0){o=c[h+12>>2]|0;if(o|0){if(a[h+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[o+-4>>2]|0)}c[h+12>>2]=0}a[h+16>>0]=1;c[h+12>>2]=0;c[h+8>>2]=0}do{W=(c[h+12>>2]|0)+(m<<4)|0;c[W>>2]=c[X>>2];c[W+4>>2]=c[X+4>>2];c[W+8>>2]=c[X+8>>2];c[W+12>>2]=c[X+12>>2];m=m+1|0}while((m|0)!=0)}c[h+4>>2]=0;q=c[f+4>>2]|0;if((c[h+8>>2]|0)<(q|0)){if(q){c[6485]=(c[6485]|0)+1;m=ec((q<<4|3)+16|0)|0;if(!m)m=0;else{c[(m+4+15&-16)+-4>>2]=m;m=m+4+15&-16}p=c[h+4>>2]|0;if((p|0)>0){o=0;do{W=m+(o<<4)|0;V=(c[h+12>>2]|0)+(o<<4)|0;c[W>>2]=c[V>>2];c[W+4>>2]=c[V+4>>2];c[W+8>>2]=c[V+8>>2];c[W+12>>2]=c[V+12>>2];o=o+1|0}while((o|0)!=(p|0));p=h+12|0}else p=h+12|0}else{m=0;p=h+12|0}o=c[p>>2]|0;if(o|0){if(a[h+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[o+-4>>2]|0)}c[p>>2]=0}a[h+16>>0]=1;c[p>>2]=m;c[h+8>>2]=q}p=c[d+28>>2]|0;if((p|0)<=0){l=X;return}W=c[d+36>>2]|0;y=+g[e>>2];x=+g[e+4>>2];u=+g[e+8>>2];w=+g[e+16>>2];t=+g[e+20>>2];s=+g[e+24>>2];v=+g[e+32>>2];r=+g[e+36>>2];n=+g[e+40>>2];A=+g[b>>2];B=+g[b+4>>2];C=+g[b+8>>2];V=-1;z=3402823466385288598117041.0e14;m=0;while(1){D=+g[W+(m*36|0)+20>>2];E=+g[W+(m*36|0)+24>>2];F=+g[W+(m*36|0)+28>>2];o=(D*y+E*x+F*u)*A+(D*w+E*t+F*s)*B+(D*v+E*r+F*n)*C<z;V=o?m:V;m=m+1|0;if((m|0)==(p|0))break;else z=o?(D*y+E*x+F*u)*A+(D*w+E*t+F*s)*B+(D*v+E*r+F*n)*C:z}if((V|0)<0){l=X;return}M=c[W+(V*36|0)+4>>2]|0;if((M|0)>0){N=W+(V*36|0)+12|0;O=W+(V*36|0)+20|0;P=W+(V*36|0)+24|0;Q=W+(V*36|0)+28|0;m=0;L=h;K=f;while(1){H=c[N>>2]|0;G=c[H+(m<<2)>>2]|0;f=c[d+16>>2]|0;J=m+1|0;H=c[H+(((J|0)==(M|0)?0:J)<<2)>>2]|0;Z=+g[f+(G<<4)>>2];_=Z-+g[f+(H<<4)>>2];Y=+g[f+(G<<4)+4>>2];$=Y-+g[f+(H<<4)+4>>2];z=+g[f+(G<<4)+8>>2];C=z-+g[f+(H<<4)+8>>2];A=_*y+$*x+C*u;B=_*w+$*t+C*s;C=_*v+$*r+C*n;$=+g[O>>2];_=+g[P>>2];F=+g[Q>>2];D=y*$+x*_+u*F;E=w*$+t*_+s*F;F=v*$+r*_+n*F;z=(Z*y+Y*x+z*u+ +g[e+48>>2])*-(B*F-C*E)+(Z*w+Y*t+z*s+ +g[e+52>>2])*-(C*D-A*F)+(Z*v+Y*r+z*n+ +g[e+56>>2])*-(A*E-B*D);H=K;f=L;m=c[H+4>>2]|0;if((m|0)>=2){p=c[H+12>>2]|0;r=+g[p+(m+-1<<4)>>2];s=+g[p+(m+-1<<4)+4>>2];t=+g[p+(m+-1<<4)+8>>2];o=0;n=r*-(B*F-C*E)+s*-(C*D-A*F)+t*-(A*E-B*D)-z;while(1){w=+g[p+(o<<4)>>2];x=+g[p+(o<<4)+4>>2];y=+g[p+(o<<4)+8>>2];G=c[p+(o<<4)+12>>2]|0;v=w*-(B*F-C*E)+x*-(C*D-A*F)+y*-(A*E-B*D)-z;do if(n<0.0)if(v<0.0){q=c[f+4>>2]|0;if((q|0)==(c[f+8>>2]|0)?(R=(q|0)==0?1:q<<1,(q|0)<(R|0)):0){if(!R)p=0;else{c[6485]=(c[6485]|0)+1;p=ec((R<<4|3)+16|0)|0;if(!p)p=0;else{c[(p+4+15&-16)+-4>>2]=p;p=p+4+15&-16}q=c[f+4>>2]|0}if((q|0)>0){h=0;do{I=p+(h<<4)|0;aa=(c[f+12>>2]|0)+(h<<4)|0;c[I>>2]=c[aa>>2];c[I+4>>2]=c[aa+4>>2];c[I+8>>2]=c[aa+8>>2];c[I+12>>2]=c[aa+12>>2];h=h+1|0}while((h|0)!=(q|0))}q=c[f+12>>2]|0;if(q|0){if(a[f+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[q+-4>>2]|0)}c[f+12>>2]=0}a[f+16>>0]=1;c[f+12>>2]=p;c[f+8>>2]=R;p=c[f+4>>2]|0}else p=q;I=c[f+12>>2]|0;g[I+(p<<4)>>2]=w;g[I+(p<<4)+4>>2]=x;g[I+(p<<4)+8>>2]=y;c[I+(p<<4)+12>>2]=G;I=97;break}else{n=n/(n-v);u=r+(w-r)*n;r=s+(x-s)*n;n=t+(y-t)*n;q=c[f+4>>2]|0;if((q|0)==(c[f+8>>2]|0)?(S=(q|0)==0?1:q<<1,(q|0)<(S|0)):0){if(!S)p=0;else{c[6485]=(c[6485]|0)+1;p=ec((S<<4|3)+16|0)|0;if(!p)p=0;else{c[(p+4+15&-16)+-4>>2]=p;p=p+4+15&-16}q=c[f+4>>2]|0}if((q|0)>0){h=0;do{aa=p+(h<<4)|0;I=(c[f+12>>2]|0)+(h<<4)|0;c[aa>>2]=c[I>>2];c[aa+4>>2]=c[I+4>>2];c[aa+8>>2]=c[I+8>>2];c[aa+12>>2]=c[I+12>>2];h=h+1|0}while((h|0)!=(q|0))}q=c[f+12>>2]|0;if(q|0){if(a[f+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[q+-4>>2]|0)}c[f+12>>2]=0}a[f+16>>0]=1;c[f+12>>2]=p;c[f+8>>2]=S;p=c[f+4>>2]|0}else p=q;I=c[f+12>>2]|0;g[I+(p<<4)>>2]=u;g[I+(p<<4)+4>>2]=r;g[I+(p<<4)+8>>2]=n;g[I+(p<<4)+12>>2]=0.0;I=97;break}else if(v<0.0){n=n/(n-v);u=r+(w-r)*n;r=s+(x-s)*n;n=t+(y-t)*n;q=c[f+4>>2]|0;if((q|0)==(c[f+8>>2]|0)?(T=(q|0)==0?1:q<<1,(q|0)<(T|0)):0){if(!T)p=0;else{c[6485]=(c[6485]|0)+1;p=ec((T<<4|3)+16|0)|0;if(!p)p=0;else{c[(p+4+15&-16)+-4>>2]=p;p=p+4+15&-16}q=c[f+4>>2]|0}if((q|0)>0){h=0;do{aa=p+(h<<4)|0;I=(c[f+12>>2]|0)+(h<<4)|0;c[aa>>2]=c[I>>2];c[aa+4>>2]=c[I+4>>2];c[aa+8>>2]=c[I+8>>2];c[aa+12>>2]=c[I+12>>2];h=h+1|0}while((h|0)!=(q|0))}q=c[f+12>>2]|0;if(q|0){if(a[f+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[q+-4>>2]|0)}c[f+12>>2]=0}a[f+16>>0]=1;c[f+12>>2]=p;c[f+8>>2]=T;p=c[f+4>>2]|0}else p=q;q=c[f+12>>2]|0;g[q+(p<<4)>>2]=u;g[q+(p<<4)+4>>2]=r;g[q+(p<<4)+8>>2]=n;g[q+(p<<4)+12>>2]=0.0;q=(c[f+4>>2]|0)+1|0;c[f+4>>2]=q;if((q|0)==(c[f+8>>2]|0)?(U=(q|0)==0?1:q<<1,(q|0)<(U|0)):0){if(!U)p=0;else{c[6485]=(c[6485]|0)+1;p=ec((U<<4|3)+16|0)|0;if(!p)p=0;else{c[(p+4+15&-16)+-4>>2]=p;p=p+4+15&-16}q=c[f+4>>2]|0}if((q|0)>0){h=0;do{aa=p+(h<<4)|0;I=(c[f+12>>2]|0)+(h<<4)|0;c[aa>>2]=c[I>>2];c[aa+4>>2]=c[I+4>>2];c[aa+8>>2]=c[I+8>>2];c[aa+12>>2]=c[I+12>>2];h=h+1|0}while((h|0)!=(q|0))}q=c[f+12>>2]|0;if(q|0){if(a[f+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[q+-4>>2]|0)}c[f+12>>2]=0}a[f+16>>0]=1;c[f+12>>2]=p;c[f+8>>2]=U;p=c[f+4>>2]|0}else p=q;I=c[f+12>>2]|0;g[I+(p<<4)>>2]=w;g[I+(p<<4)+4>>2]=x;g[I+(p<<4)+8>>2]=y;c[I+(p<<4)+12>>2]=G;I=97}while(0);if((I|0)==97){I=0;c[f+4>>2]=(c[f+4>>2]|0)+1}o=o+1|0;if((o|0)==(m|0))break;n=v;r=w;t=y;s=x;p=c[H+12>>2]|0}m=c[H+4>>2]|0}if((m|0)<0){if((c[H+8>>2]|0)<0){o=c[H+12>>2]|0;if(o|0){if(a[H+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[o+-4>>2]|0)}c[H+12>>2]=0}a[H+16>>0]=1;c[H+12>>2]=0;c[H+8>>2]=0}do{aa=(c[H+12>>2]|0)+(m<<4)|0;c[aa>>2]=c[X>>2];c[aa+4>>2]=c[X+4>>2];c[aa+8>>2]=c[X+8>>2];c[aa+12>>2]=c[X+12>>2];m=m+1|0}while((m|0)!=0)}c[H+4>>2]=0;if((J|0)==(M|0))break;aa=K;m=J;y=+g[e>>2];x=+g[e+4>>2];u=+g[e+8>>2];w=+g[e+16>>2];t=+g[e+20>>2];s=+g[e+24>>2];v=+g[e+32>>2];r=+g[e+36>>2];n=+g[e+40>>2];K=L;L=aa}p=O;o=P;m=Q;q=e+48|0;h=e+52|0;G=e+56|0;H=f+4|0;y=+g[e>>2];x=+g[e+4>>2];u=+g[e+8>>2];w=+g[e+16>>2];t=+g[e+20>>2];s=+g[e+24>>2];v=+g[e+32>>2];r=+g[e+36>>2];n=+g[e+40>>2]}else{p=W+(V*36|0)+20|0;o=W+(V*36|0)+24|0;m=W+(V*36|0)+28|0;q=e+48|0;h=e+52|0;G=e+56|0;H=f+4|0}Z=+g[p>>2];_=+g[o>>2];$=+g[m>>2];u=Z*y+_*x+$*u;t=Z*w+_*t+$*s;s=Z*v+_*r+$*n;r=+g[W+(V*36|0)+32>>2]-(u*+g[q>>2]+t*+g[h>>2]+s*+g[G>>2]);m=c[H>>2]|0;if((m|0)<=0){l=X;return}q=f+12|0;p=0;do{aa=c[q>>2]|0;o=aa+(p<<4)|0;n=r+(u*+g[o>>2]+t*+g[aa+(p<<4)+4>>2]+s*+g[aa+(p<<4)+8>>2]);n=n<=i?i:n;if(n<=j){c[X>>2]=c[o>>2];c[X+4>>2]=c[o+4>>2];c[X+8>>2]=c[o+8>>2];c[X+12>>2]=c[o+12>>2];Nb[c[(c[k>>2]|0)+16>>2]&15](k,b,X,n);m=c[H>>2]|0}p=p+1|0}while((p|0)<(m|0));l=X;return}function zc(b,d){b=b|0;d=d|0;var e=0,f=0,h=0,i=0,j=0,k=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0;u=l;l=l+16|0;j=c[b+228>>2]|0;i=c[b+196>>2]|0;if((i|0)<(j|0)){if((c[b+200>>2]|0)<(j|0)){if(!j){e=0;h=i}else{c[6485]=(c[6485]|0)+1;e=ec((j<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}h=c[b+196>>2]|0}if((h|0)>0){f=0;do{c[e+(f<<2)>>2]=c[(c[b+204>>2]|0)+(f<<2)>>2];f=f+1|0}while((f|0)!=(h|0))}f=c[b+204>>2]|0;if(f|0){if(a[b+208>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[b+204>>2]=0}a[b+208>>0]=1;c[b+204>>2]=e;c[b+200>>2]=j;f=b+204|0}else f=b+204|0;e=i;do{c[(c[f>>2]|0)+(e<<2)>>2]=0;e=e+1|0}while((e|0)!=(j|0))}else f=b+204|0;c[b+196>>2]=j;e=0;while(1){if((e|0)>=(sb[c[(c[b>>2]|0)+104>>2]&127](b)|0))break;c[(c[f>>2]|0)+(e<<2)>>2]=c[(c[b+236>>2]|0)+(e<<2)>>2];e=e+1|0}e=c[b+196>>2]|0;if((e|0)>1)Yf(b+192|0,0,e+-1|0);if(!(sb[c[(c[b>>2]|0)+104>>2]&127](b)|0))e=0;else e=c[f>>2]|0;h=c[b+212>>2]|0;s=c[b+196>>2]|0;t=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;c[h+4>>2]=d;c[h+12>>2]=e;c[h+16>>2]=s;c[h+20>>2]=t;e=c[h+32>>2]|0;if((e|0)<0){if((c[h+36>>2]|0)<0){f=c[h+40>>2]|0;if(f|0){if(a[h+44>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[h+40>>2]=0}a[h+44>>0]=1;c[h+40>>2]=0;c[h+36>>2]=0}do{c[(c[h+40>>2]|0)+(e<<2)>>2]=0;e=e+1|0}while((e|0)!=0)}c[h+32>>2]=0;e=c[h+52>>2]|0;if((e|0)<0){if((c[h+56>>2]|0)<0){f=c[h+60>>2]|0;if(f|0){if(a[h+64>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[h+60>>2]=0}a[h+64>>0]=1;c[h+60>>2]=0;c[h+56>>2]=0}do{c[(c[h+60>>2]|0)+(e<<2)>>2]=0;e=e+1|0}while((e|0)!=0)}c[h+52>>2]=0;e=c[h+72>>2]|0;if((e|0)<0){if((c[h+76>>2]|0)<0){f=c[h+80>>2]|0;if(f|0){if(a[h+84>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[h+80>>2]=0}a[h+84>>0]=1;c[h+80>>2]=0;c[h+76>>2]=0}do{c[(c[h+80>>2]|0)+(e<<2)>>2]=0;e=e+1|0}while((e|0)!=0)}c[h+72>>2]=0;t=c[b+216>>2]|0;e=c[(c[t>>2]|0)+8>>2]|0;q=c[b+8>>2]|0;s=c[b+24>>2]|0;s=sb[c[(c[s>>2]|0)+36>>2]&127](s)|0;Mb[e&127](t,q,s);s=c[b+220>>2]|0;q=c[b+24>>2]|0;t=c[b+212>>2]|0;e=c[s+28>>2]|0;if((e|0)<0){if((c[s+32>>2]|0)<0){f=c[s+36>>2]|0;if(f|0){if(a[s+40>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[s+36>>2]=0}a[s+40>>0]=1;c[s+36>>2]=0;c[s+32>>2]=0}do{c[(c[s+36>>2]|0)+(e<<2)>>2]=0;e=e+1|0}while((e|0)!=0)}c[s+28>>2]=0;j=c[s+8>>2]|0;if((j|0)>0){k=c[s+16>>2]|0;i=0;do{m=k+(i<<3)|0;e=c[m>>2]|0;if((e|0)!=(i|0)){c[m>>2]=c[k+(e<<3)>>2];e=c[k+(e<<3)>>2]|0;f=c[k+(e<<3)>>2]|0;if((e|0)!=(f|0)){h=k+(e<<3)|0;do{e=k+(f<<3)|0;c[h>>2]=c[e>>2];e=c[e>>2]|0;h=k+(e<<3)|0;f=c[h>>2]|0}while((e|0)!=(f|0))}}else e=i;c[m>>2]=e;i=i+1|0}while((i|0)!=(j|0));if((j|0)>1){ei(s+4|0,0,j+-1|0);n=c[s+8>>2]|0}else n=j;if((n|0)>0){o=c[s+16>>2]|0;k=0;while(1){p=c[o+(k<<3)>>2]|0;e=k+1|0;a:do if((e|0)<(n|0)){f=k;h=e;while(1){if((c[o+(h<<3)>>2]|0)!=(p|0)){e=h;break a}e=h+1|0;if((e|0)<(n|0)){f=h;h=e}else{f=h;break}}}else f=k;while(0);b:do if((k|0)<=(f|0)){m=c[b+16>>2]|0;h=1;j=k;while(1){i=c[m+(c[o+(j<<3)+4>>2]<<2)>>2]|0;if((c[i+208>>2]|0)==(p|0)){i=c[i+220>>2]|0;h=(i|0)!=4&(h&(i|0)!=1)}if((j|0)<(f|0))j=j+1|0;else break}if(h){h=k;while(1){i=c[m+(c[o+(h<<3)+4>>2]<<2)>>2]|0;do if((c[i+208>>2]|0)==(p|0)){if((c[i+220>>2]&-2|0)==4)break;c[i+220>>2]=2}while(0);if((h|0)>=(f|0))break b;h=h+1|0}}else{h=k;while(1){i=c[m+(c[o+(h<<3)+4>>2]<<2)>>2]|0;do if((c[i+208>>2]|0)==(p|0)){if((c[i+220>>2]|0)!=2)break;c[i+220>>2]=3;g[i+224>>2]=0.0}while(0);if((h|0)>=(f|0))break b;h=h+1|0}}}while(0);if((e|0)<(n|0))k=e;else break}}}k=sb[c[(c[q>>2]|0)+36>>2]&127](q)|0;if((k|0)>0){j=0;do{m=ub[c[(c[q>>2]|0)+40>>2]&31](q,j)|0;h=c[m+772>>2]|0;i=c[m+776>>2]|0;if((h|0)!=0?(c[h+220>>2]|0)!=2:0){e=c[h+204>>2]|0;if(!(e&2))f=112;else f=107}else f=102;if(((f|0)==102?(f=0,i|0):0)?(c[i+220>>2]|0)!=2:0){e=c[h+204>>2]|0;if((e&2|0)!=0?(c[h+220>>2]|0)!=2:0)f=107;else f=112}if((f|0)==107)if((e&4|0)==0?(c[i+204>>2]&3|0)==0:0){if((c[i+220>>2]&-2|0)!=4)c[i+220>>2]=1;g[i+224>>2]=0.0;f=112}else f=112;if((f|0)==112){p=c[i+204>>2]|0;if(p&2|0?((p&4|e&3|0)==0?(c[i+220>>2]|0)!=2:0):0){if((c[h+220>>2]&-2|0)!=4)c[h+220>>2]=1;g[h+224>>2]=0.0}if(a[s+64>>0]|0?wb[c[(c[q>>2]|0)+28>>2]&63](q,h,i)|0:0){f=c[s+28>>2]|0;if((f|0)==(c[s+32>>2]|0)?(r=(f|0)==0?1:f<<1,(f|0)<(r|0)):0){if(!r)e=0;else{c[6485]=(c[6485]|0)+1;e=ec((r<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}f=c[s+28>>2]|0}if((f|0)>0){h=0;do{c[e+(h<<2)>>2]=c[(c[s+36>>2]|0)+(h<<2)>>2];h=h+1|0}while((h|0)!=(f|0))}h=c[s+36>>2]|0;if(h){if(a[s+40>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0);f=c[s+28>>2]|0}c[s+36>>2]=0}a[s+40>>0]=1;c[s+36>>2]=e;c[s+32>>2]=r;e=f}else e=f;c[(c[s+36>>2]|0)+(e<<2)>>2]=m;c[s+28>>2]=e+1}}j=j+1|0}while((j|0)<(k|0));e=s+64|0}else e=s+64|0;r=c[s+8>>2]|0;if(!(a[e>>0]|0)){r=sb[c[(c[q>>2]|0)+44>>2]&127](q)|0;s=sb[c[(c[q>>2]|0)+36>>2]&127](q)|0;Ub[c[(c[t>>2]|0)+8>>2]&7](t,c[b+16>>2]|0,c[b+8>>2]|0,r,s,-1);t=c[b+212>>2]|0;jg(t);t=c[b+216>>2]|0;s=c[t>>2]|0;s=s+16|0;s=c[s>>2]|0;b=b+72|0;b=c[b>>2]|0;Mb[s&127](t,d,b);l=u;return}q=c[s+28>>2]|0;if((q|0)>1)Tf(s+24|0,0,q+-1|0);if((r|0)<=0){t=c[b+212>>2]|0;jg(t);t=c[b+216>>2]|0;s=c[t>>2]|0;s=s+16|0;s=c[s>>2]|0;b=b+72|0;b=c[b>>2]|0;Mb[s&127](t,d,b);l=u;return}e=0;j=1;p=0;while(1){f=c[s+16>>2]|0;o=c[f+(e<<3)>>2]|0;c:do if((e|0)<(r|0)){n=1;k=c[s+48>>2]|0;h=c[s+52>>2]|0;while(1){m=c[(c[b+16>>2]|0)+(c[f+(e<<3)+4>>2]<<2)>>2]|0;if((k|0)==(h|0)){k=(h|0)==0?1:h<<1;if((h|0)<(k|0)){if(!k)f=0;else{c[6485]=(c[6485]|0)+1;f=ec((k<<2|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}h=c[s+48>>2]|0}if((h|0)>0){i=0;do{c[f+(i<<2)>>2]=c[(c[s+56>>2]|0)+(i<<2)>>2];i=i+1|0}while((i|0)!=(h|0))}i=c[s+56>>2]|0;if(i){if(a[s+60>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0);h=c[s+48>>2]|0}c[s+56>>2]=0}a[s+60>>0]=1;c[s+56>>2]=f;c[s+52>>2]=k;f=h;h=k}else f=h}else f=k;c[(c[s+56>>2]|0)+(f<<2)>>2]=m;k=f+1|0;c[s+48>>2]=k;i=c[m+220>>2]|0;i=n&((i|0)==5|(i|0)==2);e=e+1|0;if((e|0)>=(r|0)){n=e;break c}f=c[s+16>>2]|0;if((c[f+(e<<3)>>2]|0)!=(o|0)){n=e;break}else n=i}}else{n=e;i=1}while(0);if((p|0)<(q|0)){k=c[s+36>>2]|0;m=k+(p<<2)|0;f=c[m>>2]|0;e=c[(c[f+772>>2]|0)+208>>2]|0;if((e|0)<=-1)e=c[(c[f+776>>2]|0)+208>>2]|0;if((e|0)==(o|0)){e=p+1|0;d:do if((e|0)<(q|0))do{h=c[k+(e<<2)>>2]|0;f=c[(c[h+772>>2]|0)+208>>2]|0;if((f|0)<=-1)f=c[(c[h+776>>2]|0)+208>>2]|0;if((o|0)!=(f|0))break d;e=e+1|0}while((e|0)<(q|0));while(0);f=m;h=e-p|0;j=e}else{f=0;h=0}}else{f=0;h=0}if(!i)Ub[c[(c[t>>2]|0)+8>>2]&7](t,c[s+56>>2]|0,c[s+48>>2]|0,f,h,o);p=(h|0)==0?p:j;e=c[s+48>>2]|0;if((e|0)<0){if((c[s+52>>2]|0)<0){f=c[s+56>>2]|0;if(f|0){if(a[s+60>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[s+56>>2]=0}a[s+60>>0]=1;c[s+56>>2]=0;c[s+52>>2]=0}do{c[(c[s+56>>2]|0)+(e<<2)>>2]=0;e=e+1|0}while((e|0)!=0)}c[s+48>>2]=0;if((n|0)>=(r|0))break;else e=n}t=c[b+212>>2]|0;jg(t);t=c[b+216>>2]|0;s=c[t>>2]|0;s=s+16|0;s=c[s>>2]|0;b=b+72|0;b=c[b>>2]|0;Mb[s&127](t,d,b);l=u;return}function Ac(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0.0,S=0,T=0;T=l;l=l+1104|0;c[T+1016+8>>2]=0;c[T+1016+12>>2]=-1;q=T+1016+28|0;c[T+1016>>2]=9792;c[T+1016+4>>2]=8;c[T+1016+16>>2]=1065353216;c[T+1016+20>>2]=1065353216;c[T+1016+24>>2]=1065353216;c[q>>2]=0;c[q+4>>2]=0;c[q+8>>2]=0;c[q+12>>2]=0;c[q+16>>2]=0;c[q+20>>2]=0;c[q+24>>2]=0;q=c[e+4>>2]|0;r=c[e+12>>2]|0;p=c[q+4>>2]|0;if((p|0)<20){c[T+368>>2]=7004;c[T+368+168>>2]=0;g[T+368+172>>2]=0.0;c[T+368+164>>2]=c[f+4>>2];g[T+308>>2]=9.999999747378752e-05;a[T+332>>0]=0;c[T+1072>>2]=10476;c[T+1072+4>>2]=T;c[T+1072+8>>2]=T+1016;c[T+1072+12>>2]=q;c[T+1e3>>2]=10208;c[T+1e3+4>>2]=T;c[T+1e3+8>>2]=T+1016;c[T+1e3+12>>2]=q;S=(c[f+20>>2]&8|0)==0?T+1072|0:T+1e3|0;if((zb[c[(c[S>>2]|0)+8>>2]&3](S,b,d,r,r,T+368|0)|0?(h=T+368+132|0,i=+g[h>>2],j=+g[T+368+136>>2],k=+g[T+368+140>>2],i*i+j*j+k*k>9.999999747378752e-05):0)?(m=+g[T+368+164>>2],m<+g[f+4>>2]):0){R=1.0/+B(+(i*i+j*j+k*k));g[h>>2]=i*R;g[T+368+136>>2]=j*R;g[T+368+140>>2]=k*R;c[T+880>>2]=c[e+8>>2];c[T+880+4>>2]=0;c[T+880+8>>2]=c[h>>2];c[T+880+8+4>>2]=c[h+4>>2];c[T+880+8+8>>2]=c[h+8>>2];c[T+880+8+12>>2]=c[h+12>>2];g[T+880+24>>2]=m;+lb[c[(c[f>>2]|0)+12>>2]&31](f,T+880|0,1)}l=T;return}if((p+-21|0)>>>0<9){G=+g[r>>2];H=+g[r+16>>2];m=+g[r+32>>2];I=+g[r+4>>2];J=+g[r+20>>2];n=+g[r+36>>2];N=+g[r+8>>2];P=+g[r+24>>2];R=+g[r+40>>2];K=-+g[r+48>>2];L=-+g[r+52>>2];M=-+g[r+56>>2];Q=+g[b+48>>2];O=+g[b+52>>2];k=+g[b+56>>2];i=G*K+H*L+m*M+(G*Q+H*O+m*k);j=I*K+J*L+n*M+(I*Q+J*O+n*k);k=N*K+P*L+R*M+(N*Q+P*O+R*k);g[T+1e3>>2]=i;g[T+1e3+4>>2]=j;g[T+1e3+8>>2]=k;g[T+1e3+12>>2]=0.0;O=+g[d+48>>2];Q=+g[d+52>>2];o=+g[d+56>>2];m=G*K+H*L+m*M+(G*O+H*Q+m*o);n=I*K+J*L+n*M+(I*O+J*Q+n*o);o=N*K+P*L+R*M+(N*O+P*Q+R*o);if((p|0)==21){h=c[e+8>>2]|0;S=c[f+20>>2]|0;c[T+880+4>>2]=c[T+1e3>>2];c[T+880+4+4>>2]=c[T+1e3+4>>2];c[T+880+4+8>>2]=c[T+1e3+8>>2];c[T+880+4+12>>2]=c[T+1e3+12>>2];g[T+880+20>>2]=m;g[T+880+24>>2]=n;g[T+880+28>>2]=o;g[T+880+32>>2]=0.0;c[T+880+36>>2]=S;g[T+880+40>>2]=1.0;c[T+880>>2]=7032;c[T+880+44>>2]=f;c[T+880+48>>2]=h;c[T+880+52>>2]=q;c[T+880+56>>2]=c[r>>2];c[T+880+56+4>>2]=c[r+4>>2];c[T+880+56+8>>2]=c[r+8>>2];c[T+880+56+12>>2]=c[r+12>>2];c[T+880+72>>2]=c[r+16>>2];c[T+880+72+4>>2]=c[r+16+4>>2];c[T+880+72+8>>2]=c[r+16+8>>2];c[T+880+72+12>>2]=c[r+16+12>>2];c[T+880+88>>2]=c[r+32>>2];c[T+880+88+4>>2]=c[r+32+4>>2];c[T+880+88+8>>2]=c[r+32+8>>2];c[T+880+88+12>>2]=c[r+32+12>>2];c[T+880+104>>2]=c[r+48>>2];c[T+880+104+4>>2]=c[r+48+4>>2];c[T+880+104+8>>2]=c[r+48+8>>2];c[T+880+104+12>>2]=c[r+48+12>>2];c[T+880+40>>2]=c[f+4>>2];h=c[q+52>>2]|0;c[T+1072>>2]=8084;c[T+1072+4>>2]=h;c[T+1072+8>>2]=T+880;h=c[q+56>>2]|0;c[T+368>>2]=0;c[T+368+4>>2]=0;c[T+368+8>>2]=0;c[T+368+12>>2]=0;c[T>>2]=0;c[T+4>>2]=0;c[T+8>>2]=0;c[T+12>>2]=0;if(!(a[h+60>>0]|0))de(h,T+1072|0,T+1e3|0,m,n,o,T+368|0,T);else Od(h,T+1072|0,T+1e3|0,m,n,o,T+368|0,T,c[h+56>>2]|0)}else{S=c[e+8>>2]|0;v=c[f+20>>2]|0;g[T+368+4>>2]=i;g[T+368+8>>2]=j;g[T+368+12>>2]=k;g[T+368+16>>2]=0.0;g[T+368+20>>2]=m;g[T+368+24>>2]=n;g[T+368+28>>2]=o;g[T+368+32>>2]=0.0;c[T+368+36>>2]=v;g[T+368+40>>2]=1.0;c[T+368>>2]=7056;c[T+368+44>>2]=f;c[T+368+48>>2]=S;c[T+368+52>>2]=q;c[T+368+56>>2]=c[r>>2];c[T+368+56+4>>2]=c[r+4>>2];c[T+368+56+8>>2]=c[r+8>>2];c[T+368+56+12>>2]=c[r+12>>2];c[T+368+72>>2]=c[r+16>>2];c[T+368+72+4>>2]=c[r+16+4>>2];c[T+368+72+8>>2]=c[r+16+8>>2];c[T+368+72+12>>2]=c[r+16+12>>2];c[T+368+88>>2]=c[r+32>>2];c[T+368+88+4>>2]=c[r+32+4>>2];c[T+368+88+8>>2]=c[r+32+8>>2];c[T+368+88+12>>2]=c[r+32+12>>2];c[T+368+104>>2]=c[r+48>>2];c[T+368+104+4>>2]=c[r+48+4>>2];c[T+368+104+8>>2]=c[r+48+8>>2];c[T+368+104+12>>2]=c[r+48+12>>2];c[T+368+40>>2]=c[f+4>>2];g[T>>2]=i;g[T+4>>2]=j;g[T+8>>2]=k;g[T+12>>2]=0.0;if(m<i)g[T>>2]=m;if(n<j)g[T+4>>2]=n;if(o<k)g[T+8>>2]=o;g[T+1072>>2]=i;g[T+1072+4>>2]=j;g[T+1072+8>>2]=k;g[T+1072+12>>2]=0.0;if(i<m)g[T+1072>>2]=m;if(j<n)g[T+1072+4>>2]=n;if(k<o)g[T+1072+8>>2]=o;Pb[c[(c[q>>2]|0)+64>>2]&127](q,T+368|0,T,T+1072|0)}l=T;return}if((p|0)!=31){l=T;return}h=c[q+68>>2]|0;v=c[e+8>>2]|0;c[T+1072>>2]=7080;c[T+1072+4>>2]=v;c[T+1072+8>>2]=q;c[T+1072+12>>2]=r;c[T+1072+16>>2]=b;c[T+1072+20>>2]=d;c[T+1072+24>>2]=f;if(!h){b=c[q+20>>2]|0;if((b|0)>0){h=0;do{bf(T+1072|0,h);h=h+1|0}while((h|0)<(b|0))}}else{j=+g[r+48>>2];M=+g[b+48>>2]-j;k=+g[r+52>>2];N=+g[b+52>>2]-k;i=+g[r+56>>2];D=+g[b+56>>2]-i;E=+g[r>>2];F=+g[r+16>>2];G=+g[r+32>>2];H=+g[r+4>>2];I=+g[r+20>>2];J=+g[r+36>>2];K=+g[r+8>>2];L=+g[r+24>>2];C=+g[r+40>>2];j=+g[d+48>>2]-j;k=+g[d+52>>2]-k;i=+g[d+56>>2]-i;h=c[h>>2]|0;if(h|0){z=G*i+(F*k+j*E)-(M*E+N*F+D*G);A=J*i+(I*k+j*H)-(M*H+N*I+D*J);n=C*i+(L*k+j*K)-(M*K+N*L+D*C);o=1.0/+B(+(z*z+A*A+n*n));w=z*o==0.0?999999984306749440.0:1.0/(z*o);x=A*o==0.0?999999984306749440.0:1.0/(A*o);y=n*o==0.0?999999984306749440.0:1.0/(n*o);c[T+368>>2]=h;f=1;d=126;e=128;t=T+368|0;p=128;v=0;while(1){r=f+-1|0;q=t+(r<<2)|0;u=c[q>>2]|0;c[T>>2]=c[u>>2];c[T+4>>2]=c[u+4>>2];c[T+8>>2]=c[u+8>>2];c[T+12>>2]=c[u+12>>2];c[T+16>>2]=c[u+16>>2];c[T+16+4>>2]=c[u+16+4>>2];c[T+16+8>>2]=c[u+16+8>>2];c[T+16+12>>2]=c[u+16+12>>2];i=w*(+g[T+((w<0.0&1)<<4)>>2]-(M*E+N*F+D*G));j=w*(+g[T+(((w<0.0^1)&1)<<4)>>2]-(M*E+N*F+D*G));k=x*(+g[T+((x<0.0&1)<<4)+4>>2]-(M*H+N*I+D*J));m=x*(+g[T+(((x<0.0^1)&1)<<4)+4>>2]-(M*H+N*I+D*J));do if((!(k>j|i>m)?(P=k>i?k:i,O=m<j?m:j,Q=y*(+g[T+((y<0.0&1)<<4)+8>>2]-(M*K+N*L+D*C)),R=y*(+g[T+(((y<0.0^1)&1)<<4)+8>>2]-(M*K+N*L+D*C)),!(Q>O|P>R)):0)?((R<O?R:O)>0.0?(Q>P?Q:P)<n*n*o+(z*z*o+A*A*o):0):0){if(!(c[u+40>>2]|0)){Ib[c[(c[T+1072>>2]|0)+12>>2]&127](T+1072|0,u);f=r;q=d;h=t;b=v;break}if((r|0)>(d|0)){s=p<<1;if((p|0)<(s|0)){a:do if((e|0)<(s|0)){do if(p){c[6485]=(c[6485]|0)+1;h=ec((p<<3|3)+16|0)|0;if(!h)h=0;else{c[(h+4+15&-16)+-4>>2]=h;h=h+4+15&-16}if((p|0)<=0){S=44;break}b=0;do{c[h+(b<<2)>>2]=c[t+(b<<2)>>2];b=b+1|0}while((b|0)!=(p|0));if(!(v<<24>>24)){e=s;b=1;break a}}else{h=0;S=44}while(0);if((S|0)==44){S=0;if(v<<24>>24==0|(t|0)==0){e=s;b=1;break}}c[6486]=(c[6486]|0)+1;gd(c[t+-4>>2]|0);e=s;b=1}else{h=t;b=v}while(0);uj(h+(p<<2)|0,0,p<<2|0)|0;q=h+(r<<2)|0;p=e}else{p=e;h=t;b=v}d=s+-2|0;e=p;p=s}else{h=t;b=v}c[q>>2]=c[u+36>>2];c[h+(f<<2)>>2]=c[u+40>>2];f=f+1|0;q=d}else{f=r;q=d;h=t;b=v}while(0);if(!f)break;d=q;t=h;v=b}if(!(b<<24>>24==0|(h|0)==0)){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}}}l=T;return}function Bc(d,e,f,h){d=d|0;e=e|0;f=f|0;h=h|0;var i=0,j=0,k=0,l=0,m=0,n=0;c[d+168>>2]=c[d+152>>2];c[e>>2]=10496;c[e+52>>2]=287;a[e+60>>0]=0;a[e+80>>0]=1;c[e+76>>2]=0;c[e+68>>2]=0;c[e+72>>2]=0;a[e+100>>0]=1;c[e+96>>2]=0;c[e+88>>2]=0;c[e+92>>2]=0;a[e+120>>0]=1;c[e+116>>2]=0;c[e+108>>2]=0;c[e+112>>2]=0;a[e+140>>0]=1;c[e+136>>2]=0;c[e+128>>2]=0;c[e+132>>2]=0;c[e+144>>2]=0;a[e+164>>0]=1;c[e+160>>2]=0;c[e+152>>2]=0;c[e+156>>2]=0;c[e+168>>2]=0;c[e+4>>2]=-8388609;c[e+8>>2]=-8388609;c[e+12>>2]=-8388609;g[e+16>>2]=0.0;c[e+20>>2]=2139095039;c[e+24>>2]=2139095039;c[e+28>>2]=2139095039;g[e+32>>2]=0.0;f=c[d+56>>2]|0;if(h){c[e+56>>2]=ez(f|0)|0;a[e+4>>0]=a[d+4+3>>0]|0;a[e+5>>0]=a[d+4+2>>0]|0;a[e+6>>0]=a[d+4+1>>0]|0;a[e+7>>0]=a[d+4>>0]|0;a[e+8>>0]=a[d+8+3>>0]|0;a[e+9>>0]=a[d+8+2>>0]|0;a[e+10>>0]=a[d+8+1>>0]|0;a[e+11>>0]=a[d+8>>0]|0;a[e+12>>0]=a[d+12+3>>0]|0;a[e+13>>0]=a[d+12+2>>0]|0;a[e+14>>0]=a[d+12+1>>0]|0;a[e+15>>0]=a[d+12>>0]|0;a[e+16>>0]=a[d+16+3>>0]|0;a[e+17>>0]=a[d+16+2>>0]|0;a[e+18>>0]=a[d+16+1>>0]|0;a[e+19>>0]=a[d+16>>0]|0;a[e+20>>0]=a[d+20+3>>0]|0;a[e+21>>0]=a[d+20+2>>0]|0;a[e+22>>0]=a[d+20+1>>0]|0;a[e+23>>0]=a[d+20>>0]|0;a[e+24>>0]=a[d+24+3>>0]|0;a[e+25>>0]=a[d+24+2>>0]|0;a[e+26>>0]=a[d+24+1>>0]|0;a[e+27>>0]=a[d+24>>0]|0;a[e+28>>0]=a[d+28+3>>0]|0;a[e+29>>0]=a[d+28+2>>0]|0;a[e+30>>0]=a[d+28+1>>0]|0;a[e+31>>0]=a[d+28>>0]|0;a[e+32>>0]=a[d+32+3>>0]|0;a[e+33>>0]=a[d+32+2>>0]|0;a[e+34>>0]=a[d+32+1>>0]|0;a[e+35>>0]=a[d+32>>0]|0;a[e+36>>0]=a[d+36+3>>0]|0;a[e+37>>0]=a[d+36+2>>0]|0;a[e+38>>0]=a[d+36+1>>0]|0;a[e+39>>0]=a[d+36>>0]|0;a[e+40>>0]=a[d+40+3>>0]|0;a[e+41>>0]=a[d+40+2>>0]|0;a[e+42>>0]=a[d+40+1>>0]|0;a[e+43>>0]=a[d+40>>0]|0;a[e+44>>0]=a[d+44+3>>0]|0;a[e+45>>0]=a[d+44+2>>0]|0;a[e+46>>0]=a[d+44+1>>0]|0;a[e+47>>0]=a[d+44>>0]|0;a[e+48>>0]=a[d+48+3>>0]|0;a[e+49>>0]=a[d+48+2>>0]|0;a[e+50>>0]=a[d+48+1>>0]|0;a[e+51>>0]=a[d+48>>0]|0;c[e+144>>2]=ez(c[d+144>>2]|0)|0;f=ez(c[d+168>>2]|0)|0}else{c[e+56>>2]=f;c[e+4>>2]=c[d+4>>2];c[e+4+4>>2]=c[d+4+4>>2];c[e+4+8>>2]=c[d+4+8>>2];c[e+4+12>>2]=c[d+4+12>>2];c[e+20>>2]=c[d+20>>2];c[e+20+4>>2]=c[d+20+4>>2];c[e+20+8>>2]=c[d+20+8>>2];c[e+20+12>>2]=c[d+20+12>>2];c[e+36>>2]=c[d+36>>2];c[e+36+4>>2]=c[d+36+4>>2];c[e+36+8>>2]=c[d+36+8>>2];c[e+36+12>>2]=c[d+36+12>>2];c[e+144>>2]=c[d+144>>2];f=c[d+168>>2]|0}c[e+168>>2]=f;a[e+60>>0]=a[d+60>>0]|0;k=c[d+56>>2]|0;if(!(a[d+60>>0]|0)){f=c[e+96>>2]|0;if(f|0){if(a[e+100>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[e+96>>2]=0}a[e+100>>0]=0;c[e+96>>2]=e+172;c[e+88>>2]=k;c[e+92>>2]=k;if(h)if((k|0)>0){i=0;j=c[d+96>>2]|0;f=e+172|0;do{l=j+(i<<6)|0;n=f+(i<<6)|0;a[n>>0]=a[l+3>>0]|0;a[n+1>>0]=a[l+2>>0]|0;a[n+2>>0]=a[l+1>>0]|0;a[n+3>>0]=a[l>>0]|0;n=j+(i<<6)+4|0;l=f+(i<<6)+4|0;a[l>>0]=a[n+3>>0]|0;a[l+1>>0]=a[n+2>>0]|0;a[l+2>>0]=a[n+1>>0]|0;a[l+3>>0]=a[n>>0]|0;l=j+(i<<6)+8|0;n=f+(i<<6)+8|0;a[n>>0]=a[l+3>>0]|0;a[n+1>>0]=a[l+2>>0]|0;a[n+2>>0]=a[l+1>>0]|0;a[n+3>>0]=a[l>>0]|0;n=j+(i<<6)+12|0;f=f+(i<<6)+12|0;a[f>>0]=a[n+3>>0]|0;a[f+1>>0]=a[n+2>>0]|0;a[f+2>>0]=a[n+1>>0]|0;a[f+3>>0]=a[n>>0]|0;f=c[d+96>>2]|0;n=f+(i<<6)+16|0;l=c[e+96>>2]|0;m=l+(i<<6)+16|0;a[m>>0]=a[n+3>>0]|0;a[m+1>>0]=a[n+2>>0]|0;a[m+2>>0]=a[n+1>>0]|0;a[m+3>>0]=a[n>>0]|0;m=f+(i<<6)+20|0;n=l+(i<<6)+20|0;a[n>>0]=a[m+3>>0]|0;a[n+1>>0]=a[m+2>>0]|0;a[n+2>>0]=a[m+1>>0]|0;a[n+3>>0]=a[m>>0]|0;n=f+(i<<6)+24|0;m=l+(i<<6)+24|0;a[m>>0]=a[n+3>>0]|0;a[m+1>>0]=a[n+2>>0]|0;a[m+2>>0]=a[n+1>>0]|0;a[m+3>>0]=a[n>>0]|0;f=f+(i<<6)+28|0;l=l+(i<<6)+28|0;a[l>>0]=a[f+3>>0]|0;a[l+1>>0]=a[f+2>>0]|0;a[l+2>>0]=a[f+1>>0]|0;a[l+3>>0]=a[f>>0]|0;j=c[d+96>>2]|0;l=ez(c[j+(i<<6)+32>>2]|0)|0;f=c[e+96>>2]|0;c[f+(i<<6)+32>>2]=l;c[f+(i<<6)+36>>2]=ez(c[j+(i<<6)+36>>2]|0)|0;c[f+(i<<6)+40>>2]=ez(c[j+(i<<6)+40>>2]|0)|0;i=i+1|0}while((i|0)!=(k|0));i=29}else i=28;else if((k|0)>0){i=0;j=c[d+96>>2]|0;f=e+172|0;do{m=j+(i<<6)|0;n=f+(i<<6)|0;c[n>>2]=c[m>>2];c[n+4>>2]=c[m+4>>2];c[n+8>>2]=c[m+8>>2];c[n+12>>2]=c[m+12>>2];n=(c[d+96>>2]|0)+(i<<6)+16|0;f=(c[e+96>>2]|0)+(i<<6)+16|0;c[f>>2]=c[n>>2];c[f+4>>2]=c[n+4>>2];c[f+8>>2]=c[n+8>>2];c[f+12>>2]=c[n+12>>2];j=c[d+96>>2]|0;f=c[e+96>>2]|0;c[f+(i<<6)+32>>2]=c[j+(i<<6)+32>>2];c[f+(i<<6)+36>>2]=c[j+(i<<6)+36>>2];c[f+(i<<6)+40>>2]=c[j+(i<<6)+40>>2];i=i+1|0}while((i|0)!=(k|0));i=29}else i=28;if((i|0)==28){f=k<<6;i=32}else if((i|0)==29)if(f)if((a[e+100>>0]|0)==0|(f|0)==0){f=k<<6;i=32}else{c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0);f=k<<6;i=32}else f=k<<6;if((i|0)==32)c[e+96>>2]=0;c[e+88>>2]=0;c[e+88+4>>2]=0;c[e+88+8>>2]=0;a[e+88+12>>0]=0}else{f=c[e+136>>2]|0;if(f|0){if(a[e+140>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[e+136>>2]=0}a[e+140>>0]=0;c[e+136>>2]=e+172;c[e+128>>2]=k;c[e+132>>2]=k;if(h){if((k|0)>0){i=c[d+136>>2]|0;f=0;do{b[e+172+(f<<4)>>1]=nE(b[i+(f<<4)>>1]|0)|0;b[e+172+(f<<4)+2>>1]=nE(b[i+(f<<4)+2>>1]|0)|0;b[e+172+(f<<4)+4>>1]=nE(b[i+(f<<4)+4>>1]|0)|0;b[e+172+(f<<4)+6>>1]=nE(b[i+(f<<4)+6>>1]|0)|0;b[e+172+(f<<4)+8>>1]=nE(b[i+(f<<4)+8>>1]|0)|0;b[e+172+(f<<4)+10>>1]=nE(b[i+(f<<4)+10>>1]|0)|0;c[e+172+(f<<4)+12>>2]=ez(c[i+(f<<4)+12>>2]|0)|0;f=f+1|0}while((f|0)!=(k|0))}}else if((k|0)>0){i=c[d+136>>2]|0;f=0;do{b[e+172+(f<<4)>>1]=b[i+(f<<4)>>1]|0;b[e+172+(f<<4)+2>>1]=b[i+(f<<4)+2>>1]|0;b[e+172+(f<<4)+4>>1]=b[i+(f<<4)+4>>1]|0;b[e+172+(f<<4)+6>>1]=b[i+(f<<4)+6>>1]|0;b[e+172+(f<<4)+8>>1]=b[i+(f<<4)+8>>1]|0;b[e+172+(f<<4)+10>>1]=b[i+(f<<4)+10>>1]|0;c[e+172+(f<<4)+12>>2]=c[i+(f<<4)+12>>2];f=f+1|0}while((f|0)!=(k|0))}c[e+128>>2]=0;c[e+128+4>>2]=0;c[e+128+8>>2]=0;a[e+128+12>>0]=0;f=k<<4}k=e+172+f|0;f=c[d+168>>2]|0;i=c[e+160>>2]|0;if(i|0){if(a[e+164>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[e+160>>2]=0}a[e+164>>0]=0;c[e+160>>2]=k;c[e+152>>2]=f;c[e+156>>2]=f;j=c[d+168>>2]|0;if(h){if((j|0)<=0){c[e>>2]=0;c[e+152>>2]=0;c[e+152+4>>2]=0;c[e+152+8>>2]=0;a[e+152+12>>0]=0;return 1}i=c[d+160>>2]|0;f=0;do{b[k+(f<<5)>>1]=nE(b[i+(f<<5)>>1]|0)|0;b[k+(f<<5)+2>>1]=nE(b[i+(f<<5)+2>>1]|0)|0;b[k+(f<<5)+4>>1]=nE(b[i+(f<<5)+4>>1]|0)|0;b[k+(f<<5)+6>>1]=nE(b[i+(f<<5)+6>>1]|0)|0;b[k+(f<<5)+8>>1]=nE(b[i+(f<<5)+8>>1]|0)|0;b[k+(f<<5)+10>>1]=nE(b[i+(f<<5)+10>>1]|0)|0;c[k+(f<<5)+12>>2]=ez(c[i+(f<<5)+12>>2]|0)|0;c[k+(f<<5)+16>>2]=ez(c[i+(f<<5)+16>>2]|0)|0;f=f+1|0}while((f|0)!=(j|0));c[e>>2]=0;c[e+152>>2]=0;c[e+152+4>>2]=0;c[e+152+8>>2]=0;a[e+152+12>>0]=0;return 1}else{if((j|0)<=0){c[e>>2]=0;c[e+152>>2]=0;c[e+152+4>>2]=0;c[e+152+8>>2]=0;a[e+152+12>>0]=0;return 1}i=c[d+160>>2]|0;f=0;do{b[k+(f<<5)>>1]=b[i+(f<<5)>>1]|0;b[k+(f<<5)+2>>1]=b[i+(f<<5)+2>>1]|0;b[k+(f<<5)+4>>1]=b[i+(f<<5)+4>>1]|0;b[k+(f<<5)+6>>1]=b[i+(f<<5)+6>>1]|0;b[k+(f<<5)+8>>1]=b[i+(f<<5)+8>>1]|0;b[k+(f<<5)+10>>1]=b[i+(f<<5)+10>>1]|0;c[k+(f<<5)+12>>2]=c[i+(f<<5)+12>>2];c[k+(f<<5)+16>>2]=c[i+(f<<5)+16>>2];c[k+(f<<5)+20>>2]=0;c[k+(f<<5)+24>>2]=0;c[k+(f<<5)+28>>2]=0;f=f+1|0}while((f|0)<(c[d+168>>2]|0));c[e>>2]=0;c[e+152>>2]=0;c[e+152+4>>2]=0;c[e+152+8>>2]=0;a[e+152+12>>0]=0;return 1}return 0}function Cc(b,d,e,f,h,i,j,k,m,n){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;m=m|0;n=n|0;var o=0.0,p=0,q=0,r=0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0,B=0.0,C=0,D=0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0;C=l;l=l+4224|0;if(((c[e+4>>2]|0)+-17|0)>>>0<2)A=((c[f+4>>2]|0)+-17|0)>>>0<2;else A=0;b=0;do{ge();v=+g[20784+(b<<4)>>2];w=+g[20784+(b<<4)+4>>2];x=+g[20784+(b<<4)+8>>2];z=+g[h+4>>2]*-v+ +g[h+20>>2]*-w+ +g[h+36>>2]*-x;y=+g[h+8>>2]*-v+ +g[h+24>>2]*-w+ +g[h+40>>2]*-x;g[C+992+(b<<4)>>2]=+g[h>>2]*-v+ +g[h+16>>2]*-w+ +g[h+32>>2]*-x;g[C+992+(b<<4)+4>>2]=z;g[C+992+(b<<4)+8>>2]=y;g[C+992+(b<<4)+12>>2]=0.0;y=v*+g[i+4>>2]+w*+g[i+20>>2]+x*+g[i+36>>2];z=v*+g[i+8>>2]+w*+g[i+24>>2]+x*+g[i+40>>2];g[C+(b<<4)>>2]=v*+g[i>>2]+w*+g[i+16>>2]+x*+g[i+32>>2];g[C+(b<<4)+4>>2]=y;g[C+(b<<4)+8>>2]=z;g[C+(b<<4)+12>>2]=0.0;b=b+1|0}while((b|0)!=42);q=sb[c[(c[e>>2]|0)+84>>2]&127](e)|0;if((q|0)>0){b=0;p=42;while(1){Mb[c[(c[e>>2]|0)+88>>2]&127](e,b,C+4144|0);y=+g[C+4144>>2];z=+g[C+4144+4>>2];x=+g[C+4144+8>>2];w=y*+g[h+16>>2]+z*+g[h+20>>2]+x*+g[h+24>>2];v=y*+g[h+32>>2]+z*+g[h+36>>2]+x*+g[h+40>>2];g[C+4144>>2]=+g[h>>2]*y+ +g[h+4>>2]*z+ +g[h+8>>2]*x;g[C+4144+4>>2]=w;g[C+4144+8>>2]=v;g[C+4144+12>>2]=0.0;ge();r=20784+(p<<4)|0;c[r>>2]=c[C+4144>>2];c[r+4>>2]=c[C+4144+4>>2];c[r+8>>2]=c[C+4144+8>>2];c[r+12>>2]=c[C+4144+12>>2];v=+g[C+4144>>2];w=+g[C+4144+4>>2];x=+g[C+4144+8>>2];z=+g[h+4>>2]*-v+ +g[h+20>>2]*-w+ +g[h+36>>2]*-x;y=+g[h+8>>2]*-v+ +g[h+24>>2]*-w+ +g[h+40>>2]*-x;g[C+992+(p<<4)>>2]=+g[h>>2]*-v+ +g[h+16>>2]*-w+ +g[h+32>>2]*-x;g[C+992+(p<<4)+4>>2]=z;g[C+992+(p<<4)+8>>2]=y;g[C+992+(p<<4)+12>>2]=0.0;y=v*+g[i+4>>2]+w*+g[i+20>>2]+x*+g[i+36>>2];z=v*+g[i+8>>2]+w*+g[i+24>>2]+x*+g[i+40>>2];g[C+(p<<4)>>2]=v*+g[i>>2]+w*+g[i+16>>2]+x*+g[i+32>>2];g[C+(p<<4)+4>>2]=y;g[C+(p<<4)+8>>2]=z;g[C+(p<<4)+12>>2]=0.0;b=b+1|0;if((b|0)==(q|0))break;else p=p+1|0}p=q+42|0}else p=42;r=sb[c[(c[f>>2]|0)+84>>2]&127](f)|0;if((r|0)>0){b=0;q=p;while(1){Mb[c[(c[f>>2]|0)+88>>2]&127](f,b,C+4144|0);y=+g[C+4144>>2];z=+g[C+4144+4>>2];x=+g[C+4144+8>>2];w=y*+g[i+16>>2]+z*+g[i+20>>2]+x*+g[i+24>>2];v=y*+g[i+32>>2]+z*+g[i+36>>2]+x*+g[i+40>>2];g[C+4144>>2]=+g[i>>2]*y+ +g[i+4>>2]*z+ +g[i+8>>2]*x;g[C+4144+4>>2]=w;g[C+4144+8>>2]=v;g[C+4144+12>>2]=0.0;ge();D=20784+(q<<4)|0;c[D>>2]=c[C+4144>>2];c[D+4>>2]=c[C+4144+4>>2];c[D+8>>2]=c[C+4144+8>>2];c[D+12>>2]=c[C+4144+12>>2];v=+g[C+4144>>2];w=+g[C+4144+4>>2];x=+g[C+4144+8>>2];z=+g[h+4>>2]*-v+ +g[h+20>>2]*-w+ +g[h+36>>2]*-x;y=+g[h+8>>2]*-v+ +g[h+24>>2]*-w+ +g[h+40>>2]*-x;g[C+992+(q<<4)>>2]=+g[h>>2]*-v+ +g[h+16>>2]*-w+ +g[h+32>>2]*-x;g[C+992+(q<<4)+4>>2]=z;g[C+992+(q<<4)+8>>2]=y;g[C+992+(q<<4)+12>>2]=0.0;y=v*+g[i+4>>2]+w*+g[i+20>>2]+x*+g[i+36>>2];z=v*+g[i+8>>2]+w*+g[i+24>>2]+x*+g[i+40>>2];g[C+(q<<4)>>2]=v*+g[i>>2]+w*+g[i+16>>2]+x*+g[i+32>>2];g[C+(q<<4)+4>>2]=y;g[C+(q<<4)+8>>2]=z;g[C+(q<<4)+12>>2]=0.0;b=b+1|0;if((b|0)==(r|0))break;else q=q+1|0}p=r+p|0}Pb[c[(c[e>>2]|0)+76>>2]&127](e,C+992|0,C+2976|0,p);Pb[c[(c[f>>2]|0)+76>>2]&127](f,C,C+1984|0,p);if((p|0)>0){v=999999984306749440.0;b=0;y=0.0;o=0.0;x=0.0;s=0.0;while(1){ge();u=+g[20784+(b<<4)>>2];w=+g[20784+(b<<4)+4>>2];t=+g[20784+(b<<4)+12>>2];z=A?0.0:+g[20784+(b<<4)+8>>2];if(u*u+w*w+z*z>.01?(F=+g[C+2976+(b<<4)>>2],E=+g[C+2976+(b<<4)+4>>2],B=+g[C+2976+(b<<4)+8>>2],I=+g[C+1984+(b<<4)>>2],H=+g[C+1984+(b<<4)+4>>2],G=+g[C+1984+(b<<4)+8>>2],B=u*(I*+g[i>>2]+H*+g[i+4>>2]+G*+g[i+8>>2]+ +g[i+48>>2]-(F*+g[h>>2]+E*+g[h+4>>2]+B*+g[h+8>>2]+ +g[h+48>>2]))+w*(I*+g[i+16>>2]+H*+g[i+20>>2]+G*+g[i+24>>2]+ +g[i+52>>2]-(F*+g[h+16>>2]+E*+g[h+20>>2]+B*+g[h+24>>2]+ +g[h+52>>2]))+z*(A?0.0:I*+g[i+32>>2]+H*+g[i+36>>2]+G*+g[i+40>>2]+ +g[i+56>>2]-(F*+g[h+32>>2]+E*+g[h+36>>2]+B*+g[h+40>>2]+ +g[h+56>>2])),B<v):0){v=B;o=z}else{t=y;u=s;w=x}b=b+1|0;if((b|0)==(p|0)){x=o;break}else{y=t;x=w;s=u}}}else{v=999999984306749440.0;x=0.0;w=0.0;u=0.0;t=0.0}switch(c[e+4>>2]|0){case 4:case 5:case 10:case 11:case 13:case 1:case 0:case 8:break;default:+ib[c[(c[e>>2]|0)+48>>2]&15](e)}switch(c[f+4>>2]|0){case 4:case 5:case 10:case 11:case 13:case 1:case 0:case 8:break;default:+ib[c[(c[f>>2]|0)+48>>2]&15](f)}if(v<0.0){D=0;l=C;return D|0}switch(c[e+4>>2]|0){case 8:{o=+g[e+32>>2]*+g[e+16>>2];break}case 0:{o=+g[e+48>>2];break}case 1:{o=+g[e+48>>2];break}case 13:{o=+g[e+48>>2];break}case 11:{o=+g[e+48>>2];break}case 10:{o=+g[e+48>>2];break}case 4:case 5:{o=+g[e+48>>2];break}default:o=+ib[c[(c[e>>2]|0)+48>>2]&15](e)}b=c[f+4>>2]|0;switch(b|0){case 8:{s=+g[f+32>>2]*+g[f+16>>2];b=8;break}case 0:{s=+g[f+48>>2];b=0;break}case 1:{s=+g[f+48>>2];b=1;break}case 13:{s=+g[f+48>>2];b=13;break}case 11:{s=+g[f+48>>2];b=11;break}case 10:{s=+g[f+48>>2];b=10;break}case 4:case 5:{s=+g[f+48>>2];break}default:{s=+ib[c[(c[f>>2]|0)+48>>2]&15](f);b=c[f+4>>2]|0}}o=v+(o+s+.5);c[C+4144>>2]=10248;c[C+4144+4>>2]=0;c[C+4144+8>>2]=1065353216;c[C+4144+12>>2]=0;g[C+4144+16>>2]=0.0;c[C+4144+20>>2]=0;c[C+4144+24>>2]=d;c[C+4144+28>>2]=e;c[C+4144+32>>2]=f;c[C+4144+36>>2]=c[e+4>>2];c[C+4144+40>>2]=b;g[C+4144+44>>2]=+ib[c[(c[e>>2]|0)+48>>2]&15](e);g[C+4144+48>>2]=+ib[c[(c[f>>2]|0)+48>>2]&15](f);a[C+4144+52>>0]=0;c[C+4144+60>>2]=-1;c[C+4144+72>>2]=1;c[C+4144+76>>2]=1;G=u*o+ +g[h+48>>2];H=w*o+ +g[h+52>>2];I=x*o+ +g[h+56>>2];c[C+4012>>2]=c[h>>2];c[C+4012+4>>2]=c[h+4>>2];c[C+4012+8>>2]=c[h+8>>2];c[C+4012+12>>2]=c[h+12>>2];c[C+4012+16>>2]=c[h+16>>2];c[C+4012+16+4>>2]=c[h+16+4>>2];c[C+4012+16+8>>2]=c[h+16+8>>2];c[C+4012+16+12>>2]=c[h+16+12>>2];c[C+4012+32>>2]=c[h+32>>2];c[C+4012+32+4>>2]=c[h+32+4>>2];c[C+4012+32+8>>2]=c[h+32+8>>2];c[C+4012+32+12>>2]=c[h+32+12>>2];g[C+4012+48>>2]=G;g[C+4012+52>>2]=H;g[C+4012+56>>2]=I;g[C+4012+60>>2]=0.0;c[C+4012+64>>2]=c[i>>2];c[C+4012+64+4>>2]=c[i+4>>2];c[C+4012+64+8>>2]=c[i+8>>2];c[C+4012+64+12>>2]=c[i+12>>2];c[C+4012+80>>2]=c[i+16>>2];c[C+4012+80+4>>2]=c[i+16+4>>2];c[C+4012+80+8>>2]=c[i+16+8>>2];c[C+4012+80+12>>2]=c[i+16+12>>2];c[C+4012+96>>2]=c[i+32>>2];c[C+4012+96+4>>2]=c[i+32+4>>2];c[C+4012+96+8>>2]=c[i+32+8>>2];c[C+4012+96+12>>2]=c[i+32+12>>2];c[C+4012+112>>2]=c[i+48>>2];c[C+4012+112+4>>2]=c[i+48+4>>2];c[C+4012+112+8>>2]=c[i+48+8>>2];c[C+4012+112+12>>2]=c[i+48+12>>2];g[C+4012+128>>2]=999999984306749440.0;c[C+3968>>2]=10288;a[C+3968+40>>0]=0;g[C+4144+4>>2]=-u;g[C+4144+8>>2]=-w;g[C+4144+12>>2]=-x;g[C+4144+16>>2]=0.0;qc(C+4144|0,C+4012|0,C+3968|0,n,0);o=o-+g[C+3968+36>>2];b=a[C+3968+40>>0]|0;if(b<<24>>24){D=C+3968+20|0;H=+g[C+3968+24>>2]-w*o;I=+g[C+3968+28>>2]-x*o;g[k>>2]=+g[D>>2]-u*o;g[k+4>>2]=H;g[k+8>>2]=I;g[k+12>>2]=0.0;c[m>>2]=c[D>>2];c[m+4>>2]=c[D+4>>2];c[m+8>>2]=c[D+8>>2];c[m+12>>2]=c[D+12>>2];g[j>>2]=u;g[j+4>>2]=w;g[j+8>>2]=x;g[j+12>>2]=t}D=b<<24>>24!=0;l=C;return D|0}function Dc(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0,j=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,C=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0,M=0,N=0,O=0,P=0.0,Q=0.0,R=0.0,S=0.0,T=0.0,U=0.0,V=0.0,W=0.0,X=0.0,Y=0.0,Z=0.0,_=0.0,$=0.0,aa=0,ba=0,ca=0.0,da=0.0,ea=0.0,fa=0.0,ga=0.0,ha=0.0,ia=0.0,ja=0.0,ka=0.0,la=0.0,ma=0.0,na=0.0,oa=0.0;M=l;l=l+64|0;if(!(c[b+12>>2]|0)){l=M;return}O=(a[b+16>>0]|0)!=0;i=O?e:d;O=O?d:e;f=c[i+4>>2]|0;L=c[O+4>>2]|0;i=c[i+12>>2]|0;$=+g[i>>2];_=+g[i+16>>2];Z=+g[i+32>>2];Y=+g[i+4>>2];X=+g[i+20>>2];n=+g[i+36>>2];j=+g[i+8>>2];q=+g[i+24>>2];x=+g[i+40>>2];S=+g[i+48>>2];R=+g[i+52>>2];Q=+g[i+56>>2];aa=c[O+12>>2]|0;W=+g[aa>>2];V=+g[aa+16>>2];o=+g[aa+32>>2];U=+g[aa+4>>2];T=+g[aa+20>>2];p=+g[aa+36>>2];w=+g[aa+8>>2];u=+g[aa+24>>2];s=+g[aa+40>>2];P=-+g[aa+48>>2];H=-+g[aa+52>>2];I=-+g[aa+56>>2];J=+g[i>>2];K=+g[i+16>>2];G=+g[i+32>>2];C=+g[i+4>>2];z=+g[i+20>>2];y=+g[i+36>>2];v=+g[i+8>>2];t=+g[i+24>>2];r=+g[i+40>>2];i=c[(c[f>>2]|0)+64>>2]|0;m=-+g[L+52>>2];k=-+g[L+56>>2];F=-+g[L+60>>2];g[M+48>>2]=($*W+_*V+Z*o)*m+($*U+_*T+Z*p)*k+($*w+_*u+Z*s)*F;g[M+48+4>>2]=(Y*W+X*V+n*o)*m+(Y*U+X*T+n*p)*k+(Y*w+X*u+n*s)*F;g[M+48+8>>2]=(j*W+q*V+x*o)*m+(j*U+q*T+x*p)*k+(j*w+q*u+x*s)*F;g[M+48+12>>2]=0.0;Mb[i&127](M,f,M+48|0);F=+g[M>>2];x=+g[M+4>>2];q=+g[M+8>>2];j=+g[L+52>>2];k=+g[L+56>>2];m=+g[L+60>>2];n=m*(S*w+R*u+Q*s+(w*P+u*H+s*I)+((w*J+u*K+s*G)*F+(w*C+u*z+s*y)*x+(w*v+u*t+s*r)*q))+(j*(S*W+R*V+Q*o+(W*P+V*H+o*I)+((W*J+V*K+o*G)*F+(W*C+V*z+o*y)*x+(W*v+V*t+o*r)*q))+k*(S*U+R*T+Q*p+(U*P+T*H+p*I)+((U*J+T*K+p*G)*F+(U*C+T*z+p*y)*x+(U*v+T*t+p*r)*q)))-+g[L+68>>2];o=S*W+R*V+Q*o+(W*P+V*H+o*I)+((W*J+V*K+o*G)*F+(W*C+V*z+o*y)*x+(W*v+V*t+o*r)*q)-j*n;p=S*U+R*T+Q*p+(U*P+T*H+p*I)+((U*J+T*K+p*G)*F+(U*C+T*z+p*y)*x+(U*v+T*t+p*r)*q)-k*n;q=S*w+R*u+Q*s+(w*P+u*H+s*I)+((w*J+u*K+s*G)*F+(w*C+u*z+s*y)*x+(w*v+u*t+s*r)*q)-m*n;O=c[O+12>>2]|0;r=+g[O>>2];s=+g[O+4>>2];t=+g[O+8>>2];u=+g[O+16>>2];v=+g[O+20>>2];w=+g[O+24>>2];x=+g[O+32>>2];y=+g[O+36>>2];z=+g[O+40>>2];C=+g[O+48>>2];F=+g[O+52>>2];G=+g[O+56>>2];O=c[b+12>>2]|0;i=n<+g[O+784>>2];c[h+4>>2]=O;if(i){g[M+48>>2]=r*j+s*k+t*m;g[M+48+4>>2]=j*u+k*v+m*w;g[M+48+8>>2]=j*x+k*y+m*z;g[M+48+12>>2]=0.0;g[M+32>>2]=t*q+(r*o+s*p)+C;g[M+32+4>>2]=o*u+p*v+q*w+F;g[M+32+8>>2]=o*x+p*y+q*z+G;g[M+32+12>>2]=0.0;Nb[c[(c[h>>2]|0)+16>>2]&15](h,M+48|0,M+32|0,n)}if((c[f+4>>2]|0)<7?(c[(c[h+4>>2]|0)+780>>2]|0)<(c[b+24>>2]|0):0){j=+g[L+60>>2];if(+A(+j)>.7071067690849304){m=+g[L+56>>2];$=1.0/+B(+(j*j+m*m));k=0.0;m=m*$;j=-(j*$)}else{$=+g[L+52>>2];k=+g[L+56>>2];j=1.0/+B(+($*$+k*k));k=-(k*j);m=0.0;j=$*j}I=.019999999552965164/+ib[c[(c[f>>2]|0)+16>>2]&15](f);I=(I>.39269909262657166?.39269909262657166:I)*.5;H=+E(+I)/+B(+(k*k+j*j+m*m));K=k*H;J=j*H;H=m*H;I=+D(+I);f=c[b+20>>2]|0;if((f|0)>0){i=0;do{u=+g[L+52>>2];$=+g[L+56>>2];C=+g[L+60>>2];y=6.2831854820251465/+(f|0)*+(i|0)*.5;_=+E(+y)/+B(+(u*u+$*$+C*C));y=+D(+y);z=H*-($*_)+(K*y+I*-(u*_))-J*-(C*_);w=K*-(C*_)+(J*y+I*-($*_))-H*-(u*_);da=J*-(u*_)+(H*y+I*-(C*_))-K*-($*_);G=I*y-K*-(u*_)-J*-($*_)-H*-(C*_);ia=C*_*w+(u*_*G+y*z)-$*_*da;ha=u*_*da+(y*w+$*_*G)-C*_*z;la=$*_*z+(C*_*G+y*da)-u*_*w;da=y*G-u*_*z-$*_*w-C*_*da;O=(a[b+16>>0]|0)!=0;ba=O?e:d;O=O?d:e;f=c[ba+4>>2]|0;aa=c[O+4>>2]|0;ba=c[ba+12>>2]|0;_=+g[ba>>2];C=+g[ba+4>>2];w=+g[ba+8>>2];$=+g[ba+16>>2];z=+g[ba+20>>2];u=+g[ba+24>>2];G=+g[ba+32>>2];y=+g[ba+36>>2];s=+g[ba+40>>2];U=+g[ba+48>>2];V=+g[ba+52>>2];W=+g[ba+56>>2];ba=c[O+12>>2]|0;Q=+g[ba>>2];R=+g[ba+16>>2];o=+g[ba+32>>2];S=+g[ba+4>>2];T=+g[ba+20>>2];p=+g[ba+36>>2];v=+g[ba+8>>2];t=+g[ba+24>>2];r=+g[ba+40>>2];X=-+g[ba+48>>2];Y=-+g[ba+52>>2];Z=-+g[ba+56>>2];ga=ia*(2.0/(ia*ia+ha*ha+la*la+da*da));m=ha*(2.0/(ia*ia+ha*ha+la*la+da*da));ca=la*(2.0/(ia*ia+ha*ha+la*la+da*da));na=w*(ia*ca-da*m)+(C*(ia*m+da*ca)+_*(1.0-(ha*m+la*ca)));ka=w*(ha*ca+da*ga)+(_*(ia*m-da*ca)+C*(1.0-(ia*ga+la*ca)));j=_*(ia*ca+da*m)+C*(ha*ca-da*ga)+w*(1.0-(ia*ga+ha*m));ma=u*(ia*ca-da*m)+(z*(ia*m+da*ca)+$*(1.0-(ha*m+la*ca)));ja=u*(ha*ca+da*ga)+($*(ia*m-da*ca)+z*(1.0-(ia*ga+la*ca)));x=$*(ia*ca+da*m)+z*(ha*ca-da*ga)+u*(1.0-(ia*ga+ha*m));oa=s*(ia*ca-da*m)+(y*(ia*m+da*ca)+G*(1.0-(ha*m+la*ca)));la=s*(ha*ca+da*ga)+(G*(ia*m-da*ca)+y*(1.0-(ia*ga+la*ca)));m=G*(ia*ca+da*m)+y*(ha*ca-da*ga)+s*(1.0-(ia*ga+ha*m));ha=+g[ba>>2];ga=+g[ba+16>>2];ia=+g[ba+32>>2];da=+g[ba+4>>2];ca=+g[ba+20>>2];ea=+g[ba+36>>2];k=+g[ba+8>>2];q=+g[ba+24>>2];n=+g[ba+40>>2];ba=c[(c[f>>2]|0)+64>>2]|0;fa=-+g[aa+52>>2];P=-+g[aa+56>>2];F=-+g[aa+60>>2];g[M+32>>2]=(ia*oa+(ha*na+ga*ma))*fa+(ea*oa+(da*na+ca*ma))*P+(n*oa+(k*na+q*ma))*F;g[M+32+4>>2]=(ia*la+(ha*ka+ga*ja))*fa+(ea*la+(da*ka+ca*ja))*P+(n*la+(k*ka+q*ja))*F;g[M+32+8>>2]=(ia*m+(ha*j+ga*x))*fa+(ea*m+(da*j+ca*x))*P+(n*m+(k*j+q*x))*F;g[M+32+12>>2]=0.0;Mb[ba&127](M+48|0,f,M+32|0);F=+g[M+48>>2];x=+g[M+48+4>>2];q=+g[M+48+8>>2];j=+g[aa+52>>2];k=+g[aa+56>>2];m=+g[aa+60>>2];n=m*(U*v+V*t+W*r+(v*X+t*Y+r*Z)+((_*v+$*t+G*r)*F+(C*v+z*t+y*r)*x+(w*v+u*t+s*r)*q))+(j*(U*Q+V*R+W*o+(Q*X+R*Y+o*Z)+((_*Q+$*R+G*o)*F+(C*Q+z*R+y*o)*x+(w*Q+u*R+s*o)*q))+k*(U*S+V*T+W*p+(S*X+T*Y+p*Z)+((_*S+$*T+G*p)*F+(C*S+z*T+y*p)*x+(w*S+u*T+s*p)*q)))-+g[aa+68>>2];o=U*Q+V*R+W*o+(Q*X+R*Y+o*Z)+((_*Q+$*R+G*o)*F+(C*Q+z*R+y*o)*x+(w*Q+u*R+s*o)*q)-j*n;p=U*S+V*T+W*p+(S*X+T*Y+p*Z)+((_*S+$*T+G*p)*F+(C*S+z*T+y*p)*x+(w*S+u*T+s*p)*q)-k*n;q=U*v+V*t+W*r+(v*X+t*Y+r*Z)+((_*v+$*t+G*r)*F+(C*v+z*t+y*r)*x+(w*v+u*t+s*r)*q)-m*n;O=c[O+12>>2]|0;r=+g[O>>2];s=+g[O+4>>2];t=+g[O+8>>2];u=+g[O+16>>2];v=+g[O+20>>2];w=+g[O+24>>2];x=+g[O+32>>2];y=+g[O+36>>2];z=+g[O+40>>2];C=+g[O+48>>2];F=+g[O+52>>2];G=+g[O+56>>2];O=c[b+12>>2]|0;aa=n<+g[O+784>>2];c[h+4>>2]=O;if(aa){g[M+32>>2]=r*j+s*k+t*m;g[M+32+4>>2]=j*u+k*v+m*w;g[M+32+8>>2]=j*x+k*y+m*z;g[M+32+12>>2]=0.0;g[M+16>>2]=t*q+(r*o+s*p)+C;g[M+16+4>>2]=o*u+p*v+q*w+F;g[M+16+8>>2]=o*x+p*y+q*z+G;g[M+16+12>>2]=0.0;Nb[c[(c[h>>2]|0)+16>>2]&15](h,M+32|0,M+16|0,n)}i=i+1|0;f=c[b+20>>2]|0}while((i|0)<(f|0))}}do if((a[b+8>>0]|0?c[(c[b+12>>2]|0)+780>>2]|0:0)?(N=c[h+4>>2]|0,c[N+780>>2]|0):0){f=c[N+772>>2]|0;i=c[(c[h+8>>2]|0)+8>>2]|0;if((f|0)==(i|0)){te(N,f+4|0,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0);break}else{te(N,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0,i+4|0);break}}while(0);l=M;return}function Ec(){var a=0;a=ir(8)|0;c[6488]=a;Ya(a|0,0)|0;c[5444]=20051;c[5445]=0;c[5446]=0;c[5447]=0;c[5448]=0;c[5449]=0;c[5450]=0;c[5451]=0;c[5452]=0;Dp(21776);c[5453]=20051;c[5454]=0;c[5455]=0;c[5456]=0;c[5457]=0;c[5458]=0;c[5459]=0;c[5460]=0;c[5461]=0;Dp(21812);c[5462]=20051;c[5463]=0;c[5464]=0;c[5465]=0;c[5466]=0;c[5467]=0;c[5468]=0;c[5469]=0;c[5470]=0;Dp(21848);c[5471]=20051;c[5472]=0;c[5473]=0;c[5474]=0;c[5475]=0;c[5476]=0;c[5477]=0;c[5478]=0;c[5479]=0;Dp(21884);c[5480]=20051;c[5481]=0;c[5482]=0;c[5483]=0;c[5484]=0;c[5485]=0;c[5486]=0;c[5487]=0;c[5488]=0;Dp(21920);c[5489]=20051;c[5490]=0;c[5491]=0;c[5492]=0;c[5493]=0;c[5494]=0;c[5495]=0;c[5496]=0;c[5497]=0;Dp(21956);c[5498]=20051;c[5499]=0;c[5500]=0;c[5501]=0;c[5502]=0;c[5503]=0;c[5504]=0;c[5505]=0;c[5506]=0;Dp(21992);c[5507]=20051;c[5508]=0;c[5509]=0;c[5510]=0;c[5511]=0;c[5512]=0;c[5513]=0;c[5514]=0;c[5515]=0;Dp(22028);c[5516]=20051;c[5517]=0;c[5518]=0;c[5519]=0;c[5520]=0;c[5521]=0;c[5522]=0;c[5523]=0;c[5524]=0;Dp(22064);c[5525]=20051;c[5526]=0;c[5527]=0;c[5528]=0;c[5529]=0;c[5530]=0;c[5531]=0;c[5532]=0;c[5533]=0;Dp(22100);c[5534]=20051;c[5535]=0;c[5536]=0;c[5537]=0;c[5538]=0;c[5539]=0;c[5540]=0;c[5541]=0;c[5542]=0;Dp(22136);c[5543]=20051;c[5544]=0;c[5545]=0;c[5546]=0;c[5547]=0;c[5548]=0;c[5549]=0;c[5550]=0;c[5551]=0;Dp(22172);c[5552]=20051;c[5553]=0;c[5554]=0;c[5555]=0;c[5556]=0;c[5557]=0;c[5558]=0;c[5559]=0;c[5560]=0;Dp(22208);c[5561]=20051;c[5562]=0;c[5563]=0;c[5564]=0;c[5565]=0;c[5566]=0;c[5567]=0;c[5568]=0;c[5569]=0;Dp(22244);c[5570]=20051;c[5571]=0;c[5572]=0;c[5573]=0;c[5574]=0;c[5575]=0;c[5576]=0;c[5577]=0;c[5578]=0;Dp(22280);c[5579]=20051;c[5580]=0;c[5581]=0;c[5582]=0;c[5583]=0;c[5584]=0;c[5585]=0;c[5586]=0;c[5587]=0;Dp(22316);c[5588]=20051;c[5589]=0;c[5590]=0;c[5591]=0;c[5592]=0;c[5593]=0;c[5594]=0;c[5595]=0;c[5596]=0;Dp(22352);c[5597]=20051;c[5598]=0;c[5599]=0;c[5600]=0;c[5601]=0;c[5602]=0;c[5603]=0;c[5604]=0;c[5605]=0;Dp(22388);c[5606]=20051;c[5607]=0;c[5608]=0;c[5609]=0;c[5610]=0;c[5611]=0;c[5612]=0;c[5613]=0;c[5614]=0;Dp(22424);c[5615]=20051;c[5616]=0;c[5617]=0;c[5618]=0;c[5619]=0;c[5620]=0;c[5621]=0;c[5622]=0;c[5623]=0;Dp(22460);c[5624]=20051;c[5625]=0;c[5626]=0;c[5627]=0;c[5628]=0;c[5629]=0;c[5630]=0;c[5631]=0;c[5632]=0;Dp(22496);c[5633]=20051;c[5634]=0;c[5635]=0;c[5636]=0;c[5637]=0;c[5638]=0;c[5639]=0;c[5640]=0;c[5641]=0;Dp(22532);c[5642]=20051;c[5643]=0;c[5644]=0;c[5645]=0;c[5646]=0;c[5647]=0;c[5648]=0;c[5649]=0;c[5650]=0;Dp(22568);c[5651]=20051;c[5652]=0;c[5653]=0;c[5654]=0;c[5655]=0;c[5656]=0;c[5657]=0;c[5658]=0;c[5659]=0;Dp(22604);c[5660]=20051;c[5661]=0;c[5662]=0;c[5663]=0;c[5664]=0;c[5665]=0;c[5666]=0;c[5667]=0;c[5668]=0;Dp(22640);c[5669]=20051;c[5670]=0;c[5671]=0;c[5672]=0;c[5673]=0;c[5674]=0;c[5675]=0;c[5676]=0;c[5677]=0;Dp(22676);c[5678]=20051;c[5679]=0;c[5680]=0;c[5681]=0;c[5682]=0;c[5683]=0;c[5684]=0;c[5685]=0;c[5686]=0;Dp(22712);c[5687]=20051;c[5688]=0;c[5689]=0;c[5690]=0;c[5691]=0;c[5692]=0;c[5693]=0;c[5694]=0;c[5695]=0;Dp(22748);c[5696]=20051;c[5697]=0;c[5698]=0;c[5699]=0;c[5700]=0;c[5701]=0;c[5702]=0;c[5703]=0;c[5704]=0;Dp(22784);c[5705]=20051;c[5706]=0;c[5707]=0;c[5708]=0;c[5709]=0;c[5710]=0;c[5711]=0;c[5712]=0;c[5713]=0;Dp(22820);c[5714]=20051;c[5715]=0;c[5716]=0;c[5717]=0;c[5718]=0;c[5719]=0;c[5720]=0;c[5721]=0;c[5722]=0;Dp(22856);c[5723]=20051;c[5724]=0;c[5725]=0;c[5726]=0;c[5727]=0;c[5728]=0;c[5729]=0;c[5730]=0;c[5731]=0;Dp(22892);c[5732]=20051;c[5733]=0;c[5734]=0;c[5735]=0;c[5736]=0;c[5737]=0;c[5738]=0;c[5739]=0;c[5740]=0;Dp(22928);c[5741]=20051;c[5742]=0;c[5743]=0;c[5744]=0;c[5745]=0;c[5746]=0;c[5747]=0;c[5748]=0;c[5749]=0;Dp(22964);c[5750]=20051;c[5751]=0;c[5752]=0;c[5753]=0;c[5754]=0;c[5755]=0;c[5756]=0;c[5757]=0;c[5758]=0;Dp(23e3);c[5759]=20051;c[5760]=0;c[5761]=0;c[5762]=0;c[5763]=0;c[5764]=0;c[5765]=0;c[5766]=0;c[5767]=0;Dp(23036);c[5768]=20051;c[5769]=0;c[5770]=0;c[5771]=0;c[5772]=0;c[5773]=0;c[5774]=0;c[5775]=0;c[5776]=0;Dp(23072);c[5777]=20051;c[5778]=0;c[5779]=0;c[5780]=0;c[5781]=0;c[5782]=0;c[5783]=0;c[5784]=0;c[5785]=0;Dp(23108);c[5786]=20051;c[5787]=0;c[5788]=0;c[5789]=0;c[5790]=0;c[5791]=0;c[5792]=0;c[5793]=0;c[5794]=0;Dp(23144);c[5795]=20051;c[5796]=0;c[5797]=0;c[5798]=0;c[5799]=0;c[5800]=0;c[5801]=0;c[5802]=0;c[5803]=0;Dp(23180);c[5804]=20051;c[5805]=0;c[5806]=0;c[5807]=0;c[5808]=0;c[5809]=0;c[5810]=0;c[5811]=0;c[5812]=0;Dp(23216);c[5813]=20051;c[5814]=0;c[5815]=0;c[5816]=0;c[5817]=0;c[5818]=0;c[5819]=0;c[5820]=0;c[5821]=0;Dp(23252);c[5822]=20051;c[5823]=0;c[5824]=0;c[5825]=0;c[5826]=0;c[5827]=0;c[5828]=0;c[5829]=0;c[5830]=0;Dp(23288);c[5831]=20051;c[5832]=0;c[5833]=0;c[5834]=0;c[5835]=0;c[5836]=0;c[5837]=0;c[5838]=0;c[5839]=0;Dp(23324);c[5840]=20051;c[5841]=0;c[5842]=0;c[5843]=0;c[5844]=0;c[5845]=0;c[5846]=0;c[5847]=0;c[5848]=0;Dp(23360);c[5849]=20051;c[5850]=0;c[5851]=0;c[5852]=0;c[5853]=0;c[5854]=0;c[5855]=0;c[5856]=0;c[5857]=0;Dp(23396);c[5858]=20051;c[5859]=0;c[5860]=0;c[5861]=0;c[5862]=0;c[5863]=0;c[5864]=0;c[5865]=0;c[5866]=0;Dp(23432);c[5867]=20051;c[5868]=0;c[5869]=0;c[5870]=0;c[5871]=0;c[5872]=0;c[5873]=0;c[5874]=0;c[5875]=0;Dp(23468);c[5876]=20051;c[5877]=0;c[5878]=0;c[5879]=0;c[5880]=0;c[5881]=0;c[5882]=0;c[5883]=0;c[5884]=0;Dp(23504);c[5885]=20051;c[5886]=0;c[5887]=0;c[5888]=0;c[5889]=0;c[5890]=0;c[5891]=0;c[5892]=0;c[5893]=0;Dp(23540);c[5894]=20051;c[5895]=0;c[5896]=0;c[5897]=0;c[5898]=0;c[5899]=0;c[5900]=0;c[5901]=0;c[5902]=0;Dp(23576);c[5903]=20051;c[5904]=0;c[5905]=0;c[5906]=0;c[5907]=0;c[5908]=0;c[5909]=0;c[5910]=0;c[5911]=0;Dp(23612);c[5912]=20051;c[5913]=0;c[5914]=0;c[5915]=0;c[5916]=0;c[5917]=0;c[5918]=0;c[5919]=0;c[5920]=0;Dp(23648);c[5921]=20051;c[5922]=0;c[5923]=0;c[5924]=0;c[5925]=0;c[5926]=0;c[5927]=0;c[5928]=0;c[5929]=0;Dp(23684);c[5930]=20051;c[5931]=0;c[5932]=0;c[5933]=0;c[5934]=0;c[5935]=0;c[5936]=0;c[5937]=0;c[5938]=0;Dp(23720);c[5939]=20051;c[5940]=0;c[5941]=0;c[5942]=0;c[5943]=0;c[5944]=0;c[5945]=0;c[5946]=0;c[5947]=0;Dp(23756);c[5948]=20051;c[5949]=0;c[5950]=0;c[5951]=0;c[5952]=0;c[5953]=0;c[5954]=0;c[5955]=0;c[5956]=0;Dp(23792);c[5957]=20051;c[5958]=0;c[5959]=0;c[5960]=0;c[5961]=0;c[5962]=0;c[5963]=0;c[5964]=0;c[5965]=0;Dp(23828);c[5966]=20051;c[5967]=0;c[5968]=0;c[5969]=0;c[5970]=0;c[5971]=0;c[5972]=0;c[5973]=0;c[5974]=0;Dp(23864);c[5975]=20051;c[5976]=0;c[5977]=0;c[5978]=0;c[5979]=0;c[5980]=0;c[5981]=0;c[5982]=0;c[5983]=0;Dp(23900);c[5984]=20051;c[5985]=0;c[5986]=0;c[5987]=0;c[5988]=0;c[5989]=0;c[5990]=0;c[5991]=0;c[5992]=0;Dp(23936);c[5993]=20051;c[5994]=0;c[5995]=0;c[5996]=0;c[5997]=0;c[5998]=0;c[5999]=0;c[6e3]=0;c[6001]=0;Dp(23972);c[6002]=20051;c[6003]=0;c[6004]=0;c[6005]=0;c[6006]=0;c[6007]=0;c[6008]=0;c[6009]=0;c[6010]=0;Dp(24008);c[6011]=20051;c[6012]=0;c[6013]=0;c[6014]=0;c[6015]=0;c[6016]=0;c[6017]=0;c[6018]=0;c[6019]=0;Dp(24044);return}function Fc(b,e,f,g,h,i){b=b|0;e=+e;f=f|0;g=g|0;h=h|0;i=i|0;var j=0,k=0,m=0,n=0,o=0.0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,z=0,A=0,B=0;B=l;l=l+560|0;c[B+536>>2]=0;A=B+540+12|0;It(e)|0;j=y;if((j|0)<0){It(-e)|0;e=-e;z=1;w=20073;j=y}else{z=(h&2049|0)!=0&1;w=(h&2048|0)==0?((h&1|0)==0?20074:20079):20076}do if(0==0&(j&2146435072|0)==2146435072){j=z+3|0;Il(b,32,f,j,h&-65537);Ox(b,w,z);Ox(b,e!=e|0.0!=0.0?(i&32|0?20100:20104):i&32|0?20092:20096,3);Il(b,32,f,j,h^8192)}else{o=+BE(e,B+536|0)*2.0;if(o!=0.0)c[B+536>>2]=(c[B+536>>2]|0)+-1;if((i|32|0)==97){q=(i&32|0)==0?w:w+9|0;p=z|2;do if(!(g>>>0>11|(12-g|0)==0)){e=8.0;j=12-g|0;do{j=j+-1|0;e=e*16.0}while((j|0)!=0);if((a[q>>0]|0)==45){e=-(e+(-o-e));break}else{e=o+e-e;break}}else e=o;while(0);k=c[B+536>>2]|0;j=(k|0)<0?0-k|0:k;j=Jk(j,((j|0)<0)<<31>>31,A)|0;if((j|0)==(A|0)){a[B+540+11>>0]=48;j=B+540+11|0}a[j+-1>>0]=(k>>31&2)+43;n=j+-2|0;a[n>>0]=i+15;j=B;do{z=~~e;k=j+1|0;a[j>>0]=i&32|d[480+z>>0];e=(e-+(z|0))*16.0;if((k-B|0)==1?!((h&8|0)==0&((g|0)<1&e==0.0)):0){a[k>>0]=46;j=j+2|0}else j=k}while(e!=0.0);m=j;if((g|0)!=0?(-2-B+m|0)<(g|0):0){g=g+2+A-n|0;j=A;k=n}else{g=A-B-n+m|0;j=A;k=n}A=g+p|0;Il(b,32,f,A,h);Ox(b,q,p);Il(b,48,f,A,h^65536);Ox(b,B,m-B|0);j=j-k|0;Il(b,48,g-(m-B+j)|0,0,0);Ox(b,n,j);Il(b,32,f,A,h^8192);j=A;break}k=(g|0)<0?6:g;if(o!=0.0){j=(c[B+536>>2]|0)+-28|0;c[B+536>>2]=j;e=o*268435456.0}else{e=o;j=c[B+536>>2]|0}x=(j|0)<0?B+32|0:B+32+288|0;g=x;do{u=~~e>>>0;c[g>>2]=u;g=g+4|0;e=(e-+(u>>>0))*1.0e9}while(e!=0.0);if((j|0)>0){p=x;while(1){n=(j|0)<29?j:29;j=g+-4|0;if(j>>>0>=p>>>0){m=0;do{s=Yr(c[j>>2]|0,0,n|0)|0;s=_t(s|0,y|0,m|0,0)|0;t=y;m=Ky(s|0,t|0,1e9,0)|0;u=Iq(m|0,y|0,-1e9,-1)|0;u=_t(s|0,t|0,u|0,y|0)|0;c[j>>2]=u;j=j+-4|0}while(j>>>0>=p>>>0);if(m){u=p+-4|0;c[u>>2]=m;m=u}else m=p}else m=p;a:do if(g>>>0>m>>>0){j=g;while(1){g=j+-4|0;if(c[g>>2]|0){g=j;break a}if(g>>>0>m>>>0)j=g;else break}}while(0);j=(c[B+536>>2]|0)-n|0;c[B+536>>2]=j;if((j|0)>0)p=m;else break}}else m=x;if((j|0)<0){do{p=0-j|0;p=(p|0)<9?p:9;if(m>>>0<g>>>0){n=0;j=m;do{u=c[j>>2]|0;c[j>>2]=(u>>>p)+n;n=N(u&(1<<p)+-1,1e9>>>p)|0;j=j+4|0}while(j>>>0<g>>>0);j=(c[m>>2]|0)==0?m+4|0:m;if(!n)m=j;else{c[g>>2]=n;g=g+4|0;m=j}}else m=(c[m>>2]|0)==0?m+4|0:m;j=(i|32|0)==102?x:m;g=(g-j>>2|0)>(((k+25|0)/9|0)+1|0)?j+(((k+25|0)/9|0)+1<<2)|0:g;j=(c[B+536>>2]|0)+p|0;c[B+536>>2]=j}while((j|0)<0);j=m}else j=m;if(j>>>0<g>>>0){m=(x-j>>2)*9|0;p=c[j>>2]|0;if(p>>>0>=10){n=10;do{n=n*10|0;m=m+1|0}while(p>>>0>=n>>>0)}}else m=0;n=k-((i|32|0)==102?0:m)+(((k|0)!=0&(i|32|0)==103)<<31>>31)|0;if((n|0)<(((g-x>>2)*9|0)+-9|0)){q=x+4+(((n+9216|0)/9|0)+-1024<<2)|0;n=n+9216+(N((n+9216|0)/9|0,-9)|0)|0;if((n|0)<8){p=10;while(1){p=p*10|0;if((n|0)<7)n=n+1|0;else break}}else p=10;r=c[q>>2]|0;n=(r>>>0)/(p>>>0)|0;t=N(n,p)|0;s=(q+4|0)==(g|0);if(!(s&(r-t|0)==0)){e=(n&1|0)==0?9007199254740992.0:9007199254740994.0;u=p>>>1;o=(r-t|0)>>>0<u>>>0?.5:s&(r-t|0)==(u|0)?1.0:1.5;if(z){u=(a[w>>0]|0)==45;o=u?-o:o;e=u?-e:e}c[q>>2]=t;if(e+o!=e){u=t+p|0;c[q>>2]=u;if(u>>>0>999999999){n=q;while(1){m=n+-4|0;c[n>>2]=0;if(m>>>0<j>>>0){j=j+-4|0;c[j>>2]=0}u=(c[m>>2]|0)+1|0;c[m>>2]=u;if(u>>>0>999999999)n=m;else{q=m;break}}}m=(x-j>>2)*9|0;p=c[j>>2]|0;if(p>>>0<10)n=q;else{n=10;do{n=n*10|0;m=m+1|0}while(p>>>0>=n>>>0);n=q}}else n=q}else n=q;t=n+4|0;g=g>>>0>t>>>0?t:g;t=j}else t=j;q=0-m|0;b:do if(g>>>0>t>>>0)while(1){j=g+-4|0;if(c[j>>2]|0){u=g;s=1;break b}if(j>>>0>t>>>0)g=j;else{u=j;s=0;break}}else{u=g;s=0}while(0);do if((i|32|0)==103){if((m|0)>-5?(k+(((k|0)!=0^1)&1)|0)>(m|0):0){n=i+-1|0;k=k+(((k|0)!=0^1)&1)+-1-m|0}else{n=i+-2|0;k=k+(((k|0)!=0^1)&1)+-1|0}if(!(h&8)){if(s?(v=c[u+-4>>2]|0,(v|0)!=0):0)if(!((v>>>0)%10|0)){j=0;g=10;do{g=g*10|0;j=j+1|0}while(!((v>>>0)%(g>>>0)|0|0))}else j=0;else j=9;g=((u-x>>2)*9|0)+-9|0;if((n|32|0)==102){i=g-j|0;i=(i|0)>0?i:0;k=(k|0)<(i|0)?k:i;break}else{i=g+m-j|0;i=(i|0)>0?i:0;k=(k|0)<(i|0)?k:i;break}}}else n=i;while(0);r=(k|0)!=0;g=r?1:h>>>3&1;p=(n|32|0)==102;if(p){q=0;j=(m|0)>0?m:0}else{j=(m|0)<0?q:m;j=Jk(j,((j|0)<0)<<31>>31,A)|0;if((A-j|0)<2)do{j=j+-1|0;a[j>>0]=48}while((A-j|0)<2);a[j+-1>>0]=(m>>31&2)+43;j=j+-2|0;a[j>>0]=n;q=j;j=A-j|0}j=z+1+k+g+j|0;Il(b,32,f,j,h);Ox(b,w,z);Il(b,48,f,j,h^65536);if(p){n=t>>>0>x>>>0?x:t;m=n;do{g=Jk(c[m>>2]|0,0,B+9|0)|0;if((m|0)==(n|0)){if((g|0)==(B+9|0)){a[B+8>>0]=48;g=B+8|0}}else if(g>>>0>B>>>0){uj(B|0,48,g-B|0)|0;do g=g+-1|0;while(g>>>0>B>>>0)}Ox(b,g,B+9-g|0);m=m+4|0}while(m>>>0<=x>>>0);if(!((h&8|0)==0&(r^1)))Ox(b,20108,1);if(m>>>0<u>>>0&(k|0)>0)while(1){g=Jk(c[m>>2]|0,0,B+9|0)|0;if(g>>>0>B>>>0){uj(B|0,48,g-B|0)|0;do g=g+-1|0;while(g>>>0>B>>>0)}Ox(b,g,(k|0)<9?k:9);m=m+4|0;g=k+-9|0;if(!(m>>>0<u>>>0&(k|0)>9)){k=g;break}else k=g}Il(b,48,k+9|0,9,0)}else{p=s?u:t+4|0;if(t>>>0<p>>>0&(k|0)>-1){n=t;do{g=Jk(c[n>>2]|0,0,B+9|0)|0;if((g|0)==(B+9|0)){a[B+8>>0]=48;g=B+8|0}do if((n|0)==(t|0)){m=g+1|0;Ox(b,g,1);if((h&8|0)==0&(k|0)<1){g=m;break}Ox(b,20108,1);g=m}else{if(g>>>0<=B>>>0)break;uj(B|0,48,g+(0-B)|0)|0;do g=g+-1|0;while(g>>>0>B>>>0)}while(0);z=B+9-g|0;Ox(b,g,(k|0)>(z|0)?z:k);k=k-z|0;n=n+4|0}while(n>>>0<p>>>0&(k|0)>-1)}Il(b,48,k+18|0,18,0);Ox(b,q,A-q|0)}Il(b,32,f,j,h^8192)}while(0);l=B;return ((j|0)<(f|0)?f:j)|0}function Gc(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0,i=0,j=0,k=0,m=0.0,n=0.0,o=0.0,p=0,q=0.0,r=0,s=0,t=0.0;p=l;l=l+80|0;i=c[b+28>>2]|0;d=c[f+72>>2]|0;if((d&4|0)!=0&(i|0)>0){e=c[b+36>>2]|0;h=c[b+76>>2]|0;if(!(d&16)){d=0;do{k=c[e+(d*152|0)+132>>2]|0;c[k+124>>2]=c[e+(d*152|0)+100>>2];c[k+128>>2]=c[h+((c[e+(d*152|0)+140>>2]|0)*152|0)+100>>2];d=d+1|0}while((d|0)!=(i|0))}else{d=0;do{k=c[e+(d*152|0)+132>>2]|0;c[k+124>>2]=c[e+(d*152|0)+100>>2];j=c[e+(d*152|0)+140>>2]|0;c[k+128>>2]=c[h+(j*152|0)+100>>2];c[k+132>>2]=c[h+((j+1|0)*152|0)+100>>2];d=d+1|0}while((d|0)!=(i|0))}}h=c[b+48>>2]|0;if((h|0)>0){d=0;do{i=c[b+56>>2]|0;j=c[i+(d*152|0)+132>>2]|0;k=c[j+44>>2]|0;e=i+(d*152|0)+100|0;if(k|0){o=+g[e>>2];s=c[j+28>>2]|0;n=1.0/+g[f+12>>2];m=o*+g[i+(d*152|0)+20>>2]*+g[s+412>>2]*n;q=o*+g[i+(d*152|0)+24>>2]*+g[s+416>>2]*n;g[k>>2]=+g[k>>2]+ +g[i+(d*152|0)+16>>2]*o*+g[s+408>>2]*n;g[k+4>>2]=m+ +g[k+4>>2];g[k+8>>2]=q+ +g[k+8>>2];q=+g[e>>2];r=c[j+32>>2]|0;m=1.0/+g[f+12>>2];n=q*+g[i+(d*152|0)+52>>2]*+g[r+412>>2]*m;o=q*+g[i+(d*152|0)+56>>2]*+g[r+416>>2]*m;g[k+32>>2]=+g[k+32>>2]+ +g[i+(d*152|0)+48>>2]*q*+g[r+408>>2]*m;g[k+36>>2]=n+ +g[k+36>>2];g[k+40>>2]=o+ +g[k+40>>2];o=+g[e>>2];n=1.0/+g[f+12>>2];m=+g[i+(d*152|0)+4>>2]*+g[s+608>>2]*o*n;q=o*+g[i+(d*152|0)+8>>2]*+g[s+612>>2]*n;g[k+16>>2]=+g[k+16>>2]+ +g[i+(d*152|0)>>2]*+g[s+604>>2]*o*n;g[k+20>>2]=m+ +g[k+20>>2];g[k+24>>2]=q+ +g[k+24>>2];q=+g[e>>2];m=1.0/+g[f+12>>2];n=+g[i+(d*152|0)+36>>2]*+g[r+608>>2]*q*m;o=q*+g[i+(d*152|0)+40>>2]*+g[r+612>>2]*m;g[k+48>>2]=+g[k+48>>2]+ +g[i+(d*152|0)+32>>2]*+g[r+604>>2]*q*m;g[k+52>>2]=n+ +g[k+52>>2];g[k+56>>2]=o+ +g[k+56>>2]}q=+g[e>>2];g[j+36>>2]=q;q=+A(+q);if(q>=+g[j+16>>2])a[j+20>>0]=0;d=d+1|0}while((d|0)!=(h|0))}d=c[b+8>>2]|0;if((d|0)>0){j=0;e=c[b+16>>2]|0;do{h=e+(j*244|0)|0;i=c[e+(j*244|0)+240>>2]|0;if(i){if(!(c[f+52>>2]|0)){h=e+(j*244|0)+176|0;n=+g[e+(j*244|0)+64>>2]+ +g[h>>2];g[h>>2]=n;h=e+(j*244|0)+180|0;o=+g[e+(j*244|0)+68>>2]+ +g[h>>2];g[h>>2]=o;h=e+(j*244|0)+184|0;m=+g[e+(j*244|0)+72>>2]+ +g[h>>2];g[h>>2]=m;h=e+(j*244|0)+192|0;g[h>>2]=+g[e+(j*244|0)+80>>2]+ +g[h>>2];h=e+(j*244|0)+196|0;g[h>>2]=+g[e+(j*244|0)+84>>2]+ +g[h>>2];h=e+(j*244|0)+200|0;g[h>>2]=+g[e+(j*244|0)+88>>2]+ +g[h>>2];h=e;d=i}else{m=+g[f+12>>2];n=+g[f+60>>2];d=e+(j*244|0)+176|0;g[d>>2]=+g[e+(j*244|0)+64>>2]+ +g[d>>2];d=e+(j*244|0)+180|0;g[d>>2]=+g[e+(j*244|0)+68>>2]+ +g[d>>2];d=e+(j*244|0)+184|0;g[d>>2]=+g[e+(j*244|0)+72>>2]+ +g[d>>2];d=e+(j*244|0)+192|0;g[d>>2]=+g[e+(j*244|0)+80>>2]+ +g[d>>2];d=e+(j*244|0)+196|0;g[d>>2]=+g[e+(j*244|0)+84>>2]+ +g[d>>2];d=e+(j*244|0)+200|0;g[d>>2]=+g[e+(j*244|0)+88>>2]+ +g[d>>2];o=+g[e+(j*244|0)+144>>2];d=e+(j*244|0)+148|0;if(((((!(o!=0.0)?!(+g[d>>2]!=0.0):0)?!(+g[e+(j*244|0)+152>>2]!=0.0):0)?!(+g[e+(j*244|0)+160>>2]!=0.0):0)?!(+g[e+(j*244|0)+164>>2]!=0.0):0)?!(+g[e+(j*244|0)+168>>2]!=0.0):0)d=i;else{t=+g[e+(j*244|0)+164>>2]*n;q=+g[e+(j*244|0)+168>>2]*n;g[p>>2]=+g[e+(j*244|0)+160>>2]*n;g[p+4>>2]=t;g[p+8>>2]=q;g[p+12>>2]=0.0;Me(h,o,+g[d>>2],+g[e+(j*244|0)+152>>2],p,m,p+16|0);c[h>>2]=c[p+16>>2];c[h+4>>2]=c[p+16+4>>2];c[h+8>>2]=c[p+16+8>>2];c[h+12>>2]=c[p+16+12>>2];d=e+(j*244|0)+16|0;c[d>>2]=c[p+16+16>>2];c[d+4>>2]=c[p+16+16+4>>2];c[d+8>>2]=c[p+16+16+8>>2];c[d+12>>2]=c[p+16+16+12>>2];d=e+(j*244|0)+32|0;c[d>>2]=c[p+16+32>>2];c[d+4>>2]=c[p+16+32+4>>2];c[d+8>>2]=c[p+16+32+8>>2];c[d+12>>2]=c[p+16+32+12>>2];d=e+(j*244|0)+48|0;c[d>>2]=c[p+16+48>>2];c[d+4>>2]=c[p+16+48+4>>2];c[d+8>>2]=c[p+16+48+8>>2];c[d+12>>2]=c[p+16+48+12>>2];d=c[b+16>>2]|0;e=d;d=c[d+(j*244|0)+240>>2]|0}h=e;n=+g[e+(j*244|0)+176>>2];o=+g[e+(j*244|0)+180>>2];m=+g[e+(j*244|0)+184>>2]}t=n+ +g[h+(j*244|0)+208>>2];q=o+ +g[h+(j*244|0)+212>>2];o=m+ +g[h+(j*244|0)+216>>2];r=d+304|0;c[r>>2]=(c[r>>2]|0)+1;g[d+372>>2]=t;g[d+376>>2]=q;g[d+380>>2]=o;g[d+384>>2]=0.0;r=c[b+16>>2]|0;s=c[r+(j*244|0)+240>>2]|0;o=+g[r+(j*244|0)+192>>2]+ +g[r+(j*244|0)+224>>2];q=+g[r+(j*244|0)+196>>2]+ +g[r+(j*244|0)+228>>2];t=+g[r+(j*244|0)+200>>2]+ +g[r+(j*244|0)+232>>2];c[s+304>>2]=(c[s+304>>2]|0)+1;g[s+388>>2]=o;g[s+392>>2]=q;g[s+396>>2]=t;g[s+400>>2]=0.0;if(c[f+52>>2]|0){r=c[b+16>>2]|0;s=c[r+(j*244|0)+240>>2]|0;k=r+(j*244|0)|0;c[s+304>>2]=(c[s+304>>2]|0)+1;c[s+4>>2]=c[k>>2];c[s+4+4>>2]=c[k+4>>2];c[s+4+8>>2]=c[k+8>>2];c[s+4+12>>2]=c[k+12>>2];k=r+(j*244|0)+16|0;c[s+20>>2]=c[k>>2];c[s+20+4>>2]=c[k+4>>2];c[s+20+8>>2]=c[k+8>>2];c[s+20+12>>2]=c[k+12>>2];k=r+(j*244|0)+32|0;c[s+36>>2]=c[k>>2];c[s+36+4>>2]=c[k+4>>2];c[s+36+8>>2]=c[k+8>>2];c[s+36+12>>2]=c[k+12>>2];r=r+(j*244|0)+48|0;c[s+52>>2]=c[r>>2];c[s+52+4>>2]=c[r+4>>2];c[s+52+8>>2]=c[r+8>>2];c[s+52+12>>2]=c[r+12>>2]}e=c[b+16>>2]|0;c[(c[e+(j*244|0)+240>>2]|0)+212>>2]=-1;d=c[b+8>>2]|0}j=j+1|0}while((j|0)<(d|0))}if((c[b+28>>2]|0)<0?(c[b+32>>2]|0)<0:0){d=c[b+36>>2]|0;if(d|0){if(a[b+40>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+36>>2]=0}a[b+40>>0]=1;c[b+36>>2]=0;c[b+32>>2]=0}c[b+28>>2]=0;if((c[b+48>>2]|0)<0?(c[b+52>>2]|0)<0:0){d=c[b+56>>2]|0;if(d|0){if(a[b+60>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+56>>2]=0}a[b+60>>0]=1;c[b+56>>2]=0;c[b+52>>2]=0}c[b+48>>2]=0;if((c[b+68>>2]|0)<0?(c[b+72>>2]|0)<0:0){d=c[b+76>>2]|0;if(d|0){if(a[b+80>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+76>>2]=0}a[b+80>>0]=1;c[b+76>>2]=0;c[b+72>>2]=0}c[b+68>>2]=0;if((c[b+88>>2]|0)<0?(c[b+92>>2]|0)<0:0){d=c[b+96>>2]|0;if(d|0){if(a[b+100>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+96>>2]=0}a[b+100>>0]=1;c[b+96>>2]=0;c[b+92>>2]=0}c[b+88>>2]=0;if((c[b+8>>2]|0)>=0){c[b+8>>2]=0;l=p;return 0.0}if((c[b+12>>2]|0)>=0){c[b+8>>2]=0;l=p;return 0.0}d=c[b+16>>2]|0;if(d|0){if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+16>>2]=0}a[b+20>>0]=1;c[b+16>>2]=0;c[b+12>>2]=0;c[b+8>>2]=0;l=p;return 0.0}function Hc(d,e,f,g,i){d=d|0;e=e|0;f=f|0;g=g|0;i=i|0;var j=0,k=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0;x=l;l=l+64|0;c[x+56>>2]=e;w=x+40|0;j=0;e=0;o=0;a:while(1){do{do if((e|0)>-1)if((j|0)>(2147483647-e|0)){c[6629]=75;e=-1;break}else{e=j+e|0;break}while(0);s=c[x+56>>2]|0;j=a[s>>0]|0;if(!(j<<24>>24)){v=93;break a}k=s;b:while(1){switch(j<<24>>24){case 37:{v=10;break b}case 0:{j=k;break b}default:{}}u=k+1|0;c[x+56>>2]=u;j=a[u>>0]|0;k=u}c:do if((v|0)==10){v=0;j=k;do{if((a[k+1>>0]|0)!=37)break c;j=j+1|0;k=k+2|0;c[x+56>>2]=k}while((a[k>>0]|0)==37)}while(0);j=j-s|0;if(d|0)Ox(d,s,j)}while((j|0)!=0);k=c[x+56>>2]|0;j=a[k+1>>0]|0;if(!(NE(j)|0)){r=-1;j=1}else{u=(a[k+2>>0]|0)==36;r=u?j+-48|0:-1;o=u?1:o;j=u?3:1}m=k+j|0;c[x+56>>2]=m;j=a[m>>0]|0;if(((j<<24>>24)+-32|0)>>>0>31|(1<<(j<<24>>24)+-32&75913|0)==0)k=0;else{k=0;n=(j<<24>>24)+-32|0;j=m;while(1){k=1<<n|k;m=j+1|0;c[x+56>>2]=m;j=a[m>>0]|0;n=(j<<24>>24)+-32|0;if(n>>>0>31|(1<<n&75913|0)==0)break;else j=m}}if(j<<24>>24==42){n=m+1|0;j=a[n>>0]|0;if((NE(j)|0)!=0?(a[m+2>>0]|0)==36:0){c[i+(j+-48<<2)>>2]=10;j=c[g+((a[n>>0]|0)+-48<<3)>>2]|0;o=1;n=m+3|0}else{if(o|0){e=-1;break}if(d|0){o=(c[f>>2]|0)+(4-1)&~(4-1);j=c[o>>2]|0;c[f>>2]=o+4;o=0}else{j=0;o=0}}c[x+56>>2]=n;t=(j|0)<0;u=t?0-j|0:j;k=t?k|8192:k}else{j=xn(x+56|0)|0;if((j|0)<0){e=-1;break}u=j;n=c[x+56>>2]|0}do if((a[n>>0]|0)==46){j=n+1|0;if((a[j>>0]|0)!=42){c[x+56>>2]=j;p=xn(x+56|0)|0;j=c[x+56>>2]|0;break}m=n+2|0;j=a[m>>0]|0;if(NE(j)|0?(a[n+3>>0]|0)==36:0){c[i+(j+-48<<2)>>2]=10;p=c[g+((a[m>>0]|0)+-48<<3)>>2]|0;j=n+4|0;c[x+56>>2]=j;break}if(o|0){e=-1;break a}if(d|0){t=(c[f>>2]|0)+(4-1)&~(4-1);j=c[t>>2]|0;c[f>>2]=t+4}else j=0;c[x+56>>2]=m;p=j;j=m}else{p=-1;j=n}while(0);q=0;while(1){if(((a[j>>0]|0)+-65|0)>>>0>57){e=-1;break a}m=j+1|0;c[x+56>>2]=m;n=a[(a[j>>0]|0)+-65+(16+(q*58|0))>>0]|0;if(((n&255)+-1|0)>>>0<8){q=n&255;j=m}else break}if(!(n<<24>>24)){e=-1;break}m=(r|0)>-1;do if(n<<24>>24==19)if(m){e=-1;break a}else v=52;else{if(m){c[i+(r<<2)>>2]=n&255;t=g+(r<<3)|0;v=c[t+4>>2]|0;c[x+40>>2]=c[t>>2];c[x+40+4>>2]=v;v=52;break}if(!d){e=0;break a}Vf(x+40|0,n&255,f);v=53}while(0);if((v|0)==52){v=0;if(d|0)v=53;else j=0}d:do if((v|0)==53){v=0;j=a[j>>0]|0;j=(q|0)!=0&(j&15|0)==3?j&-33:j;m=k&-65537;t=(k&8192|0)==0?k:m;e:do switch(j|0){case 110:switch((q&255)<<24>>24){case 0:{c[c[x+40>>2]>>2]=e;j=0;break d}case 1:{c[c[x+40>>2]>>2]=e;j=0;break d}case 2:{j=c[x+40>>2]|0;c[j>>2]=e;c[j+4>>2]=((e|0)<0)<<31>>31;j=0;break d}case 3:{b[c[x+40>>2]>>1]=e;j=0;break d}case 4:{a[c[x+40>>2]>>0]=e;j=0;break d}case 6:{c[c[x+40>>2]>>2]=e;j=0;break d}case 7:{j=c[x+40>>2]|0;c[j>>2]=e;c[j+4>>2]=((e|0)<0)<<31>>31;j=0;break d}default:{j=0;break d}}case 112:{j=120;k=p>>>0>8?p:8;m=t|8;v=65;break}case 88:case 120:{k=p;m=t;v=65;break}case 111:{j=c[x+40>>2]|0;k=c[x+40+4>>2]|0;m=kp(j,k,x+40|0)|0;q=m;r=0;n=20056;p=(t&8|0)==0|(p|0)>(w-m|0)?p:w-m+1|0;m=t;v=71;break}case 105:case 100:{j=c[x+40>>2]|0;k=c[x+40+4>>2]|0;if((k|0)<0){j=Nt(0,0,j|0,k|0)|0;k=y;c[x+40>>2]=j;c[x+40+4>>2]=k;m=1;n=20056;v=70;break e}else{m=(t&2049|0)!=0&1;n=(t&2048|0)==0?((t&1|0)==0?20056:20058):20057;v=70;break e}}case 117:{m=0;n=20056;j=c[x+40>>2]|0;k=c[x+40+4>>2]|0;v=70;break}case 99:{a[x+39>>0]=c[x+40>>2];s=x+39|0;r=0;n=20056;q=1;k=m;j=w;break}case 109:{j=ME(c[6629]|0)|0;v=75;break}case 115:{j=c[x+40>>2]|0;j=(j|0)==0?20066:j;v=75;break}case 67:{c[x+48>>2]=c[x+40>>2];c[x+48+4>>2]=0;c[x+40>>2]=x+48;p=-1;m=x+48|0;v=80;break}case 83:if(!p){Il(d,32,u,0,t);j=0;v=90;break e}else{m=c[x+40>>2]|0;v=80;break e}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{j=Fc(d,+h[x+40>>3],u,p,t,j)|0;break d}default:{r=0;n=20056;q=p;k=t;j=w}}while(0);f:do if((v|0)==65){s=c[x+40>>2]|0;t=c[x+40+4>>2]|0;q=qo(s,t,x+40|0,j&32)|0;n=(m&8|0)==0|(s|0)==0&(t|0)==0;r=n?0:2;n=n?20056:20056+(j>>>4)|0;p=k;j=s;k=t;v=71}else if((v|0)==70){q=Jk(j,k,x+40|0)|0;r=m;m=t;v=71}else if((v|0)==75){v=0;t=Sh(j,p)|0;s=j;r=0;n=20056;q=(t|0)==0?p:t-j|0;k=m;j=(t|0)==0?j+p|0:t}else if((v|0)==80){v=0;n=m;j=0;while(1){k=c[n>>2]|0;if(!k)break;k=cy(x+60|0,k)|0;if((k|0)<0|k>>>0>(p-j|0)>>>0){v=84;break}j=k+j|0;if(p>>>0>j>>>0)n=n+4|0;else break}if((v|0)==84){v=0;if((k|0)<0){e=-1;break a}}Il(d,32,u,j,t);if(!j){j=0;v=90}else{n=0;while(1){k=c[m>>2]|0;if(!k){v=90;break f}k=cy(x+60|0,k)|0;n=k+n|0;if((n|0)>(j|0)){v=90;break f}Ox(d,x+60|0,k);if(n>>>0>=j>>>0){v=90;break}else m=m+4|0}}}while(0);if((v|0)==71){v=0;k=(j|0)!=0|(k|0)!=0;j=(p|0)!=0|k;k=w-q+((k^1)&1)|0;s=j?q:x+40|0;q=j?((p|0)>(k|0)?p:k):0;k=(p|0)>-1?m&-65537:m;j=w}else if((v|0)==90){v=0;Il(d,32,u,j,t^8192);j=(u|0)>(j|0)?u:j;break}p=j-s|0;q=(q|0)<(p|0)?p:q;t=q+r|0;j=(u|0)<(t|0)?t:u;Il(d,32,j,t,k);Ox(d,n,r);Il(d,48,j,t,k^65536);Il(d,48,q,p,0);Ox(d,s,p);Il(d,32,j,t,k^8192)}while(0)}g:do if((v|0)==93)if(!d)if(!o)e=0;else{e=1;while(1){j=c[i+(e<<2)>>2]|0;if(!j)break;Vf(g+(e<<3)|0,j,f);e=e+1|0;if(e>>>0>=10){e=1;break g}}k=0;while(1){j=e+1|0;if(k|0){e=-1;break g}if(j>>>0>=10){e=1;break g}e=j;k=c[i+(j<<2)>>2]|0}}while(0);l=x;return e|0}function Ic(a){a=a|0;var b=0.0,d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0,k=0,l=0,m=0.0,n=0.0,o=0.0;j=c[a+372>>2]|0;a:do switch(c[j+32>>2]|0){case 1:{g[j+20>>2]=0.0;k=(c[a+364>>2]|0)+-1|0;c[a+364>>2]=k;k=c[a+348+(k<<2)>>2]|0;c[j+4>>2]=k;c[j+32>>2]=2;Fg(a,1.0,0.0,0.0,k);if(Ic(a)|0){k=1;return k|0}j=c[a+372>>2]|0;k=(c[j+32>>2]|0)+-1|0;c[j+32>>2]=k;k=c[j+(k<<2)>>2]|0;c[a+348+(c[a+364>>2]<<2)>>2]=k;j=c[a+372>>2]|0;l=c[j+32>>2]|0;g[j+16+(l<<2)>>2]=0.0;c[j+(l<<2)>>2]=k;c[j+32>>2]=l+1;Fg(a,-1.0,-0.0,-0.0,k);if(Ic(a)|0){l=1;return l|0}k=c[a+372>>2]|0;l=(c[k+32>>2]|0)+-1|0;c[k+32>>2]=l;l=c[k+(l<<2)>>2]|0;c[a+348+(c[a+364>>2]<<2)>>2]=l;k=c[a+372>>2]|0;j=c[k+32>>2]|0;g[k+16+(j<<2)>>2]=0.0;c[k+(j<<2)>>2]=l;c[k+32>>2]=j+1;Fg(a,0.0,1.0,0.0,l);if(Ic(a)|0){l=1;return l|0}k=c[a+372>>2]|0;l=(c[k+32>>2]|0)+-1|0;c[k+32>>2]=l;l=c[k+(l<<2)>>2]|0;c[a+348+(c[a+364>>2]<<2)>>2]=l;k=c[a+372>>2]|0;j=c[k+32>>2]|0;g[k+16+(j<<2)>>2]=0.0;c[k+(j<<2)>>2]=l;c[k+32>>2]=j+1;Fg(a,-0.0,-1.0,-0.0,l);if(Ic(a)|0){l=1;return l|0}k=c[a+372>>2]|0;l=(c[k+32>>2]|0)+-1|0;c[k+32>>2]=l;l=c[k+(l<<2)>>2]|0;c[a+348+(c[a+364>>2]<<2)>>2]=l;k=c[a+372>>2]|0;j=c[k+32>>2]|0;g[k+16+(j<<2)>>2]=0.0;c[k+(j<<2)>>2]=l;c[k+32>>2]=j+1;Fg(a,0.0,0.0,1.0,l);if(Ic(a)|0){l=1;return l|0}k=c[a+372>>2]|0;l=(c[k+32>>2]|0)+-1|0;c[k+32>>2]=l;l=c[k+(l<<2)>>2]|0;c[a+348+(c[a+364>>2]<<2)>>2]=l;k=c[a+372>>2]|0;j=c[k+32>>2]|0;g[k+16+(j<<2)>>2]=0.0;c[k+(j<<2)>>2]=l;c[k+32>>2]=j+1;Fg(a,-0.0,-0.0,-1.0,l);if(Ic(a)|0){l=1;return l|0}else{l=c[a+372>>2]|0;k=(c[l+32>>2]|0)+-1|0;c[l+32>>2]=k;k=c[l+(k<<2)>>2]|0;l=c[a+364>>2]|0;c[a+364>>2]=l+1;c[a+348+(l<<2)>>2]=k;break a}}case 2:{k=c[j+4>>2]|0;l=c[j>>2]|0;d=+g[k+16>>2]-+g[l+16>>2];e=+g[k+20>>2]-+g[l+20>>2];f=+g[k+24>>2]-+g[l+24>>2];b=e*0.0-f*0.0;do if((d*0.0-e)*(d*0.0-e)+(b*b+(f-d*0.0)*(f-d*0.0))>0.0){g[j+24>>2]=0.0;l=(c[a+364>>2]|0)+-1|0;c[a+364>>2]=l;l=c[a+348+(l<<2)>>2]|0;c[j+8>>2]=l;c[j+32>>2]=3;Fg(a,b,f-d*0.0,d*0.0-e,l);if(Ic(a)|0){l=1;return l|0}k=c[a+372>>2]|0;l=(c[k+32>>2]|0)+-1|0;c[k+32>>2]=l;l=c[k+(l<<2)>>2]|0;c[a+348+(c[a+364>>2]<<2)>>2]=l;k=c[a+372>>2]|0;j=c[k+32>>2]|0;g[k+16+(j<<2)>>2]=0.0;c[k+(j<<2)>>2]=l;c[k+32>>2]=j+1;Fg(a,-b,-(f-d*0.0),-(d*0.0-e),l);if(Ic(a)|0){l=1;return l|0}else{l=c[a+372>>2]|0;k=(c[l+32>>2]|0)+-1|0;c[l+32>>2]=k;k=c[l+(k<<2)>>2]|0;l=c[a+364>>2]|0;c[a+364>>2]=l+1;c[a+348+(l<<2)>>2]=k;break}}while(0);b=f*0.0-d*0.0;do if((d-e*0.0)*(d-e*0.0)+((e*0.0-f)*(e*0.0-f)+b*b)>0.0){k=c[a+372>>2]|0;j=c[k+32>>2]|0;g[k+16+(j<<2)>>2]=0.0;l=(c[a+364>>2]|0)+-1|0;c[a+364>>2]=l;l=c[a+348+(l<<2)>>2]|0;c[k+(j<<2)>>2]=l;c[k+32>>2]=j+1;Fg(a,e*0.0-f,b,d-e*0.0,l);if(Ic(a)|0){l=1;return l|0}k=c[a+372>>2]|0;l=(c[k+32>>2]|0)+-1|0;c[k+32>>2]=l;l=c[k+(l<<2)>>2]|0;c[a+348+(c[a+364>>2]<<2)>>2]=l;k=c[a+372>>2]|0;j=c[k+32>>2]|0;g[k+16+(j<<2)>>2]=0.0;c[k+(j<<2)>>2]=l;c[k+32>>2]=j+1;Fg(a,-(e*0.0-f),-b,-(d-e*0.0),l);if(Ic(a)|0){l=1;return l|0}else{l=c[a+372>>2]|0;k=(c[l+32>>2]|0)+-1|0;c[l+32>>2]=k;k=c[l+(k<<2)>>2]|0;l=c[a+364>>2]|0;c[a+364>>2]=l+1;c[a+348+(l<<2)>>2]=k;break}}while(0);b=d*0.0-e*0.0;if(b*b+((e-f*0.0)*(e-f*0.0)+(f*0.0-d)*(f*0.0-d))>0.0){k=c[a+372>>2]|0;j=c[k+32>>2]|0;g[k+16+(j<<2)>>2]=0.0;l=(c[a+364>>2]|0)+-1|0;c[a+364>>2]=l;l=c[a+348+(l<<2)>>2]|0;c[k+(j<<2)>>2]=l;c[k+32>>2]=j+1;Fg(a,e-f*0.0,f*0.0-d,b,l);if(Ic(a)|0){l=1;return l|0}k=c[a+372>>2]|0;l=(c[k+32>>2]|0)+-1|0;c[k+32>>2]=l;l=c[k+(l<<2)>>2]|0;c[a+348+(c[a+364>>2]<<2)>>2]=l;k=c[a+372>>2]|0;j=c[k+32>>2]|0;g[k+16+(j<<2)>>2]=0.0;c[k+(j<<2)>>2]=l;c[k+32>>2]=j+1;Fg(a,-(e-f*0.0),-(f*0.0-d),-b,l);if(Ic(a)|0){l=1;return l|0}else{l=c[a+372>>2]|0;k=(c[l+32>>2]|0)+-1|0;c[l+32>>2]=k;k=c[l+(k<<2)>>2]|0;l=c[a+364>>2]|0;c[a+364>>2]=l+1;c[a+348+(l<<2)>>2]=k;break a}}break}case 3:{l=c[j+4>>2]|0;k=c[j>>2]|0;f=+g[k+16>>2];b=+g[l+16>>2]-f;h=+g[k+20>>2];d=+g[l+20>>2]-h;i=+g[k+24>>2];e=+g[l+24>>2]-i;l=c[j+8>>2]|0;f=+g[l+16>>2]-f;h=+g[l+20>>2]-h;i=+g[l+24>>2]-i;if((b*h-d*f)*(b*h-d*f)+((d*i-e*h)*(d*i-e*h)+(e*f-b*i)*(e*f-b*i))>0.0){g[j+28>>2]=0.0;l=(c[a+364>>2]|0)+-1|0;c[a+364>>2]=l;l=c[a+348+(l<<2)>>2]|0;c[j+12>>2]=l;c[j+32>>2]=4;Fg(a,d*i-e*h,e*f-b*i,b*h-d*f,l);if(Ic(a)|0){l=1;return l|0}k=c[a+372>>2]|0;l=(c[k+32>>2]|0)+-1|0;c[k+32>>2]=l;l=c[k+(l<<2)>>2]|0;c[a+348+(c[a+364>>2]<<2)>>2]=l;k=c[a+372>>2]|0;j=c[k+32>>2]|0;g[k+16+(j<<2)>>2]=0.0;c[k+(j<<2)>>2]=l;c[k+32>>2]=j+1;Fg(a,-(d*i-e*h),-(e*f-b*i),-(b*h-d*f),l);if(Ic(a)|0){l=1;return l|0}else{l=c[a+372>>2]|0;k=(c[l+32>>2]|0)+-1|0;c[l+32>>2]=k;k=c[l+(k<<2)>>2]|0;l=c[a+364>>2]|0;c[a+364>>2]=l+1;c[a+348+(l<<2)>>2]=k;break a}}break}case 4:{l=c[j>>2]|0;k=c[j+12>>2]|0;i=+g[k+16>>2];o=+g[l+16>>2]-i;m=+g[k+20>>2];b=+g[l+20>>2]-m;e=+g[k+24>>2];f=+g[l+24>>2]-e;l=c[j+4>>2]|0;d=+g[l+16>>2]-i;h=+g[l+20>>2]-m;n=+g[l+24>>2]-e;l=c[j+8>>2]|0;i=+g[l+16>>2]-i;m=+g[l+20>>2]-m;e=+g[l+24>>2]-e;if(!((0.0!=0.0?1:o*h*e+(b*n*i+f*d*m-o*n*m-b*d*e)-f*h*i!=o*h*e+(b*n*i+f*d*m-o*n*m-b*d*e)-f*h*i)|o*h*e+(b*n*i+f*d*m-o*n*m-b*d*e)-f*h*i==0.0)){l=1;return l|0}break}default:{}}while(0);l=0;return l|0}function Jc(b,d,e){b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,k=0,l=0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0;w=(a[b+180>>0]|0)==0;if(w?(a[b+48>>0]|0)!=0:0){r=+g[b+116>>2];h=+g[e>>2];J=+g[b+132>>2];f=+g[e+4>>2];K=+g[b+148>>2];z=+g[e+8>>2];s=+g[b+120>>2];H=+g[b+136>>2];I=+g[b+152>>2];t=+g[b+124>>2];G=+g[b+140>>2];u=+g[b+156>>2];x=+g[e+16>>2];y=+g[e+20>>2];A=+g[e+24>>2];F=+g[e+32>>2];v=+g[e+36>>2];B=+g[e+40>>2];m=+g[b+164>>2];i=+g[b+168>>2];E=+g[b+172>>2];D=+g[e+48>>2]+(h*m+f*i+z*E);C=x*m+y*i+A*E+ +g[e+52>>2];E=F*m+v*i+B*E+ +g[e+56>>2];g[b+824>>2]=r*h+J*f+K*z;g[b+828>>2]=h*s+f*H+z*I;g[b+832>>2]=h*t+f*G+z*u;g[b+836>>2]=0.0;g[b+840>>2]=r*x+J*y+K*A;g[b+844>>2]=s*x+H*y+I*A;g[b+848>>2]=t*x+G*y+u*A;g[b+852>>2]=0.0;g[b+856>>2]=r*F+J*v+K*B;g[b+860>>2]=s*F+H*v+I*B;g[b+864>>2]=t*F+G*v+u*B;g[b+868>>2]=0.0;g[b+872>>2]=D;g[b+876>>2]=C;g[b+880>>2]=E;g[b+884>>2]=0.0;E=+g[b+52>>2];C=+g[d>>2];D=+g[b+68>>2];B=+g[d+4>>2];u=+g[b+84>>2];v=+g[d+8>>2];G=+g[b+56>>2];F=+g[b+72>>2];t=+g[b+88>>2];I=+g[b+60>>2];H=+g[b+76>>2];s=+g[b+92>>2];K=+g[d+16>>2];J=+g[d+20>>2];r=+g[d+24>>2];A=+g[d+32>>2];y=+g[d+36>>2];x=+g[d+40>>2];z=+g[b+100>>2];f=+g[b+104>>2];h=+g[b+108>>2];k=b+856|0;l=b+840|0;i=K*z+J*f+r*h;m=I*A+H*y+s*x;n=G*A+F*y+t*x;o=E*A+D*y+u*x;p=I*K+H*J+s*r;q=G*K+F*J+t*r;r=E*K+D*J+u*r;s=C*I+B*H+v*s;t=C*G+B*F+v*t;u=E*C+D*B+u*v;v=C*z+B*f+v*h;f=A*z+y*f;h=x*h}else{r=+g[b+52>>2];h=+g[d>>2];y=+g[b+68>>2];f=+g[d+4>>2];x=+g[b+84>>2];I=+g[d+8>>2];s=+g[b+56>>2];A=+g[b+72>>2];z=+g[b+88>>2];t=+g[b+60>>2];B=+g[b+76>>2];u=+g[b+92>>2];K=+g[d+16>>2];J=+g[d+20>>2];H=+g[d+24>>2];C=+g[d+32>>2];v=+g[d+36>>2];G=+g[d+40>>2];m=+g[b+100>>2];i=+g[b+104>>2];D=+g[b+108>>2];E=+g[d+48>>2]+(h*m+f*i+I*D);F=K*m+J*i+H*D+ +g[d+52>>2];D=C*m+v*i+G*D+ +g[d+56>>2];g[b+824>>2]=r*h+y*f+x*I;g[b+828>>2]=h*s+f*A+I*z;g[b+832>>2]=h*t+f*B+I*u;g[b+836>>2]=0.0;g[b+840>>2]=r*K+y*J+x*H;g[b+844>>2]=s*K+A*J+z*H;g[b+848>>2]=t*K+B*J+u*H;g[b+852>>2]=0.0;g[b+856>>2]=r*C+y*v+x*G;g[b+860>>2]=s*C+A*v+z*G;g[b+864>>2]=t*C+B*v+u*G;g[b+868>>2]=0.0;g[b+872>>2]=E;g[b+876>>2]=F;g[b+880>>2]=D;g[b+884>>2]=0.0;D=+g[b+116>>2];F=+g[e>>2];E=+g[b+132>>2];G=+g[e+4>>2];u=+g[b+148>>2];v=+g[e+8>>2];B=+g[b+120>>2];C=+g[b+136>>2];t=+g[b+152>>2];z=+g[b+124>>2];A=+g[b+140>>2];s=+g[b+156>>2];x=+g[e+16>>2];y=+g[e+20>>2];r=+g[e+24>>2];H=+g[e+32>>2];J=+g[e+36>>2];K=+g[e+40>>2];I=+g[b+164>>2];f=+g[b+168>>2];h=+g[b+172>>2];k=b+856|0;l=b+840|0;i=x*I+y*f+r*h;m=z*H+A*J+s*K;n=B*H+C*J+t*K;o=D*H+E*J+u*K;p=z*x+A*y+s*r;q=B*x+C*y+t*r;r=D*x+E*y+u*r;s=F*z+G*A+v*s;t=F*B+G*C+v*t;u=D*F+E*G+u*v;v=F*I+G*f+v*h;d=e;f=H*I+J*f;h=K*h}K=+g[d+48>>2]+v;i=i+ +g[d+52>>2];f=f+h+ +g[d+56>>2];g[b+888>>2]=u;g[b+892>>2]=t;g[b+896>>2]=s;g[b+900>>2]=0.0;g[b+904>>2]=r;g[b+908>>2]=q;g[b+912>>2]=p;g[b+916>>2]=0.0;g[b+920>>2]=o;g[b+924>>2]=n;g[b+928>>2]=m;g[b+932>>2]=0.0;g[b+936>>2]=K;g[b+940>>2]=i;g[b+944>>2]=f;g[b+948>>2]=0.0;c[b+968>>2]=c[b+872>>2];c[b+968+4>>2]=c[b+872+4>>2];c[b+968+8>>2]=c[b+872+8>>2];c[b+968+12>>2]=c[b+872+12>>2];c[b+984>>2]=c[b+936>>2];c[b+984+4>>2]=c[b+936+4>>2];c[b+984+8>>2]=c[b+936+8>>2];c[b+984+12>>2]=c[b+936+12>>2];d=c[b+824>>2]|0;e=c[l>>2]|0;l=c[k>>2]|0;c[b+952>>2]=d;c[b+956>>2]=e;c[b+960>>2]=l;g[b+964>>2]=0.0;f=(c[j>>2]=d,+g[j>>2]);h=(c[j>>2]=e,+g[j>>2]);i=(c[j>>2]=l,+g[j>>2]);if(w?(a[b+48>>0]|0)==0:0){B=+g[b+968>>2];C=+g[b+972>>2];D=+g[b+976>>2];I=D-+g[b+992>>2];G=C-+g[b+988>>2];F=B-+g[b+984>>2];w=b+1016|0;g[w>>2]=F;w=b+1020|0;g[w>>2]=G;w=b+1024|0;g[w>>2]=I;w=b+1028|0;g[w>>2]=0.0;K=F*f;E=G*h;E=K+E;K=I*i;K=E+K;E=K*f;H=K*h;J=K*i;E=B+E;H=C+H;J=D+J;w=b+1e3|0;g[w>>2]=E;w=b+1004|0;g[w>>2]=H;w=b+1008|0;g[w>>2]=J;w=b+1012|0;g[w>>2]=0.0;w=b+1032|0;g[w>>2]=K;w=b+828|0;l=b+844|0;k=b+860|0;K=+g[w>>2];J=+g[l>>2];H=+g[k>>2];K=F*K;J=G*J;J=K+J;H=I*H;H=J+H;k=b+1036|0;g[k>>2]=H;k=b+832|0;l=b+848|0;w=b+864|0;H=+g[k>>2];J=+g[l>>2];K=+g[w>>2];H=F*H;J=G*J;J=H+J;K=I*K;K=J+K;w=b+1040|0;g[w>>2]=K;return}B=+g[b+968>>2];C=+g[b+972>>2];D=+g[b+976>>2];I=+g[b+992>>2]-D;G=+g[b+988>>2]-C;F=+g[b+984>>2]-B;w=b+1016|0;g[w>>2]=F;w=b+1020|0;g[w>>2]=G;w=b+1024|0;g[w>>2]=I;w=b+1028|0;g[w>>2]=0.0;K=F*f;E=G*h;E=K+E;K=I*i;K=E+K;E=K*f;H=K*h;J=K*i;E=B+E;H=C+H;J=D+J;w=b+1e3|0;g[w>>2]=E;w=b+1004|0;g[w>>2]=H;w=b+1008|0;g[w>>2]=J;w=b+1012|0;g[w>>2]=0.0;w=b+1032|0;g[w>>2]=K;w=b+828|0;l=b+844|0;k=b+860|0;K=+g[w>>2];J=+g[l>>2];H=+g[k>>2];K=F*K;J=G*J;J=K+J;H=I*H;H=J+H;k=b+1036|0;g[k>>2]=H;k=b+832|0;l=b+848|0;w=b+864|0;H=+g[k>>2];J=+g[l>>2];K=+g[w>>2];H=F*H;J=G*J;J=H+J;K=I*K;K=J+K;w=b+1040|0;g[w>>2]=K;return}function Kc(a,b,f,i){a=a|0;b=b|0;f=f|0;i=i|0;var j=0.0,k=0.0,m=0.0,n=0,o=0,p=0.0,q=0.0,r=0,s=0,t=0,u=0;o=l;l=l+80|0;n=sb[c[(c[a>>2]|0)+28>>2]&127](a)|0;j=+g[a+4>>2];k=+g[a+8>>2];m=+g[a+12>>2];if((n|0)<=0){l=o;return}i=0;do{Xb[c[(c[a>>2]|0)+16>>2]&3](a,o+76|0,o+52|0,o+64|0,o+56|0,o+72|0,o+68|0,o+48|0,o+60|0,i);a:do switch(c[o+64>>2]|0){case 0:{switch(c[o+60>>2]|0){case 2:{if((c[o+48>>2]|0)<=0)break a;f=0;do{s=(c[o+72>>2]|0)+(N(c[o+68>>2]|0,f)|0)|0;t=c[o+76>>2]|0;r=c[o+56>>2]|0;u=t+(N(r,c[s>>2]|0)|0)|0;q=k*+g[u+4>>2];p=m*+g[u+8>>2];g[o>>2]=j*+g[u>>2];g[o+4>>2]=q;g[o+8>>2]=p;g[o+12>>2]=0.0;u=t+(N(c[s+4>>2]|0,r)|0)|0;p=k*+g[u+4>>2];q=m*+g[u+8>>2];g[o+16>>2]=j*+g[u>>2];g[o+20>>2]=p;g[o+24>>2]=q;g[o+28>>2]=0.0;r=t+(N(c[s+8>>2]|0,r)|0)|0;q=k*+g[r+4>>2];p=m*+g[r+8>>2];g[o+32>>2]=j*+g[r>>2];g[o+36>>2]=q;g[o+40>>2]=p;g[o+44>>2]=0.0;Pb[c[(c[b>>2]|0)+8>>2]&127](b,o,i,f);f=f+1|0}while((f|0)<(c[o+48>>2]|0));break}case 3:{if((c[o+48>>2]|0)<=0)break a;f=0;do{u=(c[o+72>>2]|0)+(N(c[o+68>>2]|0,f)|0)|0;s=c[o+76>>2]|0;t=c[o+56>>2]|0;r=s+(N(t,e[u>>1]|0)|0)|0;p=k*+g[r+4>>2];q=m*+g[r+8>>2];g[o>>2]=j*+g[r>>2];g[o+4>>2]=p;g[o+8>>2]=q;g[o+12>>2]=0.0;r=s+(N(t,e[u+2>>1]|0)|0)|0;q=k*+g[r+4>>2];p=m*+g[r+8>>2];g[o+16>>2]=j*+g[r>>2];g[o+20>>2]=q;g[o+24>>2]=p;g[o+28>>2]=0.0;u=s+(N(t,e[u+4>>1]|0)|0)|0;p=k*+g[u+4>>2];q=m*+g[u+8>>2];g[o+32>>2]=j*+g[u>>2];g[o+36>>2]=p;g[o+40>>2]=q;g[o+44>>2]=0.0;Pb[c[(c[b>>2]|0)+8>>2]&127](b,o,i,f);f=f+1|0}while((f|0)<(c[o+48>>2]|0));break}case 5:{if((c[o+48>>2]|0)<=0)break a;f=0;do{u=(c[o+72>>2]|0)+(N(c[o+68>>2]|0,f)|0)|0;s=c[o+76>>2]|0;t=c[o+56>>2]|0;r=s+(N(t,d[u>>0]|0)|0)|0;p=k*+g[r+4>>2];q=m*+g[r+8>>2];g[o>>2]=j*+g[r>>2];g[o+4>>2]=p;g[o+8>>2]=q;g[o+12>>2]=0.0;r=s+(N(t,d[u+1>>0]|0)|0)|0;q=k*+g[r+4>>2];p=m*+g[r+8>>2];g[o+16>>2]=j*+g[r>>2];g[o+20>>2]=q;g[o+24>>2]=p;g[o+28>>2]=0.0;u=s+(N(t,d[u+2>>0]|0)|0)|0;p=k*+g[u+4>>2];q=m*+g[u+8>>2];g[o+32>>2]=j*+g[u>>2];g[o+36>>2]=p;g[o+40>>2]=q;g[o+44>>2]=0.0;Pb[c[(c[b>>2]|0)+8>>2]&127](b,o,i,f);f=f+1|0}while((f|0)<(c[o+48>>2]|0));break}default:break a}break}case 1:{switch(c[o+60>>2]|0){case 2:{if((c[o+48>>2]|0)<=0)break a;f=0;do{t=(c[o+72>>2]|0)+(N(c[o+68>>2]|0,f)|0)|0;s=c[o+76>>2]|0;u=c[o+56>>2]|0;r=s+(N(u,c[t>>2]|0)|0)|0;p=k*+h[r+8>>3];q=m*+h[r+16>>3];g[o>>2]=j*+h[r>>3];g[o+4>>2]=p;g[o+8>>2]=q;g[o+12>>2]=0.0;r=s+(N(c[t+4>>2]|0,u)|0)|0;q=k*+h[r+8>>3];p=m*+h[r+16>>3];g[o+16>>2]=j*+h[r>>3];g[o+20>>2]=q;g[o+24>>2]=p;g[o+28>>2]=0.0;u=s+(N(c[t+8>>2]|0,u)|0)|0;p=k*+h[u+8>>3];q=m*+h[u+16>>3];g[o+32>>2]=j*+h[u>>3];g[o+36>>2]=p;g[o+40>>2]=q;g[o+44>>2]=0.0;Pb[c[(c[b>>2]|0)+8>>2]&127](b,o,i,f);f=f+1|0}while((f|0)<(c[o+48>>2]|0));break}case 3:{if((c[o+48>>2]|0)<=0)break a;f=0;do{u=(c[o+72>>2]|0)+(N(c[o+68>>2]|0,f)|0)|0;s=c[o+76>>2]|0;t=c[o+56>>2]|0;r=s+(N(t,e[u>>1]|0)|0)|0;p=k*+h[r+8>>3];q=m*+h[r+16>>3];g[o>>2]=j*+h[r>>3];g[o+4>>2]=p;g[o+8>>2]=q;g[o+12>>2]=0.0;r=s+(N(t,e[u+2>>1]|0)|0)|0;q=k*+h[r+8>>3];p=m*+h[r+16>>3];g[o+16>>2]=j*+h[r>>3];g[o+20>>2]=q;g[o+24>>2]=p;g[o+28>>2]=0.0;u=s+(N(t,e[u+4>>1]|0)|0)|0;p=k*+h[u+8>>3];q=m*+h[u+16>>3];g[o+32>>2]=j*+h[u>>3];g[o+36>>2]=p;g[o+40>>2]=q;g[o+44>>2]=0.0;Pb[c[(c[b>>2]|0)+8>>2]&127](b,o,i,f);f=f+1|0}while((f|0)<(c[o+48>>2]|0));break}case 5:{if((c[o+48>>2]|0)<=0)break a;f=0;do{u=(c[o+72>>2]|0)+(N(c[o+68>>2]|0,f)|0)|0;s=c[o+76>>2]|0;t=c[o+56>>2]|0;r=s+(N(t,d[u>>0]|0)|0)|0;p=k*+h[r+8>>3];q=m*+h[r+16>>3];g[o>>2]=j*+h[r>>3];g[o+4>>2]=p;g[o+8>>2]=q;g[o+12>>2]=0.0;r=s+(N(t,d[u+1>>0]|0)|0)|0;q=k*+h[r+8>>3];p=m*+h[r+16>>3];g[o+16>>2]=j*+h[r>>3];g[o+20>>2]=q;g[o+24>>2]=p;g[o+28>>2]=0.0;u=s+(N(t,d[u+2>>0]|0)|0)|0;p=k*+h[u+8>>3];q=m*+h[u+16>>3];g[o+32>>2]=j*+h[u>>3];g[o+36>>2]=p;g[o+40>>2]=q;g[o+44>>2]=0.0;Pb[c[(c[b>>2]|0)+8>>2]&127](b,o,i,f);f=f+1|0}while((f|0)<(c[o+48>>2]|0));break}default:break a}break}default:{}}while(0);Ib[c[(c[a>>2]|0)+24>>2]&127](a,i);i=i+1|0}while((i|0)!=(n|0));l=o;return}
function Yb(d,f){d=d|0;f=f|0;var h=0,i=0,k=0,m=0,n=0,o=0,p=0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0,x=0,y=0,z=0,C=0,D=0,E=0.0,F=0.0,G=0.0,H=0,I=0,J=0.0,K=0.0,L=0.0,M=0.0,N=0,O=0,P=0.0,Q=0.0,R=0.0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0,ia=0,ja=0,ka=0,la=0,ma=0,na=0;la=l;l=l+192|0;i=c[d+56>>2]|0;if(i|0?(Db[c[c[i>>2]>>2]&255](i),h=c[d+56>>2]|0,h|0):0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[6485]=(c[6485]|0)+1;h=ec(151)|0;if(!h)h=0;else{c[(h+4+15&-16)+-4>>2]=h;h=h+4+15&-16}c[h>>2]=10964;a[h+20>>0]=1;c[h+16>>2]=0;c[h+8>>2]=0;c[h+12>>2]=0;a[h+40>>0]=1;c[h+36>>2]=0;c[h+28>>2]=0;c[h+32>>2]=0;a[h+60>>0]=1;c[h+56>>2]=0;c[h+48>>2]=0;c[h+52>>2]=0;c[d+56>>2]=h;n=0;o=0;ka=0;I=0;h=0;while(1){if((n|0)>=(sb[c[(c[d>>2]|0)+96>>2]&127](d)|0))break;do if((I|0)==(o|0)){i=(o|0)==0?1:o<<1;if((o|0)<(i|0)){if((i|0)!=0?(c[6485]=(c[6485]|0)+1,p=ec((i<<4|3)+16|0)|0,(p|0)!=0):0){c[(p+4+15&-16)+-4>>2]=p;k=p+4+15&-16}else k=0;if((o|0)<=0){if(!ka){m=k;h=k;k=o;break}}else{h=0;do{ja=k+(h<<4)|0;ia=ka+(h<<4)|0;c[ja>>2]=c[ia>>2];c[ja+4>>2]=c[ia+4>>2];c[ja+8>>2]=c[ia+8>>2];c[ja+12>>2]=c[ia+12>>2];h=h+1|0}while((h|0)!=(o|0))}c[6486]=(c[6486]|0)+1;gd(c[ka+-4>>2]|0);m=k;h=k;k=o}else{i=o;m=ka;k=o}}else{i=o;m=ka;k=I}while(0);o=m+(I<<4)|0;c[o>>2]=c[la>>2];c[o+4>>2]=c[la+4>>2];c[o+8>>2]=c[la+8>>2];c[o+12>>2]=c[la+12>>2];Mb[c[(c[d>>2]|0)+108>>2]&127](d,n,o);n=n+1|0;o=i;ka=m;I=k+1|0}a[la+124+16>>0]=1;ja=la+124+12|0;c[ja>>2]=0;c[la+124+4>>2]=0;c[la+124+8>>2]=0;a[la+124+36>>0]=1;ia=la+124+32|0;c[ia>>2]=0;c[la+124+24>>2]=0;c[la+124+28>>2]=0;a[la+124+56>>0]=1;ha=la+124+52|0;c[ha>>2]=0;c[la+124+44>>2]=0;c[la+124+48>>2]=0;if(f){if((I|0)>0){H=0;i=0;k=0;m=0;while(1){h=H;H=H+1|0;a:do if((H|0)<(I|0)){C=ka+(h<<4)|0;D=ka+(h<<4)+4|0;z=ka+(h<<4)+8|0;n=H;h=m;while(1){y=n+1|0;b:do if((y|0)<(I|0)){w=ka+(n<<4)|0;x=ka+(n<<4)+4|0;f=ka+(n<<4)+8|0;m=y;while(1){q=+g[C>>2];J=+g[w>>2]-q;r=+g[D>>2];K=+g[x>>2]-r;s=+g[z>>2];F=+g[f>>2]-s;L=+g[ka+(m<<4)>>2]-q;M=+g[ka+(m<<4)+4>>2]-r;G=+g[ka+(m<<4)+8>>2]-s;E=(J*M-K*L)*(J*M-K*L)+((K*G-F*M)*(K*G-F*M)+(F*L-J*G)*(F*L-J*G));c:do if(E>9.999999747378752e-05){v=1.0/+B(+E);t=(K*G-F*M)*v;u=(F*L-J*G)*v;v=(J*M-K*L)*v;d:do if((h|0)>0){n=0;while(1){if(t*+g[k+(n<<4)>>2]+u*+g[k+(n<<4)+4>>2]+v*+g[k+(n<<4)+8>>2]>.9990000128746033)break d;n=n+1|0;if((n|0)>=(h|0)){fa=34;break}}}else fa=34;while(0);e:do if((fa|0)==34){fa=0;n=0;do{if(t*+g[ka+(n<<4)>>2]+u*+g[ka+(n<<4)+4>>2]+v*+g[ka+(n<<4)+8>>2]-(t*q+u*r+v*s)+-.009999999776482582>0.0)break e;n=n+1|0}while((n|0)<(I|0));do if((h|0)==(i|0)){p=(i|0)==0?1:i<<1;if((i|0)<(p|0)){do if(!p)o=0;else{c[6485]=(c[6485]|0)+1;n=ec((p<<4|3)+16|0)|0;if(!n){o=0;break}c[(n+4+15&-16)+-4>>2]=n;o=n+4+15&-16}while(0);if((i|0)<=0){if(!k){n=p;k=o;break}}else{n=0;do{ea=o+(n<<4)|0;da=k+(n<<4)|0;c[ea>>2]=c[da>>2];c[ea+4>>2]=c[da+4>>2];c[ea+8>>2]=c[da+8>>2];c[ea+12>>2]=c[da+12>>2];n=n+1|0}while((n|0)!=(i|0))}c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0);n=p;k=o}else n=i}else{n=i;i=h}while(0);g[k+(i<<4)>>2]=t;g[k+(i<<4)+4>>2]=u;g[k+(i<<4)+8>>2]=v;g[k+(i<<4)+12>>2]=-(t*q+u*r+v*s);i=n;h=h+1|0}while(0);if(E>9.999999747378752e-05){r=1.0/+B(+E);t=-((K*G-F*M)*r);s=-((F*L-J*G)*r);r=-((J*M-K*L)*r);if((h|0)>0){n=0;do{if(+g[k+(n<<4)>>2]*t+ +g[k+(n<<4)+4>>2]*s+ +g[k+(n<<4)+8>>2]*r>.9990000128746033)break c;n=n+1|0}while((n|0)<(h|0))}q=+g[C>>2]*t+ +g[D>>2]*s+ +g[z>>2]*r;n=0;do{if(+g[ka+(n<<4)>>2]*t+ +g[ka+(n<<4)+4>>2]*s+ +g[ka+(n<<4)+8>>2]*r-q+-.009999999776482582>0.0)break c;n=n+1|0}while((n|0)<(I|0));do if((h|0)==(i|0)){p=(i|0)==0?1:i<<1;if((i|0)>=(p|0)){n=i;break}do if(!p)o=0;else{c[6485]=(c[6485]|0)+1;n=ec((p<<4|3)+16|0)|0;if(!n){o=0;break}c[(n+4+15&-16)+-4>>2]=n;o=n+4+15&-16}while(0);if((i|0)<=0){if(!k){n=p;k=o;break}}else{n=0;do{ea=o+(n<<4)|0;da=k+(n<<4)|0;c[ea>>2]=c[da>>2];c[ea+4>>2]=c[da+4>>2];c[ea+8>>2]=c[da+8>>2];c[ea+12>>2]=c[da+12>>2];n=n+1|0}while((n|0)!=(i|0))}c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0);n=p;k=o}else{n=i;i=h}while(0);g[k+(i<<4)>>2]=t;g[k+(i<<4)+4>>2]=s;g[k+(i<<4)+8>>2]=r;g[k+(i<<4)+12>>2]=-q;i=n;h=h+1|0}}while(0);m=m+1|0;if((m|0)==(I|0))break b}}while(0);if((y|0)==(I|0))break a;n=y}}else h=m;while(0);if((H|0)==(I|0)){f=h;break}else m=h}if((f|0)>0){h=0;o=0;p=0;while(1){ea=k+(p<<4)|0;c[la>>2]=c[ea>>2];c[la+4>>2]=c[ea+4>>2];c[la+8>>2]=c[ea+8>>2];q=+g[k+(p<<4)+12>>2];q=q-+ib[c[(c[d>>2]|0)+48>>2]&15](d);do if((p|0)==(h|0)){n=(h|0)==0?1:h<<1;if((h|0)<(n|0)){if((n|0)!=0?(c[6485]=(c[6485]|0)+1,N=ec((n<<4|3)+16|0)|0,(N|0)!=0):0){c[(N+4+15&-16)+-4>>2]=N;m=N+4+15&-16}else m=0;if((h|0)<=0){if(!o)break}else{i=0;do{ea=m+(i<<4)|0;da=o+(i<<4)|0;c[ea>>2]=c[da>>2];c[ea+4>>2]=c[da+4>>2];c[ea+8>>2]=c[da+8>>2];c[ea+12>>2]=c[da+12>>2];i=i+1|0}while((i|0)!=(h|0))}c[6486]=(c[6486]|0)+1;gd(c[o+-4>>2]|0)}else{n=h;m=o}}else{n=h;m=o;h=p}while(0);ea=m+(h<<4)|0;c[ea>>2]=c[la>>2];c[ea+4>>2]=c[la+4>>2];c[ea+8>>2]=c[la+8>>2];g[m+(h<<4)+12>>2]=q;p=p+1|0;if((p|0)<(f|0)){h=n;o=m}else break}N=0;o=0;n=0;i=0;h=0;do{I=N;N=N+1|0;f:do if((N|0)<(p|0)){f=N;while(1){H=f+1|0;g:do if((H|0)<(p|0)){z=m+(f<<4)+4|0;C=m+(f<<4)+8|0;D=m+(f<<4)|0;y=m+(f<<4)+12|0;f=H;while(1){t=+g[z>>2];q=+g[m+(f<<4)+8>>2];r=+g[C>>2];u=+g[m+(f<<4)+4>>2];v=+g[m+(f<<4)>>2];E=+g[D>>2];s=+g[m+(I<<4)+8>>2];F=+g[m+(I<<4)+4>>2];G=+g[m+(I<<4)>>2];h:do if((((u*E-t*v)*(u*E-t*v)+((t*q-r*u)*(t*q-r*u)+(r*v-q*E)*(r*v-q*E))>9.999999747378752e-05?(v*F-u*G)*(v*F-u*G)+((u*s-q*F)*(u*s-q*F)+(q*G-v*s)*(q*G-v*s))>9.999999747378752e-05:0)?(t*G-E*F)*(t*G-E*F)+((r*F-t*s)*(r*F-t*s)+(E*s-r*G)*(E*s-r*G))>9.999999747378752e-05:0)?(P=s*(u*E-t*v)+(F*(r*v-q*E)+(t*q-r*u)*G),+A(+P)>9.999999974752427e-07):0){Q=+g[m+(I<<4)+12>>2];R=+g[y>>2];M=+g[m+(f<<4)+12>>2];J=-1.0/P*((r*F-t*s)*M+((t*q-r*u)*Q+(u*s-q*F)*R));r=-1.0/P*((E*s-r*G)*M+((r*v-q*E)*Q+(q*G-v*s)*R));q=-1.0/P*((t*G-E*F)*M+((u*E-t*v)*Q+(v*F-u*G)*R));w=0;do{if(+g[m+(w<<4)+12>>2]+(J*+g[m+(w<<4)>>2]+r*+g[m+(w<<4)+4>>2]+q*+g[m+(w<<4)+8>>2])+-.009999999776482582>0.0)break h;w=w+1|0}while((w|0)<(p|0));do if((i|0)==(o|0)){x=(o|0)==0?1:o<<1;if((o|0)>=(x|0)){x=o;break}do if(!x)w=0;else{c[6485]=(c[6485]|0)+1;h=ec((x<<4|3)+16|0)|0;if(!h){w=0;break}c[(h+4+15&-16)+-4>>2]=h;w=h+4+15&-16}while(0);if((o|0)<=0){if(!n){n=w;h=w;break}}else{h=0;do{ea=w+(h<<4)|0;da=n+(h<<4)|0;c[ea>>2]=c[da>>2];c[ea+4>>2]=c[da+4>>2];c[ea+8>>2]=c[da+8>>2];c[ea+12>>2]=c[da+12>>2];h=h+1|0}while((h|0)!=(o|0))}c[6486]=(c[6486]|0)+1;gd(c[n+-4>>2]|0);n=w;h=w}else{x=o;o=i}while(0);g[n+(o<<4)>>2]=J;g[n+(o<<4)+4>>2]=r;g[n+(o<<4)+8>>2]=q;g[n+(o<<4)+12>>2]=0.0;o=x;i=i+1|0}while(0);f=f+1|0;if((f|0)==(p|0))break g}}while(0);if((H|0)==(p|0))break f;f=H}}while(0)}while((N|0)!=(p|0))}else{n=0;m=0;i=0;h=0}}else{n=0;m=0;k=0;i=0;h=0}hc(la+124|0,h,i);if(n|0){c[6486]=(c[6486]|0)+1;gd(c[n+-4>>2]|0)}if(m|0){c[6486]=(c[6486]|0)+1;gd(c[m+-4>>2]|0)}if(k|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}}else hc(la+124|0,h,I);H=c[la+124+44>>2]|0;if((H|0)>0){c[6485]=(c[6485]|0)+1;h=ec((H<<4|3)+16|0)|0;if(!h)i=0;else{c[(h+4+15&-16)+-4>>2]=h;i=h+4+15&-16}h=0;do{ea=i+(h<<4)|0;c[ea>>2]=c[la>>2];c[ea+4>>2]=c[la+4>>2];c[ea+8>>2]=c[la+8>>2];c[ea+12>>2]=c[la+12>>2];h=h+1|0}while((h|0)!=(H|0));ea=i;ca=i}else{ea=0;ca=0}a[la+104+16>>0]=1;da=la+104+12|0;c[da>>2]=0;ba=la+104+4|0;c[ba>>2]=0;c[la+104+8>>2]=0;k=la;n=k+19|0;do{a[k>>0]=0;k=k+1|0}while((k|0)<(n|0));if((H|0)<0)bb();if(H|0){We(la+104|0,H);i=c[da>>2]|0;h=0;do{a[i+(h*36|0)+16>>0]=1;k=i+(h*36|0)+4|0;c[k>>2]=0;c[k+4>>2]=0;c[k+8>>2]=0;k=i+(h*36|0)+20|0;m=la+3|0;n=k+16|0;do{a[k>>0]=a[m>>0]|0;k=k+1|0;m=m+1|0}while((k|0)<(n|0));h=h+1|0}while((h|0)!=(H|0))}c[ba>>2]=H;o=c[la+124+4>>2]|0;n=c[d+56>>2]|0;m=c[n+8>>2]|0;if((m|0)<(o|0)){if((c[n+12>>2]|0)<(o|0)){if(!o){h=0;k=m}else{c[6485]=(c[6485]|0)+1;h=ec((o<<4|3)+16|0)|0;if(!h)h=0;else{c[(h+4+15&-16)+-4>>2]=h;h=h+4+15&-16}k=c[n+8>>2]|0}if((k|0)>0){i=0;do{aa=h+(i<<4)|0;$=(c[n+16>>2]|0)+(i<<4)|0;c[aa>>2]=c[$>>2];c[aa+4>>2]=c[$+4>>2];c[aa+8>>2]=c[$+8>>2];c[aa+12>>2]=c[$+12>>2];i=i+1|0}while((i|0)!=(k|0))}i=c[n+16>>2]|0;if(i|0){if(a[n+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[n+16>>2]=0}a[n+20>>0]=1;c[n+16>>2]=h;c[n+12>>2]=o;i=n+16|0}else i=n+16|0;h=m;do{aa=(c[i>>2]|0)+(h<<4)|0;c[aa>>2]=c[la>>2];c[aa+4>>2]=c[la+4>>2];c[aa+8>>2]=c[la+8>>2];c[aa+12>>2]=c[la+12>>2];h=h+1|0}while((h|0)!=(o|0))}c[n+8>>2]=o;if((o|0)>0){h=0;do{$=(c[ja>>2]|0)+(h<<4)|0;aa=(c[(c[d+56>>2]|0)+16>>2]|0)+(h<<4)|0;c[aa>>2]=c[$>>2];c[aa+4>>2]=c[$+4>>2];c[aa+8>>2]=c[$+8>>2];c[aa+12>>2]=c[$+12>>2];h=h+1|0}while((h|0)!=(o|0))}if((H|0)>0){D=0;do{z=(c[ia>>2]|0)+((c[(c[ha>>2]|0)+(D<<2)>>2]|0)*12|0)|0;y=z;h=0;do{C=y+4|0;x=c[y+((c[C>>2]|0)*12|0)+8>>2]|0;f=c[da>>2]|0;w=f+(D*36|0)+4|0;i=c[w>>2]|0;p=f+(D*36|0)+8|0;if((i|0)==(c[p>>2]|0)?(O=(i|0)==0?1:i<<1,(i|0)<(O|0)):0){if(!O)o=0;else{c[6485]=(c[6485]|0)+1;i=ec((O<<2|3)+16|0)|0;if(!i)i=0;else{c[(i+4+15&-16)+-4>>2]=i;i=i+4+15&-16}o=i;i=c[w>>2]|0}n=f+(D*36|0)+12|0;m=c[n>>2]|0;if((i|0)<=0)if(!m)k=f+(D*36|0)+16|0;else fa=161;else{k=0;do{c[o+(k<<2)>>2]=c[m+(k<<2)>>2];k=k+1|0}while((k|0)!=(i|0));fa=161}if((fa|0)==161){fa=0;i=f+(D*36|0)+16|0;if(a[i>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[m+-4>>2]|0)}c[n>>2]=0;k=i;i=c[w>>2]|0}a[k>>0]=1;c[n>>2]=o;c[p>>2]=O}c[(c[f+(D*36|0)+12>>2]|0)+(i<<2)>>2]=x;c[w>>2]=(c[w>>2]|0)+1;$=c[y+8>>2]|0;aa=c[ja>>2]|0;s=+g[aa+($<<4)>>2]-+g[aa+(x<<4)>>2];t=+g[aa+($<<4)+4>>2]-+g[aa+(x<<4)+4>>2];q=+g[aa+($<<4)+8>>2]-+g[aa+(x<<4)+8>>2];r=1.0/+B(+(s*s+t*t+q*q));if((h|0)<2){g[la+(h<<4)>>2]=s*r;g[la+(h<<4)+4>>2]=t*r;g[la+(h<<4)+8>>2]=q*r;g[la+(h<<4)+12>>2]=0.0;h=h+1|0}aa=y+((c[C>>2]|0)*12|0)|0;y=aa+((c[aa>>2]|0)*12|0)|0}while((y|0)!=(z|0));if((h|0)==2){L=+g[la+4>>2];M=+g[la+24>>2];P=+g[la+8>>2];Q=+g[la+20>>2];K=+g[la+16>>2];J=+g[la>>2];$=ea+(D<<4)+4|0;aa=ea+(D<<4)+8|0;g[ea+(D<<4)+12>>2]=0.0;R=1.0/+B(+((Q*J-L*K)*(Q*J-L*K)+((L*M-P*Q)*(L*M-P*Q)+(P*K-M*J)*(P*K-M*J))));g[ea+(D<<4)>>2]=(L*M-P*Q)*R;g[$>>2]=(P*K-M*J)*R;g[aa>>2]=(Q*J-L*K)*R;n=c[da>>2]|0;g[n+(D*36|0)+20>>2]=(L*M-P*Q)*R;c[n+(D*36|0)+24>>2]=c[$>>2];c[n+(D*36|0)+28>>2]=c[aa>>2];g[n+(D*36|0)+32>>2]=1000000015047466219876688.0e6}else{n=ea+(D<<4)|0;c[n>>2]=0;c[n+4>>2]=0;c[n+8>>2]=0;c[n+12>>2]=0;n=c[da>>2]|0}i=c[n+(D*36|0)+4>>2]|0;if((i|0)>0){k=c[(c[d+56>>2]|0)+16>>2]|0;r=+g[ea+(D<<4)>>2];s=+g[ea+(D<<4)+4>>2];t=+g[ea+(D<<4)+8>>2];m=c[n+(D*36|0)+12>>2]|0;aa=c[m>>2]|0;q=+g[k+(aa<<4)>>2]*r+ +g[k+(aa<<4)+4>>2]*s+ +g[k+(aa<<4)+8>>2]*t;q=q<1000000015047466219876688.0e6?q:1000000015047466219876688.0e6;if((i|0)!=1){h=1;do{aa=c[m+(h<<2)>>2]|0;R=+g[k+(aa<<4)>>2]*r+ +g[k+(aa<<4)+4>>2]*s+ +g[k+(aa<<4)+8>>2]*t;q=q>R?R:q;h=h+1|0}while((h|0)<(i|0))}}else q=1000000015047466219876688.0e6;g[n+(D*36|0)+32>>2]=-q;D=D+1|0}while((D|0)!=(H|0))}i:do if((c[ba>>2]|0)>0){h=0;n=0;m=0;i=0;o=0;while(1){do if((o|0)==(h|0)){h=(o|0)==0;k=h?1:o<<1;if((o|0)<(k|0)){if((k|0)!=0?(c[6485]=(c[6485]|0)+1,S=ec((k<<2|3)+16|0)|0,(S|0)!=0):0){c[(S+4+15&-16)+-4>>2]=S;m=S+4+15&-16}else m=0;if(h){if(!n){h=1;n=m;aa=m;i=m;break}}else{h=0;do{c[m+(h<<2)>>2]=c[n+(h<<2)>>2];h=h+1|0}while((h|0)!=(o|0))}if(!i){h=k;n=m;aa=m;i=m}else{c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0);h=k;n=m;aa=m;i=m}}else{h=o;aa=m}}else aa=m;while(0);c[n+(o<<2)>>2]=o;o=o+1|0;if((o|0)>=(c[ba>>2]|0))break;else m=aa}O=la+84+12|0;S=la+84+4|0;T=la+48+12|0;h=o;while(1){p=h+-1|0;k=c[n+(p<<2)>>2]|0;c[6485]=(c[6485]|0)+1;i=ec(23)|0;if(!i)o=0;else{c[(i+4+15&-16)+-4>>2]=i;o=i+4+15&-16}c[o>>2]=k;m=c[da>>2]|0;r=+g[m+(k*36|0)+20>>2];s=+g[m+(k*36|0)+24>>2];q=+g[m+(k*36|0)+28>>2];do if((h|0)>1){C=h+-2|0;f=1;i=o;z=1;h=p;p=o;w=o;while(1){x=c[n+(C<<2)>>2]|0;do if(r*+g[m+(x*36|0)+20>>2]+s*+g[m+(x*36|0)+24>>2]+q*+g[m+(x*36|0)+28>>2]>.9990000128746033){do if((z|0)==(f|0)){m=(f|0)==0?1:f<<1;if((f|0)>=(m|0)){y=p;break}do if(!m)o=0;else{c[6485]=(c[6485]|0)+1;k=ec((m<<2|3)+16|0)|0;if(!k){o=0;break}c[(k+4+15&-16)+-4>>2]=k;o=k+4+15&-16}while(0);if((f|0)>0){k=0;do{c[o+(k<<2)>>2]=c[i+(k<<2)>>2];k=k+1|0}while((k|0)!=(f|0));if(!w){f=m;i=o;y=o;w=o;break}}else if((i|0)==0|(w|0)==0){f=m;i=o;y=o;w=o;break}c[6486]=(c[6486]|0)+1;gd(c[w+-4>>2]|0);f=m;i=o;y=o;w=o}else y=p;while(0);c[i+(z<<2)>>2]=x;z=z+1|0;j:do if((h|0)>0){k=0;while(1){if((c[n+(k<<2)>>2]|0)==(x|0))break j;k=k+1|0;if((k|0)>=(h|0)){k=h;break}}}else k=h;while(0);p=h+-1|0;m=n+(k<<2)|0;o=n+(p<<2)|0;if((h|0)<=(k|0)){m=f;N=y;k=w;break}h=c[m>>2]|0;c[m>>2]=c[o>>2];c[o>>2]=h;m=f;h=p;N=y;k=w}else{m=f;N=p;k=w}while(0);if((C|0)<=0)break;C=C+-1|0;f=m;p=N;m=c[da>>2]|0;w=k}if((z|0)<=1)if((z|0)==1){k=N;z=1;fa=359;break}else{k=N;break}a[la+84+16>>0]=1;c[O>>2]=0;c[S>>2]=0;c[la+84+8>>2]=0;D=0;k=0;q=0.0;r=0.0;s=0.0;do{y=c[i+(D<<2)>>2]|0;C=c[da>>2]|0;q=+g[C+(y*36|0)+20>>2]+q;r=+g[C+(y*36|0)+24>>2]+r;s=+g[C+(y*36|0)+28>>2]+s;m=c[C+(y*36|0)+4>>2]|0;if((m|0)>0){x=0;do{w=c[(c[C+(y*36|0)+12>>2]|0)+(x<<2)>>2]|0;$=(c[(c[d+56>>2]|0)+16>>2]|0)+(w<<4)|0;c[la>>2]=c[$>>2];c[la+4>>2]=c[$+4>>2];c[la+8>>2]=c[$+8>>2];c[la+12>>2]=c[$+12>>2];k:do if((k|0)>0){p=c[O>>2]|0;o=0;while(1){if((c[p+(o*24|0)+20>>2]|0)==(w|0))break k;o=o+1|0;if((o|0)>=(k|0)){fa=224;break}}}else fa=224;while(0);if((fa|0)==224){fa=0;c[la+48>>2]=c[la>>2];c[la+48+4>>2]=c[la+4>>2];c[la+48+8>>2]=c[la+8>>2];c[la+48+12>>2]=c[la+12>>2];do if((k|0)==(c[la+84+8>>2]|0)){f=(k|0)==0?1:k<<1;if((k|0)>=(f|0))break;if(!f)p=0;else{c[6485]=(c[6485]|0)+1;k=ec((f*24|3)+16|0)|0;if(!k)k=0;else{c[(k+4+15&-16)+-4>>2]=k;k=k+4+15&-16}p=k;k=c[S>>2]|0}o=c[O>>2]|0;if((k|0)<=0){if(o)fa=234}else{m=0;do{fa=p+(m*24|0)|0;$=o+(m*24|0)|0;c[fa>>2]=c[$>>2];c[fa+4>>2]=c[$+4>>2];c[fa+8>>2]=c[$+8>>2];c[fa+12>>2]=c[$+12>>2];c[fa+16>>2]=c[$+16>>2];c[fa+20>>2]=c[$+20>>2];m=m+1|0}while((m|0)!=(k|0));fa=234}if((fa|0)==234){fa=0;if(a[la+84+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[o+-4>>2]|0);k=c[S>>2]|0}c[O>>2]=0}a[la+84+16>>0]=1;c[O>>2]=p;c[la+84+8>>2]=f}while(0);m=c[O>>2]|0;$=m+(k*24|0)|0;c[$>>2]=c[la+48>>2];c[$+4>>2]=c[la+48+4>>2];c[$+8>>2]=c[la+48+8>>2];c[$+12>>2]=c[la+48+12>>2];c[$+16>>2]=c[la+48+16>>2];c[m+(k*24|0)+20>>2]=w;k=(c[S>>2]|0)+1|0;c[S>>2]=k;m=c[C+(y*36|0)+4>>2]|0}x=x+1|0}while((x|0)<(m|0))}D=D+1|0}while((D|0)!=(z|0));a[la+48+16>>0]=1;c[T>>2]=0;c[la+48+4>>2]=0;c[la+48+8>>2]=0;$=c[i>>2]|0;_=c[da>>2]|0;c[la+48+20>>2]=c[_+($*36|0)+20>>2];c[la+48+24>>2]=c[_+($*36|0)+24>>2];c[la+48+28>>2]=c[_+($*36|0)+28>>2];c[la+48+32>>2]=c[_+($*36|0)+32>>2];P=1.0/+B(+(q*q+r*r+s*s));R=q*P;Q=r*P;P=s*P;if(+A(+P)>.7071067690849304){M=1.0/+B(+(P*P+Q*Q));F=R*-(P*M);G=(P*P+Q*Q)*M;J=0.0;K=Q*M;L=-(R*Q*M);M=-(P*M)}else{M=1.0/+B(+(R*R+Q*Q));F=(R*R+Q*Q)*M;G=-(P*R*M);J=-(Q*M);K=0.0;L=P*-(Q*M);M=R*M}p=c[S>>2]|0;do if((p|0)<2)if((p|0)==1){m=0;p=0;x=0;f=1;while(1){y=c[O>>2]|0;do if((m|0)==(p|0)){w=(p|0)==0?1:p<<1;if((p|0)>=(w|0)){w=p;k=x;o=p;break}do if(!w)k=0;else{c[6485]=(c[6485]|0)+1;k=ec((w*24|3)+16|0)|0;if(!k){k=0;p=m;break}c[(k+4+15&-16)+-4>>2]=k;k=k+4+15&-16;p=m}while(0);if((p|0)<=0){if(x|0)fa=255}else{o=0;do{fa=k+(o*24|0)|0;$=x+(o*24|0)|0;c[fa>>2]=c[$>>2];c[fa+4>>2]=c[$+4>>2];c[fa+8>>2]=c[$+8>>2];c[fa+12>>2]=c[$+12>>2];c[fa+16>>2]=c[$+16>>2];c[fa+20>>2]=c[$+20>>2];o=o+1|0}while((o|0)!=(p|0));fa=255}if((fa|0)==255){fa=0;c[6486]=(c[6486]|0)+1;gd(c[x+-4>>2]|0)}o=m;f=c[S>>2]|0}else{w=p;k=x;o=m}while(0);$=k+(o*24|0)|0;c[$>>2]=c[y>>2];c[$+4>>2]=c[y+4>>2];c[$+8>>2]=c[y+8>>2];c[$+12>>2]=c[y+12>>2];c[$+16>>2]=c[y+16>>2];c[$+20>>2]=c[y+20>>2];m=m+1|0;if((m|0)<(f|0)){p=w;x=k}else{fa=305;break}}}else{k=0;fa=346}else{o=c[O>>2]|0;k=0;do{m=o+(k*24|0)|0;if(J*+g[m>>2]+M*+g[o+(k*24|0)+4>>2]+K*+g[o+(k*24|0)+8>>2]<J*+g[o>>2]+M*+g[o+4>>2]+K*+g[o+8>>2]){c[la>>2]=c[o>>2];c[la+4>>2]=c[o+4>>2];c[la+8>>2]=c[o+8>>2];c[la+12>>2]=c[o+12>>2];c[la+16>>2]=c[o+16>>2];c[la+20>>2]=c[o+20>>2];c[o>>2]=c[m>>2];c[o+4>>2]=c[m+4>>2];c[o+8>>2]=c[m+8>>2];c[o+12>>2]=c[m+12>>2];c[o+16>>2]=c[m+16>>2];c[o+20>>2]=c[m+20>>2];fa=o+(k*24|0)|0;c[fa>>2]=c[la>>2];c[fa+4>>2]=c[la+4>>2];c[fa+8>>2]=c[la+8>>2];c[fa+12>>2]=c[la+12>>2];c[fa+16>>2]=c[la+16>>2];c[fa+20>>2]=c[la+20>>2]}k=k+1|0}while((k|0)<(p|0));g[o+16>>2]=-1000000015047466219876688.0e6;if((p|0)>1){E=+g[o+4>>2];u=+g[o>>2];v=+g[o+8>>2];k=1;do{r=+g[o+(k*24|0)>>2]-u;s=+g[o+(k*24|0)+4>>2]-E;q=+g[o+(k*24|0)+8>>2]-v;t=G*r+L*s+F*q;q=J*r+M*s+K*q;if(t*t+q*q<1.1920928955078125e-07)q=0.0;else{r=+A(+t);if(!(q>=0.0)){s=2.356194496154785;q=(q+r)/(r-q)}else{s=.7853981852531433;q=(q-r)/(q+r)}q=s-q*.7853981852531433;q=t<0.0?-q:q}g[o+(k*24|0)+16>>2]=q;k=k+1|0}while((k|0)!=(p|0))}c[la>>2]=c[o>>2];c[la+4>>2]=c[o+4>>2];c[la+8>>2]=c[o+8>>2];c[la+12>>2]=c[o+12>>2];Ee(la+84|0,la,1,p+-1|0);m=c[O>>2]|0;c[6485]=(c[6485]|0)+1;k=ec(43)|0;if(!k)o=0;else{c[(k+4+15&-16)+-4>>2]=k;o=k+4+15&-16}p=c[O>>2]|0;c[o>>2]=c[m>>2];c[o+4>>2]=c[m+4>>2];c[o+8>>2]=c[m+8>>2];c[o+12>>2]=c[m+12>>2];c[o+16>>2]=c[m+16>>2];c[o+20>>2]=c[m+20>>2];c[6485]=(c[6485]|0)+1;k=ec(67)|0;if(!k)k=0;else{c[(k+4+15&-16)+-4>>2]=k;k=k+4+15&-16}c[k>>2]=c[o>>2];c[k+4>>2]=c[o+4>>2];c[k+8>>2]=c[o+8>>2];c[k+12>>2]=c[o+12>>2];c[k+16>>2]=c[o+16>>2];c[k+20>>2]=c[o+20>>2];if(o|0){c[6486]=(c[6486]|0)+1;gd(c[o+-4>>2]|0)}fa=k+24|0;c[fa>>2]=c[p+24>>2];c[fa+4>>2]=c[p+24+4>>2];c[fa+8>>2]=c[p+24+8>>2];c[fa+12>>2]=c[p+24+12>>2];c[fa+16>>2]=c[p+24+16>>2];c[fa+20>>2]=c[p+24+20>>2];if((c[S>>2]|0)==2){m=2;fa=305;break}y=2;m=2;f=2;o=2;while(1){l:do if((o|0)>1){fa=c[O>>2]|0;x=fa+(y*24|0)|0;q=+g[x>>2];r=+g[fa+(y*24|0)+4>>2];s=+g[fa+(y*24|0)+8>>2];while(1){fa=o+-2|0;p=o+-1|0;K=+g[k+(fa*24|0)>>2];L=K-+g[k+(p*24|0)>>2];G=+g[k+(fa*24|0)+4>>2];F=G-+g[k+(p*24|0)+4>>2];M=+g[k+(fa*24|0)+8>>2];J=M-+g[k+(p*24|0)+8>>2];if((L*(G-r)-F*(K-q))*P+(R*(F*(M-s)-J*(G-r))+Q*(J*(K-q)-L*(M-s)))>0.0)break;if((o|0)>2){m=p;o=p}else{w=x;m=p;o=f;fa=289;break l}}do if((o|0)==(f|0)){w=f<<1;if((f|0)>=(w|0)){w=f;o=f;break}c[6485]=(c[6485]|0)+1;o=ec((f*48|3)+16|0)|0;if(!o)p=0;else{c[(o+4+15&-16)+-4>>2]=o;p=o+4+15&-16}if((m|0)>0){o=0;do{fa=p+(o*24|0)|0;$=k+(o*24|0)|0;c[fa>>2]=c[$>>2];c[fa+4>>2]=c[$+4>>2];c[fa+8>>2]=c[$+8>>2];c[fa+12>>2]=c[$+12>>2];c[fa+16>>2]=c[$+16>>2];c[fa+20>>2]=c[$+20>>2];o=o+1|0}while((o|0)!=(m|0))}c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0);k=p;o=m}else w=f;while(0);o=k+(o*24|0)|0;c[o>>2]=c[x>>2];c[o+4>>2]=c[x+4>>2];c[o+8>>2]=c[x+8>>2];c[o+12>>2]=c[x+12>>2];c[o+16>>2]=c[x+16>>2];c[o+20>>2]=c[x+20>>2];o=m+1|0;m=o;f=w;fa=287}else fa=287;while(0);do if((fa|0)==287){fa=0;if((o|0)!=1)break;w=(c[O>>2]|0)+(y*24|0)|0;o=f;fa=289}while(0);if((fa|0)==289){do if((o|0)==1){c[6485]=(c[6485]|0)+1;o=ec(67)|0;if(!o)p=0;else{c[(o+4+15&-16)+-4>>2]=o;p=o+4+15&-16}if((m|0)<=0){if(!k){f=2;k=p;o=m;break}}else{o=0;do{fa=p+(o*24|0)|0;$=k+(o*24|0)|0;c[fa>>2]=c[$>>2];c[fa+4>>2]=c[$+4>>2];c[fa+8>>2]=c[$+8>>2];c[fa+12>>2]=c[$+12>>2];c[fa+16>>2]=c[$+16>>2];c[fa+20>>2]=c[$+20>>2];o=o+1|0}while((o|0)!=(m|0))}c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0);f=2;k=p;o=m}else{f=o;o=1}while(0);o=k+(o*24|0)|0;c[o>>2]=c[w>>2];c[o+4>>2]=c[w+4>>2];c[o+8>>2]=c[w+8>>2];c[o+12>>2]=c[w+12>>2];c[o+16>>2]=c[w+16>>2];c[o+20>>2]=c[w+20>>2];o=m+1|0;m=o}p=y+1|0;if((p|0)==(c[S>>2]|0))break;else y=p}if((m|0)>0)fa=305;else fa=307}while(0);if((fa|0)==305){fa=0;I=0;p=c[la+48+4>>2]|0;o=c[la+48+8>>2]|0;x=a[la+48+16>>0]|0;while(1){H=k+(I*24|0)+20|0;do if((p|0)==(o|0)){y=(o|0)==0?1:o<<1;if((o|0)>=(y|0)){D=x;p=o;break}do if(!y)w=0;else{c[6485]=(c[6485]|0)+1;p=ec((y<<2|3)+16|0)|0;if(!p){w=0;break}c[(p+4+15&-16)+-4>>2]=p;w=p+4+15&-16}while(0);f=c[T>>2]|0;if((o|0)<=0){if(f)fa=336}else{p=0;do{c[w+(p<<2)>>2]=c[f+(p<<2)>>2];p=p+1|0}while((p|0)!=(o|0));fa=336}if((fa|0)==336){fa=0;if(x<<24>>24){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[T>>2]=0;o=c[la+48+4>>2]|0}c[T>>2]=w;c[la+48+8>>2]=y;D=1;p=o;o=y}else D=x;while(0);c[(c[T>>2]|0)+(p<<2)>>2]=c[H>>2];p=p+1|0;c[la+48+4>>2]=p;C=c[S>>2]|0;m:do if((C|0)>0){y=c[O>>2]|0;w=c[H>>2]|0;f=0;while(1){x=y+(f*24|0)+20|0;f=f+1|0;if((c[x>>2]|0)==(w|0))break;if((f|0)>=(C|0))break m}c[x>>2]=-1}while(0);I=I+1|0;if((I|0)>=(m|0))break;else x=D}a[la+48+16>>0]=D;if((C|0)>0){p=C;fa=307}else fa=346}n:do if((fa|0)==307){fa=0;y=c[O>>2]|0;C=c[ba>>2]|0;D=c[da>>2]|0;H=(z|0)>0;if((C|0)>0){x=0;while(1){I=c[y+(x*24|0)+20>>2]|0;o:do if((I|0)!=-1){if(!H){o=0;while(1){f=c[D+(o*36|0)+4>>2]|0;if((f|0)>0){w=c[D+(o*36|0)+12>>2]|0;m=0;do{if((c[w+(m<<2)>>2]|0)==(I|0)){m=1;break n}m=m+1|0}while((m|0)<(f|0))}o=o+1|0;if((o|0)>=(C|0))break o}}w=0;do{m=0;while(1){if((c[i+(m<<2)>>2]|0)==(w|0))break;m=m+1|0;if((m|0)>=(z|0)){fa=321;break}}do if((fa|0)==321){fa=0;o=c[D+(w*36|0)+4>>2]|0;if((o|0)<=0)break;f=c[D+(w*36|0)+12>>2]|0;m=0;do{if((c[f+(m<<2)>>2]|0)==(I|0)){m=1;break n}m=m+1|0}while((m|0)<(o|0))}while(0);w=w+1|0}while((w|0)<(C|0))}while(0);x=x+1|0;if((x|0)>=(p|0)){fa=346;break}}}else fa=346}while(0);if((fa|0)==346){fa=0;kg((c[d+56>>2]|0)+24|0,la+48|0);m=0}if(k|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}k=c[T>>2]|0;if(k|0){if(a[la+48+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}c[T>>2]=0}k=c[O>>2]|0;if(k|0){if(a[la+84+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}c[O>>2]=0}if(m&(z|0)>0){k=N;fa=359}else k=N}else{k=o;i=o;z=1;h=p;fa=359}while(0);if((fa|0)==359){fa=0;w=0;do{x=c[i+(w<<2)>>2]|0;y=c[da>>2]|0;a[la+16>>0]=1;c[la+12>>2]=0;c[la+4>>2]=0;c[la+8>>2]=0;f=c[y+(x*36|0)+4>>2]|0;if((f|0)>0){c[6485]=(c[6485]|0)+1;o=ec((f<<2|3)+16|0)|0;do if(!o){m=0;p=0}else{c[(o+4+15&-16)+-4>>2]=o;m=c[la+12>>2]|0;if((m|0)==0|(a[la+16>>0]|0)==0){m=o+4+15&-16;p=o+4+15&-16;break}c[6486]=(c[6486]|0)+1;gd(c[m+-4>>2]|0);m=o+4+15&-16;p=o+4+15&-16}while(0);a[la+16>>0]=1;c[la+12>>2]=m;c[la+8>>2]=f;uj(m|0,0,f<<2|0)|0;c[la+4>>2]=f;o=c[y+(x*36|0)+12>>2]|0;m=0;do{c[p+(m<<2)>>2]=c[o+(m<<2)>>2];m=m+1|0}while((m|0)!=(f|0));m=c[la+12>>2]|0}else{c[la+4>>2]=f;m=0}c[la+20>>2]=c[y+(x*36|0)+20>>2];c[la+20+4>>2]=c[y+(x*36|0)+20+4>>2];c[la+20+8>>2]=c[y+(x*36|0)+20+8>>2];c[la+20+12>>2]=c[y+(x*36|0)+20+12>>2];kg((c[d+56>>2]|0)+24|0,la);if(m|0){if(a[la+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[m+-4>>2]|0)}c[la+12>>2]=0}w=w+1|0}while((w|0)<(z|0))}if(!((i|0)==0|(k|0)==0)){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}if(!h){$=n;break i}}}else{aa=0;$=0}while(0);_=c[d+56>>2]|0;c[_+64>>2]=0;c[_+64+4>>2]=0;c[_+64+8>>2]=0;c[_+64+12>>2]=0;h=c[_+28>>2]|0;if((h|0)>0){Z=0;w=0;i=0;k=0;I=0;D=0;p=0;m=0;H=0;f=0;n=0;z=0;y=0;x=0;o=0;while(1){C=c[_+36>>2]|0;Y=c[C+(Z*36|0)+4>>2]|0;if((Y|0)>0){X=Z&65535;W=Z|-65536;O=0;U=I;S=f;h=C;N=o;while(1){V=O+1|0;T=c[h+(Z*36|0)+12>>2]|0;f=c[T+(O<<2)>>2]&65535;O=c[T+(((V|0)==(Y|0)?0:V)<<2)>>2]&65535;T=O<<16>>16>f<<16>>16?f:O;d=O<<16>>16>f<<16>>16?O:f;o=O<<16>>16>f<<16>>16?f:O;f=O<<16>>16>f<<16>>16?O:f;O=S+-1|0;p:do if((((o&65535)<<16)+(f<<16>>16)&O)>>>0<U>>>0?(ga=c[k+((((o&65535)<<16)+(f<<16>>16)&O)<<2)>>2]|0,(ga|0)!=-1):0){h=ga;while(1){if(f<<16>>16==(b[i+(h<<2)>>1]|0)?o<<16>>16==(b[i+(h<<2)+2>>1]|0):0)break;h=c[m+(h<<2)>>2]|0;if((h|0)==-1){I=0;break p}}I=n+(h<<2)|0}else I=0;while(0);h=c[_+16>>2]|0;v=+g[h+(o<<16>>16<<4)>>2]-+g[h+(f<<16>>16<<4)>>2];E=+g[h+(o<<16>>16<<4)+4>>2]-+g[h+(f<<16>>16<<4)+4>>2];t=+g[h+(o<<16>>16<<4)+8>>2]-+g[h+(f<<16>>16<<4)+8>>2];u=1.0/+B(+(v*v+E*E+t*t));h=c[_+48>>2]|0;q:do if((h|0)>0){f=c[_+56>>2]|0;o=0;while(1){q=+g[f+(o<<4)>>2];r=+g[f+(o<<4)+4>>2];s=+g[f+(o<<4)+8>>2];do if(!(+A(+(q-v*u))>1.0e-06)){if(+A(+(r-E*u))>1.0e-06)break;if(!(+A(+(s-t*u))>1.0e-06))break q}while(0);do if(!(+A(+(v*u+q))>1.0e-06)){if(+A(+(E*u+r))>1.0e-06)break;if(!(+A(+(t*u+s))>1.0e-06))break q}while(0);o=o+1|0;if((o|0)>=(h|0)){fa=402;break}}}else fa=402;while(0);if((fa|0)==402){fa=0;do if((h|0)==(c[_+52>>2]|0)){C=(h|0)==0?1:h<<1;if((h|0)>=(C|0))break;if(!C)f=0;else{c[6485]=(c[6485]|0)+1;h=ec((C<<4|3)+16|0)|0;if(!h)h=0;else{c[(h+4+15&-16)+-4>>2]=h;h=h+4+15&-16}f=h;h=c[_+48>>2]|0}if((h|0)>0){o=0;do{ma=f+(o<<4)|0;na=(c[_+56>>2]|0)+(o<<4)|0;c[ma>>2]=c[na>>2];c[ma+4>>2]=c[na+4>>2];c[ma+8>>2]=c[na+8>>2];c[ma+12>>2]=c[na+12>>2];o=o+1|0}while((o|0)!=(h|0))}h=c[_+56>>2]|0;if(h|0){if(a[_+60>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[_+56>>2]=0}a[_+60>>0]=1;c[_+56>>2]=f;c[_+52>>2]=C;h=c[_+48>>2]|0}while(0);na=c[_+56>>2]|0;g[na+(h<<4)>>2]=v*u;g[na+(h<<4)+4>>2]=E*u;g[na+(h<<4)+8>>2]=t*u;g[na+(h<<4)+12>>2]=0.0;c[_+48>>2]=(c[_+48>>2]|0)+1}r:do if(!I){I=((T&65535)<<16)+(d<<16>>16)&O;s:do if(I>>>0<U>>>0){h=c[k+(I<<2)>>2]|0;if((h|0)==-1)break;while(1){if(d<<16>>16==(b[i+(h<<2)>>1]|0)?T<<16>>16==(b[i+(h<<2)+2>>1]|0):0)break;h=c[m+(h<<2)>>2]|0;if((h|0)==-1)break s}C=n+(h<<2)|0;b[C>>1]=W;b[C+2>>1]=W>>>16;C=U;f=S;h=z;o=N;break r}while(0);do if((H|0)==(S|0)){f=(H|0)==0?1:H<<1;if((H|0)>=(f|0)){f=H;break}do if(!f)o=0;else{c[6485]=(c[6485]|0)+1;h=ec((f<<2|3)+16|0)|0;if(!h){o=0;break}c[(h+4+15&-16)+-4>>2]=h;o=h+4+15&-16}while(0);if((H|0)<=0){if(!n){n=o;break}}else{h=0;do{na=o+(h<<2)|0;ma=n+(h<<2)|0;ma=e[ma>>1]|e[ma+2>>1]<<16;b[na>>1]=ma;b[na+2>>1]=ma>>>16;h=h+1|0}while((h|0)!=(H|0))}c[6486]=(c[6486]|0)+1;gd(c[n+-4>>2]|0);n=o}else f=S;while(0);O=n+(H<<2)|0;b[O>>1]=W;b[O+2>>1]=W>>>16;O=H+1|0;do if((y|0)==(w|0)){w=(y|0)==0?1:y<<1;if((y|0)>=(w|0)){w=y;break}do if(!w)o=0;else{c[6485]=(c[6485]|0)+1;h=ec((w<<2|3)+16|0)|0;if(!h){o=0;break}c[(h+4+15&-16)+-4>>2]=h;o=h+4+15&-16}while(0);if((y|0)<=0){if(!i){i=o;break}}else{h=0;do{na=o+(h<<2)|0;ma=i+(h<<2)|0;ma=e[ma>>1]|e[ma+2>>1]<<16;b[na>>1]=ma;b[na+2>>1]=ma>>>16;h=h+1|0}while((h|0)!=(y|0))}c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0);i=o}while(0);na=i+(y<<2)|0;b[na>>1]=(T&65535)<<16|d&65535;b[na+2>>1]=((T&65535)<<16|d&65535)>>>16;y=y+1|0;if((S|0)<(f|0)){do if((U|0)<(f|0)){do if((z|0)<(f|0)){do if(!f)o=0;else{c[6485]=(c[6485]|0)+1;h=ec((f<<2|3)+16|0)|0;if(!h){o=0;break}c[(h+4+15&-16)+-4>>2]=h;o=h+4+15&-16}while(0);if((U|0)<=0){if(!k){k=o;I=f;N=o;break}}else{h=0;do{c[o+(h<<2)>>2]=c[k+(h<<2)>>2];h=h+1|0}while((h|0)!=(U|0))}c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0);k=o;I=f;N=o}else I=z;while(0);z=f<<2;uj(k+(U<<2)|0,0,z-(U<<2)|0)|0;if((D|0)<(f|0)){do if((p|0)<(f|0)){do if(!f)o=0;else{c[6485]=(c[6485]|0)+1;h=ec((z|3)+16|0)|0;if(!h){o=0;break}c[(h+4+15&-16)+-4>>2]=h;o=h+4+15&-16}while(0);if((D|0)<=0){if(!m){p=f;m=o;h=o;break}}else{h=0;do{c[o+(h<<2)>>2]=c[m+(h<<2)>>2];h=h+1|0}while((h|0)!=(D|0))}c[6486]=(c[6486]|0)+1;gd(c[m+-4>>2]|0);p=f;m=o;h=o}else h=x;while(0);uj(m+(D<<2)|0,0,z-(D<<2)|0)|0;x=h}if((f|0)>0){uj(N|0,-1,z|0)|0;uj(x|0,-1,z|0)|0}if((U|0)<=0){C=f;D=f;h=I;o=N;break}o=f+-1|0;h=0;do{na=k+(((e[i+(h<<2)+2>>1]<<16)+(b[i+(h<<2)>>1]|0)&o)<<2)|0;c[m+(h<<2)>>2]=c[na>>2];c[na>>2]=h;h=h+1|0}while((h|0)!=(U|0));C=f;D=f;h=I;o=N}else{C=U;h=z;o=N}while(0);I=((T&65535)<<16)+(d<<16>>16)&f+-1}else{C=U;h=z;o=N}na=k+(I<<2)|0;c[m+(H<<2)>>2]=c[na>>2];c[na>>2]=H;H=O}else{b[I+2>>1]=X;C=U;f=S;h=z;o=N}while(0);if((V|0)>=(Y|0))break;O=V;U=C;S=f;z=h;h=c[_+36>>2]|0;N=o}z=h;h=c[_+28>>2]|0}else C=I;Z=Z+1|0;if((Z|0)>=(h|0))break;else I=C}if((h|0)>0){y=c[_+36>>2]|0;z=c[_+16>>2]|0;x=0;q=0.0;do{p=c[y+(x*36|0)+4>>2]|0;f=c[y+(x*36|0)+12>>2]|0;w=c[f>>2]|0;if((p|0)>=3){o=1;r=+g[_+64>>2];s=+g[_+68>>2];t=+g[_+72>>2];do{ma=c[f+(o<<2)>>2]|0;o=o+1|0;na=c[f+(((o|0)%(p|0)|0)<<2)>>2]|0;E=+g[z+(w<<4)>>2];F=+g[z+(ma<<4)>>2];J=+g[z+(w<<4)+4>>2];K=+g[z+(ma<<4)+4>>2];M=+g[z+(w<<4)+8>>2];P=+g[z+(ma<<4)+8>>2];G=+g[z+(na<<4)>>2];L=+g[z+(na<<4)+4>>2];Q=+g[z+(na<<4)+8>>2];R=+B(+(((E-F)*(J-L)-(J-K)*(E-G))*((E-F)*(J-L)-(J-K)*(E-G))+(((J-K)*(M-Q)-(M-P)*(J-L))*((J-K)*(M-Q)-(M-P)*(J-L))+((M-P)*(E-G)-(E-F)*(M-Q))*((M-P)*(E-G)-(E-F)*(M-Q)))))*.5;r=r+(E+F+G)*.3333333432674408*R;g[_+64>>2]=r;s=s+(J+K+L)*.3333333432674408*R;g[_+68>>2]=s;t=t+(M+P+Q)*.3333333432674408*R;g[_+72>>2]=t;q=q+R}while((o|0)!=(p+-1|0))}x=x+1|0}while((x|0)!=(h|0));o=_+64|0;f=i;p=k;i=1}else fa=380}else{i=0;k=0;m=0;n=0;fa=380}if((fa|0)==380){q=0.0;o=_+64|0;f=i;p=k;i=0}t=1.0/q;u=t*+g[o>>2];g[o>>2]=u;s=t*+g[_+68>>2];g[_+68>>2]=s;t=t*+g[_+72>>2];g[_+72>>2]=t;g[_+96>>2]=3402823466385288598117041.0e14;if(i){k=c[_+36>>2]|0;i=0;r=3402823466385288598117041.0e14;while(1){q=+A(+(+g[k+(i*36|0)+32>>2]+(u*+g[k+(i*36|0)+20>>2]+s*+g[k+(i*36|0)+24>>2]+t*+g[k+(i*36|0)+28>>2])));if(q<r)g[_+96>>2]=q;else q=r;i=i+1|0;if((i|0)==(h|0)){E=q;break}else r=q}}else E=3402823466385288598117041.0e14;i=c[_+8>>2]|0;if((i|0)>0){k=c[_+16>>2]|0;h=0;u=-3402823466385288598117041.0e14;v=-3402823466385288598117041.0e14;t=-3402823466385288598117041.0e14;s=3402823466385288598117041.0e14;r=3402823466385288598117041.0e14;q=3402823466385288598117041.0e14;do{R=+g[k+(h<<4)>>2];q=R<q?R:q;t=R>t?R:t;R=+g[k+(h<<4)+4>>2];r=R<r?R:r;v=R>v?R:v;R=+g[k+(h<<4)+8>>2];s=R<s?R:s;u=R>u?R:u;h=h+1|0}while((h|0)!=(i|0))}else{u=-3402823466385288598117041.0e14;v=-3402823466385288598117041.0e14;t=-3402823466385288598117041.0e14;s=3402823466385288598117041.0e14;r=3402823466385288598117041.0e14;q=3402823466385288598117041.0e14}g[_+100>>2]=q+t;g[_+104>>2]=r+v;g[_+108>>2]=s+u;g[_+112>>2]=0.0;R=t-q;r=v-r;q=u-s;g[_+116>>2]=R;g[_+120>>2]=r;g[_+124>>2]=q;g[_+128>>2]=0.0;s=E/1.7320507764816284;o=R<r?(r<q?2:1):R<q?2:0;q=(+g[_+116+(o<<2)>>2]*.5-s)*.0009765625;g[_+88>>2]=s;g[_+84>>2]=s;g[_+80>>2]=s;r=+g[_+116+(o<<2)>>2]*.5;g[_+80+(o<<2)>>2]=r;h=0;while(1){if(cg(_)|0){fa=493;break}r=r-q;g[_+80+(o<<2)>>2]=r;h=h+1|0;if(h>>>0>=1024){fa=492;break}}t:do if((fa|0)==492){g[_+88>>2]=s;g[_+84>>2]=s;g[_+80>>2]=s}else if((fa|0)==493){q=(+g[_+96>>2]-s)*.0009765625;h=0;k=c[_+80+((1<<(1<<o&3)&3)<<2)>>2]|0;while(1){i=c[_+80+((1<<o&3)<<2)>>2]|0;g[_+80+((1<<o&3)<<2)>>2]=q+(c[j>>2]=i,+g[j>>2]);r=q+ +g[_+80+((1<<(1<<o&3)&3)<<2)>>2];g[_+80+((1<<(1<<o&3)&3)<<2)>>2]=r;h=h+1|0;if(!(cg(_)|0))break;if(h>>>0>=1024)break t;else k=(g[j>>2]=r,c[j>>2]|0)}c[_+80+((1<<o&3)<<2)>>2]=i;c[_+80+((1<<(1<<o&3)&3)<<2)>>2]=k}while(0);if(f|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}if(n|0){c[6486]=(c[6486]|0)+1;gd(c[n+-4>>2]|0)}if(m|0){c[6486]=(c[6486]|0)+1;gd(c[m+-4>>2]|0)}if(p|0){c[6486]=(c[6486]|0)+1;gd(c[p+-4>>2]|0)}if(!(($|0)==0|(aa|0)==0)){c[6486]=(c[6486]|0)+1;gd(c[aa+-4>>2]|0)}o=c[ba>>2]|0;p=c[da>>2]|0;if((o|0)<=0){if(p|0)fa=515}else{h=0;do{k=p+(h*36|0)+4|0;m=p+(h*36|0)+12|0;n=c[m>>2]|0;i=p+(h*36|0)+16|0;if(n|0){if(a[i>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[n+-4>>2]|0)}c[m>>2]=0}a[i>>0]=1;c[m>>2]=0;c[k>>2]=0;c[p+(h*36|0)+8>>2]=0;h=h+1|0}while((h|0)!=(o|0));fa=515}if((fa|0)==515){if(a[la+104+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[p+-4>>2]|0)}c[da>>2]=0}if(!((ea|0)==0|(ca|0)==0)){c[6486]=(c[6486]|0)+1;gd(c[ca+-4>>2]|0)}h=c[ha>>2]|0;if(h|0){if(a[la+124+56>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[ha>>2]=0}a[la+124+56>>0]=1;c[ha>>2]=0;c[la+124+44>>2]=0;c[la+124+48>>2]=0;h=c[ia>>2]|0;if(h|0){if(a[la+124+36>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[ia>>2]=0}a[la+124+36>>0]=1;c[ia>>2]=0;c[la+124+24>>2]=0;c[la+124+28>>2]=0;h=c[ja>>2]|0;if(h|0){if(a[la+124+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[ja>>2]=0}if(!ka){l=la;return 1}c[6486]=(c[6486]|0)+1;gd(c[ka+-4>>2]|0);l=la;return 1}function Zb(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0.0,j=0,k=0,m=0,n=0.0,o=0.0,p=0.0,q=0.0,r=0,s=0,t=0,u=0,v=0.0,w=0.0,x=0,y=0.0,z=0.0,C=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0,M=0,N=0,O=0.0,P=0.0,Q=0.0,R=0,S=0.0,T=0.0,U=0.0,V=0.0,W=0,X=0.0,Y=0.0,Z=0.0,_=0.0,$=0.0,aa=0.0,ba=0.0,ca=0.0,da=0.0,ea=0.0,fa=0.0,ga=0.0,ha=0.0,ia=0,ja=0,ka=0,la=0.0,ma=0.0,na=0.0,oa=0.0,pa=0,qa=0,ra=0,sa=0;sa=l;l=l+1072|0;j=c[b+56>>2]|0;if(!j){j=c[b+4>>2]|0;j=wb[c[(c[j>>2]|0)+12>>2]&63](j,c[d+8>>2]|0,c[e+8>>2]|0)|0;c[b+56>>2]=j;a[b+52>>0]=1}c[h+4>>2]=j;qa=c[d+4>>2]|0;pa=c[e+4>>2]|0;a:do switch(c[qa+4>>2]|0){case 10:switch(c[pa+4>>2]|0){case 10:{oa=+g[j+784>>2];ra=c[qa+56>>2]|0;b=c[pa+56>>2]|0;i=+of(sa+640|0,sa+624|0,+g[qa+32+(ra<<2)>>2],+g[qa+32+(((ra+2|0)%3|0)<<2)>>2],+g[pa+32+(b<<2)>>2],+g[pa+32+(((b+2|0)%3|0)<<2)>>2],ra,b,c[d+12>>2]|0,c[e+12>>2]|0,oa);if(i<oa)Nb[c[(c[h>>2]|0)+16>>2]&15](h,sa+640|0,sa+624|0,i);j=c[h+4>>2]|0;if(!(c[j+780>>2]|0)){l=sa;return}k=c[j+772>>2]|0;m=c[(c[h+8>>2]|0)+8>>2]|0;if((k|0)==(m|0)){te(j,k+4|0,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0);l=sa;return}else{te(j,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0,m+4|0);l=sa;return}}case 8:{oa=+g[j+784>>2];b=c[qa+56>>2]|0;i=+of(sa+640|0,sa+624|0,+g[qa+32+(b<<2)>>2],+g[qa+32+(((b+2|0)%3|0)<<2)>>2],0.0,+g[pa+32>>2]*+g[pa+16>>2],b,1,c[d+12>>2]|0,c[e+12>>2]|0,oa);if(i<oa)Nb[c[(c[h>>2]|0)+16>>2]&15](h,sa+640|0,sa+624|0,i);j=c[h+4>>2]|0;if(!(c[j+780>>2]|0)){l=sa;return}k=c[j+772>>2]|0;m=c[(c[h+8>>2]|0)+8>>2]|0;if((k|0)==(m|0)){te(j,k+4|0,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0);l=sa;return}else{te(j,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0,m+4|0);l=sa;return}}default:{m=pa+4|0;break a}}case 8:{if((c[pa+4>>2]|0)==10){oa=+g[j+784>>2];b=c[pa+56>>2]|0;i=+of(sa+640|0,sa+624|0,0.0,+g[qa+32>>2]*+g[qa+16>>2],+g[pa+32+(b<<2)>>2],+g[pa+32+(((b+2|0)%3|0)<<2)>>2],1,b,c[d+12>>2]|0,c[e+12>>2]|0,oa);if(i<oa)Nb[c[(c[h>>2]|0)+16>>2]&15](h,sa+640|0,sa+624|0,i);j=c[h+4>>2]|0;if(!(c[j+780>>2]|0)){l=sa;return}k=c[j+772>>2]|0;m=c[(c[h+8>>2]|0)+8>>2]|0;if((k|0)==(m|0)){te(j,k+4|0,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0);l=sa;return}else{te(j,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0,m+4|0);l=sa;return}}else m=pa+4|0;break}default:m=pa+4|0}while(0);g[sa+488+128>>2]=999999984306749440.0;g[sa+128+308>>2]=9.999999747378752e-05;a[sa+128+332>>0]=0;j=c[b+8>>2]|0;c[sa+48>>2]=10248;c[sa+48+4>>2]=0;c[sa+48+8>>2]=1065353216;c[sa+48+12>>2]=0;g[sa+48+16>>2]=0.0;c[sa+48+20>>2]=j;c[sa+48+24>>2]=sa+128;c[sa+48+28>>2]=qa;c[sa+48+32>>2]=pa;c[sa+48+36>>2]=c[qa+4>>2];c[sa+48+40>>2]=c[m>>2];g[sa+48+44>>2]=+ib[c[(c[qa>>2]|0)+48>>2]&15](qa);g[sa+48+48>>2]=+ib[c[(c[pa>>2]|0)+48>>2]&15](pa);a[sa+48+52>>0]=0;c[sa+48+60>>2]=-1;c[sa+48+72>>2]=1;c[sa+48+76>>2]=1;c[sa+48+28>>2]=qa;c[sa+48+32>>2]=pa;na=+ib[c[(c[qa>>2]|0)+48>>2]&15](qa);oa=+ib[c[(c[pa>>2]|0)+48>>2]&15](pa);oa=na+oa+ +g[(c[b+56>>2]|0)+784>>2]+ +g[h+32>>2];g[sa+488+128>>2]=oa*oa;j=c[d+12>>2]|0;c[sa+488>>2]=c[j>>2];c[sa+488+4>>2]=c[j+4>>2];c[sa+488+8>>2]=c[j+8>>2];c[sa+488+12>>2]=c[j+12>>2];r=sa+488+16|0;c[r>>2]=c[j+16>>2];c[r+4>>2]=c[j+16+4>>2];c[r+8>>2]=c[j+16+8>>2];c[r+12>>2]=c[j+16+12>>2];s=sa+488+32|0;c[s>>2]=c[j+32>>2];c[s+4>>2]=c[j+32+4>>2];c[s+8>>2]=c[j+32+8>>2];c[s+12>>2]=c[j+32+12>>2];t=sa+488+48|0;c[t>>2]=c[j+48>>2];c[t+4>>2]=c[j+48+4>>2];c[t+8>>2]=c[j+48+8>>2];c[t+12>>2]=c[j+48+12>>2];j=c[e+12>>2]|0;u=sa+488+64|0;c[u>>2]=c[j>>2];c[u+4>>2]=c[j+4>>2];c[u+8>>2]=c[j+8>>2];c[u+12>>2]=c[j+12>>2];x=sa+488+80|0;c[x>>2]=c[j+16>>2];c[x+4>>2]=c[j+16+4>>2];c[x+8>>2]=c[j+16+8>>2];c[x+12>>2]=c[j+16+12>>2];L=sa+488+96|0;c[L>>2]=c[j+32>>2];c[L+4>>2]=c[j+32+4>>2];c[L+8>>2]=c[j+32+8>>2];c[L+12>>2]=c[j+32+12>>2];M=sa+488+112|0;c[M>>2]=c[j+48>>2];c[M+4>>2]=c[j+48+4>>2];c[M+8>>2]=c[j+48+8>>2];c[M+12>>2]=c[j+48+12>>2];j=c[qa+4>>2]|0;if((j|0)<7?(k=c[m>>2]|0,(k|0)<7):0){c[sa+40>>2]=10824;if(!j){j=k;n=0.0}else{n=+ib[c[(c[qa>>2]|0)+48>>2]&15](qa);j=c[m>>2]|0}if(!j)i=0.0;else i=+ib[c[(c[pa>>2]|0)+48>>2]&15](pa);c[sa>>2]=10852;c[sa+4>>2]=h;g[sa+24>>2]=n;g[sa+28>>2]=i;a[sa+36>>0]=0;ia=c[qa+56>>2]|0;b:do if(ia|0){ja=c[pa+56>>2]|0;do if(!ja){if((c[m>>2]|0)!=1)break b;t=sa+1e3+16|0;a[t>>0]=1;u=sa+1e3+12|0;c[u>>2]=0;s=sa+1e3+4|0;c[s>>2]=0;r=sa+1e3+8|0;c[r>>2]=0;j=c[e+12>>2]|0;na=+g[pa+60>>2];oa=+g[pa+60+4>>2];o=+g[pa+60+8>>2];i=na*+g[j>>2]+oa*+g[j+4>>2]+o*+g[j+8>>2]+ +g[j+48>>2];n=na*+g[j+16>>2]+oa*+g[j+20>>2]+o*+g[j+24>>2]+ +g[j+52>>2];o=na*+g[j+32>>2]+oa*+g[j+36>>2]+o*+g[j+40>>2]+ +g[j+56>>2];c[6485]=(c[6485]|0)+1;j=ec(35)|0;if(!j)k=0;else{c[(j+4+15&-16)+-4>>2]=j;k=j+4+15&-16}j=c[u>>2]|0;if(!j)j=0;else{c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0);j=c[s>>2]|0;c[u>>2]=0}a[t>>0]=1;c[u>>2]=k;c[r>>2]=1;g[k+(j<<4)>>2]=i;g[k+(j<<4)+4>>2]=n;g[k+(j<<4)+8>>2]=o;g[k+(j<<4)+12>>2]=0.0;j=(c[s>>2]|0)+1|0;c[s>>2]=j;ra=c[e+12>>2]|0;na=+g[pa+60+16>>2];oa=+g[pa+60+20>>2];o=+g[pa+60+24>>2];i=na*+g[ra>>2]+oa*+g[ra+4>>2]+o*+g[ra+8>>2]+ +g[ra+48>>2];n=na*+g[ra+16>>2]+oa*+g[ra+20>>2]+o*+g[ra+24>>2]+ +g[ra+52>>2];o=na*+g[ra+32>>2]+oa*+g[ra+36>>2]+o*+g[ra+40>>2]+ +g[ra+56>>2];if((j|0)==(c[r>>2]|0)?(N=(j|0)==0?1:j<<1,(j|0)<(N|0)):0){if(!N)m=0;else{c[6485]=(c[6485]|0)+1;j=ec((N<<4|3)+16|0)|0;if(!j)j=0;else{c[(j+4+15&-16)+-4>>2]=j;j=j+4+15&-16}m=j;j=c[s>>2]|0}if((j|0)>0){k=0;do{ra=m+(k<<4)|0;ka=(c[u>>2]|0)+(k<<4)|0;c[ra>>2]=c[ka>>2];c[ra+4>>2]=c[ka+4>>2];c[ra+8>>2]=c[ka+8>>2];c[ra+12>>2]=c[ka+12>>2];k=k+1|0}while((k|0)!=(j|0))}j=c[u>>2]|0;if(j|0){if(a[t>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}c[u>>2]=0}a[t>>0]=1;c[u>>2]=m;c[r>>2]=N;j=c[s>>2]|0}ra=c[u>>2]|0;g[ra+(j<<4)>>2]=i;g[ra+(j<<4)+4>>2]=n;g[ra+(j<<4)+8>>2]=o;g[ra+(j<<4)+12>>2]=0.0;j=(c[s>>2]|0)+1|0;c[s>>2]=j;ra=c[e+12>>2]|0;na=+g[pa+60+32>>2];oa=+g[pa+60+36>>2];o=+g[pa+60+40>>2];i=na*+g[ra>>2]+oa*+g[ra+4>>2]+o*+g[ra+8>>2]+ +g[ra+48>>2];n=na*+g[ra+16>>2]+oa*+g[ra+20>>2]+o*+g[ra+24>>2]+ +g[ra+52>>2];o=na*+g[ra+32>>2]+oa*+g[ra+36>>2]+o*+g[ra+40>>2]+ +g[ra+56>>2];if((j|0)==(c[r>>2]|0)?(R=(j|0)==0?1:j<<1,(j|0)<(R|0)):0){if(!R)m=0;else{c[6485]=(c[6485]|0)+1;j=ec((R<<4|3)+16|0)|0;if(!j)j=0;else{c[(j+4+15&-16)+-4>>2]=j;j=j+4+15&-16}m=j;j=c[s>>2]|0}if((j|0)>0){k=0;do{ra=m+(k<<4)|0;e=(c[u>>2]|0)+(k<<4)|0;c[ra>>2]=c[e>>2];c[ra+4>>2]=c[e+4>>2];c[ra+8>>2]=c[e+8>>2];c[ra+12>>2]=c[e+12>>2];k=k+1|0}while((k|0)!=(j|0))}j=c[u>>2]|0;if(j|0){if(a[t>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}c[u>>2]=0}a[t>>0]=1;c[u>>2]=m;c[r>>2]=R;j=c[s>>2]|0}ra=c[u>>2]|0;g[ra+(j<<4)>>2]=i;g[ra+(j<<4)+4>>2]=n;g[ra+(j<<4)+8>>2]=o;g[ra+(j<<4)+12>>2]=0.0;c[s>>2]=(c[s>>2]|0)+1;p=+g[(c[b+56>>2]|0)+784>>2];qc(sa+48|0,sa+488|0,sa+40|0,c[f+20>>2]|0,0);i=+g[sa+48+4>>2];n=+g[sa+48+8>>2];o=+g[sa+48+12>>2];if(i*i+n*n+o*o>1.1920928955078125e-07){oa=1.0/(i*i+n*n+o*o);g[sa+760>>2]=i*oa;g[sa+760+4>>2]=n*oa;g[sa+760+8>>2]=o*oa;g[sa+760+12>>2]=0.0;oa=+g[sa+48+56>>2];i=+ib[c[(c[qa>>2]|0)+48>>2]&15](qa);i=oa-i-+ib[c[(c[pa>>2]|0)+48>>2]&15](pa);j=c[b+36>>2]|0;if((j|0)<0){if((c[b+40>>2]|0)<0){k=c[b+44>>2]|0;if(k|0){if(a[b+48>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}c[b+44>>2]=0}a[b+48>>0]=1;c[b+44>>2]=0;c[b+40>>2]=0}do{ra=(c[b+44>>2]|0)+(j<<4)|0;c[ra>>2]=c[sa+744>>2];c[ra+4>>2]=c[sa+744+4>>2];c[ra+8>>2]=c[sa+744+8>>2];c[ra+12>>2]=c[sa+744+12>>2];j=j+1|0}while((j|0)!=0)}c[b+36>>2]=0;yc(sa+760|0,c[qa+56>>2]|0,c[d+12>>2]|0,sa+1e3|0,b+32|0,i-p,p,h)}do if(a[b+52>>0]|0?(W=c[h+4>>2]|0,c[W+780>>2]|0):0){j=c[W+772>>2]|0;k=c[(c[h+8>>2]|0)+8>>2]|0;if((j|0)==(k|0)){te(W,j+4|0,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0);break}else{te(W,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0,k+4|0);break}}while(0);j=c[u>>2]|0;if(j|0){if(a[t>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}c[u>>2]=0}}else{oa=+g[(c[b+56>>2]|0)+784>>2];c:do if(!(a[f+24>>0]|0)){qc(sa+48|0,sa+488|0,sa,c[f+20>>2]|0,0);i=+g[sa+32>>2];if(i<0.0&(a[sa+36>>0]|0)!=0){n=+g[sa+8>>2];o=+g[sa+12>>2];p=+g[sa+16>>2];m=c[sa+20>>2]|0;ka=108}}else{u=c[d+12>>2]|0;x=c[e+12>>2]|0;c[6484]=(c[6484]|0)+1;da=+g[ia+64>>2];ea=+g[ia+68>>2];q=+g[u+4>>2];fa=+g[ia+72>>2];v=+g[u+8>>2];y=+g[u+16>>2];C=+g[u+20>>2];G=+g[u+24>>2];H=+g[u+32>>2];F=+g[u+36>>2];z=+g[u+40>>2];ga=+g[ja+64>>2];ha=+g[ja+68>>2];na=+g[ja+72>>2];la=da*+g[u>>2]+ea*q+fa*v+ +g[u+48>>2]-(ga*+g[x>>2]+ha*+g[x+4>>2]+na*+g[x+8>>2]+ +g[x+48>>2]);ma=da*y+ea*C+fa*G+ +g[u+52>>2]-(ga*+g[x+16>>2]+ha*+g[x+20>>2]+na*+g[x+24>>2]+ +g[x+52>>2]);na=da*H+ea*F+fa*z+ +g[u+56>>2]-(ga*+g[x+32>>2]+ha*+g[x+36>>2]+na*+g[x+40>>2]+ +g[x+56>>2]);m=c[ia+28>>2]|0;d:do if((m|0)>0){i=3402823466385288598117041.0e14;j=0;w=0.0;n=0.0;o=0.0;p=0.0;I=y;while(1){f=c[ia+36>>2]|0;fa=+g[f+(j*36|0)+20>>2];ga=+g[f+(j*36|0)+24>>2];ha=+g[f+(j*36|0)+28>>2];y=fa*+g[u>>2]+ga*q+ha*v;v=fa*I+ga*C+ha*G;q=fa*H+ga*F+ha*z;g[sa+656>>2]=y;g[sa+656+4>>2]=v;g[sa+656+8>>2]=q;g[sa+656+12>>2]=0.0;if(y*la+v*ma+q*na<0.0){g[sa+656>>2]=-y;g[sa+656+4>>2]=-v;g[sa+656+8>>2]=-q;G=-y;v=-v;q=-q}else G=y;c[6482]=(c[6482]|0)+1;if(vh(u,x,la,ma,na,G,v,q,ia,ja,i)|0){c[6483]=(c[6483]|0)+1;eg(ia,u,sa+656|0,sa+1e3|0,sa+760|0,sa+720|0,sa+704|0);eg(ja,x,sa+656|0,sa+744|0,sa+736|0,sa+688|0,sa+672|0);y=+g[sa+760>>2];z=+g[sa+744>>2];do if(y<z)k=0;else{C=+g[sa+736>>2];F=+g[sa+1e3>>2];if(C<F){k=0;break}k=1;w=y-z<C-F?y-z:C-F}while(0);if(!k)break;if(w<i){i=w;n=G;o=v;p=q}}j=j+1|0;if((j|0)>=(m|0))break d;q=+g[u+4>>2];v=+g[u+8>>2];I=+g[u+16>>2];C=+g[u+20>>2];G=+g[u+24>>2];H=+g[u+32>>2];F=+g[u+36>>2];z=+g[u+40>>2]}break c}else{i=3402823466385288598117041.0e14;n=0.0;o=0.0;p=0.0}while(0);m=c[ja+28>>2]|0;e:do if((m|0)>0){k=0;y=0.0;while(1){f=c[ja+36>>2]|0;ga=+g[f+(k*36|0)+20>>2];ha=+g[f+(k*36|0)+24>>2];w=+g[f+(k*36|0)+28>>2];q=ga*+g[x>>2]+ha*+g[x+4>>2]+w*+g[x+8>>2];v=ga*+g[x+16>>2]+ha*+g[x+20>>2]+w*+g[x+24>>2];w=ga*+g[x+32>>2]+ha*+g[x+36>>2]+w*+g[x+40>>2];g[sa+656>>2]=q;g[sa+656+4>>2]=v;g[sa+656+8>>2]=w;g[sa+656+12>>2]=0.0;if(q*la+v*ma+w*na<0.0){g[sa+656>>2]=-q;g[sa+656+4>>2]=-v;g[sa+656+8>>2]=-w;q=-q;v=-v;w=-w}c[6482]=(c[6482]|0)+1;if(vh(u,x,la,ma,na,q,v,w,ia,ja,i)|0){c[6483]=(c[6483]|0)+1;eg(ia,u,sa+656|0,sa+1e3|0,sa+760|0,sa+720|0,sa+704|0);eg(ja,x,sa+656|0,sa+744|0,sa+736|0,sa+688|0,sa+672|0);z=+g[sa+760>>2];C=+g[sa+744>>2];do if(z<C)j=0;else{F=+g[sa+736>>2];G=+g[sa+1e3>>2];if(F<G){j=0;break}j=1;y=z-C<F-G?z-C:F-G}while(0);if(!j)break;if(y<i){i=y;n=q;o=v;p=w}}k=k+1|0;if((k|0)>=(m|0))break e}break c}while(0);j=c[ia+48>>2]|0;f:do if((j|0)>0){t=0;k=-1;r=-1;w=0.0;C=0.0;K=0.0;z=0.0;J=0.0;y=0.0;I=0.0;F=0.0;G=0.0;H=0.0;v=0.0;q=0.0;S=0.0;V=0.0;U=0.0;T=0.0;Q=0.0;P=0.0;O=0.0;m=c[ja+48>>2]|0;g:while(1){f=c[ia+56>>2]|0;da=+g[f+(t<<4)>>2];ea=+g[f+(t<<4)+4>>2];ha=+g[f+(t<<4)+8>>2];fa=da*+g[u>>2]+ea*+g[u+4>>2]+ha*+g[u+8>>2];ga=da*+g[u+16>>2]+ea*+g[u+20>>2]+ha*+g[u+24>>2];ha=da*+g[u+32>>2]+ea*+g[u+36>>2]+ha*+g[u+40>>2];if((m|0)>0){s=0;ba=w;ea=n;da=o;ca=p;aa=F;$=G;_=H;Z=S;while(1){f=c[ja+56>>2]|0;G=+g[f+(s<<4)>>2];H=+g[f+(s<<4)+4>>2];Y=+g[f+(s<<4)+8>>2];S=G*+g[x>>2]+H*+g[x+4>>2]+Y*+g[x+8>>2];X=G*+g[x+16>>2]+H*+g[x+20>>2]+Y*+g[x+24>>2];Y=G*+g[x+32>>2]+H*+g[x+36>>2]+Y*+g[x+40>>2];g[sa+656>>2]=ga*Y-ha*X;g[sa+656+4>>2]=ha*S-fa*Y;g[sa+656+8>>2]=fa*X-ga*S;g[sa+656+12>>2]=0.0;do if(!(+A(+(ga*Y-ha*X))>1.0e-06)){if(+A(+(ha*S-fa*Y))>1.0e-06){ka=72;break}if(!(+A(+(fa*X-ga*S))>1.0e-06)){w=ba;n=ea;o=da;p=ca;S=Z;H=_;G=$;F=aa}else ka=72}else ka=72;while(0);do if((ka|0)==72){ka=0;p=1.0/+B(+((fa*X-ga*S)*(fa*X-ga*S)+((ga*Y-ha*X)*(ga*Y-ha*X)+(ha*S-fa*Y)*(ha*S-fa*Y))));n=(ga*Y-ha*X)*p;g[sa+656>>2]=n;o=(ha*S-fa*Y)*p;g[sa+656+4>>2]=o;p=(fa*X-ga*S)*p;g[sa+656+8>>2]=p;if(n*la+o*ma+na*p<0.0){g[sa+656>>2]=-n;g[sa+656+4>>2]=-o;g[sa+656+8>>2]=-p;n=-n;o=-o;p=-p}c[6482]=(c[6482]|0)+1;if(!(vh(u,x,la,ma,na,n,o,p,ia,ja,i)|0)){w=ba;n=ea;o=da;p=ca;S=Z;H=_;G=$;F=aa;break}c[6483]=(c[6483]|0)+1;eg(ia,u,sa+656|0,sa+1e3|0,sa+760|0,sa+720|0,sa+704|0);eg(ja,x,sa+656|0,sa+744|0,sa+736|0,sa+688|0,sa+672|0);w=+g[sa+760>>2];F=+g[sa+744>>2];do if(!(w<F)){G=+g[sa+736>>2];H=+g[sa+1e3>>2];if(G<H){j=0;w=ba;H=_;G=$;F=aa;break}if(w-F<G-H){j=1;w=w-F;T=+g[sa+688>>2];U=+g[sa+688+4>>2];V=+g[sa+688+8>>2];H=+g[sa+704>>2];G=+g[sa+704+4>>2];F=+g[sa+704+8>>2];break}else{j=1;w=G-H;T=+g[sa+672>>2];U=+g[sa+672+4>>2];V=+g[sa+672+8>>2];H=+g[sa+720>>2];G=+g[sa+720+4>>2];F=+g[sa+720+8>>2];break}}else{j=0;w=ba;H=_;G=$;F=aa}while(0);if(!j)break g;if(!(w<i)){n=ea;o=da;p=ca;S=Z;break}i=w;k=s;r=t;C=S;K=fa;z=X;J=ga;y=Y;I=ha;O=T;P=U;Q=V;S=H;q=G;v=F}while(0);s=s+1|0;m=c[ja+48>>2]|0;if((s|0)>=(m|0))break;else{ba=w;ea=n;da=o;ca=p;aa=F;$=G;_=H;Z=S}}j=c[ia+48>>2]|0}t=t+1|0;if((t|0)>=(j|0)){j=r;i=S;break f}}break c}else{k=-1;j=-1;v=0.0;q=0.0;i=0.0;Q=0.0;P=0.0;O=0.0;C=0.0;K=0.0;z=0.0;J=0.0;y=0.0;I=0.0}while(0);if((k|j|0)>-1){F=O-i;G=P-q;H=Q-v;v=C*K+z*J+y*I;w=F*K+G*J+H*I;i=F*C+G*z+H*y;do if(!(1.0-v*v==0.0))if((w-i*v)/(1.0-v*v)<-1000000015047466219876688.0e6)q=-1000000015047466219876688.0e6;else{if(!((w-i*v)/(1.0-v*v)>1000000015047466219876688.0e6)){q=(w-i*v)/(1.0-v*v);break}q=1000000015047466219876688.0e6}else q=0.0;while(0);i=v*q-i;do if(i<-1000000015047466219876688.0e6){if(w-v*1000000015047466219876688.0e6<-1000000015047466219876688.0e6){i=-1000000015047466219876688.0e6;q=-1000000015047466219876688.0e6;break}if(!(w-v*1000000015047466219876688.0e6>1000000015047466219876688.0e6)){i=-1000000015047466219876688.0e6;q=w-v*1000000015047466219876688.0e6;break}i=-1000000015047466219876688.0e6;q=1000000015047466219876688.0e6}else{if(!(i>1000000015047466219876688.0e6))break;if(w+v*1000000015047466219876688.0e6<-1000000015047466219876688.0e6){i=1000000015047466219876688.0e6;q=-1000000015047466219876688.0e6;break}if(!(w+v*1000000015047466219876688.0e6>1000000015047466219876688.0e6)){i=1000000015047466219876688.0e6;q=w+v*1000000015047466219876688.0e6;break}i=1000000015047466219876688.0e6;q=1000000015047466219876688.0e6}while(0);C=C*i;z=z*i;y=y*i;w=C+(F-K*q);v=z+(G-J*q);i=y+(H-I*q);g[sa+1e3>>2]=w;g[sa+1e3+4>>2]=v;g[sa+1e3+8>>2]=i;g[sa+1e3+12>>2]=0.0;if(i*i+(w*w+v*v)>1.1920928955078125e-07){q=+B(+(i*i+(w*w+v*v)));g[sa+1e3>>2]=w*(1.0/q);g[sa+1e3+4>>2]=v*(1.0/q);g[sa+1e3+8>>2]=i*(1.0/q);if(w*(1.0/q)*la+v*(1.0/q)*ma+i*(1.0/q)*na<0.0){g[sa+1e3>>2]=-(w*(1.0/q));g[sa+1e3+4>>2]=-(v*(1.0/q));g[sa+1e3+8>>2]=-(i*(1.0/q))}g[sa+760>>2]=O+C;g[sa+760+4>>2]=P+z;g[sa+760+8>>2]=Q+y;g[sa+760+12>>2]=0.0;Nb[c[(c[h>>2]|0)+16>>2]&15](h,sa+1e3|0,sa+760|0,-q)}}if(la*n+ma*o+na*p<0.0){i=-1000000015047466219876688.0e6;n=-n;o=-o;p=-p;m=0;ka=108}else{i=-1000000015047466219876688.0e6;m=0;ka=108}}while(0);if((ka|0)==108){j=c[b+16>>2]|0;if((j|0)<0){if((c[b+20>>2]|0)<0){k=c[b+24>>2]|0;if(k|0){if(a[b+28>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}c[b+24>>2]=0}a[b+28>>0]=1;c[b+24>>2]=0;c[b+20>>2]=0}do{ka=(c[b+24>>2]|0)+(j<<4)|0;c[ka>>2]=c[sa+1e3>>2];c[ka+4>>2]=c[sa+1e3+4>>2];c[ka+8>>2]=c[sa+1e3+8>>2];c[ka+12>>2]=c[sa+1e3+12>>2];j=j+1|0}while((j|0)!=0)}c[b+16>>2]=0;R=c[qa+56>>2]|0;N=c[pa+56>>2]|0;M=c[d+12>>2]|0;L=c[e+12>>2]|0;O=i-oa;I=1.0/+B(+(n*n+o*o+p*p));K=n*I;J=o*I;I=p*I;g[sa+1e3>>2]=K;g[sa+1e3+4>>2]=J;g[sa+1e3+8>>2]=I;c[sa+1e3+12>>2]=m;k=c[N+28>>2]|0;if((k|0)>0){m=c[N+36>>2]|0;n=+g[L>>2];o=+g[L+4>>2];p=+g[L+8>>2];q=+g[L+16>>2];v=+g[L+20>>2];w=+g[L+24>>2];y=+g[L+32>>2];z=+g[L+36>>2];C=+g[L+40>>2];i=-3402823466385288598117041.0e14;j=0;x=-1;while(1){F=+g[m+(j*36|0)+20>>2];G=+g[m+(j*36|0)+24>>2];H=+g[m+(j*36|0)+28>>2];r=K*(F*n+G*o+H*p)+J*(F*q+G*v+H*w)+I*(F*y+G*z+H*C)>i;x=r?j:x;j=j+1|0;if((j|0)==(k|0))break;else i=r?K*(F*n+G*o+H*p)+J*(F*q+G*v+H*w)+I*(F*y+G*z+H*C):i}}else x=-1;j=c[b+16>>2]|0;if((j|0)<0){if((c[b+20>>2]|0)<0){k=c[b+24>>2]|0;if(k|0){if(a[b+28>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}c[b+24>>2]=0}a[b+28>>0]=1;c[b+24>>2]=0;c[b+20>>2]=0}do{d=(c[b+24>>2]|0)+(j<<4)|0;c[d>>2]=c[sa+760>>2];c[d+4>>2]=c[sa+760+4>>2];c[d+8>>2]=c[sa+760+8>>2];c[d+12>>2]=c[sa+760+12>>2];j=j+1|0}while((j|0)!=0)}c[b+16>>2]=0;j=c[N+36>>2]|0;u=c[j+(x*36|0)+4>>2]|0;if((u|0)>0){t=j+(x*36|0)+12|0;s=0;j=0;do{d=c[(c[t>>2]|0)+(s<<2)>>2]|0;e=c[N+16>>2]|0;ma=+g[e+(d<<4)>>2];na=+g[e+(d<<4)+4>>2];o=+g[e+(d<<4)+8>>2];i=ma*+g[L>>2]+na*+g[L+4>>2]+o*+g[L+8>>2]+ +g[L+48>>2];n=ma*+g[L+16>>2]+na*+g[L+20>>2]+o*+g[L+24>>2]+ +g[L+52>>2];o=ma*+g[L+32>>2]+na*+g[L+36>>2]+o*+g[L+40>>2]+ +g[L+56>>2];do if((j|0)==(c[b+20>>2]|0)){r=(j|0)==0?1:j<<1;if((j|0)>=(r|0))break;if(!r)m=0;else{c[6485]=(c[6485]|0)+1;j=ec((r<<4|3)+16|0)|0;if(!j)j=0;else{c[(j+4+15&-16)+-4>>2]=j;j=j+4+15&-16}m=j;j=c[b+16>>2]|0}if((j|0)>0){k=0;do{d=m+(k<<4)|0;e=(c[b+24>>2]|0)+(k<<4)|0;c[d>>2]=c[e>>2];c[d+4>>2]=c[e+4>>2];c[d+8>>2]=c[e+8>>2];c[d+12>>2]=c[e+12>>2];k=k+1|0}while((k|0)!=(j|0))}j=c[b+24>>2]|0;if(j|0){if(a[b+28>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[j+-4>>2]|0)}c[b+24>>2]=0}a[b+28>>0]=1;c[b+24>>2]=m;c[b+20>>2]=r;j=c[b+16>>2]|0}while(0);d=c[b+24>>2]|0;g[d+(j<<4)>>2]=i;g[d+(j<<4)+4>>2]=n;g[d+(j<<4)+8>>2]=o;g[d+(j<<4)+12>>2]=0.0;j=(c[b+16>>2]|0)+1|0;c[b+16>>2]=j;s=s+1|0}while((s|0)!=(u|0))}if((x|0)>-1)yc(sa+1e3|0,R,M,b+12|0,b+32|0,O,oa,h)}if(a[b+52>>0]|0?(ra=c[h+4>>2]|0,c[ra+780>>2]|0):0){j=c[ra+772>>2]|0;k=c[(c[h+8>>2]|0)+8>>2]|0;if((j|0)==(k|0)){te(ra,j+4|0,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0);break}else{te(ra,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0,k+4|0);break}}}while(0);l=sa;return}while(0)}qc(sa+48|0,sa+488|0,h,c[f+20>>2]|0,0);if((c[b+64>>2]|0?(c[(c[h+4>>2]|0)+780>>2]|0)<(c[b+68>>2]|0):0)?(I=+g[sa+48+4>>2],J=+g[sa+48+8>>2],K=+g[sa+48+12>>2],I*I+J*J+K*K>1.1920928955078125e-07):0){H=1.0/(I*I+J*J+K*K);if(+A(+(K*H))>.7071067690849304){o=1.0/+B(+(K*H*K*H+J*H*J*H));n=0.0;p=J*H*o;o=-(K*H*o)}else{o=1.0/+B(+(I*H*I*H+J*H*J*H));n=-(J*H*o);p=0.0;o=I*H*o}G=+ib[c[(c[qa>>2]|0)+16>>2]&15](qa);C=+ib[c[(c[pa>>2]|0)+16>>2]&15](pa);i=.019999999552965164/(G<C?G:C);if(G<C){c[sa+1e3>>2]=c[sa+488>>2];c[sa+1e3+4>>2]=c[sa+488+4>>2];c[sa+1e3+8>>2]=c[sa+488+8>>2];c[sa+1e3+12>>2]=c[sa+488+12>>2];c[sa+1e3+16>>2]=c[r>>2];c[sa+1e3+16+4>>2]=c[r+4>>2];c[sa+1e3+16+8>>2]=c[r+8>>2];c[sa+1e3+16+12>>2]=c[r+12>>2];c[sa+1e3+32>>2]=c[s>>2];c[sa+1e3+32+4>>2]=c[s+4>>2];c[sa+1e3+32+8>>2]=c[s+8>>2];c[sa+1e3+32+12>>2]=c[s+12>>2];c[sa+1e3+48>>2]=c[t>>2];c[sa+1e3+48+4>>2]=c[t+4>>2];c[sa+1e3+48+8>>2]=c[t+8>>2];c[sa+1e3+48+12>>2]=c[t+12>>2]}else{c[sa+1e3>>2]=c[u>>2];c[sa+1e3+4>>2]=c[u+4>>2];c[sa+1e3+8>>2]=c[u+8>>2];c[sa+1e3+12>>2]=c[u+12>>2];c[sa+1e3+16>>2]=c[x>>2];c[sa+1e3+16+4>>2]=c[x+4>>2];c[sa+1e3+16+8>>2]=c[x+8>>2];c[sa+1e3+16+12>>2]=c[x+12>>2];c[sa+1e3+32>>2]=c[L>>2];c[sa+1e3+32+4>>2]=c[L+4>>2];c[sa+1e3+32+8>>2]=c[L+8>>2];c[sa+1e3+32+12>>2]=c[L+12>>2];c[sa+1e3+48>>2]=c[M>>2];c[sa+1e3+48+4>>2]=c[M+4>>2];c[sa+1e3+48+8>>2]=c[M+8>>2];c[sa+1e3+48+12>>2]=c[M+12>>2]}j=c[b+64>>2]|0;if((j|0)>0){F=n*n+o*o+p*p;q=+B(+F);v=(i>.39269909262657166?.39269909262657166:i)*.5;q=+E(+v)/q;z=n*q;y=o*q;q=p*q;v=+D(+v);w=+B(+(K*H*K*H+(I*H*I*H+J*H*J*H)));k=0;do{if(F>1.1920928955078125e-07){p=6.2831854820251465/+(j|0)*+(k|0)*.5;o=+E(+p)/w;i=I*H*o;n=J*H*o;o=K*H*o;p=+D(+p);if(G<C){ha=o*(z*-o+(y*p+v*-n)-q*-i)+(i*(v*p-z*-i-y*-n-q*-o)+p*(q*-n+(z*p+v*-i)-y*-o))-n*(y*-i+(q*p+v*-o)-z*-n);ma=i*(y*-i+(q*p+v*-o)-z*-n)+(p*(z*-o+(y*p+v*-n)-q*-i)+n*(v*p-z*-i-y*-n-q*-o))-o*(q*-n+(z*p+v*-i)-y*-o);Y=n*(q*-n+(z*p+v*-i)-y*-o)+(o*(v*p-z*-i-y*-n-q*-o)+p*(y*-i+(q*p+v*-o)-z*-n))-i*(z*-o+(y*p+v*-n)-q*-i);fa=p*(v*p-z*-i-y*-n-q*-o)-i*(q*-n+(z*p+v*-i)-y*-o)-n*(z*-o+(y*p+v*-n)-q*-i)-o*(y*-i+(q*p+v*-o)-z*-n);la=ha*(2.0/(fa*fa+(Y*Y+(ha*ha+ma*ma))));na=ma*(2.0/(fa*fa+(Y*Y+(ha*ha+ma*ma))));ea=Y*(2.0/(fa*fa+(Y*Y+(ha*ha+ma*ma))));ra=c[d+12>>2]|0;Z=+g[ra>>2];_=+g[ra+16>>2];$=+g[ra+32>>2];aa=+g[ra+4>>2];ba=+g[ra+20>>2];ca=+g[ra+36>>2];da=+g[ra+8>>2];ga=+g[ra+24>>2];oa=+g[ra+40>>2];g[sa+488>>2]=(1.0-(ma*na+Y*ea))*Z+(ha*na-fa*ea)*_+(ha*ea+fa*na)*$;g[sa+488+4>>2]=(1.0-(ma*na+Y*ea))*aa+(ha*na-fa*ea)*ba+(ha*ea+fa*na)*ca;g[sa+488+8>>2]=(1.0-(ma*na+Y*ea))*da+(ha*na-fa*ea)*ga+(ha*ea+fa*na)*oa;g[sa+488+12>>2]=0.0;g[sa+488+16>>2]=(ha*na+fa*ea)*Z+(1.0-(ha*la+Y*ea))*_+(ma*ea-fa*la)*$;g[sa+488+20>>2]=(ha*na+fa*ea)*aa+(1.0-(ha*la+Y*ea))*ba+(ma*ea-fa*la)*ca;g[sa+488+24>>2]=(ha*na+fa*ea)*da+(1.0-(ha*la+Y*ea))*ga+(ma*ea-fa*la)*oa;g[sa+488+28>>2]=0.0;g[sa+488+32>>2]=(ha*ea-fa*na)*Z+(ma*ea+fa*la)*_+(1.0-(ha*la+ma*na))*$;g[sa+488+36>>2]=(ha*ea-fa*na)*aa+(ma*ea+fa*la)*ba+(1.0-(ha*la+ma*na))*ca;g[sa+488+40>>2]=(ha*ea-fa*na)*da+(ma*ea+fa*la)*ga+(1.0-(ha*la+ma*na))*oa;g[sa+488+44>>2]=0.0;ra=c[e+12>>2]|0;c[u>>2]=c[ra>>2];c[u+4>>2]=c[ra+4>>2];c[u+8>>2]=c[ra+8>>2];c[u+12>>2]=c[ra+12>>2];c[x>>2]=c[ra+16>>2];c[x+4>>2]=c[ra+16+4>>2];c[x+8>>2]=c[ra+16+8>>2];c[x+12>>2]=c[ra+16+12>>2];c[L>>2]=c[ra+32>>2];c[L+4>>2]=c[ra+32+4>>2];c[L+8>>2]=c[ra+32+8>>2];c[L+12>>2]=c[ra+32+12>>2];c[M>>2]=c[ra+48>>2];c[M+4>>2]=c[ra+48+4>>2];c[M+8>>2]=c[ra+48+8>>2];c[M+12>>2]=c[ra+48+12>>2]}else{ra=c[d+12>>2]|0;c[sa+488>>2]=c[ra>>2];c[sa+488+4>>2]=c[ra+4>>2];c[sa+488+8>>2]=c[ra+8>>2];c[sa+488+12>>2]=c[ra+12>>2];c[r>>2]=c[ra+16>>2];c[r+4>>2]=c[ra+16+4>>2];c[r+8>>2]=c[ra+16+8>>2];c[r+12>>2]=c[ra+16+12>>2];c[s>>2]=c[ra+32>>2];c[s+4>>2]=c[ra+32+4>>2];c[s+8>>2]=c[ra+32+8>>2];c[s+12>>2]=c[ra+32+12>>2];c[t>>2]=c[ra+48>>2];c[t+4>>2]=c[ra+48+4>>2];c[t+8>>2]=c[ra+48+8>>2];c[t+12>>2]=c[ra+48+12>>2];ha=o*(z*-o+(y*p+v*-n)-q*-i)+(i*(v*p-z*-i-y*-n-q*-o)+p*(q*-n+(z*p+v*-i)-y*-o))-n*(y*-i+(q*p+v*-o)-z*-n);ma=i*(y*-i+(q*p+v*-o)-z*-n)+(p*(z*-o+(y*p+v*-n)-q*-i)+n*(v*p-z*-i-y*-n-q*-o))-o*(q*-n+(z*p+v*-i)-y*-o);Y=n*(q*-n+(z*p+v*-i)-y*-o)+(o*(v*p-z*-i-y*-n-q*-o)+p*(y*-i+(q*p+v*-o)-z*-n))-i*(z*-o+(y*p+v*-n)-q*-i);fa=p*(v*p-z*-i-y*-n-q*-o)-i*(q*-n+(z*p+v*-i)-y*-o)-n*(z*-o+(y*p+v*-n)-q*-i)-o*(y*-i+(q*p+v*-o)-z*-n);la=ha*(2.0/(fa*fa+(Y*Y+(ha*ha+ma*ma))));na=ma*(2.0/(fa*fa+(Y*Y+(ha*ha+ma*ma))));ea=Y*(2.0/(fa*fa+(Y*Y+(ha*ha+ma*ma))));ra=c[e+12>>2]|0;Z=+g[ra>>2];_=+g[ra+16>>2];$=+g[ra+32>>2];aa=+g[ra+4>>2];ba=+g[ra+20>>2];ca=+g[ra+36>>2];da=+g[ra+8>>2];ga=+g[ra+24>>2];oa=+g[ra+40>>2];g[sa+488+64>>2]=(1.0-(ma*na+Y*ea))*Z+(ha*na-fa*ea)*_+(ha*ea+fa*na)*$;g[sa+488+68>>2]=(1.0-(ma*na+Y*ea))*aa+(ha*na-fa*ea)*ba+(ha*ea+fa*na)*ca;g[sa+488+72>>2]=(1.0-(ma*na+Y*ea))*da+(ha*na-fa*ea)*ga+(ha*ea+fa*na)*oa;g[sa+488+76>>2]=0.0;g[sa+488+80>>2]=(ha*na+fa*ea)*Z+(1.0-(ha*la+Y*ea))*_+(ma*ea-fa*la)*$;g[sa+488+84>>2]=(ha*na+fa*ea)*aa+(1.0-(ha*la+Y*ea))*ba+(ma*ea-fa*la)*ca;g[sa+488+88>>2]=(ha*na+fa*ea)*da+(1.0-(ha*la+Y*ea))*ga+(ma*ea-fa*la)*oa;g[sa+488+92>>2]=0.0;g[sa+488+96>>2]=(ha*ea-fa*na)*Z+(ma*ea+fa*la)*_+(1.0-(ha*la+ma*na))*$;g[sa+488+100>>2]=(ha*ea-fa*na)*aa+(ma*ea+fa*la)*ba+(1.0-(ha*la+ma*na))*ca;g[sa+488+104>>2]=(ha*ea-fa*na)*da+(ma*ea+fa*la)*ga+(1.0-(ha*la+ma*na))*oa;g[sa+488+108>>2]=0.0}j=c[f+20>>2]|0;g[sa+760+32>>2]=0.0;c[sa+760>>2]=10880;c[sa+760+36>>2]=h;c[sa+760+40>>2]=c[sa+488>>2];c[sa+760+40+4>>2]=c[sa+488+4>>2];c[sa+760+40+8>>2]=c[sa+488+8>>2];c[sa+760+40+12>>2]=c[sa+488+12>>2];c[sa+760+56>>2]=c[r>>2];c[sa+760+56+4>>2]=c[r+4>>2];c[sa+760+56+8>>2]=c[r+8>>2];c[sa+760+56+12>>2]=c[r+12>>2];c[sa+760+72>>2]=c[s>>2];c[sa+760+72+4>>2]=c[s+4>>2];c[sa+760+72+8>>2]=c[s+8>>2];c[sa+760+72+12>>2]=c[s+12>>2];c[sa+760+88>>2]=c[t>>2];c[sa+760+88+4>>2]=c[t+4>>2];c[sa+760+88+8>>2]=c[t+8>>2];c[sa+760+88+12>>2]=c[t+12>>2];c[sa+760+104>>2]=c[u>>2];c[sa+760+104+4>>2]=c[u+4>>2];c[sa+760+104+8>>2]=c[u+8>>2];c[sa+760+104+12>>2]=c[u+12>>2];c[sa+760+120>>2]=c[x>>2];c[sa+760+120+4>>2]=c[x+4>>2];c[sa+760+120+8>>2]=c[x+8>>2];c[sa+760+120+12>>2]=c[x+12>>2];c[sa+760+136>>2]=c[L>>2];c[sa+760+136+4>>2]=c[L+4>>2];c[sa+760+136+8>>2]=c[L+8>>2];c[sa+760+136+12>>2]=c[L+12>>2];c[sa+760+152>>2]=c[M>>2];c[sa+760+152+4>>2]=c[M+4>>2];c[sa+760+152+8>>2]=c[M+8>>2];c[sa+760+152+12>>2]=c[M+12>>2];c[sa+760+168>>2]=c[sa+1e3>>2];c[sa+760+168+4>>2]=c[sa+1e3+4>>2];c[sa+760+168+8>>2]=c[sa+1e3+8>>2];c[sa+760+168+12>>2]=c[sa+1e3+12>>2];c[sa+760+184>>2]=c[sa+1e3+16>>2];c[sa+760+184+4>>2]=c[sa+1e3+16+4>>2];c[sa+760+184+8>>2]=c[sa+1e3+16+8>>2];c[sa+760+184+12>>2]=c[sa+1e3+16+12>>2];c[sa+760+200>>2]=c[sa+1e3+32>>2];c[sa+760+200+4>>2]=c[sa+1e3+32+4>>2];c[sa+760+200+8>>2]=c[sa+1e3+32+8>>2];c[sa+760+200+12>>2]=c[sa+1e3+32+12>>2];c[sa+760+216>>2]=c[sa+1e3+48>>2];c[sa+760+216+4>>2]=c[sa+1e3+48+4>>2];c[sa+760+216+8>>2]=c[sa+1e3+48+8>>2];c[sa+760+216+12>>2]=c[sa+1e3+48+12>>2];a[sa+760+232>>0]=G<C&1;c[sa+760+236>>2]=j;qc(sa+48|0,sa+488|0,sa+760|0,j,0);j=c[b+64>>2]|0}k=k+1|0}while((k|0)<(j|0))}}if(!(a[b+52>>0]|0)){l=sa;return}j=c[h+4>>2]|0;if(!(c[j+780>>2]|0)){l=sa;return}k=c[j+772>>2]|0;m=c[(c[h+8>>2]|0)+8>>2]|0;if((k|0)==(m|0)){te(j,k+4|0,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0);l=sa;return}else{te(j,(c[(c[h+12>>2]|0)+8>>2]|0)+4|0,m+4|0);l=sa;return}}function _b(b,d){b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0,k=0,m=0,n=0,o=0,p=0,q=0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0,C=0.0,F=0.0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0.0,O=0,P=0.0,Q=0.0,R=0.0,S=0.0,T=0.0,U=0.0,V=0.0,W=0.0,X=0.0,Y=0.0,Z=0.0;O=l;l=l+176|0;B=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;B=((sb[c[(c[B>>2]|0)+56>>2]&127](B)|0)&2048|0)!=0;M=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;M=((sb[c[(c[M>>2]|0)+56>>2]&127](M)|0)&4096|0)!=0;N=+g[d+40>>2];if(N<=0.0){l=O;return}switch(c[d+4>>2]|0){case 3:{c[O+112>>2]=1065353216;c[O+112+4>>2]=0;c[O+112+4+4>>2]=0;c[O+112+4+8>>2]=0;c[O+112+4+12>>2]=0;c[O+112+20>>2]=1065353216;c[O+112+24>>2]=0;c[O+112+24+4>>2]=0;c[O+112+24+8>>2]=0;c[O+112+24+12>>2]=0;c[O+112+40>>2]=1065353216;M=O+112+44|0;c[M>>2]=0;c[M+4>>2]=0;c[M+8>>2]=0;c[M+12>>2]=0;c[M+16>>2]=0;F=+g[d+300>>2];C=+g[d+304>>2];A=+g[d+308>>2];M=c[d+28>>2]|0;z=F*+g[M+20>>2]+C*+g[M+24>>2]+A*+g[M+28>>2]+ +g[M+56>>2];y=F*+g[M+36>>2]+C*+g[M+40>>2]+A*+g[M+44>>2]+ +g[M+60>>2];g[O+112+48>>2]=F*+g[M+4>>2]+C*+g[M+8>>2]+A*+g[M+12>>2]+ +g[M+52>>2];g[O+112+52>>2]=z;g[O+112+56>>2]=y;g[O+112+60>>2]=0.0;M=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Jb[c[(c[M>>2]|0)+64>>2]&7](M,O+112|0,N);y=+g[d+316>>2];z=+g[d+320>>2];A=+g[d+324>>2];d=c[d+32>>2]|0;C=y*+g[d+20>>2]+z*+g[d+24>>2]+A*+g[d+28>>2]+ +g[d+56>>2];F=y*+g[d+36>>2]+z*+g[d+40>>2]+A*+g[d+44>>2]+ +g[d+60>>2];g[O+112+48>>2]=y*+g[d+4>>2]+z*+g[d+8>>2]+A*+g[d+12>>2]+ +g[d+52>>2];g[O+112+52>>2]=C;g[O+112+56>>2]=F;g[O+112+60>>2]=0.0;if(B){b=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Jb[c[(c[b>>2]|0)+64>>2]&7](b,O+112|0,N)}l=O;return}case 4:{L=c[d+28>>2]|0;e=+g[d+552>>2];U=+g[L+4>>2];f=+g[d+552+16>>2];T=+g[L+8>>2];h=+g[d+552+32>>2];S=+g[L+12>>2];r=+g[d+552+4>>2];s=+g[d+552+20>>2];t=+g[d+552+36>>2];u=+g[d+552+8>>2];w=+g[d+552+24>>2];y=+g[d+552+40>>2];R=+g[L+20>>2];Q=+g[L+24>>2];P=+g[L+28>>2];v=+g[L+36>>2];x=+g[L+40>>2];z=+g[L+44>>2];W=+g[d+552+48>>2];V=+g[d+552+52>>2];F=+g[d+552+56>>2];A=+g[L+52>>2]+(U*W+T*V+S*F);C=R*W+Q*V+P*F+ +g[L+56>>2];F=v*W+x*V+z*F+ +g[L+60>>2];g[O+112>>2]=e*U+f*T+h*S;g[O+112+4>>2]=U*r+T*s+S*t;g[O+112+8>>2]=U*u+T*w+S*y;g[O+112+12>>2]=0.0;g[O+112+16>>2]=e*R+f*Q+h*P;g[O+112+20>>2]=r*R+s*Q+t*P;g[O+112+24>>2]=u*R+w*Q+y*P;g[O+112+28>>2]=0.0;g[O+112+32>>2]=e*v+f*x+h*z;g[O+112+36>>2]=r*v+s*x+t*z;g[O+112+40>>2]=u*v+w*x+y*z;g[O+112+44>>2]=0.0;g[O+112+48>>2]=A;g[O+112+52>>2]=C;g[O+112+56>>2]=F;g[O+112+60>>2]=0.0;if(B){L=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Jb[c[(c[L>>2]|0)+64>>2]&7](L,O+112|0,N);L=c[d+32>>2]|0;w=+g[d+616>>2];h=+g[L+4>>2];x=+g[d+616+16>>2];r=+g[L+8>>2];y=+g[d+616+32>>2];s=+g[L+12>>2];z=+g[d+616+4>>2];A=+g[d+616+20>>2];C=+g[d+616+36>>2];F=+g[d+616+8>>2];Q=+g[d+616+24>>2];S=+g[d+616+40>>2];t=+g[L+20>>2];u=+g[L+24>>2];v=+g[L+28>>2];P=+g[L+36>>2];R=+g[L+40>>2];T=+g[L+44>>2];e=+g[d+616+48>>2];f=+g[d+616+52>>2];W=+g[d+616+56>>2];U=+g[L+52>>2]+(h*e+r*f+s*W);V=t*e+u*f+v*W+ +g[L+56>>2];W=P*e+R*f+T*W+ +g[L+60>>2];g[O+112>>2]=w*h+x*r+y*s;g[O+112+4>>2]=h*z+r*A+s*C;g[O+112+8>>2]=h*F+r*Q+s*S;g[O+112+12>>2]=0.0;g[O+112+16>>2]=w*t+x*u+y*v;g[O+112+20>>2]=z*t+A*u+C*v;g[O+112+24>>2]=F*t+Q*u+S*v;g[O+112+28>>2]=0.0;g[O+112+32>>2]=w*P+x*R+y*T;g[O+112+36>>2]=z*P+A*R+C*T;g[O+112+40>>2]=F*P+Q*R+S*T;g[O+112+44>>2]=0.0;g[O+112+48>>2]=U;g[O+112+52>>2]=V;g[O+112+56>>2]=W;g[O+112+60>>2]=0.0;L=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Jb[c[(c[L>>2]|0)+64>>2]&7](L,O+112|0,N)}else{L=c[d+32>>2]|0;w=+g[d+616>>2];h=+g[L+4>>2];x=+g[d+616+16>>2];r=+g[L+8>>2];y=+g[d+616+32>>2];s=+g[L+12>>2];z=+g[d+616+4>>2];A=+g[d+616+20>>2];C=+g[d+616+36>>2];F=+g[d+616+8>>2];Q=+g[d+616+24>>2];S=+g[d+616+40>>2];t=+g[L+20>>2];u=+g[L+24>>2];v=+g[L+28>>2];P=+g[L+36>>2];R=+g[L+40>>2];T=+g[L+44>>2];e=+g[d+616+48>>2];f=+g[d+616+52>>2];W=+g[d+616+56>>2];U=+g[L+52>>2]+(h*e+r*f+s*W);V=t*e+u*f+v*W+ +g[L+56>>2];W=P*e+R*f+T*W+ +g[L+60>>2];g[O+112>>2]=w*h+x*r+y*s;g[O+112+4>>2]=h*z+r*A+s*C;g[O+112+8>>2]=h*F+r*Q+s*S;g[O+112+12>>2]=0.0;g[O+112+16>>2]=w*t+x*u+y*v;g[O+112+20>>2]=z*t+A*u+C*v;g[O+112+24>>2]=F*t+Q*u+S*v;g[O+112+28>>2]=0.0;g[O+112+32>>2]=w*P+x*R+y*T;g[O+112+36>>2]=z*P+A*R+C*T;g[O+112+40>>2]=F*P+Q*R+S*T;g[O+112+44>>2]=0.0;g[O+112+48>>2]=U;g[O+112+52>>2]=V;g[O+112+56>>2]=W;g[O+112+60>>2]=0.0}e=+g[d+688>>2];h=+g[d+688+4>>2];if(!((e-h)%6.2831854820251465<-3.1415927410125732))if((e-h)%6.2831854820251465>3.1415927410125732)f=(e-h)%6.2831854820251465+-6.2831854820251465;else f=(e-h)%6.2831854820251465;else f=(e-h)%6.2831854820251465+6.2831854820251465;if(!((e+h)%6.2831854820251465<-3.1415927410125732))if((e+h)%6.2831854820251465>3.1415927410125732)e=(e+h)%6.2831854820251465+-6.2831854820251465;else e=(e+h)%6.2831854820251465;else e=(e+h)%6.2831854820251465+6.2831854820251465;if(!(f==e)?M:0){c[O+96>>2]=c[O+112+8>>2];c[O+96+4>>2]=c[O+112+24>>2];c[O+96+8>>2]=c[O+112+40>>2];g[O+96+12>>2]=0.0;c[O+80>>2]=c[O+112>>2];c[O+80+4>>2]=c[O+112+16>>2];c[O+80+8>>2]=c[O+112+32>>2];g[O+80+12>>2]=0.0;b=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;d=c[(c[b>>2]|0)+68>>2]|0;c[O+64>>2]=0;c[O+64+4>>2]=0;c[O+64+8>>2]=0;c[O+64+12>>2]=0;Sb[d&0](b,O+112+48|0,O+96|0,O+80|0,N,N,h>0.0?f:0.0,h>0.0?e:6.2831854820251465,O+64|0,h>0.0,10.0)}l=O;return}case 5:{H=c[d+28>>2]|0;w=+g[d+300>>2];h=+g[H+4>>2];x=+g[d+300+16>>2];r=+g[H+8>>2];y=+g[d+300+32>>2];s=+g[H+12>>2];z=+g[d+300+4>>2];A=+g[d+300+20>>2];C=+g[d+300+36>>2];F=+g[d+300+8>>2];Q=+g[d+300+24>>2];S=+g[d+300+40>>2];t=+g[H+20>>2];u=+g[H+24>>2];v=+g[H+28>>2];P=+g[H+36>>2];R=+g[H+40>>2];T=+g[H+44>>2];e=+g[d+300+48>>2];f=+g[d+300+52>>2];W=+g[d+300+56>>2];U=+g[H+52>>2]+(h*e+r*f+s*W);V=t*e+u*f+v*W+ +g[H+56>>2];W=P*e+R*f+T*W+ +g[H+60>>2];g[O+112>>2]=w*h+x*r+y*s;H=O+112+4|0;g[H>>2]=h*z+r*A+s*C;J=O+112+8|0;g[J>>2]=h*F+r*Q+s*S;g[O+112+12>>2]=0.0;K=O+112+16|0;g[K>>2]=w*t+x*u+y*v;L=O+112+20|0;g[L>>2]=z*t+A*u+C*v;n=O+112+24|0;g[n>>2]=F*t+Q*u+S*v;g[O+112+28>>2]=0.0;o=O+112+32|0;g[o>>2]=w*P+x*R+y*T;p=O+112+36|0;g[p>>2]=z*P+A*R+C*T;q=O+112+40|0;g[q>>2]=F*P+Q*R+S*T;g[O+112+44>>2]=0.0;m=O+112+48|0;g[m>>2]=U;G=O+112+52|0;g[G>>2]=V;I=O+112+56|0;g[I>>2]=W;g[O+112+60>>2]=0.0;if(B){B=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Jb[c[(c[B>>2]|0)+64>>2]&7](B,O+112|0,N);B=c[d+32>>2]|0;w=+g[d+364>>2];h=+g[B+4>>2];x=+g[d+364+16>>2];r=+g[B+8>>2];y=+g[d+364+32>>2];s=+g[B+12>>2];z=+g[d+364+4>>2];A=+g[d+364+20>>2];C=+g[d+364+36>>2];F=+g[d+364+8>>2];Q=+g[d+364+24>>2];S=+g[d+364+40>>2];t=+g[B+20>>2];u=+g[B+24>>2];v=+g[B+28>>2];P=+g[B+36>>2];R=+g[B+40>>2];T=+g[B+44>>2];e=+g[d+364+48>>2];f=+g[d+364+52>>2];W=+g[d+364+56>>2];U=+g[B+52>>2]+(h*e+r*f+s*W);V=t*e+u*f+v*W+ +g[B+56>>2];W=P*e+R*f+T*W+ +g[B+60>>2];g[O+112>>2]=w*h+x*r+y*s;g[H>>2]=h*z+r*A+s*C;g[J>>2]=h*F+r*Q+s*S;g[O+112+12>>2]=0.0;g[K>>2]=w*t+x*u+y*v;g[L>>2]=z*t+A*u+C*v;g[n>>2]=F*t+Q*u+S*v;g[O+112+28>>2]=0.0;g[o>>2]=w*P+x*R+y*T;g[p>>2]=z*P+A*R+C*T;g[q>>2]=F*P+Q*R+S*T;g[O+112+44>>2]=0.0;g[m>>2]=U;g[G>>2]=V;g[I>>2]=W;g[O+112+60>>2]=0.0;B=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Jb[c[(c[B>>2]|0)+64>>2]&7](B,O+112|0,N)}else{B=c[d+32>>2]|0;w=+g[d+364>>2];h=+g[B+4>>2];x=+g[d+364+16>>2];r=+g[B+8>>2];y=+g[d+364+32>>2];s=+g[B+12>>2];z=+g[d+364+4>>2];A=+g[d+364+20>>2];C=+g[d+364+36>>2];F=+g[d+364+8>>2];Q=+g[d+364+24>>2];S=+g[d+364+40>>2];t=+g[B+20>>2];u=+g[B+24>>2];v=+g[B+28>>2];P=+g[B+36>>2];R=+g[B+40>>2];T=+g[B+44>>2];e=+g[d+364+48>>2];f=+g[d+364+52>>2];W=+g[d+364+56>>2];U=+g[B+52>>2]+(h*e+r*f+s*W);V=t*e+u*f+v*W+ +g[B+56>>2];W=P*e+R*f+T*W+ +g[B+60>>2];g[O+112>>2]=w*h+x*r+y*s;g[H>>2]=h*z+r*A+s*C;g[J>>2]=h*F+r*Q+s*S;g[O+112+12>>2]=0.0;g[K>>2]=w*t+x*u+y*v;g[L>>2]=z*t+A*u+C*v;g[n>>2]=F*t+Q*u+S*v;g[O+112+28>>2]=0.0;g[o>>2]=w*P+x*R+y*T;g[p>>2]=z*P+A*R+C*T;g[q>>2]=F*P+Q*R+S*T;g[O+112+44>>2]=0.0;g[m>>2]=U;g[G>>2]=V;g[I>>2]=W;g[O+112+60>>2]=0.0}if(M){$i(O+96|0,d,6.0868353843688965,N);S=+g[O+96>>2];T=+g[O+96+4>>2];U=+g[O+96+8>>2];V=S*+g[K>>2]+T*+g[L>>2]+U*+g[n>>2]+ +g[G>>2];W=S*+g[o>>2]+T*+g[p>>2]+U*+g[q>>2]+ +g[I>>2];g[O+96>>2]=S*+g[O+112>>2]+T*+g[H>>2]+U*+g[J>>2]+ +g[m>>2];g[O+96+4>>2]=V;g[O+96+8>>2]=W;g[O+96+12>>2]=0.0;k=O+112+48|0;i=0;do{$i(O+80|0,d,+(i|0)*6.283185005187988*.03125,N);S=+g[O+80>>2];T=+g[O+80+4>>2];U=+g[O+80+8>>2];V=S*+g[K>>2]+T*+g[L>>2]+U*+g[n>>2]+ +g[G>>2];W=S*+g[o>>2]+T*+g[p>>2]+U*+g[q>>2]+ +g[I>>2];g[O+80>>2]=S*+g[O+112>>2]+T*+g[H>>2]+U*+g[J>>2]+ +g[m>>2];g[O+80+4>>2]=V;g[O+80+8>>2]=W;g[O+80+12>>2]=0.0;M=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;B=c[(c[M>>2]|0)+16>>2]|0;c[O+64>>2]=0;c[O+64+4>>2]=0;c[O+64+8>>2]=0;c[O+64+12>>2]=0;Pb[B&127](M,O+96|0,O+80|0,O+64|0);if(!(i&3)){M=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;B=c[(c[M>>2]|0)+16>>2]|0;c[O+64>>2]=0;c[O+64+4>>2]=0;c[O+64+8>>2]=0;c[O+64+12>>2]=0;Pb[B&127](M,k,O+80|0,O+64|0)}c[O+96>>2]=c[O+80>>2];c[O+96+4>>2]=c[O+80+4>>2];c[O+96+8>>2]=c[O+80+8>>2];c[O+96+12>>2]=c[O+80+12>>2];i=i+1|0}while((i|0)!=32);C=+g[d+452>>2];F=+g[d+512>>2];i=c[d+32>>2]|0;if(+g[i+404>>2]>0.0){S=+g[d+364>>2];T=+g[i+4>>2];U=+g[d+364+16>>2];V=+g[i+8>>2];W=+g[d+364+32>>2];x=+g[i+12>>2];Q=+g[d+364+4>>2];R=+g[d+364+20>>2];w=+g[d+364+36>>2];X=+g[d+364+8>>2];P=+g[d+364+24>>2];v=+g[d+364+40>>2];Z=+g[i+20>>2];Y=+g[i+24>>2];u=+g[i+28>>2];t=+g[i+36>>2];s=+g[i+40>>2];r=+g[i+44>>2];f=+g[d+364+48>>2];e=+g[d+364+52>>2];A=+g[d+364+56>>2];y=r*A;z=Z*f+Y*e+u*A;A=T*f+V*e+x*A;e=t*f+s*e;f=X*t+P*s+v*r;h=Q*t+R*s+w*r;r=S*t+U*s+W*r;s=X*Z+P*Y+v*u;t=Q*Z+R*Y+w*u;u=S*Z+U*Y+W*u;v=T*X+V*P+x*v;w=T*Q+V*R+x*w;x=S*T+U*V+W*x}else{i=c[d+28>>2]|0;V=+g[d+300>>2];W=+g[i+4>>2];X=+g[d+300+16>>2];Y=+g[i+8>>2];Z=+g[d+300+32>>2];x=+g[i+12>>2];T=+g[d+300+4>>2];U=+g[d+300+20>>2];w=+g[d+300+36>>2];R=+g[d+300+8>>2];S=+g[d+300+24>>2];v=+g[d+300+40>>2];P=+g[i+20>>2];Q=+g[i+24>>2];u=+g[i+28>>2];t=+g[i+36>>2];s=+g[i+40>>2];r=+g[i+44>>2];f=+g[d+300+48>>2];e=+g[d+300+52>>2];A=+g[d+300+56>>2];y=r*A;z=P*f+Q*e+u*A;A=W*f+Y*e+x*A;e=t*f+s*e;f=R*t+S*s+v*r;h=T*t+U*s+w*r;r=V*t+X*s+Z*r;s=R*P+S*Q+v*u;t=T*P+U*Q+w*u;u=V*P+X*Q+Z*u;v=W*R+Y*S+x*v;w=W*T+Y*U+x*w;x=V*W+X*Y+Z*x}X=+g[i+52>>2]+A;Y=z+ +g[i+56>>2];Z=e+y+ +g[i+60>>2];g[O+112>>2]=x;g[H>>2]=w;g[J>>2]=v;g[O+112+12>>2]=0.0;g[K>>2]=u;g[L>>2]=t;g[n>>2]=s;g[O+112+28>>2]=0.0;g[o>>2]=r;g[p>>2]=h;g[q>>2]=f;g[O+112+44>>2]=0.0;g[m>>2]=X;g[G>>2]=Y;g[I>>2]=Z;g[O+112+60>>2]=0.0;c[O+80>>2]=c[k>>2];c[O+80+4>>2]=c[k+4>>2];c[O+80+8>>2]=c[k+8>>2];c[O+80+12>>2]=c[k+12>>2];g[O+64>>2]=x;g[O+64+4>>2]=u;g[O+64+8>>2]=r;g[O+64+12>>2]=0.0;g[O+48>>2]=w;g[O+48+4>>2]=t;g[O+48+8>>2]=h;g[O+48+12>>2]=0.0;b=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;d=c[(c[b>>2]|0)+68>>2]|0;c[O+32>>2]=0;c[O+32+4>>2]=0;c[O+32+8>>2]=0;c[O+32+12>>2]=0;Sb[d&0](b,O+80|0,O+64|0,O+48|0,N,N,-F-C,C-F,O+32|0,1,10.0)}l=O;return}case 6:case 9:{c[O+112>>2]=c[d+1064>>2];c[O+112+4>>2]=c[d+1064+4>>2];c[O+112+8>>2]=c[d+1064+8>>2];c[O+112+12>>2]=c[d+1064+12>>2];k=d+1064+16|0;m=O+112+16|0;c[m>>2]=c[k>>2];c[m+4>>2]=c[k+4>>2];c[m+8>>2]=c[k+8>>2];c[m+12>>2]=c[k+12>>2];n=d+1064+32|0;o=O+112+32|0;c[o>>2]=c[n>>2];c[o+4>>2]=c[n+4>>2];c[o+8>>2]=c[n+8>>2];c[o+12>>2]=c[n+12>>2];p=O+112+48|0;q=d+1064+48|0;c[p>>2]=c[q>>2];c[p+4>>2]=c[q+4>>2];c[p+8>>2]=c[q+8>>2];c[p+12>>2]=c[q+12>>2];if(B){L=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Jb[c[(c[L>>2]|0)+64>>2]&7](L,O+112|0,N);c[O+112>>2]=c[d+1128>>2];c[O+112+4>>2]=c[d+1128+4>>2];c[O+112+8>>2]=c[d+1128+8>>2];c[O+112+12>>2]=c[d+1128+12>>2];c[m>>2]=c[d+1128+16>>2];c[m+4>>2]=c[d+1128+16+4>>2];c[m+8>>2]=c[d+1128+16+8>>2];c[m+12>>2]=c[d+1128+16+12>>2];c[o>>2]=c[d+1128+32>>2];c[o+4>>2]=c[d+1128+32+4>>2];c[o+8>>2]=c[d+1128+32+8>>2];c[o+12>>2]=c[d+1128+32+12>>2];c[p>>2]=c[d+1128+48>>2];c[p+4>>2]=c[d+1128+48+4>>2];c[p+8>>2]=c[d+1128+48+8>>2];c[p+12>>2]=c[d+1128+48+12>>2];L=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Jb[c[(c[L>>2]|0)+64>>2]&7](L,O+112|0,N)}else{c[O+112>>2]=c[d+1128>>2];c[O+112+4>>2]=c[d+1128+4>>2];c[O+112+8>>2]=c[d+1128+8>>2];c[O+112+12>>2]=c[d+1128+12>>2];c[m>>2]=c[d+1128+16>>2];c[m+4>>2]=c[d+1128+16+4>>2];c[m+8>>2]=c[d+1128+16+8>>2];c[m+12>>2]=c[d+1128+16+12>>2];c[o>>2]=c[d+1128+32>>2];c[o+4>>2]=c[d+1128+32+4>>2];c[o+8>>2]=c[d+1128+32+8>>2];c[o+12>>2]=c[d+1128+32+12>>2];c[p>>2]=c[d+1128+48>>2];c[p+4>>2]=c[d+1128+48+4>>2];c[p+8>>2]=c[d+1128+48+8>>2];c[p+12>>2]=c[d+1128+48+12>>2]}if(M){c[O+112>>2]=c[d+1064>>2];c[O+112+4>>2]=c[d+1064+4>>2];c[O+112+8>>2]=c[d+1064+8>>2];c[O+112+12>>2]=c[d+1064+12>>2];c[m>>2]=c[k>>2];c[m+4>>2]=c[k+4>>2];c[m+8>>2]=c[k+8>>2];c[m+12>>2]=c[k+12>>2];c[o>>2]=c[n>>2];c[o+4>>2]=c[n+4>>2];c[o+8>>2]=c[n+8>>2];c[o+12>>2]=c[n+12>>2];c[p>>2]=c[q>>2];c[p+4>>2]=c[q+4>>2];c[p+8>>2]=c[q+8>>2];c[p+12>>2]=c[q+12>>2];i=d+1128+48|0;c[O+96>>2]=c[O+112+8>>2];c[O+96+4>>2]=c[O+112+24>>2];c[O+96+8>>2]=c[O+112+40>>2];g[O+96+12>>2]=0.0;c[O+80>>2]=c[O+112>>2];c[O+80+4>>2]=c[O+112+16>>2];c[O+80+8>>2]=c[O+112+32>>2];g[O+80+12>>2]=0.0;V=+g[d+932>>2];e=+g[d+932+4>>2];Y=+g[d+996>>2];X=+g[d+996+4>>2];L=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;M=c[(c[L>>2]|0)+72>>2]|0;c[O+64>>2]=0;c[O+64+4>>2]=0;c[O+64+8>>2]=0;c[O+64+12>>2]=0;Rb[M&0](L,i,O+96|0,O+80|0,N*.8999999761581421,V,e,Y,X,O+64|0,10.0,1);L=c[O+112+20>>2]|0;M=c[O+112+36>>2]|0;c[O+80>>2]=c[O+112+4>>2];c[O+80+4>>2]=L;c[O+80+8>>2]=M;g[O+80+12>>2]=0.0;X=+g[d+1196>>2];Y=+g[d+1200>>2];e=+D(+X);X=+E(+X);V=+D(+Y);Y=+E(+Y);W=+g[O+80>>2];Z=+g[O+80+4>>2];f=+g[O+80+8>>2];g[O+64>>2]=e*V*W+e*Y*Z-X*f;g[O+64+4>>2]=V*Z-Y*W;g[O+64+8>>2]=X*V*W+X*Y*Z+e*f;c[O+112>>2]=c[d+1128>>2];c[O+112+4>>2]=c[d+1128+4>>2];c[O+112+8>>2]=c[d+1128+8>>2];c[O+112+12>>2]=c[d+1128+12>>2];c[m>>2]=c[d+1128+16>>2];c[m+4>>2]=c[d+1128+16+4>>2];c[m+8>>2]=c[d+1128+16+8>>2];c[m+12>>2]=c[d+1128+16+12>>2];c[o>>2]=c[d+1128+32>>2];c[o+4>>2]=c[d+1128+32+4>>2];c[o+8>>2]=c[d+1128+32+8>>2];c[o+12>>2]=c[d+1128+32+12>>2];c[p>>2]=c[i>>2];c[p+4>>2]=c[i+4>>2];c[p+8>>2]=c[i+8>>2];c[p+12>>2]=c[i+12>>2];f=-+g[O+112+16>>2];e=-+g[O+112+32>>2];g[O+48>>2]=-+g[O+112>>2];g[O+48+4>>2]=f;g[O+48+8>>2]=e;g[O+48+12>>2]=0.0;e=+g[d+868>>2];f=+g[d+868+4>>2];if(!(e>f)){if(e<f){M=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;L=c[(c[M>>2]|0)+68>>2]|0;c[O+32>>2]=0;c[O+32+4>>2]=0;c[O+32+8>>2]=0;c[O+32+12>>2]=0;Sb[L&0](M,i,O+48|0,O+64|0,N,N,e,f,O+32|0,1,10.0)}}else{M=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;L=c[(c[M>>2]|0)+68>>2]|0;c[O+32>>2]=0;c[O+32+4>>2]=0;c[O+32+8>>2]=0;c[O+32+12>>2]=0;Sb[L&0](M,i,O+48|0,O+64|0,N,N,-3.1415927410125732,3.1415927410125732,O+32|0,0,10.0)}c[O+112>>2]=c[d+1064>>2];c[O+112+4>>2]=c[d+1064+4>>2];c[O+112+8>>2]=c[d+1064+8>>2];c[O+112+12>>2]=c[d+1064+12>>2];c[m>>2]=c[k>>2];c[m+4>>2]=c[k+4>>2];c[m+8>>2]=c[k+8>>2];c[m+12>>2]=c[k+12>>2];c[o>>2]=c[n>>2];c[o+4>>2]=c[n+4>>2];c[o+8>>2]=c[n+8>>2];c[o+12>>2]=c[n+12>>2];c[p>>2]=c[q>>2];c[p+4>>2]=c[q+4>>2];c[p+8>>2]=c[q+8>>2];c[p+12>>2]=c[q+12>>2];c[O+32>>2]=c[d+680>>2];c[O+32+4>>2]=c[d+680+4>>2];c[O+32+8>>2]=c[d+680+8>>2];c[O+32+12>>2]=c[d+680+12>>2];c[O+16>>2]=c[d+680+16>>2];c[O+16+4>>2]=c[d+680+16+4>>2];c[O+16+8>>2]=c[d+680+16+8>>2];c[O+16+12>>2]=c[d+680+16+12>>2];b=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;d=c[(c[b>>2]|0)+80>>2]|0;c[O>>2]=0;c[O+4>>2]=0;c[O+8>>2]=0;c[O+12>>2]=0;Tb[d&31](b,O+32|0,O+16|0,O+112|0,O)}l=O;return}case 12:{c[O+112>>2]=c[d+1236>>2];c[O+112+4>>2]=c[d+1236+4>>2];c[O+112+8>>2]=c[d+1236+8>>2];c[O+112+12>>2]=c[d+1236+12>>2];k=d+1236+16|0;m=O+112+16|0;c[m>>2]=c[k>>2];c[m+4>>2]=c[k+4>>2];c[m+8>>2]=c[k+8>>2];c[m+12>>2]=c[k+12>>2];n=d+1236+32|0;o=O+112+32|0;c[o>>2]=c[n>>2];c[o+4>>2]=c[n+4>>2];c[o+8>>2]=c[n+8>>2];c[o+12>>2]=c[n+12>>2];p=O+112+48|0;q=d+1236+48|0;c[p>>2]=c[q>>2];c[p+4>>2]=c[q+4>>2];c[p+8>>2]=c[q+8>>2];c[p+12>>2]=c[q+12>>2];if(B){L=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Jb[c[(c[L>>2]|0)+64>>2]&7](L,O+112|0,N);c[O+112>>2]=c[d+1300>>2];c[O+112+4>>2]=c[d+1300+4>>2];c[O+112+8>>2]=c[d+1300+8>>2];c[O+112+12>>2]=c[d+1300+12>>2];c[m>>2]=c[d+1300+16>>2];c[m+4>>2]=c[d+1300+16+4>>2];c[m+8>>2]=c[d+1300+16+8>>2];c[m+12>>2]=c[d+1300+16+12>>2];c[o>>2]=c[d+1300+32>>2];c[o+4>>2]=c[d+1300+32+4>>2];c[o+8>>2]=c[d+1300+32+8>>2];c[o+12>>2]=c[d+1300+32+12>>2];c[p>>2]=c[d+1300+48>>2];c[p+4>>2]=c[d+1300+48+4>>2];c[p+8>>2]=c[d+1300+48+8>>2];c[p+12>>2]=c[d+1300+48+12>>2];L=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Jb[c[(c[L>>2]|0)+64>>2]&7](L,O+112|0,N)}else{c[O+112>>2]=c[d+1300>>2];c[O+112+4>>2]=c[d+1300+4>>2];c[O+112+8>>2]=c[d+1300+8>>2];c[O+112+12>>2]=c[d+1300+12>>2];c[m>>2]=c[d+1300+16>>2];c[m+4>>2]=c[d+1300+16+4>>2];c[m+8>>2]=c[d+1300+16+8>>2];c[m+12>>2]=c[d+1300+16+12>>2];c[o>>2]=c[d+1300+32>>2];c[o+4>>2]=c[d+1300+32+4>>2];c[o+8>>2]=c[d+1300+32+8>>2];c[o+12>>2]=c[d+1300+32+12>>2];c[p>>2]=c[d+1300+48>>2];c[p+4>>2]=c[d+1300+48+4>>2];c[p+8>>2]=c[d+1300+48+8>>2];c[p+12>>2]=c[d+1300+48+12>>2]}if(M){c[O+112>>2]=c[d+1236>>2];c[O+112+4>>2]=c[d+1236+4>>2];c[O+112+8>>2]=c[d+1236+8>>2];c[O+112+12>>2]=c[d+1236+12>>2];c[m>>2]=c[k>>2];c[m+4>>2]=c[k+4>>2];c[m+8>>2]=c[k+8>>2];c[m+12>>2]=c[k+12>>2];c[o>>2]=c[n>>2];c[o+4>>2]=c[n+4>>2];c[o+8>>2]=c[n+8>>2];c[o+12>>2]=c[n+12>>2];c[p>>2]=c[q>>2];c[p+4>>2]=c[q+4>>2];c[p+8>>2]=c[q+8>>2];c[p+12>>2]=c[q+12>>2];i=d+1300+48|0;c[O+96>>2]=c[O+112+8>>2];c[O+96+4>>2]=c[O+112+24>>2];c[O+96+8>>2]=c[O+112+40>>2];g[O+96+12>>2]=0.0;c[O+80>>2]=c[O+112>>2];c[O+80+4>>2]=c[O+112+16>>2];c[O+80+8>>2]=c[O+112+32>>2];g[O+80+12>>2]=0.0;V=+g[d+1056>>2];e=+g[d+1060>>2];Y=+g[d+1144>>2];X=+g[d+1144+4>>2];K=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;L=c[(c[K>>2]|0)+72>>2]|0;c[O+64>>2]=0;c[O+64+4>>2]=0;c[O+64+8>>2]=0;c[O+64+12>>2]=0;Rb[L&0](K,i,O+96|0,O+80|0,N*.8999999761581421,V,e,Y,X,O+64|0,10.0,1);K=c[O+112+4>>2]|0;L=c[O+112+20>>2]|0;M=c[O+112+36>>2]|0;c[O+80>>2]=K;c[O+80+4>>2]=L;c[O+80+8>>2]=M;g[O+80+12>>2]=0.0;X=+g[d+1368>>2];Y=+g[d+1372>>2];e=+D(+X);X=+E(+X);V=+D(+Y);Y=+E(+Y);W=(c[j>>2]=K,+g[j>>2]);Z=(c[j>>2]=L,+g[j>>2]);f=(c[j>>2]=M,+g[j>>2]);g[O+64>>2]=e*V*W+e*Y*Z-X*f;g[O+64+4>>2]=V*Z-Y*W;g[O+64+8>>2]=X*V*W+X*Y*Z+e*f;c[O+112>>2]=c[d+1300>>2];c[O+112+4>>2]=c[d+1300+4>>2];c[O+112+8>>2]=c[d+1300+8>>2];c[O+112+12>>2]=c[d+1300+12>>2];c[m>>2]=c[d+1300+16>>2];c[m+4>>2]=c[d+1300+16+4>>2];c[m+8>>2]=c[d+1300+16+8>>2];c[m+12>>2]=c[d+1300+16+12>>2];c[o>>2]=c[d+1300+32>>2];c[o+4>>2]=c[d+1300+32+4>>2];c[o+8>>2]=c[d+1300+32+8>>2];c[o+12>>2]=c[d+1300+32+12>>2];c[p>>2]=c[i>>2];c[p+4>>2]=c[i+4>>2];c[p+8>>2]=c[i+8>>2];c[p+12>>2]=c[i+12>>2];f=-+g[O+112+16>>2];e=-+g[O+112+32>>2];g[O+48>>2]=-+g[O+112>>2];g[O+48+4>>2]=f;g[O+48+8>>2]=e;g[O+48+12>>2]=0.0;e=+g[d+968>>2];f=+g[d+968+4>>2];if(!(e>f)){if(e<f){M=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;L=c[(c[M>>2]|0)+68>>2]|0;c[O+32>>2]=0;c[O+32+4>>2]=0;c[O+32+8>>2]=0;c[O+32+12>>2]=0;Sb[L&0](M,i,O+48|0,O+64|0,N,N,e,f,O+32|0,1,10.0)}}else{M=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;L=c[(c[M>>2]|0)+68>>2]|0;c[O+32>>2]=0;c[O+32+4>>2]=0;c[O+32+8>>2]=0;c[O+32+12>>2]=0;Sb[L&0](M,i,O+48|0,O+64|0,N,N,-3.1415927410125732,3.1415927410125732,O+32|0,0,10.0)}c[O+112>>2]=c[d+1236>>2];c[O+112+4>>2]=c[d+1236+4>>2];c[O+112+8>>2]=c[d+1236+8>>2];c[O+112+12>>2]=c[d+1236+12>>2];c[m>>2]=c[k>>2];c[m+4>>2]=c[k+4>>2];c[m+8>>2]=c[k+8>>2];c[m+12>>2]=c[k+12>>2];c[o>>2]=c[n>>2];c[o+4>>2]=c[n+4>>2];c[o+8>>2]=c[n+8>>2];c[o+12>>2]=c[n+12>>2];c[p>>2]=c[q>>2];c[p+4>>2]=c[q+4>>2];c[p+8>>2]=c[q+8>>2];c[p+12>>2]=c[q+12>>2];c[O+32>>2]=c[d+680>>2];c[O+32+4>>2]=c[d+680+4>>2];c[O+32+8>>2]=c[d+680+8>>2];c[O+32+12>>2]=c[d+680+12>>2];c[O+16>>2]=c[d+680+16>>2];c[O+16+4>>2]=c[d+680+16+4>>2];c[O+16+8>>2]=c[d+680+16+8>>2];c[O+16+12>>2]=c[d+680+16+12>>2];b=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;d=c[(c[b>>2]|0)+80>>2]|0;c[O>>2]=0;c[O+4>>2]=0;c[O+8>>2]=0;c[O+12>>2]=0;Tb[d&31](b,O+32|0,O+16|0,O+112|0,O)}l=O;return}case 7:{c[O+112>>2]=c[d+824>>2];c[O+112+4>>2]=c[d+824+4>>2];c[O+112+8>>2]=c[d+824+8>>2];c[O+112+12>>2]=c[d+824+12>>2];i=O+112+16|0;c[i>>2]=c[d+824+16>>2];c[i+4>>2]=c[d+824+16+4>>2];c[i+8>>2]=c[d+824+16+8>>2];c[i+12>>2]=c[d+824+16+12>>2];k=O+112+32|0;c[k>>2]=c[d+824+32>>2];c[k+4>>2]=c[d+824+32+4>>2];c[k+8>>2]=c[d+824+32+8>>2];c[k+12>>2]=c[d+824+32+12>>2];m=O+112+48|0;c[m>>2]=c[d+824+48>>2];c[m+4>>2]=c[d+824+48+4>>2];c[m+8>>2]=c[d+824+48+8>>2];c[m+12>>2]=c[d+824+48+12>>2];if(B){L=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Jb[c[(c[L>>2]|0)+64>>2]&7](L,O+112|0,N);c[O+112>>2]=c[d+888>>2];c[O+112+4>>2]=c[d+888+4>>2];c[O+112+8>>2]=c[d+888+8>>2];c[O+112+12>>2]=c[d+888+12>>2];c[i>>2]=c[d+888+16>>2];c[i+4>>2]=c[d+888+16+4>>2];c[i+8>>2]=c[d+888+16+8>>2];c[i+12>>2]=c[d+888+16+12>>2];c[k>>2]=c[d+888+32>>2];c[k+4>>2]=c[d+888+32+4>>2];c[k+8>>2]=c[d+888+32+8>>2];c[k+12>>2]=c[d+888+32+12>>2];c[m>>2]=c[d+888+48>>2];c[m+4>>2]=c[d+888+48+4>>2];c[m+8>>2]=c[d+888+48+8>>2];c[m+12>>2]=c[d+888+48+12>>2];L=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;Jb[c[(c[L>>2]|0)+64>>2]&7](L,O+112|0,N)}else{c[O+112>>2]=c[d+888>>2];c[O+112+4>>2]=c[d+888+4>>2];c[O+112+8>>2]=c[d+888+8>>2];c[O+112+12>>2]=c[d+888+12>>2];c[i>>2]=c[d+888+16>>2];c[i+4>>2]=c[d+888+16+4>>2];c[i+8>>2]=c[d+888+16+8>>2];c[i+12>>2]=c[d+888+16+12>>2];c[k>>2]=c[d+888+32>>2];c[k+4>>2]=c[d+888+32+4>>2];c[k+8>>2]=c[d+888+32+8>>2];c[k+12>>2]=c[d+888+32+12>>2];c[m>>2]=c[d+888+48>>2];c[m+4>>2]=c[d+888+48+4>>2];c[m+8>>2]=c[d+888+48+8>>2];c[m+12>>2]=c[d+888+48+12>>2]}if(M){G=(a[d+180>>0]|0)==0?d+888|0:d+824|0;H=c[G>>2]|0;K=c[G+4>>2]|0;I=c[G+16>>2]|0;L=c[G+20>>2]|0;J=c[G+32>>2]|0;M=c[G+36>>2]|0;C=+g[G+48>>2];R=+g[G+52>>2];V=+g[G+56>>2];Z=+g[d+184>>2];Q=(c[j>>2]=H,+g[j>>2]);P=(c[j>>2]=K,+g[j>>2])*0.0;F=+g[G+8>>2]*0.0;U=(c[j>>2]=I,+g[j>>2]);T=(c[j>>2]=L,+g[j>>2])*0.0;S=+g[G+24>>2]*0.0;Y=(c[j>>2]=J,+g[j>>2]);X=(c[j>>2]=M,+g[j>>2])*0.0;W=+g[G+40>>2]*0.0;g[O+96>>2]=C+(F+(P+Z*Q));g[O+96+4>>2]=R+(S+(T+Z*U));g[O+96+8>>2]=V+(W+(X+Z*Y));g[O+96+12>>2]=0.0;Z=+g[d+188>>2];g[O+80>>2]=C+(F+(P+Z*Q));g[O+80+4>>2]=R+(S+(T+Z*U));g[O+80+8>>2]=V+(W+(X+Z*Y));g[O+80+12>>2]=0.0;G=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;B=c[(c[G>>2]|0)+16>>2]|0;c[O+64>>2]=0;c[O+64+4>>2]=0;c[O+64+8>>2]=0;c[O+64+12>>2]=0;Pb[B&127](G,O+96|0,O+80|0,O+64|0);c[O+64>>2]=H;c[O+64+4>>2]=I;c[O+64+8>>2]=J;g[O+64+12>>2]=0.0;c[O+48>>2]=K;c[O+48+4>>2]=L;c[O+48+8>>2]=M;g[O+48+12>>2]=0.0;Y=+g[d+192>>2];Z=+g[d+196>>2];b=sb[c[(c[b>>2]|0)+20>>2]&127](b)|0;M=c[(c[b>>2]|0)+68>>2]|0;c[O+32>>2]=0;c[O+32+4>>2]=0;c[O+32+8>>2]=0;c[O+32+12>>2]=0;Sb[M&0](b,d+888+48|0,O+64|0,O+48|0,N,N,Y,Z,O+32|0,1,10.0)}l=O;return}default:{l=O;return}}}function $b(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0,i=0,j=0,k=0.0,m=0,n=0,o=0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,C=0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0,R=0,S=0,T=0,U=0.0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0,ia=0,ja=0;ja=l;l=l+64|0;if((e|0)<=0){l=ja;return}$=ja+16+4|0;aa=ja+16+8|0;Y=0;do{ba=c[d+(Y<<2)>>2]|0;ca=c[ba+772>>2]|0;da=c[ba+776>>2]|0;ea=od(b,ca,+g[f+12>>2])|0;fa=od(b,da,+g[f+12>>2])|0;ga=c[b+16>>2]|0;O=+g[ga+(ea*244|0)+128>>2];P=+g[ga+(ea*244|0)+132>>2];U=+g[ga+(ea*244|0)+136>>2];if(!(O*O+P*P+U*U<1.4210854715202004e-14?(O=+g[ga+(fa*244|0)+128>>2],P=+g[ga+(fa*244|0)+132>>2],U=+g[ga+(fa*244|0)+136>>2],O*O+P*P+U*U<1.4210854715202004e-14):0))ia=5;if((ia|0)==5?(ia=0,ha=c[ba+780>>2]|0,(ha|0)>0):0){Z=0;h=ha;do{W=ba+4+(Z*192|0)|0;m=ba+4+(Z*192|0)+80|0;if(+g[m>>2]<=+g[ba+788>>2]){X=c[b+28>>2]|0;if((X|0)==(c[b+32>>2]|0)?(_=(X|0)==0?1:X<<1,(X|0)<(_|0)):0){if(!_){h=0;j=X}else{c[6485]=(c[6485]|0)+1;h=ec((_*152|3)+16|0)|0;if(!h)h=0;else{c[(h+4+15&-16)+-4>>2]=h;h=h+4+15&-16}j=c[b+28>>2]|0}if((j|0)>0){i=0;do{$g(h+(i*152|0)|0,(c[b+36>>2]|0)+(i*152|0)|0,152)|0;i=i+1|0}while((i|0)!=(j|0))}i=c[b+36>>2]|0;if(i|0){if(a[b+40>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[b+36>>2]=0}a[b+40>>0]=1;c[b+36>>2]=h;c[b+32>>2]=_;h=c[b+28>>2]|0}else h=X;c[b+28>>2]=h+1;V=c[b+36>>2]|0;c[V+(X*152|0)+144>>2]=ea;c[V+(X*152|0)+148>>2]=fa;c[V+(X*152|0)+132>>2]=W;y=+g[ba+4+(Z*192|0)+48>>2]-+g[ca+52>>2];z=+g[ba+4+(Z*192|0)+52>>2]-+g[ca+56>>2];x=+g[ba+4+(Z*192|0)+56>>2]-+g[ca+60>>2];g[ja+48>>2]=y;g[ja+48+4>>2]=z;g[ja+48+8>>2]=x;g[ja+48+12>>2]=0.0;F=+g[ba+4+(Z*192|0)+32>>2]-+g[da+52>>2];G=+g[ba+4+(Z*192|0)+36>>2]-+g[da+56>>2];D=+g[ba+4+(Z*192|0)+40>>2]-+g[da+60>>2];g[ja+32>>2]=F;g[ja+32+4>>2]=G;g[ja+32+8>>2]=D;g[ja+32+12>>2]=0.0;if(!(c[ga+(ea*244|0)+240>>2]|0)){k=0.0;q=0.0;s=0.0}else{U=+g[ga+(ea*244|0)+192>>2]+ +g[ga+(ea*244|0)+224>>2];s=+g[ga+(ea*244|0)+196>>2]+ +g[ga+(ea*244|0)+228>>2];q=+g[ga+(ea*244|0)+200>>2]+ +g[ga+(ea*244|0)+232>>2];k=+g[ga+(ea*244|0)+176>>2]+ +g[ga+(ea*244|0)+208>>2]+(x*s-z*q);q=+g[ga+(ea*244|0)+180>>2]+ +g[ga+(ea*244|0)+212>>2]+(y*q-x*U);s=+g[ga+(ea*244|0)+184>>2]+ +g[ga+(ea*244|0)+216>>2]+(z*U-y*s)}if(!(c[ga+(fa*244|0)+240>>2]|0)){p=0.0;r=0.0;t=0.0}else{U=+g[ga+(fa*244|0)+192>>2]+ +g[ga+(fa*244|0)+224>>2];t=+g[ga+(fa*244|0)+196>>2]+ +g[ga+(fa*244|0)+228>>2];r=+g[ga+(fa*244|0)+200>>2]+ +g[ga+(fa*244|0)+232>>2];p=+g[ga+(fa*244|0)+176>>2]+ +g[ga+(fa*244|0)+208>>2]+(D*t-G*r);r=+g[ga+(fa*244|0)+180>>2]+ +g[ga+(fa*244|0)+212>>2]+(F*r-D*U);t=+g[ga+(fa*244|0)+184>>2]+ +g[ga+(fa*244|0)+216>>2]+(G*U-F*t)}P=k-p;O=q-r;K=s-t;Q=ba+4+(Z*192|0)+64|0;L=+g[Q>>2];R=ba+4+(Z*192|0)+68|0;M=+g[R>>2];S=ba+4+(Z*192|0)+72|0;N=+g[S>>2];n=c[b+16>>2]|0;i=c[n+(ea*244|0)+240>>2]|0;j=c[n+(fa*244|0)+240>>2]|0;U=+g[f+28>>2];J=+g[f+12>>2];k=+g[f+40>>2];p=+g[f+36>>2];T=ba+4+(Z*192|0)+120|0;h=c[T>>2]|0;if(!(h&6))if(!(h&8))I=p;else{I=J*+g[ba+4+(Z*192|0)+144>>2];k=I+ +g[ba+4+(Z*192|0)+148>>2];k=k<1.1920928955078125e-07?1.1920928955078125e-07:k;I=I/k;k=1.0/k}else{k=(h&2|0)==0?k:+g[ba+4+(Z*192|0)+144>>2];if(!(h&4))I=p;else I=+g[ba+4+(Z*192|0)+148>>2]}H=1.0/J*k;if(i|0){k=((z*N-x*M)*+g[i+324>>2]+(x*L-N*y)*+g[i+328>>2]+(M*y-z*L)*+g[i+332>>2])*+g[i+604>>2];p=((z*N-x*M)*+g[i+340>>2]+(x*L-N*y)*+g[i+344>>2]+(M*y-z*L)*+g[i+348>>2])*+g[i+608>>2];q=((z*N-x*M)*+g[i+356>>2]+(x*L-N*y)*+g[i+360>>2]+(M*y-z*L)*+g[i+364>>2])*+g[i+612>>2]}else{k=0.0;p=0.0;q=0.0}g[V+(X*152|0)+64>>2]=k;g[V+(X*152|0)+68>>2]=p;g[V+(X*152|0)+72>>2]=q;g[V+(X*152|0)+76>>2]=0.0;u=+g[S>>2];v=+g[R>>2];w=+g[Q>>2];if(j|0){r=(+g[j+324>>2]*-(G*u-D*v)+ +g[j+328>>2]*-(D*w-u*F)+ +g[j+332>>2]*-(v*F-G*w))*+g[j+604>>2];s=(+g[j+340>>2]*-(G*u-D*v)+ +g[j+344>>2]*-(D*w-u*F)+ +g[j+348>>2]*-(v*F-G*w))*+g[j+608>>2];t=(+g[j+356>>2]*-(G*u-D*v)+ +g[j+360>>2]*-(D*w-u*F)+ +g[j+364>>2]*-(v*F-G*w))*+g[j+612>>2]}else{r=0.0;s=0.0;t=0.0}g[V+(X*152|0)+80>>2]=r;g[V+(X*152|0)+84>>2]=s;g[V+(X*152|0)+88>>2]=t;g[V+(X*152|0)+92>>2]=0.0;if(i|0)p=+g[i+404>>2]+((p*x-q*z)*+g[Q>>2]+(q*y-x*k)*+g[R>>2]+(z*k-p*y)*+g[S>>2]);else p=0.0;if(j|0){E=-r;k=-s;t=-t;k=+g[j+404>>2]+((D*k-G*t)*+g[Q>>2]+(F*t-D*E)*+g[R>>2]+(G*E-F*k)*+g[S>>2])}else k=0.0;g[V+(X*152|0)+108>>2]=U/(H+(p+k));if(i|0){c[V+(X*152|0)+16>>2]=c[Q>>2];c[V+(X*152|0)+16+4>>2]=c[Q+4>>2];c[V+(X*152|0)+16+8>>2]=c[Q+8>>2];c[V+(X*152|0)+16+12>>2]=c[Q+12>>2];g[V+(X*152|0)>>2]=z*N-x*M;g[V+(X*152|0)+4>>2]=x*L-N*y;g[V+(X*152|0)+8>>2]=M*y-z*L;g[V+(X*152|0)+12>>2]=0.0}else{c[V+(X*152|0)>>2]=0;c[V+(X*152|0)+4>>2]=0;c[V+(X*152|0)+8>>2]=0;c[V+(X*152|0)+12>>2]=0;c[V+(X*152|0)+16>>2]=0;c[V+(X*152|0)+20>>2]=0;c[V+(X*152|0)+24>>2]=0;c[V+(X*152|0)+28>>2]=0}if(j|0){t=-+g[R>>2];E=-+g[S>>2];g[V+(X*152|0)+48>>2]=-+g[Q>>2];g[V+(X*152|0)+52>>2]=t;g[V+(X*152|0)+56>>2]=E;g[V+(X*152|0)+60>>2]=0.0;g[V+(X*152|0)+32>>2]=-(G*u-D*v);g[V+(X*152|0)+36>>2]=-(D*w-u*F);g[V+(X*152|0)+40>>2]=-(v*F-G*w);g[V+(X*152|0)+44>>2]=0.0}else{c[V+(X*152|0)+32>>2]=0;c[V+(X*152|0)+32+4>>2]=0;c[V+(X*152|0)+32+8>>2]=0;c[V+(X*152|0)+32+12>>2]=0;c[V+(X*152|0)+32+16>>2]=0;c[V+(X*152|0)+32+20>>2]=0;c[V+(X*152|0)+32+24>>2]=0;c[V+(X*152|0)+32+28>>2]=0}E=+g[m>>2]+ +g[f+64>>2];if(i|0){r=+g[i+392>>2];s=+g[i+396>>2];w=+g[i+388>>2];t=r*x-s*z+ +g[i+372>>2];s=+g[i+376>>2]+(s*y-x*w);r=z*w-r*y+ +g[i+380>>2]}else{t=0.0;s=0.0;r=0.0}if(j|0){k=+g[j+392>>2];p=+g[j+396>>2];z=+g[j+388>>2];q=k*D-p*G+ +g[j+372>>2];p=+g[j+376>>2]+(p*F-D*z);k=G*z-k*F+ +g[j+380>>2]}else{q=0.0;p=0.0;k=0.0}D=(t-q)*+g[Q>>2]+(s-p)*+g[R>>2]+(r-k)*+g[S>>2];c[V+(X*152|0)+104>>2]=c[ba+4+(Z*192|0)+84>>2];h=+A(+D)<+g[f+96>>2];D=h?0.0:-(D*+g[ba+4+(Z*192|0)+96>>2]);D=D<=0.0?0.0:D;h=c[f+72>>2]|0;do if(!(h&4))g[V+(X*152|0)+100>>2]=0.0;else{k=+g[ba+4+(Z*192|0)+124>>2]*+g[f+68>>2];g[V+(X*152|0)+100>>2]=k;do if(i|0){if(!(c[n+(ea*244|0)+240>>2]|0))break;G=k*+g[V+(X*152|0)+20>>2]*+g[n+(ea*244|0)+132>>2]*+g[i+412>>2]*+g[n+(ea*244|0)+116>>2];F=k*+g[V+(X*152|0)+24>>2]*+g[n+(ea*244|0)+136>>2]*+g[i+416>>2]*+g[n+(ea*244|0)+120>>2];g[n+(ea*244|0)+64>>2]=+g[n+(ea*244|0)+112>>2]*k*+g[V+(X*152|0)+16>>2]*+g[n+(ea*244|0)+128>>2]*+g[i+408>>2]+ +g[n+(ea*244|0)+64>>2];g[n+(ea*244|0)+68>>2]=G+ +g[n+(ea*244|0)+68>>2];g[n+(ea*244|0)+72>>2]=F+ +g[n+(ea*244|0)+72>>2];F=k*+g[n+(ea*244|0)+100>>2]*+g[V+(X*152|0)+68>>2];G=k*+g[n+(ea*244|0)+104>>2]*+g[V+(X*152|0)+72>>2];g[n+(ea*244|0)+80>>2]=k*+g[n+(ea*244|0)+96>>2]*+g[V+(X*152|0)+64>>2]+ +g[n+(ea*244|0)+80>>2];g[n+(ea*244|0)+84>>2]=F+ +g[n+(ea*244|0)+84>>2];g[n+(ea*244|0)+88>>2]=G+ +g[n+(ea*244|0)+88>>2]}while(0);if(!j)break;k=+g[V+(X*152|0)+100>>2];if(!(c[n+(fa*244|0)+240>>2]|0))break;G=+g[V+(X*152|0)+88>>2];F=+g[V+(X*152|0)+84>>2];z=+g[V+(X*152|0)+80>>2];x=k*+g[V+(X*152|0)+52>>2]*+g[n+(fa*244|0)+132>>2]*+g[j+412>>2]*+g[n+(fa*244|0)+116>>2];y=k*+g[V+(X*152|0)+56>>2]*+g[n+(fa*244|0)+136>>2]*+g[j+416>>2]*+g[n+(fa*244|0)+120>>2];g[n+(fa*244|0)+64>>2]=+g[n+(fa*244|0)+112>>2]*k*+g[V+(X*152|0)+48>>2]*+g[n+(fa*244|0)+128>>2]*+g[j+408>>2]+ +g[n+(fa*244|0)+64>>2];g[n+(fa*244|0)+68>>2]=x+ +g[n+(fa*244|0)+68>>2];g[n+(fa*244|0)+72>>2]=y+ +g[n+(fa*244|0)+72>>2];F=F*+g[n+(fa*244|0)+100>>2]*-k;G=G*+g[n+(fa*244|0)+104>>2]*-k;g[n+(fa*244|0)+80>>2]=+g[n+(fa*244|0)+80>>2]-z*+g[n+(fa*244|0)+96>>2]*-k;g[n+(fa*244|0)+84>>2]=+g[n+(fa*244|0)+84>>2]-F;g[n+(fa*244|0)+88>>2]=+g[n+(fa*244|0)+88>>2]-G}while(0);g[V+(X*152|0)+96>>2]=0.0;if(!(c[n+(ea*244|0)+240>>2]|0)){k=0.0;p=0.0;q=0.0;r=0.0;s=0.0;t=0.0}else{k=+g[n+(ea*244|0)+208>>2];p=+g[n+(ea*244|0)+212>>2];q=+g[n+(ea*244|0)+216>>2];r=+g[n+(ea*244|0)+224>>2];s=+g[n+(ea*244|0)+228>>2];t=+g[n+(ea*244|0)+232>>2]}if(!(c[n+(fa*244|0)+240>>2]|0)){u=0.0;v=0.0;w=0.0;x=0.0;y=0.0;z=0.0}else{u=+g[n+(fa*244|0)+208>>2];v=+g[n+(fa*244|0)+212>>2];w=+g[n+(fa*244|0)+216>>2];x=+g[n+(fa*244|0)+224>>2];y=+g[n+(fa*244|0)+228>>2];z=+g[n+(fa*244|0)+232>>2]}k=D-((k+ +g[n+(ea*244|0)+176>>2])*+g[V+(X*152|0)+16>>2]+(p+ +g[n+(ea*244|0)+180>>2])*+g[V+(X*152|0)+20>>2]+(q+ +g[n+(ea*244|0)+184>>2])*+g[V+(X*152|0)+24>>2]+((r+ +g[n+(ea*244|0)+192>>2])*+g[V+(X*152|0)>>2]+(s+ +g[n+(ea*244|0)+196>>2])*+g[V+(X*152|0)+4>>2]+(t+ +g[n+(ea*244|0)+200>>2])*+g[V+(X*152|0)+8>>2])+((u+ +g[n+(fa*244|0)+176>>2])*+g[V+(X*152|0)+48>>2]+(v+ +g[n+(fa*244|0)+180>>2])*+g[V+(X*152|0)+52>>2]+(w+ +g[n+(fa*244|0)+184>>2])*+g[V+(X*152|0)+56>>2]+((x+ +g[n+(fa*244|0)+192>>2])*+g[V+(X*152|0)+32>>2]+(y+ +g[n+(fa*244|0)+196>>2])*+g[V+(X*152|0)+36>>2]+(z+ +g[n+(fa*244|0)+200>>2])*+g[V+(X*152|0)+40>>2])));if(E>0.0){p=k-1.0/J*E;k=0.0}else{p=k;k=-(1.0/J*I*E)}J=+g[V+(X*152|0)+108>>2];I=k*J;G=p*J;j=(c[f+52>>2]|0)==0?1:E>+g[f+56>>2];g[V+(X*152|0)+112>>2]=j?I+G:G;g[V+(X*152|0)+128>>2]=j?0.0:I;g[V+(X*152|0)+116>>2]=H*J;g[V+(X*152|0)+120>>2]=0.0;g[V+(X*152|0)+124>>2]=1.0e10;c[V+(X*152|0)+140>>2]=c[b+68>>2];j=ba+4+(Z*192|0)+88|0;if(+g[j>>2]>0.0){nd(b,Q,ea,fa,X,+g[ba+4+(Z*192|0)+92>>2]);k=+g[S>>2];if(+A(+k)>.7071067690849304){I=+g[R>>2];J=1.0/+B(+(k*k+I*I));g[ja+16>>2]=0.0;g[$>>2]=-(k*J);g[aa>>2]=I*J;g[ja>>2]=(k*k+I*I)*J;H=+g[Q>>2];g[ja+4>>2]=-(H*I*J);u=H*-(k*J);p=0.0;q=-(k*J);r=I*J;s=(k*k+I*I)*J;k=-(H*I*J)}else{s=+g[Q>>2];I=+g[R>>2];J=1.0/+B(+(s*s+I*I));g[ja+16>>2]=-(I*J);g[$>>2]=s*J;g[aa>>2]=0.0;g[ja>>2]=-(k*s*J);g[ja+4>>2]=k*-(I*J);u=(s*s+I*I)*J;p=-(I*J);q=s*J;r=0.0;s=-(k*s*J);k=k*-(I*J)}t=1.0/+B(+(p*p+q*q+r*r));v=p*t;g[ja+16>>2]=v;w=q*t;g[$>>2]=w;t=r*t;g[aa>>2]=t;J=1.0/+B(+(u*u+(s*s+k*k)));q=s*J;g[ja>>2]=q;p=k*J;g[ja+4>>2]=p;k=u*J;g[ja+8>>2]=k;h=(c[ca+180>>2]&2|0)==0;if(h){r=v;s=w}else{y=+g[ca+4>>2];D=+g[ca+20>>2];F=+g[ca+36>>2];z=+g[ca+8>>2];E=+g[ca+24>>2];H=+g[ca+40>>2];r=+g[ca+12>>2];s=+g[ca+28>>2];J=+g[ca+44>>2];G=(v*y+w*D+t*F)*+g[ca+164>>2];I=(v*z+w*E+t*H)*+g[ca+168>>2];t=(v*r+w*s+t*J)*+g[ca+172>>2];g[ja+16>>2]=y*G+z*I+r*t;g[$>>2]=D*G+E*I+s*t;g[aa>>2]=F*G+H*I+J*t;g[ja+16+12>>2]=0.0;r=y*G+z*I+r*t;s=D*G+E*I+s*t;t=F*G+H*I+J*t}i=(c[da+180>>2]&2|0)==0;if(!i){w=+g[da+4>>2];z=+g[da+20>>2];F=+g[da+36>>2];x=+g[da+8>>2];D=+g[da+24>>2];H=+g[da+40>>2];y=+g[da+12>>2];E=+g[da+28>>2];J=+g[da+44>>2];G=(w*r+z*s+F*t)*+g[da+164>>2];I=(r*x+s*D+t*H)*+g[da+168>>2];t=(r*y+s*E+t*J)*+g[da+172>>2];g[ja+16>>2]=w*G+x*I+y*t;g[$>>2]=z*G+D*I+E*t;g[aa>>2]=F*G+H*I+J*t;g[ja+16+12>>2]=0.0;r=w*G+x*I+y*t;s=z*G+D*I+E*t;t=F*G+H*I+J*t}if(!h){w=+g[ca+4>>2];z=+g[ca+20>>2];F=+g[ca+36>>2];x=+g[ca+8>>2];D=+g[ca+24>>2];H=+g[ca+40>>2];y=+g[ca+12>>2];E=+g[ca+28>>2];J=+g[ca+44>>2];G=(q*w+p*z+k*F)*+g[ca+164>>2];I=(q*x+p*D+k*H)*+g[ca+168>>2];k=(q*y+p*E+k*J)*+g[ca+172>>2];g[ja>>2]=w*G+x*I+y*k;g[ja+4>>2]=z*G+D*I+E*k;g[ja+8>>2]=F*G+H*I+J*k;g[ja+12>>2]=0.0;q=w*G+x*I+y*k;p=z*G+D*I+E*k;k=F*G+H*I+J*k}if(!i){w=+g[da+4>>2];z=+g[da+20>>2];F=+g[da+36>>2];x=+g[da+8>>2];D=+g[da+24>>2];H=+g[da+40>>2];y=+g[da+12>>2];E=+g[da+28>>2];J=+g[da+44>>2];G=(w*q+z*p+F*k)*+g[da+164>>2];I=(q*x+p*D+k*H)*+g[da+168>>2];k=(q*y+p*E+k*J)*+g[da+172>>2];g[ja>>2]=w*G+x*I+y*k;g[ja+4>>2]=z*G+D*I+E*k;g[ja+8>>2]=F*G+H*I+J*k;g[ja+12>>2]=0.0;q=w*G+x*I+y*k;p=z*G+D*I+E*k;k=F*G+H*I+J*k}if(+B(+(r*r+s*s+t*t))>.001)nd(b,ja+16|0,ea,fa,X,+g[j>>2]);if(+B(+(q*q+p*p+k*k))>.001)nd(b,ja,ea,fa,X,+g[j>>2]);h=c[f+72>>2]|0}do if(!(h&32))ia=83;else{if(!(c[T>>2]&1)){ia=83;break}h=ba+4+(Z*192|0)+152|0;Mc(b,ba+4+(Z*192|0)+160|0,ea,fa,X,W,ja+48|0,ja+32|0,U,f,+g[ba+4+(Z*192|0)+136>>2],+g[h>>2]);if(!(c[f+72>>2]&16))break;Mc(b,ba+4+(Z*192|0)+176|0,ea,fa,X,W,ja+48|0,ja+32|0,U,f,+g[ba+4+(Z*192|0)+140>>2],+g[h>>2])}while(0);do if((ia|0)==83){ia=0;k=+g[Q>>2];v=+g[R>>2];u=+g[S>>2];p=P-(P*L+O*M+K*N)*k;s=O-(P*L+O*M+K*N)*v;r=K-(P*L+O*M+K*N)*u;C=ba+4+(Z*192|0)+160|0;g[ba+4+(Z*192|0)+160>>2]=p;h=ba+4+(Z*192|0)+164|0;g[h>>2]=s;n=ba+4+(Z*192|0)+168|0;g[n>>2]=r;o=ba+4+(Z*192|0)+172|0;g[o>>2]=0.0;if((c[f+72>>2]&64|0)==0?p*p+s*s+r*r>1.1920928955078125e-07:0){k=1.0/+B(+(p*p+s*s+r*r));g[C>>2]=p*k;g[h>>2]=s*k;g[n>>2]=r*k;if(!(c[ca+180>>2]&1)){q=p*k;p=s*k;k=r*k}else{G=+g[ca+4>>2];I=+g[ca+20>>2];L=+g[ca+36>>2];H=+g[ca+8>>2];J=+g[ca+24>>2];N=+g[ca+40>>2];q=+g[ca+12>>2];K=+g[ca+28>>2];P=+g[ca+44>>2];M=(p*k*G+s*k*I+r*k*L)*+g[ca+164>>2];O=(p*k*H+s*k*J+r*k*N)*+g[ca+168>>2];k=(p*k*q+s*k*K+r*k*P)*+g[ca+172>>2];g[C>>2]=G*M+H*O+q*k;g[h>>2]=I*M+J*O+K*k;g[n>>2]=L*M+N*O+P*k;g[o>>2]=0.0;q=G*M+H*O+q*k;p=I*M+J*O+K*k;k=L*M+N*O+P*k}if(c[da+180>>2]&1|0){E=+g[da+4>>2];H=+g[da+20>>2];K=+g[da+36>>2];F=+g[da+8>>2];I=+g[da+24>>2];M=+g[da+40>>2];G=+g[da+12>>2];J=+g[da+28>>2];O=+g[da+44>>2];L=(E*q+H*p+K*k)*+g[da+164>>2];N=(q*F+p*I+k*M)*+g[da+168>>2];P=(q*G+p*J+k*O)*+g[da+172>>2];g[C>>2]=E*L+F*N+G*P;g[h>>2]=H*L+I*N+J*P;g[n>>2]=K*L+M*N+O*P;g[o>>2]=0.0}Mc(b,C,ea,fa,X,W,ja+48|0,ja+32|0,U,f,0.0,0.0);if(!(c[f+72>>2]&16))break;O=+g[h>>2];q=+g[S>>2];L=+g[n>>2];M=+g[R>>2];P=+g[Q>>2];N=+g[C>>2];m=ba+4+(Z*192|0)+176|0;g[ba+4+(Z*192|0)+176>>2]=O*q-L*M;h=ba+4+(Z*192|0)+180|0;i=ba+4+(Z*192|0)+184|0;j=ba+4+(Z*192|0)+188|0;g[j>>2]=0.0;p=1.0/+B(+((O*q-L*M)*(O*q-L*M)+(L*P-q*N)*(L*P-q*N)+(M*N-O*P)*(M*N-O*P)));k=(O*q-L*M)*p;g[m>>2]=k;q=(L*P-q*N)*p;g[h>>2]=q;p=(M*N-O*P)*p;g[i>>2]=p;if(c[ca+180>>2]&1){F=+g[ca+4>>2];I=+g[ca+20>>2];L=+g[ca+36>>2];G=+g[ca+8>>2];J=+g[ca+24>>2];N=+g[ca+40>>2];H=+g[ca+12>>2];K=+g[ca+28>>2];P=+g[ca+44>>2];M=(k*F+q*I+p*L)*+g[ca+164>>2];O=(k*G+q*J+p*N)*+g[ca+168>>2];p=(k*H+q*K+p*P)*+g[ca+172>>2];g[m>>2]=F*M+G*O+H*p;g[h>>2]=I*M+J*O+K*p;g[i>>2]=L*M+N*O+P*p;g[j>>2]=0.0;k=F*M+G*O+H*p;q=I*M+J*O+K*p;p=L*M+N*O+P*p}if(c[da+180>>2]&1|0){E=+g[da+4>>2];H=+g[da+20>>2];K=+g[da+36>>2];F=+g[da+8>>2];I=+g[da+24>>2];M=+g[da+40>>2];G=+g[da+12>>2];J=+g[da+28>>2];O=+g[da+44>>2];L=(E*k+H*q+K*p)*+g[da+164>>2];N=(k*F+q*I+p*M)*+g[da+168>>2];P=(k*G+q*J+p*O)*+g[da+172>>2];g[m>>2]=E*L+F*N+G*P;g[h>>2]=H*L+I*N+J*P;g[i>>2]=K*L+M*N+O*P;g[j>>2]=0.0}Mc(b,m,ea,fa,X,W,ja+48|0,ja+32|0,U,f,0.0,0.0);break}m=ba+4+(Z*192|0)+176|0;if(+A(+u)>.7071067690849304){P=1.0/+B(+(v*v+u*u));g[C>>2]=0.0;g[h>>2]=-(u*P);g[n>>2]=v*P;s=-(k*v*P);t=k*-(u*P);r=(v*v+u*u)*P;q=0.0;p=-(u*P);k=v*P}else{p=1.0/+B(+(k*k+v*v));g[C>>2]=-(v*p);g[h>>2]=k*p;g[n>>2]=0.0;s=u*-(v*p);t=(k*k+v*v)*p;r=-(u*k*p);q=-(v*p);p=k*p;k=0.0}g[m>>2]=r;j=ba+4+(Z*192|0)+180|0;g[j>>2]=s;i=ba+4+(Z*192|0)+184|0;g[i>>2]=t;if(c[ca+180>>2]&1){F=+g[ca+4>>2];I=+g[ca+20>>2];L=+g[ca+36>>2];G=+g[ca+8>>2];J=+g[ca+24>>2];N=+g[ca+40>>2];H=+g[ca+12>>2];K=+g[ca+28>>2];P=+g[ca+44>>2];M=(F*q+I*p+L*k)*+g[ca+164>>2];O=(q*G+p*J+k*N)*+g[ca+168>>2];k=(q*H+p*K+k*P)*+g[ca+172>>2];g[C>>2]=F*M+G*O+H*k;g[h>>2]=I*M+J*O+K*k;g[n>>2]=L*M+N*O+P*k;g[o>>2]=0.0;q=F*M+G*O+H*k;p=I*M+J*O+K*k;k=L*M+N*O+P*k}if(c[da+180>>2]&1|0){E=+g[da+4>>2];H=+g[da+20>>2];K=+g[da+36>>2];F=+g[da+8>>2];I=+g[da+24>>2];M=+g[da+40>>2];G=+g[da+12>>2];J=+g[da+28>>2];O=+g[da+44>>2];L=(E*q+H*p+K*k)*+g[da+164>>2];N=(q*F+p*I+k*M)*+g[da+168>>2];P=(q*G+p*J+k*O)*+g[da+172>>2];g[C>>2]=E*L+F*N+G*P;g[h>>2]=H*L+I*N+J*P;g[n>>2]=K*L+M*N+O*P;g[o>>2]=0.0}Mc(b,C,ea,fa,X,W,ja+48|0,ja+32|0,U,f,0.0,0.0);h=c[f+72>>2]|0;if(h&16){if(c[ca+180>>2]&1|0){E=+g[ca+4>>2];z=+g[m>>2];H=+g[ca+20>>2];D=+g[j>>2];K=+g[ca+36>>2];P=+g[i>>2];F=+g[ca+8>>2];I=+g[ca+24>>2];M=+g[ca+40>>2];G=+g[ca+12>>2];J=+g[ca+28>>2];O=+g[ca+44>>2];L=(E*z+H*D+K*P)*+g[ca+164>>2];N=(z*F+D*I+P*M)*+g[ca+168>>2];P=(z*G+D*J+P*O)*+g[ca+172>>2];g[m>>2]=E*L+F*N+G*P;g[j>>2]=H*L+I*N+J*P;g[i>>2]=K*L+M*N+O*P;g[ba+4+(Z*192|0)+188>>2]=0.0}if(c[da+180>>2]&1|0){E=+g[da+4>>2];z=+g[m>>2];H=+g[da+20>>2];D=+g[j>>2];K=+g[da+36>>2];P=+g[i>>2];F=+g[da+8>>2];I=+g[da+24>>2];M=+g[da+40>>2];G=+g[da+12>>2];J=+g[da+28>>2];O=+g[da+44>>2];L=(E*z+H*D+K*P)*+g[da+164>>2];N=(z*F+D*I+P*M)*+g[da+168>>2];P=(z*G+D*J+P*O)*+g[da+172>>2];g[m>>2]=E*L+F*N+G*P;g[j>>2]=H*L+I*N+J*P;g[i>>2]=K*L+M*N+O*P;g[ba+4+(Z*192|0)+188>>2]=0.0}Mc(b,m,ea,fa,X,W,ja+48|0,ja+32|0,U,f,0.0,0.0);h=c[f+72>>2]|0}if((h&80|0)!=80)break;c[T>>2]=c[T>>2]|1}while(0);m=c[b+16>>2]|0;n=c[m+(ea*244|0)+240>>2]|0;o=c[m+(fa*244|0)+240>>2]|0;i=c[V+(X*152|0)+140>>2]|0;j=c[b+76>>2]|0;h=c[f+72>>2]|0;do if(!(h&4))g[j+(i*152|0)+100>>2]=0.0;else{k=+g[ba+4+(Z*192|0)+128>>2]*+g[f+68>>2];g[j+(i*152|0)+100>>2]=k;if(n|0){O=+g[n+404>>2];U=k*O*+g[j+(i*152|0)+20>>2]*+g[n+412>>2]*+g[m+(ea*244|0)+116>>2];P=k*O*+g[j+(i*152|0)+24>>2]*+g[n+416>>2]*+g[m+(ea*244|0)+120>>2];g[m+(ea*244|0)+64>>2]=k*O*+g[j+(i*152|0)+16>>2]*+g[n+408>>2]*+g[m+(ea*244|0)+112>>2]+ +g[m+(ea*244|0)+64>>2];g[m+(ea*244|0)+68>>2]=U+ +g[m+(ea*244|0)+68>>2];g[m+(ea*244|0)+72>>2]=P+ +g[m+(ea*244|0)+72>>2];P=k*+g[m+(ea*244|0)+100>>2]*+g[j+(i*152|0)+68>>2];U=k*+g[m+(ea*244|0)+104>>2]*+g[j+(i*152|0)+72>>2];g[m+(ea*244|0)+80>>2]=k*+g[m+(ea*244|0)+96>>2]*+g[j+(i*152|0)+64>>2]+ +g[m+(ea*244|0)+80>>2];g[m+(ea*244|0)+84>>2]=P+ +g[m+(ea*244|0)+84>>2];g[m+(ea*244|0)+88>>2]=U+ +g[m+(ea*244|0)+88>>2]}if(!o)break;K=+g[o+404>>2];N=+g[j+(i*152|0)+80>>2];P=+g[j+(i*152|0)+84>>2];U=+g[j+(i*152|0)+88>>2];O=+g[j+(i*152|0)+100>>2];L=+g[j+(i*152|0)+52>>2]*K*+g[o+412>>2]*O*+g[m+(fa*244|0)+116>>2];M=+g[j+(i*152|0)+56>>2]*K*+g[o+416>>2]*O*+g[m+(fa*244|0)+120>>2];g[m+(fa*244|0)+64>>2]=+g[j+(i*152|0)+48>>2]*K*+g[o+408>>2]*O*+g[m+(fa*244|0)+112>>2]+ +g[m+(fa*244|0)+64>>2];g[m+(fa*244|0)+68>>2]=L+ +g[m+(fa*244|0)+68>>2];g[m+(fa*244|0)+72>>2]=M+ +g[m+(fa*244|0)+72>>2];P=P*+g[m+(fa*244|0)+100>>2]*-O;U=U*+g[m+(fa*244|0)+104>>2]*-O;g[m+(fa*244|0)+80>>2]=+g[m+(fa*244|0)+80>>2]-N*+g[m+(fa*244|0)+96>>2]*-O;g[m+(fa*244|0)+84>>2]=+g[m+(fa*244|0)+84>>2]-P;g[m+(fa*244|0)+88>>2]=+g[m+(fa*244|0)+88>>2]-U}while(0);do if(h&16|0){if(!(h&4)){g[j+((i+1|0)*152|0)+100>>2]=0.0;break}k=+g[ba+4+(Z*192|0)+132>>2]*+g[f+68>>2];g[j+((i+1|0)*152|0)+100>>2]=k;if(n|0){O=+g[n+404>>2];U=k*O*+g[j+((i+1|0)*152|0)+20>>2]*+g[m+(ea*244|0)+116>>2];P=k*O*+g[j+((i+1|0)*152|0)+24>>2]*+g[m+(ea*244|0)+120>>2];g[m+(ea*244|0)+64>>2]=k*O*+g[j+((i+1|0)*152|0)+16>>2]*+g[m+(ea*244|0)+112>>2]+ +g[m+(ea*244|0)+64>>2];g[m+(ea*244|0)+68>>2]=U+ +g[m+(ea*244|0)+68>>2];g[m+(ea*244|0)+72>>2]=P+ +g[m+(ea*244|0)+72>>2];P=k*+g[m+(ea*244|0)+100>>2]*+g[j+((i+1|0)*152|0)+68>>2];U=k*+g[m+(ea*244|0)+104>>2]*+g[j+((i+1|0)*152|0)+72>>2];g[m+(ea*244|0)+80>>2]=k*+g[m+(ea*244|0)+96>>2]*+g[j+((i+1|0)*152|0)+64>>2]+ +g[m+(ea*244|0)+80>>2];g[m+(ea*244|0)+84>>2]=P+ +g[m+(ea*244|0)+84>>2];g[m+(ea*244|0)+88>>2]=U+ +g[m+(ea*244|0)+88>>2]}if(!o)break;K=+g[o+404>>2];N=+g[j+((i+1|0)*152|0)+80>>2];P=+g[j+((i+1|0)*152|0)+84>>2];U=+g[j+((i+1|0)*152|0)+88>>2];O=+g[j+((i+1|0)*152|0)+100>>2];L=+g[j+((i+1|0)*152|0)+52>>2]*K*O*+g[m+(fa*244|0)+116>>2];M=+g[j+((i+1|0)*152|0)+56>>2]*K*O*+g[m+(fa*244|0)+120>>2];g[m+(fa*244|0)+64>>2]=+g[j+((i+1|0)*152|0)+48>>2]*K*O*+g[m+(fa*244|0)+112>>2]+ +g[m+(fa*244|0)+64>>2];g[m+(fa*244|0)+68>>2]=L+ +g[m+(fa*244|0)+68>>2];g[m+(fa*244|0)+72>>2]=M+ +g[m+(fa*244|0)+72>>2];P=P*+g[m+(fa*244|0)+100>>2]*-O;U=U*+g[m+(fa*244|0)+104>>2]*-O;g[m+(fa*244|0)+80>>2]=+g[m+(fa*244|0)+80>>2]-N*+g[m+(fa*244|0)+96>>2]*-O;g[m+(fa*244|0)+84>>2]=+g[m+(fa*244|0)+84>>2]-P;g[m+(fa*244|0)+88>>2]=+g[m+(fa*244|0)+88>>2]-U}while(0);h=c[ba+780>>2]|0}Z=Z+1|0}while((Z|0)<(h|0))}Y=Y+1|0}while((Y|0)!=(e|0));l=ja;return}function ac(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,O=0,P=0,Q=0;L=l;l=l+144|0;switch(d-b|0){case 0:{c[e>>2]=0;c[e+4>>2]=0;c[e+8>>2]=0;c[e+12>>2]=0;l=L;return}case 2:{j=c[(c[a+92>>2]|0)+(b<<2)>>2]|0;h=c[j+88>>2]|0;i=c[j+200>>2]|0;g=c[j+92>>2]|0;f=c[j+204>>2]|0;if((h|0)==(i|0)&(g|0)==(f|0))if((c[j+96>>2]|0)==(c[j+208>>2]|0)){c[j+8>>2]=0;c[j>>2]=j;c[j+4>>2]=j;c[e>>2]=j;c[e+4>>2]=j;c[e+8>>2]=j;c[e+12>>2]=j;l=L;return}else f=g;f=g-f|0;do if(f|h-i){c[j>>2]=j+112;c[j+4>>2]=j+112;c[j+112>>2]=j;c[j+116>>2]=j;K=(h-i|0)<0|(h-i|0)==0&(f|0)<0;c[e>>2]=K?j:j+112|0;c[e+4>>2]=K?j+112|0:j;if((f|0)<0|(h-i|0)<0&(f|0)==0){c[e+8>>2]=j;g=j;h=j+112|0;f=j+112|0;break}else{c[e+8>>2]=j+112;g=j;h=j+112|0;f=j;break}}else{h=(c[j+96>>2]|0)>(c[j+208>>2]|0);f=h?j+112|0:j;c[f>>2]=f;c[f+4>>2]=f;c[e>>2]=f;c[e+4>>2]=f;c[e+8>>2]=f;g=f;h=h?j:j+112|0}while(0);c[e+12>>2]=f;a=af(a,g,h)|0;c[a>>2]=a;c[a+4>>2]=a;c[g+8>>2]=a;a=c[a+8>>2]|0;c[a>>2]=a;c[a+4>>2]=a;c[h+8>>2]=a;l=L;return}case 1:{a=c[(c[a+92>>2]|0)+(b<<2)>>2]|0;c[a+8>>2]=0;c[a>>2]=a;c[a+4>>2]=a;c[e>>2]=a;c[e+4>>2]=a;c[e+8>>2]=a;c[e+12>>2]=a;l=L;return}default:{n=((d-b|0)/2|0)+b|0;m=c[a+92>>2]|0;k=c[m+(n+-1<<2)>>2]|0;i=c[k+88>>2]|0;j=c[k+92>>2]|0;k=c[k+96>>2]|0;a:do if((n|0)<(d|0)){f=n;do{h=c[m+(f<<2)>>2]|0;if((c[h+88>>2]|0)!=(i|0))break a;if((c[h+92>>2]|0)!=(j|0))break a;if((c[h+96>>2]|0)!=(k|0))break a;f=f+1|0}while((f|0)<(d|0))}else f=n;while(0);ac(a,b,n,e);c[L+96>>2]=0;c[L+96+4>>2]=0;c[L+96+8>>2]=0;c[L+96+12>>2]=0;ac(a,f,d,L+96|0);j=c[L+96+4>>2]|0;b:do if(j|0){A=c[e+4>>2]|0;if(!A){c[e>>2]=c[L+96>>2];c[e+4>>2]=c[L+96+4>>2];c[e+8>>2]=c[L+96+8>>2];c[e+12>>2]=c[L+96+12>>2];break}c[a+100>>2]=(c[a+100>>2]|0)+-1;m=c[e+12>>2]|0;h=c[L+96+8>>2]|0;i=c[m+88>>2]|0;c:do if((i|0)==(c[h+88>>2]|0)?(g=c[m+92>>2]|0,(g|0)==(c[h+92>>2]|0)):0){k=c[h+4>>2]|0;if((k|0)==(h|0)){f=c[h+8>>2]|0;if(!f)f=i;else{h=c[f+12>>2]|0;f=c[h+88>>2]|0;g=c[h+92>>2]|0}k=h;d=f+1|0;n=m;o=c[h+96>>2]|0;G=m;break}i=c[h>>2]|0;c[k>>2]=i;c[i+4>>2]=k;if((h|0)==(c[L+96>>2]|0)){f=c[i+88>>2]|0;g=c[k+88>>2]|0;do if((f|0)<(g|0))f=i;else{if((f|0)==(g|0)?(c[i+92>>2]|0)<(c[k+92>>2]|0):0){f=i;break}f=k}while(0);c[L+96>>2]=f}if((h|0)==(j|0)){f=c[i+88>>2]|0;g=c[k+88>>2]|0;do if((f|0)<=(g|0)){if((f|0)==(g|0)?(c[i+92>>2]|0)>(c[k+92>>2]|0):0)break;c[L+96+4>>2]=k;i=k;I=39;break c}while(0);c[L+96+4>>2]=i;I=39}else{i=j;I=39}}else{i=j;I=39}while(0);if((I|0)==39){x=c[e>>2]|0;z=c[L+96>>2]|0;b=A;h=0;H=0;v=1;w=0;n=i;while(1){j=c[n+88>>2]|0;d=c[b+88>>2]|0;g=N(j-d|0,v)|0;d:do if((g|0)<=0){if((g|0)<0){u=(w|0)!=0;k=b;f=n;m=c[b+92>>2]|0;t=c[n+92>>2]|0;while(1){q=c[(u?f+4|0:f)>>2]|0;r=(q|0)==(f|0);s=f+88|0;while(1){b=k+88|0;p=t-m|0;if(!r?(B=c[q+88>>2]|0,C=N(B-j|0,v)|0,D=c[q+92>>2]|0,E=D-t|0,(E|0)>-1):0){if(!C)break;if((C|0)<0?(N(E,g)|0)<=(N(C,p)|0):0)break}o=c[(u?k+4|0:k)>>2]|0;if((o|0)==(k|0))break d;G=c[o+88>>2]|0;d=N(G-(c[b>>2]|0)|0,v)|0;n=c[o+92>>2]|0;m=n-m|0;j=c[s>>2]|0;b=N(j-G|0,v)|0;if(!((m|0)>0&(b|0)<0))break d;if(d|0){if((d|0)>=0)break d;if((N(m,g)|0)>=(N(d,p)|0))break d}k=o;g=b;m=n}f=q;g=N(B-(c[b>>2]|0)|0,v)|0;t=D;j=B}}f=c[b+92>>2]|0;m=(w|0)!=0;g=c[(m?b:b+4|0)>>2]|0;e:do if((g|0)!=(b|0))if(m){j=b;k=f;while(1){if((c[g+88>>2]|0)!=(d|0)){k=j;break e}G=k;k=c[g+92>>2]|0;if((k|0)>(G|0)){k=j;break e}f=c[g>>2]|0;if((f|0)==(b|0)){k=g;break}else{j=g;g=f}}}else{j=b;k=f;while(1){if((c[g+88>>2]|0)!=(d|0)){k=j;break e}G=k;k=c[g+92>>2]|0;if((k|0)>(G|0)){k=j;break e}f=c[g+4>>2]|0;if((f|0)==(b|0)){k=g;break}else{j=g;g=f}}}else k=b;while(0);f=c[n+92>>2]|0;j=c[(m?n+4|0:n)>>2]|0;if((j|0)!=(n|0))if(m){g=f;f=n;while(1){if((c[j+88>>2]|0)!=(d|0))break d;G=g;g=c[j+92>>2]|0;if((g|0)<(G|0))break d;f=c[j+4>>2]|0;if((f|0)==(n|0)){f=j;break}else{G=j;j=f;f=G}}}else{g=f;f=n;while(1){if((c[j+88>>2]|0)!=(d|0))break d;G=g;g=c[j+92>>2]|0;if((g|0)<(G|0))break d;f=c[j>>2]|0;if((f|0)==(n|0)){f=j;break}else{G=j;j=f;f=G}}}else f=n}else{r=(w|0)!=0;j=b;f=n;q=c[n+92>>2]|0;while(1){o=f+88|0;k=j;j=c[j+92>>2]|0;while(1){p=q-j|0;m=c[(r?k:k+4|0)>>2]|0;if((m|0)==(k|0))break;b=c[m+88>>2]|0;d=N(b-(c[k+88>>2]|0)|0,v)|0;n=c[m+92>>2]|0;j=n-j|0;if((j|0)>=1)break;if(d|0){if((d|0)>=0)break;if((N(j,g)|0)>(N(d,p)|0))break}g=N((c[o>>2]|0)-b|0,v)|0;k=m;j=n}n=c[(r?f:f+4|0)>>2]|0;if((n|0)==(f|0))break d;m=c[n+88>>2]|0;b=N(m-(c[o>>2]|0)|0,v)|0;d=c[n+92>>2]|0;j=d-q|0;m=N(m-(c[k+88>>2]|0)|0,v)|0;if(!((j|0)<0&(m|0)>0))break d;if(b|0){if((b|0)>=0)break d;if((N(j,g)|0)>=(N(b,p)|0))break d}g=m;j=k;f=n;q=d}}while(0);g=(w|0)==0;H=g?f:H;h=g?k:h;n=g?z:f;b=g?x:k;w=w+1|0;if((w|0)==2)break;else v=g?-1:v}c[b+4>>2]=n;c[n>>2]=b;c[h>>2]=H;c[H+4>>2]=h;if((c[z+88>>2]|0)<(c[x+88>>2]|0))c[e>>2]=z;if((c[i+88>>2]|0)>=(c[A+88>>2]|0))c[e+4>>2]=i;c[e+12>>2]=c[L+96+12>>2];g=h;k=H;m=H+88|0;v=c[m>>2]|0;q=c[h+88>>2]|0;j=H+92|0;w=c[j>>2]|0;x=c[h+92>>2]|0;i=H+96|0;z=c[i>>2]|0;r=c[h+96>>2]|0;A=((w-x|0)<0)<<31>>31;B=0-(v-q)|0;C=Nt(0,0,B|0,((B|0)<0)<<31>>31|0)|0;C=Iq(C|0,y|0,z-r|0,((z-r|0)<0)<<31>>31|0)|0;D=y;E=Iq(z-r|0,((z-r|0)<0)<<31>>31|0,w-x|0,A|0)|0;e=y;s=Iq(B|0,((B|0)<0)<<31>>31|0,v-q|0,((v-q|0)<0)<<31>>31|0)|0;G=y;F=Iq(w-x|0,A|0,w-x|0,A|0)|0;F=Nt(s|0,G|0,F|0,y|0)|0;G=y;s=c[h+8>>2]|0;c[L+120>>2]=0;if(!s)s=0;else{t=Nt(0,0,w-x|0,A|0)|0;u=y;p=s;f=0;do{n=c[p+12>>2]|0;b=c[n+88>>2]|0;d=c[n+92>>2]|0;n=c[n+96>>2]|0;O=Iq(d-x|0,((d-x|0)<0)<<31>>31|0,B|0,((B|0)<0)<<31>>31|0)|0;o=y;M=Iq(t|0,u|0,b-q|0,((b-q|0)<0)<<31>>31|0)|0;f:do if((O|0)==(M|0)&(o|0)==(y|0)?(M=Iq(C|0,D|0,b-q|0,((b-q|0)<0)<<31>>31|0)|0,o=y,O=Iq(E|0,e|0,d-x|0,((d-x|0)<0)<<31>>31|0)|0,o=_t(O|0,y|0,M|0,o|0)|0,M=y,O=Iq(F|0,G|0,n-r|0,((n-r|0)<0)<<31>>31|0)|0,O=_t(o|0,M|0,O|0,y|0)|0,M=y,(M|0)>0|(M|0)==0&O>>>0>0):0){do if(f|0){o=(c[f+4>>2]|0)==(p|0);if((c[f>>2]|0)!=(p|0))if(o)break;else break f;if(!o)break f;M=c[f+12>>2]|0;P=c[(c[p+8>>2]|0)+12>>2]|0;O=c[P+88>>2]|0;o=c[P+92>>2]|0;P=c[P+96>>2]|0;Q=(c[M+96>>2]|0)-P|0;o=(N(n-P|0,(c[M+92>>2]|0)-o|0)|0)-(N(Q,d-o|0)|0)|0;O=(N(Q,b-O|0)|0)-(N(n-P|0,(c[M+88>>2]|0)-O|0)|0)|0;o=Iq(o|0,((o|0)<0)<<31>>31|0,w-x|0,A|0)|0;M=y;O=Iq(O|0,((O|0)<0)<<31>>31|0,B|0,((B|0)<0)<<31>>31|0)|0;O=_t(o|0,M|0,O|0,y|0)|0;M=y;if((M|0)>0|(M|0)==0&O>>>0>0)break f}while(0);f=p}while(0);p=c[p>>2]|0}while((p|0)!=(s|0));c[L+120>>2]=f;s=f}p=c[H+8>>2]|0;c[L+72>>2]=0;if(!p)f=0;else{q=Nt(0,0,w-x|0,A|0)|0;r=y;o=p;f=0;do{n=c[o+12>>2]|0;b=c[n+88>>2]|0;d=c[n+92>>2]|0;n=c[n+96>>2]|0;O=Iq(d-w|0,((d-w|0)<0)<<31>>31|0,B|0,((B|0)<0)<<31>>31|0)|0;Q=y;P=Iq(q|0,r|0,b-v|0,((b-v|0)<0)<<31>>31|0)|0;do if((O|0)==(P|0)&(Q|0)==(y|0)?(P=Iq(C|0,D|0,b-v|0,((b-v|0)<0)<<31>>31|0)|0,O=y,Q=Iq(E|0,e|0,d-w|0,((d-w|0)<0)<<31>>31|0)|0,O=_t(Q|0,y|0,P|0,O|0)|0,P=y,Q=Iq(F|0,G|0,n-z|0,((n-z|0)<0)<<31>>31|0)|0,Q=_t(O|0,P|0,Q|0,y|0)|0,P=y,(P|0)>0|(P|0)==0&Q>>>0>0):0){if(f|0){if((c[f>>2]|0)!=(o|0))break;if((c[f+4>>2]|0)==(o|0)?(P=c[f+12>>2]|0,M=c[(c[o+8>>2]|0)+12>>2]|0,Q=c[M+88>>2]|0,O=c[M+92>>2]|0,M=c[M+96>>2]|0,u=(c[P+96>>2]|0)-M|0,O=(N(n-M|0,(c[P+92>>2]|0)-O|0)|0)-(N(u,d-O|0)|0)|0,Q=(N(u,b-Q|0)|0)-(N(n-M|0,(c[P+88>>2]|0)-Q|0)|0)|0,O=Iq(O|0,((O|0)<0)<<31>>31|0,w-x|0,A|0)|0,P=y,Q=Iq(Q|0,((Q|0)<0)<<31>>31|0,B|0,((B|0)<0)<<31>>31|0)|0,Q=_t(O|0,P|0,Q|0,y|0)|0,P=y,!((P|0)>0|(P|0)==0&Q>>>0>0)):0)break}f=o}while(0);o=c[o>>2]|0}while((o|0)!=(p|0));c[L+72>>2]=f}if((s|0)!=0|(f|0)!=0){fc(a,h,H,L+120|0,L+72|0);f=c[L+120>>2]|0;if(f){h=c[f+12>>2]|0;g=h}f=c[L+72>>2]|0;if(!f){f=h;h=H}else{Q=c[f+12>>2]|0;k=Q;m=Q+88|0;i=Q+96|0;j=Q+92|0;f=h;h=Q}}else{f=h;h=H}d=c[m>>2]|0;n=g;o=(c[i>>2]|0)+1|0;g=c[j>>2]|0;G=f}e=0;f=0;b=0;A=0;F=1;C=0;D=0;i=0;B=0;z=n;w=h;v=G;while(1){x=c[v+88>>2]|0;H=(c[w+88>>2]|0)-x|0;Q=c[v+92>>2]|0;E=(c[w+92>>2]|0)-Q|0;M=c[v+96>>2]|0;t=(c[w+96>>2]|0)-M|0;c[L+120>>2]=H;c[L+120+4>>2]=E;c[L+120+8>>2]=t;c[L+120+12>>2]=-1;x=d-x|0;Q=g-Q|0;M=o-M|0;u=(N(Q,t)|0)-(N(M,E)|0)|0;M=(N(M,H)|0)-(N(x,t)|0)|0;Q=(N(x,E)|0)-(N(Q,H)|0)|0;c[L+72>>2]=u;c[L+72+4>>2]=((u|0)<0)<<31>>31;c[L+72+8>>2]=M;c[L+72+8+4>>2]=((M|0)<0)<<31>>31;c[L+72+16>>2]=Q;c[L+72+16+4>>2]=((Q|0)<0)<<31>>31;x=Iq(Q|0,((Q|0)<0)<<31>>31|0,E|0,((E|0)<0)<<31>>31|0)|0;P=y;O=Iq(M|0,((M|0)<0)<<31>>31|0,t|0,((t|0)<0)<<31>>31|0)|0;O=Nt(x|0,P|0,O|0,y|0)|0;P=y;t=Iq(u|0,((u|0)<0)<<31>>31|0,t|0,((t|0)<0)<<31>>31|0)|0;x=y;Q=Iq(Q|0,((Q|0)<0)<<31>>31|0,H|0,((H|0)<0)<<31>>31|0)|0;Q=Nt(t|0,x|0,Q|0,y|0)|0;x=y;H=Iq(M|0,((M|0)<0)<<31>>31|0,H|0,((H|0)<0)<<31>>31|0)|0;M=y;E=Iq(u|0,((u|0)<0)<<31>>31|0,E|0,((E|0)<0)<<31>>31|0)|0;E=Nt(H|0,M|0,E|0,y|0)|0;c[L+48>>2]=O;c[L+48+4>>2]=P;c[L+48+8>>2]=Q;c[L+48+8+4>>2]=x;c[L+48+16>>2]=E;c[L+48+16+4>>2]=y;c[L+24>>2]=0;c[L+24+4>>2]=0;c[L+24+8>>2]=0;c[L+24+12>>2]=0;c[L+24+16>>2]=0;E=hd(a,0,v,L+120|0,L+72|0,L+48|0,L+24|0)|0;c[L>>2]=0;c[L+4>>2]=0;c[L+8>>2]=0;c[L+12>>2]=0;c[L+16>>2]=0;x=hd(a,1,w,L+120|0,L+72|0,L+48|0,L)|0;do if((E|0)!=0|(x|0)!=0){j=E|0?-1:1;do if((E|0)!=0&(x|0)!=0){u=c[L+24+16>>2]|0;j=c[L+16>>2]|0;if((u|0)!=(j|0)){p=u-j|0;break}if(!u)p=0;else{Q=c[L+24>>2]|0;s=c[L+24+4>>2]|0;n=c[L+8>>2]|0;O=c[L+8+4>>2]|0;m=Iq(n|0,0,Q|0,0)|0;j=y;Q=Iq(O|0,0,Q|0,0)|0;P=y;n=Iq(n|0,0,s|0,0)|0;p=y;s=Iq(O|0,0,s|0,0)|0;O=y;n=_t(Q|0,0,n|0,0)|0;Q=y;O=_t(P|0,0,s|0,O|0)|0;p=_t(O|0,y|0,p|0,0)|0;Q=_t(p|0,y|0,Q|0,0)|0;p=y;j=_t(0,n|0,m|0,j|0)|0;m=y;n=_t(Q|0,p|0,(m>>>0<n>>>0|(m|0)==(n|0)&j>>>0<0)&1|0,0)|0;p=y;Q=c[L+24+8>>2]|0;O=c[L+24+8+4>>2]|0;s=c[L>>2]|0;P=c[L+4>>2]|0;r=Iq(s|0,0,Q|0,0)|0;q=y;Q=Iq(P|0,0,Q|0,0)|0;M=y;s=Iq(s|0,0,O|0,0)|0;t=y;O=Iq(P|0,0,O|0,0)|0;P=y;s=_t(Q|0,0,s|0,0)|0;Q=y;P=_t(M|0,0,O|0,P|0)|0;t=_t(P|0,y|0,t|0,0)|0;Q=_t(t|0,y|0,Q|0,0)|0;t=y;q=_t(0,s|0,r|0,q|0)|0;r=y;s=_t(Q|0,t|0,(r>>>0<s>>>0|(r|0)==(s|0)&q>>>0<0)&1|0,0)|0;t=y;if(p>>>0<t>>>0|(p|0)==(t|0)&n>>>0<s>>>0)j=-1;else j=p>>>0>t>>>0|(p|0)==(t|0)&n>>>0>s>>>0?1:m>>>0<r>>>0|(m|0)==(r|0)&j>>>0<q>>>0?-1:(m>>>0>r>>>0|(m|0)==(r|0)&j>>>0>q>>>0)&1;p=N(j,u)|0}}else p=j;while(0);do if(!F)if((p|0)>-1)if((c[L+16>>2]|0)<0&((c[L+8>>2]|0)==0?(c[L+8+4>>2]|0)==0:0)){v=A;n=B;w=b;break}else{I=139;break}else if((c[L+24+16>>2]|0)<0&((c[L+24+8>>2]|0)==0?(c[L+24+8+4>>2]|0)==0:0)){v=A;n=B;w=b;break}else{I=139;break}else I=139;while(0);if((I|0)==139){I=0;m=af(a,v,w)|0;if(!A)b=m;else c[A+4>>2]=m;c[m>>2]=A;j=c[m+8>>2]|0;if(!B)i=j;else c[B>>2]=j;c[j+4>>2]=B;v=m;n=j;w=b}c[L+116>>2]=E;c[L+112>>2]=x;if(!p){fc(a,z,k,L+116|0,L+112|0);j=c[L+112>>2]|0}else j=x;if((p|0)>-1&(j|0)!=0){b=(C|0)!=0;if(b?(J=c[C>>2]|0,(J|0)!=(x|0)):0){j=J;do{m=j;j=c[j>>2]|0;d=c[m+8>>2]|0;if((j|0)==(m|0))g=0;else{c[j+4>>2]=c[m+4>>2];c[c[m+4>>2]>>2]=j;g=j}c[(c[d+12>>2]|0)+8>>2]=g;g=c[d>>2]|0;if((g|0)==(d|0)){c[(c[m+12>>2]|0)+8>>2]=0;g=d+4|0}else{c[g+4>>2]=c[d+4>>2];c[c[d+4>>2]>>2]=g;c[(c[m+12>>2]|0)+8>>2]=g;g=d+4|0}c[m+4>>2]=0;c[m+4+4>>2]=0;c[m+4+8>>2]=0;c[m+4+12>>2]=0;c[m>>2]=c[a+56>>2];c[a+56>>2]=m;c[g>>2]=0;c[g+4>>2]=0;c[g+8>>2]=0;c[g+12>>2]=0;c[d>>2]=c[a+56>>2];c[a+56>>2]=d;c[a+116>>2]=(c[a+116>>2]|0)+-1}while((j|0)!=(x|0))}do if(n)if(b){c[C>>2]=i;c[i+4>>2]=C;c[n>>2]=x;c[x+4>>2]=n;g=D;i=0;break}else{g=c[x+4>>2]|0;c[g>>2]=i;c[i+4>>2]=g;c[n>>2]=x;c[x+4>>2]=n;g=i;i=0;break}else g=b?D:x;while(0);Q=k;k=c[L+112>>2]|0;s=c[k+8>>2]|0;q=g;A=0;k=c[k+12>>2]|0;j=c[Q+88>>2]|0;o=c[Q+96>>2]|0;g=c[Q+92>>2]|0}else{s=C;q=D;A=n;j=d}if((p|0)<1&(c[L+116>>2]|0)!=0){b=(e|0)!=0;if(b?(K=c[e+4>>2]|0,(K|0)!=(E|0)):0){j=K;do{d=j+4|0;m=j;j=c[d>>2]|0;g=c[m>>2]|0;n=c[m+8>>2]|0;if((g|0)==(m|0))g=0;else{c[g+4>>2]=j;c[c[d>>2]>>2]=g}c[(c[n+12>>2]|0)+8>>2]=g;g=c[n>>2]|0;if((g|0)==(n|0)){c[(c[m+12>>2]|0)+8>>2]=0;g=n+4|0}else{c[g+4>>2]=c[n+4>>2];c[c[n+4>>2]>>2]=g;c[(c[m+12>>2]|0)+8>>2]=g;g=n+4|0}c[d>>2]=0;c[d+4>>2]=0;c[d+8>>2]=0;c[d+12>>2]=0;c[m>>2]=c[a+56>>2];c[a+56>>2]=m;c[g>>2]=0;c[g+4>>2]=0;c[g+8>>2]=0;c[g+12>>2]=0;c[n>>2]=c[a+56>>2];c[a+56>>2]=n;c[a+116>>2]=(c[a+116>>2]|0)+-1}while((j|0)!=(E|0))}do if(v)if(b){c[w>>2]=e;c[e+4>>2]=w;c[E>>2]=v;c[v+4>>2]=E;g=0;break}else{f=c[E>>2]|0;c[w>>2]=f;c[f+4>>2]=w;c[E>>2]=v;c[v+4>>2]=E;f=w;g=0;break}else{f=b?f:E;g=w}while(0);Q=z;z=c[L+116>>2]|0;r=c[z+8>>2]|0;v=0;w=g;x=c[Q+88>>2]|0;z=c[z+12>>2]|0;o=c[Q+96>>2]|0;g=c[Q+92>>2]|0}else{r=e;x=j}if((G|0)==(z|0)&(h|0)==(k|0)){if(r){p=r+4|0;j=c[p>>2]|0;if((j|0)!=(f|0))do{d=j+4|0;b=j;j=c[d>>2]|0;m=c[b>>2]|0;n=c[b+8>>2]|0;if((m|0)==(b|0))m=0;else{c[m+4>>2]=j;c[c[d>>2]>>2]=m}c[(c[n+12>>2]|0)+8>>2]=m;m=c[n>>2]|0;if((m|0)==(n|0)){c[(c[b+12>>2]|0)+8>>2]=0;m=n+4|0}else{c[m+4>>2]=c[n+4>>2];c[c[n+4>>2]>>2]=m;c[(c[b+12>>2]|0)+8>>2]=m;m=n+4|0}c[d>>2]=0;c[d+4>>2]=0;c[d+8>>2]=0;c[d+12>>2]=0;c[b>>2]=c[a+56>>2];c[a+56>>2]=b;c[m>>2]=0;c[m+4>>2]=0;c[m+8>>2]=0;c[m+12>>2]=0;c[n>>2]=c[a+56>>2];c[a+56>>2]=n;c[a+116>>2]=(c[a+116>>2]|0)+-1}while((j|0)!=(f|0));if(v|0){c[w>>2]=r;c[p>>2]=w;c[f>>2]=v;c[v+4>>2]=f}}else{c[w>>2]=v;c[v+4>>2]=w;c[z+8>>2]=v}if(!s){c[A>>2]=i;c[i+4>>2]=A;c[h+8>>2]=A;u=0;t=F;s=0;n=v;p=A;b=w;m=k;d=x;j=z;break}j=c[s>>2]|0;if((j|0)!=(q|0))do{b=j;j=c[j>>2]|0;d=c[b+8>>2]|0;if((j|0)==(b|0))m=0;else{c[j+4>>2]=c[b+4>>2];c[c[b+4>>2]>>2]=j;m=j}c[(c[d+12>>2]|0)+8>>2]=m;m=c[d>>2]|0;if((m|0)==(d|0)){c[(c[b+12>>2]|0)+8>>2]=0;m=d+4|0}else{c[m+4>>2]=c[d+4>>2];c[c[d+4>>2]>>2]=m;c[(c[b+12>>2]|0)+8>>2]=m;m=d+4|0}c[b+4>>2]=0;c[b+4+4>>2]=0;c[b+4+8>>2]=0;c[b+4+12>>2]=0;c[b>>2]=c[a+56>>2];c[a+56>>2]=b;c[m>>2]=0;c[m+4>>2]=0;c[m+8>>2]=0;c[m+12>>2]=0;c[d>>2]=c[a+56>>2];c[a+56>>2]=d;c[a+116>>2]=(c[a+116>>2]|0)+-1}while((j|0)!=(q|0));if(!A){u=0;t=F;n=v;p=0;b=w;m=k;d=x;j=z}else{c[s>>2]=i;c[i+4>>2]=s;c[A>>2]=q;c[q+4>>2]=A;u=0;t=F;n=v;p=A;b=w;m=k;d=x;j=z}}else{u=1;t=0;n=v;p=A;b=w;m=k;d=x;j=z}}else{u=af(a,v,w)|0;c[u>>2]=u;c[u+4>>2]=u;c[v+8>>2]=u;u=c[u+8>>2]|0;c[u>>2]=u;c[u+4>>2]=u;c[w+8>>2]=u;u=0;t=F;r=e;s=C;n=A;q=D;p=B;m=k;j=z}while(0);if(!u)break b;e=r;A=n;F=t;C=s;D=q;B=p;k=m;z=j;w=m;v=j}}while(0);l=L;return}}}function bc(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var h=0.0,i=0.0,k=0,m=0,n=0.0,o=0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,C=0.0,D=0.0,E=0,F=0,G=0,H=0,I=0,K=0.0,L=0.0,M=0.0,O=0.0,P=0,Q=0,R=0,S=0,T=0.0,U=0.0,V=0.0,W=0.0,X=0.0,Y=0.0,Z=0.0,_=0.0,$=0.0,aa=0.0,ba=0,ca=0.0,da=0.0,ea=0.0,fa=0,ga=0.0,ha=0.0,ia=0.0,ja=0.0,ka=0.0,la=0.0,ma=0.0,na=0.0,oa=0.0,pa=0.0,qa=0.0,ra=0.0,sa=0.0,ta=0.0,ua=0.0,va=0.0,wa=0.0,xa=0.0,ya=0.0,za=0.0,Aa=0.0,Ba=0.0,Ca=0,Da=0,Ea=0;Ea=l;l=l+480|0;c[Ea+48>>2]=c[b>>2];c[Ea>>2]=c[b+64>>2];f=Ea+48+4|0;c[f>>2]=c[b+4>>2];c[Ea+4>>2]=c[b+68>>2];e=Ea+48+8|0;c[e>>2]=c[b+8>>2];c[Ea+8>>2]=c[b+72>>2];F=Ea+48+16|0;c[F>>2]=c[b+16>>2];c[Ea+16>>2]=c[b+80>>2];k=Ea+48+20|0;c[k>>2]=c[b+20>>2];c[Ea+20>>2]=c[b+84>>2];o=Ea+48+24|0;c[o>>2]=c[b+24>>2];c[Ea+24>>2]=c[b+88>>2];E=Ea+48+32|0;c[E>>2]=c[b+32>>2];c[Ea+32>>2]=c[b+96>>2];R=Ea+48+36|0;c[R>>2]=c[b+36>>2];c[Ea+36>>2]=c[b+100>>2];m=Ea+48+40|0;c[m>>2]=c[b+40>>2];c[Ea+40>>2]=c[b+104>>2];Da=c[a+4>>2]|0;ta=+g[Da+32>>2];ua=+g[Da+36>>2];xa=+g[Da+40>>2];va=+ib[c[(c[Da>>2]|0)+48>>2]&15](Da);wa=+ib[c[(c[Da>>2]|0)+48>>2]&15](Da);xa=(xa+ +ib[c[(c[Da>>2]|0)+48>>2]&15](Da))*2.0;Da=c[a+8>>2]|0;ya=+g[Da+32>>2];za=+g[Da+36>>2];W=+g[Da+40>>2];Aa=+ib[c[(c[Da>>2]|0)+48>>2]&15](Da);Ba=+ib[c[(c[Da>>2]|0)+48>>2]&15](Da);W=(W+ +ib[c[(c[Da>>2]|0)+48>>2]&15](Da))*2.0;ca=+g[b+112>>2]-+g[b+48>>2];da=+g[b+116>>2]-+g[b+52>>2];ea=+g[b+120>>2]-+g[b+56>>2];sa=+g[Ea+48>>2];pa=+g[F>>2];qa=+g[E>>2];ma=+g[f>>2];ka=+g[k>>2];la=+g[R>>2];L=+g[e>>2];D=+g[o>>2];K=+g[m>>2];g[Ea+468>>2]=(ta+va)*2.0*.5;g[Ea+468+4>>2]=(ua+wa)*2.0*.5;g[Ea+468+8>>2]=xa*.5;g[Ea+456>>2]=(ya+Aa)*2.0*.5;g[Ea+456+4>>2]=(za+Ba)*2.0*.5;g[Ea+456+8>>2]=W*.5;V=+g[Ea>>2];T=+g[Ea+16>>2];U=+g[Ea+32>>2];aa=+g[Ea+4>>2];_=+g[Ea+20>>2];$=+g[Ea+36>>2];ra=+g[Ea+8>>2];na=+g[Ea+24>>2];oa=+g[Ea+40>>2];M=+A(+(sa*V+pa*T+qa*U));X=+A(+(sa*aa+pa*_+qa*$));ga=+A(+(sa*ra+pa*na+qa*oa));O=+A(+(ma*V+ka*T+la*U));Y=+A(+(ma*aa+ka*_+la*$));ha=+A(+(ma*ra+ka*na+la*oa));ia=+A(+(L*V+D*T+K*U));ja=+A(+(L*aa+D*_+K*$));Z=+A(+(L*ra+D*na+K*oa));p=+A(+(ca*sa+da*pa+ea*qa))-((ta+va)*2.0*.5+(ya+Aa)*2.0*.5*M+(za+Ba)*2.0*.5*X+W*.5*ga);if(p>0.0){l=Ea;return}if(p>-3402823466385288598117041.0e14){G=Ea+48|0;a=1;H=ca*sa+da*pa+ea*qa<0.0&1}else{G=0;a=0;H=0;p=-3402823466385288598117041.0e14}h=+A(+(ca*ma+da*ka+ea*la))-((ua+wa)*2.0*.5+(ya+Aa)*2.0*.5*O+(za+Ba)*2.0*.5*Y+W*.5*ha);if(h>0.0){l=Ea;return}if(h>p){G=f;a=2;H=ca*ma+da*ka+ea*la<0.0&1;p=h}h=+A(+(ca*L+da*D+ea*K))-(xa*.5+(ya+Aa)*2.0*.5*ia+(za+Ba)*2.0*.5*ja+W*.5*Z);if(h>0.0){l=Ea;return}if(h>p){G=e;a=3;H=ca*L+da*D+ea*K<0.0&1;p=h}h=+A(+(ca*V+da*T+ea*U))-((ya+Aa)*2.0*.5+(xa*.5*ia+((ta+va)*2.0*.5*M+(ua+wa)*2.0*.5*O)));if(h>0.0){l=Ea;return}if(h>p){G=Ea;a=4;H=ca*V+da*T+ea*U<0.0&1;p=h}h=+A(+(ca*aa+da*_+ea*$))-((za+Ba)*2.0*.5+(xa*.5*ja+((ta+va)*2.0*.5*X+(ua+wa)*2.0*.5*Y)));if(h>0.0){l=Ea;return}if(h>p){G=Ea+4|0;a=5;H=ca*aa+da*_+ea*$<0.0&1;p=h}h=+A(+(ca*ra+da*na+ea*oa))-(W*.5+(xa*.5*Z+((ta+va)*2.0*.5*ga+(ua+wa)*2.0*.5*ha)));if(h>0.0){l=Ea;return}if(h>p){G=Ea+8|0;a=6;H=ca*ra+da*na+ea*oa<0.0&1;p=h}h=(ca*L+da*D+ea*K)*(ma*V+ka*T+la*U)-(ca*ma+da*ka+ea*la)*(L*V+D*T+K*U);i=+A(+h)-(W*.5*(X+9.999999747378752e-06)+((ua+wa)*2.0*.5*(ia+9.999999747378752e-06)+xa*.5*(O+9.999999747378752e-06)+(za+Ba)*2.0*.5*(ga+9.999999747378752e-06)));if(i>1.1920928955078125e-07){l=Ea;return}t=(L*V+D*T+K*U)*(L*V+D*T+K*U)+0.0;y=(ma*V+ka*T+la*U)*(ma*V+ka*T+la*U);q=+B(+(y+t));if(q>1.1920928955078125e-07?i/q*1.0499999523162842>p:0){G=0;a=7;H=h<0.0&1;p=i/q;n=0.0/q;i=-(L*V+D*T+K*U)/q;h=(ma*V+ka*T+la*U)/q}else{n=0.0;i=0.0;h=0.0}q=(ca*L+da*D+ea*K)*(ma*aa+ka*_+la*$)-(ca*ma+da*ka+ea*la)*(L*aa+D*_+K*$);r=+A(+q)-(W*.5*(M+9.999999747378752e-06)+((ua+wa)*2.0*.5*(ja+9.999999747378752e-06)+xa*.5*(Y+9.999999747378752e-06)+(ya+Aa)*2.0*.5*(ga+9.999999747378752e-06)));if(r>1.1920928955078125e-07){l=Ea;return}u=(L*aa+D*_+K*$)*(L*aa+D*_+K*$)+0.0;z=(ma*aa+ka*_+la*$)*(ma*aa+ka*_+la*$);s=+B(+(z+u));if(s>1.1920928955078125e-07?r/s*1.0499999523162842>p:0){G=0;a=8;H=q<0.0&1;p=r/s;n=0.0/s;i=-(L*aa+D*_+K*$)/s;h=(ma*aa+ka*_+la*$)/s}q=(ca*L+da*D+ea*K)*(ma*ra+ka*na+la*oa)-(ca*ma+da*ka+ea*la)*(L*ra+D*na+K*oa);r=+A(+q)-((za+Ba)*2.0*.5*(M+9.999999747378752e-06)+((ya+Aa)*2.0*.5*(X+9.999999747378752e-06)+((ua+wa)*2.0*.5*(Z+9.999999747378752e-06)+xa*.5*(ha+9.999999747378752e-06))));if(r>1.1920928955078125e-07){l=Ea;return}w=(L*ra+D*na+K*oa)*(L*ra+D*na+K*oa)+0.0;C=(ma*ra+ka*na+la*oa)*(ma*ra+ka*na+la*oa);s=+B(+(C+w));if(s>1.1920928955078125e-07?r/s*1.0499999523162842>p:0){G=0;a=9;H=q<0.0&1;p=r/s;n=0.0/s;i=-(L*ra+D*na+K*oa)/s;h=(ma*ra+ka*na+la*oa)/s}q=(ca*sa+da*pa+ea*qa)*(L*V+D*T+K*U)-(ca*L+da*D+ea*K)*(sa*V+pa*T+qa*U);r=+A(+q)-(W*.5*(Y+9.999999747378752e-06)+((ta+va)*2.0*.5*(ia+9.999999747378752e-06)+xa*.5*(M+9.999999747378752e-06)+(za+Ba)*2.0*.5*(ha+9.999999747378752e-06)));if(r>1.1920928955078125e-07){l=Ea;return}x=(sa*V+pa*T+qa*U)*(sa*V+pa*T+qa*U);s=+B(+(x+t));do if(s>1.1920928955078125e-07){if(!(r/s*1.0499999523162842>p))break;G=0;a=10;H=q<0.0&1;p=r/s;n=(L*V+D*T+K*U)/s;i=0.0/s;h=-(sa*V+pa*T+qa*U)/s}while(0);q=(ca*sa+da*pa+ea*qa)*(L*aa+D*_+K*$)-(ca*L+da*D+ea*K)*(sa*aa+pa*_+qa*$);r=+A(+q)-(W*.5*(O+9.999999747378752e-06)+((ta+va)*2.0*.5*(ja+9.999999747378752e-06)+xa*.5*(X+9.999999747378752e-06)+(ya+Aa)*2.0*.5*(ha+9.999999747378752e-06)));if(r>1.1920928955078125e-07){l=Ea;return}v=(sa*aa+pa*_+qa*$)*(sa*aa+pa*_+qa*$);s=+B(+(v+u));do if(s>1.1920928955078125e-07){if(!(r/s*1.0499999523162842>p))break;G=0;a=11;H=q<0.0&1;p=r/s;n=(L*aa+D*_+K*$)/s;i=0.0/s;h=-(sa*aa+pa*_+qa*$)/s}while(0);q=(ca*sa+da*pa+ea*qa)*(L*ra+D*na+K*oa)-(ca*L+da*D+ea*K)*(sa*ra+pa*na+qa*oa);r=+A(+q)-((za+Ba)*2.0*.5*(O+9.999999747378752e-06)+((ya+Aa)*2.0*.5*(Y+9.999999747378752e-06)+((ta+va)*2.0*.5*(Z+9.999999747378752e-06)+xa*.5*(ga+9.999999747378752e-06))));if(r>1.1920928955078125e-07){l=Ea;return}t=(sa*ra+pa*na+qa*oa)*(sa*ra+pa*na+qa*oa);s=+B(+(t+w));do if(s>1.1920928955078125e-07){if(!(r/s*1.0499999523162842>p))break;G=0;a=12;H=q<0.0&1;p=r/s;n=(L*ra+D*na+K*oa)/s;i=0.0/s;h=-(sa*ra+pa*na+qa*oa)/s}while(0);r=(ca*ma+da*ka+ea*la)*(sa*V+pa*T+qa*U)-(ca*sa+da*pa+ea*qa)*(ma*V+ka*T+la*U);q=+A(+r)-(W*.5*(ja+9.999999747378752e-06)+((ta+va)*2.0*.5*(O+9.999999747378752e-06)+(ua+wa)*2.0*.5*(M+9.999999747378752e-06)+(za+Ba)*2.0*.5*(Z+9.999999747378752e-06)));if(q>1.1920928955078125e-07){l=Ea;return}s=+B(+(y+x+0.0));do if(s>1.1920928955078125e-07){if(!(q/s*1.0499999523162842>p))break;G=0;a=13;H=r<0.0&1;p=q/s;n=-(ma*V+ka*T+la*U)/s;i=(sa*V+pa*T+qa*U)/s;h=0.0/s}while(0);s=(ca*ma+da*ka+ea*la)*(sa*aa+pa*_+qa*$)-(ca*sa+da*pa+ea*qa)*(ma*aa+ka*_+la*$);q=+A(+s)-(W*.5*(ia+9.999999747378752e-06)+((ta+va)*2.0*.5*(Y+9.999999747378752e-06)+(ua+wa)*2.0*.5*(X+9.999999747378752e-06)+(ya+Aa)*2.0*.5*(Z+9.999999747378752e-06)));if(q>1.1920928955078125e-07){l=Ea;return}r=+B(+(z+v+0.0));do if(r>1.1920928955078125e-07){if(!(q/r*1.0499999523162842>p))break;G=0;a=14;H=s<0.0&1;p=q/r;n=-(ma*aa+ka*_+la*$)/r;i=(sa*aa+pa*_+qa*$)/r;h=0.0/r}while(0);s=(ca*ma+da*ka+ea*la)*(sa*ra+pa*na+qa*oa)-(ca*sa+da*pa+ea*qa)*(ma*ra+ka*na+la*oa);q=+A(+s)-((za+Ba)*2.0*.5*(ia+9.999999747378752e-06)+((ya+Aa)*2.0*.5*(ja+9.999999747378752e-06)+((ta+va)*2.0*.5*(ha+9.999999747378752e-06)+(ua+wa)*2.0*.5*(ga+9.999999747378752e-06))));if(q>1.1920928955078125e-07){l=Ea;return}r=+B(+(C+t+0.0));do if(r>1.1920928955078125e-07){if(!(q/r*1.0499999523162842>p)){P=55;break}a=15;H=s<0.0&1;p=q/r;n=-(ma*ra+ka*na+la*oa)/r;i=(sa*ra+pa*na+qa*oa)/r;h=0.0/r;P=58}else P=55;while(0);do if((P|0)==55){if(!a){l=Ea;return}if(!G){P=58;break}Ca=c[G>>2]|0;I=c[G+16>>2]|0;Da=c[G+32>>2]|0;h=(c[j>>2]=Ca,+g[j>>2]);i=(c[j>>2]=I,+g[j>>2]);Q=a;O=p;a=Ca;G=I;I=Da;n=(c[j>>2]=Da,+g[j>>2])}while(0);if((P|0)==58){ra=sa*n+i*+g[f>>2]+h*+g[e>>2];I=(g[j>>2]=ra,c[j>>2]|0);sa=n*+g[F>>2]+i*+g[k>>2]+h*+g[o>>2];G=(g[j>>2]=sa,c[j>>2]|0);n=n*+g[E>>2]+i*+g[R>>2]+h*+g[m>>2];Q=a;O=p;a=I;I=(g[j>>2]=n,c[j>>2]|0);h=ra;i=sa}if(H){a=(g[j>>2]=-h,c[j>>2]|0);G=(g[j>>2]=-i,c[j>>2]|0);I=(g[j>>2]=-n,c[j>>2]|0)}if((Q|0)>6){M=(c[j>>2]=a,+g[j>>2]);L=(c[j>>2]=G,+g[j>>2]);K=(c[j>>2]=I,+g[j>>2]);u=+g[Ea+48>>2];w=+g[F>>2];q=+g[E>>2];h=(u*M+w*L+q*K>0.0?1.0:-1.0)*(ta+va)*2.0*.5;i=+g[f>>2];v=+g[k>>2];t=+g[R>>2];y=(i*M+v*L+t*K>0.0?1.0:-1.0)*(ua+wa)*2.0*.5;z=+g[e>>2];C=+g[o>>2];D=+g[m>>2];n=(z*M+C*L+D*K>0.0?1.0:-1.0)*xa*.5;z=+g[b+48>>2]+h*u+y*i+n*z;C=+g[b+52>>2]+h*w+y*v+n*C;D=+g[b+56>>2]+h*q+y*t+n*D;c[Ea+352>>2]=c[b+112>>2];c[Ea+352+4>>2]=c[b+112+4>>2];c[Ea+352+8>>2]=c[b+112+8>>2];n=+g[Ea>>2];t=+g[Ea+16>>2];y=+g[Ea+32>>2];q=(n*M+t*L+y*K>0.0?-1.0:1.0)*(ya+Aa)*2.0*.5;h=+g[Ea+4>>2];v=+g[Ea+20>>2];w=+g[Ea+36>>2];i=(h*M+v*L+w*K>0.0?-1.0:1.0)*(za+Ba)*2.0*.5;v=+g[Ea+352+4>>2]+q*t+i*v;w=+g[Ea+352+8>>2]+q*y+i*w;y=+g[Ea+8>>2];t=+g[Ea+24>>2];u=+g[Ea+40>>2];x=(y*M+t*L+u*K>0.0?-1.0:1.0)*+g[Ea+456+8>>2];y=+g[Ea+352>>2]+q*n+i*h+x*y;g[Ea+352>>2]=y;g[Ea+352+4>>2]=v+x*t;g[Ea+352+8>>2]=w+x*u;Da=Q+-7|0;h=+g[Ea+48+(((Da|0)/3|0)<<2)>>2];i=+g[Ea+48+(((Da|0)/3|0)+4<<2)>>2];n=+g[Ea+48+(((Da|0)/3|0)+8<<2)>>2];Da=Da+(N((Da|0)/3|0,-3)|0)|0;q=+g[Ea+(Da<<2)>>2];r=+g[Ea+(Da+4<<2)>>2];s=+g[Ea+(Da+8<<2)>>2];p=1.0-(h*q+i*r+n*s)*(h*q+i*r+n*s);if(!(p<=9.999999747378752e-05))h=(((y-z)*h+(v+x*t-C)*i+(w+x*u-D)*n)*(h*q+i*r+n*s)-((y-z)*q+(v+x*t-C)*r+(w+x*u-D)*s))*(1.0/p);else h=0.0;g[Ea+352>>2]=y+h*q;g[Ea+352+4>>2]=v+x*t+h*r;g[Ea+352+8>>2]=w+x*u+h*s;Da=c[(c[d>>2]|0)+16>>2]|0;g[Ea+320>>2]=-M;g[Ea+320+4>>2]=-L;g[Ea+320+8>>2]=-K;g[Ea+320+12>>2]=0.0;Nb[Da&15](d,Ea+320|0,Ea+352|0,O);l=Ea;return}Ca=(Q|0)<4;ga=(c[j>>2]=a,+g[j>>2]);if(Ca){da=(c[j>>2]=G,+g[j>>2]);P=Ea+456|0;ba=Ea+468|0;H=b+112|0;Da=b+48|0;F=Ea+16|0;E=Ea+32|0;fa=Ea;b=Ea+48|0;o=Ea+24|0;m=Ea+40|0;k=Ea+20|0;a=Ea+36|0;f=Ea+4|0;e=Ea+8|0;ca=ga;ea=(c[j>>2]=I,+g[j>>2])}else{da=-(c[j>>2]=G,+g[j>>2]);P=Ea+468|0;ba=Ea+456|0;H=b+48|0;Da=b+112|0;fa=Ea+48|0;b=Ea;a=R;ca=-ga;ea=-(c[j>>2]=I,+g[j>>2])}w=ca*+g[fa>>2]+da*+g[F>>2]+ea*+g[E>>2];g[Ea+440>>2]=w;x=ca*+g[f>>2]+da*+g[k>>2]+ea*+g[a>>2];g[Ea+440+4>>2]=x;y=ca*+g[e>>2]+da*+g[o>>2]+ea*+g[m>>2];g[Ea+440+8>>2]=y;w=+A(+w);x=+A(+x);y=+A(+y);e=x>w?(x>y?1:2):w>y?0:2;S=(x>w?x>y:w>y)?2:1;n=+g[P+(e<<2)>>2];h=+g[H>>2]-+g[Da>>2];i=n*+g[fa+(e<<2)>>2];if(+g[Ea+440+(e<<2)>>2]<0.0){aa=+g[H+8>>2]-+g[Da+8>>2]+n*+g[fa+((e|8)<<2)>>2];$=h+i;_=+g[H+4>>2]-+g[Da+4>>2]+n*+g[fa+((e|4)<<2)>>2]}else{aa=+g[H+8>>2]-+g[Da+8>>2]-n*+g[fa+((e|8)<<2)>>2];$=h-i;_=+g[H+4>>2]-+g[Da+4>>2]-n*+g[fa+((e|4)<<2)>>2]}Q=(Ca?-1:-4)+Q|0;switch(Q|0){case 0:{f=2;e=1;break}case 1:{f=2;e=0;break}default:{f=1;e=0}}R=b+(e<<2)|0;Y=+g[R>>2];W=+g[R+16>>2];X=+g[R+32>>2];Z=$*Y+_*W+aa*X;b=b+(f<<2)|0;O=+g[b>>2];z=+g[b+16>>2];C=+g[b+32>>2];V=$*O+_*z+aa*C;b=fa+((w>y&(x>w^1)&1)<<2)|0;U=+g[b>>2];L=+g[b+16>>2];M=+g[b+32>>2];R=fa+(S<<2)|0;T=+g[R>>2];D=+g[R+16>>2];K=+g[R+32>>2];v=+g[P+((w>y&(x>w^1)&1)<<2)>>2];u=+g[P+(S<<2)>>2];t=(Y*T+W*D+X*K)*u;u=(O*T+z*D+C*K)*u;r=Z-(Y*U+W*L+X*M)*v-t;s=V-(O*U+z*L+C*M)*v-u;h=Z-(Y*U+W*L+X*M)*v+t;g[Ea+416>>2]=h;n=V-(O*U+z*L+C*M)*v+u;p=Z+(Y*U+W*L+X*M)*v+t;q=V+(O*U+z*L+C*M)*v+u;t=Z+(Y*U+W*L+X*M)*v-t;u=V+(O*U+z*L+C*M)*v-u;F=c[ba+(e<<2)>>2]|0;H=c[ba+(f<<2)>>2]|0;v=(c[j>>2]=F,+g[j>>2]);do if(!(v>-r))if(v>-h){f=Ea+256|0;e=1;a=1;i=-h;P=78}else{f=Ea+256|0;e=0;i=-h;P=153}else{g[Ea+256>>2]=r;g[Ea+256+4>>2]=s;if(!(v>-h)){f=Ea+256+8|0;e=2;a=v>-h;i=-h;P=78;break}g[Ea+256+8>>2]=h;g[Ea+256+8+4>>2]=n;f=Ea+256+8|0;e=2;P=152}while(0);do if((P|0)==78){g[f+4>>2]=s+(-v-r)*((n-s)/(h-r));g[f>>2]=-v;f=f+8|0;if(!a){P=153;break}g[f>>2]=h;g[f+4>>2]=n;if(!(e+1&8)){e=e+1|0;P=152}else{e=e+1|0;P=102}}while(0);if((P|0)==152){h=+g[Ea+416>>2];f=f+8|0;i=-h;P=153}a:do if((P|0)==153){if(i<v^v>-p){g[f+4>>2]=n+(-v-h)*((q-n)/(p-h));g[f>>2]=-v;e=e+1|0;if(!(e&8))f=f+8|0;else{P=102;break}}if(v>-p){g[f>>2]=p;g[f+4>>2]=q;e=e+1|0;if(e&8|0){P=102;break}f=f+8|0;if(v>-p^v>-t){a=v>-t;P=159}else{a=v>-t;P=161}}else if(v>-p^v>-t){a=v>-t;P=159}else{a=v>-t;P=161}if((P|0)==159){g[f+4>>2]=q+(-v-p)*((u-q)/(t-p));g[f>>2]=-v;e=e+1|0;if(e&8|0){P=102;break}f=f+8|0;if(a)P=162;else P=163}else if((P|0)==161)if(a)P=162;else P=163;do if((P|0)==162){g[f>>2]=t;g[f+4>>2]=u;e=e+1|0;if(e&8|0){P=102;break a}if(a^v>-r){f=f+8|0;P=165}else P=167}else if((P|0)==163){if(v>-r){P=165;break}if((e|0)>0)P=167;else{e=0;P=79}}while(0);if((P|0)==165){g[f+4>>2]=u+(-v-t)*((s-u)/(r-t));g[f>>2]=-v;e=e+1|0;if(!(e&8))P=167;else{P=102;break}}b:do if((P|0)==167){a=Ea+352|0;E=Ea+256|0;f=0;while(1){h=+g[E>>2];if(h<v){g[a>>2]=h;c[a+4>>2]=c[E+4>>2];f=f+1|0;if(f&8|0){e=f;P=79;break b}a=a+8|0;h=+g[E>>2]}o=(e|0)>1;k=E;E=E+8|0;m=o?E:Ea+256|0;i=+g[m>>2];if(h<v^i<v){Ba=+g[k+4>>2];g[a+4>>2]=Ba+(v-h)*((+g[m+4>>2]-Ba)/(i-h));c[a>>2]=F;f=f+1|0;if(!(f&8))a=a+8|0;else{e=f;P=79;break b}}if(!o)break;else e=e+-1|0}if((f|0)<=0){e=0;P=79;break}p=(c[j>>2]=H,+g[j>>2]);a=Ea+256|0;E=Ea+352|0;e=0;while(1){k=E+4|0;h=+g[k>>2];if(p>-h){c[a>>2]=c[E>>2];c[a+4>>2]=c[k>>2];e=e+1|0;if(e&8|0)break b;h=+g[k>>2];a=a+8|0;n=-h}else n=-h;o=(f|0)>1;k=E;E=E+8|0;m=o?E:Ea+352|0;i=+g[m+4>>2];if(n<p^p>-i){Ba=+g[k>>2];g[a>>2]=Ba+(-p-h)*((+g[m>>2]-Ba)/(i-h));g[a+4>>2]=-p;e=e+1|0;if(!(e&8))a=a+8|0;else break b}if(!o)break;else f=f+-1|0}if((e|0)<=0){e=0;P=79;break}o=e;f=Ea+352|0;E=Ea+256|0;e=0;while(1){a=E+4|0;h=+g[a>>2];if(h<p){c[f>>2]=c[E>>2];c[f+4>>2]=c[a>>2];e=e+1|0;if(e&8|0){P=79;break b}f=f+8|0;h=+g[a>>2]}m=(o|0)>1;a=E;E=E+8|0;k=m?E:Ea+256|0;i=+g[k+4>>2];if(h<p^i<p){Ba=+g[a>>2];g[f>>2]=Ba+(p-h)*((+g[k>>2]-Ba)/(i-h));c[f+4>>2]=H;e=e+1|0;if(!(e&8))f=f+8|0;else{P=79;break b}}if(!m){P=79;break}else o=o+-1|0}}while(0);if((P|0)==79)$g(Ea+256|0,Ea+352|0,e<<3|0)|0;if((e|0)>=1)P=104}while(0);if((P|0)==102)P=104;if((P|0)==104){v=1.0/((Y*U+W*L+X*M)*(O*T+z*D+C*K)-(O*U+z*L+C*M)*(Y*T+W*D+X*K));u=+g[ba+(Q<<2)>>2];t=+g[b>>2];q=+g[R>>2];r=+g[fa+((w>y&(x>w^1)&1|4)<<2)>>2];s=+g[fa+((S|4)<<2)>>2];p=+g[fa+((w>y&(x>w^1)&1|8)<<2)>>2];n=+g[fa+((S|8)<<2)>>2];o=0;a=0;do{f=a<<1;h=+g[Ea+256+(f<<2)>>2];i=+g[Ea+256+((f|1)<<2)>>2];ya=(O*T+z*D+C*K)*v*(h-Z)-(Y*T+W*D+X*K)*v*(i-V);Ba=(Y*U+W*L+X*M)*v*(i-V)-(O*U+z*L+C*M)*v*(h-Z);f=o*3|0;za=$+ya*t+Ba*q;g[Ea+160+(f<<2)>>2]=za;Aa=_+ya*r+Ba*s;g[Ea+160+(f+1<<2)>>2]=Aa;Ba=aa+ya*p+Ba*n;g[Ea+160+(f+2<<2)>>2]=Ba;Ba=u-(ca*za+da*Aa+ea*Ba);g[Ea+128+(o<<2)>>2]=Ba;f=o<<1;if(Ba>=0.0){g[Ea+256+(f<<2)>>2]=h;g[Ea+256+((f|1)<<2)>>2]=i;o=o+1|0}a=a+1|0}while((a|0)!=(e|0));c:do if((o|0)>=1){E=(o|0)<4?o:4;F=(E|0)>1?E:1;if((o|0)<=(F|0))if(Ca){f=Da+4|0;a=Da+8|0;i=-(c[j>>2]=G,+g[j>>2]);h=-(c[j>>2]=I,+g[j>>2]);e=0;while(1){Ca=e*3|0;g[Ea+352>>2]=+g[Ea+160+(Ca<<2)>>2]+ +g[Da>>2];g[Ea+352+4>>2]=+g[Ea+160+(Ca+1<<2)>>2]+ +g[f>>2];g[Ea+352+8>>2]=+g[Ea+160+(Ca+2<<2)>>2]+ +g[a>>2];Ca=c[(c[d>>2]|0)+16>>2]|0;g[Ea+320>>2]=-ga;g[Ea+320+4>>2]=i;g[Ea+320+8>>2]=h;g[Ea+320+12>>2]=0.0;Nb[Ca&15](d,Ea+320|0,Ea+352|0,-+g[Ea+128+(e<<2)>>2]);e=e+1|0;if((e|0)==(o|0))break c}}else{f=Da+4|0;a=Da+8|0;i=(c[j>>2]=G,+g[j>>2]);h=(c[j>>2]=I,+g[j>>2]);e=0;while(1){Ca=e*3|0;Ba=+g[Ea+128+(e<<2)>>2];g[Ea+352>>2]=+g[Ea+160+(Ca<<2)>>2]+ +g[Da>>2]-Ba*ga;g[Ea+352+4>>2]=+g[Ea+160+(Ca+1<<2)>>2]+ +g[f>>2]-Ba*i;g[Ea+352+8>>2]=+g[Ea+160+(Ca+2<<2)>>2]+ +g[a>>2]-Ba*h;Ca=c[(c[d>>2]|0)+16>>2]|0;g[Ea+320>>2]=-ga;g[Ea+320+4>>2]=-i;g[Ea+320+8>>2]=-h;g[Ea+320+12>>2]=0.0;Nb[Ca&15](d,Ea+320|0,Ea+352|0,-Ba);e=e+1|0;if((e|0)==(o|0))break c}}d:do if((o|0)>1){h=+g[Ea+128>>2];e=0;f=1;while(1){i=+g[Ea+128+(f<<2)>>2];a=i>h;e=a?f:e;f=f+1|0;if((f|0)==(o|0))break;else h=a?i:h}switch(o|0){case 1:{f=1;a=Ea+96|0;k=Ea+96|0;P=120;break d}case 2:{h=(+g[Ea+256+4>>2]+ +g[Ea+256+12>>2])*.5;i=(+g[Ea+256>>2]+ +g[Ea+256+8>>2])*.5;f=2;a=Ea+96|0;k=Ea+96|0;P=124;break d}default:{}}a=o+-1|0;s=0.0;t=0.0;h=0.0;f=0;do{fa=f<<1;ya=+g[Ea+256+(fa<<2)>>2];za=+g[Ea+256+(fa+3<<2)>>2];Aa=+g[Ea+256+(fa+2<<2)>>2];Ba=+g[Ea+256+((fa|1)<<2)>>2];h=h+(ya*za-Aa*Ba);t=t+(ya+Aa)*(ya*za-Aa*Ba);s=s+(za+Ba)*(ya*za-Aa*Ba);f=f+1|0}while((f|0)!=(a|0));fa=o<<1;n=+g[Ea+256+(fa+-2<<2)>>2];p=+g[Ea+256+4>>2];q=+g[Ea+256>>2];r=+g[Ea+256+(fa+-1<<2)>>2];i=h+(n*p-q*r);fa=+A(+i)>1.1920928955078125e-07;i=fa?1.0/(i*3.0):999999984306749440.0;if((o|0)>0){h=(s+(p+r)*(n*p-q*r))*i;i=(t+(n+q)*(n*p-q*r))*i;a=Ea+96|0;k=Ea+96|0;m=Ea+352|0;P=127;break}m=e;e=Ea+96|0;f=0}else{e=0;f=o;a=Ea+96|0;k=Ea+96|0;P=120}while(0);if((P|0)==120){h=+g[Ea+256+4>>2];i=+g[Ea+256>>2];P=124}if((P|0)==124){o=f;m=Ea+352|0;P=127}if((P|0)==127){f=0;do{fa=f<<1;g[Ea+352+(f<<2)>>2]=+J(+(+g[Ea+256+((fa|1)<<2)>>2]-h),+(+g[Ea+256+(fa<<2)>>2]-i));f=f+1|0}while((f|0)!=(o|0));f=0;do{c[Ea+320+(f<<2)>>2]=1;f=f+1|0}while((f|0)!=(o|0));m=e;e=a;f=1}a=Ea+320+(m<<2)|0;c[a>>2]=0;c[e>>2]=m;e:do if((E|0)>1){p=+g[Ea+352+(m<<2)>>2];if(!f){e=1;f=Ea+96+4|0;while(1){c[f>>2]=m;c[a>>2]=0;e=e+1|0;if((e|0)==(F|0))break e;else f=f+4|0}}f=1;a=Ea+96+4|0;while(1){n=6.2831854820251465/+(F|0)*+(f|0)+p;n=n>3.1415927410125732?n+-6.2831854820251465:n;c[a>>2]=m;i=1.0e9;k=0;e=m;while(1){do if(!(c[Ea+320+(k<<2)>>2]|0))h=i;else{h=+A(+(+g[Ea+352+(k<<2)>>2]-n));h=h>3.1415927410125732?6.2831854820251465-h:h;if(!(h<i)){h=i;break}c[a>>2]=k;e=k}while(0);k=k+1|0;if((k|0)==(o|0))break;else i=h}c[Ea+320+(e<<2)>>2]=0;f=f+1|0;if((f|0)==(F|0))break;else a=a+4|0}}while(0);if((F|0)>0){f=Da+4|0;a=Da+8|0;i=(c[j>>2]=G,+g[j>>2]);h=(c[j>>2]=I,+g[j>>2]);if(Ca){e=0;do{Ca=c[Ea+96+(e<<2)>>2]|0;g[Ea+352>>2]=+g[Ea+160+(Ca*3<<2)>>2]+ +g[Da>>2];g[Ea+352+4>>2]=+g[Ea+160+((Ca*3|0)+1<<2)>>2]+ +g[f>>2];g[Ea+352+8>>2]=+g[Ea+160+((Ca*3|0)+2<<2)>>2]+ +g[a>>2];fa=c[(c[d>>2]|0)+16>>2]|0;g[Ea+320>>2]=-ga;g[Ea+320+4>>2]=-i;g[Ea+320+8>>2]=-h;g[Ea+320+12>>2]=0.0;Nb[fa&15](d,Ea+320|0,Ea+352|0,-+g[Ea+128+(Ca<<2)>>2]);e=e+1|0}while(e>>>0<F>>>0)}else{e=0;do{fa=c[Ea+96+(e<<2)>>2]|0;ya=+g[Ea+160+(fa*3<<2)>>2]+ +g[Da>>2];g[Ea+352>>2]=ya;za=+g[Ea+160+((fa*3|0)+1<<2)>>2]+ +g[f>>2];g[Ea+352+4>>2]=za;Aa=+g[Ea+160+((fa*3|0)+2<<2)>>2]+ +g[a>>2];g[Ea+352+8>>2]=Aa;Ca=c[(c[d>>2]|0)+16>>2]|0;g[Ea+320>>2]=-ga;g[Ea+320+4>>2]=-i;g[Ea+320+8>>2]=-h;g[Ea+320+12>>2]=0.0;Ba=+g[Ea+128+(fa<<2)>>2];g[Ea+424>>2]=ya-Ba*ga;g[Ea+424+4>>2]=za-Ba*i;g[Ea+424+8>>2]=Aa-Ba*h;g[Ea+424+12>>2]=0.0;Nb[Ca&15](d,Ea+320|0,Ea+424|0,-Ba);e=e+1|0}while(e>>>0<F>>>0)}}}while(0)}l=Ea;return}function cc(b,d,e,f){b=b|0;d=d|0;e=e|0;f=+f;var h=0,i=0.0,k=0.0,m=0.0,n=0.0,o=0.0,p=0,q=0,r=0,s=0.0,t=0.0,u=0.0,v=0.0,w=0,x=0.0,y=0,z=0.0,A=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0.0,S=0.0,T=0.0,U=0.0,V=0.0,W=0.0,X=0.0,Y=0.0,Z=0.0,_=0.0,$=0.0,aa=0.0,ba=0.0;Q=l;l=l+448|0;if(!(a[b+527>>0]|0)){l=Q;return}K=c[b+28>>2]|0;D=+g[b+348>>2];C=+g[b+352>>2];J=+g[b+356>>2];E=+g[K+52>>2];F=D*+g[K+4>>2]+C*+g[K+8>>2]+J*+g[K+12>>2]+E;G=+g[K+56>>2];H=D*+g[K+20>>2]+C*+g[K+24>>2]+J*+g[K+28>>2]+G;I=+g[K+60>>2];J=D*+g[K+36>>2]+C*+g[K+40>>2]+J*+g[K+44>>2]+I;L=c[b+32>>2]|0;C=+g[b+412>>2];D=+g[b+416>>2];t=+g[b+420>>2];k=+g[L+52>>2];m=C*+g[L+4>>2]+D*+g[L+8>>2]+t*+g[L+12>>2]+k;n=+g[L+56>>2];o=C*+g[L+20>>2]+D*+g[L+24>>2]+t*+g[L+28>>2]+n;s=+g[L+60>>2];t=C*+g[L+36>>2]+D*+g[L+40>>2]+t*+g[L+44>>2]+s;if(!(a[b+524>>0]|0)){A=+g[d+192>>2]+ +g[d+80>>2];C=+g[d+196>>2]+ +g[d+84>>2];z=+g[d+200>>2]+ +g[d+88>>2];D=+g[e+192>>2]+ +g[e+80>>2];x=+g[e+196>>2]+ +g[e+84>>2];v=+g[e+200>>2]+ +g[e+88>>2];u=+g[d+176>>2]+ +g[d+64>>2]+((J-I)*C-(H-G)*z)-(+g[e+176>>2]+ +g[e+64>>2]+((t-s)*x-(o-n)*v));v=+g[d+180>>2]+ +g[d+68>>2]+((F-E)*z-(J-I)*A)-(+g[e+180>>2]+ +g[e+68>>2]+((m-k)*v-(t-s)*D));x=+g[d+184>>2]+ +g[d+72>>2]+((H-G)*A-(F-E)*C)-(+g[e+184>>2]+ +g[e+72>>2]+((o-n)*D-(m-k)*x));p=(c[d+240>>2]|0)==0;q=(c[e+240>>2]|0)==0;h=0;do{D=1.0/+g[b+48+(h*84|0)+80>>2];r=b+48+(h*84|0)|0;C=+g[r>>2];w=b+48+(h*84|0)+4|0;A=+g[w>>2];y=b+48+(h*84|0)+8|0;z=+g[y>>2];z=D*(((F-m)*C+(H-o)*A+(J-t)*z)*-.30000001192092896/f)-D*(u*C+v*A+x*z);g[b+36>>2]=+g[b+36>>2]+z;A=+g[y>>2];C=+g[w>>2];D=+g[r>>2];i=+g[K+404>>2];if(!p){T=((H-G)*A-(J-I)*C)*+g[K+356>>2]+((J-I)*D-(F-E)*A)*+g[K+360>>2]+((F-E)*C-(H-G)*D)*+g[K+364>>2];R=((H-G)*A-(J-I)*C)*+g[K+340>>2]+((J-I)*D-(F-E)*A)*+g[K+344>>2]+((F-E)*C-(H-G)*D)*+g[K+348>>2];S=((H-G)*A-(J-I)*C)*+g[K+324>>2]+((J-I)*D-(F-E)*A)*+g[K+328>>2]+((F-E)*C-(H-G)*D)*+g[K+332>>2];V=z*C*i*+g[d+116>>2];U=z*A*i*+g[d+120>>2];g[d+64>>2]=z*D*i*+g[d+112>>2]+ +g[d+64>>2];g[d+68>>2]=V+ +g[d+68>>2];g[d+72>>2]=U+ +g[d+72>>2];R=R*z*+g[d+100>>2];i=T*z*+g[d+104>>2];g[d+80>>2]=S*z*+g[d+96>>2]+ +g[d+80>>2];g[d+84>>2]=R+ +g[d+84>>2];g[d+88>>2]=i+ +g[d+88>>2]}i=+g[L+404>>2];if(!q){V=((o-n)*A-(t-s)*C)*+g[L+356>>2]+((t-s)*D-(m-k)*A)*+g[L+360>>2]+((m-k)*C-(o-n)*D)*+g[L+364>>2];U=((o-n)*A-(t-s)*C)*+g[L+340>>2]+((t-s)*D-(m-k)*A)*+g[L+344>>2]+((m-k)*C-(o-n)*D)*+g[L+348>>2];T=((o-n)*A-(t-s)*C)*+g[L+324>>2]+((t-s)*D-(m-k)*A)*+g[L+328>>2]+((m-k)*C-(o-n)*D)*+g[L+332>>2];R=i*+g[w>>2]*-z*+g[e+116>>2];S=i*+g[y>>2]*-z*+g[e+120>>2];g[e+64>>2]=+g[e+112>>2]*i*+g[r>>2]*-z+ +g[e+64>>2];g[e+68>>2]=R+ +g[e+68>>2];g[e+72>>2]=S+ +g[e+72>>2];U=U*+g[e+100>>2]*-z;V=V*+g[e+104>>2]*-z;g[e+80>>2]=T*+g[e+96>>2]*-z+ +g[e+80>>2];g[e+84>>2]=U+ +g[e+84>>2];g[e+88>>2]=V+ +g[e+88>>2]}h=h+1|0}while((h|0)!=3)}do if(!(a[b+552>>0]|0)){i=+g[b+440>>2];if(!(i>1.1920928955078125e-07)){h=d+192|0;K=d+80|0;p=d+196|0;L=d+84|0;q=d+200|0;M=d+88|0;r=e+192|0;N=e+80|0;w=e+196|0;O=e+84|0;y=e+200|0;P=e+88|0;break}u=+g[d+80>>2];v=+g[d+84>>2];x=+g[d+88>>2];k=+g[e+192>>2]+ +g[e+80>>2]-(+g[d+192>>2]+u);n=+g[e+196>>2]+ +g[e+84>>2]-(+g[d+196>>2]+v);s=+g[e+200>>2]+ +g[e+88>>2]-(+g[d+200>>2]+x);if(k*k+n*n+s*s>1.1920928955078125e-07){o=1.0/+B(+(k*k+n*n+s*s));z=+g[K+324>>2];A=+g[K+340>>2];C=+g[K+356>>2];D=+g[K+328>>2];E=+g[K+344>>2];F=+g[K+360>>2];G=+g[K+332>>2];H=+g[K+348>>2];t=+g[K+364>>2];i=i*(1.0/(k*o*(k*o*z+n*o*A+s*o*C)+n*o*(k*o*D+n*o*E+s*o*F)+s*o*(k*o*G+n*o*H+s*o*t)+(k*o*(k*o*+g[L+324>>2]+n*o*+g[L+340>>2]+s*o*+g[L+356>>2])+n*o*(k*o*+g[L+328>>2]+n*o*+g[L+344>>2]+s*o*+g[L+360>>2])+s*o*(k*o*+g[L+332>>2]+n*o*+g[L+348>>2]+s*o*+g[L+364>>2]))));o=+B(+(s*i*s*i+(k*i*k*i+n*i*n*i)));m=k*i*(1.0/o);k=n*i*(1.0/o);i=s*i*(1.0/o);if(c[d+240>>2]|0){V=o*0.0*+g[d+116>>2];U=o*0.0*+g[d+120>>2];g[d+64>>2]=o*0.0*+g[d+112>>2]+ +g[d+64>>2];g[d+68>>2]=V+ +g[d+68>>2];g[d+72>>2]=U+ +g[d+72>>2];U=(m*A+k*E+i*H)*o*+g[d+100>>2];V=(m*C+k*F+i*t)*o*+g[d+104>>2];g[d+80>>2]=u+(m*z+k*D+i*G)*o*+g[d+96>>2];g[d+84>>2]=v+U;g[d+88>>2]=x+V}if(c[e+240>>2]|0){V=m*+g[L+356>>2]+k*+g[L+360>>2]+i*+g[L+364>>2];U=m*+g[L+340>>2]+k*+g[L+344>>2]+i*+g[L+348>>2];T=m*+g[L+324>>2]+k*+g[L+328>>2]+i*+g[L+332>>2];R=o*-0.0*+g[e+116>>2];S=o*-0.0*+g[e+120>>2];g[e+64>>2]=o*-0.0*+g[e+112>>2]+ +g[e+64>>2];g[e+68>>2]=R+ +g[e+68>>2];g[e+72>>2]=S+ +g[e+72>>2];U=U*+g[e+100>>2]*-o;V=V*+g[e+104>>2]*-o;g[e+80>>2]=T*+g[e+96>>2]*-o+ +g[e+80>>2];g[e+84>>2]=U+ +g[e+84>>2];g[e+88>>2]=V+ +g[e+88>>2];h=d+192|0;K=d+80|0;p=d+196|0;L=d+84|0;q=d+200|0;M=d+88|0;r=e+192|0;N=e+80|0;w=e+196|0;O=e+84|0;y=e+200|0;P=e+88|0}else{h=d+192|0;K=d+80|0;p=d+196|0;L=d+84|0;q=d+200|0;M=d+88|0;r=e+192|0;N=e+80|0;w=e+196|0;O=e+84|0;y=e+200|0;P=e+88|0}}else{h=d+192|0;K=d+80|0;p=d+196|0;L=d+84|0;q=d+200|0;M=d+88|0;r=e+192|0;N=e+80|0;w=e+196|0;O=e+84|0;y=e+200|0;P=e+88|0}}else{c[Q+352>>2]=c[K+4>>2];c[Q+352+4>>2]=c[K+4+4>>2];c[Q+352+8>>2]=c[K+4+8>>2];c[Q+352+12>>2]=c[K+4+12>>2];c[Q+352+16>>2]=c[K+20>>2];c[Q+352+16+4>>2]=c[K+20+4>>2];c[Q+352+16+8>>2]=c[K+20+8>>2];c[Q+352+16+12>>2]=c[K+20+12>>2];c[Q+352+32>>2]=c[K+36>>2];c[Q+352+32+4>>2]=c[K+36+4>>2];c[Q+352+32+8>>2]=c[K+36+8>>2];c[Q+352+32+12>>2]=c[K+36+12>>2];c[Q+352+48>>2]=c[K+52>>2];c[Q+352+48+4>>2]=c[K+52+4>>2];c[Q+352+48+8>>2]=c[K+52+8>>2];c[Q+352+48+12>>2]=c[K+52+12>>2];c[Q+288>>2]=c[L+4>>2];c[Q+288+4>>2]=c[L+4+4>>2];c[Q+288+8>>2]=c[L+4+8>>2];c[Q+288+12>>2]=c[L+4+12>>2];c[Q+288+16>>2]=c[L+20>>2];c[Q+288+16+4>>2]=c[L+20+4>>2];c[Q+288+16+8>>2]=c[L+20+8>>2];c[Q+288+16+12>>2]=c[L+20+12>>2];c[Q+288+32>>2]=c[L+36>>2];c[Q+288+32+4>>2]=c[L+36+4>>2];c[Q+288+32+8>>2]=c[L+36+8>>2];c[Q+288+32+12>>2]=c[L+36+12>>2];c[Q+288+48>>2]=c[L+52>>2];c[Q+288+48+4>>2]=c[L+52+4>>2];c[Q+288+48+8>>2]=c[L+52+8>>2];c[Q+288+48+12>>2]=c[L+52+12>>2];T=+g[d+196>>2]+ +g[d+84>>2];u=+g[d+200>>2]+ +g[d+88>>2];g[Q+272>>2]=+g[d+192>>2]+ +g[d+80>>2];g[Q+272+4>>2]=T;g[Q+272+8>>2]=u;g[Q+272+12>>2]=0.0;u=+g[e+196>>2]+ +g[e+84>>2];T=+g[e+200>>2]+ +g[e+88>>2];g[Q+256>>2]=+g[e+192>>2]+ +g[e+80>>2];g[Q+256+4>>2]=u;g[Q+256+8>>2]=T;g[Q+256+12>>2]=0.0;c[Q+192>>2]=1065353216;O=Q+192+4|0;c[O>>2]=0;c[O+4>>2]=0;c[O+8>>2]=0;c[O+12>>2]=0;c[Q+192+20>>2]=1065353216;P=Q+192+24|0;c[P>>2]=0;c[P+4>>2]=0;c[P+8>>2]=0;c[P+12>>2]=0;c[Q+192+40>>2]=1065353216;M=Q+192+44|0;c[M>>2]=0;c[M+4>>2]=0;c[M+8>>2]=0;c[M+12>>2]=0;c[M+16>>2]=0;Me(Q+352|0,0.0,0.0,0.0,Q+272|0,f,Q+192|0);c[Q+128>>2]=1065353216;M=Q+128+4|0;c[M>>2]=0;c[M+4>>2]=0;c[M+8>>2]=0;c[M+12>>2]=0;c[Q+128+20>>2]=1065353216;N=Q+128+24|0;c[N>>2]=0;c[N+4>>2]=0;c[N+8>>2]=0;c[N+12>>2]=0;c[Q+128+40>>2]=1065353216;L=Q+128+44|0;c[L>>2]=0;c[L+4>>2]=0;c[L+8>>2]=0;c[L+12>>2]=0;c[L+16>>2]=0;Me(Q+288|0,0.0,0.0,0.0,Q+256|0,f,Q+128|0);T=+g[b+556>>2];u=+g[b+560>>2];U=+g[b+564>>2];v=+g[b+568>>2];H=T*(2.0/(T*T+u*u+U*U+v*v));C=u*(2.0/(T*T+u*u+U*U+v*v));I=U*(2.0/(T*T+u*u+U*U+v*v));X=+g[b+364>>2];W=+g[b+368>>2];_=+g[b+372>>2];k=_*(T*I-v*C)+(W*(T*C+v*I)+X*(1.0-(u*C+U*I)));m=_*(u*I+v*H)+(X*(T*C-v*I)+W*(1.0-(T*H+U*I)));n=X*(T*I+v*C)+W*(u*I-v*H)+_*(1.0-(T*H+u*C));i=+g[b+380>>2];G=+g[b+384>>2];D=+g[b+388>>2];o=(T*I-v*C)*D+(G*(T*C+v*I)+i*(1.0-(u*C+U*I)));s=(u*I+v*H)*D+(i*(T*C-v*I)+G*(1.0-(T*H+U*I)));t=i*(T*I+v*C)+G*(u*I-v*H)+D*(1.0-(T*H+u*C));R=+g[b+396>>2];E=+g[b+400>>2];A=+g[b+404>>2];S=(1.0-(u*C+U*I))*R+(T*C+v*I)*E+(T*I-v*C)*A;U=(T*C-v*I)*R+(1.0-(T*H+U*I))*E+(u*I+v*H)*A;C=(T*I+v*C)*R+(u*I-v*H)*E+(1.0-(T*H+u*C))*A;u=+g[b+300>>2];H=+g[b+316>>2];T=+g[b+332>>2];v=+g[b+304>>2];I=+g[b+320>>2];V=+g[b+336>>2];F=+g[b+308>>2];J=+g[b+324>>2];z=+g[b+340>>2];x=-+g[b+348>>2];ba=-+g[b+352>>2];Z=-+g[b+356>>2];_=X*0.0+W*0.0+_*0.0+ +g[b+412>>2]+(n*(F*x+J*ba+z*Z)+(k*(u*x+H*ba+T*Z)+m*(v*x+I*ba+V*Z)));D=i*0.0+G*0.0+D*0.0+ +g[b+416>>2]+(t*(F*x+J*ba+z*Z)+(o*(u*x+H*ba+T*Z)+s*(v*x+I*ba+V*Z)));Z=R*0.0+E*0.0+A*0.0+ +g[b+420>>2]+(C*(F*x+J*ba+z*Z)+(S*(u*x+H*ba+T*Z)+U*(v*x+I*ba+V*Z)));ba=+g[Q+128>>2];x=+g[M>>2];A=+g[Q+128+8>>2];E=+g[Q+128+16>>2];R=+g[Q+128+20>>2];G=+g[N>>2];i=+g[Q+128+32>>2];W=+g[Q+128+36>>2];X=+g[Q+128+40>>2];Y=A*Z+(ba*_+x*D)+ +g[Q+128+48>>2];$=E*_+D*R+Z*G+ +g[Q+128+52>>2];aa=_*i+D*W+Z*X+ +g[Q+128+56>>2];g[Q+64>>2]=(k*u+m*v+n*F)*ba+(o*u+s*v+t*F)*x+(S*u+U*v+C*F)*A;g[Q+64+4>>2]=(k*H+m*I+n*J)*ba+(o*H+s*I+t*J)*x+(S*H+U*I+C*J)*A;g[Q+64+8>>2]=(k*T+m*V+n*z)*ba+(o*T+s*V+t*z)*x+(S*T+U*V+C*z)*A;g[Q+64+12>>2]=0.0;g[Q+64+16>>2]=(k*u+m*v+n*F)*E+(o*u+s*v+t*F)*R+(S*u+U*v+C*F)*G;g[Q+64+20>>2]=(k*H+m*I+n*J)*E+(o*H+s*I+t*J)*R+(S*H+U*I+C*J)*G;g[Q+64+24>>2]=(k*T+m*V+n*z)*E+(o*T+s*V+t*z)*R+(S*T+U*V+C*z)*G;g[Q+64+28>>2]=0.0;g[Q+64+32>>2]=(k*u+m*v+n*F)*i+(o*u+s*v+t*F)*W+(S*u+U*v+C*F)*X;g[Q+64+36>>2]=(k*H+m*I+n*J)*i+(o*H+s*I+t*J)*W+(S*H+U*I+C*J)*X;g[Q+64+40>>2]=(k*T+m*V+n*z)*i+(o*T+s*V+t*z)*W+(S*T+U*V+C*z)*X;g[Q+64+44>>2]=0.0;g[Q+64+48>>2]=Y;g[Q+64+52>>2]=$;g[Q+64+56>>2]=aa;g[Q+64+60>>2]=0.0;aa=(S*u+U*v+C*F)*-Z+((k*u+m*v+n*F)*-_+(o*u+s*v+t*F)*-D);$=(S*H+U*I+C*J)*-Z+((k*H+m*I+n*J)*-_+(o*H+s*I+t*J)*-D);D=(S*T+U*V+C*z)*-Z+((k*T+m*V+n*z)*-_+(o*T+s*V+t*z)*-D);_=+g[Q+192>>2];Z=+g[O>>2];Y=+g[Q+192+8>>2];X=+g[Q+192+16>>2];W=+g[Q+192+20>>2];i=+g[P>>2];G=+g[Q+192+32>>2];R=+g[Q+192+36>>2];E=+g[Q+192+40>>2];A=aa*_+$*Z+D*Y+ +g[Q+192+48>>2];x=aa*X+$*W+D*i+ +g[Q+192+52>>2];D=aa*G+$*R+D*E+ +g[Q+192+56>>2];g[Q>>2]=(k*u+m*v+n*F)*_+(k*H+m*I+n*J)*Z+(k*T+m*V+n*z)*Y;g[Q+4>>2]=(o*u+s*v+t*F)*_+(o*H+s*I+t*J)*Z+(o*T+s*V+t*z)*Y;g[Q+8>>2]=(S*u+U*v+C*F)*_+(S*H+U*I+C*J)*Z+(S*T+U*V+C*z)*Y;g[Q+12>>2]=0.0;g[Q+16>>2]=(k*u+m*v+n*F)*X+(k*H+m*I+n*J)*W+(k*T+m*V+n*z)*i;g[Q+20>>2]=(o*u+s*v+t*F)*X+(o*H+s*I+t*J)*W+(o*T+s*V+t*z)*i;g[Q+24>>2]=(S*u+U*v+C*F)*X+(S*H+U*I+C*J)*W+(S*T+U*V+C*z)*i;g[Q+28>>2]=0.0;g[Q+32>>2]=(k*u+m*v+n*F)*G+(k*H+m*I+n*J)*R+(k*T+m*V+n*z)*E;g[Q+36>>2]=(o*u+s*v+t*F)*G+(o*H+s*I+t*J)*R+(o*T+s*V+t*z)*E;g[Q+40>>2]=(S*u+U*v+C*F)*G+(S*H+U*I+C*J)*R+(S*T+U*V+C*z)*E;g[Q+44>>2]=0.0;g[Q+48>>2]=A;g[Q+52>>2]=x;g[Q+56>>2]=D;g[Q+60>>2]=0.0;Se(Q+352|0,Q+64|0,Q+424|0,Q+416|0);D=+g[Q+416>>2];x=1.0/f*+g[Q+424>>2]*D;A=1.0/f*D*+g[Q+424+4>>2];D=1.0/f*D*+g[Q+424+8>>2];Se(Q+288|0,Q,Q+424|0,Q+416|0);E=+g[Q+416>>2];x=x-+g[Q+272>>2];A=A-+g[Q+272+4>>2];D=D-+g[Q+272+8>>2];z=1.0/f*+g[Q+424>>2]*E-+g[Q+256>>2];C=1.0/f*E*+g[Q+424+4>>2]-+g[Q+256+4>>2];E=1.0/f*E*+g[Q+424+8>>2]-+g[Q+256+8>>2];if(x*x+A*A+D*D>1.1920928955078125e-07){u=1.0/+B(+(x*x+A*A+D*D));P=c[b+28>>2]|0;o=x*u*(x*u*+g[P+324>>2]+A*u*+g[P+340>>2]+D*u*+g[P+356>>2])+A*u*(x*u*+g[P+328>>2]+A*u*+g[P+344>>2]+D*u*+g[P+360>>2])+D*u*(x*u*+g[P+332>>2]+A*u*+g[P+348>>2]+D*u*+g[P+364>>2]);k=x*u;n=A*u;u=D*u}else{o=0.0;k=0.0;n=0.0;u=0.0}if(z*z+C*C+E*E>1.1920928955078125e-07){t=1.0/+B(+(z*z+C*C+E*E));P=c[b+32>>2]|0;s=z*t*(z*t*+g[P+324>>2]+C*t*+g[P+340>>2]+E*t*+g[P+356>>2])+C*t*(z*t*+g[P+328>>2]+C*t*+g[P+344>>2]+E*t*+g[P+360>>2])+E*t*(z*t*+g[P+332>>2]+C*t*+g[P+348>>2]+E*t*+g[P+364>>2]);i=z*t;m=C*t;t=E*t}else{s=0.0;i=0.0;m=0.0;t=0.0}v=o*k+s*i;k=o*n+s*m;i=o*u+s*t;if(v*v+k*k+i*i>1.1920928955078125e-07){o=1.0/+B(+(v*v+k*k+i*i));h=c[b+28>>2]|0;m=v*o*(v*o*+g[h+324>>2]+k*o*+g[h+340>>2]+i*o*+g[h+356>>2])+k*o*(v*o*+g[h+328>>2]+k*o*+g[h+344>>2]+i*o*+g[h+360>>2])+i*o*(v*o*+g[h+332>>2]+k*o*+g[h+348>>2]+i*o*+g[h+364>>2]);p=c[b+32>>2]|0;o=v*o*(v*o*+g[p+324>>2]+k*o*+g[p+340>>2]+i*o*+g[p+356>>2])+k*o*(v*o*+g[p+328>>2]+k*o*+g[p+344>>2]+i*o*+g[p+360>>2])+i*o*(v*o*+g[p+332>>2]+k*o*+g[p+348>>2]+i*o*+g[p+364>>2]);z=(x*m-z*o)*(1.0/((m+o)*(m+o)));i=(A*m-C*o)*(1.0/((m+o)*(m+o)));o=(D*m-E*o)*(1.0/((m+o)*(m+o)));k=+g[b+572>>2];if(!(k>=0.0))k=z;else{t=(a[b+553>>0]|0)==0?k:k/m;k=+g[b+576>>2];n=+g[b+580>>2];m=+g[b+584>>2];s=+B(+((z+k)*(z+k)+(i+n)*(i+n)+(o+m)*(o+m)));if(s>t){u=n+(t*(i+n)*(1.0/s)-n);v=m+(t*(o+m)*(1.0/s)-m);x=k+(t*(z+k)*(1.0/s)-k);k=t*(z+k)*(1.0/s)-k;o=t*(o+m)*(1.0/s)-m;i=t*(i+n)*(1.0/s)-n}else{u=i+n;v=o+m;x=z+k;k=z}g[b+576>>2]=x;g[b+580>>2]=u;g[b+584>>2]=v}n=+B(+(k*k+i*i+o*o));m=k*(1.0/n);k=i*(1.0/n);i=o*(1.0/n);if(c[d+240>>2]|0){ba=m*+g[h+356>>2]+k*+g[h+360>>2]+i*+g[h+364>>2];aa=m*+g[h+340>>2]+k*+g[h+344>>2]+i*+g[h+348>>2];$=m*+g[h+324>>2]+k*+g[h+328>>2]+i*+g[h+332>>2];Z=n*0.0*+g[d+116>>2];_=n*0.0*+g[d+120>>2];g[d+64>>2]=n*0.0*+g[d+112>>2]+ +g[d+64>>2];g[d+68>>2]=Z+ +g[d+68>>2];g[d+72>>2]=_+ +g[d+72>>2];aa=aa*n*+g[d+100>>2];ba=ba*n*+g[d+104>>2];g[d+80>>2]=$*n*+g[d+96>>2]+ +g[d+80>>2];g[d+84>>2]=aa+ +g[d+84>>2];g[d+88>>2]=ba+ +g[d+88>>2]}if(c[e+240>>2]|0){ba=m*+g[p+356>>2]+k*+g[p+360>>2]+i*+g[p+364>>2];aa=m*+g[p+340>>2]+k*+g[p+344>>2]+i*+g[p+348>>2];$=m*+g[p+324>>2]+k*+g[p+328>>2]+i*+g[p+332>>2];Z=n*-0.0*+g[e+116>>2];_=n*-0.0*+g[e+120>>2];g[e+64>>2]=n*-0.0*+g[e+112>>2]+ +g[e+64>>2];g[e+68>>2]=Z+ +g[e+68>>2];g[e+72>>2]=_+ +g[e+72>>2];aa=aa*+g[e+100>>2]*-n;ba=ba*+g[e+104>>2]*-n;g[e+80>>2]=$*+g[e+96>>2]*-n+ +g[e+80>>2];g[e+84>>2]=aa+ +g[e+84>>2];g[e+88>>2]=ba+ +g[e+88>>2]}}h=d+192|0;K=d+80|0;p=d+196|0;L=d+84|0;q=d+200|0;M=d+88|0;r=e+192|0;N=e+80|0;w=e+196|0;O=e+84|0;y=e+200|0;P=e+88|0}while(0);z=+g[h>>2]+ +g[K>>2];x=+g[p>>2]+ +g[L>>2];v=+g[q>>2]+ +g[M>>2];u=+g[r>>2]+ +g[N>>2];t=+g[w>>2]+ +g[O>>2];s=+g[y>>2]+ +g[P>>2];if(a[b+526>>0]|0){k=+g[b+528>>2];i=k*+g[b+504>>2]*+g[b+432>>2]/f;m=+g[b+460>>2];n=+g[b+464>>2];o=+g[b+468>>2];if((u-z)*m+(t-x)*n+(s-v)*o>0.0)i=i+k*((u-z)*m+(t-x)*n+(s-v)*o)*+g[b+436>>2];aa=+g[b+516>>2];_=aa+i*+g[b+492>>2];g[Q+424>>2]=_;g[Q+416>>2]=0.0;h=c[(_>0.0?Q+424|0:Q+416|0)>>2]|0;c[b+516>>2]=h;aa=(c[j>>2]=h,+g[j>>2])-aa;_=+g[b+536>>2];$=+g[b+540>>2];i=+g[b+544>>2];k=m*aa-_*(m*aa*_+n*aa*$+o*aa*i);ba=n*aa-$*(m*aa*_+n*aa*$+o*aa*i);n=o*aa-i*(m*aa*_+n*aa*$+o*aa*i);i=+B(+(n*n+(k*k+ba*ba)));k=k*(1.0/i);m=ba*(1.0/i);n=n*(1.0/i);h=c[b+28>>2]|0;if(c[d+240>>2]|0){ba=k*+g[h+356>>2]+m*+g[h+360>>2]+n*+g[h+364>>2];aa=k*+g[h+340>>2]+m*+g[h+344>>2]+n*+g[h+348>>2];$=k*+g[h+324>>2]+m*+g[h+328>>2]+n*+g[h+332>>2];Z=i*0.0*+g[d+116>>2];_=i*0.0*+g[d+120>>2];g[d+64>>2]=i*0.0*+g[d+112>>2]+ +g[d+64>>2];g[d+68>>2]=Z+ +g[d+68>>2];g[d+72>>2]=_+ +g[d+72>>2];aa=aa*i*+g[d+100>>2];ba=ba*i*+g[d+104>>2];g[K>>2]=$*i*+g[d+96>>2]+ +g[K>>2];g[L>>2]=aa+ +g[L>>2];g[M>>2]=ba+ +g[M>>2]}h=c[b+32>>2]|0;if(c[e+240>>2]|0){ba=k*+g[h+356>>2]+m*+g[h+360>>2]+n*+g[h+364>>2];aa=k*+g[h+340>>2]+m*+g[h+344>>2]+n*+g[h+348>>2];$=k*+g[h+324>>2]+m*+g[h+328>>2]+n*+g[h+332>>2];Z=i*-0.0*+g[e+116>>2];_=i*-0.0*+g[e+120>>2];g[e+64>>2]=i*-0.0*+g[e+112>>2]+ +g[e+64>>2];g[e+68>>2]=Z+ +g[e+68>>2];g[e+72>>2]=_+ +g[e+72>>2];aa=aa*+g[e+100>>2]*-i;ba=ba*+g[e+104>>2]*-i;g[N>>2]=$*+g[e+96>>2]*-i+ +g[N>>2];g[O>>2]=aa+ +g[O>>2];g[P>>2]=ba+ +g[P>>2]}}if(!(a[b+525>>0]|0)){l=Q;return}o=+g[b+532>>2];n=o*+g[b+508>>2]*+g[b+432>>2]/f;m=+g[b+476>>2];k=+g[b+480>>2];i=+g[b+484>>2];if((u-z)*m+(t-x)*k+(s-v)*i>0.0)n=n+o*((u-z)*m+(t-x)*k+(s-v)*i)*+g[b+436>>2];ba=+g[b+520>>2];n=ba+n*+g[b+496>>2];g[Q+424>>2]=n;g[Q+416>>2]=0.0;h=c[(n>0.0?Q+424|0:Q+416|0)>>2]|0;c[b+520>>2]=h;n=(c[j>>2]=h,+g[j>>2])-ba;h=c[b+28>>2]|0;if(c[d+240>>2]|0){ba=m*+g[h+356>>2]+k*+g[h+360>>2]+i*+g[h+364>>2];aa=m*+g[h+340>>2]+k*+g[h+344>>2]+i*+g[h+348>>2];i=m*+g[h+324>>2]+k*+g[h+328>>2]+i*+g[h+332>>2];m=n*0.0*+g[d+116>>2];k=n*0.0*+g[d+120>>2];g[d+64>>2]=n*0.0*+g[d+112>>2]+ +g[d+64>>2];g[d+68>>2]=m+ +g[d+68>>2];g[d+72>>2]=k+ +g[d+72>>2];k=aa*n*+g[d+100>>2];m=ba*n*+g[d+104>>2];g[K>>2]=i*n*+g[d+96>>2]+ +g[K>>2];g[L>>2]=k+ +g[L>>2];g[M>>2]=m+ +g[M>>2];m=+g[b+476>>2];k=+g[b+480>>2];i=+g[b+484>>2]}h=c[b+32>>2]|0;if(!(c[e+240>>2]|0)){l=Q;return}ba=m*+g[h+356>>2]+k*+g[h+360>>2]+i*+g[h+364>>2];aa=m*+g[h+340>>2]+k*+g[h+344>>2]+i*+g[h+348>>2];$=m*+g[h+324>>2]+k*+g[h+328>>2]+i*+g[h+332>>2];Z=n*-0.0*+g[e+116>>2];_=n*-0.0*+g[e+120>>2];g[e+64>>2]=n*-0.0*+g[e+112>>2]+ +g[e+64>>2];g[e+68>>2]=Z+ +g[e+68>>2];g[e+72>>2]=_+ +g[e+72>>2];aa=aa*+g[e+100>>2]*-n;ba=ba*+g[e+104>>2]*-n;g[N>>2]=$*+g[e+96>>2]*-n+ +g[N>>2];g[O>>2]=aa+ +g[O>>2];g[P>>2]=ba+ +g[P>>2];l=Q;return}function dc(b,d,e,f,h,i,j,k,m){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;m=m|0;var n=0,o=0,p=0,q=0.0,r=0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0,y=0.0,z=0.0,C=0.0,D=0.0,E=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0,L=0.0,M=0.0,N=0.0,O=0.0,P=0.0,Q=0.0,R=0.0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0.0;_=l;l=l+256|0;c[b+188>>2]=-1;m=c[k+72>>2]|0;if((m|0)!=(c[b+224>>2]|0)){c[b+212>>2]=16;c[b+216>>2]=17;c[b+220>>2]=18;c[b+224>>2]=m}c[b+184>>2]=0;if((e|0)>0){m=0;do{c[(c[d+(m<<2)>>2]|0)+212>>2]=-1;m=m+1|0}while((m|0)!=(e|0))}m=c[b+12>>2]|0;if((m|0)>(e|0)){o=b+8|0;n=m}else{if((e+1|0)!=0?(c[6485]=(c[6485]|0)+1,n=ec(((e+1|0)*244|3)+16|0)|0,(n|0)!=0):0){c[(n+4+15&-16)+-4>>2]=n;o=n+4+15&-16}else o=0;n=c[b+8>>2]|0;if((n|0)>0){m=0;do{X=o+(m*244|0)|0;Y=c[b+16>>2]|0;W=Y+(m*244|0)|0;c[X>>2]=c[W>>2];c[X+4>>2]=c[W+4>>2];c[X+8>>2]=c[W+8>>2];c[X+12>>2]=c[W+12>>2];X=Y+(m*244|0)+16|0;W=o+(m*244|0)+16|0;c[W>>2]=c[X>>2];c[W+4>>2]=c[X+4>>2];c[W+8>>2]=c[X+8>>2];c[W+12>>2]=c[X+12>>2];W=Y+(m*244|0)+32|0;X=o+(m*244|0)+32|0;c[X>>2]=c[W>>2];c[X+4>>2]=c[W+4>>2];c[X+8>>2]=c[W+8>>2];c[X+12>>2]=c[W+12>>2];X=o+(m*244|0)+48|0;W=Y+(m*244|0)+48|0;c[X>>2]=c[W>>2];c[X+4>>2]=c[W+4>>2];c[X+8>>2]=c[W+8>>2];c[X+12>>2]=c[W+12>>2];$g(o+(m*244|0)+64|0,Y+(m*244|0)+64|0,180)|0;m=m+1|0}while((m|0)!=(n|0))}m=c[b+16>>2]|0;if(m|0){if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[m+-4>>2]|0)}c[b+16>>2]=0}a[b+20>>0]=1;c[b+16>>2]=o;c[b+12>>2]=e+1;o=b+8|0;n=e+1|0}uj(_|0,0,244)|0;m=c[o>>2]|0;if((m|0)<0){if((n|0)<0){n=c[b+16>>2]|0;if(n|0){if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[n+-4>>2]|0)}c[b+16>>2]=0}a[b+20>>0]=1;c[b+16>>2]=0;c[b+12>>2]=0}do{Y=c[b+16>>2]|0;X=Y+(m*244|0)|0;c[X>>2]=c[_>>2];c[X+4>>2]=c[_+4>>2];c[X+8>>2]=c[_+8>>2];c[X+12>>2]=c[_+12>>2];X=Y+(m*244|0)+16|0;c[X>>2]=c[_+16>>2];c[X+4>>2]=c[_+16+4>>2];c[X+8>>2]=c[_+16+8>>2];c[X+12>>2]=c[_+16+12>>2];X=Y+(m*244|0)+32|0;c[X>>2]=c[_+32>>2];c[X+4>>2]=c[_+32+4>>2];c[X+8>>2]=c[_+32+8>>2];c[X+12>>2]=c[_+32+12>>2];X=Y+(m*244|0)+48|0;c[X>>2]=c[_+48>>2];c[X+4>>2]=c[_+48+4>>2];c[X+8>>2]=c[_+48+8>>2];c[X+12>>2]=c[_+48+12>>2];$g(Y+(m*244|0)+64|0,_+64|0,180)|0;m=m+1|0}while((m|0)!=0)}c[o>>2]=0;if((e|0)>0){n=0;do{p=d+(n<<2)|0;o=od(b,c[p>>2]|0,+g[k+12>>2])|0;p=c[p>>2]|0;if(!((p|0)==0?1:(c[p+252>>2]&2|0)==0)?+g[p+404>>2]!=0.0:0){r=c[b+16>>2]|0;m=c[p+564>>2]|0;if(m&2){q=+g[k+84>>2];O=+g[p+456>>2];Q=+g[p+460>>2];s=+g[p+464>>2];I=+g[p+4>>2];O=O!=0.0?1.0/O:0.0;J=+g[p+8>>2];Q=Q!=0.0?1.0/Q:0.0;K=+g[p+12>>2];s=s!=0.0?1.0/s:0.0;L=+g[p+20>>2];M=+g[p+24>>2];N=+g[p+28>>2];P=+g[p+36>>2];R=+g[p+40>>2];v=+g[p+44>>2];w=+g[p+388>>2];x=+g[p+392>>2];u=+g[p+396>>2];y=(O*I*I+Q*J*J+s*K*K)*w+(O*I*L+Q*J*M+s*K*N)*x+(O*I*P+Q*J*R+s*K*v)*u;z=(O*L*I+Q*M*J+s*N*K)*w+(O*L*L+Q*M*M+s*N*N)*x+(O*L*P+Q*M*R+s*N*v)*u;v=(O*P*I+Q*R*J+s*v*K)*w+(O*P*L+Q*R*M+s*v*N)*x+(O*P*P+Q*R*R+s*v*v)*u;s=(w*z-x*y)*(w*z-x*y)+((x*v-u*z)*(x*v-u*z)+(u*y-w*v)*(u*y-w*v));if(s>q*q){q=1.0/+B(+s)*q;t=(x*v-u*z)*q;s=(u*y-w*v)*q;q=(w*z-x*y)*q}else{t=x*v-u*z;s=u*y-w*v;q=w*z-x*y}P=+g[k+12>>2];Q=(t*+g[p+328>>2]+s*+g[p+344>>2]+q*+g[p+360>>2])*P;R=P*(t*+g[p+332>>2]+s*+g[p+348>>2]+q*+g[p+364>>2]);g[r+(o*244|0)+224>>2]=+g[r+(o*244|0)+224>>2]-(t*+g[p+324>>2]+s*+g[p+340>>2]+q*+g[p+356>>2])*P;g[r+(o*244|0)+228>>2]=+g[r+(o*244|0)+228>>2]-Q;g[r+(o*244|0)+232>>2]=+g[r+(o*244|0)+232>>2]-R;m=c[p+564>>2]|0}if(m&4){J=+g[k+12>>2];u=+g[p+456>>2];P=+g[p+460>>2];N=+g[p+464>>2];G=+g[p+388>>2];z=+g[p+392>>2];R=+g[p+396>>2];M=+g[p+4>>2];u=u!=0.0?1.0/u:0.0;y=+g[p+8>>2];P=P!=0.0?1.0/P:0.0;C=+g[p+12>>2];N=N!=0.0?1.0/N:0.0;t=+g[p+20>>2];L=+g[p+24>>2];F=+g[p+28>>2];O=+g[p+36>>2];K=+g[p+40>>2];v=+g[p+44>>2];D=u*M*M+P*y*y+N*C*C;I=u*M*t+P*y*L+N*C*F;w=u*M*O+P*y*K+N*C*v;E=u*t*M+P*L*y+N*F*C;H=u*t*t+P*L*L+N*F*F;x=u*t*O+P*L*K+N*F*v;C=u*O*M+P*K*y+N*v*C;F=u*O*t+P*K*L+N*v*F;v=u*O*O+P*K*K+N*v*v;N=G*D+z*I+R*w+(z*(G*C+z*F+R*v)-R*(G*E+z*H+R*x))*J-(J*0.0+(G*D+z*I+R*w));K=G*E+z*H+R*x+(R*(G*D+z*I+R*w)-G*(G*C+z*F+R*v))*J-(J*0.0+(G*E+z*H+R*x));P=G*C+z*F+R*v+(G*(G*E+z*H+R*x)-z*(G*D+z*I+R*w))*J-(J*0.0+(G*C+z*F+R*v));O=I+(G*C+z*F+R*v+(z*F+(I*0.0+H*-R)))*J;u=w+(z*v+(w*0.0+x*-R)-(G*E+z*H+R*x))*J;L=E+(C*-G+(E*0.0+R*D)-(G*C+z*F+R*v))*J;t=x+(G*D+z*I+R*w+(v*-G+(x*0.0+R*w)))*J;y=C+(C*0.0+(D*-z+G*E)+(G*E+z*H+R*x))*J;M=F+(F*0.0+(I*-z+G*H)-(G*D+z*I+R*w))*J;q=(H+(F*-G+(H*0.0+R*I))*J)*(v+(v*0.0+(w*-z+G*x))*J)-M*t;s=M*u-O*(v+(v*0.0+(w*-z+G*x))*J);$=O*t-(H+(F*-G+(H*0.0+R*I))*J)*u;Q=y*$+((D+(z*C+(D*0.0+E*-R))*J)*q+L*s);m=+A(+Q)>1.1920928955078125e-07;Q=m?1.0/Q:Q;g[r+(o*244|0)+224>>2]=G-(P*$+(N*q+K*s))*Q-G+ +g[r+(o*244|0)+224>>2];g[r+(o*244|0)+228>>2]=z-(y*(t*N-u*K)+((D+(z*C+(D*0.0+E*-R))*J)*((v+(v*0.0+(w*-z+G*x))*J)*K-t*P)+L*(u*P-(v+(v*0.0+(w*-z+G*x))*J)*N)))*Q-z+ +g[r+(o*244|0)+228>>2];g[r+(o*244|0)+232>>2]=R-(y*(O*K-(H+(F*-G+(H*0.0+R*I))*J)*N)+((D+(z*C+(D*0.0+E*-R))*J)*((H+(F*-G+(H*0.0+R*I))*J)*P-M*K)+L*(M*N-O*P)))*Q-R+ +g[r+(o*244|0)+232>>2];m=c[p+564>>2]|0}if(m&8|0){O=+g[k+12>>2];z=+g[p+456>>2];C=+g[p+460>>2];w=+g[p+464>>2];J=+g[p+388>>2];K=+g[p+392>>2];$=+g[p+396>>2];yg(p+4|0,_);R=+g[_>>2];L=+g[_+4>>2];M=+g[_+8>>2];D=+g[_+12>>2];F=M*(J*-M+K*D-$*-R)+(R*(-(J*-R)-K*-L-$*-M)+D*($*-L+J*D-K*-M))-L*(K*-R+$*D-J*-L);H=R*(K*-R+$*D-J*-L)+(L*(-(J*-R)-K*-L-$*-M)+D*(J*-M+K*D-$*-R))-M*($*-L+J*D-K*-M);D=L*($*-L+J*D-K*-M)+(M*(-(J*-R)-K*-L-$*-M)+D*(K*-R+$*D-J*-L))-R*(J*-M+K*D-$*-R);z=z!=0.0?1.0/z:0.0;I=D*0.0+(z*F+H*0.0);C=C!=0.0?1.0/C:0.0;G=D*0.0+(F*0.0+C*H);w=w!=0.0?1.0/w:0.0;E=w*D+(F*0.0+H*0.0);x=z+(H*0.0+(z*0.0+D*-0.0))*O;y=C+(F*-0.0+(C*0.0+D*0.0))*O;P=w+(w*0.0+(H*-0.0+F*0.0))*O;v=y*P-((H*-0.0+C*F+0.0-I)*O+0.0)*((D*0.0+0.0-w*F+I)*O+0.0);N=((H*-0.0+C*F+0.0-I)*O+0.0)*((w*H+(D*-0.0+0.0)-G)*O+0.0)-P*((H*0.0+(0.0-C*D)+E)*O+0.0);u=((H*0.0+(0.0-C*D)+E)*O+0.0)*((D*0.0+0.0-w*F+I)*O+0.0)-y*((w*H+(D*-0.0+0.0)-G)*O+0.0);Q=((F*0.0-z*H+0.0+G)*O+0.0)*u+(x*v+((F*-0.0+(z*D+0.0)-E)*O+0.0)*N);Y=+A(+Q)>1.1920928955078125e-07;Q=Y?1.0/Q:Q;N=F-((F*G-H*I)*O*u+((H*E-D*G)*O*v+(D*I-F*E)*O*N))*Q;P=H-(((F*0.0-z*H+0.0+G)*O+0.0)*(((D*0.0+0.0-w*F+I)*O+0.0)*(H*E-D*G)*O-((w*H+(D*-0.0+0.0)-G)*O+0.0)*(D*I-F*E)*O)+(x*(P*(D*I-F*E)*O-((D*0.0+0.0-w*F+I)*O+0.0)*(F*G-H*I)*O)+((F*-0.0+(z*D+0.0)-E)*O+0.0)*(((w*H+(D*-0.0+0.0)-G)*O+0.0)*(F*G-H*I)*O-P*(H*E-D*G)*O)))*Q;Q=D-(((F*0.0-z*H+0.0+G)*O+0.0)*(((H*0.0+(0.0-C*D)+E)*O+0.0)*(D*I-F*E)*O-y*(H*E-D*G)*O)+(x*(y*(F*G-H*I)*O-((H*-0.0+C*F+0.0-I)*O+0.0)*(D*I-F*E)*O)+((F*-0.0+(z*D+0.0)-E)*O+0.0)*(((H*-0.0+C*F+0.0-I)*O+0.0)*(H*E-D*G)*O-((H*0.0+(0.0-C*D)+E)*O+0.0)*(F*G-H*I)*O)))*Q;O=+g[_+12>>2];g[r+(o*244|0)+224>>2]=(M*N+O*P-R*Q)*-M+(O*(O*N+L*Q-M*P)+(-(R*N)-L*P-M*Q)*-R)-(O*Q+R*P-L*N)*-L-J+ +g[r+(o*244|0)+224>>2];g[r+(o*244|0)+228>>2]=(O*Q+R*P-L*N)*-R+(O*(M*N+O*P-R*Q)+(-(R*N)-L*P-M*Q)*-L)-(O*N+L*Q-M*P)*-M-K+ +g[r+(o*244|0)+228>>2];g[r+(o*244|0)+232>>2]=(O*N+L*Q-M*P)*-L+((-(R*N)-L*P-M*Q)*-M+O*(O*Q+R*P-L*N))-(M*N+O*P-R*Q)*-R-$+ +g[r+(o*244|0)+232>>2]}}n=n+1|0}while((n|0)!=(e|0))}if((j|0)>0){m=0;do{Y=c[i+(m<<2)>>2]|0;Db[c[(c[Y>>2]|0)+8>>2]&255](Y);g[Y+36>>2]=0.0;m=m+1|0}while((m|0)<(j|0))}n=c[b+168>>2]|0;if((n|0)<(j|0)?(c[b+172>>2]|0)<(j|0):0){if(!j)m=0;else{c[6485]=(c[6485]|0)+1;m=ec((j<<3|3)+16|0)|0;if(!m)m=0;else{c[(m+4+15&-16)+-4>>2]=m;m=m+4+15&-16}n=c[b+168>>2]|0}if((n|0)>0){o=0;do{W=(c[b+176>>2]|0)+(o<<3)|0;X=c[W+4>>2]|0;Y=m+(o<<3)|0;c[Y>>2]=c[W>>2];c[Y+4>>2]=X;o=o+1|0}while((o|0)!=(n|0))}n=c[b+176>>2]|0;if(n|0){if(a[b+180>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[n+-4>>2]|0)}c[b+176>>2]=0}a[b+180>>0]=1;c[b+176>>2]=m;c[b+172>>2]=j}c[b+168>>2]=j;if((j|0)>0){m=0;e=0;do{r=c[b+176>>2]|0;d=r+(e<<3)|0;p=i+(e<<2)|0;n=c[p>>2]|0;o=c[n+44>>2]|0;if(o){n=o+64|0;do{c[o>>2]=0;o=o+4|0}while((o|0)<(n|0));n=c[p>>2]|0}if(!(a[n+20>>0]|0)){c[d>>2]=0;c[r+(e<<3)+4>>2]=0;n=0}else{Ib[c[(c[n>>2]|0)+16>>2]&127](n,d);n=c[d>>2]|0}m=n+m|0;e=e+1|0}while((e|0)<(j|0));p=m}else p=0;n=c[b+48>>2]|0;if((n|0)<(p|0)?(c[b+52>>2]|0)<(p|0):0){if(!p)m=0;else{c[6485]=(c[6485]|0)+1;m=ec((p*152|3)+16|0)|0;if(!m)m=0;else{c[(m+4+15&-16)+-4>>2]=m;m=m+4+15&-16}n=c[b+48>>2]|0}if((n|0)>0){o=0;do{$g(m+(o*152|0)|0,(c[b+56>>2]|0)+(o*152|0)|0,152)|0;o=o+1|0}while((o|0)!=(n|0))}n=c[b+56>>2]|0;if(n|0){if(a[b+60>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[n+-4>>2]|0)}c[b+56>>2]=0}a[b+60>>0]=1;c[b+56>>2]=m;c[b+52>>2]=p}c[b+48>>2]=p;if((j|0)>0){X=0;Y=0;m=c[b+176>>2]|0;while(1){W=m+(Y<<3)|0;if(!(c[W>>2]|0))n=0;else{n=c[b+56>>2]|0;p=n+(X*152|0)|0;r=i+(Y<<2)|0;d=c[r>>2]|0;e=c[d+28>>2]|0;S=c[d+32>>2]|0;T=od(b,e,+g[k+12>>2])|0;U=od(b,S,+g[k+12>>2])|0;V=c[b+16>>2]|0;o=c[d+24>>2]|0;o=(o|0)>0?o:c[k+20>>2]|0;if((o|0)>(c[b+184>>2]|0))c[b+184>>2]=o;if((c[W>>2]|0)>0){m=0;do{uj(p+(m*152|0)|0,0,152)|0;g[p+(m*152|0)+120>>2]=-3402823466385288598117041.0e14;g[p+(m*152|0)+124>>2]=3402823466385288598117041.0e14;g[p+(m*152|0)+100>>2]=0.0;g[p+(m*152|0)+96>>2]=0.0;c[p+(m*152|0)+144>>2]=T;c[p+(m*152|0)+148>>2]=U;c[p+(m*152|0)+136>>2]=o;m=m+1|0}while((m|0)<(c[W>>2]|0))}c[V+(T*244|0)+64>>2]=0;c[V+(T*244|0)+64+4>>2]=0;c[V+(T*244|0)+64+8>>2]=0;c[V+(T*244|0)+64+12>>2]=0;c[V+(T*244|0)+64+16>>2]=0;c[V+(T*244|0)+64+20>>2]=0;c[V+(T*244|0)+64+24>>2]=0;c[V+(T*244|0)+64+28>>2]=0;c[V+(T*244|0)+144>>2]=0;c[V+(T*244|0)+144+4>>2]=0;c[V+(T*244|0)+144+8>>2]=0;c[V+(T*244|0)+144+12>>2]=0;c[V+(T*244|0)+144+16>>2]=0;c[V+(T*244|0)+144+20>>2]=0;c[V+(T*244|0)+144+24>>2]=0;c[V+(T*244|0)+144+28>>2]=0;c[V+(U*244|0)+64>>2]=0;c[V+(U*244|0)+64+4>>2]=0;c[V+(U*244|0)+64+8>>2]=0;c[V+(U*244|0)+64+12>>2]=0;c[V+(U*244|0)+64+16>>2]=0;c[V+(U*244|0)+64+20>>2]=0;c[V+(U*244|0)+64+24>>2]=0;c[V+(U*244|0)+64+28>>2]=0;c[V+(U*244|0)+144>>2]=0;c[V+(U*244|0)+144+4>>2]=0;c[V+(U*244|0)+144+8>>2]=0;c[V+(U*244|0)+144+12>>2]=0;c[V+(U*244|0)+144+16>>2]=0;c[V+(U*244|0)+144+20>>2]=0;c[V+(U*244|0)+144+24>>2]=0;c[V+(U*244|0)+144+28>>2]=0;g[_>>2]=1.0/+g[k+12>>2];c[_+4>>2]=c[k+32>>2];c[_+8>>2]=n+(X*152|0)+16;c[_+12>>2]=p;c[_+16>>2]=n+(X*152|0)+48;c[_+20>>2]=n+(X*152|0)+32;c[_+24>>2]=38;c[_+28>>2]=n+(X*152|0)+112;o=n+(X*152|0)+116|0;c[o>>2]=c[k+40>>2];c[_+48>>2]=c[k+4>>2];c[_+32>>2]=o;c[_+36>>2]=n+(X*152|0)+120;c[_+40>>2]=n+(X*152|0)+124;c[_+44>>2]=c[k+20>>2];o=c[r>>2]|0;Ib[c[(c[o>>2]|0)+20>>2]&127](o,_);if((c[W>>2]|0)>0){n=0;do{m=p+(n*152|0)+124|0;q=+g[(c[r>>2]|0)+16>>2];if(+g[m>>2]>=q)g[m>>2]=q;m=p+(n*152|0)+120|0;if(+g[m>>2]<=-q)g[m>>2]=-q;c[p+(n*152|0)+132>>2]=d;o=p+(n*152|0)|0;m=c[d+28>>2]|0;q=+g[o>>2];s=+g[o+4>>2];t=+g[o+8>>2];v=(q*+g[m+340>>2]+s*+g[m+344>>2]+t*+g[m+348>>2])*+g[m+608>>2];u=(q*+g[m+356>>2]+s*+g[m+360>>2]+t*+g[m+364>>2])*+g[m+612>>2];o=p+(n*152|0)+64|0;g[o>>2]=(+g[m+324>>2]*q+ +g[m+328>>2]*s+ +g[m+332>>2]*t)*+g[m+604>>2];g[o+4>>2]=v;g[o+8>>2]=u;g[o+12>>2]=0.0;o=p+(n*152|0)+32|0;m=c[d+32>>2]|0;u=+g[o>>2];v=+g[o+4>>2];w=+g[o+8>>2];x=(u*+g[m+340>>2]+v*+g[m+344>>2]+w*+g[m+348>>2])*+g[m+608>>2];$=(u*+g[m+356>>2]+v*+g[m+360>>2]+w*+g[m+364>>2])*+g[m+612>>2];o=p+(n*152|0)+80|0;g[o>>2]=(+g[m+324>>2]*u+ +g[m+328>>2]*v+ +g[m+332>>2]*w)*+g[m+604>>2];g[o+4>>2]=x;g[o+8>>2]=$;g[o+12>>2]=0.0;o=p+(n*152|0)+16|0;$=+g[e+404>>2];x=+g[o>>2];y=+g[o+4>>2];z=+g[o+8>>2];o=p+(n*152|0)+48|0;F=+g[S+404>>2];C=+g[o>>2];D=+g[o+4>>2];E=+g[o+8>>2];F=x*$*x+y*$*y+z*$*z+(q*(q*+g[e+324>>2]+s*+g[e+328>>2]+t*+g[e+332>>2])+s*(q*+g[e+340>>2]+s*+g[e+344>>2]+t*+g[e+348>>2])+t*(q*+g[e+356>>2]+s*+g[e+360>>2]+t*+g[e+364>>2]))+(C*F*C+D*F*D+E*F*E)+(u*(u*+g[S+324>>2]+v*+g[S+328>>2]+w*+g[S+332>>2])+v*(u*+g[S+340>>2]+v*+g[S+344>>2]+w*+g[S+348>>2])+w*(u*+g[S+356>>2]+v*+g[S+360>>2]+w*+g[S+364>>2]));o=+A(+F)>1.1920928955078125e-07;F=o?1.0/F:0.0;g[p+(n*152|0)+108>>2]=F;if(!(c[V+(T*244|0)+240>>2]|0)){G=0.0;H=0.0;I=0.0;J=0.0;K=0.0;L=0.0}else{G=+g[V+(T*244|0)+208>>2];H=+g[V+(T*244|0)+212>>2];I=+g[V+(T*244|0)+216>>2];J=+g[V+(T*244|0)+224>>2];K=+g[V+(T*244|0)+228>>2];L=+g[V+(T*244|0)+232>>2]}if(!(c[V+(U*244|0)+240>>2]|0)){M=0.0;N=0.0;O=0.0;P=0.0;Q=0.0;R=0.0}else{M=+g[V+(U*244|0)+208>>2];N=+g[V+(U*244|0)+212>>2];O=+g[V+(U*244|0)+216>>2];P=+g[V+(U*244|0)+224>>2];Q=+g[V+(U*244|0)+228>>2];R=+g[V+(U*244|0)+232>>2]}o=p+(n*152|0)+112|0;g[o>>2]=F*+g[o>>2]+F*(0.0-+g[_+48>>2]*(x*(G+ +g[e+372>>2])+y*(H+ +g[e+376>>2])+z*(I+ +g[e+380>>2])+(q*(J+ +g[e+388>>2])+s*(K+ +g[e+392>>2])+t*(L+ +g[e+396>>2]))+(C*(M+ +g[S+372>>2])+D*(N+ +g[S+376>>2])+E*(O+ +g[S+380>>2])+(u*(P+ +g[S+388>>2])+v*(Q+ +g[S+392>>2])+w*(R+ +g[S+396>>2])))));g[p+(n*152|0)+100>>2]=0.0;n=n+1|0}while((n|0)<(c[W>>2]|0))}m=c[b+176>>2]|0;n=c[m+(Y<<3)>>2]|0}Y=Y+1|0;if((Y|0)>=(j|0))break;else X=n+X|0}}Pb[c[(c[b>>2]|0)+28>>2]&127](b,f,h,k);r=c[b+48>>2]|0;d=c[b+28>>2]|0;e=c[b+68>>2]|0;n=c[b+128>>2]|0;if((n|0)<(r|0)?(c[b+132>>2]|0)<(r|0):0){if(!r)m=0;else{c[6485]=(c[6485]|0)+1;m=ec((r<<2|3)+16|0)|0;if(!m)m=0;else{c[(m+4+15&-16)+-4>>2]=m;m=m+4+15&-16}n=c[b+128>>2]|0}p=c[b+136>>2]|0;if((n|0)<=0)if(!p)n=b+140|0;else Z=112;else{o=0;do{c[m+(o<<2)>>2]=c[p+(o<<2)>>2];o=o+1|0}while((o|0)!=(n|0));Z=112}if((Z|0)==112){if(a[b+140>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[p+-4>>2]|0)}c[b+136>>2]=0;n=b+140|0}a[n>>0]=1;c[b+136>>2]=m;c[b+132>>2]=r}c[b+128>>2]=r;if(!(c[k+72>>2]&16)){n=c[b+108>>2]|0;if((n|0)<(d|0)?(c[b+112>>2]|0)<(d|0):0){if(!d)m=0;else{c[6485]=(c[6485]|0)+1;m=ec((d<<2|3)+16|0)|0;if(!m)m=0;else{c[(m+4+15&-16)+-4>>2]=m;m=m+4+15&-16}n=c[b+108>>2]|0}p=c[b+116>>2]|0;if((n|0)<=0)if(!p)n=b+120|0;else Z=144;else{o=0;do{c[m+(o<<2)>>2]=c[p+(o<<2)>>2];o=o+1|0}while((o|0)!=(n|0));Z=144}if((Z|0)==144){if(a[b+120>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[p+-4>>2]|0)}c[b+116>>2]=0;n=b+120|0}a[n>>0]=1;c[b+116>>2]=m;c[b+112>>2]=d}c[b+108>>2]=d}else{n=c[b+108>>2]|0;if((n|0)<(d<<1|0)?(c[b+112>>2]|0)<(d<<1|0):0){if(!d)m=0;else{c[6485]=(c[6485]|0)+1;m=ec((d<<3|3)+16|0)|0;if(!m)m=0;else{c[(m+4+15&-16)+-4>>2]=m;m=m+4+15&-16}n=c[b+108>>2]|0}p=c[b+116>>2]|0;if((n|0)<=0)if(!p)n=b+120|0;else Z=128;else{o=0;do{c[m+(o<<2)>>2]=c[p+(o<<2)>>2];o=o+1|0}while((o|0)!=(n|0));Z=128}if((Z|0)==128){if(a[b+120>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[p+-4>>2]|0)}c[b+116>>2]=0;n=b+120|0}a[n>>0]=1;c[b+116>>2]=m;c[b+112>>2]=d<<1}c[b+108>>2]=d<<1}n=c[b+148>>2]|0;if((n|0)<(e|0)?(c[b+152>>2]|0)<(e|0):0){if(!e)m=0;else{c[6485]=(c[6485]|0)+1;m=ec((e<<2|3)+16|0)|0;if(!m)m=0;else{c[(m+4+15&-16)+-4>>2]=m;m=m+4+15&-16}n=c[b+148>>2]|0}p=c[b+156>>2]|0;if((n|0)<=0)if(!p)n=b+160|0;else Z=160;else{o=0;do{c[m+(o<<2)>>2]=c[p+(o<<2)>>2];o=o+1|0}while((o|0)!=(n|0));Z=160}if((Z|0)==160){if(a[b+160>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[p+-4>>2]|0)}c[b+156>>2]=0;n=b+160|0}a[n>>0]=1;c[b+156>>2]=m;c[b+152>>2]=e}c[b+148>>2]=e;if((r|0)>0){n=c[b+136>>2]|0;m=0;do{c[n+(m<<2)>>2]=m;m=m+1|0}while((m|0)!=(r|0))}if((d|0)>0){n=c[b+116>>2]|0;m=0;do{c[n+(m<<2)>>2]=m;m=m+1|0}while((m|0)!=(d|0))}if((e|0)<=0){l=_;return 0.0}n=c[b+156>>2]|0;m=0;do{c[n+(m<<2)>>2]=m;m=m+1|0}while((m|0)!=(e|0));l=_;return 0.0}function ec(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0;w=l;l=l+16|0;do if(a>>>0<245){o=a>>>0<11?16:a+11&-8;m=c[6489]|0;if(m>>>(o>>>3)&3|0){a=25996+((m>>>(o>>>3)&1^1)+(o>>>3)<<1<<2)|0;b=c[a+8>>2]|0;d=c[b+8>>2]|0;if((d|0)==(a|0))c[6489]=m&~(1<<(m>>>(o>>>3)&1^1)+(o>>>3));else{c[d+12>>2]=a;c[a+8>>2]=d}v=(m>>>(o>>>3)&1^1)+(o>>>3)<<3;c[b+4>>2]=v|3;c[b+v+4>>2]=c[b+v+4>>2]|1;v=b+8|0;l=w;return v|0}n=c[6491]|0;if(o>>>0>n>>>0){if(m>>>(o>>>3)|0){a=m>>>(o>>>3)<<(o>>>3)&(2<<(o>>>3)|0-(2<<(o>>>3)));f=((a&0-a)+-1|0)>>>(((a&0-a)+-1|0)>>>12&16);e=f>>>(f>>>5&8)>>>(f>>>(f>>>5&8)>>>2&4);e=(f>>>5&8|((a&0-a)+-1|0)>>>12&16|f>>>(f>>>5&8)>>>2&4|e>>>1&2|e>>>(e>>>1&2)>>>1&1)+(e>>>(e>>>1&2)>>>(e>>>(e>>>1&2)>>>1&1))|0;f=c[25996+(e<<1<<2)+8>>2]|0;a=c[f+8>>2]|0;if((a|0)==(25996+(e<<1<<2)|0)){c[6489]=m&~(1<<e);a=m&~(1<<e)}else{c[a+12>>2]=25996+(e<<1<<2);c[25996+(e<<1<<2)+8>>2]=a;a=m}c[f+4>>2]=o|3;c[f+o+4>>2]=(e<<3)-o|1;c[f+(e<<3)>>2]=(e<<3)-o;if(n|0){d=c[6494]|0;if(!(a&1<<(n>>>3))){c[6489]=a|1<<(n>>>3);a=25996+(n>>>3<<1<<2)|0;b=25996+(n>>>3<<1<<2)+8|0}else{a=c[25996+(n>>>3<<1<<2)+8>>2]|0;b=25996+(n>>>3<<1<<2)+8|0}c[b>>2]=d;c[a+12>>2]=d;c[d+8>>2]=a;c[d+12>>2]=25996+(n>>>3<<1<<2)}c[6491]=(e<<3)-o;c[6494]=f+o;v=f+8|0;l=w;return v|0}h=c[6490]|0;if(h){b=((h&0-h)+-1|0)>>>(((h&0-h)+-1|0)>>>12&16);k=b>>>(b>>>5&8)>>>(b>>>(b>>>5&8)>>>2&4);k=c[26260+((b>>>5&8|((h&0-h)+-1|0)>>>12&16|b>>>(b>>>5&8)>>>2&4|k>>>1&2|k>>>(k>>>1&2)>>>1&1)+(k>>>(k>>>1&2)>>>(k>>>(k>>>1&2)>>>1&1))<<2)>>2]|0;b=k;j=k;k=(c[k+4>>2]&-8)-o|0;while(1){a=c[b+16>>2]|0;if(!a){a=c[b+20>>2]|0;if(!a)break}i=(c[a+4>>2]&-8)-o|0;f=i>>>0<k>>>0;b=a;j=f?a:j;k=f?i:k}i=j+o|0;if(i>>>0>j>>>0){f=c[j+24>>2]|0;a=c[j+12>>2]|0;do if((a|0)==(j|0)){b=j+20|0;a=c[b>>2]|0;if(!a){b=j+16|0;a=c[b>>2]|0;if(!a){b=0;break}}while(1){e=a+20|0;d=c[e>>2]|0;if(!d){e=a+16|0;d=c[e>>2]|0;if(!d)break;else{a=d;b=e}}else{a=d;b=e}}c[b>>2]=0;b=a}else{b=c[j+8>>2]|0;c[b+12>>2]=a;c[a+8>>2]=b;b=a}while(0);do if(f|0){a=c[j+28>>2]|0;if((j|0)==(c[26260+(a<<2)>>2]|0)){c[26260+(a<<2)>>2]=b;if(!b){c[6490]=h&~(1<<a);break}}else{c[((c[f+16>>2]|0)==(j|0)?f+16|0:f+20|0)>>2]=b;if(!b)break}c[b+24>>2]=f;a=c[j+16>>2]|0;if(a|0){c[b+16>>2]=a;c[a+24>>2]=b}a=c[j+20>>2]|0;if(a|0){c[b+20>>2]=a;c[a+24>>2]=b}}while(0);if(k>>>0<16){v=k+o|0;c[j+4>>2]=v|3;v=j+v+4|0;c[v>>2]=c[v>>2]|1}else{c[j+4>>2]=o|3;c[i+4>>2]=k|1;c[i+k>>2]=k;if(n|0){d=c[6494]|0;if(!(1<<(n>>>3)&m)){c[6489]=1<<(n>>>3)|m;a=25996+(n>>>3<<1<<2)|0;b=25996+(n>>>3<<1<<2)+8|0}else{a=c[25996+(n>>>3<<1<<2)+8>>2]|0;b=25996+(n>>>3<<1<<2)+8|0}c[b>>2]=d;c[a+12>>2]=d;c[d+8>>2]=a;c[d+12>>2]=25996+(n>>>3<<1<<2)}c[6491]=k;c[6494]=i}v=j+8|0;l=w;return v|0}}}}else if(a>>>0<=4294967231){o=a+11&-8;e=c[6490]|0;if(e){if((a+11|0)>>>8)if(o>>>0>16777215)j=31;else{j=(a+11|0)>>>8<<((((a+11|0)>>>8)+1048320|0)>>>16&8);j=14-((j+520192|0)>>>16&4|(((a+11|0)>>>8)+1048320|0)>>>16&8|((j<<((j+520192|0)>>>16&4))+245760|0)>>>16&2)+(j<<((j+520192|0)>>>16&4)<<(((j<<((j+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;j=o>>>(j+7|0)&1|j<<1}else j=0;a=c[26260+(j<<2)>>2]|0;a:do if(!a){d=0;a=0;b=0-o|0;s=61}else{h=0;b=0-o|0;i=o<<((j|0)==31?0:25-(j>>>1)|0);d=0;while(1){f=(c[a+4>>2]&-8)-o|0;if(f>>>0<b>>>0)if(!f){f=a;b=0;d=a;s=65;break a}else{h=a;b=f}s=c[a+20>>2]|0;a=c[a+16+(i>>>31<<2)>>2]|0;d=(s|0)==0|(s|0)==(a|0)?d:s;if(!a){a=h;s=61;break}else i=i<<1}}while(0);if((s|0)==61){if((d|0)==0&(a|0)==0){a=2<<j;if(!((a|0-a)&e))break;m=((a|0-a)&e&0-((a|0-a)&e))+-1|0;n=m>>>(m>>>12&16)>>>(m>>>(m>>>12&16)>>>5&8);d=n>>>(n>>>2&4)>>>(n>>>(n>>>2&4)>>>1&2);a=0;d=c[26260+((m>>>(m>>>12&16)>>>5&8|m>>>12&16|n>>>2&4|n>>>(n>>>2&4)>>>1&2|d>>>1&1)+(d>>>(d>>>1&1))<<2)>>2]|0}if(!d){i=a;h=b}else{f=a;s=65}}if((s|0)==65)while(1){n=(c[d+4>>2]&-8)-o|0;a=n>>>0<b>>>0;b=a?n:b;f=a?d:f;a=c[d+16>>2]|0;if(!a)a=c[d+20>>2]|0;if(!a){i=f;h=b;break}else d=a}if(((i|0)!=0?h>>>0<((c[6491]|0)-o|0)>>>0:0)?(k=i+o|0,k>>>0>i>>>0):0){g=c[i+24>>2]|0;a=c[i+12>>2]|0;do if((a|0)==(i|0)){b=i+20|0;a=c[b>>2]|0;if(!a){b=i+16|0;a=c[b>>2]|0;if(!a){a=0;break}}while(1){f=a+20|0;d=c[f>>2]|0;if(!d){f=a+16|0;d=c[f>>2]|0;if(!d)break;else{a=d;b=f}}else{a=d;b=f}}c[b>>2]=0}else{v=c[i+8>>2]|0;c[v+12>>2]=a;c[a+8>>2]=v}while(0);do if(g){b=c[i+28>>2]|0;if((i|0)==(c[26260+(b<<2)>>2]|0)){c[26260+(b<<2)>>2]=a;if(!a){c[6490]=e&~(1<<b);e=e&~(1<<b);break}}else{c[((c[g+16>>2]|0)==(i|0)?g+16|0:g+20|0)>>2]=a;if(!a)break}c[a+24>>2]=g;b=c[i+16>>2]|0;if(b|0){c[a+16>>2]=b;c[b+24>>2]=a}b=c[i+20>>2]|0;if(b){c[a+20>>2]=b;c[b+24>>2]=a}}while(0);b:do if(h>>>0<16){v=h+o|0;c[i+4>>2]=v|3;v=i+v+4|0;c[v>>2]=c[v>>2]|1}else{c[i+4>>2]=o|3;c[k+4>>2]=h|1;c[k+h>>2]=h;d=h>>>3;if(h>>>0<256){a=c[6489]|0;if(!(a&1<<d)){c[6489]=a|1<<d;a=25996+(d<<1<<2)|0;b=25996+(d<<1<<2)+8|0}else{a=c[25996+(d<<1<<2)+8>>2]|0;b=25996+(d<<1<<2)+8|0}c[b>>2]=k;c[a+12>>2]=k;c[k+8>>2]=a;c[k+12>>2]=25996+(d<<1<<2);break}a=h>>>8;if(a)if(h>>>0>16777215)d=31;else{d=a<<((a+1048320|0)>>>16&8)<<(((a<<((a+1048320|0)>>>16&8))+520192|0)>>>16&4);d=14-(((a<<((a+1048320|0)>>>16&8))+520192|0)>>>16&4|(a+1048320|0)>>>16&8|(d+245760|0)>>>16&2)+(d<<((d+245760|0)>>>16&2)>>>15)|0;d=h>>>(d+7|0)&1|d<<1}else d=0;a=26260+(d<<2)|0;c[k+28>>2]=d;c[k+16+4>>2]=0;c[k+16>>2]=0;b=1<<d;if(!(e&b)){c[6490]=e|b;c[a>>2]=k;c[k+24>>2]=a;c[k+12>>2]=k;c[k+8>>2]=k;break}a=c[a>>2]|0;c:do if((c[a+4>>2]&-8|0)!=(h|0)){e=h<<((d|0)==31?0:25-(d>>>1)|0);while(1){d=a+16+(e>>>31<<2)|0;b=c[d>>2]|0;if(!b)break;if((c[b+4>>2]&-8|0)==(h|0)){a=b;break c}else{e=e<<1;a=b}}c[d>>2]=k;c[k+24>>2]=a;c[k+12>>2]=k;c[k+8>>2]=k;break b}while(0);u=a+8|0;v=c[u>>2]|0;c[v+12>>2]=k;c[u>>2]=k;c[k+8>>2]=v;c[k+12>>2]=a;c[k+24>>2]=0}while(0);v=i+8|0;l=w;return v|0}}}else o=-1;while(0);d=c[6491]|0;if(d>>>0>=o>>>0){a=d-o|0;b=c[6494]|0;if(a>>>0>15){v=b+o|0;c[6494]=v;c[6491]=a;c[v+4>>2]=a|1;c[b+d>>2]=a;c[b+4>>2]=o|3}else{c[6491]=0;c[6494]=0;c[b+4>>2]=d|3;c[b+d+4>>2]=c[b+d+4>>2]|1}v=b+8|0;l=w;return v|0}f=c[6492]|0;if(f>>>0>o>>>0){t=f-o|0;c[6492]=t;v=c[6495]|0;u=v+o|0;c[6495]=u;c[u+4>>2]=t|1;c[v+4>>2]=o|3;v=v+8|0;l=w;return v|0}if(!(c[6607]|0)){c[6609]=4096;c[6608]=4096;c[6610]=-1;c[6611]=-1;c[6612]=0;c[6600]=0;c[6607]=w&-16^1431655768;a=4096}else a=c[6609]|0;h=o+48|0;i=o+47|0;k=a+i|0;j=0-a|0;if((k&j)>>>0<=o>>>0){v=0;l=w;return v|0}a=c[6599]|0;if(a|0?(n=c[6597]|0,(n+(k&j)|0)>>>0<=n>>>0?1:(n+(k&j)|0)>>>0>a>>>0):0){v=0;l=w;return v|0}d:do if(!(c[6600]&4)){d=c[6495]|0;e:do if(d){b=26404;while(1){a=c[b>>2]|0;if(a>>>0<=d>>>0?(p=b+4|0,(a+(c[p>>2]|0)|0)>>>0>d>>>0):0)break;a=c[b+8>>2]|0;if(!a){s=128;break e}else b=a}if((k-f&j)>>>0<2147483647){a=jn(k-f&j|0)|0;if((a|0)==((c[b>>2]|0)+(c[p>>2]|0)|0))if((a|0)==(-1|0))a=k-f&j;else{h=k-f&j;g=a;s=145;break d}else{e=a;d=k-f&j;s=136}}else a=0}else s=128;while(0);do if((s|0)==128){b=jn(0)|0;if((b|0)!=(-1|0)?(r=c[6608]|0,r=((r+-1&b|0)==0?0:(r+-1+b&0-r)-b|0)+(k&j)|0,q=c[6597]|0,r>>>0>o>>>0&r>>>0<2147483647):0){p=c[6599]|0;if(p|0?(r+q|0)>>>0<=q>>>0|(r+q|0)>>>0>p>>>0:0){a=0;break}a=jn(r|0)|0;if((a|0)==(b|0)){h=r;g=b;s=145;break d}else{e=a;d=r;s=136}}else a=0}while(0);do if((s|0)==136){b=0-d|0;if(!(h>>>0>d>>>0&(d>>>0<2147483647&(e|0)!=(-1|0))))if((e|0)==(-1|0)){a=0;break}else{h=d;g=e;s=145;break d}a=c[6609]|0;a=i-d+a&0-a;if(a>>>0>=2147483647){h=d;g=e;s=145;break d}if((jn(a|0)|0)==(-1|0)){jn(b|0)|0;a=0;break}else{h=a+d|0;g=e;s=145;break d}}while(0);c[6600]=c[6600]|4;s=143}else{a=0;s=143}while(0);if(((s|0)==143?(k&j)>>>0<2147483647:0)?(g=jn(k&j|0)|0,t=jn(0)|0,u=(t-g|0)>>>0>(o+40|0)>>>0,!((g|0)==(-1|0)|u^1|g>>>0<t>>>0&((g|0)!=(-1|0)&(t|0)!=(-1|0))^1)):0){h=u?t-g|0:a;s=145}if((s|0)==145){a=(c[6597]|0)+h|0;c[6597]=a;if(a>>>0>(c[6598]|0)>>>0)c[6598]=a;j=c[6495]|0;f:do if(j){a=26404;while(1){b=c[a>>2]|0;d=a+4|0;e=c[d>>2]|0;if((g|0)==(b+e|0)){s=154;break}f=c[a+8>>2]|0;if(!f)break;else a=f}if(((s|0)==154?(c[a+12>>2]&8|0)==0:0)?g>>>0>j>>>0&b>>>0<=j>>>0:0){c[d>>2]=e+h;v=(c[6492]|0)+h|0;u=(j+8&7|0)==0?0:0-(j+8)&7;c[6495]=j+u;c[6492]=v-u;c[j+u+4>>2]=v-u|1;c[j+v+4>>2]=40;c[6496]=c[6611];break}if(g>>>0<(c[6493]|0)>>>0)c[6493]=g;d=g+h|0;a=26404;while(1){if((c[a>>2]|0)==(d|0)){s=162;break}b=c[a+8>>2]|0;if(!b)break;else a=b}if((s|0)==162?(c[a+12>>2]&8|0)==0:0){c[a>>2]=g;m=a+4|0;c[m>>2]=(c[m>>2]|0)+h;m=g+8|0;m=g+((m&7|0)==0?0:0-m&7)|0;a=d+((d+8&7|0)==0?0:0-(d+8)&7)|0;k=m+o|0;i=a-m-o|0;c[m+4>>2]=o|3;g:do if((j|0)==(a|0)){v=(c[6492]|0)+i|0;c[6492]=v;c[6495]=k;c[k+4>>2]=v|1}else{if((c[6494]|0)==(a|0)){v=(c[6491]|0)+i|0;c[6491]=v;c[6494]=k;c[k+4>>2]=v|1;c[k+v>>2]=v;break}h=c[a+4>>2]|0;if((h&3|0)==1){h:do if(h>>>0<256){b=c[a+8>>2]|0;d=c[a+12>>2]|0;if((d|0)==(b|0)){c[6489]=c[6489]&~(1<<(h>>>3));break}else{c[b+12>>2]=d;c[d+8>>2]=b;break}}else{g=c[a+24>>2]|0;b=c[a+12>>2]|0;do if((b|0)==(a|0)){b=c[a+16+4>>2]|0;if(!b){b=c[a+16>>2]|0;if(!b){b=0;break}else d=a+16|0}else d=a+16+4|0;while(1){f=b+20|0;e=c[f>>2]|0;if(!e){f=b+16|0;e=c[f>>2]|0;if(!e)break;else{b=e;d=f}}else{b=e;d=f}}c[d>>2]=0}else{v=c[a+8>>2]|0;c[v+12>>2]=b;c[b+8>>2]=v}while(0);if(!g)break;d=c[a+28>>2]|0;do if((c[26260+(d<<2)>>2]|0)!=(a|0)){c[((c[g+16>>2]|0)==(a|0)?g+16|0:g+20|0)>>2]=b;if(!b)break h}else{c[26260+(d<<2)>>2]=b;if(b|0)break;c[6490]=c[6490]&~(1<<d);break h}while(0);c[b+24>>2]=g;d=c[a+16>>2]|0;if(d|0){c[b+16>>2]=d;c[d+24>>2]=b}d=c[a+16+4>>2]|0;if(!d)break;c[b+20>>2]=d;c[d+24>>2]=b}while(0);a=a+(h&-8)|0;f=(h&-8)+i|0}else f=i;d=a+4|0;c[d>>2]=c[d>>2]&-2;c[k+4>>2]=f|1;c[k+f>>2]=f;d=f>>>3;if(f>>>0<256){a=c[6489]|0;if(!(a&1<<d)){c[6489]=a|1<<d;a=25996+(d<<1<<2)|0;b=25996+(d<<1<<2)+8|0}else{a=c[25996+(d<<1<<2)+8>>2]|0;b=25996+(d<<1<<2)+8|0}c[b>>2]=k;c[a+12>>2]=k;c[k+8>>2]=a;c[k+12>>2]=25996+(d<<1<<2);break}a=f>>>8;do if(!a)e=0;else{if(f>>>0>16777215){e=31;break}e=a<<((a+1048320|0)>>>16&8)<<(((a<<((a+1048320|0)>>>16&8))+520192|0)>>>16&4);e=14-(((a<<((a+1048320|0)>>>16&8))+520192|0)>>>16&4|(a+1048320|0)>>>16&8|(e+245760|0)>>>16&2)+(e<<((e+245760|0)>>>16&2)>>>15)|0;e=f>>>(e+7|0)&1|e<<1}while(0);a=26260+(e<<2)|0;c[k+28>>2]=e;c[k+16+4>>2]=0;c[k+16>>2]=0;b=c[6490]|0;d=1<<e;if(!(b&d)){c[6490]=b|d;c[a>>2]=k;c[k+24>>2]=a;c[k+12>>2]=k;c[k+8>>2]=k;break}a=c[a>>2]|0;i:do if((c[a+4>>2]&-8|0)!=(f|0)){e=f<<((e|0)==31?0:25-(e>>>1)|0);while(1){d=a+16+(e>>>31<<2)|0;b=c[d>>2]|0;if(!b)break;if((c[b+4>>2]&-8|0)==(f|0)){a=b;break i}else{e=e<<1;a=b}}c[d>>2]=k;c[k+24>>2]=a;c[k+12>>2]=k;c[k+8>>2]=k;break g}while(0);u=a+8|0;v=c[u>>2]|0;c[v+12>>2]=k;c[u>>2]=k;c[k+8>>2]=v;c[k+12>>2]=a;c[k+24>>2]=0}while(0);v=m+8|0;l=w;return v|0}a=26404;while(1){b=c[a>>2]|0;if(b>>>0<=j>>>0?(v=b+(c[a+4>>2]|0)|0,v>>>0>j>>>0):0)break;a=c[a+8>>2]|0}f=v+-47+((v+-47+8&7|0)==0?0:0-(v+-47+8)&7)|0;f=f>>>0<(j+16|0)>>>0?j:f;a=h+-40|0;t=g+8|0;t=(t&7|0)==0?0:0-t&7;u=g+t|0;c[6495]=u;c[6492]=a-t;c[u+4>>2]=a-t|1;c[g+a+4>>2]=40;c[6496]=c[6611];c[f+4>>2]=27;c[f+8>>2]=c[6601];c[f+8+4>>2]=c[6602];c[f+8+8>>2]=c[6603];c[f+8+12>>2]=c[6604];c[6601]=g;c[6602]=h;c[6604]=0;c[6603]=f+8;a=f+24|0;do{u=a;a=a+4|0;c[a>>2]=7}while((u+8|0)>>>0<v>>>0);if((f|0)!=(j|0)){c[f+4>>2]=c[f+4>>2]&-2;c[j+4>>2]=f-j|1;c[f>>2]=f-j;if((f-j|0)>>>0<256){d=25996+((f-j|0)>>>3<<1<<2)|0;a=c[6489]|0;if(!(a&1<<((f-j|0)>>>3))){c[6489]=a|1<<((f-j|0)>>>3);a=d;b=d+8|0}else{a=c[d+8>>2]|0;b=d+8|0}c[b>>2]=j;c[a+12>>2]=j;c[j+8>>2]=a;c[j+12>>2]=d;break}if((f-j|0)>>>8)if((f-j|0)>>>0>16777215)e=31;else{e=(f-j|0)>>>8<<((((f-j|0)>>>8)+1048320|0)>>>16&8);e=14-((e+520192|0)>>>16&4|(((f-j|0)>>>8)+1048320|0)>>>16&8|((e<<((e+520192|0)>>>16&4))+245760|0)>>>16&2)+(e<<((e+520192|0)>>>16&4)<<(((e<<((e+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;e=(f-j|0)>>>(e+7|0)&1|e<<1}else e=0;a=26260+(e<<2)|0;c[j+28>>2]=e;c[j+20>>2]=0;c[j+16>>2]=0;b=c[6490]|0;d=1<<e;if(!(b&d)){c[6490]=b|d;c[a>>2]=j;c[j+24>>2]=a;c[j+12>>2]=j;c[j+8>>2]=j;break}a=c[a>>2]|0;j:do if((c[a+4>>2]&-8|0)!=(f-j|0)){e=f-j<<((e|0)==31?0:25-(e>>>1)|0);while(1){d=a+16+(e>>>31<<2)|0;b=c[d>>2]|0;if(!b)break;if((c[b+4>>2]&-8|0)==(f-j|0)){a=b;break j}else{e=e<<1;a=b}}c[d>>2]=j;c[j+24>>2]=a;c[j+12>>2]=j;c[j+8>>2]=j;break f}while(0);u=a+8|0;v=c[u>>2]|0;c[v+12>>2]=j;c[u>>2]=j;c[j+8>>2]=v;c[j+12>>2]=a;c[j+24>>2]=0}}else{v=c[6493]|0;if((v|0)==0|g>>>0<v>>>0)c[6493]=g;c[6601]=g;c[6602]=h;c[6604]=0;c[6498]=c[6607];c[6497]=-1;c[6502]=25996;c[6501]=25996;c[6504]=26004;c[6503]=26004;c[6506]=26012;c[6505]=26012;c[6508]=26020;c[6507]=26020;c[6510]=26028;c[6509]=26028;c[6512]=26036;c[6511]=26036;c[6514]=26044;c[6513]=26044;c[6516]=26052;c[6515]=26052;c[6518]=26060;c[6517]=26060;c[6520]=26068;c[6519]=26068;c[6522]=26076;c[6521]=26076;c[6524]=26084;c[6523]=26084;c[6526]=26092;c[6525]=26092;c[6528]=26100;c[6527]=26100;c[6530]=26108;c[6529]=26108;c[6532]=26116;c[6531]=26116;c[6534]=26124;c[6533]=26124;c[6536]=26132;c[6535]=26132;c[6538]=26140;c[6537]=26140;c[6540]=26148;c[6539]=26148;c[6542]=26156;c[6541]=26156;c[6544]=26164;c[6543]=26164;c[6546]=26172;c[6545]=26172;c[6548]=26180;c[6547]=26180;c[6550]=26188;c[6549]=26188;c[6552]=26196;c[6551]=26196;c[6554]=26204;c[6553]=26204;c[6556]=26212;c[6555]=26212;c[6558]=26220;c[6557]=26220;c[6560]=26228;c[6559]=26228;c[6562]=26236;c[6561]=26236;c[6564]=26244;c[6563]=26244;v=h+-40|0;t=g+8|0;t=(t&7|0)==0?0:0-t&7;u=g+t|0;c[6495]=u;c[6492]=v-t;c[u+4>>2]=v-t|1;c[g+v+4>>2]=40;c[6496]=c[6611]}while(0);a=c[6492]|0;if(a>>>0>o>>>0){t=a-o|0;c[6492]=t;v=c[6495]|0;u=v+o|0;c[6495]=u;c[u+4>>2]=t|1;c[v+4>>2]=o|3;v=v+8|0;l=w;return v|0}}c[6629]=12;v=0;l=w;return v|0}function fc(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0;T=c[e>>2]|0;da=c[f>>2]|0;if(T|0)g=c[T+12>>2]|0;else g=b;h=c[g+88>>2]|0;j=c[g+92>>2]|0;l=c[g+96>>2]|0;if(!da)g=d;else g=c[da+12>>2]|0;s=c[g+88>>2]|0;q=c[g+92>>2]|0;k=c[g+96>>2]|0;X=c[b+88>>2]|0;ba=(c[d+88>>2]|0)-X|0;u=c[b+92>>2]|0;ca=(c[d+92>>2]|0)-u|0;i=c[b+96>>2]|0;U=(c[d+96>>2]|0)-i|0;W=c[(T|0?T:da)+12>>2]|0;Y=(c[W+88>>2]|0)-X|0;S=(c[W+92>>2]|0)-u|0;W=(c[W+96>>2]|0)-i|0;V=(N(S,U)|0)-(N(W,ca)|0)|0;W=(N(W,ba)|0)-(N(Y,U)|0)|0;S=(N(Y,ca)|0)-(N(S,ba)|0)|0;X=Iq(V|0,((V|0)<0)<<31>>31|0,X|0,((X|0)<0)<<31>>31|0)|0;Y=y;u=Iq(W|0,((W|0)<0)<<31>>31|0,u|0,((u|0)<0)<<31>>31|0)|0;t=y;i=Iq(S|0,((S|0)<0)<<31>>31|0,i|0,((i|0)<0)<<31>>31|0)|0;i=_t(X|0,Y|0,i|0,y|0)|0;t=_t(i|0,y|0,u|0,t|0)|0;u=y;i=Iq(S|0,((S|0)<0)<<31>>31|0,ca|0,((ca|0)<0)<<31>>31|0)|0;Y=y;X=Iq(W|0,((W|0)<0)<<31>>31|0,U|0,((U|0)<0)<<31>>31|0)|0;X=Nt(i|0,Y|0,X|0,y|0)|0;Y=y;i=Iq(V|0,((V|0)<0)<<31>>31|0,U|0,((U|0)<0)<<31>>31|0)|0;_=y;Z=Iq(S|0,((S|0)<0)<<31>>31|0,ba|0,((ba|0)<0)<<31>>31|0)|0;Z=Nt(i|0,_|0,Z|0,y|0)|0;_=y;i=Iq(W|0,((W|0)<0)<<31>>31|0,ba|0,((ba|0)<0)<<31>>31|0)|0;aa=y;$=Iq(V|0,((V|0)<0)<<31>>31|0,ca|0,((ca|0)<0)<<31>>31|0)|0;$=Nt(i|0,aa|0,$|0,y|0)|0;aa=y;i=Iq(X|0,Y|0,h|0,((h|0)<0)<<31>>31|0)|0;R=y;m=Iq(Z|0,_|0,j|0,((j|0)<0)<<31>>31|0)|0;R=_t(m|0,y|0,i|0,R|0)|0;i=y;m=Iq($|0,aa|0,l|0,((l|0)<0)<<31>>31|0)|0;m=_t(R|0,i|0,m|0,y|0)|0;i=y;if((T|0)!=0?(c[T+12>>2]|0)!=0:0){g=h;b=j;d=l;n=T;o=i;while(1){n=c[(c[n+8>>2]|0)+4>>2]|0;l=n+12|0;j=c[l>>2]|0;h=c[j+88>>2]|0;Q=Iq(h|0,((h|0)<0)<<31>>31|0,V|0,((V|0)<0)<<31>>31|0)|0;P=y;i=c[j+92>>2]|0;R=Iq(i|0,((i|0)<0)<<31>>31|0,W|0,((W|0)<0)<<31>>31|0)|0;P=_t(R|0,y|0,Q|0,P|0)|0;Q=y;j=c[j+96>>2]|0;R=Iq(j|0,((j|0)<0)<<31>>31|0,S|0,((S|0)<0)<<31>>31|0)|0;R=_t(P|0,Q|0,R|0,y|0)|0;Q=y;if((Q|0)<(u|0)|(Q|0)==(u|0)&R>>>0<t>>>0){j=m;i=o;break}if((c[n+20>>2]|0)==(c[a+100>>2]|0)){j=m;i=o;break}Q=Iq(X|0,Y|0,h|0,((h|0)<0)<<31>>31|0)|0;R=y;i=Iq(Z|0,_|0,i|0,((i|0)<0)<<31>>31|0)|0;R=_t(i|0,y|0,Q|0,R|0)|0;i=y;j=Iq($|0,aa|0,j|0,((j|0)<0)<<31>>31|0)|0;j=_t(R|0,i|0,j|0,y|0)|0;i=y;if(!((i|0)>(o|0)|(i|0)==(o|0)&j>>>0>m>>>0)){j=m;i=o;break}c[e>>2]=n;R=c[l>>2]|0;g=c[R+88>>2]|0;b=c[R+92>>2]|0;d=c[R+96>>2]|0;if(!R)break;else{o=i;m=j}}h=g;l=d;n=c[f>>2]|0}else{b=j;n=da;j=m}g=Iq(X|0,Y|0,s|0,((s|0)<0)<<31>>31|0)|0;R=y;d=Iq(Z|0,_|0,q|0,((q|0)<0)<<31>>31|0)|0;R=_t(d|0,y|0,g|0,R|0)|0;g=y;d=Iq($|0,aa|0,k|0,((k|0)<0)<<31>>31|0)|0;d=_t(R|0,g|0,d|0,y|0)|0;g=y;a:do if(n)if(!(c[n+12>>2]|0))p=n;else{p=n;while(1){r=c[c[p+8>>2]>>2]|0;o=c[r+12>>2]|0;m=c[o+88>>2]|0;Q=Iq(m|0,((m|0)<0)<<31>>31|0,V|0,((V|0)<0)<<31>>31|0)|0;P=y;n=c[o+92>>2]|0;R=Iq(n|0,((n|0)<0)<<31>>31|0,W|0,((W|0)<0)<<31>>31|0)|0;P=_t(R|0,y|0,Q|0,P|0)|0;Q=y;o=c[o+96>>2]|0;R=Iq(o|0,((o|0)<0)<<31>>31|0,S|0,((S|0)<0)<<31>>31|0)|0;R=_t(P|0,Q|0,R|0,y|0)|0;Q=y;if((Q|0)<(u|0)|(Q|0)==(u|0)&R>>>0<t>>>0)break a;if((c[r+20>>2]|0)==(c[a+100>>2]|0))break a;m=Iq(X|0,Y|0,m|0,((m|0)<0)<<31>>31|0)|0;R=y;n=Iq(Z|0,_|0,n|0,((n|0)<0)<<31>>31|0)|0;R=_t(n|0,y|0,m|0,R|0)|0;n=y;m=Iq($|0,aa|0,o|0,((o|0)<0)<<31>>31|0)|0;m=_t(R|0,n|0,m|0,y|0)|0;n=y;if(!((n|0)>(g|0)|(n|0)==(g|0)&m>>>0>d>>>0))break a;c[f>>2]=r;R=c[r+12>>2]|0;g=c[R+88>>2]|0;d=c[R+92>>2]|0;k=c[R+96>>2]|0;if(!R){s=g;q=d;p=r;d=m;g=n;break}else{s=g;q=d;p=r;g=n;d=m}}}else p=0;while(0);i=Nt(d|0,g|0,j|0,i|0)|0;d=y;if((d|0)>0|(d|0)==0&i>>>0>0){Q=Nt(0,0,S|0,((S|0)<0)<<31>>31|0)|0;R=y;K=s;g=h;L=q;j=b;M=k;m=l;o=i;n=d;while(1){P=g;J=c[e>>2]|0;b:while(1){O=(N(L-j|0,ca)|0)+(N(K-P|0,ba)|0)+(N(M-m|0,U)|0)|0;if(!J)break;if(!(c[J+12>>2]|0))break;F=c[(c[J>>2]|0)+8>>2]|0;if((c[F+20>>2]|0)<=(c[a+100>>2]|0))break;I=c[F+12>>2]|0;G=c[I+88>>2]|0;E=G-P|0;H=c[I+92>>2]|0;D=H-j|0;I=c[I+96>>2]|0;g=I-m|0;t=Iq(X|0,Y|0,E|0,((E|0)<0)<<31>>31|0)|0;C=y;r=Iq(Z|0,_|0,D|0,((D|0)<0)<<31>>31|0)|0;C=_t(r|0,y|0,t|0,C|0)|0;t=y;r=Iq($|0,aa|0,g|0,((g|0)<0)<<31>>31|0)|0;r=_t(C|0,t|0,r|0,y|0)|0;t=y;g=(N(D,ca)|0)+(N(E,ba)|0)+(N(g,U)|0)|0;do if((r|0)==0&(t|0)==0){if((g|0)>=0)break b}else{if((t|0)>=0)break b;if((g|0)>0){E=-1;v=g;u=((g|0)<0)<<31>>31}else{v=Nt(0,0,g|0,((g|0)<0)<<31>>31|0)|0;E=(g|0)!=0&1;v=g|0?v:0;u=g|0?y:0}A=Nt(0,0,r|0,t|0)|0;B=y;if((O|0)>0){g=1;r=-1;C=O;D=((O|0)<0)<<31>>31}else{C=Nt(0,0,O|0,((O|0)<0)<<31>>31|0)|0;g=((O|0)!=0)<<31>>31;r=(O|0)!=0&1;C=O|0?C:0;D=O|0?y:0}if((n|0)>0|(n|0)==0&o>>>0>0){r=o;t=n}else{t=(o|0)!=0|(n|0)!=0;z=Nt(0,0,o|0,n|0)|0;g=t?r:g;r=t?z:0;t=t?y:0}if((E|0)==(g|0)){if(!E)break;g=Iq(r|0,0,v|0,0)|0;w=y;ha=Iq(t|0,0,v|0,0)|0;ga=y;x=Iq(r|0,0,u|0,0)|0;z=y;fa=Iq(t|0,0,u|0,0)|0;v=y;x=_t(ha|0,0,x|0,0)|0;r=y;v=_t(ga|0,0,fa|0,v|0)|0;z=_t(v|0,y|0,z|0,0)|0;r=_t(z|0,y|0,r|0,0)|0;z=y;v=_t(0,x|0,g|0,w|0)|0;w=y;x=_t(r|0,z|0,(w>>>0<x>>>0|(w|0)==(x|0)&v>>>0<0)&1|0,0)|0;z=y;r=Iq(C|0,0,A|0,0)|0;g=y;fa=Iq(D|0,0,A|0,0)|0;A=y;t=Iq(C|0,0,B|0,0)|0;u=y;B=Iq(D|0,0,B|0,0)|0;C=y;t=_t(fa|0,0,t|0,0)|0;D=y;C=_t(A|0,0,B|0,C|0)|0;u=_t(C|0,y|0,u|0,0)|0;D=_t(u|0,y|0,D|0,0)|0;u=y;g=_t(0,t|0,r|0,g|0)|0;r=y;t=_t(D|0,u|0,(r>>>0<t>>>0|(r|0)==(t|0)&g>>>0<0)&1|0,0)|0;u=y;if(z>>>0<u>>>0|(z|0)==(u|0)&x>>>0<t>>>0)g=-1;else g=z>>>0>u>>>0|(z|0)==(u|0)&x>>>0>t>>>0?1:w>>>0<r>>>0|(w|0)==(r|0)&v>>>0<g>>>0?-1:(w>>>0>r>>>0|(w|0)==(r|0)&v>>>0>g>>>0)&1;g=N(g,E)|0}else g=E-g|0;if((g|0)<=-1)break b}while(0);n=K-G|0;j=L-H|0;o=M-I|0;n=Iq(X|0,Y|0,n|0,((n|0)<0)<<31>>31|0)|0;P=y;j=Iq(Z|0,_|0,j|0,((j|0)<0)<<31>>31|0)|0;P=_t(j|0,y|0,n|0,P|0)|0;n=y;o=Iq($|0,aa|0,o|0,((o|0)<0)<<31>>31|0)|0;o=_t(P|0,n|0,o|0,y|0)|0;n=(J|0)==(T|0)?0:F;c[e>>2]=n;P=G;j=H;m=I;J=n;n=y}g=c[f>>2]|0;if(!g){g=110;break}if(!(c[g+12>>2]|0)){g=110;break}F=c[c[g+8>>2]>>2]|0;if((c[F+20>>2]|0)<=(c[a+100>>2]|0)){g=110;break}u=c[F+12>>2]|0;w=c[u+88>>2]|0;t=w-K|0;v=c[u+92>>2]|0;r=v-L|0;u=c[u+96>>2]|0;g=u-M|0;ha=Iq(t|0,((t|0)<0)<<31>>31|0,V|0,((V|0)<0)<<31>>31|0)|0;fa=y;ga=Iq(r|0,((r|0)<0)<<31>>31|0,W|0,((W|0)<0)<<31>>31|0)|0;fa=_t(ga|0,y|0,ha|0,fa|0)|0;ha=y;ga=Iq(Q|0,R|0,g|0,((g|0)<0)<<31>>31|0)|0;if(!((fa|0)==(ga|0)&(ha|0)==(y|0))){g=110;break}z=Iq(X|0,Y|0,t|0,((t|0)<0)<<31>>31|0)|0;E=y;x=Iq(Z|0,_|0,r|0,((r|0)<0)<<31>>31|0)|0;E=_t(x|0,y|0,z|0,E|0)|0;z=y;x=Iq($|0,aa|0,g|0,((g|0)<0)<<31>>31|0)|0;x=_t(E|0,z|0,x|0,y|0)|0;z=y;g=(N(r,ca)|0)+(N(t,ba)|0)+(N(g,U)|0)|0;E=w-P|0;ga=v-j|0;D=u-m|0;E=Iq(X|0,Y|0,E|0,((E|0)<0)<<31>>31|0)|0;ha=y;ga=Iq(Z|0,_|0,ga|0,((ga|0)<0)<<31>>31|0)|0;ha=_t(ga|0,y|0,E|0,ha|0)|0;E=y;D=Iq($|0,aa|0,D|0,((D|0)<0)<<31>>31|0)|0;D=_t(ha|0,E|0,D|0,y|0)|0;E=y;if(!((E|0)>0|(E|0)==0&D>>>0>0)){g=110;break}if((x|0)==0&(z|0)==0){if((g|0)>=0){g=110;break}}else{if((z|0)>=0){g=110;break}if((g|0)>0){C=-1;u=g;t=((g|0)<0)<<31>>31}else{u=Nt(0,0,g|0,((g|0)<0)<<31>>31|0)|0;C=(g|0)!=0&1;u=g|0?u:0;t=g|0?y:0}z=Nt(0,0,x|0,z|0)|0;A=y;if((O|0)>0){g=1;r=-1;B=O;x=((O|0)<0)<<31>>31}else{B=Nt(0,0,O|0,((O|0)<0)<<31>>31|0)|0;g=((O|0)!=0)<<31>>31;r=(O|0)!=0&1;B=O|0?B:0;x=O|0?y:0}if(!((n|0)>0|(n|0)==0&o>>>0>0)){ha=(o|0)!=0|(n|0)!=0;o=Nt(0,0,o|0,n|0)|0;g=ha?r:g;o=ha?o:0;n=ha?y:0}if((C|0)==(g|0)){if(!C){g=110;break}ha=Iq(o|0,0,u|0,0)|0;g=y;r=Iq(n|0,0,u|0,0)|0;O=y;v=Iq(o|0,0,t|0,0)|0;w=y;u=Iq(n|0,0,t|0,0)|0;t=y;v=_t(r|0,0,v|0,0)|0;n=y;t=_t(O|0,0,u|0,t|0)|0;w=_t(t|0,y|0,w|0,0)|0;n=_t(w|0,y|0,n|0,0)|0;w=y;t=_t(0,v|0,ha|0,g|0)|0;u=y;v=_t(n|0,w|0,(u>>>0<v>>>0|(u|0)==(v|0)&t>>>0<0)&1|0,0)|0;w=y;n=Iq(B|0,0,z|0,0)|0;g=y;ha=Iq(x|0,0,z|0,0)|0;O=y;o=Iq(B|0,0,A|0,0)|0;r=y;fa=Iq(x|0,0,A|0,0)|0;ga=y;o=_t(ha|0,0,o|0,0)|0;ha=y;ga=_t(O|0,0,fa|0,ga|0)|0;r=_t(ga|0,y|0,r|0,0)|0;ha=_t(r|0,y|0,ha|0,0)|0;r=y;g=_t(0,o|0,n|0,g|0)|0;n=y;o=_t(ha|0,r|0,(n>>>0<o>>>0|(n|0)==(o|0)&g>>>0<0)&1|0,0)|0;r=y;if(w>>>0<r>>>0|(w|0)==(r|0)&v>>>0<o>>>0)g=-1;else g=w>>>0>r>>>0|(w|0)==(r|0)&v>>>0>o>>>0?1:u>>>0<n>>>0|(u|0)==(n|0)&t>>>0<g>>>0?-1:(u>>>0>n>>>0|(u|0)==(n|0)&t>>>0>g>>>0)&1;g=N(g,C)|0}else g=C-g|0;if((g|0)<=0){g=110;break}}c[f>>2]=F;M=c[F+12>>2]|0;K=c[M+88>>2]|0;g=P;L=c[M+92>>2]|0;M=c[M+96>>2]|0;o=D;n=E}if((g|0)==110)return}if((d|0)>=0)return;F=Nt(0,0,S|0,((S|0)<0)<<31>>31|0)|0;G=y;j=p;g=l;c:while(1){D=g;C=j;d:while(1){E=(N(q-b|0,ca)|0)+(N(s-h|0,ba)|0)+(N(k-D|0,U)|0)|0;do if((C|0?c[C+12>>2]|0:0)?(ea=c[(c[C+4>>2]|0)+8>>2]|0,(c[ea+20>>2]|0)>(c[a+100>>2]|0)):0){B=c[ea+12>>2]|0;z=c[B+88>>2]|0;ha=z-s|0;A=c[B+92>>2]|0;ga=A-q|0;B=c[B+96>>2]|0;g=B-k|0;l=Iq(X|0,Y|0,ha|0,((ha|0)<0)<<31>>31|0)|0;fa=y;j=Iq(Z|0,_|0,ga|0,((ga|0)<0)<<31>>31|0)|0;fa=_t(j|0,y|0,l|0,fa|0)|0;l=y;j=Iq($|0,aa|0,g|0,((g|0)<0)<<31>>31|0)|0;j=_t(fa|0,l|0,j|0,y|0)|0;l=y;g=(N(ga,ca)|0)+(N(ha,ba)|0)+(N(g,U)|0)|0;if((j|0)==0&(l|0)==0)if((g|0)>0)break d;else break;if((l|0)<0){if((g|0)>0){x=-1;n=g;m=((g|0)<0)<<31>>31}else{n=Nt(0,0,g|0,((g|0)<0)<<31>>31|0)|0;x=(g|0)!=0&1;n=g|0?n:0;m=g|0?y:0}t=Nt(0,0,j|0,l|0)|0;u=y;if((E|0)>0){g=1;j=-1;v=E;w=((E|0)<0)<<31>>31}else{v=Nt(0,0,E|0,((E|0)<0)<<31>>31|0)|0;g=((E|0)!=0)<<31>>31;j=(E|0)!=0&1;v=E|0?v:0;w=E|0?y:0}if((d|0)>0|(d|0)==0&i>>>0>0){j=i;l=d}else{l=(i|0)!=0|(d|0)!=0;ha=Nt(0,0,i|0,d|0)|0;g=l?j:g;j=l?ha:0;l=l?y:0}if((x|0)==(g|0)){if(!x)break d;g=Iq(j|0,0,n|0,0)|0;o=y;fa=Iq(l|0,0,n|0,0)|0;T=y;p=Iq(j|0,0,m|0,0)|0;r=y;ha=Iq(l|0,0,m|0,0)|0;n=y;p=_t(fa|0,0,p|0,0)|0;j=y;n=_t(T|0,0,ha|0,n|0)|0;r=_t(n|0,y|0,r|0,0)|0;j=_t(r|0,y|0,j|0,0)|0;r=y;n=_t(0,p|0,g|0,o|0)|0;o=y;p=_t(j|0,r|0,(o>>>0<p>>>0|(o|0)==(p|0)&n>>>0<0)&1|0,0)|0;r=y;j=Iq(v|0,0,t|0,0)|0;g=y;ha=Iq(w|0,0,t|0,0)|0;T=y;l=Iq(v|0,0,u|0,0)|0;m=y;fa=Iq(w|0,0,u|0,0)|0;ga=y;l=_t(ha|0,0,l|0,0)|0;ha=y;ga=_t(T|0,0,fa|0,ga|0)|0;m=_t(ga|0,y|0,m|0,0)|0;ha=_t(m|0,y|0,ha|0,0)|0;m=y;g=_t(0,l|0,j|0,g|0)|0;j=y;l=_t(ha|0,m|0,(j>>>0<l>>>0|(j|0)==(l|0)&g>>>0<0)&1|0,0)|0;m=y;if(r>>>0<m>>>0|(r|0)==(m|0)&p>>>0<l>>>0)g=-1;else g=r>>>0>m>>>0|(r|0)==(m|0)&p>>>0>l>>>0?1:o>>>0<j>>>0|(o|0)==(j|0)&n>>>0<g>>>0?-1:(o>>>0>j>>>0|(o|0)==(j|0)&n>>>0>g>>>0)&1;g=N(g,x)|0}else g=x-g|0;if((g|0)<1)break d}}while(0);g=c[e>>2]|0;if(!g){g=110;break c}if(!(c[g+12>>2]|0)){g=110;break c}w=c[(c[g+8>>2]|0)+4>>2]|0;if((c[w+20>>2]|0)<=(c[a+100>>2]|0)){g=110;break c}j=c[w+12>>2]|0;m=c[j+88>>2]|0;h=m-h|0;l=c[j+92>>2]|0;b=l-b|0;j=c[j+96>>2]|0;g=j-D|0;ha=Iq(h|0,((h|0)<0)<<31>>31|0,V|0,((V|0)<0)<<31>>31|0)|0;fa=y;ga=Iq(b|0,((b|0)<0)<<31>>31|0,W|0,((W|0)<0)<<31>>31|0)|0;fa=_t(ga|0,y|0,ha|0,fa|0)|0;ha=y;ga=Iq(F|0,G|0,g|0,((g|0)<0)<<31>>31|0)|0;if(!((fa|0)==(ga|0)&(ha|0)==(y|0))){g=110;break c}o=Iq(X|0,Y|0,h|0,((h|0)<0)<<31>>31|0)|0;v=y;n=Iq(Z|0,_|0,b|0,((b|0)<0)<<31>>31|0)|0;v=_t(n|0,y|0,o|0,v|0)|0;o=y;n=Iq($|0,aa|0,g|0,((g|0)<0)<<31>>31|0)|0;n=_t(v|0,o|0,n|0,y|0)|0;o=y;g=(N(b,ca)|0)+(N(h,ba)|0)+(N(g,U)|0)|0;v=s-m|0;ga=q-l|0;u=k-j|0;v=Iq(X|0,Y|0,v|0,((v|0)<0)<<31>>31|0)|0;ha=y;ga=Iq(Z|0,_|0,ga|0,((ga|0)<0)<<31>>31|0)|0;ha=_t(ga|0,y|0,v|0,ha|0)|0;v=y;u=Iq($|0,aa|0,u|0,((u|0)<0)<<31>>31|0)|0;u=_t(ha|0,v|0,u|0,y|0)|0;v=y;if((v|0)>=0){g=110;break c}if((n|0)==0&(o|0)==0){if((g|0)<=0){g=110;break c}}else{if((o|0)>=0){g=110;break c}if((g|0)>0){t=-1;j=g;h=((g|0)<0)<<31>>31}else{j=Nt(0,0,g|0,((g|0)<0)<<31>>31|0)|0;t=(g|0)!=0&1;j=g|0?j:0;h=g|0?y:0}p=Nt(0,0,n|0,o|0)|0;r=y;if((E|0)>0){b=1;n=E;o=((E|0)<0)<<31>>31;g=-1}else{n=Nt(0,0,E|0,((E|0)<0)<<31>>31|0)|0;b=((E|0)!=0)<<31>>31;n=E|0?n:0;o=E|0?y:0;g=(E|0)!=0&1}if(!((d|0)>0|(d|0)==0&i>>>0>0)){ha=(i|0)!=0|(d|0)!=0;i=Nt(0,0,i|0,d|0)|0;b=ha?g:b;i=ha?i:0;d=ha?y:0}if((t|0)==(b|0)){if(!t){g=110;break c}m=Iq(i|0,0,j|0,0)|0;l=y;b=Iq(d|0,0,j|0,0)|0;T=y;i=Iq(i|0,0,h|0,0)|0;j=y;ha=Iq(d|0,0,h|0,0)|0;g=y;i=_t(b|0,0,i|0,0)|0;b=y;g=_t(T|0,0,ha|0,g|0)|0;j=_t(g|0,y|0,j|0,0)|0;b=_t(j|0,y|0,b|0,0)|0;j=y;l=_t(0,i|0,m|0,l|0)|0;m=y;i=_t(b|0,j|0,(m>>>0<i>>>0|(m|0)==(i|0)&l>>>0<0)&1|0,0)|0;j=y;b=Iq(n|0,0,p|0,0)|0;g=y;ha=Iq(o|0,0,p|0,0)|0;T=y;d=Iq(n|0,0,r|0,0)|0;h=y;fa=Iq(o|0,0,r|0,0)|0;ga=y;d=_t(ha|0,0,d|0,0)|0;ha=y;ga=_t(T|0,0,fa|0,ga|0)|0;h=_t(ga|0,y|0,h|0,0)|0;ha=_t(h|0,y|0,ha|0,0)|0;h=y;g=_t(0,d|0,b|0,g|0)|0;b=y;d=_t(ha|0,h|0,(b>>>0<d>>>0|(b|0)==(d|0)&g>>>0<0)&1|0,0)|0;h=y;if(j>>>0<h>>>0|(j|0)==(h|0)&i>>>0<d>>>0)g=-1;else g=j>>>0>h>>>0|(j|0)==(h|0)&i>>>0>d>>>0?1:m>>>0<b>>>0|(m|0)==(b|0)&l>>>0<g>>>0?-1:(m>>>0>b>>>0|(m|0)==(b|0)&l>>>0>g>>>0)&1;g=N(g,t)|0}else g=t-b|0;if((g|0)>=0){g=110;break c}}c[e>>2]=w;D=c[w+12>>2]|0;h=c[D+88>>2]|0;b=c[D+92>>2]|0;D=c[D+96>>2]|0;C=c[f>>2]|0;d=v;i=u}j=z-h|0;q=A-b|0;i=B-D|0;j=Iq(X|0,Y|0,j|0,((j|0)<0)<<31>>31|0)|0;s=y;q=Iq(Z|0,_|0,q|0,((q|0)<0)<<31>>31|0)|0;s=_t(q|0,y|0,j|0,s|0)|0;j=y;i=Iq($|0,aa|0,i|0,((i|0)<0)<<31>>31|0)|0;i=_t(s|0,j|0,i|0,y|0)|0;j=(C|0)==(da|0)?0:ea;c[f>>2]=j;s=z;q=A;k=B;g=D;d=y}if((g|0)==110)return}function gc(b,d,e){b=b|0;d=d|0;e=+e;var f=0,h=0.0,i=0.0,j=0,k=0.0,m=0.0,n=0,o=0,p=0.0,q=0,r=0.0,s=0.0,t=0,u=0,v=0,w=0.0,x=0,y=0.0,z=0.0,F=0.0,G=0.0,H=0.0,I=0.0,J=0.0,K=0.0;x=l;l=l+544|0;h=+g[b+100>>2];k=+g[b+104>>2];i=+g[b+108>>2];if(h*h+k*k+i*i>0.0){y=+C(+(1.0-+g[b+244>>2]),+e);g[b+100>>2]=h*y;g[b+104>>2]=k*y;g[b+108>>2]=i*y;m=h*y*h*y+k*y*k*y+i*y*i*y;h=h*y;k=k*y;i=i*y}else m=h*h+k*k+i*i;if(m>0.0){q=c[b+8>>2]|0;c[x+472>>2]=c[q+4>>2];c[x+472+4>>2]=c[q+4+4>>2];c[x+472+8>>2]=c[q+4+8>>2];c[x+472+12>>2]=c[q+4+12>>2];f=x+472+16|0;c[f>>2]=c[q+20>>2];c[f+4>>2]=c[q+20+4>>2];c[f+8>>2]=c[q+20+8>>2];c[f+12>>2]=c[q+20+12>>2];n=x+472+32|0;c[n>>2]=c[q+36>>2];c[n+4>>2]=c[q+36+4>>2];c[n+8>>2]=c[q+36+8>>2];c[n+12>>2]=c[q+36+12>>2];o=x+472+48|0;c[o>>2]=c[q+52>>2];c[o+4>>2]=c[q+52+4>>2];c[o+8>>2]=c[q+52+8>>2];c[o+12>>2]=c[q+52+12>>2];K=+B(+m);I=h*(1.0/K);G=k*(1.0/K);y=i*(1.0/K);k=+E(+(K*e*.5))/+B(+(y*y+(I*I+G*G)));K=+D(+(K*e*.5));yg(x+472|0,x+408|0);H=+g[x+408>>2];J=+g[x+408+12>>2];h=+g[x+408+8>>2];z=+g[x+408+4>>2];i=K*H+I*k*J+G*k*h-y*k*z;m=y*k*H+(G*k*J+K*z)-I*k*h;F=y*k*J+K*h+I*k*z-G*k*H;h=K*J-I*k*H-G*k*z-y*k*h;k=i*(2.0/(h*h+(F*F+(i*i+m*m))));y=m*(2.0/(h*h+(F*F+(i*i+m*m))));z=F*(2.0/(h*h+(F*F+(i*i+m*m))));g[x+472>>2]=1.0-(m*y+F*z);g[x+472+4>>2]=i*y-h*z;g[x+472+8>>2]=i*z+h*y;g[x+472+12>>2]=0.0;g[x+472+16>>2]=i*y+h*z;g[x+472+20>>2]=1.0-(i*k+F*z);g[x+472+24>>2]=m*z-h*k;g[x+472+28>>2]=0.0;g[x+472+32>>2]=i*z-h*y;g[x+472+36>>2]=m*z+h*k;g[x+472+40>>2]=1.0-(i*k+m*y);g[x+472+44>>2]=0.0;q=c[b+8>>2]|0;c[q+304>>2]=(c[q+304>>2]|0)+1;c[q+4>>2]=c[x+472>>2];c[q+4+4>>2]=c[x+472+4>>2];c[q+4+8>>2]=c[x+472+8>>2];c[q+4+12>>2]=c[x+472+12>>2];c[q+20>>2]=c[f>>2];c[q+20+4>>2]=c[f+4>>2];c[q+20+8>>2]=c[f+8>>2];c[q+20+12>>2]=c[f+12>>2];c[q+36>>2]=c[n>>2];c[q+36+4>>2]=c[n+4>>2];c[q+36+8>>2]=c[n+8>>2];c[q+36+12>>2]=c[n+12>>2];c[q+52>>2]=c[o>>2];c[q+52+4>>2]=c[o+4>>2];c[q+52+8>>2]=c[o+8>>2];c[q+52+12>>2]=c[o+12>>2];q=c[b+8>>2]|0;c[b+132>>2]=c[q+52>>2];c[b+132+4>>2]=c[q+52+4>>2];c[b+132+8>>2]=c[q+52+8>>2];c[b+132+12>>2]=c[q+52+12>>2];Zn(b+152|0,q+52|0,16)|0;yg(q+4|0,x+408|0);c[b+168>>2]=c[x+408>>2];c[b+168+4>>2]=c[x+408+4>>2];c[b+168+8>>2]=c[x+408+8>>2];c[b+168+12>>2]=c[x+408+12>>2];c[b+184>>2]=c[b+168>>2];c[b+184+4>>2]=c[b+168+4>>2];c[b+184+8>>2]=c[b+168+8>>2];c[b+184+12>>2]=c[b+168+12>>2]}if((a[b+251>>0]|0)==0?+g[b+252>>2]<=0.0:0){l=x;return}a[b+248>>0]=(sb[c[(c[b>>2]|0)+48>>2]&127](b)|0)&1;h=+g[b+68>>2];i=+g[b+72>>2];k=+g[b+76>>2];m=+C(+(1.0-+g[b+240>>2]),+e);if(h*h+i*i+k*k>0.0){g[b+68>>2]=h*m;g[b+72>>2]=i*m;g[b+76>>2]=k*m}h=+g[b+20>>2]*m-+g[b+52>>2]*e;g[b+20>>2]=h;if(h>0.0?(p=+g[b+32>>2],h>p):0){g[b+20>>2]=p;h=p}if(h<0.0?(K=+A(+h),r=+A(+(+g[b+28>>2])),K>r):0){g[b+20>>2]=-r;h=-r}i=h*e;g[b+24>>2]=i;q=c[b+8>>2]|0;c[x>>2]=c[q+4>>2];c[x+4>>2]=c[q+4+4>>2];c[x+8>>2]=c[q+4+8>>2];c[x+12>>2]=c[q+4+12>>2];c[x+16>>2]=c[q+20>>2];c[x+16+4>>2]=c[q+20+4>>2];c[x+16+8>>2]=c[q+20+8>>2];c[x+16+12>>2]=c[q+20+12>>2];c[x+32>>2]=c[q+36>>2];c[x+32+4>>2]=c[q+36+4>>2];c[x+32+8>>2]=c[q+36+8>>2];c[x+32+12>>2]=c[q+36+12>>2];c[x+48>>2]=c[q+52>>2];c[x+48+4>>2]=c[q+52+4>>2];c[x+48+8>>2]=c[q+52+8>>2];c[x+48+12>>2]=c[q+52+12>>2];if(h<0.0)k=+g[b+60>>2];else k=0.0;c[x+472>>2]=1065353216;n=x+472+4|0;c[n>>2]=0;c[n+4>>2]=0;c[n+8>>2]=0;c[n+12>>2]=0;c[x+472+20>>2]=1065353216;o=x+472+24|0;c[o>>2]=0;c[o+4>>2]=0;c[o+8>>2]=0;c[o+12>>2]=0;c[x+472+40>>2]=1065353216;c[x+472+44>>2]=0;c[x+408>>2]=1065353216;q=x+408+4|0;c[q>>2]=0;c[q+4>>2]=0;c[q+8>>2]=0;c[q+12>>2]=0;c[x+408+20>>2]=1065353216;f=x+408+24|0;c[f>>2]=0;c[f+4>>2]=0;c[f+8>>2]=0;c[f+12>>2]=0;c[x+408+40>>2]=1065353216;c[x+408+44>>2]=0;c[x+472+48>>2]=c[b+132>>2];c[x+472+48+4>>2]=c[b+132+4>>2];c[x+472+48+8>>2]=c[b+132+8>>2];c[x+472+48+12>>2]=c[b+132+12>>2];I=+g[b+256>>2];J=+g[b+260>>2];K=+g[b+264>>2];r=i>0.0?i:0.0;G=k*J+ +g[b+136>>2]+r*+g[b+276>>2];y=k*K+ +g[b+140>>2]+r*+g[b+280>>2];g[b+152>>2]=k*I+ +g[b+132>>2]+ +g[b+272>>2]*r;g[b+156>>2]=G;g[b+160>>2]=y;g[b+164>>2]=0.0;c[b+132>>2]=c[b+152>>2];c[b+132+4>>2]=c[b+152+4>>2];c[b+132+8>>2]=c[b+152+8>>2];c[b+132+12>>2]=c[b+152+12>>2];c[x+408+48>>2]=c[b+152>>2];c[x+408+48+4>>2]=c[b+152+4>>2];c[x+408+48+8>>2]=c[b+152+8>>2];c[x+408+48+12>>2]=c[b+152+12>>2];y=+g[b+168>>2];G=+g[b+172>>2];r=+g[b+176>>2];F=+g[b+180>>2];p=y*(2.0/(y*y+G*G+r*r+F*F));z=G*(2.0/(y*y+G*G+r*r+F*F));H=r*(2.0/(y*y+G*G+r*r+F*F));g[x+472>>2]=1.0-(G*z+r*H);g[n>>2]=y*z-F*H;g[x+472+8>>2]=y*H+F*z;g[x+472+12>>2]=0.0;g[x+472+16>>2]=y*z+F*H;g[x+472+20>>2]=1.0-(y*p+r*H);g[o>>2]=G*H-F*p;g[x+472+28>>2]=0.0;g[x+472+32>>2]=y*H-F*z;g[x+472+36>>2]=G*H+F*p;g[x+472+40>>2]=1.0-(y*p+G*z);g[x+472+44>>2]=0.0;z=+g[b+184>>2];G=+g[b+188>>2];p=+g[b+192>>2];y=+g[b+196>>2];F=z*(2.0/(z*z+G*G+p*p+y*y));H=G*(2.0/(z*z+G*G+p*p+y*y));r=p*(2.0/(z*z+G*G+p*p+y*y));g[x+408>>2]=1.0-(G*H+p*r);g[q>>2]=z*H-y*r;g[x+408+8>>2]=z*r+y*H;g[x+408+12>>2]=0.0;g[x+408+16>>2]=z*H+y*r;g[x+408+20>>2]=1.0-(z*F+p*r);g[f>>2]=G*r-y*F;g[x+408+28>>2]=0.0;g[x+408+32>>2]=z*r-y*H;g[x+408+36>>2]=G*r+y*F;g[x+408+40>>2]=1.0-(z*F+G*H);g[x+408+44>>2]=0.0;f=c[b+8>>2]|0;q=c[b+48>>2]|0;g[x+296+4>>2]=1.0;o=x+296+16|0;c[x+296+80>>2]=0;c[o>>2]=0;c[o+4>>2]=0;c[o+8>>2]=0;c[o+12>>2]=0;c[o+16>>2]=0;c[o+20>>2]=0;c[o+24>>2]=0;c[o+28>>2]=0;c[x+296>>2]=5384;c[x+296+84>>2]=f;g[x+296+88>>2]=-I;g[x+296+92>>2]=-J;g[x+296+96>>2]=-K;g[x+296+100>>2]=0.0;c[x+296+104>>2]=q;q=c[f+188>>2]|0;c[x+296+8>>2]=c[q+4>>2];c[x+296+12>>2]=c[q+8>>2];if(!(a[b+250>>0]|0))ud(d,c[b+12>>2]|0,x+472|0,x+408|0,x+296|0,+g[d+56>>2]);else Xc(f,c[b+12>>2]|0,x+472|0,x+408|0,x+296|0,+g[d+56>>2]);if((+g[x+296+4>>2]<1.0?(j=c[b+8>>2]|0,(c[j+204>>2]&4|0)==0):0)?wb[c[(c[b>>2]|0)+56>>2]&63](b,j,c[x+296+80>>2]|0)|0:0){do if(+g[x+296+48>>2]*+g[b+256>>2]+ +g[x+296+52>>2]*+g[b+260>>2]+ +g[x+296+56>>2]*+g[b+264>>2]>0.0){h=+g[x+296+4>>2];g[b+148>>2]=k*h;if(!(a[b+288>>0]|0)){c[b+132>>2]=c[b+152>>2];c[b+132+4>>2]=c[b+152+4>>2];c[b+132+8>>2]=c[b+152+8>>2];c[b+132+12>>2]=c[b+152+12>>2];break}else{g[b+132>>2]=(1.0-h)*+g[b+132>>2]+h*+g[b+152>>2];g[b+136>>2]=(1.0-h)*+g[b+136>>2]+h*+g[b+156>>2];g[b+140>>2]=(1.0-h)*+g[b+140>>2]+h*+g[b+160>>2];break}}while(0);o=c[b+8>>2]|0;c[o+52>>2]=c[b+132>>2];c[o+52+4>>2]=c[b+132+4>>2];c[o+52+8>>2]=c[b+132+8>>2];c[o+52+12>>2]=c[b+132+12>>2];q=c[b+8>>2]|0;c[q+304>>2]=(c[q+304>>2]|0)+1;c[q+4>>2]=c[o+4>>2];c[q+4+4>>2]=c[o+4+4>>2];c[q+4+8>>2]=c[o+4+8>>2];c[q+4+12>>2]=c[o+4+12>>2];c[q+20>>2]=c[o+20>>2];c[q+20+4>>2]=c[o+20+4>>2];c[q+20+8>>2]=c[o+20+8>>2];c[q+20+12>>2]=c[o+20+12>>2];c[q+36>>2]=c[o+36>>2];c[q+36+4>>2]=c[o+36+4>>2];c[q+36+8>>2]=c[o+36+8>>2];c[q+36+12>>2]=c[o+36+12>>2];c[q+52>>2]=c[o+52>>2];c[q+52+4>>2]=c[o+52+4>>2];c[q+52+8>>2]=c[o+52+8>>2];c[q+52+12>>2]=c[o+52+12>>2];a[b+220>>0]=0;if((((Fd(b,d)|0?(a[b+220>>0]=1,Fd(b,d)|0):0)?(a[b+220>>0]=1,Fd(b,d)|0):0)?(a[b+220>>0]=1,Fd(b,d)|0):0)?(a[b+220>>0]=1,Fd(b,d)|0):0)a[b+220>>0]=1;q=(c[b+8>>2]|0)+52|0;c[b+152>>2]=c[q>>2];c[b+152+4>>2]=c[q+4>>2];c[b+152+8>>2]=c[q+8>>2];c[b+152+12>>2]=c[q+12>>2];Zn(b+132|0,q|0,16)|0;if(+g[b+24>>2]>0.0){g[b+24>>2]=0.0;g[b+20>>2]=0.0;c[b+148>>2]=c[b+60>>2]}}else{g[b+148>>2]=k;c[b+132>>2]=c[b+152>>2];c[b+132+4>>2]=c[b+152+4>>2];c[b+132+8>>2]=c[b+152+8>>2];c[b+132+12>>2]=c[b+152+12>>2]}if(!(a[b+251>>0]|0)){J=+g[b+252>>2];K=J>e?e:J;g[b+252>>2]=J-e;Pc(b,d,K*+g[b+68>>2],K*+g[b+72>>2],K*+g[b+76>>2])}else Pc(b,d,+g[b+68>>2],+g[b+72>>2],+g[b+76>>2]);c[x+280>>2]=c[b+152>>2];c[x+280+4>>2]=c[b+152+4>>2];c[x+280+8>>2]=c[b+152+8>>2];c[x+280+12>>2]=c[b+152+12>>2];K=+g[b+20>>2];h=(K<0.0?-K:0.0)*e;if(!(K>0.0)){do if(h>0.0?(s=+g[b+28>>2],h>s):0){if((a[b+248>>0]|0)==0?a[b+249>>0]|0:0)break;h=s}while(0);p=h+ +g[b+148>>2];k=+g[b+256>>2]*p;m=p*+g[b+260>>2];p=p*+g[b+264>>2];g[b+152>>2]=+g[b+152>>2]-k;g[b+156>>2]=+g[b+156>>2]-m;g[b+160>>2]=+g[b+160>>2]-p;f=c[b+8>>2]|0;o=c[b+48>>2]|0;q=x+172+4|0;g[q>>2]=1.0;n=x+172+16|0;c[x+172+80>>2]=0;c[n>>2]=0;c[n+4>>2]=0;c[n+8>>2]=0;c[n+12>>2]=0;c[n+16>>2]=0;c[n+20>>2]=0;c[n+24>>2]=0;c[n+28>>2]=0;c[x+172>>2]=5384;c[x+172+84>>2]=f;c[x+172+88>>2]=c[b+256>>2];c[x+172+88+4>>2]=c[b+256+4>>2];c[x+172+88+8>>2]=c[b+256+8>>2];c[x+172+88+12>>2]=c[b+256+12>>2];c[x+172+104>>2]=o;n=c[f+188>>2]|0;c[x+172+8>>2]=c[n+4>>2];c[x+172+12>>2]=c[n+8>>2];g[x+64+4>>2]=1.0;j=x+64+16|0;c[x+64+80>>2]=0;c[j>>2]=0;c[j+4>>2]=0;c[j+8>>2]=0;c[j+12>>2]=0;c[j+16>>2]=0;c[j+20>>2]=0;c[j+24>>2]=0;c[j+28>>2]=0;c[x+64>>2]=5384;c[x+64+84>>2]=f;c[x+64+88>>2]=c[b+256>>2];c[x+64+88+4>>2]=c[b+256+4>>2];c[x+64+88+8>>2]=c[b+256+8>>2];c[x+64+88+12>>2]=c[b+256+12>>2];c[x+64+104>>2]=o;c[x+64+8>>2]=c[n+4>>2];c[x+64+12>>2]=c[n+8>>2];n=x+408+24|0;o=x+296+44|0;f=0;while(1){c[x+408+12>>2]=0;c[x+408+12+4>>2]=0;c[x+408+20>>2]=1065353216;c[n>>2]=0;c[n+4>>2]=0;c[n+8>>2]=0;c[n+12>>2]=0;c[x+408+40>>2]=1065353216;c[x+408+44>>2]=0;c[x+296>>2]=1065353216;c[x+296+4>>2]=0;c[x+296+4+4>>2]=0;c[x+296+4+8>>2]=0;c[x+296+4+12>>2]=0;c[x+296+20>>2]=1065353216;c[x+296+24>>2]=0;c[x+296+24+4>>2]=0;c[x+296+24+8>>2]=0;c[x+296+24+12>>2]=0;c[x+296+40>>2]=1065353216;c[o>>2]=0;c[o+4>>2]=0;c[o+8>>2]=0;c[o+12>>2]=0;c[o+16>>2]=0;c[x+472+48>>2]=c[b+132>>2];c[x+472+48+4>>2]=c[b+132+4>>2];c[x+472+48+8>>2]=c[b+132+8>>2];c[x+472+48+12>>2]=c[b+132+12>>2];c[x+408+48>>2]=c[b+152>>2];c[x+408+48+4>>2]=c[b+152+4>>2];c[x+408+48+8>>2]=c[b+152+8>>2];c[x+408+48+12>>2]=c[b+152+12>>2];G=+g[b+168>>2];K=+g[b+172>>2];F=+g[b+176>>2];I=+g[b+180>>2];z=G*(2.0/(G*G+K*K+F*F+I*I));H=K*(2.0/(G*G+K*K+F*F+I*I));J=F*(2.0/(G*G+K*K+F*F+I*I));g[x+472>>2]=1.0-(K*H+F*J);g[x+472+4>>2]=G*H-I*J;g[x+472+8>>2]=G*J+I*H;g[x+472+12>>2]=0.0;g[x+472+16>>2]=G*H+I*J;g[x+472+20>>2]=1.0-(G*z+F*J);g[x+472+24>>2]=K*J-I*z;g[x+472+28>>2]=0.0;g[x+472+32>>2]=G*J-I*H;g[x+472+36>>2]=K*J+I*z;g[x+472+40>>2]=1.0-(G*z+K*H);g[x+472+44>>2]=0.0;H=+g[b+184>>2];K=+g[b+188>>2];z=+g[b+192>>2];G=+g[b+196>>2];I=H*(2.0/(H*H+K*K+z*z+G*G));J=K*(2.0/(H*H+K*K+z*z+G*G));F=z*(2.0/(H*H+K*K+z*z+G*G));g[x+408>>2]=1.0-(K*J+z*F);g[x+408+4>>2]=H*J-G*F;g[x+408+8>>2]=H*F+G*J;g[x+408+12>>2]=0.0;g[x+408+16>>2]=H*J+G*F;g[x+408+20>>2]=1.0-(H*I+z*F);g[n>>2]=K*F-G*I;g[x+408+28>>2]=0.0;g[x+408+32>>2]=H*F-G*J;g[x+408+36>>2]=K*F+G*I;g[x+408+40>>2]=1.0-(H*I+K*J);g[x+408+44>>2]=0.0;J=+g[b+156>>2]-m;K=+g[b+160>>2]-p;g[x+296+48>>2]=+g[b+152>>2]-k;g[x+296+52>>2]=J;g[x+296+56>>2]=K;g[x+296+60>>2]=0.0;if(!(a[b+250>>0]|0)){ud(d,c[b+12>>2]|0,x+472|0,x+408|0,x+172|0,+g[d+56>>2]);if(!(+g[q>>2]<1.0)?(c[(c[b+8>>2]|0)+204>>2]&4|0)==0:0)ud(d,c[b+12>>2]|0,x+472|0,x+296|0,x+64|0,+g[d+56>>2])}else{Xc(c[b+8>>2]|0,c[b+12>>2]|0,x+472|0,x+408|0,x+172|0,+g[d+56>>2]);if(!(+g[q>>2]<1.0)?(t=c[b+8>>2]|0,(c[t+204>>2]&4|0)==0):0)Xc(t,c[b+12>>2]|0,x+472|0,x+296|0,x+64|0,+g[d+56>>2])}i=+g[b+20>>2];i=(i<0.0?-i:0.0)*e;if(!(a[b+290>>0]|0))if(+g[x+64+4>>2]<1.0?(v=c[b+8>>2]|0,(c[v+204>>2]&4|0)==0):0)j=wb[c[(c[b>>2]|0)+56>>2]&63](b,v,c[x+64+80>>2]|0)|0;else j=0;else if((+g[q>>2]<1.0?1:+g[x+64+4>>2]<1.0)?(u=c[b+8>>2]|0,(c[u+204>>2]&4|0)==0):0)j=wb[c[(c[b>>2]|0)+56>>2]&63](b,u,c[x+172+80>>2]|0)|0;else j=0;if(+g[b+20>>2]<0.0)h=+g[b+60>>2];else h=0.0;if(f|(!(i>0.0)|!(i<h)|j^1))break;if((a[b+248>>0]|0)==0?a[b+249>>0]|0:0){f=0;break}c[b+152>>2]=c[x+280>>2];c[b+152+4>>2]=c[x+280+4>>2];c[b+152+8>>2]=c[x+280+8>>2];c[b+152+12>>2]=c[x+280+12>>2];p=h+ +g[b+148>>2];k=+g[b+256>>2]*p;m=p*+g[b+260>>2];p=p*+g[b+264>>2];g[b+152>>2]=+g[b+152>>2]-k;g[b+156>>2]=+g[b+156>>2]-m;g[b+160>>2]=+g[b+160>>2]-p;f=1}j=c[b+8>>2]|0;if(+g[q>>2]<1.0?(c[j+204>>2]&4|0)==0:0)if(f|(wb[c[(c[b>>2]|0)+56>>2]&63](b,j,c[x+172+80>>2]|0)|0))f=69;else f=75;else if(f)f=69;else f=75;if((f|0)==69){h=+g[b+136>>2];i=(h-+g[x+172+68>>2])*.5;do if(a[b+290>>0]|0)if(!(a[b+289>>0]|0)){g[b+132>>2]=(1.0-i)*+g[b+132>>2]+i*+g[b+152>>2];g[b+136>>2]=h*(1.0-i)+i*+g[b+156>>2];g[b+140>>2]=(1.0-i)*+g[b+140>>2]+i*+g[b+160>>2];f=b+289|0;break}else{K=+g[q>>2];g[b+132>>2]=(1.0-K)*+g[b+132>>2]+K*+g[b+152>>2];g[b+136>>2]=h*(1.0-K)+K*+g[b+156>>2];g[b+140>>2]=(1.0-K)*+g[b+140>>2]+K*+g[b+160>>2];f=b+289|0;break}else{K=+g[q>>2];g[b+132>>2]=(1.0-K)*+g[b+132>>2]+K*+g[b+152>>2];g[b+136>>2]=h*(1.0-K)+K*+g[b+156>>2];g[b+140>>2]=(1.0-K)*+g[b+140>>2]+K*+g[b+160>>2];f=b+289|0}while(0);a[f>>0]=0;g[b+20>>2]=0.0;g[b+24>>2]=0.0;a[b+249>>0]=0}else if((f|0)==75){a[b+289>>0]=1;do if(a[b+290>>0]|0?(K=+g[b+20>>2],w=+g[b+28>>2],(K<0.0?-K:0.0)*e>w):0){if((a[b+248>>0]|0)==0?a[b+249>>0]|0:0)break;H=m+ +g[b+156>>2];J=p+ +g[b+160>>2];G=w+ +g[b+148>>2];I=G*+g[b+260>>2];K=G*+g[b+264>>2];g[b+152>>2]=k+ +g[b+152>>2]-+g[b+256>>2]*G;g[b+156>>2]=H-I;g[b+160>>2]=J-K}while(0);c[b+132>>2]=c[b+152>>2];c[b+132+4>>2]=c[b+152+4>>2];c[b+132+8>>2]=c[b+152+8>>2];c[b+132+12>>2]=c[b+152+12>>2]}}c[x+48>>2]=c[b+132>>2];c[x+48+4>>2]=c[b+132+4>>2];c[x+48+8>>2]=c[b+132+8>>2];c[x+48+12>>2]=c[b+132+12>>2];v=c[b+8>>2]|0;c[v+304>>2]=(c[v+304>>2]|0)+1;c[v+4>>2]=c[x>>2];c[v+4+4>>2]=c[x+4>>2];c[v+4+8>>2]=c[x+8>>2];c[v+4+12>>2]=c[x+12>>2];c[v+20>>2]=c[x+16>>2];c[v+20+4>>2]=c[x+16+4>>2];c[v+20+8>>2]=c[x+16+8>>2];c[v+20+12>>2]=c[x+16+12>>2];c[v+36>>2]=c[x+32>>2];c[v+36+4>>2]=c[x+32+4>>2];c[v+36+8>>2]=c[x+32+8>>2];c[v+36+12>>2]=c[x+32+12>>2];c[v+52>>2]=c[x+48>>2];c[v+52+4>>2]=c[x+48+4>>2];c[v+52+8>>2]=c[x+48+8>>2];c[v+52+12>>2]=c[x+48+12>>2];a[b+220>>0]=0;a:do if(Fd(b,d)|0){f=0;while(1){a[b+220>>0]=1;if(f>>>0>3)break a;if(Fd(b,d)|0)f=f+1|0;else break}}while(0);l=x;return}function hc(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0,k=0,m=0.0,n=0,o=0.0,p=0.0,q=0,r=0,s=0.0,t=0,u=0.0,v=0,w=0.0,x=0,y=0,z=0.0,A=0.0,B=0.0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0;J=l;l=l+176|0;if((e|0)<1){f=c[b+12>>2]|0;if(f|0){if(a[b+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[b+12>>2]=0}a[b+16>>0]=1;c[b+12>>2]=0;c[b+4>>2]=0;c[b+8>>2]=0;f=c[b+32>>2]|0;if(f|0){if(a[b+36>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[b+32>>2]=0}a[b+36>>0]=1;c[b+32>>2]=0;c[b+24>>2]=0;c[b+28>>2]=0;f=c[b+52>>2]|0;if(f|0){if(a[b+56>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[b+52>>2]=0}a[b+56>>0]=1;c[b+52>>2]=0;c[b+44>>2]=0;c[b+48>>2]=0;l=J;return}c[J+32>>2]=0;c[J+36>>2]=0;c[J+40>>2]=0;c[J+44>>2]=256;c[J+48>>2]=0;c[J+52>>2]=0;c[J+56>>2]=0;c[J+60>>2]=256;c[J+64>>2]=0;c[J+68>>2]=0;c[J+72>>2]=0;c[J+76>>2]=256;a[J+96>>0]=1;c[J+92>>2]=0;c[J+84>>2]=0;c[J+88>>2]=0;f=0;h=d;i=-246811958;r=1900671690;t=-246811958;v=1900671690;x=-246811958;y=1900671690;while(1){k=c[h>>2]|0;n=c[h+4>>2]|0;q=c[h+8>>2]|0;m=(c[j>>2]=k,+g[j>>2]);r=m<(c[j>>2]=r,+g[j>>2])?k:r;o=(c[j>>2]=n,+g[j>>2]);v=o<(c[j>>2]=v,+g[j>>2])?n:v;p=(c[j>>2]=q,+g[j>>2]);y=p<(c[j>>2]=y,+g[j>>2])?q:y;i=(c[j>>2]=i,+g[j>>2])<m?k:i;t=(c[j>>2]=t,+g[j>>2])<o?n:t;x=(c[j>>2]=x,+g[j>>2])<p?q:x;f=f+1|0;if((f|0)==(e|0))break;else h=h+16|0}w=(c[j>>2]=i,+g[j>>2]);u=(c[j>>2]=r,+g[j>>2]);s=(c[j>>2]=t,+g[j>>2]);p=(c[j>>2]=v,+g[j>>2]);o=(c[j>>2]=x,+g[j>>2]);m=(c[j>>2]=y,+g[j>>2]);h=w-u<s-p?(s-p<o-m?2:1):w-u<o-m?2:0;c[J+112>>2]=h;f=w-u<s-p?(w-u<o-m?0:2):s-p<o-m?1:2;if((f|0)==(h|0))f=((h+1|0)>>>0)%3|0;c[J+104>>2]=f;r=(h^3)-f|0;c[J+108>>2]=r;z=((r+1|0)%3|0|0)==(h|0)?(w-u)*9.788566967472434e-05:-((w-u)*9.788566967472434e-05);A=((r+1|0)%3|0|0)==(h|0)?(s-p)*9.788566967472434e-05:-((s-p)*9.788566967472434e-05);B=((r+1|0)%3|0|0)==(h|0)?(o-m)*9.788566967472434e-05:-((o-m)*9.788566967472434e-05);g[J>>2]=z;g[J+4>>2]=A;g[J+8>>2]=B;g[J+12>>2]=0.0;z=z!=0.0?1.0/z:z;A=A!=0.0?1.0/A:A;B=B!=0.0?1.0/B:B;g[J+16>>2]=(w+u)*.5;g[J+20>>2]=(s+p)*.5;g[J+24>>2]=(o+m)*.5;g[J+28>>2]=0.0;r=J+144+16|0;a[r>>0]=1;t=J+144+12|0;c[t>>2]=0;c[J+144+4>>2]=0;c[J+144+8>>2]=0;c[6485]=(c[6485]|0)+1;f=ec((e<<4|3)+16|0)|0;if(!f)h=0;else{c[(f+4+15&-16)+-4>>2]=f;h=f+4+15&-16}i=c[J+144+4>>2]|0;k=c[t>>2]|0;if((i|0)<=0){if(k|0)I=25}else{f=0;do{I=h+(f<<4)|0;G=k+(f<<4)|0;c[I>>2]=c[G>>2];c[I+4>>2]=c[G+4>>2];c[I+8>>2]=c[G+8>>2];c[I+12>>2]=c[G+12>>2];f=f+1|0}while((f|0)!=(i|0));I=25}if((I|0)==25){if(a[r>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}c[t>>2]=0}a[r>>0]=1;c[t>>2]=h;c[J+144+8>>2]=e;c[h>>2]=c[J+128>>2];c[h+4>>2]=c[J+128+4>>2];c[h+8>>2]=c[J+128+8>>2];c[h+12>>2]=c[J+128+12>>2];if((e|0)!=1){f=1;do{G=(c[t>>2]|0)+(f<<4)|0;c[G>>2]=c[J+128>>2];c[G+4>>2]=c[J+128+4>>2];c[G+8>>2]=c[J+128+8>>2];c[G+12>>2]=c[J+128+12>>2];f=f+1|0}while((f|0)!=(e|0))}c[J+144+4>>2]=e;i=J+128+(c[J+108>>2]<<2)|0;k=c[t>>2]|0;n=J+128+(c[J+112>>2]<<2)|0;q=J+128+(c[J+104>>2]<<2)|0;m=+g[J+16>>2];o=+g[J+20>>2];p=+g[J+24>>2];h=0;f=d;while(1){u=A*(+g[f+4>>2]-o);w=B*(+g[f+8>>2]-p);g[J+128>>2]=z*(+g[f>>2]-m);g[J+128+4>>2]=u;g[J+128+8>>2]=w;g[J+128+12>>2]=0.0;c[k+(h<<4)>>2]=~~+g[i>>2];c[k+(h<<4)+4>>2]=~~+g[n>>2];c[k+(h<<4)+8>>2]=~~+g[q>>2];c[k+(h<<4)+12>>2]=h;h=h+1|0;if((h|0)==(e|0))break;else f=f+16|0}if((e|0)>1)bg(J+144|0,0,e+-1|0);c[J+36>>2]=c[J+32>>2];c[J+40>>2]=0;c[J+44>>2]=e;f=c[J+84>>2]|0;if((f|0)<(e|0)){if((c[J+88>>2]|0)<(e|0)){if(!e){h=0;k=f}else{c[6485]=(c[6485]|0)+1;h=ec((e<<2|3)+16|0)|0;if(!h)h=0;else{c[(h+4+15&-16)+-4>>2]=h;h=h+4+15&-16}k=c[J+84>>2]|0}if((k|0)>0){i=0;do{c[h+(i<<2)>>2]=c[(c[J+92>>2]|0)+(i<<2)>>2];i=i+1|0}while((i|0)!=(k|0))}i=c[J+92>>2]|0;if(i|0){if(a[J+96>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0)}c[J+92>>2]=0}a[J+96>>0]=1;c[J+92>>2]=h;c[J+88>>2]=e}do{c[(c[J+92>>2]|0)+(f<<2)>>2]=0;f=f+1|0}while((f|0)!=(e|0))}c[J+84>>2]=e;n=0;do{f=c[J+40>>2]|0;if(!f){f=c[J+36>>2]|0;if(!f){c[6485]=(c[6485]|0)+1;f=ec(31)|0;if(!f)h=0;else{c[(f+4+15&-16)+-4>>2]=f;h=f+4+15&-16}f=c[J+44>>2]|0;c[h+4>>2]=f;i=h+8|0;c[i>>2]=0;c[6485]=(c[6485]|0)+1;f=ec((f*112|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}c[h>>2]=f;c[i>>2]=c[J+32>>2];c[J+32>>2]=h}else{c[J+36>>2]=c[f+8>>2];h=f}f=c[h>>2]|0;k=c[h+4>>2]|0;if((k|0)>0?(c[f>>2]=(k|0)!=1?f+112|0:0,(k|0)!=1):0){h=1;i=f+112|0;do{h=h+1|0;G=(h|0)<(k|0);F=i;i=i+112|0;c[F>>2]=G?i:0}while(G)}}c[J+40>>2]=c[f>>2];G=f+104|0;c[f>>2]=0;c[f+4>>2]=0;c[f+8>>2]=0;c[f+12>>2]=0;c[f+16>>2]=0;c[G>>2]=-1;c[f+8>>2]=0;E=(c[t>>2]|0)+(n<<4)|0;F=f+88|0;c[F>>2]=c[E>>2];c[F+4>>2]=c[E+4>>2];c[F+8>>2]=c[E+8>>2];c[F+12>>2]=c[E+12>>2];c[G>>2]=-1;c[(c[J+92>>2]|0)+(n<<2)>>2]=f;n=n+1|0}while((n|0)<(e|0));f=c[t>>2]|0;if(f|0){if(a[r>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[t>>2]=0}a[r>>0]=1;c[t>>2]=0;c[J+144+4>>2]=0;c[J+144+8>>2]=0;c[J+52>>2]=c[J+48>>2];c[J+56>>2]=0;c[J+60>>2]=e*6;c[J+116>>2]=0;c[J+120>>2]=0;c[J+100>>2]=-3;c[J+128>>2]=0;c[J+128+4>>2]=0;c[J+128+8>>2]=0;c[J+128+12>>2]=0;ac(J,0,e,J+128|0);c[J+124>>2]=c[J+128>>2];f=c[t>>2]|0;if(f|0){if(a[r>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[t>>2]=0}f=c[b+4>>2]|0;if((f|0)<0){if((c[b+8>>2]|0)<0){h=c[b+12>>2]|0;if(h|0){if(a[b+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[b+12>>2]=0}a[b+16>>0]=1;c[b+12>>2]=0;c[b+8>>2]=0}do{G=(c[b+12>>2]|0)+(f<<4)|0;c[G>>2]=c[J+144>>2];c[G+4>>2]=c[J+144+4>>2];c[G+8>>2]=c[J+144+8>>2];c[G+12>>2]=c[J+144+12>>2];f=f+1|0}while((f|0)!=0)}c[b+4>>2]=0;c[J+144>>2]=0;c[J+144+4>>2]=0;c[J+144+8>>2]=0;f=c[b+24>>2]|0;if((f|0)<0){if((c[b+28>>2]|0)<0){h=c[b+32>>2]|0;if(h|0){if(a[b+36>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[h+-4>>2]|0)}c[b+32>>2]=0}a[b+36>>0]=1;c[b+32>>2]=0;c[b+28>>2]=0}do{G=(c[b+32>>2]|0)+(f*12|0)|0;c[G>>2]=c[J+144>>2];c[G+4>>2]=c[J+144+4>>2];c[G+8>>2]=c[J+144+8>>2];f=f+1|0}while((f|0)!=0)}c[b+24>>2]=0;h=c[b+44>>2]|0;if((h|0)<0){f=c[b+52>>2]|0;if((c[b+48>>2]|0)<0){if(f|0?a[b+56>>0]|0:0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}a[b+56>>0]=1;c[b+52>>2]=0;c[b+48>>2]=0;f=0}uj(f+(h<<2)|0,0,N(h,-4)|0)|0}c[b+44>>2]=0;h=c[J+124>>2]|0;if((c[h+104>>2]|0)<0){c[h+104>>2]=0;c[6485]=(c[6485]|0)+1;f=ec(23)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}c[f>>2]=h;G=0;q=1;r=f;t=1;i=f;x=f;while(1){if((c[h+100>>2]|0)>-1){g[J+144+(c[J+108>>2]<<2)>>2]=+(c[h+88>>2]|0);g[J+144+(c[J+112>>2]<<2)>>2]=+(c[h+92>>2]|0);m=+(c[h+96>>2]|0)}else{m=+Jj(h+24|0);F=h+72|0;m=m/+Jj(F);g[J+144+(c[J+108>>2]<<2)>>2]=m;m=+Jj(h+40|0);m=m/+Jj(F);g[J+144+(c[J+112>>2]<<2)>>2]=m;m=+Jj(h+56|0);m=m/+Jj(F)}g[J+144+(c[J+104>>2]<<2)>>2]=m;m=+g[J+144>>2]*+g[J>>2]+ +g[J+16>>2];o=+g[J+144+4>>2]*+g[J+4>>2]+ +g[J+20>>2];p=+g[J+144+8>>2]*+g[J+8>>2]+ +g[J+24>>2];k=c[b+4>>2]|0;if((k|0)==(c[b+8>>2]|0)?(H=(k|0)==0?1:k<<1,(k|0)<(H|0)):0){if(!H)f=0;else{c[6485]=(c[6485]|0)+1;f=ec((H<<4|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}k=c[b+4>>2]|0}if((k|0)>0){n=0;do{F=f+(n<<4)|0;E=(c[b+12>>2]|0)+(n<<4)|0;c[F>>2]=c[E>>2];c[F+4>>2]=c[E+4>>2];c[F+8>>2]=c[E+8>>2];c[F+12>>2]=c[E+12>>2];n=n+1|0}while((n|0)!=(k|0))}k=c[b+12>>2]|0;if(k|0){if(a[b+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}c[b+12>>2]=0}a[b+16>>0]=1;c[b+12>>2]=f;c[b+8>>2]=H;f=c[b+4>>2]|0}else f=k;F=c[b+12>>2]|0;g[F+(f<<4)>>2]=m;g[F+(f<<4)+4>>2]=o;g[F+(f<<4)+8>>2]=p;g[F+(f<<4)+12>>2]=0.0;c[b+4>>2]=(c[b+4>>2]|0)+1;F=c[h+8>>2]|0;if(!F){k=q;y=r;h=t}else{D=F;E=-1;f=-1;y=q;e=r;h=t;while(1){C=D+20|0;n=c[C>>2]|0;if((n|0)<0){d=c[b+24>>2]|0;c[J+144>>2]=0;c[J+144+4>>2]=0;c[J+144+8>>2]=0;do if((d|0)==(c[b+28>>2]|0)){r=(d|0)==0?1:d<<1;if((d|0)>=(r|0)){k=d;break}if(!r){k=0;q=d}else{c[6485]=(c[6485]|0)+1;k=ec((r*12|3)+16|0)|0;if(!k)k=0;else{c[(k+4+15&-16)+-4>>2]=k;k=k+4+15&-16}q=c[b+24>>2]|0}if((q|0)>0){n=0;do{v=k+(n*12|0)|0;t=(c[b+32>>2]|0)+(n*12|0)|0;c[v>>2]=c[t>>2];c[v+4>>2]=c[t+4>>2];c[v+8>>2]=c[t+8>>2];n=n+1|0}while((n|0)!=(q|0))}n=c[b+32>>2]|0;if(n|0){if(a[b+36>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[n+-4>>2]|0)}c[b+32>>2]=0}a[b+36>>0]=1;c[b+32>>2]=k;c[b+28>>2]=r;k=c[b+24>>2]|0}else k=d;while(0);k=(c[b+32>>2]|0)+(k*12|0)|0;c[k>>2]=c[J+144>>2];c[k+4>>2]=c[J+144+4>>2];c[k+8>>2]=c[J+144+8>>2];k=(c[b+24>>2]|0)+1|0;c[b+24>>2]=k;c[J+144>>2]=0;c[J+144+4>>2]=0;c[J+144+8>>2]=0;do if((k|0)==(c[b+28>>2]|0)){r=(k|0)==0?1:k<<1;if((k|0)>=(r|0))break;if(!r)q=0;else{c[6485]=(c[6485]|0)+1;k=ec((r*12|3)+16|0)|0;if(!k)k=0;else{c[(k+4+15&-16)+-4>>2]=k;k=k+4+15&-16}q=k;k=c[b+24>>2]|0}if((k|0)>0){n=0;do{v=q+(n*12|0)|0;t=(c[b+32>>2]|0)+(n*12|0)|0;c[v>>2]=c[t>>2];c[v+4>>2]=c[t+4>>2];c[v+8>>2]=c[t+8>>2];n=n+1|0}while((n|0)!=(k|0))}k=c[b+32>>2]|0;if(k|0){if(a[b+36>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}c[b+32>>2]=0}a[b+36>>0]=1;c[b+32>>2]=q;c[b+28>>2]=r;k=c[b+24>>2]|0}while(0);v=(c[b+32>>2]|0)+(k*12|0)|0;c[v>>2]=c[J+144>>2];c[v+4>>2]=c[J+144+4>>2];c[v+8>>2]=c[J+144+8>>2];c[b+24>>2]=(c[b+24>>2]|0)+1;v=c[b+32>>2]|0;c[C>>2]=d;c[(c[D+8>>2]|0)+20>>2]=d+1;c[v+(d*12|0)+4>>2]=1;c[v+((d+1|0)*12|0)+4>>2]=-1;t=c[D+12>>2]|0;k=c[t+104>>2]|0;if((k|0)<0){c[t+104>>2]=h;do if((h|0)==(y|0)){k=(y|0)==0?1:y<<1;if((y|0)>=(k|0)){k=y;n=e;r=x;break}do if(!k)q=0;else{c[6485]=(c[6485]|0)+1;n=ec((k<<2|3)+16|0)|0;if(!n){q=0;break}c[(n+4+15&-16)+-4>>2]=n;q=n+4+15&-16}while(0);if((y|0)>0){n=0;do{c[q+(n<<2)>>2]=c[e+(n<<2)>>2];n=n+1|0}while((n|0)!=(y|0));if(!i){n=q;r=q;i=q;break}}else if((e|0)==0|(i|0)==0){n=q;r=q;i=q;break}c[6486]=(c[6486]|0)+1;gd(c[i+-4>>2]|0);n=q;r=q;i=q}else{k=y;n=e;r=x}while(0);c[n+(h<<2)>>2]=t;t=h;h=h+1|0;q=r}else{t=k;k=y;n=e;q=x}c[v+(d*12|0)+8>>2]=t;c[v+((d+1|0)*12|0)+8>>2]=G;r=n;n=c[C>>2]|0}else{k=y;r=e;q=x}if((E|0)>-1)c[(c[b+32>>2]|0)+(n*12|0)>>2]=E-n;else f=n;D=c[D>>2]|0;if((D|0)==(F|0))break;else{E=n;y=k;e=r;x=q}}c[(c[b+32>>2]|0)+(f*12|0)>>2]=n-f;y=r;x=q}f=G+1|0;if((f|0)>=(h|0))break;G=f;q=k;r=y;t=h;h=c[y+(f<<2)>>2]|0}t=0;while(1){v=c[(c[y+(t<<2)>>2]|0)+8>>2]|0;if(v|0){r=v;do{q=r+20|0;f=c[q>>2]|0;if((f|0)>-1){h=c[b+44>>2]|0;do if((h|0)==(c[b+48>>2]|0)){n=(h|0)==0?1:h<<1;if((h|0)>=(n|0))break;if(!n)f=0;else{c[6485]=(c[6485]|0)+1;f=ec((n<<2|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}h=c[b+44>>2]|0}k=c[b+52>>2]|0;if((h|0)<=0){if(k)I=186}else{i=0;do{c[f+(i<<2)>>2]=c[k+(i<<2)>>2];i=i+1|0}while((i|0)!=(h|0));I=186}if((I|0)==186){I=0;if(a[b+56>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[k+-4>>2]|0)}c[b+52>>2]=0;h=c[b+44>>2]|0}a[b+56>>0]=1;c[b+52>>2]=f;c[b+48>>2]=n;f=c[q>>2]|0}while(0);c[(c[b+52>>2]|0)+(h<<2)>>2]=f;c[b+44>>2]=(c[b+44>>2]|0)+1;f=r;do{c[f+20>>2]=-1;f=c[(c[f+8>>2]|0)+4>>2]|0}while((f|0)!=(r|0))}r=c[r>>2]|0}while((r|0)!=(v|0))}if((t|0)==(G|0))break;else t=t+1|0}if(!((y|0)==0|(x|0)==0)){c[6486]=(c[6486]|0)+1;gd(c[x+-4>>2]|0)}}Bh(J);l=J;return}
function Hh(a,b,d){a=a|0;b=+b;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,j=0.0,k=0;e=l;l=l+96|0;c[e+32>>2]=1065353216;c[e+32+4>>2]=0;c[e+32+4+4>>2]=0;c[e+32+4+8>>2]=0;c[e+32+4+12>>2]=0;c[e+32+20>>2]=1065353216;c[e+32+24>>2]=0;c[e+32+24+4>>2]=0;c[e+32+24+8>>2]=0;c[e+32+24+12>>2]=0;c[e+32+40>>2]=1065353216;k=e+32+44|0;c[k>>2]=0;c[k+4>>2]=0;c[k+8>>2]=0;c[k+12>>2]=0;c[k+16>>2]=0;Pb[c[(c[a>>2]|0)+8>>2]&127](a,e+32|0,e+16|0,e);i=(+g[e>>2]-+g[e+16>>2])*.5;h=(+g[e+4>>2]-+g[e+16+4>>2])*.5;j=(+g[e+8>>2]-+g[e+16+8>>2])*.5;f=+ib[c[(c[a>>2]|0)+48>>2]&15](a);g[d>>2]=b*.0833333283662796*((h+f)*2.0*(h+f)*2.0+(j+f)*2.0*(j+f)*2.0);g[d+4>>2]=b*.0833333283662796*((i+f)*2.0*(i+f)*2.0+(j+f)*2.0*(j+f)*2.0);g[d+8>>2]=b*.0833333283662796*((i+f)*2.0*(i+f)*2.0+(h+f)*2.0*(h+f)*2.0);g[d+12>>2]=0.0;l=e;return}function Ih(a,b,d,e){a=a|0;b=b|0;d=+d;e=e|0;if(e>>>0<3)switch(b|0){case 2:{g[a+728+(e<<2)>>2]=d;c[a+1456>>2]=c[a+1456>>2]|2<<(e<<2);return}case 4:{g[a+744+(e<<2)>>2]=d;c[a+1456>>2]=c[a+1456>>2]|1<<(e<<2);return}case 1:{g[a+760+(e<<2)>>2]=d;c[a+1456>>2]=c[a+1456>>2]|8<<(e<<2);return}case 3:{g[a+776+(e<<2)>>2]=d;c[a+1456>>2]=c[a+1456>>2]|4<<(e<<2);return}default:return}if((e+-3|0)>>>0>=3)return;switch(b|0){case 2:{g[a+968+((e+-3|0)*88|0)+12>>2]=d;c[a+1456>>2]=c[a+1456>>2]|2<<(e<<2);return}case 4:{g[a+968+((e+-3|0)*88|0)+16>>2]=d;c[a+1456>>2]=c[a+1456>>2]|1<<(e<<2);return}case 1:{g[a+968+((e+-3|0)*88|0)+20>>2]=d;c[a+1456>>2]=c[a+1456>>2]|8<<(e<<2);return}case 3:{g[a+968+((e+-3|0)*88|0)+24>>2]=d;c[a+1456>>2]=c[a+1456>>2]|4<<(e<<2);return}default:return}}function Jh(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0;n=(c[b>>2]|0)+1794895138|0;f=Fy(c[b+8>>2]|0,n)|0;k=Fy(c[b+12>>2]|0,n)|0;m=Fy(c[b+16>>2]|0,n)|0;a:do if((f>>>0<d>>>2>>>0?k>>>0<(d-(f<<2)|0)>>>0&m>>>0<(d-(f<<2)|0)>>>0:0)?((m|k)&3|0)==0:0){j=0;while(1){i=f>>>1;l=j+i|0;g=Fy(c[b+((l<<1)+(k>>>2)<<2)>>2]|0,n)|0;h=Fy(c[b+((l<<1)+(k>>>2)+1<<2)>>2]|0,n)|0;if(!(h>>>0<d>>>0&g>>>0<(d-h|0)>>>0)){f=0;break a}if(a[b+(h+g)>>0]|0){f=0;break a}g=Tm(e,b+h|0)|0;if(!g)break;if((f|0)==1){f=0;break a}j=(g|0)<0?j:l;f=(g|0)<0?i:f-i|0}g=Fy(c[b+((l<<1)+(m>>>2)<<2)>>2]|0,n)|0;f=Fy(c[b+((l<<1)+(m>>>2)+1<<2)>>2]|0,n)|0;if(f>>>0<d>>>0&g>>>0<(d-f|0)>>>0)f=(a[b+(f+g)>>0]|0)==0?b+f|0:0;else f=0}else f=0;while(0);return f|0}function Kh(a){a=a|0;var b=0.0,d=0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0;d=ur()|0;c[d+8>>2]=0;c[d+12>>2]=-1;c[d+16>>2]=1065353216;c[d+20>>2]=1065353216;c[d+24>>2]=1065353216;g[d+28>>2]=0.0;g[d+48>>2]=.03999999910593033;c[d+56>>2]=0;c[d>>2]=7836;c[d+4>>2]=0;e=+g[a>>2]+-.03999999910593033;f=+g[a+4>>2]+-.03999999910593033;h=+g[a+8>>2]+-.03999999910593033;g[d+32>>2]=e;g[d+36>>2]=f;g[d+40>>2]=h;g[d+44>>2]=0.0;j=+g[a>>2];i=+g[a+4>>2];b=+g[a+8>>2];b=+g[a+((j<i?(j<b?0:2):i<b?1:2)<<2)>>2]*.10000000149011612;if(!(b<.03999999910593033))return d|0;l=+hD(d);k=+hD(d);j=+hD(d)+h;g[d+48>>2]=b;h=+hD(d);i=+hD(d);j=j-+hD(d);g[d+32>>2]=l+e-h;g[d+36>>2]=k+f-i;g[d+40>>2]=j;g[d+44>>2]=0.0;return d|0}function Lh(b,d,e){b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0;if(!(a[b+84>>0]|0)){c[b+32>>2]=c[b+204>>2];g[b+272>>2]=0.0;o=-+g[b+56>>2];p=-+g[b+60>>2];g[b>>2]=-+g[b+52>>2];g[b+4>>2]=o;g[b+8>>2]=p;g[b+12>>2]=0.0;p=1.0;d=b+268|0;g[d>>2]=p;return}p=+g[b>>2];f=+g[b+4>>2];h=+g[b+8>>2];i=p*+g[b+52>>2]+f*+g[b+56>>2]+h*+g[b+60>>2];j=+g[b+16>>2]-+g[d+52>>2];k=+g[b+20>>2]-+g[d+56>>2];l=+g[b+24>>2]-+g[d+60>>2];m=+g[d+392>>2];n=+g[d+396>>2];o=+g[d+388>>2];if(!(i>=-.10000000149011612)){g[b+272>>2]=-1.0/i*(p*(m*l-k*n+ +g[d+372>>2])+f*(j*n-l*o+ +g[d+376>>2])+h*(k*o-j*m+ +g[d+380>>2]));p=-1.0/i;d=b+268|0;g[d>>2]=p;return}else{g[b+272>>2]=0.0;p=10.0;d=b+268|0;g[d>>2]=p;return}}function Mh(b,d){b=b|0;d=d|0;var e=0,f=0;if(a[b+1308>>0]|0){c[d>>2]=0;c[d+4>>2]=0;return}Qc(b,(c[b+28>>2]|0)+4|0,(c[b+32>>2]|0)+4|0);c[d>>2]=0;c[d+4>>2]=6;if((c[b+856>>2]|0)==0?(a[b+788>>0]|0)==0:0){e=0;f=6}else{c[d>>2]=1;c[d+4>>2]=5;e=1;f=5}if(!((c[b+860>>2]|0)==0?(a[b+789>>0]|0)==0:0)){e=e+1|0;c[d>>2]=e;f=f+-1|0;c[d+4>>2]=f}if(!((c[b+864>>2]|0)==0?!(a[b+790>>0]|0):0)){c[d>>2]=e+1;c[d+4>>2]=f+-1}if(kf(b,0)|0){c[d>>2]=(c[d>>2]|0)+1;c[d+4>>2]=(c[d+4>>2]|0)+-1}if(kf(b,1)|0){c[d>>2]=(c[d>>2]|0)+1;c[d+4>>2]=(c[d+4>>2]|0)+-1}if(!(kf(b,2)|0))return;c[d>>2]=(c[d>>2]|0)+1;c[d+4>>2]=(c[d+4>>2]|0)+-1;return}function Nh(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0;f=c[b+228>>2]|0;if((f|0)==(c[b+232>>2]|0)?(i=(f|0)==0?1:f<<1,(f|0)<(i|0)):0){if(!i)h=0;else{c[6485]=(c[6485]|0)+1;f=ec((i<<2|3)+16|0)|0;if(!f)f=0;else{c[(f+4+15&-16)+-4>>2]=f;f=f+4+15&-16}h=f;f=c[b+228>>2]|0}if((f|0)>0){g=0;do{c[h+(g<<2)>>2]=c[(c[b+236>>2]|0)+(g<<2)>>2];g=g+1|0}while((g|0)!=(f|0))}g=c[b+236>>2]|0;if(g){if(a[b+240>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0);f=c[b+228>>2]|0}c[b+236>>2]=0}a[b+240>>0]=1;c[b+236>>2]=h;c[b+232>>2]=i}c[(c[b+236>>2]|0)+(f<<2)>>2]=d;c[b+228>>2]=f+1;if(!e)return;qe(c[d+28>>2]|0,d);qe(c[d+32>>2]|0,d);return}function Oh(a,b,c,d){a=a|0;b=b|0;c=c|0;d=+d;var e=0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0;e=l;l=l+96|0;j=+g[c>>2];k=+g[c+4>>2];m=+g[c+8>>2];Lo(e+80|0,j,k,m,+Tv(j,k,m,+g[b>>2],+g[b+4>>2],+g[b+8>>2]));m=+g[e+80>>2];k=+g[e+80+4>>2];j=+g[e+80+8>>2];go(e+64|0,+g[b>>2],+g[b+4>>2],+g[b+8>>2],m,k,j);yn(e+48|0,+g[c>>2],+g[c+4>>2],+g[c+8>>2],+g[b>>2],+g[b+4>>2],+g[b+8>>2]);i=+g[e+48>>2];h=+g[e+48+4>>2];f=+g[e+48+8>>2];n=+sF(d);Lo(e+16|0,+g[e+64>>2],+g[e+64+4>>2],+g[e+64+8>>2],n);eo(e+32|0,m,k,j,+g[e+16>>2],+g[e+16+4>>2],+g[e+16+8>>2]);Lo(e,i,h,f,+rF(d));eo(a,+g[e+32>>2],+g[e+32+4>>2],+g[e+32+8>>2],+g[e>>2],+g[e+4>>2],+g[e+8>>2]);l=e;return}function Ph(a,b,c){a=a|0;b=b|0;c=c|0;var d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0,v=0.0,w=0.0,x=0.0;v=+g[a+552>>2];u=+g[a+568>>2];t=+g[a+584>>2];s=+g[b>>2];r=+g[b+4>>2];q=+g[b+8>>2];o=+g[b+16>>2];n=+g[b+20>>2];m=+g[b+24>>2];k=+g[b+32>>2];i=+g[b+36>>2];f=+g[b+40>>2];j=+g[a+556>>2];h=+g[a+572>>2];e=+g[a+588>>2];x=+g[a+620>>2];w=+g[a+636>>2];d=+g[a+652>>2];p=x*+g[c>>2]+w*+g[c+4>>2]+d*+g[c+8>>2];l=x*+g[c+16>>2]+w*+g[c+20>>2]+d*+g[c+24>>2];d=x*+g[c+32>>2]+w*+g[c+36>>2]+d*+g[c+40>>2];d=+J(+((v*s+u*r+t*q)*p+(v*o+u*n+t*m)*l+(v*k+u*i+t*f)*d),+((s*j+r*h+q*e)*p+(o*j+n*h+m*e)*l+(k*j+i*h+f*e)*d));return +(d*+g[a+732>>2])}function Qh(b){b=b|0;var d=0,e=0,f=0,g=0,h=0;c[b>>2]=10644;d=c[b+84>>2]|0;g=c[d+8>>2]|0;if((g|0)>0){e=0;do{f=c[(c[d+16>>2]|0)+(e*12|0)+8>>2]|0;if(f|0){Db[c[c[f>>2]>>2]&255](f);h=c[b+4>>2]|0;Ib[c[(c[h>>2]|0)+60>>2]&127](h,f)}e=e+1|0}while((e|0)!=(g|0));d=c[b+84>>2]|0}Mg(d);d=c[b+84>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+84>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+100>>2]|0;if(!d){a[b+104>>0]=1;c[b+100>>2]=0;c[b+92>>2]=0;h=b+96|0;c[h>>2]=0;uh(b);return}if(a[b+104>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+100>>2]=0;a[b+104>>0]=1;c[b+100>>2]=0;c[b+92>>2]=0;h=b+96|0;c[h>>2]=0;uh(b);return}function Rh(a){a=a|0;var b=0.0,d=0,e=0,f=0,h=0;e=l;l=l+32|0;c[a+36>>2]=1566444395;c[a+40>>2]=1566444395;c[a+44>>2]=1566444395;g[a+48>>2]=0.0;c[a+52>>2]=-581039253;c[a+56>>2]=-581039253;c[a+60>>2]=-581039253;g[a+64>>2]=0.0;if((c[a+20>>2]|0)<=0){l=e;return}d=0;do{f=c[a+28>>2]|0;h=c[f+(d*80|0)+64>>2]|0;Pb[c[(c[h>>2]|0)+8>>2]&127](h,f+(d*80|0)|0,e+16|0,e);b=+g[e+16>>2];if(+g[a+36>>2]>b)g[a+36>>2]=b;b=+g[e>>2];if(+g[a+52>>2]<b)g[a+52>>2]=b;b=+g[e+16+4>>2];if(+g[a+40>>2]>b)g[a+40>>2]=b;b=+g[e+4>>2];if(+g[a+56>>2]<b)g[a+56>>2]=b;b=+g[e+16+8>>2];if(+g[a+44>>2]>b)g[a+44>>2]=b;b=+g[e+8>>2];if(+g[a+60>>2]<b)g[a+60>>2]=b;d=d+1|0}while((d|0)<(c[a+20>>2]|0));l=e;return}function Sh(b,d){b=b|0;d=d|0;var e=0,f=0;a:do if((d|0)!=0&(b&3|0)!=0){e=d;while(1){if(!(a[b>>0]|0))break a;b=b+1|0;d=e+-1|0;if((d|0)!=0&(b&3|0)!=0)e=d;else{e=b;b=d;d=(d|0)!=0;f=5;break}}}else{e=b;b=d;d=(d|0)!=0;f=5}while(0);b:do if((f|0)==5){do if(d){if(!(a[e>>0]|0))if(!b)break;else{b=e;break b}c:do if(b>>>0>3)while(1){d=c[e>>2]|0;if((d&-2139062144^-2139062144)&d+-16843009|0)break c;e=e+4|0;b=b+-4|0;if(b>>>0<=3){f=11;break}}else f=11;while(0);if((f|0)==11)if(!b)break;while(1){if(!(a[e>>0]|0)){b=e;break b}b=b+-1|0;if(!b)break;else e=e+1|0}}while(0);b=0}while(0);return b|0}function Th(d,e){d=d|0;e=e|0;var f=0,g=0,h=0,i=0;i=l;l=l+64|0;h=c[d>>2]|0;g=d+(c[h+-8>>2]|0)|0;h=c[h+-4>>2]|0;c[i>>2]=e;c[i+4>>2]=d;c[i+8>>2]=4864;d=SA(h,e)|0;e=i+12|0;f=e+40|0;do{c[e>>2]=0;e=e+4|0}while((e|0)<(f|0));b[i+12+40>>1]=0;a[i+12+42>>0]=0;a:do if(d){c[i+48>>2]=1;Ub[c[(c[h>>2]|0)+20>>2]&7](h,i,g,g,1,0);d=(c[i+24>>2]|0)==1?g:0}else{Tb[c[(c[h>>2]|0)+24>>2]&31](h,i,g,1,0);switch(c[i+36>>2]|0){case 0:{d=((c[i+40>>2]|0)==1?(c[i+28>>2]|0)==1:0)&(c[i+32>>2]|0)==1?c[i+20>>2]|0:0;break a}case 1:break;default:{d=0;break a}}if((c[i+24>>2]|0)!=1?!(((c[i+40>>2]|0)==0?(c[i+28>>2]|0)==1:0)&(c[i+32>>2]|0)==1):0){d=0;break}d=c[i+16>>2]|0}while(0);l=i;return d|0}function Uh(){var b=0;b=tq()|0;c[b>>2]=5804;a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;c[b+12>>2]=0;a[b+40>>0]=1;c[b+36>>2]=0;c[b+28>>2]=0;c[b+32>>2]=0;a[b+60>>0]=1;c[b+56>>2]=0;c[b+48>>2]=0;c[b+52>>2]=0;a[b+80>>0]=1;c[b+76>>2]=0;c[b+68>>2]=0;c[b+72>>2]=0;a[b+100>>0]=1;c[b+96>>2]=0;c[b+88>>2]=0;c[b+92>>2]=0;a[b+120>>0]=1;c[b+116>>2]=0;c[b+108>>2]=0;c[b+112>>2]=0;a[b+140>>0]=1;c[b+136>>2]=0;c[b+128>>2]=0;c[b+132>>2]=0;a[b+160>>0]=1;c[b+156>>2]=0;c[b+148>>2]=0;c[b+152>>2]=0;a[b+180>>0]=1;c[b+176>>2]=0;c[b+168>>2]=0;c[b+172>>2]=0;a[b+208>>0]=1;c[b+204>>2]=0;c[b+196>>2]=0;c[b+200>>2]=0;c[b+232>>2]=0;c[b+224>>2]=0;c[b+212>>2]=16;c[b+216>>2]=17;c[b+220>>2]=18;return b|0}function Vh(a,b,d){a=a|0;b=+b;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,j=0;e=l;l=l+96|0;i=+ib[c[(c[a>>2]|0)+48>>2]&15](a);c[e+32>>2]=1065353216;c[e+32+4>>2]=0;c[e+32+4+4>>2]=0;c[e+32+4+8>>2]=0;c[e+32+4+12>>2]=0;c[e+32+20>>2]=1065353216;c[e+32+24>>2]=0;c[e+32+24+4>>2]=0;c[e+32+24+8>>2]=0;c[e+32+24+12>>2]=0;c[e+32+40>>2]=1065353216;j=e+32+44|0;c[j>>2]=0;c[j+4>>2]=0;c[j+8>>2]=0;c[j+12>>2]=0;c[j+16>>2]=0;Pb[c[(c[a>>2]|0)+8>>2]&127](a,e+32|0,e+16|0,e);h=(i+(+g[e>>2]-+g[e+16>>2])*.5)*2.0;f=(i+(+g[e+4>>2]-+g[e+16+4>>2])*.5)*2.0;i=(i+(+g[e+8>>2]-+g[e+16+8>>2])*.5)*2.0;g[d>>2]=b*.0833333283662796*(f*f+i*i);g[d+4>>2]=b*.0833333283662796*(h*h+i*i);g[d+8>>2]=b*.0833333283662796*(h*h+f*f);g[d+12>>2]=0.0;l=e;return}function Wh(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0;e=c[b+12>>2]|0;if(!e)return;if(!(a[b+8>>0]|0))return;f=c[d+4>>2]|0;if((f|0)==(c[d+8>>2]|0)?(h=(f|0)==0?1:f<<1,(f|0)<(h|0)):0){if(!h)e=0;else{c[6485]=(c[6485]|0)+1;e=ec((h<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}f=c[d+4>>2]|0}if((f|0)>0){g=0;do{c[e+(g<<2)>>2]=c[(c[d+12>>2]|0)+(g<<2)>>2];g=g+1|0}while((g|0)!=(f|0))}g=c[d+12>>2]|0;if(g){if(a[d+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0);f=c[d+4>>2]|0}c[d+12>>2]=0}a[d+16>>0]=1;c[d+12>>2]=e;c[d+8>>2]=h;e=c[b+12>>2]|0}c[(c[d+12>>2]|0)+(f<<2)>>2]=e;c[d+4>>2]=f+1;return}function Xh(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0;e=c[b+56>>2]|0;if(!e)return;if(!(a[b+52>>0]|0))return;f=c[d+4>>2]|0;if((f|0)==(c[d+8>>2]|0)?(h=(f|0)==0?1:f<<1,(f|0)<(h|0)):0){if(!h)e=0;else{c[6485]=(c[6485]|0)+1;e=ec((h<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}f=c[d+4>>2]|0}if((f|0)>0){g=0;do{c[e+(g<<2)>>2]=c[(c[d+12>>2]|0)+(g<<2)>>2];g=g+1|0}while((g|0)!=(f|0))}g=c[d+12>>2]|0;if(g){if(a[d+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0);f=c[d+4>>2]|0}c[d+12>>2]=0}a[d+16>>0]=1;c[d+12>>2]=e;c[d+8>>2]=h;e=c[b+56>>2]|0}c[(c[d+12>>2]|0)+(f<<2)>>2]=e;c[d+4>>2]=f+1;return}function Yh(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0;k=+g[a+24>>2];i=+g[a+28>>2];j=+g[a+32>>2];f=k*+g[b>>2]+i*+g[b+4>>2]+j*+g[b+8>>2];h=+g[a+20>>2];if(f>h){g[a+20>>2]=f;c[a+4>>2]=c[b>>2];c[a+4+4>>2]=c[b+4>>2];c[a+4+8>>2]=c[b+8>>2];c[a+4+12>>2]=c[b+12>>2]}else f=h;h=k*+g[b+16>>2]+i*+g[b+20>>2]+j*+g[b+24>>2];if(h>f){g[a+20>>2]=h;c[a+4>>2]=c[b+16>>2];c[a+4+4>>2]=c[b+16+4>>2];c[a+4+8>>2]=c[b+16+8>>2];c[a+4+12>>2]=c[b+16+12>>2]}else h=f;f=k*+g[b+32>>2]+i*+g[b+36>>2]+j*+g[b+40>>2];if(!(f>h))return;g[a+20>>2]=f;c[a+4>>2]=c[b+32>>2];c[a+4+4>>2]=c[b+32+4>>2];c[a+4+8>>2]=c[b+32+8>>2];c[a+4+12>>2]=c[b+32+12>>2];return}function Zh(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0;a[b+16>>0]=1;c[b+12>>2]=0;c[b+4>>2]=0;c[b+8>>2]=0;h=c[d+4>>2]|0;if((h|0)<=0){c[b+4>>2]=h;return}c[6485]=(c[6485]|0)+1;e=ec((h<<2|3)+16|0)|0;if(!e)g=0;else{c[(e+4+15&-16)+-4>>2]=e;g=e+4+15&-16}f=c[b+4>>2]|0;if((f|0)>0){e=0;do{c[g+(e<<2)>>2]=c[(c[b+12>>2]|0)+(e<<2)>>2];e=e+1|0}while((e|0)!=(f|0))}e=c[b+12>>2]|0;if(e|0){if(a[b+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[b+12>>2]=0}a[b+16>>0]=1;c[b+12>>2]=g;c[b+8>>2]=h;e=0;f=g;do{c[f+(e<<2)>>2]=0;e=e+1|0;f=c[b+12>>2]|0}while((e|0)!=(h|0));c[b+4>>2]=h;e=0;do{c[f+(e<<2)>>2]=c[(c[d+12>>2]|0)+(e<<2)>>2];e=e+1|0}while((e|0)!=(h|0));return}function _h(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0;k=+g[a+88>>2];i=+g[a+92>>2];j=+g[a+96>>2];f=k*+g[b>>2]+i*+g[b+4>>2]+j*+g[b+8>>2];h=+g[a+84>>2];if(f>h){g[a+84>>2]=f;c[a+4>>2]=c[b>>2];c[a+4+4>>2]=c[b+4>>2];c[a+4+8>>2]=c[b+8>>2];c[a+4+12>>2]=c[b+12>>2]}else f=h;h=k*+g[b+16>>2]+i*+g[b+20>>2]+j*+g[b+24>>2];if(h>f){g[a+84>>2]=h;c[a+4>>2]=c[b+16>>2];c[a+4+4>>2]=c[b+16+4>>2];c[a+4+8>>2]=c[b+16+8>>2];c[a+4+12>>2]=c[b+16+12>>2]}else h=f;f=k*+g[b+32>>2]+i*+g[b+36>>2]+j*+g[b+40>>2];if(!(f>h))return;g[a+84>>2]=f;c[a+4>>2]=c[b+32>>2];c[a+4+4>>2]=c[b+32+4>>2];c[a+4+8>>2]=c[b+32+8>>2];c[a+4+12>>2]=c[b+32+12>>2];return}function $h(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0,o=0.0,p=0.0,q=0.0,r=0.0,s=0.0,t=0.0,u=0.0;h=+ib[c[(c[a>>2]|0)+48>>2]&15](a);l=h+ +g[a+32>>2];j=h+ +g[a+36>>2];h=h+ +g[a+40>>2];u=+A(+(+g[b>>2]));t=+A(+(+g[b+4>>2]));s=+A(+(+g[b+8>>2]));q=+A(+(+g[b+16>>2]));p=+A(+(+g[b+20>>2]));o=+A(+(+g[b+24>>2]));k=+A(+(+g[b+32>>2]));i=+A(+(+g[b+36>>2]));f=+A(+(+g[b+40>>2]));r=+g[b+48>>2];n=+g[b+52>>2];m=+g[b+56>>2];g[d>>2]=r-(l*u+j*t+h*s);g[d+4>>2]=n-(l*q+j*p+h*o);g[d+8>>2]=m-(l*k+j*i+h*f);g[d+12>>2]=0.0;g[e>>2]=l*u+j*t+h*s+r;g[e+4>>2]=l*q+j*p+h*o+n;g[e+8>>2]=m+(l*k+j*i+h*f);g[e+12>>2]=0.0;return}function ai(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0;f=l;l=l+96|0;g=c[b+192>>2]|0;c[f+64>>2]=0;c[f+64+4>>2]=g;c[f+64+8>>2]=b;c[f+64+12>>2]=b+4;c[f+64+16>>2]=-1;c[f+64+20>>2]=-1;b=c[d+192>>2]|0;c[f+40>>2]=0;c[f+40+4>>2]=b;c[f+40+8>>2]=d;c[f+40+12>>2]=d+4;c[f+40+16>>2]=-1;c[f+40+20>>2]=-1;b=c[a+24>>2]|0;b=yb[c[(c[b>>2]|0)+8>>2]&1](b,f+64|0,f+40|0,0,2)|0;if(!b){l=f;return}c[f+4>>2]=0;c[f+8>>2]=f+64;c[f+12>>2]=f+40;c[f>>2]=7332;c[f+36>>2]=e;c[f+32>>2]=c[e+12>>2];Tb[c[(c[b>>2]|0)+8>>2]&31](b,f+64|0,f+40|0,a+28|0,f);Db[c[c[b>>2]>>2]&255](b);g=c[a+24>>2]|0;Ib[c[(c[g>>2]|0)+60>>2]&127](g,b);l=f;return}function bi(b){b=b|0;var d=0;c[b>>2]=6368;if(c[b+108>>2]|0){d=c[b+112>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+112>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+108>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+108>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}}d=c[b+88>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+84>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+80>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}d=c[b+60>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}if(!(a[b+100>>0]|0))return;d=c[b+92>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+92>>2]|0;if(!d)return;c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);return}function ci(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0;e=c[b+72>>2]|0;if(!e)return;f=c[d+4>>2]|0;if((f|0)==(c[d+8>>2]|0)?(h=(f|0)==0?1:f<<1,(f|0)<(h|0)):0){if(!h)e=0;else{c[6485]=(c[6485]|0)+1;e=ec((h<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}f=c[d+4>>2]|0}if((f|0)>0){g=0;do{c[e+(g<<2)>>2]=c[(c[d+12>>2]|0)+(g<<2)>>2];g=g+1|0}while((g|0)!=(f|0))}g=c[d+12>>2]|0;if(g){if(a[d+16>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0);f=c[d+4>>2]|0}c[d+12>>2]=0}a[d+16>>0]=1;c[d+12>>2]=e;c[d+8>>2]=h;e=c[b+72>>2]|0}c[(c[d+12>>2]|0)+(f<<2)>>2]=e;c[d+4>>2]=f+1;return}function di(b){b=b|0;var d=0,e=0,f=0,h=0.0;e=l;l=l+96|0;a[b+92>>0]=1;if((a[24200]|0)==0?lx(24200)|0:0){c[5172]=1065353216;c[5173]=0;c[5174]=0;c[5175]=0;c[5176]=0;c[5177]=1065353216;c[5178]=0;c[5179]=0;c[5180]=0;c[5181]=0;c[5182]=1065353216;g[5183]=0.0;c[5184]=-1082130432;c[5185]=0;c[5186]=0;c[5187]=0;c[5188]=0;c[5189]=-1082130432;c[5190]=0;c[5191]=0;c[5192]=0;c[5193]=0;c[5194]=-1082130432;g[5195]=0.0}d=e;f=d+96|0;do{c[d>>2]=0;d=d+4|0}while((d|0)<(f|0));Pb[c[(c[b>>2]|0)+76>>2]&127](b,20688,e,6);h=+g[b+48>>2];g[b+76>>2]=+g[e>>2]+h;g[b+60>>2]=+g[e+48>>2]-h;g[b+80>>2]=+g[e+20>>2]+h;g[b+64>>2]=+g[e+68>>2]-h;g[b+84>>2]=+g[e+40>>2]+h;g[b+68>>2]=+g[e+88>>2]-h;l=e;return}function ei(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0;while(1){j=c[a+12>>2]|0;l=c[j+(((b+d|0)/2|0)<<3)>>2]|0;f=d;e=b;while(1){while(1){i=j+(e<<3)|0;k=e+1|0;if((c[i>>2]|0)<(l|0))e=k;else break}while(1){g=j+(f<<3)|0;h=f+-1|0;if((c[g>>2]|0)>(l|0))f=h;else break}if((e|0)<=(f|0)){j=c[i>>2]|0;e=c[i+4>>2]|0;m=c[g+4>>2]|0;c[i>>2]=c[g>>2];c[i+4>>2]=m;f=(c[a+12>>2]|0)+(f<<3)|0;c[f>>2]=j;c[f+4>>2]=e;f=h;e=k}if((e|0)>(f|0))break;j=c[a+12>>2]|0}if((f|0)>(b|0))ei(a,b,f);if((e|0)<(d|0))b=e;else break}return}function fi(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0,n=0;e=l;l=l+96|0;c[e+32>>2]=1065353216;c[e+32+4>>2]=0;c[e+32+4+4>>2]=0;c[e+32+4+8>>2]=0;c[e+32+4+12>>2]=0;c[e+32+20>>2]=1065353216;c[e+32+24>>2]=0;c[e+32+24+4>>2]=0;c[e+32+24+8>>2]=0;c[e+32+24+12>>2]=0;c[e+32+40>>2]=1065353216;n=e+32+44|0;c[n>>2]=0;c[n+4>>2]=0;c[n+8>>2]=0;c[n+12>>2]=0;c[n+16>>2]=0;Pb[c[(c[a>>2]|0)+8>>2]&127](a,e+32|0,e+16|0,e);m=+g[e>>2];k=+g[e+16>>2];j=+g[e+4>>2];i=+g[e+16+4>>2];h=+g[e+8>>2];f=+g[e+16+8>>2];g[d>>2]=+B(+((m-k)*(m-k)+(j-i)*(j-i)+(h-f)*(h-f)))*.5;g[b>>2]=(m+k)*.5;g[b+4>>2]=(j+i)*.5;g[b+8>>2]=(h+f)*.5;g[b+12>>2]=0.0;l=e;return}function gi(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,h=0.0,i=0;f=l;l=l+16|0;c[a+4>>2]=c[b+24>>2];e=c[b>>2]|0;c[a+8>>2]=e;if(d){c[a+56>>2]=c[b+8>>2];c[a+56+4>>2]=c[b+8+4>>2];c[a+56+8>>2]=c[b+8+8>>2];c[a+56+12>>2]=c[b+8+12>>2];i=a+72|0;d=a+24|0;e=a+40|0;h=+g[b+24>>2];co(i,d,e,h);h=+g[b+24>>2];l=f;return +h}else{d=AF(jF(e)|0)|0;Ek(f,d,+g[b+8>>2],+g[b+12>>2],+g[b+16>>2]);c[a+56>>2]=c[f>>2];c[a+56+4>>2]=c[f+4>>2];c[a+56+8>>2]=c[f+8>>2];c[a+56+12>>2]=c[f+12>>2];d=a+72|0;e=a+24|0;i=a+40|0;h=+g[b+24>>2];co(d,e,i,h);h=+g[b+24>>2];l=f;return +h}return 0.0}function hi(a,d,f,h){a=a|0;d=d|0;f=f|0;h=h|0;var i=0,j=0,k=0,l=0,m=0;i=c[a+108>>2]|0;if(i|0){Pb[c[(c[i>>2]|0)+28>>2]&127](i,d,f,h);return}i=b[a+56>>1]|0;if(!(i<<16>>16))return;m=1;k=1;do{j=c[a+68>>2]|0;if(b[j+(k<<2)>>1]&1){l=c[a+60>>2]|0;k=e[j+(k<<2)+2>>1]|0;if(!(+g[d>>2]>+g[l+(k<<6)+32>>2])?!(+g[f>>2]<+g[l+(k<<6)+16>>2]):0)j=1;else j=0;if(!(!(+g[d+8>>2]>+g[l+(k<<6)+40>>2])?!(+g[f+8>>2]<+g[l+(k<<6)+24>>2]):0))j=0;if(!(+g[d+4>>2]>+g[l+(k<<6)+36>>2])?!(+g[f+4>>2]<+g[l+(k<<6)+20>>2]|j^1):0){ub[c[(c[h>>2]|0)+8>>2]&31](h,l+(k<<6)|0)|0;i=b[a+56>>1]|0}}m=m+1<<16>>16;k=m&65535}while(((i&65535)<<1|1)>>>0>k>>>0);return}function ii(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0;h=+g[b>>2];i=+g[b+16>>2];j=h<i?h:i;f=+g[b+32>>2];if((j<f?j:f)>+g[a+24>>2])return;k=h>i?b:b+16|0;if(+g[(+g[k>>2]>f?k:b+32|0)>>2]<+g[a+8>>2])return;f=+g[b+8>>2];h=+g[b+24>>2];j=f<h?f:h;i=+g[b+40>>2];if((j<i?j:i)>+g[a+32>>2])return;k=f>h?b+8|0:b+24|0;if(+g[(+g[k>>2]>i?k:b+40|0)>>2]<+g[a+16>>2])return;f=+g[b+4>>2];h=+g[b+20>>2];j=f<h?f:h;i=+g[b+36>>2];if((j<i?j:i)>+g[a+28>>2])return;k=f>h?b+4|0:b+20|0;if(+g[(+g[k>>2]>i?k:b+36|0)>>2]<+g[a+12>>2])return;k=c[a+4>>2]|0;Pb[c[(c[k>>2]|0)+8>>2]&127](k,b,d,e);return}function ji(b,d,e,f){b=b|0;d=d|0;e=e|0;f=+f;var h=0,i=0.0,j=0.0,k=0.0;h=l;l=l+16|0;g[b+32>>2]=f;c[b+8>>2]=c[d>>2];c[b+8+4>>2]=c[d+4>>2];c[b+8+8>>2]=c[d+8>>2];c[b+8+12>>2]=c[d+12>>2];i=+g[b+28>>2];k=+g[e+4>>2]-i*+g[d+4>>2];j=+g[e+8>>2]-i*+g[d+8>>2];g[h>>2]=+g[e>>2]-+g[d>>2]*i;g[h+4>>2]=k;g[h+8>>2]=j;g[h+12>>2]=0.0;f=i+ +g[b+24>>2]+f;g[b+32>>2]=f;if(!(f<0.0)){b=b+4|0;b=c[b>>2]|0;e=c[b>>2]|0;e=e+16|0;e=c[e>>2]|0;Nb[e&15](b,d,h,f);l=h;return}a[b+36>>0]=1;b=b+4|0;b=c[b>>2]|0;e=c[b>>2]|0;e=e+16|0;e=c[e>>2]|0;Nb[e&15](b,d,h,f);l=h;return}function ki(a,b,d,e,f,h,i,j,k){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;var l=0.0,m=0.0;if(!(c[j+52>>2]|0))return;if((c[j+20>>2]|0)<=0)return;e=0;while(1){d=c[a+28>>2]|0;if((d|0)>0){l=0.0;b=0;do{k=c[(c[a+116>>2]|0)+(b<<2)>>2]|0;i=c[a+36>>2]|0;h=c[a+16>>2]|0;m=+lb[c[a+220>>2]&31](h+((c[i+(k*152|0)+144>>2]|0)*244|0)|0,h+((c[i+(k*152|0)+148>>2]|0)*244|0)|0,i+(k*152|0)|0);l=l+m*m;b=b+1|0}while((b|0)!=(d|0))}else l=0.0;if(l<=+g[j+92>>2]){b=9;break}k=c[j+20>>2]|0;i=e;e=e+1|0;if(!((i|0)<(k+-1|0)&(e|0)<(k|0))){b=9;break}}if((b|0)==9)return}function li(b,d){b=b|0;d=d|0;c[b+204>>2]=c[d+48>>2];c[b+208>>2]=c[d+52>>2];c[b+212>>2]=c[d+56>>2];c[b+216>>2]=c[d+60>>2];c[b+220>>2]=c[d+64>>2];c[b+224>>2]=c[d+68>>2];c[b+156>>2]=c[d>>2];c[b+156+4>>2]=c[d+4>>2];c[b+156+8>>2]=c[d+8>>2];c[b+156+12>>2]=c[d+12>>2];c[b+172>>2]=c[d+16>>2];c[b+172+4>>2]=c[d+16+4>>2];c[b+172+8>>2]=c[d+16+8>>2];c[b+172+12>>2]=c[d+16+12>>2];c[b+188>>2]=c[d+32>>2];c[b+188+4>>2]=c[d+32+4>>2];c[b+188+8>>2]=c[d+32+8>>2];c[b+188+12>>2]=c[d+32+12>>2];c[b+228>>2]=c[d+72>>2];g[b+232>>2]=0.0;g[b+252>>2]=0.0;g[b+236>>2]=0.0;g[b+240>>2]=0.0;g[b+256>>2]=0.0;g[b+244>>2]=.10000000149011612;a[b+260>>0]=a[d+80>>0]&1;c[b+248>>2]=c[d+76>>2];return}function mi(a,b){a=a|0;b=+b;var d=0,e=0;d=c[a+84>>2]|0;if(d|0)Eb[d&31](a,b);Eb[c[(c[a>>2]|0)+140>>2]&31](a,b);g[a+28>>2]=b;c[a+32>>2]=0;c[a+48>>2]=sb[c[(c[a>>2]|0)+20>>2]&127](a)|0;Eb[c[(c[a>>2]|0)+164>>2]&31](a,b);Db[c[(c[a>>2]|0)+44>>2]&255](a);Db[c[(c[a>>2]|0)+148>>2]&255](a);g[a+104>>2]=b;Ib[c[(c[a>>2]|0)+152>>2]&127](a,a+92|0);Eb[c[(c[a>>2]|0)+144>>2]&31](a,b);if((c[a+296>>2]|0)>0){d=0;do{e=c[(c[a+304>>2]|0)+(d<<2)>>2]|0;Jb[c[(c[e>>2]|0)+8>>2]&7](e,a,b);d=d+1|0}while((d|0)<(c[a+296>>2]|0))}Eb[c[(c[a>>2]|0)+156>>2]&31](a,b);d=c[a+80>>2]|0;if(!d)return;Eb[d&31](a,b);return}function ni(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,h=0.0,i=0.0;f=l;l=l+16|0;c[b+4>>2]=d;c[b>>2]=5920;c[b+8>>2]=-1;c[b+12>>2]=-1;g[b+16>>2]=3402823466385288598117041.0e14;a[b+20>>0]=1;a[b+21>>0]=0;c[b+24>>2]=-1;c[b+28>>2]=e;if((a[24184]|0)==0?lx(24184)|0:0){c[f>>2]=0;c[f+4>>2]=0;c[f+8>>2]=0;c[f+12>>2]=0;se(24524,0.0,0,0,f)}c[6182]=c[6182]|1;g[6232]=0.0;h=+g[6242]*0.0;i=+g[6243]*0.0;g[6237]=+g[6241]*0.0;g[6238]=h;g[6239]=i;g[6240]=0.0;c[6245]=0;c[6246]=0;c[6247]=0;c[6248]=0;i=+g[6234]*0.0;h=+g[6235]*0.0;g[6286]=+g[6233]*0.0;g[6287]=i;g[6288]=h;g[6289]=0.0;c[b+32>>2]=24524;g[b+36>>2]=0.0;g[b+40>>2]=.05000000074505806;c[b+44>>2]=0;l=f;return}function oi(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0;if((c[d+60>>2]|0)==2){g=c[d+48>>2]|0;fg(b+44|0,g)|0;f=c[b+48>>2]|0;if(f|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0)}c[b+48>>2]=g;c[b+56>>2]=(c[b+56>>2]|0)+-1}else{f=c[d+48>>2]|0;fg(b+4|0,f)|0;g=c[b+8>>2]|0;if(g|0){c[6486]=(c[6486]|0)+1;gd(c[g+-4>>2]|0)}c[b+8>>2]=f;c[b+16>>2]=(c[b+16>>2]|0)+-1}f=c[d+52>>2]|0;if(!f)f=b+84+(c[d+60>>2]<<2)|0;else f=f+56|0;c[f>>2]=c[d+56>>2];f=c[d+56>>2]|0;if(f|0)c[f+52>>2]=c[d+52>>2];g=c[b+96>>2]|0;Mb[c[(c[g>>2]|0)+16>>2]&127](g,d,e);c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);a[b+154>>0]=1;return}function pi(a){a=a|0;var b=0.0,c=0.0,d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0;n=+g[a+4>>2];h=+g[a+456>>2];m=+g[a+8>>2];e=+g[a+460>>2];l=+g[a+12>>2];c=+g[a+464>>2];k=+g[a+20>>2];j=+g[a+24>>2];i=+g[a+28>>2];f=+g[a+36>>2];d=+g[a+40>>2];b=+g[a+44>>2];g[a+324>>2]=n*h*n+m*e*m+l*c*l;g[a+328>>2]=n*h*k+m*e*j+l*c*i;g[a+332>>2]=n*h*f+m*e*d+l*c*b;g[a+336>>2]=0.0;g[a+340>>2]=h*k*n+e*j*m+c*i*l;g[a+344>>2]=h*k*k+e*j*j+c*i*i;g[a+348>>2]=h*k*f+e*j*d+c*i*b;g[a+352>>2]=0.0;g[a+356>>2]=h*f*n+e*d*m+c*b*l;g[a+360>>2]=h*f*k+e*d*j+c*b*i;g[a+364>>2]=h*f*f+e*d*d+c*b*b;g[a+368>>2]=0.0;return}function qi(b){b=b|0;var d=0,e=0,f=0,g=0,h=0;c[b>>2]=6924;e=c[b+8>>2]|0;d=c[b+16>>2]|0;if((e|0)>0){h=0;do{f=(c[d+(h<<2)>>2]|0)+188|0;g=c[f>>2]|0;if(g){e=c[b+68>>2]|0;e=sb[c[(c[e>>2]|0)+36>>2]&127](e)|0;Mb[c[(c[e>>2]|0)+40>>2]&127](e,g,c[b+24>>2]|0);e=c[b+68>>2]|0;Mb[c[(c[e>>2]|0)+12>>2]&127](e,g,c[b+24>>2]|0);c[f>>2]=0;e=c[b+8>>2]|0;d=c[b+16>>2]|0}h=h+1|0}while((h|0)<(e|0))}if(!d){a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;b=b+12|0;c[b>>2]=0;return}if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+16>>2]=0;a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;b=b+12|0;c[b>>2]=0;return}function ri(a,b){a=a|0;b=b|0;var d=0,e=0.0,f=0,h=0,i=0.0,j=0.0;c[a+264>>2]=c[b>>2];c[a+264+4>>2]=c[b+4>>2];c[a+264+8>>2]=c[b+8>>2];c[a+264+12>>2]=c[b+12>>2];d=c[a+248>>2]|0;if((d|0)<=0)return;h=0;do{f=c[(c[a+256>>2]|0)+(h<<2)>>2]|0;switch(c[f+220>>2]|0){case 2:case 5:break;default:if(!(c[f+564>>2]&1)){e=+g[f+404>>2];if(e!=0.0){j=1.0/e*+g[b+4>>2];i=1.0/e*+g[b+8>>2];g[f+424>>2]=1.0/e*+g[b>>2];g[f+428>>2]=j;g[f+432>>2]=i;g[f+436>>2]=0.0}c[f+440>>2]=c[b>>2];c[f+440+4>>2]=c[b+4>>2];c[f+440+8>>2]=c[b+8>>2];c[f+440+12>>2]=c[b+12>>2];d=c[a+248>>2]|0}}h=h+1|0}while((h|0)<(d|0));return}function si(b,d){b=b|0;d=d|0;var e=0.0,f=0.0,h=0;if(a[b+738>>0]|0){c[d>>2]=0;c[d+4>>2]=0;return}c[d>>2]=5;c[d+4>>2]=1;e=+Ph(b,(c[b+28>>2]|0)+4|0,(c[b+32>>2]|0)+4|0);g[b+728>>2]=e;g[b+708>>2]=0.0;g[b+712>>2]=0.0;a[b+716>>0]=0;f=+g[b+692>>2];do if(f>=0.0){e=(e-+g[b+688>>2])%6.2831854820251465;if(!(e<-3.1415927410125732)){if(e>3.1415927410125732)e=e+-6.2831854820251465}else e=e+6.2831854820251465;if(e<-f){a[b+716>>0]=1;g[b+708>>2]=-(f+e);g[b+712>>2]=1.0;break}if(e>f){a[b+716>>0]=1;g[b+708>>2]=f-e;g[b+712>>2]=-1.0}else h=12}else h=12;while(0);if((h|0)==12?(a[b+737>>0]|0)==0:0)return;c[d>>2]=6;c[d+4>>2]=0;return}function ti(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0;k=c[b+8>>2]|0;if((k|0)<=0)return;j=c[b+16>>2]|0;i=0;b=0;do{h=c[j+(i<<2)>>2]|0;if(!(c[h+204>>2]&3)){g=c[a+16>>2]|0;d=g+(b<<3)|0;e=c[d>>2]|0;if((e|0)!=(b|0)){c[d>>2]=c[g+(e<<3)>>2];d=c[g+(e<<3)>>2]|0;e=c[g+(d<<3)>>2]|0;if((d|0)!=(e|0)){f=g+(d<<3)|0;do{d=g+(e<<3)|0;c[f>>2]=c[d>>2];d=c[d>>2]|0;f=g+(d<<3)|0;e=c[f>>2]|0}while((d|0)!=(e|0))}}else d=b;c[h+208>>2]=d;c[g+(b<<3)+4>>2]=i;c[h+212>>2]=-1;b=b+1|0}else{c[h+208>>2]=-1;c[h+212>>2]=-2}i=i+1|0}while((i|0)!=(k|0));return}function ui(a,b,d){a=a|0;b=+b;d=d|0;var e=0,f=0,h=0.0,i=0.0,k=0.0;e=c[a+204>>2]|0;if(b==0.0){c[a+204>>2]=e|1;h=0.0}else{c[a+204>>2]=e&-2;h=1.0/b}g[a+404>>2]=h;k=+g[a+444>>2]*b;i=+g[a+448>>2]*b;g[a+424>>2]=+g[a+440>>2]*b;g[a+428>>2]=k;g[a+432>>2]=i;g[a+436>>2]=0.0;b=+g[d>>2];f=b!=0.0?(g[j>>2]=1.0/b,c[j>>2]|0):0;b=+g[d+4>>2];e=b!=0.0?(g[j>>2]=1.0/b,c[j>>2]|0):0;b=+g[d+8>>2];d=b!=0.0?(g[j>>2]=1.0/b,c[j>>2]|0):0;c[a+456>>2]=f;c[a+460>>2]=e;c[a+464>>2]=d;g[a+468>>2]=0.0;i=h*+g[a+412>>2];k=h*+g[a+416>>2];g[a+620>>2]=+g[a+408>>2]*h;g[a+624>>2]=i;g[a+628>>2]=k;g[a+632>>2]=0.0;return}function vi(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0;e=c[b+296>>2]|0;if((e|0)==(c[b+300>>2]|0)?(h=(e|0)==0?1:e<<1,(e|0)<(h|0)):0){if(!h)g=0;else{c[6485]=(c[6485]|0)+1;e=ec((h<<2|3)+16|0)|0;if(!e)e=0;else{c[(e+4+15&-16)+-4>>2]=e;e=e+4+15&-16}g=e;e=c[b+296>>2]|0}if((e|0)>0){f=0;do{c[g+(f<<2)>>2]=c[(c[b+304>>2]|0)+(f<<2)>>2];f=f+1|0}while((f|0)!=(e|0))}f=c[b+304>>2]|0;if(f){if(a[b+308>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[f+-4>>2]|0);e=c[b+296>>2]|0}c[b+304>>2]=0}a[b+308>>0]=1;c[b+304>>2]=g;c[b+300>>2]=h}c[(c[b+304>>2]|0)+(e<<2)>>2]=d;c[b+296>>2]=e+1;return}function wi(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0,i=0.0,j=0,k=0.0,l=0;k=+g[b+64>>2]*.5;l=c[b+72>>2]|0;e=+g[d>>2];f=+g[d+4>>2];i=+g[d+8>>2];i=+B(+(e*e+f*f+i*i));h=c[b+68>>2]|0;if(+g[d+(l<<2)>>2]>+g[b+56>>2]*i){g[a+(h<<2)>>2]=0.0;g[a+(l<<2)>>2]=k;k=0.0;l=c[b+76>>2]|0;l=a+(l<<2)|0;g[l>>2]=k;return}i=+g[d+(h<<2)>>2];j=c[b+76>>2]|0;e=+g[d+(j<<2)>>2];f=+B(+(i*i+e*e));if(f>1.1920928955078125e-07){f=+g[b+60>>2]/f;g[a+(h<<2)>>2]=i*f;g[a+(l<<2)>>2]=-k;k=e*f;l=j;l=a+(l<<2)|0;g[l>>2]=k;return}else{g[a+(h<<2)>>2]=0.0;g[a+(l<<2)>>2]=-k;k=0.0;l=j;l=a+(l<<2)|0;g[l>>2]=k;return}}function xi(a,b,d){a=a|0;b=+b;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,j=0;e=l;l=l+96|0;c[e+32>>2]=1065353216;c[e+32+4>>2]=0;c[e+32+4+4>>2]=0;c[e+32+4+8>>2]=0;c[e+32+4+12>>2]=0;c[e+32+20>>2]=1065353216;c[e+32+24>>2]=0;c[e+32+24+4>>2]=0;c[e+32+24+8>>2]=0;c[e+32+24+12>>2]=0;c[e+32+40>>2]=1065353216;j=e+32+44|0;c[j>>2]=0;c[j+4>>2]=0;c[j+8>>2]=0;c[j+12>>2]=0;c[j+16>>2]=0;Pb[c[(c[a>>2]|0)+8>>2]&127](a,e+32|0,e+16|0,e);h=(+g[e>>2]-+g[e+16>>2])*.5*2.0;f=(+g[e+4>>2]-+g[e+16+4>>2])*.5*2.0;i=(+g[e+8>>2]-+g[e+16+8>>2])*.5*2.0;g[d>>2]=b/12.0*(f*f+i*i);g[d+4>>2]=b/12.0*(h*h+i*i);g[d+8>>2]=b/12.0*(h*h+f*f);l=e;return}function yi(b,d){b=b|0;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0;e=Mq()|0;ni(e,3,b);c[e>>2]=5748;c[e+300>>2]=c[d>>2];c[e+300+4>>2]=c[d+4>>2];c[e+300+8>>2]=c[d+8>>2];c[e+300+12>>2]=c[d+12>>2];k=+g[d>>2];j=+g[d+4>>2];i=+g[d+8>>2];h=k*+g[b+20>>2]+j*+g[b+24>>2]+i*+g[b+28>>2]+ +g[b+56>>2];f=k*+g[b+36>>2]+j*+g[b+40>>2]+i*+g[b+44>>2]+ +g[b+60>>2];g[e+316>>2]=k*+g[b+4>>2]+j*+g[b+8>>2]+i*+g[b+12>>2]+ +g[b+52>>2];g[e+320>>2]=h;g[e+324>>2]=f;g[e+328>>2]=0.0;c[e+332>>2]=0;a[e+344>>0]=0;g[e+348>>2]=.30000001192092896;g[e+352>>2]=1.0;g[e+356>>2]=0.0;return e|0}function zi(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0;c[6474]=(c[6474]|0)+1;f=(c[b+12>>2]|0)>(c[d+12>>2]|0);g=c[(f?d:b)+12>>2]|0;f=c[(f?b:d)+12>>2]|0;b=(((f<<16|g)+~((f<<16|g)<<15)|0)>>>10^(f<<16|g)+~((f<<16|g)<<15))*9|0;b=(((b>>>6^b)+~((b>>>6^b)<<11)|0)>>>16^(b>>>6^b)+~((b>>>6^b)<<11))&(c[a+12>>2]|0)+-1;if((b|0)>=(c[a+32>>2]|0)){g=0;return g|0}b=c[(c[a+40>>2]|0)+(b<<2)>>2]|0;if((b|0)==-1){g=0;return g|0}e=c[a+16>>2]|0;d=b;while(1){b=e+(d<<4)|0;if((c[(c[b>>2]|0)+12>>2]|0)==(g|0)?(c[(c[e+(d<<4)+4>>2]|0)+12>>2]|0)==(f|0):0){d=7;break}d=c[(c[a+60>>2]|0)+(d<<2)>>2]|0;if((d|0)==-1){b=0;d=7;break}}if((d|0)==7)return b|0;return 0}function Ai(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0;e=l;l=l+16|0;Mb[c[(c[b>>2]|0)+68>>2]&127](e,b,d);c[a>>2]=c[e>>2];c[a+4>>2]=c[e+4>>2];c[a+8>>2]=c[e+8>>2];c[a+12>>2]=c[e+12>>2];if(!(+ib[c[(c[b>>2]|0)+48>>2]&15](b)!=0.0)){l=e;return}i=+g[d>>2];f=+g[d+4>>2];h=+g[d+8>>2];k=i*i+f*f+h*h<1.4210854715202004e-14?-1.0:i;j=i*i+f*f+h*h<1.4210854715202004e-14?-1.0:f;h=i*i+f*f+h*h<1.4210854715202004e-14?-1.0:h;f=1.0/+B(+(h*h+(k*k+j*j)));i=+ib[c[(c[b>>2]|0)+48>>2]&15](b);g[a>>2]=+g[a>>2]+i*k*f;g[a+4>>2]=+g[a+4>>2]+i*j*f;g[a+8>>2]=+g[a+8>>2]+i*h*f;l=e;return}function Bi(a,b,c){a=a|0;b=b|0;c=c|0;var d=0.0;a:do switch(b|0){case 2:{if((c|0)<1){d=+g[a+232>>2];break a}if((c|0)<3){d=+g[a+264>>2];break a}if((c|0)==3){d=+g[a+248>>2];break a}if((c|0)<6)d=+g[a+280>>2];else d=3402823466385288598117041.0e14;break}case 3:{if((c|0)<1){d=+g[a+212>>2];break a}if((c|0)==3)d=+g[a+228>>2];else d=3402823466385288598117041.0e14;break}case 4:{if((c|0)<1){d=+g[a+244>>2];break a}if((c|0)<3){d=+g[a+276>>2];break a}if((c|0)==3){d=+g[a+260>>2];break a}if((c|0)<6)d=+g[a+292>>2];else d=3402823466385288598117041.0e14;break}default:d=3402823466385288598117041.0e14}while(0);return +d}function Ci(b,d){b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0;e=+g[d>>2];f=+g[d+4>>2];h=+g[d+8>>2];if(e*e+f*f+h*h==0.0)e=+g[b+36>>2];else e=+B(+(e*e+f*f+h*h));g[b+32>>2]=e;g[b+20>>2]=e;a[b+249>>0]=1;e=+g[d>>2];f=+g[d+4>>2];h=+g[d+8>>2];if(e*e+f*f+h*h==0.0){i=+g[b+256>>2];f=+g[b+260>>2];e=+g[b+264>>2];d=b+268|0}else{j=1.0/+B(+(e*e+f*f+h*h));i=e*j;f=f*j;e=h*j;d=d+12|0}d=c[d>>2]|0;g[b+272>>2]=i;g[b+276>>2]=f;g[b+280>>2]=e;c[b+284>>2]=d;d=(c[b+8>>2]|0)+52|0;c[b+116>>2]=c[d>>2];c[b+116+4>>2]=c[d+4>>2];c[b+116+8>>2]=c[d+8>>2];c[b+116+12>>2]=c[d+12>>2];return}function Di(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0,h=0.0,i=0,j=0.0,k=0.0,l=0.0,m=0.0,n=0,o=0.0,p=0.0;n=c[b+100>>2]|0;if((n|0)<=0){c[a>>2]=0;c[a+4>>2]=0;c[a+8>>2]=0;c[a+12>>2]=0;return}o=+g[b+16>>2];p=+g[d>>2]*o;k=+g[b+20>>2];l=+g[d+4>>2]*k;m=+g[b+24>>2];j=+g[d+8>>2]*m;f=c[b+108>>2]|0;d=-1;b=0;e=-3402823466385288598117041.0e14;while(1){h=p*+g[f+(b<<4)>>2]+l*+g[f+(b<<4)+4>>2]+j*+g[f+(b<<4)+8>>2];i=h>e;d=i?b:d;b=b+1|0;if((b|0)==(n|0))break;else e=i?h:e}l=k*+g[f+(d<<4)+4>>2];p=m*+g[f+(d<<4)+8>>2];g[a>>2]=o*+g[f+(d<<4)>>2];g[a+4>>2]=l;g[a+8>>2]=p;g[a+12>>2]=0.0;return}function Ei(a,b,d){a=a|0;b=+b;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0;e=+g[a+32>>2];i=+g[a+36>>2];k=+g[a+40>>2];l=+ib[c[(c[a>>2]|0)+48>>2]&15](a);j=+ib[c[(c[a>>2]|0)+48>>2]&15](a);k=+ib[c[(c[a>>2]|0)+48>>2]&15](a)+k;switch(c[a+56>>2]|0){case 0:{h=b*.25*(j+i)*(j+i)+b/12.0*(l+e)*(l+e)*4.0;f=h;e=b*.5*(j+i)*(j+i);break}case 2:{f=b*.5*(l+e)*(l+e);h=b*.25*(l+e)*(l+e)+b/12.0*k*k*4.0;e=b*.25*(l+e)*(l+e)+b/12.0*k*k*4.0;break}default:{k=b*.25*(l+e)*(l+e)+b/12.0*(j+i)*(j+i)*4.0;f=k;h=b*.5*(l+e)*(l+e);e=k}}g[d>>2]=e;g[d+4>>2]=h;g[d+8>>2]=f;g[d+12>>2]=0.0;return}function Fi(a,b,c){a=a|0;b=b|0;c=c|0;var d=0.0;a:do if(c>>>0>=3)if((c+-3|0)>>>0<3)switch(b|0){case 2:{d=+g[a+968+((c+-3|0)*88|0)+12>>2];break a}case 4:{d=+g[a+968+((c+-3|0)*88|0)+16>>2];break a}case 1:{d=+g[a+968+((c+-3|0)*88|0)+20>>2];break a}case 3:{d=+g[a+968+((c+-3|0)*88|0)+24>>2];break a}default:{d=0.0;break a}}else d=0.0;else switch(b|0){case 2:{d=+g[a+728+(c<<2)>>2];break a}case 4:{d=+g[a+744+(c<<2)>>2];break a}case 1:{d=+g[a+760+(c<<2)>>2];break a}case 3:{d=+g[a+776+(c<<2)>>2];break a}default:{d=0.0;break a}}while(0);return +d}function Gi(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0.0,i=0.0,k=0.0,m=0,n=0,o=0;f=l;l=l+48|0;Mb[c[(c[a>>2]|0)+124>>2]&127](a,f+32|0,e);o=c[f+32>>2]|0;n=c[f+32+4>>2]|0;m=c[f+32+8>>2]|0;c[b>>2]=o;c[b+4>>2]=n;c[b+8>>2]=m;g[b+12>>2]=0.0;e=c[(c[a>>2]|0)+64>>2]|0;k=-(c[j>>2]=o,+g[j>>2]);i=-(c[j>>2]=n,+g[j>>2]);h=-(c[j>>2]=m,+g[j>>2]);g[f>>2]=k;g[f+4>>2]=i;g[f+8>>2]=h;g[f+12>>2]=0.0;Mb[e&127](f+16|0,a,f);c[d>>2]=c[f+16>>2];c[d+4>>2]=c[f+16+4>>2];c[d+8>>2]=c[f+16+8>>2];c[d+12>>2]=c[f+16+12>>2];l=f;return}function Hi(b,d){b=b|0;d=d|0;var e=0,f=0;e=c[b+28>>2]|0;f=c[b+32>>2]|0;if(!(a[b+1301>>0]|0)){vf(b,d,jf(b,d,0,e+4|0,f+4|0,e+372|0,f+372|0,e+388|0,f+388|0)|0,e+4|0,f+4|0,e+372|0,f+372|0,e+388|0,f+388|0)|0;return}else{jf(b,d,vf(b,d,0,e+4|0,f+4|0,e+372|0,f+372|0,e+388|0,f+388|0)|0,e+4|0,f+4|0,e+372|0,f+372|0,e+388|0,f+388|0)|0;return}}function Ii(a,b,d){a=a|0;b=b|0;d=d|0;do if(!((b|0)==8&(d|0)==8)){if((b|0)==8&(d|0)==1){a=a+72|0;break}if((b|0)==1&(d|0)==8){a=a+76|0;break}if(!(d|b)){a=a+68|0;break}if((b|0)<20&(d|0)==28){a=a+84|0;break}if((b|0)==28&(d|0)<20){a=a+80|0;break}if((b|0)<20){if((d|0)<20){a=a+28|0;break}if((d+-21|0)>>>0<9){a=a+32|0;break}}else{if((d|0)<20&(b+-21|0)>>>0<9){a=a+36|0;break}if((b|0)==31)if((d|0)==31){a=a+44|0;break}else{a=a+40|0;break}}if((d|0)==31){a=a+48|0;break}else{a=a+52|0;break}}else a=a+56|0;while(0);return c[a>>2]|0}function Ji(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0;f=l;l=l+16|0;c[a+4>>2]=c[b+40>>2];e=c[b>>2]|0;c[a+80>>2]=e;if(d){c[a+48>>2]=c[b+8>>2];c[a+48+4>>2]=c[b+8+4>>2];c[a+48+8>>2]=c[b+8+8>>2];c[a+48+12>>2]=c[b+8+12>>2]}else{e=AF(jF(e)|0)|0;Ek(f,e,+g[b+8>>2],+g[b+12>>2],+g[b+16>>2]);c[a+48>>2]=c[f>>2];c[a+48+4>>2]=c[f+4>>2];c[a+48+8>>2]=c[f+8>>2];c[a+48+12>>2]=c[f+12>>2]}c[a+64>>2]=c[b+24>>2];c[a+64+4>>2]=c[b+24+4>>2];c[a+64+8>>2]=c[b+24+8>>2];c[a+64+12>>2]=c[b+24+12>>2];l=f;return +(+g[b+40>>2])}function Ki(a,b,d,e,f){a=a|0;b=b|0;d=+d;e=e|0;f=f|0;var h=0,i=0.0,j=0.0,k=0.0,m=0.0,n=0.0;h=l;l=l+48|0;c[h+32>>2]=e;c[h+32+4>>2]=f;n=+g[b>>2];m=+g[b+4>>2];i=+g[b+8>>2];k=+g[a+56>>2]*n+ +g[a+60>>2]*m+ +g[a+64>>2]*i;j=n*+g[a+72>>2]+m*+g[a+76>>2]+i*+g[a+80>>2];i=n*+g[a+88>>2]+m*+g[a+92>>2]+i*+g[a+96>>2];c[h>>2]=c[a+48>>2];c[h+4>>2]=h+32;g[h+8>>2]=k;g[h+12>>2]=j;g[h+16>>2]=i;g[h+20>>2]=0.0;g[h+24>>2]=d;f=c[a+44>>2]|0;d=+lb[c[(c[f>>2]|0)+12>>2]&31](f,h,1);l=h;return +d}function Li(a,b,d,e){a=a|0;b=b|0;d=+d;e=e|0;if(e>>>0<3)switch(b|0){case 2:{g[a+756+(e<<2)>>2]=d;c[a+1304>>2]=c[a+1304>>2]|4<<e*3;return}case 4:{g[a+772+(e<<2)>>2]=d;c[a+1304>>2]=c[a+1304>>2]|2<<e*3;return}case 3:{g[a+740+(e<<2)>>2]=d;c[a+1304>>2]=c[a+1304>>2]|1<<e*3;return}default:return}if((e+-3|0)>>>0>=3)return;switch(b|0){case 2:{g[a+868+(e+-3<<6)+32>>2]=d;c[a+1304>>2]=c[a+1304>>2]|4<<e*3;return}case 4:{g[a+868+(e+-3<<6)+36>>2]=d;c[a+1304>>2]=c[a+1304>>2]|2<<e*3;return}case 3:{g[a+868+(e+-3<<6)+28>>2]=d;c[a+1304>>2]=c[a+1304>>2]|1<<e*3;return}default:return}}function Mi(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var h=0;h=Mq()|0;c[h+4>>2]=3;c[h+8>>2]=-1;c[h+12>>2]=-1;g[h+16>>2]=3402823466385288598117041.0e14;a[h+20>>0]=1;a[h+21>>0]=0;c[h+24>>2]=-1;c[h+28>>2]=b;c[h+32>>2]=d;g[h+36>>2]=0.0;g[h+40>>2]=.05000000074505806;c[h+44>>2]=0;c[h>>2]=5748;c[h+300>>2]=c[e>>2];c[h+300+4>>2]=c[e+4>>2];c[h+300+8>>2]=c[e+8>>2];c[h+300+12>>2]=c[e+12>>2];c[h+316>>2]=c[f>>2];c[h+316+4>>2]=c[f+4>>2];c[h+316+8>>2]=c[f+8>>2];c[h+316+12>>2]=c[f+12>>2];c[h+332>>2]=0;a[h+344>>0]=0;g[h+348>>2]=.30000001192092896;g[h+352>>2]=1.0;g[h+356>>2]=0.0;return h|0}function Ni(b){b=b|0;var d=0;c[b>>2]=6192;d=c[b+80>>2]|0;if(d|0){if(a[b+84>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+80>>2]=0}a[b+84>>0]=1;c[b+80>>2]=0;c[b+72>>2]=0;c[b+76>>2]=0;d=c[b+60>>2]|0;if(d|0){if(a[b+64>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+60>>2]=0}a[b+64>>0]=1;c[b+60>>2]=0;c[b+52>>2]=0;c[b+56>>2]=0;d=c[b+40>>2]|0;if(!d){a[b+44>>0]=1;c[b+40>>2]=0;c[b+32>>2]=0;b=b+36|0;c[b>>2]=0;return}if(a[b+44>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+40>>2]=0;a[b+44>>0]=1;c[b+40>>2]=0;c[b+32>>2]=0;b=b+36|0;c[b>>2]=0;return}function Oi(b){b=b|0;var d=0;c[b>>2]=6680;d=c[b+60>>2]|0;if(d|0){if(a[b+64>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+60>>2]=0}a[b+64>>0]=1;c[b+60>>2]=0;c[b+52>>2]=0;c[b+56>>2]=0;d=c[b+40>>2]|0;if(d|0){if(a[b+44>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+40>>2]=0}a[b+44>>0]=1;c[b+40>>2]=0;c[b+32>>2]=0;c[b+36>>2]=0;d=c[b+16>>2]|0;if(!d){a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;b=b+12|0;c[b>>2]=0;return}if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+16>>2]=0;a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;b=b+12|0;c[b>>2]=0;return}function Pi(b){b=b|0;var d=0;c[b>>2]=7736;d=c[b+56>>2]|0;if(d|0){if(a[b+60>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+56>>2]=0}a[b+60>>0]=1;c[b+56>>2]=0;c[b+48>>2]=0;c[b+52>>2]=0;d=c[b+36>>2]|0;if(d|0){if(a[b+40>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+36>>2]=0}a[b+40>>0]=1;c[b+36>>2]=0;c[b+28>>2]=0;c[b+32>>2]=0;d=c[b+16>>2]|0;if(!d){d=b+12|0;a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;c[d>>2]=0;return}if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+16>>2]=0;d=b+12|0;a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;c[d>>2]=0;return}function Qi(b){b=b|0;var d=0;c[b>>2]=10936;d=c[b+56>>2]|0;if(d|0){if(a[b+60>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+56>>2]=0}a[b+60>>0]=1;c[b+56>>2]=0;c[b+48>>2]=0;c[b+52>>2]=0;d=c[b+36>>2]|0;if(d|0){if(a[b+40>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+36>>2]=0}a[b+40>>0]=1;c[b+36>>2]=0;c[b+28>>2]=0;c[b+32>>2]=0;d=c[b+16>>2]|0;if(!d){a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;b=b+12|0;c[b>>2]=0;return}if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+16>>2]=0;a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;b=b+12|0;c[b>>2]=0;return}function Ri(b){b=b|0;var d=0,e=0,f=0;e=ir(10448)|0;c[e>>2]=6796;c[e+4>>2]=2;a[e+24>>0]=1;c[e+20>>2]=0;c[e+12>>2]=0;c[e+16>>2]=0;c[e+28>>2]=7708;g[e+60>>2]=0.0;c[e+10444>>2]=b;c[e+64>>2]=70;c[e+68>>2]=sb[c[(c[b>>2]|0)+12>>2]&127](b)|0;c[e+72>>2]=sb[c[(c[b>>2]|0)+8>>2]&127](b)|0;b=0;do{d=0;do{f=c[e+10444>>2]|0;c[e+76+(b*144|0)+(d<<2)>>2]=wb[c[(c[f>>2]|0)+16>>2]&63](f,b,d)|0;f=c[e+10444>>2]|0;c[e+5260+(b*144|0)+(d<<2)>>2]=wb[c[(c[f>>2]|0)+20>>2]&63](f,b,d)|0;d=d+1|0}while(d>>>0<36);b=b+1|0}while(b>>>0<36);return e|0}function Si(){var a=0,b=0,d=0,e=0;e=l;l=l+48|0;a=jq()|0;if(a|0?(d=c[a>>2]|0,d|0):0){b=c[d+48>>2]|0;a=c[d+48+4>>2]|0;if(!((b&-256|0)==1126902528&(a|0)==1129074247)){c[e+24>>2]=20246;hu(20196,e+24|0)}if((b|0)==1126902529&(a|0)==1129074247)a=c[d+44>>2]|0;else a=d+80|0;c[e+36>>2]=a;d=c[d>>2]|0;a=c[d+4>>2]|0;if(Pj(4840,d,e+36|0)|0){d=c[e+36>>2]|0;d=sb[c[(c[d>>2]|0)+8>>2]&127](d)|0;c[e>>2]=20246;c[e+4>>2]=a;c[e+8>>2]=d;hu(20110,e)}else{c[e+16>>2]=20246;c[e+16+4>>2]=a;hu(20155,e+16|0)}}hu(20234,e+32|0)}function Ti(b){b=b|0;var d=0;c[b>>2]=7664;d=c[b+344>>2]|0;Db[c[c[d>>2]>>2]&255](d);d=c[b+344>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b>>2]=7620;d=c[b+336>>2]|0;if(d|0){if(a[b+340>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+336>>2]=0}a[b+340>>0]=1;c[b+336>>2]=0;c[b+328>>2]=0;c[b+332>>2]=0;c[b>>2]=6888;d=c[b+296>>2]|0;if(!d){a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;b=b+292|0;c[b>>2]=0;return}if(a[b+300>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+296>>2]=0;a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;b=b+292|0;c[b>>2]=0;return}function Ui(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0;f=c[e+16>>2]|0;if(!f){if(!(Zm(e)|0)){g=c[e+16>>2]|0;h=5}}else{g=f;h=5}a:do if((h|0)==5){f=c[e+20>>2]|0;if((g-f|0)>>>0<d>>>0){wb[c[e+36>>2]&63](e,b,d)|0;break}b:do if((a[e+75>>0]|0)<0|(d|0)==0)g=b;else{h=d;while(1){g=h+-1|0;if((a[b+g>>0]|0)==10)break;if(!g){g=b;break b}else h=g}if((wb[c[e+36>>2]&63](e,b,h)|0)>>>0<h>>>0)break a;g=b+h|0;d=d-h|0;f=c[e+20>>2]|0}while(0);$g(f|0,g|0,d|0)|0;c[e+20>>2]=(c[e+20>>2]|0)+d}while(0);return}function Vi(a,b,d,e,f,h){a=a|0;b=b|0;d=d|0;e=+e;f=f|0;h=h|0;var i=0;i=l;l=l+64|0;c[i+48>>2]=f;c[i+48+4>>2]=h;f=c[a+212>>2]|0;if(!(+g[f+4>>2]>=e)){l=i;return +e}c[i>>2]=c[a+216>>2];c[i+4>>2]=i+48;c[i+8>>2]=c[b>>2];c[i+8+4>>2]=c[b+4>>2];c[i+8+8>>2]=c[b+8>>2];c[i+8+12>>2]=c[b+12>>2];c[i+24>>2]=c[d>>2];c[i+24+4>>2]=c[d+4>>2];c[i+24+8>>2]=c[d+8>>2];c[i+24+12>>2]=c[d+12>>2];g[i+40>>2]=e;e=+lb[c[(c[f>>2]|0)+12>>2]&31](f,i,1);l=i;return +e}function Wi(a,b){a=a|0;b=b|0;var c=0,d=0.0,e=0.0,f=0.0,h=0.0,i=0.0;c=l;l=l+48|0;d=2.0/+RC(b);f=+g[(AF(b)|0)>>2];e=+g[(jF(b)|0)>>2];i=+g[(iF(b)|0)>>2];h=+g[(hF(b)|0)>>2];g[c+32>>2]=1.0-(e*e*d+i*i*d);g[c+28>>2]=f*e*d-h*i*d;g[c+24>>2]=f*i*d+h*e*d;g[c+20>>2]=f*e*d+h*i*d;g[c+16>>2]=1.0-(f*f*d+i*i*d);g[c+12>>2]=e*i*d-h*f*d;g[c+8>>2]=f*i*d-h*e*d;g[c+4>>2]=e*i*d+h*f*d;g[c>>2]=1.0-(f*f*d+e*e*d);Gn(a,c+32|0,c+28|0,c+24|0,c+20|0,c+16|0,c+12|0,c+8|0,c+4|0,c);l=c;return}function Xi(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;e=l;l=l+32|0;c[a+8>>2]=c[b>>2];Cm(a+24|0,b);if(d){c[e+16>>2]=c[b+8>>2];c[e+16+4>>2]=c[b+8+4>>2];c[e+16+8>>2]=c[b+8+8>>2];c[e+16+12>>2]=c[b+8+12>>2]}else{d=AF(jF(c[a+8>>2]|0)|0)|0;Ek(e+16|0,d,+g[b+8>>2],+g[b+12>>2],+g[b+16>>2])}gl(a+76|0,e+16|0);co(e,a+44|0,a+60|0,+g[b+24>>2]);gl(a+96|0,e);Cm(a+116|0,b+24|0);l=e;return +(+g[a+4>>2])}function Yi(a,b,d){a=a|0;b=b|0;d=d|0;do if(!((b|0)==8&(d|0)==8)){if((b|0)==8&(d|0)==1){a=a+72|0;break}if((b|0)==1&(d|0)==8){a=a+76|0;break}if((b|0)<20&(d|0)==28){a=a+84|0;break}if((b|0)==28&(d|0)<20){a=a+80|0;break}if((b|0)<20){if((d|0)<20){a=a+28|0;break}if((d+-21|0)>>>0<9){a=a+32|0;break}}else{if((d|0)<20&(b+-21|0)>>>0<9){a=a+36|0;break}if((b|0)==31)if((d|0)==31){a=a+44|0;break}else{a=a+40|0;break}}if((d|0)==31){a=a+48|0;break}else{a=a+52|0;break}}else a=a+56|0;while(0);return c[a>>2]|0}function Zi(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0;e=l;l=l+16|0;Mb[c[(c[b>>2]|0)+68>>2]&127](e,b,d);c[a>>2]=c[e>>2];c[a+4>>2]=c[e+4>>2];c[a+8>>2]=c[e+8>>2];c[a+12>>2]=c[e+12>>2];i=+g[d>>2];f=+g[d+4>>2];h=+g[d+8>>2];k=i*i+f*f+h*h<1.4210854715202004e-14?-1.0:i;j=i*i+f*f+h*h<1.4210854715202004e-14?-1.0:f;h=i*i+f*f+h*h<1.4210854715202004e-14?-1.0:h;f=1.0/+B(+(h*h+(k*k+j*j)));i=+ib[c[(c[b>>2]|0)+48>>2]&15](b);g[a>>2]=+g[a>>2]+i*k*f;g[a+4>>2]=+g[a+4>>2]+i*j*f;g[a+8>>2]=+g[a+8>>2]+i*h*f;l=e;return}function _i(a,b,c){a=a|0;b=b|0;c=c|0;var d=0,e=0;d=l;l=l+48|0;e=PD(b,0)|0;g[d+32>>2]=+hn(c,e);g[d+28>>2]=+Ym(c,e);g[d+24>>2]=+Xm(c,e);e=PD(b,1)|0;g[d+20>>2]=+hn(c,e);g[d+16>>2]=+Ym(c,e);g[d+12>>2]=+Xm(c,e);b=PD(b,2)|0;g[d+8>>2]=+hn(c,b);g[d+4>>2]=+Ym(c,b);g[d>>2]=+Xm(c,b);No(a,d+32|0,d+28|0,d+24|0,d+20|0,d+16|0,d+12|0,d+8|0,d+4|0,d);l=d;return}function $i(a,b,c,d){a=a|0;b=b|0;c=+c;d=+d;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0;i=+D(+c);h=+E(+c);c=+g[b+444>>2];if(+A(+i)>1.1920928955078125e-07){j=+g[b+448>>2];e=h*h;f=i*i;c=+B(+((h*h/(i*i)+1.0)/(1.0/(j*j)+h*h/(i*i)/(c*c))))}else{e=h*h;f=i*i}c=c*.5;j=+E(+c)/+B(+(e+(f+0.0)));c=+D(+c);k=c*d+i*j*0.0-h*j*-0.0;f=c*0.0-h*j*d-j*0.0*0.0;e=c*0.0+j*0.0*0.0-i*j*d;d=-(j*0.0*d)-i*j*0.0-h*j*-0.0;g[a>>2]=h*j*f+(c*k+d*-(j*0.0))-e*-(i*j);g[a+4>>2]=e*-(j*0.0)+(c*f+d*-(i*j))-h*j*k;g[a+8>>2]=k*-(i*j)+(h*j*d+c*e)-f*-(j*0.0);g[a+12>>2]=0.0;return}function aj(b,d){b=b|0;d=d|0;var e=0,f=0,h=0;g[b+20>>2]=0.0;g[b+24>>2]=0.0;a[b+248>>0]=0;a[b+249>>0]=0;g[b+252>>2]=0.0;c[b+68>>2]=0;c[b+68+4>>2]=0;c[b+68+8>>2]=0;c[b+68+12>>2]=0;b=c[(c[b+8>>2]|0)+344>>2]|0;if((c[(sb[c[(c[b>>2]|0)+28>>2]&127](b)|0)+4>>2]|0)<=0)return;do{f=c[b>>2]|0;h=c[f+12>>2]|0;f=c[c[(sb[c[f+28>>2]&127](b)|0)+12>>2]>>2]|0;e=c[(c[(sb[c[(c[b>>2]|0)+28>>2]&127](b)|0)+12>>2]|0)+4>>2]|0;xb[h&31](b,f,e,c[d+24>>2]|0)|0}while((c[(sb[c[(c[b>>2]|0)+28>>2]&127](b)|0)+4>>2]|0)>0);return}function bj(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0;c[6475]=(c[6475]|0)+-1;Ib[c[(c[a>>2]|0)+20>>2]&127](a,b);e=c[b+800>>2]|0;d=(c[a+12>>2]|0)+-1|0;g=c[a+20>>2]|0;f=c[g+(e<<2)>>2]|0;c[g+(e<<2)>>2]=c[g+(d<<2)>>2];c[(c[a+20>>2]|0)+(d<<2)>>2]=f;c[(c[(c[a+20>>2]|0)+(e<<2)>>2]|0)+800>>2]=e;c[a+12>>2]=d;a=c[a+72>>2]|0;if(!b)return;g=c[a+16>>2]|0;if(g>>>0<=b>>>0?(g+(N(c[a>>2]|0,c[a+4>>2]|0)|0)|0)>>>0>b>>>0:0){c[b>>2]=c[a+12>>2];c[a+12>>2]=b;c[a+8>>2]=(c[a+8>>2]|0)+1;return}c[6486]=(c[6486]|0)+1;gd(c[b+-4>>2]|0);return}function cj(a,b,d,f){a=a|0;b=b|0;d=d|0;f=f|0;var g=0,h=0,i=0;while(1){g=c[a+12>>2]|0;if(!(((e[f>>1]|0)>=(e[a>>1]|0)?(e[d>>1]|0)<=(e[a+6>>1]|0):0)&(e[d+4>>1]|0)<=(e[a+10>>1]|0)&(e[f+4>>1]|0)>=(e[a+4>>1]|0)&(e[d+2>>1]|0)<=(e[a+8>>1]|0)&(e[f+2>>1]|0)>=(e[a+2>>1]|0))){h=6;break}if((g|0)>-1)break;i=a+16|0;cj(i,b,d,f);g=c[a+28>>2]|0;a=(g|0)>-1?a+32|0:i+(0-g<<4)|0}if((h|0)==6)return;Mb[c[(c[b>>2]|0)+8>>2]&127](b,g>>>21,g&2097151);return}function dj(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,h=0,i=0,j=0.0,k=0.0,l=0.0,m=0.0,n=0.0;if((e|0)<=0)return;f=0;do{n=+g[b+(f<<4)>>2];m=+g[b+(f<<4)+4>>2];j=+g[b+(f<<4)+8>>2];k=n*+g[a+60>>2]+m*+g[a+64>>2]+j*+g[a+68>>2];l=n*+g[a+76>>2]+m*+g[a+80>>2]+j*+g[a+84>>2];j=n*+g[a+92>>2]+m*+g[a+96>>2]+j*+g[a+100>>2];i=a+60+((k<l?(l<j?2:1):k<j?2:0)<<4)|0;h=d+(f<<4)|0;c[h>>2]=c[i>>2];c[h+4>>2]=c[i+4>>2];c[h+8>>2]=c[i+8>>2];c[h+12>>2]=c[i+12>>2];f=f+1|0}while((f|0)!=(e|0));return}function ej(b,d){b=b|0;d=d|0;var e=0,f=0,g=0;g=l;l=l+224|0;e=g+160|0;f=e+40|0;do{c[e>>2]=0;e=e+4|0}while((e|0)<(f|0));c[g+208>>2]=c[d>>2];if((Hc(0,b,g+208|0,g+80|0,g+160|0)|0)>=0){e=c[2766]|0;if((a[11138]|0)<1)c[2766]=e&-33;if(!(c[2778]|0)){d=c[2777]|0;c[2777]=g;c[2773]=g;c[2771]=g;c[2778]=80;c[2770]=g+80;Hc(11064,b,g+208|0,g+80|0,g+160|0)|0;if(d|0){wb[c[11100>>2]&63](11064,0,0)|0;c[2777]=d;c[2778]=0;c[2770]=0;c[2773]=0;c[2771]=0}}else Hc(11064,b,g+208|0,g+80|0,g+160|0)|0;c[2766]=c[2766]|e&32}l=g;return}function fj(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0;do switch(b|0){case 0:{b=1;f=0;break}case 1:{b=2;f=0;break}case 2:{b=3;f=1;break}case 3:{b=3;f=2;break}case 4:{b=4;f=0;break}case 5:{b=5;f=1;break}case 6:{b=6;f=2;break}case 7:{b=7;f=3;break}case 8:{b=5;f=4;break}case 9:{b=6;f=4;break}case 10:{b=7;f=5;break}case 11:{b=7;f=6;break}default:{b=0;f=0}}while(0);Mb[c[(c[a>>2]|0)+108>>2]&127](a,f,d);Mb[c[(c[a>>2]|0)+108>>2]&127](a,b,e);return}function gj(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0;h=+g[a+60>>2];k=+g[a+76>>2]-h;j=+g[a+64>>2];i=+g[a+80>>2]-j;l=+g[a+68>>2];m=+g[a+84>>2]-l;h=+g[a+92>>2]-h;j=+g[a+96>>2]-j;l=+g[a+100>>2]-l;g[d+12>>2]=0.0;f=1.0/+B(+((k*j-i*h)*(k*j-i*h)+((i*l-m*j)*(i*l-m*j)+(m*h-k*l)*(m*h-k*l))));g[d>>2]=(i*l-m*j)*f;g[d+4>>2]=(m*h-k*l)*f;g[d+8>>2]=(k*j-i*h)*f;c[e>>2]=c[a+60>>2];c[e+4>>2]=c[a+60+4>>2];c[e+8>>2]=c[a+60+8>>2];c[e+12>>2]=c[a+60+12>>2];return}function hj(b){b=b|0;var d=0,e=0;c[b>>2]=10796;if(a[b+52>>0]|0?(d=c[b+56>>2]|0,d|0):0){e=c[b+4>>2]|0;Ib[c[(c[e>>2]|0)+16>>2]&127](e,d)}d=c[b+44>>2]|0;if(d|0){if(a[b+48>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+44>>2]=0}a[b+48>>0]=1;c[b+44>>2]=0;c[b+36>>2]=0;c[b+40>>2]=0;d=c[b+24>>2]|0;if(!d){a[b+28>>0]=1;c[b+24>>2]=0;c[b+16>>2]=0;e=b+20|0;c[e>>2]=0;return}if(a[b+28>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+24>>2]=0;a[b+28>>0]=1;c[b+24>>2]=0;c[b+16>>2]=0;e=b+20|0;c[e>>2]=0;return}function ij(b,d){b=b|0;d=d|0;do if(b){if(d>>>0<128){a[b>>0]=d;b=1;break}if(!(c[6623]|0))if((d&-128|0)==57216){a[b>>0]=d;b=1;break}else{c[6629]=84;b=-1;break}if(d>>>0<2048){a[b>>0]=d>>>6|192;a[b+1>>0]=d&63|128;b=2;break}if(d>>>0<55296|(d&-8192|0)==57344){a[b>>0]=d>>>12|224;a[b+1>>0]=d>>>6&63|128;a[b+2>>0]=d&63|128;b=3;break}if((d+-65536|0)>>>0<1048576){a[b>>0]=d>>>18|240;a[b+1>>0]=d>>>12&63|128;a[b+2>>0]=d>>>6&63|128;a[b+3>>0]=d&63|128;b=4;break}else{c[6629]=84;b=-1;break}}else b=1;while(0);return b|0}function jj(a,b,c){a=a|0;b=b|0;c=c|0;var d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0;i=+g[a+60>>2];k=+g[a+76>>2]-i;j=+g[a+64>>2];f=+g[a+80>>2]-j;d=+g[a+68>>2];h=+g[a+84>>2]-d;i=+g[a+92>>2]-i;j=+g[a+96>>2]-j;d=+g[a+100>>2]-d;g[c+12>>2]=0.0;e=1.0/+B(+((k*j-f*i)*(k*j-f*i)+((f*d-h*j)*(f*d-h*j)+(h*i-k*d)*(h*i-k*d))));g[c>>2]=(f*d-h*j)*e;g[c+4>>2]=(h*i-k*d)*e;g[c+8>>2]=(k*j-f*i)*e;if(!b)return;g[c>>2]=-((f*d-h*j)*e);g[c+4>>2]=-((h*i-k*d)*e);g[c+8>>2]=-((k*j-f*i)*e);return}function kj(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0;e=ub[c[(c[d>>2]|0)+40>>2]&31](d,a)|0;f=ub[c[(c[d>>2]|0)+28>>2]&31](d,e)|0;c[b>>2]=f;if(f|0)Ib[c[(c[d>>2]|0)+48>>2]&127](d,e);c[b+4>>2]=c[a+4>>2];c[b+8>>2]=0;c[b+28>>2]=c[a+32>>2];c[b+32>>2]=c[a+36>>2];c[b+36>>2]=c[a+40>>2];c[b+40>>2]=c[a+44>>2];c[b+12>>2]=c[a+16>>2];c[b+16>>2]=c[a+20>>2];c[b+20>>2]=c[a+24>>2];c[b+24>>2]=c[a+28>>2];c[b+44>>2]=c[a+48>>2];c[b+48>>2]=0;c[b+52>>2]=c[a+56>>2];c[b+56>>2]=0;return 17616}function lj(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0,j=0;i=c[a+100>>2]|0;j=c[a+108>>2]|0;f=+g[j+(((b|0)%(i|0)|0)<<4)+4>>2]*+g[a+20>>2];h=+g[j+(((b|0)%(i|0)|0)<<4)+8>>2]*+g[a+24>>2];g[d>>2]=+g[j+(((b|0)%(i|0)|0)<<4)>>2]*+g[a+16>>2];g[d+4>>2]=f;g[d+8>>2]=h;g[d+12>>2]=0.0;d=c[a+108>>2]|0;h=+g[d+(((b+1|0)%(i|0)|0)<<4)+4>>2]*+g[a+20>>2];f=+g[d+(((b+1|0)%(i|0)|0)<<4)+8>>2]*+g[a+24>>2];g[e>>2]=+g[d+(((b+1|0)%(i|0)|0)<<4)>>2]*+g[a+16>>2];g[e+4>>2]=h;g[e+8>>2]=f;g[e+12>>2]=0.0;return}function mj(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0;e=ub[c[(c[d>>2]|0)+40>>2]&31](d,a)|0;f=ub[c[(c[d>>2]|0)+28>>2]&31](d,e)|0;c[b>>2]=f;if(f|0)Ib[c[(c[d>>2]|0)+48>>2]&127](d,e);c[b+4>>2]=c[a+4>>2];c[b+8>>2]=0;c[b+28>>2]=c[a+32>>2];c[b+32>>2]=c[a+36>>2];c[b+36>>2]=c[a+40>>2];c[b+40>>2]=c[a+44>>2];c[b+12>>2]=c[a+16>>2];c[b+16>>2]=c[a+20>>2];c[b+20>>2]=c[a+24>>2];c[b+24>>2]=c[a+28>>2];c[b+44>>2]=c[a+48>>2];c[b+48>>2]=0;c[b+52>>2]=c[a+56>>2];c[b+56>>2]=0;return 17164}function nj(a,b){a=a|0;b=b|0;var d=0,e=0,f=0.0,h=0,i=0;e=l;l=l+32|0;d=c[a+184>>2]|0;if(+g[d+4>>2]==0.0){d=0;l=e;return d|0}b=c[b>>2]|0;if(!(ub[c[(c[d>>2]|0)+8>>2]&31](d,c[b+188>>2]|0)|0)){d=1;l=e;return d|0}h=c[a+192>>2]|0;i=c[b+192>>2]|0;d=c[a+184>>2]|0;f=+g[a+188>>2];c[e>>2]=0;c[e+4>>2]=i;c[e+8>>2]=b;c[e+12>>2]=b+4;c[e+16>>2]=-1;c[e+20>>2]=-1;jc(h,a+36|0,a+100|0,e,d,f);d=1;l=e;return d|0}function oj(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0;e=ub[c[(c[d>>2]|0)+40>>2]&31](d,a)|0;f=ub[c[(c[d>>2]|0)+28>>2]&31](d,e)|0;c[b>>2]=f;if(f|0)Ib[c[(c[d>>2]|0)+48>>2]&127](d,e);c[b+4>>2]=c[a+4>>2];c[b+8>>2]=0;c[b+28>>2]=c[a+32>>2];c[b+32>>2]=c[a+36>>2];c[b+36>>2]=c[a+40>>2];c[b+40>>2]=c[a+44>>2];c[b+12>>2]=c[a+16>>2];c[b+16>>2]=c[a+20>>2];c[b+20>>2]=c[a+24>>2];c[b+24>>2]=c[a+28>>2];c[b+44>>2]=c[a+48>>2];c[b+48>>2]=0;c[b+52>>2]=c[a+72>>2];c[b+56>>2]=0;return 17379}function pj(a,b){a=a|0;b=b|0;var d=0;d=l;l=l+16|0;c[d>>2]=c[b>>2];c[d+4>>2]=c[b+4>>2];c[d+8>>2]=c[b+8>>2];c[d+12>>2]=c[b+12>>2];b=c[a+8>>2]|0;c[b+304>>2]=(c[b+304>>2]|0)+1;c[b+4>>2]=1065353216;c[b+8>>2]=0;c[b+8+4>>2]=0;c[b+8+8>>2]=0;c[b+8+12>>2]=0;c[b+24>>2]=1065353216;c[b+28>>2]=0;c[b+28+4>>2]=0;c[b+28+8>>2]=0;c[b+28+12>>2]=0;c[b+44>>2]=1065353216;c[b+48>>2]=0;c[b+52>>2]=c[d>>2];c[b+52+4>>2]=c[d+4>>2];c[b+52+8>>2]=c[d+8>>2];c[b+52+12>>2]=c[d+12>>2];l=d;return}function qj(a,b){a=a|0;b=b|0;var d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0.0,m=0.0;k=+ib[c[(c[a>>2]|0)+48>>2]&15](a);h=+ib[c[(c[a>>2]|0)+48>>2]&15](a);d=+ib[c[(c[a>>2]|0)+48>>2]&15](a);m=(k+ +g[a+32>>2])/+g[a+16>>2];j=(h+ +g[a+36>>2])/+g[a+20>>2];f=(d+ +g[a+40>>2])/+g[a+24>>2];l=+A(+(+g[b>>2]));i=+A(+(+g[b+4>>2]));e=+A(+(+g[b+8>>2]));g[a+16>>2]=l;g[a+20>>2]=i;g[a+24>>2]=e;g[a+28>>2]=0.0;g[a+32>>2]=m*l-k;g[a+36>>2]=j*i-h;g[a+40>>2]=f*e-d;g[a+44>>2]=0.0;return}function rj(a,b,d,e,f,h,i,j,k){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;i=i|0;j=j|0;k=k|0;var l=0,m=0,n=0.0,o=0;Wb[c[(c[a>>2]|0)+32>>2]&1](a,b,d,e,f,h,i,j,k);m=c[a+184>>2]|0;l=c[j+20>>2]|0;l=(m|0)>(l|0)?m:l;if((l|0)<=0)return 0.0;m=0;do{n=+rb[c[(c[a>>2]|0)+40>>2]&3](a,m,b,d,e,f,h,i,j,k);g[a+228>>2]=n;o=m;m=m+1|0}while(((o|0)<(l+-1|0)?!(n<=+g[j+92>>2]):0)&(m|0)<(l|0));return 0.0}function sj(b,d){b=b|0;d=d|0;var e=0,f=0,h=0.0,i=0,j=0;if(a[b+527>>0]|0){c[d>>2]=0;c[d+4>>2]=0;return}c[d>>2]=3;c[d+4>>2]=3;j=c[b+28>>2]|0;i=c[b+32>>2]|0;lc(b,j+4|0,i+4|0,j+324|0,i+324|0);if((a[b+526>>0]|0?(e=c[d>>2]|0,c[d>>2]=e+1,f=c[d+4>>2]|0,c[d+4>>2]=f+-1,h=+g[b+456>>2],+g[b+444>>2]<h):0)?+g[b+448>>2]<h:0){c[d>>2]=e+2;c[d+4>>2]=f+-2}if(!(a[b+525>>0]|0))return;c[d>>2]=(c[d>>2]|0)+1;c[d+4>>2]=(c[d+4>>2]|0)+-1;return}function tj(b,d,e,f,h){b=b|0;d=+d;e=e|0;f=f|0;h=h|0;g[b>>2]=d;c[b+4>>2]=e;c[b+72>>2]=f;c[b+76>>2]=c[h>>2];c[b+76+4>>2]=c[h+4>>2];c[b+76+8>>2]=c[h+8>>2];c[b+76+12>>2]=c[h+12>>2];g[b+92>>2]=0.0;g[b+96>>2]=0.0;g[b+100>>2]=.5;g[b+104>>2]=0.0;g[b+108>>2]=0.0;g[b+112>>2]=0.0;g[b+116>>2]=.800000011920929;g[b+120>>2]=1.0;a[b+124>>0]=0;g[b+128>>2]=.004999999888241291;g[b+132>>2]=.009999999776482582;g[b+136>>2]=.009999999776482582;g[b+140>>2]=.009999999776482582;bp(b+8|0);return}function uj(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0;f=b+e|0;d=d&255;if((e|0)>=67){while(b&3){a[b>>0]=d;b=b+1|0}g=d|d<<8|d<<16|d<<24;while((b|0)<=((f&-4)-64|0)){c[b>>2]=g;c[b+4>>2]=g;c[b+8>>2]=g;c[b+12>>2]=g;c[b+16>>2]=g;c[b+20>>2]=g;c[b+24>>2]=g;c[b+28>>2]=g;c[b+32>>2]=g;c[b+36>>2]=g;c[b+40>>2]=g;c[b+44>>2]=g;c[b+48>>2]=g;c[b+52>>2]=g;c[b+56>>2]=g;c[b+60>>2]=g;b=b+64|0}while((b|0)<(f&-4|0)){c[b>>2]=g;b=b+4|0}}while((b|0)<(f|0)){a[b>>0]=d;b=b+1|0}return f-e|0}function vj(a,b,c,d,e,f,h,i,j,k){a=+a;b=+b;c=+c;d=+d;e=+e;f=+f;h=+h;i=+i;j=+j;k=k|0;if(!(((h-d)*b-(i-e)*a)*f+(((i-e)*c-(j-f)*b)*d+((j-f)*a-(h-d)*c)*e)<0.0)){k=0;return k|0}do if(!((h-d)*d+(i-e)*e+(j-f)*f>0.0))if((h-d)*h+(i-e)*i+(j-f)*j<0.0){a=h*h+i*i+j*j;break}else{a=((h*h+i*i+j*j)*(d*d+e*e+f*f)-(h*d+i*e+j*f)*(h*d+i*e+j*f))/((h-d)*(h-d)+(i-e)*(i-e)+(j-f)*(j-f));a=a>0.0?a:0.0;break}else a=d*d+e*e+f*f;while(0);g[k>>2]=+B(+a);k=1;return k|0}function wj(a,b,c){a=a|0;b=b|0;c=c|0;var d=0.0;a:do if(c>>>0>=3)if((c+-3|0)>>>0<3)switch(b|0){case 2:{d=+g[a+868+(c+-3<<6)+32>>2];break a}case 4:{d=+g[a+868+(c+-3<<6)+36>>2];break a}case 3:{d=+g[a+868+(c+-3<<6)+28>>2];break a}default:{d=0.0;break a}}else d=0.0;else switch(b|0){case 2:{d=+g[a+756+(c<<2)>>2];break a}case 4:{d=+g[a+772+(c<<2)>>2];break a}case 3:{d=+g[a+740+(c<<2)>>2];break a}default:{d=0.0;break a}}while(0);return +d}function xj(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0;Mb[c[(c[b>>2]|0)+68>>2]&127](a,b,d);if(!(+ib[c[(c[b>>2]|0)+48>>2]&15](b)!=0.0))return;h=+g[d>>2];e=+g[d+4>>2];f=+g[d+8>>2];j=h*h+e*e+f*f<1.4210854715202004e-14?-1.0:h;i=h*h+e*e+f*f<1.4210854715202004e-14?-1.0:e;f=h*h+e*e+f*f<1.4210854715202004e-14?-1.0:f;e=1.0/+B(+(f*f+(j*j+i*i)));h=+ib[c[(c[b>>2]|0)+48>>2]&15](b);g[a>>2]=+g[a>>2]+h*j*e;g[a+4>>2]=+g[a+4>>2]+h*i*e;g[a+8>>2]=+g[a+8>>2]+h*f*e;return}function yj(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;do if(!(SA(b,c[d+8>>2]|0)|0)){if(SA(b,c[d>>2]|0)|0){if((c[d+16>>2]|0)!=(e|0)?(c[d+20>>2]|0)!=(e|0):0){c[d+32>>2]=f;c[d+20>>2]=e;c[d+40>>2]=(c[d+40>>2]|0)+1;if((c[d+36>>2]|0)==1?(c[d+24>>2]|0)==2:0)a[d+54>>0]=1;c[d+44>>2]=4;break}if((f|0)==1)c[d+32>>2]=1}}else hq(d,e,f);while(0);return}function zj(a,b){a=a|0;b=b|0;var c=0.0,d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0;j=l;l=l+16|0;h=+g[b>>2];i=+g[b+4>>2];e=+g[b+8>>2];if(h*h+i*i+e*e>0.0?(f=+g[a+52>>2],f>0.0):0){c=1.0/+B(+(h*h+i*i+e*e));d=e*c*-f*e*c*-f+(h*c*-f*h*c*-f+i*c*-f*i*c*-f);if(d>0.0){g[j>>2]=-(h*c*-f);g[j+4>>2]=-(i*c*-f);g[j+8>>2]=-(e*c*-f);g[j+12>>2]=0.0;Qd(a,j)}g[a+52>>2]=+B(+d);l=j;return}Qd(a,b);l=j;return}function Aj(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0;a:do if(!(SA(b,c[d+8>>2]|0)|0)){h=c[b+12>>2]|0;zm(b+16|0,d,e,f);if((h|0)>1){g=b+24|0;do{zm(g,d,e,f);if(a[d+54>>0]|0)break a;g=g+8|0}while(g>>>0<(b+16+(h<<3)|0)>>>0)}}else El(d,e,f);while(0);return}function Bj(a,b){a=a|0;b=b|0;var d=0;b=l;l=l+16|0;d=c[a+8>>2]|0;c[a+132>>2]=c[d+52>>2];c[a+132+4>>2]=c[d+52+4>>2];c[a+132+8>>2]=c[d+52+8>>2];c[a+132+12>>2]=c[d+52+12>>2];Zn(a+152|0,d+52|0,16)|0;yg(d+4|0,b);c[a+168>>2]=c[b>>2];c[a+168+4>>2]=c[b+4>>2];c[a+168+8>>2]=c[b+8>>2];c[a+168+12>>2]=c[b+12>>2];c[a+184>>2]=c[a+168>>2];c[a+184+4>>2]=c[a+168+4>>2];c[a+184+8>>2]=c[a+168+8>>2];c[a+184+12>>2]=c[a+168+12>>2];l=b;return}function Cj(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0;f=c[a+228>>2]|0;a:do if((f|0)>0){e=c[a+236>>2]|0;d=0;while(1){if((c[e+(d<<2)>>2]|0)==(b|0))break a;d=d+1|0;if((d|0)>=(f|0)){d=f;break}}}else d=f;while(0);if((f|0)>(d|0)){g=c[a+236>>2]|0;d=g+(d<<2)|0;e=c[d>>2]|0;c[d>>2]=c[g+(f+-1<<2)>>2];c[(c[a+236>>2]|0)+(f+-1<<2)>>2]=e;c[a+228>>2]=f+-1}gg(c[b+28>>2]|0,b);gg(c[b+32>>2]|0,b);return}function Dj(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;e=l;l=l+16|0;Cm(a+16|0,b);if(d){c[e>>2]=c[b+8>>2];c[e+4>>2]=c[b+8+4>>2];c[e+8>>2]=c[b+8+8>>2];c[e+12>>2]=c[b+8+12>>2]}else{d=AF(jF(c[b>>2]|0)|0)|0;Ek(e,d,+g[b+8>>2],+g[b+12>>2],+g[b+16>>2])}gl(a+68|0,e);gl(a+88|0,b+24|0);Cm(a+108|0,b+40|0);l=e;return +(+g[a+4>>2])}function Ej(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0;e=ub[c[(c[d>>2]|0)+40>>2]&31](d,a)|0;f=ub[c[(c[d>>2]|0)+28>>2]&31](d,e)|0;c[b>>2]=f;if(f|0)Ib[c[(c[d>>2]|0)+48>>2]&127](d,e);c[b+4>>2]=c[a+4>>2];c[b+8>>2]=0;c[b+28>>2]=c[a+32>>2];c[b+32>>2]=c[a+36>>2];c[b+36>>2]=c[a+40>>2];c[b+40>>2]=c[a+44>>2];c[b+12>>2]=c[a+16>>2];c[b+16>>2]=c[a+20>>2];c[b+20>>2]=c[a+24>>2];c[b+24>>2]=c[a+28>>2];c[b+44>>2]=c[a+48>>2];c[b+48>>2]=0;return 16705}function Fj(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0;e=ub[c[(c[d>>2]|0)+40>>2]&31](d,a)|0;f=ub[c[(c[d>>2]|0)+28>>2]&31](d,e)|0;c[b>>2]=f;if(f|0)Ib[c[(c[d>>2]|0)+48>>2]&127](d,e);c[b+4>>2]=c[a+4>>2];c[b+8>>2]=0;c[b+12>>2]=c[a+72>>2];c[b+16>>2]=c[a+76>>2];c[b+20>>2]=c[a+80>>2];c[b+24>>2]=c[a+84>>2];c[b+28>>2]=c[a+52>>2];c[b+32>>2]=c[a+56>>2];c[b+36>>2]=c[a+60>>2];c[b+40>>2]=c[a+64>>2];c[b+44>>2]=c[a+68>>2];c[b+48>>2]=0;return 18056}function Gj(b,d,e){b=b|0;d=d|0;e=e|0;b=ir(144)|0;c[b>>2]=6248;a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;c[b+12>>2]=0;a[b+40>>0]=1;c[b+36>>2]=0;c[b+28>>2]=0;c[b+32>>2]=0;a[b+60>>0]=1;c[b+56>>2]=0;c[b+48>>2]=0;c[b+52>>2]=0;a[b+80>>0]=1;c[b+76>>2]=0;c[b+68>>2]=0;c[b+72>>2]=0;c[b+92>>2]=e;g[b+96>>2]=0.0;a[b+140>>0]=1;c[b+136>>2]=0;c[b+128>>2]=0;c[b+132>>2]=0;c[b+108>>2]=d;c[b+112>>2]=0;c[b+116>>2]=2;c[b+120>>2]=1;g[b+104>>2]=0.0;g[b+100>>2]=0.0;return b|0}function Hj(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0;f=c[d>>2]|0;f=ub[c[(c[f>>2]|0)+56>>2]&31](f,72)|0;h=c[d+4>>2]|0;i=c[b+8>>2]|0;g=c[b+12>>2]|0;e=c[b+16>>2]|0;c[f+4>>2]=c[d>>2];c[f>>2]=10796;c[f+8>>2]=i;a[f+28>>0]=1;c[f+24>>2]=0;c[f+16>>2]=0;c[f+20>>2]=0;a[f+48>>0]=1;c[f+44>>2]=0;c[f+36>>2]=0;c[f+40>>2]=0;a[f+52>>0]=0;c[f+56>>2]=h;a[f+60>>0]=0;c[f+64>>2]=g;c[f+68>>2]=e;return f|0}function Ij(a,b,c){a=a|0;b=b|0;c=c|0;var d=0;d=l;l=l+32|0;if(!(+g[a+404>>2]!=0.0)){l=d;return}xm(a,+g[b>>2],+g[b+4>>2],+g[b+8>>2]);if(!(AF(a+604|0)|0)){l=d;return}fo(d,+g[b>>2],+g[b+4>>2],+g[b+8>>2],+g[a+408>>2],+g[a+412>>2],+g[a+416>>2]);yn(d+16|0,+g[c>>2],+g[c+4>>2],+g[c+8>>2],+g[d>>2],+g[d+4>>2],+g[d+8>>2]);ym(a,+g[d+16>>2],+g[d+16+4>>2],+g[d+16+8>>2]);l=d;return}function Jj(a){a=a|0;var b=0,d=0,e=0,f=0.0,g=0,h=0,i=0;e=l;l=l+16|0;b=c[a+8>>2]|0;d=c[a+8+4>>2]|0;if((d|0)>-1|(d|0)==-1&b>>>0>4294967295){f=(+(b>>>0)+4294967296.0*+(d>>>0))*18446744073709551616.0+(+((c[a>>2]|0)>>>0)+4294967296.0*+((c[a+4>>2]|0)>>>0));l=e;return +f}else{i=c[a>>2]|0;h=c[a+4>>2]|0;g=Nt(0,0,i|0,h|0)|0;a=y;d=_t((i|0)==0&(h|0)==0&1|0,0,~b|0,~d|0)|0;c[e>>2]=g;c[e+4>>2]=a;c[e+8>>2]=d;c[e+8+4>>2]=y;f=-+Jj(e);l=e;return +f}return 0.0}function Kj(b,d){b=b|0;d=d|0;var e=0;e=Hq()|0;c[e+8>>2]=0;c[e+12>>2]=-1;c[e+16>>2]=1065353216;c[e+20>>2]=1065353216;c[e+24>>2]=1065353216;g[e+28>>2]=0.0;g[e+48>>2]=.03999999910593033;c[e+56>>2]=0;c[e+60>>2]=1065353216;c[e+64>>2]=1065353216;c[e+68>>2]=1065353216;g[e+72>>2]=0.0;c[e+76>>2]=-1082130432;c[e+80>>2]=-1082130432;c[e+84>>2]=-1082130432;g[e+88>>2]=0.0;a[e+92>>0]=0;c[e>>2]=9036;c[e+96>>2]=b;c[e+4>>2]=3;if(!d)return e|0;di(e);return e|0}function Lj(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;a[b+53>>0]=1;do if((c[b+4>>2]|0)==(e|0)){a[b+52>>0]=1;e=c[b+16>>2]|0;if(!e){c[b+16>>2]=d;c[b+24>>2]=f;c[b+36>>2]=1;if(!((f|0)==1?(c[b+48>>2]|0)==1:0))break;a[b+54>>0]=1;break}if((e|0)!=(d|0)){c[b+36>>2]=(c[b+36>>2]|0)+1;a[b+54>>0]=1;break}e=c[b+24>>2]|0;if((e|0)==2){c[b+24>>2]=f;e=f}if((e|0)==1?(c[b+48>>2]|0)==1:0)a[b+54>>0]=1}while(0);return}function Mj(){var b=0;b=Yq()|0;c[b+8>>2]=0;c[b+12>>2]=-1;c[b+16>>2]=1065353216;c[b+20>>2]=1065353216;c[b+24>>2]=1065353216;g[b+28>>2]=0.0;g[b+48>>2]=.03999999910593033;c[b+56>>2]=0;c[b+60>>2]=1065353216;c[b+64>>2]=1065353216;c[b+68>>2]=1065353216;g[b+72>>2]=0.0;c[b+76>>2]=-1082130432;c[b+80>>2]=-1082130432;c[b+84>>2]=-1082130432;g[b+88>>2]=0.0;a[b+92>>0]=0;c[b>>2]=8804;a[b+112>>0]=1;c[b+108>>2]=0;c[b+104>>2]=0;c[b+4>>2]=4;c[b+100>>2]=0;di(b);return b|0}function Nj(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0;f=c[a+248>>2]|0;a:do if((f|0)>0){e=c[a+256>>2]|0;d=0;while(1){if((c[e+(d<<2)>>2]|0)==(b|0))break a;d=d+1|0;if((d|0)>=(f|0)){d=f;break}}}else d=f;while(0);if((f|0)<=(d|0)){ch(a,b);return}g=c[a+256>>2]|0;d=g+(d<<2)|0;e=c[d>>2]|0;c[d>>2]=c[g+(f+-1<<2)>>2];c[(c[a+256>>2]|0)+(f+-1<<2)>>2]=e;c[a+248>>2]=f+-1;ch(a,b);return}function Oj(b,d,e){b=b|0;d=d|0;e=+e;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0;a[b+251>>0]=0;c[b+68>>2]=c[d>>2];c[b+68+4>>2]=c[d+4>>2];c[b+68+8>>2]=c[d+8>>2];c[b+68+12>>2]=c[d+12>>2];f=+g[b+68>>2];h=+g[b+72>>2];i=+g[b+76>>2];j=+B(+(f*f+h*h+i*i));if(j>1.1920928955078125e-07){k=f*(1.0/j);h=h*(1.0/j);f=i*(1.0/j);d=c[b+80>>2]|0}else{k=0.0;h=0.0;f=0.0;d=0}g[b+84>>2]=k;g[b+88>>2]=h;g[b+92>>2]=f;c[b+96>>2]=d;g[b+252>>2]=+g[b+252>>2]+e;return}function Pj(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0;g=l;l=l+64|0;if(!(SA(a,b)|0))if((b|0)!=0?(f=Th(b,4848)|0,(f|0)!=0):0){b=g+4|0;e=b+52|0;do{c[b>>2]=0;b=b+4|0}while((b|0)<(e|0));c[g>>2]=f;c[g+8>>2]=a;c[g+12>>2]=-1;c[g+48>>2]=1;Pb[c[(c[f>>2]|0)+28>>2]&127](f,g,c[d>>2]|0,1);if((c[g+24>>2]|0)==1){c[d>>2]=c[g+16>>2];b=1}else b=0}else b=0;else b=1;l=g;return b|0}function Qj(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0,j=0.0,k=0.0,l=0.0,m=0;if((d|0)<=0)return;m=0;do{e=+g[a+36>>2];h=+g[a+32>>2];i=b+(m<<4)|0;k=+g[b+(m<<4)+4>>2];f=+g[b+(m<<4)+8>>2];l=+B(+(k*k+f*f));if(l!=0.0){j=f*(e/l);f=+g[i>>2]<0.0?-h:h;e=k*(e/l)}else{j=0.0;f=+g[i>>2]<0.0?-h:h}g[c+(m<<4)>>2]=f;g[c+(m<<4)+4>>2]=e;g[c+(m<<4)+8>>2]=j;m=m+1|0}while((m|0)!=(d|0));return}function Rj(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0,j=0,k=0;j=c[b>>2]|0;if(!e)e=c[a+188>>2]|0;i=c[a+328>>2]|0;if((i|0)<=0)return;h=c[a+336>>2]|0;f=0;while(1){g=h+(f<<2)|0;if((c[g>>2]|0)==(j|0))break;f=f+1|0;if((f|0)>=(i|0)){k=9;break}}if((k|0)==9)return;if((f|0)>=(i|0))return;c[g>>2]=c[h+(i+-1<<2)>>2];c[a+328>>2]=i+-1;k=c[a+344>>2]|0;xb[c[(c[k>>2]|0)+12>>2]&31](k,e,b,d)|0;return}function Sj(a,b){a=a|0;b=b|0;var d=0,e=0,f=0;e=l;l=l+32|0;d=c[a+216>>2]|0;if(+g[d+4>>2]==0.0){d=0;l=e;return d|0}b=c[b>>2]|0;if(!(ub[c[(c[d>>2]|0)+8>>2]&31](d,c[b+188>>2]|0)|0)){d=1;l=e;return d|0}f=c[b+192>>2]|0;d=c[a+216>>2]|0;c[e>>2]=0;c[e+4>>2]=f;c[e+8>>2]=b;c[e+12>>2]=b+4;c[e+16>>2]=-1;c[e+20>>2]=-1;Ac(a+68|0,a+132|0,e,d);d=1;l=e;return d|0}function Tj(b,d,e,f,h){b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0;i=xq()|0;_d(i,b,d,e,f,h);c[i>>2]=5576;c[i+4>>2]=9;a[i+1309>>0]=0;a[i+1309+1>>0]=0;a[i+1309+2>>0]=0;a[i+1309+3>>0]=0;a[i+1309+4>>0]=0;a[i+1309+5>>0]=0;b=i+1316|0;d=b+48|0;do{c[b>>2]=0;b=b+4|0}while((b|0)<(d|0));g[i+1364>>2]=1.0;g[i+1368>>2]=1.0;g[i+1372>>2]=1.0;g[i+1376>>2]=1.0;g[i+1380>>2]=1.0;g[i+1384>>2]=1.0;return i|0}function Uj(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0;if((d|0)<=0)return;l=0;do{e=+g[a+32>>2];h=+g[a+40>>2];j=+g[b+(l<<4)>>2];f=+g[b+(l<<4)+4>>2];k=+B(+(j*j+f*f));if(k!=0.0){i=f*(e/k);f=+g[b+(l<<4)+8>>2]<0.0?-h:h;e=j*(e/k)}else{i=0.0;f=+g[b+(l<<4)+8>>2]<0.0?-h:h}g[c+(l<<4)>>2]=e;g[c+(l<<4)+4>>2]=i;g[c+(l<<4)+8>>2]=f;l=l+1|0}while((l|0)!=(d|0));return}function Vj(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;c[b+4>>2]=c[d>>2];c[b>>2]=10580;a[b+24>>0]=1;c[b+20>>2]=0;c[b+12>>2]=0;c[b+16>>2]=0;a[b+44>>0]=1;c[b+40>>2]=0;c[b+32>>2]=0;c[b+36>>2]=0;a[b+64>>0]=1;c[b+60>>2]=0;c[b+52>>2]=0;c[b+56>>2]=0;a[b+68>>0]=g&1;c[b+72>>2]=c[d+4>>2];a[b+76>>0]=0;c[b+80>>2]=c[(c[(g?f:e)+4>>2]|0)+72>>2];hg(b,e,f);return}function Wj(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,l=0;if((d|0)<=0)return;l=0;do{e=+g[a+32>>2];h=+g[a+36>>2];j=+g[b+(l<<4)>>2];f=+g[b+(l<<4)+8>>2];k=+B(+(j*j+f*f));if(k!=0.0){i=f*(e/k);f=+g[b+(l<<4)+4>>2]<0.0?-h:h;e=j*(e/k)}else{i=0.0;f=+g[b+(l<<4)+4>>2]<0.0?-h:h}g[c+(l<<4)>>2]=e;g[c+(l<<4)+4>>2]=f;g[c+(l<<4)+8>>2]=i;l=l+1|0}while((l|0)!=(d|0));return}function Xj(a,b){a=a|0;b=b|0;var d=0.0,e=0.0,f=0.0,h=0,i=0,j=0;j=c[a+72>>2]|0;i=c[a+68>>2]|0;h=c[a+76>>2]|0;e=+g[a+64>>2]*(+g[b+(j<<2)>>2]/+g[a+16+(j<<2)>>2]);g[a+64>>2]=e;f=+g[a+60>>2]*(+g[b+(i<<2)>>2]/+g[a+16+(i<<2)>>2]+ +g[b+(h<<2)>>2]/+g[a+16+(h<<2)>>2])*.5;g[a+60>>2]=f;g[a+56>>2]=f/+B(+(e*e+f*f));f=+A(+(+g[b>>2]));e=+A(+(+g[b+4>>2]));d=+A(+(+g[b+8>>2]));g[a+16>>2]=f;g[a+20>>2]=e;g[a+24>>2]=d;g[a+28>>2]=0.0;return}function Yj(b){b=b|0;var d=0;c[b>>2]=7620;d=c[b+336>>2]|0;if(d|0){if(a[b+340>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+336>>2]=0}a[b+340>>0]=1;c[b+336>>2]=0;c[b+328>>2]=0;c[b+332>>2]=0;c[b>>2]=6888;d=c[b+296>>2]|0;if(!d){a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;b=b+292|0;c[b>>2]=0;return}if(a[b+300>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+296>>2]=0;a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;b=b+292|0;c[b>>2]=0;return}function Zj(b){b=b|0;var d=0;c[b>>2]=6212;d=c[b+556>>2]|0;if(d|0){if(a[b+560>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+556>>2]=0}a[b+560>>0]=1;c[b+556>>2]=0;c[b+548>>2]=0;c[b+552>>2]=0;c[b>>2]=6888;d=c[b+296>>2]|0;if(!d){a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;b=b+292|0;c[b>>2]=0;return}if(a[b+300>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+296>>2]=0;a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;b=b+292|0;c[b>>2]=0;return}function _j(b){b=b|0;var d=0;d=Hq()|0;c[d+8>>2]=0;c[d+12>>2]=-1;c[d+16>>2]=1065353216;c[d+20>>2]=1065353216;c[d+24>>2]=1065353216;g[d+28>>2]=0.0;g[d+48>>2]=.03999999910593033;c[d+56>>2]=0;c[d+60>>2]=1065353216;c[d+64>>2]=1065353216;c[d+68>>2]=1065353216;g[d+72>>2]=0.0;c[d+76>>2]=-1082130432;c[d+80>>2]=-1082130432;c[d+84>>2]=-1082130432;g[d+88>>2]=0.0;a[d+92>>0]=0;c[d>>2]=9036;c[d+96>>2]=b;c[d+4>>2]=3;di(d);return d|0}function $j(b){b=b|0;var d=0,e=0;d=c[b>>2]|0;if(d|0)Tl(b,d);d=c[b+4>>2]|0;if(d|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+4>>2]=0;c[b+8>>2]=-1;d=c[b+32>>2]|0;if(!d){d=b+28|0;e=b+16|0;c[e>>2]=0;a[b+36>>0]=1;c[b+32>>2]=0;c[b+24>>2]=0;c[d>>2]=0;return}if(a[b+36>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+32>>2]=0;e=b+28|0;d=b+16|0;c[d>>2]=0;a[b+36>>0]=1;c[b+32>>2]=0;c[b+24>>2]=0;c[e>>2]=0;return}function ak(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0;f=l;l=l+48|0;c[f+32>>2]=6608;c[f+32+4>>2]=e;c[f>>2]=c[b>>2];c[f+4>>2]=c[b+4>>2];c[f+8>>2]=c[b+8>>2];c[f+12>>2]=c[b+12>>2];c[f+16>>2]=c[d>>2];c[f+16+4>>2]=c[d+4>>2];c[f+16+8>>2]=c[d+8>>2];c[f+16+12>>2]=c[d+12>>2];Ke(c[a+4>>2]|0,f,f+32|0);Ke(c[a+44>>2]|0,f,f+32|0);l=f;return}function bk(b,d){b=b|0;d=+d;var e=0,f=0,h=0.0;d=1.0/+g[(c[b+108>>2]|0)+404>>2];if((c[b+128>>2]|0)<=0)return;e=0;do{f=c[b+136>>2]|0;if(!(a[f+(e*284|0)+84>>0]|0))h=0.0;else{h=+g[f+(e*284|0)+272>>2];h=d*(+g[f+(e*284|0)+216>>2]*(+g[f+(e*284|0)+204>>2]-+g[f+(e*284|0)+32>>2])*+g[f+(e*284|0)+268>>2]-h*+g[(h<0.0?f+(e*284|0)+220|0:f+(e*284|0)+224|0)>>2]);h=h<0.0?0.0:h}g[f+(e*284|0)+276>>2]=h;e=e+1|0}while((e|0)<(c[b+128>>2]|0));return}function ck(a,b,c,d){a=a|0;b=+b;c=+c;d=+d;var e=0,f=0.0,h=0.0,i=0.0;e=l;l=l+48|0;f=+sF(b);h=+sF(c);i=+sF(d);b=+rF(b);c=+rF(c);d=+rF(d);g[e+32>>2]=h*i;g[e+28>>2]=c*b*i-f*d;g[e+24>>2]=c*f*i+b*d;g[e+20>>2]=h*d;g[e+16>>2]=c*b*d+f*i;g[e+12>>2]=c*f*d-b*i;g[e+8>>2]=-c;g[e+4>>2]=h*b;g[e>>2]=h*f;Gn(a,e+32|0,e+28|0,e+24|0,e+20|0,e+16|0,e+12|0,e+8|0,e+4|0,e);l=e;return}function dk(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;b=c[d>>2]|0;b=ub[c[(c[b>>2]|0)+56>>2]&31](b,80)|0;d=c[d>>2]|0;c[b+4>>2]=d;c[b>>2]=10708;c[b+8>>2]=10756;c[b+56>>2]=d;c[b+60>>2]=0;c[b+44>>2]=f;c[b+48>>2]=e;f=wb[c[(c[d>>2]|0)+12>>2]&63](d,c[f+8>>2]|0,c[e+8>>2]|0)|0;c[b+72>>2]=f;e=c[b+56>>2]|0;Ib[c[(c[e>>2]|0)+20>>2]&127](e,f);a[b+76>>0]=1;return b|0}function ek(a,d,f,g,h,i){a=a|0;d=d|0;f=f|0;g=g|0;h=h|0;i=i|0;var j=0;j=c[a+108>>2]|0;if(j|0){Ub[c[(c[j>>2]|0)+24>>2]&7](j,d,f,g,h,i);return}d=b[a+56>>1]|0;if(!(d<<16>>16))return;h=1;i=1;do{f=c[a+68>>2]|0;if(b[f+(i<<2)>>1]&1){ub[c[(c[g>>2]|0)+8>>2]&31](g,(c[a+60>>2]|0)+((e[f+(i<<2)+2>>1]|0)<<6)|0)|0;d=b[a+56>>1]|0}h=h+1<<16>>16;i=h&65535}while(((d&65535)<<1|1)>>>0>i>>>0);return}function fk(a,b){a=a|0;b=b|0;var d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0;f=+g[a+32>>2]/+g[a+16>>2];e=+g[a+36>>2]/+g[a+20>>2];d=+g[a+40>>2]/+g[a+24>>2];j=+A(+(+g[b>>2]));i=+A(+(+g[b+4>>2]));h=+A(+(+g[b+8>>2]));g[a+16>>2]=j;g[a+20>>2]=i;g[a+24>>2]=h;g[a+28>>2]=0.0;e=e*+g[b+4>>2];d=d*+g[b+8>>2];g[a+32>>2]=f*+g[b>>2];g[a+36>>2]=e;g[a+40>>2]=d;g[a+44>>2]=0.0;c[a+48>>2]=c[a+32+((((c[a+56>>2]|0)+2|0)%3|0)<<2)>>2];return}function gk(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0;h=l;l=l+16|0;c[h>>2]=a;c[h+4>>2]=e;e=c[(c[b+4>>2]|0)+4>>2]|0;g=c[(c[d+4>>2]|0)+4>>2]|0;if((f|0)==1){f=c[a+76+(e*144|0)+(g<<2)>>2]|0;f=xb[c[(c[f>>2]|0)+8>>2]&31](f,h,b,d)|0;l=h;return f|0}else{f=c[a+5260+(e*144|0)+(g<<2)>>2]|0;f=xb[c[(c[f>>2]|0)+8>>2]&31](f,h,b,d)|0;l=h;return f|0}return 0}function hk(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0,h=0.0,i=0.0;e=+g[a+32>>2];i=+g[a+36>>2];h=+g[a+40>>2];switch(d|0){case 0:{a=0;d=0;f=1065353216;break}case 1:{a=0;d=0;f=-1082130432;break}case 2:{a=0;d=1065353216;f=0;e=i;break}case 3:{a=0;d=-1082130432;f=0;e=i;break}case 4:{a=1065353216;d=0;f=0;e=h;break}case 5:{a=-1082130432;d=0;f=0;e=h;break}default:return}c[b>>2]=f;c[b+4>>2]=d;c[b+8>>2]=a;g[b+12>>2]=-e;return}function ik(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;b=c[d>>2]|0;b=ub[c[(c[b>>2]|0)+56>>2]&31](b,80)|0;d=c[d>>2]|0;c[b+4>>2]=d;c[b>>2]=10708;c[b+8>>2]=10756;c[b+56>>2]=d;c[b+60>>2]=0;c[b+44>>2]=e;c[b+48>>2]=f;f=wb[c[(c[d>>2]|0)+12>>2]&63](d,c[e+8>>2]|0,c[f+8>>2]|0)|0;c[b+72>>2]=f;e=c[b+56>>2]|0;Ib[c[(c[e>>2]|0)+20>>2]&127](e,f);a[b+76>>0]=0;return b|0}function jk(a){a=a|0;var b=0,d=0,e=0,f=0.0,h=0.0;e=c[a+248>>2]|0;if((e|0)<=0)return;b=c[a+256>>2]|0;a=0;do{d=c[b+(a<<2)>>2]|0;switch(c[d+220>>2]|0){case 2:case 5:break;default:if(!(c[d+204>>2]&3)){h=+g[d+428>>2]*+g[d+412>>2];f=+g[d+432>>2]*+g[d+416>>2];g[d+472>>2]=+g[d+424>>2]*+g[d+408>>2]+ +g[d+472>>2];g[d+476>>2]=h+ +g[d+476>>2];g[d+480>>2]=f+ +g[d+480>>2]}}a=a+1|0}while((a|0)!=(e|0));return}function kk(a,b){a=a|0;b=b|0;var c=0,d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0,k=0.0,m=0.0;c=l;l=l+16|0;m=+g[a+12>>2];i=+g[(AF(b)|0)>>2];j=+g[a>>2];k=+g[b+12>>2];h=+g[a+4>>2];d=+g[(iF(b)|0)>>2];e=+g[a+8>>2];f=+g[(jF(b)|0)>>2];g[c+12>>2]=m*i+j*k+h*d-e*f;g[c+8>>2]=m*f+h*k+e*i-j*d;g[c+4>>2]=m*d+e*k+j*f-h*i;g[c>>2]=m*k-j*i-h*f-e*d;Up(a,c+12|0,c+8|0,c+4|0,c);l=c;return a|0}function lk(a,b,d){a=a|0;b=+b;d=d|0;var e=0,f=0.0,h=0.0,i=0.0,j=0,k=0;e=l;l=l+16|0;j=c[a+56>>2]|0;k=c[a+32+(((j+2|0)%3|0)<<2)>>2]|0;c[e>>2]=k;c[e+4>>2]=k;c[e+8>>2]=k;g[e+12>>2]=0.0;g[e+(j<<2)>>2]=+g[a+32+(j<<2)>>2]+ +g[e+(j<<2)>>2];h=+g[e>>2]*2.0;f=+g[e+4>>2]*2.0;i=+g[e+8>>2]*2.0;g[d>>2]=b*.0833333283662796*(f*f+i*i);g[d+4>>2]=b*.0833333283662796*(h*h+i*i);g[d+8>>2]=b*.0833333283662796*(h*h+f*f);l=e;return}function mk(a,b){a=a|0;b=+b;var d=0.0,e=0.0,f=0.0,h=0.0,i=0.0;h=+ib[c[(c[a>>2]|0)+48>>2]&15](a);e=+ib[c[(c[a>>2]|0)+48>>2]&15](a);i=+ib[c[(c[a>>2]|0)+48>>2]&15](a);h=h+ +g[a+32>>2];e=e+ +g[a+36>>2];i=i+ +g[a+40>>2];g[a+48>>2]=b;f=+ib[c[(c[a>>2]|0)+48>>2]&15](a);d=+ib[c[(c[a>>2]|0)+48>>2]&15](a);b=i-+ib[c[(c[a>>2]|0)+48>>2]&15](a);g[a+32>>2]=h-f;g[a+36>>2]=e-d;g[a+40>>2]=b;g[a+44>>2]=0.0;return}function nk(b,d,e){b=b|0;d=d|0;e=e|0;var f=0;f=xq()|0;yd(f,b,d,e);c[f>>2]=5576;c[f+4>>2]=9;a[f+1309>>0]=0;a[f+1309+1>>0]=0;a[f+1309+2>>0]=0;a[f+1309+3>>0]=0;a[f+1309+4>>0]=0;a[f+1309+5>>0]=0;b=f+1316|0;d=b+48|0;do{c[b>>2]=0;b=b+4|0}while((b|0)<(d|0));g[f+1364>>2]=1.0;g[f+1368>>2]=1.0;g[f+1372>>2]=1.0;g[f+1376>>2]=1.0;g[f+1380>>2]=1.0;g[f+1384>>2]=1.0;return f|0}function ok(a,b){a=a|0;b=b|0;var c=0.0,d=0.0,e=0.0,f=0;f=l;l=l+16|0;d=+g[b>>2];e=+g[b+4>>2];c=+g[b+8>>2];if(!(d*d+e*e+c*c>0.0)){e=d*d+e*e+c*c;e=+B(+e);b=a+52|0;g[b>>2]=e;l=f;return}g[f>>2]=-d;g[f+4>>2]=-e;g[f+8>>2]=-c;g[f+12>>2]=0.0;Qd(a,f);c=+g[b>>2];d=+g[b+4>>2];e=+g[b+8>>2];e=c*c+d*d+e*e;e=+B(+e);b=a+52|0;g[b>>2]=e;l=f;return}function pk(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;b=c[d>>2]|0;b=ub[c[(c[b>>2]|0)+56>>2]&31](b,16)|0;d=c[d>>2]|0;c[b+4>>2]=d;c[b>>2]=10532;a[b+8>>0]=0;c[b+12>>2]=0;if(!(wb[c[(c[d>>2]|0)+24>>2]&63](d,c[e+8>>2]|0,c[f+8>>2]|0)|0))return b|0;d=c[b+4>>2]|0;c[b+12>>2]=wb[c[(c[d>>2]|0)+12>>2]&63](d,c[e+8>>2]|0,c[f+8>>2]|0)|0;a[b+8>>0]=1;return b|0}function qk(b,d){b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0;a[b+251>>0]=1;c[b+68>>2]=c[d>>2];c[b+68+4>>2]=c[d+4>>2];c[b+68+8>>2]=c[d+8>>2];c[b+68+12>>2]=c[d+12>>2];e=+g[b+68>>2];f=+g[b+72>>2];h=+g[b+76>>2];i=+B(+(e*e+f*f+h*h));if(i>1.1920928955078125e-07){j=e*(1.0/i);f=f*(1.0/i);e=h*(1.0/i);d=c[b+80>>2]|0}else{j=0.0;f=0.0;e=0.0;d=0}g[b+84>>2]=j;g[b+88>>2]=f;g[b+92>>2]=e;c[b+96>>2]=d;return}function rk(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0.0,h=0.0,i=0.0,j=0.0,k=0.0;i=+ib[c[(c[a>>2]|0)+48>>2]&15](a);h=+ib[c[(c[a>>2]|0)+48>>2]&15](a);f=+ib[c[(c[a>>2]|0)+48>>2]&15](a);k=+g[b+52>>2]-h;j=+g[b+56>>2]-f;g[d>>2]=+g[b+48>>2]-i;g[d+4>>2]=k;g[d+8>>2]=j;g[d+12>>2]=0.0;h=h+ +g[b+52>>2];f=f+ +g[b+56>>2];g[e>>2]=i+ +g[b+48>>2];g[e+4>>2]=h;g[e+8>>2]=f;g[e+12>>2]=0.0;return}function sk(a,b){a=a|0;b=+b;var d=0,e=0.0,f=0.0,h=0.0,i=0.0;d=Uq()|0;c[d+4>>2]=35;c[d+8>>2]=0;c[d+12>>2]=-1;g[d+16>>2]=0.0;c[d>>2]=9892;i=+g[a>>2];h=+g[a+4>>2];f=+g[a+8>>2];a=c[a+12>>2]|0;e=1.0/+B(+(i*i+h*h+f*f));g[d+52>>2]=i*e;g[d+56>>2]=h*e;g[d+60>>2]=f*e;c[d+64>>2]=a;g[d+68>>2]=b;c[d+72>>2]=1065353216;c[d+76>>2]=1065353216;c[d+80>>2]=1065353216;g[d+84>>2]=0.0;c[d+4>>2]=28;return d|0}function tk(a){a=a|0;var b=0,d=0,e=0.0,f=0.0;if((c[a+128>>2]|0)<=0)return;b=0;do{d=c[a+136>>2]|0;c[d+(b*284|0)+32>>2]=c[d+(b*284|0)+204>>2];g[d+(b*284|0)+272>>2]=0.0;f=-+g[d+(b*284|0)+56>>2];e=-+g[d+(b*284|0)+60>>2];g[d+(b*284|0)>>2]=-+g[d+(b*284|0)+52>>2];g[d+(b*284|0)+4>>2]=f;g[d+(b*284|0)+8>>2]=e;g[d+(b*284|0)+12>>2]=0.0;g[d+(b*284|0)+268>>2]=1.0;b=b+1|0}while((b|0)<(c[a+128>>2]|0));return}function uk(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0;g=c[d>>2]|0;g=ub[c[(c[g>>2]|0)+56>>2]&31](g,20)|0;h=c[d+4>>2]|0;i=a[b+4>>0]|0;b=c[d>>2]|0;c[g+4>>2]=b;c[g>>2]=7788;a[g+8>>0]=0;c[g+12>>2]=h;a[g+16>>0]=i;if(h|0)return g|0;c[g+12>>2]=wb[c[(c[b>>2]|0)+12>>2]&63](b,c[e+8>>2]|0,c[f+8>>2]|0)|0;a[g+8>>0]=1;return g|0}function vk(b){b=b|0;var d=0;c[b>>2]=7620;d=c[b+336>>2]|0;if(d|0){if(a[b+340>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+336>>2]=0}a[b+340>>0]=1;c[b+336>>2]=0;c[b+328>>2]=0;c[b+332>>2]=0;c[b>>2]=6888;d=c[b+296>>2]|0;if(d|0){if(a[b+300>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+296>>2]=0}a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;c[b+292>>2]=0;c[6486]=(c[6486]|0)+1;gd(c[b+-4>>2]|0);return}function wk(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0;j=+g[d>>2];i=+g[d+4>>2];e=+g[d+8>>2];f=j*+g[b+60>>2]+i*+g[b+64>>2]+e*+g[b+68>>2];h=j*+g[b+76>>2]+i*+g[b+80>>2]+e*+g[b+84>>2];e=j*+g[b+92>>2]+i*+g[b+96>>2]+e*+g[b+100>>2];d=b+60+((f<h?(h<e?2:1):f<e?2:0)<<4)|0;c[a>>2]=c[d>>2];c[a+4>>2]=c[d+4>>2];c[a+8>>2]=c[d+8>>2];c[a+12>>2]=c[d+12>>2];return}function xk(b){b=b|0;var d=0;c[b>>2]=6212;d=c[b+556>>2]|0;if(d|0){if(a[b+560>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+556>>2]=0}a[b+560>>0]=1;c[b+556>>2]=0;c[b+548>>2]=0;c[b+552>>2]=0;c[b>>2]=6888;d=c[b+296>>2]|0;if(d|0){if(a[b+300>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+296>>2]=0}a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;c[b+292>>2]=0;c[6486]=(c[6486]|0)+1;gd(c[b+-4>>2]|0);return}function yk(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0;f=l;l=l+48|0;c[f>>2]=10140;c[f+4>>2]=b;c[f+8>>2]=c[d>>2];c[f+8+4>>2]=c[d+4>>2];c[f+8+8>>2]=c[d+8>>2];c[f+8+12>>2]=c[d+12>>2];c[f+24>>2]=c[e>>2];c[f+24+4>>2]=c[e+4>>2];c[f+24+8>>2]=c[e+8>>2];c[f+24+12>>2]=c[e+12>>2];b=c[a+52>>2]|0;Pb[c[(c[b>>2]|0)+8>>2]&127](b,f,d,e);l=f;return}function zk(a,b,d){a=a|0;b=b|0;d=d|0;Mt(a);c[a>>2]=5008;dC(a+16|0);c[a+36>>2]=c[b>>2];c[a+36+4>>2]=c[b+4>>2];c[a+36+8>>2]=c[b+8>>2];c[a+36+12>>2]=c[b+12>>2];c[a+52>>2]=c[d>>2];c[a+52+4>>2]=c[d+4>>2];c[a+52+8>>2]=c[d+8>>2];c[a+52+12>>2]=c[d+12>>2];dC(a+68|0);dC(a+88|0);dC(a+108|0);return}function Ak(a,b,d){a=a|0;b=b|0;d=d|0;Br(a);c[a>>2]=5228;dC(a+24|0);c[a+44>>2]=c[b>>2];c[a+44+4>>2]=c[b+4>>2];c[a+44+8>>2]=c[b+8>>2];c[a+44+12>>2]=c[b+12>>2];c[a+60>>2]=c[d>>2];c[a+60+4>>2]=c[d+4>>2];c[a+60+8>>2]=c[d+8>>2];c[a+60+12>>2]=c[d+12>>2];dC(a+76|0);dC(a+96|0);dC(a+116|0);return}function Bk(a,b,d){a=a|0;b=+b;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0;i=+g[a+32>>2];f=+g[a+36>>2];j=+g[a+40>>2];h=+ib[c[(c[a>>2]|0)+48>>2]&15](a);e=+ib[c[(c[a>>2]|0)+48>>2]&15](a);j=(j+ +ib[c[(c[a>>2]|0)+48>>2]&15](a))*2.0;g[d>>2]=b/12.0*((f+e)*2.0*(f+e)*2.0+j*j);g[d+4>>2]=b/12.0*((i+h)*2.0*(i+h)*2.0+j*j);g[d+8>>2]=b/12.0*((i+h)*2.0*(i+h)*2.0+(f+e)*2.0*(f+e)*2.0);g[d+12>>2]=0.0;return}function Ck(a,b,d,e,f,h){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;h=h|0;var i=0;d=l;l=l+16|0;c[d>>2]=6644;c[d+4>>2]=e;i=c[a+168>>2]|0;Pd(c[a+4>>2]|0,b,e+4|0,e+20|0,+g[e+32>>2],f,h,i,d);Pd(c[a+44>>2]|0,b,e+4|0,e+20|0,+g[e+32>>2],f,h,i,d);l=d;return}function Dk(a,b,c){a=a|0;b=b|0;c=c|0;var d=0;d=l;l=l+32|0;ro(a,+g[b>>2],+g[b+4>>2],+g[b+8>>2]);fo(d,+g[b>>2],+g[b+4>>2],+g[b+8>>2],+g[a+408>>2],+g[a+412>>2],+g[a+416>>2]);yn(d+16|0,+g[c>>2],+g[c+4>>2],+g[c+8>>2],+g[d>>2],+g[d+4>>2],+g[d+8>>2]);vo(a,+g[d+16>>2],+g[d+16+4>>2],+g[d+16+8>>2]);l=d;return}function Ek(a,b,c,d,e){a=a|0;b=b|0;c=+c;d=+d;e=+e;var f=0,h=0;f=l;l=l+16|0;h=PD(b,0)|0;g[f+8>>2]=+Tv(+g[h>>2],+g[h+4>>2],+g[h+8>>2],c,d,e);h=PD(b,1)|0;g[f+4>>2]=+Tv(+g[h>>2],+g[h+4>>2],+g[h+8>>2],c,d,e);b=PD(b,2)|0;g[f>>2]=+Tv(+g[b>>2],+g[b+4>>2],+g[b+8>>2],c,d,e);Fq(a,f+8|0,f+4|0,f);l=f;return}function Fk(){var a=0,b=0,d=0;a=Pq()|0;c[a>>2]=1025;b=a+120|0;d=b+44|0;do{c[b>>2]=0;b=b+4|0}while((b|0)<(d|0));b=a+312|0;d=b+44|0;do{c[b>>2]=0;b=b+4|0}while((b|0)<(d|0));b=a+504|0;d=b+44|0;do{c[b>>2]=0;b=b+4|0}while((b|0)<(d|0));b=a+696|0;d=b+44|0;do{c[b>>2]=0;b=b+4|0}while((b|0)<(d|0));c[a+772>>2]=0;c[a+776>>2]=0;c[a+780>>2]=0;c[a+800>>2]=0;return a|0}function Gk(a,b,d){a=a|0;b=b|0;d=d|0;a:do switch(c[b+220>>2]|0){case 2:case 5:{switch(c[d+220>>2]|0){case 2:case 5:{a=0;break}default:break a}return a|0}default:{}}while(0);if(!((c[b+280>>2]|0)!=0?!(ub[c[(c[b>>2]|0)+12>>2]&31](b,d)|0):0)){if(!(c[d+280>>2]|0)){d=1;return d|0}if(ub[c[(c[d>>2]|0)+12>>2]&31](d,b)|0){d=1;return d|0}}d=0;return d|0}function Hk(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0;f=c[a+296>>2]|0;a:do if((f|0)>0){e=c[a+304>>2]|0;d=0;while(1){if((c[e+(d<<2)>>2]|0)==(b|0))break a;d=d+1|0;if((d|0)>=(f|0)){d=f;break}}}else d=f;while(0);if((f|0)<=(d|0))return;g=c[a+304>>2]|0;b=g+(d<<2)|0;e=c[b>>2]|0;c[b>>2]=c[g+(f+-1<<2)>>2];c[(c[a+304>>2]|0)+(f+-1<<2)>>2]=e;c[a+296>>2]=f+-1;return}function Ik(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0;j=+g[a+32>>2];h=+g[a+36>>2];e=+g[a+40>>2];i=+ib[c[(c[a>>2]|0)+48>>2]&15](a);f=+ib[c[(c[a>>2]|0)+48>>2]&15](a);e=e+ +ib[c[(c[a>>2]|0)+48>>2]&15](a);g[d>>2]=(j+i)*+(b&1^1|0)-(j+i)*+(b&1|0);g[d+4>>2]=(h+f)*+(b>>>1&1^1|0)-(h+f)*+(b>>>1&1|0);g[d+8>>2]=e*+(b>>>2&1^1|0)-e*+(b>>>2&1|0);g[d+12>>2]=0.0;return}function Jk(b,c,d){b=b|0;c=c|0;d=d|0;var e=0,f=0,g=0;if(c>>>0>0|(c|0)==0&b>>>0>4294967295){do{e=b;b=Ky(b|0,c|0,10,0)|0;f=c;c=y;g=Iq(b|0,c|0,-10,-1)|0;g=_t(e|0,f|0,g|0,y|0)|0;d=d+-1|0;a[d>>0]=g&255|48}while(f>>>0>9|(f|0)==9&e>>>0>4294967295);c=b}else c=b;if(c)do{g=c;c=(c>>>0)/10|0;d=d+-1|0;a[d>>0]=g+(N(c,-10)|0)|48}while(g>>>0>=10);return d|0}function Kk(a,b,c,d,e){a=a|0;b=b|0;c=+c;d=+d;e=+e;var f=0,h=0,i=0,j=0;f=l;l=l+16|0;j=PD(b,0)|0;i=PD(b,1)|0;h=PD(b,2)|0;vl(f,c,d,e,+g[j>>2],+g[j+4>>2],+g[j+8>>2],+g[i>>2],+g[i+4>>2],+g[i+8>>2],+g[h>>2],+g[h+4>>2],+g[h+8>>2]);eo(a,+g[f>>2],+g[f+4>>2],+g[f+8>>2],+g[b+48>>2],+g[b+52>>2],+g[b+56>>2]);l=f;return}function Lk(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0.0,g=0;e=l;l=l+16|0;c[e>>2]=-1;c[e+4>>2]=c[a+20>>2];if(!(c[b+4>>2]|0))c[b+4>>2]=e;g=c[a+16>>2]|0;f=+lb[c[(c[g>>2]|0)+12>>2]&31](g,b,d);c[a+4>>2]=c[(c[a+16>>2]|0)+4>>2];l=e;return +f}function Mk(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0.0,i=0.0,j=0.0;i=+g[b+32>>2];j=+g[b+36>>2];e=+g[b+40>>2];h=+ib[c[(c[b>>2]|0)+48>>2]&15](b);f=+ib[c[(c[b>>2]|0)+48>>2]&15](b);e=e+ +ib[c[(c[b>>2]|0)+48>>2]&15](b);f=+g[d+4>>2]>=0.0?j+f:-(j+f);e=+g[d+8>>2]>=0.0?e:-e;g[a>>2]=+g[d>>2]>=0.0?i+h:-(i+h);g[a+4>>2]=f;g[a+8>>2]=e;g[a+12>>2]=0.0;return}function Nk(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0,f=0.0,h=0.0,i=0.0;if((d|0)<=0)return;e=0;do{i=+g[a+32>>2];h=+g[a+36>>2];h=+g[b+(e<<4)+4>>2]>=0.0?h:-h;f=+g[a+40>>2];f=+g[b+(e<<4)+8>>2]>=0.0?f:-f;g[c+(e<<4)>>2]=+g[b+(e<<4)>>2]>=0.0?i:-i;g[c+(e<<4)+4>>2]=h;g[c+(e<<4)+8>>2]=f;g[c+(e<<4)+12>>2]=0.0;e=e+1|0}while((e|0)!=(d|0));return}function Ok(a,b,d,e,f,g,h,i,j,k){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;k=k|0;a=c[a+32>>2]|0;c[d>>2]=c[a+(k<<5)+12>>2];c[b>>2]=c[a+(k<<5)+16>>2];c[e>>2]=c[a+(k<<5)+28>>2];c[f>>2]=c[a+(k<<5)+20>>2];c[i>>2]=c[a+(k<<5)>>2];c[g>>2]=c[a+(k<<5)+4>>2];c[h>>2]=c[a+(k<<5)+8>>2];c[j>>2]=c[a+(k<<5)+24>>2];return}function Pk(b){b=b|0;var d=0,e=0;c[b>>2]=8424;d=c[b+68>>2]|0;if(d|0?($j(d),e=c[b+68>>2]|0,e|0):0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}d=c[b+28>>2]|0;if(!d){a[b+32>>0]=1;c[b+28>>2]=0;c[b+20>>2]=0;b=b+24|0;c[b>>2]=0;return}if(a[b+32>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+28>>2]=0;a[b+32>>0]=1;c[b+28>>2]=0;c[b+20>>2]=0;b=b+24|0;c[b>>2]=0;return}function Qk(a,b){a=+a;b=+b;var d=0;d=qr()|0;c[d+8>>2]=0;c[d+12>>2]=-1;c[d>>2]=8936;c[d+16>>2]=1065353216;c[d+20>>2]=1065353216;c[d+24>>2]=1065353216;g[d+28>>2]=0.0;g[d+48>>2]=.03999999910593033;g[d+60>>2]=a;g[d+64>>2]=b;c[d+4>>2]=11;g[d+56>>2]=a/+B(+(a*a+b*b));c[d>>2]=8604;c[d+68>>2]=0;c[d+72>>2]=2;c[d+76>>2]=1;g[d+32>>2]=a;g[d+40>>2]=b;g[d+36>>2]=a;return d|0}function Rk(a,b){a=+a;b=+b;var d=0;d=qr()|0;c[d+8>>2]=0;c[d+12>>2]=-1;c[d>>2]=8936;c[d+16>>2]=1065353216;c[d+20>>2]=1065353216;c[d+24>>2]=1065353216;g[d+28>>2]=0.0;g[d+48>>2]=.03999999910593033;g[d+60>>2]=a;g[d+64>>2]=b;c[d+4>>2]=11;g[d+56>>2]=a/+B(+(a*a+b*b));c[d>>2]=8704;c[d+68>>2]=1;c[d+72>>2]=0;c[d+76>>2]=2;g[d+36>>2]=a;g[d+32>>2]=b;g[d+40>>2]=a;return d|0}function Sk(b){b=b|0;var d=0,e=0;c[b>>2]=8804;d=c[b+108>>2]|0;if(d|0){if(a[b+112>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+108>>2]=0}a[b+112>>0]=1;c[b+108>>2]=0;c[b+100>>2]=0;c[b+104>>2]=0;c[b>>2]=9660;d=c[b+56>>2]|0;if(d|0?(Db[c[c[d>>2]>>2]&255](d),e=c[b+56>>2]|0,e|0):0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}c[6486]=(c[6486]|0)+1;gd(c[b+-4>>2]|0);return}function Tk(a,b){a=a|0;b=+b;var d=0;d=l;l=l+16|0;c[a+8>>2]=0;c[a+12>>2]=-1;c[a+16>>2]=1065353216;c[a+20>>2]=1065353216;c[a+24>>2]=1065353216;g[a+28>>2]=0.0;g[a+48>>2]=.03999999910593033;c[a>>2]=9792;c[a+4>>2]=8;g[d+8>>2]=1.0;g[d+4>>2]=1.0;g[d>>2]=1.0;Fq(a+16|0,d+8|0,d+4|0,d);nq(a+32|0);HD(a+32|0,b);g[a+48>>2]=b;g[a+52>>2]=0.0;l=d;return}function Uk(a,b){a=+a;b=+b;var d=0;d=qr()|0;c[d+8>>2]=0;c[d+12>>2]=-1;c[d+16>>2]=1065353216;c[d+20>>2]=1065353216;c[d+24>>2]=1065353216;g[d+28>>2]=0.0;g[d+48>>2]=.03999999910593033;c[d>>2]=8504;g[d+60>>2]=a;g[d+64>>2]=b;c[d+4>>2]=11;c[d+68>>2]=0;c[d+72>>2]=1;c[d+76>>2]=2;g[d+32>>2]=a;g[d+36>>2]=b;g[d+40>>2]=a;g[d+56>>2]=a/+B(+(a*a+b*b));return d|0}function Vk(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;switch(b|0){case 0:{a=0;b=0;e=1065353216;break}case 1:{a=0;b=0;e=-1082130432;break}case 2:{a=0;b=1065353216;e=0;break}case 3:{a=0;b=-1082130432;e=0;break}case 4:{a=1065353216;b=0;e=0;break}case 5:{a=-1082130432;b=0;e=0;break}default:return}c[d>>2]=e;c[d+4>>2]=b;c[d+8>>2]=a;g[d+12>>2]=0.0;return}function Wk(b,d,e,f){b=b|0;d=d|0;e=e|0;f=+f;c[b+4>>2]=c[d>>2];c[b+4+4>>2]=c[d+4>>2];c[b+4+8>>2]=c[d+8>>2];c[b+4+12>>2]=c[d+12>>2];c[b+20>>2]=c[e>>2];c[b+20+4>>2]=c[e+4>>2];c[b+20+8>>2]=c[e+8>>2];c[b+20+12>>2]=c[e+12>>2];g[b+36>>2]=f;a[b+40>>0]=1;return}function Xk(a,e,f){a=a|0;e=e|0;f=f|0;var h=0.0;switch(c[a+100>>2]|0){case 0:{h=+g[(c[a+96>>2]|0)+((N(c[a+68>>2]|0,f)|0)+e<<2)>>2];return +h}case 5:{h=+(d[(c[a+96>>2]|0)+((N(c[a+68>>2]|0,f)|0)+e)>>0]|0)*+g[a+92>>2];return +h}case 3:{h=+(b[(c[a+96>>2]|0)+((N(c[a+68>>2]|0,f)|0)+e<<1)>>1]|0)*+g[a+92>>2];return +h}default:{h=0.0;return +h}}return 0.0}function Yk(a,b,d,e){a=a|0;b=b|0;d=+d;e=e|0;switch(e|0){case 5:case -1:break;default:return}switch(b|0){case 2:{g[a+764>>2]=d;c[a+748>>2]=c[a+748>>2]|2;return}case 4:{g[a+760>>2]=d;c[a+748>>2]=c[a+748>>2]|1;return}case 3:{g[a+752>>2]=d;c[a+748>>2]=c[a+748>>2]|4;return}case 1:{g[a+756>>2]=d;c[a+748>>2]=c[a+748>>2]|8;return}default:return}}function Zk(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0;if((c[a+8>>2]|0)<=0)return;e=0;do{f=c[a+16>>2]|0;g=f+(e<<4)|0;if(ub[c[(c[b>>2]|0)+8>>2]&31](b,g)|0){xb[c[(c[a>>2]|0)+12>>2]&31](a,c[g>>2]|0,c[f+(e<<4)+4>>2]|0,d)|0;c[6471]=(c[6471]|0)+-1}else e=e+1|0}while((e|0)<(c[a+8>>2]|0));return}function _k(a,b){a=a|0;b=b|0;var c=0.0,d=0;d=l;l=l+32|0;c=+g[b+12>>2];if(1.0-c*c<1.1920928955078125e-06){g[d+20>>2]=1.0;g[d+16>>2]=0.0;g[d+12>>2]=0.0;Fq(a,d+20|0,d+16|0,d+12|0);l=d;return}else{c=1.0/+qF(1.0-c*c);g[d+8>>2]=+g[b>>2]*c;g[d+4>>2]=+g[b+4>>2]*c;g[d>>2]=+g[b+8>>2]*c;Fq(a,d+8|0,d+4|0,d);l=d;return}}function $k(b){b=b|0;var d=0;c[b>>2]=8804;d=c[b+108>>2]|0;if(d|0){if(a[b+112>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+108>>2]=0}a[b+112>>0]=1;c[b+108>>2]=0;c[b+100>>2]=0;c[b+104>>2]=0;c[b>>2]=9660;d=c[b+56>>2]|0;if(!d)return;Db[c[c[d>>2]>>2]&255](d);d=c[b+56>>2]|0;if(!d)return;c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);return}function al(a,b){a=+a;b=b|0;var d=0,e=0,f=0;h[j>>3]=a;d=c[j>>2]|0;e=c[j+4>>2]|0;f=js(d|0,e|0,52)|0;switch(f&2047){case 0:{if(a!=0.0){a=+al(a*18446744073709551616.0,b);d=(c[b>>2]|0)+-64|0}else d=0;c[b>>2]=d;break}case 2047:break;default:{c[b>>2]=(f&2047)+-1022;c[j>>2]=d;c[j+4>>2]=e&-2146435073|1071644672;a=+h[j>>3]}}return +a}function bl(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0;e=AF(c[a+4>>2]|0)|0;if((e|0)>(b|0)){c[a+4>>2]=b;return}if((e|0)<(b|0))Hm(a,b);while(1){if((e|0)>=(b|0))break;f=AF((c[a+12>>2]|0)+(e<<4)|0)|0;c[f>>2]=c[d>>2];c[f+4>>2]=c[d+4>>2];c[f+8>>2]=c[d+8>>2];c[f+12>>2]=c[d+12>>2];e=e+1|0}c[a+4>>2]=b;return}function cl(a,b){a=a|0;b=b|0;var d=0;d=l;l=l+16|0;c[a+408>>2]=c[b>>2];c[a+408+4>>2]=c[b+4>>2];c[a+408+8>>2]=c[b+8>>2];c[a+408+12>>2]=c[b+12>>2];Lo(d,+g[a+408>>2],+g[a+412>>2],+g[a+416>>2],+g[a+404>>2]);c[a+620>>2]=c[d>>2];c[a+620+4>>2]=c[d+4>>2];c[a+620+8>>2]=c[d+8>>2];c[a+620+12>>2]=c[d+12>>2];l=d;return}function dl(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0;g=c[a+328>>2]|0;if((g|0)<=0)return;b=c[b>>2]|0;f=c[a+336>>2]|0;d=0;while(1){e=f+(d<<2)|0;if((c[e>>2]|0)==(b|0))break;d=d+1|0;if((d|0)>=(g|0)){h=7;break}}if((h|0)==7)return;if((d|0)>=(g|0))return;c[e>>2]=c[f+(g+-1<<2)>>2];c[a+328>>2]=g+-1;return}function el(a,b,c,d){a=a|0;b=+b;c=+c;d=+d;var e=0,f=0.0,h=0.0,i=0.0;e=l;l=l+16|0;f=+sF(b*.5);b=+rF(b*.5);h=+sF(c*.5);c=+rF(c*.5);i=+sF(d*.5);d=+rF(d*.5);g[e+12>>2]=d*h*f-i*c*b;g[e+8>>2]=i*c*f+d*h*b;g[e+4>>2]=i*h*b-d*c*f;g[e>>2]=i*h*f+d*c*b;Up(a,e+12|0,e+8|0,e+4|0,e);l=e;return}function fl(a,b,d,e,f,g,h,i,j,k){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;k=k|0;+qb[c[(c[a>>2]|0)+44>>2]&3](a,b,d,e,f,g,h,i,j);+qb[c[(c[a>>2]|0)+48>>2]&3](a,b,d,e,f,g,h,i,j);+nb[c[(c[a>>2]|0)+36>>2]&1](a,b,d,i);return 0.0}function gl(a,b){a=a|0;b=b|0;var d=0,e=0;d=c[a+4>>2]|0;e=AF(d)|0;if((e|0)==(AF(c[a+8>>2]|0)|0)){Hm(a,pC(e)|0);d=c[a+4>>2]|0}e=AF((c[a+12>>2]|0)+(d<<4)|0)|0;c[e>>2]=c[b>>2];c[e+4>>2]=c[b+4>>2];c[e+8>>2]=c[b+8>>2];c[e+12>>2]=c[b+12>>2];c[a+4>>2]=(c[a+4>>2]|0)+1;return}function hl(a,b,d,e,f,h){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;h=+h;c[a>>2]=b;c[a+4>>2]=d;c[a+8>>2]=c[e>>2];c[a+8+4>>2]=c[e+4>>2];c[a+8+8>>2]=c[e+8>>2];c[a+8+12>>2]=c[e+12>>2];c[a+24>>2]=c[f>>2];c[a+24+4>>2]=c[f+4>>2];c[a+24+8>>2]=c[f+8>>2];c[a+24+12>>2]=c[f+12>>2];g[a+40>>2]=h;return}function il(){var b=0,e=0,f=0;f=l;l=l+16|0;a[f>>0]=10;b=c[2770]|0;if(!b)if(!(Zm(11064)|0)){b=c[2770]|0;e=4}else b=-1;else e=4;do if((e|0)==4){e=c[2771]|0;if(!(e>>>0>=b>>>0|(a[11139]|0)==10)){c[2771]=e+1;a[e>>0]=10;b=10;break}if((wb[c[11100>>2]&63](11064,f,1)|0)==1)b=d[f>>0]|0;else b=-1}while(0);l=f;return b|0}function jl(){var b=0;b=l;l=l+48|0;if(a[24160]|0){l=b;return}if(!(lx(24160)|0)){l=b;return}g[b+32>>2]=1.0;g[b+28>>2]=0.0;g[b+24>>2]=0.0;g[b+20>>2]=0.0;g[b+16>>2]=1.0;g[b+12>>2]=0.0;g[b+8>>2]=0.0;g[b+4>>2]=0.0;g[b>>2]=1.0;No(24424,b+32|0,b+28|0,b+24|0,b+20|0,b+16|0,b+12|0,b+8|0,b+4|0,b);l=b;return}function kl(a,b,c){a=a|0;b=b|0;c=+c;var d=0,e=0.0;d=l;l=l+16|0;e=+ay(+g[b>>2],+g[b+4>>2],+g[b+8>>2]);e=+rF(c*.5)/e;g[d+12>>2]=+g[(AF(b)|0)>>2]*e;g[d+8>>2]=+g[(jF(b)|0)>>2]*e;g[d+4>>2]=+g[(iF(b)|0)>>2]*e;g[d>>2]=+sF(c*.5);Up(a,d+12|0,d+8|0,d+4|0,d);l=d;return}function ll(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0.0,g=0;e=l;l=l+16|0;c[e>>2]=-1;c[e+4>>2]=c[a+28>>2];if(!(c[b+4>>2]|0))c[b+4>>2]=e;g=c[a+24>>2]|0;f=+lb[c[(c[g>>2]|0)+12>>2]&31](g,b,d);c[a+4>>2]=c[(c[a+24>>2]|0)+4>>2];l=e;return +f}function ml(a,b){a=a|0;b=b|0;c[a>>2]=c[b>>2];c[a+4>>2]=c[b+4>>2];c[a+8>>2]=c[b+8>>2];c[a+12>>2]=c[b+12>>2];c[a+16>>2]=c[b+16>>2];c[a+16+4>>2]=c[b+16+4>>2];c[a+16+8>>2]=c[b+16+8>>2];c[a+16+12>>2]=c[b+16+12>>2];c[a+32>>2]=c[b+32>>2];c[a+32+4>>2]=c[b+32+4>>2];c[a+32+8>>2]=c[b+32+8>>2];c[a+32+12>>2]=c[b+32+12>>2];return}function nl(b){b=b|0;var d=0,e=0,f=0,g=0;d=c[b+8>>2]|0;if((d|0)<=0)return;f=0;do{e=c[(c[b+16>>2]|0)+(f<<2)>>2]|0;if(!(a[b+76>>0]|0))switch(c[e+220>>2]|0){case 2:case 5:break;default:g=6}else g=6;if((g|0)==6){g=0;Le(b,e);d=c[b+8>>2]|0}f=f+1|0}while((f|0)<(d|0));return}function ol(a,b,c){a=a|0;b=b|0;c=c|0;var d=0.0;a:do switch(b|0){case 2:case 1:{if(c>>>0<3){d=+g[a+600>>2];break a}if((c+-3|0)>>>0<3)d=+g[a+432>>2];else d=0.0;break}case 4:case 3:{if(c>>>0<3){d=+g[a+596>>2];break a}if((c+-3|0)>>>0<3)d=+g[a+604>>2];else d=0.0;break}default:d=0.0}while(0);return +d}function pl(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;b=c[d>>2]|0;b=ub[c[(c[b>>2]|0)+56>>2]&31](b,16)|0;d=c[d>>2]|0;c[b+4>>2]=d;c[b>>2]=7760;a[b+8>>0]=0;c[b+12>>2]=0;c[b+12>>2]=wb[c[(c[d>>2]|0)+12>>2]&63](d,c[e+8>>2]|0,c[f+8>>2]|0)|0;a[b+8>>0]=1;return b|0}function ql(a,b){a=a|0;b=b|0;var d=0,e=0;d=c[a+60>>2]|0;if(!d)return;e=sb[c[(c[d>>2]|0)+8>>2]&127](d)|0;e=wb[c[(c[b>>2]|0)+16>>2]&63](b,e,1)|0;d=c[a+60>>2]|0;d=wb[c[(c[d>>2]|0)+12>>2]&63](d,c[e+8>>2]|0,b)|0;Tb[c[(c[b>>2]|0)+20>>2]&31](b,e,d,1346456916,c[a+60>>2]|0);return}function rl(a,b,d,e){a=a|0;b=b|0;d=+d;e=e|0;switch(b|0){case 2:case 1:if(e>>>0<3){g[a+600>>2]=d;c[a+592>>2]=c[a+592>>2]|2;return}else{g[a+432>>2]=d;return}case 4:case 3:if(e>>>0<3){g[a+596>>2]=d;c[a+592>>2]=c[a+592>>2]|1;return}else{g[a+604>>2]=d;c[a+592>>2]=c[a+592>>2]|4;return}default:return}}function sl(a,b,c){a=a|0;b=b|0;c=c|0;var d=0.0;a:do switch(c|0){case 5:case -1:switch(b|0){case 2:{d=+g[a+764>>2];break a}case 4:{d=+g[a+760>>2];break a}case 3:{d=+g[a+752>>2];break a}case 1:{d=+g[a+756>>2];break a}default:{d=0.0;break a}}default:d=0.0}while(0);return +d}function tl(a,b){a=a|0;b=b|0;var d=0,e=0;d=c[a+56>>2]|0;if(!d)return;e=sb[c[(c[d>>2]|0)+12>>2]&127](d)|0;e=wb[c[(c[b>>2]|0)+16>>2]&63](b,e,1)|0;d=c[a+56>>2]|0;d=wb[c[(c[d>>2]|0)+16>>2]&63](d,c[e+8>>2]|0,b)|0;Tb[c[(c[b>>2]|0)+20>>2]&31](b,e,d,1213612625,c[a+56>>2]|0);return}function ul(b,e){b=b|0;e=e|0;var f=0,g=0;f=0;while(1){if((d[496+f>>0]|0)==(b|0)){g=4;break}f=f+1|0;if((f|0)==87){b=87;g=5;break}}if((g|0)==4)if(!f)f=592;else{b=f;g=5}if((g|0)==5){f=592;do{do{g=f;f=f+1|0}while((a[g>>0]|0)!=0);b=b+-1|0}while((b|0)!=0)}return ZD(f,c[e+20>>2]|0)|0}function vl(a,b,c,d,e,f,h,i,j,k,m,n,o){a=a|0;b=+b;c=+c;d=+d;e=+e;f=+f;h=+h;i=+i;j=+j;k=+k;m=+m;n=+n;o=+o;var p=0;p=l;l=l+16|0;g[p+8>>2]=+Tv(b,c,d,e,f,h);g[p+4>>2]=+Tv(b,c,d,i,j,k);g[p>>2]=+Tv(b,c,d,m,n,o);Fq(a,p+8|0,p+4|0,p);l=p;return}function wl(a,b,c){a=a|0;b=b|0;c=+c;var d=0.0,e=0.0,f=0.0,h=0.0;e=+g[a+32>>2];f=+g[a+36>>2];h=+g[a+40>>2];d=+g[b>>2];if(!(d<=e+c)){b=0;return b|0}if(!(d>=-e-c)){b=0;return b|0}d=+g[b+4>>2];if(!(d<=f+c)){b=0;return b|0}if(!(d>=-f-c)){b=0;return b|0}d=+g[b+8>>2];if(!(d<=h+c)){b=0;return b|0}b=d>=-h-c;return b|0}function xl(a,b,d){a=a|0;b=b|0;d=d|0;Mt(a);c[a>>2]=5252;c[a+16>>2]=c[b>>2];c[a+16+4>>2]=c[b+4>>2];c[a+16+8>>2]=c[b+8>>2];c[a+16+12>>2]=c[b+12>>2];c[a+32>>2]=c[d>>2];c[a+32+4>>2]=c[d+4>>2];c[a+32+8>>2]=c[d+8>>2];c[a+32+12>>2]=c[d+12>>2];c[a+80>>2]=0;return}function yl(b,d,e,f){b=b|0;d=d|0;e=e|0;f=+f;if(!(+g[b+36>>2]>f))return;a[b+40>>0]=1;c[b+4>>2]=c[d>>2];c[b+4+4>>2]=c[d+4>>2];c[b+4+8>>2]=c[d+8>>2];c[b+4+12>>2]=c[d+12>>2];c[b+20>>2]=c[e>>2];c[b+20+4>>2]=c[e+4>>2];c[b+20+8>>2]=c[e+8>>2];c[b+20+12>>2]=c[e+12>>2];g[b+36>>2]=f;return}function zl(a,b,c){a=a|0;b=b|0;c=c|0;var d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0;d=+g[b+32>>2];f=+g[b+40>>2];j=+g[c>>2];e=+g[c+4>>2];i=+B(+(j*j+e*e));if(i!=0.0){h=e*(d/i);e=+g[c+8>>2]<0.0?-f:f;d=j*(d/i)}else{h=0.0;e=+g[c+8>>2]<0.0?-f:f}g[a>>2]=d;g[a+8>>2]=e;g[a+4>>2]=h;return}function Al(a,b,c){a=a|0;b=b|0;c=c|0;var d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0;d=+g[b+32>>2];f=+g[b+36>>2];j=+g[c>>2];e=+g[c+8>>2];i=+B(+(j*j+e*e));if(i!=0.0){h=e*(d/i);e=+g[c+4>>2]<0.0?-f:f;d=j*(d/i)}else{h=0.0;e=+g[c+4>>2]<0.0?-f:f}g[a>>2]=d;g[a+4>>2]=e;g[a+8>>2]=h;return}function Bl(a,b,c){a=a|0;b=b|0;c=c|0;var d=0.0,e=0.0,f=0.0,h=0.0,i=0.0,j=0.0;d=+g[b+36>>2];f=+g[b+32>>2];j=+g[c+4>>2];e=+g[c+8>>2];i=+B(+(j*j+e*e));if(i!=0.0){h=e*(d/i);e=+g[c>>2]<0.0?-f:f;d=j*(d/i)}else{h=0.0;e=+g[c>>2]<0.0?-f:f}g[a+4>>2]=d;g[a>>2]=e;g[a+8>>2]=h;return}function Cl(a){a=a|0;var b=0.0,d=0.0,e=0.0;d=+g[(c[a+28>>2]|0)+404>>2];e=+g[(c[a+32>>2]|0)+404>>2];e=e==0.0?1.0:d/(d+e);d=+g[a+1116>>2]*e+(1.0-e)*+g[a+1180>>2];b=e*+g[a+1120>>2]+(1.0-e)*+g[a+1184>>2];g[a+1284>>2]=+g[a+1112>>2]*e+ +g[a+1176>>2]*(1.0-e);g[a+1288>>2]=d;g[a+1292>>2]=b;g[a+1296>>2]=0.0;return}function Dl(a,b){a=a|0;b=b|0;var d=0.0,e=0.0,f=0.0;d=+g[a+404>>2];if(d!=0.0){f=1.0/d*+g[b+4>>2];e=1.0/d*+g[b+8>>2];g[a+424>>2]=1.0/d*+g[b>>2];g[a+428>>2]=f;g[a+432>>2]=e;g[a+436>>2]=0.0}c[a+440>>2]=c[b>>2];c[a+440+4>>2]=c[b+4>>2];c[a+440+8>>2]=c[b+8>>2];c[a+440+12>>2]=c[b+12>>2];return}function El(b,d,e){b=b|0;d=d|0;e=e|0;var f=0;f=c[b+16>>2]|0;do if(f){if((f|0)!=(d|0)){c[b+36>>2]=(c[b+36>>2]|0)+1;c[b+24>>2]=2;a[b+54>>0]=1;break}if((c[b+24>>2]|0)==2)c[b+24>>2]=e}else{c[b+16>>2]=d;c[b+24>>2]=e;c[b+36>>2]=1}while(0);return}function Fl(a,b){a=a|0;b=b|0;var d=0,e=0,f=0;f=c[a+84>>2]|0;a=c[f+8>>2]|0;if((a|0)<=0)return;e=0;do{d=c[(c[f+16>>2]|0)+(e*12|0)+8>>2]|0;if(d){Ib[c[(c[d>>2]|0)+16>>2]&127](d,b);a=c[f+8>>2]|0}e=e+1|0}while((e|0)<(a|0));return}function Gl(){var b=0,d=0,e=0;do if((c[2785]|0)>=0?(FF()|0)!=0:0){if((a[11139]|0)!=10?(b=c[2771]|0,b>>>0<(c[2770]|0)>>>0):0){c[2771]=b+1;a[b>>0]=10;break}il()|0}else e=3;while(0);do if((e|0)==3){if((a[11139]|0)!=10?(d=c[2771]|0,d>>>0<(c[2770]|0)>>>0):0){c[2771]=d+1;a[d>>0]=10;break}il()|0}while(0);return}function Hl(a,b,d){a=a|0;b=b|0;d=d|0;Br(a);c[a>>2]=5056;c[a+24>>2]=c[b>>2];c[a+24+4>>2]=c[b+4>>2];c[a+24+8>>2]=c[b+8>>2];c[a+24+12>>2]=c[b+12>>2];c[a+40>>2]=c[d>>2];c[a+40+4>>2]=c[d+4>>2];c[a+40+8>>2]=c[d+8>>2];c[a+40+12>>2]=c[d+12>>2];return}function Il(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;var f=0;f=l;l=l+256|0;if((c|0)>(d|0)&(e&73728|0)==0){uj(f|0,b<<24>>24|0,((c-d|0)>>>0<256?c-d|0:256)|0)|0;if((c-d|0)>>>0>255){b=c-d|0;do{Ox(a,f,256);b=b+-256|0}while(b>>>0>255);b=c-d&255}else b=c-d|0;Ox(a,f,b)}l=f;return}function Jl(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0;f=c[d>>2]|0;a=mv(c[b>>2]|0)|0;f=mv(f)|0;if(a|0)Pb[c[(c[a>>2]|0)+32>>2]&127](a,d,e,b);if(!f)return 0;Pb[c[(c[f>>2]|0)+32>>2]&127](f,b,e,d);return 0}function Kl(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0;e=l;l=l+48|0;f=c[b+192>>2]|0;Pb[c[(c[f>>2]|0)+8>>2]&127](f,b+4|0,e+32|0,e+16|0);c[e>>2]=7312;c[e+4>>2]=b;c[e+8>>2]=a;c[e+12>>2]=d;d=c[a+68>>2]|0;Pb[c[(c[d>>2]|0)+28>>2]&127](d,e+32|0,e+16|0,e);l=e;return}function Ll(a,b,d){a=a|0;b=b|0;d=d|0;Og(a,b,d)|0;c[b+52>>2]=c[a+300>>2];c[b+56>>2]=c[a+304>>2];c[b+60>>2]=c[a+308>>2];c[b+64>>2]=c[a+312>>2];c[b+68>>2]=c[a+316>>2];c[b+72>>2]=c[a+320>>2];c[b+76>>2]=c[a+324>>2];c[b+80>>2]=c[a+328>>2];return 13020}function Ml(a,b){a=a|0;b=b|0;var d=0,e=0;d=c[b>>2]|0;e=c[a+84>>2]|0;if((d|0)==(e|0)){e=0;return e|0}if(!(c[a+12>>2]&c[b+4>>2])){e=0;return e|0}if(!(c[b+8>>2]&c[a+8>>2])){e=0;return e|0}b=c[a+96>>2]|0;e=wb[c[(c[b>>2]|0)+28>>2]&63](b,e,d)|0;return e|0}function Nl(a,b){a=a|0;b=b|0;var c=0.0,d=0.0,e=0;e=l;l=l+16|0;c=+RC(a);c=+qF(c*+RC(b));d=+wn(a,b);if(d<0.0){Km(e,b);d=+py(+wn(a,e)/c);d=d*2.0;l=e;return +d}else{d=+py(d/c);d=d*2.0;l=e;return +d}return 0.0}function Ol(a,b){a=a|0;b=b|0;var c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0;j=AF(b)|0;i=AF(b+16|0)|0;h=AF(b+32|0)|0;g=jF(b)|0;f=jF(b+16|0)|0;e=jF(b+32|0)|0;d=iF(b)|0;c=iF(b+16|0)|0;No(a,j,i,h,g,f,e,d,c,iF(b+32|0)|0);return}function Pl(a){a=a|0;var b=0,d=0,e=0;Db[c[(c[a>>2]|0)+8>>2]&255](a);Db[c[(c[a>>2]|0)+12>>2]&255](a);b=c[a+24>>2]|0;if(!b)return;e=c[(c[b>>2]|0)+32>>2]|0;d=c[a+68>>2]|0;d=sb[c[(c[d>>2]|0)+36>>2]&127](d)|0;Pb[e&127](b,d,a+28|0,c[a+24>>2]|0);return}function Ql(a,b){a=+a;b=+b;var d=0;d=ur()|0;c[d+8>>2]=0;c[d+12>>2]=-1;c[d+16>>2]=1065353216;c[d+20>>2]=1065353216;c[d+24>>2]=1065353216;g[d+28>>2]=0.0;c[d+4>>2]=10;c[d>>2]=8324;g[d+48>>2]=a;c[d+56>>2]=2;g[d+32>>2]=a;g[d+36>>2]=a;g[d+40>>2]=b*.5;g[d+44>>2]=0.0;return d|0}function Rl(a,b){a=+a;b=+b;var d=0;d=ur()|0;c[d+8>>2]=0;c[d+12>>2]=-1;c[d+16>>2]=1065353216;c[d+20>>2]=1065353216;c[d+24>>2]=1065353216;g[d+28>>2]=0.0;c[d+4>>2]=10;c[d>>2]=8224;g[d+48>>2]=a;c[d+56>>2]=0;g[d+32>>2]=b*.5;g[d+36>>2]=a;g[d+40>>2]=a;g[d+44>>2]=0.0;return d|0}function Sl(a,b){a=+a;b=+b;var d=0;d=ur()|0;c[d+8>>2]=0;c[d+12>>2]=-1;c[d+16>>2]=1065353216;c[d+20>>2]=1065353216;c[d+24>>2]=1065353216;g[d+28>>2]=0.0;c[d>>2]=8124;g[d+48>>2]=a;c[d+4>>2]=10;c[d+56>>2]=1;g[d+32>>2]=a;g[d+36>>2]=b*.5;g[d+40>>2]=a;g[d+44>>2]=0.0;return d|0}function Tl(a,b){a=a|0;b=b|0;var d=0;if(c[b+40>>2]|0){Tl(a,c[b+36>>2]|0);Tl(a,c[b+40>>2]|0)}if((c[a>>2]|0)==(b|0))c[a>>2]=0;d=c[a+4>>2]|0;if(!d){c[a+4>>2]=b;return}c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);c[a+4>>2]=b;return}function Ul(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0;g=c[a+32>>2]|0;c[g>>2]=(c[g>>2]|0)+1;Hf(a,pd(a,b,f)|0);Hf(a,pd(a,d,f)|0);Hf(a,pd(a,e,f)|0);return}function Vl(a,b,d,e,f,g){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;if(SA(a,c[b+8>>2]|0)|0)Lj(b,d,e,f);else{a=c[a+8>>2]|0;Ub[c[(c[a>>2]|0)+20>>2]&7](a,b,d,e,f,g)}return}function Wl(a){a=a|0;var b=0;b=l;l=l+48|0;g[b+32>>2]=1.0;g[b+28>>2]=0.0;g[b+24>>2]=0.0;g[b+20>>2]=0.0;g[b+16>>2]=1.0;g[b+12>>2]=0.0;g[b+8>>2]=0.0;g[b+4>>2]=0.0;g[b>>2]=1.0;Gn(a,b+32|0,b+28|0,b+24|0,b+20|0,b+16|0,b+12|0,b+8|0,b+4|0,b);l=b;return}function Xl(a,b){a=a|0;b=b|0;var d=0,e=0;c[a+72>>2]=(c[a+72>>2]|0)+1;d=c[a+20>>2]|0;if((d|0)>0)do{e=d;d=d+-1|0;if((c[(c[a+28>>2]|0)+(d*80|0)+64>>2]|0)==(b|0))Ld(a,d)}while((e|0)>1);Db[c[(c[a>>2]|0)+68>>2]&255](a);return}function Yl(a,b){a=a|0;b=b|0;var d=0;a=c[a+68>>2]|0;if(!b)return;d=c[a+16>>2]|0;if(d>>>0<=b>>>0?(d+(N(c[a>>2]|0,c[a+4>>2]|0)|0)|0)>>>0>b>>>0:0){c[b>>2]=c[a+12>>2];c[a+12>>2]=b;c[a+8>>2]=(c[a+8>>2]|0)+1;return}c[6486]=(c[6486]|0)+1;gd(c[b+-4>>2]|0);return}function Zl(a){a=a|0;var b=0,d=0;if((c[a+248>>2]|0)<=0)return;b=0;do{d=(c[(c[a+256>>2]|0)+(b<<2)>>2]|0)+472|0;c[d>>2]=0;c[d+4>>2]=0;c[d+8>>2]=0;c[d+12>>2]=0;c[d+16>>2]=0;c[d+20>>2]=0;c[d+24>>2]=0;c[d+28>>2]=0;b=b+1|0}while((b|0)<(c[a+248>>2]|0));return}function _l(a,d){a=a|0;d=d|0;var f=0,g=0;if(b[a+56>>1]|0)return;b[a+64>>1]=1;d=b[a+58>>1]|0;g=c[a+60>>2]|0;if((d&65535)>1){f=1;do{d=f;f=f+1|0;b[g+(d<<6)+48>>1]=f;d=e[a+58>>1]|0}while(f>>>0<d>>>0)}else d=d&65535;b[g+(d+-1<<6)+48>>1]=0;return}function $l(a,b){a=a|0;b=b|0;var d=0,e=0,f=0;d=c[a+52>>2]|0;if((d|0)<=0)return;f=0;do{e=c[(c[a+60>>2]|0)+(f<<2)>>2]|0;if(e){Ib[c[(c[e>>2]|0)+16>>2]&127](e,b);d=c[a+52>>2]|0}f=f+1|0}while((f|0)<(d|0));return}function am(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0;f=c[a+32>>2]|0;c[f>>2]=(c[f>>2]|0)+1;Hf(a,pd(a,b,0)|0);Hf(a,pd(a,d,0)|0);Hf(a,pd(a,e,0)|0);return}function bm(a,b,d){a=a|0;b=b|0;d=d|0;c[a+52>>2]=c[b>>2];c[a+52+4>>2]=c[b+4>>2];c[a+52+8>>2]=c[b+8>>2];c[a+52+12>>2]=c[b+12>>2];c[a+68>>2]=c[d>>2];c[a+68+4>>2]=c[d+4>>2];c[a+68+8>>2]=c[d+8>>2];c[a+68+12>>2]=c[d+12>>2];c[a+48>>2]=1;return}function cm(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;e=c[d>>2]|0;a=mv(c[b>>2]|0)|0;e=mv(e)|0;if(a|0)Mb[c[(c[a>>2]|0)+28>>2]&127](a,d,b);if(!e)return 0;Mb[c[(c[e>>2]|0)+28>>2]&127](e,b,d);return 0}function dm(a,b,d,e,f,g){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,i=0;i=c[a+4>>2]|0;if(!(i&1))h=i>>8;else h=c[(c[e>>2]|0)+(i>>8)>>2]|0;a=c[a>>2]|0;Ub[c[(c[a>>2]|0)+20>>2]&7](a,b,d,e+h|0,(i&2|0)==0?2:f,g);return}function em(a,b,c){a=+a;b=b|0;c=c|0;var d=0,e=0;e=l;l=l+32|0;d=ir(144)|0;g[e+8>>2]=0.0;g[e+4>>2]=0.0;g[e>>2]=0.0;Fq(e+16|0,e+8|0,e+4|0,e);tj(d,a,b,c,e+16|0);l=e;return d|0}function fm(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;c[d>>2]=c[b+16>>2];c[d+4>>2]=c[b+16+4>>2];c[d+8>>2]=c[b+16+8>>2];c[d+12>>2]=c[b+16+12>>2];c[e>>2]=c[b+32>>2];c[e+4>>2]=c[b+32+4>>2];c[e+8>>2]=c[b+32+8>>2];c[e+12>>2]=c[b+32+12>>2];return}function gm(a,b){a=a|0;b=b|0;var d=0;a=c[a+68>>2]|0;d=c[a+12>>2]|0;if(d|0){c[a+12>>2]=c[d>>2];c[a+8>>2]=(c[a+8>>2]|0)+-1;b=d;return b|0}c[6485]=(c[6485]|0)+1;a=ec(b+19|0)|0;if(!a){b=0;return b|0}c[(a+4+15&-16)+-4>>2]=a;b=a+4+15&-16;return b|0}function hm(a,b,d){a=a|0;b=+b;d=+d;var e=0;e=l;l=l+16|0;g[e+12>>2]=b;g[e+8>>2]=d;g[e+4>>2]=0.0;g[e>>2]=1.0;c[a+504>>2]=c[(b<0.0?e+4|0:b>1.0?e:e+12|0)>>2];g[e+4>>2]=0.0;g[e>>2]=1.0;c[a+508>>2]=c[(d<0.0?e+4|0:d>1.0?e:e+8|0)>>2];l=e;return}function im(){var b=0;b=l;l=l+32|0;if(a[24152]|0){l=b;return}if(!(lx(24152)|0)){l=b;return}jl();g[b+8>>2]=0.0;g[b+4>>2]=0.0;g[b>>2]=0.0;Fq(b+16|0,b+8|0,b+4|0,b);Po(24360,24424,b+16|0);l=b;return}function jm(a,b){a=a|0;b=b|0;var d=0,e=0;d=c[(c[b>>2]|0)+16>>2]|0;e=sb[c[(c[a>>2]|0)+16>>2]&127](a)|0;e=wb[d&63](b,e,1)|0;d=wb[c[(c[a>>2]|0)+20>>2]&63](a,c[e+8>>2]|0,b)|0;Tb[c[(c[b>>2]|0)+20>>2]&31](b,e,d,1497645650,a);return}function km(a,b,c,d,e,f){a=a|0;b=+b;c=+c;d=+d;e=+e;f=+f;g[a+692>>2]=(c-b)*.5;b=((c-b)*.5+b)%6.2831854820251465;if(!(b<-3.1415927410125732)){if(b>3.1415927410125732)b=b+-6.2831854820251465}else b=b+6.2831854820251465;g[a+688>>2]=b;g[a+696>>2]=d;g[a+700>>2]=e;g[a+704>>2]=f;return}function lm(a,b,c){a=a|0;b=b|0;c=+c;var d=0;d=l;l=l+16|0;g[d+12>>2]=+g[(AF(b)|0)>>2]*c;g[d+8>>2]=+g[(jF(b)|0)>>2]*c;g[d+4>>2]=+g[(iF(b)|0)>>2]*c;g[d>>2]=+g[b+12>>2]*c;zt(a,d+12|0,d+8|0,d+4|0,d);l=d;return}function mm(a,b,d){a=a|0;b=b|0;d=d|0;c[b>>2]=c[a+52>>2];c[b+4>>2]=c[a+52+4>>2];c[b+8>>2]=c[a+52+8>>2];c[b+12>>2]=c[a+52+12>>2];c[d>>2]=c[a+68>>2];c[d+4>>2]=c[a+68+4>>2];c[d+8>>2]=c[a+68+8>>2];c[d+12>>2]=c[a+68+12>>2];return}function nm(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0;h=c[a+4>>2]|0;if(!(h&1))g=h>>8;else g=c[(c[d>>2]|0)+(h>>8)>>2]|0;a=c[a>>2]|0;Tb[c[(c[a>>2]|0)+24>>2]&31](a,b,d+g|0,(h&2|0)==0?2:e,f);return}function om(a,b){a=a|0;b=b|0;var d=0,e=0;e=sb[c[(c[a>>2]|0)+16>>2]&127](a)|0;e=wb[c[(c[b>>2]|0)+16>>2]&63](b,e,1)|0;d=wb[c[(c[a>>2]|0)+20>>2]&63](a,c[e+8>>2]|0,b)|0;Tb[c[(c[b>>2]|0)+20>>2]&31](b,e,d,1245859651,a);return}function pm(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;if(SA(a,c[b+8>>2]|0)|0)El(b,d,e);else{a=c[a+8>>2]|0;Pb[c[(c[a>>2]|0)+28>>2]&127](a,b,d,e)}return}function qm(a,b,d){a=a|0;b=b|0;d=d|0;c[b>>2]=c[a+8>>2];c[b+4>>2]=c[a+8+4>>2];c[b+8>>2]=c[a+8+8>>2];c[b+12>>2]=c[a+8+12>>2];c[d>>2]=c[a+24>>2];c[d+4>>2]=c[a+24+4>>2];c[d+8>>2]=c[a+24+8>>2];c[d+12>>2]=c[a+24+12>>2];return}function rm(a,b){a=a|0;b=b|0;var d=0,e=0;e=sb[c[(c[a>>2]|0)+52>>2]&127](a)|0;e=wb[c[(c[b>>2]|0)+16>>2]&63](b,e,1)|0;d=wb[c[(c[a>>2]|0)+56>>2]&63](a,c[e+8>>2]|0,b)|0;Tb[c[(c[b>>2]|0)+20>>2]&31](b,e,d,1346455635,a);return}function sm(a,b){a=a|0;b=b|0;var c=0;c=l;l=l+80|0;Ol(c+32|0,b);qp(c,+g[b+48>>2],+g[b+52>>2],+g[b+56>>2]);Ek(c+16|0,c+32|0,+g[c>>2],+g[c+4>>2],+g[c+8>>2]);Po(a,c+32|0,c+16|0);l=c;return}function tm(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0;e=0;while(1){if((e|0)>=(b|0))break;f=AF(d+(e<<4)|0)|0;g=(c[a+12>>2]|0)+(e<<4)|0;c[f>>2]=c[g>>2];c[f+4>>2]=c[g+4>>2];c[f+8>>2]=c[g+8>>2];c[f+12>>2]=c[g+12>>2];e=e+1|0}return}function um(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0;e=ub[c[(c[d>>2]|0)+40>>2]&31](d,a)|0;f=ub[c[(c[d>>2]|0)+28>>2]&31](d,e)|0;c[b>>2]=f;if(f|0)Ib[c[(c[d>>2]|0)+48>>2]&127](d,e);c[b+4>>2]=c[a+4>>2];c[b+8>>2]=0;return 17267}function vm(a,b,d){a=a|0;b=b|0;d=d|0;c[a+164>>2]=c[b>>2];c[a+164+4>>2]=c[b+4>>2];c[a+164+8>>2]=c[b+8>>2];c[a+164+12>>2]=c[b+12>>2];b=AF(b)|0;if((!(+g[b>>2]!=1.0)?!(+g[b+4>>2]!=1.0):0)?!(+g[b+8>>2]!=1.0):0)d=0;c[a+180>>2]=d;return}function wm(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;e=AF(c[a+4>>2]|0)|0;if((e|0)>(b|0)){c[a+4>>2]=b;return}if((e|0)<(b|0))Vm(a,b);while(1){if((e|0)>=(b|0))break;c[(c[a+12>>2]|0)+(e<<2)>>2]=c[d>>2];e=e+1|0}c[a+4>>2]=b;return}function xm(a,b,c,d){a=a|0;b=+b;c=+c;d=+d;var e=0;e=l;l=l+32|0;fo(e,b,c,d,+g[a+408>>2],+g[a+412>>2],+g[a+416>>2]);Lo(e+16|0,+g[e>>2],+g[e+4>>2],+g[e+8>>2],+g[a+404>>2]);kq(a+372|0,e+16|0)|0;l=e;return}function ym(a,b,c,d){a=a|0;b=+b;c=+c;d=+d;var e=0;e=l;l=l+32|0;Ek(e,a+324|0,b,c,d);fo(e+16|0,+g[e>>2],+g[e+4>>2],+g[e+8>>2],+g[a+604>>2],+g[a+608>>2],+g[a+612>>2]);kq(a+388|0,e+16|0)|0;l=e;return}function zm(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0;g=c[a+4>>2]|0;if(!(g&1))f=g>>8;else f=c[(c[d>>2]|0)+(g>>8)>>2]|0;a=c[a>>2]|0;Pb[c[(c[a>>2]|0)+28>>2]&127](a,b,d+f|0,(g&2|0)==0?2:e);return}function Am(a,b,c){a=a|0;b=b|0;c=c|0;var d=0.0;a:do if((c|0)==-1)switch(b|0){case 2:case 1:{d=+g[a+336>>2];break a}case 4:case 3:{d=+g[a+340>>2];break a}default:{d=3402823466385288598117041.0e14;break a}}else d=3402823466385288598117041.0e14;while(0);return +d}function Bm(a,b,c){a=a|0;b=b|0;c=c|0;var d=0.0,e=0.0,f=0.0;f=+g[b+32>>2];e=+g[b+36>>2];e=+g[c+4>>2]>=0.0?e:-e;d=+g[b+40>>2];d=+g[c+8>>2]>=0.0?d:-d;g[a>>2]=+g[c>>2]>=0.0?f:-f;g[a+4>>2]=e;g[a+8>>2]=d;g[a+12>>2]=0.0;return}function Cm(a,b){a=a|0;b=b|0;var d=0,e=0;d=c[a+4>>2]|0;e=AF(d)|0;if((e|0)==(AF(c[a+8>>2]|0)|0)){Vm(a,pC(e)|0);d=c[a+4>>2]|0}c[(c[a+12>>2]|0)+(d<<2)>>2]=c[b>>2];c[a+4>>2]=(c[a+4>>2]|0)+1;return}function Dm(b){b=b|0;var d=0;c[b>>2]=5300;d=c[b+212>>2]|0;if(d|0){if(a[b+216>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+212>>2]=0}a[b+216>>0]=1;c[b+212>>2]=0;c[b+204>>2]=0;c[b+208>>2]=0;c[6486]=(c[6486]|0)+1;gd(c[b+-4>>2]|0);return}function Em(a,b){a=a|0;b=b|0;var d=0,e=0;e=c[a+288>>2]|0;a:do if((e|0)>0){d=c[a+296>>2]|0;a=0;while(1){if((c[d+(a<<2)>>2]|0)==(b|0))break a;a=a+1|0;if((a|0)>=(e|0)){a=e;break}}}else a=e;while(0);return (a|0)>=(e|0)|0}function Fm(b){b=b|0;var d=0;d=l;l=l+16|0;if(!(a[24136]|0))lx(24136)|0;gn(d,c[b+108>>2]|0,c[b+120>>2]|0);c[6082]=c[d>>2];c[6083]=c[d+4>>2];c[6084]=c[d+8>>2];c[6085]=c[d+12>>2];l=d;return 24328}function Gm(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;a=c[b>>2]|0;a=ub[c[(c[a>>2]|0)+56>>2]&31](a,84)|0;Vj(a,b,d,e,1);return a|0}function Hm(b,d){b=b|0;d=d|0;var e=0;if((AF(c[b+8>>2]|0)|0)>=(d|0))return;e=Bs(d)|0;tm(b,AF(c[b+4>>2]|0)|0,e);kr(b);a[b+16>>0]=1;c[b+12>>2]=e;c[b+8>>2]=d;return}function Im(b){b=b|0;var d=0;c[b>>2]=10980;d=c[b+32>>2]|0;if(d|0){if(a[b+36>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+32>>2]=0}a[b+36>>0]=1;c[b+32>>2]=0;c[b+24>>2]=0;c[b+28>>2]=0;c[6486]=(c[6486]|0)+1;gd(c[b+-4>>2]|0);return}function Jm(a,b){a=a|0;b=b|0;var d=0;d=c[a+4>>2]|0;if((c[b>>2]|0)!=(d|0)?(c[b+4>>2]|0)!=(d|0):0)return 0;d=c[a+8>>2]|0;Mb[c[(c[d>>2]|0)+32>>2]&127](d,b,c[a+12>>2]|0);return 0}function Km(a,b){a=a|0;b=b|0;var c=0;c=l;l=l+16|0;g[c+12>>2]=-+g[(AF(b)|0)>>2];g[c+8>>2]=-+g[(jF(b)|0)>>2];g[c+4>>2]=-+g[(iF(b)|0)>>2];g[c>>2]=-+g[b+12>>2];zt(a,c+12|0,c+8|0,c+4|0,c);l=c;return}function Lm(a){a=a|0;var b=0.0,d=0.0;if(c[a+204>>2]&3|0)return;d=+g[a+428>>2]*+g[a+412>>2];b=+g[a+432>>2]*+g[a+416>>2];g[a+472>>2]=+g[a+424>>2]*+g[a+408>>2]+ +g[a+472>>2];g[a+476>>2]=d+ +g[a+476>>2];g[a+480>>2]=b+ +g[a+480>>2];return}function Mm(a){a=a|0;var b=0;c[a>>2]=10708;c[a+8>>2]=10756;b=c[a+56>>2]|0;Ib[c[(c[b>>2]|0)+20>>2]&127](b,c[a+72>>2]|0);b=c[a+56>>2]|0;Ib[c[(c[b>>2]|0)+16>>2]&127](b,c[a+72>>2]|0);c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function Nm(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;a=c[b>>2]|0;a=ub[c[(c[a>>2]|0)+56>>2]&31](a,84)|0;Vj(a,b,d,e,0);return a|0}function Om(b){b=b|0;var d=0;c[b>>2]=6888;d=c[b+296>>2]|0;if(d|0){if(a[b+300>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+296>>2]=0}a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;c[b+292>>2]=0;c[6486]=(c[6486]|0)+1;gd(c[b+-4>>2]|0);return}function Pm(a,b,d){a=a|0;b=b|0;d=d|0;var e=0.0,f=0.0,h=0;h=c[a+108>>2]|0;f=+g[h+(b<<4)+4>>2]*+g[a+20>>2];e=+g[h+(b<<4)+8>>2]*+g[a+24>>2];g[d>>2]=+g[h+(b<<4)>>2]*+g[a+16>>2];g[d+4>>2]=f;g[d+8>>2]=e;g[d+12>>2]=0.0;return}function Qm(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;e=l;l=l+32|0;c[e>>2]=c[a+60>>2];c[e+4>>2]=0;c[e+8>>2]=b;c[e+12>>2]=e+20;c[e+16>>2]=d;if((pA(Ra(140,e|0)|0)|0)<0){c[e+20>>2]=-1;a=-1}else a=c[e+20>>2]|0;l=e;return a|0}function Rm(a,b){a=a|0;b=b|0;var c=0.0;c=+g[(AF(b)|0)>>2];g[a>>2]=+g[a>>2]+c;c=+g[(jF(b)|0)>>2];g[a+4>>2]=+g[a+4>>2]+c;c=+g[(iF(b)|0)>>2];g[a+8>>2]=+g[a+8>>2]+c;g[a+12>>2]=+g[a+12>>2]+ +g[b+12>>2];return a|0}function Sm(a,b){a=a|0;b=b|0;var c=0.0;c=+g[(AF(b)|0)>>2];g[a>>2]=+g[a>>2]-c;c=+g[(jF(b)|0)>>2];g[a+4>>2]=+g[a+4>>2]-c;c=+g[(iF(b)|0)>>2];g[a+8>>2]=+g[a+8>>2]-c;g[a+12>>2]=+g[a+12>>2]-+g[b+12>>2];return a|0}function Tm(b,c){b=b|0;c=c|0;var d=0,e=0;d=a[b>>0]|0;e=a[c>>0]|0;if(d<<24>>24==0?1:d<<24>>24!=e<<24>>24)b=e;else{do{b=b+1|0;c=c+1|0;d=a[b>>0]|0;e=a[c>>0]|0}while(!(d<<24>>24==0?1:d<<24>>24!=e<<24>>24));b=e}return (d&255)-(b&255)|0}function Um(b){b=b|0;var d=0;d=l;l=l+16|0;if(!(a[24120]|0))lx(24120)|0;Ib[c[(c[b>>2]|0)+76>>2]&127](d,b);c[6074]=c[d>>2];c[6075]=c[d+4>>2];c[6076]=c[d+8>>2];c[6077]=c[d+12>>2];l=d;return 24296}function Vm(b,d){b=b|0;d=d|0;var e=0;if((AF(c[b+8>>2]|0)|0)>=(d|0))return;e=lt(d)|0;Pp(b,AF(c[b+4>>2]|0)|0,e);kr(b);a[b+16>>0]=1;c[b+12>>2]=e;c[b+8>>2]=d;return}function Wm(a,b){a=a|0;b=b|0;var c=0.0,d=0.0,e=0.0;e=+g[b+20>>2];d=e*+g[b+260>>2]+ +g[b+72>>2];c=e*+g[b+264>>2]+ +g[b+76>>2];g[a>>2]=+g[b+256>>2]*e+ +g[b+68>>2];g[a+4>>2]=d;g[a+8>>2]=c;g[a+12>>2]=0.0;return}function Xm(a,b){a=a|0;b=b|0;var c=0.0,d=0.0;c=+g[(iF(a)|0)>>2];c=c*+g[(AF(b)|0)>>2];d=+g[(iF(a+16|0)|0)>>2];d=c+d*+g[(jF(b)|0)>>2];c=+g[(iF(a+32|0)|0)>>2];return +(d+c*+g[(iF(b)|0)>>2])}function Ym(a,b){a=a|0;b=b|0;var c=0.0,d=0.0;c=+g[(jF(a)|0)>>2];c=c*+g[(AF(b)|0)>>2];d=+g[(jF(a+16|0)|0)>>2];d=c+d*+g[(jF(b)|0)>>2];c=+g[(jF(a+32|0)|0)>>2];return +(d+c*+g[(iF(b)|0)>>2])}function Zm(b){b=b|0;var d=0;d=a[b+74>>0]|0;a[b+74>>0]=d+255|d;d=c[b>>2]|0;if(!(d&8)){c[b+8>>2]=0;c[b+4>>2]=0;d=c[b+44>>2]|0;c[b+28>>2]=d;c[b+20>>2]=d;c[b+16>>2]=d+(c[b+48>>2]|0);b=0}else{c[b>>2]=d|32;b=-1}return b|0}function _m(a,b,d,e){a=a|0;b=b|0;d=+d;e=e|0;if((e|0)!=-1)return;switch(b|0){case 2:case 1:{g[a+336>>2]=d;c[a+332>>2]=c[a+332>>2]|1;return}case 4:case 3:{g[a+340>>2]=d;c[a+332>>2]=c[a+332>>2]|2;return}default:return}}function $m(b,d,e){b=b|0;d=d|0;e=+e;var f=0;f=l;l=l+16|0;if(!(a[24144]|0))lx(24144)|0;Oh(f,b,d,e);c[6086]=c[f>>2];c[6087]=c[f+4>>2];c[6088]=c[f+8>>2];c[6089]=c[f+12>>2];l=f;return 24344}function an(b,d,e){b=b|0;d=d|0;e=+e;var f=0;f=l;l=l+16|0;if(!(a[24176]|0))lx(24176)|0;Oh(f,b,d,e);c[6122]=c[f>>2];c[6123]=c[f+4>>2];c[6124]=c[f+8>>2];c[6125]=c[f+12>>2];l=f;return 24488}function bn(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;if((b|0)==(d|0))return;e=c[(c[a+4>>2]|0)+96>>2]|0;wb[c[(c[e>>2]|0)+8>>2]&63](e,c[b+36>>2]|0,c[d+36>>2]|0)|0;d=(c[a+4>>2]|0)+120|0;c[d>>2]=(c[d>>2]|0)+1;return}function cn(a){a=a|0;var b=0.0,d=0,e=0.0,f=0.0;d=l;l=l+32|0;Mb[c[(c[a>>2]|0)+12>>2]&127](a,d+8|0,d);f=+g[d+8>>2];e=+g[d+8+4>>2];b=+g[d+8+8>>2];b=+B(+(f*f+e*e+b*b));l=d;return +(+g[d>>2]+b)}function dn(a){a=a|0;var b=0;c[a>>2]=10756;b=c[a+48>>2]|0;Ib[c[(c[b>>2]|0)+20>>2]&127](b,c[a+64>>2]|0);b=c[a+48>>2]|0;Ib[c[(c[b>>2]|0)+16>>2]&127](b,c[a+64>>2]|0);c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function en(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0;f=l;l=l+16|0;c[f>>2]=6868;c[f+4>>2]=d;c[f+8>>2]=a;Mb[c[(c[b>>2]|0)+48>>2]&127](b,f,e);l=f;return}function fn(a,b,d){a=a|0;b=b|0;d=d|0;a=c[b+8>>2]|0;if(!((d|0)!=0&(a|0)!=0))return;Db[c[c[a>>2]>>2]&255](a);Ib[c[(c[d>>2]|0)+60>>2]&127](d,c[b+8>>2]|0);c[b+8>>2]=0;return}function gn(a,b,c){a=a|0;b=b|0;c=c|0;var d=0,e=0;b=AF(b+4|0)|0;e=(AF(PD(b,0)|0)|0)+(c<<2)|0;d=(AF(PD(b,1)|0)|0)+(c<<2)|0;Fq(a,e,d,(AF(PD(b,2)|0)|0)+(c<<2)|0);return}function hn(a,b){a=a|0;b=b|0;var c=0.0,d=0.0;c=+g[(AF(a)|0)>>2];c=c*+g[(AF(b)|0)>>2];d=+g[(AF(a+16|0)|0)>>2];d=c+d*+g[(jF(b)|0)>>2];c=+g[(AF(a+32|0)|0)>>2];return +(d+c*+g[(iF(b)|0)>>2])}function jn(a){a=a|0;var b=0;b=c[i>>2]|0;if((a|0)>0&(b+a|0)<(b|0)|(b+a|0)<0){V()|0;Qa(12);return -1}c[i>>2]=b+a;if((b+a|0)>(U()|0)?(T()|0)==0:0){c[i>>2]=b;Qa(12);return -1}return b|0}function kn(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;e=l;l=l+16|0;c[e>>2]=6756;c[e+4>>2]=b;c[e+8>>2]=a;c[e+12>>2]=d;Mb[c[(c[a>>2]|0)+48>>2]&127](a,e,d);l=e;return}function ln(b){b=b|0;var d=0;c[b>>2]=7972;if(a[b+65>>0]|0?(d=c[b+56>>2]|0,Db[c[c[d>>2]>>2]&255](d),d=c[b+56>>2]|0,d|0):0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[6486]=(c[6486]|0)+1;gd(c[b+-4>>2]|0);return}function mn(a,b){a=a|0;b=b|0;a=c[a+16>>2]|0;return ub[c[(c[a>>2]|0)+8>>2]&31](a,b)|0}function nn(a,b,c,d){a=+a;b=+b;c=+c;d=+d;var e=0,f=0;f=l;l=l+16|0;g[f+12>>2]=a;g[f+8>>2]=b;g[f+4>>2]=c;g[f>>2]=d;e=wr()|0;ps(e,f+12|0,f+8|0,f+4|0,f);l=f;return e|0}function on(a,b,c,d){a=+a;b=+b;c=+c;d=+d;var e=0,f=0;f=l;l=l+16|0;g[f+12>>2]=a;g[f+8>>2]=b;g[f+4>>2]=c;g[f>>2]=d;e=ir(16)|0;zt(e,f+12|0,f+8|0,f+4|0,f);l=f;return e|0}function pn(a,b,d,e,f,g){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;if(SA(a,c[b+8>>2]|0)|0)Lj(b,d,e,f);return}function qn(a,b){a=a|0;b=+b;var d=0,e=0;if((c[a+296>>2]|0)<=0)return;d=0;do{e=c[(c[a+304>>2]|0)+(d<<2)>>2]|0;Jb[c[(c[e>>2]|0)+8>>2]&7](e,a,b);d=d+1|0}while((d|0)<(c[a+296>>2]|0));return}function rn(b){b=b|0;var d=0;c[b>>2]=5300;d=c[b+212>>2]|0;if(d|0){if(a[b+216>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+212>>2]=0}a[b+216>>0]=1;c[b+212>>2]=0;c[b+204>>2]=0;c[b+208>>2]=0;return}function sn(b){b=b|0;var d=0;d=l;l=l+16|0;if(!(a[24104]|0))lx(24104)|0;Ux(d,b);c[6066]=c[d>>2];c[6067]=c[d+4>>2];c[6068]=c[d+8>>2];c[6069]=c[d+12>>2];l=d;return 24264}function tn(b){b=b|0;var d=0;d=l;l=l+16|0;if(!(a[24096]|0))lx(24096)|0;yw(d,b);c[6062]=c[d>>2];c[6063]=c[d+4>>2];c[6064]=c[d+8>>2];c[6065]=c[d+12>>2];l=d;return 24248}function un(b){b=b|0;var c=0.0,d=0.0,e=0.0;if(!(a[24112]|0))lx(24112)|0;e=-+g[b+52>>2];d=+g[b+260>>2]*e;c=+g[b+264>>2]*e;g[6070]=+g[b+256>>2]*e;g[6071]=d;g[6072]=c;g[6073]=0.0;return 24280}function vn(a,b,d){a=a|0;b=+b;d=d|0;b=b*.4000000059604645*+ib[c[(c[a>>2]|0)+48>>2]&15](a);b=b*+ib[c[(c[a>>2]|0)+48>>2]&15](a);g[d>>2]=b;g[d+4>>2]=b;g[d+8>>2]=b;g[d+12>>2]=0.0;return}function wn(a,b){a=a|0;b=b|0;var c=0.0,d=0.0;c=+g[a>>2];c=c*+g[(AF(b)|0)>>2];d=+g[a+4>>2];d=c+d*+g[(jF(b)|0)>>2];c=+g[a+8>>2];c=d+c*+g[(iF(b)|0)>>2];return +(c+ +g[a+12>>2]*+g[b+12>>2])}function xn(b){b=b|0;var d=0,e=0,f=0;e=c[b>>2]|0;f=a[e>>0]|0;if(!(NE(f<<24>>24)|0))d=0;else{d=0;do{d=(d*10|0)+-48+(f<<24>>24)|0;e=e+1|0;c[b>>2]=e;f=a[e>>0]|0}while((NE(f<<24>>24)|0)!=0)}return d|0}function yn(a,b,c,d,e,f,h){a=a|0;b=+b;c=+c;d=+d;e=+e;f=+f;h=+h;var i=0;i=l;l=l+16|0;g[i+8>>2]=c*h-d*f;g[i+4>>2]=d*e-b*h;g[i>>2]=b*f-c*e;Fq(a,i+8|0,i+4|0,i);l=i;return}function zn(){}function An(a,b){a=a|0;b=b|0;var c=0,d=0,e=0;c=N(b&65535,a&65535)|0;e=(c>>>16)+(N(b&65535,a>>>16)|0)|0;d=N(b>>>16,a&65535)|0;return (y=(e>>>16)+(N(b>>>16,a>>>16)|0)+(((e&65535)+d|0)>>>16)|0,e+d<<16|c&65535|0)|0}function Bn(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;c[d>>2]=-581039253;c[d+4>>2]=-581039253;c[d+8>>2]=-581039253;g[d+12>>2]=0.0;c[e>>2]=1566444395;c[e+4>>2]=1566444395;c[e+8>>2]=1566444395;g[e+12>>2]=0.0;return}function Cn(b){b=b|0;var d=0;d=l;l=l+16|0;if(!(a[24080]|0))lx(24080)|0;ho(d,b);c[6054]=c[d>>2];c[6055]=c[d+4>>2];c[6056]=c[d+8>>2];c[6057]=c[d+12>>2];l=d;return 24216}function Dn(b){b=b|0;var d=0;d=l;l=l+16|0;if(!(a[24088]|0))lx(24088)|0;_k(d,b);c[6058]=c[d>>2];c[6059]=c[d+4>>2];c[6060]=c[d+8>>2];c[6061]=c[d+12>>2];l=d;return 24232}function En(b){b=b|0;var d=0;c[b>>2]=10980;d=c[b+32>>2]|0;if(d|0){if(a[b+36>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+32>>2]=0}a[b+36>>0]=1;c[b+32>>2]=0;c[b+24>>2]=0;c[b+28>>2]=0;return}function Fn(a,b){a=a|0;b=b|0;var d=0,e=0;d=l;l=l+16|0;e=AF(c[b+4>>2]|0)|0;c[d>>2]=0;wm(a,e,d);Pp(b,e,c[a+12>>2]|0);l=d;return}function Gn(a,b,c,d,e,f,g,h,i,j){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;Fq(a,b,c,d);Fq(a+16|0,e,f,g);Fq(a+32|0,h,i,j);return}function Hn(a){a=a|0;var b=0;c[a>>2]=10708;c[a+8>>2]=10756;b=c[a+56>>2]|0;Ib[c[(c[b>>2]|0)+20>>2]&127](b,c[a+72>>2]|0);b=c[a+56>>2]|0;Ib[c[(c[b>>2]|0)+16>>2]&127](b,c[a+72>>2]|0);return}function In(b){b=b|0;var d=0;c[b>>2]=6888;d=c[b+296>>2]|0;if(d|0){if(a[b+300>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+296>>2]=0}a[b+300>>0]=1;c[b+296>>2]=0;c[b+288>>2]=0;c[b+292>>2]=0;return}function Jn(a,b,c){a=a|0;b=b|0;c=c|0;var d=0;d=l;l=l+64|0;_i(d+16|0,b,c);Kk(d,b,+g[c+48>>2],+g[c+52>>2],+g[c+56>>2]);Po(a,d+16|0,d);l=d;return}function Kn(a){a=a|0;var b=0,d=0;c[a>>2]=9660;b=c[a+56>>2]|0;if(b|0?(Db[c[c[b>>2]>>2]&255](b),d=c[a+56>>2]|0,d|0):0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function Ln(a,b){a=a|0;b=b|0;var d=0;d=(c[a+96>>2]|0)+4|0;c[d>>2]=c[b>>2];c[d+4>>2]=c[b+4>>2];c[d+8>>2]=c[b+8>>2];c[d+12>>2]=c[b+12>>2];di(a);return}function Mn(b,d){b=b|0;d=d|0;var e=0;if(a[b+289>>0]|0?(e=c[b+216>>2]|0,e|0):0){c[6486]=(c[6486]|0)+1;gd(c[e+-4>>2]|0)}a[b+289>>0]=0;c[b+216>>2]=d;c[(c[b+212>>2]|0)+8>>2]=d;return}function Nn(b){b=b|0;var d=0;c[b>>2]=6796;d=c[b+20>>2]|0;if(d|0){if(a[b+24>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+20>>2]=0}a[b+24>>0]=1;c[b+20>>2]=0;c[b+12>>2]=0;c[b+16>>2]=0;return}function On(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;e=c[b>>2]|0;e=ub[c[(c[e>>2]|0)+56>>2]&31](e,8)|0;c[e+4>>2]=c[b>>2];c[e>>2]=7592;return e|0}function Pn(a,b){a=a|0;b=b|0;var d=0,e=0;d=l;l=l+16|0;e=AF(c[b+4>>2]|0)|0;bl(a,e,d);tm(b,e,c[a+12>>2]|0);l=d;return}function Qn(b){b=b|0;var d=0;c[b>>2]=6432;d=c[b+16>>2]|0;if(d|0){if(a[b+20>>0]|0){c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0)}c[b+16>>2]=0}a[b+20>>0]=1;c[b+16>>2]=0;c[b+8>>2]=0;c[b+12>>2]=0;return}function Rn(a,b,c,d,e){a=a|0;b=+b;c=+c;d=+d;e=+e;var f=0;f=l;l=l+16|0;g[f+12>>2]=b;g[f+8>>2]=c;g[f+4>>2]=d;g[f>>2]=e;Up(a,f+12|0,f+8|0,f+4|0,f);l=f;return}function Sn(b){b=b|0;var d=0,e=0;c[b>>2]=7788;if(!(a[b+8>>0]|0)){xF(b);return}d=c[b+12>>2]|0;if(!d){xF(b);return}e=c[b+4>>2]|0;Ib[c[(c[e>>2]|0)+16>>2]&127](e,d);xF(b);return}function Tn(b){b=b|0;var d=0,e=0;c[b>>2]=7760;if(!(a[b+8>>0]|0)){xF(b);return}d=c[b+12>>2]|0;if(!d){xF(b);return}e=c[b+4>>2]|0;Ib[c[(c[e>>2]|0)+16>>2]&127](e,d);xF(b);return}function Un(b){b=b|0;var d=0,e=0;c[b>>2]=10908;if(!(a[b+8>>0]|0)){xF(b);return}d=c[b+12>>2]|0;if(!d){xF(b);return}e=c[b+4>>2]|0;Ib[c[(c[e>>2]|0)+16>>2]&127](e,d);xF(b);return}function Vn(a,b){a=a|0;b=b|0;var d=0,e=0;d=l;l=l+16|0;e=AF(c[b+4>>2]|0)|0;g[d>>2]=0.0;wm(a,e,d);Pp(b,e,c[a+12>>2]|0);l=d;return}function Wn(b){b=b|0;var d=0;c[b>>2]=7972;if(!(a[b+65>>0]|0))return;d=c[b+56>>2]|0;Db[c[c[d>>2]>>2]&255](d);b=c[b+56>>2]|0;if(!b)return;c[6486]=(c[6486]|0)+1;gd(c[b+-4>>2]|0);return}function Xn(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;e=l;l=l+16|0;c[e>>2]=6776;c[e+4>>2]=b;Mb[c[(c[a>>2]|0)+48>>2]&127](a,e,d);l=e;return}function Yn(b){b=b|0;var d=0,e=0;c[b>>2]=10532;if(!(a[b+8>>0]|0)){xF(b);return}d=c[b+12>>2]|0;if(!d){xF(b);return}e=c[b+4>>2]|0;Ib[c[(c[e>>2]|0)+16>>2]&127](e,d);xF(b);return}function Zn(b,c,d){b=b|0;c=c|0;d=d|0;var e=0;if((c|0)<(b|0)&(b|0)<(c+d|0)){e=b;c=c+d|0;b=b+d|0;while((d|0)>0){b=b-1|0;c=c-1|0;d=d-1|0;a[b>>0]=a[c>>0]|0}b=e}else $g(b,c,d)|0;return b|0}function _n(a,b){a=a|0;b=b|0;var c=0.0,d=0.0,e=0.0;e=+A(+(+g[b>>2]));d=+A(+(+g[b+4>>2]));c=+A(+(+g[b+8>>2]));g[a+16>>2]=e;g[a+20>>2]=d;g[a+24>>2]=c;g[a+28>>2]=0.0;return}function $n(a,b){a=a|0;b=b|0;bf(a,c[b+36>>2]|0);return}function ao(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;if(SA(a,c[b+8>>2]|0)|0)El(b,d,e);return}function bo(a,b,c,d,e,f,g,h,i,j,k,l,m){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=+f;g=+g;h=+h;i=+i;j=+j;k=k|0;l=+l;m=m|0;Rb[a&0](b|0,c|0,d|0,e|0,+f,+g,+h,+i,+j,k|0,+l,m|0)}function co(a,b,c,d){a=a|0;b=b|0;c=c|0;d=+d;g[a>>2]=(1.0-d)*+g[b>>2]+ +g[c>>2]*d;g[a+4>>2]=(1.0-d)*+g[b+4>>2]+ +g[c+4>>2]*d;g[a+8>>2]=(1.0-d)*+g[b+8>>2]+ +g[c+8>>2]*d;return}function eo(a,b,c,d,e,f,h){a=a|0;b=+b;c=+c;d=+d;e=+e;f=+f;h=+h;var i=0;i=l;l=l+16|0;g[i+8>>2]=b+e;g[i+4>>2]=c+f;g[i>>2]=d+h;Fq(a,i+8|0,i+4|0,i);l=i;return}function fo(a,b,c,d,e,f,h){a=a|0;b=+b;c=+c;d=+d;e=+e;f=+f;h=+h;var i=0;i=l;l=l+16|0;g[i+8>>2]=b*e;g[i+4>>2]=c*f;g[i>>2]=d*h;Fq(a,i+8|0,i+4|0,i);l=i;return}function go(a,b,c,d,e,f,h){a=a|0;b=+b;c=+c;d=+d;e=+e;f=+f;h=+h;var i=0;i=l;l=l+16|0;g[i+8>>2]=b-e;g[i+4>>2]=c-f;g[i>>2]=d-h;Fq(a,i+8|0,i+4|0,i);l=i;return}function ho(a,b){a=a|0;b=b|0;var c=0;c=l;l=l+16|0;g[c+8>>2]=-+g[b>>2];g[c+4>>2]=-+g[b+4>>2];g[c>>2]=-+g[b+8>>2];zt(a,c+8|0,c+4|0,c,b+12|0);l=c;return}function io(a){a=a|0;var b=0;c[a>>2]=9660;b=c[a+56>>2]|0;if(!b)return;Db[c[c[b>>2]>>2]&255](b);a=c[a+56>>2]|0;if(!a)return;c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function jo(a,b){a=a|0;b=b|0;c[a+304>>2]=(c[a+304>>2]|0)+1;c[a+148>>2]=c[b>>2];c[a+148+4>>2]=c[b+4>>2];c[a+148+8>>2]=c[b+8>>2];c[a+148+12>>2]=c[b+12>>2];return}function ko(b,d){b=b|0;d=d|0;if(!(a[24128]|0))lx(24128)|0;d=PD(c[b+12>>2]|0,d)|0;c[6078]=c[d>>2];c[6079]=c[d+4>>2];c[6080]=c[d+8>>2];c[6081]=c[d+12>>2];return 24312}function lo(a,b){a=a|0;b=b|0;c[a+304>>2]=(c[a+304>>2]|0)+1;c[a+132>>2]=c[b>>2];c[a+132+4>>2]=c[b+4>>2];c[a+132+8>>2]=c[b+8>>2];c[a+132+12>>2]=c[b+12>>2];return}function mo(a,b,d){a=a|0;b=b|0;d=d|0;b=c[b+188>>2]|0;a=c[d+188>>2]|0;if(!(c[a+8>>2]&c[b+4>>2])){d=0;return d|0}d=(c[b+8>>2]&c[a+4>>2]|0)!=0;return d|0}function no(a,b,c,d,e,f,g,h){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;return +(+Va(0,a|0,b|0,c|0,d|0,e|0,f|0,g|0,h|0))}function oo(a,b){a=a|0;b=b|0;if((b|0)==0?1:(c[b+252>>2]&2|0)==0){ch(a,b);return}else{Ib[c[(c[a>>2]|0)+92>>2]&127](a,b);return}}function po(a){a=a|0;var b=0;c[a>>2]=10756;b=c[a+48>>2]|0;Ib[c[(c[b>>2]|0)+20>>2]&127](b,c[a+64>>2]|0);b=c[a+48>>2]|0;Ib[c[(c[b>>2]|0)+16>>2]&127](b,c[a+64>>2]|0);return}function qo(b,c,e,f){b=b|0;c=c|0;e=e|0;f=f|0;if(!((b|0)==0&(c|0)==0))do{e=e+-1|0;a[e>>0]=d[480+(b&15)>>0]|0|f;b=js(b|0,c|0,4)|0;c=y}while(!((b|0)==0&(c|0)==0));return e|0}function ro(a,b,c,d){a=a|0;b=+b;c=+c;d=+d;var e=0;e=l;l=l+16|0;fo(e,b,c,d,+g[a+408>>2],+g[a+412>>2],+g[a+416>>2]);kq(a+472|0,e)|0;l=e;return}function so(a,b,c){a=+a;b=+b;c=+c;var d=0,e=0;e=l;l=l+16|0;g[e+8>>2]=a;g[e+4>>2]=b;g[e>>2]=c;d=wr()|0;Fq(d,e+8|0,e+4|0,e);l=e;return d|0}function to(a,b){a=a|0;b=b|0;c[a+16>>2]=c[b>>2];c[a+16+4>>2]=c[b+4>>2];c[a+16+8>>2]=c[b+8>>2];c[a+16+12>>2]=c[b+12>>2];di(a);return}function uo(a,b,c,d,e,f,g,h,i,j,k){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;k=k|0;return Bb[a&3](b|0,c|0,d|0,e|0,f|0,g|0,h|0,i|0,j|0,k|0)|0}function vo(a,b,c,d){a=a|0;b=+b;c=+c;d=+d;var e=0;e=l;l=l+16|0;fo(e,b,c,d,+g[a+604>>2],+g[a+608>>2],+g[a+612>>2]);kq(a+488|0,e)|0;l=e;return}function wo(a,b,c,d,e,f,g,h,i,j,k){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;k=k|0;return +rb[a&3](b|0,c|0,d|0,e|0,f|0,g|0,h|0,i|0,j|0,k|0)}function xo(a,b,c,d,e,f,g){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0;h=Xq()|0;Sd(h,a,b,c,d,e,f,g);return h|0}function yo(){var a=0,b=0;a=jq()|0;if((a|0?(b=c[a>>2]|0,b|0):0)?((c[b+48>>2]&-256|0)==1126902528?(c[b+48+4>>2]|0)==1129074247:0):0)zv(c[b+12>>2]|0);zv(yC()|0)}function zo(a,b,d){a=a|0;b=b|0;d=d|0;Ex(a,b);c[a+48>>2]=c[d>>2];c[a+48+4>>2]=c[d+4>>2];c[a+48+8>>2]=c[d+8>>2];c[a+48+12>>2]=c[d+12>>2];return}function Ao(a,b){a=a|0;b=b|0;c[a+304>>2]=(c[a+304>>2]|0)+1;c[a+388>>2]=c[b>>2];c[a+388+4>>2]=c[b+4>>2];c[a+388+8>>2]=c[b+8>>2];c[a+388+12>>2]=c[b+12>>2];return}function Bo(){var a=0,b=0;b=l;l=l+32|0;a=ir(88)|0;Cr(b);Cd(a,b);l=b;return a|0}function Co(a,b,d){a=a|0;b=b|0;d=d|0;c[d>>2]=c[a+60+(b<<4)>>2];c[d+4>>2]=c[a+60+(b<<4)+4>>2];c[d+8>>2]=c[a+60+(b<<4)+8>>2];c[d+12>>2]=c[a+60+(b<<4)+12>>2];return}function Do(a,b){a=a|0;b=b|0;c[a+304>>2]=(c[a+304>>2]|0)+1;c[a+372>>2]=c[b>>2];c[a+372+4>>2]=c[b+4>>2];c[a+372+8>>2]=c[b+8>>2];c[a+372+12>>2]=c[b+12>>2];return}function Eo(b,d){b=b|0;d=d|0;if(!(a[24168]|0))lx(24168)|0;d=PD(b,d)|0;c[6118]=c[d>>2];c[6119]=c[d+4>>2];c[6120]=c[d+8>>2];c[6121]=c[d+12>>2];return 24472}function Fo(a,b){a=a|0;b=b|0;c[a+304>>2]=(c[a+304>>2]|0)+1;c[a+604>>2]=c[b>>2];c[a+604+4>>2]=c[b+4>>2];c[a+604+8>>2]=c[b+8>>2];c[a+604+12>>2]=c[b+12>>2];return}function Go(a,b,c,d,e,f,g,h,i,j,k,l){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=+f;g=+g;h=+h;i=+i;j=j|0;k=k|0;l=+l;Sb[a&0](b|0,c|0,d|0,e|0,+f,+g,+h,+i,j|0,k|0,+l)}function Ho(a){a=a|0;var b=0.0,d=0.0;d=+g[a+36>>2];+ib[c[(c[a>>2]|0)+48>>2]&15](a);b=+ib[c[(c[a>>2]|0)+48>>2]&15](a);+ib[c[(c[a>>2]|0)+48>>2]&15](a);return +(d+b)}function Io(a){a=a|0;var b=0.0,d=0.0;d=+g[a+32>>2];b=+ib[c[(c[a>>2]|0)+48>>2]&15](a);+ib[c[(c[a>>2]|0)+48>>2]&15](a);+ib[c[(c[a>>2]|0)+48>>2]&15](a);return +(d+b)}function Jo(a,b,c,d,e,f,g,h,i,j,k){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;k=k|0;Xb[a&3](b|0,c|0,d|0,e|0,f|0,g|0,h|0,i|0,j|0,k|0)}function Ko(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;e=l;l=l+16|0;c[e>>2]=c[d>>2];a=wb[c[(c[a>>2]|0)+16>>2]&63](a,b,e)|0;if(a)c[d>>2]=c[e>>2];l=e;return a&1|0}function Lo(a,b,c,d,e){a=a|0;b=+b;c=+c;d=+d;e=+e;var f=0;f=l;l=l+16|0;g[f+8>>2]=b*e;g[f+4>>2]=c*e;g[f>>2]=d*e;Fq(a,f+8|0,f+4|0,f);l=f;return}function Mo(a,b){a=a|0;b=b|0;g[a>>2]=+g[a>>2]*+g[b>>2];g[a+4>>2]=+g[a+4>>2]*+g[b>>2];g[a+8>>2]=+g[a+8>>2]*+g[b>>2];g[a+12>>2]=+g[a+12>>2]*+g[b>>2];return a|0}function No(a,b,c,d,e,f,g,h,i,j){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;Gn(a,b,c,d,e,f,g,h,i,j);return}function Oo(a,b,d){a=a|0;b=b|0;d=d|0;b=c[b+204>>2]|0;if(b&4|0)return 0;a=c[d+204>>2]|0;if(!(a&4))return (b&3|0)==0|(a&3|0)==0|0;else return 0;return 0}function Po(a,b,d){a=a|0;b=b|0;d=d|0;ml(a,b);c[a+48>>2]=c[d>>2];c[a+48+4>>2]=c[d+4>>2];c[a+48+8>>2]=c[d+8>>2];c[a+48+12>>2]=c[d+12>>2];return}function Qo(b){b=b|0;var d=0;c[b>>2]=7788;if(!(a[b+8>>0]|0))return;d=c[b+12>>2]|0;if(!d)return;b=c[b+4>>2]|0;Ib[c[(c[b>>2]|0)+16>>2]&127](b,d);return}function Ro(b){b=b|0;var d=0;c[b>>2]=6796;d=c[b+20>>2]|0;if(!d){xF(b);return}if(!(a[b+24>>0]|0)){xF(b);return}c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);xF(b);return}function So(b){b=b|0;var d=0;c[b>>2]=7760;if(!(a[b+8>>0]|0))return;d=c[b+12>>2]|0;if(!d)return;b=c[b+4>>2]|0;Ib[c[(c[b>>2]|0)+16>>2]&127](b,d);return}function To(b){b=b|0;var d=0;c[b>>2]=10908;if(!(a[b+8>>0]|0))return;d=c[b+12>>2]|0;if(!d)return;b=c[b+4>>2]|0;Ib[c[(c[b>>2]|0)+16>>2]&127](b,d);return}function Uo(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;var g=0;g=Xq()|0;Sd(g,a,b,c,d,e,f,0);return g|0}function Vo(a,b){a=a|0;b=b|0;var c=0;c=l;l=l+128|0;sm(c,a+68|0);Jn(c+64|0,a+4|0,c);lp(b,c+64|0);l=c;return}function Wo(a,b){a=a|0;b=b|0;a=c[a+4>>2]|0;return ((c[b>>2]|0)==(a|0)?1:(c[b+4>>2]|0)==(a|0))|0}function Xo(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;var f=0;f=Jq()|0;_d(f,a,b,c,d,e);return f|0}function Yo(a,b){a=a|0;b=b|0;a=c[a+24>>2]|0;return ub[c[(c[a>>2]|0)+8>>2]&31](a,b)|0}function Zo(b){b=b|0;var d=0;c[b>>2]=10532;if(!(a[b+8>>0]|0))return;d=c[b+12>>2]|0;if(!d)return;b=c[b+4>>2]|0;Ib[c[(c[b>>2]|0)+16>>2]&127](b,d);return}function _o(b){b=b|0;var d=0;c[b>>2]=6432;d=c[b+16>>2]|0;if(!d){xF(b);return}if(!(a[b+20>>0]|0)){xF(b);return}c[6486]=(c[6486]|0)+1;gd(c[d+-4>>2]|0);xF(b);return}function $o(a,b,c,d){a=a|0;b=+b;c=+c;d=+d;var e=0;e=l;l=l+16|0;g[e+8>>2]=b;g[e+4>>2]=c;g[e>>2]=d;Fq(a,e+8|0,e+4|0,e);l=e;return}function ap(a,b,d){a=a|0;b=b|0;d=d|0;tE(a);c[a>>2]=5160;lp(a+4|0,b);lp(a+68|0,d);lp(a+132|0,b);c[a+196>>2]=0;return}function bp(a){a=a|0;var b=0;b=l;l=l+16|0;Wl(a);g[b+8>>2]=0.0;g[b+4>>2]=0.0;g[b>>2]=0.0;Fq(a+48|0,b+8|0,b+4|0,b);l=b;return}function cp(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=+e;var f=0;f=ir(44)|0;hl(f,a,b,c,d,e);return f|0}function dp(a,b,c){a=a|0;b=b|0;c=+c;switch(b|0){case 3:{g[a+452>>2]=c;return}case 4:{g[a+448>>2]=c;return}case 5:{g[a+444>>2]=c;return}default:return}}function ep(a,b){a=a|0;b=b|0;var c=0;c=0;while(1){if((c|0)==3)break;g[a+868+(c<<6)+4>>2]=+Vq(+g[(AF(b)|0)+(c<<2)>>2]);c=c+1|0}return}function fp(a,b){a=a|0;b=b|0;b=c[b+36>>2]|0;Rd(a,c[(c[(c[(c[a+4>>2]|0)+4>>2]|0)+28>>2]|0)+(b*80|0)+64>>2]|0,b);return}function gp(a,b,c,d,e,f,g,h,i,j){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;return +qb[a&3](b|0,c|0,d|0,e|0,f|0,g|0,h|0,i|0,j|0)}function hp(a,b){a=a|0;b=b|0;var c=0;c=0;while(1){if((c|0)==3)break;g[a+868+(c<<6)>>2]=+Vq(+g[(AF(b)|0)+(c<<2)>>2]);c=c+1|0}return}function ip(a,b,c,d){a=+a;b=b|0;c=c|0;d=d|0;var e=0;e=ir(144)|0;tj(e,a,b,c,d);return e|0}function jp(a,b,d,e,f,g,h,i){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;return +(+pb[c[(c[a>>2]|0)+12>>2]&1](a,b,d,e,f,g,h,i))}function kp(b,c,d){b=b|0;c=c|0;d=d|0;if(!((b|0)==0&(c|0)==0))do{d=d+-1|0;a[d>>0]=b&7|48;b=js(b|0,c|0,3)|0;c=y}while(!((b|0)==0&(c|0)==0));return d|0}function lp(a,b){a=a|0;b=b|0;ml(a,b);c[a+48>>2]=c[b+48>>2];c[a+48+4>>2]=c[b+48+4>>2];c[a+48+8>>2]=c[b+48+8>>2];c[a+48+12>>2]=c[b+48+12>>2];return}function mp(a,b){a=a|0;b=b|0;Fq(a,b,b+16|0,b+32|0);Fq(a+16|0,b+4|0,b+20|0,b+36|0);Fq(a+32|0,b+8|0,b+24|0,b+40|0);return}function np(a,b){a=a|0;b=b|0;Db[c[(c[b>>2]|0)+32>>2]&255](b);Zc(a,b);Db[c[(c[b>>2]|0)+36>>2]&255](b);return}function op(a,b,c,d,e,f,g,h,i,j){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;Wb[a&1](b|0,c|0,d|0,e|0,f|0,g|0,h|0,i|0,j|0)}function pp(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;Mb[c[(c[a>>2]|0)+108>>2]&127](a,b,d);Mb[c[(c[a>>2]|0)+108>>2]&127](a,(b+1|0)%3|0,e);return}function qp(a,b,c,d){a=a|0;b=+b;c=+c;d=+d;var e=0;e=l;l=l+16|0;g[e+8>>2]=-b;g[e+4>>2]=-c;g[e>>2]=-d;Fq(a,e+8|0,e+4|0,e);l=e;return}function rp(a,b){a=a|0;b=b|0;c[a+100>>2]=c[b>>2];c[a+100+4>>2]=c[b+4>>2];c[a+100+8>>2]=c[b+8>>2];c[a+100+12>>2]=c[b+12>>2];return}function sp(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;var f=0;f=Yq()|0;Gd(f,a,b,c&65535,d,e);return f|0}function tp(a,b){a=a|0;b=b|0;c[a+696>>2]=c[b>>2];c[a+696+4>>2]=c[b+4>>2];c[a+696+8>>2]=c[b+8>>2];c[a+696+12>>2]=c[b+12>>2];return}function up(a,b){a=a|0;b=b|0;c[a+680>>2]=c[b>>2];c[a+680+4>>2]=c[b+4>>2];c[a+680+8>>2]=c[b+8>>2];c[a+680+12>>2]=c[b+12>>2];return}function vp(a){a=a|0;c[a>>2]=5228;VB(a+116|0);VB(a+96|0);VB(a+76|0);VB(a+24|0);return}function wp(a,b){a=a|0;b=b|0;c[a+156>>2]=c[b>>2];c[a+156+4>>2]=c[b+4>>2];c[a+156+8>>2]=c[b+8>>2];c[a+156+12>>2]=c[b+12>>2];return}function xp(b,c,d){b=b|0;c=c|0;d=d|0;a[b+1309+c>>0]=d&1;if((c|0)<3){a[b+788+c>>0]=d&1;return}else{a[b+868+(c+-3<<6)+44>>0]=d&1;return}}function yp(a,b){a=a|0;b=b|0;c[a+112>>2]=c[b>>2];c[a+112+4>>2]=c[b+4>>2];c[a+112+8>>2]=c[b+8>>2];c[a+112+12>>2]=c[b+12>>2];return}function zp(a){a=a|0;c[a>>2]=5008;VB(a+108|0);VB(a+88|0);VB(a+68|0);VB(a+16|0);return}function Ap(a,b){a=a|0;b=b|0;c[a+56>>2]=c[b>>2];c[a+56+4>>2]=c[b+4>>2];c[a+56+8>>2]=c[b+8>>2];c[a+56+12>>2]=c[b+12>>2];return}function Bp(a,b){a=a|0;b=b|0;c[a+44>>2]=c[b>>2];c[a+44+4>>2]=c[b+4>>2];c[a+44+8>>2]=c[b+8>>2];c[a+44+12>>2]=c[b+12>>2];return}function Cp(a){a=a|0;c[6485]=(c[6485]|0)+1;a=ec((a<<4|3)+16|0)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Dp(a){a=a|0;var b=0;do{c[a+4>>2]=0;g[a+8>>2]=0.0;b=c[a+24>>2]|0;if(b|0)Dp(b);a=c[a+28>>2]|0}while((a|0)!=0);return}function Ep(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=+f;ud(a,b,c,d,e,f);return}function Fp(a,b){a=a|0;b=b|0;c[a+40>>2]=c[b>>2];c[a+40+4>>2]=c[b+4>>2];c[a+40+8>>2]=c[b+8>>2];c[a+40+12>>2]=c[b+12>>2];return}function Gp(a,b){a=a|0;b=b|0;c[a+60>>2]=c[b>>2];c[a+60+4>>2]=c[b+4>>2];c[a+60+8>>2]=c[b+8>>2];c[a+60+12>>2]=c[b+12>>2];return}function Hp(a,b){a=a|0;b=b|0;c[a+172>>2]=c[b>>2];c[a+172+4>>2]=c[b+4>>2];c[a+172+8>>2]=c[b+8>>2];c[a+172+12>>2]=c[b+12>>2];return}function Ip(a,b){a=a|0;b=b|0;c[a+32>>2]=c[b>>2];c[a+32+4>>2]=c[b+4>>2];c[a+32+8>>2]=c[b+8>>2];c[a+32+12>>2]=c[b+12>>2];return}function Jp(a){a=a|0;g[a>>2]=5.880000114440918;g[a+4>>2]=.8299999833106995;g[a+8>>2]=.8799999952316284;g[a+12>>2]=500.0;g[a+16>>2]=10.5;g[a+20>>2]=6.0e3;return}function Kp(a,b){a=a|0;b=b|0;c[a+24>>2]=c[b>>2];c[a+24+4>>2]=c[b+4>>2];c[a+24+8>>2]=c[b+8>>2];c[a+24+12>>2]=c[b+12>>2];return}function Lp(a,b){a=a|0;b=b|0;c[a+316>>2]=c[b>>2];c[a+316+4>>2]=c[b+4>>2];c[a+316+8>>2]=c[b+8>>2];c[a+316+12>>2]=c[b+12>>2];return}function Mp(a,b){a=a|0;b=b|0;c[a+300>>2]=c[b>>2];c[a+300+4>>2]=c[b+4>>2];c[a+300+8>>2]=c[b+8>>2];c[a+300+12>>2]=c[b+12>>2];return}function Np(a,b){a=a|0;b=b|0;c[a+64>>2]=c[b>>2];c[a+64+4>>2]=c[b+4>>2];c[a+64+8>>2]=c[b+8>>2];c[a+64+12>>2]=c[b+12>>2];return}function Op(a,b,c,d,e,f,g,h,i){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;return Ab[a&3](b|0,c|0,d|0,e|0,f|0,g|0,h|0,i|0)|0}function Pp(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;e=0;while(1){if((e|0)>=(b|0))break;c[d+(e<<2)>>2]=c[(c[a+12>>2]|0)+(e<<2)>>2];e=e+1|0}return}function Qp(a,b){a=a|0;b=b|0;c[a+72>>2]=c[b>>2];c[a+72+4>>2]=c[b+4>>2];c[a+72+8>>2]=c[b+8>>2];c[a+72+12>>2]=c[b+12>>2];return}function Rp(a,b){a=a|0;b=b|0;c[a+52>>2]=c[b>>2];c[a+52+4>>2]=c[b+4>>2];c[a+52+8>>2]=c[b+8>>2];c[a+52+12>>2]=c[b+12>>2];return}function Sp(a,b){a=a|0;b=b|0;c[a+8>>2]=c[b>>2];c[a+8+4>>2]=c[b+4>>2];c[a+8+8>>2]=c[b+8>>2];c[a+8+12>>2]=c[b+12>>2];return}function Tp(a,b){a=a|0;b=b|0;c[a+188>>2]=c[b>>2];c[a+188+4>>2]=c[b+4>>2];c[a+188+8>>2]=c[b+8>>2];c[a+188+12>>2]=c[b+12>>2];return}function Up(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;c[a>>2]=c[b>>2];c[a+4>>2]=c[d>>2];c[a+8>>2]=c[e>>2];c[a+12>>2]=c[f>>2];return}function Vp(a,b,c,d,e,f,g,h,i){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;return +pb[a&1](b|0,c|0,d|0,e|0,f|0,g|0,h|0,i|0)}function Wp(a,b){a=a|0;b=b|0;c[a+16>>2]=c[b>>2];c[a+16+4>>2]=c[b+4>>2];c[a+16+8>>2]=c[b+8>>2];c[a+16+12>>2]=c[b+12>>2];return}function Xp(a,b){a=a|0;b=b|0;if(!(c[b+4>>2]&c[a+8>>2])){b=0;return b|0}b=(c[a+4>>2]&c[b+8>>2]|0)!=0;return b|0}function Yp(a,b){a=a|0;b=b|0;if(!(c[b+4>>2]&c[a+12>>2])){b=0;return b|0}b=(c[a+8>>2]&c[b+8>>2]|0)!=0;return b|0}function Zp(a,b,d){a=a|0;b=b|0;d=+d;Ib[c[(c[a>>2]|0)+32>>2]&127](a,b);Jb[c[(c[a>>2]|0)+36>>2]&7](a,b,d);return}function _p(a){a=a|0;c[6485]=(c[6485]|0)+1;a=ec((a<<2|3)+16|0)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function $p(a,b){a=a|0;b=b|0;if(!(c[b+4>>2]&c[a+16>>2])){b=0;return b|0}b=(c[a+12>>2]&c[b+8>>2]|0)!=0;return b|0}function aq(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0;e=Yq()|0;Gd(e,a,b,c&65535,d,0);return e|0}function bq(a,b){a=a|0;b=b|0;c[a+68>>2]=c[b>>2];c[a+68+4>>2]=c[b+4>>2];c[a+68+8>>2]=c[b+8>>2];c[a+68+12>>2]=c[b+12>>2];return}function cq(a,b){a=a|0;b=b|0;c[a+36>>2]=c[b>>2];c[a+36+4>>2]=c[b+4>>2];c[a+36+8>>2]=c[b+8>>2];c[a+36+12>>2]=c[b+12>>2];return}function dq(a,b){a=a|0;b=b|0;c[a>>2]=c[b+264>>2];c[a+4>>2]=c[b+264+4>>2];c[a+8>>2]=c[b+264+8>>2];c[a+12>>2]=c[b+264+12>>2];return}function eq(){var a=0;a=ir(16)|0;c[a>>2]=0;c[a+4>>2]=0;c[a+8>>2]=0;c[a+12>>2]=0;Sw(a);return a|0}function fq(a,b,c){a=a|0;b=b|0;c=c|0;var d=0;d=Jq()|0;yd(d,a,b,c);return d|0}function gq(){var a=0;a=Qq()|0;im();im();ap(a,24360,24360);return a|0}function hq(a,b,d){a=a|0;b=b|0;d=d|0;if((c[a+4>>2]|0)==(b|0)?(c[a+28>>2]|0)!=1:0)c[a+28>>2]=d;return}function iq(a,b){a=a|0;b=b|0;c[a+48>>2]=c[b>>2];c[a+48+4>>2]=c[b+4>>2];c[a+48+8>>2]=c[b+8>>2];c[a+48+12>>2]=c[b+12>>2];return}function jq(){var a=0,b=0;a=l;l=l+16|0;if(!(eb(26520,3)|0)){b=cb(c[6631]|0)|0;l=a;return b|0}else hu(20385,a);return 0}function kq(a,b){a=a|0;b=b|0;g[a>>2]=+g[a>>2]+ +g[b>>2];g[a+4>>2]=+g[a+4>>2]+ +g[b+4>>2];g[a+8>>2]=+g[a+8>>2]+ +g[b+8>>2];return a|0}function lq(a,b){a=a|0;b=b|0;g[a>>2]=+g[a>>2]-+g[b>>2];g[a+4>>2]=+g[a+4>>2]-+g[b+4>>2];g[a+8>>2]=+g[a+8>>2]-+g[b+8>>2];return a|0}function mq(a,b){a=a|0;b=b|0;var c=0;c=l;l=l+64|0;Jn(c,b,a+68|0);lp(a+4|0,c);l=c;return}function nq(a){a=a|0;var b=0;b=l;l=l+16|0;g[b+8>>2]=0.0;g[b+4>>2]=0.0;g[b>>2]=0.0;Fq(a,b+8|0,b+4|0,b);l=b;return}function oq(a,b){a=a|0;b=b|0;c[a>>2]=c[b>>2];c[a+4>>2]=c[b+4>>2];c[a+8>>2]=c[b+8>>2];c[a+12>>2]=c[b+12>>2];return}function pq(a,b){a=a|0;b=b|0;g[a>>2]=+g[a>>2]*+g[b>>2];g[a+4>>2]=+g[a+4>>2]*+g[b>>2];g[a+8>>2]=+g[a+8>>2]*+g[b>>2];return a|0}function qq(a,b,c){a=a|0;b=b|0;c=c|0;var d=0;d=Yq()|0;Gd(d,a,b,c&65535,0,0);return d|0}function rq(a,b){a=a|0;b=b|0;c[a>>2]=0;c[a+4>>2]=0;c[a+8>>2]=0;c[a+12>>2]=0;g[a+(c[b+56>>2]<<2)>>2]=1.0;return}function sq(a){a=a|0;var b=0;b=l;l=l+16|0;gd(a);if(!(fb(c[6631]|0,0)|0)){l=b;return}else hu(20484,b)}function tq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(255)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function uq(a,b,c){a=a|0;b=b|0;c=c|0;var d=0;d=qr()|0;ke(d,a,b,c);return d|0}function vq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(1479)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function wq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(311)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function xq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(1407)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function yq(a){a=a|0;c[6485]=(c[6485]|0)+1;a=ec(a+19|0)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function zq(a){a=a|0;if(!(+A(+(+g[a+20>>2]))<1.1920928955078125e-07)){a=0;return a|0}a=+A(+(+g[a+24>>2]))<1.1920928955078125e-07;return a|0}function Aq(a,b){a=a|0;b=b|0;if(!b?c[a+204>>2]&3|0:0)return;if((c[a+220>>2]&-2|0)!=4)c[a+220>>2]=1;g[a+224>>2]=0.0;return}function Bq(a){a=a|0;var b=0;b=Qq()|0;im();ap(b,a,24360);return b|0}function Cq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(191)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Dq(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;Pb[c[(c[a+-4>>2]|0)+8>>2]&127](a+-4|0,b,d,e);return}function Eq(a,b){a=a|0;b=b|0;var c=0.0;c=+RC(a);c=+qF(c*+RC(b));return +(+py(+wn(a,b)/c))}function Fq(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;c[a>>2]=c[b>>2];c[a+4>>2]=c[d>>2];c[a+8>>2]=c[e>>2];g[a+12>>2]=0.0;return}function Gq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(147)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Hq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(119)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Iq(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0,f=0;e=An(a,c)|0;f=y;return (y=(N(b,c)|0)+(N(d,a)|0)+f|f&0,e|0|0)|0}function Jq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(1331)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Kq(a,b,c,d,e,f,g,h){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;Vb[a&3](b|0,c|0,d|0,e|0,f|0,g|0,h|0)}function Lq(a,b){a=a|0;b=b|0;var d=0;d=l;l=l+16|0;c[d>>2]=b;Cm(a,d);l=d;return}function Mq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(379)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Nq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(363)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Oq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(627)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Pq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(823)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Qq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(219)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Rq(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;Pb[c[(c[a>>2]|0)+88>>2]&127](a,b,d<<16>>16,e<<16>>16);return}function Sq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(1147)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Tq(a,b){a=a|0;b=b|0;var c=0;c=ir(84)|0;xl(c,a,b);return c|0}function Uq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(107)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Vq(a){a=+a;a=+XE(a);if(a<-3.1415927410125732){a=a+6.2831854820251465;return +a}if(!(a>3.1415927410125732))return +a;a=a+-6.2831854820251465;return +a}function Wq(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;Pb[c[(c[a>>2]|0)+36>>2]&127](a,b,d<<16>>16,e<<16>>16);return}function Xq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(787)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Yq(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(135)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function Zq(a,b){a=a|0;b=b|0;c[a+348>>2]=c[b>>2];c[a+348+4>>2]=c[b+4>>2];c[a+348+8>>2]=c[b+8>>2];return}function _q(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;if((d|0)<=0)return;uj(c|0,0,d<<4|0)|0;return}function $q(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(115)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function ar(a,b){a=a|0;b=b|0;c[a+540>>2]=b;if(!b)return;Ib[c[(c[b>>2]|0)+8>>2]&127](b,a+4|0);return}function br(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;ai(a,b,c,d);return}function cr(a,b){a=a|0;b=b|0;var c=0;c=qr()|0;ke(c,a,b,1);return c|0}function dr(a,b){a=a|0;b=b|0;var c=0;c=Yq()|0;Gd(c,a,b,16384,0,0);return c|0}function er(a,b,d){a=a|0;b=b|0;d=d|0;var e=0;e=c[a+192>>2]|0;Pb[c[(c[e>>2]|0)+8>>2]&127](e,a+4|0,b,d);return}function fr(a){a=a|0;var b=0;b=ir(88)|0;Cd(b,a);return b|0}function gr(a,b){a=a|0;b=b|0;c[a>>2]=1065353216;c[a+4>>2]=1065353216;c[a+8>>2]=1065353216;g[a+12>>2]=0.0;return}function hr(a){a=a|0;var b=0;b=l;l=l+16|0;c[b>>2]=AF(c[a+60>>2]|0)|0;a=pA(Ta(6,b|0)|0)|0;l=b;return a|0}function ir(a){a=a|0;var b=0;while(1){b=ec(a)|0;if(b|0)break;b=nC()|0;if(!b){b=0;break}Cb[b&3]()}return b|0}function jr(a,b){a=a|0;b=b|0;var d=0;d=c[a+8>>2]|0;Mb[c[d+64>>2]&127](b,d,c[a+4>>2]|0);return 0}function kr(b){b=b|0;var d=0;d=c[b+12>>2]|0;if(!d)return;if(a[b+16>>0]&1)Qv(d);c[b+12>>2]=0;return}function lr(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(75)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function mr(a,b){a=a|0;b=b|0;var d=0;d=a+92|0;do{c[a>>2]=c[b>>2];a=a+4|0;b=b+4|0}while((a|0)<(d|0));return}function nr(a,b){a=a|0;b=+b;var c=0;c=l;l=l+16|0;g[c>>2]=b;Cm(a,c);l=c;return}function or(a,b){a=a|0;b=b|0;var c=0;c=ir(136)|0;Ak(c,a,b);return c|0}function pr(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;Of(a,b,c,d);return}function qr(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(99)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function rr(a,b){a=a|0;b=b|0;return +(+Tv(+g[a>>2],+g[a+4>>2],+g[a+8>>2],+g[b>>2],+g[b+4>>2],+g[b+8>>2]))}function sr(a,b){a=a|0;b=b|0;var c=0;c=ir(88)|0;Hl(c,a,b);return c|0}function tr(a,b,d){a=a|0;b=b|0;d=d|0;c[a>>2]=0;c[a+4>>2]=0;c[a+8>>2]=0;c[a+12>>2]=0;return}function ur(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(79)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function vr(a,b){a=a|0;b=b|0;var c=0;c=ir(128)|0;zk(c,a,b);return c|0}function wr(){var a=0;c[6485]=(c[6485]|0)+1;a=ec(35)|0;if(!a){a=0;return a|0}c[(a+4+15&-16)+-4>>2]=a;a=a+4+15&-16;return a|0}function xr(a,b,c,d,e,f,g){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;return zb[a&3](b|0,c|0,d|0,e|0,f|0,g|0)|0}function yr(a){a=a|0;var b=0;b=l;l=l+16|0;Ib[c[(c[a>>2]|0)+44>>2]&127](a,b);l=b;return}function zr(a){a=a|0;$e(a);if(!a)return;c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function Ar(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;Pb[c[(c[a>>2]|0)+8>>2]&127](a,b,d,e);return}function Br(a){a=a|0;c[a>>2]=5080;g[a+4>>2]=1.0;c[a+8>>2]=0;c[a+12>>2]=1;c[a+16>>2]=-1;c[a+20>>2]=0;return}function Cr(a){a=a|0;c[a>>2]=0;c[a+4>>2]=0;c[a+8>>2]=4096;c[a+12>>2]=4096;c[a+16>>2]=0;c[a+20>>2]=1;return}function Dr(a,b,d){a=a|0;b=b|0;d=d|0;Xd(c[a+108>>2]|0,c[a+136>>2]|0,b,d);return}function Er(a,b){a=a|0;b=+b;var c=0;c=l;l=l+16|0;g[c>>2]=b;a=Mo(a,c)|0;l=c;return a|0}function Fr(a,b){a=a|0;b=b|0;var c=0;c=Qq()|0;ap(c,a,b);return c|0}function Gr(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;return 0.0}function Hr(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;Pb[c[(c[a>>2]|0)+80>>2]&127](a,b,d,e);return}function Ir(){var a=0;a=l;l=l+16|0;if(!(db(26524,238)|0)){l=a;return}else hu(20434,a)}function Jr(a){a=a|0;if(c[a+204>>2]&3|0)return;if((c[a+220>>2]&-2|0)!=4)c[a+220>>2]=1;g[a+224>>2]=0.0;return}function Kr(a,b,c,d,e,f,g){a=a|0;b=b|0;c=c|0;d=d|0;e=+e;f=f|0;g=g|0;return +mb[a&3](b|0,c|0,d|0,+e,f|0,g|0)}function Lr(a,b){a=a|0;b=+b;var c=0;c=l;l=l+16|0;g[c>>2]=b;a=pq(a,c)|0;l=c;return a|0}function Mr(a,b){a=a|0;b=b|0;a=c[a+4>>2]|0;ub[c[(c[a>>2]|0)+8>>2]&31](a,c[b+36>>2]|0)|0;return}function Nr(a,b){a=a|0;b=b|0;mp(a,b);Fq(a+48|0,b+48|0,b+52|0,b+56|0);return}function Or(a,b,d){a=a|0;b=b|0;d=d|0;Uf(c[a+108>>2]|0,b,d);return}function Pr(a,b){a=a|0;b=b|0;c[a+304>>2]=(c[a+304>>2]|0)+1;c[a+192>>2]=b;c[a+200>>2]=b;return}function Qr(a,b,c,d,e,f,g){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;Ub[a&7](b|0,c|0,d|0,e|0,f|0,g|0)}function Rr(a,b,c,d,e,f,g,h,i,j,k,l){a=a|0;b=b|0;c=c|0;d=d|0;e=+e;f=+f;g=+g;h=+h;i=+i;j=j|0;k=+k;l=l|0;R(35)}function Sr(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;Pb[c[(c[a>>2]|0)+24>>2]&127](a,b,d,e);return}function Tr(a,b,d){a=a|0;b=b|0;d=d|0;Pb[c[(c[a>>2]|0)+36>>2]&127](a,b,d<<16>>16,-3);return}function Ur(a,b,d){a=a|0;b=b|0;d=d|0;Mb[c[(c[b>>2]|0)+68>>2]&127](a,b,d);return}function Vr(b,d){b=b|0;d=d|0;b=(a[b+344>>0]|0)==0?3:0;c[d>>2]=b;c[d+4>>2]=b;return}function Wr(a,b){a=a|0;b=+b;var c=0;c=l;l=l+16|0;g[c>>2]=1.0/b;a=Mo(a,c)|0;l=c;return a|0}function Xr(a,b,d){a=a|0;b=+b;d=d|0;return tb[c[(c[a>>2]|0)+52>>2]&1](a,b,d,.01666666753590107)|0}function Yr(a,b,c){a=a|0;b=b|0;c=c|0;if((c|0)<32){y=b<<c|(a&(1<<c)-1<<32-c)>>>32-c;return a<<c}y=a<<c-32;return 0}function Zr(a,b,d){a=a|0;b=+b;d=d|0;c[d>>2]=0;c[d+4>>2]=0;c[d+8>>2]=0;c[d+12>>2]=0;return}function _r(a){a=a|0;Oi(a);if(!a)return;c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function $r(a){a=a|0;var b=0;b=c[a+68>>2]|0;Ib[c[(c[b>>2]|0)+32>>2]&127](b,c[a+24>>2]|0);return}function as(a,b){a=a|0;b=b|0;xm(a,+g[b>>2],+g[b+4>>2],+g[b+8>>2]);return}function bs(a,b,d,e){a=a|0;b=+b;d=d|0;e=+e;return tb[c[(c[a>>2]|0)+52>>2]&1](a,b,d,e)|0}function cs(a,b){a=a|0;b=b|0;c[a>>2]=0;c[a+4>>2]=0;c[a+8>>2]=1065353216;g[a+12>>2]=0.0;return}function ds(a,b){a=a|0;b=b|0;c[a>>2]=1065353216;c[a+4>>2]=0;c[a+8>>2]=0;g[a+12>>2]=0.0;return}function es(a,b){a=a|0;b=b|0;c[a>>2]=0;c[a+4>>2]=1065353216;c[a+8>>2]=0;g[a+12>>2]=0.0;return}function fs(a,b){a=a|0;b=b|0;Mb[c[(c[a>>2]|0)+8>>2]&127](a,b,c[(c[a+8>>2]|0)+48>>2]|0);return}function gs(a,b,c,d,e,f,g){a=a|0;b=b|0;c=c|0;d=d|0;e=+e;f=f|0;g=g|0;Ob[a&0](b|0,c|0,d|0,+e,f|0,g|0)}function hs(a,b){a=a|0;b=b|0;ym(a,+g[b>>2],+g[b+4>>2],+g[b+8>>2]);return}function is(a,b,d){a=a|0;b=b|0;d=+d;Jb[c[(c[a>>2]|0)+20>>2]&7](a,b,d);return}function js(a,b,c){a=a|0;b=b|0;c=c|0;if((c|0)<32){y=b>>>c;return a>>>c|(b&(1<<c)-1)<<32-c}y=0;return b>>>c-32|0}function ks(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;Pb[c[(c[a>>2]|0)+124>>2]&127](a,e,b,d);return}function ls(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;c[a+112>>2]=b;c[a+116>>2]=d;c[a+120>>2]=e;return}function ms(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;xb[c[(c[a>>2]|0)+8>>2]&31](a,b,d,e)|0;return}function ns(a,b){a=a|0;b=b|0;ro(a,+g[b>>2],+g[b+4>>2],+g[b+8>>2]);return}function os(a,b,d){a=a|0;b=b|0;d=d|0;Pb[c[(c[a>>2]|0)+36>>2]&127](a,b,d<<16>>16,-1);return}function ps(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;Fq(a,b,d,e);c[a+12>>2]=c[f>>2];return}function qs(b,c,d,e){b=b|0;c=c|0;d=+d;e=+e;a[b+737>>0]=c&1;g[b+680>>2]=d;g[b+684>>2]=e;return}function rs(a,b,c,d,e,f){a=a|0;b=+b;c=+c;d=+d;e=+e;f=+f;km(a,b,c,d,e,f);return}function ss(a){a=a|0;Ti(a);if(!a)return;c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function ts(a,b,c,d,e,f,g){a=a|0;b=b|0;c=+c;d=+d;e=e|0;f=f|0;g=g|0;Fb[a&0](b|0,+c,+d,e|0,f|0,g|0)}function us(a,b){a=a|0;b=b|0;if(!b)b=0;else b=Jh(c[b>>2]|0,c[b+4>>2]|0,a)|0;return ((b|0)==0?a:b)|0}function vs(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;return 1.0}function ws(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;return}function xs(a,b,c,d,e,f,g,h,i,j){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;R(19);return 0}function ys(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;Pb[c[(c[a>>2]|0)+32>>2]&127](a,b,d,e);return}function zs(b){b=b|0;return xA(a[b+291>>0]|0)|0}function As(a){a=a|0;Sf(a);if(!a)return;c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function Bs(a){a=a|0;if(!a){a=0;return a|0}a=Cp(a)|0;return a|0}function Cs(a,b,c,d,e,f,g,h,i,j){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;R(9);return 0.0}function Ds(a,b,d,e){a=a|0;b=b|0;d=+d;e=e|0;Kb[c[(c[a>>2]|0)+28>>2]&7](a,b,d,e);return}function Es(a,b){a=a|0;b=b|0;Tw(a,b);return}function Fs(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;return yb[a&1](b|0,c|0,d|0,e|0,f|0)|0}function Gs(a,b){a=a|0;b=b|0;Yd(a,b);return}function Hs(a,b,c,d,e,f,g,h,i,j,k){a=a|0;b=b|0;c=c|0;d=d|0;e=+e;f=+f;g=+g;h=+h;i=i|0;j=j|0;k=+k;R(36)}function Is(a,b){a=a|0;b=b|0;Uf(c[a+108>>2]|0,b,1);return}function Js(a,b){a=a|0;b=b|0;c[a+304>>2]=(c[a+304>>2]|0)+1;lp(a+4|0,b);return}function Ks(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;return +ob[a&15](b|0,c|0,d|0,e|0,f|0)}function Ls(a,b){a=a|0;b=b|0;var c=0;c=Cq()|0;pf(c,a,b);return c|0}function Ms(a,b){a=a|0;b=b|0;vo(a,+g[b>>2],+g[b+4>>2],+g[b+8>>2]);return}function Ns(a,b){a=a|0;b=+b;var c=0;c=l;l=l+16|0;g[c>>2]=1.0/b;pq(a,c)|0;l=c;return}function Os(a,b){a=a|0;b=+b;return tb[c[(c[a>>2]|0)+52>>2]&1](a,b,1,.01666666753590107)|0}function Ps(a){a=a|0;var b=0;b=ir(8)|0;Et(b,a);return b|0}function Qs(a,b,d){a=a|0;b=b|0;d=d|0;Mb[c[(c[a>>2]|0)+56>>2]&127](a,b,d);return}function Rs(a,b,d){a=a|0;b=b|0;d=+d;Jb[c[(c[a>>2]|0)+36>>2]&7](a,b,d);return}function Ss(a){a=a|0;ah(a);if(!a)return;c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function Ts(a,b,c,d,e,f,g,h,i,j){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;j=j|0;R(41)}function Us(a){a=a|0;bi(a);if(!a)return;c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function Vs(a,b,c,d,e){a=a|0;b=+b;c=+c;d=+d;e=+e;km(a,b,c,d,e,1.0);return}function Ws(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=+d;e=e|0;f=f|0;return +kb[a&3](b|0,c|0,+d,e|0,f|0)}function Xs(a,b,c,d){a=a|0;b=b|0;c=+c;d=+d;qs(a,b,c,d);return}function Ys(a){a=a|0;c[a>>2]=9500;if(!a)return;c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function Zs(a,b){a=a|0;b=b|0;return c[(Az(c[a+28>>2]|0,b)|0)+64>>2]|0}function _s(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;Tb[a&31](b|0,c|0,d|0,e|0,f|0)}function $s(a){a=a|0;if(!(c[a+12>>2]|0)){a=0;return a|0}a=c[a+20>>2]|0;return a|0}function at(a){a=a|0;Pk(a);if(!a)return;c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function bt(a,b){a=a|0;b=b|0;var c=0;c=ir(64)|0;zo(c,a,b);return c|0}function ct(a,b,c){a=a|0;b=b|0;c=c|0;vm(a,b,c);return}function dt(){var a=0;a=ir(24)|0;Cr(a);return a|0}function et(a,b,d){a=a|0;b=b|0;d=+d;Eb[c[(c[a>>2]|0)+16>>2]&31](a,d);return}function ft(a,b){a=a|0;b=b|0;Pb[c[(c[a>>2]|0)+36>>2]&127](a,b,2,-3);return}function gt(a,b,d){a=a|0;b=+b;d=d|0;Gb[c[(c[a>>2]|0)+32>>2]&15](a,b,d);return}function ht(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=+e;return}function it(a){a=a|0;bh(a);if(!a)return;c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function jt(a){a=a|0;eh(a);if(!a)return;c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function kt(a,b,d){a=a|0;b=b|0;d=d|0;return +(+lb[c[(c[a>>2]|0)+32>>2]&31](a,b,d))}function lt(a){a=a|0;if(!a){a=0;return a|0}a=_p(a)|0;return a|0}function mt(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=+f;Qb[a&1](b|0,c|0,d|0,e|0,+f)}function nt(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=+d;e=e|0;f=f|0;Lb[a&0](b|0,c|0,+d,e|0,f|0)}function ot(a,b){a=a|0;b=b|0;Jt(a+24|0,b);return}function pt(a){a=a|0;c[a>>2]=5920;if(!a)return;c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function qt(a,b,c,d,e,f,g,h,i){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;R(8);return 0.0}function rt(a,b){a=a|0;b=b|0;jo(a,b);return}function st(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+16>>2]&127](a,b);return}function tt(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+52>>2]&127](a,b);return}function ut(a,b){a=a|0;b=b|0;Jt(a+16|0,b);return}function vt(a,b,d){a=a|0;b=b|0;d=+d;Jb[c[(c[a>>2]|0)+8>>2]&7](a,b,d);return}function wt(a,b){a=a|0;b=b|0;Nx(a,b);return}function xt(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;Bc(a,b,c,d)|0;return 1}function yt(a){a=a|0;var b=0;b=((c[a+56>>2]|0)+2|0)%3|0;return +(+g[(AF(a+32|0)|0)+(b<<2)>>2])}function zt(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;Up(a,b,c,d,e);return}function At(a,b){a=a|0;b=b|0;lo(a,b);return}function Bt(a){a=a|0;var b=0;b=Cq()|0;pf(b,a,1);return b|0}function Ct(a,b,d){a=a|0;b=+b;d=d|0;g[(c[a+136>>2]|0)+(d*284|0)+232>>2]=b;return}function Dt(a,b,d){a=a|0;b=+b;d=d|0;g[(c[a+136>>2]|0)+(d*284|0)+252>>2]=b;return}function Et(a,b){a=a|0;b=b|0;hE(a);c[a>>2]=6284;c[a+4>>2]=b;return}function Ft(a,b){a=a|0;b=b|0;ep(a,b);return}function Gt(a,b){a=a|0;b=b|0;hp(a,b);return}function Ht(a,b){a=a|0;b=b|0;Pb[c[(c[a>>2]|0)+36>>2]&127](a,b,1,-1);return}function It(a){a=+a;var b=0;h[j>>3]=a;b=c[j>>2]|0;y=c[j+4>>2]|0;return b|0}function Jt(a,b){a=a|0;b=b|0;Fn(a,b);return}function Kt(a){a=a|0;c[a>>2]=4984;c[a+4>>2]=1;c[a+8>>2]=-1;g[a+12>>2]=0.0;return}function Lt(a,b){a=a|0;b=b|0;if((c[a+220>>2]&-2|0)==4)return;c[a+220>>2]=b;return}function Mt(a){a=a|0;c[a>>2]=5032;g[a+4>>2]=1.0;c[a+8>>2]=1;c[a+12>>2]=-1;return}function Nt(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;d=b-d-(c>>>0>a>>>0|0)>>>0;return (y=d,a-c>>>0|0)|0}function Ot(a,b){a=a|0;b=b|0;tp(a,b);return}function Pt(a,b){a=a|0;b=b|0;up(a,b);return}function Qt(a,b){a=a|0;b=b|0;Mb[c[(c[a>>2]|0)+56>>2]&127](a,b,0);return}function Rt(a,b){a=a|0;b=+b;Av(a,b);return}function St(a,b){a=a|0;b=b|0;return ub[c[(c[a>>2]|0)+40>>2]&31](a,b)|0}function Tt(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+60>>2]&127](a,b);return}function Ut(a,b,d){a=a|0;b=b|0;d=+d;Ib[c[(c[a>>2]|0)+12>>2]&127](a,b);return}function Vt(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+92>>2]&127](a,b);return}function Wt(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;return xb[a&31](b|0,c|0,d|0,e|0)|0}function Xt(a,b){a=a|0;b=b|0;return c[(PC(c[a+12>>2]|0,b)|0)>>2]|0}function Yt(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+32>>2]&127](a,b);return}function Zt(a,b,c,d,e,f,g,h,i){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=i|0;R(40)}function _t(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return (y=b+d+(a+c>>>0>>>0<a>>>0|0)>>>0,a+c>>>0|0)|0}function $t(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+40>>2]&127](a,b);return}function au(a,b){a=a|0;b=b|0;return c[(PC(c[a+336>>2]|0,b)|0)>>2]|0}function bu(a,b,d){a=a|0;b=+b;d=d|0;g[(c[a+136>>2]|0)+(d*284|0)+256>>2]=b;return}function cu(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+84>>2]&127](a,b);return}function du(a){a=a|0;var b=0;b=$q()|0;Ye(b,a,0);return b|0}function eu(a,b,c,d){a=a|0;b=+b;c=+c;d=+d;el(a,b,c,d);return}function fu(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+28>>2]&127](a,b);return}function gu(a,b){a=a|0;b=b|0;lv(a+76|0,b);return}function hu(a,b){a=a|0;b=b|0;var d=0;d=l;l=l+16|0;c[d>>2]=b;ej(a,d);Gl();Ua()}function iu(a,b){a=a|0;b=+b;c[a+304>>2]=(c[a+304>>2]|0)+1;g[a+236>>2]=b;return}function ju(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;return +nb[a&1](b|0,c|0,d|0,e|0)}function ku(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+72>>2]&127](a,b);return}function lu(a,b){a=a|0;b=b|0;lv(a+96|0,b);return}function mu(a,b){a=a|0;b=b|0;lv(a+68|0,b);return}function nu(a){a=a|0;var b=0;b=ir(284)|0;li(b,a);return b|0}function ou(a,b){a=a|0;b=+b;g[a+44>>2]=b;g[a+48>>2]=+D(+b);return}function pu(a){a=a|0;if(!a)return;Db[c[(c[a>>2]|0)+4>>2]&255](a);return}function qu(a,b){a=a|0;b=b|0;lv(a+88|0,b);return}function ru(a,b){a=a|0;b=+b;return +(+ib[c[(c[a>>2]|0)+16>>2]&15](a)*b)}function su(a){a=a|0;Ns(a,+ay(+g[a>>2],+g[a+4>>2],+g[a+8>>2]));return}function tu(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+12>>2]&127](a,b);return}function uu(a,b){a=a|0;b=+b;c[a+304>>2]=(c[a+304>>2]|0)+1;g[a+232>>2]=b;return}function vu(a,b,c,d,e,f,g,h){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;R(18);return 0}function wu(a,b){a=a|0;b=b|0;fe(a,b);return}function xu(a,b,c,d,e,f,g,h){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;R(7);return 0.0}function yu(a,b,c){a=a|0;b=b|0;c=c|0;kh(a,b,c);return}function zu(a){a=a|0;var b=0;b=((AF(c[a+252>>2]|0)|0)&2|0)==0;return (b?0:a)|0}function Au(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;Pb[a&127](b|0,c|0,d|0,e|0)}function Bu(a,b){a=a|0;b=b|0;return +(+g[(PC(c[a+12>>2]|0,b)|0)>>2])}function Cu(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+8>>2]&127](a,b);return}function Du(a){a=a|0;return oC(c[a+204>>2]|0)|0}function Eu(a,b,c){a=a|0;b=b|0;c=c|0;Ij(a,b,c);return}function Fu(a,b){a=a|0;b=b|0;Le(a,b);return}function Gu(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+68>>2]&127](a,b);return}function Hu(b){b=b|0;a[b+16>>0]=1;c[b+12>>2]=0;c[b+4>>2]=0;c[b+8>>2]=0;return}function Iu(a,b){a=a|0;b=+b;c[a+304>>2]=(c[a+304>>2]|0)+1;g[a+228>>2]=b;return}function Ju(){var a=0;a=Cq()|0;pf(a,1,1);return a|0}function Ku(a,b,c){a=a|0;b=+b;c=+c;uv(a,b,c);return}function Lu(a,b){a=a|0;b=+b;Eb[c[(c[a>>2]|0)+20>>2]&31](a,b);return}function Mu(a,b,c,d){a=a|0;b=+b;c=+c;d=+d;ck(a,b,c,d);return}function Nu(a,b){a=a|0;b=+b;Eb[c[(c[a>>2]|0)+16>>2]&31](a,b);return}function Ou(a,b){a=a|0;b=b|0;return +(+g[(c[a+136>>2]|0)+(b*284|0)+232>>2])}function Pu(){var a=0;a=ir(176)|0;ce(a,0);return a|0}function Qu(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+24>>2]&127](a,b);return}function Ru(a,b){a=a|0;b=b|0;c[a+68>>2]=b;return}function Su(a,b,d){a=a|0;b=b|0;d=d|0;c[a+20>>2]=b;c[a+28>>2]=d;return}function Tu(a,b,d){a=a|0;b=b|0;d=d|0;c[a+16>>2]=b;c[a+24>>2]=d;return}function Uu(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return 0}function Vu(a,b,c,d,e){a=a|0;b=b|0;c=+c;d=d|0;e=+e;return tb[a&1](b|0,+c,d|0,+e)|0}function Wu(a,b,c){a=a|0;b=b|0;c=+c;kl(a,b,c);return}function Xu(a,b){a=a|0;b=b|0;Ib[c[(c[a>>2]|0)+64>>2]&127](a,b);return}function Yu(a,b){a=a|0;b=b|0;mx(a+116|0,b);return}function Zu(a,b,c){a=a|0;b=b|0;c=c|0;Dk(a,b,c);return}function _u(a,b,c){a=a|0;b=b|0;c=+c;g[a+1340+(b<<2)>>2]=c;return}function $u(a,b){a=a|0;b=b|0;mx(a+108|0,b);return}function av(a){a=a|0;var b=0;b=AF(a+32|0)|0;return +(+g[b+(c[a+56>>2]<<2)>>2])}function bv(a,b,c){a=a|0;b=b|0;c=+c;dp(a,b,c);return}function cv(a,b){a=a|0;b=b|0;Js(a,b);return}function dv(a,b){a=a|0;b=+b;g[a+32>>2]=b;g[a+36>>2]=b;return}function ev(a,b,c){a=a|0;b=b|0;c=+c;g[a+1364+(b<<2)>>2]=c;return}function fv(a,b){a=a|0;b=b|0;Ld(a,b);return}function gv(a){a=+a;if(!(a>=0.0))a=+py(-a);else a=+py(a);return +(a*2.0)}function hv(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=+e;Nb[a&15](b|0,c|0,d|0,+e)}function iv(a){a=+a;var b=0;b=lr()|0;Tk(b,a);return b|0}function jv(a,b){a=a|0;b=+b;g[a+136>>2]=b;return}function kv(a,b){a=a|0;b=+b;Kw(a,b);return}function lv(a,b){a=a|0;b=b|0;Pn(a,b);return}function mv(a){a=a|0;var b=0;b=(AF(c[a+252>>2]|0)|0)==4;return (b?a:0)|0}function nv(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=+d;e=e|0;Kb[a&7](b|0,c|0,+d,e|0)}function ov(a,b,c,d,e){a=a|0;b=b|0;c=+c;d=d|0;e=e|0;Hb[a&0](b|0,+c,d|0,e|0)}function pv(a,b){a=a|0;b=+b;g[a+132>>2]=b;return}function qv(a,b){a=a|0;b=b|0;Oz(a,b);return}function rv(a,b){a=a|0;b=b|0;Lp(a,b);return}function sv(a,b){a=a|0;b=b|0;Mp(a,b);return}function tv(a,b){a=a|0;b=b|0;c[a+24>>2]=b;return}function uv(a,b,c){a=a|0;b=+b;c=+c;g[a+532>>2]=b;g[a+536>>2]=c;return}function vv(a){a=a|0;if(!a)return;VB(a);xF(a);return}function wv(){var a=0;a=$q()|0;Ye(a,1,0);return a|0}function xv(a,b){a=a|0;b=b|0;return Yz(a,b)|0}function yv(a,b){a=a|0;b=b|0;g[a+56>>2]=+(b|0);return}function zv(a){a=a|0;var b=0;b=l;l=l+16|0;Cb[a&3]();hu(20537,b)}function Av(b,c){b=b|0;c=+c;g[b+572>>2]=c;a[b+553>>0]=1;return}function Bv(a,b){a=a|0;b=b|0;return c[(c[a+20>>2]|0)+(b<<2)>>2]|0}function Cv(a){a=a|0;return +(+PE(+g[a+16>>2]))}function Dv(a,b){a=a|0;b=+b;Bz(a,b);return}function Ev(a){a=a|0;return LC(a)|0}function Fv(a){a=a|0;return sb[c[(c[a>>2]|0)+40>>2]&127](a)|0}function Gv(a){a=a|0;kr(a);Hu(a);return}function Hv(a){a=a|0;return +(+ay(+g[a>>2],+g[a+4>>2],+g[a+8>>2]))}function Iv(a,b){a=a|0;b=b|0;$z(a,b);return}function Jv(a,b){a=a|0;b=b|0;yz(a,b);return}function Kv(a,b){a=a|0;b=+b;Eb[c[(c[a>>2]|0)+44>>2]&31](a,b);return}function Lv(){var a=0;a=ir(4)|0;c[a>>2]=0;EB(a);return a|0}function Mv(a,b){a=a|0;b=b|0;Ao(a,b);return}function Nv(a){a=a|0;return OC(a)|0}function Ov(a,b){a=a|0;b=+b;g[a+140>>2]=b;return}function Pv(a){a=a|0;return tD(+g[a+4>>2])|0}function Qv(a){a=a|0;if(!a)return;c[6486]=(c[6486]|0)+1;gd(c[a+-4>>2]|0);return}function Rv(a,b){a=a|0;b=b|0;return (c[a+136>>2]|0)+(b*284|0)+92|0}function Sv(a,b){a=a|0;b=b|0;return au(a,b)|0}function Tv(a,b,c,d,e,f){a=+a;b=+b;c=+c;d=+d;e=+e;f=+f;return +(a*d+b*e+c*f)}function Uv(){var a=0;a=ir(24)|0;Jp(a);return a|0}function Vv(a,b){a=a|0;b=b|0;Do(a,b);return}function Wv(a,b){a=a|0;b=+b;Nz(a,b);return}function Xv(a,b){a=a|0;b=+b;sA(a,b);return}function Yv(a){a=a|0;Db[c[(c[a>>2]|0)+120>>2]&255](a);return}function Zv(a){a=a|0;g[a>>2]=.30000001192092896;g[a+4>>2]=1.0;g[a+8>>2]=0.0;return}function _v(a,b){a=a|0;b=b|0;gl(a,b);return}function $v(a){a=a|0;return dD(c[a+204>>2]|0)|0}function aw(a,b){a=a|0;b=b|0;lp(a+4|0,b);return}function bw(a){a=a|0;vp(a);xF(a);return}function cw(a,b){a=a|0;b=b|0;Wa(2,a|0,b|0)|0;return}function dw(a,b){a=a|0;b=+b;yA(a,b);return}function ew(a,b){a=a|0;b=+b;tx(a,b);return}function fw(a,b){a=a|0;b=+b;zA(a,b);return}function gw(a,b){a=a|0;b=+b;ux(a,b);return}function hw(a,b){a=a|0;b=b|0;ar(a,b);return}function iw(a,b){a=a|0;b=b|0;Fo(a,b);return}function jw(a){a=a|0;return +(+PE(+g[a+104>>2]))}function kw(a){a=a|0;return +(+gv(+g[a+12>>2]))}function lw(b,c){b=b|0;c=c|0;a[b+32>>0]=c&1;return}function mw(a){a=a|0;return YC(c[a+8>>2]|0)|0}function nw(a,b){a=a|0;b=b|0;Wa(1,a|0,b|0)|0;return}function ow(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return wb[a&63](b|0,c|0,d|0)|0}function pw(a,b){a=a|0;b=b|0;return +(+Nl(a,b))}function qw(a,b){a=a|0;b=b|0;kh(a,b,1);return}function rw(a,b){a=a|0;b=b|0;Tz(a,b);return}function sw(a,b){a=a|0;b=b|0;c[a+8>>2]=b<<16>>16;return}function tw(a){a=a|0;if(!a)a=0;else a=(Th(a,4920)|0)!=0&1;return a|0}function uw(a){a=a|0;zp(a);xF(a);return}function vw(a,b){a=a|0;b=+b;fC(a,b);return}function ww(a,b){a=a|0;b=b|0;cl(a,b);return}function xw(a,b){a=a|0;b=+b;g[a+120>>2]=b;return}function yw(a,b){a=a|0;b=b|0;Dy(a,b,+DB(b));return}function zw(a,b){a=a|0;b=+b;g[a+64>>2]=b;return}function Aw(a,b){a=a|0;b=b|0;rA(a,b);return}function Bw(a,b){a=a|0;b=b|0;Nr(a,b);return}function Cw(a,b){a=a|0;b=b|0;_z(a,b);return}function Dw(a){a=a|0;return +(+PE(+g[a+272>>2]))}function Ew(a,b){a=a|0;b=+b;g[a+116>>2]=b;return}function Fw(a,b){a=a|0;b=+b;g[a+128>>2]=b;return}function Gw(a,b){a=a|0;b=b|0;Zz(a,b);return}function Hw(a,b){a=a|0;b=+b;g[a+36>>2]=b;return}function Iw(a,b){a=a|0;b=b|0;c[a+12>>2]=b<<16>>16;return}function Jw(a,b){a=a|0;b=b|0;return c[(c[a+236>>2]|0)+(b<<2)>>2]|0}function Kw(b,c){b=b|0;c=+c;g[b+572>>2]=c;a[b+553>>0]=0;return}function Lw(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return +lb[a&31](b|0,c|0,d|0)}function Mw(a,b){a=a|0;b=+b;g[a+68>>2]=b;return}function Nw(a,b){a=a|0;b=+b;iu(a,b);return}function Ow(b,c){b=b|0;c=c|0;a[b+124>>0]=c&1;return}function Pw(){var a=0;a=ir(12)|0;Zv(a);return a|0}function Qw(a,b){a=a|0;b=b|0;c[a+16>>2]=b<<16>>16;return}function Rw(a){a=a|0;return sb[c[(c[a>>2]|0)+48>>2]&127](a)|0}function Sw(a){a=a|0;Kt(a);c[a>>2]=4960;return}function Tw(b,c){b=b|0;c=c|0;a[b+291>>0]=c&1;return}function Uw(a){a=a|0;return qD(c[a+204>>2]|0)|0}function Vw(a){a=a|0;return +(+PE(+g[a+276>>2]))}function Ww(a,b){a=a|0;b=b|0;return +(+ye(a,b))}function Xw(a){a=a|0;return +(+PE(+g[a+124>>2]))}function Yw(){var a=0;a=ir(4)|0;oz(a);return a|0}function Zw(a,b,c,d){a=a|0;b=b|0;c=c|0;d=+d;return}function _w(a,b){a=a|0;b=+b;g[a+52>>2]=b;return}function $w(a,b){a=a|0;b=+b;fB(a,b);return}function ax(a,b){a=a|0;b=b|0;yg(a,b);return}function bx(a,b){a=a|0;b=+b;XA(a,b);return}function cx(a){a=a|0;return sb[c[(c[a>>2]|0)+28>>2]&127](a)|0}function dx(a,b){a=a|0;b=b|0;return Zs(a,b)|0}function ex(a,b){a=a|0;b=b|0;c[a+80>>2]=b;return}function fx(a,b,c,d){a=a|0;b=b|0;c=c|0;d=+d;return vb[a&7](b|0,c|0,+d)|0}function gx(a,b){a=a|0;b=+b;g[a+60>>2]=b;return}function hx(a,b){a=a|0;b=b|0;AA(a,b);return}function ix(a){a=a|0;return +(+PE(+g[a+236>>2]))}function jx(a){a=a|0;return +(+g[a+136>>2])}function kx(a){a=a|0;return Ix(c[a+68>>2]|0)|0}function lx(b){b=b|0;if((a[b>>0]|0)==1)b=0;else{a[b>>0]=1;b=1}return b|0}function mx(a,b){a=a|0;b=b|0;Vn(a,b);return}function nx(b,c){b=b|0;c=c|0;a[b+80>>0]=c&1;return}function ox(a){a=a|0;return +(+g[a+132>>2])}function px(a,b){a=a|0;b=b|0;return (c[a+136>>2]|0)+(b*284|0)|0}function qx(a,b){a=a|0;b=b|0;EA(a,b);return}function rx(a,b,c,d,e,f,g){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;R(39)}function sx(a){a=a|0;return qA(a)|0}function tx(a,b){a=a|0;b=+b;g[a+196>>2]=+Vq(b);return}function ux(a,b){a=a|0;b=+b;g[a+192>>2]=+Vq(b);return}function vx(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;Mb[a&127](b|0,c|0,d|0)}function wx(a,b){a=a|0;b=b|0;lp(a+92|0,b);return}function xx(a,b){a=a|0;b=+b;g[a+104>>2]=b;return}function yx(a){a=a|0;Qh(a);xF(a);return}function zx(a,b){a=a|0;b=+b;g[a+268>>2]=b;return}function Ax(a,b){a=a|0;b=+b;uu(a,b);return}function Bx(a){a=a|0;return +(+PE(+g[a+232>>2]))}function Cx(a){a=a|0;return +(+PE(+g[a+80>>2]))}function Dx(a,b){a=a|0;b=b|0;c[b+780>>2]=0;return}function Ex(a,b){a=a|0;b=b|0;Wi(a,b);return}function Fx(){c[6126]=1065353216;c[6127]=0;c[6128]=0;g[6129]=0.0;return}function Gx(a,b){a=a|0;b=b|0;YA(a,b);return}function Hx(a){a=a|0;return +(+ib[c[(c[a>>2]|0)+48>>2]&15](a))}function Ix(a){a=a|0;return sb[c[(c[a>>2]|0)+36>>2]&127](a)|0}function Jx(a){a=a|0;var b=0;b=l;l=l+a|0;l=l+15&-16;return b|0}function Kx(a,b){a=a|0;b=+b;g[a+92>>2]=b;return}function Lx(a){a=a|0;return +(+g[a+140>>2])}function Mx(b){b=b|0;return (a[b+32>>0]&1)!=0|0}function Nx(b,c){b=b|0;c=c|0;a[b+250>>0]=c&1;return}function Ox(a,b,d){a=a|0;b=b|0;d=d|0;if(!(c[a>>2]&32))Ui(b,d,a);return}function Px(a,b){a=a|0;b=+b;g[a+72>>2]=b;return}function Qx(a,b){a=a|0;b=b|0;iq(a,b);return}function Rx(a,b){a=a|0;b=b|0;return zu(b)|0}function Sx(a){a=a|0;return +(+PE(+g[a+228>>2]))}function Tx(a,b){a=a|0;b=+b;g[a+112>>2]=b;return}function Ux(a,b){a=a|0;b=b|0;yg(b,a);return}function Vx(a,b){a=a|0;b=+b;g[a+56>>2]=b;return}function Wx(a){a=a|0;return RD(a)|0}function Xx(a){a=a|0;return SD(a)|0}function Yx(a){a=a|0;return XD(a)|0}function Zx(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;R(17);return 0}function _x(a,b){a=a|0;b=b|0;Ex(a,b);return}function $x(a,b){a=a|0;b=b|0;c[a+52>>2]=b&1;return}function ay(a,b,c){a=+a;b=+b;c=+c;return +(+qF(+oy(a,b,c)))}function by(a,b,c,d){a=a|0;b=b|0;c=+c;d=d|0;Gb[a&15](b|0,+c,d|0)}function cy(a,b){a=a|0;b=b|0;if(!a)a=0;else a=ij(a,b)|0;return a|0}function dy(a,b){a=a|0;b=+b;g[a+220>>2]=b;return}function ey(a,b){a=a|0;b=+b;Iu(a,b);return}function fy(a){a=a|0;return wz(c[a+220>>2]|0)|0}function gy(a,b){a=a|0;b=+b;g[a+100>>2]=b;return}function hy(b){b=b|0;return (a[b+124>>0]&1)!=0|0}function iy(a,b){a=a|0;b=+b;g[a+28>>2]=b;return}function jy(b,c){b=b|0;c=c|0;a[b+24>>0]=c&1;return}function ky(a){a=a|0;return ~~+g[a+56>>2]|0}function ly(b,c){b=b|0;c=c|0;a[b+288>>0]=c&1;return}function my(a,b,c,d){a=a|0;b=b|0;c=c|0;d=+d;Jb[a&7](b|0,c|0,+d)}function ny(a,b){a=a|0;b=+b;g[a+224>>2]=b;return}function oy(a,b,c){a=+a;b=+b;c=+c;return +(+Tv(a,b,c,a,b,c))}function py(a){a=+a;if(!(a<-1.0)){if(a>1.0)a=1.0}else a=-1.0;return +(+G(+a))}function qy(a){a=a|0;return +(+g[a+120>>2])}function ry(b,c){b=b|0;c=c|0;a[b+16>>0]=c&1;return}function sy(a,b){a=a|0;b=b|0;c[a+20>>2]=b;return}function ty(a){a=a|0;return hB(a)|0}function uy(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=+d;e=e|0;f=f|0;R(4);return 0.0}function vy(a,b){a=a|0;b=+b;g[a+204>>2]=b;return}function wy(a,b){a=a|0;b=+b;g[a+208>>2]=b;return}function xy(a){a=a|0;return +(+g[a+64>>2])}function yy(a,b){a=a|0;b=+b;g[a+20>>2]=b;return}function zy(a){a=a|0;return +(+g[a+116>>2])}function Ay(a){a=a|0;return +(+g[a+128>>2])}function By(a){a=a|0;return +(+g[a+36>>2])}function Cy(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return}function Dy(a,b,c){a=a|0;b=b|0;c=+c;lm(a,b,1.0/c);return}function Ey(a){a=a|0;xe(a);xF(a);return}function Fy(a,b){a=a|0;b=b|0;var c=0;c=ez(a|0)|0;return ((b|0)==0?a:c)|0}function Gy(a){a=a|0;return +(+g[a+68>>2])}function Hy(a,b){a=a|0;b=+b;g[a+216>>2]=b;return}function Iy(b){b=b|0;return (a[b+80>>0]&1)!=0|0}function Jy(a){a=a|0;if(!a)return;Qv(a);return}function Ky(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return me(a,b,c,d,0)|0}function Ly(a,b){a=a|0;b=+b;g[a+248>>2]=b;return}function My(b,c){b=b|0;c=c|0;a[b+260>>0]=c&1;return}function Ny(a){a=a|0;return +(+g[a+52>>2])}function Oy(a){a=a|0;return iE(a)|0}function Py(b,c){b=b|0;c=c|0;a[b+25>>0]=c&1;return}function Qy(a,b){a=a|0;b=b|0;c[a+72>>2]=b;return}function Ry(a){a=a|0;Wr(a,+DB(a))|0;return}function Sy(a){a=a|0;return +(+kE(+g[a+12>>2]))}function Ty(a,b){a=a|0;b=b|0;c[a+8>>2]=b;return}function Uy(a){a=a|0;return +(+g[a+60>>2])}function Vy(a){a=a|0;return fE(a)|0}function Wy(a,b){a=a|0;b=b|0;c[a+220>>2]=b;return}function Xy(a){a=a|0;return AF(c[a+84>>2]|0)|0}function Yy(a,b){a=a|0;b=b|0;return +(+Eq(a,b))}function Zy(a,b){a=a|0;b=+b;g[a+40>>2]=b;return}function _y(a){a=a|0;return c[a+8>>2]&65535|0}function $y(b,c){b=b|0;c=c|0;a[b+26>>0]=c&1;return}function az(a,b){a=a|0;b=+b;g[a+32>>2]=b;return}function bz(b,c){b=b|0;c=c|0;a[b+84>>0]=c&1;return}function cz(a){a=a|0;uh(a);xF(a);return}function dz(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;R(38)}function ez(a){a=a|0;return (a&255)<<24|(a>>8&255)<<16|(a>>16&255)<<8|a>>>24|0}function fz(a,b){a=a|0;b=b|0;rC(a,b);return}function gz(a){a=a|0;return lE(a)|0}function hz(a){a=a|0;return AF(c[a+88>>2]|0)|0}function iz(a){a=a|0;return vB(a)|0}function jz(a){a=a|0;return (c[a+108>>2]|0)+4|0}function kz(a){a=a|0;return AF(c[a+780>>2]|0)|0}function lz(a,b){a=a|0;b=b|0;c[a+4>>2]=b;return}function mz(a){a=a|0;return c[a+12>>2]&65535|0}function nz(a){a=a|0;return c[a+80>>2]|0}function oz(a){a=a|0;ID(a);c[a>>2]=5104;return}function pz(a,b,c){a=a|0;b=b|0;c=c|0;return ub[a&31](b|0,c|0)|0}function qz(a,b){a=a|0;b=+b;g[a+244>>2]=b;return}function rz(a,b){a=a|0;b=+b;g[a+240>>2]=b;return}function sz(a){a=a|0;return +(+g[a+104>>2])}function tz(a,b){a=a|0;b=b|0;return kk(a,b)|0}function uz(a){a=a|0;return pE(a)|0}function vz(a){a=a|0;return c[a+16>>2]&65535|0}function wz(a){a=a|0;a=AF(a)|0;return (a|0)!=2&(a|0)!=5|0}function xz(a){a=a|0;Ni(a);xF(a);return}function yz(b,c){b=b|0;c=c|0;a[b+524>>0]=c&1;return}function zz(a){a=a|0;c[a+4>>2]=(c[a+4>>2]|0)+-1;return}function Az(a,b){a=a|0;b=b|0;return a+(b*80|0)|0}function Bz(a,b){a=a|0;b=+b;g[a+272>>2]=b;return}function Cz(a,b){a=a|0;b=+b;g[a+212>>2]=b;return}function Dz(a,b){a=a|0;b=+b;g[a+228>>2]=b;return}function Ez(a){a=a|0;return +(+g[a+268>>2])}function Fz(a,b){a=a|0;b=b|0;return Sm(a,b)|0}function Gz(a,b){a=a|0;b=b|0;return Rm(a,b)|0}function Hz(a,b){a=a|0;b=b|0;return +(+wn(a,b))}function Iz(a){a=a|0;return +(+av(a))}function Jz(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=+d;e=e|0;f=f|0;R(32)}function Kz(a,b){a=a|0;b=+b;g[a+252>>2]=b;return}function Lz(a){a=a|0;return +(+g[a+96>>2])}function Mz(a){a=a|0;return (c[a+52>>2]|0)!=0|0}function Nz(a,b){a=a|0;b=+b;g[a+276>>2]=b;return}function Oz(a,b){a=a|0;b=b|0;c[a+84>>2]=b;return}function Pz(a){a=a|0;return AF(c[a+188>>2]|0)|0}function Qz(a){a=a|0;return +(+g[a+92>>2])}function Rz(a){a=a|0;return AF(c[a+120>>2]|0)|0}function Sz(b){b=b|0;return (a[b+24>>0]&1)!=0|0}function Tz(b,c){b=b|0;c=c|0;a[b+552>>0]=c&1;return}function Uz(a,b,c){a=a|0;b=b|0;c=c|0;return 0}function Vz(a){a=a|0;return +(+g[a+72>>2])}function Wz(a){a=a|0;return +(+g[a+112>>2])}function Xz(a){a=a|0;Pi(a);xF(a);return}function Yz(a,b){a=a|0;b=b|0;return a+4+(b*192|0)|0}function Zz(b,c){b=b|0;c=c|0;a[b+736>>0]=c&1;return}function _z(a,b){a=a|0;b=b|0;c[a+204>>2]=b;return}function $z(a,b){a=a|0;b=b|0;c[a+88>>2]=b;return}function aA(a,b,c,d,e,f){a=a|0;b=+b;c=+c;d=d|0;e=e|0;f=f|0;R(23)}function bA(a,b){a=a|0;b=+b;g[a+232>>2]=b;return}function cA(a,b){a=a|0;b=+b;g[a+280>>2]=b;return}function dA(a,b){a=a|0;b=+b;g[a+236>>2]=b;return}function eA(a){a=a|0;return +(+g[a+272>>2])}function fA(a){a=a|0;return +(+g[a+56>>2])}function gA(a){a=a|0;return AF(c[a+192>>2]|0)|0}function hA(a){a=a|0;return AF(c[a+204>>2]|0)|0}function iA(a){a=a|0;return AF(c[a+108>>2]|0)|0}function jA(a){a=a|0;return AF(c[a+112>>2]|0)|0}function kA(a,b){a=a|0;b=+b;return Wr(a,b)|0}function lA(a){a=a|0;return AF(c[a+776>>2]|0)|0}function mA(a){a=a|0;return AF(c[a+772>>2]|0)|0}function nA(b){b=b|0;return (a[b+16>>0]&1)!=0|0}function oA(a,b){a=a|0;b=b|0;c[a>>2]=b;return}function pA(a){a=a|0;if(a>>>0>4294963200){c[6629]=0-a;a=-1}return a|0}function qA(a){a=a|0;return AF(c[a+328>>2]|0)|0}function rA(b,c){b=b|0;c=c|0;a[b+21>>0]=c&1;return}function sA(a,b){a=a|0;b=+b;g[a+684>>2]=b;return}function tA(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;R(16);return 0}function uA(a){a=a|0;return AF(c[a+24>>2]|0)|0}function vA(a){a=a|0;return AF(c[a+68>>2]|0)|0}function wA(a){a=a|0;return +(+g[a+28>>2])}function xA(a){a=a|0;return (a&1)!=0|0}function yA(a,b){a=a|0;b=+b;g[a+188>>2]=b;return}function zA(a,b){a=a|0;b=+b;g[a+184>>2]=b;return}function AA(a,b){a=a|0;b=b|0;c[a+256>>2]=b;return}function BA(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;R(6);return 0.0}function CA(a){a=a|0;return +(+g[a+220>>2])}function DA(a){a=a|0;return +(+g[a+100>>2])}function EA(b,c){b=b|0;c=c|0;a[b+737>>0]=c&1;return}function FA(a){a=a|0;zz(a);return}function GA(a,b){a=a|0;b=+b;g[a+256>>2]=b;return}function HA(a){a=a|0;return +(+g[a+224>>2])}function IA(a,b){a=a|0;b=b|0;return lq(a,b)|0}function JA(a,b){a=a|0;b=b|0;return kq(a,b)|0}function KA(a){a=a|0;return AF(c[a+256>>2]|0)|0}function LA(a){a=a|0;return AF(c[a+540>>2]|0)|0}function MA(a){a=a|0;return AF(c[a+116>>2]|0)|0}function NA(a){a=a|0;return +(+g[a+44>>2])}function OA(a){a=a|0;if(!a)return;xF(a);return}function PA(a){a=a|0;return (c[a+48>>2]|0)==1|0}function QA(a){a=a|0;Qi(a);xF(a);return}function RA(a){a=a|0;hj(a);xF(a);return}function SA(a,b){a=a|0;b=b|0;return (a|0)==(b|0)|0}function TA(a,b){a=a|0;b=b|0;if(!n){n=a;o=b}}function UA(b){b=b|0;return (a[b+260>>0]&1)!=0|0}function VA(b){b=b|0;return (a[b+25>>0]&1)!=0|0}function WA(a){a=a|0;return (c[a+96>>2]|0)+4|0}function XA(a,b){a=a|0;b=+b;g[a+440>>2]=b;return}function YA(a,b){a=a|0;b=b|0;c[a+264>>2]=b;return}function ZA(a,b,c){a=a|0;b=b|0;c=c|0;Ib[a&127](b|0,c|0)}function _A(a,b,c){a=a|0;b=b|0;c=+c;return +jb[a&1](b|0,+c)}function $A(a,b,c,d,e){a=a|0;b=b|0;c=+c;d=d|0;e=e|0;R(2);return 0.0}function aB(a){a=a|0;return +(+g[a+276>>2])}function bB(a){a=a|0;return +(+g[a+208>>2])}function cB(a){a=a|0;return +(+g[a+20>>2])}function dB(a){a=a|0;return AF(c[a+264>>2]|0)|0}function eB(a){a=a|0;return +(+yt(a))}function fB(a,b){a=a|0;b=+b;g[a+96>>2]=b;return}function gB(a){a=a|0;return AF(c[a+56>>2]|0)|0}function hB(a){a=a|0;return AF(c[a+20>>2]|0)|0}function iB(a){a=a|0;return +(+g[a+216>>2])}function jB(a,b){a=a|0;b=+b;eD(a,b);return}function kB(b){b=b|0;return (a[b+26>>0]&1)!=0|0}function lB(a){a=a|0;return c[a+20>>2]|0}function mB(b){b=b|0;return (a[b+84>>0]&1)!=0|0}function nB(a){a=a|0;return +(+g[a+32>>2]*+g[a+16>>2])}function oB(a){a=a|0;return +(+g[a+248>>2])}function pB(a){a=a|0;return xE(a)|0}function qB(a){a=a|0;return +(+g[a+8>>2])}function rB(a,b,c){a=a|0;b=b|0;c=+c;return 0}function sB(a){a=a|0;return +(+g[a+204>>2])}function tB(a){a=a|0;bp(a);return}function uB(a){a=a|0;return AF(c[a+564>>2]|0)|0}function vB(a){a=a|0;return AF(c[a+128>>2]|0)|0}function wB(a){a=a|0;return c[a+92>>2]|0}function xB(a,b){a=a|0;b=+b;rD(a,b);return}function yB(a,b){a=a|0;b=+b;sD(a,b);return}function zB(a,b){a=a|0;b=+b;HD(a,b);return}function AB(a){a=a|0;return +(+g[a+12>>2])}function BB(a){a=a|0;return +(+g[a+40>>2])}function CB(a){a=a|0;return (c[a+52>>2]|0)+4|0}function DB(a){a=a|0;return +(+qF(+RC(a)))}function EB(a){a=a|0;tE(a);c[a>>2]=5276;return}function FB(a){a=a|0;return +(+g[a+32>>2])}function GB(a,b,c){a=a|0;b=b|0;c=+c;Eb[a&31](b|0,+c)}function HB(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;R(37)}function IB(a){a=a|0;return +(+g[(iF(a)|0)>>2])}function JB(a){a=a|0;return +(+g[(jF(a)|0)>>2])}function KB(a){a=a|0;return +(+g[(hF(a)|0)>>2])}function LB(a){a=a|0;return EE(a)|0}function MB(a){a=a|0;Ry(a);return}function NB(a){a=a|0;return c[a+8>>2]|0}function OB(a){a=a|0;return c[a+216>>2]|0}function PB(a){a=a|0;return +(+g[a+244>>2])}function QB(a){a=a|0;return +(+g[a+240>>2])}function RB(a){a=a|0;return +(+RC(a))}function SB(a){a=a|0;return +(+g[a+4>>2])}function TB(a){a=a|0;return c[a+228>>2]|0}function UB(a){a=a|0;c[a+232>>2]=0;return}function VB(a){a=a|0;Gv(a);return}function WB(a,b,c){a=a|0;b=b|0;c=c|0;return}function XB(a,b){a=a|0;b=+b;g[a+76>>2]=b;return}function YB(a){a=a|0;return AF(c[a+4>>2]|0)|0}function ZB(a){a=a|0;return +(+g[a+212>>2])}function _B(a){a=a|0;return +(+g[a+228>>2])}function $B(a){a=a|0;return jF(a)|0}function aC(a){a=a|0;return a+56|0}function bC(a){a=a|0;return a+76|0}function cC(a){a=a|0;return c[a+24>>2]|0}function dC(a){a=a|0;Hu(a);return}function eC(a){a=a|0;return c[a+16>>2]|0}function fC(a,b){a=a|0;b=+b;g[a+16>>2]=b;return}function gC(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=+e;R(34)}function hC(a,b,c,d,e){a=a|0;b=b|0;c=+c;d=d|0;e=e|0;R(29)}function iC(a){a=a|0;return +(+g[a+252>>2])}function jC(a){a=a|0;return +(+DB(a))}function kC(a){a=a|0;return c[a+4>>2]|0}function lC(a){a=a|0;return a+96|0}function mC(a){a=a|0;return a+116|0}function nC(){var a=0;a=c[6632]|0;c[6632]=a+0;return a|0}function oC(a){a=a|0;return (a&3|0)!=0|0}function pC(a){a=a|0;return ((a|0)==0?1:a<<1)|0}function qC(a,b){a=a|0;b=+b;g[a+48>>2]=b;return}function rC(a,b){a=a|0;b=b|0;c[a+564>>2]=b;return}function sC(a){a=a|0;return a+156|0}function tC(a){a=a|0;return c[a+88>>2]|0}function uC(a){a=a|0;return a+44|0}function vC(a){a=a|0;return a+88|0}function wC(a){a=a|0;return a+108|0}function xC(a){a=a|0;return c[a+96>>2]|0}function yC(){var a=0;a=c[2797]|0;c[2797]=a+0;return a|0}function zC(a){a=a|0;return 644}function AC(a){a=a|0;gh(a);xF(a);return}function BC(a){a=a|0;yh(a);xF(a);return}function CC(a){a=a|0;qi(a);xF(a);return}function DC(a){a=a|0;return +(+g[a+232>>2])}function EC(a){a=a|0;return +(+g[a+280>>2])}function FC(a){a=a|0;return +(+g[a+236>>2])}function GC(a){a=a|0;return a+40|0}function HC(a){a=a|0;return a+60|0}function IC(a){a=a|0;return a+100|0}function JC(a){a=a|0;return 348}function KC(a){a=a|0;return c[a+12>>2]|0}function LC(a){a=a|0;return a+148|0}function MC(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;R(15);return 0}function NC(a){a=a|0;su(a);return}function OC(a){a=a|0;return a+132|0}function PC(a,b){a=a|0;b=b|0;return a+(b<<2)|0}function QC(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;R(5);return 0.0}function RC(a){a=a|0;return +(+wn(a,a))}function SC(a){a=a|0;return (a?31-(Q(a^a-1)|0)|0:32)|0}function TC(a){a=a|0;return +(+g[a+256>>2])}function UC(a){a=a|0;return +(+g[(AF(a)|0)>>2])}function VC(a){a=a|0;return a+348|0}function WC(a){a=a|0;return +(+g[a>>2])}function XC(a){a=a|0;return c[a>>2]|0}function YC(a){a=a|0;return (a|0)!=0|0}function ZC(a,b){a=a|0;b=b|0;return sb[a&127](b|0)|0}function _C(a){a=a|0;return a+24|0}function $C(a){a=a|0;La(a|0)|0;yo()}function aD(a){a=a|0;return c[a+1304>>2]|0}function bD(a){a=a|0;return a+64|0}function cD(a){a=a|0;return c[a+332>>2]|0}function dD(a){a=a|0;return (a&2|0)!=0|0}function eD(a,b){a=a|0;b=+b;g[a+12>>2]=b;return}function fD(a){a=a|0;return a+172|0}function gD(a){a=a|0;return 252}function hD(a){a=a|0;return +(+g[a+48>>2])}function iD(a,b,c,d){a=a|0;b=+b;c=c|0;d=+d;R(11);return 0}function jD(a){a=a|0;return a+52|0}function kD(a){a=a|0;return 28}function lD(a){a=a|0;return c[a+100>>2]|0}function mD(a){a=a|0;return c[a+72>>2]|0}function nD(a,b){a=a|0;b=b|0;return +ib[a&15](b|0)}function oD(a){a=a|0;return a+112|0}function pD(a){a=a|0;return 212}function qD(a){a=a|0;return (a&1|0)!=0|0}function rD(a,b){a=a|0;b=+b;g[a+8>>2]=b;return}function sD(a,b){a=a|0;b=+b;g[a+4>>2]=b;return}function tD(a){a=+a;return a<1.0|0}function uD(a,b){a=a|0;b=b|0;return 1}function vD(a){a=a|0;return c[a+300>>2]|0}function wD(a,b){a=a|0;b=b|0;l=a;m=b}function xD(a){a=a|0;return a+188|0}function yD(a){a=a|0;return 204}function zD(a){a=a|0;return c[a+748>>2]|0}function AD(a,b){a=a|0;b=b|0;return}function BD(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;R(33)}function CD(a){a=a|0;return a+68|0}function DD(a){a=a|0;return a+36|0}function ED(a){a=a|0;return 220}function FD(a){a=a|0;return 264}function GD(a){a=a|0;return +(+g[a+76>>2])}function HD(a,b){a=a|0;b=+b;g[a>>2]=b;return}function ID(a){a=a|0;c[a>>2]=5132;return}function JD(a){a=a|0;c[a>>2]=9500;return}function KD(a){a=a|0;return a+16|0}function LD(a){a=a|0;return 52}function MD(a){a=a|0;return 68}function ND(a){a=a|0;return 84}function OD(a){a=a|0;return +(+g[a+16>>2])}function PD(a,b){a=a|0;b=b|0;return a+(b<<4)|0}function QD(a){a=a|0;return AF(a)|0}function RD(a){a=a|0;return a+316|0}function SD(a){a=a|0;return a+300|0}function TD(a,b){a=a|0;b=b|0;Db[a&255](b|0)}function UD(a,b,c,d){a=a|0;b=b|0;c=c|0;d=+d;R(31)}function VD(a,b,c,d){a=a|0;b=b|0;c=+c;d=d|0;R(28)}function WD(a,b,c,d){a=a|0;b=+b;c=c|0;d=d|0;R(25)}function XD(a){a=a|0;return a+32|0}function YD(a){a=a|0;return 24}function ZD(a,b){a=a|0;b=b|0;return us(a,b)|0}function _D(a){a=a|0;return a+72|0}function $D(a){a=a|0;Qv(a);return}function aE(a){a=a|0;xF(a+-4|0);return}function bE(a){a=a|0;eh(a);return}function cE(a){a=a|0;return 496}function dE(a,b,c){a=a|0;b=b|0;c=c|0;R(14);return 0}function eE(a){a=a|0;return a+80|0}function fE(a){a=a|0;return a+388|0}function gE(a){a=a|0;return 60}function hE(a){a=a|0;c[a>>2]=5208;return}function iE(a){a=a|0;return a+28|0}function jE(a,b,c){a=a|0;b=b|0;c=c|0;R(3);return 0.0}function kE(a){a=+a;return +(+py(a)*2.0)}function lE(a){a=a|0;return a+372|0}function mE(a){a=a|0;c[a>>2]=5920;return}function nE(a){a=a|0;return (a&255)<<8|a>>8&255|0}function oE(a,b,c){a=a|0;b=b|0;c=+c;R(13);return 0}function pE(a){a=a|0;return a+92|0}function qE(a){a=a|0;return 17722}function rE(a){a=a|0;return 17574}function sE(a){a=a|0;return 2}function tE(a){a=a|0;c[a>>2]=5184;return}function uE(){return wr()|0}function vE(a,b){a=a|0;b=+b;return}function wE(a){a=a|0;return 16906}function xE(a){a=a|0;return a+440|0}function yE(a,b,c){a=a|0;b=b|0;c=c|0;R(30)}function zE(a){a=a|0;return 18310}function AE(a){a=a|0;return 0}function BE(a,b){a=+a;b=b|0;return +(+al(a,b))}function CE(){return ir(64)|0}function DE(a){a=a|0;return 18079}function EE(a){a=a|0;return a+48|0}function FE(a){a=a|0;return 17478}function GE(a){a=a|0;return 1}function HE(a,b,c){a=a|0;b=b|0;c=+c;R(27)}function IE(a,b,c){a=a|0;b=+b;c=c|0;R(24)}function JE(a){a=a|0;return 17693}function KE(a){a=a|0;return 17664}function LE(a){a=a|0;return 3}function ME(a){a=a|0;return ul(a,26492)|0}function NE(a){a=a|0;return (a+-48|0)>>>0<10|0}function OE(a){a=a|0;return 18748}function PE(a){a=+a;return +a}function QE(a){a=a|0;return 17636}function RE(a){a=a|0;return 17352}function SE(a){a=a|0;return 17240}function TE(a){a=a|0;return 17213}function UE(a){a=a|0;return 17183}function VE(a){a=a|0;return 8}function WE(a){a=a|0;xF(a);return}function XE(a){a=+a;return +(a%6.2831854820251465)}function YE(a){a=a|0;return 18033}function ZE(a,b){a=a|0;b=b|0;R(12);return 0}function _E(a){a=a|0;return 17414}function $E(a){a=a|0;return 17435}function aF(a){a=a|0;return 6}function bF(a){a=a|0;return 12}function cF(){return 4}function dF(a){a=a|0;return 17395}function eF(a){a=a|0;return 16731}function fF(a){a=a|0;bb()}function gF(a,b){a=a|0;b=+b;R(1);return 0.0}function hF(a){a=a|0;return a+12|0}function iF(a){a=a|0;return a+8|0}function jF(a){a=a|0;return a+4|0}function kF(a){a=a|0;Cb[a&3]()}function lF(){return 2}function mF(){return 1}function nF(){return 5}function oF(){return 3}function pF(){Na()}function qF(a){a=+a;return +(+B(+a))}function rF(a){a=+a;return +(+E(+a))}function sF(a){a=+a;return +(+D(+a))}function tF(a,b){a=a|0;b=b|0;R(26)}function uF(a){a=a|0;return}function vF(a,b){a=a|0;b=+b;R(22)}function wF(a){a=a|0;l=a}function xF(a){a=a|0;gd(a);return}function yF(a){a=a|0;y=a}function zF(a){a=a|0;R(10);return 0}function AF(a){a=a|0;return a|0}function BF(a){a=a|0;R(0);return 0.0}function CF(){return y|0}function DF(){return l|0}function EF(a){a=a|0;R(21)}function FF(){return 0}function GF(){R(20)}

// EMSCRIPTEN_END_FUNCS
var ib=[BF,cn,hD,OD,GD,Io,Ho,Io,nB,BF,BF,BF,BF,BF,BF,BF];var jb=[gF,ru];var kb=[$A,Ki,Ki,$A];var lb=[jE,Dj,gi,Xi,Ji,Gg,ol,Fi,wj,sl,Am,Bi,jh,ll,Lk,Xk,Kf,Nf,Jf,jE,jE,jE,jE,jE,jE,jE,jE,jE,jE,jE,jE,jE];var mb=[uy,Vi,Vi,uy];var nb=[QC,Gc];var ob=[BA,vs,vs,vs,vs,He,Gr,Hd,Ne,vs,BA,BA,BA,BA,BA,BA];var pb=[xu,no];var qb=[qt,dc,rj,qt];var rb=[Cs,fl,Yc,Cs];var sb=[zF,Rw,zq,IC,pD,zC,gD,aD,JC,ED,zD,ND,cD,GE,yD,vD,LD,mD,OB,TB,sE,cE,wB,wB,eC,eC,jF,AE,GE,xC,xC,eC,eC,jF,NB,AE,KC,$s,mD,mD,FD,NB,eC,KD,eF,LD,aF,VE,bF,aF,CB,wE,gE,UE,gE,AE,TE,SE,eE,RE,YD,dF,gE,_E,$E,FE,MD,lD,lD,AE,WA,rE,AE,AE,AE,QE,gE,KE,JE,oD,qE,bF,ND,YE,_D,DE,LD,cC,PA,kD,zE,OE,sE,LE,LE,GE,eC,hr,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF,zF];var tb=[iD,sh];var ub=[ZE,Xp,Yp,$p,Jw,Jw,Ml,Em,uD,uD,Jm,Wo,Bv,gm,jr,Sj,Yo,mn,nj,oh,Yb,ZE,ZE,ZE,ZE,ZE,ZE,ZE,ZE,ZE,ZE,ZE];var vb=[oE,wl,rB,rB,Re,oE,oE,oE];var wb=[dE,cm,mo,Jg,dd,ig,Oe,Ge,Ll,Ng,Og,wf,Uz,Uz,Ce,zi,uf,Gk,Oo,pe,Ii,Yi,Ej,Af,mj,Ve,oj,Lg,kj,um,$d,Fj,jd,zf,Lf,lh,Qm,Pj,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE,dE];var xb=[MC,Jl,Pg,Uu,Je,ik,dk,Nm,yf,Gm,On,pl,uk,pk,Ch,Bc,xt,Hj,MC,MC,MC,MC,MC,MC,MC,MC,MC,MC,MC,MC,MC,MC];var yb=[tA,gk];var zb=[Zx,vd,ed,Oc];var Ab=[vu,Vc,ff,vu];var Bb=[xs,kc,Cc,xs];var Cb=[GF,pF,Si,Ir];var Db=[EF,uF,WE,uF,fF,zp,uw,uF,fF,uF,WE,uF,fF,uF,WE,uF,fF,uF,$D,uF,WE,uF,fF,vp,bw,uF,WE,uF,WE,rn,Dm,WE,mE,pt,Uc,mE,pt,uF,pt,Be,Cl,pt,pt,pt,vc,pt,ee,$e,zr,UB,pt,uF,fF,Sf,As,nl,$r,Xg,Pl,ng,Zl,je,jk,WE,Ni,xz,Zj,xk,gh,AC,WE,bi,Us,uF,Us,Qn,_o,yh,BC,uF,uF,WE,WE,WE,Oi,_r,uF,WE,WE,Nn,Ro,WE,In,Om,qi,CC,id,uF,WE,uF,WE,uF,WE,WE,WE,WE,uF,WE,uF,aE,WE,WE,WE,WE,WE,WE,uF,WE,xe,Ey,uF,WE,WE,WE,WE,WE,WE,WE,WE,WE,WE,uF,WE,Yj,vk,Ti,ss,WE,Pi,Xz,So,Tn,Qo,Sn,uF,WE,io,Kn,Wn,ln,uF,WE,WE,WE,uF,Qv,Qv,Qv,Pk,at,Rh,Qv,Qv,Qv,$k,Sk,fF,Kn,uF,WE,Qv,Qv,Qv,JD,Ys,bE,jt,WE,WE,fF,Qv,uF,Qv,bh,it,uF,Qv,WE,WE,uF,WE,WE,WE,uF,WE,WE,WE,WE,fF,Kn,WE,eh,jt,Zo,Yn,WE,uh,cz,WE,Qh,yx,WE,Hn,Mm,WE,po,dn,uF,WE,hj,RA,WE,WE,WE,To,Un,Qi,QA,ah,Ss,En,Im,uF,WE,uF,uF,WE,WE,sq,EF,EF,EF,EF,EF,EF,EF,EF,EF,EF,EF,EF,EF,EF,EF,EF,EF];var Eb=[vF,mf,bd,pg,mi,Rc,Bf,qn,Td,uc,vE,mk,fC,vE,XB,qC,mk,qC,vF,vF,vF,vF,vF,vF,vF,vF,vF,vF,vF,vF,vF,vF];var Fb=[aA];var Gb=[IE,Bk,Zr,lk,xi,Hh,Vh,Ei,Zr,vn,Zr,Zr,IE,IE,IE,IE];var Hb=[WD];var Ib=[tF,Vo,mq,AD,AD,nw,cw,AD,qk,aj,pj,Bj,Ci,ly,rp,dh,Wm,sj,Wc,xf,Sc,Mh,Hi,Bg,si,mc,Vr,Fe,we,oc,Qy,oo,Ze,Cj,vi,Hk,ri,dq,mg,Nj,Mn,Xu,Gu,Xu,Gu,zc,_b,AD,Pr,jm,Fh,Md,_l,AD,AD,AD,Tc,Qg,fs,Mr,Mr,tv,Ru,De,bj,Dx,Yl,om,ch,np,AD,$n,ih,AD,ti,Wh,Wh,qj,gr,rm,Ag,tl,ql,fk,rq,Ed,Xl,Xj,es,cs,ds,to,_n,Ln,qj,rq,yp,ad,$c,Qp,AD,AD,Hg,Ig,$f,Wh,$l,fp,Fl,AD,ci,Xh,Wh,AD,AD,tF,tF,tF,tF,tF,tF,tF,tF,tF,tF,tF,tF,tF];var Jb=[HE,Zp,Oj,gc,et,Ut,HE,HE];var Kb=[VD,rl,Ih,Li,Yk,_m,Gh,VD];var Lb=[hC];var Mb=[yE,WB,Vg,ze,WB,WB,Nh,_c,qm,WB,WB,WB,WB,oi,Wg,bn,WB,Xn,fn,kn,Zk,WB,Tu,Su,xh,_g,le,fi,Mk,Bm,Vk,Ik,hk,Cg,Ur,oe,Vd,Vd,xj,mh,WB,Ug,wi,xj,Di,Pm,xj,Sg,WB,Ai,Al,Bl,zl,qg,Zi,tr,bm,mm,WB,WB,WB,WB,wk,jj,Co,cd,WB,WB,WB,WB,ph,Rg,qd,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE,yE];var Nb=[UD,cc,Zw,ae,sd,yl,Wk,Zw,ji,Wd,UD,UD,UD,UD,UD,UD];var Ob=[Jz];var Pb=[BD,$b,sc,Xe,pr,sg,ls,fm,hi,fm,ak,en,Of,ef,Zd,Ar,Dq,Ff,dl,Rj,$h,Nk,cf,fj,Gi,wg,Bd,th,Eg,xg,Hr,fh,Kg,wh,lj,Cy,nh,Cy,Cy,Yh,$h,Wj,Qj,Uj,hh,tc,Id,Ud,Xf,rk,_q,Bn,Ef,Kc,yk,_h,ii,Hr,dj,pp,ks,gj,Pe,ie,ao,pm,Aj,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD,BD];var Qb=[gC,ht];var Rb=[Rr];var Sb=[Hs];var Tb=[HB,be,ld,ws,Tg,_e,wd,qc,df,bc,xc,nc,ne,Zb,Dc,yj,Zg,ve,HB,HB,HB,HB,HB,HB,HB,HB,HB,HB,HB,HB,HB,HB];var Ub=[dz,Ad,ek,Ck,pn,Vl,Eh,dz];var Vb=[rx,tf,_f,rx];var Wb=[Zt,ki];var Xb=[Ts,Ok,Ok,Ts];return{__GLOBAL__sub_I_btConeTwistConstraint_cpp:Fx,__GLOBAL__sub_I_btQuickprof_cpp:Ec,___cxa_can_catch:Ko,___cxa_is_pointer_type:tw,___muldi3:Iq,___udivdi3:Ky,_bitshift64Lshr:js,_bitshift64Shl:Yr,_emscripten_bind_AllConvexResultCallback_AllConvexResultCallback_2:vr,_emscripten_bind_AllConvexResultCallback___destroy___0:pu,_emscripten_bind_AllConvexResultCallback_get_m_closestHitFraction_0:SB,_emscripten_bind_AllConvexResultCallback_get_m_collisionFilterGroup_0:_y,_emscripten_bind_AllConvexResultCallback_get_m_collisionFilterMask_0:mz,_emscripten_bind_AllConvexResultCallback_get_m_collisionObjects_0:KD,_emscripten_bind_AllConvexResultCallback_get_m_convexFromWorld_0:DD,_emscripten_bind_AllConvexResultCallback_get_m_convexToWorld_0:jD,_emscripten_bind_AllConvexResultCallback_get_m_hitFractions_0:wC,_emscripten_bind_AllConvexResultCallback_get_m_hitNormalWorld_0:CD,_emscripten_bind_AllConvexResultCallback_get_m_hitPointWorld_0:vC,_emscripten_bind_AllConvexResultCallback_hasHit_0:Pv,_emscripten_bind_AllConvexResultCallback_set_m_closestHitFraction_1:sD,_emscripten_bind_AllConvexResultCallback_set_m_collisionFilterGroup_1:sw,_emscripten_bind_AllConvexResultCallback_set_m_collisionFilterMask_1:Iw,_emscripten_bind_AllConvexResultCallback_set_m_collisionObjects_1:ut,_emscripten_bind_AllConvexResultCallback_set_m_convexFromWorld_1:cq,_emscripten_bind_AllConvexResultCallback_set_m_convexToWorld_1:Rp,_emscripten_bind_AllConvexResultCallback_set_m_hitFractions_1:$u,_emscripten_bind_AllConvexResultCallback_set_m_hitNormalWorld_1:mu,_emscripten_bind_AllConvexResultCallback_set_m_hitPointWorld_1:qu,_emscripten_bind_AllHitsRayResultCallback_AllHitsRayResultCallback_2:or,_emscripten_bind_AllHitsRayResultCallback___destroy___0:pu,_emscripten_bind_AllHitsRayResultCallback_get_m_closestHitFraction_0:SB,_emscripten_bind_AllHitsRayResultCallback_get_m_collisionFilterGroup_0:mz,_emscripten_bind_AllHitsRayResultCallback_get_m_collisionFilterMask_0:vz,_emscripten_bind_AllHitsRayResultCallback_get_m_collisionObject_0:NB,_emscripten_bind_AllHitsRayResultCallback_get_m_collisionObjects_0:_C,_emscripten_bind_AllHitsRayResultCallback_get_m_hitFractions_0:mC,_emscripten_bind_AllHitsRayResultCallback_get_m_hitNormalWorld_0:bC,_emscripten_bind_AllHitsRayResultCallback_get_m_hitPointWorld_0:lC,_emscripten_bind_AllHitsRayResultCallback_get_m_rayFromWorld_0:uC,_emscripten_bind_AllHitsRayResultCallback_get_m_rayToWorld_0:HC,_emscripten_bind_AllHitsRayResultCallback_hasHit_0:mw,_emscripten_bind_AllHitsRayResultCallback_set_m_closestHitFraction_1:sD,_emscripten_bind_AllHitsRayResultCallback_set_m_collisionFilterGroup_1:Iw,_emscripten_bind_AllHitsRayResultCallback_set_m_collisionFilterMask_1:Qw,_emscripten_bind_AllHitsRayResultCallback_set_m_collisionObject_1:Ty,_emscripten_bind_AllHitsRayResultCallback_set_m_collisionObjects_1:ot,_emscripten_bind_AllHitsRayResultCallback_set_m_hitFractions_1:Yu,_emscripten_bind_AllHitsRayResultCallback_set_m_hitNormalWorld_1:gu,_emscripten_bind_AllHitsRayResultCallback_set_m_hitPointWorld_1:lu,_emscripten_bind_AllHitsRayResultCallback_set_m_rayFromWorld_1:Bp,_emscripten_bind_AllHitsRayResultCallback_set_m_rayToWorld_1:Gp,_emscripten_bind_ClosestConvexResultCallback_ClosestConvexResultCallback_2:Tq,_emscripten_bind_ClosestConvexResultCallback___destroy___0:pu,_emscripten_bind_ClosestConvexResultCallback_get_m_closestHitFraction_0:SB,_emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterGroup_0:_y,_emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterMask_0:mz,_emscripten_bind_ClosestConvexResultCallback_get_m_convexFromWorld_0:KD,_emscripten_bind_ClosestConvexResultCallback_get_m_convexToWorld_0:XD,_emscripten_bind_ClosestConvexResultCallback_get_m_hitCollisionObject_0:nz,_emscripten_bind_ClosestConvexResultCallback_get_m_hitNormalWorld_0:EE,_emscripten_bind_ClosestConvexResultCallback_get_m_hitPointWorld_0:bD,_emscripten_bind_ClosestConvexResultCallback_hasHit_0:Pv,_emscripten_bind_ClosestConvexResultCallback_set_m_closestHitFraction_1:sD,_emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterGroup_1:sw,_emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterMask_1:Iw,_emscripten_bind_ClosestConvexResultCallback_set_m_convexFromWorld_1:Wp,_emscripten_bind_ClosestConvexResultCallback_set_m_convexToWorld_1:Ip,_emscripten_bind_ClosestConvexResultCallback_set_m_hitCollisionObject_1:ex,_emscripten_bind_ClosestConvexResultCallback_set_m_hitNormalWorld_1:iq,_emscripten_bind_ClosestConvexResultCallback_set_m_hitPointWorld_1:Np,_emscripten_bind_ClosestRayResultCallback_ClosestRayResultCallback_2:sr,_emscripten_bind_ClosestRayResultCallback___destroy___0:pu,_emscripten_bind_ClosestRayResultCallback_get_m_closestHitFraction_0:SB,_emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterGroup_0:mz,_emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterMask_0:vz,_emscripten_bind_ClosestRayResultCallback_get_m_collisionObject_0:NB,_emscripten_bind_ClosestRayResultCallback_get_m_hitNormalWorld_0:aC,_emscripten_bind_ClosestRayResultCallback_get_m_hitPointWorld_0:_D,_emscripten_bind_ClosestRayResultCallback_get_m_rayFromWorld_0:_C,_emscripten_bind_ClosestRayResultCallback_get_m_rayToWorld_0:GC,_emscripten_bind_ClosestRayResultCallback_hasHit_0:mw,_emscripten_bind_ClosestRayResultCallback_set_m_closestHitFraction_1:sD,_emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterGroup_1:Iw,_emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterMask_1:Qw,_emscripten_bind_ClosestRayResultCallback_set_m_collisionObject_1:Ty,_emscripten_bind_ClosestRayResultCallback_set_m_hitNormalWorld_1:Ap,_emscripten_bind_ClosestRayResultCallback_set_m_hitPointWorld_1:Qp,_emscripten_bind_ClosestRayResultCallback_set_m_rayFromWorld_1:Kp,_emscripten_bind_ClosestRayResultCallback_set_m_rayToWorld_1:Fp,_emscripten_bind_ConcreteContactResultCallback_ConcreteContactResultCallback_0:eq,_emscripten_bind_ConcreteContactResultCallback___destroy___0:pu,_emscripten_bind_ConcreteContactResultCallback_addSingleResult_7:jp,_emscripten_bind_ContactResultCallback___destroy___0:pu,_emscripten_bind_ContactResultCallback_addSingleResult_7:jp,_emscripten_bind_ConvexResultCallback___destroy___0:pu,_emscripten_bind_ConvexResultCallback_get_m_closestHitFraction_0:SB,_emscripten_bind_ConvexResultCallback_get_m_collisionFilterGroup_0:_y,_emscripten_bind_ConvexResultCallback_get_m_collisionFilterMask_0:mz,_emscripten_bind_ConvexResultCallback_hasHit_0:Pv,_emscripten_bind_ConvexResultCallback_set_m_closestHitFraction_1:sD,_emscripten_bind_ConvexResultCallback_set_m_collisionFilterGroup_1:sw,_emscripten_bind_ConvexResultCallback_set_m_collisionFilterMask_1:Iw,_emscripten_bind_LayaMotionState_LayaMotionState_0:Lv,_emscripten_bind_LayaMotionState___destroy___0:pu,_emscripten_bind_LayaMotionState_getWorldTransform_1:Cu,_emscripten_bind_LayaMotionState_setWorldTransform_1:tu,_emscripten_bind_LocalConvexResult_LocalConvexResult_5:cp,_emscripten_bind_LocalConvexResult___destroy___0:OA,_emscripten_bind_LocalConvexResult_get_m_hitCollisionObject_0:XC,_emscripten_bind_LocalConvexResult_get_m_hitFraction_0:BB,_emscripten_bind_LocalConvexResult_get_m_hitNormalLocal_0:iF,_emscripten_bind_LocalConvexResult_get_m_hitPointLocal_0:_C,_emscripten_bind_LocalConvexResult_get_m_localShapeInfo_0:kC,_emscripten_bind_LocalConvexResult_set_m_hitCollisionObject_1:oA,_emscripten_bind_LocalConvexResult_set_m_hitFraction_1:Zy,_emscripten_bind_LocalConvexResult_set_m_hitNormalLocal_1:Sp,_emscripten_bind_LocalConvexResult_set_m_hitPointLocal_1:Kp,_emscripten_bind_LocalConvexResult_set_m_localShapeInfo_1:lz,_emscripten_bind_LocalShapeInfo___destroy___0:OA,_emscripten_bind_LocalShapeInfo_get_m_shapePart_0:XC,_emscripten_bind_LocalShapeInfo_get_m_triangleIndex_0:kC,_emscripten_bind_LocalShapeInfo_set_m_shapePart_1:oA,_emscripten_bind_LocalShapeInfo_set_m_triangleIndex_1:lz,_emscripten_bind_RayResultCallback___destroy___0:pu,_emscripten_bind_RayResultCallback_get_m_closestHitFraction_0:SB,_emscripten_bind_RayResultCallback_get_m_collisionFilterGroup_0:mz,_emscripten_bind_RayResultCallback_get_m_collisionFilterMask_0:vz,_emscripten_bind_RayResultCallback_get_m_collisionObject_0:NB,_emscripten_bind_RayResultCallback_hasHit_0:mw,_emscripten_bind_RayResultCallback_set_m_closestHitFraction_1:sD,_emscripten_bind_RayResultCallback_set_m_collisionFilterGroup_1:Iw,_emscripten_bind_RayResultCallback_set_m_collisionFilterMask_1:Qw,_emscripten_bind_RayResultCallback_set_m_collisionObject_1:Ty,_emscripten_bind_RaycastInfo___destroy___0:OA,_emscripten_bind_RaycastInfo_get_m_contactNormalWS_0:AF,_emscripten_bind_RaycastInfo_get_m_contactPointWS_0:KD,_emscripten_bind_RaycastInfo_get_m_groundObject_0:tC,_emscripten_bind_RaycastInfo_get_m_hardPointWS_0:DD,_emscripten_bind_RaycastInfo_get_m_isInContact_0:mB,_emscripten_bind_RaycastInfo_get_m_suspensionLength_0:FB,_emscripten_bind_RaycastInfo_get_m_wheelAxleWS_0:CD,_emscripten_bind_RaycastInfo_get_m_wheelDirectionWS_0:jD,_emscripten_bind_RaycastInfo_set_m_contactNormalWS_1:oq,_emscripten_bind_RaycastInfo_set_m_contactPointWS_1:Wp,_emscripten_bind_RaycastInfo_set_m_groundObject_1:$z,_emscripten_bind_RaycastInfo_set_m_hardPointWS_1:cq,_emscripten_bind_RaycastInfo_set_m_isInContact_1:bz,_emscripten_bind_RaycastInfo_set_m_suspensionLength_1:az,_emscripten_bind_RaycastInfo_set_m_wheelAxleWS_1:bq,_emscripten_bind_RaycastInfo_set_m_wheelDirectionWS_1:Rp,_emscripten_bind_VoidPtr___destroy___0:OA,_emscripten_bind_btActionInterface___destroy___0:pu,_emscripten_bind_btActionInterface_updateAction_2:vt,_emscripten_bind_btAxisSweep3___destroy___0:pu,_emscripten_bind_btAxisSweep3_btAxisSweep3_2:dr,_emscripten_bind_btAxisSweep3_btAxisSweep3_3:qq,_emscripten_bind_btAxisSweep3_btAxisSweep3_4:aq,_emscripten_bind_btAxisSweep3_btAxisSweep3_5:sp,_emscripten_bind_btBoxShape___destroy___0:pu,_emscripten_bind_btBoxShape_btBoxShape_1:Kh,_emscripten_bind_btBoxShape_calculateLocalInertia_2:gt,_emscripten_bind_btBoxShape_getLocalScaling_0:cx,_emscripten_bind_btBoxShape_getMargin_0:Hx,_emscripten_bind_btBoxShape_setLocalScaling_1:Qu,_emscripten_bind_btBoxShape_setMargin_1:Kv,_emscripten_bind_btBroadphaseInterface___destroy___0:pu,_emscripten_bind_btBroadphaseProxy___destroy___0:Jy,_emscripten_bind_btBroadphaseProxy_get_m_collisionFilterGroup_0:kC,_emscripten_bind_btBroadphaseProxy_get_m_collisionFilterMask_0:NB,_emscripten_bind_btBroadphaseProxy_set_m_collisionFilterGroup_1:lz,_emscripten_bind_btBroadphaseProxy_set_m_collisionFilterMask_1:Ty,_emscripten_bind_btBvhTriangleMeshShape___destroy___0:pu,_emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_2:cr,_emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_3:uq,_emscripten_bind_btBvhTriangleMeshShape_calculateLocalInertia_2:gt,_emscripten_bind_btBvhTriangleMeshShape_getLocalScaling_0:cx,_emscripten_bind_btBvhTriangleMeshShape_setLocalScaling_1:Qu,_emscripten_bind_btCapsuleShapeX___destroy___0:pu,_emscripten_bind_btCapsuleShapeX_btCapsuleShapeX_2:Rl,_emscripten_bind_btCapsuleShapeX_calculateLocalInertia_2:gt,_emscripten_bind_btCapsuleShapeX_getHalfHeight_0:Iz,_emscripten_bind_btCapsuleShapeX_getLocalScaling_0:cx,_emscripten_bind_btCapsuleShapeX_getMargin_0:Hx,_emscripten_bind_btCapsuleShapeX_getRadius_0:eB,_emscripten_bind_btCapsuleShapeX_getUpAxis_0:gB,_emscripten_bind_btCapsuleShapeX_setLocalScaling_1:Qu,_emscripten_bind_btCapsuleShapeX_setMargin_1:Kv,_emscripten_bind_btCapsuleShapeZ___destroy___0:pu,_emscripten_bind_btCapsuleShapeZ_btCapsuleShapeZ_2:Ql,_emscripten_bind_btCapsuleShapeZ_calculateLocalInertia_2:gt,_emscripten_bind_btCapsuleShapeZ_getHalfHeight_0:Iz,_emscripten_bind_btCapsuleShapeZ_getLocalScaling_0:cx,_emscripten_bind_btCapsuleShapeZ_getMargin_0:Hx,_emscripten_bind_btCapsuleShapeZ_getRadius_0:eB,_emscripten_bind_btCapsuleShapeZ_getUpAxis_0:gB,_emscripten_bind_btCapsuleShapeZ_setLocalScaling_1:Qu,_emscripten_bind_btCapsuleShapeZ_setMargin_1:Kv,_emscripten_bind_btCapsuleShape___destroy___0:pu,_emscripten_bind_btCapsuleShape_btCapsuleShape_2:Sl,_emscripten_bind_btCapsuleShape_calculateLocalInertia_2:gt,_emscripten_bind_btCapsuleShape_getHalfHeight_0:Iz,_emscripten_bind_btCapsuleShape_getLocalScaling_0:cx,_emscripten_bind_btCapsuleShape_getMargin_0:Hx,_emscripten_bind_btCapsuleShape_getRadius_0:eB,_emscripten_bind_btCapsuleShape_getUpAxis_0:gB,_emscripten_bind_btCapsuleShape_setLocalScaling_1:Qu,_emscripten_bind_btCapsuleShape_setMargin_1:Kv,_emscripten_bind_btCollisionConfiguration___destroy___0:pu,_emscripten_bind_btCollisionDispatcher___destroy___0:pu,_emscripten_bind_btCollisionDispatcher_btCollisionDispatcher_1:Ri,_emscripten_bind_btCollisionDispatcher_getManifoldByIndexInternal_1:St,_emscripten_bind_btCollisionDispatcher_getNumManifolds_0:Ix,_emscripten_bind_btCollisionObject___destroy___0:pu,_emscripten_bind_btCollisionObject_activate_0:Jr,_emscripten_bind_btCollisionObject_activate_1:Aq,_emscripten_bind_btCollisionObject_btCollisionObject_0:ag,_emscripten_bind_btCollisionObject_forceActivationState_1:Wy,_emscripten_bind_btCollisionObject_getBroadphaseHandle_0:Pz,_emscripten_bind_btCollisionObject_getCcdMotionThreshold_0:Vw,_emscripten_bind_btCollisionObject_getCcdSweptSphereRadius_0:Dw,_emscripten_bind_btCollisionObject_getCollisionFlags_0:hA,_emscripten_bind_btCollisionObject_getCollisionShape_0:gA,_emscripten_bind_btCollisionObject_getFriction_0:Sx,_emscripten_bind_btCollisionObject_getInterpolationAngularVelocity_0:Ev,_emscripten_bind_btCollisionObject_getInterpolationLinearVelocity_0:Nv,_emscripten_bind_btCollisionObject_getRestitution_0:Bx,_emscripten_bind_btCollisionObject_getRollingFriction_0:ix,_emscripten_bind_btCollisionObject_getUserIndex_0:dB,_emscripten_bind_btCollisionObject_getUserPointer_0:KA,_emscripten_bind_btCollisionObject_getWorldTransform_0:$B,_emscripten_bind_btCollisionObject_isActive_0:fy,_emscripten_bind_btCollisionObject_isKinematicObject_0:$v,_emscripten_bind_btCollisionObject_isStaticObject_0:Uw,_emscripten_bind_btCollisionObject_isStaticOrKinematicObject_0:Du,_emscripten_bind_btCollisionObject_setActivationState_1:Lt,_emscripten_bind_btCollisionObject_setAnisotropicFriction_2:ct,_emscripten_bind_btCollisionObject_setCcdMotionThreshold_1:Wv,_emscripten_bind_btCollisionObject_setCcdSweptSphereRadius_1:Dv,_emscripten_bind_btCollisionObject_setCollisionFlags_1:Cw,_emscripten_bind_btCollisionObject_setCollisionShape_1:Cu,_emscripten_bind_btCollisionObject_setContactProcessingThreshold_1:fw,_emscripten_bind_btCollisionObject_setFriction_1:ey,_emscripten_bind_btCollisionObject_setInterpolationAngularVelocity_1:rt,_emscripten_bind_btCollisionObject_setInterpolationLinearVelocity_1:At,_emscripten_bind_btCollisionObject_setRestitution_1:Ax,_emscripten_bind_btCollisionObject_setRollingFriction_1:Nw,_emscripten_bind_btCollisionObject_setUserIndex_1:Gx,_emscripten_bind_btCollisionObject_setUserPointer_1:hx,_emscripten_bind_btCollisionObject_setWorldTransform_1:cv,_emscripten_bind_btCollisionShape___destroy___0:pu,_emscripten_bind_btCollisionShape_calculateLocalInertia_2:gt,_emscripten_bind_btCollisionShape_getLocalScaling_0:cx,_emscripten_bind_btCollisionShape_getMargin_0:Hx,_emscripten_bind_btCollisionShape_setLocalScaling_1:Qu,_emscripten_bind_btCollisionShape_setMargin_1:Kv,_emscripten_bind_btCollisionWorld___destroy___0:pu,_emscripten_bind_btCollisionWorld_addCollisionObject_1:Ht,_emscripten_bind_btCollisionWorld_addCollisionObject_2:os,_emscripten_bind_btCollisionWorld_addCollisionObject_3:Wq,_emscripten_bind_btCollisionWorld_contactPairTest_3:br,_emscripten_bind_btCollisionWorld_contactTest_2:Kl,_emscripten_bind_btCollisionWorld_convexSweepTest_5:Ep,_emscripten_bind_btCollisionWorld_getBroadphase_0:vA,_emscripten_bind_btCollisionWorld_getDispatchInfo_0:Oy,_emscripten_bind_btCollisionWorld_getDispatcher_0:uA,_emscripten_bind_btCollisionWorld_getPairCache_0:kx,_emscripten_bind_btCollisionWorld_rayTest_3:ys,_emscripten_bind_btCollisionWorld_removeCollisionObject_1:$t,_emscripten_bind_btCollisionWorld_updateSingleAabb_1:Fu,_emscripten_bind_btCompoundShape___destroy___0:pu,_emscripten_bind_btCompoundShape_addChildShape_2:rd,_emscripten_bind_btCompoundShape_btCompoundShape_0:wv,_emscripten_bind_btCompoundShape_btCompoundShape_1:du,_emscripten_bind_btCompoundShape_calculateLocalInertia_2:gt,_emscripten_bind_btCompoundShape_getChildShape_1:dx,_emscripten_bind_btCompoundShape_getLocalScaling_0:cx,_emscripten_bind_btCompoundShape_getMargin_0:Hx,_emscripten_bind_btCompoundShape_getNumChildShapes_0:ty,_emscripten_bind_btCompoundShape_removeChildShapeByIndex_1:fv,_emscripten_bind_btCompoundShape_setLocalScaling_1:Qu,_emscripten_bind_btCompoundShape_setMargin_1:Kv,_emscripten_bind_btCompoundShape_updateChildTransform_2:hf,_emscripten_bind_btCompoundShape_updateChildTransform_3:nf,_emscripten_bind_btConcaveShape___destroy___0:pu,_emscripten_bind_btConcaveShape_calculateLocalInertia_2:gt,_emscripten_bind_btConcaveShape_getLocalScaling_0:cx,_emscripten_bind_btConcaveShape_setLocalScaling_1:Qu,_emscripten_bind_btConeShapeX___destroy___0:pu,_emscripten_bind_btConeShapeX_btConeShapeX_2:Rk,_emscripten_bind_btConeShapeX_calculateLocalInertia_2:gt,_emscripten_bind_btConeShapeX_getLocalScaling_0:cx,_emscripten_bind_btConeShapeX_setLocalScaling_1:Qu,_emscripten_bind_btConeShapeZ___destroy___0:pu,_emscripten_bind_btConeShapeZ_btConeShapeZ_2:Qk,_emscripten_bind_btConeShapeZ_calculateLocalInertia_2:gt,_emscripten_bind_btConeShapeZ_getLocalScaling_0:cx,_emscripten_bind_btConeShapeZ_setLocalScaling_1:Qu,_emscripten_bind_btConeShape___destroy___0:pu,_emscripten_bind_btConeShape_btConeShape_2:Uk,_emscripten_bind_btConeShape_calculateLocalInertia_2:gt,_emscripten_bind_btConeShape_getLocalScaling_0:cx,_emscripten_bind_btConeShape_setLocalScaling_1:Qu,_emscripten_bind_btConeTwistConstraint___destroy___0:pu,_emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_2:Zf,_emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_4:If,_emscripten_bind_btConeTwistConstraint_enableFeedback_1:Aw,_emscripten_bind_btConeTwistConstraint_enableMotor_1:rw,_emscripten_bind_btConeTwistConstraint_getBreakingImpulseThreshold_0:Cv,_emscripten_bind_btConeTwistConstraint_getParam_2:kt,_emscripten_bind_btConeTwistConstraint_setAngularOnly_1:Jv,_emscripten_bind_btConeTwistConstraint_setBreakingImpulseThreshold_1:vw,_emscripten_bind_btConeTwistConstraint_setDamping_1:bx,_emscripten_bind_btConeTwistConstraint_setLimit_2:bv,_emscripten_bind_btConeTwistConstraint_setMaxMotorImpulseNormalized_1:Rt,_emscripten_bind_btConeTwistConstraint_setMaxMotorImpulse_1:kv,_emscripten_bind_btConeTwistConstraint_setMotorTargetInConstraintSpace_1:Gs,_emscripten_bind_btConeTwistConstraint_setMotorTarget_1:Yg,_emscripten_bind_btConeTwistConstraint_setParam_3:Ds,_emscripten_bind_btConstraintSetting___destroy___0:OA,_emscripten_bind_btConstraintSetting_btConstraintSetting_0:Pw,_emscripten_bind_btConstraintSetting_get_m_damping_0:SB,_emscripten_bind_btConstraintSetting_get_m_impulseClamp_0:qB,_emscripten_bind_btConstraintSetting_get_m_tau_0:WC,_emscripten_bind_btConstraintSetting_set_m_damping_1:sD,_emscripten_bind_btConstraintSetting_set_m_impulseClamp_1:rD,_emscripten_bind_btConstraintSetting_set_m_tau_1:HD,_emscripten_bind_btConstraintSolver___destroy___0:pu,_emscripten_bind_btContactSolverInfo___destroy___0:OA,_emscripten_bind_btContactSolverInfo_get_m_numIterations_0:lB,_emscripten_bind_btContactSolverInfo_get_m_solverMode_0:mD,_emscripten_bind_btContactSolverInfo_get_m_splitImpulsePenetrationThreshold_0:ky,_emscripten_bind_btContactSolverInfo_get_m_splitImpulse_0:Mz,_emscripten_bind_btContactSolverInfo_set_m_numIterations_1:sy,_emscripten_bind_btContactSolverInfo_set_m_solverMode_1:Qy,_emscripten_bind_btContactSolverInfo_set_m_splitImpulsePenetrationThreshold_1:yv,_emscripten_bind_btContactSolverInfo_set_m_splitImpulse_1:$x,_emscripten_bind_btConvexHullShape___destroy___0:pu,_emscripten_bind_btConvexHullShape_addPoint_1:qw,_emscripten_bind_btConvexHullShape_addPoint_2:yu,_emscripten_bind_btConvexHullShape_btConvexHullShape_0:Mj,_emscripten_bind_btConvexHullShape_calculateLocalInertia_2:gt,_emscripten_bind_btConvexHullShape_getLocalScaling_0:cx,_emscripten_bind_btConvexHullShape_getMargin_0:Hx,_emscripten_bind_btConvexHullShape_setLocalScaling_1:Qu,_emscripten_bind_btConvexHullShape_setMargin_1:Kv,_emscripten_bind_btConvexShape___destroy___0:pu,_emscripten_bind_btConvexShape_calculateLocalInertia_2:gt,_emscripten_bind_btConvexShape_getLocalScaling_0:cx,_emscripten_bind_btConvexShape_getMargin_0:Hx,_emscripten_bind_btConvexShape_setLocalScaling_1:Qu,_emscripten_bind_btConvexShape_setMargin_1:Kv,_emscripten_bind_btConvexTriangleMeshShape___destroy___0:pu,_emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_1:_j,_emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_2:Kj,_emscripten_bind_btConvexTriangleMeshShape_calculateLocalInertia_2:gt,_emscripten_bind_btConvexTriangleMeshShape_getLocalScaling_0:cx,_emscripten_bind_btConvexTriangleMeshShape_getMargin_0:Hx,_emscripten_bind_btConvexTriangleMeshShape_setLocalScaling_1:Qu,_emscripten_bind_btConvexTriangleMeshShape_setMargin_1:Kv,_emscripten_bind_btCylinderShapeX___destroy___0:pu,_emscripten_bind_btCylinderShapeX_btCylinderShapeX_1:rh,_emscripten_bind_btCylinderShapeX_calculateLocalInertia_2:gt,_emscripten_bind_btCylinderShapeX_getLocalScaling_0:cx,_emscripten_bind_btCylinderShapeX_getMargin_0:Hx,_emscripten_bind_btCylinderShapeX_setLocalScaling_1:Qu,_emscripten_bind_btCylinderShapeX_setMargin_1:Kv,_emscripten_bind_btCylinderShapeZ___destroy___0:pu,_emscripten_bind_btCylinderShapeZ_btCylinderShapeZ_1:qh,_emscripten_bind_btCylinderShapeZ_calculateLocalInertia_2:gt,_emscripten_bind_btCylinderShapeZ_getLocalScaling_0:cx,_emscripten_bind_btCylinderShapeZ_getMargin_0:Hx,_emscripten_bind_btCylinderShapeZ_setLocalScaling_1:Qu,_emscripten_bind_btCylinderShapeZ_setMargin_1:Kv,_emscripten_bind_btCylinderShape___destroy___0:pu,_emscripten_bind_btCylinderShape_btCylinderShape_1:Ah,_emscripten_bind_btCylinderShape_calculateLocalInertia_2:gt,_emscripten_bind_btCylinderShape_getLocalScaling_0:cx,_emscripten_bind_btCylinderShape_getMargin_0:Hx,_emscripten_bind_btCylinderShape_setLocalScaling_1:Qu,_emscripten_bind_btCylinderShape_setMargin_1:Kv,_emscripten_bind_btDbvtBroadphase___destroy___0:pu,_emscripten_bind_btDbvtBroadphase_btDbvtBroadphase_0:Pu,_emscripten_bind_btDbvtBroadphase_getOverlappingPairCache_0:Ix,_emscripten_bind_btDefaultCollisionConfiguration___destroy___0:pu,_emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_0:Bo,_emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_1:fr,_emscripten_bind_btDefaultCollisionConstructionInfo___destroy___0:OA,_emscripten_bind_btDefaultCollisionConstructionInfo_btDefaultCollisionConstructionInfo_0:dt,_emscripten_bind_btDefaultMotionState___destroy___0:pu,_emscripten_bind_btDefaultMotionState_btDefaultMotionState_0:gq,_emscripten_bind_btDefaultMotionState_btDefaultMotionState_1:Bq,_emscripten_bind_btDefaultMotionState_btDefaultMotionState_2:Fr,_emscripten_bind_btDefaultMotionState_getWorldTransform_1:Cu,_emscripten_bind_btDefaultMotionState_get_m_graphicsWorldTrans_0:jF,_emscripten_bind_btDefaultMotionState_setWorldTransform_1:tu,_emscripten_bind_btDefaultMotionState_set_m_graphicsWorldTrans_1:aw,_emscripten_bind_btDefaultVehicleRaycaster___destroy___0:pu,_emscripten_bind_btDefaultVehicleRaycaster_btDefaultVehicleRaycaster_1:Ps,_emscripten_bind_btDefaultVehicleRaycaster_castRay_3:ms,_emscripten_bind_btDiscreteDynamicsWorld___destroy___0:pu,_emscripten_bind_btDiscreteDynamicsWorld_addAction_1:Xu,_emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_1:ft,_emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_2:Tr,_emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_3:Wq,_emscripten_bind_btDiscreteDynamicsWorld_addConstraint_1:Qt,_emscripten_bind_btDiscreteDynamicsWorld_addConstraint_2:Qs,_emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_1:cu,_emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_3:Rq,_emscripten_bind_btDiscreteDynamicsWorld_btDiscreteDynamicsWorld_4:td,_emscripten_bind_btDiscreteDynamicsWorld_clearForces_0:Yv,_emscripten_bind_btDiscreteDynamicsWorld_contactPairTest_3:br,_emscripten_bind_btDiscreteDynamicsWorld_contactTest_2:Kl,_emscripten_bind_btDiscreteDynamicsWorld_convexSweepTest_5:Ep,_emscripten_bind_btDiscreteDynamicsWorld_getApplySpeculativeContactRestitution_0:zs,_emscripten_bind_btDiscreteDynamicsWorld_getBroadphase_0:vA,_emscripten_bind_btDiscreteDynamicsWorld_getDispatchInfo_0:Oy,_emscripten_bind_btDiscreteDynamicsWorld_getDispatcher_0:uA,_emscripten_bind_btDiscreteDynamicsWorld_getGravity_0:Um,_emscripten_bind_btDiscreteDynamicsWorld_getPairCache_0:kx,_emscripten_bind_btDiscreteDynamicsWorld_getSolverInfo_0:uz,_emscripten_bind_btDiscreteDynamicsWorld_rayTest_3:ys,_emscripten_bind_btDiscreteDynamicsWorld_removeAction_1:Gu,_emscripten_bind_btDiscreteDynamicsWorld_removeCollisionObject_1:$t,_emscripten_bind_btDiscreteDynamicsWorld_removeConstraint_1:Tt,_emscripten_bind_btDiscreteDynamicsWorld_removeRigidBody_1:Vt,_emscripten_bind_btDiscreteDynamicsWorld_setApplySpeculativeContactRestitution_1:Es,_emscripten_bind_btDiscreteDynamicsWorld_setGravity_1:ku,_emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_1:Os,_emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_2:Xr,_emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_3:bs,_emscripten_bind_btDiscreteDynamicsWorld_updateSingleAabb_1:Fu,_emscripten_bind_btDispatcherInfo___destroy___0:OA,_emscripten_bind_btDispatcherInfo_get_m_allowedCcdPenetration_0:wA,_emscripten_bind_btDispatcherInfo_get_m_convexConservativeDistanceThreshold_0:By,_emscripten_bind_btDispatcherInfo_get_m_dispatchFunc_0:NB,_emscripten_bind_btDispatcherInfo_get_m_enableSPU_0:VA,_emscripten_bind_btDispatcherInfo_get_m_enableSatConvex_0:Sz,_emscripten_bind_btDispatcherInfo_get_m_stepCount_0:kC,_emscripten_bind_btDispatcherInfo_get_m_timeOfImpact_0:AB,_emscripten_bind_btDispatcherInfo_get_m_timeStep_0:WC,_emscripten_bind_btDispatcherInfo_get_m_useContinuous_0:nA,_emscripten_bind_btDispatcherInfo_get_m_useConvexConservativeDistanceUtil_0:Mx,_emscripten_bind_btDispatcherInfo_get_m_useEpa_0:kB,_emscripten_bind_btDispatcherInfo_set_m_allowedCcdPenetration_1:iy,_emscripten_bind_btDispatcherInfo_set_m_convexConservativeDistanceThreshold_1:Hw,_emscripten_bind_btDispatcherInfo_set_m_dispatchFunc_1:Ty,_emscripten_bind_btDispatcherInfo_set_m_enableSPU_1:Py,_emscripten_bind_btDispatcherInfo_set_m_enableSatConvex_1:jy,_emscripten_bind_btDispatcherInfo_set_m_stepCount_1:lz,_emscripten_bind_btDispatcherInfo_set_m_timeOfImpact_1:eD,_emscripten_bind_btDispatcherInfo_set_m_timeStep_1:HD,_emscripten_bind_btDispatcherInfo_set_m_useContinuous_1:ry,_emscripten_bind_btDispatcherInfo_set_m_useConvexConservativeDistanceUtil_1:lw,_emscripten_bind_btDispatcherInfo_set_m_useEpa_1:$y,_emscripten_bind_btDispatcher___destroy___0:pu,_emscripten_bind_btDispatcher_getManifoldByIndexInternal_1:St,_emscripten_bind_btDispatcher_getNumManifolds_0:Ix,_emscripten_bind_btDynamicsWorld___destroy___0:pu,_emscripten_bind_btDynamicsWorld_addAction_1:Xu,_emscripten_bind_btDynamicsWorld_addCollisionObject_1:Ht,_emscripten_bind_btDynamicsWorld_addCollisionObject_2:os,_emscripten_bind_btDynamicsWorld_addCollisionObject_3:Wq,_emscripten_bind_btDynamicsWorld_contactPairTest_3:br,_emscripten_bind_btDynamicsWorld_contactTest_2:Kl,_emscripten_bind_btDynamicsWorld_convexSweepTest_5:Ep,_emscripten_bind_btDynamicsWorld_getBroadphase_0:vA,_emscripten_bind_btDynamicsWorld_getDispatchInfo_0:Oy,_emscripten_bind_btDynamicsWorld_getDispatcher_0:uA,_emscripten_bind_btDynamicsWorld_getPairCache_0:kx,_emscripten_bind_btDynamicsWorld_getSolverInfo_0:uz,_emscripten_bind_btDynamicsWorld_rayTest_3:ys,_emscripten_bind_btDynamicsWorld_removeAction_1:Gu,_emscripten_bind_btDynamicsWorld_removeCollisionObject_1:$t,_emscripten_bind_btDynamicsWorld_updateSingleAabb_1:Fu,_emscripten_bind_btFixedConstraint___destroy___0:pu,_emscripten_bind_btFixedConstraint_btFixedConstraint_4:xd,_emscripten_bind_btFixedConstraint_enableFeedback_1:Aw,_emscripten_bind_btFixedConstraint_getBreakingImpulseThreshold_0:Cv,_emscripten_bind_btFixedConstraint_getParam_2:kt,_emscripten_bind_btFixedConstraint_setBreakingImpulseThreshold_1:vw,_emscripten_bind_btFixedConstraint_setParam_3:Ds,_emscripten_bind_btGeneric6DofConstraint___destroy___0:pu,_emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_3:fq,_emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_5:Xo,_emscripten_bind_btGeneric6DofConstraint_enableFeedback_1:Aw,_emscripten_bind_btGeneric6DofConstraint_getBreakingImpulseThreshold_0:Cv,_emscripten_bind_btGeneric6DofConstraint_getFrameOffsetA_0:LB,_emscripten_bind_btGeneric6DofConstraint_getParam_2:kt,_emscripten_bind_btGeneric6DofConstraint_setAngularLowerLimit_1:Gt,_emscripten_bind_btGeneric6DofConstraint_setAngularUpperLimit_1:Ft,_emscripten_bind_btGeneric6DofConstraint_setBreakingImpulseThreshold_1:vw,_emscripten_bind_btGeneric6DofConstraint_setLinearLowerLimit_1:Pt,_emscripten_bind_btGeneric6DofConstraint_setLinearUpperLimit_1:Ot,_emscripten_bind_btGeneric6DofConstraint_setParam_3:Ds,_emscripten_bind_btGeneric6DofSpringConstraint___destroy___0:pu,_emscripten_bind_btGeneric6DofSpringConstraint_btGeneric6DofSpringConstraint_3:nk,_emscripten_bind_btGeneric6DofSpringConstraint_btGeneric6DofSpringConstraint_5:Tj,_emscripten_bind_btGeneric6DofSpringConstraint_enableFeedback_1:Aw,_emscripten_bind_btGeneric6DofSpringConstraint_enableSpring_2:xp,_emscripten_bind_btGeneric6DofSpringConstraint_getBreakingImpulseThreshold_0:Cv,_emscripten_bind_btGeneric6DofSpringConstraint_getFrameOffsetA_0:LB,_emscripten_bind_btGeneric6DofSpringConstraint_getParam_2:kt,_emscripten_bind_btGeneric6DofSpringConstraint_setAngularLowerLimit_1:Gt,_emscripten_bind_btGeneric6DofSpringConstraint_setAngularUpperLimit_1:Ft,_emscripten_bind_btGeneric6DofSpringConstraint_setBreakingImpulseThreshold_1:vw,_emscripten_bind_btGeneric6DofSpringConstraint_setDamping_2:ev,_emscripten_bind_btGeneric6DofSpringConstraint_setLinearLowerLimit_1:Pt,_emscripten_bind_btGeneric6DofSpringConstraint_setLinearUpperLimit_1:Ot,_emscripten_bind_btGeneric6DofSpringConstraint_setParam_3:Ds,_emscripten_bind_btGeneric6DofSpringConstraint_setStiffness_2:_u,_emscripten_bind_btGhostObject___destroy___0:pu,_emscripten_bind_btGhostObject_activate_0:Jr,_emscripten_bind_btGhostObject_activate_1:Aq,_emscripten_bind_btGhostObject_btGhostObject_0:Pf,_emscripten_bind_btGhostObject_forceActivationState_1:Wy,_emscripten_bind_btGhostObject_getBroadphaseHandle_0:Pz,_emscripten_bind_btGhostObject_getCcdMotionThreshold_0:Vw,_emscripten_bind_btGhostObject_getCcdSweptSphereRadius_0:Dw,_emscripten_bind_btGhostObject_getCollisionFlags_0:hA,_emscripten_bind_btGhostObject_getCollisionShape_0:gA,_emscripten_bind_btGhostObject_getFriction_0:Sx,_emscripten_bind_btGhostObject_getInterpolationAngularVelocity_0:Ev,_emscripten_bind_btGhostObject_getInterpolationLinearVelocity_0:Nv,_emscripten_bind_btGhostObject_getNumOverlappingObjects_0:sx,_emscripten_bind_btGhostObject_getOverlappingObject_1:Sv,_emscripten_bind_btGhostObject_getRestitution_0:Bx,_emscripten_bind_btGhostObject_getRollingFriction_0:ix,_emscripten_bind_btGhostObject_getUserIndex_0:dB,_emscripten_bind_btGhostObject_getUserPointer_0:KA,_emscripten_bind_btGhostObject_getWorldTransform_0:$B,_emscripten_bind_btGhostObject_isActive_0:fy,_emscripten_bind_btGhostObject_isKinematicObject_0:$v,_emscripten_bind_btGhostObject_isStaticObject_0:Uw,_emscripten_bind_btGhostObject_isStaticOrKinematicObject_0:Du,_emscripten_bind_btGhostObject_setActivationState_1:Lt,_emscripten_bind_btGhostObject_setAnisotropicFriction_2:ct,_emscripten_bind_btGhostObject_setCcdMotionThreshold_1:Wv,_emscripten_bind_btGhostObject_setCcdSweptSphereRadius_1:Dv,_emscripten_bind_btGhostObject_setCollisionFlags_1:Cw,_emscripten_bind_btGhostObject_setCollisionShape_1:Cu,_emscripten_bind_btGhostObject_setContactProcessingThreshold_1:fw,_emscripten_bind_btGhostObject_setFriction_1:ey,_emscripten_bind_btGhostObject_setInterpolationAngularVelocity_1:rt,_emscripten_bind_btGhostObject_setInterpolationLinearVelocity_1:At,_emscripten_bind_btGhostObject_setRestitution_1:Ax,_emscripten_bind_btGhostObject_setRollingFriction_1:Nw,_emscripten_bind_btGhostObject_setUserIndex_1:Gx,_emscripten_bind_btGhostObject_setUserPointer_1:hx,_emscripten_bind_btGhostObject_setWorldTransform_1:cv,_emscripten_bind_btGhostPairCallback___destroy___0:pu,_emscripten_bind_btGhostPairCallback_btGhostPairCallback_0:Yw,_emscripten_bind_btHeightfieldTerrainShape___destroy___0:pu,_emscripten_bind_btHeightfieldTerrainShape_btHeightfieldTerrainShape_9:Rf,_emscripten_bind_btHeightfieldTerrainShape_calculateLocalInertia_2:gt,_emscripten_bind_btHeightfieldTerrainShape_getLocalScaling_0:cx,_emscripten_bind_btHeightfieldTerrainShape_getMargin_0:Hx,_emscripten_bind_btHeightfieldTerrainShape_setLocalScaling_1:Qu,_emscripten_bind_btHeightfieldTerrainShape_setMargin_1:Kv,_emscripten_bind_btHingeConstraint___destroy___0:pu,_emscripten_bind_btHingeConstraint_btHingeConstraint_2:lf,_emscripten_bind_btHingeConstraint_btHingeConstraint_3:gf,_emscripten_bind_btHingeConstraint_btHingeConstraint_4:Gf,_emscripten_bind_btHingeConstraint_btHingeConstraint_5:Cf,_emscripten_bind_btHingeConstraint_btHingeConstraint_6:Uo,_emscripten_bind_btHingeConstraint_btHingeConstraint_7:xo,_emscripten_bind_btHingeConstraint_enableAngularMotor_3:Xs,_emscripten_bind_btHingeConstraint_enableFeedback_1:Aw,_emscripten_bind_btHingeConstraint_enableMotor_1:qx,_emscripten_bind_btHingeConstraint_getBreakingImpulseThreshold_0:Cv,_emscripten_bind_btHingeConstraint_getParam_2:kt,_emscripten_bind_btHingeConstraint_setAngularOnly_1:Gw,_emscripten_bind_btHingeConstraint_setBreakingImpulseThreshold_1:vw,_emscripten_bind_btHingeConstraint_setLimit_4:Vs,_emscripten_bind_btHingeConstraint_setLimit_5:rs,_emscripten_bind_btHingeConstraint_setMaxMotorImpulse_1:Xv,_emscripten_bind_btHingeConstraint_setMotorTarget_2:Dh,_emscripten_bind_btHingeConstraint_setParam_3:Ds,_emscripten_bind_btKinematicCharacterController___destroy___0:pu,_emscripten_bind_btKinematicCharacterController_btKinematicCharacterController_4:Df,_emscripten_bind_btKinematicCharacterController_canJump_0:Fv,_emscripten_bind_btKinematicCharacterController_getGhostObject_0:NB,_emscripten_bind_btKinematicCharacterController_getGravity_0:un,_emscripten_bind_btKinematicCharacterController_getMaxSlope_0:NA,_emscripten_bind_btKinematicCharacterController_jump_0:yr,_emscripten_bind_btKinematicCharacterController_onGround_0:Rw,_emscripten_bind_btKinematicCharacterController_playerStep_2:Rs,_emscripten_bind_btKinematicCharacterController_preStep_1:Yt,_emscripten_bind_btKinematicCharacterController_setFallSpeed_1:iy,_emscripten_bind_btKinematicCharacterController_setGravity_1:ok,_emscripten_bind_btKinematicCharacterController_setJumpSpeed_1:dv,_emscripten_bind_btKinematicCharacterController_setMaxJumpHeight_1:Zy,_emscripten_bind_btKinematicCharacterController_setMaxSlope_1:ou,_emscripten_bind_btKinematicCharacterController_setUpInterpolate_1:tt,_emscripten_bind_btKinematicCharacterController_setUp_1:zj,_emscripten_bind_btKinematicCharacterController_setUseGhostSweepTest_1:wt,_emscripten_bind_btKinematicCharacterController_setVelocityForTimeInterval_2:is,_emscripten_bind_btKinematicCharacterController_setWalkDirection_1:st,_emscripten_bind_btKinematicCharacterController_updateAction_2:vt,_emscripten_bind_btKinematicCharacterController_warp_1:fu,_emscripten_bind_btManifoldPoint___destroy___0:OA,_emscripten_bind_btManifoldPoint_getAppliedImpulse_0:Xw,_emscripten_bind_btManifoldPoint_getDistance_0:Cx,_emscripten_bind_btManifoldPoint_getPositionWorldOnA_0:LB,_emscripten_bind_btManifoldPoint_getPositionWorldOnB_0:Yx,_emscripten_bind_btManifoldPoint_get_m_localPointA_0:AF,_emscripten_bind_btManifoldPoint_get_m_localPointB_0:KD,_emscripten_bind_btManifoldPoint_get_m_normalWorldOnB_0:bD,_emscripten_bind_btManifoldPoint_get_m_positionWorldOnA_0:EE,_emscripten_bind_btManifoldPoint_get_m_positionWorldOnB_0:XD,_emscripten_bind_btManifoldPoint_set_m_localPointA_1:oq,_emscripten_bind_btManifoldPoint_set_m_localPointB_1:Wp,_emscripten_bind_btManifoldPoint_set_m_normalWorldOnB_1:Np,_emscripten_bind_btManifoldPoint_set_m_positionWorldOnA_1:iq,_emscripten_bind_btManifoldPoint_set_m_positionWorldOnB_1:Ip,_emscripten_bind_btMatrix3x3___destroy___0:OA,_emscripten_bind_btMatrix3x3_getRotation_1:ax,_emscripten_bind_btMatrix3x3_getRow_1:Eo,_emscripten_bind_btMatrix3x3_setEulerZYX_3:Mu,_emscripten_bind_btMotionState___destroy___0:pu,_emscripten_bind_btMotionState_getWorldTransform_1:Cu,_emscripten_bind_btMotionState_setWorldTransform_1:tu,_emscripten_bind_btOverlappingPairCache___destroy___0:pu,_emscripten_bind_btOverlappingPairCache_setInternalGhostPairCallback_1:Tt,_emscripten_bind_btOverlappingPairCallback___destroy___0:pu,_emscripten_bind_btPairCachingGhostObject___destroy___0:pu,_emscripten_bind_btPairCachingGhostObject_activate_0:Jr,_emscripten_bind_btPairCachingGhostObject_activate_1:Aq,_emscripten_bind_btPairCachingGhostObject_btPairCachingGhostObject_0:rf,_emscripten_bind_btPairCachingGhostObject_forceActivationState_1:Wy,_emscripten_bind_btPairCachingGhostObject_getBroadphaseHandle_0:Pz,_emscripten_bind_btPairCachingGhostObject_getCcdMotionThreshold_0:Vw,_emscripten_bind_btPairCachingGhostObject_getCcdSweptSphereRadius_0:Dw,_emscripten_bind_btPairCachingGhostObject_getCollisionFlags_0:hA,_emscripten_bind_btPairCachingGhostObject_getCollisionShape_0:gA,_emscripten_bind_btPairCachingGhostObject_getFriction_0:Sx,_emscripten_bind_btPairCachingGhostObject_getInterpolationAngularVelocity_0:Ev,_emscripten_bind_btPairCachingGhostObject_getInterpolationLinearVelocity_0:Nv,_emscripten_bind_btPairCachingGhostObject_getNumOverlappingObjects_0:sx,_emscripten_bind_btPairCachingGhostObject_getOverlappingObject_1:Sv,_emscripten_bind_btPairCachingGhostObject_getRestitution_0:Bx,_emscripten_bind_btPairCachingGhostObject_getRollingFriction_0:ix,_emscripten_bind_btPairCachingGhostObject_getUserIndex_0:dB,_emscripten_bind_btPairCachingGhostObject_getUserPointer_0:KA,_emscripten_bind_btPairCachingGhostObject_getWorldTransform_0:$B,_emscripten_bind_btPairCachingGhostObject_isActive_0:fy,_emscripten_bind_btPairCachingGhostObject_isKinematicObject_0:$v,_emscripten_bind_btPairCachingGhostObject_isStaticObject_0:Uw,_emscripten_bind_btPairCachingGhostObject_isStaticOrKinematicObject_0:Du,_emscripten_bind_btPairCachingGhostObject_setActivationState_1:Lt,_emscripten_bind_btPairCachingGhostObject_setAnisotropicFriction_2:ct,_emscripten_bind_btPairCachingGhostObject_setCcdMotionThreshold_1:Wv,_emscripten_bind_btPairCachingGhostObject_setCcdSweptSphereRadius_1:Dv,_emscripten_bind_btPairCachingGhostObject_setCollisionFlags_1:Cw,_emscripten_bind_btPairCachingGhostObject_setCollisionShape_1:Cu,_emscripten_bind_btPairCachingGhostObject_setContactProcessingThreshold_1:fw,_emscripten_bind_btPairCachingGhostObject_setFriction_1:ey,_emscripten_bind_btPairCachingGhostObject_setInterpolationAngularVelocity_1:rt,_emscripten_bind_btPairCachingGhostObject_setInterpolationLinearVelocity_1:At,_emscripten_bind_btPairCachingGhostObject_setRestitution_1:Ax,_emscripten_bind_btPairCachingGhostObject_setRollingFriction_1:Nw,_emscripten_bind_btPairCachingGhostObject_setUserIndex_1:Gx,_emscripten_bind_btPairCachingGhostObject_setUserPointer_1:hx,_emscripten_bind_btPairCachingGhostObject_setWorldTransform_1:cv,_emscripten_bind_btPersistentManifold___destroy___0:Jy,_emscripten_bind_btPersistentManifold_btPersistentManifold_0:Fk,_emscripten_bind_btPersistentManifold_getBody0_0:mA,_emscripten_bind_btPersistentManifold_getBody1_0:lA,_emscripten_bind_btPersistentManifold_getContactPoint_1:xv,_emscripten_bind_btPersistentManifold_getNumContacts_0:kz,_emscripten_bind_btPoint2PointConstraint___destroy___0:pu,_emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_2:yi,_emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_4:Mi,_emscripten_bind_btPoint2PointConstraint_enableFeedback_1:Aw,_emscripten_bind_btPoint2PointConstraint_getBreakingImpulseThreshold_0:Cv,_emscripten_bind_btPoint2PointConstraint_getParam_2:kt,_emscripten_bind_btPoint2PointConstraint_getPivotInA_0:Xx,_emscripten_bind_btPoint2PointConstraint_getPivotInB_0:Wx,_emscripten_bind_btPoint2PointConstraint_get_m_setting_0:VC,_emscripten_bind_btPoint2PointConstraint_setBreakingImpulseThreshold_1:vw,_emscripten_bind_btPoint2PointConstraint_setParam_3:Ds,_emscripten_bind_btPoint2PointConstraint_setPivotA_1:sv,_emscripten_bind_btPoint2PointConstraint_setPivotB_1:rv,_emscripten_bind_btPoint2PointConstraint_set_m_setting_1:Zq,_emscripten_bind_btQuadWord___destroy___0:OA,_emscripten_bind_btQuadWord_setW_1:jB,_emscripten_bind_btQuadWord_setX_1:zB,_emscripten_bind_btQuadWord_setY_1:yB,_emscripten_bind_btQuadWord_setZ_1:xB,_emscripten_bind_btQuadWord_w_0:KB,_emscripten_bind_btQuadWord_x_0:UC,_emscripten_bind_btQuadWord_y_0:JB,_emscripten_bind_btQuadWord_z_0:IB,_emscripten_bind_btQuaternion___destroy___0:OA,_emscripten_bind_btQuaternion_angleShortestPath_1:pw,_emscripten_bind_btQuaternion_angle_1:Yy,_emscripten_bind_btQuaternion_btQuaternion_4:on,_emscripten_bind_btQuaternion_dot_1:Hz,_emscripten_bind_btQuaternion_getAngleShortestPath_0:kw,_emscripten_bind_btQuaternion_getAngle_0:Sy,_emscripten_bind_btQuaternion_getAxis_0:Dn,_emscripten_bind_btQuaternion_inverse_0:Cn,_emscripten_bind_btQuaternion_length2_0:RB,_emscripten_bind_btQuaternion_length_0:jC,_emscripten_bind_btQuaternion_normalize_0:MB,_emscripten_bind_btQuaternion_normalized_0:tn,_emscripten_bind_btQuaternion_op_add_1:Gz,_emscripten_bind_btQuaternion_op_div_1:kA,_emscripten_bind_btQuaternion_op_mul_1:Er,_emscripten_bind_btQuaternion_op_mulq_1:tz,_emscripten_bind_btQuaternion_op_sub_1:Fz,_emscripten_bind_btQuaternion_setEulerZYX_3:eu,_emscripten_bind_btQuaternion_setRotation_2:Wu,_emscripten_bind_btQuaternion_setValue_4:Rn,_emscripten_bind_btQuaternion_setW_1:jB,_emscripten_bind_btQuaternion_setX_1:zB,_emscripten_bind_btQuaternion_setY_1:yB,_emscripten_bind_btQuaternion_setZ_1:xB,_emscripten_bind_btQuaternion_w_0:KB,_emscripten_bind_btQuaternion_x_0:UC,_emscripten_bind_btQuaternion_y_0:JB,_emscripten_bind_btQuaternion_z_0:IB,_emscripten_bind_btRaycastVehicle___destroy___0:pu,_emscripten_bind_btRaycastVehicle_addWheel_7:zd,_emscripten_bind_btRaycastVehicle_applyEngineForce_2:Dt,_emscripten_bind_btRaycastVehicle_btRaycastVehicle_3:Gj,_emscripten_bind_btRaycastVehicle_getChassisWorldTransform_0:jz,_emscripten_bind_btRaycastVehicle_getCurrentSpeedKmHour_0:jw,_emscripten_bind_btRaycastVehicle_getForwardAxis_0:Rz,_emscripten_bind_btRaycastVehicle_getForwardVector_0:Fm,_emscripten_bind_btRaycastVehicle_getNumWheels_0:iz,_emscripten_bind_btRaycastVehicle_getRightAxis_0:jA,_emscripten_bind_btRaycastVehicle_getRigidBody_0:iA,_emscripten_bind_btRaycastVehicle_getSteeringValue_1:Ou,_emscripten_bind_btRaycastVehicle_getUpAxis_0:MA,_emscripten_bind_btRaycastVehicle_getUserConstraintId_0:hz,_emscripten_bind_btRaycastVehicle_getUserConstraintType_0:Xy,_emscripten_bind_btRaycastVehicle_getWheelInfo_1:px,_emscripten_bind_btRaycastVehicle_getWheelTransformWS_1:Rv,_emscripten_bind_btRaycastVehicle_rayCast_1:Ww,_emscripten_bind_btRaycastVehicle_resetSuspension_0:tk,_emscripten_bind_btRaycastVehicle_setBrake_2:bu,_emscripten_bind_btRaycastVehicle_setCoordinateSystem_3:Sr,_emscripten_bind_btRaycastVehicle_setPitchControl_1:$w,_emscripten_bind_btRaycastVehicle_setSteeringValue_2:Ct,_emscripten_bind_btRaycastVehicle_setUserConstraintId_1:Iv,_emscripten_bind_btRaycastVehicle_setUserConstraintType_1:qv,_emscripten_bind_btRaycastVehicle_updateAction_2:vt,_emscripten_bind_btRaycastVehicle_updateFriction_1:Lu,_emscripten_bind_btRaycastVehicle_updateSuspension_1:bk,_emscripten_bind_btRaycastVehicle_updateVehicle_1:Nu,_emscripten_bind_btRaycastVehicle_updateWheelTransform_2:Dr,_emscripten_bind_btRaycastVehicle_updateWheelTransformsWS_1:Is,_emscripten_bind_btRaycastVehicle_updateWheelTransformsWS_2:Or,_emscripten_bind_btRigidBodyConstructionInfo___destroy___0:OA,_emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_3:em,_emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_4:ip,_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingFactor_0:Lx,_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingThresholdSqr_0:jx,_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDampingFactor_0:Ay,_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDamping_0:hy,_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalLinearDampingThresholdSqr_0:ox,_emscripten_bind_btRigidBodyConstructionInfo_get_m_angularDamping_0:Lz,_emscripten_bind_btRigidBodyConstructionInfo_get_m_angularSleepingThreshold_0:qy,_emscripten_bind_btRigidBodyConstructionInfo_get_m_friction_0:DA,_emscripten_bind_btRigidBodyConstructionInfo_get_m_linearDamping_0:Qz,_emscripten_bind_btRigidBodyConstructionInfo_get_m_linearSleepingThreshold_0:zy,_emscripten_bind_btRigidBodyConstructionInfo_get_m_restitution_0:Wz,_emscripten_bind_btRigidBodyConstructionInfo_get_m_rollingFriction_0:sz,_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingFactor_1:Ov,_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingThresholdSqr_1:jv,_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDampingFactor_1:Fw,_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDamping_1:Ow,_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalLinearDampingThresholdSqr_1:pv,_emscripten_bind_btRigidBodyConstructionInfo_set_m_angularDamping_1:fB,_emscripten_bind_btRigidBodyConstructionInfo_set_m_angularSleepingThreshold_1:xw,_emscripten_bind_btRigidBodyConstructionInfo_set_m_friction_1:gy,_emscripten_bind_btRigidBodyConstructionInfo_set_m_linearDamping_1:Kx,_emscripten_bind_btRigidBodyConstructionInfo_set_m_linearSleepingThreshold_1:Ew,_emscripten_bind_btRigidBodyConstructionInfo_set_m_restitution_1:Tx,_emscripten_bind_btRigidBodyConstructionInfo_set_m_rollingFriction_1:xx,_emscripten_bind_btRigidBody___destroy___0:pu,_emscripten_bind_btRigidBody_activate_0:Jr,_emscripten_bind_btRigidBody_activate_1:Aq,_emscripten_bind_btRigidBody_applyCentralForce_1:ns,_emscripten_bind_btRigidBody_applyCentralImpulse_1:as,_emscripten_bind_btRigidBody_applyForce_2:Zu,_emscripten_bind_btRigidBody_applyGravity_0:Lm,_emscripten_bind_btRigidBody_applyImpulse_2:Eu,_emscripten_bind_btRigidBody_applyTorqueImpulse_1:hs,_emscripten_bind_btRigidBody_applyTorque_1:Ms,_emscripten_bind_btRigidBody_btRigidBody_1:Mf,_emscripten_bind_btRigidBody_forceActivationState_1:Wy,_emscripten_bind_btRigidBody_getAabb_2:er,_emscripten_bind_btRigidBody_getAngularVelocity_0:Vy,_emscripten_bind_btRigidBody_getBroadphaseHandle_0:Pz,_emscripten_bind_btRigidBody_getCcdMotionThreshold_0:Vw,_emscripten_bind_btRigidBody_getCcdSweptSphereRadius_0:Dw,_emscripten_bind_btRigidBody_getCenterOfMassTransform_0:$B,_emscripten_bind_btRigidBody_getCollisionFlags_0:hA,_emscripten_bind_btRigidBody_getCollisionShape_0:gA,_emscripten_bind_btRigidBody_getFlags_0:uB,_emscripten_bind_btRigidBody_getFriction_0:Sx,_emscripten_bind_btRigidBody_getGravity_0:pB,_emscripten_bind_btRigidBody_getInterpolationAngularVelocity_0:Ev,_emscripten_bind_btRigidBody_getInterpolationLinearVelocity_0:Nv,_emscripten_bind_btRigidBody_getLinearVelocity_0:gz,_emscripten_bind_btRigidBody_getMotionState_0:LA,_emscripten_bind_btRigidBody_getRestitution_0:Bx,_emscripten_bind_btRigidBody_getRollingFriction_0:ix,_emscripten_bind_btRigidBody_getUserIndex_0:dB,_emscripten_bind_btRigidBody_getUserPointer_0:KA,_emscripten_bind_btRigidBody_getWorldTransform_0:$B,_emscripten_bind_btRigidBody_isActive_0:fy,_emscripten_bind_btRigidBody_isKinematicObject_0:$v,_emscripten_bind_btRigidBody_isStaticObject_0:Uw,_emscripten_bind_btRigidBody_isStaticOrKinematicObject_0:Du,_emscripten_bind_btRigidBody_setActivationState_1:Lt,_emscripten_bind_btRigidBody_setAngularFactor_1:iw,_emscripten_bind_btRigidBody_setAngularVelocity_1:Mv,_emscripten_bind_btRigidBody_setAnisotropicFriction_2:ct,_emscripten_bind_btRigidBody_setCcdMotionThreshold_1:Wv,_emscripten_bind_btRigidBody_setCcdSweptSphereRadius_1:Dv,_emscripten_bind_btRigidBody_setCenterOfMassTransform_1:wu,_emscripten_bind_btRigidBody_setCollisionFlags_1:Cw,_emscripten_bind_btRigidBody_setCollisionShape_1:Cu,_emscripten_bind_btRigidBody_setContactProcessingThreshold_1:fw,_emscripten_bind_btRigidBody_setDamping_2:hm,_emscripten_bind_btRigidBody_setFlags_1:fz,_emscripten_bind_btRigidBody_setFriction_1:ey,_emscripten_bind_btRigidBody_setGravity_1:Dl,_emscripten_bind_btRigidBody_setInterpolationAngularVelocity_1:rt,_emscripten_bind_btRigidBody_setInterpolationLinearVelocity_1:At,_emscripten_bind_btRigidBody_setLinearFactor_1:ww,_emscripten_bind_btRigidBody_setLinearVelocity_1:Vv,_emscripten_bind_btRigidBody_setMassProps_2:ui,_emscripten_bind_btRigidBody_setMotionState_1:hw,_emscripten_bind_btRigidBody_setRestitution_1:Ax,_emscripten_bind_btRigidBody_setRollingFriction_1:Nw,_emscripten_bind_btRigidBody_setSleepingThresholds_2:Ku,_emscripten_bind_btRigidBody_setUserIndex_1:Gx,_emscripten_bind_btRigidBody_setUserPointer_1:hx,_emscripten_bind_btRigidBody_setWorldTransform_1:cv,_emscripten_bind_btRigidBody_upcast_1:Rx,_emscripten_bind_btRigidBody_updateInertiaTensor_0:pi,_emscripten_bind_btSequentialImpulseConstraintSolver___destroy___0:pu,_emscripten_bind_btSequentialImpulseConstraintSolver_btSequentialImpulseConstraintSolver_0:Uh,_emscripten_bind_btSliderConstraint___destroy___0:pu,_emscripten_bind_btSliderConstraint_btSliderConstraint_3:Kd,_emscripten_bind_btSliderConstraint_btSliderConstraint_5:Ie,_emscripten_bind_btSliderConstraint_enableFeedback_1:Aw,_emscripten_bind_btSliderConstraint_getBreakingImpulseThreshold_0:Cv,_emscripten_bind_btSliderConstraint_getParam_2:kt,_emscripten_bind_btSliderConstraint_setBreakingImpulseThreshold_1:vw,_emscripten_bind_btSliderConstraint_setLowerAngLimit_1:gw,_emscripten_bind_btSliderConstraint_setLowerLinLimit_1:fw,_emscripten_bind_btSliderConstraint_setParam_3:Ds,_emscripten_bind_btSliderConstraint_setUpperAngLimit_1:ew,_emscripten_bind_btSliderConstraint_setUpperLinLimit_1:dw,_emscripten_bind_btSphereShape___destroy___0:pu,_emscripten_bind_btSphereShape_btSphereShape_1:iv,_emscripten_bind_btSphereShape_calculateLocalInertia_2:gt,_emscripten_bind_btSphereShape_getLocalScaling_0:cx,_emscripten_bind_btSphereShape_getMargin_0:Hx,_emscripten_bind_btSphereShape_setLocalScaling_1:Qu,_emscripten_bind_btSphereShape_setMargin_1:Kv,_emscripten_bind_btStaticPlaneShape___destroy___0:pu,_emscripten_bind_btStaticPlaneShape_btStaticPlaneShape_2:sk,_emscripten_bind_btStaticPlaneShape_calculateLocalInertia_2:gt,_emscripten_bind_btStaticPlaneShape_getLocalScaling_0:cx,_emscripten_bind_btStaticPlaneShape_setLocalScaling_1:Qu,_emscripten_bind_btStridingMeshInterface___destroy___0:pu,_emscripten_bind_btTransform___destroy___0:OA,_emscripten_bind_btTransform_btTransform_0:CE,_emscripten_bind_btTransform_btTransform_2:bt,_emscripten_bind_btTransform_getBasis_0:QD,_emscripten_bind_btTransform_getOrigin_0:LB,_emscripten_bind_btTransform_getRotation_0:sn,_emscripten_bind_btTransform_setFromOpenGLMatrix_1:Bw,_emscripten_bind_btTransform_setIdentity_0:tB,_emscripten_bind_btTransform_setOrigin_1:Qx,_emscripten_bind_btTransform_setRotation_1:_x,_emscripten_bind_btTriangleMeshShape___destroy___0:pu,_emscripten_bind_btTriangleMeshShape_calculateLocalInertia_2:gt,_emscripten_bind_btTriangleMeshShape_getLocalScaling_0:cx,_emscripten_bind_btTriangleMeshShape_setLocalScaling_1:Qu,_emscripten_bind_btTriangleMesh___destroy___0:pu,_emscripten_bind_btTriangleMesh_addTriangle_3:am,_emscripten_bind_btTriangleMesh_addTriangle_4:Ul,_emscripten_bind_btTriangleMesh_btTriangleMesh_0:Ju,_emscripten_bind_btTriangleMesh_btTriangleMesh_1:Bt,_emscripten_bind_btTriangleMesh_btTriangleMesh_2:Ls,_emscripten_bind_btTypedConstraint___destroy___0:pu,_emscripten_bind_btTypedConstraint_enableFeedback_1:Aw,_emscripten_bind_btTypedConstraint_getBreakingImpulseThreshold_0:Cv,_emscripten_bind_btTypedConstraint_getParam_2:kt,_emscripten_bind_btTypedConstraint_setBreakingImpulseThreshold_1:vw,_emscripten_bind_btTypedConstraint_setParam_3:Ds,_emscripten_bind_btVector3___destroy___0:Jy,_emscripten_bind_btVector3_btVector3_0:uE,_emscripten_bind_btVector3_btVector3_3:so,_emscripten_bind_btVector3_dot_1:rr,_emscripten_bind_btVector3_length_0:Hv,_emscripten_bind_btVector3_normalize_0:NC,_emscripten_bind_btVector3_op_add_1:JA,_emscripten_bind_btVector3_op_mul_1:Lr,_emscripten_bind_btVector3_op_sub_1:IA,_emscripten_bind_btVector3_rotate_2:an,_emscripten_bind_btVector3_setValue_3:$o,_emscripten_bind_btVector3_setX_1:zB,_emscripten_bind_btVector3_setY_1:yB,_emscripten_bind_btVector3_setZ_1:xB,_emscripten_bind_btVector3_x_0:UC,_emscripten_bind_btVector3_y_0:JB,_emscripten_bind_btVector3_z_0:IB,_emscripten_bind_btVector4___destroy___0:Jy,_emscripten_bind_btVector4_btVector4_0:uE,_emscripten_bind_btVector4_btVector4_4:nn,_emscripten_bind_btVector4_dot_1:rr,_emscripten_bind_btVector4_length_0:Hv,_emscripten_bind_btVector4_normalize_0:NC,_emscripten_bind_btVector4_op_add_1:JA,_emscripten_bind_btVector4_op_mul_1:Lr,_emscripten_bind_btVector4_op_sub_1:IA,_emscripten_bind_btVector4_rotate_2:$m,_emscripten_bind_btVector4_setValue_4:Rn,_emscripten_bind_btVector4_setX_1:zB,_emscripten_bind_btVector4_setY_1:yB,_emscripten_bind_btVector4_setZ_1:xB,_emscripten_bind_btVector4_w_0:KB,_emscripten_bind_btVector4_x_0:UC,_emscripten_bind_btVector4_y_0:JB,_emscripten_bind_btVector4_z_0:IB,_emscripten_bind_btVehicleRaycasterResult___destroy___0:OA,_emscripten_bind_btVehicleRaycasterResult_get_m_distFraction_0:FB,_emscripten_bind_btVehicleRaycasterResult_get_m_hitNormalInWorld_0:KD,_emscripten_bind_btVehicleRaycasterResult_get_m_hitPointInWorld_0:AF,_emscripten_bind_btVehicleRaycasterResult_set_m_distFraction_1:az,_emscripten_bind_btVehicleRaycasterResult_set_m_hitNormalInWorld_1:Wp,_emscripten_bind_btVehicleRaycasterResult_set_m_hitPointInWorld_1:oq,_emscripten_bind_btVehicleRaycaster___destroy___0:pu,_emscripten_bind_btVehicleRaycaster_castRay_3:ms,_emscripten_bind_btVehicleTuning_btVehicleTuning_0:Uv,_emscripten_bind_btVehicleTuning_get_m_frictionSlip_0:OD,_emscripten_bind_btVehicleTuning_get_m_maxSuspensionForce_0:cB,_emscripten_bind_btVehicleTuning_get_m_maxSuspensionTravelCm_0:AB,_emscripten_bind_btVehicleTuning_get_m_suspensionCompression_0:SB,_emscripten_bind_btVehicleTuning_get_m_suspensionDamping_0:qB,_emscripten_bind_btVehicleTuning_get_m_suspensionStiffness_0:WC,_emscripten_bind_btVehicleTuning_set_m_frictionSlip_1:fC,_emscripten_bind_btVehicleTuning_set_m_maxSuspensionForce_1:yy,_emscripten_bind_btVehicleTuning_set_m_maxSuspensionTravelCm_1:eD,_emscripten_bind_btVehicleTuning_set_m_suspensionCompression_1:sD,_emscripten_bind_btVehicleTuning_set_m_suspensionDamping_1:rD,_emscripten_bind_btVehicleTuning_set_m_suspensionStiffness_1:HD,_emscripten_bind_btWheelInfoConstructionInfo___destroy___0:OA,_emscripten_bind_btWheelInfoConstructionInfo_get_m_bIsFrontWheel_0:Iy,_emscripten_bind_btWheelInfoConstructionInfo_get_m_chassisConnectionCS_0:AF,_emscripten_bind_btWheelInfoConstructionInfo_get_m_frictionSlip_0:Vz,_emscripten_bind_btWheelInfoConstructionInfo_get_m_maxSuspensionForce_0:GD,_emscripten_bind_btWheelInfoConstructionInfo_get_m_maxSuspensionTravelCm_0:Ny,_emscripten_bind_btWheelInfoConstructionInfo_get_m_suspensionRestLength_0:hD,_emscripten_bind_btWheelInfoConstructionInfo_get_m_suspensionStiffness_0:Uy,_emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelAxleCS_0:XD,_emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelDirectionCS_0:KD,_emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelRadius_0:fA,_emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelsDampingCompression_0:xy,_emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelsDampingRelaxation_0:Gy,_emscripten_bind_btWheelInfoConstructionInfo_set_m_bIsFrontWheel_1:nx,_emscripten_bind_btWheelInfoConstructionInfo_set_m_chassisConnectionCS_1:oq,_emscripten_bind_btWheelInfoConstructionInfo_set_m_frictionSlip_1:Px,_emscripten_bind_btWheelInfoConstructionInfo_set_m_maxSuspensionForce_1:XB,_emscripten_bind_btWheelInfoConstructionInfo_set_m_maxSuspensionTravelCm_1:_w,_emscripten_bind_btWheelInfoConstructionInfo_set_m_suspensionRestLength_1:qC,_emscripten_bind_btWheelInfoConstructionInfo_set_m_suspensionStiffness_1:gx,_emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelAxleCS_1:Ip,_emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelDirectionCS_1:Wp,_emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelRadius_1:Vx,_emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelsDampingCompression_1:zw,_emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelsDampingRelaxation_1:Mw,_emscripten_bind_btWheelInfo___destroy___0:OA,_emscripten_bind_btWheelInfo_btWheelInfo_1:nu,_emscripten_bind_btWheelInfo_getSuspensionRestLength_0:sB,_emscripten_bind_btWheelInfo_get_m_bIsFrontWheel_0:UA,_emscripten_bind_btWheelInfo_get_m_brake_0:TC,_emscripten_bind_btWheelInfo_get_m_chassisConnectionPointCS_0:sC,_emscripten_bind_btWheelInfo_get_m_clippedInvContactDotSuspension_0:Ez,_emscripten_bind_btWheelInfo_get_m_deltaRotation_0:QB,_emscripten_bind_btWheelInfo_get_m_engineForce_0:iC,_emscripten_bind_btWheelInfo_get_m_frictionSlip_0:_B,_emscripten_bind_btWheelInfo_get_m_maxSuspensionForce_0:oB,_emscripten_bind_btWheelInfo_get_m_maxSuspensionTravelCm_0:bB,_emscripten_bind_btWheelInfo_get_m_raycastInfo_0:AF,_emscripten_bind_btWheelInfo_get_m_rollInfluence_0:PB,_emscripten_bind_btWheelInfo_get_m_rotation_0:FC,_emscripten_bind_btWheelInfo_get_m_skidInfo_0:EC,_emscripten_bind_btWheelInfo_get_m_steering_0:DC,_emscripten_bind_btWheelInfo_get_m_suspensionRelativeVelocity_0:eA,_emscripten_bind_btWheelInfo_get_m_suspensionRestLength1_0:sB,_emscripten_bind_btWheelInfo_get_m_suspensionStiffness_0:iB,_emscripten_bind_btWheelInfo_get_m_wheelAxleCS_0:xD,_emscripten_bind_btWheelInfo_get_m_wheelDirectionCS_0:fD,_emscripten_bind_btWheelInfo_get_m_wheelsDampingCompression_0:CA,_emscripten_bind_btWheelInfo_get_m_wheelsDampingRelaxation_0:HA,_emscripten_bind_btWheelInfo_get_m_wheelsRadius_0:ZB,_emscripten_bind_btWheelInfo_get_m_wheelsSuspensionForce_0:aB,_emscripten_bind_btWheelInfo_get_m_worldTransform_0:pE,_emscripten_bind_btWheelInfo_set_m_bIsFrontWheel_1:My,_emscripten_bind_btWheelInfo_set_m_brake_1:GA,_emscripten_bind_btWheelInfo_set_m_chassisConnectionPointCS_1:wp,_emscripten_bind_btWheelInfo_set_m_clippedInvContactDotSuspension_1:zx,_emscripten_bind_btWheelInfo_set_m_deltaRotation_1:rz,_emscripten_bind_btWheelInfo_set_m_engineForce_1:Kz,_emscripten_bind_btWheelInfo_set_m_frictionSlip_1:Dz,_emscripten_bind_btWheelInfo_set_m_maxSuspensionForce_1:Ly,_emscripten_bind_btWheelInfo_set_m_maxSuspensionTravelCm_1:wy,_emscripten_bind_btWheelInfo_set_m_raycastInfo_1:mr,_emscripten_bind_btWheelInfo_set_m_rollInfluence_1:qz,_emscripten_bind_btWheelInfo_set_m_rotation_1:dA,_emscripten_bind_btWheelInfo_set_m_skidInfo_1:cA,_emscripten_bind_btWheelInfo_set_m_steering_1:bA,_emscripten_bind_btWheelInfo_set_m_suspensionRelativeVelocity_1:Bz,_emscripten_bind_btWheelInfo_set_m_suspensionRestLength1_1:vy,_emscripten_bind_btWheelInfo_set_m_suspensionStiffness_1:Hy,_emscripten_bind_btWheelInfo_set_m_wheelAxleCS_1:Tp,_emscripten_bind_btWheelInfo_set_m_wheelDirectionCS_1:Hp,_emscripten_bind_btWheelInfo_set_m_wheelsDampingCompression_1:dy,_emscripten_bind_btWheelInfo_set_m_wheelsDampingRelaxation_1:ny,_emscripten_bind_btWheelInfo_set_m_wheelsRadius_1:Cz,_emscripten_bind_btWheelInfo_set_m_wheelsSuspensionForce_1:Nz,_emscripten_bind_btWheelInfo_set_m_worldTransform_1:wx,_emscripten_bind_btWheelInfo_updateWheel_2:Lh,_emscripten_bind_tBtCollisionObjectArray___destroy___0:vv,_emscripten_bind_tBtCollisionObjectArray_at_1:Xt,_emscripten_bind_tBtCollisionObjectArray_clear_0:VB,_emscripten_bind_tBtCollisionObjectArray_pop_back_0:FA,_emscripten_bind_tBtCollisionObjectArray_push_back_1:Lq,_emscripten_bind_tBtCollisionObjectArray_size_0:YB,_emscripten_bind_tScalarArray___destroy___0:vv,_emscripten_bind_tScalarArray_at_1:Bu,_emscripten_bind_tScalarArray_clear_0:VB,_emscripten_bind_tScalarArray_pop_back_0:FA,_emscripten_bind_tScalarArray_push_back_1:nr,_emscripten_bind_tScalarArray_size_0:YB,_emscripten_bind_tVector3Array___destroy___0:vv,_emscripten_bind_tVector3Array_at_1:ko,_emscripten_bind_tVector3Array_clear_0:VB,_emscripten_bind_tVector3Array_pop_back_0:FA,_emscripten_bind_tVector3Array_push_back_1:_v,_emscripten_bind_tVector3Array_size_0:YB,_emscripten_enum_PHY_ScalarType_PHY_DOUBLE:mF,_emscripten_enum_PHY_ScalarType_PHY_FIXEDPOINT88:cF,_emscripten_enum_PHY_ScalarType_PHY_FLOAT:FF,_emscripten_enum_PHY_ScalarType_PHY_INTEGER:lF,_emscripten_enum_PHY_ScalarType_PHY_SHORT:oF,_emscripten_enum_PHY_ScalarType_PHY_UCHAR:nF,_emscripten_enum_btConstraintParams_BT_CONSTRAINT_CFM:oF,_emscripten_enum_btConstraintParams_BT_CONSTRAINT_ERP:mF,_emscripten_enum_btConstraintParams_BT_CONSTRAINT_STOP_CFM:cF,_emscripten_enum_btConstraintParams_BT_CONSTRAINT_STOP_ERP:lF,_free:gd,_i64Add:_t,_i64Subtract:Nt,_llvm_bswap_i16:nE,_llvm_bswap_i32:ez,_malloc:ec,_memcpy:$g,_memmove:Zn,_memset:uj,_sbrk:jn,dynCall_di:nD,dynCall_did:_A,dynCall_diidii:Ws,dynCall_diii:Lw,dynCall_diiidii:Kr,dynCall_diiii:ju,dynCall_diiiii:Ks,dynCall_diiiiiiii:Vp,dynCall_diiiiiiiii:gp,dynCall_diiiiiiiiii:wo,dynCall_ii:ZC,dynCall_iidid:Vu,dynCall_iii:pz,dynCall_iiid:fx,dynCall_iiii:ow,dynCall_iiiii:Wt,dynCall_iiiiii:Fs,dynCall_iiiiiii:xr,dynCall_iiiiiiiii:Op,dynCall_iiiiiiiiiii:uo,dynCall_v:kF,dynCall_vi:TD,dynCall_vid:GB,dynCall_viddiii:ts,dynCall_vidi:by,dynCall_vidii:ov,dynCall_vii:ZA,dynCall_viid:my,dynCall_viidi:nv,dynCall_viidii:nt,dynCall_viii:vx,dynCall_viiid:hv,dynCall_viiidii:gs,dynCall_viiii:Au,dynCall_viiiid:mt,dynCall_viiiidddddidi:bo,dynCall_viiiiddddiid:Go,dynCall_viiiii:_s,dynCall_viiiiii:Qr,dynCall_viiiiiii:Kq,dynCall_viiiiiiiii:op,dynCall_viiiiiiiiii:Jo,establishStackSpace:wD,getTempRet0:CF,runPostSets:zn,setTempRet0:yF,setThrew:TA,stackAlloc:Jx,stackRestore:wF,stackSave:DF}})


// EMSCRIPTEN_END_ASM
(c.s,c.u,buffer),Za=c.__GLOBAL__sub_I_btConeTwistConstraint_cpp=n.__GLOBAL__sub_I_btConeTwistConstraint_cpp,$a=c.__GLOBAL__sub_I_btQuickprof_cpp=n.__GLOBAL__sub_I_btQuickprof_cpp;c.___cxa_can_catch=n.___cxa_can_catch;
c.___cxa_is_pointer_type=n.___cxa_is_pointer_type;c.___muldi3=n.___muldi3;c.___udivdi3=n.___udivdi3;c._bitshift64Lshr=n._bitshift64Lshr;c._bitshift64Shl=n._bitshift64Shl;
var sb=c._emscripten_bind_AllConvexResultCallback_AllConvexResultCallback_2=n._emscripten_bind_AllConvexResultCallback_AllConvexResultCallback_2,tb=c._emscripten_bind_AllConvexResultCallback___destroy___0=n._emscripten_bind_AllConvexResultCallback___destroy___0,ub=c._emscripten_bind_AllConvexResultCallback_get_m_closestHitFraction_0=n._emscripten_bind_AllConvexResultCallback_get_m_closestHitFraction_0,vb=c._emscripten_bind_AllConvexResultCallback_get_m_collisionFilterGroup_0=n._emscripten_bind_AllConvexResultCallback_get_m_collisionFilterGroup_0,
wb=c._emscripten_bind_AllConvexResultCallback_get_m_collisionFilterMask_0=n._emscripten_bind_AllConvexResultCallback_get_m_collisionFilterMask_0,xb=c._emscripten_bind_AllConvexResultCallback_get_m_collisionObjects_0=n._emscripten_bind_AllConvexResultCallback_get_m_collisionObjects_0,yb=c._emscripten_bind_AllConvexResultCallback_get_m_convexFromWorld_0=n._emscripten_bind_AllConvexResultCallback_get_m_convexFromWorld_0,zb=c._emscripten_bind_AllConvexResultCallback_get_m_convexToWorld_0=n._emscripten_bind_AllConvexResultCallback_get_m_convexToWorld_0,
Ab=c._emscripten_bind_AllConvexResultCallback_get_m_hitFractions_0=n._emscripten_bind_AllConvexResultCallback_get_m_hitFractions_0,Bb=c._emscripten_bind_AllConvexResultCallback_get_m_hitNormalWorld_0=n._emscripten_bind_AllConvexResultCallback_get_m_hitNormalWorld_0,Cb=c._emscripten_bind_AllConvexResultCallback_get_m_hitPointWorld_0=n._emscripten_bind_AllConvexResultCallback_get_m_hitPointWorld_0,Db=c._emscripten_bind_AllConvexResultCallback_hasHit_0=n._emscripten_bind_AllConvexResultCallback_hasHit_0,
Fb=c._emscripten_bind_AllConvexResultCallback_set_m_closestHitFraction_1=n._emscripten_bind_AllConvexResultCallback_set_m_closestHitFraction_1,Gb=c._emscripten_bind_AllConvexResultCallback_set_m_collisionFilterGroup_1=n._emscripten_bind_AllConvexResultCallback_set_m_collisionFilterGroup_1,Hb=c._emscripten_bind_AllConvexResultCallback_set_m_collisionFilterMask_1=n._emscripten_bind_AllConvexResultCallback_set_m_collisionFilterMask_1,Ib=c._emscripten_bind_AllConvexResultCallback_set_m_collisionObjects_1=
n._emscripten_bind_AllConvexResultCallback_set_m_collisionObjects_1,Jb=c._emscripten_bind_AllConvexResultCallback_set_m_convexFromWorld_1=n._emscripten_bind_AllConvexResultCallback_set_m_convexFromWorld_1,Kb=c._emscripten_bind_AllConvexResultCallback_set_m_convexToWorld_1=n._emscripten_bind_AllConvexResultCallback_set_m_convexToWorld_1,Lb=c._emscripten_bind_AllConvexResultCallback_set_m_hitFractions_1=n._emscripten_bind_AllConvexResultCallback_set_m_hitFractions_1,Mb=c._emscripten_bind_AllConvexResultCallback_set_m_hitNormalWorld_1=
n._emscripten_bind_AllConvexResultCallback_set_m_hitNormalWorld_1,Nb=c._emscripten_bind_AllConvexResultCallback_set_m_hitPointWorld_1=n._emscripten_bind_AllConvexResultCallback_set_m_hitPointWorld_1,Ob=c._emscripten_bind_AllHitsRayResultCallback_AllHitsRayResultCallback_2=n._emscripten_bind_AllHitsRayResultCallback_AllHitsRayResultCallback_2,Pb=c._emscripten_bind_AllHitsRayResultCallback___destroy___0=n._emscripten_bind_AllHitsRayResultCallback___destroy___0,Qb=c._emscripten_bind_AllHitsRayResultCallback_get_m_closestHitFraction_0=
n._emscripten_bind_AllHitsRayResultCallback_get_m_closestHitFraction_0,Rb=c._emscripten_bind_AllHitsRayResultCallback_get_m_collisionFilterGroup_0=n._emscripten_bind_AllHitsRayResultCallback_get_m_collisionFilterGroup_0,Sb=c._emscripten_bind_AllHitsRayResultCallback_get_m_collisionFilterMask_0=n._emscripten_bind_AllHitsRayResultCallback_get_m_collisionFilterMask_0,Tb=c._emscripten_bind_AllHitsRayResultCallback_get_m_collisionObject_0=n._emscripten_bind_AllHitsRayResultCallback_get_m_collisionObject_0,
Ub=c._emscripten_bind_AllHitsRayResultCallback_get_m_collisionObjects_0=n._emscripten_bind_AllHitsRayResultCallback_get_m_collisionObjects_0,Vb=c._emscripten_bind_AllHitsRayResultCallback_get_m_hitFractions_0=n._emscripten_bind_AllHitsRayResultCallback_get_m_hitFractions_0,Wb=c._emscripten_bind_AllHitsRayResultCallback_get_m_hitNormalWorld_0=n._emscripten_bind_AllHitsRayResultCallback_get_m_hitNormalWorld_0,Xb=c._emscripten_bind_AllHitsRayResultCallback_get_m_hitPointWorld_0=n._emscripten_bind_AllHitsRayResultCallback_get_m_hitPointWorld_0,
Yb=c._emscripten_bind_AllHitsRayResultCallback_get_m_rayFromWorld_0=n._emscripten_bind_AllHitsRayResultCallback_get_m_rayFromWorld_0,Zb=c._emscripten_bind_AllHitsRayResultCallback_get_m_rayToWorld_0=n._emscripten_bind_AllHitsRayResultCallback_get_m_rayToWorld_0,$b=c._emscripten_bind_AllHitsRayResultCallback_hasHit_0=n._emscripten_bind_AllHitsRayResultCallback_hasHit_0,ac=c._emscripten_bind_AllHitsRayResultCallback_set_m_closestHitFraction_1=n._emscripten_bind_AllHitsRayResultCallback_set_m_closestHitFraction_1,
bc=c._emscripten_bind_AllHitsRayResultCallback_set_m_collisionFilterGroup_1=n._emscripten_bind_AllHitsRayResultCallback_set_m_collisionFilterGroup_1,cc=c._emscripten_bind_AllHitsRayResultCallback_set_m_collisionFilterMask_1=n._emscripten_bind_AllHitsRayResultCallback_set_m_collisionFilterMask_1,ec=c._emscripten_bind_AllHitsRayResultCallback_set_m_collisionObject_1=n._emscripten_bind_AllHitsRayResultCallback_set_m_collisionObject_1,fc=c._emscripten_bind_AllHitsRayResultCallback_set_m_collisionObjects_1=
n._emscripten_bind_AllHitsRayResultCallback_set_m_collisionObjects_1,hc=c._emscripten_bind_AllHitsRayResultCallback_set_m_hitFractions_1=n._emscripten_bind_AllHitsRayResultCallback_set_m_hitFractions_1,ic=c._emscripten_bind_AllHitsRayResultCallback_set_m_hitNormalWorld_1=n._emscripten_bind_AllHitsRayResultCallback_set_m_hitNormalWorld_1,jc=c._emscripten_bind_AllHitsRayResultCallback_set_m_hitPointWorld_1=n._emscripten_bind_AllHitsRayResultCallback_set_m_hitPointWorld_1,kc=c._emscripten_bind_AllHitsRayResultCallback_set_m_rayFromWorld_1=
n._emscripten_bind_AllHitsRayResultCallback_set_m_rayFromWorld_1,lc=c._emscripten_bind_AllHitsRayResultCallback_set_m_rayToWorld_1=n._emscripten_bind_AllHitsRayResultCallback_set_m_rayToWorld_1,mc=c._emscripten_bind_ClosestConvexResultCallback_ClosestConvexResultCallback_2=n._emscripten_bind_ClosestConvexResultCallback_ClosestConvexResultCallback_2,nc=c._emscripten_bind_ClosestConvexResultCallback___destroy___0=n._emscripten_bind_ClosestConvexResultCallback___destroy___0,oc=c._emscripten_bind_ClosestConvexResultCallback_get_m_closestHitFraction_0=
n._emscripten_bind_ClosestConvexResultCallback_get_m_closestHitFraction_0,pc=c._emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterGroup_0=n._emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterGroup_0,qc=c._emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterMask_0=n._emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterMask_0,rc=c._emscripten_bind_ClosestConvexResultCallback_get_m_convexFromWorld_0=n._emscripten_bind_ClosestConvexResultCallback_get_m_convexFromWorld_0,
sc=c._emscripten_bind_ClosestConvexResultCallback_get_m_convexToWorld_0=n._emscripten_bind_ClosestConvexResultCallback_get_m_convexToWorld_0,tc=c._emscripten_bind_ClosestConvexResultCallback_get_m_hitCollisionObject_0=n._emscripten_bind_ClosestConvexResultCallback_get_m_hitCollisionObject_0,uc=c._emscripten_bind_ClosestConvexResultCallback_get_m_hitNormalWorld_0=n._emscripten_bind_ClosestConvexResultCallback_get_m_hitNormalWorld_0,vc=c._emscripten_bind_ClosestConvexResultCallback_get_m_hitPointWorld_0=
n._emscripten_bind_ClosestConvexResultCallback_get_m_hitPointWorld_0,wc=c._emscripten_bind_ClosestConvexResultCallback_hasHit_0=n._emscripten_bind_ClosestConvexResultCallback_hasHit_0,xc=c._emscripten_bind_ClosestConvexResultCallback_set_m_closestHitFraction_1=n._emscripten_bind_ClosestConvexResultCallback_set_m_closestHitFraction_1,yc=c._emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterGroup_1=n._emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterGroup_1,zc=c._emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterMask_1=
n._emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterMask_1,Ac=c._emscripten_bind_ClosestConvexResultCallback_set_m_convexFromWorld_1=n._emscripten_bind_ClosestConvexResultCallback_set_m_convexFromWorld_1,Bc=c._emscripten_bind_ClosestConvexResultCallback_set_m_convexToWorld_1=n._emscripten_bind_ClosestConvexResultCallback_set_m_convexToWorld_1,Cc=c._emscripten_bind_ClosestConvexResultCallback_set_m_hitCollisionObject_1=n._emscripten_bind_ClosestConvexResultCallback_set_m_hitCollisionObject_1,
Dc=c._emscripten_bind_ClosestConvexResultCallback_set_m_hitNormalWorld_1=n._emscripten_bind_ClosestConvexResultCallback_set_m_hitNormalWorld_1,Ec=c._emscripten_bind_ClosestConvexResultCallback_set_m_hitPointWorld_1=n._emscripten_bind_ClosestConvexResultCallback_set_m_hitPointWorld_1,Fc=c._emscripten_bind_ClosestRayResultCallback_ClosestRayResultCallback_2=n._emscripten_bind_ClosestRayResultCallback_ClosestRayResultCallback_2,Gc=c._emscripten_bind_ClosestRayResultCallback___destroy___0=n._emscripten_bind_ClosestRayResultCallback___destroy___0,
Hc=c._emscripten_bind_ClosestRayResultCallback_get_m_closestHitFraction_0=n._emscripten_bind_ClosestRayResultCallback_get_m_closestHitFraction_0,Ic=c._emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterGroup_0=n._emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterGroup_0,Jc=c._emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterMask_0=n._emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterMask_0,Kc=c._emscripten_bind_ClosestRayResultCallback_get_m_collisionObject_0=
n._emscripten_bind_ClosestRayResultCallback_get_m_collisionObject_0,Lc=c._emscripten_bind_ClosestRayResultCallback_get_m_hitNormalWorld_0=n._emscripten_bind_ClosestRayResultCallback_get_m_hitNormalWorld_0,Mc=c._emscripten_bind_ClosestRayResultCallback_get_m_hitPointWorld_0=n._emscripten_bind_ClosestRayResultCallback_get_m_hitPointWorld_0,Nc=c._emscripten_bind_ClosestRayResultCallback_get_m_rayFromWorld_0=n._emscripten_bind_ClosestRayResultCallback_get_m_rayFromWorld_0,Oc=c._emscripten_bind_ClosestRayResultCallback_get_m_rayToWorld_0=
n._emscripten_bind_ClosestRayResultCallback_get_m_rayToWorld_0,Pc=c._emscripten_bind_ClosestRayResultCallback_hasHit_0=n._emscripten_bind_ClosestRayResultCallback_hasHit_0,Qc=c._emscripten_bind_ClosestRayResultCallback_set_m_closestHitFraction_1=n._emscripten_bind_ClosestRayResultCallback_set_m_closestHitFraction_1,Rc=c._emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterGroup_1=n._emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterGroup_1,Sc=c._emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterMask_1=
n._emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterMask_1,Tc=c._emscripten_bind_ClosestRayResultCallback_set_m_collisionObject_1=n._emscripten_bind_ClosestRayResultCallback_set_m_collisionObject_1,Uc=c._emscripten_bind_ClosestRayResultCallback_set_m_hitNormalWorld_1=n._emscripten_bind_ClosestRayResultCallback_set_m_hitNormalWorld_1,Vc=c._emscripten_bind_ClosestRayResultCallback_set_m_hitPointWorld_1=n._emscripten_bind_ClosestRayResultCallback_set_m_hitPointWorld_1,Wc=c._emscripten_bind_ClosestRayResultCallback_set_m_rayFromWorld_1=
n._emscripten_bind_ClosestRayResultCallback_set_m_rayFromWorld_1,Xc=c._emscripten_bind_ClosestRayResultCallback_set_m_rayToWorld_1=n._emscripten_bind_ClosestRayResultCallback_set_m_rayToWorld_1,Yc=c._emscripten_bind_ConcreteContactResultCallback_ConcreteContactResultCallback_0=n._emscripten_bind_ConcreteContactResultCallback_ConcreteContactResultCallback_0,Zc=c._emscripten_bind_ConcreteContactResultCallback___destroy___0=n._emscripten_bind_ConcreteContactResultCallback___destroy___0,$c=c._emscripten_bind_ConcreteContactResultCallback_addSingleResult_7=
n._emscripten_bind_ConcreteContactResultCallback_addSingleResult_7,ad=c._emscripten_bind_ContactResultCallback___destroy___0=n._emscripten_bind_ContactResultCallback___destroy___0,bd=c._emscripten_bind_ContactResultCallback_addSingleResult_7=n._emscripten_bind_ContactResultCallback_addSingleResult_7,cd=c._emscripten_bind_ConvexResultCallback___destroy___0=n._emscripten_bind_ConvexResultCallback___destroy___0,dd=c._emscripten_bind_ConvexResultCallback_get_m_closestHitFraction_0=n._emscripten_bind_ConvexResultCallback_get_m_closestHitFraction_0,
ed=c._emscripten_bind_ConvexResultCallback_get_m_collisionFilterGroup_0=n._emscripten_bind_ConvexResultCallback_get_m_collisionFilterGroup_0,fd=c._emscripten_bind_ConvexResultCallback_get_m_collisionFilterMask_0=n._emscripten_bind_ConvexResultCallback_get_m_collisionFilterMask_0,gd=c._emscripten_bind_ConvexResultCallback_hasHit_0=n._emscripten_bind_ConvexResultCallback_hasHit_0,hd=c._emscripten_bind_ConvexResultCallback_set_m_closestHitFraction_1=n._emscripten_bind_ConvexResultCallback_set_m_closestHitFraction_1,
id=c._emscripten_bind_ConvexResultCallback_set_m_collisionFilterGroup_1=n._emscripten_bind_ConvexResultCallback_set_m_collisionFilterGroup_1,jd=c._emscripten_bind_ConvexResultCallback_set_m_collisionFilterMask_1=n._emscripten_bind_ConvexResultCallback_set_m_collisionFilterMask_1,kd=c._emscripten_bind_LayaMotionState_LayaMotionState_0=n._emscripten_bind_LayaMotionState_LayaMotionState_0,ld=c._emscripten_bind_LayaMotionState___destroy___0=n._emscripten_bind_LayaMotionState___destroy___0,md=c._emscripten_bind_LayaMotionState_getWorldTransform_1=
n._emscripten_bind_LayaMotionState_getWorldTransform_1,nd=c._emscripten_bind_LayaMotionState_setWorldTransform_1=n._emscripten_bind_LayaMotionState_setWorldTransform_1,od=c._emscripten_bind_LocalConvexResult_LocalConvexResult_5=n._emscripten_bind_LocalConvexResult_LocalConvexResult_5,pd=c._emscripten_bind_LocalConvexResult___destroy___0=n._emscripten_bind_LocalConvexResult___destroy___0,qd=c._emscripten_bind_LocalConvexResult_get_m_hitCollisionObject_0=n._emscripten_bind_LocalConvexResult_get_m_hitCollisionObject_0,
rd=c._emscripten_bind_LocalConvexResult_get_m_hitFraction_0=n._emscripten_bind_LocalConvexResult_get_m_hitFraction_0,sd=c._emscripten_bind_LocalConvexResult_get_m_hitNormalLocal_0=n._emscripten_bind_LocalConvexResult_get_m_hitNormalLocal_0,td=c._emscripten_bind_LocalConvexResult_get_m_hitPointLocal_0=n._emscripten_bind_LocalConvexResult_get_m_hitPointLocal_0,ud=c._emscripten_bind_LocalConvexResult_get_m_localShapeInfo_0=n._emscripten_bind_LocalConvexResult_get_m_localShapeInfo_0,vd=c._emscripten_bind_LocalConvexResult_set_m_hitCollisionObject_1=
n._emscripten_bind_LocalConvexResult_set_m_hitCollisionObject_1,wd=c._emscripten_bind_LocalConvexResult_set_m_hitFraction_1=n._emscripten_bind_LocalConvexResult_set_m_hitFraction_1,xd=c._emscripten_bind_LocalConvexResult_set_m_hitNormalLocal_1=n._emscripten_bind_LocalConvexResult_set_m_hitNormalLocal_1,yd=c._emscripten_bind_LocalConvexResult_set_m_hitPointLocal_1=n._emscripten_bind_LocalConvexResult_set_m_hitPointLocal_1,zd=c._emscripten_bind_LocalConvexResult_set_m_localShapeInfo_1=n._emscripten_bind_LocalConvexResult_set_m_localShapeInfo_1,
Ad=c._emscripten_bind_LocalShapeInfo___destroy___0=n._emscripten_bind_LocalShapeInfo___destroy___0,Bd=c._emscripten_bind_LocalShapeInfo_get_m_shapePart_0=n._emscripten_bind_LocalShapeInfo_get_m_shapePart_0,Cd=c._emscripten_bind_LocalShapeInfo_get_m_triangleIndex_0=n._emscripten_bind_LocalShapeInfo_get_m_triangleIndex_0,Dd=c._emscripten_bind_LocalShapeInfo_set_m_shapePart_1=n._emscripten_bind_LocalShapeInfo_set_m_shapePart_1,Ed=c._emscripten_bind_LocalShapeInfo_set_m_triangleIndex_1=n._emscripten_bind_LocalShapeInfo_set_m_triangleIndex_1,
Fd=c._emscripten_bind_RayResultCallback___destroy___0=n._emscripten_bind_RayResultCallback___destroy___0,Gd=c._emscripten_bind_RayResultCallback_get_m_closestHitFraction_0=n._emscripten_bind_RayResultCallback_get_m_closestHitFraction_0,Hd=c._emscripten_bind_RayResultCallback_get_m_collisionFilterGroup_0=n._emscripten_bind_RayResultCallback_get_m_collisionFilterGroup_0,Id=c._emscripten_bind_RayResultCallback_get_m_collisionFilterMask_0=n._emscripten_bind_RayResultCallback_get_m_collisionFilterMask_0,
Jd=c._emscripten_bind_RayResultCallback_get_m_collisionObject_0=n._emscripten_bind_RayResultCallback_get_m_collisionObject_0,Kd=c._emscripten_bind_RayResultCallback_hasHit_0=n._emscripten_bind_RayResultCallback_hasHit_0,Ld=c._emscripten_bind_RayResultCallback_set_m_closestHitFraction_1=n._emscripten_bind_RayResultCallback_set_m_closestHitFraction_1,Md=c._emscripten_bind_RayResultCallback_set_m_collisionFilterGroup_1=n._emscripten_bind_RayResultCallback_set_m_collisionFilterGroup_1,Nd=c._emscripten_bind_RayResultCallback_set_m_collisionFilterMask_1=
n._emscripten_bind_RayResultCallback_set_m_collisionFilterMask_1,Od=c._emscripten_bind_RayResultCallback_set_m_collisionObject_1=n._emscripten_bind_RayResultCallback_set_m_collisionObject_1,Pd=c._emscripten_bind_RaycastInfo___destroy___0=n._emscripten_bind_RaycastInfo___destroy___0,Qd=c._emscripten_bind_RaycastInfo_get_m_contactNormalWS_0=n._emscripten_bind_RaycastInfo_get_m_contactNormalWS_0,Rd=c._emscripten_bind_RaycastInfo_get_m_contactPointWS_0=n._emscripten_bind_RaycastInfo_get_m_contactPointWS_0,
Sd=c._emscripten_bind_RaycastInfo_get_m_groundObject_0=n._emscripten_bind_RaycastInfo_get_m_groundObject_0,Td=c._emscripten_bind_RaycastInfo_get_m_hardPointWS_0=n._emscripten_bind_RaycastInfo_get_m_hardPointWS_0,Ud=c._emscripten_bind_RaycastInfo_get_m_isInContact_0=n._emscripten_bind_RaycastInfo_get_m_isInContact_0,Vd=c._emscripten_bind_RaycastInfo_get_m_suspensionLength_0=n._emscripten_bind_RaycastInfo_get_m_suspensionLength_0,Wd=c._emscripten_bind_RaycastInfo_get_m_wheelAxleWS_0=n._emscripten_bind_RaycastInfo_get_m_wheelAxleWS_0,
Xd=c._emscripten_bind_RaycastInfo_get_m_wheelDirectionWS_0=n._emscripten_bind_RaycastInfo_get_m_wheelDirectionWS_0,Yd=c._emscripten_bind_RaycastInfo_set_m_contactNormalWS_1=n._emscripten_bind_RaycastInfo_set_m_contactNormalWS_1,Zd=c._emscripten_bind_RaycastInfo_set_m_contactPointWS_1=n._emscripten_bind_RaycastInfo_set_m_contactPointWS_1,$d=c._emscripten_bind_RaycastInfo_set_m_groundObject_1=n._emscripten_bind_RaycastInfo_set_m_groundObject_1,ae=c._emscripten_bind_RaycastInfo_set_m_hardPointWS_1=n._emscripten_bind_RaycastInfo_set_m_hardPointWS_1,
be=c._emscripten_bind_RaycastInfo_set_m_isInContact_1=n._emscripten_bind_RaycastInfo_set_m_isInContact_1,ce=c._emscripten_bind_RaycastInfo_set_m_suspensionLength_1=n._emscripten_bind_RaycastInfo_set_m_suspensionLength_1,de=c._emscripten_bind_RaycastInfo_set_m_wheelAxleWS_1=n._emscripten_bind_RaycastInfo_set_m_wheelAxleWS_1,ee=c._emscripten_bind_RaycastInfo_set_m_wheelDirectionWS_1=n._emscripten_bind_RaycastInfo_set_m_wheelDirectionWS_1,fe=c._emscripten_bind_VoidPtr___destroy___0=n._emscripten_bind_VoidPtr___destroy___0,
ge=c._emscripten_bind_btActionInterface___destroy___0=n._emscripten_bind_btActionInterface___destroy___0,he=c._emscripten_bind_btActionInterface_updateAction_2=n._emscripten_bind_btActionInterface_updateAction_2,ie=c._emscripten_bind_btAxisSweep3___destroy___0=n._emscripten_bind_btAxisSweep3___destroy___0,je=c._emscripten_bind_btAxisSweep3_btAxisSweep3_2=n._emscripten_bind_btAxisSweep3_btAxisSweep3_2,ke=c._emscripten_bind_btAxisSweep3_btAxisSweep3_3=n._emscripten_bind_btAxisSweep3_btAxisSweep3_3,
le=c._emscripten_bind_btAxisSweep3_btAxisSweep3_4=n._emscripten_bind_btAxisSweep3_btAxisSweep3_4,me=c._emscripten_bind_btAxisSweep3_btAxisSweep3_5=n._emscripten_bind_btAxisSweep3_btAxisSweep3_5,ne=c._emscripten_bind_btBoxShape___destroy___0=n._emscripten_bind_btBoxShape___destroy___0,oe=c._emscripten_bind_btBoxShape_btBoxShape_1=n._emscripten_bind_btBoxShape_btBoxShape_1,pe=c._emscripten_bind_btBoxShape_calculateLocalInertia_2=n._emscripten_bind_btBoxShape_calculateLocalInertia_2,qe=c._emscripten_bind_btBoxShape_getLocalScaling_0=
n._emscripten_bind_btBoxShape_getLocalScaling_0,re=c._emscripten_bind_btBoxShape_getMargin_0=n._emscripten_bind_btBoxShape_getMargin_0,se=c._emscripten_bind_btBoxShape_setLocalScaling_1=n._emscripten_bind_btBoxShape_setLocalScaling_1,te=c._emscripten_bind_btBoxShape_setMargin_1=n._emscripten_bind_btBoxShape_setMargin_1,ue=c._emscripten_bind_btBroadphaseInterface___destroy___0=n._emscripten_bind_btBroadphaseInterface___destroy___0,ve=c._emscripten_bind_btBroadphaseProxy___destroy___0=n._emscripten_bind_btBroadphaseProxy___destroy___0,
we=c._emscripten_bind_btBroadphaseProxy_get_m_collisionFilterGroup_0=n._emscripten_bind_btBroadphaseProxy_get_m_collisionFilterGroup_0,xe=c._emscripten_bind_btBroadphaseProxy_get_m_collisionFilterMask_0=n._emscripten_bind_btBroadphaseProxy_get_m_collisionFilterMask_0,ye=c._emscripten_bind_btBroadphaseProxy_set_m_collisionFilterGroup_1=n._emscripten_bind_btBroadphaseProxy_set_m_collisionFilterGroup_1,ze=c._emscripten_bind_btBroadphaseProxy_set_m_collisionFilterMask_1=n._emscripten_bind_btBroadphaseProxy_set_m_collisionFilterMask_1,
Ae=c._emscripten_bind_btBvhTriangleMeshShape___destroy___0=n._emscripten_bind_btBvhTriangleMeshShape___destroy___0,Be=c._emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_2=n._emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_2,Ce=c._emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_3=n._emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_3,De=c._emscripten_bind_btBvhTriangleMeshShape_calculateLocalInertia_2=n._emscripten_bind_btBvhTriangleMeshShape_calculateLocalInertia_2,
Ee=c._emscripten_bind_btBvhTriangleMeshShape_getLocalScaling_0=n._emscripten_bind_btBvhTriangleMeshShape_getLocalScaling_0,Fe=c._emscripten_bind_btBvhTriangleMeshShape_setLocalScaling_1=n._emscripten_bind_btBvhTriangleMeshShape_setLocalScaling_1,Ge=c._emscripten_bind_btCapsuleShapeX___destroy___0=n._emscripten_bind_btCapsuleShapeX___destroy___0,He=c._emscripten_bind_btCapsuleShapeX_btCapsuleShapeX_2=n._emscripten_bind_btCapsuleShapeX_btCapsuleShapeX_2,Ie=c._emscripten_bind_btCapsuleShapeX_calculateLocalInertia_2=
n._emscripten_bind_btCapsuleShapeX_calculateLocalInertia_2,Je=c._emscripten_bind_btCapsuleShapeX_getHalfHeight_0=n._emscripten_bind_btCapsuleShapeX_getHalfHeight_0,Ke=c._emscripten_bind_btCapsuleShapeX_getLocalScaling_0=n._emscripten_bind_btCapsuleShapeX_getLocalScaling_0,Le=c._emscripten_bind_btCapsuleShapeX_getMargin_0=n._emscripten_bind_btCapsuleShapeX_getMargin_0,Me=c._emscripten_bind_btCapsuleShapeX_getRadius_0=n._emscripten_bind_btCapsuleShapeX_getRadius_0,Ne=c._emscripten_bind_btCapsuleShapeX_getUpAxis_0=
n._emscripten_bind_btCapsuleShapeX_getUpAxis_0,Oe=c._emscripten_bind_btCapsuleShapeX_setLocalScaling_1=n._emscripten_bind_btCapsuleShapeX_setLocalScaling_1,Pe=c._emscripten_bind_btCapsuleShapeX_setMargin_1=n._emscripten_bind_btCapsuleShapeX_setMargin_1,Qe=c._emscripten_bind_btCapsuleShapeZ___destroy___0=n._emscripten_bind_btCapsuleShapeZ___destroy___0,Re=c._emscripten_bind_btCapsuleShapeZ_btCapsuleShapeZ_2=n._emscripten_bind_btCapsuleShapeZ_btCapsuleShapeZ_2,Se=c._emscripten_bind_btCapsuleShapeZ_calculateLocalInertia_2=
n._emscripten_bind_btCapsuleShapeZ_calculateLocalInertia_2,Te=c._emscripten_bind_btCapsuleShapeZ_getHalfHeight_0=n._emscripten_bind_btCapsuleShapeZ_getHalfHeight_0,Ue=c._emscripten_bind_btCapsuleShapeZ_getLocalScaling_0=n._emscripten_bind_btCapsuleShapeZ_getLocalScaling_0,Ve=c._emscripten_bind_btCapsuleShapeZ_getMargin_0=n._emscripten_bind_btCapsuleShapeZ_getMargin_0,We=c._emscripten_bind_btCapsuleShapeZ_getRadius_0=n._emscripten_bind_btCapsuleShapeZ_getRadius_0,Xe=c._emscripten_bind_btCapsuleShapeZ_getUpAxis_0=
n._emscripten_bind_btCapsuleShapeZ_getUpAxis_0,Ye=c._emscripten_bind_btCapsuleShapeZ_setLocalScaling_1=n._emscripten_bind_btCapsuleShapeZ_setLocalScaling_1,Ze=c._emscripten_bind_btCapsuleShapeZ_setMargin_1=n._emscripten_bind_btCapsuleShapeZ_setMargin_1,$e=c._emscripten_bind_btCapsuleShape___destroy___0=n._emscripten_bind_btCapsuleShape___destroy___0,af=c._emscripten_bind_btCapsuleShape_btCapsuleShape_2=n._emscripten_bind_btCapsuleShape_btCapsuleShape_2,bf=c._emscripten_bind_btCapsuleShape_calculateLocalInertia_2=
n._emscripten_bind_btCapsuleShape_calculateLocalInertia_2,cf=c._emscripten_bind_btCapsuleShape_getHalfHeight_0=n._emscripten_bind_btCapsuleShape_getHalfHeight_0,df=c._emscripten_bind_btCapsuleShape_getLocalScaling_0=n._emscripten_bind_btCapsuleShape_getLocalScaling_0,ef=c._emscripten_bind_btCapsuleShape_getMargin_0=n._emscripten_bind_btCapsuleShape_getMargin_0,ff=c._emscripten_bind_btCapsuleShape_getRadius_0=n._emscripten_bind_btCapsuleShape_getRadius_0,gf=c._emscripten_bind_btCapsuleShape_getUpAxis_0=
n._emscripten_bind_btCapsuleShape_getUpAxis_0,hf=c._emscripten_bind_btCapsuleShape_setLocalScaling_1=n._emscripten_bind_btCapsuleShape_setLocalScaling_1,jf=c._emscripten_bind_btCapsuleShape_setMargin_1=n._emscripten_bind_btCapsuleShape_setMargin_1,kf=c._emscripten_bind_btCollisionConfiguration___destroy___0=n._emscripten_bind_btCollisionConfiguration___destroy___0,lf=c._emscripten_bind_btCollisionDispatcher___destroy___0=n._emscripten_bind_btCollisionDispatcher___destroy___0,mf=c._emscripten_bind_btCollisionDispatcher_btCollisionDispatcher_1=
n._emscripten_bind_btCollisionDispatcher_btCollisionDispatcher_1,nf=c._emscripten_bind_btCollisionDispatcher_getManifoldByIndexInternal_1=n._emscripten_bind_btCollisionDispatcher_getManifoldByIndexInternal_1,of=c._emscripten_bind_btCollisionDispatcher_getNumManifolds_0=n._emscripten_bind_btCollisionDispatcher_getNumManifolds_0,pf=c._emscripten_bind_btCollisionObject___destroy___0=n._emscripten_bind_btCollisionObject___destroy___0,qf=c._emscripten_bind_btCollisionObject_activate_0=n._emscripten_bind_btCollisionObject_activate_0,
rf=c._emscripten_bind_btCollisionObject_activate_1=n._emscripten_bind_btCollisionObject_activate_1,sf=c._emscripten_bind_btCollisionObject_btCollisionObject_0=n._emscripten_bind_btCollisionObject_btCollisionObject_0,tf=c._emscripten_bind_btCollisionObject_forceActivationState_1=n._emscripten_bind_btCollisionObject_forceActivationState_1,uf=c._emscripten_bind_btCollisionObject_getBroadphaseHandle_0=n._emscripten_bind_btCollisionObject_getBroadphaseHandle_0,vf=c._emscripten_bind_btCollisionObject_getCcdMotionThreshold_0=
n._emscripten_bind_btCollisionObject_getCcdMotionThreshold_0,wf=c._emscripten_bind_btCollisionObject_getCcdSweptSphereRadius_0=n._emscripten_bind_btCollisionObject_getCcdSweptSphereRadius_0,xf=c._emscripten_bind_btCollisionObject_getCollisionFlags_0=n._emscripten_bind_btCollisionObject_getCollisionFlags_0,yf=c._emscripten_bind_btCollisionObject_getCollisionShape_0=n._emscripten_bind_btCollisionObject_getCollisionShape_0,zf=c._emscripten_bind_btCollisionObject_getFriction_0=n._emscripten_bind_btCollisionObject_getFriction_0,
Af=c._emscripten_bind_btCollisionObject_getInterpolationAngularVelocity_0=n._emscripten_bind_btCollisionObject_getInterpolationAngularVelocity_0,Bf=c._emscripten_bind_btCollisionObject_getInterpolationLinearVelocity_0=n._emscripten_bind_btCollisionObject_getInterpolationLinearVelocity_0,Cf=c._emscripten_bind_btCollisionObject_getRestitution_0=n._emscripten_bind_btCollisionObject_getRestitution_0,Df=c._emscripten_bind_btCollisionObject_getRollingFriction_0=n._emscripten_bind_btCollisionObject_getRollingFriction_0,
Ef=c._emscripten_bind_btCollisionObject_getUserIndex_0=n._emscripten_bind_btCollisionObject_getUserIndex_0,Ff=c._emscripten_bind_btCollisionObject_getUserPointer_0=n._emscripten_bind_btCollisionObject_getUserPointer_0,Gf=c._emscripten_bind_btCollisionObject_getWorldTransform_0=n._emscripten_bind_btCollisionObject_getWorldTransform_0,Hf=c._emscripten_bind_btCollisionObject_isActive_0=n._emscripten_bind_btCollisionObject_isActive_0,If=c._emscripten_bind_btCollisionObject_isKinematicObject_0=n._emscripten_bind_btCollisionObject_isKinematicObject_0,
Jf=c._emscripten_bind_btCollisionObject_isStaticObject_0=n._emscripten_bind_btCollisionObject_isStaticObject_0,Kf=c._emscripten_bind_btCollisionObject_isStaticOrKinematicObject_0=n._emscripten_bind_btCollisionObject_isStaticOrKinematicObject_0,Lf=c._emscripten_bind_btCollisionObject_setActivationState_1=n._emscripten_bind_btCollisionObject_setActivationState_1,Mf=c._emscripten_bind_btCollisionObject_setAnisotropicFriction_2=n._emscripten_bind_btCollisionObject_setAnisotropicFriction_2,Nf=c._emscripten_bind_btCollisionObject_setCcdMotionThreshold_1=
n._emscripten_bind_btCollisionObject_setCcdMotionThreshold_1,Of=c._emscripten_bind_btCollisionObject_setCcdSweptSphereRadius_1=n._emscripten_bind_btCollisionObject_setCcdSweptSphereRadius_1,Pf=c._emscripten_bind_btCollisionObject_setCollisionFlags_1=n._emscripten_bind_btCollisionObject_setCollisionFlags_1,Qf=c._emscripten_bind_btCollisionObject_setCollisionShape_1=n._emscripten_bind_btCollisionObject_setCollisionShape_1,Rf=c._emscripten_bind_btCollisionObject_setContactProcessingThreshold_1=n._emscripten_bind_btCollisionObject_setContactProcessingThreshold_1,
Sf=c._emscripten_bind_btCollisionObject_setFriction_1=n._emscripten_bind_btCollisionObject_setFriction_1,Tf=c._emscripten_bind_btCollisionObject_setInterpolationAngularVelocity_1=n._emscripten_bind_btCollisionObject_setInterpolationAngularVelocity_1,Uf=c._emscripten_bind_btCollisionObject_setInterpolationLinearVelocity_1=n._emscripten_bind_btCollisionObject_setInterpolationLinearVelocity_1,Vf=c._emscripten_bind_btCollisionObject_setRestitution_1=n._emscripten_bind_btCollisionObject_setRestitution_1,
Wf=c._emscripten_bind_btCollisionObject_setRollingFriction_1=n._emscripten_bind_btCollisionObject_setRollingFriction_1,Xf=c._emscripten_bind_btCollisionObject_setUserIndex_1=n._emscripten_bind_btCollisionObject_setUserIndex_1,Yf=c._emscripten_bind_btCollisionObject_setUserPointer_1=n._emscripten_bind_btCollisionObject_setUserPointer_1,Zf=c._emscripten_bind_btCollisionObject_setWorldTransform_1=n._emscripten_bind_btCollisionObject_setWorldTransform_1,$f=c._emscripten_bind_btCollisionShape___destroy___0=
n._emscripten_bind_btCollisionShape___destroy___0,ag=c._emscripten_bind_btCollisionShape_calculateLocalInertia_2=n._emscripten_bind_btCollisionShape_calculateLocalInertia_2,bg=c._emscripten_bind_btCollisionShape_getLocalScaling_0=n._emscripten_bind_btCollisionShape_getLocalScaling_0,cg=c._emscripten_bind_btCollisionShape_getMargin_0=n._emscripten_bind_btCollisionShape_getMargin_0,dg=c._emscripten_bind_btCollisionShape_setLocalScaling_1=n._emscripten_bind_btCollisionShape_setLocalScaling_1,eg=c._emscripten_bind_btCollisionShape_setMargin_1=
n._emscripten_bind_btCollisionShape_setMargin_1,fg=c._emscripten_bind_btCollisionWorld___destroy___0=n._emscripten_bind_btCollisionWorld___destroy___0,gg=c._emscripten_bind_btCollisionWorld_addCollisionObject_1=n._emscripten_bind_btCollisionWorld_addCollisionObject_1,hg=c._emscripten_bind_btCollisionWorld_addCollisionObject_2=n._emscripten_bind_btCollisionWorld_addCollisionObject_2,ig=c._emscripten_bind_btCollisionWorld_addCollisionObject_3=n._emscripten_bind_btCollisionWorld_addCollisionObject_3,
jg=c._emscripten_bind_btCollisionWorld_contactPairTest_3=n._emscripten_bind_btCollisionWorld_contactPairTest_3,kg=c._emscripten_bind_btCollisionWorld_contactTest_2=n._emscripten_bind_btCollisionWorld_contactTest_2,lg=c._emscripten_bind_btCollisionWorld_convexSweepTest_5=n._emscripten_bind_btCollisionWorld_convexSweepTest_5,mg=c._emscripten_bind_btCollisionWorld_getBroadphase_0=n._emscripten_bind_btCollisionWorld_getBroadphase_0,ng=c._emscripten_bind_btCollisionWorld_getDispatchInfo_0=n._emscripten_bind_btCollisionWorld_getDispatchInfo_0,
og=c._emscripten_bind_btCollisionWorld_getDispatcher_0=n._emscripten_bind_btCollisionWorld_getDispatcher_0,pg=c._emscripten_bind_btCollisionWorld_getPairCache_0=n._emscripten_bind_btCollisionWorld_getPairCache_0,qg=c._emscripten_bind_btCollisionWorld_rayTest_3=n._emscripten_bind_btCollisionWorld_rayTest_3,rg=c._emscripten_bind_btCollisionWorld_removeCollisionObject_1=n._emscripten_bind_btCollisionWorld_removeCollisionObject_1,sg=c._emscripten_bind_btCollisionWorld_updateSingleAabb_1=n._emscripten_bind_btCollisionWorld_updateSingleAabb_1,
tg=c._emscripten_bind_btCompoundShape___destroy___0=n._emscripten_bind_btCompoundShape___destroy___0,ug=c._emscripten_bind_btCompoundShape_addChildShape_2=n._emscripten_bind_btCompoundShape_addChildShape_2,vg=c._emscripten_bind_btCompoundShape_btCompoundShape_0=n._emscripten_bind_btCompoundShape_btCompoundShape_0,wg=c._emscripten_bind_btCompoundShape_btCompoundShape_1=n._emscripten_bind_btCompoundShape_btCompoundShape_1,xg=c._emscripten_bind_btCompoundShape_calculateLocalInertia_2=n._emscripten_bind_btCompoundShape_calculateLocalInertia_2,
yg=c._emscripten_bind_btCompoundShape_getChildShape_1=n._emscripten_bind_btCompoundShape_getChildShape_1,zg=c._emscripten_bind_btCompoundShape_getLocalScaling_0=n._emscripten_bind_btCompoundShape_getLocalScaling_0,Ag=c._emscripten_bind_btCompoundShape_getMargin_0=n._emscripten_bind_btCompoundShape_getMargin_0,Bg=c._emscripten_bind_btCompoundShape_getNumChildShapes_0=n._emscripten_bind_btCompoundShape_getNumChildShapes_0,Cg=c._emscripten_bind_btCompoundShape_removeChildShapeByIndex_1=n._emscripten_bind_btCompoundShape_removeChildShapeByIndex_1,
Dg=c._emscripten_bind_btCompoundShape_setLocalScaling_1=n._emscripten_bind_btCompoundShape_setLocalScaling_1,Eg=c._emscripten_bind_btCompoundShape_setMargin_1=n._emscripten_bind_btCompoundShape_setMargin_1,Fg=c._emscripten_bind_btCompoundShape_updateChildTransform_2=n._emscripten_bind_btCompoundShape_updateChildTransform_2,Gg=c._emscripten_bind_btCompoundShape_updateChildTransform_3=n._emscripten_bind_btCompoundShape_updateChildTransform_3,Hg=c._emscripten_bind_btConcaveShape___destroy___0=n._emscripten_bind_btConcaveShape___destroy___0,
Ig=c._emscripten_bind_btConcaveShape_calculateLocalInertia_2=n._emscripten_bind_btConcaveShape_calculateLocalInertia_2,Jg=c._emscripten_bind_btConcaveShape_getLocalScaling_0=n._emscripten_bind_btConcaveShape_getLocalScaling_0,Kg=c._emscripten_bind_btConcaveShape_setLocalScaling_1=n._emscripten_bind_btConcaveShape_setLocalScaling_1,Lg=c._emscripten_bind_btConeShapeX___destroy___0=n._emscripten_bind_btConeShapeX___destroy___0,Mg=c._emscripten_bind_btConeShapeX_btConeShapeX_2=n._emscripten_bind_btConeShapeX_btConeShapeX_2,
Ng=c._emscripten_bind_btConeShapeX_calculateLocalInertia_2=n._emscripten_bind_btConeShapeX_calculateLocalInertia_2,Og=c._emscripten_bind_btConeShapeX_getLocalScaling_0=n._emscripten_bind_btConeShapeX_getLocalScaling_0,Pg=c._emscripten_bind_btConeShapeX_setLocalScaling_1=n._emscripten_bind_btConeShapeX_setLocalScaling_1,Qg=c._emscripten_bind_btConeShapeZ___destroy___0=n._emscripten_bind_btConeShapeZ___destroy___0,Rg=c._emscripten_bind_btConeShapeZ_btConeShapeZ_2=n._emscripten_bind_btConeShapeZ_btConeShapeZ_2,
Sg=c._emscripten_bind_btConeShapeZ_calculateLocalInertia_2=n._emscripten_bind_btConeShapeZ_calculateLocalInertia_2,Tg=c._emscripten_bind_btConeShapeZ_getLocalScaling_0=n._emscripten_bind_btConeShapeZ_getLocalScaling_0,Ug=c._emscripten_bind_btConeShapeZ_setLocalScaling_1=n._emscripten_bind_btConeShapeZ_setLocalScaling_1,Vg=c._emscripten_bind_btConeShape___destroy___0=n._emscripten_bind_btConeShape___destroy___0,Wg=c._emscripten_bind_btConeShape_btConeShape_2=n._emscripten_bind_btConeShape_btConeShape_2,
Xg=c._emscripten_bind_btConeShape_calculateLocalInertia_2=n._emscripten_bind_btConeShape_calculateLocalInertia_2,Yg=c._emscripten_bind_btConeShape_getLocalScaling_0=n._emscripten_bind_btConeShape_getLocalScaling_0,Zg=c._emscripten_bind_btConeShape_setLocalScaling_1=n._emscripten_bind_btConeShape_setLocalScaling_1,$g=c._emscripten_bind_btConeTwistConstraint___destroy___0=n._emscripten_bind_btConeTwistConstraint___destroy___0,ah=c._emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_2=n._emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_2,
bh=c._emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_4=n._emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_4,ch=c._emscripten_bind_btConeTwistConstraint_enableFeedback_1=n._emscripten_bind_btConeTwistConstraint_enableFeedback_1,dh=c._emscripten_bind_btConeTwistConstraint_enableMotor_1=n._emscripten_bind_btConeTwistConstraint_enableMotor_1,eh=c._emscripten_bind_btConeTwistConstraint_getBreakingImpulseThreshold_0=n._emscripten_bind_btConeTwistConstraint_getBreakingImpulseThreshold_0,
fh=c._emscripten_bind_btConeTwistConstraint_getParam_2=n._emscripten_bind_btConeTwistConstraint_getParam_2,gh=c._emscripten_bind_btConeTwistConstraint_setAngularOnly_1=n._emscripten_bind_btConeTwistConstraint_setAngularOnly_1,hh=c._emscripten_bind_btConeTwistConstraint_setBreakingImpulseThreshold_1=n._emscripten_bind_btConeTwistConstraint_setBreakingImpulseThreshold_1,ih=c._emscripten_bind_btConeTwistConstraint_setDamping_1=n._emscripten_bind_btConeTwistConstraint_setDamping_1,jh=c._emscripten_bind_btConeTwistConstraint_setLimit_2=
n._emscripten_bind_btConeTwistConstraint_setLimit_2,kh=c._emscripten_bind_btConeTwistConstraint_setMaxMotorImpulseNormalized_1=n._emscripten_bind_btConeTwistConstraint_setMaxMotorImpulseNormalized_1,lh=c._emscripten_bind_btConeTwistConstraint_setMaxMotorImpulse_1=n._emscripten_bind_btConeTwistConstraint_setMaxMotorImpulse_1,mh=c._emscripten_bind_btConeTwistConstraint_setMotorTargetInConstraintSpace_1=n._emscripten_bind_btConeTwistConstraint_setMotorTargetInConstraintSpace_1,nh=c._emscripten_bind_btConeTwistConstraint_setMotorTarget_1=
n._emscripten_bind_btConeTwistConstraint_setMotorTarget_1,oh=c._emscripten_bind_btConeTwistConstraint_setParam_3=n._emscripten_bind_btConeTwistConstraint_setParam_3,ph=c._emscripten_bind_btConstraintSetting___destroy___0=n._emscripten_bind_btConstraintSetting___destroy___0,qh=c._emscripten_bind_btConstraintSetting_btConstraintSetting_0=n._emscripten_bind_btConstraintSetting_btConstraintSetting_0,rh=c._emscripten_bind_btConstraintSetting_get_m_damping_0=n._emscripten_bind_btConstraintSetting_get_m_damping_0,
sh=c._emscripten_bind_btConstraintSetting_get_m_impulseClamp_0=n._emscripten_bind_btConstraintSetting_get_m_impulseClamp_0,th=c._emscripten_bind_btConstraintSetting_get_m_tau_0=n._emscripten_bind_btConstraintSetting_get_m_tau_0,uh=c._emscripten_bind_btConstraintSetting_set_m_damping_1=n._emscripten_bind_btConstraintSetting_set_m_damping_1,vh=c._emscripten_bind_btConstraintSetting_set_m_impulseClamp_1=n._emscripten_bind_btConstraintSetting_set_m_impulseClamp_1,wh=c._emscripten_bind_btConstraintSetting_set_m_tau_1=
n._emscripten_bind_btConstraintSetting_set_m_tau_1,xh=c._emscripten_bind_btConstraintSolver___destroy___0=n._emscripten_bind_btConstraintSolver___destroy___0,yh=c._emscripten_bind_btContactSolverInfo___destroy___0=n._emscripten_bind_btContactSolverInfo___destroy___0,zh=c._emscripten_bind_btContactSolverInfo_get_m_numIterations_0=n._emscripten_bind_btContactSolverInfo_get_m_numIterations_0,Ah=c._emscripten_bind_btContactSolverInfo_get_m_solverMode_0=n._emscripten_bind_btContactSolverInfo_get_m_solverMode_0,
Bh=c._emscripten_bind_btContactSolverInfo_get_m_splitImpulsePenetrationThreshold_0=n._emscripten_bind_btContactSolverInfo_get_m_splitImpulsePenetrationThreshold_0,Ch=c._emscripten_bind_btContactSolverInfo_get_m_splitImpulse_0=n._emscripten_bind_btContactSolverInfo_get_m_splitImpulse_0,Dh=c._emscripten_bind_btContactSolverInfo_set_m_numIterations_1=n._emscripten_bind_btContactSolverInfo_set_m_numIterations_1,Eh=c._emscripten_bind_btContactSolverInfo_set_m_solverMode_1=n._emscripten_bind_btContactSolverInfo_set_m_solverMode_1,
Fh=c._emscripten_bind_btContactSolverInfo_set_m_splitImpulsePenetrationThreshold_1=n._emscripten_bind_btContactSolverInfo_set_m_splitImpulsePenetrationThreshold_1,Gh=c._emscripten_bind_btContactSolverInfo_set_m_splitImpulse_1=n._emscripten_bind_btContactSolverInfo_set_m_splitImpulse_1,Hh=c._emscripten_bind_btConvexHullShape___destroy___0=n._emscripten_bind_btConvexHullShape___destroy___0,Ih=c._emscripten_bind_btConvexHullShape_addPoint_1=n._emscripten_bind_btConvexHullShape_addPoint_1,Jh=c._emscripten_bind_btConvexHullShape_addPoint_2=
n._emscripten_bind_btConvexHullShape_addPoint_2,Kh=c._emscripten_bind_btConvexHullShape_btConvexHullShape_0=n._emscripten_bind_btConvexHullShape_btConvexHullShape_0,Lh=c._emscripten_bind_btConvexHullShape_calculateLocalInertia_2=n._emscripten_bind_btConvexHullShape_calculateLocalInertia_2,Mh=c._emscripten_bind_btConvexHullShape_getLocalScaling_0=n._emscripten_bind_btConvexHullShape_getLocalScaling_0,Nh=c._emscripten_bind_btConvexHullShape_getMargin_0=n._emscripten_bind_btConvexHullShape_getMargin_0,
Oh=c._emscripten_bind_btConvexHullShape_setLocalScaling_1=n._emscripten_bind_btConvexHullShape_setLocalScaling_1,Ph=c._emscripten_bind_btConvexHullShape_setMargin_1=n._emscripten_bind_btConvexHullShape_setMargin_1,Qh=c._emscripten_bind_btConvexShape___destroy___0=n._emscripten_bind_btConvexShape___destroy___0,Rh=c._emscripten_bind_btConvexShape_calculateLocalInertia_2=n._emscripten_bind_btConvexShape_calculateLocalInertia_2,Sh=c._emscripten_bind_btConvexShape_getLocalScaling_0=n._emscripten_bind_btConvexShape_getLocalScaling_0,
Th=c._emscripten_bind_btConvexShape_getMargin_0=n._emscripten_bind_btConvexShape_getMargin_0,Uh=c._emscripten_bind_btConvexShape_setLocalScaling_1=n._emscripten_bind_btConvexShape_setLocalScaling_1,Vh=c._emscripten_bind_btConvexShape_setMargin_1=n._emscripten_bind_btConvexShape_setMargin_1,Wh=c._emscripten_bind_btConvexTriangleMeshShape___destroy___0=n._emscripten_bind_btConvexTriangleMeshShape___destroy___0,Xh=c._emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_1=n._emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_1,
Yh=c._emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_2=n._emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_2,Zh=c._emscripten_bind_btConvexTriangleMeshShape_calculateLocalInertia_2=n._emscripten_bind_btConvexTriangleMeshShape_calculateLocalInertia_2,$h=c._emscripten_bind_btConvexTriangleMeshShape_getLocalScaling_0=n._emscripten_bind_btConvexTriangleMeshShape_getLocalScaling_0,ai=c._emscripten_bind_btConvexTriangleMeshShape_getMargin_0=n._emscripten_bind_btConvexTriangleMeshShape_getMargin_0,
bi=c._emscripten_bind_btConvexTriangleMeshShape_setLocalScaling_1=n._emscripten_bind_btConvexTriangleMeshShape_setLocalScaling_1,ci=c._emscripten_bind_btConvexTriangleMeshShape_setMargin_1=n._emscripten_bind_btConvexTriangleMeshShape_setMargin_1,di=c._emscripten_bind_btCylinderShapeX___destroy___0=n._emscripten_bind_btCylinderShapeX___destroy___0,ei=c._emscripten_bind_btCylinderShapeX_btCylinderShapeX_1=n._emscripten_bind_btCylinderShapeX_btCylinderShapeX_1,fi=c._emscripten_bind_btCylinderShapeX_calculateLocalInertia_2=
n._emscripten_bind_btCylinderShapeX_calculateLocalInertia_2,gi=c._emscripten_bind_btCylinderShapeX_getLocalScaling_0=n._emscripten_bind_btCylinderShapeX_getLocalScaling_0,hi=c._emscripten_bind_btCylinderShapeX_getMargin_0=n._emscripten_bind_btCylinderShapeX_getMargin_0,ii=c._emscripten_bind_btCylinderShapeX_setLocalScaling_1=n._emscripten_bind_btCylinderShapeX_setLocalScaling_1,ji=c._emscripten_bind_btCylinderShapeX_setMargin_1=n._emscripten_bind_btCylinderShapeX_setMargin_1,ki=c._emscripten_bind_btCylinderShapeZ___destroy___0=
n._emscripten_bind_btCylinderShapeZ___destroy___0,li=c._emscripten_bind_btCylinderShapeZ_btCylinderShapeZ_1=n._emscripten_bind_btCylinderShapeZ_btCylinderShapeZ_1,mi=c._emscripten_bind_btCylinderShapeZ_calculateLocalInertia_2=n._emscripten_bind_btCylinderShapeZ_calculateLocalInertia_2,ni=c._emscripten_bind_btCylinderShapeZ_getLocalScaling_0=n._emscripten_bind_btCylinderShapeZ_getLocalScaling_0,oi=c._emscripten_bind_btCylinderShapeZ_getMargin_0=n._emscripten_bind_btCylinderShapeZ_getMargin_0,pi=c._emscripten_bind_btCylinderShapeZ_setLocalScaling_1=
n._emscripten_bind_btCylinderShapeZ_setLocalScaling_1,qi=c._emscripten_bind_btCylinderShapeZ_setMargin_1=n._emscripten_bind_btCylinderShapeZ_setMargin_1,ri=c._emscripten_bind_btCylinderShape___destroy___0=n._emscripten_bind_btCylinderShape___destroy___0,si=c._emscripten_bind_btCylinderShape_btCylinderShape_1=n._emscripten_bind_btCylinderShape_btCylinderShape_1,ti=c._emscripten_bind_btCylinderShape_calculateLocalInertia_2=n._emscripten_bind_btCylinderShape_calculateLocalInertia_2,ui=c._emscripten_bind_btCylinderShape_getLocalScaling_0=
n._emscripten_bind_btCylinderShape_getLocalScaling_0,vi=c._emscripten_bind_btCylinderShape_getMargin_0=n._emscripten_bind_btCylinderShape_getMargin_0,wi=c._emscripten_bind_btCylinderShape_setLocalScaling_1=n._emscripten_bind_btCylinderShape_setLocalScaling_1,xi=c._emscripten_bind_btCylinderShape_setMargin_1=n._emscripten_bind_btCylinderShape_setMargin_1,yi=c._emscripten_bind_btDbvtBroadphase___destroy___0=n._emscripten_bind_btDbvtBroadphase___destroy___0,zi=c._emscripten_bind_btDbvtBroadphase_btDbvtBroadphase_0=
n._emscripten_bind_btDbvtBroadphase_btDbvtBroadphase_0,Ai=c._emscripten_bind_btDbvtBroadphase_getOverlappingPairCache_0=n._emscripten_bind_btDbvtBroadphase_getOverlappingPairCache_0,Bi=c._emscripten_bind_btDefaultCollisionConfiguration___destroy___0=n._emscripten_bind_btDefaultCollisionConfiguration___destroy___0,Ci=c._emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_0=n._emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_0,Di=c._emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_1=
n._emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_1,Ei=c._emscripten_bind_btDefaultCollisionConstructionInfo___destroy___0=n._emscripten_bind_btDefaultCollisionConstructionInfo___destroy___0,Fi=c._emscripten_bind_btDefaultCollisionConstructionInfo_btDefaultCollisionConstructionInfo_0=n._emscripten_bind_btDefaultCollisionConstructionInfo_btDefaultCollisionConstructionInfo_0,Gi=c._emscripten_bind_btDefaultMotionState___destroy___0=n._emscripten_bind_btDefaultMotionState___destroy___0,
Hi=c._emscripten_bind_btDefaultMotionState_btDefaultMotionState_0=n._emscripten_bind_btDefaultMotionState_btDefaultMotionState_0,Ii=c._emscripten_bind_btDefaultMotionState_btDefaultMotionState_1=n._emscripten_bind_btDefaultMotionState_btDefaultMotionState_1,Ji=c._emscripten_bind_btDefaultMotionState_btDefaultMotionState_2=n._emscripten_bind_btDefaultMotionState_btDefaultMotionState_2,Ki=c._emscripten_bind_btDefaultMotionState_getWorldTransform_1=n._emscripten_bind_btDefaultMotionState_getWorldTransform_1,
Li=c._emscripten_bind_btDefaultMotionState_get_m_graphicsWorldTrans_0=n._emscripten_bind_btDefaultMotionState_get_m_graphicsWorldTrans_0,Mi=c._emscripten_bind_btDefaultMotionState_setWorldTransform_1=n._emscripten_bind_btDefaultMotionState_setWorldTransform_1,Ni=c._emscripten_bind_btDefaultMotionState_set_m_graphicsWorldTrans_1=n._emscripten_bind_btDefaultMotionState_set_m_graphicsWorldTrans_1,Oi=c._emscripten_bind_btDefaultVehicleRaycaster___destroy___0=n._emscripten_bind_btDefaultVehicleRaycaster___destroy___0,
Pi=c._emscripten_bind_btDefaultVehicleRaycaster_btDefaultVehicleRaycaster_1=n._emscripten_bind_btDefaultVehicleRaycaster_btDefaultVehicleRaycaster_1,Qi=c._emscripten_bind_btDefaultVehicleRaycaster_castRay_3=n._emscripten_bind_btDefaultVehicleRaycaster_castRay_3,Ri=c._emscripten_bind_btDiscreteDynamicsWorld___destroy___0=n._emscripten_bind_btDiscreteDynamicsWorld___destroy___0,Si=c._emscripten_bind_btDiscreteDynamicsWorld_addAction_1=n._emscripten_bind_btDiscreteDynamicsWorld_addAction_1,Ti=c._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_1=
n._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_1,Ui=c._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_2=n._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_2,Vi=c._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_3=n._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_3,Wi=c._emscripten_bind_btDiscreteDynamicsWorld_addConstraint_1=n._emscripten_bind_btDiscreteDynamicsWorld_addConstraint_1,Xi=c._emscripten_bind_btDiscreteDynamicsWorld_addConstraint_2=
n._emscripten_bind_btDiscreteDynamicsWorld_addConstraint_2,Yi=c._emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_1=n._emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_1,Zi=c._emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_3=n._emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_3,$i=c._emscripten_bind_btDiscreteDynamicsWorld_btDiscreteDynamicsWorld_4=n._emscripten_bind_btDiscreteDynamicsWorld_btDiscreteDynamicsWorld_4,aj=c._emscripten_bind_btDiscreteDynamicsWorld_clearForces_0=n._emscripten_bind_btDiscreteDynamicsWorld_clearForces_0,
bj=c._emscripten_bind_btDiscreteDynamicsWorld_contactPairTest_3=n._emscripten_bind_btDiscreteDynamicsWorld_contactPairTest_3,cj=c._emscripten_bind_btDiscreteDynamicsWorld_contactTest_2=n._emscripten_bind_btDiscreteDynamicsWorld_contactTest_2,dj=c._emscripten_bind_btDiscreteDynamicsWorld_convexSweepTest_5=n._emscripten_bind_btDiscreteDynamicsWorld_convexSweepTest_5,ej=c._emscripten_bind_btDiscreteDynamicsWorld_getApplySpeculativeContactRestitution_0=n._emscripten_bind_btDiscreteDynamicsWorld_getApplySpeculativeContactRestitution_0,
fj=c._emscripten_bind_btDiscreteDynamicsWorld_getBroadphase_0=n._emscripten_bind_btDiscreteDynamicsWorld_getBroadphase_0,gj=c._emscripten_bind_btDiscreteDynamicsWorld_getDispatchInfo_0=n._emscripten_bind_btDiscreteDynamicsWorld_getDispatchInfo_0,hj=c._emscripten_bind_btDiscreteDynamicsWorld_getDispatcher_0=n._emscripten_bind_btDiscreteDynamicsWorld_getDispatcher_0,ij=c._emscripten_bind_btDiscreteDynamicsWorld_getGravity_0=n._emscripten_bind_btDiscreteDynamicsWorld_getGravity_0,jj=c._emscripten_bind_btDiscreteDynamicsWorld_getPairCache_0=
n._emscripten_bind_btDiscreteDynamicsWorld_getPairCache_0,kj=c._emscripten_bind_btDiscreteDynamicsWorld_getSolverInfo_0=n._emscripten_bind_btDiscreteDynamicsWorld_getSolverInfo_0,lj=c._emscripten_bind_btDiscreteDynamicsWorld_rayTest_3=n._emscripten_bind_btDiscreteDynamicsWorld_rayTest_3,mj=c._emscripten_bind_btDiscreteDynamicsWorld_removeAction_1=n._emscripten_bind_btDiscreteDynamicsWorld_removeAction_1,nj=c._emscripten_bind_btDiscreteDynamicsWorld_removeCollisionObject_1=n._emscripten_bind_btDiscreteDynamicsWorld_removeCollisionObject_1,
oj=c._emscripten_bind_btDiscreteDynamicsWorld_removeConstraint_1=n._emscripten_bind_btDiscreteDynamicsWorld_removeConstraint_1,pj=c._emscripten_bind_btDiscreteDynamicsWorld_removeRigidBody_1=n._emscripten_bind_btDiscreteDynamicsWorld_removeRigidBody_1,qj=c._emscripten_bind_btDiscreteDynamicsWorld_setApplySpeculativeContactRestitution_1=n._emscripten_bind_btDiscreteDynamicsWorld_setApplySpeculativeContactRestitution_1,rj=c._emscripten_bind_btDiscreteDynamicsWorld_setGravity_1=n._emscripten_bind_btDiscreteDynamicsWorld_setGravity_1,
sj=c._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_1=n._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_1,tj=c._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_2=n._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_2,uj=c._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_3=n._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_3,vj=c._emscripten_bind_btDiscreteDynamicsWorld_updateSingleAabb_1=n._emscripten_bind_btDiscreteDynamicsWorld_updateSingleAabb_1,wj=c._emscripten_bind_btDispatcherInfo___destroy___0=
n._emscripten_bind_btDispatcherInfo___destroy___0,xj=c._emscripten_bind_btDispatcherInfo_get_m_allowedCcdPenetration_0=n._emscripten_bind_btDispatcherInfo_get_m_allowedCcdPenetration_0,yj=c._emscripten_bind_btDispatcherInfo_get_m_convexConservativeDistanceThreshold_0=n._emscripten_bind_btDispatcherInfo_get_m_convexConservativeDistanceThreshold_0,zj=c._emscripten_bind_btDispatcherInfo_get_m_dispatchFunc_0=n._emscripten_bind_btDispatcherInfo_get_m_dispatchFunc_0,Aj=c._emscripten_bind_btDispatcherInfo_get_m_enableSPU_0=
n._emscripten_bind_btDispatcherInfo_get_m_enableSPU_0,Bj=c._emscripten_bind_btDispatcherInfo_get_m_enableSatConvex_0=n._emscripten_bind_btDispatcherInfo_get_m_enableSatConvex_0,Cj=c._emscripten_bind_btDispatcherInfo_get_m_stepCount_0=n._emscripten_bind_btDispatcherInfo_get_m_stepCount_0,Dj=c._emscripten_bind_btDispatcherInfo_get_m_timeOfImpact_0=n._emscripten_bind_btDispatcherInfo_get_m_timeOfImpact_0,Ej=c._emscripten_bind_btDispatcherInfo_get_m_timeStep_0=n._emscripten_bind_btDispatcherInfo_get_m_timeStep_0,
Fj=c._emscripten_bind_btDispatcherInfo_get_m_useContinuous_0=n._emscripten_bind_btDispatcherInfo_get_m_useContinuous_0,Gj=c._emscripten_bind_btDispatcherInfo_get_m_useConvexConservativeDistanceUtil_0=n._emscripten_bind_btDispatcherInfo_get_m_useConvexConservativeDistanceUtil_0,Hj=c._emscripten_bind_btDispatcherInfo_get_m_useEpa_0=n._emscripten_bind_btDispatcherInfo_get_m_useEpa_0,Ij=c._emscripten_bind_btDispatcherInfo_set_m_allowedCcdPenetration_1=n._emscripten_bind_btDispatcherInfo_set_m_allowedCcdPenetration_1,
Jj=c._emscripten_bind_btDispatcherInfo_set_m_convexConservativeDistanceThreshold_1=n._emscripten_bind_btDispatcherInfo_set_m_convexConservativeDistanceThreshold_1,Kj=c._emscripten_bind_btDispatcherInfo_set_m_dispatchFunc_1=n._emscripten_bind_btDispatcherInfo_set_m_dispatchFunc_1,Lj=c._emscripten_bind_btDispatcherInfo_set_m_enableSPU_1=n._emscripten_bind_btDispatcherInfo_set_m_enableSPU_1,Mj=c._emscripten_bind_btDispatcherInfo_set_m_enableSatConvex_1=n._emscripten_bind_btDispatcherInfo_set_m_enableSatConvex_1,
Nj=c._emscripten_bind_btDispatcherInfo_set_m_stepCount_1=n._emscripten_bind_btDispatcherInfo_set_m_stepCount_1,Oj=c._emscripten_bind_btDispatcherInfo_set_m_timeOfImpact_1=n._emscripten_bind_btDispatcherInfo_set_m_timeOfImpact_1,Pj=c._emscripten_bind_btDispatcherInfo_set_m_timeStep_1=n._emscripten_bind_btDispatcherInfo_set_m_timeStep_1,Qj=c._emscripten_bind_btDispatcherInfo_set_m_useContinuous_1=n._emscripten_bind_btDispatcherInfo_set_m_useContinuous_1,Rj=c._emscripten_bind_btDispatcherInfo_set_m_useConvexConservativeDistanceUtil_1=
n._emscripten_bind_btDispatcherInfo_set_m_useConvexConservativeDistanceUtil_1,Sj=c._emscripten_bind_btDispatcherInfo_set_m_useEpa_1=n._emscripten_bind_btDispatcherInfo_set_m_useEpa_1,Tj=c._emscripten_bind_btDispatcher___destroy___0=n._emscripten_bind_btDispatcher___destroy___0,Uj=c._emscripten_bind_btDispatcher_getManifoldByIndexInternal_1=n._emscripten_bind_btDispatcher_getManifoldByIndexInternal_1,Vj=c._emscripten_bind_btDispatcher_getNumManifolds_0=n._emscripten_bind_btDispatcher_getNumManifolds_0,
Wj=c._emscripten_bind_btDynamicsWorld___destroy___0=n._emscripten_bind_btDynamicsWorld___destroy___0,Xj=c._emscripten_bind_btDynamicsWorld_addAction_1=n._emscripten_bind_btDynamicsWorld_addAction_1,Yj=c._emscripten_bind_btDynamicsWorld_addCollisionObject_1=n._emscripten_bind_btDynamicsWorld_addCollisionObject_1,Zj=c._emscripten_bind_btDynamicsWorld_addCollisionObject_2=n._emscripten_bind_btDynamicsWorld_addCollisionObject_2,ak=c._emscripten_bind_btDynamicsWorld_addCollisionObject_3=n._emscripten_bind_btDynamicsWorld_addCollisionObject_3,
bk=c._emscripten_bind_btDynamicsWorld_contactPairTest_3=n._emscripten_bind_btDynamicsWorld_contactPairTest_3,ck=c._emscripten_bind_btDynamicsWorld_contactTest_2=n._emscripten_bind_btDynamicsWorld_contactTest_2,dk=c._emscripten_bind_btDynamicsWorld_convexSweepTest_5=n._emscripten_bind_btDynamicsWorld_convexSweepTest_5,ek=c._emscripten_bind_btDynamicsWorld_getBroadphase_0=n._emscripten_bind_btDynamicsWorld_getBroadphase_0,fk=c._emscripten_bind_btDynamicsWorld_getDispatchInfo_0=n._emscripten_bind_btDynamicsWorld_getDispatchInfo_0,
gk=c._emscripten_bind_btDynamicsWorld_getDispatcher_0=n._emscripten_bind_btDynamicsWorld_getDispatcher_0,hk=c._emscripten_bind_btDynamicsWorld_getPairCache_0=n._emscripten_bind_btDynamicsWorld_getPairCache_0,ik=c._emscripten_bind_btDynamicsWorld_getSolverInfo_0=n._emscripten_bind_btDynamicsWorld_getSolverInfo_0,jk=c._emscripten_bind_btDynamicsWorld_rayTest_3=n._emscripten_bind_btDynamicsWorld_rayTest_3,kk=c._emscripten_bind_btDynamicsWorld_removeAction_1=n._emscripten_bind_btDynamicsWorld_removeAction_1,
lk=c._emscripten_bind_btDynamicsWorld_removeCollisionObject_1=n._emscripten_bind_btDynamicsWorld_removeCollisionObject_1,mk=c._emscripten_bind_btDynamicsWorld_updateSingleAabb_1=n._emscripten_bind_btDynamicsWorld_updateSingleAabb_1,nk=c._emscripten_bind_btFixedConstraint___destroy___0=n._emscripten_bind_btFixedConstraint___destroy___0,ok=c._emscripten_bind_btFixedConstraint_btFixedConstraint_4=n._emscripten_bind_btFixedConstraint_btFixedConstraint_4,pk=c._emscripten_bind_btFixedConstraint_enableFeedback_1=
n._emscripten_bind_btFixedConstraint_enableFeedback_1,qk=c._emscripten_bind_btFixedConstraint_getBreakingImpulseThreshold_0=n._emscripten_bind_btFixedConstraint_getBreakingImpulseThreshold_0,rk=c._emscripten_bind_btFixedConstraint_getParam_2=n._emscripten_bind_btFixedConstraint_getParam_2,sk=c._emscripten_bind_btFixedConstraint_setBreakingImpulseThreshold_1=n._emscripten_bind_btFixedConstraint_setBreakingImpulseThreshold_1,tk=c._emscripten_bind_btFixedConstraint_setParam_3=n._emscripten_bind_btFixedConstraint_setParam_3,
uk=c._emscripten_bind_btGeneric6DofConstraint___destroy___0=n._emscripten_bind_btGeneric6DofConstraint___destroy___0,vk=c._emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_3=n._emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_3,wk=c._emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_5=n._emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_5,xk=c._emscripten_bind_btGeneric6DofConstraint_enableFeedback_1=n._emscripten_bind_btGeneric6DofConstraint_enableFeedback_1,
yk=c._emscripten_bind_btGeneric6DofConstraint_getBreakingImpulseThreshold_0=n._emscripten_bind_btGeneric6DofConstraint_getBreakingImpulseThreshold_0,zk=c._emscripten_bind_btGeneric6DofConstraint_getFrameOffsetA_0=n._emscripten_bind_btGeneric6DofConstraint_getFrameOffsetA_0,Ak=c._emscripten_bind_btGeneric6DofConstraint_getParam_2=n._emscripten_bind_btGeneric6DofConstraint_getParam_2,Bk=c._emscripten_bind_btGeneric6DofConstraint_setAngularLowerLimit_1=n._emscripten_bind_btGeneric6DofConstraint_setAngularLowerLimit_1,
Ck=c._emscripten_bind_btGeneric6DofConstraint_setAngularUpperLimit_1=n._emscripten_bind_btGeneric6DofConstraint_setAngularUpperLimit_1,Dk=c._emscripten_bind_btGeneric6DofConstraint_setBreakingImpulseThreshold_1=n._emscripten_bind_btGeneric6DofConstraint_setBreakingImpulseThreshold_1,Ek=c._emscripten_bind_btGeneric6DofConstraint_setLinearLowerLimit_1=n._emscripten_bind_btGeneric6DofConstraint_setLinearLowerLimit_1,Fk=c._emscripten_bind_btGeneric6DofConstraint_setLinearUpperLimit_1=n._emscripten_bind_btGeneric6DofConstraint_setLinearUpperLimit_1,
Gk=c._emscripten_bind_btGeneric6DofConstraint_setParam_3=n._emscripten_bind_btGeneric6DofConstraint_setParam_3,Hk=c._emscripten_bind_btGeneric6DofSpringConstraint___destroy___0=n._emscripten_bind_btGeneric6DofSpringConstraint___destroy___0,Ik=c._emscripten_bind_btGeneric6DofSpringConstraint_btGeneric6DofSpringConstraint_3=n._emscripten_bind_btGeneric6DofSpringConstraint_btGeneric6DofSpringConstraint_3,Jk=c._emscripten_bind_btGeneric6DofSpringConstraint_btGeneric6DofSpringConstraint_5=n._emscripten_bind_btGeneric6DofSpringConstraint_btGeneric6DofSpringConstraint_5,
Kk=c._emscripten_bind_btGeneric6DofSpringConstraint_enableFeedback_1=n._emscripten_bind_btGeneric6DofSpringConstraint_enableFeedback_1,Lk=c._emscripten_bind_btGeneric6DofSpringConstraint_enableSpring_2=n._emscripten_bind_btGeneric6DofSpringConstraint_enableSpring_2,Mk=c._emscripten_bind_btGeneric6DofSpringConstraint_getBreakingImpulseThreshold_0=n._emscripten_bind_btGeneric6DofSpringConstraint_getBreakingImpulseThreshold_0,Nk=c._emscripten_bind_btGeneric6DofSpringConstraint_getFrameOffsetA_0=n._emscripten_bind_btGeneric6DofSpringConstraint_getFrameOffsetA_0,
Ok=c._emscripten_bind_btGeneric6DofSpringConstraint_getParam_2=n._emscripten_bind_btGeneric6DofSpringConstraint_getParam_2,Pk=c._emscripten_bind_btGeneric6DofSpringConstraint_setAngularLowerLimit_1=n._emscripten_bind_btGeneric6DofSpringConstraint_setAngularLowerLimit_1,Qk=c._emscripten_bind_btGeneric6DofSpringConstraint_setAngularUpperLimit_1=n._emscripten_bind_btGeneric6DofSpringConstraint_setAngularUpperLimit_1,Rk=c._emscripten_bind_btGeneric6DofSpringConstraint_setBreakingImpulseThreshold_1=n._emscripten_bind_btGeneric6DofSpringConstraint_setBreakingImpulseThreshold_1,
Sk=c._emscripten_bind_btGeneric6DofSpringConstraint_setDamping_2=n._emscripten_bind_btGeneric6DofSpringConstraint_setDamping_2,Tk=c._emscripten_bind_btGeneric6DofSpringConstraint_setLinearLowerLimit_1=n._emscripten_bind_btGeneric6DofSpringConstraint_setLinearLowerLimit_1,Uk=c._emscripten_bind_btGeneric6DofSpringConstraint_setLinearUpperLimit_1=n._emscripten_bind_btGeneric6DofSpringConstraint_setLinearUpperLimit_1,Vk=c._emscripten_bind_btGeneric6DofSpringConstraint_setParam_3=n._emscripten_bind_btGeneric6DofSpringConstraint_setParam_3,
Wk=c._emscripten_bind_btGeneric6DofSpringConstraint_setStiffness_2=n._emscripten_bind_btGeneric6DofSpringConstraint_setStiffness_2,Xk=c._emscripten_bind_btGhostObject___destroy___0=n._emscripten_bind_btGhostObject___destroy___0,Yk=c._emscripten_bind_btGhostObject_activate_0=n._emscripten_bind_btGhostObject_activate_0,Zk=c._emscripten_bind_btGhostObject_activate_1=n._emscripten_bind_btGhostObject_activate_1,$k=c._emscripten_bind_btGhostObject_btGhostObject_0=n._emscripten_bind_btGhostObject_btGhostObject_0,
al=c._emscripten_bind_btGhostObject_forceActivationState_1=n._emscripten_bind_btGhostObject_forceActivationState_1,bl=c._emscripten_bind_btGhostObject_getBroadphaseHandle_0=n._emscripten_bind_btGhostObject_getBroadphaseHandle_0,cl=c._emscripten_bind_btGhostObject_getCcdMotionThreshold_0=n._emscripten_bind_btGhostObject_getCcdMotionThreshold_0,dl=c._emscripten_bind_btGhostObject_getCcdSweptSphereRadius_0=n._emscripten_bind_btGhostObject_getCcdSweptSphereRadius_0,el=c._emscripten_bind_btGhostObject_getCollisionFlags_0=
n._emscripten_bind_btGhostObject_getCollisionFlags_0,fl=c._emscripten_bind_btGhostObject_getCollisionShape_0=n._emscripten_bind_btGhostObject_getCollisionShape_0,gl=c._emscripten_bind_btGhostObject_getFriction_0=n._emscripten_bind_btGhostObject_getFriction_0,hl=c._emscripten_bind_btGhostObject_getInterpolationAngularVelocity_0=n._emscripten_bind_btGhostObject_getInterpolationAngularVelocity_0,il=c._emscripten_bind_btGhostObject_getInterpolationLinearVelocity_0=n._emscripten_bind_btGhostObject_getInterpolationLinearVelocity_0,
jl=c._emscripten_bind_btGhostObject_getNumOverlappingObjects_0=n._emscripten_bind_btGhostObject_getNumOverlappingObjects_0,kl=c._emscripten_bind_btGhostObject_getOverlappingObject_1=n._emscripten_bind_btGhostObject_getOverlappingObject_1,ll=c._emscripten_bind_btGhostObject_getRestitution_0=n._emscripten_bind_btGhostObject_getRestitution_0,ml=c._emscripten_bind_btGhostObject_getRollingFriction_0=n._emscripten_bind_btGhostObject_getRollingFriction_0,nl=c._emscripten_bind_btGhostObject_getUserIndex_0=
n._emscripten_bind_btGhostObject_getUserIndex_0,ol=c._emscripten_bind_btGhostObject_getUserPointer_0=n._emscripten_bind_btGhostObject_getUserPointer_0,pl=c._emscripten_bind_btGhostObject_getWorldTransform_0=n._emscripten_bind_btGhostObject_getWorldTransform_0,ql=c._emscripten_bind_btGhostObject_isActive_0=n._emscripten_bind_btGhostObject_isActive_0,rl=c._emscripten_bind_btGhostObject_isKinematicObject_0=n._emscripten_bind_btGhostObject_isKinematicObject_0,sl=c._emscripten_bind_btGhostObject_isStaticObject_0=
n._emscripten_bind_btGhostObject_isStaticObject_0,tl=c._emscripten_bind_btGhostObject_isStaticOrKinematicObject_0=n._emscripten_bind_btGhostObject_isStaticOrKinematicObject_0,ul=c._emscripten_bind_btGhostObject_setActivationState_1=n._emscripten_bind_btGhostObject_setActivationState_1,vl=c._emscripten_bind_btGhostObject_setAnisotropicFriction_2=n._emscripten_bind_btGhostObject_setAnisotropicFriction_2,wl=c._emscripten_bind_btGhostObject_setCcdMotionThreshold_1=n._emscripten_bind_btGhostObject_setCcdMotionThreshold_1,
xl=c._emscripten_bind_btGhostObject_setCcdSweptSphereRadius_1=n._emscripten_bind_btGhostObject_setCcdSweptSphereRadius_1,yl=c._emscripten_bind_btGhostObject_setCollisionFlags_1=n._emscripten_bind_btGhostObject_setCollisionFlags_1,zl=c._emscripten_bind_btGhostObject_setCollisionShape_1=n._emscripten_bind_btGhostObject_setCollisionShape_1,Al=c._emscripten_bind_btGhostObject_setContactProcessingThreshold_1=n._emscripten_bind_btGhostObject_setContactProcessingThreshold_1,Bl=c._emscripten_bind_btGhostObject_setFriction_1=
n._emscripten_bind_btGhostObject_setFriction_1,Cl=c._emscripten_bind_btGhostObject_setInterpolationAngularVelocity_1=n._emscripten_bind_btGhostObject_setInterpolationAngularVelocity_1,Dl=c._emscripten_bind_btGhostObject_setInterpolationLinearVelocity_1=n._emscripten_bind_btGhostObject_setInterpolationLinearVelocity_1,El=c._emscripten_bind_btGhostObject_setRestitution_1=n._emscripten_bind_btGhostObject_setRestitution_1,Fl=c._emscripten_bind_btGhostObject_setRollingFriction_1=n._emscripten_bind_btGhostObject_setRollingFriction_1,
Gl=c._emscripten_bind_btGhostObject_setUserIndex_1=n._emscripten_bind_btGhostObject_setUserIndex_1,Hl=c._emscripten_bind_btGhostObject_setUserPointer_1=n._emscripten_bind_btGhostObject_setUserPointer_1,Il=c._emscripten_bind_btGhostObject_setWorldTransform_1=n._emscripten_bind_btGhostObject_setWorldTransform_1,Jl=c._emscripten_bind_btGhostPairCallback___destroy___0=n._emscripten_bind_btGhostPairCallback___destroy___0,Kl=c._emscripten_bind_btGhostPairCallback_btGhostPairCallback_0=n._emscripten_bind_btGhostPairCallback_btGhostPairCallback_0,
Ll=c._emscripten_bind_btHeightfieldTerrainShape___destroy___0=n._emscripten_bind_btHeightfieldTerrainShape___destroy___0,Ml=c._emscripten_bind_btHeightfieldTerrainShape_btHeightfieldTerrainShape_9=n._emscripten_bind_btHeightfieldTerrainShape_btHeightfieldTerrainShape_9,Nl=c._emscripten_bind_btHeightfieldTerrainShape_calculateLocalInertia_2=n._emscripten_bind_btHeightfieldTerrainShape_calculateLocalInertia_2,Ol=c._emscripten_bind_btHeightfieldTerrainShape_getLocalScaling_0=n._emscripten_bind_btHeightfieldTerrainShape_getLocalScaling_0,
Pl=c._emscripten_bind_btHeightfieldTerrainShape_getMargin_0=n._emscripten_bind_btHeightfieldTerrainShape_getMargin_0,Ql=c._emscripten_bind_btHeightfieldTerrainShape_setLocalScaling_1=n._emscripten_bind_btHeightfieldTerrainShape_setLocalScaling_1,Rl=c._emscripten_bind_btHeightfieldTerrainShape_setMargin_1=n._emscripten_bind_btHeightfieldTerrainShape_setMargin_1,Sl=c._emscripten_bind_btHingeConstraint___destroy___0=n._emscripten_bind_btHingeConstraint___destroy___0,Tl=c._emscripten_bind_btHingeConstraint_btHingeConstraint_2=
n._emscripten_bind_btHingeConstraint_btHingeConstraint_2,Ul=c._emscripten_bind_btHingeConstraint_btHingeConstraint_3=n._emscripten_bind_btHingeConstraint_btHingeConstraint_3,Vl=c._emscripten_bind_btHingeConstraint_btHingeConstraint_4=n._emscripten_bind_btHingeConstraint_btHingeConstraint_4,Wl=c._emscripten_bind_btHingeConstraint_btHingeConstraint_5=n._emscripten_bind_btHingeConstraint_btHingeConstraint_5,Xl=c._emscripten_bind_btHingeConstraint_btHingeConstraint_6=n._emscripten_bind_btHingeConstraint_btHingeConstraint_6,
Yl=c._emscripten_bind_btHingeConstraint_btHingeConstraint_7=n._emscripten_bind_btHingeConstraint_btHingeConstraint_7,Zl=c._emscripten_bind_btHingeConstraint_enableAngularMotor_3=n._emscripten_bind_btHingeConstraint_enableAngularMotor_3,$l=c._emscripten_bind_btHingeConstraint_enableFeedback_1=n._emscripten_bind_btHingeConstraint_enableFeedback_1,am=c._emscripten_bind_btHingeConstraint_enableMotor_1=n._emscripten_bind_btHingeConstraint_enableMotor_1,bm=c._emscripten_bind_btHingeConstraint_getBreakingImpulseThreshold_0=
n._emscripten_bind_btHingeConstraint_getBreakingImpulseThreshold_0,cm=c._emscripten_bind_btHingeConstraint_getParam_2=n._emscripten_bind_btHingeConstraint_getParam_2,dm=c._emscripten_bind_btHingeConstraint_setAngularOnly_1=n._emscripten_bind_btHingeConstraint_setAngularOnly_1,em=c._emscripten_bind_btHingeConstraint_setBreakingImpulseThreshold_1=n._emscripten_bind_btHingeConstraint_setBreakingImpulseThreshold_1,fm=c._emscripten_bind_btHingeConstraint_setLimit_4=n._emscripten_bind_btHingeConstraint_setLimit_4,
gm=c._emscripten_bind_btHingeConstraint_setLimit_5=n._emscripten_bind_btHingeConstraint_setLimit_5,hm=c._emscripten_bind_btHingeConstraint_setMaxMotorImpulse_1=n._emscripten_bind_btHingeConstraint_setMaxMotorImpulse_1,im=c._emscripten_bind_btHingeConstraint_setMotorTarget_2=n._emscripten_bind_btHingeConstraint_setMotorTarget_2,jm=c._emscripten_bind_btHingeConstraint_setParam_3=n._emscripten_bind_btHingeConstraint_setParam_3,km=c._emscripten_bind_btKinematicCharacterController___destroy___0=n._emscripten_bind_btKinematicCharacterController___destroy___0,
lm=c._emscripten_bind_btKinematicCharacterController_btKinematicCharacterController_4=n._emscripten_bind_btKinematicCharacterController_btKinematicCharacterController_4,mm=c._emscripten_bind_btKinematicCharacterController_canJump_0=n._emscripten_bind_btKinematicCharacterController_canJump_0,nm=c._emscripten_bind_btKinematicCharacterController_getGhostObject_0=n._emscripten_bind_btKinematicCharacterController_getGhostObject_0,om=c._emscripten_bind_btKinematicCharacterController_getGravity_0=n._emscripten_bind_btKinematicCharacterController_getGravity_0,
pm=c._emscripten_bind_btKinematicCharacterController_getMaxSlope_0=n._emscripten_bind_btKinematicCharacterController_getMaxSlope_0,qm=c._emscripten_bind_btKinematicCharacterController_jump_0=n._emscripten_bind_btKinematicCharacterController_jump_0,rm=c._emscripten_bind_btKinematicCharacterController_onGround_0=n._emscripten_bind_btKinematicCharacterController_onGround_0,sm=c._emscripten_bind_btKinematicCharacterController_playerStep_2=n._emscripten_bind_btKinematicCharacterController_playerStep_2,
tm=c._emscripten_bind_btKinematicCharacterController_preStep_1=n._emscripten_bind_btKinematicCharacterController_preStep_1,um=c._emscripten_bind_btKinematicCharacterController_setFallSpeed_1=n._emscripten_bind_btKinematicCharacterController_setFallSpeed_1,wm=c._emscripten_bind_btKinematicCharacterController_setGravity_1=n._emscripten_bind_btKinematicCharacterController_setGravity_1,xm=c._emscripten_bind_btKinematicCharacterController_setJumpSpeed_1=n._emscripten_bind_btKinematicCharacterController_setJumpSpeed_1,
ym=c._emscripten_bind_btKinematicCharacterController_setMaxJumpHeight_1=n._emscripten_bind_btKinematicCharacterController_setMaxJumpHeight_1,zm=c._emscripten_bind_btKinematicCharacterController_setMaxSlope_1=n._emscripten_bind_btKinematicCharacterController_setMaxSlope_1,Am=c._emscripten_bind_btKinematicCharacterController_setUpInterpolate_1=n._emscripten_bind_btKinematicCharacterController_setUpInterpolate_1,Bm=c._emscripten_bind_btKinematicCharacterController_setUp_1=n._emscripten_bind_btKinematicCharacterController_setUp_1,
Cm=c._emscripten_bind_btKinematicCharacterController_setUseGhostSweepTest_1=n._emscripten_bind_btKinematicCharacterController_setUseGhostSweepTest_1,Dm=c._emscripten_bind_btKinematicCharacterController_setVelocityForTimeInterval_2=n._emscripten_bind_btKinematicCharacterController_setVelocityForTimeInterval_2,Em=c._emscripten_bind_btKinematicCharacterController_setWalkDirection_1=n._emscripten_bind_btKinematicCharacterController_setWalkDirection_1,Fm=c._emscripten_bind_btKinematicCharacterController_updateAction_2=
n._emscripten_bind_btKinematicCharacterController_updateAction_2,Gm=c._emscripten_bind_btKinematicCharacterController_warp_1=n._emscripten_bind_btKinematicCharacterController_warp_1,Hm=c._emscripten_bind_btManifoldPoint___destroy___0=n._emscripten_bind_btManifoldPoint___destroy___0,Im=c._emscripten_bind_btManifoldPoint_getAppliedImpulse_0=n._emscripten_bind_btManifoldPoint_getAppliedImpulse_0,Jm=c._emscripten_bind_btManifoldPoint_getDistance_0=n._emscripten_bind_btManifoldPoint_getDistance_0,Km=c._emscripten_bind_btManifoldPoint_getPositionWorldOnA_0=
n._emscripten_bind_btManifoldPoint_getPositionWorldOnA_0,Lm=c._emscripten_bind_btManifoldPoint_getPositionWorldOnB_0=n._emscripten_bind_btManifoldPoint_getPositionWorldOnB_0,Mm=c._emscripten_bind_btManifoldPoint_get_m_localPointA_0=n._emscripten_bind_btManifoldPoint_get_m_localPointA_0,Nm=c._emscripten_bind_btManifoldPoint_get_m_localPointB_0=n._emscripten_bind_btManifoldPoint_get_m_localPointB_0,Om=c._emscripten_bind_btManifoldPoint_get_m_normalWorldOnB_0=n._emscripten_bind_btManifoldPoint_get_m_normalWorldOnB_0,
Pm=c._emscripten_bind_btManifoldPoint_get_m_positionWorldOnA_0=n._emscripten_bind_btManifoldPoint_get_m_positionWorldOnA_0,Qm=c._emscripten_bind_btManifoldPoint_get_m_positionWorldOnB_0=n._emscripten_bind_btManifoldPoint_get_m_positionWorldOnB_0,Rm=c._emscripten_bind_btManifoldPoint_set_m_localPointA_1=n._emscripten_bind_btManifoldPoint_set_m_localPointA_1,Sm=c._emscripten_bind_btManifoldPoint_set_m_localPointB_1=n._emscripten_bind_btManifoldPoint_set_m_localPointB_1,Tm=c._emscripten_bind_btManifoldPoint_set_m_normalWorldOnB_1=
n._emscripten_bind_btManifoldPoint_set_m_normalWorldOnB_1,Um=c._emscripten_bind_btManifoldPoint_set_m_positionWorldOnA_1=n._emscripten_bind_btManifoldPoint_set_m_positionWorldOnA_1,Vm=c._emscripten_bind_btManifoldPoint_set_m_positionWorldOnB_1=n._emscripten_bind_btManifoldPoint_set_m_positionWorldOnB_1,Wm=c._emscripten_bind_btMatrix3x3___destroy___0=n._emscripten_bind_btMatrix3x3___destroy___0,Xm=c._emscripten_bind_btMatrix3x3_getRotation_1=n._emscripten_bind_btMatrix3x3_getRotation_1,Ym=c._emscripten_bind_btMatrix3x3_getRow_1=
n._emscripten_bind_btMatrix3x3_getRow_1,Zm=c._emscripten_bind_btMatrix3x3_setEulerZYX_3=n._emscripten_bind_btMatrix3x3_setEulerZYX_3,$m=c._emscripten_bind_btMotionState___destroy___0=n._emscripten_bind_btMotionState___destroy___0,an=c._emscripten_bind_btMotionState_getWorldTransform_1=n._emscripten_bind_btMotionState_getWorldTransform_1,bn=c._emscripten_bind_btMotionState_setWorldTransform_1=n._emscripten_bind_btMotionState_setWorldTransform_1,cn=c._emscripten_bind_btOverlappingPairCache___destroy___0=
n._emscripten_bind_btOverlappingPairCache___destroy___0,dn=c._emscripten_bind_btOverlappingPairCache_setInternalGhostPairCallback_1=n._emscripten_bind_btOverlappingPairCache_setInternalGhostPairCallback_1,en=c._emscripten_bind_btOverlappingPairCallback___destroy___0=n._emscripten_bind_btOverlappingPairCallback___destroy___0,fn=c._emscripten_bind_btPairCachingGhostObject___destroy___0=n._emscripten_bind_btPairCachingGhostObject___destroy___0,gn=c._emscripten_bind_btPairCachingGhostObject_activate_0=
n._emscripten_bind_btPairCachingGhostObject_activate_0,hn=c._emscripten_bind_btPairCachingGhostObject_activate_1=n._emscripten_bind_btPairCachingGhostObject_activate_1,jn=c._emscripten_bind_btPairCachingGhostObject_btPairCachingGhostObject_0=n._emscripten_bind_btPairCachingGhostObject_btPairCachingGhostObject_0,kn=c._emscripten_bind_btPairCachingGhostObject_forceActivationState_1=n._emscripten_bind_btPairCachingGhostObject_forceActivationState_1,ln=c._emscripten_bind_btPairCachingGhostObject_getBroadphaseHandle_0=
n._emscripten_bind_btPairCachingGhostObject_getBroadphaseHandle_0,mn=c._emscripten_bind_btPairCachingGhostObject_getCcdMotionThreshold_0=n._emscripten_bind_btPairCachingGhostObject_getCcdMotionThreshold_0,nn=c._emscripten_bind_btPairCachingGhostObject_getCcdSweptSphereRadius_0=n._emscripten_bind_btPairCachingGhostObject_getCcdSweptSphereRadius_0,on=c._emscripten_bind_btPairCachingGhostObject_getCollisionFlags_0=n._emscripten_bind_btPairCachingGhostObject_getCollisionFlags_0,pn=c._emscripten_bind_btPairCachingGhostObject_getCollisionShape_0=
n._emscripten_bind_btPairCachingGhostObject_getCollisionShape_0,qn=c._emscripten_bind_btPairCachingGhostObject_getFriction_0=n._emscripten_bind_btPairCachingGhostObject_getFriction_0,rn=c._emscripten_bind_btPairCachingGhostObject_getInterpolationAngularVelocity_0=n._emscripten_bind_btPairCachingGhostObject_getInterpolationAngularVelocity_0,sn=c._emscripten_bind_btPairCachingGhostObject_getInterpolationLinearVelocity_0=n._emscripten_bind_btPairCachingGhostObject_getInterpolationLinearVelocity_0,tn=
c._emscripten_bind_btPairCachingGhostObject_getNumOverlappingObjects_0=n._emscripten_bind_btPairCachingGhostObject_getNumOverlappingObjects_0,un=c._emscripten_bind_btPairCachingGhostObject_getOverlappingObject_1=n._emscripten_bind_btPairCachingGhostObject_getOverlappingObject_1,vn=c._emscripten_bind_btPairCachingGhostObject_getRestitution_0=n._emscripten_bind_btPairCachingGhostObject_getRestitution_0,wn=c._emscripten_bind_btPairCachingGhostObject_getRollingFriction_0=n._emscripten_bind_btPairCachingGhostObject_getRollingFriction_0,
xn=c._emscripten_bind_btPairCachingGhostObject_getUserIndex_0=n._emscripten_bind_btPairCachingGhostObject_getUserIndex_0,yn=c._emscripten_bind_btPairCachingGhostObject_getUserPointer_0=n._emscripten_bind_btPairCachingGhostObject_getUserPointer_0,zn=c._emscripten_bind_btPairCachingGhostObject_getWorldTransform_0=n._emscripten_bind_btPairCachingGhostObject_getWorldTransform_0,An=c._emscripten_bind_btPairCachingGhostObject_isActive_0=n._emscripten_bind_btPairCachingGhostObject_isActive_0,Bn=c._emscripten_bind_btPairCachingGhostObject_isKinematicObject_0=
n._emscripten_bind_btPairCachingGhostObject_isKinematicObject_0,Cn=c._emscripten_bind_btPairCachingGhostObject_isStaticObject_0=n._emscripten_bind_btPairCachingGhostObject_isStaticObject_0,Dn=c._emscripten_bind_btPairCachingGhostObject_isStaticOrKinematicObject_0=n._emscripten_bind_btPairCachingGhostObject_isStaticOrKinematicObject_0,En=c._emscripten_bind_btPairCachingGhostObject_setActivationState_1=n._emscripten_bind_btPairCachingGhostObject_setActivationState_1,Fn=c._emscripten_bind_btPairCachingGhostObject_setAnisotropicFriction_2=
n._emscripten_bind_btPairCachingGhostObject_setAnisotropicFriction_2,Gn=c._emscripten_bind_btPairCachingGhostObject_setCcdMotionThreshold_1=n._emscripten_bind_btPairCachingGhostObject_setCcdMotionThreshold_1,Hn=c._emscripten_bind_btPairCachingGhostObject_setCcdSweptSphereRadius_1=n._emscripten_bind_btPairCachingGhostObject_setCcdSweptSphereRadius_1,In=c._emscripten_bind_btPairCachingGhostObject_setCollisionFlags_1=n._emscripten_bind_btPairCachingGhostObject_setCollisionFlags_1,Jn=c._emscripten_bind_btPairCachingGhostObject_setCollisionShape_1=
n._emscripten_bind_btPairCachingGhostObject_setCollisionShape_1,Kn=c._emscripten_bind_btPairCachingGhostObject_setContactProcessingThreshold_1=n._emscripten_bind_btPairCachingGhostObject_setContactProcessingThreshold_1,Ln=c._emscripten_bind_btPairCachingGhostObject_setFriction_1=n._emscripten_bind_btPairCachingGhostObject_setFriction_1,Mn=c._emscripten_bind_btPairCachingGhostObject_setInterpolationAngularVelocity_1=n._emscripten_bind_btPairCachingGhostObject_setInterpolationAngularVelocity_1,Nn=c._emscripten_bind_btPairCachingGhostObject_setInterpolationLinearVelocity_1=
n._emscripten_bind_btPairCachingGhostObject_setInterpolationLinearVelocity_1,On=c._emscripten_bind_btPairCachingGhostObject_setRestitution_1=n._emscripten_bind_btPairCachingGhostObject_setRestitution_1,Pn=c._emscripten_bind_btPairCachingGhostObject_setRollingFriction_1=n._emscripten_bind_btPairCachingGhostObject_setRollingFriction_1,Qn=c._emscripten_bind_btPairCachingGhostObject_setUserIndex_1=n._emscripten_bind_btPairCachingGhostObject_setUserIndex_1,Rn=c._emscripten_bind_btPairCachingGhostObject_setUserPointer_1=
n._emscripten_bind_btPairCachingGhostObject_setUserPointer_1,Sn=c._emscripten_bind_btPairCachingGhostObject_setWorldTransform_1=n._emscripten_bind_btPairCachingGhostObject_setWorldTransform_1,Tn=c._emscripten_bind_btPersistentManifold___destroy___0=n._emscripten_bind_btPersistentManifold___destroy___0,Un=c._emscripten_bind_btPersistentManifold_btPersistentManifold_0=n._emscripten_bind_btPersistentManifold_btPersistentManifold_0,Vn=c._emscripten_bind_btPersistentManifold_getBody0_0=n._emscripten_bind_btPersistentManifold_getBody0_0,
Wn=c._emscripten_bind_btPersistentManifold_getBody1_0=n._emscripten_bind_btPersistentManifold_getBody1_0,Xn=c._emscripten_bind_btPersistentManifold_getContactPoint_1=n._emscripten_bind_btPersistentManifold_getContactPoint_1,Yn=c._emscripten_bind_btPersistentManifold_getNumContacts_0=n._emscripten_bind_btPersistentManifold_getNumContacts_0,Zn=c._emscripten_bind_btPoint2PointConstraint___destroy___0=n._emscripten_bind_btPoint2PointConstraint___destroy___0,$n=c._emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_2=
n._emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_2,ao=c._emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_4=n._emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_4,bo=c._emscripten_bind_btPoint2PointConstraint_enableFeedback_1=n._emscripten_bind_btPoint2PointConstraint_enableFeedback_1,co=c._emscripten_bind_btPoint2PointConstraint_getBreakingImpulseThreshold_0=n._emscripten_bind_btPoint2PointConstraint_getBreakingImpulseThreshold_0,eo=c._emscripten_bind_btPoint2PointConstraint_getParam_2=
n._emscripten_bind_btPoint2PointConstraint_getParam_2,fo=c._emscripten_bind_btPoint2PointConstraint_getPivotInA_0=n._emscripten_bind_btPoint2PointConstraint_getPivotInA_0,go=c._emscripten_bind_btPoint2PointConstraint_getPivotInB_0=n._emscripten_bind_btPoint2PointConstraint_getPivotInB_0,ho=c._emscripten_bind_btPoint2PointConstraint_get_m_setting_0=n._emscripten_bind_btPoint2PointConstraint_get_m_setting_0,io=c._emscripten_bind_btPoint2PointConstraint_setBreakingImpulseThreshold_1=n._emscripten_bind_btPoint2PointConstraint_setBreakingImpulseThreshold_1,
jo=c._emscripten_bind_btPoint2PointConstraint_setParam_3=n._emscripten_bind_btPoint2PointConstraint_setParam_3,ko=c._emscripten_bind_btPoint2PointConstraint_setPivotA_1=n._emscripten_bind_btPoint2PointConstraint_setPivotA_1,lo=c._emscripten_bind_btPoint2PointConstraint_setPivotB_1=n._emscripten_bind_btPoint2PointConstraint_setPivotB_1,mo=c._emscripten_bind_btPoint2PointConstraint_set_m_setting_1=n._emscripten_bind_btPoint2PointConstraint_set_m_setting_1,no=c._emscripten_bind_btQuadWord___destroy___0=
n._emscripten_bind_btQuadWord___destroy___0,oo=c._emscripten_bind_btQuadWord_setW_1=n._emscripten_bind_btQuadWord_setW_1,po=c._emscripten_bind_btQuadWord_setX_1=n._emscripten_bind_btQuadWord_setX_1,qo=c._emscripten_bind_btQuadWord_setY_1=n._emscripten_bind_btQuadWord_setY_1,ro=c._emscripten_bind_btQuadWord_setZ_1=n._emscripten_bind_btQuadWord_setZ_1,so=c._emscripten_bind_btQuadWord_w_0=n._emscripten_bind_btQuadWord_w_0,to=c._emscripten_bind_btQuadWord_x_0=n._emscripten_bind_btQuadWord_x_0,uo=c._emscripten_bind_btQuadWord_y_0=
n._emscripten_bind_btQuadWord_y_0,vo=c._emscripten_bind_btQuadWord_z_0=n._emscripten_bind_btQuadWord_z_0,wo=c._emscripten_bind_btQuaternion___destroy___0=n._emscripten_bind_btQuaternion___destroy___0,xo=c._emscripten_bind_btQuaternion_angleShortestPath_1=n._emscripten_bind_btQuaternion_angleShortestPath_1,yo=c._emscripten_bind_btQuaternion_angle_1=n._emscripten_bind_btQuaternion_angle_1,zo=c._emscripten_bind_btQuaternion_btQuaternion_4=n._emscripten_bind_btQuaternion_btQuaternion_4,Ao=c._emscripten_bind_btQuaternion_dot_1=
n._emscripten_bind_btQuaternion_dot_1,Bo=c._emscripten_bind_btQuaternion_getAngleShortestPath_0=n._emscripten_bind_btQuaternion_getAngleShortestPath_0,Co=c._emscripten_bind_btQuaternion_getAngle_0=n._emscripten_bind_btQuaternion_getAngle_0,Do=c._emscripten_bind_btQuaternion_getAxis_0=n._emscripten_bind_btQuaternion_getAxis_0,Eo=c._emscripten_bind_btQuaternion_inverse_0=n._emscripten_bind_btQuaternion_inverse_0,Fo=c._emscripten_bind_btQuaternion_length2_0=n._emscripten_bind_btQuaternion_length2_0,
Go=c._emscripten_bind_btQuaternion_length_0=n._emscripten_bind_btQuaternion_length_0,Ho=c._emscripten_bind_btQuaternion_normalize_0=n._emscripten_bind_btQuaternion_normalize_0,Io=c._emscripten_bind_btQuaternion_normalized_0=n._emscripten_bind_btQuaternion_normalized_0,Jo=c._emscripten_bind_btQuaternion_op_add_1=n._emscripten_bind_btQuaternion_op_add_1,Ko=c._emscripten_bind_btQuaternion_op_div_1=n._emscripten_bind_btQuaternion_op_div_1,Lo=c._emscripten_bind_btQuaternion_op_mul_1=n._emscripten_bind_btQuaternion_op_mul_1,
Mo=c._emscripten_bind_btQuaternion_op_mulq_1=n._emscripten_bind_btQuaternion_op_mulq_1,No=c._emscripten_bind_btQuaternion_op_sub_1=n._emscripten_bind_btQuaternion_op_sub_1,Oo=c._emscripten_bind_btQuaternion_setEulerZYX_3=n._emscripten_bind_btQuaternion_setEulerZYX_3,Po=c._emscripten_bind_btQuaternion_setRotation_2=n._emscripten_bind_btQuaternion_setRotation_2,Qo=c._emscripten_bind_btQuaternion_setValue_4=n._emscripten_bind_btQuaternion_setValue_4,Ro=c._emscripten_bind_btQuaternion_setW_1=n._emscripten_bind_btQuaternion_setW_1,
So=c._emscripten_bind_btQuaternion_setX_1=n._emscripten_bind_btQuaternion_setX_1,To=c._emscripten_bind_btQuaternion_setY_1=n._emscripten_bind_btQuaternion_setY_1,Uo=c._emscripten_bind_btQuaternion_setZ_1=n._emscripten_bind_btQuaternion_setZ_1,Vo=c._emscripten_bind_btQuaternion_w_0=n._emscripten_bind_btQuaternion_w_0,Wo=c._emscripten_bind_btQuaternion_x_0=n._emscripten_bind_btQuaternion_x_0,Xo=c._emscripten_bind_btQuaternion_y_0=n._emscripten_bind_btQuaternion_y_0,Yo=c._emscripten_bind_btQuaternion_z_0=
n._emscripten_bind_btQuaternion_z_0,Zo=c._emscripten_bind_btRaycastVehicle___destroy___0=n._emscripten_bind_btRaycastVehicle___destroy___0,$o=c._emscripten_bind_btRaycastVehicle_addWheel_7=n._emscripten_bind_btRaycastVehicle_addWheel_7,ap=c._emscripten_bind_btRaycastVehicle_applyEngineForce_2=n._emscripten_bind_btRaycastVehicle_applyEngineForce_2,bp=c._emscripten_bind_btRaycastVehicle_btRaycastVehicle_3=n._emscripten_bind_btRaycastVehicle_btRaycastVehicle_3,cp=c._emscripten_bind_btRaycastVehicle_getChassisWorldTransform_0=
n._emscripten_bind_btRaycastVehicle_getChassisWorldTransform_0,dp=c._emscripten_bind_btRaycastVehicle_getCurrentSpeedKmHour_0=n._emscripten_bind_btRaycastVehicle_getCurrentSpeedKmHour_0,ep=c._emscripten_bind_btRaycastVehicle_getForwardAxis_0=n._emscripten_bind_btRaycastVehicle_getForwardAxis_0,fp=c._emscripten_bind_btRaycastVehicle_getForwardVector_0=n._emscripten_bind_btRaycastVehicle_getForwardVector_0,gp=c._emscripten_bind_btRaycastVehicle_getNumWheels_0=n._emscripten_bind_btRaycastVehicle_getNumWheels_0,
hp=c._emscripten_bind_btRaycastVehicle_getRightAxis_0=n._emscripten_bind_btRaycastVehicle_getRightAxis_0,ip=c._emscripten_bind_btRaycastVehicle_getRigidBody_0=n._emscripten_bind_btRaycastVehicle_getRigidBody_0,jp=c._emscripten_bind_btRaycastVehicle_getSteeringValue_1=n._emscripten_bind_btRaycastVehicle_getSteeringValue_1,kp=c._emscripten_bind_btRaycastVehicle_getUpAxis_0=n._emscripten_bind_btRaycastVehicle_getUpAxis_0,lp=c._emscripten_bind_btRaycastVehicle_getUserConstraintId_0=n._emscripten_bind_btRaycastVehicle_getUserConstraintId_0,
mp=c._emscripten_bind_btRaycastVehicle_getUserConstraintType_0=n._emscripten_bind_btRaycastVehicle_getUserConstraintType_0,np=c._emscripten_bind_btRaycastVehicle_getWheelInfo_1=n._emscripten_bind_btRaycastVehicle_getWheelInfo_1,op=c._emscripten_bind_btRaycastVehicle_getWheelTransformWS_1=n._emscripten_bind_btRaycastVehicle_getWheelTransformWS_1,pp=c._emscripten_bind_btRaycastVehicle_rayCast_1=n._emscripten_bind_btRaycastVehicle_rayCast_1,qp=c._emscripten_bind_btRaycastVehicle_resetSuspension_0=n._emscripten_bind_btRaycastVehicle_resetSuspension_0,
rp=c._emscripten_bind_btRaycastVehicle_setBrake_2=n._emscripten_bind_btRaycastVehicle_setBrake_2,sp=c._emscripten_bind_btRaycastVehicle_setCoordinateSystem_3=n._emscripten_bind_btRaycastVehicle_setCoordinateSystem_3,tp=c._emscripten_bind_btRaycastVehicle_setPitchControl_1=n._emscripten_bind_btRaycastVehicle_setPitchControl_1,up=c._emscripten_bind_btRaycastVehicle_setSteeringValue_2=n._emscripten_bind_btRaycastVehicle_setSteeringValue_2,vp=c._emscripten_bind_btRaycastVehicle_setUserConstraintId_1=
n._emscripten_bind_btRaycastVehicle_setUserConstraintId_1,wp=c._emscripten_bind_btRaycastVehicle_setUserConstraintType_1=n._emscripten_bind_btRaycastVehicle_setUserConstraintType_1,xp=c._emscripten_bind_btRaycastVehicle_updateAction_2=n._emscripten_bind_btRaycastVehicle_updateAction_2,yp=c._emscripten_bind_btRaycastVehicle_updateFriction_1=n._emscripten_bind_btRaycastVehicle_updateFriction_1,zp=c._emscripten_bind_btRaycastVehicle_updateSuspension_1=n._emscripten_bind_btRaycastVehicle_updateSuspension_1,
Ap=c._emscripten_bind_btRaycastVehicle_updateVehicle_1=n._emscripten_bind_btRaycastVehicle_updateVehicle_1,Bp=c._emscripten_bind_btRaycastVehicle_updateWheelTransform_2=n._emscripten_bind_btRaycastVehicle_updateWheelTransform_2,Cp=c._emscripten_bind_btRaycastVehicle_updateWheelTransformsWS_1=n._emscripten_bind_btRaycastVehicle_updateWheelTransformsWS_1,Dp=c._emscripten_bind_btRaycastVehicle_updateWheelTransformsWS_2=n._emscripten_bind_btRaycastVehicle_updateWheelTransformsWS_2,Ep=c._emscripten_bind_btRigidBodyConstructionInfo___destroy___0=
n._emscripten_bind_btRigidBodyConstructionInfo___destroy___0,Fp=c._emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_3=n._emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_3,Gp=c._emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_4=n._emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_4,Hp=c._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingFactor_0=n._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingFactor_0,
Ip=c._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingThresholdSqr_0=n._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingThresholdSqr_0,Jp=c._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDampingFactor_0=n._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDampingFactor_0,Kp=c._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDamping_0=n._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDamping_0,Lp=c._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalLinearDampingThresholdSqr_0=
n._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalLinearDampingThresholdSqr_0,Mp=c._emscripten_bind_btRigidBodyConstructionInfo_get_m_angularDamping_0=n._emscripten_bind_btRigidBodyConstructionInfo_get_m_angularDamping_0,Np=c._emscripten_bind_btRigidBodyConstructionInfo_get_m_angularSleepingThreshold_0=n._emscripten_bind_btRigidBodyConstructionInfo_get_m_angularSleepingThreshold_0,Op=c._emscripten_bind_btRigidBodyConstructionInfo_get_m_friction_0=n._emscripten_bind_btRigidBodyConstructionInfo_get_m_friction_0,
Pp=c._emscripten_bind_btRigidBodyConstructionInfo_get_m_linearDamping_0=n._emscripten_bind_btRigidBodyConstructionInfo_get_m_linearDamping_0,Qp=c._emscripten_bind_btRigidBodyConstructionInfo_get_m_linearSleepingThreshold_0=n._emscripten_bind_btRigidBodyConstructionInfo_get_m_linearSleepingThreshold_0,Rp=c._emscripten_bind_btRigidBodyConstructionInfo_get_m_restitution_0=n._emscripten_bind_btRigidBodyConstructionInfo_get_m_restitution_0,Sp=c._emscripten_bind_btRigidBodyConstructionInfo_get_m_rollingFriction_0=
n._emscripten_bind_btRigidBodyConstructionInfo_get_m_rollingFriction_0,Tp=c._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingFactor_1=n._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingFactor_1,Up=c._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingThresholdSqr_1=n._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingThresholdSqr_1,Vp=c._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDampingFactor_1=
n._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDampingFactor_1,Wp=c._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDamping_1=n._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDamping_1,Xp=c._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalLinearDampingThresholdSqr_1=n._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalLinearDampingThresholdSqr_1,Yp=c._emscripten_bind_btRigidBodyConstructionInfo_set_m_angularDamping_1=n._emscripten_bind_btRigidBodyConstructionInfo_set_m_angularDamping_1,
Zp=c._emscripten_bind_btRigidBodyConstructionInfo_set_m_angularSleepingThreshold_1=n._emscripten_bind_btRigidBodyConstructionInfo_set_m_angularSleepingThreshold_1,$p=c._emscripten_bind_btRigidBodyConstructionInfo_set_m_friction_1=n._emscripten_bind_btRigidBodyConstructionInfo_set_m_friction_1,aq=c._emscripten_bind_btRigidBodyConstructionInfo_set_m_linearDamping_1=n._emscripten_bind_btRigidBodyConstructionInfo_set_m_linearDamping_1,bq=c._emscripten_bind_btRigidBodyConstructionInfo_set_m_linearSleepingThreshold_1=
n._emscripten_bind_btRigidBodyConstructionInfo_set_m_linearSleepingThreshold_1,cq=c._emscripten_bind_btRigidBodyConstructionInfo_set_m_restitution_1=n._emscripten_bind_btRigidBodyConstructionInfo_set_m_restitution_1,dq=c._emscripten_bind_btRigidBodyConstructionInfo_set_m_rollingFriction_1=n._emscripten_bind_btRigidBodyConstructionInfo_set_m_rollingFriction_1,eq=c._emscripten_bind_btRigidBody___destroy___0=n._emscripten_bind_btRigidBody___destroy___0,fq=c._emscripten_bind_btRigidBody_activate_0=n._emscripten_bind_btRigidBody_activate_0,
gq=c._emscripten_bind_btRigidBody_activate_1=n._emscripten_bind_btRigidBody_activate_1,hq=c._emscripten_bind_btRigidBody_applyCentralForce_1=n._emscripten_bind_btRigidBody_applyCentralForce_1,iq=c._emscripten_bind_btRigidBody_applyCentralImpulse_1=n._emscripten_bind_btRigidBody_applyCentralImpulse_1,jq=c._emscripten_bind_btRigidBody_applyForce_2=n._emscripten_bind_btRigidBody_applyForce_2,kq=c._emscripten_bind_btRigidBody_applyGravity_0=n._emscripten_bind_btRigidBody_applyGravity_0,lq=c._emscripten_bind_btRigidBody_applyImpulse_2=
n._emscripten_bind_btRigidBody_applyImpulse_2,mq=c._emscripten_bind_btRigidBody_applyTorqueImpulse_1=n._emscripten_bind_btRigidBody_applyTorqueImpulse_1,nq=c._emscripten_bind_btRigidBody_applyTorque_1=n._emscripten_bind_btRigidBody_applyTorque_1,oq=c._emscripten_bind_btRigidBody_btRigidBody_1=n._emscripten_bind_btRigidBody_btRigidBody_1,pq=c._emscripten_bind_btRigidBody_forceActivationState_1=n._emscripten_bind_btRigidBody_forceActivationState_1,qq=c._emscripten_bind_btRigidBody_getAabb_2=n._emscripten_bind_btRigidBody_getAabb_2,
rq=c._emscripten_bind_btRigidBody_getAngularVelocity_0=n._emscripten_bind_btRigidBody_getAngularVelocity_0,sq=c._emscripten_bind_btRigidBody_getBroadphaseHandle_0=n._emscripten_bind_btRigidBody_getBroadphaseHandle_0,tq=c._emscripten_bind_btRigidBody_getCcdMotionThreshold_0=n._emscripten_bind_btRigidBody_getCcdMotionThreshold_0,uq=c._emscripten_bind_btRigidBody_getCcdSweptSphereRadius_0=n._emscripten_bind_btRigidBody_getCcdSweptSphereRadius_0,vq=c._emscripten_bind_btRigidBody_getCenterOfMassTransform_0=
n._emscripten_bind_btRigidBody_getCenterOfMassTransform_0,wq=c._emscripten_bind_btRigidBody_getCollisionFlags_0=n._emscripten_bind_btRigidBody_getCollisionFlags_0,xq=c._emscripten_bind_btRigidBody_getCollisionShape_0=n._emscripten_bind_btRigidBody_getCollisionShape_0,yq=c._emscripten_bind_btRigidBody_getFlags_0=n._emscripten_bind_btRigidBody_getFlags_0,zq=c._emscripten_bind_btRigidBody_getFriction_0=n._emscripten_bind_btRigidBody_getFriction_0,Aq=c._emscripten_bind_btRigidBody_getGravity_0=n._emscripten_bind_btRigidBody_getGravity_0,
Bq=c._emscripten_bind_btRigidBody_getInterpolationAngularVelocity_0=n._emscripten_bind_btRigidBody_getInterpolationAngularVelocity_0,Cq=c._emscripten_bind_btRigidBody_getInterpolationLinearVelocity_0=n._emscripten_bind_btRigidBody_getInterpolationLinearVelocity_0,Dq=c._emscripten_bind_btRigidBody_getLinearVelocity_0=n._emscripten_bind_btRigidBody_getLinearVelocity_0,Eq=c._emscripten_bind_btRigidBody_getMotionState_0=n._emscripten_bind_btRigidBody_getMotionState_0,Fq=c._emscripten_bind_btRigidBody_getRestitution_0=
n._emscripten_bind_btRigidBody_getRestitution_0,Gq=c._emscripten_bind_btRigidBody_getRollingFriction_0=n._emscripten_bind_btRigidBody_getRollingFriction_0,Hq=c._emscripten_bind_btRigidBody_getUserIndex_0=n._emscripten_bind_btRigidBody_getUserIndex_0,Iq=c._emscripten_bind_btRigidBody_getUserPointer_0=n._emscripten_bind_btRigidBody_getUserPointer_0,Jq=c._emscripten_bind_btRigidBody_getWorldTransform_0=n._emscripten_bind_btRigidBody_getWorldTransform_0,Kq=c._emscripten_bind_btRigidBody_isActive_0=n._emscripten_bind_btRigidBody_isActive_0,
Lq=c._emscripten_bind_btRigidBody_isKinematicObject_0=n._emscripten_bind_btRigidBody_isKinematicObject_0,Mq=c._emscripten_bind_btRigidBody_isStaticObject_0=n._emscripten_bind_btRigidBody_isStaticObject_0,Nq=c._emscripten_bind_btRigidBody_isStaticOrKinematicObject_0=n._emscripten_bind_btRigidBody_isStaticOrKinematicObject_0,Oq=c._emscripten_bind_btRigidBody_setActivationState_1=n._emscripten_bind_btRigidBody_setActivationState_1,Pq=c._emscripten_bind_btRigidBody_setAngularFactor_1=n._emscripten_bind_btRigidBody_setAngularFactor_1,
Qq=c._emscripten_bind_btRigidBody_setAngularVelocity_1=n._emscripten_bind_btRigidBody_setAngularVelocity_1,Rq=c._emscripten_bind_btRigidBody_setAnisotropicFriction_2=n._emscripten_bind_btRigidBody_setAnisotropicFriction_2,Sq=c._emscripten_bind_btRigidBody_setCcdMotionThreshold_1=n._emscripten_bind_btRigidBody_setCcdMotionThreshold_1,Tq=c._emscripten_bind_btRigidBody_setCcdSweptSphereRadius_1=n._emscripten_bind_btRigidBody_setCcdSweptSphereRadius_1,Uq=c._emscripten_bind_btRigidBody_setCenterOfMassTransform_1=
n._emscripten_bind_btRigidBody_setCenterOfMassTransform_1,Vq=c._emscripten_bind_btRigidBody_setCollisionFlags_1=n._emscripten_bind_btRigidBody_setCollisionFlags_1,Wq=c._emscripten_bind_btRigidBody_setCollisionShape_1=n._emscripten_bind_btRigidBody_setCollisionShape_1,Xq=c._emscripten_bind_btRigidBody_setContactProcessingThreshold_1=n._emscripten_bind_btRigidBody_setContactProcessingThreshold_1,Yq=c._emscripten_bind_btRigidBody_setDamping_2=n._emscripten_bind_btRigidBody_setDamping_2,Zq=c._emscripten_bind_btRigidBody_setFlags_1=
n._emscripten_bind_btRigidBody_setFlags_1,$q=c._emscripten_bind_btRigidBody_setFriction_1=n._emscripten_bind_btRigidBody_setFriction_1,ar=c._emscripten_bind_btRigidBody_setGravity_1=n._emscripten_bind_btRigidBody_setGravity_1,br=c._emscripten_bind_btRigidBody_setInterpolationAngularVelocity_1=n._emscripten_bind_btRigidBody_setInterpolationAngularVelocity_1,cr=c._emscripten_bind_btRigidBody_setInterpolationLinearVelocity_1=n._emscripten_bind_btRigidBody_setInterpolationLinearVelocity_1,dr=c._emscripten_bind_btRigidBody_setLinearFactor_1=
n._emscripten_bind_btRigidBody_setLinearFactor_1,er=c._emscripten_bind_btRigidBody_setLinearVelocity_1=n._emscripten_bind_btRigidBody_setLinearVelocity_1,fr=c._emscripten_bind_btRigidBody_setMassProps_2=n._emscripten_bind_btRigidBody_setMassProps_2,gr=c._emscripten_bind_btRigidBody_setMotionState_1=n._emscripten_bind_btRigidBody_setMotionState_1,hr=c._emscripten_bind_btRigidBody_setRestitution_1=n._emscripten_bind_btRigidBody_setRestitution_1,ir=c._emscripten_bind_btRigidBody_setRollingFriction_1=
n._emscripten_bind_btRigidBody_setRollingFriction_1,jr=c._emscripten_bind_btRigidBody_setSleepingThresholds_2=n._emscripten_bind_btRigidBody_setSleepingThresholds_2,kr=c._emscripten_bind_btRigidBody_setUserIndex_1=n._emscripten_bind_btRigidBody_setUserIndex_1,lr=c._emscripten_bind_btRigidBody_setUserPointer_1=n._emscripten_bind_btRigidBody_setUserPointer_1,mr=c._emscripten_bind_btRigidBody_setWorldTransform_1=n._emscripten_bind_btRigidBody_setWorldTransform_1,nr=c._emscripten_bind_btRigidBody_upcast_1=
n._emscripten_bind_btRigidBody_upcast_1,or=c._emscripten_bind_btRigidBody_updateInertiaTensor_0=n._emscripten_bind_btRigidBody_updateInertiaTensor_0,pr=c._emscripten_bind_btSequentialImpulseConstraintSolver___destroy___0=n._emscripten_bind_btSequentialImpulseConstraintSolver___destroy___0,qr=c._emscripten_bind_btSequentialImpulseConstraintSolver_btSequentialImpulseConstraintSolver_0=n._emscripten_bind_btSequentialImpulseConstraintSolver_btSequentialImpulseConstraintSolver_0,rr=c._emscripten_bind_btSliderConstraint___destroy___0=
n._emscripten_bind_btSliderConstraint___destroy___0,sr=c._emscripten_bind_btSliderConstraint_btSliderConstraint_3=n._emscripten_bind_btSliderConstraint_btSliderConstraint_3,tr=c._emscripten_bind_btSliderConstraint_btSliderConstraint_5=n._emscripten_bind_btSliderConstraint_btSliderConstraint_5,ur=c._emscripten_bind_btSliderConstraint_enableFeedback_1=n._emscripten_bind_btSliderConstraint_enableFeedback_1,vr=c._emscripten_bind_btSliderConstraint_getBreakingImpulseThreshold_0=n._emscripten_bind_btSliderConstraint_getBreakingImpulseThreshold_0,
wr=c._emscripten_bind_btSliderConstraint_getParam_2=n._emscripten_bind_btSliderConstraint_getParam_2,xr=c._emscripten_bind_btSliderConstraint_setBreakingImpulseThreshold_1=n._emscripten_bind_btSliderConstraint_setBreakingImpulseThreshold_1,yr=c._emscripten_bind_btSliderConstraint_setLowerAngLimit_1=n._emscripten_bind_btSliderConstraint_setLowerAngLimit_1,zr=c._emscripten_bind_btSliderConstraint_setLowerLinLimit_1=n._emscripten_bind_btSliderConstraint_setLowerLinLimit_1,Ar=c._emscripten_bind_btSliderConstraint_setParam_3=
n._emscripten_bind_btSliderConstraint_setParam_3,Br=c._emscripten_bind_btSliderConstraint_setUpperAngLimit_1=n._emscripten_bind_btSliderConstraint_setUpperAngLimit_1,Cr=c._emscripten_bind_btSliderConstraint_setUpperLinLimit_1=n._emscripten_bind_btSliderConstraint_setUpperLinLimit_1,Dr=c._emscripten_bind_btSphereShape___destroy___0=n._emscripten_bind_btSphereShape___destroy___0,Er=c._emscripten_bind_btSphereShape_btSphereShape_1=n._emscripten_bind_btSphereShape_btSphereShape_1,Fr=c._emscripten_bind_btSphereShape_calculateLocalInertia_2=
n._emscripten_bind_btSphereShape_calculateLocalInertia_2,Gr=c._emscripten_bind_btSphereShape_getLocalScaling_0=n._emscripten_bind_btSphereShape_getLocalScaling_0,Hr=c._emscripten_bind_btSphereShape_getMargin_0=n._emscripten_bind_btSphereShape_getMargin_0,Ir=c._emscripten_bind_btSphereShape_setLocalScaling_1=n._emscripten_bind_btSphereShape_setLocalScaling_1,Jr=c._emscripten_bind_btSphereShape_setMargin_1=n._emscripten_bind_btSphereShape_setMargin_1,Kr=c._emscripten_bind_btStaticPlaneShape___destroy___0=
n._emscripten_bind_btStaticPlaneShape___destroy___0,Lr=c._emscripten_bind_btStaticPlaneShape_btStaticPlaneShape_2=n._emscripten_bind_btStaticPlaneShape_btStaticPlaneShape_2,Mr=c._emscripten_bind_btStaticPlaneShape_calculateLocalInertia_2=n._emscripten_bind_btStaticPlaneShape_calculateLocalInertia_2,Nr=c._emscripten_bind_btStaticPlaneShape_getLocalScaling_0=n._emscripten_bind_btStaticPlaneShape_getLocalScaling_0,Or=c._emscripten_bind_btStaticPlaneShape_setLocalScaling_1=n._emscripten_bind_btStaticPlaneShape_setLocalScaling_1,
Pr=c._emscripten_bind_btStridingMeshInterface___destroy___0=n._emscripten_bind_btStridingMeshInterface___destroy___0,Qr=c._emscripten_bind_btTransform___destroy___0=n._emscripten_bind_btTransform___destroy___0,Rr=c._emscripten_bind_btTransform_btTransform_0=n._emscripten_bind_btTransform_btTransform_0,Sr=c._emscripten_bind_btTransform_btTransform_2=n._emscripten_bind_btTransform_btTransform_2,Tr=c._emscripten_bind_btTransform_getBasis_0=n._emscripten_bind_btTransform_getBasis_0,Ur=c._emscripten_bind_btTransform_getOrigin_0=
n._emscripten_bind_btTransform_getOrigin_0,Vr=c._emscripten_bind_btTransform_getRotation_0=n._emscripten_bind_btTransform_getRotation_0,Wr=c._emscripten_bind_btTransform_setFromOpenGLMatrix_1=n._emscripten_bind_btTransform_setFromOpenGLMatrix_1,Xr=c._emscripten_bind_btTransform_setIdentity_0=n._emscripten_bind_btTransform_setIdentity_0,Yr=c._emscripten_bind_btTransform_setOrigin_1=n._emscripten_bind_btTransform_setOrigin_1,Zr=c._emscripten_bind_btTransform_setRotation_1=n._emscripten_bind_btTransform_setRotation_1,
$r=c._emscripten_bind_btTriangleMeshShape___destroy___0=n._emscripten_bind_btTriangleMeshShape___destroy___0,as=c._emscripten_bind_btTriangleMeshShape_calculateLocalInertia_2=n._emscripten_bind_btTriangleMeshShape_calculateLocalInertia_2,bs=c._emscripten_bind_btTriangleMeshShape_getLocalScaling_0=n._emscripten_bind_btTriangleMeshShape_getLocalScaling_0,cs=c._emscripten_bind_btTriangleMeshShape_setLocalScaling_1=n._emscripten_bind_btTriangleMeshShape_setLocalScaling_1,ds=c._emscripten_bind_btTriangleMesh___destroy___0=
n._emscripten_bind_btTriangleMesh___destroy___0,es=c._emscripten_bind_btTriangleMesh_addTriangle_3=n._emscripten_bind_btTriangleMesh_addTriangle_3,gs=c._emscripten_bind_btTriangleMesh_addTriangle_4=n._emscripten_bind_btTriangleMesh_addTriangle_4,hs=c._emscripten_bind_btTriangleMesh_btTriangleMesh_0=n._emscripten_bind_btTriangleMesh_btTriangleMesh_0,is=c._emscripten_bind_btTriangleMesh_btTriangleMesh_1=n._emscripten_bind_btTriangleMesh_btTriangleMesh_1,js=c._emscripten_bind_btTriangleMesh_btTriangleMesh_2=
n._emscripten_bind_btTriangleMesh_btTriangleMesh_2,ks=c._emscripten_bind_btTypedConstraint___destroy___0=n._emscripten_bind_btTypedConstraint___destroy___0,ls=c._emscripten_bind_btTypedConstraint_enableFeedback_1=n._emscripten_bind_btTypedConstraint_enableFeedback_1,ms=c._emscripten_bind_btTypedConstraint_getBreakingImpulseThreshold_0=n._emscripten_bind_btTypedConstraint_getBreakingImpulseThreshold_0,ns=c._emscripten_bind_btTypedConstraint_getParam_2=n._emscripten_bind_btTypedConstraint_getParam_2,
ps=c._emscripten_bind_btTypedConstraint_setBreakingImpulseThreshold_1=n._emscripten_bind_btTypedConstraint_setBreakingImpulseThreshold_1,qs=c._emscripten_bind_btTypedConstraint_setParam_3=n._emscripten_bind_btTypedConstraint_setParam_3,rs=c._emscripten_bind_btVector3___destroy___0=n._emscripten_bind_btVector3___destroy___0,ss=c._emscripten_bind_btVector3_btVector3_0=n._emscripten_bind_btVector3_btVector3_0,ts=c._emscripten_bind_btVector3_btVector3_3=n._emscripten_bind_btVector3_btVector3_3,us=c._emscripten_bind_btVector3_dot_1=
n._emscripten_bind_btVector3_dot_1,vs=c._emscripten_bind_btVector3_length_0=n._emscripten_bind_btVector3_length_0,xs=c._emscripten_bind_btVector3_normalize_0=n._emscripten_bind_btVector3_normalize_0,ys=c._emscripten_bind_btVector3_op_add_1=n._emscripten_bind_btVector3_op_add_1,zs=c._emscripten_bind_btVector3_op_mul_1=n._emscripten_bind_btVector3_op_mul_1,As=c._emscripten_bind_btVector3_op_sub_1=n._emscripten_bind_btVector3_op_sub_1,Bs=c._emscripten_bind_btVector3_rotate_2=n._emscripten_bind_btVector3_rotate_2,
Cs=c._emscripten_bind_btVector3_setValue_3=n._emscripten_bind_btVector3_setValue_3,Ds=c._emscripten_bind_btVector3_setX_1=n._emscripten_bind_btVector3_setX_1,Es=c._emscripten_bind_btVector3_setY_1=n._emscripten_bind_btVector3_setY_1,Fs=c._emscripten_bind_btVector3_setZ_1=n._emscripten_bind_btVector3_setZ_1,Gs=c._emscripten_bind_btVector3_x_0=n._emscripten_bind_btVector3_x_0,Hs=c._emscripten_bind_btVector3_y_0=n._emscripten_bind_btVector3_y_0,Is=c._emscripten_bind_btVector3_z_0=n._emscripten_bind_btVector3_z_0,
Js=c._emscripten_bind_btVector4___destroy___0=n._emscripten_bind_btVector4___destroy___0,Ks=c._emscripten_bind_btVector4_btVector4_0=n._emscripten_bind_btVector4_btVector4_0,Ls=c._emscripten_bind_btVector4_btVector4_4=n._emscripten_bind_btVector4_btVector4_4,Ms=c._emscripten_bind_btVector4_dot_1=n._emscripten_bind_btVector4_dot_1,Ns=c._emscripten_bind_btVector4_length_0=n._emscripten_bind_btVector4_length_0,Os=c._emscripten_bind_btVector4_normalize_0=n._emscripten_bind_btVector4_normalize_0,Ps=c._emscripten_bind_btVector4_op_add_1=
n._emscripten_bind_btVector4_op_add_1,Qs=c._emscripten_bind_btVector4_op_mul_1=n._emscripten_bind_btVector4_op_mul_1,Rs=c._emscripten_bind_btVector4_op_sub_1=n._emscripten_bind_btVector4_op_sub_1,Ss=c._emscripten_bind_btVector4_rotate_2=n._emscripten_bind_btVector4_rotate_2,Ts=c._emscripten_bind_btVector4_setValue_4=n._emscripten_bind_btVector4_setValue_4,Us=c._emscripten_bind_btVector4_setX_1=n._emscripten_bind_btVector4_setX_1,Vs=c._emscripten_bind_btVector4_setY_1=n._emscripten_bind_btVector4_setY_1,
Ws=c._emscripten_bind_btVector4_setZ_1=n._emscripten_bind_btVector4_setZ_1,Xs=c._emscripten_bind_btVector4_w_0=n._emscripten_bind_btVector4_w_0,Ys=c._emscripten_bind_btVector4_x_0=n._emscripten_bind_btVector4_x_0,Zs=c._emscripten_bind_btVector4_y_0=n._emscripten_bind_btVector4_y_0,$s=c._emscripten_bind_btVector4_z_0=n._emscripten_bind_btVector4_z_0,at=c._emscripten_bind_btVehicleRaycasterResult___destroy___0=n._emscripten_bind_btVehicleRaycasterResult___destroy___0,bt=c._emscripten_bind_btVehicleRaycasterResult_get_m_distFraction_0=
n._emscripten_bind_btVehicleRaycasterResult_get_m_distFraction_0,ct=c._emscripten_bind_btVehicleRaycasterResult_get_m_hitNormalInWorld_0=n._emscripten_bind_btVehicleRaycasterResult_get_m_hitNormalInWorld_0,dt=c._emscripten_bind_btVehicleRaycasterResult_get_m_hitPointInWorld_0=n._emscripten_bind_btVehicleRaycasterResult_get_m_hitPointInWorld_0,et=c._emscripten_bind_btVehicleRaycasterResult_set_m_distFraction_1=n._emscripten_bind_btVehicleRaycasterResult_set_m_distFraction_1,ft=c._emscripten_bind_btVehicleRaycasterResult_set_m_hitNormalInWorld_1=
n._emscripten_bind_btVehicleRaycasterResult_set_m_hitNormalInWorld_1,gt=c._emscripten_bind_btVehicleRaycasterResult_set_m_hitPointInWorld_1=n._emscripten_bind_btVehicleRaycasterResult_set_m_hitPointInWorld_1,ht=c._emscripten_bind_btVehicleRaycaster___destroy___0=n._emscripten_bind_btVehicleRaycaster___destroy___0,it=c._emscripten_bind_btVehicleRaycaster_castRay_3=n._emscripten_bind_btVehicleRaycaster_castRay_3,jt=c._emscripten_bind_btVehicleTuning_btVehicleTuning_0=n._emscripten_bind_btVehicleTuning_btVehicleTuning_0,
kt=c._emscripten_bind_btVehicleTuning_get_m_frictionSlip_0=n._emscripten_bind_btVehicleTuning_get_m_frictionSlip_0,lt=c._emscripten_bind_btVehicleTuning_get_m_maxSuspensionForce_0=n._emscripten_bind_btVehicleTuning_get_m_maxSuspensionForce_0,mt=c._emscripten_bind_btVehicleTuning_get_m_maxSuspensionTravelCm_0=n._emscripten_bind_btVehicleTuning_get_m_maxSuspensionTravelCm_0,nt=c._emscripten_bind_btVehicleTuning_get_m_suspensionCompression_0=n._emscripten_bind_btVehicleTuning_get_m_suspensionCompression_0,
ot=c._emscripten_bind_btVehicleTuning_get_m_suspensionDamping_0=n._emscripten_bind_btVehicleTuning_get_m_suspensionDamping_0,pt=c._emscripten_bind_btVehicleTuning_get_m_suspensionStiffness_0=n._emscripten_bind_btVehicleTuning_get_m_suspensionStiffness_0,qt=c._emscripten_bind_btVehicleTuning_set_m_frictionSlip_1=n._emscripten_bind_btVehicleTuning_set_m_frictionSlip_1,rt=c._emscripten_bind_btVehicleTuning_set_m_maxSuspensionForce_1=n._emscripten_bind_btVehicleTuning_set_m_maxSuspensionForce_1,st=c._emscripten_bind_btVehicleTuning_set_m_maxSuspensionTravelCm_1=
n._emscripten_bind_btVehicleTuning_set_m_maxSuspensionTravelCm_1,tt=c._emscripten_bind_btVehicleTuning_set_m_suspensionCompression_1=n._emscripten_bind_btVehicleTuning_set_m_suspensionCompression_1,ut=c._emscripten_bind_btVehicleTuning_set_m_suspensionDamping_1=n._emscripten_bind_btVehicleTuning_set_m_suspensionDamping_1,vt=c._emscripten_bind_btVehicleTuning_set_m_suspensionStiffness_1=n._emscripten_bind_btVehicleTuning_set_m_suspensionStiffness_1,wt=c._emscripten_bind_btWheelInfoConstructionInfo___destroy___0=
n._emscripten_bind_btWheelInfoConstructionInfo___destroy___0,xt=c._emscripten_bind_btWheelInfoConstructionInfo_get_m_bIsFrontWheel_0=n._emscripten_bind_btWheelInfoConstructionInfo_get_m_bIsFrontWheel_0,yt=c._emscripten_bind_btWheelInfoConstructionInfo_get_m_chassisConnectionCS_0=n._emscripten_bind_btWheelInfoConstructionInfo_get_m_chassisConnectionCS_0,zt=c._emscripten_bind_btWheelInfoConstructionInfo_get_m_frictionSlip_0=n._emscripten_bind_btWheelInfoConstructionInfo_get_m_frictionSlip_0,At=c._emscripten_bind_btWheelInfoConstructionInfo_get_m_maxSuspensionForce_0=
n._emscripten_bind_btWheelInfoConstructionInfo_get_m_maxSuspensionForce_0,Bt=c._emscripten_bind_btWheelInfoConstructionInfo_get_m_maxSuspensionTravelCm_0=n._emscripten_bind_btWheelInfoConstructionInfo_get_m_maxSuspensionTravelCm_0,Ct=c._emscripten_bind_btWheelInfoConstructionInfo_get_m_suspensionRestLength_0=n._emscripten_bind_btWheelInfoConstructionInfo_get_m_suspensionRestLength_0,Dt=c._emscripten_bind_btWheelInfoConstructionInfo_get_m_suspensionStiffness_0=n._emscripten_bind_btWheelInfoConstructionInfo_get_m_suspensionStiffness_0,
Et=c._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelAxleCS_0=n._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelAxleCS_0,Ft=c._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelDirectionCS_0=n._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelDirectionCS_0,Gt=c._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelRadius_0=n._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelRadius_0,Ht=c._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelsDampingCompression_0=
n._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelsDampingCompression_0,It=c._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelsDampingRelaxation_0=n._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelsDampingRelaxation_0,Jt=c._emscripten_bind_btWheelInfoConstructionInfo_set_m_bIsFrontWheel_1=n._emscripten_bind_btWheelInfoConstructionInfo_set_m_bIsFrontWheel_1,Kt=c._emscripten_bind_btWheelInfoConstructionInfo_set_m_chassisConnectionCS_1=n._emscripten_bind_btWheelInfoConstructionInfo_set_m_chassisConnectionCS_1,
Lt=c._emscripten_bind_btWheelInfoConstructionInfo_set_m_frictionSlip_1=n._emscripten_bind_btWheelInfoConstructionInfo_set_m_frictionSlip_1,Mt=c._emscripten_bind_btWheelInfoConstructionInfo_set_m_maxSuspensionForce_1=n._emscripten_bind_btWheelInfoConstructionInfo_set_m_maxSuspensionForce_1,Nt=c._emscripten_bind_btWheelInfoConstructionInfo_set_m_maxSuspensionTravelCm_1=n._emscripten_bind_btWheelInfoConstructionInfo_set_m_maxSuspensionTravelCm_1,Ot=c._emscripten_bind_btWheelInfoConstructionInfo_set_m_suspensionRestLength_1=
n._emscripten_bind_btWheelInfoConstructionInfo_set_m_suspensionRestLength_1,Pt=c._emscripten_bind_btWheelInfoConstructionInfo_set_m_suspensionStiffness_1=n._emscripten_bind_btWheelInfoConstructionInfo_set_m_suspensionStiffness_1,Qt=c._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelAxleCS_1=n._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelAxleCS_1,Rt=c._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelDirectionCS_1=n._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelDirectionCS_1,
St=c._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelRadius_1=n._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelRadius_1,Tt=c._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelsDampingCompression_1=n._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelsDampingCompression_1,Ut=c._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelsDampingRelaxation_1=n._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelsDampingRelaxation_1,Vt=c._emscripten_bind_btWheelInfo___destroy___0=
n._emscripten_bind_btWheelInfo___destroy___0,Wt=c._emscripten_bind_btWheelInfo_btWheelInfo_1=n._emscripten_bind_btWheelInfo_btWheelInfo_1,Xt=c._emscripten_bind_btWheelInfo_getSuspensionRestLength_0=n._emscripten_bind_btWheelInfo_getSuspensionRestLength_0,Yt=c._emscripten_bind_btWheelInfo_get_m_bIsFrontWheel_0=n._emscripten_bind_btWheelInfo_get_m_bIsFrontWheel_0,Zt=c._emscripten_bind_btWheelInfo_get_m_brake_0=n._emscripten_bind_btWheelInfo_get_m_brake_0,$t=c._emscripten_bind_btWheelInfo_get_m_chassisConnectionPointCS_0=
n._emscripten_bind_btWheelInfo_get_m_chassisConnectionPointCS_0,au=c._emscripten_bind_btWheelInfo_get_m_clippedInvContactDotSuspension_0=n._emscripten_bind_btWheelInfo_get_m_clippedInvContactDotSuspension_0,bu=c._emscripten_bind_btWheelInfo_get_m_deltaRotation_0=n._emscripten_bind_btWheelInfo_get_m_deltaRotation_0,cu=c._emscripten_bind_btWheelInfo_get_m_engineForce_0=n._emscripten_bind_btWheelInfo_get_m_engineForce_0,du=c._emscripten_bind_btWheelInfo_get_m_frictionSlip_0=n._emscripten_bind_btWheelInfo_get_m_frictionSlip_0,
eu=c._emscripten_bind_btWheelInfo_get_m_maxSuspensionForce_0=n._emscripten_bind_btWheelInfo_get_m_maxSuspensionForce_0,fu=c._emscripten_bind_btWheelInfo_get_m_maxSuspensionTravelCm_0=n._emscripten_bind_btWheelInfo_get_m_maxSuspensionTravelCm_0,gu=c._emscripten_bind_btWheelInfo_get_m_raycastInfo_0=n._emscripten_bind_btWheelInfo_get_m_raycastInfo_0,hu=c._emscripten_bind_btWheelInfo_get_m_rollInfluence_0=n._emscripten_bind_btWheelInfo_get_m_rollInfluence_0,iu=c._emscripten_bind_btWheelInfo_get_m_rotation_0=
n._emscripten_bind_btWheelInfo_get_m_rotation_0,ju=c._emscripten_bind_btWheelInfo_get_m_skidInfo_0=n._emscripten_bind_btWheelInfo_get_m_skidInfo_0,ku=c._emscripten_bind_btWheelInfo_get_m_steering_0=n._emscripten_bind_btWheelInfo_get_m_steering_0,lu=c._emscripten_bind_btWheelInfo_get_m_suspensionRelativeVelocity_0=n._emscripten_bind_btWheelInfo_get_m_suspensionRelativeVelocity_0,mu=c._emscripten_bind_btWheelInfo_get_m_suspensionRestLength1_0=n._emscripten_bind_btWheelInfo_get_m_suspensionRestLength1_0,
nu=c._emscripten_bind_btWheelInfo_get_m_suspensionStiffness_0=n._emscripten_bind_btWheelInfo_get_m_suspensionStiffness_0,ou=c._emscripten_bind_btWheelInfo_get_m_wheelAxleCS_0=n._emscripten_bind_btWheelInfo_get_m_wheelAxleCS_0,pu=c._emscripten_bind_btWheelInfo_get_m_wheelDirectionCS_0=n._emscripten_bind_btWheelInfo_get_m_wheelDirectionCS_0,qu=c._emscripten_bind_btWheelInfo_get_m_wheelsDampingCompression_0=n._emscripten_bind_btWheelInfo_get_m_wheelsDampingCompression_0,ru=c._emscripten_bind_btWheelInfo_get_m_wheelsDampingRelaxation_0=
n._emscripten_bind_btWheelInfo_get_m_wheelsDampingRelaxation_0,su=c._emscripten_bind_btWheelInfo_get_m_wheelsRadius_0=n._emscripten_bind_btWheelInfo_get_m_wheelsRadius_0,tu=c._emscripten_bind_btWheelInfo_get_m_wheelsSuspensionForce_0=n._emscripten_bind_btWheelInfo_get_m_wheelsSuspensionForce_0,uu=c._emscripten_bind_btWheelInfo_get_m_worldTransform_0=n._emscripten_bind_btWheelInfo_get_m_worldTransform_0,vu=c._emscripten_bind_btWheelInfo_set_m_bIsFrontWheel_1=n._emscripten_bind_btWheelInfo_set_m_bIsFrontWheel_1,
wu=c._emscripten_bind_btWheelInfo_set_m_brake_1=n._emscripten_bind_btWheelInfo_set_m_brake_1,xu=c._emscripten_bind_btWheelInfo_set_m_chassisConnectionPointCS_1=n._emscripten_bind_btWheelInfo_set_m_chassisConnectionPointCS_1,yu=c._emscripten_bind_btWheelInfo_set_m_clippedInvContactDotSuspension_1=n._emscripten_bind_btWheelInfo_set_m_clippedInvContactDotSuspension_1,zu=c._emscripten_bind_btWheelInfo_set_m_deltaRotation_1=n._emscripten_bind_btWheelInfo_set_m_deltaRotation_1,Au=c._emscripten_bind_btWheelInfo_set_m_engineForce_1=
n._emscripten_bind_btWheelInfo_set_m_engineForce_1,Bu=c._emscripten_bind_btWheelInfo_set_m_frictionSlip_1=n._emscripten_bind_btWheelInfo_set_m_frictionSlip_1,Cu=c._emscripten_bind_btWheelInfo_set_m_maxSuspensionForce_1=n._emscripten_bind_btWheelInfo_set_m_maxSuspensionForce_1,Du=c._emscripten_bind_btWheelInfo_set_m_maxSuspensionTravelCm_1=n._emscripten_bind_btWheelInfo_set_m_maxSuspensionTravelCm_1,Eu=c._emscripten_bind_btWheelInfo_set_m_raycastInfo_1=n._emscripten_bind_btWheelInfo_set_m_raycastInfo_1,
Fu=c._emscripten_bind_btWheelInfo_set_m_rollInfluence_1=n._emscripten_bind_btWheelInfo_set_m_rollInfluence_1,Gu=c._emscripten_bind_btWheelInfo_set_m_rotation_1=n._emscripten_bind_btWheelInfo_set_m_rotation_1,Hu=c._emscripten_bind_btWheelInfo_set_m_skidInfo_1=n._emscripten_bind_btWheelInfo_set_m_skidInfo_1,Iu=c._emscripten_bind_btWheelInfo_set_m_steering_1=n._emscripten_bind_btWheelInfo_set_m_steering_1,Ju=c._emscripten_bind_btWheelInfo_set_m_suspensionRelativeVelocity_1=n._emscripten_bind_btWheelInfo_set_m_suspensionRelativeVelocity_1,
Ku=c._emscripten_bind_btWheelInfo_set_m_suspensionRestLength1_1=n._emscripten_bind_btWheelInfo_set_m_suspensionRestLength1_1,Lu=c._emscripten_bind_btWheelInfo_set_m_suspensionStiffness_1=n._emscripten_bind_btWheelInfo_set_m_suspensionStiffness_1,Mu=c._emscripten_bind_btWheelInfo_set_m_wheelAxleCS_1=n._emscripten_bind_btWheelInfo_set_m_wheelAxleCS_1,Nu=c._emscripten_bind_btWheelInfo_set_m_wheelDirectionCS_1=n._emscripten_bind_btWheelInfo_set_m_wheelDirectionCS_1,Ou=c._emscripten_bind_btWheelInfo_set_m_wheelsDampingCompression_1=
n._emscripten_bind_btWheelInfo_set_m_wheelsDampingCompression_1,Pu=c._emscripten_bind_btWheelInfo_set_m_wheelsDampingRelaxation_1=n._emscripten_bind_btWheelInfo_set_m_wheelsDampingRelaxation_1,Qu=c._emscripten_bind_btWheelInfo_set_m_wheelsRadius_1=n._emscripten_bind_btWheelInfo_set_m_wheelsRadius_1,Ru=c._emscripten_bind_btWheelInfo_set_m_wheelsSuspensionForce_1=n._emscripten_bind_btWheelInfo_set_m_wheelsSuspensionForce_1,Su=c._emscripten_bind_btWheelInfo_set_m_worldTransform_1=n._emscripten_bind_btWheelInfo_set_m_worldTransform_1,
Tu=c._emscripten_bind_btWheelInfo_updateWheel_2=n._emscripten_bind_btWheelInfo_updateWheel_2,Uu=c._emscripten_bind_tBtCollisionObjectArray___destroy___0=n._emscripten_bind_tBtCollisionObjectArray___destroy___0,Vu=c._emscripten_bind_tBtCollisionObjectArray_at_1=n._emscripten_bind_tBtCollisionObjectArray_at_1,Wu=c._emscripten_bind_tBtCollisionObjectArray_clear_0=n._emscripten_bind_tBtCollisionObjectArray_clear_0,Xu=c._emscripten_bind_tBtCollisionObjectArray_pop_back_0=n._emscripten_bind_tBtCollisionObjectArray_pop_back_0,
Yu=c._emscripten_bind_tBtCollisionObjectArray_push_back_1=n._emscripten_bind_tBtCollisionObjectArray_push_back_1,Zu=c._emscripten_bind_tBtCollisionObjectArray_size_0=n._emscripten_bind_tBtCollisionObjectArray_size_0,$u=c._emscripten_bind_tScalarArray___destroy___0=n._emscripten_bind_tScalarArray___destroy___0,av=c._emscripten_bind_tScalarArray_at_1=n._emscripten_bind_tScalarArray_at_1,bv=c._emscripten_bind_tScalarArray_clear_0=n._emscripten_bind_tScalarArray_clear_0,cv=c._emscripten_bind_tScalarArray_pop_back_0=
n._emscripten_bind_tScalarArray_pop_back_0,dv=c._emscripten_bind_tScalarArray_push_back_1=n._emscripten_bind_tScalarArray_push_back_1,ev=c._emscripten_bind_tScalarArray_size_0=n._emscripten_bind_tScalarArray_size_0,fv=c._emscripten_bind_tVector3Array___destroy___0=n._emscripten_bind_tVector3Array___destroy___0,gv=c._emscripten_bind_tVector3Array_at_1=n._emscripten_bind_tVector3Array_at_1,hv=c._emscripten_bind_tVector3Array_clear_0=n._emscripten_bind_tVector3Array_clear_0,iv=c._emscripten_bind_tVector3Array_pop_back_0=
n._emscripten_bind_tVector3Array_pop_back_0,jv=c._emscripten_bind_tVector3Array_push_back_1=n._emscripten_bind_tVector3Array_push_back_1,kv=c._emscripten_bind_tVector3Array_size_0=n._emscripten_bind_tVector3Array_size_0,lv=c._emscripten_enum_PHY_ScalarType_PHY_DOUBLE=n._emscripten_enum_PHY_ScalarType_PHY_DOUBLE,mv=c._emscripten_enum_PHY_ScalarType_PHY_FIXEDPOINT88=n._emscripten_enum_PHY_ScalarType_PHY_FIXEDPOINT88,nv=c._emscripten_enum_PHY_ScalarType_PHY_FLOAT=n._emscripten_enum_PHY_ScalarType_PHY_FLOAT,
ov=c._emscripten_enum_PHY_ScalarType_PHY_INTEGER=n._emscripten_enum_PHY_ScalarType_PHY_INTEGER,pv=c._emscripten_enum_PHY_ScalarType_PHY_SHORT=n._emscripten_enum_PHY_ScalarType_PHY_SHORT,qv=c._emscripten_enum_PHY_ScalarType_PHY_UCHAR=n._emscripten_enum_PHY_ScalarType_PHY_UCHAR,rv=c._emscripten_enum_btConstraintParams_BT_CONSTRAINT_CFM=n._emscripten_enum_btConstraintParams_BT_CONSTRAINT_CFM,sv=c._emscripten_enum_btConstraintParams_BT_CONSTRAINT_ERP=n._emscripten_enum_btConstraintParams_BT_CONSTRAINT_ERP,
tv=c._emscripten_enum_btConstraintParams_BT_CONSTRAINT_STOP_CFM=n._emscripten_enum_btConstraintParams_BT_CONSTRAINT_STOP_CFM,uv=c._emscripten_enum_btConstraintParams_BT_CONSTRAINT_STOP_ERP=n._emscripten_enum_btConstraintParams_BT_CONSTRAINT_STOP_ERP;c._free=n._free;c._i64Add=n._i64Add;c._i64Subtract=n._i64Subtract;c._llvm_bswap_i16=n._llvm_bswap_i16;c._llvm_bswap_i32=n._llvm_bswap_i32;var hb=c._malloc=n._malloc;c._memcpy=n._memcpy;c._memmove=n._memmove;c._memset=n._memset;c._sbrk=n._sbrk;
c.establishStackSpace=n.establishStackSpace;c.getTempRet0=n.getTempRet0;c.runPostSets=n.runPostSets;var gb=c.setTempRet0=n.setTempRet0;c.setThrew=n.setThrew;c.stackAlloc=n.stackAlloc;var l=c.stackRestore=n.stackRestore,d=c.stackSave=n.stackSave;c.dynCall_di=n.dynCall_di;c.dynCall_did=n.dynCall_did;c.dynCall_diidii=n.dynCall_diidii;c.dynCall_diii=n.dynCall_diii;c.dynCall_diiidii=n.dynCall_diiidii;c.dynCall_diiii=n.dynCall_diiii;c.dynCall_diiiii=n.dynCall_diiiii;c.dynCall_diiiiiiii=n.dynCall_diiiiiiii;
c.dynCall_diiiiiiiii=n.dynCall_diiiiiiiii;c.dynCall_diiiiiiiiii=n.dynCall_diiiiiiiiii;c.dynCall_ii=n.dynCall_ii;c.dynCall_iidid=n.dynCall_iidid;c.dynCall_iii=n.dynCall_iii;c.dynCall_iiid=n.dynCall_iiid;c.dynCall_iiii=n.dynCall_iiii;c.dynCall_iiiii=n.dynCall_iiiii;c.dynCall_iiiiii=n.dynCall_iiiiii;c.dynCall_iiiiiii=n.dynCall_iiiiiii;c.dynCall_iiiiiiiii=n.dynCall_iiiiiiiii;c.dynCall_iiiiiiiiiii=n.dynCall_iiiiiiiiiii;c.dynCall_v=n.dynCall_v;c.dynCall_vi=n.dynCall_vi;c.dynCall_vid=n.dynCall_vid;
c.dynCall_viddiii=n.dynCall_viddiii;c.dynCall_vidi=n.dynCall_vidi;c.dynCall_vidii=n.dynCall_vidii;c.dynCall_vii=n.dynCall_vii;c.dynCall_viid=n.dynCall_viid;c.dynCall_viidi=n.dynCall_viidi;c.dynCall_viidii=n.dynCall_viidii;c.dynCall_viii=n.dynCall_viii;c.dynCall_viiid=n.dynCall_viiid;c.dynCall_viiidii=n.dynCall_viiidii;c.dynCall_viiii=n.dynCall_viiii;c.dynCall_viiiid=n.dynCall_viiiid;c.dynCall_viiiidddddidi=n.dynCall_viiiidddddidi;c.dynCall_viiiiddddiid=n.dynCall_viiiiddddiid;c.dynCall_viiiii=n.dynCall_viiiii;
c.dynCall_viiiiii=n.dynCall_viiiiii;c.dynCall_viiiiiii=n.dynCall_viiiiiii;c.dynCall_viiiiiiiii=n.dynCall_viiiiiiiii;c.dynCall_viiiiiiiiii=n.dynCall_viiiiiiiiii;c.asm=n;
if(Wa){if(String.prototype.startsWith?!Wa.startsWith(Xa):0!==Wa.indexOf(Xa)){var vv=Wa;Wa=c.locateFile?c.locateFile(vv,ia):ia+vv}if(ea||fa){var wv=c.readBinary(Wa);va.set(wv,8)}else{var yv=function(){c.readAsync(Wa,xv,function(){throw"could not load memory initializer "+Wa;})};Ta++;c.monitorRunDependencies&&c.monitorRunDependencies(Ta);var xv=function(a){a.byteLength&&(a=new Uint8Array(a));va.set(a,8);c.memoryInitializerRequest&&delete c.memoryInitializerRequest.response;Ta--;c.monitorRunDependencies&&
c.monitorRunDependencies(Ta);0==Ta&&(null!==Ua&&(clearInterval(Ua),Ua=null),Va&&(a=Va,Va=null,a()))},zv=la(Wa);if(zv)xv(zv.buffer);else if(c.memoryInitializerRequest){var Av=function(){var a=c.memoryInitializerRequest,b=a.response;if(200!==a.status&&0!==a.status)if(b=la(c.memoryInitializerRequestURL))b=b.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+a.status+", retrying "+Wa);yv();return}xv(b)};c.memoryInitializerRequest.response?setTimeout(Av,
0):c.memoryInitializerRequest.addEventListener("load",Av)}else yv()}}c.then=function(a){if(c.calledRun)a(c);else{var b=c.onRuntimeInitialized;c.onRuntimeInitialized=function(){b&&b();a(c)}}return c};Va=function Bv(){c.calledRun||Cv();c.calledRun||(Va=Bv)};
function Cv(){function a(){if(!c.calledRun&&(c.calledRun=!0,!sa)){Na||(Na=!0,Ia(Ka));Ia(La);if(c.onRuntimeInitialized)c.onRuntimeInitialized();if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var a=c.postRun.shift();Ma.unshift(a)}Ia(Ma)}}if(!(0<Ta)){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)Oa();Ia(Ja);0<Ta||c.calledRun||(c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},
1);a()},1)):a())}}c.run=Cv;function ta(a){if(c.onAbort)c.onAbort(a);void 0!==a?(oa(a),pa(a),a=JSON.stringify(a)):a="";sa=!0;throw"abort("+a+"). Build with -s ASSERTIONS=1 for more info.";}c.abort=ta;if(c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();c.noExitRuntime=!0;Cv();function WrapperObject(){}WrapperObject.prototype=Object.create(WrapperObject.prototype);WrapperObject.prototype.constructor=WrapperObject;WrapperObject.prototype.b=WrapperObject;
WrapperObject.c={};c.WrapperObject=WrapperObject;function getCache(a){return(a||WrapperObject).c}c.getCache=getCache;function wrapPointer(a,b){var e=getCache(b),f=e[a];if(f)return f;f=Object.create((b||WrapperObject).prototype);f.a=a;return e[a]=f}c.wrapPointer=wrapPointer;function castObject(a,b){return wrapPointer(a.a,b)}c.castObject=castObject;c.NULL=wrapPointer(0);
function destroy(a){if(!a.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";a.__destroy__();delete getCache(a.b)[a.a]}c.destroy=destroy;function compare(a,b){return a.a===b.a}c.compare=compare;function getPointer(a){return a.a}c.getPointer=getPointer;function getClass(a){return a.b}c.getClass=getClass;var Dv=0,Ev=0,Fv=0,Gv=[],Hv=0;function p(){throw"cannot construct a btCollisionShape, no constructor in IDL";}p.prototype=Object.create(WrapperObject.prototype);
p.prototype.constructor=p;p.prototype.b=p;p.c={};c.btCollisionShape=p;p.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);dg(b,a)};p.prototype.getLocalScaling=function(){return wrapPointer(bg(this.a),q)};p.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);ag(e,a,b)};p.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);eg(b,a)};p.prototype.getMargin=function(){return cg(this.a)};
p.prototype.__destroy__=function(){$f(this.a)};function t(){this.a=sf();getCache(t)[this.a]=this}t.prototype=Object.create(WrapperObject.prototype);t.prototype.constructor=t;t.prototype.b=t;t.c={};c.btCollisionObject=t;t.prototype.setAnisotropicFriction=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Mf(e,a,b)};t.prototype.getCollisionShape=function(){return wrapPointer(yf(this.a),p)};
t.prototype.setContactProcessingThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Rf(b,a)};t.prototype.setActivationState=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Lf(b,a)};t.prototype.forceActivationState=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);tf(b,a)};t.prototype.activate=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);void 0===a?qf(b):rf(b,a)};t.prototype.isActive=function(){return!!Hf(this.a)};t.prototype.isKinematicObject=function(){return!!If(this.a)};
t.prototype.isStaticObject=function(){return!!Jf(this.a)};t.prototype.isStaticOrKinematicObject=function(){return!!Kf(this.a)};t.prototype.getRestitution=function(){return Cf(this.a)};t.prototype.setRestitution=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Vf(b,a)};t.prototype.getFriction=function(){return zf(this.a)};t.prototype.setFriction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Sf(b,a)};t.prototype.getRollingFriction=function(){return Df(this.a)};
t.prototype.setRollingFriction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Wf(b,a)};t.prototype.getCollisionFlags=function(){return xf(this.a)};t.prototype.setCollisionFlags=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Pf(b,a)};t.prototype.getWorldTransform=function(){return wrapPointer(Gf(this.a),u)};t.prototype.setWorldTransform=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Zf(b,a)};
t.prototype.setCollisionShape=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Qf(b,a)};t.prototype.getCcdMotionThreshold=function(){return vf(this.a)};t.prototype.setCcdMotionThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Nf(b,a)};t.prototype.getCcdSweptSphereRadius=function(){return wf(this.a)};t.prototype.setCcdSweptSphereRadius=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Of(b,a)};t.prototype.getUserIndex=function(){return Ef(this.a)};
t.prototype.setUserIndex=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Xf(b,a)};t.prototype.getUserPointer=function(){return wrapPointer(Ff(this.a),VoidPtr)};t.prototype.setUserPointer=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Yf(b,a)};t.prototype.getInterpolationAngularVelocity=function(){return wrapPointer(Af(this.a),q)};t.prototype.setInterpolationAngularVelocity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Tf(b,a)};
t.prototype.getInterpolationLinearVelocity=function(){return wrapPointer(Bf(this.a),q)};t.prototype.setInterpolationLinearVelocity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Uf(b,a)};t.prototype.getBroadphaseHandle=function(){return wrapPointer(uf(this.a),Iv)};t.prototype.__destroy__=function(){pf(this.a)};function v(){throw"cannot construct a btTypedConstraint, no constructor in IDL";}v.prototype=Object.create(WrapperObject.prototype);v.prototype.constructor=v;v.prototype.b=v;v.c={};
c.btTypedConstraint=v;v.prototype.enableFeedback=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ls(b,a)};v.prototype.getBreakingImpulseThreshold=function(){return ms(this.a)};v.prototype.setBreakingImpulseThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ps(b,a)};v.prototype.getParam=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);return ns(e,a,b)};
v.prototype.setParam=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);qs(f,a,b,e)};v.prototype.__destroy__=function(){ks(this.a)};function w(){throw"cannot construct a btCollisionWorld, no constructor in IDL";}w.prototype=Object.create(WrapperObject.prototype);w.prototype.constructor=w;w.prototype.b=w;w.c={};c.btCollisionWorld=w;w.prototype.getDispatcher=function(){return wrapPointer(og(this.a),Jv)};
w.prototype.rayTest=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);qg(f,a,b,e)};w.prototype.getPairCache=function(){return wrapPointer(pg(this.a),Kv)};w.prototype.getDispatchInfo=function(){return wrapPointer(ng(this.a),x)};
w.prototype.addCollisionObject=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);void 0===b?gg(f,a):void 0===e?hg(f,a,b):ig(f,a,b,e)};w.prototype.removeCollisionObject=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);rg(b,a)};w.prototype.getBroadphase=function(){return wrapPointer(mg(this.a),Lv)};
w.prototype.convexSweepTest=function(a,b,e,f,g){var h=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);lg(h,a,b,e,f,g)};w.prototype.contactPairTest=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);jg(f,a,b,e)};
w.prototype.contactTest=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);kg(e,a,b)};w.prototype.updateSingleAabb=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);sg(b,a)};w.prototype.__destroy__=function(){fg(this.a)};function Mv(){throw"cannot construct a btConcaveShape, no constructor in IDL";}Mv.prototype=Object.create(p.prototype);Mv.prototype.constructor=Mv;Mv.prototype.b=Mv;Mv.c={};c.btConcaveShape=Mv;
Mv.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Kg(b,a)};Mv.prototype.getLocalScaling=function(){return wrapPointer(Jg(this.a),q)};Mv.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Ig(e,a,b)};Mv.prototype.__destroy__=function(){Hg(this.a)};function y(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=af(a,b);getCache(y)[this.a]=this}y.prototype=Object.create(p.prototype);
y.prototype.constructor=y;y.prototype.b=y;y.c={};c.btCapsuleShape=y;y.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);jf(b,a)};y.prototype.getMargin=function(){return ef(this.a)};y.prototype.getUpAxis=function(){return gf(this.a)};y.prototype.getRadius=function(){return ff(this.a)};y.prototype.getHalfHeight=function(){return cf(this.a)};y.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);hf(b,a)};
y.prototype.getLocalScaling=function(){return wrapPointer(df(this.a),q)};y.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);bf(e,a,b)};y.prototype.__destroy__=function(){$e(this.a)};function z(){throw"cannot construct a btDynamicsWorld, no constructor in IDL";}z.prototype=Object.create(w.prototype);z.prototype.constructor=z;z.prototype.b=z;z.c={};c.btDynamicsWorld=z;
z.prototype.addAction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Xj(b,a)};z.prototype.removeAction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);kk(b,a)};z.prototype.getSolverInfo=function(){return wrapPointer(ik(this.a),Nv)};z.prototype.getDispatcher=function(){return wrapPointer(gk(this.a),Jv)};z.prototype.rayTest=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);jk(f,a,b,e)};
z.prototype.getPairCache=function(){return wrapPointer(hk(this.a),Kv)};z.prototype.getDispatchInfo=function(){return wrapPointer(fk(this.a),x)};z.prototype.addCollisionObject=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);void 0===b?Yj(f,a):void 0===e?Zj(f,a,b):ak(f,a,b,e)};z.prototype.removeCollisionObject=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);lk(b,a)};
z.prototype.getBroadphase=function(){return wrapPointer(ek(this.a),Lv)};z.prototype.convexSweepTest=function(a,b,e,f,g){var h=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);dk(h,a,b,e,f,g)};z.prototype.contactPairTest=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);bk(f,a,b,e)};
z.prototype.contactTest=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);ck(e,a,b)};z.prototype.updateSingleAabb=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);mk(b,a)};z.prototype.__destroy__=function(){Wj(this.a)};function Ov(){throw"cannot construct a btTriangleMeshShape, no constructor in IDL";}Ov.prototype=Object.create(Mv.prototype);Ov.prototype.constructor=Ov;Ov.prototype.b=Ov;Ov.c={};c.btTriangleMeshShape=Ov;
Ov.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);cs(b,a)};Ov.prototype.getLocalScaling=function(){return wrapPointer(bs(this.a),q)};Ov.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);as(e,a,b)};Ov.prototype.__destroy__=function(){$r(this.a)};function A(){this.a=$k();getCache(A)[this.a]=this}A.prototype=Object.create(t.prototype);A.prototype.constructor=A;A.prototype.b=A;A.c={};
c.btGhostObject=A;A.prototype.getNumOverlappingObjects=function(){return jl(this.a)};A.prototype.getOverlappingObject=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(kl(b,a),t)};A.prototype.setAnisotropicFriction=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);vl(e,a,b)};A.prototype.getCollisionShape=function(){return wrapPointer(fl(this.a),p)};
A.prototype.setContactProcessingThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Al(b,a)};A.prototype.setActivationState=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ul(b,a)};A.prototype.forceActivationState=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);al(b,a)};A.prototype.activate=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);void 0===a?Yk(b):Zk(b,a)};A.prototype.isActive=function(){return!!ql(this.a)};A.prototype.isKinematicObject=function(){return!!rl(this.a)};
A.prototype.isStaticObject=function(){return!!sl(this.a)};A.prototype.isStaticOrKinematicObject=function(){return!!tl(this.a)};A.prototype.getRestitution=function(){return ll(this.a)};A.prototype.setRestitution=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);El(b,a)};A.prototype.getFriction=function(){return gl(this.a)};A.prototype.setFriction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Bl(b,a)};A.prototype.getRollingFriction=function(){return ml(this.a)};
A.prototype.setRollingFriction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Fl(b,a)};A.prototype.getCollisionFlags=function(){return el(this.a)};A.prototype.setCollisionFlags=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);yl(b,a)};A.prototype.getWorldTransform=function(){return wrapPointer(pl(this.a),u)};A.prototype.setWorldTransform=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Il(b,a)};
A.prototype.setCollisionShape=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);zl(b,a)};A.prototype.getCcdMotionThreshold=function(){return cl(this.a)};A.prototype.setCcdMotionThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);wl(b,a)};A.prototype.getCcdSweptSphereRadius=function(){return dl(this.a)};A.prototype.setCcdSweptSphereRadius=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);xl(b,a)};A.prototype.getUserIndex=function(){return nl(this.a)};
A.prototype.setUserIndex=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Gl(b,a)};A.prototype.getUserPointer=function(){return wrapPointer(ol(this.a),VoidPtr)};A.prototype.setUserPointer=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Hl(b,a)};A.prototype.getInterpolationAngularVelocity=function(){return wrapPointer(hl(this.a),q)};A.prototype.setInterpolationAngularVelocity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Cl(b,a)};
A.prototype.getInterpolationLinearVelocity=function(){return wrapPointer(il(this.a),q)};A.prototype.setInterpolationLinearVelocity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Dl(b,a)};A.prototype.getBroadphaseHandle=function(){return wrapPointer(bl(this.a),Iv)};A.prototype.__destroy__=function(){Xk(this.a)};function Pv(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=Wg(a,b);getCache(Pv)[this.a]=this}Pv.prototype=Object.create(p.prototype);
Pv.prototype.constructor=Pv;Pv.prototype.b=Pv;Pv.c={};c.btConeShape=Pv;Pv.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Zg(b,a)};Pv.prototype.getLocalScaling=function(){return wrapPointer(Yg(this.a),q)};Pv.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Xg(e,a,b)};Pv.prototype.__destroy__=function(){Vg(this.a)};
function Qv(){throw"cannot construct a btActionInterface, no constructor in IDL";}Qv.prototype=Object.create(WrapperObject.prototype);Qv.prototype.constructor=Qv;Qv.prototype.b=Qv;Qv.c={};c.btActionInterface=Qv;Qv.prototype.updateAction=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);he(e,a,b)};Qv.prototype.__destroy__=function(){ge(this.a)};
function q(a,b,e){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);this.a=void 0===a?ss():void 0===b?_emscripten_bind_btVector3_btVector3_1(a):void 0===e?_emscripten_bind_btVector3_btVector3_2(a,b):ts(a,b,e);getCache(q)[this.a]=this}q.prototype=Object.create(WrapperObject.prototype);q.prototype.constructor=q;q.prototype.b=q;q.c={};c.btVector3=q;q.prototype.length=q.prototype.length=function(){return vs(this.a)};q.prototype.x=q.prototype.x=function(){return Gs(this.a)};
q.prototype.y=q.prototype.y=function(){return Hs(this.a)};q.prototype.z=q.prototype.z=function(){return Is(this.a)};q.prototype.setX=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ds(b,a)};q.prototype.setY=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Es(b,a)};q.prototype.setZ=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Fs(b,a)};
q.prototype.setValue=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);Cs(f,a,b,e)};q.prototype.normalize=q.prototype.normalize=function(){xs(this.a)};q.prototype.rotate=q.prototype.rotate=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);return wrapPointer(Bs(e,a,b),q)};q.prototype.dot=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return us(b,a)};
q.prototype.op_mul=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(zs(b,a),q)};q.prototype.op_add=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(ys(b,a),q)};q.prototype.op_sub=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(As(b,a),q)};q.prototype.__destroy__=function(){rs(this.a)};function Rv(){throw"cannot construct a btVehicleRaycaster, no constructor in IDL";}Rv.prototype=Object.create(WrapperObject.prototype);
Rv.prototype.constructor=Rv;Rv.prototype.b=Rv;Rv.c={};c.btVehicleRaycaster=Rv;Rv.prototype.castRay=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);it(f,a,b,e)};Rv.prototype.__destroy__=function(){ht(this.a)};function B(){throw"cannot construct a btQuadWord, no constructor in IDL";}B.prototype=Object.create(WrapperObject.prototype);B.prototype.constructor=B;B.prototype.b=B;B.c={};c.btQuadWord=B;
B.prototype.x=B.prototype.x=function(){return to(this.a)};B.prototype.y=B.prototype.y=function(){return uo(this.a)};B.prototype.z=B.prototype.z=function(){return vo(this.a)};B.prototype.w=function(){return so(this.a)};B.prototype.setX=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);po(b,a)};B.prototype.setY=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);qo(b,a)};B.prototype.setZ=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ro(b,a)};
B.prototype.setW=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);oo(b,a)};B.prototype.__destroy__=function(){no(this.a)};function Sv(a){a&&"object"===typeof a&&(a=a.a);this.a=si(a);getCache(Sv)[this.a]=this}Sv.prototype=Object.create(p.prototype);Sv.prototype.constructor=Sv;Sv.prototype.b=Sv;Sv.c={};c.btCylinderShape=Sv;Sv.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);xi(b,a)};Sv.prototype.getMargin=function(){return vi(this.a)};
Sv.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);wi(b,a)};Sv.prototype.getLocalScaling=function(){return wrapPointer(ui(this.a),q)};Sv.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);ti(e,a,b)};Sv.prototype.__destroy__=function(){ri(this.a)};function Tv(){throw"cannot construct a btConvexShape, no constructor in IDL";}Tv.prototype=Object.create(p.prototype);Tv.prototype.constructor=Tv;
Tv.prototype.b=Tv;Tv.c={};c.btConvexShape=Tv;Tv.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Uh(b,a)};Tv.prototype.getLocalScaling=function(){return wrapPointer(Sh(this.a),q)};Tv.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Rh(e,a,b)};Tv.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Vh(b,a)};Tv.prototype.getMargin=function(){return Th(this.a)};
Tv.prototype.__destroy__=function(){Qh(this.a)};function Jv(){throw"cannot construct a btDispatcher, no constructor in IDL";}Jv.prototype=Object.create(WrapperObject.prototype);Jv.prototype.constructor=Jv;Jv.prototype.b=Jv;Jv.c={};c.btDispatcher=Jv;Jv.prototype.getNumManifolds=function(){return Vj(this.a)};Jv.prototype.getManifoldByIndexInternal=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(Uj(b,a),Uv)};Jv.prototype.__destroy__=function(){Tj(this.a)};
function C(a,b,e,f,g){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);this.a=void 0===f?vk(a,b,e):void 0===g?_emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_4(a,b,e,f):wk(a,b,e,f,g);getCache(C)[this.a]=this}C.prototype=Object.create(v.prototype);C.prototype.constructor=C;C.prototype.b=C;C.c={};c.btGeneric6DofConstraint=C;
C.prototype.setLinearLowerLimit=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ek(b,a)};C.prototype.setLinearUpperLimit=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Fk(b,a)};C.prototype.setAngularLowerLimit=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Bk(b,a)};C.prototype.setAngularUpperLimit=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ck(b,a)};C.prototype.getFrameOffsetA=function(){return wrapPointer(zk(this.a),u)};
C.prototype.enableFeedback=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);xk(b,a)};C.prototype.getBreakingImpulseThreshold=function(){return yk(this.a)};C.prototype.setBreakingImpulseThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Dk(b,a)};C.prototype.getParam=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);return Ak(e,a,b)};
C.prototype.setParam=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);Gk(f,a,b,e)};C.prototype.__destroy__=function(){uk(this.a)};function Vv(){throw"cannot construct a btStridingMeshInterface, no constructor in IDL";}Vv.prototype=Object.create(WrapperObject.prototype);Vv.prototype.constructor=Vv;Vv.prototype.b=Vv;Vv.c={};c.btStridingMeshInterface=Vv;Vv.prototype.__destroy__=function(){Pr(this.a)};
function Wv(){throw"cannot construct a btMotionState, no constructor in IDL";}Wv.prototype=Object.create(WrapperObject.prototype);Wv.prototype.constructor=Wv;Wv.prototype.b=Wv;Wv.c={};c.btMotionState=Wv;Wv.prototype.getWorldTransform=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);an(b,a)};Wv.prototype.setWorldTransform=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);bn(b,a)};Wv.prototype.__destroy__=function(){$m(this.a)};
function Xv(){throw"cannot construct a ConvexResultCallback, no constructor in IDL";}Xv.prototype=Object.create(WrapperObject.prototype);Xv.prototype.constructor=Xv;Xv.prototype.b=Xv;Xv.c={};c.ConvexResultCallback=Xv;Xv.prototype.hasHit=function(){return!!gd(this.a)};Xv.prototype.get_m_collisionFilterGroup=function(){return ed(this.a)};Xv.prototype.set_m_collisionFilterGroup=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);id(b,a)};Xv.prototype.get_m_collisionFilterMask=function(){return fd(this.a)};
Xv.prototype.set_m_collisionFilterMask=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);jd(b,a)};Xv.prototype.get_m_closestHitFraction=function(){return dd(this.a)};Xv.prototype.set_m_closestHitFraction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);hd(b,a)};Xv.prototype.__destroy__=function(){cd(this.a)};function Yv(){throw"cannot construct a ContactResultCallback, no constructor in IDL";}Yv.prototype=Object.create(WrapperObject.prototype);Yv.prototype.constructor=Yv;
Yv.prototype.b=Yv;Yv.c={};c.ContactResultCallback=Yv;Yv.prototype.addSingleResult=function(a,b,e,f,g,h,k){var m=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);h&&"object"===typeof h&&(h=h.a);k&&"object"===typeof k&&(k=k.a);return bd(m,a,b,e,f,g,h,k)};Yv.prototype.__destroy__=function(){ad(this.a)};
function Zv(){throw"cannot construct a RayResultCallback, no constructor in IDL";}Zv.prototype=Object.create(WrapperObject.prototype);Zv.prototype.constructor=Zv;Zv.prototype.b=Zv;Zv.c={};c.RayResultCallback=Zv;Zv.prototype.hasHit=function(){return!!Kd(this.a)};Zv.prototype.get_m_collisionFilterGroup=function(){return Hd(this.a)};Zv.prototype.set_m_collisionFilterGroup=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Md(b,a)};Zv.prototype.get_m_collisionFilterMask=function(){return Id(this.a)};
Zv.prototype.set_m_collisionFilterMask=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Nd(b,a)};Zv.prototype.get_m_closestHitFraction=function(){return Gd(this.a)};Zv.prototype.set_m_closestHitFraction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ld(b,a)};Zv.prototype.get_m_collisionObject=function(){return wrapPointer(Jd(this.a),t)};Zv.prototype.set_m_collisionObject=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Od(b,a)};Zv.prototype.__destroy__=function(){Fd(this.a)};
function $v(){throw"cannot construct a btMatrix3x3, no constructor in IDL";}$v.prototype=Object.create(WrapperObject.prototype);$v.prototype.constructor=$v;$v.prototype.b=$v;$v.c={};c.btMatrix3x3=$v;$v.prototype.setEulerZYX=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);Zm(f,a,b,e)};$v.prototype.getRotation=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Xm(b,a)};
$v.prototype.getRow=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(Ym(b,a),q)};$v.prototype.__destroy__=function(){Wm(this.a)};function x(){throw"cannot construct a btDispatcherInfo, no constructor in IDL";}x.prototype=Object.create(WrapperObject.prototype);x.prototype.constructor=x;x.prototype.b=x;x.c={};c.btDispatcherInfo=x;x.prototype.get_m_timeStep=function(){return Ej(this.a)};
x.prototype.set_m_timeStep=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Pj(b,a)};x.prototype.get_m_stepCount=function(){return Cj(this.a)};x.prototype.set_m_stepCount=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Nj(b,a)};x.prototype.get_m_dispatchFunc=function(){return zj(this.a)};x.prototype.set_m_dispatchFunc=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Kj(b,a)};x.prototype.get_m_timeOfImpact=function(){return Dj(this.a)};
x.prototype.set_m_timeOfImpact=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Oj(b,a)};x.prototype.get_m_useContinuous=function(){return!!Fj(this.a)};x.prototype.set_m_useContinuous=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Qj(b,a)};x.prototype.get_m_enableSatConvex=function(){return!!Bj(this.a)};x.prototype.set_m_enableSatConvex=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Mj(b,a)};x.prototype.get_m_enableSPU=function(){return!!Aj(this.a)};
x.prototype.set_m_enableSPU=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Lj(b,a)};x.prototype.get_m_useEpa=function(){return!!Hj(this.a)};x.prototype.set_m_useEpa=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Sj(b,a)};x.prototype.get_m_allowedCcdPenetration=function(){return xj(this.a)};x.prototype.set_m_allowedCcdPenetration=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ij(b,a)};x.prototype.get_m_useConvexConservativeDistanceUtil=function(){return!!Gj(this.a)};
x.prototype.set_m_useConvexConservativeDistanceUtil=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Rj(b,a)};x.prototype.get_m_convexConservativeDistanceThreshold=function(){return yj(this.a)};x.prototype.set_m_convexConservativeDistanceThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Jj(b,a)};x.prototype.__destroy__=function(){wj(this.a)};function aw(){this.a=kd();getCache(aw)[this.a]=this}aw.prototype=Object.create(Wv.prototype);aw.prototype.constructor=aw;
aw.prototype.b=aw;aw.c={};c.LayaMotionState=aw;aw.prototype.getWorldTransform=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);md(b,a)};aw.prototype.setWorldTransform=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);nd(b,a)};aw.prototype.__destroy__=function(){ld(this.a)};function D(){throw"cannot construct a btWheelInfoConstructionInfo, no constructor in IDL";}D.prototype=Object.create(WrapperObject.prototype);D.prototype.constructor=D;D.prototype.b=D;D.c={};
c.btWheelInfoConstructionInfo=D;D.prototype.get_m_chassisConnectionCS=function(){return wrapPointer(yt(this.a),q)};D.prototype.set_m_chassisConnectionCS=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Kt(b,a)};D.prototype.get_m_wheelDirectionCS=function(){return wrapPointer(Ft(this.a),q)};D.prototype.set_m_wheelDirectionCS=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Rt(b,a)};D.prototype.get_m_wheelAxleCS=function(){return wrapPointer(Et(this.a),q)};
D.prototype.set_m_wheelAxleCS=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Qt(b,a)};D.prototype.get_m_suspensionRestLength=function(){return Ct(this.a)};D.prototype.set_m_suspensionRestLength=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ot(b,a)};D.prototype.get_m_maxSuspensionTravelCm=function(){return Bt(this.a)};D.prototype.set_m_maxSuspensionTravelCm=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Nt(b,a)};D.prototype.get_m_wheelRadius=function(){return Gt(this.a)};
D.prototype.set_m_wheelRadius=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);St(b,a)};D.prototype.get_m_suspensionStiffness=function(){return Dt(this.a)};D.prototype.set_m_suspensionStiffness=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Pt(b,a)};D.prototype.get_m_wheelsDampingCompression=function(){return Ht(this.a)};D.prototype.set_m_wheelsDampingCompression=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Tt(b,a)};D.prototype.get_m_wheelsDampingRelaxation=function(){return It(this.a)};
D.prototype.set_m_wheelsDampingRelaxation=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ut(b,a)};D.prototype.get_m_frictionSlip=function(){return zt(this.a)};D.prototype.set_m_frictionSlip=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Lt(b,a)};D.prototype.get_m_maxSuspensionForce=function(){return At(this.a)};D.prototype.set_m_maxSuspensionForce=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Mt(b,a)};D.prototype.get_m_bIsFrontWheel=function(){return!!xt(this.a)};
D.prototype.set_m_bIsFrontWheel=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Jt(b,a)};D.prototype.__destroy__=function(){wt(this.a)};function bw(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=void 0===b?Xh(a):Yh(a,b);getCache(bw)[this.a]=this}bw.prototype=Object.create(Tv.prototype);bw.prototype.constructor=bw;bw.prototype.b=bw;bw.c={};c.btConvexTriangleMeshShape=bw;
bw.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);bi(b,a)};bw.prototype.getLocalScaling=function(){return wrapPointer($h(this.a),q)};bw.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Zh(e,a,b)};bw.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ci(b,a)};bw.prototype.getMargin=function(){return ai(this.a)};bw.prototype.__destroy__=function(){Wh(this.a)};
function Lv(){throw"cannot construct a btBroadphaseInterface, no constructor in IDL";}Lv.prototype=Object.create(WrapperObject.prototype);Lv.prototype.constructor=Lv;Lv.prototype.b=Lv;Lv.c={};c.btBroadphaseInterface=Lv;Lv.prototype.__destroy__=function(){ue(this.a)};function cw(a){a&&"object"===typeof a&&(a=a.a);this.a=void 0===a?Ci():Di(a);getCache(cw)[this.a]=this}cw.prototype=Object.create(WrapperObject.prototype);cw.prototype.constructor=cw;cw.prototype.b=cw;cw.c={};
c.btDefaultCollisionConfiguration=cw;cw.prototype.__destroy__=function(){Bi(this.a)};function E(a,b,e,f){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);this.a=void 0===f?Fp(a,b,e):Gp(a,b,e,f);getCache(E)[this.a]=this}E.prototype=Object.create(WrapperObject.prototype);E.prototype.constructor=E;E.prototype.b=E;E.c={};c.btRigidBodyConstructionInfo=E;E.prototype.get_m_linearDamping=function(){return Pp(this.a)};
E.prototype.set_m_linearDamping=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);aq(b,a)};E.prototype.get_m_angularDamping=function(){return Mp(this.a)};E.prototype.set_m_angularDamping=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Yp(b,a)};E.prototype.get_m_friction=function(){return Op(this.a)};E.prototype.set_m_friction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);$p(b,a)};E.prototype.get_m_rollingFriction=function(){return Sp(this.a)};
E.prototype.set_m_rollingFriction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);dq(b,a)};E.prototype.get_m_restitution=function(){return Rp(this.a)};E.prototype.set_m_restitution=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);cq(b,a)};E.prototype.get_m_linearSleepingThreshold=function(){return Qp(this.a)};E.prototype.set_m_linearSleepingThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);bq(b,a)};E.prototype.get_m_angularSleepingThreshold=function(){return Np(this.a)};
E.prototype.set_m_angularSleepingThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Zp(b,a)};E.prototype.get_m_additionalDamping=function(){return!!Kp(this.a)};E.prototype.set_m_additionalDamping=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Wp(b,a)};E.prototype.get_m_additionalDampingFactor=function(){return Jp(this.a)};E.prototype.set_m_additionalDampingFactor=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Vp(b,a)};
E.prototype.get_m_additionalLinearDampingThresholdSqr=function(){return Lp(this.a)};E.prototype.set_m_additionalLinearDampingThresholdSqr=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Xp(b,a)};E.prototype.get_m_additionalAngularDampingThresholdSqr=function(){return Ip(this.a)};E.prototype.set_m_additionalAngularDampingThresholdSqr=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Up(b,a)};E.prototype.get_m_additionalAngularDampingFactor=function(){return Hp(this.a)};
E.prototype.set_m_additionalAngularDampingFactor=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Tp(b,a)};E.prototype.__destroy__=function(){Ep(this.a)};function dw(){throw"cannot construct a btCollisionConfiguration, no constructor in IDL";}dw.prototype=Object.create(WrapperObject.prototype);dw.prototype.constructor=dw;dw.prototype.b=dw;dw.c={};c.btCollisionConfiguration=dw;dw.prototype.__destroy__=function(){kf(this.a)};function Uv(){this.a=Un();getCache(Uv)[this.a]=this}Uv.prototype=Object.create(WrapperObject.prototype);
Uv.prototype.constructor=Uv;Uv.prototype.b=Uv;Uv.c={};c.btPersistentManifold=Uv;Uv.prototype.getBody0=function(){return wrapPointer(Vn(this.a),t)};Uv.prototype.getBody1=function(){return wrapPointer(Wn(this.a),t)};Uv.prototype.getNumContacts=function(){return Yn(this.a)};Uv.prototype.getContactPoint=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(Xn(b,a),F)};Uv.prototype.__destroy__=function(){Tn(this.a)};
function ew(a){a&&"object"===typeof a&&(a=a.a);this.a=void 0===a?vg():wg(a);getCache(ew)[this.a]=this}ew.prototype=Object.create(p.prototype);ew.prototype.constructor=ew;ew.prototype.b=ew;ew.c={};c.btCompoundShape=ew;ew.prototype.addChildShape=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);ug(e,a,b)};ew.prototype.removeChildShapeByIndex=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Cg(b,a)};ew.prototype.getNumChildShapes=function(){return Bg(this.a)};
ew.prototype.getChildShape=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(yg(b,a),p)};ew.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Eg(b,a)};ew.prototype.getMargin=function(){return Ag(this.a)};ew.prototype.updateChildTransform=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);void 0===e?Fg(f,a,b):Gg(f,a,b,e)};
ew.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Dg(b,a)};ew.prototype.getLocalScaling=function(){return wrapPointer(zg(this.a),q)};ew.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);xg(e,a,b)};ew.prototype.__destroy__=function(){tg(this.a)};function G(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=mc(a,b);getCache(G)[this.a]=this}G.prototype=Object.create(Xv.prototype);
G.prototype.constructor=G;G.prototype.b=G;G.c={};c.ClosestConvexResultCallback=G;G.prototype.hasHit=function(){return!!wc(this.a)};G.prototype.get_m_convexFromWorld=function(){return wrapPointer(rc(this.a),q)};G.prototype.set_m_convexFromWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ac(b,a)};G.prototype.get_m_convexToWorld=function(){return wrapPointer(sc(this.a),q)};G.prototype.set_m_convexToWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Bc(b,a)};
G.prototype.get_m_hitNormalWorld=function(){return wrapPointer(uc(this.a),q)};G.prototype.set_m_hitNormalWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Dc(b,a)};G.prototype.get_m_hitPointWorld=function(){return wrapPointer(vc(this.a),q)};G.prototype.set_m_hitPointWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ec(b,a)};G.prototype.get_m_hitCollisionObject=function(){return wrapPointer(tc(this.a),t)};
G.prototype.set_m_hitCollisionObject=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Cc(b,a)};G.prototype.get_m_collisionFilterGroup=function(){return pc(this.a)};G.prototype.set_m_collisionFilterGroup=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);yc(b,a)};G.prototype.get_m_collisionFilterMask=function(){return qc(this.a)};G.prototype.set_m_collisionFilterMask=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);zc(b,a)};G.prototype.get_m_closestHitFraction=function(){return oc(this.a)};
G.prototype.set_m_closestHitFraction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);xc(b,a)};G.prototype.__destroy__=function(){nc(this.a)};function H(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=Ob(a,b);getCache(H)[this.a]=this}H.prototype=Object.create(Zv.prototype);H.prototype.constructor=H;H.prototype.b=H;H.c={};c.AllHitsRayResultCallback=H;H.prototype.hasHit=function(){return!!$b(this.a)};
H.prototype.get_m_collisionObjects=function(){return wrapPointer(Ub(this.a),fw)};H.prototype.set_m_collisionObjects=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);fc(b,a)};H.prototype.get_m_rayFromWorld=function(){return wrapPointer(Yb(this.a),q)};H.prototype.set_m_rayFromWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);kc(b,a)};H.prototype.get_m_rayToWorld=function(){return wrapPointer(Zb(this.a),q)};
H.prototype.set_m_rayToWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);lc(b,a)};H.prototype.get_m_hitNormalWorld=function(){return wrapPointer(Wb(this.a),gw)};H.prototype.set_m_hitNormalWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ic(b,a)};H.prototype.get_m_hitPointWorld=function(){return wrapPointer(Xb(this.a),gw)};H.prototype.set_m_hitPointWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);jc(b,a)};
H.prototype.get_m_hitFractions=function(){return wrapPointer(Vb(this.a),hw)};H.prototype.set_m_hitFractions=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);hc(b,a)};H.prototype.get_m_collisionFilterGroup=function(){return Rb(this.a)};H.prototype.set_m_collisionFilterGroup=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);bc(b,a)};H.prototype.get_m_collisionFilterMask=function(){return Sb(this.a)};
H.prototype.set_m_collisionFilterMask=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);cc(b,a)};H.prototype.get_m_closestHitFraction=function(){return Qb(this.a)};H.prototype.set_m_closestHitFraction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ac(b,a)};H.prototype.get_m_collisionObject=function(){return wrapPointer(Tb(this.a),t)};H.prototype.set_m_collisionObject=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ec(b,a)};H.prototype.__destroy__=function(){Pb(this.a)};
function iw(a){a&&"object"===typeof a&&(a=a.a);this.a=Pi(a);getCache(iw)[this.a]=this}iw.prototype=Object.create(Rv.prototype);iw.prototype.constructor=iw;iw.prototype.b=iw;iw.c={};c.btDefaultVehicleRaycaster=iw;iw.prototype.castRay=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);Qi(f,a,b,e)};iw.prototype.__destroy__=function(){Oi(this.a)};function jw(){this.a=qh();getCache(jw)[this.a]=this}jw.prototype=Object.create(WrapperObject.prototype);
jw.prototype.constructor=jw;jw.prototype.b=jw;jw.c={};c.btConstraintSetting=jw;jw.prototype.get_m_tau=function(){return th(this.a)};jw.prototype.set_m_tau=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);wh(b,a)};jw.prototype.get_m_damping=function(){return rh(this.a)};jw.prototype.set_m_damping=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);uh(b,a)};jw.prototype.get_m_impulseClamp=function(){return sh(this.a)};
jw.prototype.set_m_impulseClamp=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);vh(b,a)};jw.prototype.__destroy__=function(){ph(this.a)};function kw(){throw"cannot construct a LocalShapeInfo, no constructor in IDL";}kw.prototype=Object.create(WrapperObject.prototype);kw.prototype.constructor=kw;kw.prototype.b=kw;kw.c={};c.LocalShapeInfo=kw;kw.prototype.get_m_shapePart=function(){return Bd(this.a)};
kw.prototype.set_m_shapePart=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Dd(b,a)};kw.prototype.get_m_triangleIndex=function(){return Cd(this.a)};kw.prototype.set_m_triangleIndex=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ed(b,a)};kw.prototype.__destroy__=function(){Ad(this.a)};function I(a){a&&"object"===typeof a&&(a=a.a);this.a=oq(a);getCache(I)[this.a]=this}I.prototype=Object.create(t.prototype);I.prototype.constructor=I;I.prototype.b=I;I.c={};c.btRigidBody=I;
I.prototype.getCenterOfMassTransform=function(){return wrapPointer(vq(this.a),u)};I.prototype.setCenterOfMassTransform=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Uq(b,a)};I.prototype.setSleepingThresholds=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);jr(e,a,b)};I.prototype.setDamping=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Yq(e,a,b)};
I.prototype.setMassProps=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);fr(e,a,b)};I.prototype.setLinearFactor=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);dr(b,a)};I.prototype.applyTorque=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);nq(b,a)};I.prototype.applyForce=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);jq(e,a,b)};
I.prototype.applyCentralForce=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);hq(b,a)};I.prototype.applyTorqueImpulse=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);mq(b,a)};I.prototype.applyImpulse=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);lq(e,a,b)};I.prototype.applyCentralImpulse=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);iq(b,a)};I.prototype.updateInertiaTensor=function(){or(this.a)};
I.prototype.getLinearVelocity=function(){return wrapPointer(Dq(this.a),q)};I.prototype.getAngularVelocity=function(){return wrapPointer(rq(this.a),q)};I.prototype.setLinearVelocity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);er(b,a)};I.prototype.setAngularVelocity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Qq(b,a)};I.prototype.getMotionState=function(){return wrapPointer(Eq(this.a),Wv)};
I.prototype.setMotionState=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);gr(b,a)};I.prototype.setAngularFactor=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Pq(b,a)};I.prototype.upcast=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(nr(b,a),I)};I.prototype.getAabb=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);qq(e,a,b)};I.prototype.applyGravity=function(){kq(this.a)};
I.prototype.getGravity=function(){return wrapPointer(Aq(this.a),q)};I.prototype.setGravity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ar(b,a)};I.prototype.getFlags=function(){return yq(this.a)};I.prototype.setFlags=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Zq(b,a)};I.prototype.setAnisotropicFriction=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Rq(e,a,b)};
I.prototype.getCollisionShape=function(){return wrapPointer(xq(this.a),p)};I.prototype.setContactProcessingThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Xq(b,a)};I.prototype.setActivationState=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Oq(b,a)};I.prototype.forceActivationState=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);pq(b,a)};I.prototype.activate=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);void 0===a?fq(b):gq(b,a)};
I.prototype.isActive=function(){return!!Kq(this.a)};I.prototype.isKinematicObject=function(){return!!Lq(this.a)};I.prototype.isStaticObject=function(){return!!Mq(this.a)};I.prototype.isStaticOrKinematicObject=function(){return!!Nq(this.a)};I.prototype.getRestitution=function(){return Fq(this.a)};I.prototype.setRestitution=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);hr(b,a)};I.prototype.getFriction=function(){return zq(this.a)};
I.prototype.setFriction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);$q(b,a)};I.prototype.getRollingFriction=function(){return Gq(this.a)};I.prototype.setRollingFriction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ir(b,a)};I.prototype.getCollisionFlags=function(){return wq(this.a)};I.prototype.setCollisionFlags=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Vq(b,a)};I.prototype.getWorldTransform=function(){return wrapPointer(Jq(this.a),u)};
I.prototype.setWorldTransform=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);mr(b,a)};I.prototype.setCollisionShape=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Wq(b,a)};I.prototype.getCcdMotionThreshold=function(){return tq(this.a)};I.prototype.setCcdMotionThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Sq(b,a)};I.prototype.getCcdSweptSphereRadius=function(){return uq(this.a)};
I.prototype.setCcdSweptSphereRadius=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Tq(b,a)};I.prototype.getUserIndex=function(){return Hq(this.a)};I.prototype.setUserIndex=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);kr(b,a)};I.prototype.getUserPointer=function(){return wrapPointer(Iq(this.a),VoidPtr)};I.prototype.setUserPointer=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);lr(b,a)};
I.prototype.getInterpolationAngularVelocity=function(){return wrapPointer(Bq(this.a),q)};I.prototype.setInterpolationAngularVelocity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);br(b,a)};I.prototype.getInterpolationLinearVelocity=function(){return wrapPointer(Cq(this.a),q)};I.prototype.setInterpolationLinearVelocity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);cr(b,a)};I.prototype.getBroadphaseHandle=function(){return wrapPointer(sq(this.a),Iv)};I.prototype.__destroy__=function(){eq(this.a)};
function lw(){this.a=zi();getCache(lw)[this.a]=this}lw.prototype=Object.create(WrapperObject.prototype);lw.prototype.constructor=lw;lw.prototype.b=lw;lw.c={};c.btDbvtBroadphase=lw;lw.prototype.getOverlappingPairCache=function(){return wrapPointer(Ai(this.a),Kv)};lw.prototype.__destroy__=function(){yi(this.a)};function mw(a){a&&"object"===typeof a&&(a=a.a);this.a=mf(a);getCache(mw)[this.a]=this}mw.prototype=Object.create(Jv.prototype);mw.prototype.constructor=mw;mw.prototype.b=mw;mw.c={};
c.btCollisionDispatcher=mw;mw.prototype.getNumManifolds=function(){return of(this.a)};mw.prototype.getManifoldByIndexInternal=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(nf(b,a),Uv)};mw.prototype.__destroy__=function(){lf(this.a)};
function nw(a,b,e,f,g){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);this.a=void 0===e?je(a,b):void 0===f?ke(a,b,e):void 0===g?le(a,b,e,f):me(a,b,e,f,g);getCache(nw)[this.a]=this}nw.prototype=Object.create(WrapperObject.prototype);nw.prototype.constructor=nw;nw.prototype.b=nw;nw.c={};c.btAxisSweep3=nw;nw.prototype.__destroy__=function(){ie(this.a)};
function VoidPtr(){throw"cannot construct a VoidPtr, no constructor in IDL";}VoidPtr.prototype=Object.create(WrapperObject.prototype);VoidPtr.prototype.constructor=VoidPtr;VoidPtr.prototype.b=VoidPtr;VoidPtr.c={};c.VoidPtr=VoidPtr;VoidPtr.prototype.__destroy__=function(){fe(this.a)};
function J(a,b,e,f){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);this.a=void 0===e?ah(a,b):void 0===f?_emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_3(a,b,e):bh(a,b,e,f);getCache(J)[this.a]=this}J.prototype=Object.create(v.prototype);J.prototype.constructor=J;J.prototype.b=J;J.c={};c.btConeTwistConstraint=J;
J.prototype.setLimit=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);jh(e,a,b)};J.prototype.setAngularOnly=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);gh(b,a)};J.prototype.setDamping=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ih(b,a)};J.prototype.enableMotor=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);dh(b,a)};J.prototype.setMaxMotorImpulse=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);lh(b,a)};
J.prototype.setMaxMotorImpulseNormalized=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);kh(b,a)};J.prototype.setMotorTarget=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);nh(b,a)};J.prototype.setMotorTargetInConstraintSpace=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);mh(b,a)};J.prototype.enableFeedback=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ch(b,a)};J.prototype.getBreakingImpulseThreshold=function(){return eh(this.a)};
J.prototype.setBreakingImpulseThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);hh(b,a)};J.prototype.getParam=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);return fh(e,a,b)};J.prototype.setParam=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);oh(f,a,b,e)};J.prototype.__destroy__=function(){$g(this.a)};
function K(a,b,e,f,g,h,k){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);h&&"object"===typeof h&&(h=h.a);k&&"object"===typeof k&&(k=k.a);this.a=void 0===e?Tl(a,b):void 0===f?Ul(a,b,e):void 0===g?Vl(a,b,e,f):void 0===h?Wl(a,b,e,f,g):void 0===k?Xl(a,b,e,f,g,h):Yl(a,b,e,f,g,h,k);getCache(K)[this.a]=this}K.prototype=Object.create(v.prototype);K.prototype.constructor=K;K.prototype.b=K;K.c={};
c.btHingeConstraint=K;K.prototype.setLimit=function(a,b,e,f,g){var h=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);void 0===g?fm(h,a,b,e,f):gm(h,a,b,e,f,g)};K.prototype.enableAngularMotor=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);Zl(f,a,b,e)};
K.prototype.setAngularOnly=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);dm(b,a)};K.prototype.enableMotor=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);am(b,a)};K.prototype.setMaxMotorImpulse=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);hm(b,a)};K.prototype.setMotorTarget=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);im(e,a,b)};K.prototype.enableFeedback=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);$l(b,a)};
K.prototype.getBreakingImpulseThreshold=function(){return bm(this.a)};K.prototype.setBreakingImpulseThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);em(b,a)};K.prototype.getParam=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);return cm(e,a,b)};K.prototype.setParam=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);jm(f,a,b,e)};K.prototype.__destroy__=function(){Sl(this.a)};
function ow(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=Rg(a,b);getCache(ow)[this.a]=this}ow.prototype=Object.create(Pv.prototype);ow.prototype.constructor=ow;ow.prototype.b=ow;ow.c={};c.btConeShapeZ=ow;ow.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ug(b,a)};ow.prototype.getLocalScaling=function(){return wrapPointer(Tg(this.a),q)};
ow.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Sg(e,a,b)};ow.prototype.__destroy__=function(){Qg(this.a)};function pw(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=Mg(a,b);getCache(pw)[this.a]=this}pw.prototype=Object.create(Pv.prototype);pw.prototype.constructor=pw;pw.prototype.b=pw;pw.c={};c.btConeShapeX=pw;
pw.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Pg(b,a)};pw.prototype.getLocalScaling=function(){return wrapPointer(Og(this.a),q)};pw.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Ng(e,a,b)};pw.prototype.__destroy__=function(){Lg(this.a)};
function qw(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=void 0===a?hs():void 0===b?is(a):js(a,b);getCache(qw)[this.a]=this}qw.prototype=Object.create(Vv.prototype);qw.prototype.constructor=qw;qw.prototype.b=qw;qw.c={};c.btTriangleMesh=qw;qw.prototype.addTriangle=function(a,b,e,f){var g=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);void 0===f?es(g,a,b,e):gs(g,a,b,e,f)};
qw.prototype.__destroy__=function(){ds(this.a)};function rw(){this.a=Kh();getCache(rw)[this.a]=this}rw.prototype=Object.create(p.prototype);rw.prototype.constructor=rw;rw.prototype.b=rw;rw.c={};c.btConvexHullShape=rw;rw.prototype.addPoint=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);void 0===b?Ih(e,a):Jh(e,a,b)};rw.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ph(b,a)};rw.prototype.getMargin=function(){return Nh(this.a)};
rw.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Oh(b,a)};rw.prototype.getLocalScaling=function(){return wrapPointer(Mh(this.a),q)};rw.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Lh(e,a,b)};rw.prototype.__destroy__=function(){Hh(this.a)};function L(){this.a=jt();getCache(L)[this.a]=this}L.prototype=Object.create(WrapperObject.prototype);L.prototype.constructor=L;L.prototype.b=L;
L.c={};c.btVehicleTuning=L;L.prototype.get_m_suspensionStiffness=function(){return pt(this.a)};L.prototype.set_m_suspensionStiffness=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);vt(b,a)};L.prototype.get_m_suspensionCompression=function(){return nt(this.a)};L.prototype.set_m_suspensionCompression=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);tt(b,a)};L.prototype.get_m_suspensionDamping=function(){return ot(this.a)};
L.prototype.set_m_suspensionDamping=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ut(b,a)};L.prototype.get_m_maxSuspensionTravelCm=function(){return mt(this.a)};L.prototype.set_m_maxSuspensionTravelCm=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);st(b,a)};L.prototype.get_m_frictionSlip=function(){return kt(this.a)};L.prototype.set_m_frictionSlip=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);qt(b,a)};L.prototype.get_m_maxSuspensionForce=function(){return lt(this.a)};
L.prototype.set_m_maxSuspensionForce=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);rt(b,a)};function sw(){throw"cannot construct a btCollisionObjectWrapper, no constructor in IDL";}sw.prototype=Object.create(WrapperObject.prototype);sw.prototype.constructor=sw;sw.prototype.b=sw;sw.c={};c.btCollisionObjectWrapper=sw;function tw(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=void 0===a?Hi():void 0===b?Ii(a):Ji(a,b);getCache(tw)[this.a]=this}tw.prototype=Object.create(Wv.prototype);
tw.prototype.constructor=tw;tw.prototype.b=tw;tw.c={};c.btDefaultMotionState=tw;tw.prototype.getWorldTransform=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ki(b,a)};tw.prototype.setWorldTransform=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Mi(b,a)};tw.prototype.get_m_graphicsWorldTrans=function(){return wrapPointer(Li(this.a),u)};tw.prototype.set_m_graphicsWorldTrans=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ni(b,a)};tw.prototype.__destroy__=function(){Gi(this.a)};
function N(a){a&&"object"===typeof a&&(a=a.a);this.a=Wt(a);getCache(N)[this.a]=this}N.prototype=Object.create(WrapperObject.prototype);N.prototype.constructor=N;N.prototype.b=N;N.c={};c.btWheelInfo=N;N.prototype.getSuspensionRestLength=function(){return Xt(this.a)};N.prototype.updateWheel=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Tu(e,a,b)};N.prototype.get_m_suspensionStiffness=function(){return nu(this.a)};
N.prototype.set_m_suspensionStiffness=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Lu(b,a)};N.prototype.get_m_frictionSlip=function(){return du(this.a)};N.prototype.set_m_frictionSlip=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Bu(b,a)};N.prototype.get_m_engineForce=function(){return cu(this.a)};N.prototype.set_m_engineForce=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Au(b,a)};N.prototype.get_m_rollInfluence=function(){return hu(this.a)};
N.prototype.set_m_rollInfluence=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Fu(b,a)};N.prototype.get_m_suspensionRestLength1=function(){return mu(this.a)};N.prototype.set_m_suspensionRestLength1=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ku(b,a)};N.prototype.get_m_wheelsRadius=function(){return su(this.a)};N.prototype.set_m_wheelsRadius=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Qu(b,a)};N.prototype.get_m_wheelsDampingCompression=function(){return qu(this.a)};
N.prototype.set_m_wheelsDampingCompression=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ou(b,a)};N.prototype.get_m_wheelsDampingRelaxation=function(){return ru(this.a)};N.prototype.set_m_wheelsDampingRelaxation=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Pu(b,a)};N.prototype.get_m_steering=function(){return ku(this.a)};N.prototype.set_m_steering=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Iu(b,a)};N.prototype.get_m_maxSuspensionForce=function(){return eu(this.a)};
N.prototype.set_m_maxSuspensionForce=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Cu(b,a)};N.prototype.get_m_maxSuspensionTravelCm=function(){return fu(this.a)};N.prototype.set_m_maxSuspensionTravelCm=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Du(b,a)};N.prototype.get_m_wheelsSuspensionForce=function(){return tu(this.a)};N.prototype.set_m_wheelsSuspensionForce=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ru(b,a)};N.prototype.get_m_bIsFrontWheel=function(){return!!Yt(this.a)};
N.prototype.set_m_bIsFrontWheel=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);vu(b,a)};N.prototype.get_m_raycastInfo=function(){return wrapPointer(gu(this.a),O)};N.prototype.set_m_raycastInfo=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Eu(b,a)};N.prototype.get_m_chassisConnectionPointCS=function(){return wrapPointer($t(this.a),q)};N.prototype.set_m_chassisConnectionPointCS=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);xu(b,a)};
N.prototype.get_m_worldTransform=function(){return wrapPointer(uu(this.a),u)};N.prototype.set_m_worldTransform=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Su(b,a)};N.prototype.get_m_wheelDirectionCS=function(){return wrapPointer(pu(this.a),q)};N.prototype.set_m_wheelDirectionCS=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Nu(b,a)};N.prototype.get_m_wheelAxleCS=function(){return wrapPointer(ou(this.a),q)};
N.prototype.set_m_wheelAxleCS=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Mu(b,a)};N.prototype.get_m_rotation=function(){return iu(this.a)};N.prototype.set_m_rotation=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Gu(b,a)};N.prototype.get_m_deltaRotation=function(){return bu(this.a)};N.prototype.set_m_deltaRotation=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);zu(b,a)};N.prototype.get_m_brake=function(){return Zt(this.a)};
N.prototype.set_m_brake=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);wu(b,a)};N.prototype.get_m_clippedInvContactDotSuspension=function(){return au(this.a)};N.prototype.set_m_clippedInvContactDotSuspension=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);yu(b,a)};N.prototype.get_m_suspensionRelativeVelocity=function(){return lu(this.a)};N.prototype.set_m_suspensionRelativeVelocity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ju(b,a)};N.prototype.get_m_skidInfo=function(){return ju(this.a)};
N.prototype.set_m_skidInfo=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Hu(b,a)};N.prototype.__destroy__=function(){Vt(this.a)};
function P(a,b,e,f){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);this.a=void 0===a?Ks():void 0===b?_emscripten_bind_btVector4_btVector4_1(a):void 0===e?_emscripten_bind_btVector4_btVector4_2(a,b):void 0===f?_emscripten_bind_btVector4_btVector4_3(a,b,e):Ls(a,b,e,f);getCache(P)[this.a]=this}P.prototype=Object.create(q.prototype);P.prototype.constructor=P;P.prototype.b=P;P.c={};c.btVector4=P;P.prototype.w=function(){return Xs(this.a)};
P.prototype.setValue=function(a,b,e,f){var g=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);Ts(g,a,b,e,f)};P.prototype.length=P.prototype.length=function(){return Ns(this.a)};P.prototype.x=P.prototype.x=function(){return Ys(this.a)};P.prototype.y=P.prototype.y=function(){return Zs(this.a)};P.prototype.z=P.prototype.z=function(){return $s(this.a)};
P.prototype.setX=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Us(b,a)};P.prototype.setY=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Vs(b,a)};P.prototype.setZ=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ws(b,a)};P.prototype.normalize=P.prototype.normalize=function(){Os(this.a)};P.prototype.rotate=P.prototype.rotate=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);return wrapPointer(Ss(e,a,b),q)};
P.prototype.dot=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return Ms(b,a)};P.prototype.op_mul=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(Qs(b,a),q)};P.prototype.op_add=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(Ps(b,a),q)};P.prototype.op_sub=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(Rs(b,a),q)};P.prototype.__destroy__=function(){Js(this.a)};
function uw(){this.a=Fi();getCache(uw)[this.a]=this}uw.prototype=Object.create(WrapperObject.prototype);uw.prototype.constructor=uw;uw.prototype.b=uw;uw.c={};c.btDefaultCollisionConstructionInfo=uw;uw.prototype.__destroy__=function(){Ei(this.a)};function vw(){throw"cannot construct a btVehicleRaycasterResult, no constructor in IDL";}vw.prototype=Object.create(WrapperObject.prototype);vw.prototype.constructor=vw;vw.prototype.b=vw;vw.c={};c.btVehicleRaycasterResult=vw;
vw.prototype.get_m_hitPointInWorld=function(){return wrapPointer(dt(this.a),q)};vw.prototype.set_m_hitPointInWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);gt(b,a)};vw.prototype.get_m_hitNormalInWorld=function(){return wrapPointer(ct(this.a),q)};vw.prototype.set_m_hitNormalInWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ft(b,a)};vw.prototype.get_m_distFraction=function(){return bt(this.a)};
vw.prototype.set_m_distFraction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);et(b,a)};vw.prototype.__destroy__=function(){at(this.a)};function ww(){throw"cannot construct a btConstraintSolver, no constructor in IDL";}ww.prototype=Object.create(WrapperObject.prototype);ww.prototype.constructor=ww;ww.prototype.b=ww;ww.c={};c.btConstraintSolver=ww;ww.prototype.__destroy__=function(){xh(this.a)};
function Q(a,b,e){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);this.a=bp(a,b,e);getCache(Q)[this.a]=this}Q.prototype=Object.create(Qv.prototype);Q.prototype.constructor=Q;Q.prototype.b=Q;Q.c={};c.btRaycastVehicle=Q;Q.prototype.applyEngineForce=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);ap(e,a,b)};
Q.prototype.setSteeringValue=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);up(e,a,b)};Q.prototype.getWheelTransformWS=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(op(b,a),u)};Q.prototype.updateWheelTransform=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Bp(e,a,b)};
Q.prototype.addWheel=function(a,b,e,f,g,h,k){var m=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);h&&"object"===typeof h&&(h=h.a);k&&"object"===typeof k&&(k=k.a);return wrapPointer($o(m,a,b,e,f,g,h,k),N)};Q.prototype.getNumWheels=function(){return gp(this.a)};Q.prototype.getRigidBody=function(){return wrapPointer(ip(this.a),I)};
Q.prototype.getWheelInfo=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(np(b,a),N)};Q.prototype.setBrake=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);rp(e,a,b)};Q.prototype.setCoordinateSystem=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);sp(f,a,b,e)};Q.prototype.getCurrentSpeedKmHour=function(){return dp(this.a)};
Q.prototype.getChassisWorldTransform=function(){return wrapPointer(cp(this.a),u)};Q.prototype.rayCast=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return pp(b,a)};Q.prototype.updateVehicle=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ap(b,a)};Q.prototype.resetSuspension=function(){qp(this.a)};Q.prototype.getSteeringValue=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return jp(b,a)};
Q.prototype.updateWheelTransformsWS=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);void 0===b?Cp(e,a):Dp(e,a,b)};Q.prototype.setPitchControl=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);tp(b,a)};Q.prototype.updateSuspension=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);zp(b,a)};Q.prototype.updateFriction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);yp(b,a)};Q.prototype.getRightAxis=function(){return hp(this.a)};
Q.prototype.getUpAxis=function(){return kp(this.a)};Q.prototype.getForwardAxis=function(){return ep(this.a)};Q.prototype.getForwardVector=function(){return wrapPointer(fp(this.a),q)};Q.prototype.getUserConstraintType=function(){return mp(this.a)};Q.prototype.setUserConstraintType=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);wp(b,a)};Q.prototype.setUserConstraintId=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);vp(b,a)};Q.prototype.getUserConstraintId=function(){return lp(this.a)};
Q.prototype.updateAction=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);xp(e,a,b)};Q.prototype.__destroy__=function(){Zo(this.a)};function gw(){throw"cannot construct a tVector3Array, no constructor in IDL";}gw.prototype=Object.create(WrapperObject.prototype);gw.prototype.constructor=gw;gw.prototype.b=gw;gw.c={};c.tVector3Array=gw;gw.prototype.size=gw.prototype.size=function(){return kv(this.a)};
gw.prototype.at=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(gv(b,a),q)};gw.prototype.clear=gw.prototype.clear=function(){hv(this.a)};gw.prototype.push_back=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);jv(b,a)};gw.prototype.pop_back=function(){iv(this.a)};gw.prototype.__destroy__=function(){fv(this.a)};function xw(a){a&&"object"===typeof a&&(a=a.a);this.a=ei(a);getCache(xw)[this.a]=this}xw.prototype=Object.create(Sv.prototype);xw.prototype.constructor=xw;
xw.prototype.b=xw;xw.c={};c.btCylinderShapeX=xw;xw.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ji(b,a)};xw.prototype.getMargin=function(){return hi(this.a)};xw.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ii(b,a)};xw.prototype.getLocalScaling=function(){return wrapPointer(gi(this.a),q)};xw.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);fi(e,a,b)};
xw.prototype.__destroy__=function(){di(this.a)};function yw(a){a&&"object"===typeof a&&(a=a.a);this.a=li(a);getCache(yw)[this.a]=this}yw.prototype=Object.create(Sv.prototype);yw.prototype.constructor=yw;yw.prototype.b=yw;yw.c={};c.btCylinderShapeZ=yw;yw.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);qi(b,a)};yw.prototype.getMargin=function(){return oi(this.a)};yw.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);pi(b,a)};
yw.prototype.getLocalScaling=function(){return wrapPointer(ni(this.a),q)};yw.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);mi(e,a,b)};yw.prototype.__destroy__=function(){ki(this.a)};function zw(){this.a=qr();getCache(zw)[this.a]=this}zw.prototype=Object.create(WrapperObject.prototype);zw.prototype.constructor=zw;zw.prototype.b=zw;zw.c={};c.btSequentialImpulseConstraintSolver=zw;zw.prototype.__destroy__=function(){pr(this.a)};
function O(){throw"cannot construct a RaycastInfo, no constructor in IDL";}O.prototype=Object.create(WrapperObject.prototype);O.prototype.constructor=O;O.prototype.b=O;O.c={};c.RaycastInfo=O;O.prototype.get_m_contactNormalWS=function(){return wrapPointer(Qd(this.a),q)};O.prototype.set_m_contactNormalWS=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Yd(b,a)};O.prototype.get_m_contactPointWS=function(){return wrapPointer(Rd(this.a),q)};
O.prototype.set_m_contactPointWS=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Zd(b,a)};O.prototype.get_m_suspensionLength=function(){return Vd(this.a)};O.prototype.set_m_suspensionLength=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ce(b,a)};O.prototype.get_m_hardPointWS=function(){return wrapPointer(Td(this.a),q)};O.prototype.set_m_hardPointWS=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ae(b,a)};
O.prototype.get_m_wheelDirectionWS=function(){return wrapPointer(Xd(this.a),q)};O.prototype.set_m_wheelDirectionWS=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ee(b,a)};O.prototype.get_m_wheelAxleWS=function(){return wrapPointer(Wd(this.a),q)};O.prototype.set_m_wheelAxleWS=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);de(b,a)};O.prototype.get_m_isInContact=function(){return!!Ud(this.a)};
O.prototype.set_m_isInContact=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);be(b,a)};O.prototype.get_m_groundObject=function(){return Sd(this.a)};O.prototype.set_m_groundObject=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);$d(b,a)};O.prototype.__destroy__=function(){Pd(this.a)};
function Aw(a,b,e,f,g,h,k,m,r){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);h&&"object"===typeof h&&(h=h.a);k&&"object"===typeof k&&(k=k.a);m&&"object"===typeof m&&(m=m.a);r&&"object"===typeof r&&(r=r.a);this.a=Ml(a,b,e,f,g,h,k,m,r);getCache(Aw)[this.a]=this}Aw.prototype=Object.create(Mv.prototype);Aw.prototype.constructor=Aw;Aw.prototype.b=Aw;Aw.c={};c.btHeightfieldTerrainShape=Aw;
Aw.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Rl(b,a)};Aw.prototype.getMargin=function(){return Pl(this.a)};Aw.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ql(b,a)};Aw.prototype.getLocalScaling=function(){return wrapPointer(Ol(this.a),q)};Aw.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Nl(e,a,b)};Aw.prototype.__destroy__=function(){Ll(this.a)};
function S(a,b,e,f){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);this.a=$i(a,b,e,f);getCache(S)[this.a]=this}S.prototype=Object.create(z.prototype);S.prototype.constructor=S;S.prototype.b=S;S.c={};c.btDiscreteDynamicsWorld=S;S.prototype.setGravity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);rj(b,a)};S.prototype.getGravity=function(){return wrapPointer(ij(this.a),q)};
S.prototype.addRigidBody=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);void 0===b?Yi(f,a):void 0===e?_emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_2(f,a,b):Zi(f,a,b,e)};S.prototype.removeRigidBody=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);pj(b,a)};S.prototype.addConstraint=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);void 0===b?Wi(e,a):Xi(e,a,b)};
S.prototype.removeConstraint=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);oj(b,a)};S.prototype.stepSimulation=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);return void 0===b?sj(f,a):void 0===e?tj(f,a,b):uj(f,a,b,e)};S.prototype.clearForces=function(){aj(this.a)};S.prototype.setApplySpeculativeContactRestitution=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);qj(b,a)};
S.prototype.getApplySpeculativeContactRestitution=function(){return!!ej(this.a)};S.prototype.getDispatcher=function(){return wrapPointer(hj(this.a),Jv)};S.prototype.rayTest=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);lj(f,a,b,e)};S.prototype.getPairCache=function(){return wrapPointer(jj(this.a),Kv)};S.prototype.getDispatchInfo=function(){return wrapPointer(gj(this.a),x)};
S.prototype.addCollisionObject=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);void 0===b?Ti(f,a):void 0===e?Ui(f,a,b):Vi(f,a,b,e)};S.prototype.removeCollisionObject=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);nj(b,a)};S.prototype.getBroadphase=function(){return wrapPointer(fj(this.a),Lv)};
S.prototype.convexSweepTest=function(a,b,e,f,g){var h=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);dj(h,a,b,e,f,g)};S.prototype.contactPairTest=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);bj(f,a,b,e)};
S.prototype.contactTest=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);cj(e,a,b)};S.prototype.updateSingleAabb=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);vj(b,a)};S.prototype.addAction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Si(b,a)};S.prototype.removeAction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);mj(b,a)};S.prototype.getSolverInfo=function(){return wrapPointer(kj(this.a),Nv)};S.prototype.__destroy__=function(){Ri(this.a)};
function Bw(){this.a=Kl();getCache(Bw)[this.a]=this}Bw.prototype=Object.create(WrapperObject.prototype);Bw.prototype.constructor=Bw;Bw.prototype.b=Bw;Bw.c={};c.btGhostPairCallback=Bw;Bw.prototype.__destroy__=function(){Jl(this.a)};function Cw(){throw"cannot construct a btOverlappingPairCallback, no constructor in IDL";}Cw.prototype=Object.create(WrapperObject.prototype);Cw.prototype.constructor=Cw;Cw.prototype.b=Cw;Cw.c={};c.btOverlappingPairCallback=Cw;Cw.prototype.__destroy__=function(){en(this.a)};
function T(a,b,e,f){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);this.a=lm(a,b,e,f);getCache(T)[this.a]=this}T.prototype=Object.create(Qv.prototype);T.prototype.constructor=T;T.prototype.b=T;T.c={};c.btKinematicCharacterController=T;T.prototype.setUp=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Bm(b,a)};T.prototype.setWalkDirection=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Em(b,a)};
T.prototype.setVelocityForTimeInterval=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Dm(e,a,b)};T.prototype.warp=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Gm(b,a)};T.prototype.preStep=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);tm(b,a)};T.prototype.playerStep=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);sm(e,a,b)};
T.prototype.setFallSpeed=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);um(b,a)};T.prototype.setJumpSpeed=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);xm(b,a)};T.prototype.setMaxJumpHeight=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ym(b,a)};T.prototype.canJump=function(){return!!mm(this.a)};T.prototype.jump=function(){qm(this.a)};T.prototype.setGravity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);wm(b,a)};
T.prototype.getGravity=function(){return wrapPointer(om(this.a),q)};T.prototype.setMaxSlope=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);zm(b,a)};T.prototype.getMaxSlope=function(){return pm(this.a)};T.prototype.getGhostObject=function(){return wrapPointer(nm(this.a),U)};T.prototype.setUseGhostSweepTest=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Cm(b,a)};T.prototype.onGround=function(){return!!rm(this.a)};
T.prototype.setUpInterpolate=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Am(b,a)};T.prototype.updateAction=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Fm(e,a,b)};T.prototype.__destroy__=function(){km(this.a)};function Dw(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=Lr(a,b);getCache(Dw)[this.a]=this}Dw.prototype=Object.create(Mv.prototype);Dw.prototype.constructor=Dw;Dw.prototype.b=Dw;Dw.c={};
c.btStaticPlaneShape=Dw;Dw.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Or(b,a)};Dw.prototype.getLocalScaling=function(){return wrapPointer(Nr(this.a),q)};Dw.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Mr(e,a,b)};Dw.prototype.__destroy__=function(){Kr(this.a)};function Kv(){throw"cannot construct a btOverlappingPairCache, no constructor in IDL";}Kv.prototype=Object.create(WrapperObject.prototype);
Kv.prototype.constructor=Kv;Kv.prototype.b=Kv;Kv.c={};c.btOverlappingPairCache=Kv;Kv.prototype.setInternalGhostPairCallback=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);dn(b,a)};Kv.prototype.__destroy__=function(){cn(this.a)};function fw(){throw"cannot construct a tBtCollisionObjectArray, no constructor in IDL";}fw.prototype=Object.create(WrapperObject.prototype);fw.prototype.constructor=fw;fw.prototype.b=fw;fw.c={};c.tBtCollisionObjectArray=fw;fw.prototype.size=fw.prototype.size=function(){return Zu(this.a)};
fw.prototype.at=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(Vu(b,a),t)};fw.prototype.clear=fw.prototype.clear=function(){Wu(this.a)};fw.prototype.push_back=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Yu(b,a)};fw.prototype.pop_back=function(){Xu(this.a)};fw.prototype.__destroy__=function(){Uu(this.a)};
function Ew(a,b,e,f){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);this.a=ok(a,b,e,f);getCache(Ew)[this.a]=this}Ew.prototype=Object.create(v.prototype);Ew.prototype.constructor=Ew;Ew.prototype.b=Ew;Ew.c={};c.btFixedConstraint=Ew;Ew.prototype.enableFeedback=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);pk(b,a)};Ew.prototype.getBreakingImpulseThreshold=function(){return qk(this.a)};
Ew.prototype.setBreakingImpulseThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);sk(b,a)};Ew.prototype.getParam=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);return rk(e,a,b)};Ew.prototype.setParam=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);tk(f,a,b,e)};Ew.prototype.__destroy__=function(){nk(this.a)};
function u(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=void 0===a?Rr():void 0===b?_emscripten_bind_btTransform_btTransform_1(a):Sr(a,b);getCache(u)[this.a]=this}u.prototype=Object.create(WrapperObject.prototype);u.prototype.constructor=u;u.prototype.b=u;u.c={};c.btTransform=u;u.prototype.setIdentity=function(){Xr(this.a)};u.prototype.setOrigin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Yr(b,a)};
u.prototype.setRotation=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Zr(b,a)};u.prototype.getOrigin=function(){return wrapPointer(Ur(this.a),q)};u.prototype.getRotation=function(){return wrapPointer(Vr(this.a),V)};u.prototype.getBasis=function(){return wrapPointer(Tr(this.a),$v)};
u.prototype.setFromOpenGLMatrix=function(a){var b=this.a;if(Hv){for(var e=0;e<Gv.length;e++)c._free(Gv[e]);Gv.length=0;c._free(Dv);Dv=0;Ev+=Hv;Hv=0}Dv||(Ev+=128,Dv=c._malloc(Ev),assert(Dv));Fv=0;if("object"==typeof a&&"object"===typeof a){assert(Dv);e=a.length*xa.BYTES_PER_ELEMENT;e=e+7&-8;if(Fv+e>=Ev){assert(0<e);Hv+=e;var f=c._malloc(e);Gv.push(f)}else f=Dv+Fv,Fv+=e;f=e=f;switch(xa.BYTES_PER_ELEMENT){case 2:f>>=1;break;case 4:f>>=2;break;case 8:f>>=3}for(var g=0;g<a.length;g++)xa[f+g]=a[g];a=e}Wr(b,
a)};u.prototype.__destroy__=function(){Qr(this.a)};function W(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=Fc(a,b);getCache(W)[this.a]=this}W.prototype=Object.create(Zv.prototype);W.prototype.constructor=W;W.prototype.b=W;W.c={};c.ClosestRayResultCallback=W;W.prototype.hasHit=function(){return!!Pc(this.a)};W.prototype.get_m_rayFromWorld=function(){return wrapPointer(Nc(this.a),q)};
W.prototype.set_m_rayFromWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Wc(b,a)};W.prototype.get_m_rayToWorld=function(){return wrapPointer(Oc(this.a),q)};W.prototype.set_m_rayToWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Xc(b,a)};W.prototype.get_m_hitNormalWorld=function(){return wrapPointer(Lc(this.a),q)};W.prototype.set_m_hitNormalWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Uc(b,a)};
W.prototype.get_m_hitPointWorld=function(){return wrapPointer(Mc(this.a),q)};W.prototype.set_m_hitPointWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Vc(b,a)};W.prototype.get_m_collisionFilterGroup=function(){return Ic(this.a)};W.prototype.set_m_collisionFilterGroup=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Rc(b,a)};W.prototype.get_m_collisionFilterMask=function(){return Jc(this.a)};
W.prototype.set_m_collisionFilterMask=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Sc(b,a)};W.prototype.get_m_closestHitFraction=function(){return Hc(this.a)};W.prototype.set_m_closestHitFraction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Qc(b,a)};W.prototype.get_m_collisionObject=function(){return wrapPointer(Kc(this.a),t)};W.prototype.set_m_collisionObject=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Tc(b,a)};W.prototype.__destroy__=function(){Gc(this.a)};
function X(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=sb(a,b);getCache(X)[this.a]=this}X.prototype=Object.create(Xv.prototype);X.prototype.constructor=X;X.prototype.b=X;X.c={};c.AllConvexResultCallback=X;X.prototype.hasHit=function(){return!!Db(this.a)};X.prototype.get_m_convexFromWorld=function(){return wrapPointer(yb(this.a),q)};X.prototype.set_m_convexFromWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Jb(b,a)};
X.prototype.get_m_convexToWorld=function(){return wrapPointer(zb(this.a),q)};X.prototype.set_m_convexToWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Kb(b,a)};X.prototype.get_m_hitNormalWorld=function(){return wrapPointer(Bb(this.a),gw)};X.prototype.set_m_hitNormalWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Mb(b,a)};X.prototype.get_m_hitPointWorld=function(){return wrapPointer(Cb(this.a),gw)};
X.prototype.set_m_hitPointWorld=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Nb(b,a)};X.prototype.get_m_hitFractions=function(){return wrapPointer(Ab(this.a),hw)};X.prototype.set_m_hitFractions=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Lb(b,a)};X.prototype.get_m_collisionObjects=function(){return wrapPointer(xb(this.a),fw)};X.prototype.set_m_collisionObjects=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ib(b,a)};X.prototype.get_m_collisionFilterGroup=function(){return vb(this.a)};
X.prototype.set_m_collisionFilterGroup=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Gb(b,a)};X.prototype.get_m_collisionFilterMask=function(){return wb(this.a)};X.prototype.set_m_collisionFilterMask=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Hb(b,a)};X.prototype.get_m_closestHitFraction=function(){return ub(this.a)};X.prototype.set_m_closestHitFraction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Fb(b,a)};X.prototype.__destroy__=function(){tb(this.a)};
function Fw(){this.a=Yc();getCache(Fw)[this.a]=this}Fw.prototype=Object.create(Yv.prototype);Fw.prototype.constructor=Fw;Fw.prototype.b=Fw;Fw.c={};c.ConcreteContactResultCallback=Fw;Fw.prototype.addSingleResult=function(a,b,e,f,g,h,k){var m=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);h&&"object"===typeof h&&(h=h.a);k&&"object"===typeof k&&(k=k.a);return $c(m,a,b,e,f,g,h,k)};
Fw.prototype.__destroy__=function(){Zc(this.a)};function Gw(a,b,e){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);this.a=void 0===e?Be(a,b):Ce(a,b,e);getCache(Gw)[this.a]=this}Gw.prototype=Object.create(Ov.prototype);Gw.prototype.constructor=Gw;Gw.prototype.b=Gw;Gw.c={};c.btBvhTriangleMeshShape=Gw;Gw.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Fe(b,a)};
Gw.prototype.getLocalScaling=function(){return wrapPointer(Ee(this.a),q)};Gw.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);De(e,a,b)};Gw.prototype.__destroy__=function(){Ae(this.a)};
function Hw(a,b,e,f,g){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);this.a=void 0===f?sr(a,b,e):void 0===g?_emscripten_bind_btSliderConstraint_btSliderConstraint_4(a,b,e,f):tr(a,b,e,f,g);getCache(Hw)[this.a]=this}Hw.prototype=Object.create(v.prototype);Hw.prototype.constructor=Hw;Hw.prototype.b=Hw;Hw.c={};c.btSliderConstraint=Hw;
Hw.prototype.setLowerLinLimit=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);zr(b,a)};Hw.prototype.setUpperLinLimit=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Cr(b,a)};Hw.prototype.setLowerAngLimit=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);yr(b,a)};Hw.prototype.setUpperAngLimit=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Br(b,a)};Hw.prototype.enableFeedback=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ur(b,a)};
Hw.prototype.getBreakingImpulseThreshold=function(){return vr(this.a)};Hw.prototype.setBreakingImpulseThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);xr(b,a)};Hw.prototype.getParam=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);return wr(e,a,b)};Hw.prototype.setParam=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);Ar(f,a,b,e)};Hw.prototype.__destroy__=function(){rr(this.a)};
function U(){this.a=jn();getCache(U)[this.a]=this}U.prototype=Object.create(A.prototype);U.prototype.constructor=U;U.prototype.b=U;U.c={};c.btPairCachingGhostObject=U;U.prototype.setAnisotropicFriction=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Fn(e,a,b)};U.prototype.getCollisionShape=function(){return wrapPointer(pn(this.a),p)};U.prototype.setContactProcessingThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Kn(b,a)};
U.prototype.setActivationState=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);En(b,a)};U.prototype.forceActivationState=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);kn(b,a)};U.prototype.activate=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);void 0===a?gn(b):hn(b,a)};U.prototype.isActive=function(){return!!An(this.a)};U.prototype.isKinematicObject=function(){return!!Bn(this.a)};U.prototype.isStaticObject=function(){return!!Cn(this.a)};
U.prototype.isStaticOrKinematicObject=function(){return!!Dn(this.a)};U.prototype.getRestitution=function(){return vn(this.a)};U.prototype.setRestitution=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);On(b,a)};U.prototype.getFriction=function(){return qn(this.a)};U.prototype.setFriction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ln(b,a)};U.prototype.getRollingFriction=function(){return wn(this.a)};
U.prototype.setRollingFriction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Pn(b,a)};U.prototype.getCollisionFlags=function(){return on(this.a)};U.prototype.setCollisionFlags=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);In(b,a)};U.prototype.getWorldTransform=function(){return wrapPointer(zn(this.a),u)};U.prototype.setWorldTransform=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Sn(b,a)};
U.prototype.setCollisionShape=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Jn(b,a)};U.prototype.getCcdMotionThreshold=function(){return mn(this.a)};U.prototype.setCcdMotionThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Gn(b,a)};U.prototype.getCcdSweptSphereRadius=function(){return nn(this.a)};U.prototype.setCcdSweptSphereRadius=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Hn(b,a)};U.prototype.getUserIndex=function(){return xn(this.a)};
U.prototype.setUserIndex=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Qn(b,a)};U.prototype.getUserPointer=function(){return wrapPointer(yn(this.a),VoidPtr)};U.prototype.setUserPointer=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Rn(b,a)};U.prototype.getInterpolationAngularVelocity=function(){return wrapPointer(rn(this.a),q)};U.prototype.setInterpolationAngularVelocity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Mn(b,a)};
U.prototype.getInterpolationLinearVelocity=function(){return wrapPointer(sn(this.a),q)};U.prototype.setInterpolationLinearVelocity=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Nn(b,a)};U.prototype.getBroadphaseHandle=function(){return wrapPointer(ln(this.a),Iv)};U.prototype.getNumOverlappingObjects=function(){return tn(this.a)};U.prototype.getOverlappingObject=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(un(b,a),t)};U.prototype.__destroy__=function(){fn(this.a)};
function F(){throw"cannot construct a btManifoldPoint, no constructor in IDL";}F.prototype=Object.create(WrapperObject.prototype);F.prototype.constructor=F;F.prototype.b=F;F.c={};c.btManifoldPoint=F;F.prototype.getPositionWorldOnA=function(){return wrapPointer(Km(this.a),q)};F.prototype.getPositionWorldOnB=function(){return wrapPointer(Lm(this.a),q)};F.prototype.getAppliedImpulse=function(){return Im(this.a)};F.prototype.getDistance=function(){return Jm(this.a)};
F.prototype.get_m_localPointA=function(){return wrapPointer(Mm(this.a),q)};F.prototype.set_m_localPointA=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Rm(b,a)};F.prototype.get_m_localPointB=function(){return wrapPointer(Nm(this.a),q)};F.prototype.set_m_localPointB=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Sm(b,a)};F.prototype.get_m_positionWorldOnB=function(){return wrapPointer(Qm(this.a),q)};
F.prototype.set_m_positionWorldOnB=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Vm(b,a)};F.prototype.get_m_positionWorldOnA=function(){return wrapPointer(Pm(this.a),q)};F.prototype.set_m_positionWorldOnA=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Um(b,a)};F.prototype.get_m_normalWorldOnB=function(){return wrapPointer(Om(this.a),q)};F.prototype.set_m_normalWorldOnB=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Tm(b,a)};F.prototype.__destroy__=function(){Hm(this.a)};
function Y(a,b,e,f){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);this.a=void 0===e?$n(a,b):void 0===f?_emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_3(a,b,e):ao(a,b,e,f);getCache(Y)[this.a]=this}Y.prototype=Object.create(v.prototype);Y.prototype.constructor=Y;Y.prototype.b=Y;Y.c={};c.btPoint2PointConstraint=Y;Y.prototype.setPivotA=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ko(b,a)};
Y.prototype.setPivotB=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);lo(b,a)};Y.prototype.getPivotInA=function(){return wrapPointer(fo(this.a),q)};Y.prototype.getPivotInB=function(){return wrapPointer(go(this.a),q)};Y.prototype.enableFeedback=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);bo(b,a)};Y.prototype.getBreakingImpulseThreshold=function(){return co(this.a)};Y.prototype.setBreakingImpulseThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);io(b,a)};
Y.prototype.getParam=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);return eo(e,a,b)};Y.prototype.setParam=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);jo(f,a,b,e)};Y.prototype.get_m_setting=function(){return wrapPointer(ho(this.a),jw)};Y.prototype.set_m_setting=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);mo(b,a)};Y.prototype.__destroy__=function(){Zn(this.a)};
function Iv(){throw"cannot construct a btBroadphaseProxy, no constructor in IDL";}Iv.prototype=Object.create(WrapperObject.prototype);Iv.prototype.constructor=Iv;Iv.prototype.b=Iv;Iv.c={};c.btBroadphaseProxy=Iv;Iv.prototype.get_m_collisionFilterGroup=function(){return we(this.a)};Iv.prototype.set_m_collisionFilterGroup=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ye(b,a)};Iv.prototype.get_m_collisionFilterMask=function(){return xe(this.a)};
Iv.prototype.set_m_collisionFilterMask=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);ze(b,a)};Iv.prototype.__destroy__=function(){ve(this.a)};
function Z(a,b,e,f,g){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);this.a=void 0===f?Ik(a,b,e):void 0===g?_emscripten_bind_btGeneric6DofSpringConstraint_btGeneric6DofSpringConstraint_4(a,b,e,f):Jk(a,b,e,f,g);getCache(Z)[this.a]=this}Z.prototype=Object.create(C.prototype);Z.prototype.constructor=Z;Z.prototype.b=Z;Z.c={};c.btGeneric6DofSpringConstraint=Z;
Z.prototype.enableSpring=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Lk(e,a,b)};Z.prototype.setStiffness=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Wk(e,a,b)};Z.prototype.setDamping=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Sk(e,a,b)};Z.prototype.setLinearLowerLimit=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Tk(b,a)};
Z.prototype.setLinearUpperLimit=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Uk(b,a)};Z.prototype.setAngularLowerLimit=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Pk(b,a)};Z.prototype.setAngularUpperLimit=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Qk(b,a)};Z.prototype.getFrameOffsetA=function(){return wrapPointer(Nk(this.a),u)};Z.prototype.enableFeedback=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Kk(b,a)};
Z.prototype.getBreakingImpulseThreshold=function(){return Mk(this.a)};Z.prototype.setBreakingImpulseThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Rk(b,a)};Z.prototype.getParam=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);return Ok(e,a,b)};Z.prototype.setParam=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);Vk(f,a,b,e)};Z.prototype.__destroy__=function(){Hk(this.a)};
function Iw(a){a&&"object"===typeof a&&(a=a.a);this.a=oe(a);getCache(Iw)[this.a]=this}Iw.prototype=Object.create(p.prototype);Iw.prototype.constructor=Iw;Iw.prototype.b=Iw;Iw.c={};c.btBoxShape=Iw;Iw.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);te(b,a)};Iw.prototype.getMargin=function(){return re(this.a)};Iw.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);se(b,a)};
Iw.prototype.getLocalScaling=function(){return wrapPointer(qe(this.a),q)};Iw.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);pe(e,a,b)};Iw.prototype.__destroy__=function(){ne(this.a)};function Jw(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=He(a,b);getCache(Jw)[this.a]=this}Jw.prototype=Object.create(y.prototype);Jw.prototype.constructor=Jw;Jw.prototype.b=Jw;Jw.c={};c.btCapsuleShapeX=Jw;
Jw.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Pe(b,a)};Jw.prototype.getMargin=function(){return Le(this.a)};Jw.prototype.getUpAxis=function(){return Ne(this.a)};Jw.prototype.getRadius=function(){return Me(this.a)};Jw.prototype.getHalfHeight=function(){return Je(this.a)};Jw.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Oe(b,a)};Jw.prototype.getLocalScaling=function(){return wrapPointer(Ke(this.a),q)};
Jw.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Ie(e,a,b)};Jw.prototype.__destroy__=function(){Ge(this.a)};function V(a,b,e,f){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);this.a=zo(a,b,e,f);getCache(V)[this.a]=this}V.prototype=Object.create(B.prototype);V.prototype.constructor=V;V.prototype.b=V;V.c={};c.btQuaternion=V;
V.prototype.setValue=function(a,b,e,f){var g=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);Qo(g,a,b,e,f)};V.prototype.setEulerZYX=function(a,b,e){var f=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);Oo(f,a,b,e)};V.prototype.setRotation=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Po(e,a,b)};
V.prototype.normalize=V.prototype.normalize=function(){Ho(this.a)};V.prototype.length2=function(){return Fo(this.a)};V.prototype.length=V.prototype.length=function(){return Go(this.a)};V.prototype.dot=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return Ao(b,a)};V.prototype.normalized=function(){return wrapPointer(Io(this.a),V)};V.prototype.getAxis=function(){return wrapPointer(Do(this.a),q)};V.prototype.inverse=V.prototype.inverse=function(){return wrapPointer(Eo(this.a),V)};
V.prototype.getAngle=function(){return Co(this.a)};V.prototype.getAngleShortestPath=function(){return Bo(this.a)};V.prototype.angle=V.prototype.angle=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return yo(b,a)};V.prototype.angleShortestPath=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return xo(b,a)};V.prototype.op_add=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(Jo(b,a),V)};
V.prototype.op_sub=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(No(b,a),V)};V.prototype.op_mul=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(Lo(b,a),V)};V.prototype.op_mulq=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(Mo(b,a),V)};V.prototype.op_div=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return wrapPointer(Ko(b,a),V)};V.prototype.x=V.prototype.x=function(){return Wo(this.a)};
V.prototype.y=V.prototype.y=function(){return Xo(this.a)};V.prototype.z=V.prototype.z=function(){return Yo(this.a)};V.prototype.w=function(){return Vo(this.a)};V.prototype.setX=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);So(b,a)};V.prototype.setY=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);To(b,a)};V.prototype.setZ=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Uo(b,a)};V.prototype.setW=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ro(b,a)};
V.prototype.__destroy__=function(){wo(this.a)};function Kw(a,b){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);this.a=Re(a,b);getCache(Kw)[this.a]=this}Kw.prototype=Object.create(y.prototype);Kw.prototype.constructor=Kw;Kw.prototype.b=Kw;Kw.c={};c.btCapsuleShapeZ=Kw;Kw.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ze(b,a)};Kw.prototype.getMargin=function(){return Ve(this.a)};Kw.prototype.getUpAxis=function(){return Xe(this.a)};
Kw.prototype.getRadius=function(){return We(this.a)};Kw.prototype.getHalfHeight=function(){return Te(this.a)};Kw.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ye(b,a)};Kw.prototype.getLocalScaling=function(){return wrapPointer(Ue(this.a),q)};Kw.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Se(e,a,b)};Kw.prototype.__destroy__=function(){Qe(this.a)};
function Nv(){throw"cannot construct a btContactSolverInfo, no constructor in IDL";}Nv.prototype=Object.create(WrapperObject.prototype);Nv.prototype.constructor=Nv;Nv.prototype.b=Nv;Nv.c={};c.btContactSolverInfo=Nv;Nv.prototype.get_m_solverMode=function(){return Ah(this.a)};Nv.prototype.set_m_solverMode=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Eh(b,a)};Nv.prototype.get_m_splitImpulse=function(){return!!Ch(this.a)};
Nv.prototype.set_m_splitImpulse=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Gh(b,a)};Nv.prototype.get_m_splitImpulsePenetrationThreshold=function(){return Bh(this.a)};Nv.prototype.set_m_splitImpulsePenetrationThreshold=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Fh(b,a)};Nv.prototype.get_m_numIterations=function(){return zh(this.a)};Nv.prototype.set_m_numIterations=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Dh(b,a)};Nv.prototype.__destroy__=function(){yh(this.a)};
function hw(){throw"cannot construct a tScalarArray, no constructor in IDL";}hw.prototype=Object.create(WrapperObject.prototype);hw.prototype.constructor=hw;hw.prototype.b=hw;hw.c={};c.tScalarArray=hw;hw.prototype.size=hw.prototype.size=function(){return ev(this.a)};hw.prototype.at=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);return av(b,a)};hw.prototype.clear=hw.prototype.clear=function(){bv(this.a)};
hw.prototype.push_back=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);dv(b,a)};hw.prototype.pop_back=function(){cv(this.a)};hw.prototype.__destroy__=function(){$u(this.a)};function Lw(a){a&&"object"===typeof a&&(a=a.a);this.a=Er(a);getCache(Lw)[this.a]=this}Lw.prototype=Object.create(p.prototype);Lw.prototype.constructor=Lw;Lw.prototype.b=Lw;Lw.c={};c.btSphereShape=Lw;Lw.prototype.setMargin=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Jr(b,a)};Lw.prototype.getMargin=function(){return Hr(this.a)};
Lw.prototype.setLocalScaling=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);Ir(b,a)};Lw.prototype.getLocalScaling=function(){return wrapPointer(Gr(this.a),q)};Lw.prototype.calculateLocalInertia=function(a,b){var e=this.a;a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);Fr(e,a,b)};Lw.prototype.__destroy__=function(){Dr(this.a)};
function Mw(a,b,e,f,g){a&&"object"===typeof a&&(a=a.a);b&&"object"===typeof b&&(b=b.a);e&&"object"===typeof e&&(e=e.a);f&&"object"===typeof f&&(f=f.a);g&&"object"===typeof g&&(g=g.a);this.a=od(a,b,e,f,g);getCache(Mw)[this.a]=this}Mw.prototype=Object.create(WrapperObject.prototype);Mw.prototype.constructor=Mw;Mw.prototype.b=Mw;Mw.c={};c.LocalConvexResult=Mw;Mw.prototype.get_m_hitCollisionObject=function(){return wrapPointer(qd(this.a),t)};
Mw.prototype.set_m_hitCollisionObject=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);vd(b,a)};Mw.prototype.get_m_localShapeInfo=function(){return wrapPointer(ud(this.a),kw)};Mw.prototype.set_m_localShapeInfo=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);zd(b,a)};Mw.prototype.get_m_hitNormalLocal=function(){return wrapPointer(sd(this.a),q)};Mw.prototype.set_m_hitNormalLocal=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);xd(b,a)};
Mw.prototype.get_m_hitPointLocal=function(){return wrapPointer(td(this.a),q)};Mw.prototype.set_m_hitPointLocal=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);yd(b,a)};Mw.prototype.get_m_hitFraction=function(){return rd(this.a)};Mw.prototype.set_m_hitFraction=function(a){var b=this.a;a&&"object"===typeof a&&(a=a.a);wd(b,a)};Mw.prototype.__destroy__=function(){pd(this.a)};
(function(){function a(){c.BT_CONSTRAINT_ERP=sv();c.BT_CONSTRAINT_STOP_ERP=uv();c.BT_CONSTRAINT_CFM=rv();c.BT_CONSTRAINT_STOP_CFM=tv();c.PHY_FLOAT=nv();c.PHY_DOUBLE=lv();c.PHY_INTEGER=ov();c.PHY_SHORT=pv();c.PHY_FIXEDPOINT88=mv();c.PHY_UCHAR=qv()}c.calledRun?a():La.unshift(a)})();Laya.Physics3D=c;



  return Physics3D;
};
Physics3D = Physics3D.bind({
  _currentScript: typeof document !== 'undefined' ? document.currentScript : undefined
});
if (typeof exports === 'object' && typeof module === 'object')
    module.exports = Physics3D;
  else if (typeof define === 'function' && define['amd'])
    define([], function() { return Physics3D; });
  else if (typeof exports === 'object')
    exports["Physics3D"] = Physics3D;
  
!function(t,e,i){var n=(i.un,i.uns,i.static),r=i.class,s=i.getset,h=(i.__newvec,laya.utils.Browser),l=laya.utils.ClassUtils,a=(laya.resource.Context,laya.events.Event,laya.display.Graphics,laya.utils.HTMLChar),o=laya.utils.Handler,u=laya.net.Loader,c=laya.utils.Pool,d=laya.maths.Rectangle,_=laya.display.Sprite,f=laya.display.Text,p=laya.resource.Texture,y=laya.net.URL,g=laya.utils.Utils;i.interface("laya.html.utils.ILayout");{var m=(function(){function t(){}r(t,"laya.html.dom.HTMLBrElement");var e=t.prototype;return e._addToLayout=function(t){t.push(this)},e.reset=function(){return this},e.destroy=function(){c.recover(m.getClassName(this),this.reset())},e._setParent=function(){},e._getCSSStyle=function(){return t.brStyle||(t.brStyle=new w,t.brStyle.setLineElement(!0),t.brStyle.block=!0),t.brStyle},e.renderSelfToGraphic=function(){},s(0,e,"URI",null,function(){}),s(0,e,"parent",null,function(){}),s(0,e,"href",null,function(){}),t.brStyle=null,t}(),function(){function t(){this._creates(),this.reset()}r(t,"laya.html.dom.HTMLElement");var e=t.prototype;return e._creates=function(){this._style=w.create()},e.reset=function(){if(this.URI=null,this.parent=null,this._style.reset(),this._style.ower=this,this._style.valign="middle",this._text&&this._text.words){var e=this._text.words,i=0,n=0;n=e.length;var r;for(i=0;n>i;i++)r=e[i],r&&r.recover()}return this._text=t._EMPTYTEXT,this._children&&(this._children.length=0),this._x=this._y=this._width=this._height=0,this},e._getCSSStyle=function(){return this._style},e._addChildsToLayout=function(t){var e=this._getWords();if(null==e&&(!this._children||0==this._children.length))return!1;if(e)for(var i=0,n=e.length;n>i;i++)t.push(e[i]);return this._children&&this._children.forEach(function(e){var i=e._style;i._enableLayout&&i._enableLayout()&&e._addToLayout(t)}),!0},e._addToLayout=function(t){if(this._style){var e=this._style;e.absolute||(e.block?t.push(this):this._addChildsToLayout(t)&&(this.x=this.y=0))}},e.repaint=function(t){void 0===t&&(t=!1),this.parentRepaint(t)},e.parentRepaint=function(t){void 0===t&&(t=!1),this.parent&&this.parent.repaint(t)},e._setParent=function(t){if(t instanceof laya.html.dom.HTMLElement){var e=t;this.URI||(this.URI=e.URI),this.style&&this.style.inherit(e.style)}},e.appendChild=function(t){return this.addChild(t)},e.addChild=function(t){return t.parent&&t.parent.removeChild(t),this._children||(this._children=[]),this._children.push(t),t.parent=this,t._setParent(this),this.repaint(),t},e.removeChild=function(t){if(!this._children)return null;var e=0,i=0;for(i=this._children.length,e=0;i>e;e++)if(this._children[e]==t)return this._children.splice(e,1),t;return null},e.destroy=function(){this._children&&(this.destroyChildren(),this._children.length=0),c.recover(t.getClassName(this),this.reset())},e.destroyChildren=function(){if(this._children){for(var t=this._children.length-1;t>-1;t--)this._children[t].destroy();this._children.length=0}},e._getWords=function(){if(!this._text)return null;var t=this._text.text;if(!t||0===t.length)return null;var e=this._text.words;if(e&&e.length===t.length)return e;null===e&&(this._text.words=e=[]),e.length=t.length;for(var i,n=this.style,r=n.font,s=0,h=t.length;h>s;s++)i=g.measureText(t.charAt(s),r),e[s]=a.create().setData(t.charAt(s),i.width,i.height||n.fontSize,n);return e},e._isChar=function(){return!1},e._layoutLater=function(){var t=this.style;512&t._type||(t.widthed(this)&&(this._children&&this._children.length>0||null!=this._getWords())&&t.block?(T.later(this),t._type|=512):this.parent&&this.parent._layoutLater())},e._setAttributes=function(t,e){switch(t){case"style":this.style.cssText(e);break;case"class":this.className=e;break;case"x":this.x=parseFloat(e);break;case"y":this.y=parseFloat(e);break;case"width":this.width=parseFloat(e);break;case"height":this.height=parseFloat(e);break;default:this[t]=e}},e.formatURL=function(e){return this.URI?t.formatURL1(e,this.URI?this.URI.path:null):e},e.drawToGraphic=function(t,e,i,n){e+=this.x,i+=this.y;var r=this.style;r.paddingLeft&&(e+=r.paddingLeft),r.paddingTop&&(i+=r.paddingTop),(null!=r.bgColor||r.borderColor)&&t.drawRect(e,i,this.width,this.height,r.bgColor,r.borderColor,1),this.renderSelfToGraphic(t,e,i,n);var s,h=0,l=0;if(this._children&&this._children.length>0)for(l=this._children.length,h=0;l>h;h++)s=this._children[h],null!=s.drawToGraphic&&s.drawToGraphic(t,e,i,n)},e.renderSelfToGraphic=function(t,e,i,n){var r=this.style,s=this._getWords(),h=0;if(s){h=s.length;if(r){var l=r.font,a=r.color;if(r.stroke){var o=r.stroke;o=parseInt(o);var u=r.strokeColor;t.fillBorderWords(s,e,i,l,a,u,o)}else t.fillWords(s,e,i,l,a);if(this.href){var c=s.length-1,d=s[c],_=d.y+d.height;"none"!=r.textDecoration&&t.drawLine(s[0].x,_,d.x+d.width,_,a,1);var f=x.create();f.rec.setTo(s[0].x,d.y,d.x+d.width-s[0].x,d.height),f.href=this.href,n.push(f)}}}},s(0,e,"href",function(){return this._style?this._style.href:null},function(t){this._style&&t!=this._style.href&&(this._style.href=t,this.repaint())}),s(0,e,"color",null,function(t){this.style.color=t}),s(0,e,"id",null,function(t){S.document.setElementById(t,this)}),s(0,e,"innerTEXT",function(){return this._text.text},function(e){this._text===t._EMPTYTEXT?this._text={text:e,words:null}:(this._text.text=e,this._text.words&&(this._text.words.length=0)),this.repaint()}),s(0,e,"style",function(){return this._style}),s(0,e,"width",function(){return this._width},function(t){this._width!==t&&(this._width=t,this.repaint())}),s(0,e,"x",function(){return this._x},function(t){this._x!=t&&(this._x=t,this.parentRepaint())}),s(0,e,"y",function(){return this._y},function(t){this._y!=t&&(this._y=t,this.parentRepaint())}),s(0,e,"height",function(){return this._height},function(t){this._height!==t&&(this._height=t,this.repaint())}),s(0,e,"className",null,function(t){this.style.attrs(S.document.styleSheets["."+t])}),t.formatURL1=function(t,e){if(!t)return"null path";if(e||(e=y.basePath),t.indexOf(":")>0)return t;if(null!=y.customFormat&&(t=y.customFormat(t)),t.indexOf(":")>0)return t;var i=t.charAt(0);if("."===i)return y._formatRelativePath(e+t);if("~"===i)return y.rootPath+t.substring(1);if("d"===i){if(0===t.indexOf("data:image"))return t}else if("/"===i)return t;return e+t},t.getClassName=function(t){return"function"==typeof t?t.name:t.constructor.name},t._EMPTYTEXT={text:null,words:null},t}()),S=function(){function t(){this.all=new Array,this.styleSheets=w.styleSheets}r(t,"laya.html.dom.HTMLDocument");var e=t.prototype;return e.getElementById=function(t){return this.all[t]},e.setElementById=function(t,e){this.all[t]=e},n(t,["document",function(){return this.document=new t}]),t}(),x=function(){function t(){this.rec=new d,this.reset()}r(t,"laya.html.dom.HTMLHitRect");var e=t.prototype;return e.reset=function(){return this.rec.reset(),this.href=null,this},e.recover=function(){c.recover("HTMLHitRect",this.reset())},t.create=function(){return c.getItemByClass("HTMLHitRect",t)},t}(),L=function(){function t(){this.reset()}r(t,"laya.html.utils.HTMLExtendStyle");var e=t.prototype;return e.reset=function(){return this.stroke=0,this.strokeColor="#000000",this.leading=0,this.lineHeight=0,this.letterSpacing=0,this.href=null,this},e.recover=function(){this!=t.EMPTY&&c.recover("HTMLExtendStyle",this.reset())},t.create=function(){return c.getItemByClass("HTMLExtendStyle",t)},t.EMPTY=new t,t}(),v=function(){function t(){}return r(t,"laya.html.utils.HTMLParse"),t.getInstance=function(e){var i=c.getItem(t._htmlClassMapShort[e]);return i||(i=l.getInstance(e)),i},t.parse=function(e,i,n){i=i.replace(/<br>/g,"<br/>"),i="<root>"+i+"</root>",i=i.replace(t.spacePattern,t.char255);var r=g.parseXMLFromString(i);t._parseXML(e,r.childNodes[0].childNodes,n)},t._parseXML=function(e,i,n,r){var s=0,h=0;if(i.join||i.item)for(s=0,h=i.length;h>s;++s)t._parseXML(e,i[s],n,r);else{var l,a;if(3==i.nodeType){var o;return e instanceof laya.html.dom.HTMLDivParser?(null==i.nodeName&&(i.nodeName="#text"),a=i.nodeName.toLowerCase(),o=i.textContent.replace(/^\s+|\s+$/g,""),o.length>0&&(l=t.getInstance(a),l&&(e.addChild(l),l.innerTEXT=o.replace(t.char255AndOneSpacePattern," ")))):(o=i.textContent.replace(/^\s+|\s+$/g,""),o.length>0&&(e.innerTEXT=o.replace(t.char255AndOneSpacePattern," "))),void 0}if(a=i.nodeName.toLowerCase(),"#comment"==a)return;if(l=t.getInstance(a)){"p"==a?(e.addChild(t.getInstance("br")),l=e.addChild(l),e.addChild(t.getInstance("br"))):l=e.addChild(l),l.URI=n,l.href=r;var u=i.attributes;if(u&&u.length>0)for(s=0,h=u.length;h>s;++s){var c=u[s],d=c.nodeName,_=c.value;l._setAttributes(d,_)}t._parseXML(l,i.childNodes,n,l.href)}else t._parseXML(e,i.childNodes,n,r)}},t.char255=String.fromCharCode(255),t.spacePattern=/&nbsp;|&#160;/g,t.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),t._htmlClassMapShort={div:"HTMLDivParser",p:"HTMLElement",img:"HTMLImageElement",span:"HTMLElement",br:"HTMLBrElement",style:"HTMLStyleElement",font:"HTMLElement",a:"HTMLElement","#text":"HTMLElement",link:"HTMLLinkElement"},t}(),w=function(){function t(){this.padding=t._PADDING,this.reset()}r(t,"laya.html.utils.HTMLStyle");var e=t.prototype;return e._getExtendStyle=function(){return this._extendStyle===L.EMPTY&&(this._extendStyle=L.create()),this._extendStyle},e.reset=function(){return this.ower=null,this._type=0,this.wordWrap=!0,this.fontSize=f.defaultFontSize,this.family=f.defaultFont,this.color="#000000",this.valign="top",this.padding=t._PADDING,this.bold=!1,this.italic=!1,this.align="left",this.textDecoration=null,this.bgColor=null,this.borderColor=null,this._extendStyle&&this._extendStyle.recover(),this._extendStyle=L.EMPTY,this},e.recover=function(){c.recover("HTMLStyle",this.reset())},e.inherit=function(e){var i,n=0,r=0;i=t._inheritProps,r=i.length;var s;for(n=0;r>n;n++)s=i[n],this[s]=e[s]},e._widthAuto=function(){return 0!==(262144&this._type)},e.widthed=function(){return 0!=(8&this._type)},e._calculation=function(){return!1},e.heighted=function(){return 0!=(8192&this._type)},e.size=function(t,e){var i=this.ower,n=!1;-1!==t&&t!=i.width&&(this._type|=8,i.width=t,n=!0),-1!==e&&e!=i.height&&(this._type|=8192,i.height=e,n=!0),n&&i._layoutLater()},e.getLineElement=function(){return 0!=(65536&this._type)},e.setLineElement=function(t){t?this._type|=65536:this._type&=-65537},e._enableLayout=function(){return 0===(2&this._type)&&0===(4&this._type)},e.cssText=function(e){this.attrs(t.parseOneCSS(e,";"))},e.attrs=function(t){if(t)for(var e=0,i=t.length;i>e;e++){var n=t[e];this[n[0]]=n[1]}},s(0,e,"font",function(){return(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(h.onIPhone?f.fontFamilyMap[this.family]||this.family:this.family)},function(t){for(var e=t.split(" "),i=0,n=e.length;n>i;i++){var r=e[i];switch(r){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}r.indexOf("px")>0&&(this.fontSize=parseInt(r),this.family=e[i+1],i++)}}),s(0,e,"href",function(){return this._extendStyle.href},function(t){t!==this._extendStyle.href&&(this._getExtendStyle().href=t)}),s(0,e,"lineHeight",function(){return this._extendStyle.lineHeight},function(t){this._extendStyle.lineHeight!==t&&(this._getExtendStyle().lineHeight=t)}),s(0,e,"strokeColor",function(){return this._extendStyle.strokeColor},function(t){this._extendStyle.strokeColor!==t&&(this._getExtendStyle().strokeColor=t)}),s(0,e,"stroke",function(){return this._extendStyle.stroke},function(t){this._extendStyle.stroke!==t&&(this._getExtendStyle().stroke=t)}),s(0,e,"leading",function(){return this._extendStyle.leading},function(t){this._extendStyle.leading!==t&&(this._getExtendStyle().leading=t)}),s(0,e,"align",function(){var e=48&this._type;return t.align_Value[e]},function(e){e in t.alignVDic&&(this._type&=-49,this._type|=t.alignVDic[e])}),s(0,e,"valign",function(){var e=192&this._type;return t.vAlign_Value[e]},function(e){e in t.alignVDic&&(this._type&=-193,this._type|=t.alignVDic[e])}),s(0,e,"block",function(){return 0!=(1&this._type)},function(t){t?this._type|=1:this._type&=-2}),s(0,e,"wordWrap",function(){return 0===(131072&this._type)},function(t){t?this._type&=-131073:this._type|=131072}),s(0,e,"bold",function(){return 0!=(1024&this._type)},function(t){t?this._type|=1024:this._type&=-1025}),s(0,e,"italic",function(){return 0!=(2048&this._type)},function(t){t?this._type|=2048:this._type&=-2049}),s(0,e,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(t){"nowrap"===t&&(this._type|=131072),"none"===t&&(this._type&=-131073)}),s(0,e,"width",null,function(t){if(this._type|=8,"string"==typeof t){var e=t.indexOf("auto");if(e>=0&&(this._type|=262144,t=t.substr(0,e)),this._calculation("width",t))return;t=parseInt(t)}this.size(t,-1)}),s(0,e,"height",null,function(t){if(this._type|=8192,"string"==typeof t){if(this._calculation("height",t))return;t=parseInt(t)}this.size(-1,t)}),s(0,e,"letterSpacing",function(){return this._extendStyle.letterSpacing},function(t){"string"==typeof t&&(t=parseInt(t+"")),t!=this._extendStyle.letterSpacing&&(this._getExtendStyle().letterSpacing=t)}),s(0,e,"position",function(){return 4&this._type?"absolute":""},function(t){"absolute"===t?this._type|=4:this._type&=-5}),s(0,e,"absolute",function(){return 0!==(4&this._type)}),s(0,e,"paddingLeft",function(){return this.padding[3]}),s(0,e,"paddingTop",function(){return this.padding[0]}),t.create=function(){return c.getItemByClass("HTMLStyle",t)},t.parseOneCSS=function(e,i){for(var n,r=[],s=e.split(i),h=0,l=s.length;l>h;h++){var a=s[h],o=a.indexOf(":"),u=a.substr(0,o).replace(/^\s+|\s+$/g,"");if(0!==u.length){var c=a.substr(o+1).replace(/^\s+|\s+$/g,""),d=[u,c];switch(u){case"italic":case"bold":d[1]="true"==c;break;case"font-weight":"bold"==c&&(d[1]=!0,d[0]="bold");break;case"line-height":d[0]="lineHeight",d[1]=parseInt(c);break;case"font-size":d[0]="fontSize",d[1]=parseInt(c);break;case"stroke":d[0]="stroke",d[1]=parseInt(c);break;case"padding":n=c.split(" "),n.length>1||(n[1]=n[2]=n[3]=n[0]),d[1]=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];break;default:(d[0]=t._CSSTOVALUE[u])||(d[0]=u)}r.push(d)}}return r},t.parseCSS=function(e){for(var i;null!=(i=t._parseCSSRegExp.exec(e));)t.styleSheets[i[1]]=t.parseOneCSS(i[2],";")},t._CSSTOVALUE={"letter-spacing":"letterSpacing","white-space":"whiteSpace","line-height":"lineHeight","font-family":"family","vertical-align":"valign","text-decoration":"textDecoration","background-color":"bgColor","border-color":"borderColor"},t._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),t.ALIGN_LEFT="left",t.ALIGN_CENTER="center",t.ALIGN_RIGHT="right",t.VALIGN_TOP="top",t.VALIGN_MIDDLE="middle",t.VALIGN_BOTTOM="bottom",t.styleSheets={},t.ADDLAYOUTED=512,t._PADDING=[0,0,0,0],t._HEIGHT_SET=8192,t._LINE_ELEMENT=65536,t._NOWARP=131072,t._WIDTHAUTO=262144,t._BOLD=1024,t._ITALIC=2048,t._CSS_BLOCK=1,t._DISPLAY_NONE=2,t._ABSOLUTE=4,t._WIDTH_SET=8,t._ALIGN=48,t._VALIGN=192,n(t,["_inheritProps",function(){return this._inheritProps=["italic","align","valign","leading","stroke","strokeColor","bold","fontSize","lineHeight","wordWrap","color"]},"alignVDic",function(){return this.alignVDic={left:0,center:16,right:32,top:0,middle:64,bottom:128}},"align_Value",function(){return this.align_Value={0:"left",16:"center",32:"right"}},"vAlign_Value",function(){return this.vAlign_Value={0:"top",64:"middle",128:"bottom"}}]),t}(),T=function(){function t(){}return r(t,"laya.html.utils.Layout"),t.later=function(e){null==t._will&&(t._will=[],i.stage.frameLoop(1,null,function(){if(!(t._will.length<1)){for(var e=0;e<t._will.length;e++)laya.html.utils.Layout.layout(t._will[e]);t._will.length=0}})),t._will.push(e)},t.layout=function(e){if(!e||!e._style)return null;var i=e._style;if(0===(512&i._type))return null;e.style._type&=-513;var n=t._multiLineLayout(e);return n},t._multiLineLayout=function(e){function i(){b.y=w,w+=b.h+_,b.mWidth=R,R=0,b=new E,C.push(b),b.h=0,v=0,k=!0,I=!1}var n=new Array;e._addChildsToLayout(n);var r,s,h,l,a,o=0,u=n.length,c=e._getCSSStyle(),d=c.letterSpacing,_=c.leading,f=c.lineHeight,p=c._widthAuto()||!c.wordWrap,y=p?999999:e.width,g=(e.height,0),m=c.italic?c.fontSize/3:0,S=c.align,x=c.valign,L="top"!==x||"left"!==S||0!=f,v=0,w=0,T=0,H=0,C=new Array,b=C[0]=new E,I=!1,M=!1;b.h=0,c.italic&&(y-=c.fontSize/3);var R=0,k=!0;for(o=0;u>o;o++)if(r=n[o],null!=r)if(k=!1,r instanceof laya.html.dom.HTMLBrElement)i(),b.y=w,b.h=f;else{if(r._isChar()){if(l=r,l.isWord)I=M||"\n"===l.char,b.wordStartIndex=b.elements.length;else{if(C.length>0&&v+T>y&&b.wordStartIndex>0){var A=0;A=b.elements.length-b.wordStartIndex+1,b.elements.length=b.wordStartIndex,o-=A,i();continue}I=!1,R+=l.width}T=l.width+l.style.letterSpacing,H=l.height,M=!1,I=I||v+T>y,I&&i(),b.minTextHeight=Math.min(b.minTextHeight,r.height)}else s=r._getCSSStyle(),a=r,h=s.padding,I=M||s.getLineElement(),T=a.width+h[1]+h[3]+s.letterSpacing,H=a.height+h[0]+h[2],M=s.getLineElement(),I=I||v+T>y&&s.wordWrap,I&&i();b.elements.push(r),b.h=Math.max(b.h,H),r.x=v,r.y=w,v+=T,b.w=v-d,b.y=w,g=Math.max(v+m,g)}else k||(v+=t.DIV_ELEMENT_PADDING),b.wordStartIndex=b.elements.length;if(w=b.y+b.h,L){var D=0,P=y;for(p&&e.width>0&&(P=e.width),o=0,u=C.length;u>o;o++)C[o].updatePos(0,P,o,D,S,x,f),D+=Math.max(f,C[o].h+_);w=D}return p&&(e.width=g),w>e.height&&(e.height=w),[g,w]},t.DIV_ELEMENT_PADDING=0,t._will=null,t}(),E=function(){function t(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}r(t,"laya.html.utils.LayoutLine");var e=t.prototype;return e.updatePos=function(t,e,i,n,r,s,h){var l,a=0;this.elements.length>0&&(l=this.elements[this.elements.length-1],a=l.x+l.width-this.elements[0].x),h=h||this.h;var o=0,u=0/0;"center"===r&&(o=(e-a)/2),"right"===r&&(o=e-a);for(var c=0,d=this.elements.length;d>c;c++){l=this.elements[c];var _=l._getCSSStyle();switch(0!==o&&(l.x+=o),_.valign){case"top":l.y=n;break;case"middle":var f=0;99999!=this.minTextHeight&&(f=this.minTextHeight);var p=(f+h)/2;p=Math.max(p,this.h),u=l instanceof laya.html.dom.HTMLImageElement?n+p-l.height:n+p-l.height,l.y=u;break;case"bottom":l.y=n+(h-l.height)}}},t}(),H=function(t){function e(){this.contextHeight=0/0,this.contextWidth=0/0,this._htmlBounds=null,this._boundsRec=null,this.repaintHandler=null,e.__super.call(this)}r(e,"laya.html.dom.HTMLDivParser",t);var n=e.prototype;return n.reset=function(){return t.prototype.reset.call(this),this._style.block=!0,this._style.setLineElement(!0),this._style.width=200,this._style.height=200,this.repaintHandler=null,this.contextHeight=0,this.contextWidth=0,this},n.appendHTML=function(t){v.parse(this,t,this.URI),this.layout()},n._addChildsToLayout=function(t){var e=this._getWords();if(null==e&&(!this._children||0==this._children.length))return!1;e&&e.forEach(function(e){t.push(e)});for(var i=!0,n=0,r=this._children.length;r>n;n++){var s=this._children[n];i?i=!1:t.push(null),s._addToLayout(t)}return!0},n._addToLayout=function(t){this.layout(),!this.style.absolute&&t.push(this)},n.getBounds=function(){return this._htmlBounds?(this._boundsRec||(this._boundsRec=d.create()),this._boundsRec.copyFrom(this._htmlBounds)):null},n.parentRepaint=function(e){void 0===e&&(e=!1),t.prototype.parentRepaint.call(this),this.repaintHandler&&this.repaintHandler.runWith(e)},n.layout=function(){this.style._type|=512;var t=T.layout(this);if(t){this._htmlBounds||(this._htmlBounds=d.create());var e=this._htmlBounds;e.x=e.y=0,e.width=this.contextWidth=t[0],e.height=this.contextHeight=t[1]}},s(0,n,"height",function(){return this._height?this._height:this.contextHeight},t.prototype._$set_height),s(0,n,"innerHTML",null,function(t){this.destroyChildren(),this.appendHTML(t)}),s(0,n,"width",function(){return this._width?this._width:this.contextWidth},function(t){var e=!1;e=0===t?t!=this._width:t!=this.width,i.superSet(m,this,"width",t),e&&this.layout()}),e}(m),C=(function(t){function e(){e.__super.call(this)}r(e,"laya.html.dom.HTMLImageElement",t);var i=e.prototype;return i.reset=function(){return t.prototype.reset.call(this),this._tex&&this._tex.off("loaded",this,this.onloaded),this._tex=null,this._url=null,this},i.onloaded=function(){{var t=this._style;t.widthed(this)?-1:this._tex.width,t.heighted(this)?-1:this._tex.height}t.widthed(this)||this._width==this._tex.width||(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),t.heighted(this)||this._height==this._tex.height||(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),this.repaint()},i._addToLayout=function(t){var e=this._style;!e.absolute&&t.push(this)},i.renderSelfToGraphic=function(t,e,i){this._tex&&t.drawImage(this._tex,e,i,this.width||this._tex.width,this.height||this._tex.height)},s(0,i,"src",null,function(t){if(t=this.formatURL(t),this._url!==t){this._url=t;var e=this._tex=u.getRes(t);e||(this._tex=e=new p,e.load(t),u.cacheRes(t,e)),e.loaded?this.onloaded():e.once("loaded",this,this.onloaded)}}),e}(m),function(t){function e(){e.__super.call(this)}r(e,"laya.html.dom.HTMLLinkElement",t);var i=e.prototype;return i._creates=function(){},i.drawToGraphic=function(){},i.reset=function(){return this._loader&&this._loader.off("complete",this,this._onload),this._loader=null,this},i._onload=function(t){switch(this._loader&&(this._loader=null),this.type){case"text/css":w.parseCSS(t,this.URI)}this.repaint(!0)},s(0,i,"href",t.prototype._$get_href,function(t){if(t){if(t=this.formatURL(t),this.URI=new y(t),this._loader&&this._loader.off("complete",this,this._onload),u.getRes(t))return"text/css"==this.type&&w.parseCSS(u.getRes(t),this.URI),void 0;this._loader=new u,this._loader.once("complete",this,this._onload),this._loader.load(t,"text")}}),e._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g"),e}(m),function(t){function e(){e.__super.call(this)}r(e,"laya.html.dom.HTMLStyleElement",t);var i=e.prototype;return i._creates=function(){},i.drawToGraphic=function(){},i.reset=function(){return this},s(0,i,"innerTEXT",t.prototype._$get_innerTEXT,function(t){w.parseCSS(t,null)}),e}(m),function(t){function e(){this._element=null,this._recList=[],this._innerHTML=null,this._repaintState=0,e.__super.call(this),this._element=new H,this._element.repaintHandler=new o(this,this._htmlDivRepaint),this.mouseEnabled=!0,this.on("click",this,this._onMouseClick)}r(e,"laya.html.dom.HTMLDivElement",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),this._element&&this._element.reset(),this._element=null,this._doClears(),t.prototype.destroy.call(this,e)},i._htmlDivRepaint=function(t){void 0===t&&(t=!1),t?this._repaintState<2&&(this._repaintState=2):this._repaintState<1&&(this._repaintState=1)},i.render=function(e,i,n){if(0===this._repaintState)t.prototype.render.call(this,e,i,n);else{switch(this._repaintState){case 1:this._updateGraphic();break;case 2:this._refresh()}t.prototype.render.call(this,e,i,n)}},i._doClears=function(){if(this._recList){var t,e=0,i=this._recList.length;for(e=0;i>e;e++)t=this._recList[e],t.recover();this._recList.length=0}},i._updateGraphic=function(){this._doClears(),this.graphics.clear(!0),this._repaintState=0,this._element.drawToGraphic(this.graphics,-this._element.x,-this._element.y,this._recList);var t=this._element.getBounds();t&&this.setSelfBounds(t),this.size(t.width,t.height)},i._refresh=function(){this._repaintState=1,this._innerHTML&&(this._element.innerHTML=this._innerHTML)},i._onMouseClick=function(){var t,e=this.mouseX,i=this.mouseY,n=0,r=0;for(r=this._recList.length,n=0;r>n;n++)t=this._recList[n],t.rec.contains(e,i)&&this._eventLink(t.href)},i._eventLink=function(t){this.event("link",[t])},s(0,i,"style",function(){return this._element.style}),s(0,i,"innerHTML",null,function(t){this._innerHTML!=t&&(this._repaintState=1,this._innerHTML=t,this._element.innerHTML=t)}),s(0,i,"contextWidth",function(){return this._element.contextWidth}),s(0,i,"contextHeight",function(){return this._element.contextHeight}),e}(_));!function(t){function e(){e.__super.call(this),this._element._getCSSStyle().valign="middle"}r(e,"laya.html.dom.HTMLIframeElement",t);var i=e.prototype;return s(0,i,"href",null,function(t){var e=this;t=this._element.formatURL(t);var i=new u;i.once("complete",null,function(i){var n=e._element.URI;e._element.URI=new y(t),e.innerHTML=i,!n||(e._element.URI=n)}),i.load(t,"text")}),e}(C)}}(window,document,Laya);

(function(window,document,Laya){
	var __un=Laya.un,__uns=Laya.uns,__static=Laya.static,__class=Laya.class,__getset=Laya.getset,__newvec=Laya.__newvec;

	var Browser=laya.utils.Browser,Byte=laya.utils.Byte,ColorFilter=laya.filters.ColorFilter,Ease=laya.utils.Ease;
	var Event=laya.events.Event,EventDispatcher=laya.events.EventDispatcher,Graphics=laya.display.Graphics,HTMLDivElement=laya.html.dom.HTMLDivElement;
	var Handler=laya.utils.Handler,HitArea=laya.utils.HitArea,Input=laya.display.Input,Log=laya.utils.Log,Node=laya.display.Node;
	var Point=laya.maths.Point,Rectangle=laya.maths.Rectangle,Render=laya.renders.Render,Sound=laya.media.Sound;
	var SoundManager=laya.media.SoundManager,Sprite=laya.display.Sprite,Stage=laya.display.Stage,Text=laya.display.Text;
	var Texture=laya.resource.Texture,Tween=laya.utils.Tween,Utils=laya.utils.Utils;
Laya.interface('fairygui.IUISource');
Laya.interface('fairygui.IColorGear');
Laya.interface('fairygui.IAnimationGear');
//class fairygui.action.ControllerAction
var ControllerAction=(function(){
	function ControllerAction(){
		this.fromPage=null;
		this.toPage=null;
	}

	__class(ControllerAction,'fairygui.action.ControllerAction');
	var __proto=ControllerAction.prototype;
	__proto.run=function(controller,prevPage,curPage){
		if((this.fromPage==null || this.fromPage.length==0 || this.fromPage.indexOf(prevPage)!=-1)
			&& (this.toPage==null || this.toPage.length==0 || this.toPage.indexOf(curPage)!=-1))
		this.enter(controller);
		else
		this.leave(controller);
	}

	__proto.enter=function(controller){}
	__proto.leave=function(controller){}
	__proto.setup=function(xml){
		var str;
		str=xml.getAttribute("fromPage");
		if(str)
			this.fromPage=str.split(",");
		str=xml.getAttribute("toPage");
		if(str)
			this.toPage=str.split(",");
	}

	ControllerAction.createAction=function(type){
		switch(type){
			case "play_transition":
				return new PlayTransitionAction();
			case "change_page":
				return new ChangePageAction();
			}
		return null;
	}

	return ControllerAction;
})()


//class fairygui.AssetProxy
var AssetProxy=(function(){
	function AssetProxy(){
		this._asset=null;
		this._asset=Laya.loader;
	}

	__class(AssetProxy,'fairygui.AssetProxy');
	var __proto=AssetProxy.prototype;
	__proto.getRes=function(url){
		return this._asset.getRes(url);
	}

	__proto.load=function(url,complete,progress,type,priority,cache){
		(priority===void 0)&& (priority=1);
		(cache===void 0)&& (cache=true);
		this._asset.load(url,complete,progress,type,priority,cache);
	}

	__proto.setAsset=function(asset){
		this._asset=asset;
	}

	__getset(1,AssetProxy,'inst',function(){
		if(fairygui.AssetProxy._inst==null)
			AssetProxy._inst=new AssetProxy();
		return fairygui.AssetProxy._inst;
	});

	AssetProxy._inst=null;
	return AssetProxy;
})()


//class fairygui.AsyncOperation
var AsyncOperation=(function(){
	function AsyncOperation(){
		/**
		*callback(obj:GObject)
		*/
		this.callback=null;
		this._itemList=null;
		this._objectPool=null;
		this._index=0;
		this._itemList=[];
		this._objectPool=[];
	}

	__class(AsyncOperation,'fairygui.AsyncOperation');
	var __proto=AsyncOperation.prototype;
	__proto.createObject=function(pkgName,resName){
		var pkg=UIPackage.getByName(pkgName);
		if(pkg){
			var pi=pkg.getItemByName(resName);
			if(!pi)
				throw new Error("resource not found: "+resName);
			this.internalCreateObject(pi);
		}
		else
		throw new Error("package not found: "+pkgName);
	}

	__proto.createObjectFromURL=function(url){
		var pi=UIPackage.getItemByURL(url);
		if(pi)
			this.internalCreateObject(pi);
		else
		throw new Error("resource not found: "+url);
	}

	__proto.cancel=function(){
		Laya.timer.clear(this,this.run);
		this._itemList.length=0;
		if(this._objectPool.length>0){
			var cnt=this._objectPool.length;
			for(var i=0;i<cnt;i++){
				this._objectPool[i].dispose();
			}
			this._objectPool.length=0;
		}
	}

	__proto.internalCreateObject=function(item){
		this._itemList.length=0;
		this._objectPool.length=0;
		this.collectComponentChildren(item);
		this._itemList.push(new DisplayListItem(item,null));
		this._index=0;
		Laya.timer.frameLoop(1,this,this.run);
	}

	__proto.collectComponentChildren=function(item){
		item.owner.getItemAsset(item);
		var cnt=item.displayList.length;
		for (var i=0;i < cnt;i++){
			var di=item.displayList[i];
			if (di.packageItem !=null && di.packageItem.type==4)
				this.collectComponentChildren(di.packageItem);
			else if (di.type=="list"){
				var defaultItem=null;
				di.listItemCount=0;
				var col=di.desc.childNodes;
				var length=col.length;
				for (var j=0;j < length;j++){
					var cxml=col[j];
					if(cxml.nodeName !="item")
						continue ;
					var url=cxml.getAttribute("url");
					if (!url){
						if (defaultItem==null)
							defaultItem=di.desc.getAttribute("defaultItem");
						url=defaultItem;
						if (!url)
							continue ;
					};
					var pi=UIPackage.getItemByURL(url);
					if (pi){
						if (pi.type==4)
							this.collectComponentChildren(pi);
						this._itemList.push(new DisplayListItem(pi,null));
						di.listItemCount++;
					}
				}
			}
			this._itemList.push(di);
		}
	}

	__proto.run=function(){
		var obj;
		var di;
		var poolStart=0;
		var k=0;
		var t=Browser.now();
		var frameTime=UIConfig$1.frameTimeForAsyncUIConstruction;
		var totalItems=this._itemList.length;
		while(this._index<totalItems){
			di=this._itemList[this._index];
			if (di.packageItem !=null){
				obj=UIObjectFactory.newObject(di.packageItem);
				obj.packageItem=di.packageItem;
				this._objectPool.push(obj);
				UIPackage._constructing++;
				if (di.packageItem.type==4){
					poolStart=this._objectPool.length-di.packageItem.displayList.length-1;
					(obj).constructFromResource2(this._objectPool,poolStart);
					this._objectPool.splice(poolStart,di.packageItem.displayList.length);
				}
				else{
					obj.constructFromResource();
				}
				UIPackage._constructing--;
			}
			else{
				obj=UIObjectFactory.newObject2(di.type);
				this._objectPool.push(obj);
				if (di.type=="list" && di.listItemCount > 0){
					poolStart=this._objectPool.length-di.listItemCount-1;
					for (k=0;k < di.listItemCount;k++)
					(obj).itemPool.returnObject(this._objectPool[k+poolStart]);
					this._objectPool.splice(poolStart,di.listItemCount);
				}
			}
			this._index++;
			if ((this._index % 5==0)&& Browser.now()-t >=frameTime)
				return;
		}
		Laya.timer.clear(this,this.run);
		var result=this._objectPool[0];
		this._itemList.length=0;
		this._objectPool.length=0;
		if(this.callback!=null)
			this.callback.runWith(result);
	}

	return AsyncOperation;
})()


//class fairygui.AutoSizeType
var AutoSizeType=(function(){
	function AutoSizeType(){}
	__class(AutoSizeType,'fairygui.AutoSizeType');
	AutoSizeType.parse=function(value){
		switch (value){
			case "none":
				return 0;
			case "both":
				return 1;
			case "height":
				return 2;
			default :
				return 0;
			}
	}

	AutoSizeType.None=0;
	AutoSizeType.Both=1;
	AutoSizeType.Height=2;
	return AutoSizeType;
})()


//class fairygui.ButtonMode
var ButtonMode=(function(){
	function ButtonMode(){}
	__class(ButtonMode,'fairygui.ButtonMode');
	ButtonMode.parse=function(value){
		switch (value){
			case "Common":
				return 0;
			case "Check":
				return 1;
			case "Radio":
				return 2;
			default :
				return 0;
			}
	}

	ButtonMode.Common=0;
	ButtonMode.Check=1;
	ButtonMode.Radio=2;
	return ButtonMode;
})()


//class fairygui.ChildrenRenderOrder
var ChildrenRenderOrder=(function(){
	function ChildrenRenderOrder(){}
	__class(ChildrenRenderOrder,'fairygui.ChildrenRenderOrder');
	ChildrenRenderOrder.parse=function(value){
		switch (value){
			case "ascent":
				return 0;
			case "descent":
				return 1;
			case "arch":
				return 2;
			default :
				return 0;
			}
	}

	ChildrenRenderOrder.Ascent=0;
	ChildrenRenderOrder.Descent=1;
	ChildrenRenderOrder.Arch=2;
	return ChildrenRenderOrder;
})()


//class fairygui.display.BitmapFont
var BitmapFont$1=(function(){
	function BitmapFont(){
		this.id=null;
		this.size=0;
		this.ttf=false;
		this.glyphs=null;
		this.resizable=false;
		this.glyphs={};
	}

	__class(BitmapFont,'fairygui.display.BitmapFont',null,'BitmapFont$1');
	return BitmapFont;
})()


//class fairygui.display.BMGlyph
var BMGlyph=(function(){
	function BMGlyph(){
		this.x=0;
		this.y=0;
		this.offsetX=0;
		this.offsetY=0;
		this.width=0;
		this.height=0;
		this.advance=0;
		this.lineHeight=0;
		this.channel=0;
		this.texture=null;
	}

	__class(BMGlyph,'fairygui.display.BMGlyph');
	return BMGlyph;
})()


//class fairygui.display.Frame
var Frame=(function(){
	function Frame(){
		this.rect=null;
		this.addDelay=0;
		this.texture=null;
		this.rect=new Rectangle();
	}

	__class(Frame,'fairygui.display.Frame');
	return Frame;
})()


//class fairygui.DisplayListItem
var DisplayListItem=(function(){
	function DisplayListItem(packageItem,type){
		this.packageItem=null;
		this.type=null;
		this.desc=null;
		this.listItemCount=0;
		this.packageItem=packageItem;
		this.type=type;
	}

	__class(DisplayListItem,'fairygui.DisplayListItem');
	return DisplayListItem;
})()


//class fairygui.DragDropManager
var DragDropManager=(function(){
	function DragDropManager(){
		this._agent=null;
		this._sourceData=null;
		this._agent=new GLoader();
		this._agent.draggable=true;
		this._agent.touchable=false;
		this._agent.setSize(100,100);
		this._agent.setPivot(0.5,0.5,true);
		this._agent.align="center";
		this._agent.verticalAlign="middle";
		this._agent.sortingOrder=1000000;
		this._agent.on("fui_drag_end",this,this.__dragEnd);
	}

	__class(DragDropManager,'fairygui.DragDropManager');
	var __proto=DragDropManager.prototype;
	__proto.startDrag=function(source,icon,sourceData,touchPointID){
		(touchPointID===void 0)&& (touchPointID=-1);
		if(this._agent.parent !=null)
			return;
		this._sourceData=sourceData;
		this._agent.url=icon;
		GRoot.inst.addChild(this._agent);
		var pt=GRoot.inst.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY);
		this._agent.setXY(pt.x,pt.y);
		this._agent.startDrag(touchPointID);
	}

	__proto.cancel=function(){
		if(this._agent.parent !=null){
			this._agent.stopDrag();
			GRoot.inst.removeChild(this._agent);
			this._sourceData=null;
		}
	}

	__proto.__dragEnd=function(evt){
		if(this._agent.parent==null)
			return;
		GRoot.inst.removeChild(this._agent);
		var sourceData=this._sourceData;
		this._sourceData=null;
		var obj=GObject.cast(evt.target);
		while(obj !=null){
			if(obj.displayObject.hasListener("fui_drop")){
				obj.requestFocus();
				obj.displayObject.event("fui_drop",[sourceData,Events.createEvent("fui_drop",obj.displayObject,evt)]);
				return;
			}
			obj=obj.parent;
		}
	}

	__getset(0,__proto,'dragAgent',function(){
		return this._agent;
	});

	__getset(0,__proto,'dragging',function(){
		return this._agent.parent !=null;
	});

	__getset(1,DragDropManager,'inst',function(){
		if(fairygui.DragDropManager._inst==null)
			fairygui.DragDropManager._inst=new DragDropManager();
		return fairygui.DragDropManager._inst;
	});

	DragDropManager._inst=null;
	return DragDropManager;
})()


//class fairygui.Events
var Events=(function(){
	function Events(){}
	__class(Events,'fairygui.Events');
	Events.createEvent=function(type,target,source){
		fairygui.Events.$event.setTo(type,target,source?source.target:target);
		if(source){
			fairygui.Events.$event.touchId=source.touchId;
			fairygui.Events.$event.nativeEvent=source.nativeEvent;
		}
		else{
			fairygui.Events.$event.nativeEvent=null;
		}
		fairygui.Events.$event._stoped=false;
		return fairygui.Events.$event;
	}

	Events.dispatch=function(type,target,source){
		target.event(type,fairygui.Events.createEvent(type,target,source));
	}

	Events.STATE_CHANGED="fui_state_changed";
	Events.XY_CHANGED="fui_xy_changed";
	Events.SIZE_CHANGED="fui_size_changed";
	Events.SIZE_DELAY_CHANGE="fui_size_delay_change";
	Events.CLICK_ITEM="fui_click_item";
	Events.SCROLL="fui_scroll";
	Events.SCROLL_END="fui_scroll_end";
	Events.DROP="fui_drop";
	Events.FOCUS_CHANGED="fui_focus_changed";
	Events.DRAG_START="fui_drag_start";
	Events.DRAG_MOVE="fui_drag_move";
	Events.DRAG_END="fui_drag_end";
	Events.PULL_DOWN_RELEASE="fui_pull_down_release";
	Events.PULL_UP_RELEASE="fui_pull_up_release";
	Events.GEAR_STOP="fui_gear_stop";
	__static(Events,
	['$event',function(){return this.$event=new Event();}
	]);
	return Events;
})()


//class fairygui.FlipType
var FlipType=(function(){
	function FlipType(){}
	__class(FlipType,'fairygui.FlipType');
	FlipType.parse=function(value){
		switch (value){
			case "hz":
				return 1;
			case "vt":
				return 2;
			case "both":
				return 3;
			default :
				return 0;
			}
	}

	FlipType.None=0;
	FlipType.Horizontal=1;
	FlipType.Vertical=2;
	FlipType.Both=3;
	return FlipType;
})()


//class fairygui.GObject
var GObject=(function(){
	function GObject(){
		this.data=null;
		this.packageItem=null;
		this._x=0;
		this._y=0;
		this._alpha=1;
		this._rotation=0;
		this._visible=true;
		this._touchable=true;
		this._grayed=false;
		this._draggable=false;
		this._scaleX=1;
		this._scaleY=1;
		this._skewX=0;
		this._skewY=0;
		this._pivotX=0;
		this._pivotY=0;
		this._pivotAsAnchor=false;
		this._pivotOffsetX=0;
		this._pivotOffsetY=0;
		this._sortingOrder=0;
		this._internalVisible=true;
		this._handlingController=false;
		this._focusable=false;
		this._tooltips=null;
		this._pixelSnapping=false;
		this._relations=null;
		this._group=null;
		this._gears=null;
		this._dragBounds=null;
		this._displayObject=null;
		this._yOffset=0;
		//Size的实现方式，有两种，0-GObject的w/h等于DisplayObject的w/h。1-GObject的sourceWidth/sourceHeight等于DisplayObject的w/h，剩余部分由scale实现
		this._sizeImplType=0;
		this.minWidth=0;
		this.minHeight=0;
		this.maxWidth=0;
		this.maxHeight=0;
		this.sourceWidth=0;
		this.sourceHeight=0;
		this.initWidth=0;
		this.initHeight=0;
		this._parent=null;
		this._width=0;
		this._height=0;
		this._rawWidth=0;
		this._rawHeight=0;
		this._id=null;
		this._name=null;
		this._underConstruct=false;
		this._gearLocked=false;
		this._sizePercentInGroup=0;
		this._touchDownPoint=null;
		;
		this._id=""+fairygui.GObject._gInstanceCounter++;
		this._name="";
		this.createDisplayObject();
		this._relations=new Relations(this);
		this._gears=__newvec(8,null);
	}

	__class(GObject,'fairygui.GObject');
	var __proto=GObject.prototype;
	__proto.setXY=function(xv,yv){
		if(this._x !=xv || this._y !=yv){
			var dx=xv-this._x;
			var dy=yv-this._y;
			this._x=xv;
			this._y=yv;
			this.handleXYChanged();
			if((this instanceof fairygui.GGroup ))
				(this).moveChildren(dx,dy);
			this.updateGear(1);
			if(this._parent && !((this._parent instanceof fairygui.GList ))){
				this._parent.setBoundsChangedFlag();
				if (this._group !=null)
					this._group.setBoundsChangedFlag();
				this.displayObject.event("fui_xy_changed");
			}
			if (GObject.draggingObject==this && !GObject.sUpdateInDragging)
				this.localToGlobalRect(0,0,this.width,this.height,GObject.sGlobalRect);
		}
	}

	__proto.center=function(restraint){
		(restraint===void 0)&& (restraint=false);
		var r;
		if(this._parent !=null)
			r=this.parent;
		else
		r=this.root;
		this.setXY((r.width-this.width)/ 2,(r.height-this.height)/ 2);
		if(restraint){
			this.addRelation(r,3);
			this.addRelation(r,10);
		}
	}

	__proto.setSize=function(wv,hv,ignorePivot){
		(ignorePivot===void 0)&& (ignorePivot=false);
		if(this._rawWidth !=wv || this._rawHeight !=hv){
			this._rawWidth=wv;
			this._rawHeight=hv;
			if(wv<this.minWidth)
				wv=this.minWidth;
			if(hv<this.minHeight)
				hv=this.minHeight;
			if(this.maxWidth>0 && wv>this.maxWidth)
				wv=this.maxWidth;
			if(this.maxHeight>0 && hv>this.maxHeight)
				hv=this.maxHeight;
			var dWidth=wv-this._width;
			var dHeight=hv-this._height;
			this._width=wv;
			this._height=hv;
			this.handleSizeChanged();
			if(this._pivotX !=0 || this._pivotY !=0){
				if(!this._pivotAsAnchor){
					if(!ignorePivot)
						this.setXY(this.x-this._pivotX *dWidth,this.y-this._pivotY *dHeight);
					this.updatePivotOffset();
				}
				else
				this.applyPivot();
			}
			if ((this instanceof fairygui.GGroup ))
				(this).resizeChildren(dWidth,dHeight);
			this.updateGear(2);
			if(this._parent){
				this._relations.onOwnerSizeChanged(dWidth,dHeight,this._pivotAsAnchor || !ignorePivot);
				this._parent.setBoundsChangedFlag();
				if (this._group !=null)
					this._group.setBoundsChangedFlag(true);
			}
			this.displayObject.event("fui_size_changed");
		}
	}

	__proto.ensureSizeCorrect=function(){}
	__proto.setScale=function(sx,sy){
		if(this._scaleX !=sx || this._scaleY !=sy){
			this._scaleX=sx;
			this._scaleY=sy;
			this.handleScaleChanged();
			this.applyPivot();
			this.updateGear(2);
		}
	}

	__proto.setSkew=function(sx,sy){
		if(this._skewX !=sx || this._skewY !=sy){
			this._skewX=sx;
			this._skewY=sy;
			if(this._displayObject!=null){
				this._displayObject.skew(-sx,sy);
				this.applyPivot();
			}
		}
	}

	__proto.setPivot=function(xv,yv,asAnchor){
		(yv===void 0)&& (yv=0);
		(asAnchor===void 0)&& (asAnchor=false);
		if(this._pivotX !=xv || this._pivotY !=yv || this._pivotAsAnchor!=asAnchor){
			this._pivotX=xv;
			this._pivotY=yv;
			this._pivotAsAnchor=asAnchor;
			this.updatePivotOffset();
			this.handleXYChanged();
		}
	}

	__proto.internalSetPivot=function(xv,yv,asAnchor){
		this._pivotX=xv;
		this._pivotY=yv;
		this._pivotAsAnchor=asAnchor;
		if(this._pivotAsAnchor)
			this.handleXYChanged();
	}

	__proto.updatePivotOffset=function(){
		if(this._displayObject!=null){
			if(this._displayObject.transform && (this._pivotX!=0 || this._pivotY!=0)){
				if(this._sizeImplType==0){
					fairygui.GObject.sHelperPoint.x=this._pivotX*this._width;
					fairygui.GObject.sHelperPoint.y=this._pivotY*this._height;
				}
				else {
					fairygui.GObject.sHelperPoint.x=this._pivotX*this.sourceWidth;
					fairygui.GObject.sHelperPoint.y=this._pivotY*this.sourceHeight;
				};
				var pt=this._displayObject.transform.transformPoint(fairygui.GObject.sHelperPoint);
				this._pivotOffsetX=this._pivotX*this._width-pt.x;
				this._pivotOffsetY=this._pivotY*this._height-pt.y;
			}
			else{
				this._pivotOffsetX=0;
				this._pivotOffsetY=0;
			}
		}
	}

	__proto.applyPivot=function(){
		if(this._pivotX !=0 || this._pivotY !=0){
			this.updatePivotOffset();
			this.handleXYChanged();
		}
	}

	__proto.requestFocus=function(){
		var p=this;
		while (p && !p._focusable)
		p=p.parent;
		if (p !=null)
			this.root.focus=p;
	}

	__proto.__rollOver=function(evt){
		Laya.timer.once(100,this,this.__doShowTooltips);
	}

	__proto.__doShowTooltips=function(){
		var r=this.root;
		if(r)
			this.root.showTooltips(this._tooltips);
	}

	__proto.__rollOut=function(evt){
		Laya.timer.clear(this,this.__doShowTooltips);
		this.root.hideTooltips();
	}

	__proto.getGear=function(index){
		var gear=this._gears[index];
		if (gear==null){
			switch (index){
				case 0:
					gear=new GearDisplay(this);
					break ;
				case 1:
					gear=new GearXY(this);
					break ;
				case 2:
					gear=new GearSize(this);
					break ;
				case 3:
					gear=new GearLook(this);
					break ;
				case 4:
					gear=new GearColor(this);
					break ;
				case 5:
					gear=new GearAnimation(this);
					break ;
				case 6:
					gear=new GearText(this);
					break ;
				case 7:
					gear=new GearIcon(this);
					break ;
				default :
					throw new Error("FairyGUI: invalid gear index!");
				}
			this._gears[index]=gear;
		}
		return gear;
	}

	__proto.updateGear=function(index){
		if(this._underConstruct || this._gearLocked)
			return;
		var gear=this._gears[index];
		if (gear!=null && gear.controller!=null)
			gear.updateState();
	}

	__proto.checkGearController=function(index,c){
		return this._gears[index] !=null && this._gears[index].controller==c;
	}

	__proto.updateGearFromRelations=function(index,dx,dy){
		if (this._gears[index] !=null)
			this._gears[index].updateFromRelations(dx,dy);
	}

	__proto.addDisplayLock=function(){
		var gearDisplay=(this._gears[0]);
		if(gearDisplay && gearDisplay.controller){
			var ret=gearDisplay.addLock();
			this.checkGearDisplay();
			return ret;
		}
		else
		return 0;
	}

	__proto.releaseDisplayLock=function(token){
		var gearDisplay=(this._gears[0]);
		if(gearDisplay && gearDisplay.controller){
			gearDisplay.releaseLock(token);
			this.checkGearDisplay();
		}
	}

	__proto.checkGearDisplay=function(){
		if(this._handlingController)
			return;
		var connected=this._gears[0]==null || (this._gears[0]).connected;
		if(connected!=this._internalVisible){
			this._internalVisible=connected;
			if(this._parent)
				this._parent.childStateChanged(this);
		}
	}

	__proto.addRelation=function(target,relationType,usePercent){
		(usePercent===void 0)&& (usePercent=false);
		this._relations.add(target,relationType,usePercent);
	}

	__proto.removeRelation=function(target,relationType){
		(relationType===void 0)&& (relationType=0);
		this._relations.remove(target,relationType);
	}

	__proto.removeFromParent=function(){
		if (this._parent)
			this._parent.removeChild(this);
	}

	__proto.dispose=function(){
		this.removeFromParent();
		this._relations.dispose();
		this._displayObject.destroy();
	}

	__proto.onClick=function(thisObj,listener,args){
		this.on("click",thisObj,listener,args);
	}

	__proto.offClick=function(thisObj,listener){
		this.off("click",thisObj,listener);
	}

	__proto.hasClickListener=function(){
		return this._displayObject.hasListener("click");
	}

	__proto.on=function(type,thisObject,listener,args){
		this._displayObject.on(type,thisObject,listener,args);
	}

	__proto.off=function(type,thisObject,listener){
		this._displayObject.off(type,thisObject,listener);
	}

	__proto.startDrag=function(touchPointID){
		(touchPointID===void 0)&& (touchPointID=-1);
		if (this._displayObject.stage==null)
			return;
		this.dragBegin();
	}

	__proto.stopDrag=function(){
		this.dragEnd();
	}

	__proto.localToGlobal=function(ax,ay,resultPoint){
		(ax===void 0)&& (ax=0);
		(ay===void 0)&& (ay=0);
		if(this._pivotAsAnchor){
			ax+=this._pivotX*this._width;
			ay+=this._pivotY*this._height;
		}
		if(!resultPoint){
			resultPoint=fairygui.GObject.sHelperPoint;
			resultPoint.x=ax;
			resultPoint.y=ay;
			return this._displayObject.localToGlobal(resultPoint,true);
		}
		else{
			resultPoint.x=ax;
			resultPoint.y=ay;
			return this._displayObject.localToGlobal(resultPoint,false);
		}
	}

	__proto.globalToLocal=function(ax,ay,resultPoint){
		(ax===void 0)&& (ax=0);
		(ay===void 0)&& (ay=0);
		if(!resultPoint){
			resultPoint=fairygui.GObject.sHelperPoint;
			resultPoint.x=ax;
			resultPoint.y=ay;
			resultPoint=this._displayObject.globalToLocal(resultPoint,true);
		}
		else{
			resultPoint.x=ax;
			resultPoint.y=ay;
			this._displayObject.globalToLocal(resultPoint,false);
		}
		if(this._pivotAsAnchor){
			resultPoint.x-=this._pivotX*this._width;
			resultPoint.y-=this._pivotY*this._height;
		}
		return resultPoint;
	}

	__proto.localToGlobalRect=function(ax,ay,aWidth,aHeight,resultRect){
		(ax===void 0)&& (ax=0);
		(ay===void 0)&& (ay=0);
		(aWidth===void 0)&& (aWidth=0);
		(aHeight===void 0)&& (aHeight=0);
		if(resultRect==null)
			resultRect=new Rectangle();
		var pt=this.localToGlobal(ax,ay);
		resultRect.x=pt.x;
		resultRect.y=pt.y;
		pt=this.localToGlobal(ax+aWidth,ay+aHeight);
		resultRect.width=pt.x-resultRect.x;
		resultRect.height=pt.y-resultRect.y;
		return resultRect;
	}

	__proto.globalToLocalRect=function(ax,ay,aWidth,aHeight,resultRect){
		(ax===void 0)&& (ax=0);
		(ay===void 0)&& (ay=0);
		(aWidth===void 0)&& (aWidth=0);
		(aHeight===void 0)&& (aHeight=0);
		if(resultRect==null)
			resultRect=new Rectangle();
		var pt=this.globalToLocal(ax,ay);
		resultRect.x=pt.x;
		resultRect.y=pt.y;
		pt=this.globalToLocal(ax+aWidth,ay+aHeight);
		resultRect.width=pt.x-resultRect.x;
		resultRect.height=pt.y-resultRect.y;
		return resultRect;
	}

	__proto.handleControllerChanged=function(c){
		this._handlingController=true;
		for (var i=0;i < 8;i++){
			var gear=this._gears[i];
			if (gear !=null && gear.controller==c)
				gear.apply();
		}
		this._handlingController=false;
		this.checkGearDisplay();
	}

	__proto.createDisplayObject=function(){
		this._displayObject=new Sprite();
		this._displayObject["$owner"]=this;
	}

	__proto.handleXYChanged=function(){
		var xv=this._x;
		var yv=this._y+this._yOffset;
		if(this._pivotAsAnchor){
			xv-=this._pivotX*this._width;
			yv-=this._pivotY*this._height;
		}
		if(this._pixelSnapping){
			xv=Math.round(xv);
			yv=Math.round(yv);
		}
		this._displayObject.pos(xv+this._pivotOffsetX,yv+this._pivotOffsetY);
	}

	__proto.handleSizeChanged=function(){
		if(this._displayObject!=null){
			if(this._sizeImplType==0 || this.sourceWidth==0 || this.sourceHeight==0)
				this._displayObject.size(this._width,this._height);
			else
			this._displayObject.scale(this._width/this.sourceWidth*this._scaleX,
			this._height/this.sourceHeight*this._scaleY);
		}
	}

	__proto.handleScaleChanged=function(){
		if(this._displayObject!=null){
			if(this._sizeImplType==0 || this.sourceWidth==0 || this.sourceHeight==0)
				this._displayObject.scale(this._scaleX,this._scaleY);
			else
			this._displayObject.scale(this._width/this.sourceWidth*this._scaleX,
			this._height/this.sourceHeight*this._scaleY);
		}
	}

	__proto.handleGrayedChanged=function(){
		if(this._displayObject){
			if(this._grayed){
				if(GObject.grayFilter==null)
					GObject.grayFilter=new ColorFilter([0.3086,0.6094,0.082,0,0,0.3086,0.6094,0.082,0,0,0.3086,0.6094,0.082,0,0,0,0,0,1,0]);
				this._displayObject.filters=[GObject.grayFilter];
			}
			else
			this._displayObject.filters=null;
		}
	}

	__proto.handleAlphaChanged=function(){
		if(this._displayObject)
			this._displayObject.alpha=this._alpha;
	}

	__proto.handleVisibleChanged=function(){
		if(this._displayObject)
			this._displayObject.visible=this.internalVisible2;
	}

	__proto.constructFromResource=function(){}
	__proto.setup_beforeAdd=function(xml){
		var str;
		var arr;
		this._id=xml.getAttribute("id");
		this._name=xml.getAttribute("name");
		str=xml.getAttribute("xy");
		arr=str.split(",");
		this.setXY(parseInt(arr[0]),parseInt(arr[1]));
		str=xml.getAttribute("size");
		if (str){
			arr=str.split(",");
			this.initWidth=parseInt(arr[0]);
			this.initHeight=parseInt(arr[1]);
			this.setSize(this.initWidth,this.initHeight,true);
		}
		str=xml.getAttribute("restrictSize");
		if(str){
			arr=str.split(",");
			this.minWidth=parseInt(arr[0]);
			this.maxWidth=parseInt(arr[1]);
			this.minHeight=parseInt(arr[2]);
			this.maxHeight=parseInt(arr[3]);
		}
		str=xml.getAttribute("scale");
		if(str){
			arr=str.split(",");
			this.setScale(parseFloat(arr[0]),parseFloat(arr[1]));
		}
		str=xml.getAttribute("skew");
		if(str){
			arr=str.split(",");
			this.setSkew(parseFloat(arr[0]),parseFloat(arr[1]));
		}
		str=xml.getAttribute("rotation");
		if (str)
			this.rotation=parseFloat(str);
		str=xml.getAttribute("pivot");
		if (str){
			arr=str.split(",");
			str=xml.getAttribute("anchor");
			this.setPivot(parseFloat(arr[0]),parseFloat(arr[1]),str=="true");
		}
		str=xml.getAttribute("alpha");
		if (str)
			this.alpha=parseFloat(str);
		if(xml.getAttribute("touchable")=="false")
			this.touchable=false;
		if(xml.getAttribute("visible")=="false")
			this.visible=false;
		if(xml.getAttribute("grayed")=="true")
			this.grayed=true;
		this.tooltips=xml.getAttribute("tooltips");
		str=xml.getAttribute("blend");
		if (str)
			this.blendMode=str;
		str=xml.getAttribute("filter");
		if (str){
			switch (str){
				case "color":
					str=xml.getAttribute("filterData");
					arr=str.split(",");
					var cm=new ColorMatrix();
					cm.adjustBrightness(parseFloat(arr[0]));
					cm.adjustContrast(parseFloat(arr[1]));
					cm.adjustSaturation(parseFloat(arr[2]));
					cm.adjustHue(parseFloat(arr[3]));
					var cf=new ColorFilter(cm);
					this.filters=[cf];
					break ;
				}
		}
		str=xml.getAttribute("customData");
		if (str)
			this.data=str;
	}

	__proto.setup_afterAdd=function(xml){
		var str=xml.getAttribute("group");
		if (str)
			this._group=this._parent.getChildById(str);
		var col=xml.childNodes;
		var length1=col.length;
		for (var i1=0;i1 < length1;i1++){
			var cxml=col[i1];
			if(cxml.nodeType!=1)
				continue ;
			var index=fairygui.GObject.GearXMLKeys[cxml.nodeName];
			if(index!=undefined)
				this.getGear(index).setup(cxml);
		}
	}

	__proto.initDrag=function(){
		if (this._draggable)
			this.on("mousedown",this,this.__begin);
		else
		this.off("mousedown",this,this.__begin);
	}

	__proto.dragBegin=function(){
		if (fairygui.GObject.draggingObject !=null)
			fairygui.GObject.draggingObject.stopDrag();
		fairygui.GObject.sGlobalDragStart.x=Laya.stage.mouseX;
		fairygui.GObject.sGlobalDragStart.y=Laya.stage.mouseY;
		this.localToGlobalRect(0,0,this.width,this.height,fairygui.GObject.sGlobalRect);
		fairygui.GObject.draggingObject=this;
		Laya.stage.on("mousemove",this,this.__moving2);
		Laya.stage.on("mouseup",this,this.__end2);
	}

	__proto.dragEnd=function(){
		if (fairygui.GObject.draggingObject==this){
			Laya.stage.off("mousemove",this,this.__moving2);
			Laya.stage.off("mouseup",this,this.__end2);
			fairygui.GObject.draggingObject=null;
		}
		fairygui.GObject.sDraggingQuery=false;
	}

	__proto.reset=function(){
		Laya.stage.off("mousemove",this,this.__moving);
		Laya.stage.off("mouseup",this,this.__end);
	}

	__proto.__begin=function(){
		if(this._touchDownPoint==null)
			this._touchDownPoint=new Point();
		this._touchDownPoint.x=Laya.stage.mouseX;
		this._touchDownPoint.y=Laya.stage.mouseY;
		Laya.stage.on("mousemove",this,this.__moving);
		Laya.stage.on("mouseup",this,this.__end);
	}

	__proto.__end=function(){
		this.reset();
	}

	__proto.__moving=function(evt){
		var sensitivity=UIConfig$1.touchDragSensitivity;
		if(this._touchDownPoint !=null
			&& Math.abs(this._touchDownPoint.x-Laya.stage.mouseX)< sensitivity
		&& Math.abs(this._touchDownPoint.y-Laya.stage.mouseY)< sensitivity)
		return;
		this.reset();
		fairygui.GObject.sDraggingQuery=true;
		Events.dispatch("fui_drag_start",this._displayObject,evt);
		if (fairygui.GObject.sDraggingQuery)
			this.dragBegin();
	}

	__proto.__moving2=function(evt){
		var xx=Laya.stage.mouseX-fairygui.GObject.sGlobalDragStart.x+fairygui.GObject.sGlobalRect.x;
		var yy=Laya.stage.mouseY-fairygui.GObject.sGlobalDragStart.y+fairygui.GObject.sGlobalRect.y;
		if(this._dragBounds !=null){
			var rect=GRoot.inst.localToGlobalRect(this._dragBounds.x,this._dragBounds.y,
			this._dragBounds.width,this._dragBounds.height,fairygui.GObject.sDragHelperRect);
			if(xx < rect.x)
				xx=rect.x;
			else if(xx+fairygui.GObject.sGlobalRect.width > rect.right){
				xx=rect.right-fairygui.GObject.sGlobalRect.width;
				if(xx < rect.x)
					xx=rect.x;
			}
			if(yy < rect.y)
				yy=rect.y;
			else if(yy+fairygui.GObject.sGlobalRect.height > rect.bottom){
				yy=rect.bottom-fairygui.GObject.sGlobalRect.height;
				if(yy < rect.y)
					yy=rect.y;
			}
		}
		GObject.sUpdateInDragging=true;
		var pt=this.parent.globalToLocal(xx,yy,fairygui.GObject.sHelperPoint);
		this.setXY(Math.round(pt.x),Math.round(pt.y));
		GObject.sUpdateInDragging=false;
		Events.dispatch("fui_drag_move",this._displayObject,evt);
	}

	__proto.__end2=function(evt){
		if (fairygui.GObject.draggingObject==this){
			this.stopDrag();
			Events.dispatch("fui_drag_end",this._displayObject,evt);
		}
	}

	__getset(0,__proto,'yMin',function(){
		return this._pivotAsAnchor ? (this._y-this._height *this._pivotY):this._y;
		},function(value){
		if (this._pivotAsAnchor)
			this.setXY(this._x,value+this._height *this._pivotY);
		else
		this.setXY(this._x,value);
	});

	__getset(0,__proto,'id',function(){
		return this._id;
	});

	__getset(0,__proto,'name',function(){
		return this._name;
		},function(value){
		this._name=value;
	});

	__getset(0,__proto,'rotation',function(){
		return this._rotation;
		},function(value){
		if(this._rotation !=value){
			this._rotation=value;
			if(this._displayObject!=null){
				this._displayObject.rotation=this.normalizeRotation;
				this.applyPivot();
			}
			this.updateGear(3);
		}
	});

	__getset(0,__proto,'width',function(){
		this.ensureSizeCorrect();
		if(this._relations.sizeDirty)
			this._relations.ensureRelationsSizeCorrect();
		return this._width;
		},function(value){
		this.setSize(value,this._rawHeight);
	});

	__getset(0,__proto,'x',function(){
		return this._x;
		},function(value){
		this.setXY(value,this._y);
	});

	__getset(0,__proto,'draggable',function(){
		return this._draggable;
		},function(value){
		if (this._draggable !=value){
			this._draggable=value;
			this.initDrag();
		}
	});

	__getset(0,__proto,'y',function(){
		return this._y;
		},function(value){
		this.setXY(this._x,value);
	});

	__getset(0,__proto,'gearXY',function(){
		return (this.getGear(1));
	});

	__getset(0,__proto,'xMin',function(){
		return this._pivotAsAnchor ? (this._x-this._width *this._pivotX):this._x;
		},function(value){
		if (this._pivotAsAnchor)
			this.setXY(value+this._width *this._pivotX,this._y);
		else
		this.setXY(value,this._y);
	});

	__getset(0,__proto,'pixelSnapping',function(){
		return this._pixelSnapping;
		},function(value){
		if(this._pixelSnapping!=value){
			this._pixelSnapping=value;
			this.handleXYChanged();
		}
	});

	__getset(0,__proto,'height',function(){
		this.ensureSizeCorrect();
		if(this._relations.sizeDirty)
			this._relations.ensureRelationsSizeCorrect();
		return this._height;
		},function(value){
		this.setSize(this._rawWidth,value);
	});

	__getset(0,__proto,'asButton',function(){
		return this;
	});

	__getset(0,__proto,'actualWidth',function(){
		return this.width *Math.abs(this._scaleX);
	});

	__getset(0,__proto,'actualHeight',function(){
		return this.height *Math.abs(this._scaleY);
	});

	__getset(0,__proto,'blendMode',function(){
		return this._displayObject.blendMode;
		},function(value){
		this._displayObject.blendMode=value;
	});

	__getset(0,__proto,'scaleX',function(){
		return this._scaleX;
		},function(value){
		this.setScale(value,this._scaleY);
	});

	__getset(0,__proto,'scaleY',function(){
		return this._scaleY;
		},function(value){
		this.setScale(this._scaleX,value);
	});

	__getset(0,__proto,'skewX',function(){
		return this._skewX;
		},function(value){
		this.setScale(value,this._skewY);
	});

	__getset(0,__proto,'pivotAsAnchor',function(){
		return this._pivotAsAnchor;
	});

	__getset(0,__proto,'skewY',function(){
		return this._skewY;
		},function(value){
		this.setSkew(this._skewX,value);
	});

	__getset(0,__proto,'pivotX',function(){
		return this._pivotX;
		},function(value){
		this.setPivot(value,this._pivotY);
	});

	__getset(0,__proto,'asLoader',function(){
		return this;
	});

	__getset(0,__proto,'asTextInput',function(){
		return this;
	});

	__getset(0,__proto,'displayObject',function(){
		return this._displayObject;
	});

	__getset(0,__proto,'normalizeRotation',function(){
		var rot=this._rotation % 360;
		if(rot > 180)
			rot=rot-360;
		else if(rot <-180)
		rot=360+rot;
		return rot;
	});

	__getset(0,__proto,'pivotY',function(){
		return this._pivotY;
		},function(value){
		this.setPivot(this._pivotX,value);
	});

	__getset(0,__proto,'touchable',function(){
		return this._touchable;
		},function(value){
		if(this._touchable!=value){
			this._touchable=value;
			this.updateGear(3);
			if(((this instanceof fairygui.GImage ))|| ((this instanceof fairygui.GMovieClip ))
				|| ((this instanceof fairygui.GTextField ))&& !((this instanceof fairygui.GTextInput ))&& !((this instanceof fairygui.GRichTextField )))
			return;
			if(this._displayObject !=null)
				this._displayObject.mouseEnabled=this._touchable;
		}
	});

	__getset(0,__proto,'alpha',function(){
		return this._alpha;
		},function(value){
		if(this._alpha!=value){
			this._alpha=value;
			this.handleAlphaChanged();
			this.updateGear(3);
		}
	});

	__getset(0,__proto,'grayed',function(){
		return this._grayed;
		},function(value){
		if(this._grayed !=value){
			this._grayed=value;
			this.handleGrayedChanged();
			this.updateGear(3);
		}
	});

	__getset(0,__proto,'dragBounds',function(){
		return this._dragBounds;
		},function(value){
		this._dragBounds=value;
	});

	__getset(0,__proto,'asProgress',function(){
		return this;
	});

	__getset(0,__proto,'enabled',function(){
		return !this._grayed && this._touchable;
		},function(value){
		this.grayed=!value;
		this.touchable=value;
	});

	__getset(0,__proto,'sortingOrder',function(){
		return this._sortingOrder;
		},function(value){
		if (value < 0)
			value=0;
		if (this._sortingOrder !=value){
			var old=this._sortingOrder;
			this._sortingOrder=value;
			if (this._parent !=null)
				this._parent.childSortingOrderChanged(this,old,this._sortingOrder);
		}
	});

	__getset(0,__proto,'visible',function(){
		return this._visible;
		},function(value){
		if (this._visible !=value){
			this._visible=value;
			this.handleVisibleChanged();
			if (this._parent)
				this._parent.setBoundsChangedFlag();
		}
	});

	//wmy
	__getset(0,__proto,'internalVisible',function(){
		return this._internalVisible && (!this._group || this._group.internalVisible);
	});

	// __getset(0,__proto,'internalVisible',function(){
	// 	return this._internalVisible && (!this._group || this._group.internalVisible)
	// 	&& !this._displayObject._$P["maskParent"];
	// });

	__getset(0,__proto,'icon',function(){
		return null;
		},function(value){
	});

	__getset(0,__proto,'internalVisible2',function(){
		return this._visible && (!this._group || this._group.internalVisible2);
	});

	__getset(0,__proto,'asGraph',function(){
		return this;
	});

	__getset(0,__proto,'gearSize',function(){
		return (this.getGear(2));
	});

	__getset(0,__proto,'focusable',function(){
		return this._focusable;
		},function(value){
		this._focusable=value;
	});

	__getset(0,__proto,'focused',function(){
		return this.root.focus==this;
	});

	__getset(0,__proto,'tooltips',function(){
		return this._tooltips;
		},function(value){
		if(this._tooltips){
			this.off("mouseover",this,this.__rollOver);
			this.off("mouseout",this,this.__rollOut);
		}
		this._tooltips=value;
		if(this._tooltips){
			this.on("mouseover",this,this.__rollOver);
			this.on("mouseout",this,this.__rollOut);
		}
	});

	__getset(0,__proto,'dragging',function(){
		return fairygui.GObject.draggingObject==this;
	});

	__getset(0,__proto,'group',function(){
		return this._group;
		},function(value){
		if (this._group !=value){
			if (this._group !=null)
				this._group.setBoundsChangedFlag(true);
			this._group=value;
			if (this._group !=null)
				this._group.setBoundsChangedFlag(true);
		}
	});

	__getset(0,__proto,'filters',function(){
		return this._displayObject.filters;
		},function(value){
		this._displayObject.filters=value;
	});

	__getset(0,__proto,'inContainer',function(){
		return this._displayObject !=null && this._displayObject.parent !=null;
	});

	__getset(0,__proto,'resourceURL',function(){
		if (this.packageItem !=null)
			return "ui://"+this.packageItem.owner.id+this.packageItem.id;
		else
		return null;
	});

	__getset(0,__proto,'onStage',function(){
		return this._displayObject !=null && this._displayObject.stage !=null;
	});

	__getset(0,__proto,'root',function(){
		if((this instanceof fairygui.GRoot ))
			return (this);
		var p=this._parent;
		while (p){
			if ((p instanceof fairygui.GRoot ))
				return (p);
			p=p.parent;
		}
		return GRoot.inst;
	});

	__getset(0,__proto,'gearLook',function(){
		return (this.getGear(3));
	});

	__getset(0,__proto,'asCom',function(){
		return this;
	});

	__getset(0,__proto,'relations',function(){
		return this._relations;
	});

	__getset(0,__proto,'parent',function(){
		return this._parent;
		},function(val){
		this._parent=val;
	});

	__getset(0,__proto,'asLabel',function(){
		return this;
	});

	__getset(0,__proto,'asImage',function(){
		return this;
	});

	__getset(0,__proto,'asTextField',function(){
		return this;
	});

	__getset(0,__proto,'asGroup',function(){
		return this;
	});

	__getset(0,__proto,'asRichTextField',function(){
		return this;
	});

	__getset(0,__proto,'asList',function(){
		return this;
	});

	__getset(0,__proto,'asSlider',function(){
		return this;
	});

	__getset(0,__proto,'asComboBox',function(){
		return this;
	});

	__getset(0,__proto,'asMovieClip',function(){
		return this;
	});

	__getset(0,__proto,'text',function(){
		return null;
		},function(value){
	});

	GObject.cast=function(sprite){
		return (sprite["$owner"]);
	}

	GObject.draggingObject=null;
	GObject._gInstanceCounter=0;
	GObject.grayFilter=null;
	GObject.sDraggingQuery=false;
	GObject.sUpdateInDragging=false;
	__static(GObject,
	['GearXMLKeys',function(){return this.GearXMLKeys={
			"gearDisplay":0,
			"gearXY":1,
			"gearSize":2,
			"gearLook":3,
			"gearColor":4,
			"gearAni":5,
			"gearText":6,
			"gearIcon":7
	};},'sGlobalDragStart',function(){return this.sGlobalDragStart=new Point();},'sGlobalRect',function(){return this.sGlobalRect=new Rectangle();},'sHelperPoint',function(){return this.sHelperPoint=new Point();},'sDragHelperRect',function(){return this.sDragHelperRect=new Rectangle();}

	]);
	return GObject;
})()


//class fairygui.GearBase
var GearBase=(function(){
	function GearBase(owner){
		this._tween=false;
		this._easeType=0;
		this._tweenTime=NaN;
		this._delay=NaN;
		this._displayLockToken=NaN;
		this._owner=null;
		this._controller=null;
		this._owner=owner;
		this._easeType=5;
		this._tweenTime=0.3;
		this._delay=0;
	}

	__class(GearBase,'fairygui.GearBase');
	var __proto=GearBase.prototype;
	__proto.setup=function(xml){
		this._controller=this._owner.parent.getController(xml.getAttribute("controller"));
		if(this._controller==null)
			return;
		this.init();
		var str;
		str=xml.getAttribute("tween");
		if (str)
			this._tween=true;
		str=xml.getAttribute("ease");
		if (str)
			this._easeType=EaseType.parseEaseType(str);
		str=xml.getAttribute("duration");
		if (str)
			this._tweenTime=parseFloat(str);
		str=xml.getAttribute("delay");
		if (str)
			this._delay=parseFloat(str);
		if((this instanceof fairygui.GearDisplay )){
			str=xml.getAttribute("pages");
			if(str){
				var arr=str.split(",");
				(this).pages=arr;
			}
		}
		else{
			var pages;
			var values;
			str=xml.getAttribute("pages");
			if(str)
				pages=str.split(",");
			if(pages){
				str=xml.getAttribute("values");
				if(str!=null)
					values=str.split("|");
				else
				values=[];
				for(var i=0;i<pages.length;i++){
					str=values[i];
					if(str==null)
						str="";
					this.addStatus(pages[i],str);
				}
			}
			str=xml.getAttribute("default");
			if(str)
				this.addStatus(null,str);
		}
	}

	__proto.updateFromRelations=function(dx,dy){}
	__proto.addStatus=function(pageId,value){}
	__proto.init=function(){}
	__proto.apply=function(){}
	__proto.updateState=function(){}
	__getset(0,__proto,'controller',function(){
		return this._controller;
		},function(val){
		if (val !=this._controller){
			this._controller=val;
			if(this._controller)
				this.init();
		}
	});

	__getset(0,__proto,'tween',function(){
		return this._tween;
		},function(val){
		this._tween=val;
	});

	__getset(0,__proto,'delay',function(){
		return this._delay;
		},function(val){
		this._delay=val;
	});

	__getset(0,__proto,'tweenTime',function(){
		return this._tweenTime;
		},function(value){
		this._tweenTime=value;
	});

	__getset(0,__proto,'easeType',function(){
		return this._easeType;
		},function(value){
		this._easeType=value;
	});

	GearBase.disableAllTweenEffect=false;
	return GearBase;
})()


//class fairygui.GObjectPool
var GObjectPool=(function(){
	function GObjectPool(){
		this._pool=null;
		this._count=0;
		this._pool={};
	}

	__class(GObjectPool,'fairygui.GObjectPool');
	var __proto=GObjectPool.prototype;
	__proto.clear=function(){
		for (var i1 in this._pool){
			var arr=this._pool[i1];
			var cnt=arr.length;
			for (var i=0;i < cnt;i++)
			arr[i].dispose();
		}
		this._pool={};
		this._count=0;
	}

	__proto.getObject=function(url){
		url=UIPackage.normalizeURL(url);
		if(url==null)
			return null;
		var arr=this._pool[url];
		if (arr !=null && arr.length>0){
			this._count--;
			return arr.shift();
		};
		var child=UIPackage.createObjectFromURL(url);
		return child;
	}

	__proto.returnObject=function(obj){
		var url=obj.resourceURL;
		if (!url)
			return;
		var arr=this._pool[url];
		if (arr==null){
			arr=[];
			this._pool[url]=arr;
		}
		this._count++;
		arr.push(obj);
	}

	__getset(0,__proto,'count',function(){
		return this._count;
	});

	return GObjectPool;
})()


//class fairygui.GroupLayoutType
var GroupLayoutType=(function(){
	function GroupLayoutType(){}
	__class(GroupLayoutType,'fairygui.GroupLayoutType');
	GroupLayoutType.parse=function(value){
		switch (value){
			case "none":
				return 0;
			case "hz":
				return 1;
			case "vt":
				return 2;
			default :
				return 0;
			}
	}

	GroupLayoutType.None=0;
	GroupLayoutType.Horizontal=1;
	GroupLayoutType.Vertical=2;
	return GroupLayoutType;
})()


//class fairygui.ListLayoutType
var ListLayoutType=(function(){
	function ListLayoutType(){}
	__class(ListLayoutType,'fairygui.ListLayoutType');
	ListLayoutType.parse=function(value){
		switch (value){
			case "column":
				return 0;
			case "row":
				return 1;
			case "flow_hz":
				return 2;
			case "flow_vt":
				return 3;
			case "pagination":
				return 4;
			default :
				return 0;
			}
	}

	ListLayoutType.SingleColumn=0;
	ListLayoutType.SingleRow=1;
	ListLayoutType.FlowHorizontal=2;
	ListLayoutType.FlowVertical=3;
	ListLayoutType.Pagination=4;
	return ListLayoutType;
})()


//class fairygui.ListSelectionMode
var ListSelectionMode=(function(){
	function ListSelectionMode(){}
	__class(ListSelectionMode,'fairygui.ListSelectionMode');
	ListSelectionMode.parse=function(value){
		switch (value){
			case "single":
				return 0;
			case "multiple":
				return 1;
			case "multipleSingleClick":
				return 2;
			case "none":
				return 3;
			default :
				return 0;
			}
	}

	ListSelectionMode.Single=0;
	ListSelectionMode.Multiple=1;
	ListSelectionMode.Multiple_SingleClick=2;
	ListSelectionMode.None=3;
	return ListSelectionMode;
})()


//class fairygui.LoaderFillType
var LoaderFillType=(function(){
	function LoaderFillType(){}
	__class(LoaderFillType,'fairygui.LoaderFillType');
	LoaderFillType.parse=function(value){
		switch (value){
			case "none":
				return 0;
			case "scale":
				return 1;
			case "scaleMatchHeight":
				return 2;
			case "scaleMatchWidth":
				return 3;
			case "scaleFree":
				return 4;
			case "scaleNoBorder":
				return 5;
			default :
				return 0;
			}
	}

	LoaderFillType.None=0;
	LoaderFillType.Scale=1;
	LoaderFillType.ScaleMatchHeight=2;
	LoaderFillType.ScaleMatchWidth=3;
	LoaderFillType.ScaleFree=4;
	LoaderFillType.ScaleNoBorder=5;
	return LoaderFillType;
})()


//class fairygui.Margin
var Margin=(function(){
	function Margin(){
		this.left=0;
		this.right=0;
		this.top=0;
		this.bottom=0;
	}

	__class(Margin,'fairygui.Margin');
	var __proto=Margin.prototype;
	__proto.parse=function(str){
		if (!str){
			this.left=0;
			this.right=0;
			this.top=0;
			this.bottom=0;
			return;
		};
		var arr=str.split(",");
		if (arr.length==1){
			var k=parseInt(arr[0]);
			this.top=k;
			this.bottom=k;
			this.left=k;
			this.right=k;
		}
		else {
			this.top=parseInt(arr[0]);
			this.bottom=parseInt(arr[1]);
			this.left=parseInt(arr[2]);
			this.right=parseInt(arr[3]);
		}
	}

	__proto.copy=function(source){
		this.top=source.top;
		this.bottom=source.bottom;
		this.left=source.left;
		this.right=source.right;
	}

	return Margin;
})()


//class fairygui.OverflowType
var OverflowType=(function(){
	function OverflowType(){}
	__class(OverflowType,'fairygui.OverflowType');
	OverflowType.parse=function(value){
		switch (value){
			case "visible":
				return 0;
			case "hidden":
				return 1;
			case "scroll":
				return 2;
			case "scale":
				return 3;
			case "scaleFree":
				return 4;
			default :
				return 0;
			}
	}

	OverflowType.Visible=0;
	OverflowType.Hidden=1;
	OverflowType.Scroll=2;
	OverflowType.Scale=3;
	OverflowType.ScaleFree=4;
	return OverflowType;
})()


//class fairygui.PackageItem
var PackageItem=(function(){
	function PackageItem(){
		this.owner=null;
		this.type=0;
		this.id=null;
		this.name=null;
		this.width=0;
		this.height=0;
		this.file=null;
		this.decoded=false;
		//image
		this.scale9Grid=null;
		this.scaleByTile=false;
		this.tileGridIndice=0;
		this.smoothing=false;
		this.texture=null;
		//movieclip
		this.interval=0;
		this.repeatDelay=0;
		this.swing=false;
		this.frames=null;
		//componenet
		this.componentData=null;
		this.displayList=null;
		this.extensionType=null;
		//sound
		this.sound=null;
		//font
		this.bitmapFont=null;
	}

	__class(PackageItem,'fairygui.PackageItem');
	var __proto=PackageItem.prototype;
	__proto.load=function(){
		return this.owner.getItemAsset(this);
	}

	__proto.toString=function(){
		return this.name;
	}

	return PackageItem;
})()


//class fairygui.PackageItemType
var PackageItemType=(function(){
	function PackageItemType(){}
	__class(PackageItemType,'fairygui.PackageItemType');
	PackageItemType.parse=function(value){
		switch(value){
			case "image":
				return 0;
			case "movieclip":
				return 2;
			case "sound":
				return 3;
			case "component":
				return 4;
			case "swf":
				return 1;
			case "font":
				return 6;
			case "atlas":
				return 7;
			}
		return 0;
	}

	PackageItemType.Image=0;
	PackageItemType.Swf=1;
	PackageItemType.MovieClip=2;
	PackageItemType.Sound=3;
	PackageItemType.Component=4;
	PackageItemType.Misc=5;
	PackageItemType.Font=6;
	PackageItemType.Atlas=7;
	return PackageItemType;
})()


//class fairygui.PageOption
var PageOption=(function(){
	function PageOption(){
		this._controller=null;
		this._id=null;
	}

	__class(PageOption,'fairygui.PageOption');
	var __proto=PageOption.prototype;
	__proto.clear=function(){
		this._id=null;
	}

	__getset(0,__proto,'controller',null,function(val){
		this._controller=val;
	});

	__getset(0,__proto,'index',function(){
		if (this._id)
			return this._controller.getPageIndexById(this._id);
		else
		return-1;
		},function(pageIndex){
		this._id=this._controller.getPageId(pageIndex);
	});

	__getset(0,__proto,'name',function(){
		if (this._id)
			return this._controller.getPageNameById(this._id);
		else
		return null;
		},function(pageName){
		this._id=this._controller.getPageIdByName(pageName);
	});

	__getset(0,__proto,'id',function(){
		return this._id;
		},function(id){
		this._id=id;
	});

	return PageOption;
})()


//class fairygui.PopupMenu
var PopupMenu=(function(){
	function PopupMenu(resourceURL){
		this._contentPane=null;
		this._list=null;
		if(!resourceURL){
			resourceURL=UIConfig$1.popupMenu;
			if(!resourceURL)
				throw "UIConfig.popupMenu not defined";
		}
		this._contentPane=UIPackage.createObjectFromURL(resourceURL).asCom;
		this._contentPane.on("display",this,this.__addedToStage);
		this._list=(this._contentPane.getChild("list"));
		this._list.removeChildrenToPool();
		this._list.addRelation(this._contentPane,14);
		this._list.removeRelation(this._contentPane,15);
		this._contentPane.addRelation(this._list,15);
		this._list.on("fui_click_item",this,this.__clickItem);
	}

	__class(PopupMenu,'fairygui.PopupMenu');
	var __proto=PopupMenu.prototype;
	__proto.dispose=function(){
		this._contentPane.dispose();
	}

	__proto.addItem=function(caption,handler){
		var item=this._list.addItemFromPool().asButton;
		item.title=caption;
		item.data=handler;
		item.grayed=false;
		var c=item.getController("checked");
		if(c !=null)
			c.selectedIndex=0;
		return item;
	}

	__proto.addItemAt=function(caption,index,handler){
		var item=this._list.getFromPool().asButton;
		this._list.addChildAt(item,index);
		item.title=caption;
		item.data=handler;
		item.grayed=false;
		var c=item.getController("checked");
		if(c !=null)
			c.selectedIndex=0;
		return item;
	}

	__proto.addSeperator=function(){
		if(UIConfig$1.popupMenu_seperator==null)
			throw "UIConfig.popupMenu_seperator not defined";
		this.list.addItemFromPool(UIConfig$1.popupMenu_seperator);
	}

	__proto.getItemName=function(index){
		var item=this._list.getChildAt(index);
		return item.name;
	}

	__proto.setItemText=function(name,caption){
		var item=this._list.getChild(name).asButton;
		item.title=caption;
	}

	__proto.setItemVisible=function(name,visible){
		var item=this._list.getChild(name).asButton;
		if(item.visible !=visible){
			item.visible=visible;
			this._list.setBoundsChangedFlag();
		}
	}

	__proto.setItemGrayed=function(name,grayed){
		var item=this._list.getChild(name).asButton;
		item.grayed=grayed;
	}

	__proto.setItemCheckable=function(name,checkable){
		var item=this._list.getChild(name).asButton;
		var c=item.getController("checked");
		if(c !=null){
			if(checkable){
				if(c.selectedIndex==0)
					c.selectedIndex=1;
			}
			else
			c.selectedIndex=0;
		}
	}

	__proto.setItemChecked=function(name,checked){
		var item=this._list.getChild(name).asButton;
		var c=item.getController("checked");
		if(c !=null)
			c.selectedIndex=checked?2:1;
	}

	__proto.isItemChecked=function(name){
		var item=this._list.getChild(name).asButton;
		var c=item.getController("checked");
		if(c !=null)
			return c.selectedIndex==2;
		else
		return false;
	}

	__proto.removeItem=function(name){
		var item=this._list.getChild(name);
		if(item !=null){
			var index=this._list.getChildIndex(item);
			this._list.removeChildToPoolAt(index);
			return true;
		}
		else
		return false;
	}

	__proto.clearItems=function(){
		this._list.removeChildrenToPool();
	}

	__proto.show=function(target,downward){
		var r=target !=null?target.root:GRoot.inst;
		r.showPopup(this.contentPane,((target instanceof fairygui.GRoot ))?null:target,downward);
	}

	__proto.__clickItem=function(itemObject){
		Laya.timer.once(100,this,this.__clickItem2,[itemObject]);
	}

	__proto.__clickItem2=function(itemObject){
		if(!((itemObject instanceof fairygui.GButton )))
			return;
		if(itemObject.grayed){
			this._list.selectedIndex=-1;
			return;
		};
		var c=itemObject.asCom.getController("checked");
		if(c !=null && c.selectedIndex !=0){
			if(c.selectedIndex==1)
				c.selectedIndex=2;
			else
			c.selectedIndex=1;
		};
		var r=(this._contentPane.parent);
		r.hidePopup(this.contentPane);
		if(itemObject.data !=null){
			(itemObject.data).run();
		}
	}

	__proto.__addedToStage=function(){
		this._list.selectedIndex=-1;
		this._list.resizeToFit(100000,10);
	}

	__getset(0,__proto,'itemCount',function(){
		return this._list.numChildren;
	});

	__getset(0,__proto,'contentPane',function(){
		return this._contentPane;
	});

	__getset(0,__proto,'list',function(){
		return this._list;
	});

	return PopupMenu;
})()


//class fairygui.ProgressTitleType
var ProgressTitleType=(function(){
	function ProgressTitleType(){}
	__class(ProgressTitleType,'fairygui.ProgressTitleType');
	ProgressTitleType.parse=function(value){
		switch (value){
			case "percent":
				return 0;
			case "valueAndmax":
				return 1;
			case "value":
				return 2;
			case "max":
				return 3;
			default :
				return 0;
			}
	}

	ProgressTitleType.Percent=0;
	ProgressTitleType.ValueAndMax=1;
	ProgressTitleType.Value=2;
	ProgressTitleType.Max=3;
	return ProgressTitleType;
})()


//class fairygui.RelationItem
var RelationItem=(function(){
	var RelationDef;
	function RelationItem(owner){
		this._owner=null;
		this._target=null;
		this._defs=null;
		this._targetX=NaN;
		this._targetY=NaN;
		this._targetWidth=NaN;
		this._targetHeight=NaN;
		this._owner=owner;
		this._defs=[];
	}

	__class(RelationItem,'fairygui.RelationItem');
	var __proto=RelationItem.prototype;
	__proto.add=function(relationType,usePercent){
		if (relationType==24){
			this.add(14,usePercent);
			this.add(15,usePercent);
			return;
		};
		var cnt=this._defs.length;
		for(var i=0;i<cnt;i++){
			if (this._defs[i].type==relationType)
				return;
		}
		this.internalAdd(relationType,usePercent);
	}

	__proto.internalAdd=function(relationType,usePercent){
		if (relationType==24){
			this.internalAdd(14,usePercent);
			this.internalAdd(15,usePercent);
			return;
		};
		var info=new RelationDef();
		info.percent=usePercent;
		info.type=relationType;
		info.axis=(relationType <=6 || relationType==14 || relationType >=16 && relationType <=19)? 0 :1;
		this._defs.push(info);
		if (usePercent || relationType==1 || relationType==3 || relationType==5
			|| relationType==8 || relationType==10 || relationType==12)
		this._owner.pixelSnapping=true;
	}

	__proto.remove=function(relationType){
		if (relationType==24){
			this.remove(14);
			this.remove(15);
			return;
		};
		var dc=this._defs.length;
		for (var k=0;k < dc;k++){
			if (this._defs[k].type==relationType){
				this._defs.splice(k,1);
				break ;
			}
		}
	}

	__proto.copyFrom=function(source){
		this.target=source.target;
		this._defs.length=0;
		var cnt=source._defs.length;
		for(var i=0;i<cnt;i++){
			var info=source._defs[i];
			var info2=new RelationDef();
			info2.copyFrom(info);
			this._defs.push(info2);
		}
	}

	__proto.dispose=function(){
		if (this._target !=null){
			this.releaseRefTarget(this._target);
			this._target=null;
		}
	}

	__proto.applyOnSelfResized=function(dWidth,dHeight,applyPivot){
		var cnt=this._defs.length;
		if(cnt==0)
			return;
		var ox=this._owner.x;
		var oy=this._owner.y;
		for (var i=0;i < cnt;i++){
			var info=this._defs[i];
			switch (info.type){
				case 3:
					this._owner.x-=(0.5-(applyPivot ? this._owner.pivotX :0))*dWidth;
					break ;
				case 5:
				case 4:
				case 6:
					this._owner.x-=(1-(applyPivot ? this._owner.pivotX :0))*dWidth;
					break ;
				case 10:
					this._owner.y-=(0.5-(applyPivot ? this._owner.pivotY :0))*dHeight;
					break ;
				case 12:
				case 11:
				case 13:
					this._owner.y-=(1-(applyPivot ? this._owner.pivotY :0))*dHeight;
					break ;
				}
		}
		if (ox!=this._owner.x || oy!=this._owner.y){
			ox=this._owner.x-ox;
			oy=this._owner.y-oy;
			this._owner.updateGearFromRelations(1,ox,oy);
			if (this._owner.parent !=null && this._owner.parent._transitions.length > 0){
				cnt=this._owner.parent._transitions.length;
				for(var j=0;j<cnt;j++){
					var trans=this._owner.parent._transitions[j];
					trans.updateFromRelations(this._owner.id,ox,oy);
				}
			}
		}
	}

	__proto.applyOnXYChanged=function(info,dx,dy){
		var tmp=NaN;
		switch (info.type){
			case 0:
			case 1:
			case 2:
			case 3:
			case 4:
			case 5:
			case 6:
				this._owner.x+=dx;
				break ;
			case 7:
			case 8:
			case 9:
			case 10:
			case 11:
			case 12:
			case 13:
				this._owner.y+=dy;
				break ;
			case 14:
			case 15:
				break ;
			case 16:
			case 17:
				tmp=this._owner.xMin;
				this._owner.width=this._owner._rawWidth-dx;
				this._owner.xMin=tmp+dx;
				break ;
			case 18:
			case 19:
				tmp=this._owner.xMin;
				this._owner.width=this._owner._rawWidth+dx;
				this._owner.xMin=tmp;
				break ;
			case 20:
			case 21:
				tmp=this._owner.yMin;
				this._owner.height=this._owner._rawHeight-dy;
				this._owner.yMin=tmp+dy;
				break ;
			case 22:
			case 23:
				tmp=this._owner.yMin;
				this._owner.height=this._owner._rawHeight+dy;
				this._owner.yMin=tmp;
				break ;
			}
	}

	__proto.applyOnSizeChanged=function(info){
		var pos=0,pivot=0,delta=0;
		var v=NaN,tmp=NaN;
		if (info.axis==0){
			if (this._target !=this._owner.parent){
				pos=this._target.x;
				if (this._target.pivotAsAnchor)
					pivot=this._target.pivotX;
			}
			if (info.percent){
				if (this._targetWidth !=0)
					delta=this._target._width / this._targetWidth;
			}
			else
			delta=this._target._width-this._targetWidth;
		}
		else{
			if (this._target !=this._owner.parent){
				pos=this._target.y;
				if (this._target.pivotAsAnchor)
					pivot=this._target.pivotY;
			}
			if (info.percent){
				if (this._targetHeight !=0)
					delta=this._target._height / this._targetHeight;
			}
			else
			delta=this._target._height-this._targetHeight;
		}
		switch (info.type){
			case 0:
				if (info.percent)
					this._owner.xMin=pos+(this._owner.xMin-pos)*delta;
				else if (pivot !=0)
				this._owner.x+=delta *(-pivot);
				break ;
			case 1:
				if (info.percent)
					this._owner.xMin=pos+(this._owner.xMin-pos)*delta;
				else
				this._owner.x+=delta *(0.5-pivot);
				break ;
			case 2:
				if (info.percent)
					this._owner.xMin=pos+(this._owner.xMin-pos)*delta;
				else
				this._owner.x+=delta *(1-pivot);
				break ;
			case 3:
				if (info.percent)
					this._owner.xMin=pos+(this._owner.xMin+this._owner._rawWidth *0.5-pos)*delta-this._owner._rawWidth *0.5;
				else
				this._owner.x+=delta *(0.5-pivot);
				break ;
			case 4:
				if (info.percent)
					this._owner.xMin=pos+(this._owner.xMin+this._owner._rawWidth-pos)*delta-this._owner._rawWidth;
				else if (pivot !=0)
				this._owner.x+=delta *(-pivot);
				break ;
			case 5:
				if (info.percent)
					this._owner.xMin=pos+(this._owner.xMin+this._owner._rawWidth-pos)*delta-this._owner._rawWidth;
				else
				this._owner.x+=delta *(0.5-pivot);
				break ;
			case 6:
				if (info.percent)
					this._owner.xMin=pos+(this._owner.xMin+this._owner._rawWidth-pos)*delta-this._owner._rawWidth;
				else
				this._owner.x+=delta *(1-pivot);
				break ;
			case 7:
				if (info.percent)
					this._owner.yMin=pos+(this._owner.yMin-pos)*delta;
				else if (pivot !=0)
				this._owner.y+=delta *(-pivot);
				break ;
			case 8:
				if (info.percent)
					this._owner.yMin=pos+(this._owner.yMin-pos)*delta;
				else
				this._owner.y+=delta *(0.5-pivot);
				break ;
			case 9:
				if (info.percent)
					this._owner.yMin=pos+(this._owner.yMin-pos)*delta;
				else
				this._owner.y+=delta *(1-pivot);
				break ;
			case 10:
				if (info.percent)
					this._owner.yMin=pos+(this._owner.yMin+this._owner._rawHeight *0.5-pos)*delta-this._owner._rawHeight *0.5;
				else
				this._owner.y+=delta *(0.5-pivot);
				break ;
			case 11:
				if (info.percent)
					this._owner.yMin=pos+(this._owner.yMin+this._owner._rawHeight-pos)*delta-this._owner._rawHeight;
				else if (pivot !=0)
				this._owner.y+=delta *(-pivot);
				break ;
			case 12:
				if (info.percent)
					this._owner.yMin=pos+(this._owner.yMin+this._owner._rawHeight-pos)*delta-this._owner._rawHeight;
				else
				this._owner.y+=delta *(0.5-pivot);
				break ;
			case 13:
				if (info.percent)
					this._owner.yMin=pos+(this._owner.yMin+this._owner._rawHeight-pos)*delta-this._owner._rawHeight;
				else
				this._owner.y+=delta *(1-pivot);
				break ;
			case 14:
				if (this._owner._underConstruct && this._owner==this._target.parent)
					v=this._owner.sourceWidth-this._target.initWidth;
				else
				v=this._owner._rawWidth-this._targetWidth;
				if (info.percent)
					v=v *delta;
				if (this._target==this._owner.parent){
					if (this._owner.pivotAsAnchor){
						tmp=this._owner.xMin;
						this._owner.setSize(this._target._width+v,this._owner._rawHeight,true);
						this._owner.xMin=tmp;
					}
					else
					this._owner.setSize(this._target._width+v,this._owner._rawHeight,true);
				}
				else
				this._owner.width=this._target._width+v;
				break ;
			case 15:
				if (this._owner._underConstruct && this._owner==this._target.parent)
					v=this._owner.sourceHeight-this._target.initHeight;
				else
				v=this._owner._rawHeight-this._targetHeight;
				if (info.percent)
					v=v *delta;
				if (this._target==this._owner.parent){
					if (this._owner.pivotAsAnchor){
						tmp=this._owner.yMin;
						this._owner.setSize(this._owner._rawWidth,this._target._height+v,true);
						this._owner.yMin=tmp;
					}
					else
					this._owner.setSize(this._owner._rawWidth,this._target._height+v,true);
				}
				else
				this._owner.height=this._target._height+v;
				break ;
			case 16:
				tmp=this._owner.xMin;
				if (info.percent)
					v=pos+(tmp-pos)*delta-tmp;
				else
				v=delta *(-pivot);
				this._owner.width=this._owner._rawWidth-v;
				this._owner.xMin=tmp+v;
				break ;
			case 17:
				tmp=this._owner.xMin;
				if (info.percent)
					v=pos+(tmp-pos)*delta-tmp;
				else
				v=delta *(1-pivot);
				this._owner.width=this._owner._rawWidth-v;
				this._owner.xMin=tmp+v;
				break ;
			case 18:
				tmp=this._owner.xMin;
				if (info.percent)
					v=pos+(tmp+this._owner._rawWidth-pos)*delta-(tmp+this._owner._rawWidth);
				else
				v=delta *(-pivot);
				this._owner.width=this._owner._rawWidth+v;
				this._owner.xMin=tmp;
				break ;
			case 19:
				tmp=this._owner.xMin;
				if (info.percent){
					if (this._owner==this._target.parent){
						if (this._owner._underConstruct)
							this._owner.width=pos+this._target._width-this._target._width *pivot+
						(this._owner.sourceWidth-pos-this._target.initWidth+this._target.initWidth *pivot)*delta;
						else
						this._owner.width=pos+(this._owner._rawWidth-pos)*delta;
					}
					else{
						v=pos+(tmp+this._owner._rawWidth-pos)*delta-(tmp+this._owner._rawWidth);
						this._owner.width=this._owner._rawWidth+v;
						this._owner.xMin=tmp;
					}
				}
				else{
					if (this._owner==this._target.parent){
						if (this._owner._underConstruct)
							this._owner.width=this._owner.sourceWidth+(this._target._width-this._target.initWidth)*(1-pivot);
						else
						this._owner.width=this._owner._rawWidth+delta *(1-pivot);
					}
					else{
						v=delta *(1-pivot);
						this._owner.width=this._owner._rawWidth+v;
						this._owner.xMin=tmp;
					}
				}
				break ;
			case 20:
				tmp=this._owner.yMin;
				if (info.percent)
					v=pos+(tmp-pos)*delta-tmp;
				else
				v=delta *(-pivot);
				this._owner.height=this._owner._rawHeight-v;
				this._owner.yMin=tmp+v;
				break ;
			case 21:
				tmp=this._owner.yMin;
				if (info.percent)
					v=pos+(tmp-pos)*delta-tmp;
				else
				v=delta *(1-pivot);
				this._owner.height=this._owner._rawHeight-v;
				this._owner.yMin=tmp+v;
				break ;
			case 22:
				tmp=this._owner.yMin;
				if (info.percent)
					v=pos+(tmp+this._owner._rawHeight-pos)*delta-(tmp+this._owner._rawHeight);
				else
				v=delta *(-pivot);
				this._owner.height=this._owner._rawHeight+v;
				this._owner.yMin=tmp;
				break ;
			case 23:
				tmp=this._owner.yMin;
				if (info.percent){
					if (this._owner==this._target.parent){
						if (this._owner._underConstruct)
							this._owner.height=pos+this._target._height-this._target._height *pivot+
						(this._owner.sourceHeight-pos-this._target.initHeight+this._target.initHeight *pivot)*delta;
						else
						this._owner.height=pos+(this._owner._rawHeight-pos)*delta;
					}
					else{
						v=pos+(tmp+this._owner._rawHeight-pos)*delta-(tmp+this._owner._rawHeight);
						this._owner.height=this._owner._rawHeight+v;
						this._owner.yMin=tmp;
					}
				}
				else{
					if (this._owner==this._target.parent){
						if (this._owner._underConstruct)
							this._owner.height=this._owner.sourceHeight+(this._target._height-this._target.initHeight)*(1-pivot);
						else
						this._owner.height=this._owner._rawHeight+delta *(1-pivot);
					}
					else{
						v=delta *(1-pivot);
						this._owner.height=this._owner._rawHeight+v;
						this._owner.yMin=tmp;
					}
				}
				break ;
			}
	}

	__proto.addRefTarget=function(target){
		if (target !=this._owner.parent)
			target.on("fui_xy_changed",this,this.__targetXYChanged);
		target.on("fui_size_changed",this,this.__targetSizeChanged);
		target.on("fui_size_delay_change",this,this.__targetSizeWillChange);
		this._targetX=this._target.x;
		this._targetY=this._target.y;
		this._targetWidth=this._target._width;
		this._targetHeight=this._target._height;
	}

	__proto.releaseRefTarget=function(target){
		target.off("fui_xy_changed",this,this.__targetXYChanged);
		target.off("fui_size_changed",this,this.__targetSizeChanged);
		target.off("fui_size_delay_change",this,this.__targetSizeWillChange);
	}

	__proto.__targetXYChanged=function(target){
		if (this._owner.relations.handling!=null || this._owner.group!=null && this._owner.group._updating){
			this._targetX=this._target.x;
			this._targetY=this._target.y;
			return;
		}
		this._owner.relations.handling=target;
		var ox=this._owner.x;
		var oy=this._owner.y;
		var dx=this._target.x-this._targetX;
		var dy=this._target.y-this._targetY;
		var cnt=this._defs.length;
		for(var i=0;i<cnt;i++){
			this.applyOnXYChanged(this._defs[i],dx,dy);
		}
		this._targetX=this._target.x;
		this._targetY=this._target.y;
		if (ox!=this._owner.x || oy!=this._owner.y){
			ox=this._owner.x-ox;
			oy=this._owner.y-oy;
			this._owner.updateGearFromRelations(1,ox,oy);
			if (this._owner.parent !=null && this._owner.parent._transitions.length > 0){
				cnt=this._owner.parent._transitions.length;
				for(var j=0;j<cnt;j++){
					var trans=this._owner.parent._transitions[j];
					trans.updateFromRelations(this._owner.id,ox,oy);
				}
			}
		}
		this._owner.relations.handling=null;
	}

	__proto.__targetSizeChanged=function(target){
		if (this._owner.relations.handling!=null){
			this._targetWidth=this._target._width;
			this._targetHeight=this._target._height;
			return;
		}
		this._owner.relations.handling=target;
		var ox=this._owner.x;
		var oy=this._owner.y;
		var ow=this._owner._rawWidth;
		var oh=this._owner._rawHeight;
		var cnt=this._defs.length;
		for(var i=0;i<cnt;i++){
			this.applyOnSizeChanged(this._defs[i]);
		}
		this._targetWidth=this._target._width;
		this._targetHeight=this._target._height;
		if (ox!=this._owner.x || oy!=this._owner.y){
			ox=this._owner.x-ox;
			oy=this._owner.y-oy;
			this._owner.updateGearFromRelations(1,ox,oy);
			if (this._owner.parent !=null && this._owner.parent._transitions.length > 0){
				cnt=this._owner.parent._transitions.length;
				for(var j=0;j<cnt;j++){
					var trans=this._owner.parent._transitions[j];
					trans.updateFromRelations(this._owner.id,ox,oy);
				}
			}
		}
		if (ow!=this._owner._rawWidth || oh!=this._owner._rawHeight){
			ow=this._owner._rawWidth-ow;
			oh=this._owner._rawHeight-oh;
			this._owner.updateGearFromRelations(2,ow,oh);
		}
		this._owner.relations.handling=null;
	}

	__proto.__targetSizeWillChange=function(target){
		this._owner.relations.sizeDirty=true;
	}

	__getset(0,__proto,'owner',function(){
		return this._owner;
	});

	__getset(0,__proto,'target',function(){
		return this._target;
		},function(value){
		if(this._target!=value){
			if(this._target)
				this.releaseRefTarget(this._target);
			this._target=value;
			if(this._target)
				this.addRefTarget(this._target);
		}
	});

	__getset(0,__proto,'isEmpty',function(){
		return this._defs.length==0;
	});

	RelationItem.__init$=function(){
		//class RelationDef
		RelationDef=(function(){
			function RelationDef(){
				this.percent=false;
				this.type=0;
				this.axis=0;
			}
			__class(RelationDef,'');
			var __proto=RelationDef.prototype;
			__proto.copyFrom=function(source){
				this.percent=source.percent;
				this.type=source.type;
				this.axis=source.axis;
			}
			return RelationDef;
		})()
	}

	return RelationItem;
})()


//class fairygui.Relations
var Relations=(function(){
	function Relations(owner){
		this._owner=null;
		this._items=null;
		this.handling=null;
		this.sizeDirty=false;
		this._owner=owner;
		this._items=[];
	}

	__class(Relations,'fairygui.Relations');
	var __proto=Relations.prototype;
	__proto.add=function(target,relationType,usePercent){
		(usePercent===void 0)&& (usePercent=false);
		var length=this._items.length;
		for (var i=0;i < length;i++){
			var item=this._items[i];
			if (item.target==target){
				item.add(relationType,usePercent);
				return;
			}
		};
		var newItem=new RelationItem(this._owner);
		newItem.target=target;
		newItem.add(relationType,usePercent);
		this._items.push(newItem);
	}

	__proto.addItems=function(target,sidePairs){
		var arr=sidePairs.split(",");
		var s;
		var usePercent=false;
		var i=NaN;
		var newItem=new RelationItem(this._owner);
		newItem.target=target;
		for (i=0;i < 2;i++){
			s=arr[i];
			if (!s)
				continue ;
			if (s.charAt(s.length-1)=="%"){
				s=s.substr(0,s.length-1);
				usePercent=true;
			}
			else
			usePercent=false;
			var j=s.indexOf("-");
			if (j==-1)
				s=s+"-"+s;
			var t=fairygui.Relations.RELATION_NAMES.indexOf(s);
			if (t==-1)
				throw "invalid relation type";
			newItem.internalAdd(t,usePercent);
		}
		this._items.push(newItem);
	}

	__proto.remove=function(target,relationType){
		(relationType===void 0)&& (relationType=0);
		var cnt=this._items.length;
		var i=0;
		while (i < cnt){
			var item=this._items[i];
			if (item.target==target){
				item.remove(relationType);
				if (item.isEmpty){
					item.dispose();
					this._items.splice(i,1);
					cnt--;
				}
				else
				i++;
			}
			else
			i++;
		}
	}

	__proto.contains=function(target){
		var length=this._items.length;
		for (var i=0;i < length;i++){
			var item=this._items[i];
			if (item.target==target)
				return true;
		}
		return false;
	}

	__proto.clearFor=function(target){
		var cnt=this._items.length;
		var i=0;
		while (i < cnt){
			var item=this._items[i];
			if (item.target==target){
				item.dispose();
				this._items.splice(i,1);
				cnt--;
			}
			else
			i++;
		}
	}

	__proto.clearAll=function(){
		var length=this._items.length;
		for (var i=0;i < length;i++){
			var item=this._items[i];
			item.dispose();
		}
		this._items.length=0;
	}

	__proto.copyFrom=function(source){
		this.clearAll();
		var arr=source._items;
		var length=arr.length;
		for (var i=0;i < length;i++){
			var ri=arr[i];
			var item=new RelationItem(this._owner);
			item.copyFrom(ri);
			this._items.push(item);
		}
	}

	__proto.dispose=function(){
		this.clearAll();
	}

	__proto.onOwnerSizeChanged=function(dWidth,dHeight,applyPivot){
		if (this._items.length==0)
			return;
		var length=this._items.length;
		for (var i=0;i < length;i++){
			var item=this._items[i];
			item.applyOnSelfResized(dWidth,dHeight,applyPivot);
		}
	}

	__proto.ensureRelationsSizeCorrect=function(){
		if (this._items.length==0)
			return;
		this.sizeDirty=false;
		var length=this._items.length;
		for (var i=0;i < length;i++){
			var item=this._items[i];
			item.target.ensureSizeCorrect();
		}
	}

	__proto.setup=function(xml){
		var col=xml.childNodes;
		var length=col.length;
		var targetId;
		var target;
		for (var i=0;i < length;i++){
			var cxml=col[i];
			if(cxml.nodeName!="relation")
				continue ;
			targetId=cxml.getAttribute("target");
			if (this._owner.parent){
				if (targetId)
					target=this._owner.parent.getChildById(targetId);
				else
				target=this._owner.parent;
			}
			else {
				target=(this._owner).getChildById(targetId);
			}
			if (target)
				this.addItems(target,cxml.getAttribute("sidePair"));
		}
	}

	__getset(0,__proto,'empty',function(){
		return this._items.length==0;
	});

	__static(Relations,
	['RELATION_NAMES',function(){return this.RELATION_NAMES=
		[
		"left-left",
		"left-center",
		"left-right",
		"center-center",
		"right-left",
		"right-center",
		"right-right",
		"top-top",
		"top-middle",
		"top-bottom",
		"middle-middle",
		"bottom-top",
		"bottom-middle",
		"bottom-bottom",
		"width-width",
		"height-height",
		"leftext-left",
		"leftext-right",
		"rightext-left",
		"rightext-right",
		"topext-top",
		"topext-bottom",
		"bottomext-top",
		"bottomext-bottom"];}
	]);
	return Relations;
})()


//class fairygui.RelationType
var RelationType=(function(){
	function RelationType(){}
	__class(RelationType,'fairygui.RelationType');
	RelationType.Left_Left=0;
	RelationType.Left_Center=1;
	RelationType.Left_Right=2;
	RelationType.Center_Center=3;
	RelationType.Right_Left=4;
	RelationType.Right_Center=5;
	RelationType.Right_Right=6;
	RelationType.Top_Top=7;
	RelationType.Top_Middle=8;
	RelationType.Top_Bottom=9;
	RelationType.Middle_Middle=10;
	RelationType.Bottom_Top=11;
	RelationType.Bottom_Middle=12;
	RelationType.Bottom_Bottom=13;
	RelationType.Width=14;
	RelationType.Height=15;
	RelationType.LeftExt_Left=16;
	RelationType.LeftExt_Right=17;
	RelationType.RightExt_Left=18;
	RelationType.RightExt_Right=19;
	RelationType.TopExt_Top=20;
	RelationType.TopExt_Bottom=21;
	RelationType.BottomExt_Top=22;
	RelationType.BottomExt_Bottom=23;
	RelationType.Size=24;
	return RelationType;
})()


//class fairygui.ScrollBarDisplayType
var ScrollBarDisplayType=(function(){
	function ScrollBarDisplayType(){}
	__class(ScrollBarDisplayType,'fairygui.ScrollBarDisplayType');
	ScrollBarDisplayType.parse=function(value){
		switch (value){
			case "default":
				return 0;
			case "visible":
				return 1;
			case "auto":
				return 2;
			case "hidden":
				return 3;
			default :
				return 0;
			}
	}

	ScrollBarDisplayType.Default=0;
	ScrollBarDisplayType.Visible=1;
	ScrollBarDisplayType.Auto=2;
	ScrollBarDisplayType.Hidden=3;
	return ScrollBarDisplayType;
})()


//class fairygui.ScrollPane
var ScrollPane=(function(){
	function ScrollPane(owner,scrollType,scrollBarMargin,scrollBarDisplay,flags,vtScrollBarRes,hzScrollBarRes,headerRes,footerRes){
		this._owner=null;
		this._container=null;
		this._maskContainer=null;
		this._alignContainer=null;
		this._scrollType=0;
		this._scrollStep=0;
		this._mouseWheelStep=0;
		this._decelerationRate=NaN;
		this._scrollBarMargin=null;
		this._bouncebackEffect=false;
		this._touchEffect=false;
		this._scrollBarDisplayAuto=false;
		this._vScrollNone=false;
		this._hScrollNone=false;
		this._needRefresh=false;
		this._refreshBarAxis=null;
		this._displayOnLeft=false;
		this._snapToItem=false;
		this._displayInDemand=false;
		this._mouseWheelEnabled=false;
		this._pageMode=false;
		this._inertiaDisabled=false;
		this._xPos=NaN;
		this._yPos=NaN;
		this._viewSize=null;
		this._contentSize=null;
		this._overlapSize=null;
		this._pageSize=null;
		this._containerPos=null;
		this._beginTouchPos=null;
		this._lastTouchPos=null;
		this._lastTouchGlobalPos=null;
		this._velocity=null;
		this._velocityScale=NaN;
		this._lastMoveTime=NaN;
		this._isHoldAreaDone=false;
		this._aniFlag=0;
		this._scrollBarVisible=false;
		this._loop=0;
		this._headerLockedSize=0;
		this._footerLockedSize=0;
		this._refreshEventDispatching=false;
		this._tweening=0;
		this._tweenTime=null;
		this._tweenDuration=null;
		this._tweenStart=null;
		this._tweenChange=null;
		this._pageController=null;
		this._hzScrollBar=null;
		this._vtScrollBar=null;
		this._header=null;
		this._footer=null;
		this.isDragged=false;
		;
		this._owner=owner;
		this._maskContainer=new Sprite();
		this._owner.displayObject.addChild(this._maskContainer);
		this._container=this._owner._container;
		this._container.pos(0,0);
		this._maskContainer.addChild(this._container);
		this._scrollBarMargin=scrollBarMargin;
		this._scrollType=scrollType;
		this._scrollStep=UIConfig$1.defaultScrollStep;
		this._mouseWheelStep=this._scrollStep*2;
		this._decelerationRate=UIConfig$1.defaultScrollDecelerationRate;
		this._displayOnLeft=(flags & 1)!=0;
		this._snapToItem=(flags & 2)!=0;
		this._displayInDemand=(flags & 4)!=0;
		this._pageMode=(flags & 8)!=0;
		if(flags & 16)
			this._touchEffect=true;
		else if(flags & 32)
		this._touchEffect=false;
		else
		this._touchEffect=UIConfig$1.defaultScrollTouchEffect;
		if(flags & 64)
			this._bouncebackEffect=true;
		else if(flags & 128)
		this._bouncebackEffect=false;
		else
		this._bouncebackEffect=UIConfig$1.defaultScrollBounceEffect;
		this._inertiaDisabled=(flags & 256)!=0;
		if((flags & 512)==0)
			this._maskContainer.scrollRect=new Rectangle();
		this._scrollBarVisible=true;
		this._mouseWheelEnabled=true;
		this._xPos=0;
		this._yPos=0;
		this._aniFlag=0;
		this._footerLockedSize=0;
		this._headerLockedSize=0;
		if(scrollBarDisplay==0)
			scrollBarDisplay=UIConfig$1.defaultScrollBarDisplay;
		this._viewSize=new Point();
		this._contentSize=new Point();
		this._pageSize=new Point(1,1);
		this._overlapSize=new Point();
		this._tweenTime=new Point();
		this._tweenStart=new Point();
		this._tweenDuration=new Point();
		this._tweenChange=new Point();
		this._velocity=new Point();
		this._containerPos=new Point();
		this._beginTouchPos=new Point();
		this._lastTouchPos=new Point();
		this._lastTouchGlobalPos=new Point();
		if(scrollBarDisplay !=3){
			if(this._scrollType==2 || this._scrollType==1){
				var res=vtScrollBarRes ? vtScrollBarRes :UIConfig$1.verticalScrollBar;
				if(res){
					this._vtScrollBar=(UIPackage.createObjectFromURL(res));
					if(!this._vtScrollBar)
						throw "cannot create scrollbar from "+res;
					this._vtScrollBar.setScrollPane(this,true);
					this._owner.displayObject.addChild(this._vtScrollBar.displayObject);
				}
			}
			if(this._scrollType==2 || this._scrollType==0){
				res=hzScrollBarRes ? hzScrollBarRes :UIConfig$1.horizontalScrollBar;
				if(res){
					this._hzScrollBar=(UIPackage.createObjectFromURL(res));
					if(!this._hzScrollBar)
						throw "cannot create scrollbar from "+res;
					this._hzScrollBar.setScrollPane(this,false);
					this._owner.displayObject.addChild(this._hzScrollBar.displayObject);
				}
			}
			this._scrollBarDisplayAuto=scrollBarDisplay==2;
			if(this._scrollBarDisplayAuto){
				this._scrollBarVisible=false;
				if(this._vtScrollBar)
					this._vtScrollBar.displayObject.visible=false;
				if(this._hzScrollBar)
					this._hzScrollBar.displayObject.visible=false;
			}
		}
		else
		this._mouseWheelEnabled=false;
		if (headerRes){
			this._header=UIPackage.createObjectFromURL(headerRes);
			if (this._header==null)
				throw new Error("FairyGUI: cannot create scrollPane header from "+headerRes);
		}
		if (footerRes){
			this._footer=UIPackage.createObjectFromURL(footerRes);
			if (this._footer==null)
				throw new Error("FairyGUI: cannot create scrollPane footer from "+footerRes);
		}
		if (this._header !=null || this._footer !=null)
			this._refreshBarAxis=(this._scrollType==2 || this._scrollType==1)? "y" :"x";
		this.setSize(owner.width,owner.height);
		this._owner.on("mousedown",this,this.__mouseDown);
		this._owner.on("mousewheel",this,this.__mouseWheel);
	}

	__class(ScrollPane,'fairygui.ScrollPane');
	var __proto=ScrollPane.prototype;
	__proto.dispose=function(){
		if (this._tweening !=0)
			Laya.timer.clear(this,this.tweenUpdate);
		this._pageController=null;
		if (this._hzScrollBar !=null)
			this._hzScrollBar.dispose();
		if (this._vtScrollBar !=null)
			this._vtScrollBar.dispose();
		if (this._header !=null)
			this._header.dispose();
		if (this._footer !=null)
			this._footer.dispose();
	}

	__proto.setPercX=function(value,ani){
		(ani===void 0)&& (ani=false);
		this._owner.ensureBoundsCorrect();
		this.setPosX(this._overlapSize.x *ToolSet.clamp01(value),ani);
	}

	__proto.setPercY=function(value,ani){
		(ani===void 0)&& (ani=false);
		this._owner.ensureBoundsCorrect();
		this.setPosY(this._overlapSize.y *ToolSet.clamp01(value),ani);
	}

	__proto.setPosX=function(value,ani){
		(ani===void 0)&& (ani=false);
		this._owner.ensureBoundsCorrect();
		if (this._loop==1)
			value=this.loopCheckingNewPos(value,"x");
		value=ToolSet.clamp(value,0,this._overlapSize.x);
		if (value !=this._xPos){
			this._xPos=value;
			this.posChanged(ani);
		}
	}

	__proto.setPosY=function(value,ani){
		(ani===void 0)&& (ani=false);
		this._owner.ensureBoundsCorrect();
		if (this._loop==1)
			value=this.loopCheckingNewPos(value,"y");
		value=ToolSet.clamp(value,0,this._overlapSize.y);
		if (value !=this._yPos){
			this._yPos=value;
			this.posChanged(ani);
		}
	}

	__proto.setCurrentPageX=function(value,ani){
		if (this._pageMode && this._overlapSize.x>0)
			this.setPosX(value *this._pageSize.x,ani);
	}

	__proto.setCurrentPageY=function(value,ani){
		if (this._pageMode && this._overlapSize.y>0)
			this.setPosY(value *this._pageSize.y,ani);
	}

	__proto.scrollTop=function(ani){
		(ani===void 0)&& (ani=false);
		this.setPercY(0,ani);
	}

	__proto.scrollBottom=function(ani){
		(ani===void 0)&& (ani=false);
		this.setPercY(1,ani);
	}

	__proto.scrollUp=function(ratio,ani){
		(ratio===void 0)&& (ratio=1);
		(ani===void 0)&& (ani=false);
		if (this._pageMode)
			this.setPosY(this._yPos-this._pageSize.y *ratio,ani);
		else
		this.setPosY(this._yPos-this._scrollStep *ratio,ani);;
	}

	__proto.scrollDown=function(ratio,ani){
		(ratio===void 0)&& (ratio=1);
		(ani===void 0)&& (ani=false);
		if (this._pageMode)
			this.setPosY(this._yPos+this._pageSize.y *ratio,ani);
		else
		this.setPosY(this._yPos+this._scrollStep *ratio,ani);
	}

	__proto.scrollLeft=function(ratio,ani){
		(ratio===void 0)&& (ratio=1);
		(ani===void 0)&& (ani=false);
		if (this._pageMode)
			this.setPosX(this._xPos-this._pageSize.x *ratio,ani);
		else
		this.setPosX(this._xPos-this._scrollStep *ratio,ani);
	}

	__proto.scrollRight=function(ratio,ani){
		(ratio===void 0)&& (ratio=1);
		(ani===void 0)&& (ani=false);
		if (this._pageMode)
			this.setPosX(this._xPos+this._pageSize.x *ratio,ani);
		else
		this.setPosX(this._xPos+this._scrollStep *ratio,ani);
	}

	__proto.scrollToView=function(target,ani,setFirst){
		(ani===void 0)&& (ani=false);
		(setFirst===void 0)&& (setFirst=false);
		this._owner.ensureBoundsCorrect();
		if(this._needRefresh)
			this.refresh();
		var rect;
		if((target instanceof fairygui.GObject )){
			if(target.parent !=this._owner){
				target.parent.localToGlobalRect(target.x,target.y,
				target.width,target.height,fairygui.ScrollPane.sHelperRect);
				rect=this._owner.globalToLocalRect(fairygui.ScrollPane.sHelperRect.x,fairygui.ScrollPane.sHelperRect.y,
				fairygui.ScrollPane.sHelperRect.width,fairygui.ScrollPane.sHelperRect.height,fairygui.ScrollPane.sHelperRect);
			}
			else {
				rect=fairygui.ScrollPane.sHelperRect;
				rect.setTo(target.x,target.y,target.width,target.height);
			}
		}
		else
		rect=(target);
		if(this._overlapSize.y>0){
			var bottom=this._yPos+this._viewSize.y;
			if(setFirst || rect.y<=this._yPos || rect.height>=this._viewSize.y){
				if(this._pageMode)
					this.setPosY(Math.floor(rect.y/this._pageSize.y)*this._pageSize.y,ani);
				else
				this.setPosY(rect.y,ani);
			}
			else if(rect.y+rect.height>bottom){
				if(this._pageMode)
					this.setPosY(Math.floor(rect.y/this._pageSize.y)*this._pageSize.y,ani);
				else if (rect.height <=this._viewSize.y/2)
				this.setPosY(rect.y+rect.height*2-this._viewSize.y,ani);
				else
				this.setPosY(rect.y+rect.height-this._viewSize.y,ani);
			}
		}
		if(this._overlapSize.x>0){
			var right=this._xPos+this._viewSize.x;
			if(setFirst || rect.x<=this._xPos || rect.width>=this._viewSize.x){
				if(this._pageMode)
					this.setPosX(Math.floor(rect.x/this._pageSize.x)*this._pageSize.x,ani);
				else
				this.setPosX(rect.x,ani);
			}
			else if(rect.x+rect.width>right){
				if(this._pageMode)
					this.setPosX(Math.floor(rect.x/this._pageSize.x)*this._pageSize.x,ani);
				else if (rect.width <=this._viewSize.x/2)
				this.setPosX(rect.x+rect.width*2-this._viewSize.x,ani);
				else
				this.setPosX(rect.x+rect.width-this._viewSize.x,ani);
			}
		}
		if(!ani && this._needRefresh)
			this.refresh();
	}

	__proto.isChildInView=function(obj){
		if(this._overlapSize.y>0){
			var dist=obj.y+this._container.y;
			if(dist<-obj.height || dist>this._viewSize.y)
				return false;
		}
		if(this._overlapSize.x>0){
			dist=obj.x+this._container.x;
			if(dist<-obj.width || dist>this._viewSize.x)
				return false;
		}
		return true;
	}

	__proto.cancelDragging=function(){
		this._owner.displayObject.stage.off("mousemove",this,this.__mouseMove);
		this._owner.displayObject.stage.off("mouseup",this,this.__mouseUp);
		this._owner.displayObject.stage.off("click",this,this.__click);
		if (ScrollPane.draggingPane==this)
			ScrollPane.draggingPane=null;
		ScrollPane._gestureFlag=0;
		this.isDragged=false;
		this._maskContainer.mouseEnabled=true;
	}

	__proto.lockHeader=function(size){
		if (this._headerLockedSize==size)
			return;
		this._headerLockedSize=size;
		if (!this._refreshEventDispatching && this._container[this._refreshBarAxis] >=0){
			this._tweenStart.setTo(this._container.x,this._container.y);
			this._tweenChange.setTo(0,0);
			this._tweenChange[this._refreshBarAxis]=this._headerLockedSize-this._tweenStart[this._refreshBarAxis];
			this._tweenDuration.setTo(0.3,0.3);
			this._tweenTime.setTo(0,0);
			this._tweening=2;
			Laya.timer.frameLoop(1,this,this.tweenUpdate);
		}
	}

	__proto.lockFooter=function(size){
		if (this._footerLockedSize==size)
			return;
		this._footerLockedSize=size;
		if (!this._refreshEventDispatching && this._container[this._refreshBarAxis] <=-this._overlapSize[this._refreshBarAxis]){
			this._tweenStart.setTo(this._container.x,this._container.y);
			this._tweenChange.setTo(0,0);
			var max=this._overlapSize[this._refreshBarAxis];
			if (max==0)
				max=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0);
			else
			max+=this._footerLockedSize;
			this._tweenChange[this._refreshBarAxis]=-max-this._tweenStart[this._refreshBarAxis];
			this._tweenDuration.setTo(0.3,0.3);
			this._tweenTime.setTo(0,0);
			this._tweening=2;
			Laya.timer.frameLoop(1,this,this.tweenUpdate);
		}
	}

	__proto.onOwnerSizeChanged=function(){
		this.setSize(this._owner.width,this._owner.height);
		this.posChanged(false);
	}

	__proto.handleControllerChanged=function(c){
		if (this._pageController==c){
			if (this._scrollType==0)
				this.setCurrentPageX(c.selectedIndex,true);
			else
			this.setCurrentPageY(c.selectedIndex,true);
		}
	}

	__proto.updatePageController=function(){
		if (this._pageController !=null && !this._pageController.changing){
			var index=0;
			if (this._scrollType==0)
				index=this.currentPageX;
			else
			index=this.currentPageY;
			if (index < this._pageController.pageCount){
				var c=this._pageController;
				this._pageController=null;
				c.selectedIndex=index;
				this._pageController=c;
			}
		}
	}

	__proto.adjustMaskContainer=function(){
		var mx=NaN,my=NaN;
		if (this._displayOnLeft && this._vtScrollBar !=null)
			mx=Math.floor(this._owner.margin.left+this._vtScrollBar.width);
		else
		mx=Math.floor(this._owner.margin.left);
		my=Math.floor(this._owner.margin.top);
		this._maskContainer.pos(mx,my);
		if(this._owner._alignOffset.x!=0 || this._owner._alignOffset.y!=0){
			if(this._alignContainer==null){
				this._alignContainer=new Sprite();
				this._maskContainer.addChild(this._alignContainer);
				this._alignContainer.addChild(this._container);
			}
			this._alignContainer.pos(this._owner._alignOffset.x,this._owner._alignOffset.y);
		}
		else if(this._alignContainer){
			this._alignContainer.pos(0,0);
		}
	}

	__proto.setSize=function(aWidth,aHeight){
		this.adjustMaskContainer();
		if (this._hzScrollBar){
			this._hzScrollBar.y=aHeight-this._hzScrollBar.height;
			if(this._vtScrollBar && !this._vScrollNone){
				this._hzScrollBar.width=aWidth-this._vtScrollBar.width-this._scrollBarMargin.left-this._scrollBarMargin.right;
				if(this._displayOnLeft)
					this._hzScrollBar.x=this._scrollBarMargin.left+this._vtScrollBar.width;
				else
				this._hzScrollBar.x=this._scrollBarMargin.left;
			}
			else {
				this._hzScrollBar.width=aWidth-this._scrollBarMargin.left-this._scrollBarMargin.right;
				this._hzScrollBar.x=this._scrollBarMargin.left;
			}
		}
		if (this._vtScrollBar){
			if (!this._displayOnLeft)
				this._vtScrollBar.x=aWidth-this._vtScrollBar.width;
			if(this._hzScrollBar)
				this._vtScrollBar.height=aHeight-this._hzScrollBar.height-this._scrollBarMargin.top-this._scrollBarMargin.bottom;
			else
			this._vtScrollBar.height=aHeight-this._scrollBarMargin.top-this._scrollBarMargin.bottom;
			this._vtScrollBar.y=this._scrollBarMargin.top;
		}
		this._viewSize.x=aWidth;
		this._viewSize.y=aHeight;
		if(this._hzScrollBar && !this._hScrollNone)
			this._viewSize.y-=this._hzScrollBar.height;
		if(this._vtScrollBar && !this._vScrollNone)
			this._viewSize.x-=this._vtScrollBar.width;
		this._viewSize.x-=(this._owner.margin.left+this._owner.margin.right);
		this._viewSize.y-=(this._owner.margin.top+this._owner.margin.bottom);
		this._viewSize.x=Math.max(1,this._viewSize.x);
		this._viewSize.y=Math.max(1,this._viewSize.y);
		this._pageSize.x=this._viewSize.x;
		this._pageSize.y=this._viewSize.y;
		this.handleSizeChanged();
	}

	__proto.setContentSize=function(aWidth,aHeight){
		if(this._contentSize.x==aWidth && this._contentSize.y==aHeight)
			return;
		this._contentSize.x=aWidth;
		this._contentSize.y=aHeight;
		this.handleSizeChanged();
	}

	__proto.changeContentSizeOnScrolling=function(deltaWidth,deltaHeight,deltaPosX,deltaPosY){
		var isRightmost=this._xPos==this._overlapSize.x;
		var isBottom=this._yPos==this._overlapSize.y;
		this._contentSize.x+=deltaWidth;
		this._contentSize.y+=deltaHeight;
		this.handleSizeChanged();
		if (this._tweening==1){
			if (deltaWidth !=0 && isRightmost && this._tweenChange.x < 0){
				this._xPos=this._overlapSize.x;
				this._tweenChange.x=-this._xPos-this._tweenStart.x;
			}
			if (deltaHeight !=0 && isBottom && this._tweenChange.y < 0){
				this._yPos=this._overlapSize.y;
				this._tweenChange.y=-this._yPos-this._tweenStart.y;
			}
		}
		else if (this._tweening==2){
			if (deltaPosX !=0){
				this._container.x-=deltaPosX;
				this._tweenStart.x-=deltaPosX;
				this._xPos=-this._container.x;
			}
			if (deltaPosY !=0){
				this._container.y-=deltaPosY;
				this._tweenStart.y-=deltaPosY;
				this._yPos=-this._container.y;
			}
		}
		else if (this.isDragged){
			if (deltaPosX !=0){
				this._container.x-=deltaPosX;
				this._containerPos.x-=deltaPosX;
				this._xPos=-this._container.x;
			}
			if (deltaPosY !=0){
				this._container.y-=deltaPosY;
				this._containerPos.y-=deltaPosY;
				this._yPos=-this._container.y;
			}
		}
		else{
			if (deltaWidth !=0 && isRightmost){
				this._xPos=this._overlapSize.x;
				this._container.x=-this._xPos;
			}
			if (deltaHeight !=0 && isBottom){
				this._yPos=this._overlapSize.y;
				this._container.y=-this._yPos;
			}
		}
		if (this._pageMode)
			this.updatePageController();
	}

	__proto.handleSizeChanged=function(onScrolling){
		(onScrolling===void 0)&& (onScrolling=false);
		if(this._displayInDemand){
			if(this._vtScrollBar){
				if(this._contentSize.y<=this._viewSize.y){
					if(!this._vScrollNone){
						this._vScrollNone=true;
						this._viewSize.x+=this._vtScrollBar.width;
					}
				}
				else{
					if(this._vScrollNone){
						this._vScrollNone=false;
						this._viewSize.x-=this._vtScrollBar.width;
					}
				}
			}
			if(this._hzScrollBar){
				if(this._contentSize.x<=this._viewSize.x){
					if(!this._hScrollNone){
						this._hScrollNone=true;
						this._viewSize.y+=this._hzScrollBar.height;
					}
				}
				else{
					if(this._hScrollNone){
						this._hScrollNone=false;
						this._viewSize.y-=this._hzScrollBar.height;
					}
				}
			}
		}
		if(this._vtScrollBar){
			if(this._viewSize.y<this._vtScrollBar.minSize)
				this._vtScrollBar.displayObject.visible=false;
			else{
				this._vtScrollBar.displayObject.visible=this._scrollBarVisible && !this._vScrollNone;
				if(this._contentSize.y==0)
					this._vtScrollBar.displayPerc=0;
				else
				this._vtScrollBar.displayPerc=Math.min(1,this._viewSize.y/this._contentSize.y);
			}
		}
		if(this._hzScrollBar){
			if(this._viewSize.x<this._hzScrollBar.minSize)
				this._hzScrollBar.displayObject.visible=false;
			else{
				this._hzScrollBar.displayObject.visible=this._scrollBarVisible && !this._hScrollNone;
				if(this._contentSize.x==0)
					this._hzScrollBar.displayPerc=0;
				else
				this._hzScrollBar.displayPerc=Math.min(1,this._viewSize.x/this._contentSize.x);
			}
		};
		var rect=this._maskContainer.scrollRect;
		if (rect){
			rect.width=this._viewSize.x;
			rect.height=this._viewSize.y;
			this._maskContainer.scrollRect=rect;
		}
		if (this._scrollType==0 || this._scrollType==2)
			this._overlapSize.x=Math.ceil(Math.max(0,this._contentSize.x-this._viewSize.x));
		else
		this._overlapSize.x=0;
		if (this._scrollType==1 || this._scrollType==2)
			this._overlapSize.y=Math.ceil(Math.max(0,this._contentSize.y-this._viewSize.y));
		else
		this._overlapSize.y=0;
		this._xPos=ToolSet.clamp(this._xPos,0,this._overlapSize.x);
		this._yPos=ToolSet.clamp(this._yPos,0,this._overlapSize.y);
		if(this._refreshBarAxis!=null){
			var max=this._overlapSize[this._refreshBarAxis];
			if (max==0)
				max=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0);
			else
			max+=this._footerLockedSize;
			if (this._refreshBarAxis=="x"){
				this._container.pos(ToolSet.clamp(this._container.x,-max,this._headerLockedSize),
				ToolSet.clamp(this._container.y,-this._overlapSize.y,0));
			}
			else{
				this._container.pos(ToolSet.clamp(this._container.x,-this._overlapSize.x,0),
				ToolSet.clamp(this._container.y,-max,this._headerLockedSize));
			}
			if (this._header !=null){
				if (this._refreshBarAxis=="x")
					this._header.height=this._viewSize.y;
				else
				this._header.width=this._viewSize.x;
			}
			if (this._footer !=null){
				if (this._refreshBarAxis=="y")
					this._footer.height=this._viewSize.y;
				else
				this._footer.width=this._viewSize.x;
			}
		}
		else{
			this._container.pos(ToolSet.clamp(this._container.x,-this._overlapSize.x,0),
			ToolSet.clamp(this._container.y,-this._overlapSize.y,0));
		}
		this.syncScrollBar(true);
		this.checkRefreshBar();
		if (this._pageMode)
			this.updatePageController();
	}

	__proto.posChanged=function(ani){
		if (this._aniFlag==0)
			this._aniFlag=ani ? 1 :-1;
		else if (this._aniFlag==1 && !ani)
		this._aniFlag=-1;
		this._needRefresh=true;
		Laya.timer.callLater(this,this.refresh);
	}

	__proto.refresh=function(){
		this._needRefresh=false;
		Laya.timer.clear(this,this.refresh);
		if (this._pageMode || this._snapToItem){
			ScrollPane.sEndPos.setTo(-this._xPos,-this._yPos);
			this.alignPosition(ScrollPane.sEndPos,false);
			this._xPos=-ScrollPane.sEndPos.x;
			this._yPos=-ScrollPane.sEndPos.y;
		}
		this.refresh2();
		Events.dispatch("fui_scroll",this._owner.displayObject);
		if (this._needRefresh){
			this._needRefresh=false;
			Laya.timer.clear(this,this.refresh);
			this.refresh2();
		}
		this.syncScrollBar();
		this._aniFlag=0;
	}

	__proto.refresh2=function(){
		if (this._aniFlag==1 && !this.isDragged){
			var posX=NaN;
			var posY=NaN;
			if (this._overlapSize.x > 0)
				posX=-Math.floor(this._xPos);
			else{
				if (this._container.x !=0)
					this._container.x=0;
				posX=0;
			}
			if (this._overlapSize.y > 0)
				posY=-Math.floor(this._yPos);
			else{
				if (this._container.y !=0)
					this._container.y=0;
				posY=0;
			}
			if (posX !=this._container.x || posY !=this._container.y){
				this._tweening=1;
				this._tweenTime.setTo(0,0);
				this._tweenDuration.setTo(0.5,0.5);
				this._tweenStart.setTo(this._container.x,this._container.y);
				this._tweenChange.setTo(posX-this._tweenStart.x,posY-this._tweenStart.y);
				Laya.timer.frameLoop(1,this,this.tweenUpdate);
			}
			else if (this._tweening !=0)
			this.killTween();
		}
		else{
			if (this._tweening !=0)
				this.killTween();
			this._container.pos(Math.floor(-this._xPos),Math.floor(-this._yPos));
			this.loopCheckingCurrent();
		}
		if (this._pageMode)
			this.updatePageController();
	}

	__proto.syncScrollBar=function(end){
		(end===void 0)&& (end=false);
		if (this._vtScrollBar !=null){
			this._vtScrollBar.scrollPerc=this._overlapSize.y==0 ? 0 :ToolSet.clamp(-this._container.y,0,this._overlapSize.y)/ this._overlapSize.y;
			if (this._scrollBarDisplayAuto)
				this.showScrollBar(!end);
		}
		if (this._hzScrollBar !=null){
			this._hzScrollBar.scrollPerc=this._overlapSize.x==0 ? 0 :ToolSet.clamp(-this._container.x,0,this._overlapSize.x)/ this._overlapSize.x;
			if (this._scrollBarDisplayAuto)
				this.showScrollBar(!end);
		}
		if(end)
			this._maskContainer.mouseEnabled=true;
	}

	__proto.__mouseDown=function(){
		if(!this._touchEffect)
			return;
		if(this._tweening!=0){
			this.killTween();
			this.isDragged=true;
		}
		else
		this.isDragged=false;
		var pt=this._owner.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,fairygui.ScrollPane.sHelperPoint);
		this._containerPos.setTo(this._container.x,this._container.y);
		this._beginTouchPos.setTo(pt.x,pt.y);
		this._lastTouchPos.setTo(pt.x,pt.y);
		this._lastTouchGlobalPos.setTo(Laya.stage.mouseX,Laya.stage.mouseY);
		this._isHoldAreaDone=false;
		this._velocity.setTo(0,0);
		this._velocityScale=1;
		this._lastMoveTime=Laya.timer.currTimer/1000;
		this._owner.displayObject.stage.on("mousemove",this,this.__mouseMove);
		this._owner.displayObject.stage.on("mouseup",this,this.__mouseUp);
		this._owner.displayObject.stage.on("click",this,this.__click);
	}

	__proto.__mouseMove=function(){
		if(!this._touchEffect)
			return;
		if (ScrollPane.draggingPane !=null && ScrollPane.draggingPane !=this || GObject.draggingObject !=null)
			return;
		var sensitivity=UIConfig$1.touchScrollSensitivity;
		var pt=this._owner.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,fairygui.ScrollPane.sHelperPoint);
		var diff=NaN,diff2=NaN;
		var sv=false,sh=false,st=false;
		if (this._scrollType==1){
			if (!this._isHoldAreaDone){
				ScrollPane._gestureFlag |=1;
				diff=Math.abs(this._beginTouchPos.y-pt.y);
				if (diff < sensitivity)
					return;
				if ((ScrollPane._gestureFlag & 2)!=0){
					diff2=Math.abs(this._beginTouchPos.x-pt.x);
					if (diff < diff2)
						return;
				}
			}
			sv=true;
		}
		else if (this._scrollType==0){
			if (!this._isHoldAreaDone){
				ScrollPane._gestureFlag |=2;
				diff=Math.abs(this._beginTouchPos.x-pt.x);
				if (diff < sensitivity)
					return;
				if ((ScrollPane._gestureFlag & 1)!=0){
					diff2=Math.abs(this._beginTouchPos.y-pt.y);
					if (diff < diff2)
						return;
				}
			}
			sh=true;
		}
		else{
			ScrollPane._gestureFlag=3;
			if (!this._isHoldAreaDone){
				diff=Math.abs(this._beginTouchPos.y-pt.y);
				if (diff < sensitivity){
					diff=Math.abs(this._beginTouchPos.x-pt.x);
					if (diff < sensitivity)
						return;
				}
			}
			sv=sh=true;
		};
		var newPosX=Math.floor(this._containerPos.x+pt.x-this._beginTouchPos.x);
		var newPosY=Math.floor(this._containerPos.y+pt.y-this._beginTouchPos.y);
		if (sv){
			if (newPosY > 0){
				if (!this._bouncebackEffect)
					this._container.y=0;
				else if (this._header !=null && this._header.maxHeight !=0)
				this._container.y=Math.floor(Math.min(newPosY *0.5,this._header.maxHeight));
				else
				this._container.y=Math.floor(Math.min(newPosY *0.5,this._viewSize.y *0.5));
			}
			else if (newPosY <-this._overlapSize.y){
				if (!this._bouncebackEffect)
					this._container.y=-this._overlapSize.y;
				else if (this._footer !=null && this._footer.maxHeight > 0)
				this._container.y=Math.floor(Math.max((newPosY+this._overlapSize.y)*0.5,-this._footer.maxHeight)-this._overlapSize.y);
				else
				this._container.y=Math.floor(Math.max((newPosY+this._overlapSize.y)*0.5,-this._viewSize.y *0.5)-this._overlapSize.y);
			}
			else
			this._container.y=newPosY;
		}
		if (sh){
			if (newPosX > 0){
				if (!this._bouncebackEffect)
					this._container.x=0;
				else if (this._header !=null && this._header.maxWidth !=0)
				this._container.x=Math.floor(Math.min(newPosX *0.5,this._header.maxWidth));
				else
				this._container.x=Math.floor(Math.min(newPosX *0.5,this._viewSize.x *0.5));
			}
			else if (newPosX < 0-this._overlapSize.x){
				if (!this._bouncebackEffect)
					this._container.x=-this._overlapSize.x;
				else if (this._footer !=null && this._footer.maxWidth > 0)
				this._container.x=Math.floor(Math.max((newPosX+this._overlapSize.x)*0.5,-this._footer.maxWidth)-this._overlapSize.x);
				else
				this._container.x=Math.floor(Math.max((newPosX+this._overlapSize.x)*0.5,-this._viewSize.x *0.5)-this._overlapSize.x);
			}
			else
			this._container.x=newPosX;
		};
		var frameRate=Laya.stage.frameRate=="slow"?30:60;
		var now=Laya.timer.currTimer/1000;
		var deltaTime=Math.max(now-this._lastMoveTime,1/frameRate);
		var deltaPositionX=pt.x-this._lastTouchPos.x;
		var deltaPositionY=pt.y-this._lastTouchPos.y;
		if (!sh)
			deltaPositionX=0;
		if (!sv)
			deltaPositionY=0;
		if(deltaTime!=0){
			var elapsed=deltaTime *frameRate-1;
			if (elapsed > 1){
				var factor=Math.pow(0.833,elapsed);
				this._velocity.x=this._velocity.x *factor;
				this._velocity.y=this._velocity.y *factor;
			}
			this._velocity.x=ToolSet.lerp(this._velocity.x,deltaPositionX *60 / frameRate / deltaTime,deltaTime *10);
			this._velocity.y=ToolSet.lerp(this._velocity.y,deltaPositionY *60 / frameRate / deltaTime,deltaTime *10);
		};
		var deltaGlobalPositionX=this._lastTouchGlobalPos.x-Laya.stage.mouseX;
		var deltaGlobalPositionY=this._lastTouchGlobalPos.y-Laya.stage.mouseY;
		if (deltaPositionX !=0)
			this._velocityScale=Math.abs(deltaGlobalPositionX / deltaPositionX);
		else if (deltaPositionY !=0)
		this._velocityScale=Math.abs(deltaGlobalPositionY / deltaPositionY);
		this._lastTouchPos.setTo(pt.x,pt.y);
		this._lastTouchGlobalPos.setTo(Laya.stage.mouseX,Laya.stage.mouseY);
		this._lastMoveTime=now;
		if (this._overlapSize.x > 0)
			this._xPos=ToolSet.clamp(-this._container.x,0,this._overlapSize.x);
		if (this._overlapSize.y > 0)
			this._yPos=ToolSet.clamp(-this._container.y,0,this._overlapSize.y);
		if (this._loop !=0){
			newPosX=this._container.x;
			newPosY=this._container.y;
			if (this.loopCheckingCurrent()){
				this._containerPos.x+=this._container.x-newPosX;
				this._containerPos.y+=this._container.y-newPosY;
			}
		}
		ScrollPane.draggingPane=this;
		this._isHoldAreaDone=true;
		this.isDragged=true;
		this._maskContainer.mouseEnabled=false;
		this.syncScrollBar();
		this.checkRefreshBar();
		if (this._pageMode)
			this.updatePageController();
		Events.dispatch("fui_scroll",this._owner.displayObject);
	}

	__proto.__mouseUp=function(){
		this._owner.displayObject.stage.off("mousemove",this,this.__mouseMove);
		this._owner.displayObject.stage.off("mouseup",this,this.__mouseUp);
		this._owner.displayObject.stage.off("click",this,this.__click);
		if (ScrollPane.draggingPane==this)
			ScrollPane.draggingPane=null;
		ScrollPane._gestureFlag=0;
		if (!this.isDragged || !this._touchEffect){
			this.isDragged=false;
			this._maskContainer.mouseEnabled=true;
			return;
		}
		this.isDragged=false;
		this._maskContainer.mouseEnabled=true;
		this._tweenStart.setTo(this._container.x,this._container.y);
		ScrollPane.sEndPos.setTo(this._tweenStart.x,this._tweenStart.y);
		var flag=false;
		if (this._container.x > 0){
			ScrollPane.sEndPos.x=0;
			flag=true;
		}
		else if (this._container.x <-this._overlapSize.x){
			ScrollPane.sEndPos.x=-this._overlapSize.x;
			flag=true;
		}
		if (this._container.y > 0){
			ScrollPane.sEndPos.y=0;
			flag=true;
		}
		else if (this._container.y <-this._overlapSize.y){
			ScrollPane.sEndPos.y=-this._overlapSize.y;
			flag=true;
		}
		if (flag){
			this._tweenChange.setTo(ScrollPane.sEndPos.x-this._tweenStart.x,ScrollPane.sEndPos.y-this._tweenStart.y);
			if (this._tweenChange.x <-UIConfig$1.touchDragSensitivity || this._tweenChange.y <-UIConfig$1.touchDragSensitivity){
				this._refreshEventDispatching=true;
				Events.dispatch("fui_pull_down_release",this._owner.displayObject);
				this._refreshEventDispatching=false;
			}
			else if (this._tweenChange.x > UIConfig$1.touchDragSensitivity || this._tweenChange.y > UIConfig$1.touchDragSensitivity){
				this._refreshEventDispatching=true;
				Events.dispatch("fui_pull_up_release",this._owner.displayObject);
				this._refreshEventDispatching=false;
			}
			if (this._headerLockedSize > 0 && ScrollPane.sEndPos[this._refreshBarAxis]==0){
				ScrollPane.sEndPos[this._refreshBarAxis]=this._headerLockedSize;
				this._tweenChange.x=ScrollPane.sEndPos.x-this._tweenStart.x;
				this._tweenChange.y=ScrollPane.sEndPos.y-this._tweenStart.y;
			}
			else if (this._footerLockedSize > 0 && ScrollPane.sEndPos[this._refreshBarAxis]==-this._overlapSize[this._refreshBarAxis]){
				var max=this._overlapSize[this._refreshBarAxis];
				if (max==0)
					max=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0);
				else
				max+=this._footerLockedSize;
				ScrollPane.sEndPos[this._refreshBarAxis]=-max;
				this._tweenChange.x=ScrollPane.sEndPos.x-this._tweenStart.x;
				this._tweenChange.y=ScrollPane.sEndPos.y-this._tweenStart.y;
			}
			this._tweenDuration.setTo(0.3,0.3);
		}
		else{
			if (!this._inertiaDisabled){
				var frameRate=Laya.stage.frameRate=="slow"?30:60;
				var elapsed=(Laya.timer.currTimer/1000-this._lastMoveTime)*frameRate-1;
				if (elapsed > 1){
					var factor=Math.pow(0.833,elapsed);
					this._velocity.x=this._velocity.x *factor;
					this._velocity.y=this._velocity.y *factor;
				}
				this.updateTargetAndDuration(this._tweenStart,ScrollPane.sEndPos);
			}
			else
			this._tweenDuration.setTo(0.3,0.3);
			ScrollPane.sOldChange.setTo(ScrollPane.sEndPos.x-this._tweenStart.x,ScrollPane.sEndPos.y-this._tweenStart.y);
			this.loopCheckingTarget(ScrollPane.sEndPos);
			if (this._pageMode || this._snapToItem)
				this.alignPosition(ScrollPane.sEndPos,true);
			this._tweenChange.x=ScrollPane.sEndPos.x-this._tweenStart.x;
			this._tweenChange.y=ScrollPane.sEndPos.y-this._tweenStart.y;
			if (this._tweenChange.x==0 && this._tweenChange.y==0){
				if (this._scrollBarDisplayAuto)
					this.showScrollBar(false);
				return;
			}
			if (this._pageMode || this._snapToItem){
				this.fixDuration("x",ScrollPane.sOldChange.x);
				this.fixDuration("y",ScrollPane.sOldChange.y);
			}
		}
		this._tweening=2;
		this._tweenTime.setTo(0,0);
		Laya.timer.frameLoop(1,this,this.tweenUpdate);
	}

	__proto.__click=function(){
		this.isDragged=false;
	}

	__proto.__mouseWheel=function(evt){
		if(!this._mouseWheelEnabled)
			return;
		var pt=this._owner.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,fairygui.ScrollPane.sHelperPoint);
		var delta=evt["delta"];
		delta=delta>0?-1:(delta<0?1:0);
		if (this._overlapSize.x > 0 && this._overlapSize.y==0){
			if (this._pageMode)
				this.setPosX(this._xPos+this._pageSize.x *delta,false);
			else
			this.setPosX(this._xPos+this._mouseWheelStep *delta,false);
		}
		else {
			if (this._pageMode)
				this.setPosY(this._yPos+this._pageSize.y *delta,false);
			else
			this.setPosY(this._yPos+this._mouseWheelStep *delta,false);
		}
	}

	__proto.__rollOver=function(){
		this.showScrollBar(true);
	}

	__proto.__rollOut=function(){
		this.showScrollBar(false);
	}

	__proto.showScrollBar=function(val){
		if (val){
			this.__showScrollBar(true);
			Laya.timer.clear(this,this.__showScrollBar);
		}
		else
		Laya.timer.once(500,this,this.__showScrollBar,[val]);
	}

	__proto.__showScrollBar=function(val){
		this._scrollBarVisible=val && this._viewSize.x>0 && this._viewSize.y>0;
		if (this._vtScrollBar)
			this._vtScrollBar.displayObject.visible=this._scrollBarVisible && !this._vScrollNone;
		if (this._hzScrollBar)
			this._hzScrollBar.displayObject.visible=this._scrollBarVisible && !this._hScrollNone;
	}

	__proto.getLoopPartSize=function(division,axis){
		return (this._contentSize[axis]+(axis=="x" ? (this._owner).columnGap :(this._owner).lineGap))/ division;
	}

	__proto.loopCheckingCurrent=function(){
		var changed=false;
		if (this._loop==1 && this._overlapSize.x > 0){
			if (this._xPos < 0.001){
				this._xPos+=this.getLoopPartSize(2,"x");
				changed=true;
			}
			else if (this._xPos >=this._overlapSize.x){
				this._xPos-=this.getLoopPartSize(2,"x");
				changed=true;
			}
		}
		else if (this._loop==2 && this._overlapSize.y > 0){
			if (this._yPos < 0.001){
				this._yPos+=this.getLoopPartSize(2,"y");
				changed=true;
			}
			else if (this._yPos >=this._overlapSize.y){
				this._yPos-=this.getLoopPartSize(2,"y");
				changed=true;
			}
		}
		if (changed)
			this._container.pos(Math.floor(-this._xPos),Math.floor(-this._yPos));
		return changed;
	}

	__proto.loopCheckingTarget=function(endPos){
		if (this._loop==1)
			this.loopCheckingTarget2(endPos,"x");
		if (this._loop==2)
			this.loopCheckingTarget2(endPos,"y");
	}

	__proto.loopCheckingTarget2=function(endPos,axis){
		var halfSize=NaN;
		var tmp=NaN;
		if (endPos[axis] > 0){
			halfSize=this.getLoopPartSize(2,axis);
			tmp=this._tweenStart[axis]-halfSize;
			if (tmp <=0 && tmp >=-this._overlapSize[axis]){
				endPos[axis]-=halfSize;
				this._tweenStart[axis]=tmp;
			}
		}
		else if (endPos[axis] <-this._overlapSize[axis]){
			halfSize=this.getLoopPartSize(2,axis);
			tmp=this._tweenStart[axis]+halfSize;
			if (tmp <=0 && tmp >=-this._overlapSize[axis]){
				endPos[axis]+=halfSize;
				this._tweenStart[axis]=tmp;
			}
		}
	}

	__proto.loopCheckingNewPos=function(value,axis){
		if (this._overlapSize[axis]==0)
			return value;
		var pos=axis=="x" ? this._xPos :this._yPos;
		var changed=false;
		var v=NaN;
		if (value < 0.001){
			value+=this.getLoopPartSize(2,axis);
			if (value > pos){
				v=this.getLoopPartSize(6,axis);
				v=Math.ceil((value-pos)/ v)*v;
				pos=ToolSet.clamp(pos+v,0,this._overlapSize[axis]);
				changed=true;
			}
		}
		else if (value >=this._overlapSize[axis]){
			value-=this.getLoopPartSize(2,axis);
			if (value < pos){
				v=this.getLoopPartSize(6,axis);
				v=Math.ceil((pos-value)/ v)*v;
				pos=ToolSet.clamp(pos-v,0,this._overlapSize[axis]);
				changed=true;
			}
		}
		if (changed){
			if (axis=="x")
				this._container.x=-Math.floor(pos);
			else
			this._container.y=-Math.floor(pos);
		}
		return value;
	}

	__proto.alignPosition=function(pos,inertialScrolling){
		if (this._pageMode){
			pos.x=this.alignByPage(pos.x,"x",inertialScrolling);
			pos.y=this.alignByPage(pos.y,"y",inertialScrolling);
		}
		else if (this._snapToItem){
			var pt=this._owner.getSnappingPosition(-pos.x,-pos.y,ScrollPane.sHelperPoint);
			if (pos.x < 0 && pos.x >-this._overlapSize.x)
				pos.x=-pt.x;
			if (pos.y < 0 && pos.y >-this._overlapSize.y)
				pos.y=-pt.y;
		}
	}

	__proto.alignByPage=function(pos,axis,inertialScrolling){
		var page=0;
		if (pos > 0)
			page=0;
		else if (pos <-this._overlapSize[axis])
		page=Math.ceil(this._contentSize[axis] / this._pageSize[axis])-1;
		else{
			page=Math.floor(-pos / this._pageSize[axis]);
			var change=inertialScrolling ? (pos-this._containerPos[axis]):(pos-this._container[axis]);
			var testPageSize=Math.min(this._pageSize[axis],this._contentSize[axis]-(page+1)*this._pageSize[axis]);
			var delta=-pos-page *this._pageSize[axis];
			if (Math.abs(change)> this._pageSize[axis]){
				if (delta > testPageSize *0.5)
					page++;
			}
			else{
				if (delta > testPageSize *(change < 0 ? 0.3 :0.7))
					page++;
			}
			pos=-page *this._pageSize[axis];
			if (pos <-this._overlapSize[axis])
				pos=-this._overlapSize[axis];
		}
		if (inertialScrolling){
			var oldPos=this._tweenStart[axis];
			var oldPage=0;
			if (oldPos > 0)
				oldPage=0;
			else if (oldPos <-this._overlapSize[axis])
			oldPage=Math.ceil(this._contentSize[axis] / this._pageSize[axis])-1;
			else
			oldPage=Math.floor(-oldPos / this._pageSize[axis]);
			var startPage=Math.floor(-this._containerPos[axis] / this._pageSize[axis]);
			if (Math.abs(page-startPage)> 1 && Math.abs(oldPage-startPage)<=1){
				if (page > startPage)
					page=startPage+1;
				else
				page=startPage-1;
				pos=-page *this._pageSize[axis];
			}
		}
		return pos;
	}

	__proto.updateTargetAndDuration=function(orignPos,resultPos){
		resultPos.x=this.updateTargetAndDuration2(orignPos.x,"x");
		resultPos.y=this.updateTargetAndDuration2(orignPos.y,"y");
	}

	__proto.updateTargetAndDuration2=function(pos,axis){
		var v=this._velocity[axis];
		var duration=0;
		if (pos > 0)
			pos=0;
		else if (pos <-this._overlapSize[axis])
		pos=-this._overlapSize[axis];
		else{
			var v2=Math.abs(v)*this._velocityScale;
			if(Browser.onMobile)
				v2 *=1136 / Math.max(Laya.stage.width,Laya.stage.height);
			var ratio=0;
			if (this._pageMode || !Browser.onMobile){
				if (v2 > 500)
					ratio=Math.pow((v2-500)/ 500,2);
			}
			else{
				if (v2 > 1000)
					ratio=Math.pow((v2-1000)/ 1000,2);
			}
			if (ratio !=0){
				if (ratio > 1)
					ratio=1;
				v2 *=ratio;
				v *=ratio;
				this._velocity[axis]=v;
				duration=Math.log(60 / v2)/Math.log(this._decelerationRate)/ 60;
				var change=Math.floor(v *duration *0.4);
				pos+=change;
			}
		}
		if (duration < 0.3)
			duration=0.3;
		this._tweenDuration[axis]=duration;
		return pos;
	}

	__proto.fixDuration=function(axis,oldChange){
		if (this._tweenChange[axis]==0 || Math.abs(this._tweenChange[axis])>=Math.abs(oldChange))
			return;
		var newDuration=Math.abs(this._tweenChange[axis] / oldChange)*this._tweenDuration[axis];
		if (newDuration < 0.3)
			newDuration=0.3;
		this._tweenDuration[axis]=newDuration;
	}

	__proto.killTween=function(){
		if (this._tweening==1){
			this._container.pos(this._tweenStart.x+this._tweenChange.x,this._tweenStart.y+this._tweenChange.y);
			Events.dispatch("fui_scroll",this._owner.displayObject);
		}
		this._tweening=0;
		Laya.timer.clear(this,this.tweenUpdate);
		Events.dispatch("fui_scroll_end",this._owner.displayObject);
	}

	__proto.checkRefreshBar=function(){
		if (this._header==null && this._footer==null)
			return;
		var pos=this._container[this._refreshBarAxis];
		if (this._header !=null){
			if (pos > 0){
				if (this._header.displayObject.parent==null)
					this._maskContainer.addChildAt(this._header.displayObject,0);
				var pt=ScrollPane.sHelperPoint;
				pt.setTo(this._header.width,this._header.height);
				pt[this._refreshBarAxis]=pos;
				this._header.setSize(pt.x,pt.y);
			}
			else{
				if (this._header.displayObject.parent !=null)
					this._maskContainer.removeChild(this._header.displayObject);
			}
		}
		if (this._footer !=null){
			var max=this._overlapSize[this._refreshBarAxis];
			if (pos <-max || max==0 && this._footerLockedSize > 0){
				if (this._footer.displayObject.parent==null)
					this._maskContainer.addChildAt(this._footer.displayObject,0);
				pt=ScrollPane.sHelperPoint;
				pt.setTo(this._footer.x,this._footer.y);
				if (max > 0)
					pt[this._refreshBarAxis]=pos+this._contentSize[this._refreshBarAxis];
				else
				pt[this._refreshBarAxis]=Math.max(Math.min(pos+this._viewSize[this._refreshBarAxis],this._viewSize[this._refreshBarAxis]-this._footerLockedSize),
				this._viewSize[this._refreshBarAxis]-this._contentSize[this._refreshBarAxis]);
				this._footer.setXY(pt.x,pt.y);
				pt.setTo(this._footer.width,this._footer.height);
				if (max > 0)
					pt[this._refreshBarAxis]=-max-pos;
				else
				pt[this._refreshBarAxis]=this._viewSize[this._refreshBarAxis]-this._footer[this._refreshBarAxis];
				this._footer.setSize(pt.x,pt.y);
			}
			else{
				if (this._footer.displayObject.parent !=null)
					this._maskContainer.removeChild(this._footer.displayObject);
			}
		}
	}

	__proto.tweenUpdate=function(){
		var nx=this.runTween("x");
		var ny=this.runTween("y");
		this._container.pos(nx,ny);
		if (this._tweening==2){
			if (this._overlapSize.x > 0)
				this._xPos=ToolSet.clamp(-nx,0,this._overlapSize.x);
			if (this._overlapSize.y > 0)
				this._yPos=ToolSet.clamp(-ny,0,this._overlapSize.y);
			if (this._pageMode)
				this.updatePageController();
		}
		if (this._tweenChange.x==0 && this._tweenChange.y==0){
			this._tweening=0;
			Laya.timer.clear(this,this.tweenUpdate);
			this.loopCheckingCurrent();
			this.syncScrollBar(true);
			this.checkRefreshBar();
			Events.dispatch("fui_scroll",this._owner.displayObject);
			Events.dispatch("fui_scroll_end",this._owner.displayObject);
		}
		else{
			this.syncScrollBar(false);
			this.checkRefreshBar();
			Events.dispatch("fui_scroll",this._owner.displayObject);
		}
	}

	__proto.runTween=function(axis){
		var newValue=NaN;
		if (this._tweenChange[axis] !=0){
			this._tweenTime[axis]+=Laya.timer.delta/1000;
			if (this._tweenTime[axis] >=this._tweenDuration[axis]){
				newValue=this._tweenStart[axis]+this._tweenChange[axis];
				this._tweenChange[axis]=0;
			}
			else{
				var ratio=ScrollPane.easeFunc(this._tweenTime[axis],this._tweenDuration[axis]);
				newValue=this._tweenStart[axis]+Math.floor(this._tweenChange[axis] *ratio);
			};
			var threshold1=0;
			var threshold2=-this._overlapSize[axis];
			if (this._headerLockedSize > 0 && this._refreshBarAxis==axis)
				threshold1=this._headerLockedSize;
			if (this._footerLockedSize > 0 && this._refreshBarAxis==axis){
				var max=this._overlapSize[this._refreshBarAxis];
				if (max==0)
					max=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0);
				else
				max+=this._footerLockedSize;
				threshold2=-max;
			}
			if (this._tweening==2 && this._bouncebackEffect){
				if (newValue > 20+threshold1 && this._tweenChange[axis] > 0
					|| newValue > threshold1 && this._tweenChange[axis]==0){
					this._tweenTime[axis]=0;
					this._tweenDuration[axis]=0.3;
					this._tweenChange[axis]=-newValue+threshold1;
					this._tweenStart[axis]=newValue;
				}
				else if (newValue < threshold2-20 && this._tweenChange[axis] < 0
				|| newValue < threshold2 && this._tweenChange[axis]==0){
					this._tweenTime[axis]=0;
					this._tweenDuration[axis]=0.3;
					this._tweenChange[axis]=threshold2-newValue;
					this._tweenStart[axis]=newValue;
				}
			}
			else{
				if (newValue > threshold1){
					newValue=threshold1;
					this._tweenChange[axis]=0;
				}
				else if (newValue < threshold2){
					newValue=threshold2;
					this._tweenChange[axis]=0;
				}
			}
		}
		else
		newValue=this._container[axis];
		return newValue;
	}

	__getset(0,__proto,'viewWidth',function(){
		return this._viewSize.x;
		},function(value){
		value=value+this._owner.margin.left+this._owner.margin.right;
		if (this._vtScrollBar !=null)
			value+=this._vtScrollBar.width;
		this._owner.width=value;
	});

	__getset(0,__proto,'percY',function(){
		return this._overlapSize.y==0 ? 0 :this._yPos / this._overlapSize.y;
		},function(value){
		this.setPercY(value,false);
	});

	__getset(0,__proto,'owner',function(){
		return this._owner;
	});

	__getset(0,__proto,'bouncebackEffect',function(){
		return this._bouncebackEffect;
		},function(sc){
		this._bouncebackEffect=sc;
	});

	__getset(0,__proto,'vtScrollBar',function(){
		return this._vtScrollBar;
	});

	__getset(0,__proto,'hzScrollBar',function(){
		return this._hzScrollBar;
	});

	__getset(0,__proto,'header',function(){
		return this._header;
	});

	__getset(0,__proto,'footer',function(){
		return this._footer;
	});

	__getset(0,__proto,'isBottomMost',function(){
		return this._yPos==this._overlapSize.y || this._overlapSize.y==0;
	});

	__getset(0,__proto,'touchEffect',function(){
		return this._touchEffect;
		},function(sc){
		this._touchEffect=sc;
	});

	__getset(0,__proto,'contentWidth',function(){
		return this._contentSize.x;
	});

	__getset(0,__proto,'scrollStep',function(){
		return this._scrollStep;
		},function(val){
		this._scrollStep=val;
		if(this._scrollStep==0)
			this._scrollStep=UIConfig$1.defaultScrollStep;
		this._mouseWheelStep=this._scrollStep*2;
	});

	__getset(0,__proto,'viewHeight',function(){
		return this._viewSize.y;
		},function(value){
		value=value+this._owner.margin.top+this._owner.margin.bottom;
		if (this._hzScrollBar !=null)
			value+=this._hzScrollBar.height;
		this._owner.height=value;
	});

	__getset(0,__proto,'posX',function(){
		return this._xPos;
		},function(value){
		this.setPosX(value,false);
	});

	__getset(0,__proto,'snapToItem',function(){
		return this._snapToItem;
		},function(value){
		this._snapToItem=value;
	});

	__getset(0,__proto,'mouseWheelEnabled',function(){
		return this._mouseWheelEnabled;
		},function(value){
		this._mouseWheelEnabled=value;
	});

	__getset(0,__proto,'decelerationRate',function(){
		return this._decelerationRate;
		},function(value){
		this._decelerationRate=value;
	});

	__getset(0,__proto,'percX',function(){
		return this._overlapSize.x==0 ? 0 :this._xPos / this._overlapSize.x;
		},function(value){
		this.setPercX(value,false);
	});

	__getset(0,__proto,'posY',function(){
		return this._yPos;
		},function(value){
		this.setPosY(value,false);
	});

	__getset(0,__proto,'contentHeight',function(){
		return this._contentSize.y;
	});

	__getset(0,__proto,'currentPageX',function(){
		if (!this._pageMode)
			return 0;
		var page=Math.floor(this._xPos / this._pageSize.x);
		if (this._xPos-page *this._pageSize.x > this._pageSize.x *0.5)
			page++;
		return page;
		},function(value){
		this.setCurrentPageX(value,false);
	});

	__getset(0,__proto,'currentPageY',function(){
		if (!this._pageMode)
			return 0;
		var page=Math.floor(this._yPos / this._pageSize.y);
		if (this._yPos-page *this._pageSize.y > this._pageSize.y *0.5)
			page++;
		return page;
		},function(value){
		this.setCurrentPageY(value,false);
	});

	__getset(0,__proto,'isRightMost',function(){
		return this._xPos==this._overlapSize.x || this._overlapSize.x==0;
	});

	__getset(0,__proto,'pageController',function(){
		return this._pageController;
		},function(value){
		this._pageController=value;
	});

	__getset(0,__proto,'scrollingPosX',function(){
		return ToolSet.clamp(-this._container.x,0,this._overlapSize.x);
	});

	__getset(0,__proto,'scrollingPosY',function(){
		return ToolSet.clamp(-this._container.y,0,this._overlapSize.y);
	});

	ScrollPane.easeFunc=function(t,d){
		return (t=t / d-1)*t *t+1;
	}

	ScrollPane.draggingPane=null;
	ScrollPane._gestureFlag=0;
	ScrollPane.TWEEN_TIME_GO=0.5;
	ScrollPane.TWEEN_TIME_DEFAULT=0.3;
	ScrollPane.PULL_RATIO=0.5;
	__static(ScrollPane,
	['sHelperPoint',function(){return this.sHelperPoint=new Point();},'sHelperRect',function(){return this.sHelperRect=new Rectangle();},'sEndPos',function(){return this.sEndPos=new Point();},'sOldChange',function(){return this.sOldChange=new Point();}
	]);
	return ScrollPane;
})()


//class fairygui.ScrollType
var ScrollType=(function(){
	function ScrollType(){}
	__class(ScrollType,'fairygui.ScrollType');
	ScrollType.parse=function(value){
		switch (value){
			case "horizontal":
				return 0;
			case "vertical":
				return 1;
			case "both":
				return 2;
			default :
				return 1;
			}
	}

	ScrollType.Horizontal=0;
	ScrollType.Vertical=1;
	ScrollType.Both=2;
	return ScrollType;
})()


//class fairygui.Transition
var Transition=(function(){
	var TransitionActionType,TransitionItem,TweenConfig,TValue_Visible,TValue_Animation,TValue_Sound,TValue_Transition,TValue_Shake,TValue;
	function Transition(owner){
		this.name=null;
		this._owner=null;
		this._ownerBaseX=NaN;
		this._ownerBaseY=NaN;
		this._items=null;
		this._totalTimes=0;
		this._totalTasks=0;
		this._playing=false;
		this._paused=false;
		this._onComplete=null;
		this._options=0;
		this._reversed=false;
		this._totalDuration=NaN;
		this._autoPlay=false;
		this._autoPlayTimes=0;
		this._autoPlayDelay=NaN;
		this._timeScale=NaN;
		this._startTime=NaN;
		this._endTime=NaN;
		this.OPTION_IGNORE_DISPLAY_CONTROLLER=1;
		this.OPTION_AUTO_STOP_DISABLED=2;
		this.OPTION_AUTO_STOP_AT_END=4;
		this._owner=owner;
		this._items=[];
		this._totalDuration=0;
		this._autoPlayTimes=1;
		this._autoPlayDelay=0;
		this._timeScale=1;
		this._startTime=0;
		this._endTime=0;
	}

	__class(Transition,'fairygui.Transition');
	var __proto=Transition.prototype;
	__proto.play=function(onComplete,times,delay,startTime,endTime){
		(times===void 0)&& (times=1);
		(delay===void 0)&& (delay=0);
		(startTime===void 0)&& (startTime=0);
		(endTime===void 0)&& (endTime=-1);
		this._play(onComplete,times,delay,startTime,endTime,false);
	}

	__proto.playReverse=function(onComplete,times,delay,startTime,endTime){
		(times===void 0)&& (times=1);
		(delay===void 0)&& (delay=0);
		(startTime===void 0)&& (startTime=0);
		(endTime===void 0)&& (endTime=-1);
		this._play(onComplete,1,delay,startTime,endTime,true);
	}

	__proto.changePlayTimes=function(value){
		this._totalTimes=value;
	}

	__proto.setAutoPlay=function(value,times,delay){
		(times===void 0)&& (times=1);
		(delay===void 0)&& (delay=0);
		if (this._autoPlay !=value){
			this._autoPlay=value;
			this._autoPlayTimes=times;
			this._autoPlayDelay=delay;
			if (this._autoPlay){
				if (this._owner.onStage)
					this.play(null,null,this._autoPlayTimes,this._autoPlayDelay);
			}
			else{
				if (!this._owner.onStage)
					this.stop(false,true);
			}
		}
	}

	__proto._play=function(onComplete,times,delay,startTime,endTime,reversed){
		(times===void 0)&& (times=1);
		(delay===void 0)&& (delay=0);
		(startTime===void 0)&& (startTime=0);
		(endTime===void 0)&& (endTime=-1);
		(reversed===void 0)&& (reversed=false);
		this.stop(true,true);
		this._totalTimes=times;
		this._reversed=reversed;
		this._startTime=startTime;
		this._endTime=endTime;
		this._playing=true;
		this._paused=false;
		this._onComplete=onComplete;
		var cnt=this._items.length;
		for (var i=0;i < cnt;i++){
			var item=this._items[i];
			if(item.target==null){
				if (item.targetId)
					item.target=this._owner.getChildById(item.targetId);
				else
				item.target=this._owner;
			}
			else if (item.target !=this._owner && item.target.parent !=this._owner)
			item.target=null;
			if (item.target !=null && item.type==10){
				var trans=(item.target).getTransition(item.value.transName);
				if(trans==this)
					trans=null;
				if (trans !=null){
					if (item.value.playTimes==0){
						var j=0;
						for (j=i-1;j >=0;j--){
							var item2=this._items[j];
							if (item2.type==10){
								if (item2.value.trans==trans){
									item2.value.stopTime=item.time-item2.time;
									break ;
								}
							}
						}
						if(j<0)
							item.value.stopTime=0;
						else
						trans=null;
					}
					else
					item.value.stopTime=-1;
				}
				item.value.trans=trans;
			}
		}
		if(delay==0)
			this.onDelayedPlay();
		else
		GTween.delayedCall(delay).onComplete(this.onDelayedPlay,this);
	}

	__proto.stop=function(setToComplete,processCallback){
		(setToComplete===void 0)&& (setToComplete=true);
		(processCallback===void 0)&& (processCallback=false);
		if (!this._playing)
			return;
		this._playing=false;
		this._totalTasks=0;
		this._totalTimes=0;
		var handler=this._onComplete;
		this._onComplete=null;
		GTween.kill(this);
		var cnt=this._items.length;
		if(this._reversed){
			for (var i=cnt-1;i >=0;i--){
				var item=this._items[i];
				if(item.target==null)
					continue ;
				this.stopItem(item,setToComplete);
			}
		}
		else{
			for (i=0;i < cnt;i++){
				item=this._items[i];
				if(item.target==null)
					continue ;
				this.stopItem(item,setToComplete);
			}
		}
		if (processCallback && handler !=null){
			handler.run();
		}
	}

	__proto.stopItem=function(item,setToComplete){
		if (item.displayLockToken!=0){
			item.target.releaseDisplayLock(item.displayLockToken);
			item.displayLockToken=0;
		}
		if (item.tweener !=null){
			item.tweener.kill(setToComplete);
			item.tweener=null;
			if (item.type==11 && !setToComplete){
				item.target._gearLocked=true;
				item.target.setXY(item.target.x-item.value.lastOffsetX,item.target.y-item.value.lastOffsetY);
				item.target._gearLocked=false;
			}
		}
		if (item.type==10){
			var trans=item.value.trans;
			if (trans !=null)
				trans.stop(setToComplete,false);
		}
	}

	__proto.setPaused=function(paused){
		if (!this._playing || this._paused==paused)
			return;
		this._paused=paused;
		var tweener=GTween.getTween(this);
		if (tweener !=null)
			tweener.setPaused(paused);
		var cnt=this._items.length;
		for (var i=0;i < cnt;i++){
			var item=this._items[i];
			if (item.target==null)
				continue ;
			if (item.type==10){
				if (item.value.trans !=null)
					item.value.trans.setPaused(paused);
			}
			else if (item.type==7){
				if (paused){
					item.value.flag=(item.target).playing;
					(item.target).playing=false;
				}
				else
				(item.target).playing=item.value.flag;
			}
			if (item.tweener !=null)
				item.tweener.setPaused(paused);
		}
	}

	__proto.dispose=function(){
		if(this._playing)
			GTween.kill(this);
		var cnt=this._items.length;
		for (var i=0;i < cnt;i++){
			var item=this._items[i];
			if (item.tweener !=null){
				item.tweener.kill();
				item.tweener=null;
			}
			item.target=null;
			item.hook=null;
			if (item.tweenConfig !=null)
				item.tweenConfig.endHook=null;
		}
		this._items.length=0;
		this._playing=false;
		this._onComplete=null;
	}

	__proto.setValue=function(label,__args){
		var args=[];for(var i=1,sz=arguments.length;i<sz;i++)args.push(arguments[i]);
		var cnt=this._items.length;
		var value;
		for (var i=0;i < cnt;i++){
			var item=this._items[i];
			if (item.label==label){
				if (item.tweenConfig !=null)
					value=item.tweenConfig.startValue;
				else
				value=item.value;
			}
			else if (item.tweenConfig !=null && item.tweenConfig.endLabel==label){
				value=item.tweenConfig.endValue;
			}
			else
			continue ;
			switch (item.type){
				case 0:
				case 1:
				case 3:
				case 2:
				case 13:
					value.b1=true;
					value.b2=true;
					value.f1=parseFloat(args[0]);
					value.f2=parseFloat(args[1]);
					break ;
				case 4:
					value.f1=parseFloat(args[0]);
					break ;
				case 5:
					value.f1=parseFloat(args[0]);
					break ;
				case 6:
					value.f1=parseFloat(args[0]);
					break ;
				case 7:
					value.frame=parseInt(args[0]);
					if (args.length > 1)
						value.playing=args[1];
					break ;
				case 8:
					value.visible=args[0];
					break ;
				case 9:
					value.sound=args[0];
					if(args.length > 1)
						value.volume=parseFloat(args[1]);
					break ;
				case 10:
					value.transName=args[0];
					if (args.length > 1)
						value.playTimes=parseInt(args[1]);
					break ;
				case 11:
					value.amplitude=parseFloat(args[0]);
					if (args.length > 1)
						value.duration=parseFloat(args[1]);
					break ;
				case 12:
					value.f1=parseFloat(args[0]);
					value.f2=parseFloat(args[1]);
					value.f3=parseFloat(args[2]);
					value.f4=parseFloat(args[3]);
					break ;
				}
		}
	}

	__proto.setHook=function(label,callback){
		var cnt=this._items.length;
		for (var i=0;i < cnt;i++){
			var item=this._items[i];
			if (item.label==label){
				item.hook=callback;
				break ;
			}
			else if (item.tweenConfig !=null && item.tweenConfig.endLabel==label){
				item.tweenConfig.endHook=callback;
				break ;
			}
		}
	}

	__proto.clearHooks=function(){
		var cnt=this._items.length;
		for (var i=0;i < cnt;i++){
			var item=this._items[i];
			item.hook=null;
			if (item.tweenConfig !=null)
				item.tweenConfig.endHook=null;
		}
	}

	__proto.setTarget=function(label,newTarget){
		var cnt=this._items.length;
		for (var i=0;i < cnt;i++){
			var item=this._items[i];
			if (item.label==label)
				item.targetId=newTarget.id;
		}
	}

	__proto.setDuration=function(label,value){
		var cnt=this._items.length;
		for (var i=0;i < cnt;i++){
			var item=this._items[i];
			if (item.tweenConfig !=null && item.label==label)
				item.tweenConfig.duration=value;
		}
	}

	__proto.getLabelTime=function(label){
		var cnt=this._items.length;
		for (var i=0;i < cnt;i++){
			var item=this._items[i];
			if (item.label==label)
				return item.time;
			else if (item.tweenConfig !=null && item.tweenConfig.endLabel==label)
			return item.time+item.tweenConfig.duration;
		}
		return Number.NaN;
	}

	__proto.updateFromRelations=function(targetId,dx,dy){
		var cnt=this._items.length;
		if (cnt==0)
			return;
		for (var i=0;i < cnt;i++){
			var item=this._items[i];
			if (item.type==0 && item.targetId==targetId){
				if (item.tweenConfig!=null){
					item.tweenConfig.startValue.f1+=dx;
					item.tweenConfig.startValue.f2+=dy;
					item.tweenConfig.endValue.f1+=dx;
					item.tweenConfig.endValue.f2+=dy;
				}
				else{
					item.value.f1+=dx;
					item.value.f2+=dy;
				}
			}
		}
	}

	__proto.onOwnerAddedToStage=function(){
		if (this._autoPlay && !this._playing)
			this.play(null,null,this._autoPlayTimes,this._autoPlayDelay);
	}

	__proto.onOwnerRemovedFromStage=function(){
		if ((this._options & this.OPTION_AUTO_STOP_DISABLED)==0)
			this.stop((this._options & this.OPTION_AUTO_STOP_AT_END)!=0 ? true :false,false);
	}

	__proto.onDelayedPlay=function(){
		this.internalPlay();
		this._playing=this._totalTasks>0;
		if (this._playing){
			if ((this._options & this.OPTION_IGNORE_DISPLAY_CONTROLLER)!=0){
				var cnt=this._items.length;
				for (var i=0;i < cnt;i++){
					var item=this._items[i];
					if (item.target !=null && item.target!=this._owner)
						item.displayLockToken=item.target.addDisplayLock();
				}
			}
		}
		else if (this._onComplete !=null){
			var handler=this._onComplete;
			this._onComplete=null;
			handler.run();
		}
	}

	__proto.internalPlay=function(){
		this._ownerBaseX=this._owner.x;
		this._ownerBaseY=this._owner.y;
		this._totalTasks=0;
		var cnt=this._items.length;
		var item;
		var needSkipAnimations=false;
		if (!this._reversed){
			for (var i=0;i < cnt;i++){
				item=this._items[i];
				if (item.target==null)
					continue ;
				if (item.type==7 && this._startTime !=0 && item.time <=this._startTime){
					needSkipAnimations=true;
					item.value.flag=false;
				}
				else
				this.playItem(item);
			}
		}
		else{
			for (i=0;i < cnt;i++){
				item=this._items[i];
				if (item.target==null)
					continue ;
				this.playItem(item);
			}
		}
		if (needSkipAnimations)
			this.skipAnimations();
	}

	__proto.playItem=function(item){
		var time=NaN;
		if (item.tweenConfig !=null){
			if (this._reversed)
				time=(this._totalDuration-item.time-item.tweenConfig.duration);
			else
			time=item.time;
			if (this._endTime==-1 || time <=this._endTime){
				var startValue;
				var endValue;
				if(this._reversed){
					startValue=item.tweenConfig.endValue;
					endValue=item.tweenConfig.startValue;
				}
				else{
					startValue=item.tweenConfig.startValue;
					endValue=item.tweenConfig.endValue;
				}
				item.value.b1=startValue.b1 || endValue.b1;
				item.value.b2=startValue.b2 || endValue.b2;
				switch(item.type){
					case 0:
					case 1:
					case 2:
					case 13:
						item.tweener=GTween.to2(startValue.f1,startValue.f2,endValue.f1,endValue.f2,item.tweenConfig.duration);
						break ;
					case 4:
					case 5:
						item.tweener=GTween.to(startValue.f1,endValue.f1,item.tweenConfig.duration);
						break ;
					case 6:
						item.tweener=GTween.toColor(startValue.f1,endValue.f1,item.tweenConfig.duration);
						break ;
					case 12:
						item.tweener=GTween.to4(startValue.f1,startValue.f2,startValue.f3,startValue.f4,
						endValue.f1,endValue.f2,endValue.f3,endValue.f4,item.tweenConfig.duration);
						break ;
					}
				item.tweener.setDelay(time)
				.setEase(item.tweenConfig.easeType)
				.setRepeat(item.tweenConfig.repeat,item.tweenConfig.yoyo)
				.setTimeScale(this._timeScale)
				.setTarget(item)
				.onStart(this.onTweenStart,this)
				.onUpdate(this.onTweenUpdate,this)
				.onComplete(this.onTweenComplete,this);
				if (this._endTime >=0)
					item.tweener.setBreakpoint(this._endTime-time);
				this._totalTasks++;
			}
		}
		else if(item.type==11){
			if (this._reversed)
				time=(this._totalDuration-item.time-item.value.duration);
			else
			time=item.time;
			item.value.offsetX=item.value.offsetY=0;
			item.value.lastOffsetX=item.value.lastOffsetY=0;
			item.tweener=GTween.shake(0,0,item.value.amplitude,item.value.duration)
			.setDelay(time)
			.setTimeScale(this._timeScale)
			.setTarget(item)
			.onUpdate(this.onTweenUpdate,this)
			.onComplete(this.onTweenComplete,this);
			if (this._endTime >=0)
				item.tweener.setBreakpoint(this._endTime-item.time);
			this._totalTasks++;
		}
		else{
			if (this._reversed)
				time=(this._totalDuration-item.time);
			else
			time=item.time;
			if (time <=this._startTime){
				this.applyValue(item);
				this.callHook(item,false);
			}
			else if (this._endTime==-1 || time <=this._endTime){
				this._totalTasks++;
				item.tweener=GTween.delayedCall(time)
				.setTimeScale(this._timeScale)
				.setTarget(item)
				.onComplete(this.onDelayedPlayItem,this);
			}
		}
		if (item.tweener !=null)
			item.tweener.seek(this._startTime);
	}

	__proto.skipAnimations=function(){
		var frame=0;
		var playStartTime=NaN;
		var playTotalTime=NaN;
		var value;
		var target;
		var item;
		var cnt=this._items.length;
		for (var i=0;i < cnt;i++){
			item=this._items[i];
			if (item.type !=7 || item.time > this._startTime)
				continue ;
			value=item.value;
			if (value.flag)
				continue ;
			target=(item.target);
			frame=target.frame;
			playStartTime=target.playing ? 0 :-1;
			playTotalTime=0;
			for (var j=i;j < cnt;j++){
				item=this._items[j];
				if (item.type !=7 || item.target !=target || item.time > this._startTime)
					continue ;
				value=item.value;
				value.flag=true;
				if (value.frame !=-1){
					frame=value.frame;
					if (value.playing)
						playStartTime=item.time;
					else
					playStartTime=-1;
					playTotalTime=0;
				}
				else{
					if (value.playing){
						if (playStartTime < 0)
							playStartTime=item.time;
					}
					else{
						if (playStartTime >=0)
							playTotalTime+=(item.time-playStartTime);
						playStartTime=-1;
					}
				}
				this.callHook(item,false);
			}
			if (playStartTime >=0)
				playTotalTime+=(this._startTime-playStartTime);
			target.playing=playStartTime>=0;
			target.frame=frame;
			if (playTotalTime > 0)
				target.advance(playTotalTime*1000);
		}
	}

	__proto.onDelayedPlayItem=function(tweener){
		var item=tweener.target;
		item.tweener=null;
		this._totalTasks--;
		this.applyValue(item);
		this.callHook(item,false);
		this.checkAllComplete();
	}

	__proto.onTweenStart=function(tweener){
		var item=tweener.target;
		if (item.type==0 || item.type==1){
			var startValue;
			var endValue;
			if (this._reversed){
				startValue=item.tweenConfig.endValue;
				endValue=item.tweenConfig.startValue;
			}
			else{
				startValue=item.tweenConfig.startValue;
				endValue=item.tweenConfig.endValue;
			}
			if (item.type==0){
				if (item.target !=this._owner){
					if (!startValue.b1)
						startValue.f1=item.target.x;
					if (!startValue.b2)
						startValue.f2=item.target.y;
				}
			}
			else{
				if (!startValue.b1)
					startValue.f1=item.target.width;
				if (!startValue.b2)
					startValue.f2=item.target.height;
			}
			if (!endValue.b1)
				endValue.f1=startValue.f1;
			if (!endValue.b2)
				endValue.f2=startValue.f2;
			tweener.startValue.x=startValue.f1;
			tweener.startValue.y=startValue.f2;
			tweener.endValue.x=endValue.f1;
			tweener.endValue.y=endValue.f2;
		}
		this.callHook(item,false);
	}

	__proto.onTweenUpdate=function(tweener){
		var item=tweener.target;
		switch (item.type){
			case 0:
			case 1:
			case 2:
			case 13:
				item.value.f1=tweener.value.x;
				item.value.f2=tweener.value.y;
				break ;
			case 4:
			case 5:
				item.value.f1=tweener.value.x;
				break ;
			case 6:
				item.value.f1=tweener.value.color;
				break ;
			case 12:
				item.value.f1=tweener.value.x;
				item.value.f2=tweener.value.y;
				item.value.f3=tweener.value.z;
				item.value.f4=tweener.value.w;
				break ;
			case 11:
				item.value.offsetX=tweener.deltaValue.x;
				item.value.offsetY=tweener.deltaValue.y;
				break ;
			}
		this.applyValue(item);
	}

	__proto.onTweenComplete=function(tweener){
		var item=tweener.target;
		item.tweener=null;
		this._totalTasks--;
		if (tweener.allCompleted)
			this.callHook(item,true);
		this.checkAllComplete();
	}

	__proto.onPlayTransCompleted=function(item){
		this._totalTasks--;
		this.checkAllComplete();
	}

	__proto.callHook=function(item,tweenEnd){
		if (tweenEnd){
			if (item.tweenConfig!=null && item.tweenConfig.endHook !=null)
				item.tweenConfig.endHook.run();
		}
		else{
			if (item.time >=this._startTime && item.hook !=null)
				item.hook.run();
		}
	}

	__proto.checkAllComplete=function(){
		if (this._playing && this._totalTasks==0){
			if (this._totalTimes < 0){
				this.internalPlay();
			}
			else{
				this._totalTimes--;
				if (this._totalTimes > 0)
					this.internalPlay();
				else{
					this._playing=false;
					var cnt=this._items.length;
					for (var i=0;i < cnt;i++){
						var item=this._items[i];
						if (item.target !=null && item.displayLockToken!=0){
							item.target.releaseDisplayLock(item.displayLockToken);
							item.displayLockToken=0;
						}
					}
					if (this._onComplete !=null){
						var handler=this._onComplete;
						this._onComplete=null;
						handler.run();
					}
				}
			}
		}
	}

	__proto.applyValue=function(item){
		item.target._gearLocked=true;
		switch (item.type){
			case 0:
				if(item.target==this._owner){
					var f1=NaN,f2=NaN;
					if (!item.value.b1)
						f1=item.target.x;
					else
					f1=item.value.f1+this._ownerBaseX;
					if (!item.value.b2)
						f2=item.target.y;
					else
					f2=item.value.f2+this._ownerBaseY;
					item.target.setXY(f1,f2);
				}
				else{
					if (!item.value.b1)
						item.value.f1=item.target.x;
					if (!item.value.b2)
						item.value.f2=item.target.y;
					item.target.setXY(item.value.f1,item.value.f2);
				}
				break ;
			case 1:
				if (!item.value.b1)
					item.value.f1=item.target.width;
				if (!item.value.b2)
					item.value.f2=item.target.height;
				item.target.setSize(item.value.f1,item.value.f2);
				break ;
			case 3:
				item.target.setPivot(item.value.f1,item.value.f2,item.target.pivotAsAnchor);
				break ;
			case 4:
				item.target.alpha=item.value.f1;
				break ;
			case 5:
				item.target.rotation=item.value.f1;
				break ;
			case 2:
				item.target.setScale(item.value.f1,item.value.f2);
				break ;
			case 13:
				break ;
			case 6:
				(item.target).color=item.value.f1;
				break ;
			case 7:
				if (item.value.frame>=0)
					(item.target).frame=item.value.frame;
				(item.target).playing=item.value.playing;
				(item.target).timeScale=this._timeScale;
				break ;
			case 8:
				item.target.visible=item.value.visible;
				break ;
			case 10:
				if (this._playing){
					var trans=item.value.trans;
					if (trans !=null){
						this._totalTasks++;
						var startTime=this._startTime > item.time ? (this._startTime-item.time):0;
						var endTime=this._endTime >=0 ? (this._endTime-item.time):-1;
						if (item.value.stopTime >=0 && (endTime < 0 || endTime > item.value.stopTime))
							endTime=item.value.stopTime;
						trans.timeScale=this._timeScale;
						trans._play(Handler.create(this,this.onPlayTransCompleted,[item]),item.value.playTimes,0,startTime,endTime,this._reversed);
					}
				}
				break ;
			case 9:
				if (this._playing && item.time >=this._startTime){
					if(item.value.audioClip==null){
						var pi=UIPackage.getItemByURL(item.value.sound);
						if(pi)
							item.value.audioClip=pi.owner.getItemAssetURL(pi);
						else
						item.value.audioClip=item.value.sound;
					}
					if(item.value.audioClip)
						GRoot.inst.playOneShotSound(item.value.audioClip,item.value.volume);
				}
				break ;
			case 11:
				item.target.setXY(item.target.x-item.value.lastOffsetX+item.value.offsetX,item.target.y-item.value.lastOffsetY+item.value.offsetY);
				item.value.lastOffsetX=item.value.offsetX;
				item.value.lastOffsetY=item.value.offsetY;
				break ;
			case 12:{
					var arr=item.target.filters;
					var cm=new ColorMatrix();
					cm.adjustBrightness(item.value.f1);
					cm.adjustContrast(item.value.f2);
					cm.adjustSaturation(item.value.f3);
					cm.adjustHue(item.value.f4);
					arr=[new ColorFilter(cm)];
					item.target.filters=arr;
					break ;
				}
			}
		item.target._gearLocked=false;
	}

	__proto.setup=function(xml){
		this.name=xml.getAttribute("name");
		var str=xml.getAttribute("options");
		if(str)
			this._options=parseInt(str);
		str=xml.getAttribute("autoPlay");
		if(str)
			this._autoPlay=str=="true";
		if(this._autoPlay){
			str=xml.getAttribute("autoPlayRepeat");
			if(str)
				this._autoPlayTimes=parseInt(str);
			str=xml.getAttribute("autoPlayDelay");
			if(str)
				this._autoPlayDelay=parseFloat(str);
		}
		str=xml.getAttribute("fps");
		var frameInterval=NaN;
		if(str)
			frameInterval=1/parseInt(str);
		else
		frameInterval=1/24;
		var col=xml.childNodes;
		var length1=col.length;
		for(var i1=0;i1 < length1;i1++){
			var cxml=col[i1];
			if(cxml.nodeName!="item")
				continue ;
			var item=new TransitionItem(this.parseItemType(cxml.getAttribute("type")));
			this._items.push(item);
			item.time=parseInt(cxml.getAttribute("time"))*frameInterval;
			item.targetId=cxml.getAttribute("target");
			if(cxml.getAttribute("tween")=="true")
				item.tweenConfig=new TweenConfig();
			item.label=cxml.getAttribute("label");
			if (item.tweenConfig !=null){
				item.tweenConfig.duration=parseInt(cxml.getAttribute("duration"))*frameInterval;
				if(item.time+item.tweenConfig.duration > this._totalDuration)
					this._totalDuration=item.time+item.tweenConfig.duration;
				str=cxml.getAttribute("ease");
				if(str)
					item.tweenConfig.easeType=EaseType.parseEaseType(str);
				str=cxml.getAttribute("repeat");
				if(str)
					item.tweenConfig.repeat=parseInt(str);
				item.tweenConfig.yoyo=cxml.getAttribute("yoyo")=="true";
				item.tweenConfig.endLabel=cxml.getAttribute("label2");
				var v=cxml.getAttribute("endValue");
				if(v){
					this.decodeValue(item,cxml.getAttribute("startValue"),item.tweenConfig.startValue);
					this.decodeValue(item,v,item.tweenConfig.endValue);
				}
				else {
					this.decodeValue(item,cxml.getAttribute("startValue"),item.value);
				}
			}
			else {
				if(item.time > this._totalDuration)
					this._totalDuration=item.time;
				this.decodeValue(item,cxml.getAttribute("value"),item.value);
			}
		}
	}

	__proto.parseItemType=function(str){
		var type=0;
		switch(str){
			case "XY":
				type=0;
				break ;
			case "Size":
				type=1;
				break ;
			case "Scale":
				type=2;
				break ;
			case "Pivot":
				type=3;
				break ;
			case "Alpha":
				type=4;
				break ;
			case "Rotation":
				type=5;
				break ;
			case "Color":
				type=6;
				break ;
			case "Animation":
				type=7;
				break ;
			case "Visible":
				type=8;
				break ;
			case "Sound":
				type=9;
				break ;
			case "Transition":
				type=10;
				break ;
			case "Shake":
				type=11;
				break ;
			case "ColorFilter":
				type=12;
				break ;
			case "Skew":
				type=13;
				break ;
			default :
				type=14;
				break ;
			}
		return type;
	}

	__proto.decodeValue=function(item,str,value){
		var arr;
		switch(item.type){
			case 0:
			case 1:
			case 3:
			case 13:
				arr=str.split(",");
				if (arr[0]=="-"){
					value.b1=false;
				}
				else{
					value.f1=parseFloat(arr[0]);
					value.b1=true;
				}
				if(arr[1]=="-"){
					value.b2=false;
				}
				else{
					value.f2=parseFloat(arr[1]);
					value.b2=true;
				}
				break ;
			case 4:
				value.f1=parseFloat(str);
				break ;
			case 5:
				value.f1=parseFloat(str);
				break ;
			case 2:
				arr=str.split(",");
				value.f1=parseFloat(arr[0]);
				value.f2=parseFloat(arr[1]);
				break ;
			case 6:
				value.f1=ToolSet.convertFromHtmlColor(str);
				break ;
			case 7:
				arr=str.split(",");
				if(arr[0]=="-")
					value.frame=-1;
				else
				value.frame=parseInt(arr[0]);
				value.playing=arr[1]=="p";
				break ;
			case 8:
				value.visible=str=="true";
				break ;
			case 9:
				arr=str.split(",");
				value.sound=arr[0];
				if(arr.length>1){
					var intv=parseInt(arr[1]);
					if(intv==0 || intv==100)
						value.volume=1;
					else
					value.volume=intv/100;
				}
				else
				value.volume=1;
				break ;
			case 10:
				arr=str.split(",");
				value.transName=arr[0];
				if (arr.length > 1)
					value.playTimes=parseInt(arr[1]);
				else
				value.playTimes=1;
				break ;
			case 11:
				arr=str.split(",");
				value.amplitude=parseFloat(arr[0]);
				value.duration=parseFloat(arr[1]);
				break ;
			case 12:
				arr=str.split(",");
				value.f1=parseFloat(arr[0]);
				value.f2=parseFloat(arr[1]);
				value.f3=parseFloat(arr[2]);
				value.f4=parseFloat(arr[3]);
				break ;
			}
	}

	__getset(0,__proto,'playing',function(){
		return this._playing;
	});

	__getset(0,__proto,'timeScale',function(){
		return this._timeScale;
		},function(value){
		this._timeScale=value;
		if(this._timeScale !=value){
			if (this._playing){
				var cnt=this._items.length;
				for (var i=0;i < cnt;i++){
					var item=this._items[i];
					if (item.tweener !=null)
						item.tweener.setTimeScale(value);
					else if (item.type==10){
						if(item.value.trans !=null)
							item.value.trans.timeScale=value;
					}
					else if(item.type==7){
						if(item.target !=null)
							(item.target).timeScale=value;
					}
				}
			}
		}
	});

	Transition.__init$=function(){
		//class TransitionActionType
		TransitionActionType=(function(){
			function TransitionActionType(){}
			__class(TransitionActionType,'');
			TransitionActionType.XY=0;
			TransitionActionType.Size=1;
			TransitionActionType.Scale=2;
			TransitionActionType.Pivot=3;
			TransitionActionType.Alpha=4;
			TransitionActionType.Rotation=5;
			TransitionActionType.Color=6;
			TransitionActionType.Animation=7;
			TransitionActionType.Visible=8;
			TransitionActionType.Sound=9;
			TransitionActionType.Transition=10;
			TransitionActionType.Shake=11;
			TransitionActionType.ColorFilter=12;
			TransitionActionType.Skew=13;
			TransitionActionType.Unknown=14;
			return TransitionActionType;
		})()
		//class TransitionItem
		TransitionItem=(function(){
			function TransitionItem(type){
				this.time=NaN;
				this.targetId=null;
				this.type=0;
				this.tweenConfig=null;
				this.label=null;
				this.value=null;
				this.hook=null;
				this.tweener=null;
				this.target=null;
				this.displayLockToken=0;
				this.type=type;
				switch (type){
					case 0:
					case 1:
					case 2:
					case 3:
					case 13:
					case 4:
					case 5:
					case 6:
					case 12:
						this.value=new TValue();
						break ;
					case 7:
						this.value=new TValue_Animation();
						break ;
					case 11:
						this.value=new TValue_Shake();
						break ;
					case 9:
						this.value=new TValue_Sound();
						break ;
					case 10:
						this.value=new TValue_Transition();
						break ;
					case 8:
						this.value=new TValue_Visible();
						break ;
					}
			}
			__class(TransitionItem,'');
			return TransitionItem;
		})()
		//class TweenConfig
		TweenConfig=(function(){
			function TweenConfig(){
				this.duration=NaN;
				this.easeType=0;
				this.repeat=0;
				this.yoyo=false;
				this.startValue=null;
				this.endValue=null;
				this.endLabel=null;
				this.endHook=null;
				this.easeType=5;
				this.startValue=new TValue();
				this.endValue=new TValue();
			}
			__class(TweenConfig,'');
			return TweenConfig;
		})()
		//class TValue_Visible
		TValue_Visible=(function(){
			function TValue_Visible(){
				this.visible=false;
			}
			__class(TValue_Visible,'');
			return TValue_Visible;
		})()
		//class TValue_Animation
		TValue_Animation=(function(){
			function TValue_Animation(){
				this.frame=0;
				this.playing=false;
				this.flag=false;
			}
			__class(TValue_Animation,'');
			return TValue_Animation;
		})()
		//class TValue_Sound
		TValue_Sound=(function(){
			function TValue_Sound(){
				this.sound=null;
				this.volume=NaN;
				this.audioClip=null;
			}
			__class(TValue_Sound,'');
			return TValue_Sound;
		})()
		//class TValue_Transition
		TValue_Transition=(function(){
			function TValue_Transition(){
				this.transName=null;
				this.playTimes=0;
				this.trans=null;
				this.stopTime=NaN;
			}
			__class(TValue_Transition,'');
			return TValue_Transition;
		})()
		//class TValue_Shake
		TValue_Shake=(function(){
			function TValue_Shake(){
				this.amplitude=NaN;
				this.duration=NaN;
				this.offsetX=NaN;
				this.offsetY=NaN;
				this.lastOffsetX=NaN;
				this.lastOffsetY=NaN;
			}
			__class(TValue_Shake,'');
			return TValue_Shake;
		})()
		//class TValue
		TValue=(function(){
			function TValue(){
				this.f1=NaN;
				this.f2=NaN;
				this.f3=NaN;
				this.f4=NaN;
				this.b1=false;
				this.b2=false;
				this.b1=this.b2=true;
			}
			__class(TValue,'');
			return TValue;
		})()
	}

	return Transition;
})()


//class fairygui.tree.TreeNode
var TreeNode=(function(){
	function TreeNode(hasChild){
		this._data=null;
		this._parent=null;
		this._children=null;
		this._expanded=false;
		this._tree=null;
		this._cell=null;
		this._level=0;
		if(hasChild)
			this._children=[];
	}

	__class(TreeNode,'fairygui.tree.TreeNode');
	var __proto=TreeNode.prototype;
	__proto.setCell=function(value){
		this._cell=value;
	}

	__proto.setLevel=function(value){
		this._level=value;
	}

	__proto.addChild=function(child){
		this.addChildAt(child,this._children.length);
		return child;
	}

	__proto.addChildAt=function(child,index){
		if(!child)
			throw new Error("child is null");
		var numChildren=this._children.length;
		if (index >=0 && index <=numChildren){
			if (child._parent==this){
				this.setChildIndex(child,index);
			}
			else{
				if(child._parent)
					child._parent.removeChild(child);
				var cnt=this._children.length;
				if (index==cnt)
					this._children.push(child);
				else
				this._children.splice(index,0,child);
				child._parent=this;
				child._level=this._level+1;
				child.setTree(this._tree);
				if(this._cell!=null && this._cell.parent!=null && this._expanded)
					this._tree.afterInserted(child);
			}
			return child;
		}
		else{
			throw new Error("Invalid child index");
		}
	}

	__proto.removeChild=function(child){
		var childIndex=this._children.indexOf(child);
		if (childIndex !=-1){
			this.removeChildAt(childIndex);
		}
		return child;
	}

	__proto.removeChildAt=function(index){
		if (index >=0 && index < this.numChildren){
			var child=this._children[index];
			this._children.splice(index,1);
			child._parent=null;
			if(this._tree!=null){
				child.setTree(null);
				this._tree.afterRemoved(child);
			}
			return child;
		}
		else{
			throw new Error("Invalid child index");
		}
	}

	__proto.removeChildren=function(beginIndex,endIndex){
		(beginIndex===void 0)&& (beginIndex=0);
		(endIndex===void 0)&& (endIndex=-1);
		if (endIndex < 0 || endIndex >=this.numChildren)
			endIndex=this.numChildren-1;
		for (var i=beginIndex;i<=endIndex;++i)
		this.removeChildAt(beginIndex);
	}

	__proto.getChildAt=function(index){
		if (index >=0 && index < this.numChildren)
			return this._children[index];
		else
		throw new Error("Invalid child index");
	}

	__proto.getChildIndex=function(child){
		return this._children.indexOf(child);
	}

	__proto.getPrevSibling=function(){
		if(this._parent==null)
			return null;
		var i=this._parent._children.indexOf(this);
		if(i<=0)
			return null;
		return this._parent._children[i-1];
	}

	__proto.getNextSibling=function(){
		if(this._parent==null)
			return null;
		var i=this._parent._children.indexOf(this);
		if(i<0 || i>=this._parent._children.length-1)
			return null;
		return this._parent._children[i+1];
	}

	__proto.setChildIndex=function(child,index){
		var oldIndex=this._children.indexOf(child);
		if (oldIndex==-1)
			throw new Error("Not a child of this container");
		var cnt=this._children.length;
		if(index<0)
			index=0;
		else if(index>cnt)
		index=cnt;
		if(oldIndex==index)
			return;
		this._children.splice(oldIndex,1);
		this._children.splice(index,0,child);
		if(this._cell!=null && this._cell.parent!=null && this._expanded)
			this._tree.afterMoved(child);
	}

	__proto.swapChildren=function(child1,child2){
		var index1=this._children.indexOf(child1);
		var index2=this._children.indexOf(child2);
		if (index1==-1 || index2==-1)
			throw new Error("Not a child of this container");
		this.swapChildrenAt(index1,index2);
	}

	__proto.swapChildrenAt=function(index1,index2){
		var child1=this._children[index1];
		var child2=this._children[index2];
		this.setChildIndex(child1,index2);
		this.setChildIndex(child2,index1);
	}

	__proto.setTree=function(value){
		this._tree=value;
		if(this._tree!=null && this._tree.treeNodeWillExpand && this._expanded)
			this._tree.treeNodeWillExpand.runWith(this);
		if(this._children!=null){
			var cnt=this._children.length;
			for(var i=0;i<cnt;i++){
				var node=this._children[i];
				node._level=this._level+1;
				node.setTree(value);
			}
		}
	}

	__getset(0,__proto,'expanded',function(){
		return this._expanded;
		},function(value){
		if(this._children==null)
			return;
		if(this._expanded!=value){
			this._expanded=value;
			if(this._tree!=null){
				if(this._expanded)
					this._tree.afterExpanded(this);
				else
				this._tree.afterCollapsed(this);
			}
		}
	});

	__getset(0,__proto,'tree',function(){
		return this._tree;
	});

	__getset(0,__proto,'level',function(){
		return this._level;
	});

	__getset(0,__proto,'cell',function(){
		return this._cell;
	});

	__getset(0,__proto,'data',function(){
		return this._data;
		},function(value){
		this._data=value;
	});

	__getset(0,__proto,'parent',function(){
		return this._parent;
	});

	__getset(0,__proto,'isFolder',function(){
		return this._children!=null;
	});

	__getset(0,__proto,'text',function(){
		if(this._cell!=null)
			return this._cell.text;
		else
		return null;
	});

	__getset(0,__proto,'numChildren',function(){
		return this._children.length;
	});

	return TreeNode;
})()


//class fairygui.tree.TreeView
var TreeView=(function(){
	function TreeView(list){
		this._list=null;
		this._root=null;
		this._indent=0;
		/**
		*当需要为节点创建一个显示对象时调用这个Handler。参数为节点对象（TreeNode）。应该返回一个GObject。
		*/
		this.treeNodeCreateCell=null;
		/**
		*当节点需要渲染时调用这个Handler。参数为节点对象（TreeNode）。
		*/
		this.treeNodeRender=null;
		/**
		*当目录节点展开或者收缩时调用这个Handler。参数为节点对象（TreeNode）。可以用节点的expanded属性判断目标状态。
		*/
		this.treeNodeWillExpand=null;
		/**
		*当节点被点击时调用这个Handler。参数有两个，第一个为节点对象（TreeNode），第二个为事件对象(Event)。
		*/
		this.treeNodeClick=null;
		this._list=list;
		this._list.removeChildrenToPool();
		this._list.on("fui_click_item",this,this.__clickItem);
		this._root=new TreeNode(true);
		this._root.setTree(this);
		this._root.setCell(this._list);
		this._root.expanded=true;
		this._indent=15;
	}

	__class(TreeView,'fairygui.tree.TreeView');
	var __proto=TreeView.prototype;
	__proto.getSelectedNode=function(){
		if(this._list.selectedIndex!=-1)
			return (this._list.getChildAt(this._list.selectedIndex).data);
		else
		return null;
	}

	__proto.getSelection=function(){
		var sels=this._list.getSelection();
		var cnt=sels.length;
		var ret=[];
		for(var i=0;i<cnt;i++){
			var node=(this._list.getChildAt(sels[i]).data);
			ret.push(node);
		}
		return ret;
	}

	__proto.addSelection=function(node,scrollItToView){
		(scrollItToView===void 0)&& (scrollItToView=false);
		var parentNode=node.parent;
		while(parentNode!=null && parentNode!=this._root){
			parentNode.expanded=true;
			parentNode=parentNode.parent;
		}
		if(!node.cell)
			return;
		this._list.addSelection(this._list.getChildIndex(node.cell),scrollItToView);
	}

	__proto.removeSelection=function(node){
		if(!node.cell)
			return;
		this._list.removeSelection(this._list.getChildIndex(node.cell));
	}

	__proto.clearSelection=function(){
		this._list.clearSelection();
	}

	__proto.getNodeIndex=function(node){
		return this._list.getChildIndex(node.cell);
	}

	__proto.updateNode=function(node){
		if(node.cell==null)
			return;
		if(this.treeNodeRender)
			this.treeNodeRender.runWith(node);
	}

	__proto.updateNodes=function(nodes){
		var cnt=nodes.length;
		for(var i=0;i<cnt;i++){
			var node=nodes[i];
			if(node.cell==null)
				return;
			if(this.treeNodeRender)
				this.treeNodeRender.runWith(node);
		}
	}

	__proto.expandAll=function(folderNode){
		folderNode.expanded=true;
		var cnt=folderNode.numChildren;
		for(var i=0;i<cnt;i++){
			var node=folderNode.getChildAt(i);
			if(node.isFolder)
				this.expandAll(node);
		}
	}

	__proto.collapseAll=function(folderNode){
		if(folderNode!=this._root)
			folderNode.expanded=false;
		var cnt=folderNode.numChildren;
		for(var i=0;i<cnt;i++){
			var node=folderNode.getChildAt(i);
			if(node.isFolder)
				this.collapseAll(node);
		}
	}

	__proto.createCell=function(node){
		if(this.treeNodeCreateCell)
			node.setCell(this.treeNodeCreateCell.runWith(node));
		else
		node.setCell((this._list.itemPool.getObject(this._list.defaultItem)));
		node.cell.data=node;
		var indentObj=node.cell.getChild("indent");
		if(indentObj!=null)
			indentObj.width=(node.level-1)*this._indent;
		var expandButton=(node.cell.getChild("expandButton"));
		if(expandButton){
			if(node.isFolder){
				expandButton.visible=true;
				expandButton.onClick(this,this.__clickExpandButton);
				expandButton.data=node;
				expandButton.selected=node.expanded;
			}
			else
			expandButton.visible=false;
		}
		if(this.treeNodeRender)
			this.treeNodeRender.runWith(node);
	}

	__proto.afterInserted=function(node){
		this.createCell(node);
		var index=this.getInsertIndexForNode(node);
		this._list.addChildAt(node.cell,index);
		if(this.treeNodeRender)
			this.treeNodeRender.runWith(node);
		if(node.isFolder && node.expanded)
			this.checkChildren(node,index);
	}

	__proto.getInsertIndexForNode=function(node){
		var prevNode=node.getPrevSibling();
		if(prevNode==null)
			prevNode=node.parent;
		var insertIndex=this._list.getChildIndex(prevNode.cell)+1;
		var myLevel=node.level;
		var cnt=this._list.numChildren;
		for(var i=insertIndex;i<cnt;i++){
			var testNode=(this._list.getChildAt(i).data);
			if(testNode.level<=myLevel)
				break ;
			insertIndex++;
		}
		return insertIndex;
	}

	__proto.afterRemoved=function(node){
		this.removeNode(node);
	}

	__proto.afterExpanded=function(node){
		if(node!=this._root && this.treeNodeWillExpand)
			this.treeNodeWillExpand(node);
		if(node.cell==null)
			return;
		if(node!=this._root){
			if(this.treeNodeRender)
				this.treeNodeRender.runWith(node);
			var expandButton=(node.cell.getChild("expandButton"));
			if(expandButton)
				expandButton.selected=true;
		}
		if(node.cell.parent!=null)
			this.checkChildren(node,this._list.getChildIndex(node.cell));
	}

	__proto.afterCollapsed=function(node){
		if(node!=this._root && this.treeNodeWillExpand)
			this.treeNodeWillExpand(node);
		if(node.cell==null)
			return;
		if(node!=this._root){
			if(this.treeNodeRender)
				this.treeNodeRender.runWith(node);
			var expandButton=(node.cell.getChild("expandButton"));
			if(expandButton)
				expandButton.selected=false;
		}
		if(node.cell.parent!=null)
			this.hideFolderNode(node);
	}

	__proto.afterMoved=function(node){
		if(!node.isFolder)
			this._list.removeChild(node.cell);
		else
		this.hideFolderNode(node);
		var index=this.getInsertIndexForNode(node);
		this._list.addChildAt(node.cell,index);
		if(node.isFolder && node.expanded)
			this.checkChildren(node,index);
	}

	__proto.checkChildren=function(folderNode,index){
		var cnt=folderNode.numChildren;
		for(var i=0;i<cnt;i++){
			index++;
			var node=folderNode.getChildAt(i);
			if(node.cell==null)
				this.createCell(node);
			if(!node.cell.parent)
				this._list.addChildAt(node.cell,index);
			if(node.isFolder && node.expanded)
				index=this.checkChildren(node,index);
		}
		return index;
	}

	__proto.hideFolderNode=function(folderNode){
		var cnt=folderNode.numChildren;
		for(var i=0;i<cnt;i++){
			var node=folderNode.getChildAt(i);
			if(node.cell && node.cell.parent!=null)
				this._list.removeChild(node.cell);
			if(node.isFolder && node.expanded)
				this.hideFolderNode(node);
		}
	}

	__proto.removeNode=function(node){
		if(node.cell!=null){
			if(node.cell.parent!=null)
				this._list.removeChild(node.cell);
			this._list.returnToPool(node.cell);
			node.cell.data=null;
			node.setCell(null);
		}
		if(node.isFolder){
			var cnt=node.numChildren;
			for(var i=0;i<cnt;i++){
				var node2=node.getChildAt(i);
				this.removeNode(node2);
			}
		}
	}

	__proto.__clickExpandButton=function(evt){
		evt.stopPropagation();
		var expandButton=(GObject.cast(evt.currentTarget));
		var node=(expandButton.parent.data);
		if(this._list.scrollPane!=null){
			var posY=this._list.scrollPane.posY;
			if(expandButton.selected)
				node.expanded=true;
			else
			node.expanded=false;
			this._list.scrollPane.posY=posY;
			this._list.scrollPane.scrollToView(node.cell);
		}
		else{
			if(expandButton.selected)
				node.expanded=true;
			else
			node.expanded=false;
		}
	}

	__proto.__clickItem=function(item,evt){
		if(this._list.scrollPane!=null)
			var posY=this._list.scrollPane.posY;
		var node=(item.data);
		if(this.treeNodeClick)
			this.treeNodeClick.runWith([node,evt]);
		if(this._list.scrollPane!=null){
			this._list.scrollPane.posY=posY;
			if(node.cell)
				this._list.scrollPane.scrollToView(node.cell);
		}
	}

	__getset(0,__proto,'list',function(){
		return this._list;
	});

	__getset(0,__proto,'root',function(){
		return this._root;
	});

	__getset(0,__proto,'indent',function(){
		return this._indent;
		},function(value){
		this._indent=value;
	});

	return TreeView;
})()


//class fairygui.tween.EaseManager
var EaseManager=(function(){
	var Bounce;
	function EaseManager(){}
	__class(EaseManager,'fairygui.tween.EaseManager');
	EaseManager.evaluate=function(easeType,time,duration,overshootOrAmplitude,period){
		switch (easeType){
			case 0:
				return time / duration;
			case 1:
				return-Math.cos(time / duration *EaseManager._PiOver2)+1;
			case 2:
				return Math.sin(time / duration *EaseManager._PiOver2);
			case 3:
				return-0.5 *(Math.cos(Math.PI *time / duration)-1);
			case 4:
				return (time /=duration)*time;
			case 5:
				return-(time /=duration)*(time-2);
			case 6:
				if ((time /=duration *0.5)< 1)return 0.5 *time *time;
				return-0.5 *((--time)*(time-2)-1);
			case 7:
				return (time /=duration)*time *time;
			case 8:
				return ((time=time / duration-1)*time *time+1);
			case 9:
				if ((time /=duration *0.5)< 1)return 0.5 *time *time *time;
				return 0.5 *((time-=2)*time *time+2);
			case 10:
				return (time /=duration)*time *time *time;
			case 11:
				return-((time=time / duration-1)*time *time *time-1);
			case 12:
				if ((time /=duration *0.5)< 1)return 0.5 *time *time *time *time;
				return-0.5 *((time-=2)*time *time *time-2);
			case 13:
				return (time /=duration)*time *time *time *time;
			case 14:
				return ((time=time / duration-1)*time *time *time *time+1);
			case 15:
				if ((time /=duration *0.5)< 1)return 0.5 *time *time *time *time *time;
				return 0.5 *((time-=2)*time *time *time *time+2);
			case 16:
				return (time==0)? 0 :Math.pow(2,10 *(time / duration-1));
			case 17:
				if (time==duration)return 1;
				return (-Math.pow(2,-10 *time / duration)+1);
			case 18:
				if (time==0)return 0;
				if (time==duration)return 1;
				if ((time /=duration *0.5)< 1)return 0.5 *Math.pow(2,10 *(time-1));
				return 0.5 *(-Math.pow(2,-10 *--time)+2);
			case 19:
				return-(Math.sqrt(1-(time /=duration)*time)-1);
			case 20:
				return Math.sqrt(1-(time=time / duration-1)*time);
			case 21:
				if ((time /=duration *0.5)< 1)return-0.5 *(Math.sqrt(1-time *time)-1);
				return 0.5 *(Math.sqrt(1-(time-=2)*time)+1);
			case 22:;
				var s0=NaN;
				if (time==0)return 0;
				if ((time /=duration)==1)return 1;
				if (period==0)period=duration *0.3;
				if (overshootOrAmplitude < 1){
					overshootOrAmplitude=1;
					s0=period / 4;
				}
				else s0=period / EaseManager._TwoPi *Math.asin(1 / overshootOrAmplitude);
				return-(overshootOrAmplitude *Math.pow(2,10 *(time-=1))*Math.sin((time *duration-s0)*EaseManager._TwoPi / period));
			case 23:;
				var s1=NaN;
				if (time==0)return 0;
				if ((time /=duration)==1)return 1;
				if (period==0)period=duration *0.3;
				if (overshootOrAmplitude < 1){
					overshootOrAmplitude=1;
					s1=period / 4;
				}
				else s1=period / EaseManager._TwoPi *Math.asin(1 / overshootOrAmplitude);
				return (overshootOrAmplitude *Math.pow(2,-10 *time)*Math.sin((time *duration-s1)*EaseManager._TwoPi / period)+1);
			case 24:;
				var s=NaN;
				if (time==0)return 0;
				if ((time /=duration *0.5)==2)return 1;
				if (period==0)period=duration *(0.3 *1.5);
				if (overshootOrAmplitude < 1){
					overshootOrAmplitude=1;
					s=period / 4;
				}
				else s=period / EaseManager._TwoPi *Math.asin(1 / overshootOrAmplitude);
				if (time < 1)return-0.5 *(overshootOrAmplitude *Math.pow(2,10 *(time-=1))*Math.sin((time *duration-s)*EaseManager._TwoPi / period));
				return overshootOrAmplitude *Math.pow(2,-10 *(time-=1))*Math.sin((time *duration-s)*EaseManager._TwoPi / period)*0.5+1;
			case 25:
				return (time /=duration)*time *((overshootOrAmplitude+1)*time-overshootOrAmplitude);
			case 26:
				return ((time=time / duration-1)*time *((overshootOrAmplitude+1)*time+overshootOrAmplitude)+1);
			case 27:
				if ((time /=duration *0.5)< 1)return 0.5 *(time *time *(((overshootOrAmplitude *=(1.525))+1)*time-overshootOrAmplitude));
				return 0.5 *((time-=2)*time *(((overshootOrAmplitude *=(1.525))+1)*time+overshootOrAmplitude)+2);
			case 28:
				return Bounce.easeIn(time,duration);
			case 29:
				return Bounce.easeOut(time,duration);
			case 30:
				return Bounce.easeInOut(time,duration);
			default :
				return-(time /=duration)*(time-2);
			}
	}

	__static(EaseManager,
	['_PiOver2',function(){return this._PiOver2=Math.PI *0.5;},'_TwoPi',function(){return this._TwoPi=Math.PI *2;}
	]);
	EaseManager.__init$=function(){
		/// This class contains a C# port of the easing equations created by Robert Penner (http://robertpenner.com/easing).
		//class Bounce
		Bounce=(function(){
			function Bounce(){}
			__class(Bounce,'');
			Bounce.easeIn=function(time,duration){
				return 1-Bounce.easeOut(duration-time,duration);
			}
			Bounce.easeOut=function(time,duration){
				if ((time /=duration)< (1 / 2.75)){
					return (7.5625 *time *time);
				}
				if (time < (2 / 2.75)){
					return (7.5625 *(time-=(1.5 / 2.75))*time+0.75);
				}
				if (time < (2.5 / 2.75)){
					return (7.5625 *(time-=(2.25 / 2.75))*time+0.9375);
				}
				return (7.5625 *(time-=(2.625 / 2.75))*time+0.984375);
			}
			Bounce.easeInOut=function(time,duration){
				if (time < duration *0.5){
					return Bounce.easeIn(time *2,duration)*0.5;
				}
				return Bounce.easeOut(time *2-duration,duration)*0.5+0.5;
			}
			return Bounce;
		})()
	}

	return EaseManager;
})()


//class fairygui.tween.EaseType
var EaseType=(function(){
	function EaseType(){}
	__class(EaseType,'fairygui.tween.EaseType');
	EaseType.parseEaseType=function(value){
		var type=EaseType.easeTypeMap[value];
		if(type==undefined)
			return 17;
		else
		return type;
	}

	EaseType.Linear=0;
	EaseType.SineIn=1;
	EaseType.SineOut=2;
	EaseType.SineInOut=3;
	EaseType.QuadIn=4;
	EaseType.QuadOut=5;
	EaseType.QuadInOut=6;
	EaseType.CubicIn=7;
	EaseType.CubicOut=8;
	EaseType.CubicInOut=9;
	EaseType.QuartIn=10;
	EaseType.QuartOut=11;
	EaseType.QuartInOut=12;
	EaseType.QuintIn=13;
	EaseType.QuintOut=14;
	EaseType.QuintInOut=15;
	EaseType.ExpoIn=16;
	EaseType.ExpoOut=17;
	EaseType.ExpoInOut=18;
	EaseType.CircIn=19;
	EaseType.CircOut=20;
	EaseType.CircInOut=21;
	EaseType.ElasticIn=22;
	EaseType.ElasticOut=23;
	EaseType.ElasticInOut=24;
	EaseType.BackIn=25;
	EaseType.BackOut=26;
	EaseType.BackInOut=27;
	EaseType.BounceIn=28;
	EaseType.BounceOut=29;
	EaseType.BounceInOut=30;
	EaseType.Custom=31;
	__static(EaseType,
	['easeTypeMap',function(){return this.easeTypeMap={
			"Linear" :0 ,
			"Elastic.In" :22 ,
			"Elastic.Out" :24 ,
			"Elastic.InOut" :24 ,
			"Quad.In" :4 ,
			"Quad.Out" :5 ,
			"Quad.InOut" :6 ,
			"Cube.In" :7 ,
			"Cube.Out" :8 ,
			"Cube.InOut" :9 ,
			"Quart.In" :10 ,
			"Quart.Out" :11 ,
			"Quart.InOut" :12 ,
			"Quint.In" :13 ,
			"Quint.Out" :14 ,
			"Quint.InOut" :15 ,
			"Sine.In" :1 ,
			"Sine.Out" :2 ,
			"Sine.InOut" :3 ,
			"Bounce.In" :28 ,
			"Bounce.Out" :29 ,
			"Bounce.InOut" :30 ,
			"Circ.In" :19 ,
			"Circ.Out" :20 ,
			"Circ.InOut" :21 ,
			"Expo.In" :16 ,
			"Expo.Out" :17 ,
			"Expo.InOut" :18 ,
			"Back.In" :25 ,
			"Back.Out" :26 ,
			"Back.InOut" :27
	};}

	]);
	return EaseType;
})()


//class fairygui.tween.GTween
var GTween=(function(){
	function GTween(){}
	__class(GTween,'fairygui.tween.GTween');
	GTween.to=function(start,end,duration){
		return TweenManager.createTween()._to(start,end,duration);
	}

	GTween.to2=function(start,start2,end,end2,duration){
		return TweenManager.createTween()._to2(start,start2,end,end2,duration);
	}

	GTween.to3=function(start,start2,start3,end,end2,end3,duration){
		return TweenManager.createTween()._to3(start,start2,start3,end,end2,end3,duration);
	}

	GTween.to4=function(start,start2,start3,start4,end,end2,end3,end4,duration){
		return TweenManager.createTween()._to4(start,start2,start3,start4,end,end2,end3,end4,duration);
	}

	GTween.toColor=function(start,end,duration){
		return TweenManager.createTween()._toColor(start,end,duration);
	}

	GTween.delayedCall=function(delay){
		return TweenManager.createTween().setDelay(delay);
	}

	GTween.shake=function(startX,startY,amplitude,duration){
		return TweenManager.createTween()._shake(startX,startY,amplitude,duration);
	}

	GTween.isTweening=function(target,propType){
		return TweenManager.isTweening(target,propType);
	}

	GTween.kill=function(target,complete,propType){
		(complete===void 0)&& (complete=false);
		TweenManager.killTweens(target,false,null);
	}

	GTween.getTween=function(target,propType){
		return TweenManager.getTween(target,propType);
	}

	GTween.safeMode=true;
	return GTween;
})()


//class fairygui.tween.GTweener
var GTweener=(function(){
	function GTweener(){
		this._target=null;
		this._propType=null;
		this._killed=false;
		this._paused=false;
		this._delay=NaN;
		this._duration=NaN;
		this._breakpoint=NaN;
		this._easeType=0;
		this._easeOvershootOrAmplitude=NaN;
		this._easePeriod=NaN;
		this._repeat=0;
		this._yoyo=false;
		this._timeScale=NaN;
		this._snapping=false;
		this._userData=null;
		this._onUpdate=null;
		this._onUpdateCaller=null;
		this._onStart=null;
		this._onStartCaller=null;
		this._onComplete=null;
		this._onCompleteCaller=null;
		this._startValue=null;
		this._endValue=null;
		this._value=null;
		this._deltaValue=null;
		this._valueSize=0;
		this._started=false;
		this._ended=0;
		this._elapsedTime=NaN;
		this._normalizedTime=NaN;
		this._startValue=new TweenValue();
		this._endValue=new TweenValue();
		this._value=new TweenValue();
		this._deltaValue=new TweenValue();
		this._reset();
	}

	__class(GTweener,'fairygui.tween.GTweener');
	var __proto=GTweener.prototype;
	__proto.setDelay=function(value){
		this._delay=value;
		return this;
	}

	__proto.setDuration=function(value){
		this._duration=value;
		return this;
	}

	__proto.setBreakpoint=function(value){
		this._breakpoint=value;
		return this;
	}

	__proto.setEase=function(value){
		this._easeType=value;
		return this;
	}

	__proto.setEasePeriod=function(value){
		this._easePeriod=value;
		return this;
	}

	__proto.setEaseOvershootOrAmplitude=function(value){
		this._easeOvershootOrAmplitude=value;
		return this;
	}

	__proto.setRepeat=function(repeat,yoyo){
		(yoyo===void 0)&& (yoyo=false);
		this._repeat=repeat;
		this._yoyo=yoyo;
		return this;
	}

	__proto.setTimeScale=function(value){
		this._timeScale=value;
		return this;
	}

	__proto.setSnapping=function(value){
		this._snapping=value;
		return this;
	}

	__proto.setTarget=function(value,propType){
		this._target=value;
		this._propType=propType;
		return this;
	}

	__proto.setUserData=function(value){
		this._userData=value;
		return this;
	}

	__proto.onUpdate=function(callback,caller){
		this._onUpdate=callback;
		this._onUpdateCaller=caller;
		return this;
	}

	__proto.onStart=function(callback,caller){
		this._onStart=callback;
		this._onStartCaller=caller;
		return this;
	}

	__proto.onComplete=function(callback,caller){
		this._onComplete=callback;
		this._onCompleteCaller=caller;
		return this;
	}

	__proto.setPaused=function(paused){
		this._paused=paused;
		return this;
	}

	/**
	*seek position of the tween,in seconds.
	*/
	__proto.seek=function(time){
		if (this._killed)
			return;
		this._elapsedTime=time;
		if (this._elapsedTime < this._delay){
			if (this._started)
				this._elapsedTime=this._delay;
			else
			return;
		}
		this.update();
	}

	__proto.kill=function(complete){
		(complete===void 0)&& (complete=false);
		if (this._killed)
			return;
		if (complete){
			if (this._ended==0){
				if (this._breakpoint >=0)
					this._elapsedTime=this._delay+this._breakpoint;
				else if (this._repeat >=0)
				this._elapsedTime=this._delay+this._duration *(this._repeat+1);
				else
				this._elapsedTime=this._delay+this._duration *2;
				this.update();
			}
			this.callCompleteCallback();
		}
		this._killed=true;
	}

	__proto._to=function(start,end,duration){
		this._valueSize=1;
		this._startValue.x=start;
		this._endValue.x=end;
		this._duration=duration;
		return this;
	}

	__proto._to2=function(start,start2,end,end2,duration){
		this._valueSize=2;
		this._startValue.x=start;
		this._endValue.x=end;
		this._startValue.y=start2;
		this._endValue.y=end2;
		this._duration=duration;
		return this;
	}

	__proto._to3=function(start,start2,start3,end,end2,end3,duration){
		this._valueSize=3;
		this._startValue.x=start;
		this._endValue.x=end;
		this._startValue.y=start2;
		this._endValue.y=end2;
		this._startValue.z=start3;
		this._endValue.z=end3;
		this._duration=duration;
		return this;
	}

	__proto._to4=function(start,start2,start3,start4,end,end2,end3,end4,duration){
		this._valueSize=4;
		this._startValue.x=start;
		this._endValue.x=end;
		this._startValue.y=start2;
		this._endValue.y=end2;
		this._startValue.z=start3;
		this._endValue.z=end3;
		this._startValue.w=start4;
		this._endValue.w=end4;
		this._duration=duration;
		return this;
	}

	__proto._toColor=function(start,end,duration){
		this._valueSize=4;
		this._startValue.color=start;
		this._endValue.color=end;
		this._duration=duration;
		return this;
	}

	__proto._shake=function(startX,startY,amplitude,duration){
		this._valueSize=5;
		this._startValue.x=startX;
		this._startValue.y=startY;
		this._startValue.w=amplitude;
		this._duration=duration;
		this._easeType=0;
		return this;
	}

	__proto._init=function(){
		this._delay=0;
		this._duration=0;
		this._breakpoint=-1;
		this._easeType=5;
		this._timeScale=1;
		this._easePeriod=0;
		this._easeOvershootOrAmplitude=1.70158;
		this._snapping=false;
		this._repeat=0;
		this._yoyo=false;
		this._valueSize=0;
		this._started=false;
		this._paused=false;
		this._killed=false;
		this._elapsedTime=0;
		this._normalizedTime=0;
		this._ended=0;
	}

	__proto._reset=function(){
		this._target=null;
		this._userData=null;
		this._onStart=this._onUpdate=this._onComplete=null;
		this._onStartCaller=this._onUpdateCaller=this._onCompleteCaller=null;
	}

	__proto._update=function(dt){
		if (this._timeScale !=1)
			dt *=this._timeScale;
		if (dt==0)
			return;
		if (this._ended !=0){
			this.callCompleteCallback();
			this._killed=true;
			return;
		}
		this._elapsedTime+=dt;
		this.update();
		if (this._ended !=0){
			if (!this._killed){
				this.callCompleteCallback();
				this._killed=true;
			}
		}
	}

	__proto.update=function(){
		this._ended=0;
		if (this._valueSize==0){
			if (this._elapsedTime >=this._delay+this._duration)
				this._ended=1;
			return;
		}
		if (!this._started){
			if (this._elapsedTime < this._delay)
				return;
			this._started=true;
			this.callStartCallback();
			if (this._killed)
				return;
		};
		var reversed=false;
		var tt=this._elapsedTime-this._delay;
		if (this._breakpoint >=0 && tt >=this._breakpoint){
			tt=this._breakpoint;
			this._ended=2;
		}
		if (this._repeat !=0){
			var round=Math.floor(tt / this._duration);
			tt-=this._duration *round;
			if (this._yoyo)
				reversed=round % 2==1;
			if (this._repeat > 0 && this._repeat-round < 0){
				if (this._yoyo)
					reversed=this._repeat % 2==1;
				tt=this._duration;
				this._ended=1;
			}
		}
		else if (tt >=this._duration){
			tt=this._duration;
			this._ended=1;
		}
		this._normalizedTime=EaseManager.evaluate(this._easeType,reversed ? (this._duration-tt):tt,this._duration,
		this._easeOvershootOrAmplitude,this._easePeriod);
		this._value.setZero();
		this._deltaValue.setZero();
		if (this._valueSize==5){
			if (this._ended==0){
				var r=this._startValue.w*(1-this._normalizedTime);
				var rx=(Math.random()*2-1)*r;
				var ry=(Math.random()*2-1)*r;
				rx=rx > 0 ? Math.ceil(rx):Math.floor(rx);
				ry=ry > 0 ? Math.ceil(ry):Math.floor(ry);
				this._deltaValue.x=rx;
				this._deltaValue.y=ry;
				this._value.x=this._startValue.x+rx;
				this._value.y=this._startValue.y+ry;
			}
			else{
				this._value.x=this._startValue.x;
				this._value.y=this._startValue.y;
			}
		}
		else{
			for (var i=0;i < this._valueSize;i++){
				var n1=this._startValue.getField(i);
				var n2=this._endValue.getField(i);
				var f=n1+(n2-n1)*this._normalizedTime;
				if (this._snapping)
					f=Math.round(f);
				this._deltaValue.setField(i,f-this._value.getField(i));
				this._value.setField(i,f);
			}
		}
		if (this._target !=null && this._propType !=null){
			if((typeof this._propType=='function')){
				switch(this._valueSize){
					case 1:
						this._propType.call(this._target,this._value.x);
						break ;
					case 2:
						this._propType.call(this._target,this._value.x,this._value.y);
						break ;
					case 3:
						this._propType.call(this._target,this._value.x,this._value.y,this._value.z);
						break ;
					case 4:
						this._propType.call(this._target,this._value.x,this._value.y,this._value.z,this._value.w);
						break ;
					case 5:
						this._propType.call(this._target,this._value.color);
						break ;
					case 6:
						this._propType.call(this._target,this._value.x,this._value.y);
						break ;
					}
			}
			else{
				if(this._valueSize==5)
					this._target[this._propType]=this._value.color;
				else
				this._target[this._propType]=this._value.x;
			}
		}
		this.callUpdateCallback();
	}

	__proto.callStartCallback=function(){
		if (this._onStart !=null){
			if(GTween.safeMode){
				try{
					this._onStart.call(this._onStartCaller,this);
				}
				catch(err){
					console.log("FairyGUI: error in start callback > "+err.message);
				}
			}
			else
			this._onStart.call(this._onStartCaller,this);
		}
	}

	__proto.callUpdateCallback=function(){
		if (this._onUpdate !=null){
			if(GTween.safeMode){
				try{
					this._onUpdate.call(this._onUpdateCaller,this);
				}
				catch(err){
					console.log("FairyGUI: error in update callback > "+err.message);
				}
			}
			else
			this._onUpdate.call(this._onUpdateCaller,this);
		}
	}

	__proto.callCompleteCallback=function(){
		if (this._onComplete !=null){
			if(GTween.safeMode){
				try{
					this._onComplete.call(this._onCompleteCaller,this);
				}
				catch(err){
					console.log("FairyGUI: error in complete callback > "+err.message);
				}
			}
			else
			this._onComplete.call(this._onCompleteCaller,this);
		}
	}

	__getset(0,__proto,'target',function(){
		return this._target;
	});

	__getset(0,__proto,'delay',function(){
		return this._delay;
	});

	__getset(0,__proto,'duration',function(){
		return this._duration;
	});

	__getset(0,__proto,'value',function(){
		return this._value;
	});

	__getset(0,__proto,'userData',function(){
		return this._userData;
	});

	__getset(0,__proto,'repeat',function(){
		return this._repeat;
	});

	__getset(0,__proto,'startValue',function(){
		return this._startValue;
	});

	__getset(0,__proto,'endValue',function(){
		return this._endValue;
	});

	__getset(0,__proto,'deltaValue',function(){
		return this._deltaValue;
	});

	__getset(0,__proto,'normalizedTime',function(){
		return this._normalizedTime;
	});

	__getset(0,__proto,'completed',function(){
		return this._ended !=0;
	});

	__getset(0,__proto,'allCompleted',function(){
		return this._ended==1;
	});

	return GTweener;
})()


//class fairygui.tween.TweenManager
var TweenManager=(function(){
	function TweenManager(){}
	__class(TweenManager,'fairygui.tween.TweenManager');
	TweenManager.createTween=function(){
		if (!TweenManager._inited){
			Laya.timer.frameLoop(1,null,TweenManager.update);
			TweenManager._inited=true;
		};
		var tweener;
		var cnt=TweenManager._tweenerPool.length;
		if (cnt > 0){
			tweener=TweenManager._tweenerPool.pop();
		}
		else
		tweener=new GTweener();
		tweener._init();
		TweenManager._activeTweens[TweenManager._totalActiveTweens++]=tweener;
		if (TweenManager._totalActiveTweens==TweenManager._activeTweens.length)
			TweenManager._activeTweens.length=TweenManager._activeTweens.length+Math.ceil(TweenManager._activeTweens.length *0.5);
		return tweener;
	}

	TweenManager.isTweening=function(target,propType){
		if (target==null)
			return false;
		var anyType=propType==null;
		for (var i=0;i < TweenManager._totalActiveTweens;i++){
			var tweener=TweenManager._activeTweens[i];
			if (tweener !=null && tweener.target==target && !tweener._killed
				&& (anyType || tweener._propType==propType))
			return true;
		}
		return false;
	}

	TweenManager.killTweens=function(target,completed,propType){
		if (target==null)
			return false;
		var flag=false;
		var cnt=TweenManager._totalActiveTweens;
		var anyType=propType==null;
		for (var i=0;i < cnt;i++){
			var tweener=TweenManager._activeTweens[i];
			if (tweener !=null && tweener.target==target && !tweener._killed
				&& (anyType || tweener._propType==propType)){
				tweener.kill(completed);
				flag=true;
			}
		}
		return flag;
	}

	TweenManager.getTween=function(target,propType){
		if (target==null)
			return null;
		var cnt=TweenManager._totalActiveTweens;
		var anyType=propType==null;
		for (var i=0;i < cnt;i++){
			var tweener=TweenManager._activeTweens[i];
			if (tweener !=null && tweener.target==target && !tweener._killed
				&& (anyType || tweener._propType==propType)){
				return tweener;
			}
		}
		return null;
	}

	TweenManager.update=function(){
		var dt=Laya.timer.delta/1000;
		if(dt>0.1)
			dt=0.1;
		var cnt=TweenManager._totalActiveTweens;
		var freePosStart=-1;
		var freePosCount=0;
		for (var i=0;i < cnt;i++){
			var tweener=TweenManager._activeTweens[i];
			if (tweener==null){
				if (freePosStart==-1)
					freePosStart=i;
				freePosCount++;
			}
			else if (tweener._killed){
				tweener._reset();
				TweenManager._tweenerPool.push(tweener);
				TweenManager._activeTweens[i]=null;
				if (freePosStart==-1)
					freePosStart=i;
				freePosCount++;
			}
			else{
				if(!tweener._paused)
					tweener._update(dt);
				if (freePosStart !=-1){
					TweenManager._activeTweens[freePosStart]=tweener;
					TweenManager._activeTweens[i]=null;
					freePosStart++;
				}
			}
		}
		if (freePosStart >=0){
			if (TweenManager._totalActiveTweens !=cnt){
				var j=cnt;
				cnt=TweenManager._totalActiveTweens-cnt;
				for (i=0;i < cnt;i++)
				TweenManager._activeTweens[freePosStart++]=TweenManager._activeTweens[j++];
			}
			TweenManager._totalActiveTweens=freePosStart;
		}
	}

	TweenManager._tweenerPool=[];
	TweenManager._totalActiveTweens=0;
	TweenManager._inited=false;
	__static(TweenManager,
	['_activeTweens',function(){return this._activeTweens=new Array(30);}
	]);
	return TweenManager;
})()


//class fairygui.tween.TweenValue
var TweenValue=(function(){
	function TweenValue(){
		this.x=NaN;
		this.y=NaN;
		this.z=NaN;
		this.w=NaN;
		this.x=this.y=this.z=this.w=0;
	}

	__class(TweenValue,'fairygui.tween.TweenValue');
	var __proto=TweenValue.prototype;
	__proto.getField=function(index){
		switch (index){
			case 0:
				return this.x;
			case 1:
				return this.y;
			case 2:
				return this.z;
			case 3:
				return this.w;
			default :
				throw new Error("Index out of bounds: "+index);
			}
	}

	__proto.setField=function(index,value){
		switch (index){
			case 0:
				this.x=value;
				break ;
			case 1:
				this.y=value;
				break ;
			case 2:
				this.z=value;
				break ;
			case 3:
				this.w=value;
				break ;
			default :
				throw new Error("Index out of bounds: "+index);
			}
	}

	__proto.setZero=function(){
		this.x=this.y=this.z=this.w=0;
	}

	__getset(0,__proto,'color',function(){
		return (this.w<<24)+(this.x<<16)+(this.y<<8)+this.z;
		},function(value){
		this.x=(value & 0xFF0000)>>16;
		this.y=(value & 0x00FF00)>>8;
		this.z=(value & 0x0000FF);
		this.w=(value & 0xFF000000)>>24;
	});

	return TweenValue;
})()


//class fairygui.UIConfig
var UIConfig$1=(function(){
	function UIConfig(){}
	__class(UIConfig,'fairygui.UIConfig',null,'UIConfig$1');
	UIConfig.defaultFont="SimSun";
	UIConfig.windowModalWaiting=null;
	UIConfig.globalModalWaiting=null;
	UIConfig.modalLayerColor="rgba(33,33,33,0.2)";
	UIConfig.buttonSound=null;
	UIConfig.buttonSoundVolumeScale=1;
	UIConfig.horizontalScrollBar=null;
	UIConfig.verticalScrollBar=null;
	UIConfig.defaultScrollStep=25;
	UIConfig.defaultScrollDecelerationRate=0.967;
	UIConfig.defaultScrollBarDisplay=1;
	UIConfig.defaultScrollTouchEffect=true;
	UIConfig.defaultScrollBounceEffect=true;
	UIConfig.popupMenu=null;
	UIConfig.popupMenu_seperator=null;
	UIConfig.loaderErrorSign=null;
	UIConfig.tooltipsWin=null;
	UIConfig.defaultComboBoxVisibleItemCount=10;
	UIConfig.touchScrollSensitivity=20;
	UIConfig.touchDragSensitivity=10;
	UIConfig.clickDragSensitivity=2;
	UIConfig.bringWindowToFrontOnClick=true;
	UIConfig.frameTimeForAsyncUIConstruction=2;
	UIConfig.textureLinearSampling=true;
	UIConfig.packageFileExtension="fui";
	return UIConfig;
})()


//class fairygui.UIObjectFactory
var UIObjectFactory=(function(){
	function UIObjectFactory(){}
	__class(UIObjectFactory,'fairygui.UIObjectFactory');
	UIObjectFactory.setPackageItemExtension=function(url,type){
		if (url==null)
			throw new Error("Invaild url: "+url);
		var pi=UIPackage.getItemByURL(url);
		if (pi !=null)
			pi.extensionType=type;
		UIObjectFactory.packageItemExtensions[url]=type;
	}

	UIObjectFactory.setLoaderExtension=function(type){
		fairygui.UIObjectFactory.loaderType=type;
	}

	UIObjectFactory.resolvePackageItemExtension=function(pi){
		pi.extensionType=UIObjectFactory.packageItemExtensions["ui://"+pi.owner.id+pi.id];
		if(!pi.extensionType)
			pi.extensionType=UIObjectFactory.packageItemExtensions["ui://"+pi.owner.name+"/"+pi.name];
	}

	UIObjectFactory.newObject=function(pi){
		switch (pi.type){
			case 0:
				return new GImage();
			case 2:
				return new GMovieClip();
			case 4:{
					var cls=pi.extensionType;
					if (cls)
						return new cls();
					var xml=pi.owner.getItemAsset(pi);
					var extention=xml.getAttribute("extention");
					if(extention !=null){
					switch(extention){
						case "Button":
							return new GButton();
						case "Label":
							return new GLabel();
						case "ProgressBar":
							return new GProgressBar();
						case "Slider":
							return new GSlider();
						case "ScrollBar":
							return new GScrollBar();
						case "ComboBox":
							return new GComboBox();
						default :
							return new GComponent();
						}
				}
				else
				return new GComponent();
			}
		}
		return null;
	}

	UIObjectFactory.newObject2=function(type){
		switch (type){
			case "image":
				return new GImage();
			case "movieclip":
				return new GMovieClip();
			case "component":
				return new GComponent();
			case "text":
				return new GBasicTextField();
			case "richtext":
				return new GRichTextField();
			case "inputtext":
				return new GTextInput();
			case "group":
				return new GGroup();
			case "list":
				return new GList();
			case "graph":
				return new GGraph();
			case "loader":
				if (fairygui.UIObjectFactory.loaderType !=null)
					return new fairygui.UIObjectFactory.loaderType();
				else
				return new GLoader();
			}
		return null;
	}

	UIObjectFactory.packageItemExtensions={};
	UIObjectFactory.loaderType=null;
	return UIObjectFactory;
})()


//class fairygui.UIPackage
var UIPackage=(function(){
	var AtlasSprite;
	function UIPackage(){
		this._id=null;
		this._name=null;
		this._basePath=null;
		this._items=null;
		this._itemsById=null;
		this._itemsByName=null;
		this._resKey=null;
		this._resData=null;
		this._customId=null;
		this._sprites=null;
		this._hitTestDatas=null;
		this._items=[];
		this._sprites={};
		this._hitTestDatas={};
	}

	__class(UIPackage,'fairygui.UIPackage');
	var __proto=UIPackage.prototype;
	__proto.create=function(resKey,descData){
		this._resKey=resKey;
		this.loadPackage(descData);
	}

	__proto.loadPackage=function(descData){
		var str;
		var arr;
		if(!descData){
			descData=AssetProxy.inst.getRes(this._resKey+"."+UIConfig$1.packageFileExtension);
			if(!descData)
				throw new Error("package resource not ready: "+this._resKey);
		}
		this.decompressPackage(descData);
		str=this.getDesc("sprites.bytes");
		arr=str.split("\n");
		var cnt=arr.length;
		for(var i=1;i < cnt;i++){
			str=arr[i];
			if(!str)
				continue ;
			var arr2=str.split(" ");
			var sprite=new AtlasSprite();
			var itemId=arr2[0];
			var binIndex=parseInt(arr2[1]);
			if(binIndex >=0)
				sprite.atlas="atlas"+binIndex;
			else {
				var pos=itemId.indexOf("_");
				if(pos==-1)
					sprite.atlas="atlas_"+itemId;
				else
				sprite.atlas="atlas_"+itemId.substr(0,pos);
			}
			sprite.rect.x=parseInt(arr2[2]);
			sprite.rect.y=parseInt(arr2[3]);
			sprite.rect.width=parseInt(arr2[4]);
			sprite.rect.height=parseInt(arr2[5]);
			sprite.rotated=arr2[6]=="1";
			this._sprites[itemId]=sprite;
		}
		str=this.getDesc("hittest.bytes");
		if(str!=null){
			var ba=ToolSet.base64Decode(str);
			ba.endian="bigEndian";
			while(ba.bytesAvailable){
				var hitTestData=new PixelHitTestData();
				this._hitTestDatas[ba.readUTFString()]=hitTestData;
				hitTestData.load(ba);
			}
		}
		str=this.getDesc("package.xml");
		var xml=Utils.parseXMLFromString(str);
		var rootNode=xml.firstChild;
		this._id=rootNode.getAttribute("id");
		this._name=rootNode.getAttribute("name");
		var resources=ToolSet.findChildNode(rootNode,"resources").childNodes;
		this._itemsById={};
		this._itemsByName={};
		var pi;
		var cxml;
		var length1=resources.length;
		for(var i1=0;i1 < length1;i1++){
			cxml=resources[i1];
			if(cxml.nodeType!=1)
				continue ;
			pi=new PackageItem();
			pi.owner=this;
			pi.type=PackageItemType.parse(cxml.nodeName);
			pi.id=cxml.getAttribute("id");
			pi.name=cxml.getAttribute("name");
			pi.file=cxml.getAttribute("file");
			str=cxml.getAttribute("size");
			if(str){
				arr=str.split(",");
				pi.width=parseInt(arr[0]);
				pi.height=parseInt(arr[1]);
			}
			switch(pi.type){
				case 0:{
						str=cxml.getAttribute("scale");
						if(str=="9grid"){
							pi.scale9Grid=new laya.maths.Rectangle();
							str=cxml.getAttribute("scale9grid");
							if(str){
								arr=str.split(",");
								pi.scale9Grid.x=parseInt(arr[0]);
								pi.scale9Grid.y=parseInt(arr[1]);
								pi.scale9Grid.width=parseInt(arr[2]);
								pi.scale9Grid.height=parseInt(arr[3]);
								str=cxml.getAttribute("gridTile");
								if(str)
									pi.tileGridIndice=parseInt(str);
							}
						}
						else if(str=="tile"){
							pi.scaleByTile=true;
						}
						str=cxml.getAttribute("smoothing");
						pi.smoothing=str !="false";
						break ;
					}
				case 4:
					UIObjectFactory.resolvePackageItemExtension(pi);
					break ;
				}
			this._items.push(pi);
			this._itemsById[pi.id]=pi;
			if(pi.name !=null)
				this._itemsByName[pi.name]=pi;
		}
		cnt=this._items.length;
		for(i=0;i < cnt;i++){
			pi=this._items[i];
			if(pi.type==6){
				this.loadFont(pi);
				fairygui.UIPackage._bitmapFonts[pi.bitmapFont.id]=pi.bitmapFont;
			}
		}
	}

	__proto.decompressPackage=function(buf){
		this._resData={};
		var mark=new Uint8Array(buf.slice(0,2));
		if(mark[0]==0x50 && mark[1]==0x4b){
			buf.position=0;
			this.decodeUncompressed(buf);
		}
		else{
			var data;
			var inflater=new Zlib.RawInflate(buf);data=inflater.decompress();;
			var source=new Byte(data).readUTFBytes();
			var curr=0;
			var fn;
			var size=NaN;
			while(true){
				var pos=source.indexOf("|",curr);
				if(pos==-1)
					break ;
				fn=source.substring(curr,pos);
				curr=pos+1;
				pos=source.indexOf("|",curr);
				size=parseInt(source.substring(curr,pos));
				curr=pos+1;
				this._resData[fn]=source.substr(curr,size);
				curr+=size;
			}
		}
	}

	__proto.decodeUncompressed=function(buf){
		var ba=new Byte(buf);
		var pos=ba.length-22;
		ba.pos=pos+10;
		var entryCount=ba.getUint16();
		ba.pos=pos+16;
		pos=ba.getInt32();
		for (var i=0;i < entryCount;i++){
			ba.pos=pos+28;
			var len=ba.getUint16();
			var len2=ba.getUint16()+ba.getUint16();
			ba.pos=pos+46;
			var entryName=ba.getUTFBytes(len);
			if (entryName[entryName.length-1] !='/' && entryName[entryName.length-1] !='\\'){
				ba.pos=pos+20;
				var size=ba.getInt32();
				ba.pos=pos+42;
				var offset=ba.getInt32()+30+len;
				if (size > 0){
					ba.pos=offset;
					this._resData[entryName]=ba.readUTFBytes(size);
				}
			}
			pos+=46+len+len2;
		}
	}

	__proto.dispose=function(){
		var cnt=this._items.length;
		for(var i=0;i < cnt;i++){
			var pi=this._items[i];
			if(pi.type==7){
				var texture=pi.texture;
				if(texture !=null)
					texture.destroy(true);
			}
			if(pi.bitmapFont !=null){
				delete fairygui.UIPackage._bitmapFonts[pi.bitmapFont.id];
			}
		}
	}

	__proto.createObject=function(resName,userClass){
		var pi=this._itemsByName[resName];
		if (pi)
			return this.internalCreateObject(pi,userClass);
		else
		return null;
	}

	__proto.internalCreateObject=function(item,userClass){
		var g;
		if (item.type==4){
			if (userClass !=null)
				g=new userClass();
			else
			g=UIObjectFactory.newObject(item);
		}
		else
		g=UIObjectFactory.newObject(item);
		if (g==null)
			return null;
		fairygui.UIPackage._constructing++;
		g.packageItem=item;
		g.constructFromResource();
		fairygui.UIPackage._constructing--;
		return g;
	}

	__proto.getItemById=function(itemId){
		return this._itemsById[itemId];
	}

	__proto.getItemByName=function(resName){
		return this._itemsByName[resName];
	}

	__proto.getItemAssetByName=function(resName){
		var pi=this._itemsByName[resName];
		if (pi==null){
			throw "Resource not found -"+resName;
		}
		return this.getItemAsset(pi);
	}

	__proto.getItemAssetURL=function(item){
		return this._resKey+"@"+item.file;;
	}

	__proto.getItemAsset=function(item){
		switch (item.type){
			case 0:
				if (!item.decoded){
					item.decoded=true;
					var sprite=this._sprites[item.id];
					if (sprite !=null)
						item.texture=this.createSpriteTexture(sprite);
				}
				return item.texture;
			case 7:
				if (!item.decoded){
					item.decoded=true;
					var fileName=(item.file !=null && item.file.length > 0)? item.file :(item.id+".png");
					item.texture=AssetProxy.inst.getRes(this._resKey+"@"+fileName);
					//wmy
					if(UIPackage["wObj"]!=null && item.texture==null){
						if(UIPackage["wObj"].V){
							fileName+=UIPackage["wObj"].V;
							item.texture=AssetProxy.inst.getRes(this._resKey+"@"+fileName);
						}
					}
					if(!UIConfig$1.textureLinearSampling)
						item.texture.isLinearSampling=false;
				}
				return item.texture;
			case 3:
				if (!item.decoded){
					item.decoded=true;
					item.sound=AssetProxy.inst.getRes(this._resKey+"@"+item.file);
					//wmy
					if(UIPackage["wObj"]!=null && item.sound==null){
						if(UIPackage["wObj"].V){
							item.file+=UIPackage["wObj"].V;
							item.sound=AssetProxy.inst.getRes(this._resKey+"@"+item.file);
						}
					}
				}
				return item.sound;
			case 6:
				if (!item.decoded){
					item.decoded=true;
					this.loadFont(item);
				}
				return item.bitmapFont;
			case 2:
				if (!item.decoded){
					item.decoded=true;
					this.loadMovieClip(item);
				}
				return item.frames;
			case 4:
				if (!item.decoded){
					item.decoded=true;
					var str=this.getDesc(item.id+".xml");
					var xml=Utils.parseXMLFromString(str);
					item.componentData=xml.firstChild;
					this.loadComponentChildren(item);
					this.translateComponent(item);
				}
				return item.componentData;
			default :
				return AssetProxy.inst.getRes(this._resKey+"@"+item.id);
			}
	}

	__proto.getDesc=function(fn){
		return this._resData[fn];
	}

	__proto.getPixelHitTestData=function(itemId){
		return this._hitTestDatas[itemId];
	}

	__proto.loadComponentChildren=function(item){
		var listNode=ToolSet.findChildNode(item.componentData,"displayList");
		if (listNode !=null){
			var col=listNode.childNodes;
			var dcnt=col.length;
			item.displayList=__newvec(dcnt);
			var di;
			for (var i=0;i < dcnt;i++){
				var cxml=col[i];
				var tagName=cxml.nodeName;
				var src=cxml.getAttribute("src");
				if (src){
					var pkgId=cxml.getAttribute("pkg");
					var pkg;
					if (pkgId && pkgId !=item.owner.id)
						pkg=fairygui.UIPackage.getById(pkgId);
					else
					pkg=item.owner;
					var pi=pkg !=null ? pkg.getItemById(src):null;
					if (pi !=null)
						di=new DisplayListItem(pi,null);
					else
					di=new DisplayListItem(null,tagName);
				}
				else{
					if (tagName=="text" && cxml.getAttribute("input")=="true")
						di=new DisplayListItem(null,"inputtext");
					else
					di=new DisplayListItem(null,tagName);
				}
				di.desc=cxml;
				item.displayList[i]=di;
			}
		}
		else
		item.displayList=__newvec(0,null);
	}

	__proto.translateComponent=function(item){
		if(fairygui.UIPackage._stringsSource==null)
			return;
		var strings=fairygui.UIPackage._stringsSource[this.id+item.id];
		if(strings==null)
			return;
		var length1=item.displayList.length;
		var length2=NaN;
		var value;
		var cxml,dxml,exml;
		var ename;
		var elementId;
		var items;
		var i1=NaN,i2=NaN,j=NaN;
		var str;
		for (i1=0;i1 < length1;i1++){
			cxml=item.displayList[i1].desc;
			ename=cxml.nodeName;
			elementId=cxml.getAttribute("id");
			str=cxml.getAttribute("tooltips");
			if(str){
				value=strings[elementId+"-tips"];
				if(value!=undefined)
					cxml.setAttribute("tooltips",value);
			}
			dxml=ToolSet.findChildNode(cxml,"gearText");
			if(dxml){
				value=strings[elementId+"-texts"];
				if(value!=undefined)
					dxml.setAttribute("values",value);
				value=strings[elementId+"-texts_def"];
				if(value!=undefined)
					dxml.setAttribute("default",value);
			}
			if(ename=="text" || ename=="richtext"){
				value=strings[elementId];
				if(value!=undefined)
					cxml.setAttribute("text",value);
				value=strings[elementId+"-prompt"];
				if(value!=undefined)
					cxml.setAttribute("prompt",value);
			}
			else if(ename=="list"){
				items=cxml.childNodes;
				length2=items.length;
				j=0;
				for (i2=0;i2 < length2;i2++){
					exml=items[i2];
					if(exml.nodeName!="item")
						continue ;
					value=strings[elementId+"-"+j];
					if(value!=undefined)
						exml.setAttribute("title",value);
					j++;
				}
			}
			else if(ename=="component"){
				dxml=ToolSet.findChildNode(cxml,"Button");
				if(dxml){
					value=strings[elementId];
					if(value!=undefined)
						dxml.setAttribute("title",value);
					value=strings[elementId+"-0"];
					if(value!=undefined)
						dxml.setAttribute("selectedTitle",value);
					continue ;
				}
				dxml=ToolSet.findChildNode(cxml,"Label");
				if(dxml){
					value=strings[elementId];
					if(value!=undefined)
						dxml.setAttribute("title",value);
					value=strings[elementId+"-prompt"];
					if(value!=undefined)
						dxml.setAttribute("prompt",value);
					continue ;
				}
				dxml=ToolSet.findChildNode(cxml,"ComboBox");
				if(dxml){
					value=strings[elementId];
					if(value!=undefined)
						dxml.setAttribute("title",value);
					items=dxml.childNodes;
					length2=items.length;
					j=0;
					for (i2=0;i2 < length2;i2++){
						exml=items[i2];
						if(exml.nodeName!="item")
							continue ;
						value=strings[elementId+"-"+j];
						if(value!=undefined)
							exml.setAttribute("title",value);
						j++;
					}
					continue ;
				}
			}
		}
	}

	__proto.createSpriteTexture=function(sprite){
		var atlasItem=this._itemsById[sprite.atlas];
		if (atlasItem !=null){
			var atlasTexture=(this.getItemAsset(atlasItem));
			if(atlasTexture==null)
				return null;
			else
			return this.createSubTexture(atlasTexture,sprite.rect);
		}
		else
		return null;
	}

	__proto.createSubTexture=function(atlasTexture,clipRect){
		var texture=Texture.createFromTexture(atlasTexture,
		clipRect.x,clipRect.y,clipRect.width,clipRect.height);
		return texture;
	}

	__proto.loadMovieClip=function(item){
		var xml=Utils.parseXMLFromString(this.getDesc(item.id+".xml")).firstChild;
		var str;
		var arr;
		str=xml.getAttribute("interval");
		if (str)
			item.interval=parseInt(str);
		str=xml.getAttribute("swing");
		if (str)
			item.swing=str=="true";
		str=xml.getAttribute("repeatDelay");
		if (str)
			item.repeatDelay=parseInt(str);
		var frameCount=parseInt(xml.getAttribute("frameCount"));
		item.frames=[];
		var frameNodes=ToolSet.findChildNode(xml,"frames").childNodes;
		var i=0;
		var len=frameNodes.length;
		for(var k=0;k < len;k++){
			var frameNode=frameNodes[k];
			if(frameNode.nodeName!="frame")
				continue ;
			var frame=new Frame();
			str=frameNode.getAttribute("rect");
			arr=str.split(",");
			frame.rect=new Rectangle(parseInt(arr[0]),parseInt(arr[1]),parseInt(arr[2]),parseInt(arr[3]));
			str=frameNode.getAttribute("addDelay");
			if(str)
				frame.addDelay=parseInt(str);
			item.frames[i]=frame;
			if (frame.rect.width==0)
				continue ;
			str=frameNode.getAttribute("sprite");
			if (str)
				str=item.id+"_"+str;
			else
			str=item.id+"_"+i;
			var sprite=this._sprites[str];
			if(sprite !=null)
				frame.texture=this.createSpriteTexture(sprite);
			i++;
		}
	}

	__proto.loadFont=function(item){
		var font=new BitmapFont$1();
		font.id="ui://"+this.id+item.id;
		var str=this.getDesc(item.id+".fnt");
		var lines=str.split("\n");
		var lineCount=lines.length;
		var i=0;
		var kv={};
		var ttf=false;
		var size=0;
		var xadvance=0;
		var resizable=false;
		var atlasOffsetX=0,atlasOffsetY=0;
		var charImg;
		var mainTexture;
		var lineHeight=0;
		for (i=0;i < lineCount;i++){
			str=lines[i];
			if (str.length==0)
				continue ;
			str=ToolSet.trim(str);
			var arr=str.split(" ");
			for (var j=1;j < arr.length;j++){
				var arr2=arr[j].split("=");
				kv[arr2[0]]=arr2[1];
			}
			str=arr[0];
			if (str=="char"){
				var bg=new BMGlyph();
				bg.x=isNaN(kv.x)? 0 :parseInt(kv.x);
				bg.y=isNaN(kv.y)? 0 :parseInt(kv.y);
				bg.offsetX=isNaN(kv.xoffset)? 0 :parseInt(kv.xoffset);
				bg.offsetY=isNaN(kv.yoffset)? 0 :parseInt(kv.yoffset);
				bg.width=isNaN(kv.width)? 0 :parseInt(kv.width);
				bg.height=isNaN(kv.height)? 0 :parseInt(kv.height);
				bg.advance=isNaN(kv.xadvance)? 0 :parseInt(kv.xadvance);
				if (kv.chnl !=undefined){
					bg.channel=parseInt(kv.chnl);
					if (bg.channel==15)
						bg.channel=4;
					else if (bg.channel==1)
					bg.channel=3;
					else if (bg.channel==2)
					bg.channel=2;
					else
					bg.channel=1;
				}
				if (!ttf){
					if (kv.img){
						charImg=this._itemsById[kv.img];
						if (charImg !=null){
							charImg.load();
							bg.width=charImg.width;
							bg.height=charImg.height;
							bg.texture=charImg.texture;
						}
					}
				}
				else if (mainTexture !=null){
					bg.texture=this.createSubTexture(mainTexture,new Rectangle(bg.x+atlasOffsetX,bg.y+atlasOffsetY,bg.width,bg.height));
				}
				if (ttf)
					bg.lineHeight=lineHeight;
				else {
					if(bg.advance==0){
						if(xadvance==0)
							bg.advance=bg.offsetX+bg.width;
						else
						bg.advance=xadvance;
					}
					bg.lineHeight=bg.offsetY < 0 ? bg.height :(bg.offsetY+bg.height);
					if(size>0 && bg.lineHeight<size)
						bg.lineHeight=size;
				}
				font.glyphs[String.fromCharCode(kv.id)]=bg;
			}
			else if (str=="info"){
				ttf=kv.face !=null;
				if(!isNaN(kv.size))
					size=parseInt(kv.size);
				resizable=kv.resizable=="true";
				if (ttf){
					var sprite=this._sprites[item.id];
					if (sprite !=null){
						atlasOffsetX=sprite.rect.x;
						atlasOffsetY=sprite.rect.y;
						var atlasItem=this._itemsById[sprite.atlas];
						if(atlasItem !=null)
							mainTexture=(this.getItemAsset(atlasItem));
					}
				}
			}
			else if (str=="common"){
				if(!isNaN(kv.lineHeight))
					lineHeight=parseInt(kv.lineHeight);
				if(size==0)
					size=lineHeight;
				else if(lineHeight==0)
				lineHeight=size;
				if(!isNaN(kv.xadvance))
					xadvance=parseInt(kv.xadvance);
			}
		}
		if (size==0 && bg)
			size=bg.height;
		font.ttf=ttf;
		font.size=size;
		font.resizable=resizable;
		item.bitmapFont=font;
	}

	__getset(0,__proto,'id',function(){
		return this._id;
	});

	__getset(0,__proto,'name',function(){
		return this._name;
	});

	__getset(0,__proto,'customId',function(){
		return this._customId;
		},function(value){
		if (this._customId !=null)
			delete fairygui.UIPackage._packageInstById[this._customId];
		this._customId=value;
		if (this._customId !=null)
			fairygui.UIPackage._packageInstById[this._customId]=this;
	});

	UIPackage.getById=function(id){
		return fairygui.UIPackage._packageInstById[id];
	}

	UIPackage.getByName=function(name){
		return fairygui.UIPackage._packageInstByName[name];
	}

	UIPackage.addPackage=function(resKey,descData){
		var pkg=new UIPackage();
		pkg.create(resKey,descData);
		fairygui.UIPackage._packageInstById[pkg.id]=pkg;
		fairygui.UIPackage._packageInstByName[pkg.name]=pkg;
		pkg.customId=resKey;
		return pkg;
	}

	UIPackage.removePackage=function(packageIdOrName){
		var pkg=fairygui.UIPackage._packageInstById[packageIdOrName];
		if(!pkg)
			pkg=fairygui.UIPackage._packageInstByName[packageIdOrName];
		if(!pkg)
			throw new Error("unknown package: "+packageIdOrName);
		pkg.dispose();
		delete fairygui.UIPackage._packageInstById[pkg.id];
		if(pkg._customId !=null)
			delete fairygui.UIPackage._packageInstById[pkg._customId];
		delete fairygui.UIPackage._packageInstByName[pkg.name];
	}

	UIPackage.createObject=function(pkgName,resName,userClass){
		var pkg=fairygui.UIPackage.getByName(pkgName);
		if(pkg)
			return pkg.createObject(resName,userClass);
		else
		return null;
	}

	UIPackage.createObjectFromURL=function(url,userClass){
		var pi=fairygui.UIPackage.getItemByURL(url);
		if(pi)
			return pi.owner.internalCreateObject(pi,userClass);
		else
		return null;
	}

	UIPackage.getItemURL=function(pkgName,resName){
		var pkg=fairygui.UIPackage.getByName(pkgName);
		if(!pkg)
			return null;
		var pi=pkg._itemsByName[resName];
		if(!pi)
			return null;
		return "ui://"+pkg.id+pi.id;
	}

	UIPackage.getItemByURL=function(url){
		var pos1=url.indexOf("//");
		if (pos1==-1)
			return null;
		var pos2=url.indexOf("/",pos1+2);
		if (pos2==-1){
			if (url.length > 13){
				var pkgId=url.substr(5,8);
				var pkg=UIPackage.getById(pkgId);
				if (pkg !=null){
					var srcId=url.substr(13);
					return pkg.getItemById(srcId);
				}
			}
		}
		else{
			var pkgName=url.substr(pos1+2,pos2-pos1-2);
			pkg=UIPackage.getByName(pkgName);
			if (pkg !=null){
				var srcName=url.substr(pos2+1);
				return pkg.getItemByName(srcName);
			}
		}
		return null;
	}

	UIPackage.normalizeURL=function(url){
		if(url==null)
			return null;
		var pos1=url.indexOf("//");
		if (pos1==-1)
			return null;
		var pos2=url.indexOf("/",pos1+2);
		if (pos2==-1)
			return url;
		var pkgName=url.substr(pos1+2,pos2-pos1-2);
		var srcName=url.substr(pos2+1);
		return UIPackage.getItemURL(pkgName,srcName);
	}

	UIPackage.getBitmapFontByURL=function(url){
		return fairygui.UIPackage._bitmapFonts[url];
	}

	UIPackage.setStringsSource=function(source){
		fairygui.UIPackage._stringsSource={};
		var xml=Utils.parseXMLFromString(source);
		var resNode=ToolSet.findChildNode(xml,"resources");
		var nodes=resNode.childNodes;
		var length1=nodes.length;
		for (var i1=0;i1 < length1;i1++){
			var cxml=nodes[i1];
			if (cxml.nodeName=="string"){
				var key=cxml.getAttribute("name");
				var text=cxml.textContent;
				var i=key.indexOf("-");
				if(i==-1)
					continue ;
				var key2=key.substr(0,i);
				var key3=key.substr(i+1);
				var col=fairygui.UIPackage._stringsSource[key2];
				if(!col){
					col={};
					fairygui.UIPackage._stringsSource[key2]=col;
				}
				col[key3]=text;
			}
		}
	}

	UIPackage._constructing=0;
	UIPackage._packageInstById={};
	UIPackage._packageInstByName={};
	UIPackage._bitmapFonts={};
	UIPackage._stringsSource=null;
	UIPackage.sep0=",";
	UIPackage.sep1="\n";
	UIPackage.sep2=" ";
	UIPackage.sep3="=";
	UIPackage.__init$=function(){
		//class AtlasSprite
		AtlasSprite=(function(){
			function AtlasSprite(){
				this.atlas=null;
				this.rect=null;
				this.rotated=false;
				this.rect=new Rectangle();
			}
			__class(AtlasSprite,'');
			return AtlasSprite;
		})()
	}

	return UIPackage;
})()


//class fairygui.utils.PixelHitTestData
var PixelHitTestData=(function(){
	function PixelHitTestData(){
		this.pixelWidth=0;
		this.scale=NaN;
		this.pixels=null;
	}

	__class(PixelHitTestData,'fairygui.utils.PixelHitTestData');
	var __proto=PixelHitTestData.prototype;
	__proto.load=function(ba){
		ba.getInt32();
		this.pixelWidth=ba.getInt32();
		this.scale=1/ba.readByte();
		var len=ba.getInt32();
		this.pixels=__newvec(len);
		for(var i=0;i<len;i++){
			var j=ba.readByte();
			if(j<0)
				j+=256;
			this.pixels[i]=j;
		}
	}

	return PixelHitTestData;
})()


//class fairygui.utils.ToolSet
var ToolSet=(function(){
	function ToolSet(){}
	__class(ToolSet,'fairygui.utils.ToolSet');
	ToolSet.getFileName=function(source){
		var i=source.lastIndexOf("/");
		if (i !=-1)
			source=source.substr(i+1);
		i=source.lastIndexOf("\\");
		if (i !=-1)
			source=source.substr(i+1);
		i=source.lastIndexOf(".");
		if (i !=-1)
			return source.substring(0,i);
		else
		return source;
	}

	ToolSet.startsWith=function(source,str,ignoreCase){
		(ignoreCase===void 0)&& (ignoreCase=false);
		if (!source)
			return false;
		else if (source.length < str.length)
		return false;
		else {
			source=source.substring(0,str.length);
			if (!ignoreCase)
				return source==str;
			else
			return source.toLowerCase()==str.toLowerCase();
		}
	}

	ToolSet.endsWith=function(source,str,ignoreCase){
		(ignoreCase===void 0)&& (ignoreCase=false);
		if (!source)
			return false;
		else if (source.length < str.length)
		return false;
		else {
			source=source.substring(source.length-str.length);
			if (!ignoreCase)
				return source==str;
			else
			return source.toLowerCase()==str.toLowerCase();
		}
	}

	ToolSet.trim=function(targetString){
		return fairygui.utils.ToolSet.trimLeft(fairygui.utils.ToolSet.trimRight(targetString));
	}

	ToolSet.trimLeft=function(targetString){
		var tempChar="";
		for (var i=0;i < targetString.length;i++){
			tempChar=targetString.charAt(i);
			if (tempChar !=" " && tempChar !="\n" && tempChar !="\r"){
				break ;
			}
		}
		return targetString.substr(i);
	}

	ToolSet.trimRight=function(targetString){
		var tempChar="";
		for (var i=targetString.length-1;i >=0;i--){
			tempChar=targetString.charAt(i);
			if (tempChar !=" " && tempChar !="\n" && tempChar !="\r"){
				break ;
			}
		}
		return targetString.substring(0,i+1);
	}

	ToolSet.convertToHtmlColor=function(argb,hasAlpha){
		(hasAlpha===void 0)&& (hasAlpha=false);
		var alpha;
		if (hasAlpha)
			alpha=(argb >> 24 & 0xFF).toString(16);
		else
		alpha="";
		var red=(argb >> 16 & 0xFF).toString(16);
		var green=(argb >> 8 & 0xFF).toString(16);
		var blue=(argb & 0xFF).toString(16);
		if (alpha.length==1)
			alpha="0"+alpha;
		if (red.length==1)
			red="0"+red;
		if (green.length==1)
			green="0"+green;
		if (blue.length==1)
			blue="0"+blue;
		return "#"+alpha+red+green+blue;
	}

	ToolSet.convertFromHtmlColor=function(str,hasAlpha){
		(hasAlpha===void 0)&& (hasAlpha=false);
		if (str.length < 1)
			return 0;
		if (str.charAt(0)=="#")
			str=str.substr(1);
		if (str.length==8)
			return (parseInt(str.substr(0,2),16)<< 24)+parseInt(str.substr(2),16);
		else if (hasAlpha)
		return 0xFF000000+parseInt(str,16);
		else
		return parseInt(str,16);
	}

	ToolSet.displayObjectToGObject=function(obj){
		while (obj !=null && !((obj instanceof laya.display.Stage ))){
			if (obj["$owner"])
				return obj["$owner"];
			obj=obj.parent;
		}
		return null;
	}

	ToolSet.findChildNode=function(xml,name){
		var col=xml.childNodes;
		var length1=col.length;
		if (length1>0){
			for (var i1=0;i1 < length1;i1++){
				var cxml=col[i1];
				if (cxml.nodeName==name){
					return cxml;
				}
			}
		}
		return null;
	}

	ToolSet.encodeHTML=function(str){
		if (!str)
			return "";
		else
		return str.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;");
	}

	ToolSet.parseUBB=function(text){
		return fairygui.utils.ToolSet.defaultUBBParser.parse(text);
	}

	ToolSet.removeUBB=function(text){
		return fairygui.utils.ToolSet.defaultUBBParser.parse(text,true);
	}

	ToolSet.clamp=function(value,min,max){
		if(value<min)
			value=min;
		else if(value>max)
		value=max;
		return value;
	}

	ToolSet.clamp01=function(value){
		if(value>1)
			value=1;
		else if(value<0)
		value=0;
		return value;
	}

	ToolSet.base64Decode=function(bstr){
		var ba=new Byte();
		var code=0;
		var len=bstr.length;
		for (var i=0;i < len;i+=4){
			code=(ToolSet.BASE64_CHARS.indexOf(bstr.charAt(i))& 0x3F)<< 18;
			code+=(ToolSet.BASE64_CHARS.indexOf(bstr.charAt(i+1))& 0x3F)<< 12;
			code+=(ToolSet.BASE64_CHARS.indexOf(bstr.charAt(i+2))& 0x3F)<< 6;
			code+=(ToolSet.BASE64_CHARS.indexOf(bstr.charAt(i+3))& 0x3F);
			ba.writeByte((code >> 16)& 0xFF);
			ba.writeByte((code >> 8)& 0xFF);
			ba.writeByte(code & 0xFF);
		}
		if(len>0 && bstr.charAt(len-1)=="=")
			ba.length-=1;
		if(len>1 && bstr.charAt(len-2)=="=")
			ba.length-=1;
		ba.pos=0;
		return ba;
	}

	ToolSet.lerp=function(start,end,percent){
		return (start+percent*(end-start));
	}

	ToolSet.BASE64_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
	__static(ToolSet,
	['defaultUBBParser',function(){return this.defaultUBBParser=new UBBParser();}
	]);
	return ToolSet;
})()


//class fairygui.utils.UBBParser
var UBBParser=(function(){
	function UBBParser(){
		this._text=null;
		this._readPos=0;
		this._handlers=null;
		this.smallFontSize=12;
		this.normalFontSize=14;
		this.largeFontSize=16;
		this.defaultImgWidth=0;
		this.defaultImgHeight=0;
		this._handlers={};
		this._handlers["url"]=this.onTag_URL;
		this._handlers["img"]=this.onTag_IMG;
		this._handlers["b"]=this.onTag_Simple;
		this._handlers["i"]=this.onTag_Simple;
		this._handlers["u"]=this.onTag_Simple;
		this._handlers["sup"]=this.onTag_Simple;
		this._handlers["sub"]=this.onTag_Simple;
		this._handlers["color"]=this.onTag_COLOR;
		this._handlers["font"]=this.onTag_FONT;
		this._handlers["size"]=this.onTag_SIZE;
	}

	__class(UBBParser,'fairygui.utils.UBBParser');
	var __proto=UBBParser.prototype;
	__proto.onTag_URL=function(tagName,end,attr){
		if (!end){
			if (attr !=null)
				return "<a href=\""+attr+"\" target=\"_blank\">";
			else {
				var href=this.getTagText();
				return "<a href=\""+href+"\" target=\"_blank\">";
			}
		}
		else
		return "</a>";
	}

	__proto.onTag_IMG=function(tagName,end,attr){
		if (!end){
			var src=this.getTagText(true);
			if (!src)
				return null;
			if (this.defaultImgWidth)
				return "<img src=\""+src+"\" width=\""+this.defaultImgWidth+"\" height=\""+this.defaultImgHeight+"\"/>";
			else
			return "<img src=\""+src+"\"/>";
		}
		else
		return null;
	}

	__proto.onTag_Simple=function(tagName,end,attr){
		return end ? ("</"+tagName+">"):("<"+tagName+">");
	}

	__proto.onTag_COLOR=function(tagName,end,attr){
		if (!end)
			return "<font color=\""+attr+"\">";
		else
		return "</font>";
	}

	__proto.onTag_FONT=function(tagName,end,attr){
		if (!end)
			return "<font face=\""+attr+"\">";
		else
		return "</font>";
	}

	__proto.onTag_SIZE=function(tagName,end,attr){
		if (!end){
			if (attr=="normal")
				attr=""+this.normalFontSize;
			else if (attr=="small")
			attr=""+this.smallFontSize;
			else if (attr=="large")
			attr=""+this.largeFontSize;
			else if (attr.length && attr.charAt(0)=="+")
			attr=""+(this.smallFontSize+parseInt(attr.substr(1)));
			else if (attr.length && attr.charAt(0)=="-")
			attr=""+(this.smallFontSize-parseInt(attr.substr(1)));
			return "<font size=\""+attr+"\">";
		}
		else
		return "</font>";
	}

	__proto.getTagText=function(remove){
		(remove===void 0)&& (remove=false);
		var pos1=this._readPos;
		var pos2=0;
		var result="";
		while ((pos2=this._text.indexOf("[",pos1))!=-1){
			if (this._text.charCodeAt(pos2-1)==92){
				result+=this._text.substring(pos1,pos2-1);
				result+="[";
				pos1=pos2+1;
			}
			else{
				result+=this._text.substring(pos1,pos2);
				break ;
			}
		}
		if (pos2==-1)
			return null;
		if (remove)
			this._readPos=pos2;
		return result;
	}

	__proto.parse=function(text,remove){
		(remove===void 0)&& (remove=false);
		this._text=text;
		var pos1=0,pos2=0,pos3=0;
		var end=false;
		var tag,attr;
		var repl;
		var func;
		var result="";
		while((pos2=this._text.indexOf("[",pos1))!=-1){
			if (pos2 > 0 && this._text.charCodeAt(pos2-1)==92){
				result+=this._text.substring(pos1,pos2-1);
				result+="[";
				pos1=pos2+1;
				continue ;
			}
			result+=this._text.substring(pos1,pos2);
			pos1=pos2;
			pos2=this._text.indexOf("]",pos1);
			if(pos2==-1)
				break ;
			end=this._text.charAt(pos1+1)=='/';
			tag=this._text.substring(end?pos1+2:pos1+1,pos2);
			this._readPos=pos2+1;
			attr=null;
			repl=null;
			pos3=tag.indexOf("=");
			if(pos3!=-1){
				attr=tag.substring(pos3+1);
				tag=tag.substring(0,pos3);
			}
			tag=tag.toLowerCase();
			func=this._handlers[tag];
			if(func!=null){
				if(!remove){
					repl=func(tag,end,attr);
					if(repl!=null)
						result+=repl;
				}
			}
			else
			result+=this._text.substring(pos1,this._readPos);
			pos1=this._readPos;
		}
		if (pos1 < this._text.length)
			result+=this._text.substr(pos1);
		this._text=null;
		return result;
	}

	__static(UBBParser,
	['inst',function(){return this.inst=new UBBParser();}
	]);
	return UBBParser;
})()


//class fairygui.utils.ColorMatrix extends Array
var ColorMatrix=(function(_super){
	// initialization:
	function ColorMatrix(){
		ColorMatrix.__super.call(this);
		this.reset();
	}

	__class(ColorMatrix,'fairygui.utils.ColorMatrix',Array);
	var __proto=ColorMatrix.prototype;
	// public methods:
	__proto.reset=function(){
		for (var i=0;i<ColorMatrix.LENGTH;i++){
			this[i]=ColorMatrix.IDENTITY_MATRIX[i];
		}
	}

	__proto.invert=function(){
		this.multiplyMatrix([-1,0,0,0,255,
		0,-1,0,0,255,
		0,0,-1,0,255,
		0,0,0,1,0]);
	}

	__proto.adjustColor=function(p_brightness,p_contrast,p_saturation,p_hue){
		this.adjustHue(p_hue);
		this.adjustContrast(p_contrast);
		this.adjustBrightness(p_brightness);
		this.adjustSaturation(p_saturation);
	}

	__proto.adjustBrightness=function(p_val){
		p_val=this.cleanValue(p_val,1)*255;
		this.multiplyMatrix([
		1,0,0,0,p_val,
		0,1,0,0,p_val,
		0,0,1,0,p_val,
		0,0,0,1,0]);
	}

	__proto.adjustContrast=function(p_val){
		p_val=this.cleanValue(p_val,1);
		var s=p_val+1;
		var o=128 *(1-s);
		this.multiplyMatrix([
		s,0,0,0,o,
		0,s,0,0,o,
		0,0,s,0,o,
		0,0,0,1,0]);
	}

	__proto.adjustSaturation=function(p_val){
		p_val=this.cleanValue(p_val,1);
		p_val+=1;
		var invSat=1-p_val;
		var invLumR=invSat *0.299;
		var invLumG=invSat *0.587;
		var invLumB=invSat *0.114;
		this.multiplyMatrix([
		(invLumR+p_val),invLumG,invLumB,0,0,
		invLumR,(invLumG+p_val),invLumB,0,0,
		invLumR,invLumG,(invLumB+p_val),0,0,
		0,0,0,1,0]);
	}

	__proto.adjustHue=function(p_val){
		p_val=this.cleanValue(p_val,1);
		p_val *=Math.PI;
		var cos=Math.cos(p_val);
		var sin=Math.sin(p_val);
		this.multiplyMatrix([
		((0.299+(cos *(1-0.299)))+(sin *-(0.299))),((0.587+(cos *-(0.587)))+(sin *-(0.587))),((0.114+(cos *-(0.114)))+(sin *(1-0.114))),0,0,
		((0.299+(cos *-(0.299)))+(sin *0.143)),((0.587+(cos *(1-0.587)))+(sin *0.14)),((0.114+(cos *-(0.114)))+(sin *-0.283)),0,0,
		((0.299+(cos *-(0.299)))+(sin *-((1-0.299)))),((0.587+(cos *-(0.587)))+(sin *0.587)),((0.114+(cos *(1-0.114)))+(sin *0.114)),0,0,
		0,0,0,1,0]);
	}

	__proto.concat=function(p_matrix){
		if (p_matrix.length !=ColorMatrix.LENGTH){return;}
			this.multiplyMatrix(p_matrix);
	}

	__proto.clone=function(){
		var result=new ColorMatrix();
		result.copyMatrix(this);
		return result;
	}

	__proto.copyMatrix=function(p_matrix){
		var l=ColorMatrix.LENGTH;
		for (var i=0;i<l;i++){
			this[i]=p_matrix[i];
		}
	}

	__proto.multiplyMatrix=function(p_matrix){
		var col=[];
		var i=0;
		for (var y=0;y<4;++y){
			for (var x=0;x<5;++x){
				col[i+x]=p_matrix[i] *this[x]+
				p_matrix[i+1] *this[x+5]+
				p_matrix[i+2] *this[x+10]+
				p_matrix[i+3] *this[x+15]+
				(x==4 ? p_matrix[i+4] :0);
			}
			i+=5;
		}
		this.copyMatrix(col);
	}

	__proto.cleanValue=function(p_val,p_limit){
		return Math.min(p_limit,Math.max(-p_limit,p_val));
	}

	ColorMatrix.create=function(p_brightness,p_contrast,p_saturation,p_hue){
		var ret=new ColorMatrix();
		ret.adjustColor(p_brightness,p_contrast,p_saturation,p_hue);
		return ret;
	}

	ColorMatrix.LUMA_R=0.299;
	ColorMatrix.LUMA_G=0.587;
	ColorMatrix.LUMA_B=0.114;
	__static(ColorMatrix,
	['IDENTITY_MATRIX',function(){return this.IDENTITY_MATRIX=[
		1,0,0,0,0,
		0,1,0,0,0,
		0,0,1,0,0,
		0,0,0,1,0];},'LENGTH',function(){return this.LENGTH=ColorMatrix.IDENTITY_MATRIX.length;}
	]);
	return ColorMatrix;
})(Array)


//class fairygui.Controller extends laya.events.EventDispatcher
var Controller=(function(_super){
	function Controller(){
		this._name=null;
		this._selectedIndex=0;
		this._previousIndex=0;
		this._pageIds=null;
		this._pageNames=null;
		this._actions=null;
		this._parent=null;
		this._autoRadioGroupDepth=false;
		this.changing=false;
		Controller.__super.call(this);
		this._pageIds=[];
		this._pageNames=[];
		this._selectedIndex=-1;
		this._previousIndex=-1;
	}

	__class(Controller,'fairygui.Controller',_super);
	var __proto=Controller.prototype;
	__proto.dispose=function(){
		this.offAll();
	}

	//功能和设置selectedIndex一样，但不会触发事件
	__proto.setSelectedIndex=function(value){
		(value===void 0)&& (value=0);
		if (this._selectedIndex !=value){
			if(value > this._pageIds.length-1)
				throw "index out of bounds: "+value;
			this.changing=true;
			this._previousIndex=this._selectedIndex;
			this._selectedIndex=value;
			this._parent.applyController(this);
			this.changing=false;
		}
	}

	//功能和设置selectedPage一样，但不会触发事件
	__proto.setSelectedPage=function(value){
		var i=this._pageNames.indexOf(value);
		if (i==-1)
			i=0;
		this.setSelectedIndex(i);
	}

	__proto.getPageName=function(index){
		(index===void 0)&& (index=0);
		return this._pageNames[index];
	}

	__proto.addPage=function(name){
		(name===void 0)&& (name="");
		this.addPageAt(name,this._pageIds.length);
	}

	__proto.addPageAt=function(name,index){
		(index===void 0)&& (index=0);
		var nid=""+(fairygui.Controller._nextPageId++);
		if (index==this._pageIds.length){
			this._pageIds.push(nid);
			this._pageNames.push(name);
		}
		else {
			this._pageIds.splice(index,0,nid);
			this._pageNames.splice(index,0,name);
		}
	}

	__proto.removePage=function(name){
		var i=this._pageNames.indexOf(name);
		if (i !=-1){
			this._pageIds.splice(i,1);
			this._pageNames.splice(i,1);
			if (this._selectedIndex >=this._pageIds.length)
				this.selectedIndex=this._selectedIndex-1;
			else
			this._parent.applyController(this);
		}
	}

	__proto.removePageAt=function(index){
		(index===void 0)&& (index=0);
		this._pageIds.splice(index,1);
		this._pageNames.splice(index,1);
		if (this._selectedIndex >=this._pageIds.length)
			this.selectedIndex=this._selectedIndex-1;
		else
		this._parent.applyController(this);
	}

	__proto.clearPages=function(){
		this._pageIds.length=0;
		this._pageNames.length=0;
		if (this._selectedIndex !=-1)
			this.selectedIndex=-1;
		else
		this._parent.applyController(this);
	}

	__proto.hasPage=function(aName){
		return this._pageNames.indexOf(aName)!=-1;
	}

	__proto.getPageIndexById=function(aId){
		return this._pageIds.indexOf(aId);
	}

	__proto.getPageIdByName=function(aName){
		var i=this._pageNames.indexOf(aName);
		if(i !=-1)
			return this._pageIds[i];
		else
		return null;
	}

	__proto.getPageNameById=function(aId){
		var i=this._pageIds.indexOf(aId);
		if(i !=-1)
			return this._pageNames[i];
		else
		return null;
	}

	__proto.getPageId=function(index){
		(index===void 0)&& (index=0);
		return this._pageIds[index];
	}

	__proto.runActions=function(){
		if(this._actions){
			var cnt=this._actions.length;
			for(var i=0;i<cnt;i++){
				this._actions[i].run(this,this.previousPageId,this.selectedPageId);
			}
		}
	}

	__proto.setup=function(xml){
		this._name=xml.getAttribute("name");
		this._autoRadioGroupDepth=xml.getAttribute("autoRadioGroupDepth")=="true";
		var i=0;
		var k=0;
		var str=xml.getAttribute("pages");
		if (str){
			var arr=str.split(",");
			var cnt=arr.length;
			for (i=0;i < cnt;i+=2){
				this._pageIds.push(arr[i]);
				this._pageNames.push(arr[i+1]);
			}
		};
		var col=xml.childNodes;
		var length1=col.length;
		if(length1>0){
			if(!this._actions)
				this._actions=[];
			for(var i1=0;i1 < length1;i1++){
				var cxml=col[i1];
				var action=ControllerAction.createAction(cxml.getAttribute("type"));
				action.setup(cxml);
				this._actions.push(action);
			}
		}
		str=xml.getAttribute("transitions");
		if(str){
			if(!this._actions)
				this._actions=[];
			arr=str.split(",");
			cnt=arr.length;
			var ii=0;
			for(i=0;i < cnt;i++){
				str=arr[i];
				if(!str)
					continue ;
				var taction=new PlayTransitionAction();
				k=str.indexOf("=");
				taction.transitionName=str.substr(k+1);
				str=str.substring(0,k);
				k=str.indexOf("-");
				ii=parseInt(str.substring(k+1));
				if(ii<this._pageIds.length)
					taction.toPage=[this._pageIds[ii]];
				str=str.substring(0,k);
				if(str !="*"){
					ii=parseInt(str);
					if(ii<this._pageIds.length)
						taction.fromPage=[this._pageIds[ii]];
				}
				taction.stopOnExit=true;
				this._actions.push(taction);
			}
		}
		if (this._parent && this._pageIds.length > 0)
			this._selectedIndex=0;
		else
		this._selectedIndex=-1;
	}

	__getset(0,__proto,'oppositePageId',null,function(val){
		var i=this._pageIds.indexOf(val);
		if(i > 0)
			this.selectedIndex=0;
		else if(this._pageIds.length > 1)
		this.selectedIndex=1;
	});

	__getset(0,__proto,'name',function(){
		return this._name;
		},function(value){
		this._name=value;
	});

	__getset(0,__proto,'pageCount',function(){
		return this._pageIds.length;
	});

	__getset(0,__proto,'parent',function(){
		return this._parent;
	});

	__getset(0,__proto,'selectedIndex',function(){
		return this._selectedIndex;
		},function(value){
		if(this._selectedIndex !=value){
			if(value > this._pageIds.length-1)
				throw "index out of bounds: "+value;
			this.changing=true;
			this._previousIndex=this._selectedIndex;
			this._selectedIndex=value;
			this._parent.applyController(this);
			this.event("fui_state_changed");
			this.changing=false;
		}
	});

	__getset(0,__proto,'selectedPage',function(){
		if (this._selectedIndex==-1)
			return null;
		else
		return this._pageNames[this._selectedIndex];
		},function(val){
		var i=this._pageNames.indexOf(val);
		if (i==-1)
			i=0;
		this.selectedIndex=i;
	});

	__getset(0,__proto,'previsousIndex',function(){
		return this._previousIndex;
	});

	__getset(0,__proto,'previousPage',function(){
		if (this._previousIndex==-1)
			return null;
		else
		return this._pageNames[this._previousIndex];
	});

	__getset(0,__proto,'selectedPageId',function(){
		if (this._selectedIndex==-1)
			return null;
		else
		return this._pageIds[this._selectedIndex];
		},function(val){
		var i=this._pageIds.indexOf(val);
		this.selectedIndex=i;
	});

	__getset(0,__proto,'previousPageId',function(){
		if(this._previousIndex==-1)
			return null;
		else
		return this._pageIds[this._previousIndex];
	});

	Controller._nextPageId=0;
	return Controller;
})(EventDispatcher)


//class fairygui.utils.PixelHitTest extends laya.utils.HitArea
var PixelHitTest=(function(_super){
	function PixelHitTest(data,offsetX,offsetY){
		this._data=null;
		this.offsetX=0;
		this.offsetY=0;
		this.scaleX=NaN;
		this.scaleY=NaN;
		PixelHitTest.__super.call(this);
		(offsetX===void 0)&& (offsetX=0);
		(offsetY===void 0)&& (offsetY=0);
		this._data=data;
		this.offsetX=offsetX;
		this.offsetY=offsetY;
		this.scaleX=1;
		this.scaleY=1;
	}

	__class(PixelHitTest,'fairygui.utils.PixelHitTest',_super);
	var __proto=PixelHitTest.prototype;
	__proto.isHit=function(x,y){
		x=Math.floor((x / this.scaleX-this.offsetX)*this._data.scale);
		y=Math.floor((y / this.scaleY-this.offsetY)*this._data.scale);
		if (x < 0 || y < 0 || x >=this._data.pixelWidth)
			return false;
		var pos=y *this._data.pixelWidth+x;
		var pos2=Math.floor(pos / 8);
		var pos3=pos % 8;
		if (pos2 >=0 && pos2 < this._data.pixels.length)
			return ((this._data.pixels[pos2] >> pos3)& 0x1)==1;
		else
		return false;
	}

	return PixelHitTest;
})(HitArea)


//class fairygui.action.ChangePageAction extends fairygui.action.ControllerAction
var ChangePageAction=(function(_super){
	function ChangePageAction(){
		this.objectId=null;
		this.controllerName=null;
		this.targetPage=null;
		ChangePageAction.__super.call(this);
	}

	__class(ChangePageAction,'fairygui.action.ChangePageAction',_super);
	var __proto=ChangePageAction.prototype;
	__proto.enter=function(controller){
		if(!this.controllerName)
			return;
		var gcom;
		if(this.objectId)
			gcom=controller.parent.getChildById(this.objectId);
		else
		gcom=controller.parent;
		if(gcom){
			var cc=gcom.getController(this.controllerName);
			if(cc && cc!=controller && !cc.changing)
				cc.selectedPageId=this.targetPage;
		}
	}

	__proto.setup=function(xml){
		_super.prototype.setup.call(this,xml);
		this.objectId=xml.getAttribute("objectId");
		this.controllerName=xml.getAttribute("controller");
		this.targetPage=xml.getAttribute("targetPage");
	}

	return ChangePageAction;
})(ControllerAction)


//class fairygui.action.PlayTransitionAction extends fairygui.action.ControllerAction
var PlayTransitionAction=(function(_super){
	function PlayTransitionAction(){
		this.transitionName=null;
		this.playTimes=1;
		this.delay=0;
		this.stopOnExit=false;
		this._currentTransition=null;
		PlayTransitionAction.__super.call(this);
	}

	__class(PlayTransitionAction,'fairygui.action.PlayTransitionAction',_super);
	var __proto=PlayTransitionAction.prototype;
	__proto.enter=function(controller){
		var trans=controller.parent.getTransition(this.transitionName);
		if(trans){
			if(this._currentTransition && this._currentTransition.playing)
				trans.changePlayTimes(this.playTimes);
			else
			trans.play(null,this.playTimes,this.delay);
			this._currentTransition=trans;
		}
	}

	__proto.leave=function(controller){
		if(this.stopOnExit && this._currentTransition){
			this._currentTransition.stop();
			this._currentTransition=null;
		}
	}

	__proto.setup=function(xml){
		_super.prototype.setup.call(this,xml);
		this.transitionName=xml.getAttribute("transition");
		var str;
		str=xml.getAttribute("repeat");
		if(str)
			this.playTimes=parseInt(str);
		str=xml.getAttribute("delay");
		if(str)
			this.delay=parseFloat(str);
		this.stopOnExit=xml.getAttribute("stopOnExit")=="true";
	}

	return PlayTransitionAction;
})(ControllerAction)


//class fairygui.GTextField extends fairygui.GObject
var GTextField=(function(_super){
	function GTextField(){
		this._gearColor=null;
		this._templateVars=null;
		this._text=null;
		GTextField.__super.call(this);
		this._gearColor=new GearColor(this);
	}

	__class(GTextField,'fairygui.GTextField',_super);
	var __proto=GTextField.prototype;
	Laya.imps(__proto,{"fairygui.IColorGear":true})
	__proto.parseTemplate=function(template){
		var pos1=0,pos2=0,pos3=0;
		var tag;
		var value;
		var result="";
		while((pos2=template.indexOf("{",pos1))!=-1){
			if (pos2 > 0 && template.charCodeAt(pos2-1)==92){
				result+=template.substring(pos1,pos2-1);
				result+="{";
				pos1=pos2+1;
				continue ;
			}
			result+=template.substring(pos1,pos2);
			pos1=pos2;
			pos2=template.indexOf("}",pos1);
			if(pos2==-1)
				break ;
			if(pos2==pos1+1){
				result+=template.substr(pos1,2);
				pos1=pos2+1;
				continue ;
			}
			tag=template.substring(pos1+1,pos2);
			pos3=tag.indexOf("=");
			if(pos3!=-1){
				value=this._templateVars[tag.substring(0,pos3)];
				if(value==null)
					result+=tag.substring(pos3+1);
				else
				result+=value;
			}
			else{
				value=this._templateVars[tag];
				if(value!=null)
					result+=value;
			}
			pos1=pos2+1;
		}
		if (pos1 < template.length)
			result+=template.substr(pos1);
		return result;
	}

	__proto.setVar=function(name,value){
		if(!this._templateVars)
			this._templateVars={};
		this._templateVars[name]=value;
		return this;
	}

	__proto.flushVars=function(){
		this.text=this._text;
	}

	__proto.handleControllerChanged=function(c){
		_super.prototype.handleControllerChanged.call(this,c);
		if(this._gearColor.controller==c)
			this._gearColor.apply();
	}

	__proto.setup_beforeAdd=function(xml){
		_super.prototype.setup_beforeAdd.call(this,xml);
		var str;
		str=xml.getAttribute("font");
		if (str)
			this.font=str;
		str=xml.getAttribute("fontSize");
		if (str)
			this.fontSize=parseInt(str);
		str=xml.getAttribute("color");
		if (str)
			this.color=str;
		str=xml.getAttribute("align");
		if (str)
			this.align=str;
		str=xml.getAttribute("vAlign");
		if (str)
			this.valign=str;
		str=xml.getAttribute("leading");
		if (str)
			this.leading=parseInt(str);
		else
		this.leading=3;
		str=xml.getAttribute("letterSpacing");
		if (str)
			this.letterSpacing=parseInt(str);
		this.ubbEnabled=xml.getAttribute("ubb")=="true";
		this.italic=xml.getAttribute("italic")=="true";
		this.bold=xml.getAttribute("bold")=="true";
		this.underline=xml.getAttribute("underline")=="true";
		this.singleLine=xml.getAttribute("singleLine")=="true";
		str=xml.getAttribute("strokeColor");
		if (str){
			this.strokeColor=str;
			str=xml.getAttribute("strokeSize");
			if(str)
				this.stroke=parseInt(str)+1;
			else
			this.stroke=2;
		}
		if(xml.getAttribute("vars")=="true")
			this._templateVars={};
	}

	__proto.setup_afterAdd=function(xml){
		_super.prototype.setup_afterAdd.call(this,xml);
		var str=xml.getAttribute("text");
		if(str !=null && str.length > 0)
			this.text=str;
	}

	__getset(0,__proto,'color',function(){
		return null;
		},function(value){
	});

	__getset(0,__proto,'font',function(){
		return null;
		},function(value){
	});

	__getset(0,__proto,'templateVars',function(){
		return this._templateVars;
		},function(value){
		if(this._templateVars==null && value==null)
			return;
		this._templateVars=value;
		this.flushVars();
	});

	__getset(0,__proto,'leading',function(){
		return 0;
		},function(value){
	});

	__getset(0,__proto,'fontSize',function(){
		return 0;
		},function(value){
	});

	__getset(0,__proto,'bold',function(){
		return false;
		},function(value){
	});

	__getset(0,__proto,'letterSpacing',function(){
		return 0;
		},function(value){
	});

	__getset(0,__proto,'align',function(){
		return null;
		},function(value){
	});

	__getset(0,__proto,'valign',function(){
		return null;
		},function(value){
	});

	__getset(0,__proto,'italic',function(){
		return false;
		},function(value){
	});

	__getset(0,__proto,'underline',function(){
		return false;
		},function(value){
	});

	__getset(0,__proto,'singleLine',function(){
		return false;
		},function(value){
	});

	__getset(0,__proto,'stroke',function(){
		return 0;
		},function(value){
	});

	__getset(0,__proto,'strokeColor',function(){
		return null;
		},function(value){
	});

	__getset(0,__proto,'ubbEnabled',function(){
		return false;
		},function(value){
	});

	__getset(0,__proto,'textWidth',function(){
		return 0;
	});

	__getset(0,__proto,'gearColor',function(){
		return this._gearColor;
	});

	return GTextField;
})(GObject)


//class fairygui.GComponent extends fairygui.GObject
var GComponent=(function(_super){
	function GComponent(){
		this._sortingChildCount=0;
		this._opaque=false;
		this._applyingController=null;
		this._margin=null;
		this._trackBounds=false;
		this._boundsChanged=false;
		this._childrenRenderOrder=0;
		this._apexIndex=0;
		this._buildingDisplayList=false;
		this._children=null;
		this._controllers=null;
		this._transitions=null;
		this._container=null;
		this._scrollPane=null;
		this._alignOffset=null;
		GComponent.__super.call(this);
		this._children=[];
		this._controllers=[];
		this._transitions=[];
		this._margin=new Margin();
		this._alignOffset=new Point();
	}

	__class(GComponent,'fairygui.GComponent',_super);
	var __proto=GComponent.prototype;
	__proto.createDisplayObject=function(){
		_super.prototype.createDisplayObject.call(this);
		this._displayObject.mouseEnabled=true;
		this._displayObject.mouseThrough=true;
		this._container=this._displayObject;
	}

	__proto.dispose=function(){
		var i=0;
		var cnt=0;
		cnt=this._transitions.length;
		for (i=0;i < cnt;++i){
			var trans=this._transitions[i];
			trans.dispose();
		}
		cnt=this._controllers.length;
		for (i=0;i < cnt;++i){
			var cc=this._controllers[i];
			cc.dispose();
		}
		if (this.scrollPane !=null)
			this.scrollPane.dispose();
		cnt=this._children.length;
		for(i=cnt-1;i >=0;--i){
			var obj=this._children[i];
			obj.parent=null;
			obj.dispose();
		}
		this._boundsChanged=false;
		_super.prototype.dispose.call(this);
	}

	__proto.addChild=function(child){
		this.addChildAt(child,this._children.length);
		return child;
	}

	__proto.addChildAt=function(child,index){
		(index===void 0)&& (index=0);
		if(!child)
			throw "child is null";
		var numChildren=this._children.length;
		if(index >=0 && index <=numChildren){
			if(child.parent==this){
				this.setChildIndex(child,index);
			}
			else {
				child.removeFromParent();
				child.parent=this;
				var cnt=this._children.length;
				if(child.sortingOrder !=0){
					this._sortingChildCount++;
					index=this.getInsertPosForSortingChild(child);
				}
				else if(this._sortingChildCount > 0){
					if(index > (cnt-this._sortingChildCount))
						index=cnt-this._sortingChildCount;
				}
				if(index==cnt)
					this._children.push(child);
				else
				this._children.splice(index,0,child);
				this.childStateChanged(child);
				this.setBoundsChangedFlag();
			}
			return child;
		}
		else {
			throw "Invalid child index";
		}
	}

	__proto.getInsertPosForSortingChild=function(target){
		var cnt=this._children.length;
		var i=0;
		for(i=0;i < cnt;i++){
			var child=this._children[i];
			if(child==target)
				continue ;
			if(target.sortingOrder < child.sortingOrder)
				break ;
		}
		return i;
	}

	__proto.removeChild=function(child,dispose){
		(dispose===void 0)&& (dispose=false);
		var childIndex=this._children.indexOf(child);
		if(childIndex !=-1){
			this.removeChildAt(childIndex,dispose);
		}
		return child;
	}

	__proto.removeChildAt=function(index,dispose){
		(dispose===void 0)&& (dispose=false);
		if(index >=0 && index < this.numChildren){
			var child=this._children[index];
			child.parent=null;
			if(child.sortingOrder !=0)
				this._sortingChildCount--;
			this._children.splice(index,1);
			child.group=null;
			if(child.inContainer){
				this._container.removeChild(child.displayObject);
				if (this._childrenRenderOrder==2)
					Laya.timer.callLater(this,this.buildNativeDisplayList);
			}
			if(dispose)
				child.dispose();
			this.setBoundsChangedFlag();
			return child;
		}
		else {
			throw "Invalid child index";
		}
	}

	__proto.removeChildren=function(beginIndex,endIndex,dispose){
		(beginIndex===void 0)&& (beginIndex=0);
		(endIndex===void 0)&& (endIndex=-1);
		(dispose===void 0)&& (dispose=false);
		if(endIndex < 0 || endIndex >=this.numChildren)
			endIndex=this.numChildren-1;
		for(var i=beginIndex;i <=endIndex;++i)
		this.removeChildAt(beginIndex,dispose);
	}

	__proto.getChildAt=function(index){
		(index===void 0)&& (index=0);
		if(index >=0 && index < this.numChildren)
			return this._children[index];
		else
		throw "Invalid child index";
	}

	__proto.getChild=function(name){
		var cnt=this._children.length;
		for(var i=0;i < cnt;++i){
			if(this._children[i].name==name)
				return this._children[i];
		}
		return null;
	}

	__proto.getVisibleChild=function(name){
		var cnt=this._children.length;
		for(var i=0;i < cnt;++i){
			var child=this._children[i];
			if(child.internalVisible && child.internalVisible2 && child.name==name)
				return child;
		}
		return null;
	}

	__proto.getChildInGroup=function(name,group){
		var cnt=this._children.length;
		for(var i=0;i < cnt;++i){
			var child=this._children[i];
			if(child.group==group && child.name==name)
				return child;
		}
		return null;
	}

	__proto.getChildById=function(id){
		var cnt=this._children.length;
		for(var i=0;i < cnt;++i){
			if(this._children[i]._id==id)
				return this._children[i];
		}
		return null;
	}

	__proto.getChildIndex=function(child){
		return this._children.indexOf(child);
	}

	__proto.setChildIndex=function(child,index){
		(index===void 0)&& (index=0);
		var oldIndex=this._children.indexOf(child);
		if(oldIndex==-1)
			throw "Not a child of this container";
		if(child.sortingOrder !=0)
			return;
		var cnt=this._children.length;
		if(this._sortingChildCount > 0){
			if(index > (cnt-this._sortingChildCount-1))
				index=cnt-this._sortingChildCount-1;
		}
		this._setChildIndex(child,oldIndex,index);
	}

	__proto.setChildIndexBefore=function(child,index){
		var oldIndex=this._children.indexOf(child);
		if (oldIndex==-1)
			throw "Not a child of this container";
		if(child.sortingOrder!=0)
			return oldIndex;
		var cnt=this._children.length;
		if(this._sortingChildCount>0){
			if (index > (cnt-this._sortingChildCount-1))
				index=cnt-this._sortingChildCount-1;
		}
		if (oldIndex < index)
			return this._setChildIndex(child,oldIndex,index-1);
		else
		return this._setChildIndex(child,oldIndex,index);
	}

	__proto._setChildIndex=function(child,oldIndex,index){
		var cnt=this._children.length;
		if(index > cnt)
			index=cnt;
		if(oldIndex==index)
			return oldIndex;
		this._children.splice(oldIndex,1);
		this._children.splice(index,0,child);
		if(child.inContainer){
			var displayIndex=0;
			var g;
			var i=0;
			if (this._childrenRenderOrder==0){
				for(i=0;i<index;i++){
					g=this._children[i];
					if(g.inContainer)
						displayIndex++;
				}
				if(displayIndex==this._container.numChildren)
					displayIndex--;
				this._container.setChildIndex(child.displayObject,displayIndex);
			}
			else if (this._childrenRenderOrder==1){
				for (i=cnt-1;i > index;i--){
					g=this._children[i];
					if (g.inContainer)
						displayIndex++;
				}
				if(displayIndex==this._container.numChildren)
					displayIndex--;
				this._container.setChildIndex(child.displayObject,displayIndex);
			}
			else{
				Laya.timer.callLater(this,this.buildNativeDisplayList);
			}
			this.setBoundsChangedFlag();
		}
		return index;
	}

	__proto.swapChildren=function(child1,child2){
		var index1=this._children.indexOf(child1);
		var index2=this._children.indexOf(child2);
		if(index1==-1 || index2==-1)
			throw "Not a child of this container";
		this.swapChildrenAt(index1,index2);
	}

	__proto.swapChildrenAt=function(index1,index2){
		(index2===void 0)&& (index2=0);
		var child1=this._children[index1];
		var child2=this._children[index2];
		this.setChildIndex(child1,index2);
		this.setChildIndex(child2,index1);
	}

	__proto.isAncestorOf=function(child){
		if (child==null)
			return false;
		var p=child.parent;
		while(p){
			if(p==this)
				return true;
			p=p.parent;
		}
		return false;
	}

	__proto.addController=function(controller){
		this._controllers.push(controller);
		controller._parent=this;
		this.applyController(controller);
	}

	__proto.getControllerAt=function(index){
		return this._controllers[index];
	}

	__proto.getController=function(name){
		var cnt=this._controllers.length;
		for(var i=0;i < cnt;++i){
			var c=this._controllers[i];
			if(c.name==name)
				return c;
		}
		return null;
	}

	__proto.removeController=function(c){
		var index=this._controllers.indexOf(c);
		if(index==-1)
			throw new Error("controller not exists");
		c._parent=null;
		this._controllers.splice(index,1);
		var length=this._children.length;
		for(var i=0;i < length;i++){
			var child=this._children[i];
			child.handleControllerChanged(c);
		}
	}

	__proto.childStateChanged=function(child){
		if(this._buildingDisplayList)
			return;
		var cnt=this._children.length;
		if((child instanceof fairygui.GGroup )){
			for(var i=0;i < cnt;i++){
				var g=this._children[i];
				if(g.group==child)
					this.childStateChanged(g);
			}
			return;
		}
		if(!child.displayObject)
			return;
		if(child.internalVisible && child.displayObject!=this._displayObject.mask){
			if(!child.displayObject.parent){
				var index=0
				if (this._childrenRenderOrder==0){
					for (i=0;i < cnt;i++){
						g=this._children[i];
						if (g==child)
							break ;
						if (g.displayObject !=null && g.displayObject.parent !=null)
							index++;
					}
					this._container.addChildAt(child.displayObject,index);
				}
				else if (this._childrenRenderOrder==1){
					for (i=cnt-1;i >=0;i--){
						g=this._children[i];
						if (g==child)
							break ;
						if (g.displayObject !=null && g.displayObject.parent !=null)
							index++;
					}
					this._container.addChildAt(child.displayObject,index);
				}
				else{
					this._container.addChild(child.displayObject);
					Laya.timer.callLater(this,this.buildNativeDisplayList);
				}
			}
		}
		else {
			if(child.displayObject.parent){
				this._container.removeChild(child.displayObject);
				if (this._childrenRenderOrder==2)
					Laya.timer.callLater(this,this.buildNativeDisplayList);
			}
		}
	}

	__proto.buildNativeDisplayList=function(){
		var cnt=this._children.length;
		if (cnt==0)
			return;
		var i=0;
		var child;
		switch (this._childrenRenderOrder){
			case 0:{
					for (i=0;i < cnt;i++){
						child=this._children[i];
						if (child.displayObject !=null && child.internalVisible)
							this._container.addChild(child.displayObject);
					}
				}
				break ;
			case 1:{
					for (i=cnt-1;i >=0;i--){
						child=this._children[i];
						if (child.displayObject !=null && child.internalVisible)
							this._container.addChild(child.displayObject);
					}
				}
				break ;
			case 2:{
					for (i=0;i < this._apexIndex;i++){
						child=this._children[i];
						if (child.displayObject !=null && child.internalVisible)
							this._container.addChild(child.displayObject);
					}
					for (i=cnt-1;i >=this._apexIndex;i--){
						child=this._children[i];
						if (child.displayObject !=null && child.internalVisible)
							this._container.addChild(child.displayObject);
					}
				}
				break ;
			}
	}

	__proto.applyController=function(c){
		this._applyingController=c;
		var child;
		var length=this._children.length;
		for(var i=0;i < length;i++){
			child=this._children[i];
			child.handleControllerChanged(c);
		}
		this._applyingController=null;
		c.runActions();
	}

	__proto.applyAllControllers=function(){
		var cnt=this._controllers.length;
		for(var i=0;i < cnt;++i){
			this.applyController(this._controllers[i]);
		}
	}

	__proto.adjustRadioGroupDepth=function(obj,c){
		var cnt=this._children.length;
		var i=NaN;
		var child;
		var myIndex=-1,maxIndex=-1;
		for(i=0;i < cnt;i++){
			child=this._children[i];
			if(child==obj){
				myIndex=i;
			}
			else if(((child instanceof fairygui.GButton ))
			&& (child).relatedController==c){
				if(i > maxIndex)
					maxIndex=i;
			}
		}
		if(myIndex < maxIndex){
			if(this._applyingController!=null)
				this._children[maxIndex].handleControllerChanged(this._applyingController);
			this.swapChildrenAt(myIndex,maxIndex);
		}
	}

	__proto.getTransitionAt=function(index){
		return this._transitions[index];
	}

	__proto.getTransition=function(transName){
		var cnt=this._transitions.length;
		for(var i=0;i < cnt;++i){
			var trans=this._transitions[i];
			if(trans.name==transName)
				return trans;
		}
		return null;
	}

	__proto.isChildInView=function(child){
		if(this._displayObject.scrollRect !=null){
			return child.x+child.width >=0 && child.x <=this.width
			&& child.y+child.height >=0 && child.y <=this.height;
		}
		else if(this._scrollPane !=null){
			return this._scrollPane.isChildInView(child);
		}
		else
		return true;
	}

	__proto.getFirstChildInView=function(){
		var cnt=this._children.length;
		for(var i=0;i < cnt;++i){
			var child=this._children[i];
			if(this.isChildInView(child))
				return i;
		}
		return-1;
	}

	__proto.updateHitArea=function(){
		if((this._displayObject.hitArea instanceof fairygui.utils.PixelHitTest )){
			var hitTest=(this._displayObject.hitArea);
			if(this.sourceWidth!=0)
				hitTest.scaleX=this.width/this.sourceWidth;
			if(this.sourceHeight!=0)
				hitTest.scaleY=this.height/this.sourceHeight;
		}
		else{
			if(this._displayObject.hitArea==null)
				this._displayObject.hitArea=new Rectangle();
			this._displayObject.hitArea.setTo(0,0,this.width,this.height);
		}
	}

	__proto.updateMask=function(){
		var rect=this._displayObject.scrollRect;
		if(rect==null)
			rect=new Rectangle();
		rect.x=this._margin.left;
		rect.y=this._margin.top;
		rect.width=this.width-this._margin.right;
		rect.height=this.height-this._margin.bottom;
		this._displayObject.scrollRect=rect;
	}

	__proto.setupScroll=function(scrollBarMargin,scroll,scrollBarDisplay,flags,vtScrollBarRes,hzScrollBarRes,headerRes,footerRes){
		if (this._displayObject==this._container){
			this._container=new Sprite();
			this._displayObject.addChild(this._container);
		}
		this._scrollPane=new ScrollPane(this,scroll,scrollBarMargin,scrollBarDisplay,flags,
		vtScrollBarRes,hzScrollBarRes,headerRes,footerRes);
	}

	__proto.setupOverflow=function(overflow){
		if(overflow==1){
			if (this._displayObject==this._container){
				this._container=new Sprite();
				this._displayObject.addChild(this._container);
			}
			this.updateMask();
			this._container.pos(this._margin.left,this._margin.top);
		}
		else if(this._margin.left !=0 || this._margin.top !=0){
			if (this._displayObject==this._container){
				this._container=new Sprite();
				this._displayObject.addChild(this._container);
			}
			this._container.pos(this._margin.left,this._margin.top);
		}
	}

	__proto.handleSizeChanged=function(){
		_super.prototype.handleSizeChanged.call(this);
		if(this._scrollPane)
			this._scrollPane.onOwnerSizeChanged();
		else if(this._displayObject.scrollRect !=null)
		this.updateMask();
		if(this._displayObject.hitArea!=null)
			this.updateHitArea();
	}

	__proto.handleGrayedChanged=function(){
		var c=this.getController("grayed");
		if(c !=null){
			c.selectedIndex=this.grayed ? 1 :0;
			return;
		};
		var v=this.grayed;
		var cnt=this._children.length;
		for(var i=0;i < cnt;++i){
			this._children[i].grayed=v;
		}
	}

	__proto.handleControllerChanged=function(c){
		_super.prototype.handleControllerChanged.call(this,c);
		if (this._scrollPane !=null)
			this._scrollPane.handleControllerChanged(c);
	}

	__proto.setBoundsChangedFlag=function(){
		if (!this._scrollPane && !this._trackBounds)
			return;
		if (!this._boundsChanged){
			this._boundsChanged=true;
			Laya.timer.callLater(this,this.__render);
		}
	}

	__proto.__render=function(){
		if (this._boundsChanged){
			var i1=0;
			var len=this._children.length;
			var child
			for(i1=0;i1 < len;i1++){
				child=this._children[i1];
				child.ensureSizeCorrect();
			}
			this.updateBounds();
		}
	}

	__proto.ensureBoundsCorrect=function(){
		var i1=0;
		var len=this._children.length;
		var child
		for(i1=0;i1 < len;i1++){
			child=this._children[i1];
			child.ensureSizeCorrect();
		}
		if (this._boundsChanged)
			this.updateBounds();
	}

	__proto.updateBounds=function(){
		var ax=0,ay=0,aw=0,ah=0;
		var len=this._children.length;
		if(len > 0){
			ax=Number.POSITIVE_INFINITY,ay=Number.POSITIVE_INFINITY;
			var ar=Number.NEGATIVE_INFINITY,ab=Number.NEGATIVE_INFINITY;
			var tmp=0;
			var i1=0;
			for(i1=0;i1 < len;i1++){
				var child=this._children[i1];
				tmp=child.x;
				if(tmp < ax)
					ax=tmp;
				tmp=child.y;
				if(tmp < ay)
					ay=tmp;
				tmp=child.x+child.actualWidth;
				if(tmp > ar)
					ar=tmp;
				tmp=child.y+child.actualHeight;
				if(tmp > ab)
					ab=tmp;
			}
			aw=ar-ax;
			ah=ab-ay;
		}
		this.setBounds(ax,ay,aw,ah);
	}

	__proto.setBounds=function(ax,ay,aw,ah){
		this._boundsChanged=false;
		if (this._scrollPane)
			this._scrollPane.setContentSize(Math.round(ax+aw),Math.round(ay+ah));
	}

	__proto.getSnappingPosition=function(xValue,yValue,resultPoint){
		if(!resultPoint)
			resultPoint=new Point();
		var cnt=this._children.length;
		if(cnt==0){
			resultPoint.x=0;
			resultPoint.y=0;
			return resultPoint;
		}
		this.ensureBoundsCorrect();
		var obj=null;
		var prev=null;
		var i=0;
		if(yValue !=0){
			for(;i < cnt;i++){
				obj=this._children[i];
				if(yValue < obj.y){
					if(i==0){
						yValue=0;
						break ;
					}
					else {
						prev=this._children[i-1];
						if(yValue < prev.y+prev.actualHeight / 2)
							yValue=prev.y;
						else
						yValue=obj.y;
						break ;
					}
				}
			}
			if(i==cnt)
				yValue=obj.y;
		}
		if(xValue !=0){
			if(i > 0)
				i--;
			for(;i < cnt;i++){
				obj=this._children[i];
				if(xValue < obj.x){
					if(i==0){
						xValue=0;
						break ;
					}
					else {
						prev=this._children[i-1];
						if(xValue < prev.x+prev.actualWidth / 2)
							xValue=prev.x;
						else
						xValue=obj.x;
						break ;
					}
				}
			}
			if(i==cnt)
				xValue=obj.x;
		}
		resultPoint.x=xValue;
		resultPoint.y=yValue;
		return resultPoint;
	}

	__proto.childSortingOrderChanged=function(child,oldValue,newValue){
		(newValue===void 0)&& (newValue=0);
		if (newValue==0){
			this._sortingChildCount--;
			this.setChildIndex(child,this._children.length);
		}
		else {
			if (oldValue==0)
				this._sortingChildCount++;
			var oldIndex=this._children.indexOf(child);
			var index=this.getInsertPosForSortingChild(child);
			if (oldIndex < index)
				this._setChildIndex(child,oldIndex,index-1);
			else
			this._setChildIndex(child,oldIndex,index);
		}
	}

	__proto.constructFromResource=function(){
		this.constructFromResource2(null,0);
	}

	__proto.constructFromResource2=function(objectPool,poolIndex){
		var xml=this.packageItem.owner.getItemAsset(this.packageItem);
		this._underConstruct=true;
		var str;
		var arr;
		str=xml.getAttribute("size");
		arr=str.split(",");
		this.sourceWidth=parseInt(arr[0]);
		this.sourceHeight=parseInt(arr[1]);
		this.initWidth=this.sourceWidth;
		this.initHeight=this.sourceHeight;
		this.setSize(this.sourceWidth,this.sourceHeight);
		str=xml.getAttribute("restrictSize");
		if(str){
			arr=str.split(",");
			this.minWidth=parseInt(arr[0]);
			this.maxWidth=parseInt(arr[1]);
			this.minHeight=parseInt(arr[2]);
			this.maxHeight=parseInt(arr[3]);
		}
		str=xml.getAttribute("pivot");
		if(str){
			arr=str.split(",");
			str=xml.getAttribute("anchor");
			this.internalSetPivot(parseFloat(arr[0]),parseFloat(arr[1]),str=="true");
		}
		str=xml.getAttribute("opaque");
		this.opaque=str !="false";
		str=xml.getAttribute("hitTest");
		if(str){
			arr=str.split(",");
			var hitTestData=this.packageItem.owner.getPixelHitTestData(arr[0]);
			if (hitTestData !=null){
				this._displayObject.hitArea=new PixelHitTest(hitTestData,parseInt(arr[1]),parseInt(arr[2]));
				this._displayObject.mouseThrough=false;
				this._displayObject.hitTestPrior=true;
			}
		};
		var overflow=0;
		str=xml.getAttribute("overflow");
		if (str)
			overflow=OverflowType.parse(str);
		else
		overflow=0;
		str=xml.getAttribute("margin");
		if(str)
			this._margin.parse(str);
		if(overflow==2){
			var scroll=0;
			str=xml.getAttribute("scroll");
			if (str)
				scroll=ScrollType.parse(str);
			else
			scroll=1;
			var scrollBarDisplay=0;
			str=xml.getAttribute("scrollBar");
			if (str)
				scrollBarDisplay=ScrollBarDisplayType.parse(str);
			else
			scrollBarDisplay=0;
			var scrollBarFlags=NaN;
			str=xml.getAttribute("scrollBarFlags");
			if(str)
				scrollBarFlags=parseInt(str);
			else
			scrollBarFlags=0;
			var scrollBarMargin=new Margin();
			str=xml.getAttribute("scrollBarMargin");
			if(str)
				scrollBarMargin.parse(str);
			var vtScrollBarRes;
			var hzScrollBarRes;
			str=xml.getAttribute("scrollBarRes");
			if(str){
				arr=str.split(",");
				vtScrollBarRes=arr[0];
				hzScrollBarRes=arr[1];
			};
			var headerRes;
			var footerRes;
			str=xml.getAttribute('ptrRes');
			if(str){
				arr=str.split(",");
				headerRes=arr[0];
				footerRes=arr[1];
			}
			this.setupScroll(scrollBarMargin,scroll,scrollBarDisplay,scrollBarFlags,
			vtScrollBarRes,hzScrollBarRes,headerRes,footerRes);
		}
		else
		this.setupOverflow(overflow);
		this._buildingDisplayList=true;
		var col=xml.childNodes;
		var length1=0;
		if(col)
			length1=col.length;
		var i=0;
		var controller;
		for(i=0;i < length1;i++){
			var cxml=col[i];
			if(cxml.nodeName=="controller"){
				controller=new Controller();
				this._controllers.push(controller);
				controller._parent=this;
				controller.setup(cxml);
			}
		};
		var child;
		var displayList=this.packageItem.displayList;
		var childCount=displayList.length;
		for (i=0;i < childCount;i++){
			var di=displayList[i];
			if (objectPool !=null){
				child=objectPool[poolIndex+i];
			}
			else if (di.packageItem){
				child=UIObjectFactory.newObject(di.packageItem);
				child.packageItem=di.packageItem;
				child.constructFromResource();
			}
			else
			child=UIObjectFactory.newObject2(di.type);
			child._underConstruct=true;
			child.setup_beforeAdd(di.desc);
			child.parent=this;
			this._children.push(child);
		}
		this.relations.setup(xml);
		for (i=0;i < childCount;i++)
		this._children[i].relations.setup(displayList[i].desc);
		for (i=0;i < childCount;i++){
			child=this._children[i];
			child.setup_afterAdd(displayList[i].desc);
			child._underConstruct=false;
		}
		str=xml.getAttribute("mask");
		if(str)
			this.mask=this.getChildById(str).displayObject;
		var trans;
		for(i=0;i < length1;i++){
			cxml=col[i];
			if(cxml.nodeName=="transition"){
				trans=new Transition(this);
				this._transitions.push(trans);
				trans.setup(cxml);
			}
		}
		if(this._transitions.length>0){
			this.displayObject.on("display",this,this.___added);
			this.displayObject.on("undisplay",this,this.___removed);
		}
		this.applyAllControllers();
		this._buildingDisplayList=false;
		this._underConstruct=false;
		this.buildNativeDisplayList();
		this.setBoundsChangedFlag();
		this.constructFromXML(xml);
	}

	__proto.constructFromXML=function(xml){}
	__proto.setup_afterAdd=function(xml){
		_super.prototype.setup_afterAdd.call(this,xml);
		var str;
		if(this.scrollPane){
			str=xml.getAttribute("pageController");
			if(str)
				this.scrollPane.pageController=this.parent.getController(str);
		}
		str=xml.getAttribute("controller");
		if(str){
			var arr=str.split(",");
			for(var i=0;i<arr.length;i+=2){
				var cc=this.getController(arr[i]);
				if(cc)
					cc.selectedPageId=arr[i+1];
			}
		}
	}

	__proto.___added=function(){
		var cnt=this._transitions.length;
		for(var i=0;i < cnt;++i){
			this._transitions[i].onOwnerAddedToStage();
		}
	}

	__proto.___removed=function(){
		var cnt=this._transitions.length;
		for(var i=0;i < cnt;++i){
			this._transitions[i].onOwnerRemovedFromStage();
		}
	}

	__getset(0,__proto,'numChildren',function(){
		return this._children.length;
	});

	__getset(0,__proto,'displayListContainer',function(){
		return this._container;
	});

	__getset(0,__proto,'childrenRenderOrder',function(){
		return this._childrenRenderOrder;
		},function(value){
		if (this._childrenRenderOrder !=value){
			this._childrenRenderOrder=value;
			this.buildNativeDisplayList();
		}
	});

	__getset(0,__proto,'opaque',function(){
		return this._displayObject.hitArea!=null;
		},function(value){
		if (value){
			this.updateHitArea();
			this._displayObject.mouseThrough=false;
		}
		else{
			this._displayObject.hitArea=null;
			this._displayObject.mouseThrough=true;
		}
	});

	__getset(0,__proto,'controllers',function(){
		return this._controllers;
	});

	__getset(0,__proto,'scrollPane',function(){
		return this._scrollPane;
	});

	__getset(0,__proto,'margin',function(){
		return this._margin;
		},function(value){
		this._margin.copy(value);
		if(this._displayObject.scrollRect!=null){
			this._container.pos(this._margin.left+this._alignOffset.x,this._margin.top+this._alignOffset.y);
		}
		this.handleSizeChanged();
	});

	__getset(0,__proto,'apexIndex',function(){
		return this._apexIndex;
		},function(value){
		if (this._apexIndex !=value){
			this._apexIndex=value;
			if (this._childrenRenderOrder==2)
				this.buildNativeDisplayList();
		}
	});

	__getset(0,__proto,'mask',function(){
		return this._displayObject.mask;
		},function(value){
		this._displayObject.mask=value;
	});

	__getset(0,__proto,'viewWidth',function(){
		if (this._scrollPane !=null)
			return this._scrollPane.viewWidth;
		else
		return this.width-this._margin.left-this._margin.right;
		},function(value){
		if (this._scrollPane !=null)
			this._scrollPane.viewWidth=value;
		else
		this.width=value+this._margin.left+this._margin.right;
	});

	__getset(0,__proto,'viewHeight',function(){
		if (this._scrollPane !=null)
			return this._scrollPane.viewHeight;
		else
		return this.height-this._margin.top-this._margin.bottom;
		},function(value){
		if (this._scrollPane !=null)
			this._scrollPane.viewHeight=value;
		else
		this.height=value+this._margin.top+this._margin.bottom;
	});

	return GComponent;
})(GObject)


//class fairygui.GearAnimation extends fairygui.GearBase
var GearAnimation=(function(_super){
	var GearAnimationValue;
	function GearAnimation(owner){
		this._storage=null;
		this._default=null;
		GearAnimation.__super.call(this,owner);
	}

	__class(GearAnimation,'fairygui.GearAnimation',_super);
	var __proto=GearAnimation.prototype;
	__proto.init=function(){
		this._default=new GearAnimationValue((this._owner).playing,
		(this._owner).frame);
		this._storage={};
	}

	__proto.addStatus=function(pageId,value){
		if(value=="-" || value.length==0)
			return;
		var gv;
		if (pageId==null)
			gv=this._default;
		else {
			gv=new GearAnimationValue();
			this._storage[pageId]=gv;
		};
		var arr=value.split(",");
		gv.frame=parseInt(arr[0]);
		gv.playing=arr[1]=="p";
	}

	__proto.apply=function(){
		this._owner._gearLocked=true;
		var gv=this._storage[this._controller.selectedPageId];
		if (!gv)
			gv=this._default;
		(this._owner).frame=gv.frame;
		(this._owner).playing=gv.playing;
		this._owner._gearLocked=false;
	}

	__proto.updateState=function(){
		var mc=(this._owner);
		var gv=this._storage[this._controller.selectedPageId];
		if(!gv){
			gv=new GearAnimationValue();
			this._storage[this._controller.selectedPageId]=gv;
		}
		gv.frame=mc.frame;
		gv.playing=mc.playing;
	}

	GearAnimation.__init$=function(){
		//class GearAnimationValue
		GearAnimationValue=(function(){
			function GearAnimationValue(playing,frame){
				this.playing=false;
				this.frame=NaN;
				(playing===void 0)&& (playing=true);
				(frame===void 0)&& (frame=0);
				this.playing=playing;
				this.frame=frame;
			}
			__class(GearAnimationValue,'');
			return GearAnimationValue;
		})()
	}

	return GearAnimation;
})(GearBase)


//class fairygui.GearColor extends fairygui.GearBase
var GearColor=(function(_super){
	var GearColorValue;
	function GearColor(owner){
		this._storage=null;
		this._default=null;
		GearColor.__super.call(this,owner);
	}

	__class(GearColor,'fairygui.GearColor',_super);
	var __proto=GearColor.prototype;
	__proto.init=function(){
		if(this._owner["strokeColor"]!=undefined)
			this._default=new GearColorValue(this._owner["color"],this._owner["strokeColor"]);
		else
		this._default=new GearColorValue(this._owner["color"],null);
		this._storage={};
	}

	__proto.addStatus=function(pageId,value){
		if(value=="-"|| value.length==0)
			return;
		var pos=value.indexOf(",");
		var col1;
		var col2;
		if(pos==-1){
			col1=value;
			col2=null;
		}
		else{
			col1=value.substr(0,pos);
			col2=value.substr(pos+1);
		}
		if(pageId==null){
			this._default.color=col1;
			this._default.strokeColor=col2;
		}
		else
		this._storage[pageId]=new GearColorValue(col1,col2);
	}

	__proto.apply=function(){
		this._owner._gearLocked=true;
		var gv=this._storage[this._controller.selectedPageId];
		if(!gv)
			gv=this._default;
		(this._owner).color=gv.color;
		if(this._owner["strokeColor"]!=undefined && gv.strokeColor!=null)
			this._owner["strokeColor"]=gv.strokeColor;
		this._owner._gearLocked=false;
	}

	__proto.updateState=function(){
		var gv=this._storage[this._controller.selectedPageId];
		if(!gv){
			gv=new GearColorValue(null,null);
			this._storage[this._controller.selectedPageId]=gv;
		}
		gv.color=(this._owner).color;
		if(this._owner["strokeColor"]!=undefined)
			gv.strokeColor=this._owner["strokeColor"];
	}

	GearColor.__init$=function(){
		//class GearColorValue
		GearColorValue=(function(){
			function GearColorValue(color,strokeColor){
				this.color=null;
				this.strokeColor=null;
				this.color=color;
				this.strokeColor=strokeColor;
			}
			__class(GearColorValue,'');
			return GearColorValue;
		})()
	}

	return GearColor;
})(GearBase)


//class fairygui.GearDisplay extends fairygui.GearBase
var GearDisplay=(function(_super){
	function GearDisplay(owner){
		this.pages=null;
		this._visible=0;
		GearDisplay.__super.call(this,owner);
		this._displayLockToken=1;
	}

	__class(GearDisplay,'fairygui.GearDisplay',_super);
	var __proto=GearDisplay.prototype;
	__proto.init=function(){
		this.pages=null;
	}

	__proto.addLock=function(){
		this._visible++;
		return this._displayLockToken;
	}

	__proto.releaseLock=function(token){
		if(token==this._displayLockToken)
			this._visible--;
	}

	__proto.apply=function(){
		this._displayLockToken++;
		if(this._displayLockToken<=0)
			this._displayLockToken=1;
		if(this.pages==null || this.pages.length==0
			|| this.pages.indexOf(this._controller.selectedPageId)!=-1)
		this._visible=1;
		else
		this._visible=0;
	}

	__getset(0,__proto,'connected',function(){
		return this._controller==null || this._visible>0;
	});

	return GearDisplay;
})(GearBase)


//class fairygui.GearIcon extends fairygui.GearBase
var GearIcon=(function(_super){
	function GearIcon(owner){
		this._storage=null;
		this._default=null;
		GearIcon.__super.call(this,owner);
	}

	__class(GearIcon,'fairygui.GearIcon',_super);
	var __proto=GearIcon.prototype;
	__proto.init=function(){
		this._default=this._owner.icon;
		this._storage={};
	}

	__proto.addStatus=function(pageId,value){
		if(pageId==null)
			this._default=value;
		else
		this._storage[pageId]=value;
	}

	__proto.apply=function(){
		this._owner._gearLocked=true;
		var data=this._storage[this._controller.selectedPageId];
		if(data!=undefined)
			this._owner.icon=String(data);
		else
		this._owner.icon=this._default;
		this._owner._gearLocked=false;
	}

	__proto.updateState=function(){
		this._storage[this._controller.selectedPageId]=this._owner.icon;
	}

	return GearIcon;
})(GearBase)


//class fairygui.GearLook extends fairygui.GearBase
var GearLook=(function(_super){
	var GearLookValue;
	function GearLook(owner){
		this._storage=null;
		this._default=null;
		this._tweener=null;
		GearLook.__super.call(this,owner);
	}

	__class(GearLook,'fairygui.GearLook',_super);
	var __proto=GearLook.prototype;
	__proto.init=function(){
		this._default=new GearLookValue(this._owner.alpha,this._owner.rotation,this._owner.grayed,this._owner.touchable);
		this._storage={};
	}

	__proto.addStatus=function(pageId,value){
		if(value=="-"|| value.length==0)
			return;
		var arr=value.split(",");
		var gv;
		if(pageId==null)
			gv=this._default;
		else {
			gv=new GearLookValue();
			this._storage[pageId]=gv;
		}
		gv.alpha=parseFloat(arr[0]);
		gv.rotation=parseInt(arr[1]);
		gv.grayed=arr[2]=="1" ? true :false;
		if(arr.length<4)
			gv.touchable=this._owner.touchable;
		else
		gv.touchable=arr[3]=="1"?true:false;
	}

	__proto.apply=function(){
		var gv=this._storage[this._controller.selectedPageId];
		if(!gv)
			gv=this._default;
		if(this._tween && !UIPackage._constructing && !GearBase.disableAllTweenEffect){
			this._owner._gearLocked=true;
			this._owner.grayed=gv.grayed;
			this._owner.touchable=gv.touchable;
			this._owner._gearLocked=false;
			if (this._tweener !=null){
				if (this._tweener.endValue.x !=gv.alpha || this._tweener.endValue.y !=gv.rotation){
					this._tweener.kill(true);
					this._tweener=null;
				}
				else
				return;
			};
			var a=gv.alpha!=this._owner.alpha;
			var b=gv.rotation!=this._owner.rotation;
			if(a || b){
				if(this._owner.checkGearController(0,this._controller))
					this._displayLockToken=this._owner.addDisplayLock();
				this._tweener=GTween.to2(this._owner.alpha,this._owner.rotation,gv.alpha,gv.rotation,this._tweenTime)
				.setDelay(this._delay)
				.setEase(this._easeType)
				.setUserData((a ? 1 :0)+(b ? 2 :0))
				.setTarget(this)
				.onUpdate(this.__tweenUpdate,this)
				.onComplete(this.__tweenComplete,this);
			}
		}
		else {
			this._owner._gearLocked=true;
			this._owner.grayed=gv.grayed;
			this._owner.alpha=gv.alpha;
			this._owner.rotation=gv.rotation;
			this._owner.touchable=gv.touchable;
			this._owner._gearLocked=false;
		}
	}

	__proto.__tweenUpdate=function(tweener){
		var flag=tweener.userData;
		this._owner._gearLocked=true;
		if ((flag & 1)!=0)
			this._owner.alpha=tweener.value.x;
		if ((flag & 2)!=0)
			this._owner.rotation=tweener.value.y;
		this._owner._gearLocked=false;
	}

	__proto.__tweenComplete=function(){
		if(this._displayLockToken!=0){
			this._owner.releaseDisplayLock(this._displayLockToken);
			this._displayLockToken=0;
		}
		this._tweener=null;
	}

	__proto.updateState=function(){
		var gv=this._storage[this._controller.selectedPageId];
		if(!gv){
			gv=new GearLookValue();
			this._storage[this._controller.selectedPageId]=gv;
		}
		gv.alpha=this._owner.alpha;
		gv.rotation=this._owner.rotation;
		gv.grayed=this._owner.grayed;
		gv.touchable=this._owner.touchable;
	}

	GearLook.__init$=function(){
		//class GearLookValue
		GearLookValue=(function(){
			function GearLookValue(alpha,rotation,grayed,touchable){
				this.alpha=NaN;
				this.rotation=NaN;
				this.grayed=false;
				this.touchable=false;
				(alpha===void 0)&& (alpha=0);
				(rotation===void 0)&& (rotation=0);
				(grayed===void 0)&& (grayed=false);
				(touchable===void 0)&& (touchable=true);
				this.alpha=alpha;
				this.rotation=rotation;
				this.grayed=grayed;
				this.touchable=touchable;
			}
			__class(GearLookValue,'');
			return GearLookValue;
		})()
	}

	return GearLook;
})(GearBase)


//class fairygui.GGraph extends fairygui.GObject
var GGraph=(function(_super){
	function GGraph(){
		this._type=NaN;
		this._lineSize=NaN;
		this._lineColor=null;
		this._fillColor=null;
		this._corner=0;
		GGraph.__super.call(this);
		this._type=0;
		this._lineSize=1;
		this._lineColor="#000000"
		this._fillColor="#FFFFFF";
		this._corner=0;
	}

	__class(GGraph,'fairygui.GGraph',_super);
	var __proto=GGraph.prototype;
	Laya.imps(__proto,{"fairygui.IColorGear":true})
	__proto.drawRect=function(lineSize,lineColor,fillColor){
		this._type=1;
		this._lineSize=lineSize;
		this._lineColor=lineColor;
		this._fillColor=fillColor;
		this.drawCommon();
	}

	__proto.drawEllipse=function(lineSize,lineColor,fillColor){
		this._type=2;
		this._lineSize=lineSize;
		this._lineColor=lineColor;
		this._fillColor=fillColor;
		this.drawCommon();
	}

	__proto.drawCommon=function(){
		this._displayObject.mouseEnabled=this.touchable;
		var gr=this._displayObject.graphics;
		gr.clear();
		var w=this.width;
		var h=this.height;
		if(w==0 || h==0)
			return;
		var fillColor=this._fillColor;
		var lineColor=this._lineColor;
		if(Render.isWebGL && ToolSet.startsWith(fillColor,"rgba")){
			var arr=fillColor.substring(5,fillColor.lastIndexOf(")")).split(",");
			var a=parseFloat(arr[3]);
			if(a==0)
				fillColor=null;
			else {
				fillColor=Utils.toHexColor((parseInt(arr[0])<<16)+(parseInt(arr[1])<<8)+parseInt(arr[2]));
				this.alpha=a;
			}
		}
		if (this._type==1){
			if(this._corner > 0){
				var fixCorner=w<h?w:h;
				if(2*this._corner > fixCorner)
					fixCorner=parseInt(fixCorner/2+"");
				var path=[
				["moveTo",fixCorner,0],
				["arcTo",w,0,w,h,fixCorner],
				["arcTo",w,h,0,h,fixCorner],
				["arcTo",0,h,0,0,fixCorner],
				["arcTo",0,0,w,0,fixCorner],
				["closePath"]];
				gr.drawPath(0,0,path,{fillStyle:fillColor},this._lineSize>0?{strokeStyle:lineColor,lineWidth:this._lineSize}:null);
			}else
			gr.drawRect(0,0,w,h,fillColor,this._lineSize>0?lineColor:null,this._lineSize);
		}else
		gr.drawCircle(w/2,h/2,w/2,fillColor,this._lineSize>0?lineColor:null,this._lineSize);
		this._displayObject.repaint();
	}

	__proto.replaceMe=function(target){
		if (!this._parent)
			throw "parent not set";
		target.name=this.name;
		target.alpha=this.alpha;
		target.rotation=this.rotation;
		target.visible=this.visible;
		target.touchable=this.touchable;
		target.grayed=this.grayed;
		target.setXY(this.x,this.y);
		target.setSize(this.width,this.height);
		var index=this._parent.getChildIndex(this);
		this._parent.addChildAt(target,index);
		target.relations.copyFrom(this.relations);
		this._parent.removeChild(this,true);
	}

	__proto.addBeforeMe=function(target){
		if (this._parent==null)
			throw "parent not set";
		var index=this._parent.getChildIndex(this);
		this._parent.addChildAt(target,index);
	}

	__proto.addAfterMe=function(target){
		if (this._parent==null)
			throw "parent not set";
		var index=this._parent.getChildIndex(this);
		index++;
		this._parent.addChildAt(target,index);
	}

	__proto.setNativeObject=function(obj){
		this._type=0;
		this._displayObject.mouseEnabled=this.touchable;
		this._displayObject.graphics.clear();
		this._displayObject.addChild(obj);
	}

	__proto.createDisplayObject=function(){
		_super.prototype.createDisplayObject.call(this);
		this._displayObject.mouseEnabled=false;
	}

	__proto.handleSizeChanged=function(){
		_super.prototype.handleSizeChanged.call(this);
		if(this._type !=0)
			this.drawCommon();
	}

	__proto.setup_beforeAdd=function(xml){
		_super.prototype.setup_beforeAdd.call(this,xml);
		var type=xml.getAttribute("type");
		if (type && type!="empty"){
			var str;
			str=xml.getAttribute("lineSize");
			if (str)
				this._lineSize=parseInt(str);
			str=xml.getAttribute("lineColor");
			if (str){
				var c=ToolSet.convertFromHtmlColor(str,true);
				var a=((c >> 24)& 0xFF)/ 0xFF;
				if(a!=1)
					this._lineColor="rgba("+((c>>16)& 0xFF)+","+((c>>8)& 0xFF)+","+(c & 0xFF)+","+a+")";
				else
				this._lineColor=Utils.toHexColor(c & 0xFFFFFF);
			}
			str=xml.getAttribute("fillColor");
			if (str){
				c=ToolSet.convertFromHtmlColor(str,true);
				a=((c >> 24)& 0xFF)/ 0xFF;
				if(a!=1)
					this._fillColor="rgba("+((c>>16)& 0xFF)+","+((c>>8)& 0xFF)+","+(c & 0xFF)+","+a+")";
				else
				this._fillColor=Utils.toHexColor(c & 0xFFFFFF);
			}
			str=xml.getAttribute("corner");
			if (str){
				this._corner=parseInt(str);
			}
			if (type=="rect")
				this._type=1;
			else
			this._type=2;
			this.drawCommon();
		}
	}

	__getset(0,__proto,'color',function(){
		return this._fillColor;
		},function(value){
		this._fillColor=value;
		if(this._type!=0)
			this.drawCommon();
	});

	return GGraph;
})(GObject)


//class fairygui.GGroup extends fairygui.GObject
var GGroup=(function(_super){
	function GGroup(){
		this._layout=0;
		this._lineGap=0;
		this._columnGap=0;
		this._percentReady=false;
		this._boundsChanged=false;
		this._updating=0;
		GGroup.__super.call(this);
	}

	__class(GGroup,'fairygui.GGroup',_super);
	var __proto=GGroup.prototype;
	__proto.setBoundsChangedFlag=function(childSizeChanged){
		(childSizeChanged===void 0)&& (childSizeChanged=false);
		if (this._updating==0 && this.parent !=null){
			if (childSizeChanged)
				this._percentReady=false;
			if(!this._boundsChanged){
				this._boundsChanged=true;
				if(this._layout!=0)
					Laya.timer.callLater(this,this.ensureBoundsCorrect);
			}
		}
	}

	__proto.ensureBoundsCorrect=function(){
		if (this._boundsChanged)
			this.updateBounds();
	}

	__proto.updateBounds=function(){
		Laya.timer.clear(this,this.ensureBoundsCorrect);
		this._boundsChanged=false;
		if (this.parent==null)
			return;
		this.handleLayout();
		var cnt=this._parent.numChildren;
		var i=0;
		var child;
		var ax=Number.MAX_VALUE,ay=Number.MAX_VALUE;
		var ar=Number.MIN_VALUE,ab=Number.MIN_VALUE;
		var tmp=0;
		var empty=true;
		for(i=0;i<cnt;i++){
			child=this._parent.getChildAt(i);
			if(child.group==this){
				tmp=child.x;
				if(tmp<ax)
					ax=tmp;
				tmp=child.y;
				if(tmp<ay)
					ay=tmp;
				tmp=child.x+child.width;
				if(tmp>ar)
					ar=tmp;
				tmp=child.y+child.height;
				if(tmp>ab)
					ab=tmp;
				empty=false;
			}
		}
		if (!empty){
			this._updating=1;
			this.setXY(ax,ay);
			this._updating=2;
			this.setSize(ar-ax,ab-ay);
		}
		else{
			this._updating=2;
			this.setSize(0,0);
		}
		this._updating=0;
	}

	__proto.handleLayout=function(){
		this._updating |=1;
		var child;
		var i=0;
		var cnt=0;
		if (this._layout==1){
			var curX=NaN;
			cnt=this.parent.numChildren;
			for (i=0;i < cnt;i++){
				child=this.parent.getChildAt(i);
				if (child.group !=this)
					continue ;
				if (isNaN(curX))
					curX=Math.floor(child.x);
				else
				child.x=curX;
				if (child.width !=0)
					curX+=Math.floor(child.width+this._columnGap);
			}
			if (!this._percentReady)
				this.updatePercent();
		}
		else if (this._layout==2){
			var curY=NaN;
			cnt=this.parent.numChildren;
			for (i=0;i < cnt;i++){
				child=this.parent.getChildAt(i);
				if (child.group !=this)
					continue ;
				if (isNaN(curY))
					curY=Math.floor(child.y);
				else
				child.y=curY;
				if (child.height !=0)
					curY+=Math.floor(child.height+this._lineGap);
			}
			if (!this._percentReady)
				this.updatePercent();
		}
		this._updating &=2;
	}

	__proto.updatePercent=function(){
		this._percentReady=true;
		var cnt=this.parent.numChildren;
		var i=0;
		var child;
		var size=0;
		if (this._layout==1){
			for (i=0;i < cnt;i++){
				child=this.parent.getChildAt(i);
				if (child.group !=this)
					continue ;
				size+=child.width;
			}
			for (i=0;i < cnt;i++){
				child=this.parent.getChildAt(i);
				if (child.group !=this)
					continue ;
				if (size > 0)
					child._sizePercentInGroup=child.width / size;
				else
				child._sizePercentInGroup=0;
			}
		}
		else{
			for (i=0;i < cnt;i++){
				child=this.parent.getChildAt(i);
				if (child.group !=this)
					continue ;
				size+=child.height;
			}
			for (i=0;i < cnt;i++){
				child=this.parent.getChildAt(i);
				if (child.group !=this)
					continue ;
				if (size > 0)
					child._sizePercentInGroup=child.height / size;
				else
				child._sizePercentInGroup=0;
			}
		}
	}

	__proto.moveChildren=function(dx,dy){
		if ((this._updating & 1)!=0 || this.parent==null)
			return;
		this._updating |=1;
		var cnt=this.parent.numChildren;
		var i=0;
		var child;
		for (i=0;i < cnt;i++){
			child=this.parent.getChildAt(i);
			if (child.group==this){
				child.setXY(child.x+dx,child.y+dy);
			}
		}
		this._updating &=2;
	}

	__proto.resizeChildren=function(dw,dh){
		if (this._layout==0 || (this._updating & 2)!=0 || this.parent==null)
			return;
		this._updating |=2;
		if (!this._percentReady)
			this.updatePercent();
		var cnt=this.parent.numChildren;
		var i=0;
		var j=0;
		var child;
		var last=-1;
		var numChildren=0;
		var lineSize=0;
		var remainSize=0;
		var found=false;
		for (i=0;i < cnt;i++){
			child=this.parent.getChildAt(i);
			if (child.group !=this)
				continue ;
			last=i;
			numChildren++;
		}
		if (this._layout==1){
			remainSize=lineSize=this.width-(numChildren-1)*this._columnGap;
			var curX=NaN;
			var nw=NaN;
			for (i=0;i < cnt;i++){
				child=this.parent.getChildAt(i);
				if (child.group !=this)
					continue ;
				if (isNaN(curX))
					curX=Math.floor(child.x);
				else
				child.x=curX;
				if (last==i)
					nw=remainSize;
				else
				nw=Math.round(child._sizePercentInGroup *lineSize);
				child.setSize(nw,child._rawHeight+dh,true);
				remainSize-=child.width;
				if (last==i){
					if (remainSize >=1){
						for (j=0;j <=i;j++){
							child=this.parent.getChildAt(j);
							if (child.group !=this)
								continue ;
							if (!found){
								nw=child.width+remainSize;
								if ((child.maxWidth==0 || nw < child.maxWidth)
									&& (child.minWidth==0 || nw > child.minWidth)){
									child.setSize(nw,child.height,true);
									found=true;
								}
							}
							else
							child.x+=remainSize;
						}
					}
				}
				else
				curX+=(child.width+this._columnGap);
			}
		}
		else if (this._layout==2){
			remainSize=lineSize=this.height-(numChildren-1)*this._lineGap;
			var curY=NaN;
			var nh=NaN;
			for (i=0;i < cnt;i++){
				child=this.parent.getChildAt(i);
				if (child.group !=this)
					continue ;
				if (isNaN(curY))
					curY=Math.floor(child.y);
				else
				child.y=curY;
				if (last==i)
					nh=remainSize;
				else
				nh=Math.round(child._sizePercentInGroup *lineSize);
				child.setSize(child._rawWidth+dw,nh,true);
				remainSize-=child.height;
				if (last==i){
					if (remainSize >=1){
						for (j=0;j <=i;j++){
							child=this.parent.getChildAt(j);
							if (child.group !=this)
								continue ;
							if (!found){
								nh=child.height+remainSize;
								if ((child.maxHeight==0 || nh < child.maxHeight)
									&& (child.minHeight==0 || nh > child.minHeight)){
									child.setSize(child.width,nh,true);
									found=true;
								}
							}
							else
							child.y+=remainSize;
						}
					}
				}
				else
				curY+=(child.height+this._lineGap);
			}
		}
		this._updating &=1;
	}

	__proto.handleAlphaChanged=function(){
		if(this._underConstruct)
			return;
		var cnt=this._parent.numChildren;
		for(var i=0;i<cnt;i++){
			var child=this._parent.getChildAt(i);
			if(child.group==this)
				child.alpha=this.alpha;
		}
	}

	__proto.handleVisibleChanged=function(){
		if(!this._parent)
			return;
		var cnt=this._parent.numChildren;
		for(var i=0;i<cnt;i++){
			var child=this._parent.getChildAt(i);
			if(child.group==this)
				child.handleVisibleChanged();
		}
	}

	__proto.setup_beforeAdd=function(xml){
		_super.prototype.setup_beforeAdd.call(this,xml);
		var str;
		str=xml.getAttribute("layout");
		if (str !=null){
			this._layout=GroupLayoutType.parse(str);
			str=xml.getAttribute("lineGap");
			if(str)
				this._lineGap=parseInt(str);
			str=xml.getAttribute("colGap");
			if(str)
				this._columnGap=parseInt(str);
		}
	}

	__proto.setup_afterAdd=function(xml){
		_super.prototype.setup_afterAdd.call(this,xml);
		if(!this.visible)
			this.handleVisibleChanged();
	}

	__getset(0,__proto,'layout',function(){
		return this._layout;
		},function(value){
		if(this._layout !=value){
			this._layout=value;
			this.setBoundsChangedFlag(true);
		}
	});

	__getset(0,__proto,'columnGap',function(){
		return this._columnGap;
		},function(value){
		if(this._columnGap !=value){
			this._columnGap=value;
			this.setBoundsChangedFlag();
		}
	});

	__getset(0,__proto,'lineGap',function(){
		return this._lineGap;
		},function(value){
		if(this._lineGap !=value){
			this._lineGap=value;
			this.setBoundsChangedFlag();
		}
	});

	return GGroup;
})(GObject)


//class fairygui.GImage extends fairygui.GObject
var GImage=(function(_super){
	function GImage(){
		this.image=null;
		this._color=null;
		this._flip=0;
		GImage.__super.call(this);
		this._color="#FFFFFF";
	}

	__class(GImage,'fairygui.GImage',_super);
	var __proto=GImage.prototype;
	Laya.imps(__proto,{"fairygui.IColorGear":true})
	__proto.applyColor=function(){}
	__proto.createDisplayObject=function(){
		this._displayObject=this.image=new Image$1();
		this.image.mouseEnabled=false;
		this._displayObject["$owner"]=this;
	}

	__proto.constructFromResource=function(){
		this.packageItem.load();
		this.sourceWidth=this.packageItem.width;
		this.sourceHeight=this.packageItem.height;
		this.initWidth=this.sourceWidth;
		this.initHeight=this.sourceHeight;
		this.image.scale9Grid=this.packageItem.scale9Grid;
		this.image.scaleByTile=this.packageItem.scaleByTile;
		this.image.tileGridIndice=this.packageItem.tileGridIndice;
		this.image.tex=this.packageItem.texture;
		this.setSize(this.sourceWidth,this.sourceHeight);
	}

	__proto.handleXYChanged=function(){
		_super.prototype.handleXYChanged.call(this);
		if(this._flip !=0){
			if(this.scaleX==-1)
				this.image.x+=this.width;
			if(this.scaleY==-1)
				this.image.y+=this.height;
		}
	}

	__proto.handleSizeChanged=function(){
		if(this.image.tex!=null){
			this.image.scaleTexture(this.width/this.sourceWidth,this.height/this.sourceHeight);
		}
	}

	__proto.setup_beforeAdd=function(xml){
		_super.prototype.setup_beforeAdd.call(this,xml);
		var str;
		str=xml.getAttribute("color");
		if(str)
			this.color=str;
		str=xml.getAttribute("flip");
		if(str)
			this.flip=FlipType.parse(str);
	}

	__getset(0,__proto,'color',function(){
		return this._color;
		},function(value){
		if(this._color !=value){
			this._color=value;
			this.updateGear(4);
			this.applyColor();
		}
	});

	//not supported yet
	__getset(0,__proto,'flip',function(){
		return this._flip;
		},function(value){
		if(this._flip!=value){
			this._flip=value;
			var sx=1,sy=1;
			if(this._flip==1 || this._flip==3)
				sx=-1;
			if(this._flip==2 || this._flip==3)
				sy=-1;
			this.setScale(sx,sy);
			this.handleXYChanged();
		}
	});

	return GImage;
})(GObject)


//class fairygui.GearSize extends fairygui.GearBase
var GearSize=(function(_super){
	var GearSizeValue;
	function GearSize(owner){
		this._storage=null;
		this._default=null;
		this._tweener=null;
		GearSize.__super.call(this,owner);
	}

	__class(GearSize,'fairygui.GearSize',_super);
	var __proto=GearSize.prototype;
	__proto.init=function(){
		this._default=new GearSizeValue(this._owner.width,this._owner.height,
		this._owner.scaleX,this._owner.scaleY);
		this._storage={};
	}

	__proto.addStatus=function(pageId,value){
		if(value=="-"|| value.length==0)
			return;
		var arr=value.split(",");
		var gv;
		if (pageId==null)
			gv=this._default;
		else {
			gv=new GearSizeValue();
			this._storage[pageId]=gv;
		}
		gv.width=parseInt(arr[0]);
		gv.height=parseInt(arr[1]);
		if(arr.length>2){
			gv.scaleX=parseFloat(arr[2]);
			gv.scaleY=parseFloat(arr[3]);
		}
	}

	__proto.apply=function(){
		var gv=this._storage[this._controller.selectedPageId];
		if (!gv)
			gv=this._default;
		if(this._tween && !UIPackage._constructing && !GearBase.disableAllTweenEffect){
			if (this._tweener !=null){
				if (this._tweener.endValue.x !=gv.width || this._tweener.endValue.y !=gv.height
					|| this._tweener.endValue.z !=gv.scaleX || this._tweener.endValue.w !=gv.scaleY){
					this._tweener.kill(true);
					this._tweener=null;
				}
				else
				return;
			};
			var a=gv.width !=this._owner.width || gv.height !=this._owner.height;
			var b=gv.scaleX !=this._owner.scaleX || gv.scaleY !=this._owner.scaleY;
			if(a || b){
				if(this._owner.checkGearController(0,this._controller))
					this._displayLockToken=this._owner.addDisplayLock();
				this._tweener=GTween.to4(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY,gv.width,gv.height,gv.scaleX,gv.scaleY,this._tweenTime)
				.setDelay(this._delay)
				.setEase(this._easeType)
				.setUserData((a ? 1 :0)+(b ? 2 :0))
				.setTarget(this)
				.onUpdate(this.__tweenUpdate,this)
				.onComplete(this.__tweenComplete,this);
			}
		}
		else {
			this._owner._gearLocked=true;
			this._owner.setSize(gv.width,gv.height,this._owner.checkGearController(1,this._controller));
			this._owner.setScale(gv.scaleX,gv.scaleY);
			this._owner._gearLocked=false;
		}
	}

	__proto.__tweenUpdate=function(tweener){
		var flag=tweener.userData;
		this._owner._gearLocked=true;
		if ((flag & 1)!=0)
			this._owner.setSize(tweener.value.x,tweener.value.y,this._owner.checkGearController(1,this._controller));
		if ((flag & 2)!=0)
			this._owner.setScale(tweener.value.z,tweener.value.w);
		this._owner._gearLocked=false;
	}

	__proto.__tweenComplete=function(){
		if(this._displayLockToken!=0){
			this._owner.releaseDisplayLock(this._displayLockToken);
			this._displayLockToken=0;
		}
		this._tweener=null;
	}

	__proto.updateState=function(){
		var gv=this._storage[this._controller.selectedPageId];
		if(!gv){
			gv=new GearSizeValue();
			this._storage[this._controller.selectedPageId]=gv;
		}
		gv.width=this._owner.width;
		gv.height=this._owner.height;
		gv.scaleX=this._owner.scaleX;
		gv.scaleY=this._owner.scaleY;
	}

	__proto.updateFromRelations=function(dx,dy){
		if(this._controller==null || this._storage==null)
			return;
		for(var key in this._storage){
			var gv=this._storage[key];
			gv.width+=dx;
			gv.height+=dy;
		}
		this._default.width+=dx;
		this._default.height+=dy;
		this.updateState();
	}

	GearSize.__init$=function(){
		//class GearSizeValue
		GearSizeValue=(function(){
			function GearSizeValue(width,height,scaleX,scaleY){
				this.width=NaN;
				this.height=NaN;
				this.scaleX=NaN;
				this.scaleY=NaN;
				(width===void 0)&& (width=0);
				(height===void 0)&& (height=0);
				(scaleX===void 0)&& (scaleX=0);
				(scaleY===void 0)&& (scaleY=0);
				this.width=width;
				this.height=height;
				this.scaleX=scaleX;
				this.scaleY=scaleY;
			}
			__class(GearSizeValue,'');
			return GearSizeValue;
		})()
	}

	return GearSize;
})(GearBase)


//class fairygui.GearText extends fairygui.GearBase
var GearText=(function(_super){
	function GearText(owner){
		this._storage=null;
		this._default=null;
		GearText.__super.call(this,owner);
	}

	__class(GearText,'fairygui.GearText',_super);
	var __proto=GearText.prototype;
	__proto.init=function(){
		this._default=this._owner.text;
		this._storage={};
	}

	__proto.addStatus=function(pageId,value){
		if(pageId==null)
			this._default=value;
		else
		this._storage[pageId]=value;
	}

	__proto.apply=function(){
		this._owner._gearLocked=true;
		var data=this._storage[this._controller.selectedPageId];
		if(data!=undefined)
			this._owner.text=String(data);
		else
		this._owner.text=this._default;
		this._owner._gearLocked=false;
	}

	__proto.updateState=function(){
		this._storage[this._controller.selectedPageId]=this._owner.text;
	}

	return GearText;
})(GearBase)


//class fairygui.GearXY extends fairygui.GearBase
var GearXY=(function(_super){
	function GearXY(owner){
		this._storage=null;
		this._default=null;
		this._tweener=null;
		GearXY.__super.call(this,owner);
	}

	__class(GearXY,'fairygui.GearXY',_super);
	var __proto=GearXY.prototype;
	__proto.init=function(){
		this._default=new Point(this._owner.x,this._owner.y);
		this._storage={};
	}

	__proto.addStatus=function(pageId,value){
		if(value=="-"|| value.length==0)
			return;
		var arr=value.split(",");
		var pt;
		if (pageId==null)
			pt=this._default;
		else {
			pt=new Point();
			this._storage[pageId]=pt;
		}
		pt.x=parseInt(arr[0]);
		pt.y=parseInt(arr[1]);
	}

	__proto.apply=function(){
		var pt=this._storage[this._controller.selectedPageId];
		if (!pt)
			pt=this._default;
		if(this._tween && !UIPackage._constructing && !GearBase.disableAllTweenEffect){
			if (this._tweener !=null){
				if (this._tweener.endValue.x !=pt.x || this._tweener.endValue.y !=pt.y){
					this._tweener.kill(true);
					this._tweener=null;
				}
				else
				return;
			}
			if (this._owner.x !=pt.x || this._owner.y !=pt.y){
				if(this._owner.checkGearController(0,this._controller))
					this._displayLockToken=this._owner.addDisplayLock();
				this._tweener=GTween.to2(this._owner.x,this._owner.y,pt.x,pt.y,this._tweenTime)
				.setDelay(this._delay)
				.setEase(this._easeType)
				.setTarget(this)
				.onUpdate(this.__tweenUpdate,this)
				.onComplete(this.__tweenComplete,this);
			}
		}
		else {
			this._owner._gearLocked=true;
			this._owner.setXY(pt.x,pt.y);
			this._owner._gearLocked=false;
		}
	}

	__proto.__tweenUpdate=function(tweener){
		this._owner._gearLocked=true;
		this._owner.setXY(tweener.value.x,tweener.value.y);
		this._owner._gearLocked=false;
	}

	__proto.__tweenComplete=function(){
		if(this._displayLockToken!=0){
			this._owner.releaseDisplayLock(this._displayLockToken);
			this._displayLockToken=0;
		}
		this._tweener=null;
	}

	__proto.updateState=function(){
		var pt=this._storage[this._controller.selectedPageId];
		if(!pt){
			pt=new Point();
			this._storage[this._controller.selectedPageId]=pt;
		}
		pt.x=this._owner.x;
		pt.y=this._owner.y;
	}

	__proto.updateFromRelations=function(dx,dy){
		if(this._controller==null || this._storage==null)
			return;
		for (var key in this._storage){
			var pt=this._storage[key];
			pt.x+=dx;
			pt.y+=dy;
		}
		this._default.x+=dx;
		this._default.y+=dy;
		this.updateState();
	}

	return GearXY;
})(GearBase)


//class fairygui.GLoader extends fairygui.GObject
var GLoader=(function(_super){
	function GLoader(){
		this._url=null;
		this._align=null;
		this._valign=null;
		this._autoSize=false;
		this._fill=0;
		this._shrinkOnly=false;
		this._showErrorSign=false;
		this._playing=false;
		this._frame=0;
		this._color=null;
		this._contentItem=null;
		this._contentSourceWidth=0;
		this._contentSourceHeight=0;
		this._contentWidth=0;
		this._contentHeight=0;
		this._content=null;
		this._errorSign=null;
		this._content2=null;
		this._updatingLayout=false;
		GLoader.__super.call(this);
		this._playing=true;
		this._url="";
		this._fill=0;
		this._align="left";
		this._valign="top";
		this._showErrorSign=true;
		this._color="#FFFFFF";
	}

	__class(GLoader,'fairygui.GLoader',_super);
	var __proto=GLoader.prototype;
	Laya.imps(__proto,{"fairygui.IAnimationGear":true,"fairygui.IColorGear":true})
	__proto.createDisplayObject=function(){
		_super.prototype.createDisplayObject.call(this);
		this._displayObject.mouseEnabled=true;
	}

	__proto.dispose=function(){
		if(this._contentItem==null && ((this._content instanceof fairygui.display.Image ))){
			var texture=(this._content).tex;
			if(texture !=null)
				this.freeExternal(texture);
		}
		if(this._content2!=null)
			this._content2.dispose();
		_super.prototype.dispose.call(this);
	}

	__proto.advance=function(timeInMiniseconds){
		if((this._content instanceof fairygui.display.MovieClip ))
			(this._content).advance(timeInMiniseconds);
	}

	__proto.applyColor=function(){}
	__proto.loadContent=function(){
		this.clearContent();
		if (!this._url)
			return;
		if(ToolSet.startsWith(this._url,"ui://"))
			this.loadFromPackage(this._url);
		else
		this.loadExternal();
	}

	__proto.loadFromPackage=function(itemURL){
		this._contentItem=UIPackage.getItemByURL(itemURL);
		if(this._contentItem !=null){
			this._contentItem.load();
			if(this._autoSize)
				this.setSize(this._contentItem.width,this._contentItem.height);
			if(this._contentItem.type==0){
				if(this._contentItem.texture==null){
					this.setErrorState();
				}
				else {
					if(!((this._content instanceof fairygui.display.Image ))){
						this._content=new Image$1();
						this._displayObject.addChild(this._content);
					}
					else
					this._displayObject.addChild(this._content);
					(this._content).tex=this._contentItem.texture;
					(this._content).scale9Grid=this._contentItem.scale9Grid;
					(this._content).scaleByTile=this._contentItem.scaleByTile;
					(this._content).tileGridIndice=this._contentItem.tileGridIndice;
					this._contentSourceWidth=this._contentItem.width;
					this._contentSourceHeight=this._contentItem.height;
					this.updateLayout();
				}
			}
			else if(this._contentItem.type==2){
				if(!((this._content instanceof fairygui.display.MovieClip ))){
					this._content=new MovieClip$1();
					this._displayObject.addChild(this._content);
				}
				else
				this._displayObject.addChild(this._content);
				this._contentSourceWidth=this._contentItem.width;
				this._contentSourceHeight=this._contentItem.height;
				(this._content).interval=this._contentItem.interval;
				(this._content).swing=this._contentItem.swing;
				(this._content).repeatDelay=this._contentItem.repeatDelay;
				(this._content).frames=this._contentItem.frames;
				(this._content).boundsRect=new Rectangle(0,0,this._contentSourceWidth,this._contentSourceHeight);
				this.updateLayout();
			}
			else if(this._contentItem.type==4){
				var obj=UIPackage.createObjectFromURL(itemURL);
				if(!obj)
					this.setErrorState();
				else if(!((obj instanceof fairygui.GComponent ))){
					obj.dispose();
					this.setErrorState();
				}
				else{
					this._content2=obj.asCom;
					this._displayObject.addChild(this._content2.displayObject);
					this._contentSourceWidth=this._contentItem.width;
					this._contentSourceHeight=this._contentItem.height;
					this.updateLayout();
				}
			}
			else
			this.setErrorState();
		}
		else
		this.setErrorState();
	}

	__proto.loadExternal=function(){
		AssetProxy.inst.load(this._url,Handler.create(this,this.__getResCompleted));
	}

	__proto.freeExternal=function(texture){}
	__proto.onExternalLoadSuccess=function(texture){
		if(!((this._content instanceof fairygui.display.Image ))){
			this._content=new Image$1();
			this._displayObject.addChild(this._content);
		}
		else
		this._displayObject.addChild(this._content);
		(this._content).tex=texture;
		(this._content).scale9Grid=null;
		(this._content).scaleByTile=false;
		this._contentSourceWidth=texture.width;
		this._contentSourceHeight=texture.height;
		this.updateLayout();
	}

	__proto.onExternalLoadFailed=function(){
		this.setErrorState();
	}

	__proto.__getResCompleted=function(tex){
		if(tex!=null)
			this.onExternalLoadSuccess(tex);
		else
		this.onExternalLoadFailed();
	}

	__proto.setErrorState=function(){
		if (!this._showErrorSign)
			return;
		if (this._errorSign==null){
			if (UIConfig$1.loaderErrorSign !=null){
				this._errorSign=fairygui.GLoader._errorSignPool.getObject(UIConfig$1.loaderErrorSign);
			}
		}
		if (this._errorSign !=null){
			this._errorSign.setSize(this.width,this.height);
			this._displayObject.addChild(this._errorSign.displayObject);
		}
	}

	__proto.clearErrorState=function(){
		if (this._errorSign !=null){
			this._displayObject.removeChild(this._errorSign.displayObject);
			fairygui.GLoader._errorSignPool.returnObject(this._errorSign);
			this._errorSign=null;
		}
	}

	__proto.updateLayout=function(){
		if (this._content2==null && this._content==null){
			if (this._autoSize){
				this._updatingLayout=true;
				this.setSize(50,30);
				this._updatingLayout=false;
			}
			return;
		}
		this._contentWidth=this._contentSourceWidth;
		this._contentHeight=this._contentSourceHeight;
		if (this._autoSize){
			this._updatingLayout=true;
			if (this._contentWidth==0)
				this._contentWidth=50;
			if (this._contentHeight==0)
				this._contentHeight=30;
			this.setSize(this._contentWidth,this._contentHeight);
			this._updatingLayout=false;
			if(this._contentWidth==this._width && this._contentHeight==this._height){
				if(this._content2!=null){
					this._content2.setXY(0,0);
					this._content2.setScale(1,1);
				}
				else{
					this._content.x=0;
					this._content.y=0;
					this._content.scaleX=1;
					this._content.scaleY=1;
				}
				return;
			}
		};
		var sx=1,sy=1;
		if(this._fill!=0){
			sx=this.width/this._contentSourceWidth;
			sy=this.height/this._contentSourceHeight;
			if(sx!=1 || sy!=1){
				if (this._fill==2)
					sx=sy;
				else if (this._fill==3)
				sy=sx;
				else if (this._fill==1){
					if (sx > sy)
						sx=sy;
					else
					sy=sx;
				}
				else if (this._fill==5){
					if (sx > sy)
						sy=sx;
					else
					sx=sy;
				}
				if(this._shrinkOnly){
					if(sx>1)
						sx=1;
					if(sy>1)
						sy=1;
				}
				this._contentWidth=this._contentSourceWidth *sx;
				this._contentHeight=this._contentSourceHeight *sy;
			}
		}
		if(this._content2!=null)
			this._content2.setScale(sx,sy);
		else if ((this._content instanceof fairygui.display.Image ))
		(this._content).scaleTexture(sx,sy);
		else
		this._content.scale(sx,sy);
		var nx=NaN,ny=NaN;
		if (this._align=="center")
			nx=Math.floor((this.width-this._contentWidth)/ 2);
		else if (this._align=="right")
		nx=this.width-this._contentWidth;
		else
		nx=0;
		if (this._valign=="middle")
			ny=Math.floor((this.height-this._contentHeight)/ 2);
		else if (this._valign=="bottom")
		ny=this.height-this._contentHeight;
		else
		ny=0;
		if(this._content2!=null)
			this._content2.setXY(nx,ny);
		else{
			this._content.x=nx;
			this._content.y=ny;
		}
	}

	__proto.clearContent=function(){
		this.clearErrorState();
		if (this._content !=null && this._content.parent !=null)
			this._displayObject.removeChild(this._content);
		if(this._contentItem==null && ((this._content instanceof fairygui.display.Image ))){
			var texture=(this._content).tex;
			if(texture !=null)
				this.freeExternal(texture);
		}
		if(this._content2!=null){
			this._content2.dispose();
			this._content2=null;
		}
		this._contentItem=null;
	}

	__proto.handleSizeChanged=function(){
		_super.prototype.handleSizeChanged.call(this);
		if(!this._updatingLayout)
			this.updateLayout();
	}

	__proto.setup_beforeAdd=function(xml){
		_super.prototype.setup_beforeAdd.call(this,xml);
		var str;
		str=xml.getAttribute("url");
		if (str)
			this._url=str;
		str=xml.getAttribute("align");
		if (str)
			this._align=str;
		str=xml.getAttribute("vAlign");
		if (str)
			this._valign=str;
		str=xml.getAttribute("fill");
		if (str)
			this._fill=LoaderFillType.parse(str);
		this._shrinkOnly=xml.getAttribute("shrinkOnly")=="true";
		this._autoSize=xml.getAttribute("autoSize")=="true";
		str=xml.getAttribute("errorSign");
		if (str)
			this._showErrorSign=str=="true";
		this._playing=xml.getAttribute("playing")!="false";
		str=xml.getAttribute("color");
		if(str)
			this.color=str;
		if (this._url)
			this.loadContent();
	}

	__getset(0,__proto,'frame',function(){
		return this._frame;
		},function(value){
		if (this._frame !=value){
			this._frame=value;
			if ((this._content instanceof fairygui.display.MovieClip ))
				(this._content).frame=value;
			this.updateGear(5);
		}
	});

	__getset(0,__proto,'url',function(){
		return this._url;
		},function(value){
		if (this._url==value)
			return;
		this._url=value;
		this.loadContent();
		this.updateGear(7);
	});

	__getset(0,__proto,'align',function(){
		return this._align;
		},function(value){
		if (this._align !=value){
			this._align=value;
			this.updateLayout();
		}
	});

	__getset(0,__proto,'fill',function(){
		return this._fill;
		},function(value){
		if (this._fill !=value){
			this._fill=value;
			this.updateLayout();
		}
	});

	__getset(0,__proto,'verticalAlign',function(){
		return this._valign;
		},function(value){
		if (this._valign !=value){
			this._valign=value;
			this.updateLayout();
		}
	});

	__getset(0,__proto,'icon',function(){
		return this._url;
		},function(value){
		this.url=value;
	});

	__getset(0,__proto,'content',function(){
		return this._content;
	});

	__getset(0,__proto,'shrinkOnly',function(){
		return this._shrinkOnly;
		},function(value){
		if(this._shrinkOnly!=value){
			this._shrinkOnly=value;
			this.updateLayout();
		}
	});

	//todo:
	__getset(0,__proto,'showErrorSign',function(){
		return this._showErrorSign;
		},function(value){
		this._showErrorSign=value;
	});

	__getset(0,__proto,'autoSize',function(){
		return this._autoSize;
		},function(value){
		if (this._autoSize !=value){
			this._autoSize=value;
			this.updateLayout();
		}
	});

	__getset(0,__proto,'playing',function(){
		return this._playing;
		},function(value){
		if (this._playing !=value){
			this._playing=value;
			if ((this._content instanceof fairygui.display.MovieClip ))
				(this._content).playing=value;
			this.updateGear(5);
		}
	});

	__getset(0,__proto,'timeScale',function(){
		if((this._content instanceof fairygui.display.MovieClip ))
			return (this._content).timeScale;
		else
		return 1;
		},function(value){
		if((this._content instanceof fairygui.display.MovieClip ))
			(this._content).timeScale=value;
	});

	__getset(0,__proto,'color',function(){
		return this._color;
		},function(value){
		if(this._color !=value){
			this._color=value;
			this.updateGear(4);
			this.applyColor();
		}
	});

	__getset(0,__proto,'component',function(){
		return this._content2;
	});

	__static(GLoader,
	['_errorSignPool',function(){return this._errorSignPool=new GObjectPool();}
	]);
	return GLoader;
})(GObject)


//class fairygui.GMovieClip extends fairygui.GObject
var GMovieClip=(function(_super){
	function GMovieClip(){
		this._movieClip=null;
		GMovieClip.__super.call(this);
		this._sizeImplType=1;
	}

	__class(GMovieClip,'fairygui.GMovieClip',_super);
	var __proto=GMovieClip.prototype;
	Laya.imps(__proto,{"fairygui.IAnimationGear":true,"fairygui.IColorGear":true})
	__proto.createDisplayObject=function(){
		this._displayObject=this._movieClip=new MovieClip$1();
		this._movieClip.mouseEnabled=false;
		this._displayObject["$owner"]=this;
	}

	__proto.rewind=function(){
		this._movieClip.rewind();
	}

	__proto.syncStatus=function(anotherMc){
		this._movieClip.syncStatus(anotherMc._movieClip);
	}

	__proto.advance=function(timeInMiniseconds){
		this._movieClip.advance(timeInMiniseconds);
	}

	//从start帧开始，播放到end帧（-1表示结尾），重复times次（0表示无限循环），循环结束后，停止在endAt帧（-1表示参数end）
	__proto.setPlaySettings=function(start,end,times,endAt,endHandler){
		(start===void 0)&& (start=0);
		(end===void 0)&& (end=-1);
		(times===void 0)&& (times=0);
		(endAt===void 0)&& (endAt=-1);
		this._movieClip.setPlaySettings(start,end,times,endAt,endHandler);
	}

	__proto.constructFromResource=function(){
		this.sourceWidth=this.packageItem.width;
		this.sourceHeight=this.packageItem.height;
		this.initWidth=this.sourceWidth;
		this.initHeight=this.sourceHeight;
		this.setSize(this.sourceWidth,this.sourceHeight);
		this.packageItem.load();
		this._movieClip.interval=this.packageItem.interval;
		this._movieClip.swing=this.packageItem.swing;
		this._movieClip.repeatDelay=this.packageItem.repeatDelay;
		this._movieClip.frames=this.packageItem.frames;
		this._movieClip.boundsRect=new Rectangle(0,0,this.sourceWidth,this.sourceHeight);
	}

	__proto.setup_beforeAdd=function(xml){
		_super.prototype.setup_beforeAdd.call(this,xml);
		var str;
		str=xml.getAttribute("frame");
		if (str)
			this._movieClip.frame=parseInt(str);
		str=xml.getAttribute("playing");
		this._movieClip.playing=str !="false";
		str=xml.getAttribute("color");
		if(str)
			this.color=str;
	}

	__getset(0,__proto,'color',function(){
		return "#FFFFFF";
		},function(value){
	});

	__getset(0,__proto,'playing',function(){
		return this._movieClip.playing;
		},function(value){
		if (this._movieClip.playing !=value){
			this._movieClip.playing=value;
			this.updateGear(5);
		}
	});

	__getset(0,__proto,'timeScale',function(){
		return this._movieClip.timeScale;
		},function(value){
		this._movieClip.timeScale=value;
	});

	__getset(0,__proto,'frame',function(){
		return this._movieClip.frame;
		},function(value){
		if (this._movieClip.frame !=value){
			this._movieClip.frame=value;
			this.updateGear(5);
		}
	});

	return GMovieClip;
})(GObject)


//class fairygui.GBasicTextField extends fairygui.GTextField
var GBasicTextField=(function(_super){
	var LineInfo,TextExt;
	function GBasicTextField(){
		this.textField=null;
		this._font=null;
		this._color=null;
		this._ubbEnabled=false;
		this._singleLine=false;
		this._letterSpacing=0;
		this._autoSize=0;
		this._widthAutoSize=false;
		this._heightAutoSize=false;
		this._updatingSize=false;
		this._textWidth=0;
		this._textHeight=0;
		this._bitmapFont=null;
		this._lines=null;
		GBasicTextField.__super.call(this);
		this._text="";
		this._color="#000000";
		this.textField.align="left";
		this.textField.font=UIConfig$1.defaultFont;
		this._autoSize=1;
		this._widthAutoSize=this._heightAutoSize=true;
		this.textField["_sizeDirty"]=false;
	}

	__class(GBasicTextField,'fairygui.GBasicTextField',_super);
	var __proto=GBasicTextField.prototype;
	__proto.createDisplayObject=function(){
		this._displayObject=this.textField=new TextExt(this);
		this._displayObject["$owner"]=this;
		this._displayObject.mouseEnabled=false;
	}

	__proto.setAutoSize=function(value){
		this._autoSize=value;
		this._widthAutoSize=value==1;
		this._heightAutoSize=value==1 || value==2;
		this.textField.wordWrap=!this._widthAutoSize && !this._singleLine;
		if(!this._underConstruct){
			if(!this._heightAutoSize)
				this.textField.size(this.width,this.height);
			else if(!this._widthAutoSize)
			this.textField.width=this.width;
		}
	}

	__proto.ensureSizeCorrect=function(){
		if (!this._underConstruct && this.textField["_isChanged"])
			this.textField.typeset();
	}

	__proto.typeset=function(){
		if(this._bitmapFont!=null)
			this.renderWithBitmapFont();
		else if(this._widthAutoSize || this._heightAutoSize)
		this.updateSize();
	}

	__proto.updateSize=function(){
		this._textWidth=Math.ceil(this.textField.textWidth);
		this._textHeight=Math.ceil(this.textField.textHeight);
		var w=NaN,h=0;
		if(this._widthAutoSize){
			w=this._textWidth;
			if(this.textField.width!=w){
				this.textField.width=w;
				if(this.textField.align!="left")
					this.textField["baseTypeset"]();
			}
		}
		else
		w=this.width;
		if(this._heightAutoSize){
			h=this._textHeight;
			if(!this._widthAutoSize){
				if(this.textField.height!=this._textHeight)
					this.textField.height=this._textHeight;
			}
		}
		else {
			h=this.height;
			if(this._textHeight > h)
				this._textHeight=h;
			if(this.textField.height!=this._textHeight)
				this.textField.height=this._textHeight;
		}
		this._updatingSize=true;
		this.setSize(w,h);
		this._updatingSize=false;
	}

	__proto.renderWithBitmapFont=function(){
		var gr=this._displayObject.graphics;
		gr.clear();
		if (!this._lines)
			this._lines=[];
		else
		LineInfo.returnList(this._lines);
		var letterSpacing=this.letterSpacing;
		var lineSpacing=this.leading-1;
		var rectWidth=this.width-2 *2;
		var lineWidth=0,lineHeight=0,lineTextHeight=0;
		var glyphWidth=0,glyphHeight=0;
		var wordChars=0,wordStart=0,wordEnd=0;
		var lastLineHeight=0;
		var lineBuffer="";
		var lineY=2;
		var line;
		var wordWrap=!this._widthAutoSize && !this._singleLine;
		var fontSize=this.fontSize;
		var fontScale=this._bitmapFont.resizable?fontSize/this._bitmapFont.size:1;
		this._textWidth=0;
		this._textHeight=0;
		var text2=this._text;
		if (this._templateVars !=null)
			text2=this.parseTemplate(text2);
		var textLength=text2.length;
		for (var offset=0;offset < textLength;++offset){
			var ch=text2.charAt(offset);
			var cc=ch.charCodeAt(0);
			if (cc==10){
				lineBuffer+=ch;
				line=LineInfo.borrow();
				line.width=lineWidth;
				if (lineTextHeight==0){
					if (lastLineHeight==0)
						lastLineHeight=fontSize;
					if (lineHeight==0)
						lineHeight=lastLineHeight;
					lineTextHeight=lineHeight;
				}
				line.height=lineHeight;
				lastLineHeight=lineHeight;
				line.textHeight=lineTextHeight;
				line.text=lineBuffer;
				line.y=lineY;
				lineY+=(line.height+lineSpacing);
				if (line.width > this._textWidth)
					this._textWidth=line.width;
				this._lines.push(line);
				lineBuffer="";
				lineWidth=0;
				lineHeight=0;
				lineTextHeight=0;
				wordChars=0;
				wordStart=0;
				wordEnd=0;
				continue ;
			}
			if (cc>=65 && cc<=90 || cc>=97 && cc<=122){
				if (wordChars==0)
					wordStart=lineWidth;
				wordChars++;
			}
			else{
				if (wordChars > 0)
					wordEnd=lineWidth;
				wordChars=0;
			}
			if (cc==32){
				glyphWidth=Math.ceil(fontSize / 2);
				glyphHeight=fontSize;
			}
			else {
				var glyph=this._bitmapFont.glyphs[ch];
				if (glyph){
					glyphWidth=Math.ceil(glyph.advance*fontScale);
					glyphHeight=Math.ceil(glyph.lineHeight*fontScale);
				}
				else {
					glyphWidth=0;
					glyphHeight=0;
				}
			}
			if (glyphHeight > lineTextHeight)
				lineTextHeight=glyphHeight;
			if (glyphHeight > lineHeight)
				lineHeight=glyphHeight;
			if (lineWidth !=0)
				lineWidth+=letterSpacing;
			lineWidth+=glyphWidth;
			if (!wordWrap || lineWidth <=rectWidth){
				lineBuffer+=ch;
			}
			else {
				line=LineInfo.borrow();
				line.height=lineHeight;
				line.textHeight=lineTextHeight;
				if (lineBuffer.length==0){
					line.text=ch;
				}
				else if (wordChars > 0 && wordEnd > 0){
					lineBuffer+=ch;
					var len=lineBuffer.length-wordChars;
					line.text=ToolSet.trimRight(lineBuffer.substr(0,len));
					line.width=wordEnd;
					lineBuffer=lineBuffer.substr(len);
					lineWidth-=wordStart;
				}
				else {
					line.text=lineBuffer;
					line.width=lineWidth-(glyphWidth+letterSpacing);
					lineBuffer=ch;
					lineWidth=glyphWidth;
					lineHeight=glyphHeight;
					lineTextHeight=glyphHeight;
				}
				line.y=lineY;
				lineY+=(line.height+lineSpacing);
				if (line.width > this._textWidth)
					this._textWidth=line.width;
				wordChars=0;
				wordStart=0;
				wordEnd=0;
				this._lines.push(line);
			}
		}
		if (lineBuffer.length > 0){
			line=LineInfo.borrow();
			line.width=lineWidth;
			if (lineHeight==0)
				lineHeight=lastLineHeight;
			if (lineTextHeight==0)
				lineTextHeight=lineHeight;
			line.height=lineHeight;
			line.textHeight=lineTextHeight;
			line.text=lineBuffer;
			line.y=lineY;
			if (line.width > this._textWidth)
				this._textWidth=line.width;
			this._lines.push(line);
		}
		if (this._textWidth > 0)
			this._textWidth+=2 *2;
		var count=this._lines.length;
		if (count==0){
			this._textHeight=0;
		}
		else {
			line=this._lines[this._lines.length-1];
			this._textHeight=line.y+line.height+2;
		};
		var w=NaN,h=0;
		if (this._widthAutoSize){
			if (this._textWidth==0)
				w=0;
			else
			w=this._textWidth;
		}
		else
		w=this.width;
		if (this._heightAutoSize){
			if (this._textHeight==0)
				h=0;
			else
			h=this._textHeight;
		}
		else
		h=this.height;
		this._updatingSize=true;
		this.setSize(w,h);
		this._updatingSize=false;
		this.doAlign();
		if (w==0 || h==0)
			return;
		var charX=2;
		var lineIndent=0;
		var charIndent=0;
		rectWidth=this.width-2 *2;
		var lineCount=this._lines.length;
		for (var i=0;i < lineCount;i++){
			line=this._lines[i];
			charX=2;
			if (this.align=="center")
				lineIndent=(rectWidth-line.width)/ 2;
			else if (this.align=="right")
			lineIndent=rectWidth-line.width;
			else
			lineIndent=0;
			textLength=line.text.length;
			for (var j=0;j < textLength;j++){
				ch=line.text.charAt(j);
				cc=ch.charCodeAt(0);
				if(cc==10)
					continue ;
				if(cc==32){
					charX+=this._letterSpacing+Math.ceil(fontSize/2);
					continue ;
				}
				glyph=this._bitmapFont.glyphs[ch];
				if (glyph !=null){
					charIndent=(line.height+line.textHeight)/ 2-Math.ceil(glyph.lineHeight*fontScale);
					gr.drawTexture(glyph.texture,
					charX+lineIndent+Math.ceil(glyph.offsetX*fontScale),
					line.y+charIndent+Math.ceil(glyph.offsetY*fontScale),
					glyph.texture.width *fontScale,
					glyph.texture.height *fontScale);
					charX+=letterSpacing+Math.ceil(glyph.advance*fontScale);
				}
				else {
					charX+=letterSpacing;
				}
			}
		}
	}

	//line loop
	__proto.handleSizeChanged=function(){
		if(this._updatingSize)
			return;
		if(this._underConstruct)
			this.textField.size(this.width,this.height);
		else{
			if(this._bitmapFont!=null){
				if(!this._widthAutoSize)
					this.textField["setChanged"]();
				else
				this.doAlign();
			}
			else {
				if(!this._widthAutoSize){
					if(!this._heightAutoSize)
						this.textField.size(this.width,this.height);
					else
					this.textField.width=this.width;
				}
			}
		}
	}

	__proto.handleGrayedChanged=function(){
		fairygui.GObject.prototype.handleGrayedChanged.call(this);
		if(this.grayed)
			this.textField.color="#AAAAAA";
		else
		this.textField.color=this._color;
	}

	__proto.doAlign=function(){
		if(this.valign=="top" || this._textHeight==0)
			this._yOffset=2;
		else {
			var dh=this.height-this._textHeight;
			if(dh < 0)
				dh=0;
			if(this.valign=="middle")
				this._yOffset=Math.floor(dh / 2);
			else
			this._yOffset=Math.floor(dh);
		}
		this.handleXYChanged();
	}

	__proto.flushVars=function(){
		this.text=this._text;
	}

	__proto.setup_beforeAdd=function(xml){
		_super.prototype.setup_beforeAdd.call(this,xml);
		var str;
		str=xml.getAttribute("autoSize");
		if (str)
			this.setAutoSize(AutoSizeType.parse(str));
	}

	__getset(0,__proto,'bold',function(){
		return this.textField.bold;
		},function(value){
		this.textField.bold=value;
	});

	__getset(0,__proto,'letterSpacing',function(){
		return this._letterSpacing;
		},function(value){
		this._letterSpacing=value;
	});

	__getset(0,__proto,'align',function(){
		return this.textField.align;
		},function(value){
		this.textField.align=value;
	});

	__getset(0,__proto,'text',function(){
		return this._text;
		},function(value){
		this._text=value;
		if(this._text==null)
			this._text="";
		if(this._bitmapFont==null){
			if(this._widthAutoSize)
				this.textField.width=10000;
			var text2=this._text;
			if (this._templateVars !=null)
				text2=this.parseTemplate(text2);
			if(this._ubbEnabled)
				this.textField.text=ToolSet.removeUBB(ToolSet.encodeHTML(text2));
			else
			this.textField.text=text2;
		}
		else{
			this.textField.text="";
			this.textField["setChanged"]();
		}
		if(this.parent && this.parent._underConstruct)
			this.textField.typeset();
	});

	__getset(0,__proto,'color',function(){
		return this._color;
		},function(value){
		if (this._color !=value){
			this._color=value;
			if (this._gearColor.controller)
				this._gearColor.updateState();
			if(this.grayed)
				this.textField.color="#AAAAAA";
			else
			this.textField.color=this._color;
		}
	});

	__getset(0,__proto,'font',function(){
		return this.textField.font;
		},function(value){
		this._font=value;
		if(ToolSet.startsWith(this._font,"ui://")){
			this._bitmapFont=UIPackage.getBitmapFontByURL(this._font);
			this.textField["setChanged"]();
		}
		else {
			this._bitmapFont=null;
			if(this._font)
				this.textField.font=this._font;
			else
			this.textField.font=UIConfig$1.defaultFont;
		}
	});

	__getset(0,__proto,'leading',function(){
		return this.textField.leading;
		},function(value){
		this.textField.leading=value;
	});

	__getset(0,__proto,'fontSize',function(){
		return this.textField.fontSize;
		},function(value){
		this.textField.fontSize=value;
	});

	__getset(0,__proto,'valign',function(){
		return this.textField.valign;
		},function(value){
		this.textField.valign=value;
	});

	__getset(0,__proto,'italic',function(){
		return this.textField.italic;
		},function(value){
		this.textField.italic=value;
	});

	__getset(0,__proto,'underline',function(){
		return this.textField.underline;
		},function(value){
		this.textField.underline=value;
	});

	__getset(0,__proto,'singleLine',function(){
		return this._singleLine;
		},function(value){
		this._singleLine=value;
		this.textField.wordWrap=!this._widthAutoSize && !this._singleLine;
	});

	__getset(0,__proto,'stroke',function(){
		return this.textField.stroke;
		},function(value){
		this.textField.stroke=value;
	});

	__getset(0,__proto,'strokeColor',function(){
		return this.textField.strokeColor;
		},function(value){
		this.textField.strokeColor=value;
		this.updateGear(4);
	});

	__getset(0,__proto,'ubbEnabled',function(){
		return this._ubbEnabled;
		},function(value){
		this._ubbEnabled=value;
	});

	__getset(0,__proto,'autoSize',function(){
		return this._autoSize;
		},function(value){
		if (this._autoSize !=value){
			this.setAutoSize(value);
		}
	});

	__getset(0,__proto,'textWidth',function(){
		if (this.textField["_isChanged"])
			this.textField.typeset();
		return this._textWidth;
	});

	GBasicTextField.GUTTER_X=2;
	GBasicTextField.GUTTER_Y=2;
	GBasicTextField.__init$=function(){
		//class LineInfo
		LineInfo=(function(){
			function LineInfo(){
				this.width=0;
				this.height=0;
				this.textHeight=0;
				this.text=null;
				this.y=0;
			}
			__class(LineInfo,'');
			LineInfo.borrow=function(){
				if (LineInfo.pool.length){
					var ret=LineInfo.pool.pop();
					ret.width=0;
					ret.height=0;
					ret.textHeight=0;
					ret.text=null;
					ret.y=0;
					return ret;
				}
				else
				return new LineInfo();
			}
			LineInfo.returns=function(value){
				LineInfo.pool.push(value);
			}
			LineInfo.returnList=function(value){
				var length=value.length;
				for (var i=0;i < length;i++){
					var li=value[i];
					LineInfo.pool.push(li);
				}
				value.length=0;
			}
			LineInfo.pool=[];
			return LineInfo;
		})()
		//class TextExt extends laya.display.Text
		TextExt=(function(_super){
			function TextExt(owner){
				this._owner=null;
				this._lock=false;
				this._sizeDirty=false;
				TextExt.__super.call(this);
				this._owner=owner;
			}
			__class(TextExt,'',_super);
			var __proto=TextExt.prototype;
			__proto.baseTypeset=function(){
				this._lock=true;
				this.typeset();
				this._lock=false;
			}
			__proto.typeset=function(){
				this._sizeDirty=true;
				_super.prototype.typeset.call(this);
				if(!this._lock)
					this._owner.typeset();
				if(this._isChanged){
					Laya.timer.clear(this,this.typeset);
					this._isChanged=false;
				}
				this._sizeDirty=false;
			}
			__proto.setChanged=function(){
				this.isChanged=true;
			}
			__getset(0,__proto,'isChanged',null,function(value){
				if (value && !this._sizeDirty){
					if(this._owner.autoSize!=0 && this._owner.parent){
						this._sizeDirty=true;
						this.event("fui_size_delay_change");
					}
				}
				Laya.superSet(Text,this,'isChanged',value);
			});
			return TextExt;
		})(Text)
	}

	return GBasicTextField;
})(GTextField)


//class fairygui.GButton extends fairygui.GComponent
var GButton=(function(_super){
	function GButton(){
		this._titleObject=null;
		this._iconObject=null;
		this._relatedController=null;
		this._mode=0;
		this._selected=false;
		this._title=null;
		this._selectedTitle=null;
		this._icon=null;
		this._selectedIcon=null;
		this._sound=null;
		this._soundVolumeScale=0;
		this._pageOption=null;
		this._buttonController=null;
		this._changeStateOnClick=false;
		this._linkedPopup=null;
		this._downEffect=0;
		this._downEffectValue=0;
		this._downScaled=false;
		this._down=false;
		this._over=false;
		GButton.__super.call(this);
		this._mode=0;
		this._title="";
		this._icon="";
		this._sound=UIConfig$1.buttonSound;
		this._soundVolumeScale=UIConfig$1.buttonSoundVolumeScale;
		this._pageOption=new PageOption();
		this._changeStateOnClick=true;
		this._downEffectValue=0.8;
	}

	__class(GButton,'fairygui.GButton',_super);
	var __proto=GButton.prototype;
	__proto.fireClick=function(downEffect){
		(downEffect===void 0)&& (downEffect=true);
		if (downEffect && this._mode==0){
			this.setState("over");
			Laya.timer.once(100,this,this.setState,["down"],false);
			Laya.timer.once(200,this,this.setState,["up"],false);
		}
		this.__click(Events.createEvent("click",this.displayObject));
	}

	__proto.setState=function(val){
		if (this._buttonController)
			this._buttonController.selectedPage=val;
		if(this._downEffect==1){
			var cnt=this.numChildren;
			if(val=="down" || val=="selectedOver" || val=="selectedDisabled"){
				var r=this._downEffectValue *255;
				var color=Utils.toHexColor((r << 16)+(r << 8)+r);
				for(var i=0;i < cnt;i++){
					var obj=this.getChildAt(i);
					if(((obj instanceof fairygui.GImage ))|| ((obj instanceof fairygui.GLoader ))
						|| ((obj instanceof fairygui.GMovieClip )))
					(obj).color=color;
				}
			}
			else {
				for(i=0;i < cnt;i++){
					obj=this.getChildAt(i);
					if(((obj instanceof fairygui.GImage ))|| ((obj instanceof fairygui.GLoader ))
						|| ((obj instanceof fairygui.GMovieClip )))
					(obj).color="#FFFFFF";
				}
			}
		}
		else if(this._downEffect==2){
			if(val=="down" || val=="selectedOver" || val=="selectedDisabled"){
				if(!this._downScaled){
					this.setScale(this.scaleX*this._downEffectValue,this.scaleY*this._downEffectValue);
					this._downScaled=true;
				}
			}
			else{
				if(this._downScaled){
					this.setScale(this.scaleX/this._downEffectValue,this.scaleY/this._downEffectValue);
					this._downScaled=false;
				}
			}
		}
	}

	__proto.handleControllerChanged=function(c){
		_super.prototype.handleControllerChanged.call(this,c);
		if (this._relatedController==c)
			this.selected=this._pageOption.id==c.selectedPageId;
	}

	__proto.handleGrayedChanged=function(){
		if(this._buttonController && this._buttonController.hasPage("disabled")){
			if(this.grayed){
				if(this._selected && this._buttonController.hasPage("selectedDisabled"))
					this.setState("selectedDisabled");
				else
				this.setState("disabled");
			}
			else if(this._selected)
			this.setState("down");
			else
			this.setState("up");
		}
		else
		_super.prototype.handleGrayedChanged.call(this);
	}

	__proto.constructFromXML=function(xml){
		_super.prototype.constructFromXML.call(this,xml);
		xml=ToolSet.findChildNode(xml,"Button");
		var str;
		str=xml.getAttribute("mode");
		if (str)
			this._mode=ButtonMode.parse(str);
		str=xml.getAttribute("sound");
		if(str)
			this._sound=str;
		str=xml.getAttribute("volume");
		if(str)
			this._soundVolumeScale=parseInt(str)/ 100;
		str=xml.getAttribute("downEffect");
		if(str){
			this._downEffect=str=="dark"?1:(str=="scale"?2:0);
			str=xml.getAttribute("downEffectValue");
			this._downEffectValue=parseFloat(str);
			if(this._downEffect==2)
				this.setPivot(0.5,0.5);
		}
		this._buttonController=this.getController("button");
		this._titleObject=this.getChild("title");
		this._iconObject=this.getChild("icon");
		if (this._titleObject !=null)
			this._title=this._titleObject.text;
		if (this._iconObject !=null)
			this._icon=this._iconObject.icon;
		if (this._mode==0)
			this.setState("up");
		this.on("mouseover",this,this.__rollover);
		this.on("mouseout",this,this.__rollout);
		this.on("mousedown",this,this.__mousedown);
		this.on("click",this,this.__click);
	}

	__proto.setup_afterAdd=function(xml){
		_super.prototype.setup_afterAdd.call(this,xml);
		xml=ToolSet.findChildNode(xml,"Button");
		if (xml){
			var str;
			str=xml.getAttribute("title");
			if (str)
				this.title=str;
			str=xml.getAttribute("icon");
			if (str)
				this.icon=str;
			str=xml.getAttribute("selectedTitle");
			if (str)
				this.selectedTitle=str;
			str=xml.getAttribute("selectedIcon");
			if (str)
				this.selectedIcon=str;
			str=xml.getAttribute("titleColor");
			if (str)
				this.titleColor=str;
			str=xml.getAttribute("titleFontSize");
			if(str)
				this.titleFontSize=parseInt(str);
			str=xml.getAttribute("sound");
			if (str!=null)
				this._sound=str;
			str=xml.getAttribute("volume");
			if(str)
				this._soundVolumeScale=parseInt(str)/100;
			str=xml.getAttribute("controller");
			if (str)
				this._relatedController=this._parent.getController(str);
			else
			this._relatedController=null;
			this._pageOption.id=xml.getAttribute("page");
			this.selected=xml.getAttribute("checked")=="true";
		}
	}

	__proto.__rollover=function(){
		if(!this._buttonController || !this._buttonController.hasPage("over"))
			return;
		this._over=true;
		if (this._down)
			return;
		if(this.grayed && this._buttonController.hasPage("disabled"))
			return;
		this.setState(this._selected ? "selectedOver" :"over");
	}

	__proto.__rollout=function(){
		if(!this._buttonController || !this._buttonController.hasPage("over"))
			return;
		this._over=false;
		if (this._down)
			return;
		if(this.grayed && this._buttonController.hasPage("disabled"))
			return;
		this.setState(this._selected ? "down" :"up");
	}

	__proto.__mousedown=function(evt){
		this._down=true;
		GRoot.inst.checkPopups(evt.target);
		Laya.stage.on("mouseup",this,this.__mouseup);
		if(this._mode==0){
			if(this.grayed && this._buttonController && this._buttonController.hasPage("disabled"))
				this.setState("selectedDisabled");
			else
			this.setState("down");
		}
		if (this._linkedPopup !=null){
			if ((this._linkedPopup instanceof fairygui.Window ))
				(this._linkedPopup).toggleStatus();
			else
			this.root.togglePopup(this._linkedPopup,this);
		}
	}

	__proto.__mouseup=function(){
		if (this._down){
			Laya.stage.off("mouseup",this,this.__mouseup);
			this._down=false;
			if(this._mode==0){
				if(this.grayed && this._buttonController && this._buttonController.hasPage("disabled"))
					this.setState("disabled");
				else if(this._over)
				this.setState("over");
				else
				this.setState("up");
			}
		}
	}

	__proto.__click=function(evt){
		if(this._sound){
			var pi=UIPackage.getItemByURL(this._sound);
			if (pi)
				GRoot.inst.playOneShotSound(pi.owner.getItemAssetURL(pi));
			else
			GRoot.inst.playOneShotSound(this._sound);
		}
		if (this._mode==1){
			if(this._changeStateOnClick){
				this.selected=!this._selected;
				Events.dispatch("fui_state_changed",this.displayObject,evt);
			}
		}
		else if (this._mode==2){
			if (this._changeStateOnClick && !this._selected){
				this.selected=true;
				Events.dispatch("fui_state_changed",this.displayObject,evt);
			}
		}
		else{
			if(this._relatedController)
				this._relatedController.selectedPageId=this._pageOption.id;
		}
	}

	__getset(0,__proto,'relatedController',function(){
		return this._relatedController;
		},function(val){
		if (val !=this._relatedController){
			this._relatedController=val;
			this._pageOption.controller=val;
			this._pageOption.clear();
		}
	});

	__getset(0,__proto,'icon',function(){
		return this._icon;
		},function(value){
		this._icon=value;
		value=(this._selected && this._selectedIcon)? this._selectedIcon :this._icon;
		if(this._iconObject!=null)
			this._iconObject.icon=value;
		this.updateGear(7);
	});

	__getset(0,__proto,'titleFontSize',function(){
		if((this._titleObject instanceof fairygui.GTextField ))
			return (this._titleObject).fontSize;
		else if((this._titleObject instanceof fairygui.GLabel ))
		return (this._titleObject).titleFontSize;
		else if((this._titleObject instanceof fairygui.GButton ))
		return (this._titleObject).titleFontSize;
		else
		return 0;
		},function(value){
		if((this._titleObject instanceof fairygui.GTextField ))
			(this._titleObject).fontSize=value;
		else if((this._titleObject instanceof fairygui.GLabel ))
		(this._titleObject).titleFontSize=value;
		else if((this._titleObject instanceof fairygui.GButton ))
		(this._titleObject).titleFontSize=value;
	});

	__getset(0,__proto,'selectedIcon',function(){
		return this._selectedIcon;
		},function(value){
		this._selectedIcon=value;
		value=(this._selected && this._selectedIcon)? this._selectedIcon :this._icon;
		if(this._iconObject!=null)
			this._iconObject.icon=value;
	});

	__getset(0,__proto,'title',function(){
		return this._title;
		},function(value){
		this._title=value;
		if (this._titleObject)
			this._titleObject.text=(this._selected && this._selectedTitle)? this._selectedTitle :this._title;
		this.updateGear(6);
	});

	__getset(0,__proto,'text',function(){
		return this.title;
		},function(value){
		this.title=value;
	});

	__getset(0,__proto,'selectedTitle',function(){
		return this._selectedTitle;
		},function(value){
		this._selectedTitle=value;
		if (this._titleObject)
			this._titleObject.text=(this._selected && this._selectedTitle)? this._selectedTitle :this._title;
	});

	__getset(0,__proto,'soundVolumeScale',function(){
		return this._soundVolumeScale;
		},function(value){
		this._soundVolumeScale=value;
	});

	__getset(0,__proto,'sound',function(){
		return this._sound;
		},function(val){
		this._sound=val;
	});

	__getset(0,__proto,'titleColor',function(){
		if((this._titleObject instanceof fairygui.GTextField ))
			return (this._titleObject).color;
		else if((this._titleObject instanceof fairygui.GLabel ))
		return (this._titleObject).titleColor;
		else if((this._titleObject instanceof fairygui.GButton ))
		return (this._titleObject).titleColor;
		else
		return "#000000";
		},function(value){
		if((this._titleObject instanceof fairygui.GTextField ))
			(this._titleObject).color=value;
		else if((this._titleObject instanceof fairygui.GLabel ))
		(this._titleObject).titleColor=value;
		else if((this._titleObject instanceof fairygui.GButton ))
		(this._titleObject).titleColor=value;
	});

	__getset(0,__proto,'selected',function(){
		return this._selected;
		},function(val){
		if (this._mode==0)
			return;
		if (this._selected !=val){
			this._selected=val;
			if(this.grayed && this._buttonController && this._buttonController.hasPage("disabled")){
				if(this._selected)
					this.setState("selectedDisabled");
				else
				this.setState("disabled");
			}
			else {
				if(this._selected)
					this.setState(this._over ? "selectedOver" :"down");
				else
				this.setState(this._over ? "over" :"up");
			}
			if(this._selectedTitle && this._titleObject)
				this._titleObject.text=this._selected ? this._selectedTitle :this._title;
			if(this._selectedIcon){
				var str=this._selected ? this._selectedIcon :this._icon;
				if(this._iconObject!=null)
					this._iconObject.icon=str;
			}
			if(this._relatedController
				&& this._parent
			&& !this._parent._buildingDisplayList){
				if(this._selected){
					this._relatedController.selectedPageId=this._pageOption.id;
					if(this._relatedController._autoRadioGroupDepth)
						this._parent.adjustRadioGroupDepth(this,this._relatedController);
				}
				else if(this._mode==1 && this._relatedController.selectedPageId==this._pageOption.id)
				this._relatedController.oppositePageId=this._pageOption.id;
			}
		}
	});

	__getset(0,__proto,'mode',function(){
		return this._mode;
		},function(value){
		if (this._mode !=value){
			if (value==0)
				this.selected=false;
			this._mode=value;
		}
	});

	__getset(0,__proto,'pageOption',function(){
		return this._pageOption;
	});

	__getset(0,__proto,'changeStateOnClick',function(){
		return this._changeStateOnClick;
		},function(value){
		this._changeStateOnClick=value;
	});

	__getset(0,__proto,'linkedPopup',function(){
		return this._linkedPopup;
		},function(value){
		this._linkedPopup=value;
	});

	GButton.UP="up";
	GButton.DOWN="down";
	GButton.OVER="over";
	GButton.SELECTED_OVER="selectedOver";
	GButton.DISABLED="disabled";
	GButton.SELECTED_DISABLED="selectedDisabled";
	return GButton;
})(GComponent)


//class fairygui.GComboBox extends fairygui.GComponent
var GComboBox=(function(_super){
	function GComboBox(){
		this.dropdown=null;
		this._titleObject=null;
		this._iconObject=null;
		this._list=null;
		this._items=null;
		this._icons=null;
		this._values=null;
		this._popupDownward=null;
		this._visibleItemCount=0;
		this._itemsUpdated=false;
		this._selectedIndex=0;
		this._buttonController=null;
		this._selectionController=null;
		this._down=false;
		this._over=false;
		GComboBox.__super.call(this);
		this._visibleItemCount=UIConfig$1.defaultComboBoxVisibleItemCount;
		this._itemsUpdated=true;
		this._selectedIndex=-1;
		this._items=[];
		this._values=[];
	}

	__class(GComboBox,'fairygui.GComboBox',_super);
	var __proto=GComboBox.prototype;
	__proto.setState=function(val){
		if (this._buttonController)
			this._buttonController.selectedPage=val;
	}

	__proto.handleControllerChanged=function(c){
		_super.prototype.handleControllerChanged.call(this,c);
		if (this._selectionController==c)
			this.selectedIndex=c.selectedIndex;
	}

	__proto.updateSelectionController=function(){
		if (this._selectionController !=null && !this._selectionController.changing
			&& this._selectedIndex < this._selectionController.pageCount){
			var c=this._selectionController;
			this._selectionController=null;
			c.selectedIndex=this._selectedIndex;
			this._selectionController=c;
		}
	}

	__proto.dispose=function(){
		if(this.dropdown){
			this.dropdown.dispose();
			this.dropdown=null;
		}
		this._selectionController=null;
		_super.prototype.dispose.call(this);
	}

	__proto.constructFromXML=function(xml){
		_super.prototype.constructFromXML.call(this,xml);
		xml=ToolSet.findChildNode(xml,"ComboBox");
		var str;
		this._buttonController=this.getController("button");
		this._titleObject=this.getChild("title");
		this._iconObject=this.getChild("icon");
		str=xml.getAttribute("dropdown");
		if (str){
			this.dropdown=(UIPackage.createObjectFromURL(str));
			if (!this.dropdown){
				Log.print("下拉框必须为元件");
				return;
			}
			this.dropdown.name="this._dropdownObject";
			this._list=this.dropdown.getChild("list").asList;
			if (this._list==null){
				Log.print(this.resourceURL+": 下拉框的弹出元件里必须包含名为list的列表");
				return;
			}
			this._list.on("fui_click_item",this,this.__clickItem);
			this._list.addRelation(this.dropdown,14);
			this._list.removeRelation(this.dropdown,15);
			this.dropdown.addRelation(this._list,15);
			this.dropdown.removeRelation(this._list,14);
			this.dropdown.displayObject.on("undisplay",this,this.__popupWinClosed);
		}
		this.on("mouseover",this,this.__rollover);
		this.on("mouseout",this,this.__rollout);
		this.on("mousedown",this,this.__mousedown);
	}

	__proto.setup_afterAdd=function(xml){
		_super.prototype.setup_afterAdd.call(this,xml);
		xml=ToolSet.findChildNode(xml,"ComboBox");
		if (xml){
			var str;
			str=xml.getAttribute("titleColor");
			if (str)
				this.titleColor=str;
			str=xml.getAttribute("visibleItemCount");
			if (str)
				this._visibleItemCount=parseInt(str);
			var col=xml.childNodes;
			var length=col.length;
			for (var i=0;i < length;i++){
				var cxml=col[i];
				if(cxml.nodeName=="item"){
					this._items.push(cxml.getAttribute("title"));
					this._values.push(cxml.getAttribute("value"));
					str=cxml.getAttribute("icon");
					if (str){
						if(!this._icons)
							this._icons=new Array(length);
						this._icons[i]=str;
					}
				}
			}
			str=xml.getAttribute("title");
			if(str){
				this.text=str;
				this._selectedIndex=this._items.indexOf(str);
			}
			else if(this._items.length>0){
				this._selectedIndex=0;
				this.text=this._items[0];
			}
			else
			this._selectedIndex=-1;
			str=xml.getAttribute("icon");
			if(str)
				this.icon=str;
			str=xml.getAttribute("direction");
			if(str){
				if(str=="up")
					this._popupDownward=false;
				else if(str=="auto")
				this._popupDownward=null;
			}
			str=xml.getAttribute("selectionController");
			if (str)
				this._selectionController=this.parent.getController(str);
		}
	}

	__proto.showDropdown=function(){
		if (this._itemsUpdated){
			this._itemsUpdated=false;
			this._list.removeChildrenToPool();
			var cnt=this._items.length;
			for (var i=0;i < cnt;i++){
				var item=this._list.addItemFromPool();
				item.name=i < this._values.length ? this._values[i] :"";
				item.text=this._items[i];
				item.icon=(this._icons !=null && i < this._icons.length)? this._icons[i] :null;
			}
			this._list.resizeToFit(this._visibleItemCount);
		}
		this._list.selectedIndex=-1;
		this.dropdown.width=this.width;
		this.root.togglePopup(this.dropdown,this,this._popupDownward);
		if (this.dropdown.parent)
			this.setState("down");
	}

	__proto.__popupWinClosed=function(){
		if(this._over)
			this.setState("over");
		else
		this.setState("up");
	}

	__proto.__clickItem=function(itemObject,evt){
		Laya.timer.callLater(this,this.__clickItem2,[this._list.getChildIndex(itemObject),evt])
	}

	__proto.__clickItem2=function(index,evt){
		if ((this.dropdown.parent instanceof fairygui.GRoot ))
			(this.dropdown.parent).hidePopup();
		this._selectedIndex=-1;
		this.selectedIndex=index;
		Events.dispatch("fui_state_changed",this.displayObject,evt);
	}

	__proto.__rollover=function(){
		this._over=true;
		if (this._down || this.dropdown && this.dropdown.parent)
			return;
		this.setState("over");
	}

	__proto.__rollout=function(){
		this._over=false;
		if (this._down || this.dropdown && this.dropdown.parent)
			return;
		this.setState("up");
	}

	__proto.__mousedown=function(evt){
		if((evt.target instanceof laya.display.Input ))
			return;
		this._down=true;
		GRoot.inst.checkPopups(evt.target);
		Laya.stage.on("mouseup",this,this.__mouseup);
		if (this.dropdown)
			this.showDropdown();
	}

	__proto.__mouseup=function(){
		if(this._down){
			this._down=false;
			Laya.stage.off("mouseup",this,this.__mouseup);
			if(this.dropdown && !this.dropdown.parent){
				if(this._over)
					this.setState("over");
				else
				this.setState("up");
			}
		}
	}

	__getset(0,__proto,'text',function(){
		if (this._titleObject)
			return this._titleObject.text;
		else
		return null;
		},function(value){
		if (this._titleObject)
			this._titleObject.text=value;
		this.updateGear(6);
	});

	__getset(0,__proto,'titleColor',function(){
		if((this._titleObject instanceof fairygui.GTextField ))
			return (this._titleObject).color;
		else if((this._titleObject instanceof fairygui.GLabel ))
		return (this._titleObject).titleColor;
		else if((this._titleObject instanceof fairygui.GButton ))
		return (this._titleObject).titleColor;
		else
		return "#000000";
		},function(value){
		if((this._titleObject instanceof fairygui.GTextField ))
			(this._titleObject).color=value;
		else if((this._titleObject instanceof fairygui.GLabel ))
		(this._titleObject).titleColor=value;
		else if((this._titleObject instanceof fairygui.GButton ))
		(this._titleObject).titleColor=value;
	});

	__getset(0,__proto,'selectedIndex',function(){
		return this._selectedIndex;
		},function(val){
		if(this._selectedIndex==val)
			return;
		this._selectedIndex=val;
		if(this._selectedIndex>=0 && this._selectedIndex<this._items.length){
			this.text=this._items[this._selectedIndex];
			if (this._icons !=null && this._selectedIndex < this._icons.length)
				this.icon=this._icons[this._selectedIndex];
		}
		else{
			this.text="";
			if (this._icons !=null)
				this.icon=null;
		}
		this.updateSelectionController();
	});

	__getset(0,__proto,'icon',function(){
		if(this._iconObject)
			return this._iconObject.icon;
		else
		return null;
		},function(value){
		if(this._iconObject)
			this._iconObject.icon=value;
		this.updateGear(7);
	});

	__getset(0,__proto,'icons',function(){
		return this._icons;
		},function(value){
		this._icons=value;
		if (this._icons !=null && this._selectedIndex !=-1 && this._selectedIndex < this._icons.length)
			this.icon=this._icons[this._selectedIndex];
	});

	__getset(0,__proto,'selectionController',function(){
		return this._selectionController;
		},function(value){
		this._selectionController=value;
	});

	__getset(0,__proto,'visibleItemCount',function(){
		return this._visibleItemCount;
		},function(value){
		this._visibleItemCount=value;
	});

	__getset(0,__proto,'popupDownward',function(){
		return this._popupDownward;
		},function(value){
		this._popupDownward=value;
	});

	__getset(0,__proto,'values',function(){
		return this._values;
		},function(value){
		if (!value)
			this._values.length=0;
		else
		this._values=value.concat();
	});

	__getset(0,__proto,'items',function(){
		return this._items;
		},function(value){
		if(!value)
			this._items.length=0;
		else
		this._items=value.concat();
		if(this._items.length>0){
			if(this._selectedIndex>=this._items.length)
				this._selectedIndex=this._items.length-1;
			else if(this._selectedIndex==-1)
			this._selectedIndex=0;
			this.text=this._items[this._selectedIndex];
			if (this._icons !=null && this._selectedIndex < this._icons.length)
				this.icon=this._icons[this._selectedIndex];
		}
		else{
			this.text="";
			if (this._icons !=null)
				this.icon=null;
			this._selectedIndex=-1;
		}
		this._itemsUpdated=true;
	});

	__getset(0,__proto,'value',function(){
		return this._values[this._selectedIndex];
		},function(val){
		this.selectedIndex=this._values.indexOf(val);
	});

	return GComboBox;
})(GComponent)


//class fairygui.GLabel extends fairygui.GComponent
var GLabel=(function(_super){
	function GLabel(){
		this._titleObject=null;
		this._iconObject=null;
		GLabel.__super.call(this);
	}

	__class(GLabel,'fairygui.GLabel',_super);
	var __proto=GLabel.prototype;
	Laya.imps(__proto,{"fairygui.IColorGear":true})
	__proto.constructFromXML=function(xml){
		_super.prototype.constructFromXML.call(this,xml);
		this._titleObject=this.getChild("title");
		this._iconObject=this.getChild("icon");
	}

	__proto.setup_afterAdd=function(xml){
		_super.prototype.setup_afterAdd.call(this,xml);
		xml=ToolSet.findChildNode(xml,"Label");
		if (xml){
			var str;
			str=xml.getAttribute("title");
			if(str)
				this.text=str;
			str=xml.getAttribute("icon");
			if(str)
				this.icon=str;
			str=xml.getAttribute("titleColor");
			if (str)
				this.titleColor=str;
			str=xml.getAttribute("titleFontSize");
			if(str)
				this.titleFontSize=parseInt(str);
			if((this._titleObject instanceof fairygui.GTextInput )){
				str=xml.getAttribute("prompt");
				if(str)
					(this._titleObject).promptText=str;
				str=xml.getAttribute("maxLength");
				if(str)
					(this._titleObject).maxLength=parseInt(str);
				str=xml.getAttribute("restrict");
				if(str)
					(this._titleObject).restrict=str;
				str=xml.getAttribute("password");
				if(str)
					(this._titleObject).password=str=="true";
				str=xml.getAttribute("keyboardType");
				if(str=="4")
					(this._titleObject).keyboardType="number";
				else if(str=="3")
				(this._titleObject).keyboardType="url";
			}
		}
	}

	__getset(0,__proto,'color',function(){
		return this.titleColor;
		},function(value){
		this.titleColor=value;
	});

	__getset(0,__proto,'icon',function(){
		if(this._iconObject!=null)
			return this._iconObject.icon;
		else
		return null;
		},function(value){
		if(this._iconObject!=null)
			this._iconObject.icon=value;
		this.updateGear(7);
	});

	__getset(0,__proto,'editable',function(){
		if (this._titleObject && ((this._titleObject instanceof fairygui.GTextInput )))
			return this._titleObject.asTextInput.editable;
		else
		return false;
		},function(val){
		if (this._titleObject)
			this._titleObject.asTextInput.editable=val;
	});

	__getset(0,__proto,'title',function(){
		if (this._titleObject)
			return this._titleObject.text;
		else
		return null;
		},function(value){
		if (this._titleObject)
			this._titleObject.text=value;
		this.updateGear(6);
	});

	__getset(0,__proto,'text',function(){
		return this.title;
		},function(value){
		this.title=value;
	});

	__getset(0,__proto,'titleColor',function(){
		if((this._titleObject instanceof fairygui.GTextField ))
			return (this._titleObject).color;
		else if((this._titleObject instanceof fairygui.GLabel ))
		return (this._titleObject).titleColor;
		else if((this._titleObject instanceof fairygui.GButton ))
		return (this._titleObject).titleColor;
		else
		return "#000000";
		},function(value){
		if((this._titleObject instanceof fairygui.GTextField ))
			(this._titleObject).color=value;
		else if((this._titleObject instanceof fairygui.GLabel ))
		(this._titleObject).titleColor=value;
		else if((this._titleObject instanceof fairygui.GButton ))
		(this._titleObject).titleColor=value;
		this.updateGear(4);
	});

	__getset(0,__proto,'titleFontSize',function(){
		if((this._titleObject instanceof fairygui.GTextField ))
			return (this._titleObject).fontSize;
		else if((this._titleObject instanceof fairygui.GLabel ))
		return (this._titleObject).titleFontSize;
		else if((this._titleObject instanceof fairygui.GButton ))
		return (this._titleObject).titleFontSize;
		else
		return 0;
		},function(value){
		if((this._titleObject instanceof fairygui.GTextField ))
			(this._titleObject).fontSize=value;
		else if((this._titleObject instanceof fairygui.GLabel ))
		(this._titleObject).titleFontSize=value;
		else if((this._titleObject instanceof fairygui.GButton ))
		(this._titleObject).titleFontSize=value;
	});

	return GLabel;
})(GComponent)


//class fairygui.GList extends fairygui.GComponent
var GList=(function(_super){
	var ItemInfo;
	function GList(){
		/**
		*itemRenderer(int index,GObject item);
		*/
		this.itemRenderer=null;
		/**
		*itemProvider(index:int):String;
		*/
		this.itemProvider=null;
		this.scrollItemToViewOnClick=false;
		this.foldInvisibleItems=false;
		this._layout=0;
		this._lineCount=0;
		this._columnCount=0;
		this._lineGap=0;
		this._columnGap=0;
		this._defaultItem=null;
		this._autoResizeItem=false;
		this._selectionMode=0;
		this._align=null;
		this._verticalAlign=null;
		this._selectionController=null;
		this._lastSelectedIndex=0;
		this._pool=null;
		//Virtual List support
		this._virtual=false;
		this._loop=false;
		this._numItems=0;
		this._realNumItems=0;
		this._firstIndex=0;
		//the top left index
		this._curLineItemCount=0;
		//item count in one line
		this._curLineItemCount2=0;
		//只用在页面模式，表示垂直方向的项目数
		this._itemSize=null;
		this._virtualListChanged=0;
		//1-content changed,2-size changed
		this._virtualItems=null;
		this._eventLocked=false;
		this.itemInfoVer=0;
		//用来标志item是否在本次处理中已经被重用了
		this.enterCounter=0;
		GList.__super.call(this);
		this._trackBounds=true;
		this._pool=new GObjectPool();
		this._layout=0;
		this._autoResizeItem=true;
		this._lastSelectedIndex=-1;
		this._selectionMode=0;
		this.opaque=true;
		this.scrollItemToViewOnClick=true;
		this._align="left";
		this._verticalAlign="top";
		this._container=new Sprite();
		this._displayObject.addChild(this._container);
	}

	__class(GList,'fairygui.GList',_super);
	var __proto=GList.prototype;
	__proto.dispose=function(){
		this._pool.clear();
		_super.prototype.dispose.call(this);
	}

	__proto.getFromPool=function(url){
		if (!url)
			url=this._defaultItem;
		var obj=this._pool.getObject(url);
		if(obj!=null)
			obj.visible=true;
		return obj;
	}

	__proto.returnToPool=function(obj){
		obj.displayObject.cacheAsBitmap=false;
		this._pool.returnObject(obj);
	}

	__proto.addChildAt=function(child,index){
		(index===void 0)&& (index=0);
		_super.prototype.addChildAt.call(this,child,index);
		if ((child instanceof fairygui.GButton )){
			var button=(child);
			button.selected=false;
			button.changeStateOnClick=false;
		}
		child.on("click",this,this.__clickItem);
		return child;
	}

	__proto.addItem=function(url){
		if (!url)
			url=this._defaultItem;
		return this.addChild(UIPackage.createObjectFromURL(url));
	}

	__proto.addItemFromPool=function(url){
		return this.addChild(this.getFromPool(url));
	}

	__proto.removeChildAt=function(index,dispose){
		(dispose===void 0)&& (dispose=false);
		var child=_super.prototype.removeChildAt.call(this,index,dispose);
		child.off("click",this,this.__clickItem);
		return child;
	}

	__proto.removeChildToPoolAt=function(index){
		(index===void 0)&& (index=0);
		var child=_super.prototype.removeChildAt.call(this,index);
		this.returnToPool(child);
	}

	__proto.removeChildToPool=function(child){
		this.removeChild(child);
		this.returnToPool(child);
	}

	__proto.removeChildrenToPool=function(beginIndex,endIndex){
		(beginIndex===void 0)&& (beginIndex=0);
		(endIndex===void 0)&& (endIndex=-1);
		if (endIndex < 0 || endIndex >=this._children.length)
			endIndex=this._children.length-1;
		for (var i=beginIndex;i <=endIndex;++i)
		this.removeChildToPoolAt(beginIndex);
	}

	__proto.getSelection=function(){
		var ret=[];
		var i=0;
		if (this._virtual){
			for (i=0;i < this._realNumItems;i++){
				var ii=this._virtualItems[i];
				if (((ii.obj instanceof fairygui.GButton ))&& (ii.obj).selected
					|| ii.obj==null && ii.selected){
					var j=i;
					if (this._loop){
						j=i % this._numItems;
						if (ret.indexOf(j)!=-1)
							continue ;
					}
					ret.push(j);
				}
			}
		}
		else{
			var cnt=this._children.length;
			for (i=0;i < cnt;i++){
				var obj=this._children[i].asButton;
				if (obj !=null && obj.selected)
					ret.push(i);
			}
		}
		return ret;
	}

	__proto.addSelection=function(index,scrollItToView){
		(scrollItToView===void 0)&& (scrollItToView=false);
		if(this._selectionMode==3)
			return;
		this.checkVirtualList();
		if(this._selectionMode==0)
			this.clearSelection();
		if (scrollItToView)
			this.scrollToView(index);
		this._lastSelectedIndex=index;
		var obj=null;
		if (this._virtual){
			var ii=this._virtualItems[index];
			if (ii.obj !=null)
				obj=ii.obj.asButton;
			ii.selected=true;
		}
		else
		obj=this.getChildAt(index).asButton;
		if (obj !=null && !obj.selected){
			obj.selected=true;
			this.updateSelectionController(index);
		}
	}

	__proto.removeSelection=function(index){
		if(this._selectionMode==3)
			return;
		var obj=null;
		if (this._virtual){
			var ii=this._virtualItems[index];
			if (ii.obj !=null)
				obj=ii.obj.asButton;
			ii.selected=false;
		}
		else
		obj=this.getChildAt(index).asButton;
		if (obj !=null)
			obj.selected=false;
	}

	__proto.clearSelection=function(){
		var i=0;
		if (this._virtual){
			for (i=0;i < this._realNumItems;i++){
				var ii=this._virtualItems[i];
				if ((ii.obj instanceof fairygui.GButton ))
					(ii.obj).selected=false;
				ii.selected=false;
			}
		}
		else{
			var cnt=this._children.length;
			for (i=0;i < cnt;i++){
				var obj=this._children[i].asButton;
				if (obj !=null)
					obj.selected=false;
			}
		}
	}

	__proto.clearSelectionExcept=function(g){
		var i=0;
		if (this._virtual){
			for (i=0;i < this._realNumItems;i++){
				var ii=this._virtualItems[i];
				if (ii.obj !=g){
					if (((ii.obj instanceof fairygui.GButton )))
						(ii.obj).selected=false;
					ii.selected=false;
				}
			}
		}
		else{
			var cnt=this._children.length;
			for (i=0;i < cnt;i++){
				var obj=this._children[i].asButton;
				if (obj !=null && obj !=g)
					obj.selected=false;
			}
		}
	}

	__proto.selectAll=function(){
		this.checkVirtualList();
		var last=-1;
		var i=0;
		if (this._virtual){
			for (i=0;i < this._realNumItems;i++){
				var ii=this._virtualItems[i];
				if (((ii.obj instanceof fairygui.GButton ))&& !(ii.obj).selected){
					(ii.obj).selected=true;
					last=i;
				}
				ii.selected=true;
			}
		}
		else{
			var cnt=this._children.length;
			for (i=0;i < cnt;i++){
				var obj=this._children[i].asButton;
				if (obj !=null && !obj.selected){
					obj.selected=true;
					last=i;
				}
			}
		}
		if(last!=-1)
			this.updateSelectionController(last);
	}

	__proto.selectNone=function(){
		this.clearSelection();
	}

	__proto.selectReverse=function(){
		this.checkVirtualList();
		var last=-1;
		var i=0;
		if (this._virtual){
			for (i=0;i < this._realNumItems;i++){
				var ii=this._virtualItems[i];
				if ((ii.obj instanceof fairygui.GButton )){
					(ii.obj).selected=!(ii.obj).selected;
					if ((ii.obj).selected)
						last=i;
				}
				ii.selected=!ii.selected;
			}
		}
		else{
			var cnt=this._children.length;
			for (i=0;i < cnt;i++){
				var obj=this._children[i].asButton;
				if (obj !=null){
					obj.selected=!obj.selected;
					if (obj.selected)
						last=i;
				}
			}
		}
		if(last!=-1)
			this.updateSelectionController(last);
	}

	__proto.handleArrowKey=function(dir){
		(dir===void 0)&& (dir=0);
		var index=this.selectedIndex;
		if (index==-1)
			return;
		switch (dir){
			case 1:
				if (this._layout==0 || this._layout==3){
					index--;
					if (index >=0){
						this.clearSelection();
						this.addSelection(index,true);
					}
				}
				else if (this._layout==2 || this._layout==4){
					var current=this._children[index];
					var k=0;
					for (var i=index-1;i >=0;i--){
						var obj=this._children[i];
						if (obj.y !=current.y){
							current=obj;
							break ;
						}
						k++;
					}
					for (;i >=0;i--){
						obj=this._children[i];
						if (obj.y !=current.y){
							this.clearSelection();
							this.addSelection(i+k+1,true);
							break ;
						}
					}
				}
				break ;
			case 3:
				if (this._layout==1 || this._layout==2 || this._layout==4){
					index++;
					if (index < this._children.length){
						this.clearSelection();
						this.addSelection(index,true);
					}
				}
				else if (this._layout==3){
					current=this._children[index];
					k=0;
					var cnt=this._children.length;
					for (i=index+1;i < cnt;i++){
						obj=this._children[i];
						if (obj.x !=current.x){
							current=obj;
							break ;
						}
						k++;
					}
					for (;i < cnt;i++){
						obj=this._children[i];
						if (obj.x !=current.x){
							this.clearSelection();
							this.addSelection(i-k-1,true);
							break ;
						}
					}
				}
				break ;
			case 5:
				if (this._layout==0 || this._layout==3){
					index++;
					if (index < this._children.length){
						this.clearSelection();
						this.addSelection(index,true);
					}
				}
				else if (this._layout==2 || this._layout==4){
					current=this._children[index];
					k=0;
					cnt=this._children.length;
					for (i=index+1;i < cnt;i++){
						obj=this._children[i];
						if (obj.y !=current.y){
							current=obj;
							break ;
						}
						k++;
					}
					for (;i < cnt;i++){
						obj=this._children[i];
						if (obj.y !=current.y){
							this.clearSelection();
							this.addSelection(i-k-1,true);
							break ;
						}
					}
				}
				break ;
			case 7:
				if (this._layout==1 || this._layout==2 || this._layout==4){
					index--;
					if (index >=0){
						this.clearSelection();
						this.addSelection(index,true);
					}
				}
				else if (this._layout==3){
					current=this._children[index];
					k=0;
					for (i=index-1;i >=0;i--){
						obj=this._children[i];
						if (obj.x !=current.x){
							current=obj;
							break ;
						}
						k++;
					}
					for (;i >=0;i--){
						obj=this._children[i];
						if (obj.x !=current.x){
							this.clearSelection();
							this.addSelection(i+k+1,true);
							break ;
						}
					}
				}
				break ;
			}
	}

	__proto.__clickItem=function(evt){
		if (this._scrollPane !=null && this._scrollPane.isDragged)
			return;
		var item=GObject.cast(evt.currentTarget);
		this.setSelectionOnEvent(item,evt);
		if(this._scrollPane && this.scrollItemToViewOnClick)
			this._scrollPane.scrollToView(item,true);
		this.displayObject.event("fui_click_item",[item,Events.createEvent("fui_click_item",this.displayObject,evt)]);
	}

	__proto.setSelectionOnEvent=function(item,evt){
		if (!((item instanceof fairygui.GButton ))|| this._selectionMode==3)
			return;
		var dontChangeLastIndex=false;
		var button=(item);
		var index=this.childIndexToItemIndex(this.getChildIndex(item));
		if (this._selectionMode==0){
			if (!button.selected){
				this.clearSelectionExcept(button);
				button.selected=true;
			}
		}
		else {
			if (evt.shiftKey){
				if (!button.selected){
					if (this._lastSelectedIndex !=-1){
						var min=Math.min(this._lastSelectedIndex,index);
						var max=Math.max(this._lastSelectedIndex,index);
						max=Math.min(max,this.numItems-1);
						var i=0;
						if (this._virtual){
							for (i=min;i <=max;i++){
								var ii=this._virtualItems[i];
								if ((ii.obj instanceof fairygui.GButton ))
									(ii.obj).selected=true;
								ii.selected=true;
							}
						}
						else{
							for(i=min;i<=max;i++){
								var obj=this.getChildAt(i).asButton;
								if(obj!=null)
									obj.selected=true;
							}
						}
						dontChangeLastIndex=true;
					}
					else {
						button.selected=true;
					}
				}
			}
			else if (evt.ctrlKey || this._selectionMode==2){
				button.selected=!button.selected;
			}
			else {
				if (!button.selected){
					this.clearSelectionExcept(button);
					button.selected=true;
				}
				else
				this.clearSelectionExcept(button);
			}
		}
		if (!dontChangeLastIndex)
			this._lastSelectedIndex=index;
		if(button.selected)
			this.updateSelectionController(index);
	}

	__proto.resizeToFit=function(itemCount,minSize){
		(itemCount===void 0)&& (itemCount=1000000);
		(minSize===void 0)&& (minSize=0);
		this.ensureBoundsCorrect();
		var curCount=this.numItems;
		if (itemCount > curCount)
			itemCount=curCount;
		if(this._virtual){
			var lineCount=Math.ceil(itemCount / this._curLineItemCount);
			if(this._layout==0 || this._layout==2)
				this.viewHeight=lineCount *this._itemSize.y+Math.max(0,lineCount-1)*this._lineGap;
			else
			this.viewWidth=lineCount *this._itemSize.x+Math.max(0,lineCount-1)*this._columnGap;
		}
		else if(itemCount==0){
			if (this._layout==0 || this._layout==2)
				this.viewHeight=minSize;
			else
			this.viewWidth=minSize;
		}
		else {
			var i=itemCount-1;
			var obj=null;
			while (i >=0){
				obj=this.getChildAt(i);
				if (!this.foldInvisibleItems || obj.visible)
					break ;
				i--;
			}
			if (i < 0){
				if (this._layout==0 || this._layout==2)
					this.viewHeight=minSize;
				else
				this.viewWidth=minSize;
			}
			else {
				var size=0;
				if (this._layout==0 || this._layout==2){
					size=obj.y+obj.height;
					if (size < minSize)
						size=minSize;
					this.viewHeight=size;
				}
				else {
					size=obj.x+obj.width;
					if (size < minSize)
						size=minSize;
					this.viewWidth=size;
				}
			}
		}
	}

	__proto.getMaxItemWidth=function(){
		var cnt=this._children.length;
		var max=0;
		for (var i=0;i < cnt;i++){
			var child=this.getChildAt(i);
			if (child.width > max)
				max=child.width;
		}
		return max;
	}

	__proto.handleSizeChanged=function(){
		_super.prototype.handleSizeChanged.call(this);
		this.setBoundsChangedFlag();
		if (this._virtual)
			this.setVirtualListChangedFlag(true);
	}

	__proto.handleControllerChanged=function(c){
		_super.prototype.handleControllerChanged.call(this,c);
		if (this._selectionController==c)
			this.selectedIndex=c.selectedIndex;
	}

	__proto.updateSelectionController=function(index){
		if (this._selectionController !=null && !this._selectionController.changing
			&& index < this._selectionController.pageCount){
			var c=this._selectionController;
			this._selectionController=null;
			c.selectedIndex=index;
			this._selectionController=c;
		}
	}

	__proto.getSnappingPosition=function(xValue,yValue,resultPoint){
		if (this._virtual){
			if(!resultPoint)
				resultPoint=new Point();
			var saved=NaN;
			var index=0;
			if (this._layout==0 || this._layout==2){
				saved=yValue;
				fairygui.GList.pos_param=yValue;
				index=this.getIndexOnPos1(false);
				yValue=fairygui.GList.pos_param;
				if (index < this._virtualItems.length && saved-yValue > this._virtualItems[index].height / 2 && index < this._realNumItems)
					yValue+=this._virtualItems[index].height+this._lineGap;
			}
			else if (this._layout==1 || this._layout==3){
				saved=xValue;
				fairygui.GList.pos_param=xValue;
				index=this.getIndexOnPos2(false);
				xValue=fairygui.GList.pos_param;
				if (index < this._virtualItems.length && saved-xValue > this._virtualItems[index].width / 2 && index < this._realNumItems)
					xValue+=this._virtualItems[index].width+this._columnGap;
			}
			else{
				saved=xValue;
				fairygui.GList.pos_param=xValue;
				index=this.getIndexOnPos3(false);
				xValue=fairygui.GList.pos_param;
				if (index < this._virtualItems.length && saved-xValue > this._virtualItems[index].width / 2 && index < this._realNumItems)
					xValue+=this._virtualItems[index].width+this._columnGap;
			}
			resultPoint.x=xValue;
			resultPoint.y=yValue;
			return resultPoint;
		}
		else
		return _super.prototype.getSnappingPosition.call(this,xValue,yValue,resultPoint);
	}

	__proto.scrollToView=function(index,ani,setFirst){
		(ani===void 0)&& (ani=false);
		(setFirst===void 0)&& (setFirst=false);
		if (this._virtual){
			if(this._numItems==0)
				return;
			this.checkVirtualList();
			if (index >=this._virtualItems.length)
				throw new Error("Invalid child index: "+index+">"+this._virtualItems.length);
			if(this._loop)
				index=Math.floor(this._firstIndex/this._numItems)*this._numItems+index;
			var rect;
			var ii=this._virtualItems[index];
			var pos=0;
			var i=0;
			if (this._layout==0 || this._layout==2){
				for (i=0;i < index;i+=this._curLineItemCount)
				pos+=this._virtualItems[i].height+this._lineGap;
				rect=new Rectangle(0,pos,this._itemSize.x,ii.height);
			}
			else if (this._layout==1 || this._layout==3){
				for (i=0;i < index;i+=this._curLineItemCount)
				pos+=this._virtualItems[i].width+this._columnGap;
				rect=new Rectangle(pos,0,ii.width,this._itemSize.y);
			}
			else{
				var page=index / (this._curLineItemCount *this._curLineItemCount2);
				rect=new Rectangle(page *this.viewWidth+(index % this._curLineItemCount)*(ii.width+this._columnGap),
				(index / this._curLineItemCount)% this._curLineItemCount2 *(ii.height+this._lineGap),
				ii.width,ii.height);
			}
			setFirst=true;
			if (this._scrollPane !=null)
				this._scrollPane.scrollToView(rect,ani,setFirst);
		}
		else{
			var obj=this.getChildAt(index);
			if (this._scrollPane !=null)
				this._scrollPane.scrollToView(obj,ani,setFirst);
			else if (this.parent !=null && this.parent.scrollPane !=null)
			this.parent.scrollPane.scrollToView(obj,ani,setFirst);
		}
	}

	__proto.getFirstChildInView=function(){
		return this.childIndexToItemIndex(_super.prototype.getFirstChildInView.call(this));
	}

	__proto.childIndexToItemIndex=function(index){
		if (!this._virtual)
			return index;
		if (this._layout==4){
			for (var i=this._firstIndex;i < this._realNumItems;i++){
				if (this._virtualItems[i].obj !=null){
					index--;
					if (index < 0)
						return i;
				}
			}
			return index;
		}
		else{
			index+=this._firstIndex;
			if (this._loop && this._numItems > 0)
				index=index % this._numItems;
			return index;
		}
	}

	__proto.itemIndexToChildIndex=function(index){
		if (!this._virtual)
			return index;
		if (this._layout==4){
			return this.getChildIndex(this._virtualItems[index].obj);
		}
		else{
			if (this._loop && this._numItems > 0){
				var j=this._firstIndex % this._numItems;
				if (index >=j)
					index=this._firstIndex+(index-j);
				else
				index=this._firstIndex+this._numItems+(j-index);
			}
			else
			index-=this._firstIndex;
			return index;
		}
	}

	__proto.setVirtual=function(){
		this._setVirtual(false);
	}

	/**
	*Set the list to be virtual list,and has loop behavior.
	*/
	__proto.setVirtualAndLoop=function(){
		this._setVirtual(true);
	}

	__proto._setVirtual=function(loop){
		if(!this._virtual){
			if(this._scrollPane==null)
				throw new Error("Virtual list must be scrollable!");
			if(loop){
				if(this._layout==2 || this._layout==3)
					throw new Error("Loop list is not supported for FlowHorizontal or FlowVertical layout!");
				this._scrollPane.bouncebackEffect=false;
			}
			this._virtual=true;
			this._loop=loop;
			this._virtualItems=[];
			this.removeChildrenToPool();
			if(this._itemSize==null){
				this._itemSize=new Point();
				var obj=this.getFromPool(null);
				if (obj==null){
					throw new Error("Virtual List must have a default list item resource.");
				}
				else{
					this._itemSize.x=obj.width;
					this._itemSize.y=obj.height;
				}
				this.returnToPool(obj);
			}
			if(this._layout==0 || this._layout==2){
				this._scrollPane.scrollStep=this._itemSize.y;
				if(this._loop)
					this._scrollPane._loop=2;
			}
			else{
				this._scrollPane.scrollStep=this._itemSize.x;
				if(this._loop)
					this._scrollPane._loop=1;
			}
			this.on("fui_scroll",this,this.__scrolled);
			this.setVirtualListChangedFlag(true);
		}
	}

	__proto.refreshVirtualList=function(){
		this.setVirtualListChangedFlag(false);
	}

	__proto.checkVirtualList=function(){
		if(this._virtualListChanged!=0){
			this._refreshVirtualList();
			Laya.timer.clear(this,this._refreshVirtualList);
		}
	}

	__proto.setVirtualListChangedFlag=function(layoutChanged){
		(layoutChanged===void 0)&& (layoutChanged=false);
		if(layoutChanged)
			this._virtualListChanged=2;
		else if(this._virtualListChanged==0)
		this._virtualListChanged=1;
		Laya.timer.callLater(this,this._refreshVirtualList);
	}

	__proto._refreshVirtualList=function(){
		var layoutChanged=this._virtualListChanged==2;
		this._virtualListChanged=0;
		this._eventLocked=true;
		if (layoutChanged){
			if (this._layout==0 || this._layout==1)
				this._curLineItemCount=1;
			else if (this._layout==2){
				if (this._columnCount > 0)
					this._curLineItemCount=this._columnCount;
				else{
					this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/ (this._itemSize.x+this._columnGap));
					if (this._curLineItemCount <=0)
						this._curLineItemCount=1;
				}
			}
			else if (this._layout==3){
				if (this._lineCount > 0)
					this._curLineItemCount=this._lineCount;
				else{
					this._curLineItemCount=Math.floor((this._scrollPane.viewHeight+this._lineGap)/ (this._itemSize.y+this._lineGap));
					if (this._curLineItemCount <=0)
						this._curLineItemCount=1;
				}
			}
			else{
				if (this._columnCount > 0)
					this._curLineItemCount=this._columnCount;
				else{
					this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/ (this._itemSize.x+this._columnGap));
					if (this._curLineItemCount <=0)
						this._curLineItemCount=1;
				}
				if (this._lineCount > 0)
					this._curLineItemCount2=this._lineCount;
				else{
					this._curLineItemCount2=Math.floor((this._scrollPane.viewHeight+this._lineGap)/ (this._itemSize.y+this._lineGap));
					if (this._curLineItemCount2 <=0)
						this._curLineItemCount2=1;
				}
			}
		};
		var ch=0,cw=0;
		if (this._realNumItems > 0){
			var i=0;
			var len=Math.ceil(this._realNumItems / this._curLineItemCount)*this._curLineItemCount;
			var len2=Math.min(this._curLineItemCount,this._realNumItems);
			if (this._layout==0 || this._layout==2){
				for (i=0;i < len;i+=this._curLineItemCount)
				ch+=this._virtualItems[i].height+this._lineGap;
				if (ch > 0)
					ch-=this._lineGap;
				if (this._autoResizeItem)
					cw=this._scrollPane.viewWidth;
				else{
					for (i=0;i < len2;i++)
					cw+=this._virtualItems[i].width+this._columnGap;
					if (cw > 0)
						cw-=this._columnGap;
				}
			}
			else if (this._layout==1 || this._layout==3){
				for (i=0;i < len;i+=this._curLineItemCount)
				cw+=this._virtualItems[i].width+this._columnGap;
				if (cw > 0)
					cw-=this._columnGap;
				if (this._autoResizeItem)
					ch=this._scrollPane.viewHeight;
				else{
					for (i=0;i < len2;i++)
					ch+=this._virtualItems[i].height+this._lineGap;
					if (ch > 0)
						ch-=this._lineGap;
				}
			}
			else{
				var pageCount=Math.ceil(len / (this._curLineItemCount *this._curLineItemCount2));
				cw=pageCount *this.viewWidth;
				ch=this.viewHeight;
			}
		}
		this.handleAlign(cw,ch);
		this._scrollPane.setContentSize(cw,ch);
		this._eventLocked=false;
		this.handleScroll(true);
	}

	__proto.__scrolled=function(evt){
		this.handleScroll(false);
	}

	__proto.getIndexOnPos1=function(forceUpdate){
		if (this._realNumItems < this._curLineItemCount){
			GList.pos_param=0;
			return 0;
		};
		var i=0;
		var pos2=NaN;
		var pos3=NaN;
		if (this.numChildren > 0 && !forceUpdate){
			pos2=this.getChildAt(0).y;
			if (pos2 > GList.pos_param){
				for (i=this._firstIndex-this._curLineItemCount;i >=0;i-=this._curLineItemCount){
					pos2-=(this._virtualItems[i].height+this._lineGap);
					if (pos2 <=GList.pos_param){
						GList.pos_param=pos2;
						return i;
					}
				}
				GList.pos_param=0;
				return 0;
			}
			else{
				for (i=this._firstIndex;i < this._realNumItems;i+=this._curLineItemCount){
					pos3=pos2+this._virtualItems[i].height+this._lineGap;
					if (pos3 > GList.pos_param){
						GList.pos_param=pos2;
						return i;
					}
					pos2=pos3;
				}
				GList.pos_param=pos2;
				return this._realNumItems-this._curLineItemCount;
			}
		}
		else{
			pos2=0;
			for (i=0;i < this._realNumItems;i+=this._curLineItemCount){
				pos3=pos2+this._virtualItems[i].height+this._lineGap;
				if (pos3 > GList.pos_param){
					GList.pos_param=pos2;
					return i;
				}
				pos2=pos3;
			}
			GList.pos_param=pos2;
			return this._realNumItems-this._curLineItemCount;
		}
	}

	__proto.getIndexOnPos2=function(forceUpdate){
		if (this._realNumItems < this._curLineItemCount){
			GList.pos_param=0;
			return 0;
		};
		var i=0;
		var pos2=NaN;
		var pos3=NaN;
		if (this.numChildren > 0 && !forceUpdate){
			pos2=this.getChildAt(0).x;
			if (pos2 > GList.pos_param){
				for (i=this._firstIndex-this._curLineItemCount;i >=0;i-=this._curLineItemCount){
					pos2-=(this._virtualItems[i].width+this._columnGap);
					if (pos2 <=GList.pos_param){
						GList.pos_param=pos2;
						return i;
					}
				}
				GList.pos_param=0;
				return 0;
			}
			else{
				for (i=this._firstIndex;i < this._realNumItems;i+=this._curLineItemCount){
					pos3=pos2+this._virtualItems[i].width+this._columnGap;
					if (pos3 > GList.pos_param){
						GList.pos_param=pos2;
						return i;
					}
					pos2=pos3;
				}
				GList.pos_param=pos2;
				return this._realNumItems-this._curLineItemCount;
			}
		}
		else{
			pos2=0;
			for (i=0;i < this._realNumItems;i+=this._curLineItemCount){
				pos3=pos2+this._virtualItems[i].width+this._columnGap;
				if (pos3 > GList.pos_param){
					GList.pos_param=pos2;
					return i;
				}
				pos2=pos3;
			}
			GList.pos_param=pos2;
			return this._realNumItems-this._curLineItemCount;
		}
	}

	__proto.getIndexOnPos3=function(forceUpdate){
		if (this._realNumItems < this._curLineItemCount){
			GList.pos_param=0;
			return 0;
		};
		var viewWidth=this.viewWidth;
		var page=Math.floor(GList.pos_param / viewWidth);
		var startIndex=page *(this._curLineItemCount *this._curLineItemCount2);
		var pos2=page *viewWidth;
		var i=0;
		var pos3=NaN;
		for (i=0;i < this._curLineItemCount;i++){
			pos3=pos2+this._virtualItems[startIndex+i].width+this._columnGap;
			if (pos3 > GList.pos_param){
				GList.pos_param=pos2;
				return startIndex+i;
			}
			pos2=pos3;
		}
		GList.pos_param=pos2;
		return startIndex+this._curLineItemCount-1;
	}

	__proto.handleScroll=function(forceUpdate){
		if (this._eventLocked)
			return;
		this.enterCounter=0;
		if (this._layout==0 || this._layout==2){
			this.handleScroll1(forceUpdate);
			this.handleArchOrder1();
		}
		else if (this._layout==1 || this._layout==3){
			this.handleScroll2(forceUpdate);
			this.handleArchOrder2();
		}
		else{
			this.handleScroll3(forceUpdate);
		}
		this._boundsChanged=false;
	}

	__proto.handleScroll1=function(forceUpdate){
		this.enterCounter++;
		if (this.enterCounter > 3){
			console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");
			return;
		};
		var pos=this._scrollPane.scrollingPosY;
		var max=pos+this._scrollPane.viewHeight;
		var end=max==this._scrollPane.contentHeight;
		fairygui.GList.pos_param=pos;
		var newFirstIndex=this.getIndexOnPos1(forceUpdate);
		pos=fairygui.GList.pos_param;
		if (newFirstIndex==this._firstIndex && !forceUpdate)
			return;
		var oldFirstIndex=this._firstIndex;
		this._firstIndex=newFirstIndex;
		var curIndex=newFirstIndex;
		var forward=oldFirstIndex > newFirstIndex;
		var oldCount=this.numChildren;
		var lastIndex=oldFirstIndex+oldCount-1;
		var reuseIndex=forward ? lastIndex :oldFirstIndex;
		var curX=0,curY=pos;
		var needRender=false;
		var deltaSize=0;
		var firstItemDeltaSize=0;
		var url=this.defaultItem;
		var ii,ii2;
		var i=0,j=0;
		var partSize=(this._scrollPane.viewWidth-this._columnGap *(this._curLineItemCount-1))/ this._curLineItemCount;
		this.itemInfoVer++;
		while (curIndex < this._realNumItems && (end || curY < max)){
			ii=this._virtualItems[curIndex];
			if (ii.obj==null || forceUpdate){
				if (this.itemProvider !=null){
					url=this.itemProvider.runWith(curIndex % this._numItems);
					if (url==null)
						url=this._defaultItem;
					url=UIPackage.normalizeURL(url);
				}
				if (ii.obj !=null && ii.obj.resourceURL !=url){
					if ((ii.obj instanceof fairygui.GButton ))
						ii.selected=(ii.obj).selected;
					this.removeChildToPool(ii.obj);
					ii.obj=null;
				}
			}
			if (ii.obj==null){
				if (forward){
					for (j=reuseIndex;j >=oldFirstIndex;j--){
						ii2=this._virtualItems[j];
						if (ii2.obj !=null && ii2.updateFlag !=this.itemInfoVer && ii2.obj.resourceURL==url){
							if ((ii2.obj instanceof fairygui.GButton ))
								ii2.selected=(ii2.obj).selected;
							ii.obj=ii2.obj;
							ii2.obj=null;
							if (j==reuseIndex)
								reuseIndex--;
							break ;
						}
					}
				}
				else{
					for (j=reuseIndex;j <=lastIndex;j++){
						ii2=this._virtualItems[j];
						if (ii2.obj !=null && ii2.updateFlag !=this.itemInfoVer && ii2.obj.resourceURL==url){
							if ((ii2.obj instanceof fairygui.GButton ))
								ii2.selected=(ii2.obj).selected;
							ii.obj=ii2.obj;
							ii2.obj=null;
							if (j==reuseIndex)
								reuseIndex++;
							break ;
						}
					}
				}
				if (ii.obj !=null){
					this.setChildIndex(ii.obj,forward ? curIndex-newFirstIndex :this.numChildren);
				}
				else{
					ii.obj=this._pool.getObject(url);
					if (forward)
						this.addChildAt(ii.obj,curIndex-newFirstIndex);
					else
					this.addChild(ii.obj);
				}
				if ((ii.obj instanceof fairygui.GButton ))
					(ii.obj).selected=ii.selected;
				needRender=true;
			}
			else
			needRender=forceUpdate;
			if (needRender){
				if (this._autoResizeItem && (this._layout==0 || this._columnCount > 0))
					ii.obj.setSize(partSize,ii.obj.height,true);
				this.itemRenderer.runWith([curIndex % this._numItems,ii.obj]);
				if (curIndex % this._curLineItemCount==0){
					deltaSize+=Math.ceil(ii.obj.height)-ii.height;
					if (curIndex==newFirstIndex && oldFirstIndex > newFirstIndex){
						firstItemDeltaSize=Math.ceil(ii.obj.height)-ii.height;
					}
				}
				ii.width=Math.ceil(ii.obj.width);
				ii.height=Math.ceil(ii.obj.height);
			}
			ii.updateFlag=this.itemInfoVer;
			ii.obj.setXY(curX,curY);
			if (curIndex==newFirstIndex)
				max+=ii.height;
			curX+=ii.width+this._columnGap;
			if (curIndex % this._curLineItemCount==this._curLineItemCount-1){
				curX=0;
				curY+=ii.height+this._lineGap;
			}
			curIndex++;
		}
		for (i=0;i < oldCount;i++){
			ii=this._virtualItems[oldFirstIndex+i];
			if (ii.updateFlag !=this.itemInfoVer && ii.obj !=null){
				if ((ii.obj instanceof fairygui.GButton ))
					ii.selected=(ii.obj).selected;
				this.removeChildToPool(ii.obj);
				ii.obj=null;
			}
		}
		if (deltaSize !=0 || firstItemDeltaSize !=0)
			this._scrollPane.changeContentSizeOnScrolling(0,deltaSize,0,firstItemDeltaSize);
		if (curIndex > 0 && this.numChildren > 0 && this._container.y < 0 && this.getChildAt(0).y >-this._container.y)
			this.handleScroll1(false);
	}

	__proto.handleScroll2=function(forceUpdate){
		this.enterCounter++;
		if (this.enterCounter > 3){
			console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");
			return;
		};
		var pos=this._scrollPane.scrollingPosX;
		var max=pos+this._scrollPane.viewWidth;
		var end=pos==this._scrollPane.contentWidth;
		fairygui.GList.pos_param=pos;
		var newFirstIndex=this.getIndexOnPos2(forceUpdate);
		pos=fairygui.GList.pos_param;
		if (newFirstIndex==this._firstIndex && !forceUpdate)
			return;
		var oldFirstIndex=this._firstIndex;
		this._firstIndex=newFirstIndex;
		var curIndex=newFirstIndex;
		var forward=oldFirstIndex > newFirstIndex;
		var oldCount=this.numChildren;
		var lastIndex=oldFirstIndex+oldCount-1;
		var reuseIndex=forward ? lastIndex :oldFirstIndex;
		var curX=pos,curY=0;
		var needRender=false;
		var deltaSize=0;
		var firstItemDeltaSize=0;
		var url=this.defaultItem;
		var ii,ii2;
		var i=0,j=0;
		var partSize=(this._scrollPane.viewHeight-this._lineGap *(this._curLineItemCount-1))/ this._curLineItemCount;
		this.itemInfoVer++;
		while (curIndex < this._realNumItems && (end || curX < max)){
			ii=this._virtualItems[curIndex];
			if (ii.obj==null || forceUpdate){
				if (this.itemProvider !=null){
					url=this.itemProvider.runWith(curIndex % this._numItems);
					if (url==null)
						url=this._defaultItem;
					url=UIPackage.normalizeURL(url);
				}
				if (ii.obj !=null && ii.obj.resourceURL !=url){
					if ((ii.obj instanceof fairygui.GButton ))
						ii.selected=(ii.obj).selected;
					this.removeChildToPool(ii.obj);
					ii.obj=null;
				}
			}
			if (ii.obj==null){
				if (forward){
					for (j=reuseIndex;j >=oldFirstIndex;j--){
						ii2=this._virtualItems[j];
						if (ii2.obj !=null && ii2.updateFlag !=this.itemInfoVer && ii2.obj.resourceURL==url){
							if ((ii2.obj instanceof fairygui.GButton ))
								ii2.selected=(ii2.obj).selected;
							ii.obj=ii2.obj;
							ii2.obj=null;
							if (j==reuseIndex)
								reuseIndex--;
							break ;
						}
					}
				}
				else{
					for (j=reuseIndex;j <=lastIndex;j++){
						ii2=this._virtualItems[j];
						if (ii2.obj !=null && ii2.updateFlag !=this.itemInfoVer && ii2.obj.resourceURL==url){
							if ((ii2.obj instanceof fairygui.GButton ))
								ii2.selected=(ii2.obj).selected;
							ii.obj=ii2.obj;
							ii2.obj=null;
							if (j==reuseIndex)
								reuseIndex++;
							break ;
						}
					}
				}
				if (ii.obj !=null){
					this.setChildIndex(ii.obj,forward ? curIndex-newFirstIndex :this.numChildren);
				}
				else{
					ii.obj=this._pool.getObject(url);
					if (forward)
						this.addChildAt(ii.obj,curIndex-newFirstIndex);
					else
					this.addChild(ii.obj);
				}
				if ((ii.obj instanceof fairygui.GButton ))
					(ii.obj).selected=ii.selected;
				needRender=true;
			}
			else
			needRender=forceUpdate;
			if (needRender){
				if (this._autoResizeItem && (this._layout==1 || this._lineCount > 0))
					ii.obj.setSize(ii.obj.width,partSize,true);
				this.itemRenderer.runWith([curIndex % this._numItems,ii.obj]);
				if (curIndex % this._curLineItemCount==0){
					deltaSize+=Math.ceil(ii.obj.width)-ii.width;
					if (curIndex==newFirstIndex && oldFirstIndex > newFirstIndex){
						firstItemDeltaSize=Math.ceil(ii.obj.width)-ii.width;
					}
				}
				ii.width=Math.ceil(ii.obj.width);
				ii.height=Math.ceil(ii.obj.height);
			}
			ii.updateFlag=this.itemInfoVer;
			ii.obj.setXY(curX,curY);
			if (curIndex==newFirstIndex)
				max+=ii.width;
			curY+=ii.height+this._lineGap;
			if (curIndex % this._curLineItemCount==this._curLineItemCount-1){
				curY=0;
				curX+=ii.width+this._columnGap;
			}
			curIndex++;
		}
		for (i=0;i < oldCount;i++){
			ii=this._virtualItems[oldFirstIndex+i];
			if (ii.updateFlag !=this.itemInfoVer && ii.obj !=null){
				if ((ii.obj instanceof fairygui.GButton ))
					ii.selected=(ii.obj).selected;
				this.removeChildToPool(ii.obj);
				ii.obj=null;
			}
		}
		if (deltaSize !=0 || firstItemDeltaSize !=0)
			this._scrollPane.changeContentSizeOnScrolling(deltaSize,0,firstItemDeltaSize,0);
		if (curIndex > 0 && this.numChildren > 0 && this._container.x < 0 && this.getChildAt(0).x >-this._container.x)
			this.handleScroll2(false);
	}

	__proto.handleScroll3=function(forceUpdate){
		var pos=this._scrollPane.scrollingPosX;
		fairygui.GList.pos_param=pos;
		var newFirstIndex=this.getIndexOnPos3(forceUpdate);
		pos=fairygui.GList.pos_param;
		if (newFirstIndex==this._firstIndex && !forceUpdate)
			return;
		var oldFirstIndex=this._firstIndex;
		this._firstIndex=newFirstIndex;
		var reuseIndex=oldFirstIndex;
		var virtualItemCount=this._virtualItems.length;
		var pageSize=this._curLineItemCount *this._curLineItemCount2;
		var startCol=newFirstIndex % this._curLineItemCount;
		var viewWidth=this.viewWidth;
		var page=Math.floor(newFirstIndex / pageSize);
		var startIndex=page *pageSize;
		var lastIndex=startIndex+pageSize *2;
		var needRender=false;
		var i=0;
		var ii,ii2;
		var col=0;
		var url=this._defaultItem;
		var partWidth=(this._scrollPane.viewWidth-this._columnGap *(this._curLineItemCount-1))/ this._curLineItemCount;
		var partHeight=(this._scrollPane.viewHeight-this._lineGap *(this._curLineItemCount2-1))/ this._curLineItemCount2;
		this.itemInfoVer++;
		for (i=startIndex;i < lastIndex;i++){
			if (i >=this._realNumItems)
				continue ;
			col=i % this._curLineItemCount;
			if (i-startIndex < pageSize){
				if (col < startCol)
					continue ;
			}
			else{
				if (col > startCol)
					continue ;
			}
			ii=this._virtualItems[i];
			ii.updateFlag=this.itemInfoVer;
		};
		var lastObj=null;
		var insertIndex=0;
		for (i=startIndex;i < lastIndex;i++){
			if (i >=this._realNumItems)
				continue ;
			ii=this._virtualItems[i];
			if (ii.updateFlag !=this.itemInfoVer)
				continue ;
			if (ii.obj==null){
				while (reuseIndex < virtualItemCount){
					ii2=this._virtualItems[reuseIndex];
					if (ii2.obj !=null && ii2.updateFlag !=this.itemInfoVer){
						if ((ii2.obj instanceof fairygui.GButton ))
							ii2.selected=(ii2.obj).selected;
						ii.obj=ii2.obj;
						ii2.obj=null;
						break ;
					}
					reuseIndex++;
				}
				if (insertIndex==-1)
					insertIndex=this.getChildIndex(lastObj)+1;
				if (ii.obj==null){
					if (this.itemProvider !=null){
						url=this.itemProvider.runWith(i % this._numItems);
						if (url==null)
							url=this._defaultItem;
						url=UIPackage.normalizeURL(url);
					}
					ii.obj=this._pool.getObject(url);
					this.addChildAt(ii.obj,insertIndex);
				}
				else{
					insertIndex=this.setChildIndexBefore(ii.obj,insertIndex);
				}
				insertIndex++;
				if ((ii.obj instanceof fairygui.GButton ))
					(ii.obj).selected=ii.selected;
				needRender=true;
			}
			else{
				needRender=forceUpdate;
				insertIndex=-1;
				lastObj=ii.obj;
			}
			if (needRender){
				if (this._autoResizeItem){
					if (this._curLineItemCount==this._columnCount && this._curLineItemCount2==this._lineCount)
						ii.obj.setSize(partWidth,partHeight,true);
					else if (this._curLineItemCount==this._columnCount)
					ii.obj.setSize(partWidth,ii.obj.height,true);
					else if (this._curLineItemCount2==this._lineCount)
					ii.obj.setSize(ii.obj.width,partHeight,true);
				}
				this.itemRenderer.runWith([i % this._numItems,ii.obj]);
				ii.width=Math.ceil(ii.obj.width);
				ii.height=Math.ceil(ii.obj.height);
			}
		};
		var borderX=(startIndex / pageSize)*viewWidth;
		var xx=borderX;
		var yy=0;
		var lineHeight=0;
		for (i=startIndex;i < lastIndex;i++){
			if (i >=this._realNumItems)
				continue ;
			ii=this._virtualItems[i];
			if (ii.updateFlag==this.itemInfoVer)
				ii.obj.setXY(xx,yy);
			if (ii.height > lineHeight)
				lineHeight=ii.height;
			if (i % this._curLineItemCount==this._curLineItemCount-1){
				xx=borderX;
				yy+=lineHeight+this._lineGap;
				lineHeight=0;
				if (i==startIndex+pageSize-1){
					borderX+=viewWidth;
					xx=borderX;
					yy=0;
				}
			}
			else
			xx+=ii.width+this._columnGap;
		}
		for (i=reuseIndex;i < virtualItemCount;i++){
			ii=this._virtualItems[i];
			if (ii.updateFlag !=this.itemInfoVer && ii.obj !=null){
				if ((ii.obj instanceof fairygui.GButton ))
					ii.selected=(ii.obj).selected;
				this.removeChildToPool(ii.obj);
				ii.obj=null;
			}
		}
	}

	__proto.handleArchOrder1=function(){
		if (this.childrenRenderOrder==2){
			var mid=this._scrollPane.posY+this.viewHeight / 2;
			var minDist=Number.POSITIVE_INFINITY;
			var dist=0;
			var apexIndex=0;
			var cnt=this.numChildren;
			for (var i=0;i < cnt;i++){
				var obj=this.getChildAt(i);
				if (!this.foldInvisibleItems || obj.visible){
					dist=Math.abs(mid-obj.y-obj.height / 2);
					if (dist < minDist){
						minDist=dist;
						apexIndex=i;
					}
				}
			}
			this.apexIndex=apexIndex;
		}
	}

	__proto.handleArchOrder2=function(){
		if (this.childrenRenderOrder==2){
			var mid=this._scrollPane.posX+this.viewWidth / 2;
			var minDist=Number.POSITIVE_INFINITY;
			var dist=0;
			var apexIndex=0;
			var cnt=this.numChildren;
			for (var i=0;i < cnt;i++){
				var obj=this.getChildAt(i);
				if (!this.foldInvisibleItems || obj.visible){
					dist=Math.abs(mid-obj.x-obj.width / 2);
					if (dist < minDist){
						minDist=dist;
						apexIndex=i;
					}
				}
			}
			this.apexIndex=apexIndex;
		}
	}

	__proto.handleAlign=function(contentWidth,contentHeight){
		var newOffsetX=0;
		var newOffsetY=0;
		if (contentHeight < this.viewHeight){
			if (this._verticalAlign=="middle")
				newOffsetY=Math.floor((this.viewHeight-contentHeight)/ 2);
			else if (this._verticalAlign=="bottom")
			newOffsetY=this.viewHeight-contentHeight;
		}
		if (contentWidth < this.viewWidth){
			if (this._align=="center")
				newOffsetX=Math.floor((this.viewWidth-contentWidth)/ 2);
			else if (this._align=="right")
			newOffsetX=this.viewWidth-contentWidth;
		}
		if (newOffsetX!=this._alignOffset.x || newOffsetY!=this._alignOffset.y){
			this._alignOffset.setTo(newOffsetX,newOffsetY);
			if (this._scrollPane !=null)
				this._scrollPane.adjustMaskContainer();
			else
			this._container.pos(this._margin.left+this._alignOffset.x,this._margin.top+this._alignOffset.y);
		}
	}

	__proto.updateBounds=function(){
		if(this._virtual)
			return;
		var i=0;
		var child;
		var curX=0;
		var curY=0;
		var maxWidth=0;
		var maxHeight=0;
		var cw=0,ch=0;
		var j=0;
		var page=0;
		var k=0;
		var cnt=this._children.length;
		var viewWidth=this.viewWidth;
		var viewHeight=this.viewHeight;
		var lineSize=0;
		var lineStart=0;
		var ratio=NaN;
		if(this._layout==0){
			for(i=0;i<cnt;i++){
				child=this.getChildAt(i);
				if (this.foldInvisibleItems && !child.visible)
					continue ;
				if (curY !=0)
					curY+=this._lineGap;
				child.y=curY;
				if (this._autoResizeItem)
					child.setSize(viewWidth,child.height,true);
				curY+=Math.ceil(child.height);
				if(child.width>maxWidth)
					maxWidth=child.width;
			}
			cw=Math.ceil(maxWidth);
			ch=curY;
		}
		else if(this._layout==1){
			for(i=0;i<cnt;i++){
				child=this.getChildAt(i);
				if (this.foldInvisibleItems && !child.visible)
					continue ;
				if(curX!=0)
					curX+=this._columnGap;
				child.x=curX;
				if (this._autoResizeItem)
					child.setSize(child.width,viewHeight,true);
				curX+=Math.ceil(child.width);
				if(child.height>maxHeight)
					maxHeight=child.height;
			}
			cw=curX;
			ch=Math.ceil(maxHeight);
		}
		else if(this._layout==2){
			if (this._autoResizeItem && this._columnCount > 0){
				for (i=0;i < cnt;i++){
					child=this.getChildAt(i);
					if (this.foldInvisibleItems && !child.visible)
						continue ;
					lineSize+=child.sourceWidth;
					j++;
					if (j==this._columnCount || i==cnt-1){
						ratio=(viewWidth-lineSize-(j-1)*this._columnGap)/ lineSize;
						curX=0;
						for (j=lineStart;j <=i;j++){
							child=this.getChildAt(j);
							if (this.foldInvisibleItems && !child.visible)
								continue ;
							child.setXY(curX,curY);
							if (j < i){
								child.setSize(child.sourceWidth+Math.round(child.sourceWidth *ratio),child.height,true);
								curX+=Math.ceil(child.width)+this._columnGap;
							}
							else{
								child.setSize(viewWidth-curX,child.height,true);
							}
							if (child.height > maxHeight)
								maxHeight=child.height;
						}
						curY+=Math.ceil(maxHeight)+this._lineGap;
						maxHeight=0;
						j=0;
						lineStart=i+1;
						lineSize=0;
					}
				}
				ch=curY+Math.ceil(maxHeight);
				cw=viewWidth;
			}
			else{
				for(i=0;i<cnt;i++){
					child=this.getChildAt(i);
					if (this.foldInvisibleItems && !child.visible)
						continue ;
					if(curX!=0)
						curX+=this._columnGap;
					if (this._columnCount !=0 && j >=this._columnCount
						|| this._columnCount==0 && curX+child.width > viewWidth && maxHeight !=0){
						curX=0;
						curY+=Math.ceil(maxHeight)+this._lineGap;
						maxHeight=0;
						j=0;
					}
					child.setXY(curX,curY);
					curX+=Math.ceil(child.width);
					if (curX > maxWidth)
						maxWidth=curX;
					if (child.height > maxHeight)
						maxHeight=child.height;
					j++;
				}
				ch=curY+Math.ceil(maxHeight);
				cw=Math.ceil(maxWidth);
			}
		}
		else if (this._layout==3){
			if (this._autoResizeItem && this._lineCount > 0){
				for (i=0;i < cnt;i++){
					child=this.getChildAt(i);
					if (this.foldInvisibleItems && !child.visible)
						continue ;
					lineSize+=child.sourceHeight;
					j++;
					if (j==this._lineCount || i==cnt-1){
						ratio=(viewHeight-lineSize-(j-1)*this._lineGap)/ lineSize;
						curY=0;
						for (j=lineStart;j <=i;j++){
							child=this.getChildAt(j);
							if (this.foldInvisibleItems && !child.visible)
								continue ;
							child.setXY(curX,curY);
							if (j < i){
								child.setSize(child.width,child.sourceHeight+Math.round(child.sourceHeight *ratio),true);
								curY+=Math.ceil(child.height)+this._lineGap;
							}
							else{
								child.setSize(child.width,viewHeight-curY,true);
							}
							if (child.width > maxWidth)
								maxWidth=child.width;
						}
						curX+=Math.ceil(maxWidth)+this._columnGap;
						maxWidth=0;
						j=0;
						lineStart=i+1;
						lineSize=0;
					}
				}
				cw=curX+Math.ceil(maxWidth);
				ch=viewHeight;
			}
			else{
				for(i=0;i<cnt;i++){
					child=this.getChildAt(i);
					if (this.foldInvisibleItems && !child.visible)
						continue ;
					if(curY!=0)
						curY+=this._lineGap;
					if (this._lineCount !=0 && j >=this._lineCount
						|| this._lineCount==0 && curY+child.height > viewHeight && maxWidth !=0){
						curY=0;
						curX+=Math.ceil(maxWidth)+this._columnGap;
						maxWidth=0;
						j=0;
					}
					child.setXY(curX,curY);
					curY+=Math.ceil(child.height);
					if (curY > maxHeight)
						maxHeight=curY;
					if (child.width > maxWidth)
						maxWidth=child.width;
					j++;
				}
				cw=curX+Math.ceil(maxWidth);
				ch=Math.ceil(maxHeight);
			}
		}
		else{
			var eachHeight=0;
			if(this._autoResizeItem && this._lineCount>0)
				eachHeight=Math.floor((viewHeight-(this._lineCount-1)*this._lineGap)/this._lineCount);
			if (this._autoResizeItem && this._columnCount > 0){
				for (i=0;i < cnt;i++){
					child=this.getChildAt(i);
					if (this.foldInvisibleItems && !child.visible)
						continue ;
					if (j==0 && (this._lineCount !=0 && k >=this._lineCount
						|| this._lineCount==0 && curY+child.height > viewHeight)){
						page++;
						curY=0;
						k=0;
					}
					lineSize+=child.sourceWidth;
					j++;
					if (j==this._columnCount || i==cnt-1){
						ratio=(viewWidth-lineSize-(j-1)*this._columnGap)/ lineSize;
						curX=0;
						for (j=lineStart;j <=i;j++){
							child=this.getChildAt(j);
							if (this.foldInvisibleItems && !child.visible)
								continue ;
							child.setXY(page *viewWidth+curX,curY);
							if (j < i){
								child.setSize(child.sourceWidth+Math.round(child.sourceWidth *ratio),
								this._lineCount>0?eachHeight:child.height,true);
								curX+=Math.ceil(child.width)+this._columnGap;
							}
							else{
								child.setSize(viewWidth-curX,this._lineCount>0?eachHeight:child.height,true);
							}
							if (child.height > maxHeight)
								maxHeight=child.height;
						}
						curY+=Math.ceil(maxHeight)+this._lineGap;
						maxHeight=0;
						j=0;
						lineStart=i+1;
						lineSize=0;
						k++;
					}
				}
			}
			else{
				for (i=0;i < cnt;i++){
					child=this.getChildAt(i);
					if (this.foldInvisibleItems && !child.visible)
						continue ;
					if (curX !=0)
						curX+=this._columnGap;
					if (this._autoResizeItem && this._lineCount > 0)
						child.setSize(child.width,eachHeight,true);
					if (this._columnCount !=0 && j >=this._columnCount
						|| this._columnCount==0 && curX+child.width > viewWidth && maxHeight !=0){
						curX=0;
						curY+=Math.ceil(maxHeight)+this._lineGap;
						maxHeight=0;
						j=0;
						k++;
						if (this._lineCount !=0 && k >=this._lineCount
							|| this._lineCount==0 && curY+child.height > viewHeight && maxWidth !=0){
							page++;
							curY=0;
							k=0;
						}
					}
					child.setXY(page *viewWidth+curX,curY);
					curX+=Math.ceil(child.width);
					if (curX > maxWidth)
						maxWidth=curX;
					if (child.height > maxHeight)
						maxHeight=child.height;
					j++;
				}
			}
			ch=page > 0 ? viewHeight :curY+Math.ceil(maxHeight);
			cw=(page+1)*viewWidth;
		}
		this.handleAlign(cw,ch);
		this.setBounds(0,0,cw,ch);
	}

	__proto.setup_beforeAdd=function(xml){
		fairygui.GObject.prototype.setup_beforeAdd.call(this,xml);
		var str;
		var arr;
		str=xml.getAttribute("layout");
		if (str)
			this._layout=ListLayoutType.parse(str);
		var overflow=0;
		str=xml.getAttribute("overflow");
		if (str)
			overflow=OverflowType.parse(str);
		else
		overflow=0;
		str=xml.getAttribute("margin");
		if(str)
			this._margin.parse(str);
		str=xml.getAttribute("align");
		if(str)
			this._align=str;
		str=xml.getAttribute("vAlign");
		if(str)
			this._verticalAlign=str;
		if(overflow==2){
			var scroll=0;
			str=xml.getAttribute("scroll");
			if (str)
				scroll=ScrollType.parse(str);
			else
			scroll=1;
			var scrollBarDisplay=0;
			str=xml.getAttribute("scrollBar");
			if (str)
				scrollBarDisplay=ScrollBarDisplayType.parse(str);
			else
			scrollBarDisplay=0;
			var scrollBarFlags=NaN;
			str=xml.getAttribute("scrollBarFlags");
			if(str)
				scrollBarFlags=parseInt(str);
			else
			scrollBarFlags=0;
			var scrollBarMargin=new Margin();
			str=xml.getAttribute("scrollBarMargin");
			if(str)
				scrollBarMargin.parse(str);
			var vtScrollBarRes;
			var hzScrollBarRes;
			str=xml.getAttribute("scrollBarRes");
			if(str){
				arr=str.split(",");
				vtScrollBarRes=arr[0];
				hzScrollBarRes=arr[1];
			};
			var headerRes;
			var footerRes;
			str=xml.getAttribute('ptrRes');
			if(str){
				arr=str.split(",");
				headerRes=arr[0];
				footerRes=arr[1];
			}
			this.setupScroll(scrollBarMargin,scroll,scrollBarDisplay,scrollBarFlags,
			vtScrollBarRes,hzScrollBarRes,headerRes,footerRes);
		}
		else
		this.setupOverflow(overflow);
		str=xml.getAttribute("lineGap");
		if (str)
			this._lineGap=parseInt(str);
		str=xml.getAttribute("colGap");
		if (str)
			this._columnGap=parseInt(str);
		str=xml.getAttribute("lineItemCount");
		if(str){
			if (this._layout==2 || this._layout==4)
				this._columnCount=parseInt(str);
			else if (this._layout==3)
			this._lineCount=parseInt(str);
		}
		str=xml.getAttribute("lineItemCount2");
		if(str)
			this._lineCount=parseInt(str);
		str=xml.getAttribute("selectionMode");
		if (str)
			this._selectionMode=ListSelectionMode.parse(str);
		str=xml.getAttribute("defaultItem");
		if (str)
			this._defaultItem=str;
		str=xml.getAttribute("autoItemSize");
		if (this._layout==1 || this._layout==0)
			this._autoResizeItem=str!="false";
		else
		this._autoResizeItem=str=="true";
		str=xml.getAttribute("renderOrder");
		if(str){
			this._childrenRenderOrder=ChildrenRenderOrder.parse(str);
			if(this._childrenRenderOrder==2){
				str=xml.getAttribute("apex");
				if(str)
					this._apexIndex=parseInt(str);
			}
		};
		var col=xml.childNodes;
		var length=col.length;
		for (var i=0;i < length;i++){
			var cxml=col[i];
			if(cxml.nodeName !="item")
				continue ;
			var url=cxml.getAttribute("url");
			if (!url)
				url=this._defaultItem;
			if (!url)
				continue ;
			var obj=this.getFromPool(url);
			if(obj !=null){
				this.addChild(obj);
				str=cxml.getAttribute("title");
				if(str)
					obj.text=str;
				str=cxml.getAttribute("icon");
				if(str)
					obj.icon=str;
				str=cxml.getAttribute("name");
				if(str)
					obj.name=str;
				str=cxml.getAttribute("selectedIcon");
				if(str && ((obj instanceof fairygui.GButton )))
					(obj).selectedIcon=str;
				str=cxml.getAttribute("selectedTitle");
				if(str && ((obj instanceof fairygui.GButton )))
					(obj).selectedTitle=str;
				if((obj instanceof fairygui.GComponent )){
					str=cxml.getAttribute("controllers");
					if(str){
						arr=str.split(",");
						for(var j=0;j<arr.length;j+=2){
							var cc=(obj).getController(arr[j]);
							if(cc!=null)
								cc.selectedPageId=arr[j+1];
						}
					}
				}
			}
		}
	}

	__proto.setup_afterAdd=function(xml){
		_super.prototype.setup_afterAdd.call(this,xml);
		var str;
		str=xml.getAttribute("selectionController");
		if(str)
			this._selectionController=this.parent.getController(str);
	}

	__getset(0,__proto,'layout',function(){
		return this._layout;
		},function(value){
		if (this._layout !=value){
			this._layout=value;
			this.setBoundsChangedFlag();
			if(this._virtual)
				this.setVirtualListChangedFlag(true);
		}
	});

	__getset(0,__proto,'align',function(){
		return this._align;
		},function(value){
		if(this._align!=value){
			this._align=value;
			this.setBoundsChangedFlag();
			if (this._virtual)
				this.setVirtualListChangedFlag(true);
		}
	});

	__getset(0,__proto,'lineCount',function(){
		return this._lineCount;
		},function(value){
		if (this._lineCount !=value){
			this._lineCount=value;
			if (this._layout==3 || this._layout==4){
				this.setBoundsChangedFlag();
				if (this._virtual)
					this.setVirtualListChangedFlag(true);
			}
		}
	});

	__getset(0,__proto,'columnCount',function(){
		return this._columnCount;
		},function(value){
		if (this._columnCount !=value){
			this._columnCount=value;
			if (this._layout==2 || this._layout==4){
				this.setBoundsChangedFlag();
				if (this._virtual)
					this.setVirtualListChangedFlag(true);
			}
		}
	});

	__getset(0,__proto,'lineGap',function(){
		return this._lineGap;
		},function(value){
		if (this._lineGap !=value){
			this._lineGap=value;
			this.setBoundsChangedFlag();
			if(this._virtual)
				this.setVirtualListChangedFlag(true);
		}
	});

	__getset(0,__proto,'columnGap',function(){
		return this._columnGap;
		},function(value){
		if(this._columnGap !=value){
			this._columnGap=value;
			this.setBoundsChangedFlag();
			if (this._virtual)
				this.setVirtualListChangedFlag(true);
		}
	});

	__getset(0,__proto,'verticalAlign',function(){
		return this._verticalAlign;
		},function(value){
		if(this._verticalAlign!=value){
			this._verticalAlign=value;
			this.setBoundsChangedFlag();
			if (this._virtual)
				this.setVirtualListChangedFlag(true);
		}
	});

	__getset(0,__proto,'virtualItemSize',function(){
		return this._itemSize;
		},function(value){
		if(this._virtual){
			if(this._itemSize==null)
				this._itemSize=new Point();
			this._itemSize.setTo(value.x,value.y);
			this.setVirtualListChangedFlag(true);
		}
	});

	__getset(0,__proto,'defaultItem',function(){
		return this._defaultItem;
		},function(val){
		this._defaultItem=val;
	});

	__getset(0,__proto,'autoResizeItem',function(){
		return this._autoResizeItem;
		},function(value){
		if(this._autoResizeItem !=value){
			this._autoResizeItem=value;
			this.setBoundsChangedFlag();
			if (this._virtual)
				this.setVirtualListChangedFlag(true);
		}
	});

	__getset(0,__proto,'selectionMode',function(){
		return this._selectionMode;
		},function(value){
		this._selectionMode=value;
	});

	__getset(0,__proto,'selectionController',function(){
		return this._selectionController;
		},function(value){
		this._selectionController=value;
	});

	__getset(0,__proto,'itemPool',function(){
		return this._pool;
	});

	__getset(0,__proto,'selectedIndex',function(){
		var i=0;
		if (this._virtual){
			for (i=0;i < this._realNumItems;i++){
				var ii=this._virtualItems[i];
				if (((ii.obj instanceof fairygui.GButton ))&& (ii.obj).selected
					|| ii.obj==null && ii.selected){
					if (this._loop)
						return i % this._numItems;
					else
					return i;
				}
			}
		}
		else{
			var cnt=this._children.length;
			for (i=0;i < cnt;i++){
				var obj=this._children[i].asButton;
				if (obj !=null && obj.selected)
					return i;
			}
		}
		return-1;
		},function(value){
		if (value >=0 && value < this.numItems){
			if(this._selectionMode!=0)
				this.clearSelection();
			this.addSelection(value);
		}
		else
		this.clearSelection();
	});

	/**
	*Set the list item count.
	*If the list is not virtual,specified Number of items will be created.
	*If the list is virtual,only items in view will be created.
	*/
	__getset(0,__proto,'numItems',function(){
		if(this._virtual)
			return this._numItems;
		else
		return this._children.length;
		},function(value){
		var i=0;
		if (this._virtual){
			if (this.itemRenderer==null)
				throw new Error("Set itemRenderer first!");
			this._numItems=value;
			if (this._loop)
				this._realNumItems=this._numItems *6;
			else
			this._realNumItems=this._numItems;
			var oldCount=this._virtualItems.length;
			if (this._realNumItems > oldCount){
				for (i=oldCount;i < this._realNumItems;i++){
					var ii=new ItemInfo();
					ii.width=this._itemSize.x;
					ii.height=this._itemSize.y;
					this._virtualItems.push(ii);
				}
			}
			else{
				for (i=this._realNumItems;i < oldCount;i++)
				this._virtualItems[i].selected=false;
			}
			if (this._virtualListChanged !=0)
				Laya.timer.clear(this,this._refreshVirtualList);
			this._refreshVirtualList();
		}
		else{
			var cnt=this._children.length;
			if (value > cnt){
				for (i=cnt;i < value;i++){
					if (this.itemProvider==null)
						this.addItemFromPool();
					else
					this.addItemFromPool(this.itemProvider.runWith(i));
				}
			}
			else{
				this.removeChildrenToPool(value,cnt);
			}
			if (this.itemRenderer !=null){
				for (i=0;i < value;i++)
				this.itemRenderer.runWith([i,this.getChildAt(i)]);
			}
		}
	});

	GList.pos_param=NaN;
	GList.__init$=function(){
		//class ItemInfo
		ItemInfo=(function(){
			function ItemInfo(){
				this.width=0;
				this.height=0;
				this.obj=null;
				this.updateFlag=0;
				this.selected=false;
			}
			__class(ItemInfo,'');
			return ItemInfo;
		})()
	}

	return GList;
})(GComponent)


//class fairygui.GRichTextField extends fairygui.GTextField
var GRichTextField=(function(_super){
	function GRichTextField(){
		this.div=null;
		this._ubbEnabled=false;
		this._color=null;
		GRichTextField.__super.call(this);
		this._text="";
	}

	__class(GRichTextField,'fairygui.GRichTextField',_super);
	var __proto=GRichTextField.prototype;
	__proto.createDisplayObject=function(){
		this._displayObject=this.div=new HTMLDivElement();
		this._displayObject.mouseEnabled=true;
		this._displayObject["$owner"]=this;
	}

	__proto.handleSizeChanged=function(){
		this.div.size(this.width,this.height);
	}

	__getset(0,__proto,'bold',function(){
		return this.div.style.bold;
		},function(value){
		this.div.style.bold=value;
	});

	__getset(0,__proto,'align',function(){
		return this.div.style.align;
		},function(value){
		this.div.style.align=value;
	});

	__getset(0,__proto,'text',function(){
		return this._text;
		},function(value){
		this._text=value;
		var text2=this._text;
		if (this._templateVars !=null)
			text2=this.parseTemplate(text2);
		if(this._ubbEnabled)
			this.div.innerHTML=ToolSet.parseUBB(text2);
		else
		this.div.innerHTML=text2;
	});

	__getset(0,__proto,'color',function(){
		return this._color;
		},function(value){
		if (this._color !=value){
			this._color=value;
			this.div.color=value;
			if (this._gearColor.controller)
				this._gearColor.updateState();
		}
	});

	__getset(0,__proto,'font',function(){
		return this.div.style.fontFamily;
		},function(value){
		this.div.style.fontFamily=value;
	});

	__getset(0,__proto,'leading',function(){
		return this.div.style.leading;
		},function(value){
		this.div.style.leading=value;
	});

	__getset(0,__proto,'fontSize',function(){
		return this.div.style.fontSize;
		},function(value){
		this.div.style.fontSize=value;
	});

	__getset(0,__proto,'valign',function(){
		return this.div.style.valign;
		},function(value){
		this.div.style.valign=value;
	});

	__getset(0,__proto,'italic',function(){
		return this.div.style.italic;
		},function(value){
		this.div.style.italic=value;
	});

	__getset(0,__proto,'stroke',function(){
		return this.div.style.stroke;
		},function(value){
		this.div.style.stroke=value;
	});

	__getset(0,__proto,'strokeColor',function(){
		return this.div.style.strokeColor;
		},function(value){
		this.div.style.strokeColor=value;
		this.updateGear(4);
	});

	__getset(0,__proto,'ubbEnabled',function(){
		return this._ubbEnabled;
		},function(value){
		this._ubbEnabled=value;
	});

	return GRichTextField;
})(GTextField)


//class fairygui.GProgressBar extends fairygui.GComponent
var GProgressBar=(function(_super){
	function GProgressBar(){
		this._max=0;
		this._value=0;
		this._titleType=0;
		this._reverse=false;
		this._titleObject=null;
		this._aniObject=null;
		this._barObjectH=null;
		this._barObjectV=null;
		this._barMaxWidth=0;
		this._barMaxHeight=0;
		this._barMaxWidthDelta=0;
		this._barMaxHeightDelta=0;
		this._barStartX=0;
		this._barStartY=0;
		this._tweening=false;
		GProgressBar.__super.call(this);
		this._titleType=0;
		this._value=50;
		this._max=100;
	}

	__class(GProgressBar,'fairygui.GProgressBar',_super);
	var __proto=GProgressBar.prototype;
	__proto.tweenValue=function(value,duration){
		var _$this=this;
		if(this._value !=value){
			if(this._tweening){
				GTween.kill(this,false,this.update);
				this._tweening=false;
			};
			var oldValule=this._value;
			this._value=value;
			this._tweening=true;
			return GTween.to(oldValule,this._value,duration).setTarget(this,this.update).setEase(0)
			.onComplete(function(){_$this._tweening=false;},this);
		}
		else
		return null;
	}

	__proto.update=function(newValue){
		var percent=this._max!=0?Math.min(newValue / this._max,1):0;
		if(this._titleObject){
			switch(this._titleType){
				case 0:
					this._titleObject.text=Math.round(percent *100)+"%";
					break ;
				case 1:
					this._titleObject.text=Math.round(newValue)+"/"+Math.round(this._max);
					break ;
				case 2:
					this._titleObject.text=""+Math.round(newValue);
					break ;
				case 3:
					this._titleObject.text=""+Math.round(this._max);
					break ;
				}
		};
		var fullWidth=this.width-this._barMaxWidthDelta;
		var fullHeight=this.height-this._barMaxHeightDelta;
		if(!this._reverse){
			if(this._barObjectH)
				this._barObjectH.width=Math.round(fullWidth *percent);
			if(this._barObjectV)
				this._barObjectV.height=Math.round(fullHeight *percent);
		}
		else {
			if(this._barObjectH){
				this._barObjectH.width=Math.round(fullWidth *percent);
				this._barObjectH.x=this._barStartX+(fullWidth-this._barObjectH.width);
			}
			if(this._barObjectV){
				this._barObjectV.height=Math.round(fullHeight *percent);
				this._barObjectV.y=this._barStartY+(fullHeight-this._barObjectV.height);
			}
		}
		if((this._aniObject instanceof fairygui.GMovieClip ))
			(this._aniObject).frame=Math.round(percent *100);
	}

	__proto.constructFromXML=function(xml){
		_super.prototype.constructFromXML.call(this,xml);
		xml=ToolSet.findChildNode(xml,"ProgressBar");
		var str;
		str=xml.getAttribute("titleType");
		if(str)
			this._titleType=ProgressTitleType.parse(str);
		this._reverse=xml.getAttribute("reverse")=="true";
		this._titleObject=(this.getChild("title"));
		this._barObjectH=this.getChild("bar");
		this._barObjectV=this.getChild("bar_v");
		this._aniObject=this.getChild("ani");
		if(this._barObjectH){
			this._barMaxWidth=this._barObjectH.width;
			this._barMaxWidthDelta=this.width-this._barMaxWidth;
			this._barStartX=this._barObjectH.x;
		}
		if(this._barObjectV){
			this._barMaxHeight=this._barObjectV.height;
			this._barMaxHeightDelta=this.height-this._barMaxHeight;
			this._barStartY=this._barObjectV.y;
		}
	}

	__proto.handleSizeChanged=function(){
		_super.prototype.handleSizeChanged.call(this);
		if(this._barObjectH)
			this._barMaxWidth=this.width-this._barMaxWidthDelta;
		if(this._barObjectV)
			this._barMaxHeight=this.height-this._barMaxHeightDelta;
		if(!this._underConstruct)
			this.update(this._value);
	}

	__proto.setup_afterAdd=function(xml){
		_super.prototype.setup_afterAdd.call(this,xml);
		xml=ToolSet.findChildNode(xml,"ProgressBar");
		if (xml){
			this._value=parseInt(xml.getAttribute("value"));
			this._max=parseInt(xml.getAttribute("max"));
		}
		this.update(this._value);
	}

	__proto.dispose=function(){
		if(this._tweening)
			GTween.kill(this);
		_super.prototype.dispose.call(this);
	}

	__getset(0,__proto,'max',function(){
		return this._max;
		},function(value){
		if(this._max !=value){
			this._max=value;
			this.update(this._value);
		}
	});

	__getset(0,__proto,'titleType',function(){
		return this._titleType;
		},function(value){
		if(this._titleType !=value){
			this._titleType=value;
			this.update(this._value);
		}
	});

	__getset(0,__proto,'value',function(){
		return this._value;
		},function(value){
		if(this._tweening){
			GTween.kill(this,true,this.update);
			this._tweening=false;
		}
		if(this._value !=value){
			this._value=value;
			this.update(this._value);
		}
	});

	return GProgressBar;
})(GComponent)


//class fairygui.GRoot extends fairygui.GComponent
var GRoot=(function(_super){
	function GRoot(){
		this._modalLayer=null;
		this._popupStack=null;
		this._justClosedPopups=null;
		this._modalWaitPane=null;
		this._focusedObject=null;
		this._tooltipWin=null;
		this._defaultTooltipWin=null;
		this._checkPopups=false;
		GRoot.__super.call(this);
		if(fairygui.GRoot._inst==null)
			fairygui.GRoot._inst=this;
		this.opaque=false;
		this._popupStack=[];
		this._justClosedPopups=[];
		this.displayObject.once("display",this,this.__addedToStage);
	}

	__class(GRoot,'fairygui.GRoot',_super);
	var __proto=GRoot.prototype;
	__proto.showWindow=function(win){
		this.addChild(win);
		win.requestFocus();
		if(win.x > this.width)
			win.x=this.width-win.width;
		else if(win.x+win.width < 0)
		win.x=0;
		if(win.y > this.height)
			win.y=this.height-win.height;
		else if(win.y+win.height < 0)
		win.y=0;
		this.adjustModalLayer();
	}

	__proto.hideWindow=function(win){
		win.hide();
	}

	__proto.hideWindowImmediately=function(win){
		if(win.parent==this)
			this.removeChild(win);
		this.adjustModalLayer();
	}

	__proto.bringToFront=function(win){
		var cnt=this.numChildren;
		var i=NaN;
		if(this._modalLayer.parent!=null && !win.modal)
			i=this.getChildIndex(this._modalLayer)-1;
		else
		i=cnt-1;
		for(;i >=0;i--){
			var g=this.getChildAt(i);
			if(g==win)
				return;
			if((g instanceof fairygui.Window ))
				break ;
		}
		if(i>=0)
			this.setChildIndex(win,i);
	}

	__proto.showModalWait=function(msg){
		if(UIConfig$1.globalModalWaiting !=null){
			if(this._modalWaitPane==null)
				this._modalWaitPane=UIPackage.createObjectFromURL(UIConfig$1.globalModalWaiting);
			this._modalWaitPane.setSize(this.width,this.height);
			this._modalWaitPane.addRelation(this,24);
			this.addChild(this._modalWaitPane);
			this._modalWaitPane.text=msg;
		}
	}

	__proto.closeModalWait=function(){
		if(this._modalWaitPane !=null && this._modalWaitPane.parent !=null)
			this.removeChild(this._modalWaitPane);
	}

	__proto.closeAllExceptModals=function(){
		var arr=this._children.slice();
		var cnt=arr.length;
		for(var i=0;i < cnt;i++){
			var g=arr[i];
			if(((g instanceof fairygui.Window ))&& !(g).modal)
				(g).hide();
		}
	}

	__proto.closeAllWindows=function(){
		var arr=this._children.slice();
		var cnt=arr.length;
		for(var i=0;i < cnt;i++){
			var g=arr[i];
			if((g instanceof fairygui.Window ))
				(g).hide();
		}
	}

	__proto.getTopWindow=function(){
		var cnt=this.numChildren;
		for(var i=cnt-1;i >=0;i--){
			var g=this.getChildAt(i);
			if((g instanceof fairygui.Window )){
				return (g);
			}
		}
		return null;
	}

	__proto.showPopup=function(popup,target,downward){
		if(this._popupStack.length > 0){
			var k=this._popupStack.indexOf(popup);
			if(k !=-1){
				for(var i=this._popupStack.length-1;i >=k;i--)
				this.removeChild(this._popupStack.pop());
			}
		}
		this._popupStack.push(popup);
		if (target !=null){
			var p=target;
			while (p !=null){
				if (p.parent==this){
					if (popup.sortingOrder < p.sortingOrder){
						popup.sortingOrder=p.sortingOrder;
					}
					break ;
				}
				p=p.parent;
			}
		}
		this.addChild(popup);
		this.adjustModalLayer();
		var pos;
		var sizeW=0,sizeH=0;
		if(target){
			pos=target.localToGlobal();
			sizeW=target.width;
			sizeH=target.height;
		}
		else {
			pos=this.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY);
		};
		var xx=NaN,yy=NaN;
		xx=pos.x;
		if(xx+popup.width > this.width)
			xx=xx+sizeW-popup.width;
		yy=pos.y+sizeH;
		if((downward==null && yy+popup.height > this.height)
			|| downward==false){
			yy=pos.y-popup.height-1;
			if(yy < 0){
				yy=0;
				xx+=sizeW / 2;
			}
		}
		popup.x=xx;
		popup.y=yy;
	}

	__proto.togglePopup=function(popup,target,downward){
		if(this._justClosedPopups.indexOf(popup)!=-1)
			return;
		this.showPopup(popup,target,downward);
	}

	__proto.hidePopup=function(popup){
		if(popup !=null){
			var k=this._popupStack.indexOf(popup);
			if(k !=-1){
				for(var i=this._popupStack.length-1;i >=k;i--)
				this.closePopup(this._popupStack.pop());
			}
		}
		else {
			var cnt=this._popupStack.length;
			for(i=cnt-1;i >=0;i--)
			this.closePopup(this._popupStack[i]);
			this._popupStack.length=0;
		}
	}

	__proto.closePopup=function(target){
		if(target.parent !=null){
			if((target instanceof fairygui.Window ))
				(target).hide();
			else
			this.removeChild(target);
		}
	}

	__proto.showTooltips=function(msg){
		if (this._defaultTooltipWin==null){
			var resourceURL=UIConfig$1.tooltipsWin;
			if (!resourceURL){
				Log.print("UIConfig.tooltipsWin not defined");
				return;
			}
			this._defaultTooltipWin=UIPackage.createObjectFromURL(resourceURL);
		}
		this._defaultTooltipWin.text=msg;
		this.showTooltipsWin(this._defaultTooltipWin);
	}

	__proto.showTooltipsWin=function(tooltipWin,position){
		this.hideTooltips();
		this._tooltipWin=tooltipWin;
		var xx=0;
		var yy=0;
		if (position==null){
			xx=Laya.stage.mouseX+10;
			yy=Laya.stage.mouseY+20;
		}
		else {
			xx=position.x;
			yy=position.y;
		};
		var pt=this.globalToLocal(xx,yy);
		xx=pt.x;
		yy=pt.y;
		if (xx+this._tooltipWin.width > this.width){
			xx=xx-this._tooltipWin.width-1;
			if (xx < 0)
				xx=10;
		}
		if (yy+this._tooltipWin.height > this.height){
			yy=yy-this._tooltipWin.height-1;
			if (xx-this._tooltipWin.width-1 > 0)
				xx=xx-this._tooltipWin.width-1;
			if (yy < 0)
				yy=10;
		}
		this._tooltipWin.x=xx;
		this._tooltipWin.y=yy;
		this.addChild(this._tooltipWin);
	}

	__proto.hideTooltips=function(){
		if (this._tooltipWin !=null){
			if (this._tooltipWin.parent)
				this.removeChild(this._tooltipWin);
			this._tooltipWin=null;
		}
	}

	__proto.getObjectUnderPoint=function(globalX,globalY){
		return null;
	}

	__proto.setFocus=function(value){
		if(this._focusedObject!=value){
			this._focusedObject=value;
			this.displayObject.event("fui_focus_changed");
		}
	}

	__proto.playOneShotSound=function(url,volumeScale){
		(volumeScale===void 0)&& (volumeScale=1);
		if(ToolSet.startsWith(url,"ui://"))
			return;
		SoundManager.playSound(url);
	}

	__proto.adjustModalLayer=function(){
		var cnt=this.numChildren;
		if (this._modalWaitPane !=null && this._modalWaitPane.parent !=null)
			this.setChildIndex(this._modalWaitPane,cnt-1);
		for(var i=cnt-1;i >=0;i--){
			var g=this.getChildAt(i);
			if(((g instanceof fairygui.Window ))&& (g).modal){
				if(this._modalLayer.parent==null)
					this.addChildAt(this._modalLayer,i);
				else
				this.setChildIndexBefore(this._modalLayer,i);
				return;
			}
		}
		if (this._modalLayer.parent !=null)
			this.removeChild(this._modalLayer);
	}

	__proto.__addedToStage=function(){
		Laya.stage.on("mousedown",this,this.__stageMouseDown);
		Laya.stage.on("mouseup",this,this.__stageMouseUp);
		this._modalLayer=new GGraph();
		this._modalLayer.setSize(this.width,this.height);
		this._modalLayer.drawRect(0,null,UIConfig$1.modalLayerColor);
		this._modalLayer.addRelation(this,24);
		this.displayObject.stage.on("resize",this,this.__winResize);
		this.__winResize();
	}

	__proto.checkPopups=function(clickTarget){
		if(this._checkPopups)
			return;
		this._checkPopups=true;
		this._justClosedPopups.length=0;
		if (this._popupStack.length > 0){
			var mc=clickTarget;
			while (mc !=this.displayObject.stage && mc !=null){
				if (mc["$owner"]){
					var pindex=this._popupStack.indexOf(mc["$owner"]);
					if (pindex !=-1){
						for(var i=this._popupStack.length-1;i > pindex;i--){
							var popup=this._popupStack.pop();
							this.closePopup(popup);
							this._justClosedPopups.push(popup);
						}
						return;
					}
				}
				mc=mc.parent;
			};
			var cnt=this._popupStack.length;
			for(i=cnt-1;i >=0;i--){
				popup=this._popupStack[i];
				this.closePopup(popup);
				this._justClosedPopups.push(popup);
			}
			this._popupStack.length=0;
		}
	}

	__proto.__stageMouseDown=function(evt){
		var mc=evt.target;
		while (mc !=this.displayObject.stage && mc !=null){
			if (mc["$owner"]){
				var gg=mc["$owner"];
				if (gg.touchable && gg.focusable){
					this.setFocus(gg);
					break ;
				}
			}
			mc=mc.parent;
		}
		if (this._tooltipWin !=null)
			this.hideTooltips();
		this.checkPopups(evt.target);
	}

	__proto.__stageMouseUp=function(){
		this._checkPopups=false;
	}

	__proto.__winResize=function(){
		this.setSize(Laya.stage.width,Laya.stage.height);
	}

	__getset(0,__proto,'focus',function(){
		if (this._focusedObject && !this._focusedObject.onStage)
			this._focusedObject=null;
		return this._focusedObject;
		},function(value){
		if (value && (!value.focusable || !value.onStage))
			throw "invalid focus target";
		this.setFocus(value);
	});

	__getset(0,__proto,'hasAnyPopup',function(){
		return this._popupStack.length !=0;
	});

	__getset(0,__proto,'modalLayer',function(){
		return this._modalLayer;
	});

	__getset(0,__proto,'hasModalWindow',function(){
		return this._modalLayer.parent !=null;
	});

	__getset(0,__proto,'modalWaiting',function(){
		return this._modalWaitPane && this._modalWaitPane.inContainer;
	});

	__getset(0,__proto,'volumeScale',function(){
		return SoundManager.soundVolume;
		},function(value){
		SoundManager.soundVolume=value;
	});

	__getset(1,GRoot,'inst',function(){
		if(fairygui.GRoot._inst==null)
			new GRoot();
		return fairygui.GRoot._inst;
	},fairygui.GComponent._$SET_inst);

	GRoot._inst=null;
	return GRoot;
})(GComponent)


//class fairygui.GTextInput extends fairygui.GTextField
var GTextInput=(function(_super){
	function GTextInput(){
		this.input=null;
		GTextInput.__super.call(this);
	}

	__class(GTextInput,'fairygui.GTextInput',_super);
	var __proto=GTextInput.prototype;
	__proto.createDisplayObject=function(){
		this._displayObject=this.input=new Input();
		this._displayObject.mouseEnabled=true;
		this._displayObject["$owner"]=this;
	}

	__proto.handleSizeChanged=function(){
		this.input.size(this.width,this.height);
	}

	__proto.setup_beforeAdd=function(xml){
		_super.prototype.setup_beforeAdd.call(this,xml);
		var str=xml.getAttribute("prompt");
		if(str)
			this.promptText=str;
		str=xml.getAttribute("maxLength");
		if(str)
			this.input.maxChars=parseInt(str);
		str=xml.getAttribute("restrict");
		if(str)
			this.input.restrict=str;
		if(xml.getAttribute("password")=="true")
			this.password=true;
		else{
			str=xml.getAttribute("keyboardType");
			if(str=="4")
				this.keyboardType="number";
			else if(str=="3")
			this.keyboardType="url";
		}
	}

	__getset(0,__proto,'bold',function(){
		return this.input.bold;
		},function(value){
		this.input.bold=value;
	});

	__getset(0,__proto,'align',function(){
		return this.input.align;
		},function(value){
		this.input.align=value;
	});

	__getset(0,__proto,'text',function(){
		return this.input.text;
		},function(value){
		this.input.text=value;
	});

	__getset(0,__proto,'password',function(){
		return this.input.type=="password";
		},function(value){
		if (value)
			this.input.type="password";
		else
		this.input.type="text";
	});

	__getset(0,__proto,'color',function(){
		return this.input.color;
		},function(value){
		this.input.color=value;
	});

	__getset(0,__proto,'font',function(){
		return this.input.font;
		},function(value){
		this.input.font=value;
	});

	__getset(0,__proto,'leading',function(){
		return this.input.leading;
		},function(value){
		this.input.leading=value;
	});

	__getset(0,__proto,'maxLength',function(){
		return this.input.maxChars;
		},function(value){
		this.input.maxChars=value;
	});

	__getset(0,__proto,'fontSize',function(){
		return this.input.fontSize;
		},function(value){
		this.input.fontSize=value;
	});

	__getset(0,__proto,'valign',function(){
		return this.input.valign;
		},function(value){
		this.input.valign=value;
	});

	__getset(0,__proto,'italic',function(){
		return this.input.italic;
		},function(value){
		this.input.italic=value;
	});

	__getset(0,__proto,'singleLine',function(){
		return !this.input.multiline;
		},function(value){
		this.input.multiline=!value;
	});

	__getset(0,__proto,'stroke',function(){
		return this.input.stroke;
		},function(value){
		this.input.stroke=value;
	});

	__getset(0,__proto,'strokeColor',function(){
		return this.input.strokeColor;
		},function(value){
		this.input.strokeColor=value;
		this.updateGear(4);
	});

	__getset(0,__proto,'keyboardType',function(){
		return this.input.type;
		},function(value){
		this.input.type=value;
	});

	__getset(0,__proto,'editable',function(){
		return this.input.editable;
		},function(value){
		this.input.editable=value;
	});

	__getset(0,__proto,'promptText',function(){
		return this.input.prompt;
		},function(value){
		this.input.prompt=value;
	});

	__getset(0,__proto,'restrict',function(){
		return this.input.restrict;
		},function(value){
		this.input.restrict=value;
	});

	__getset(0,__proto,'textWidth',function(){
		return this.input.textWidth;
	});

	return GTextInput;
})(GTextField)


//class fairygui.GScrollBar extends fairygui.GComponent
var GScrollBar=(function(_super){
	function GScrollBar(){
		this._grip=null;
		this._arrowButton1=null;
		this._arrowButton2=null;
		this._bar=null;
		this._target=null;
		this._vertical=false;
		this._scrollPerc=0;
		this._fixedGripSize=false;
		this._dragOffset=null;
		GScrollBar.__super.call(this);
		this._dragOffset=new laya.maths.Point();
		this._scrollPerc=0;
	}

	__class(GScrollBar,'fairygui.GScrollBar',_super);
	var __proto=GScrollBar.prototype;
	__proto.setScrollPane=function(target,vertical){
		this._target=target;
		this._vertical=vertical;
	}

	__proto.constructFromXML=function(xml){
		_super.prototype.constructFromXML.call(this,xml);
		xml=ToolSet.findChildNode(xml,"ScrollBar");
		if (xml){
			this._fixedGripSize=xml.getAttribute("fixedGripSize")=="true";
		}
		this._grip=this.getChild("grip");
		if(!this._grip){
			Log.print("需要定义grip");
			return;
		}
		this._bar=this.getChild("bar");
		if(!this._bar){
			Log.print("需要定义bar");
			return;
		}
		this._arrowButton1=this.getChild("arrow1");
		this._arrowButton2=this.getChild("arrow2");
		this._grip.on("mousedown",this,this.__gripMouseDown);
		if(this._arrowButton1)
			this._arrowButton1.on("mousedown",this,this.__arrowButton1Click);
		if(this._arrowButton2)
			this._arrowButton2.on("mousedown",this,this.__arrowButton2Click);
		this.on("mousedown",this,this.__barMouseDown);
	}

	__proto.__gripMouseDown=function(evt){
		if (!this._bar)
			return;
		evt.stopPropagation();
		Laya.stage.on("mousemove",this,this.__gripMouseMove);
		Laya.stage.on("mouseup",this,this.__gripMouseUp);
		this.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,this._dragOffset);
		this._dragOffset.x-=this._grip.x;
		this._dragOffset.y-=this._grip.y;
	}

	__proto.__gripMouseMove=function(){
		var pt=this.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,fairygui.GScrollBar.sScrollbarHelperPoint);
		if (this._vertical){
			var curY=pt.y-this._dragOffset.y;
			this._target.setPercY((curY-this._bar.y)/ (this._bar.height-this._grip.height),false);
		}
		else {
			var curX=pt.x-this._dragOffset.x;
			this._target.setPercX((curX-this._bar.x)/ (this._bar.width-this._grip.width),false);
		}
	}

	__proto.__gripMouseUp=function(evt){
		if (!this._bar)
			return;
		Laya.stage.off("mousemove",this,this.__gripMouseMove);
		Laya.stage.off("mouseup",this,this.__gripMouseUp);
	}

	__proto.__arrowButton1Click=function(evt){
		evt.stopPropagation();
		if (this._vertical)
			this._target.scrollUp();
		else
		this._target.scrollLeft();
	}

	__proto.__arrowButton2Click=function(evt){
		evt.stopPropagation();
		if (this._vertical)
			this._target.scrollDown();
		else
		this._target.scrollRight();
	}

	__proto.__barMouseDown=function(evt){
		var pt=this._grip.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,fairygui.GScrollBar.sScrollbarHelperPoint);
		if (this._vertical){
			if (pt.y < 0)
				this._target.scrollUp(4);
			else
			this._target.scrollDown(4);
		}
		else {
			if (pt.x < 0)
				this._target.scrollLeft(4);
			else
			this._target.scrollRight(4);
		}
	}

	__getset(0,__proto,'displayPerc',null,function(val){
		if (this._vertical){
			if(!this._fixedGripSize)
				this._grip.height=val *this._bar.height;
			this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc;
		}
		else {
			if(!this._fixedGripSize)
				this._grip.width=val *this._bar.width;
			this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc;
		}
	});

	__getset(0,__proto,'scrollPerc',null,function(val){
		this._scrollPerc=val;
		if (this._vertical)
			this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc;
		else
		this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc;
	});

	__getset(0,__proto,'minSize',function(){
		if (this._vertical)
			return (this._arrowButton1 !=null ? this._arrowButton1.height :0)+(this._arrowButton2 !=null ? this._arrowButton2.height :0);
		else
		return (this._arrowButton1 !=null ? this._arrowButton1.width :0)+(this._arrowButton2 !=null ? this._arrowButton2.width :0);
	});

	__static(GScrollBar,
	['sScrollbarHelperPoint',function(){return this.sScrollbarHelperPoint=new Point();}
	]);
	return GScrollBar;
})(GComponent)


//class fairygui.GSlider extends fairygui.GComponent
var GSlider=(function(_super){
	function GSlider(){
		this._max=0;
		this._value=0;
		this._titleType=0;
		this._reverse=false;
		this._titleObject=null;
		this._barObjectH=null;
		this._barObjectV=null;
		this._barMaxWidth=0;
		this._barMaxHeight=0;
		this._barMaxWidthDelta=0;
		this._barMaxHeightDelta=0;
		this._gripObject=null;
		this._clickPos=null;
		this._clickPercent=0;
		this._barStartX=0;
		this._barStartY=0;
		this.changeOnClick=true;
		/**是否可拖动开关**/
		this.canDrag=true;
		GSlider.__super.call(this);
		this._titleType=0;
		this._value=50;
		this._max=100;
		this._clickPos=new laya.maths.Point();
	}

	__class(GSlider,'fairygui.GSlider',_super);
	var __proto=GSlider.prototype;
	__proto.update=function(){
		var percent=Math.min(this._value / this._max,1);
		this.updateWidthPercent(percent);
	}

	__proto.updateWidthPercent=function(percent){
		if (this._titleObject){
			switch (this._titleType){
				case 0:
					this._titleObject.text=Math.round(percent *100)+"%";
					break ;
				case 1:
					this._titleObject.text=this._value+"/"+this._max;
					break ;
				case 2:
					this._titleObject.text=""+this._value;
					break ;
				case 3:
					this._titleObject.text=""+this._max;
					break ;
				}
		};
		var fullWidth=this.width-this._barMaxWidthDelta;
		var fullHeight=this.height-this._barMaxHeightDelta;
		if(!this._reverse){
			if(this._barObjectH)
				this._barObjectH.width=Math.round(fullWidth*percent);
			if(this._barObjectV)
				this._barObjectV.height=Math.round(fullHeight*percent);
		}
		else{
			if(this._barObjectH){
				this._barObjectH.width=Math.round(fullWidth*percent);
				this._barObjectH.x=this._barStartX+(fullWidth-this._barObjectH.width);
			}
			if(this._barObjectV){
				this._barObjectV.height=Math.round(fullHeight*percent);
				this._barObjectV.y=this._barStartY+(fullHeight-this._barObjectV.height);
			}
		}
	}

	__proto.constructFromXML=function(xml){
		_super.prototype.constructFromXML.call(this,xml);
		xml=ToolSet.findChildNode(xml,"Slider");
		var str;
		str=xml.getAttribute("titleType");
		if(str)
			this._titleType=ProgressTitleType.parse(str);
		this._reverse=xml.getAttribute("reverse")=="true";
		this._titleObject=(this.getChild("title"));
		this._barObjectH=this.getChild("bar");
		this._barObjectV=this.getChild("bar_v");
		this._gripObject=this.getChild("grip");
		if(this._barObjectH){
			this._barMaxWidth=this._barObjectH.width;
			this._barMaxWidthDelta=this.width-this._barMaxWidth;
			this._barStartX=this._barObjectH.x;
		}
		if(this._barObjectV){
			this._barMaxHeight=this._barObjectV.height;
			this._barMaxHeightDelta=this.height-this._barMaxHeight;
			this._barStartY=this._barObjectV.y;
		}
		if(this._gripObject){
			this._gripObject.on("mousedown",this,this.__gripMouseDown);
		}
		this.displayObject.on("mousedown",this,this.__barMouseDown);
	}

	__proto.handleSizeChanged=function(){
		_super.prototype.handleSizeChanged.call(this);
		if(this._barObjectH)
			this._barMaxWidth=this.width-this._barMaxWidthDelta;
		if(this._barObjectV)
			this._barMaxHeight=this.height-this._barMaxHeightDelta;
		if(!this._underConstruct)
			this.update();
	}

	__proto.setup_afterAdd=function(xml){
		_super.prototype.setup_afterAdd.call(this,xml);
		xml=ToolSet.findChildNode(xml,"Slider");
		if (xml){
			this._value=parseInt(xml.getAttribute("value"));
			this._max=parseInt(xml.getAttribute("max"));
		}
		this.update();
	}

	__proto.__gripMouseDown=function(evt){
		this.canDrag=true;
		evt.stopPropagation();
		this._clickPos=this.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY);
		this._clickPercent=this._value / this._max;
		Laya.stage.on("mousemove",this,this.__gripMouseMove);
		Laya.stage.on("mouseup",this,this.__gripMouseUp);
	}

	__proto.__gripMouseMove=function(evt){
		if(!this.canDrag){
			return;
		};
		var pt=this.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,fairygui.GSlider.sSilderHelperPoint);
		var deltaX=pt.x-this._clickPos.x;
		var deltaY=pt.y-this._clickPos.y;
		if(this._reverse){
			deltaX=-deltaX;
			deltaY=-deltaY;
		};
		var percent=NaN;
		if (this._barObjectH)
			percent=this._clickPercent+deltaX / this._barMaxWidth;
		else
		percent=this._clickPercent+deltaY / this._barMaxHeight;
		if (percent > 1)
			percent=1;
		else if (percent < 0)
		percent=0;
		var newValue=Math.round(this._max *percent);
		if (newValue !=this._value){
			this._value=newValue;
			Events.dispatch("fui_state_changed",this.displayObject,evt);
		}
		this.updateWidthPercent(percent);
	}

	__proto.__gripMouseUp=function(evt){
		Laya.stage.off("mousemove",this,this.__gripMouseMove);
		Laya.stage.off("mouseup",this,this.__gripMouseUp);
	}

	__proto.__barMouseDown=function(evt){
		if(!this.changeOnClick)
			return;
		var pt=this._gripObject.globalToLocal(evt.stageX,evt.stageY,fairygui.GSlider.sSilderHelperPoint);
		var percent=this._value/this._max;
		var delta=NaN;
		if(this._barObjectH)
			delta=(pt.x-this._gripObject.width/2)/this._barMaxWidth;
		if(this._barObjectV)
			delta=(pt.y-this._gripObject.height/2)/this._barMaxHeight;
		if(this._reverse)
			percent-=delta;
		else
		percent+=delta;
		if(percent>1)
			percent=1;
		else if(percent<0)
		percent=0;
		var newValue=Math.round(this._max*percent);
		if(newValue!=this._value){
			this._value=newValue;
			Events.dispatch("fui_state_changed",this.displayObject,evt);
		}
		this.updateWidthPercent(percent);
	}

	__getset(0,__proto,'max',function(){
		return this._max;
		},function(value){
		if (this._max !=value){
			this._max=value;
			this.update();
		}
	});

	__getset(0,__proto,'titleType',function(){
		return this._titleType;
		},function(value){
		this._titleType=value;
	});

	__getset(0,__proto,'value',function(){
		return this._value;
		},function(value){
		if (this._value !=value){
			this._value=value;
			this.update();
		}
	});

	__static(GSlider,
	['sSilderHelperPoint',function(){return this.sSilderHelperPoint=new Point();}
	]);
	return GSlider;
})(GComponent)


//class fairygui.Window extends fairygui.GComponent
var Window$2=(function(_super){
	function Window(){
		this._contentPane=null;
		this._modalWaitPane=null;
		this._closeButton=null;
		this._dragArea=null;
		this._contentArea=null;
		this._frame=null;
		this._modal=false;
		this._uiSources=null;
		this._inited=false;
		this._loading=false;
		this._requestingCmd=0;
		this.bringToFontOnClick=false;
		Window.__super.call(this);
		this.focusable=true;
		this._uiSources=[];
		this.bringToFontOnClick=UIConfig$1.bringWindowToFrontOnClick;
		this.displayObject.on("display",this,this.__onShown);
		this.displayObject.on("undisplay",this,this.__onHidden);
		this.displayObject.on("mousedown",this,this.__mouseDown);
	}

	__class(Window,'fairygui.Window',_super,'Window$2');
	var __proto=Window.prototype;
	__proto.addUISource=function(source){
		this._uiSources.push(source);
	}

	__proto.show=function(){
		GRoot.inst.showWindow(this);
	}

	__proto.showOn=function(root){
		root.showWindow(this);
	}

	__proto.hide=function(){
		if(this.isShowing)
			this.doHideAnimation();
	}

	__proto.hideImmediately=function(){
		var r=((this.parent instanceof fairygui.GRoot ))? (this.parent):null;
		if(!r)
			r=GRoot.inst;
		r.hideWindowImmediately(this);
	}

	__proto.centerOn=function(r,restraint){
		(restraint===void 0)&& (restraint=false);
		this.setXY(Math.round((r.width-this.width)/ 2),Math.round((r.height-this.height)/ 2));
		if(restraint){
			this.addRelation(r,3);
			this.addRelation(r,10);
		}
	}

	__proto.toggleStatus=function(){
		if(this.isTop)
			this.hide();
		else
		this.show();
	}

	__proto.bringToFront=function(){
		this.root.bringToFront(this);
	}

	__proto.showModalWait=function(requestingCmd){
		(requestingCmd===void 0)&& (requestingCmd=0);
		if(requestingCmd !=0)
			this._requestingCmd=requestingCmd;
		if(UIConfig$1.windowModalWaiting){
			if(!this._modalWaitPane)
				this._modalWaitPane=UIPackage.createObjectFromURL(UIConfig$1.windowModalWaiting);
			this.layoutModalWaitPane();
			this.addChild(this._modalWaitPane);
		}
	}

	__proto.layoutModalWaitPane=function(){
		if(this._contentArea !=null){
			var pt=this._frame.localToGlobal();
			pt=this.globalToLocal(pt.x,pt.y,pt);
			this._modalWaitPane.setXY(pt.x+this._contentArea.x,pt.y+this._contentArea.y);
			this._modalWaitPane.setSize(this._contentArea.width,this._contentArea.height);
		}
		else
		this._modalWaitPane.setSize(this.width,this.height);
	}

	__proto.closeModalWait=function(requestingCmd){
		(requestingCmd===void 0)&& (requestingCmd=0);
		if(requestingCmd !=0){
			if(this._requestingCmd !=requestingCmd)
				return false;
		}
		this._requestingCmd=0;
		if(this._modalWaitPane && this._modalWaitPane.parent !=null)
			this.removeChild(this._modalWaitPane);
		return true;
	}

	__proto.init=function(){
		if(this._inited || this._loading)
			return;
		if(this._uiSources.length > 0){
			this._loading=false;
			var cnt=this._uiSources.length;
			for(var i=0;i < cnt;i++){
				var lib=this._uiSources[i];
				if(!lib.loaded){
					lib.load(this.__uiLoadComplete,this);
					this._loading=true;
				}
			}
			if(!this._loading)
				this._init();
		}
		else
		this._init();
	}

	__proto.onInit=function(){}
	__proto.onShown=function(){}
	__proto.onHide=function(){}
	__proto.doShowAnimation=function(){
		this.onShown();
	}

	__proto.doHideAnimation=function(){
		this.hideImmediately();
	}

	__proto.__uiLoadComplete=function(){
		var cnt=this._uiSources.length;
		for(var i=0;i < cnt;i++){
			var lib=this._uiSources[i];
			if(!lib.loaded)
				return;
		}
		this._loading=false;
		this._init();
	}

	__proto._init=function(){
		this._inited=true;
		this.onInit();
		if(this.isShowing)
			this.doShowAnimation();
	}

	__proto.dispose=function(){
		if(this.parent !=null)
			this.hideImmediately();
		_super.prototype.dispose.call(this);
	}

	__proto.closeEventHandler=function(){
		this.hide();
	}

	__proto.__onShown=function(){
		if(!this._inited)
			this.init();
		else
		this.doShowAnimation();
	}

	__proto.__onHidden=function(){
		this.closeModalWait();
		this.onHide();
	}

	__proto.__mouseDown=function(){
		if(this.isShowing && this.bringToFontOnClick)
			this.bringToFront();
	}

	__proto.__dragStart=function(evt){
		GObject.cast(evt.currentTarget).stopDrag();
		this.startDrag();
	}

	__getset(0,__proto,'contentPane',function(){
		return this._contentPane;
		},function(val){
		if(this._contentPane !=val){
			if(this._contentPane !=null)
				this.removeChild(this._contentPane);
			this._contentPane=val;
			if(this._contentPane !=null){
				this.addChild(this._contentPane);
				this.setSize(this._contentPane.width,this._contentPane.height);
				this._contentPane.addRelation(this,24);
				this._frame=(this._contentPane.getChild("frame"));
				if(this._frame !=null){
					this.closeButton=this._frame.getChild("closeButton");
					this.dragArea=this._frame.getChild("dragArea");
					this.contentArea=this._frame.getChild("contentArea");
				}
			}
		}
	});

	__getset(0,__proto,'isShowing',function(){
		return this.parent !=null;
	});

	__getset(0,__proto,'isTop',function(){
		return this.parent !=null && this.parent.getChildIndex(this)==this.parent.numChildren-1;
	});

	__getset(0,__proto,'modal',function(){
		return this._modal;
		},function(val){
		this._modal=val;
	});

	__getset(0,__proto,'dragArea',function(){
		return this._dragArea;
		},function(value){
		if(this._dragArea !=value){
			if(this._dragArea !=null){
				this._dragArea.draggable=false;
				this._dragArea.off("fui_drag_start",this,this.__dragStart);
			}
			this._dragArea=value;
			if(this._dragArea !=null){
				if((this._dragArea instanceof fairygui.GGraph ))
					this._dragArea.asGraph.drawRect(0,null,null);
				this._dragArea.draggable=true;
				this._dragArea.on("fui_drag_start",this,this.__dragStart);
			}
		}
	});

	__getset(0,__proto,'frame',function(){
		return this._frame;
	});

	__getset(0,__proto,'closeButton',function(){
		return this._closeButton;
		},function(value){
		if(this._closeButton !=null)
			this._closeButton.offClick(this,this.closeEventHandler);
		this._closeButton=value;
		if(this._closeButton !=null)
			this._closeButton.onClick(this,this.closeEventHandler);
	});

	__getset(0,__proto,'contentArea',function(){
		return this._contentArea;
		},function(value){
		this._contentArea=value;
	});

	__getset(0,__proto,'modalWaiting',function(){
		return this._modalWaitPane && this._modalWaitPane.parent !=null;
	});

	return Window;
})(GComponent)


//class fairygui.display.Image extends laya.display.Sprite
var Image$1=(function(_super){
	function Image(){
		this._tex=null;
		this._scaleByTile=false;
		this._scale9Grid=null;
		this._tileGridIndice=0;
		this._textureScaleX=0;
		this._textureScaleY=0;
		this._needRebuild=false;
		Image.__super.call(this);
		this.mouseEnabled=false;
		this._textureScaleX=1;
		this._textureScaleY=1;
	}

	__class(Image,'fairygui.display.Image',_super,'Image$1');
	var __proto=Image.prototype;
	__proto.scaleTexture=function(sx,sy){
		if(this._textureScaleX!=sx || this._textureScaleY!=sy){
			this._textureScaleX=sx;
			this._textureScaleY=sy;
			if(this._tex)
				this.size(this._tex.width*sx,this._tex.height*sy);
			this.markChanged();
		}
	}

	__proto.markChanged=function(){
		if(!this._needRebuild){
			this._needRebuild=true;
			Laya.timer.callLater(this,this.rebuild);
		}
	}

	__proto.rebuild=function(){
		this._needRebuild=false;
		var g=this.graphics;
		g.clear();
		if(this._tex==null){
			this.repaint();
			return;
		};
		var width=this.width;
		var height=this.height;
		var sw=this._tex.width;
		var sh=this._tex.height;
		if(width==0 || height==0){
			this.repaint();
			return;
		}
		if(this._scaleByTile){
			g.fillTexture(this._tex,0,0,width,height);
		}
		else if(this._scale9Grid!=null){
			var left=this._scale9Grid.x;
			var right=Math.max(sw-this._scale9Grid.right,0);
			var top=this._scale9Grid.y;
			var bottom=Math.max(sh-this._scale9Grid.bottom,0);
			var tmp=NaN;
			if (height >=(sh-this._scale9Grid.height)){
				top=this._scale9Grid.y;
				bottom=sh-this._scale9Grid.bottom;
			}
			else{
				tmp=this._scale9Grid.y / (sh-this._scale9Grid.bottom);
				tmp=height *tmp / (1+tmp);
				top=Math.round(tmp);
				bottom=height-tmp;
			}
			if (width >=(sw-this._scale9Grid.width)){
				left=this._scale9Grid.x;
				right=sw-this._scale9Grid.right;
			}
			else{
				tmp=this._scale9Grid.x / (sw-this._scale9Grid.right);
				tmp=width *tmp / (1+tmp);
				left=Math.round(tmp);
				right=width-tmp;
			};
			var centerWidth=Math.max(width-left-right,0);
			var centerHeight=Math.max(height-top-bottom,0);
			left && top && g.drawTexture(fairygui.display.Image.getTexture(this._tex,0,0,left,top),0,0,left,top);
			right && top && g.drawTexture(fairygui.display.Image.getTexture(this._tex,sw-right,0,right,top),width-right,0,right,top);
			left && bottom && g.drawTexture(fairygui.display.Image.getTexture(this._tex,0,sh-bottom,left,bottom),0,height-bottom,left,bottom);
			right && bottom && g.drawTexture(fairygui.display.Image.getTexture(this._tex,sw-right,sh-bottom,right,bottom),width-right,height-bottom,right,bottom);
			centerWidth && top && this.drawTexture(0,fairygui.display.Image.getTexture(this._tex,left,0,sw-left-right,top),left,0,centerWidth,top);
			centerWidth && bottom && this.drawTexture(1,fairygui.display.Image.getTexture(this._tex,left,sh-bottom,sw-left-right,bottom),left,height-bottom,centerWidth,bottom);
			centerHeight && left && this.drawTexture(2,fairygui.display.Image.getTexture(this._tex,0,top,left,sh-top-bottom),0,top,left,centerHeight);
			centerHeight && right && this.drawTexture(3,fairygui.display.Image.getTexture(this._tex,sw-right,top,right,sh-top-bottom),width-right,top,right,centerHeight);
			centerWidth && centerHeight && this.drawTexture(4,fairygui.display.Image.getTexture(this._tex,left,top,sw-left-right,sh-top-bottom),left,top,centerWidth,centerHeight);
		}
		else {
			g.drawTexture(this._tex,0,0,width,height);
		}
		this.repaint();
	}

	__proto.drawTexture=function(part,tex,x,y,width,height){
		(width===void 0)&& (width=0);
		(height===void 0)&& (height=0);
		if(part==-1 || (this._tileGridIndice & (1<<part))==0)
			this.graphics.drawTexture(tex,x,y,width,height);
		else
		this.graphics.fillTexture(tex,x,y,width,height);
	}

	__getset(0,__proto,'tex',function(){
		return this._tex;
		},function(value){
		if(this._tex!=value){
			this._tex=value;
			if(this._tex)
				this.size(this._tex.width*this._textureScaleX,this._tex.height*this._textureScaleY);
			else
			this.size(0,0);
			this.markChanged();
		}
	});

	__getset(0,__proto,'scale9Grid',function(){
		return this._scale9Grid;
		},function(value){
		this._scale9Grid=value;
		this.markChanged();
	});

	__getset(0,__proto,'scaleByTile',function(){
		return this._scaleByTile;
		},function(value){
		if(this._scaleByTile!=value){
			this._scaleByTile=value;
			this.markChanged();
		}
	});

	__getset(0,__proto,'tileGridIndice',function(){
		return this._tileGridIndice;
		},function(value){
		if(this._tileGridIndice!=value){
			this._tileGridIndice=value;
			this.markChanged();
		}
	});

	Image.getTexture=function(source,x,y,width,height){
		source.$GID || (source.$GID=Utils.getGID());
		var key=source.$GID+"."+x+"."+y+"."+width+"."+height;
		var texture=fairygui.display.Image._textureCache[key];
		if (!texture){
			texture=fairygui.display.Image._textureCache[key]=Texture.create(source,x,y,width,height);
		}
		return texture;
	}

	Image.clearCache=function(){
		fairygui.display.Image._textureCache={};
	}

	Image._textureCache={};
	return Image;
})(Sprite)


//class fairygui.display.MovieClip extends laya.display.Sprite
var MovieClip$1=(function(_super){
	function MovieClip(){
		this.interval=0;
		this.swing=false;
		this.repeatDelay=0;
		this.timeScale=1;
		this._$3__texture=null;
		this._needRebuild=false;
		this._playing=true;
		this._frameCount=0;
		this._frames=null;
		this._frame=0;
		this._boundsRect=null;
		this._start=0;
		this._end=0;
		this._times=0;
		this._endAt=0;
		this._status=0;
		//0-none,1-next loop,2-ending,3-ended
		this._endHandler=null;
		this._frameElapsed=0;
		//当前帧延迟
		this._reversed=false;
		this._repeatedCount=0;
		MovieClip.__super.call(this);
		this.mouseEnabled=false;
		this.setPlaySettings();
		this.on("display",this,this.__addToStage);
		this.on("undisplay",this,this.__removeFromStage);
	}

	__class(MovieClip,'fairygui.display.MovieClip',_super,'MovieClip$1');
	var __proto=MovieClip.prototype;
	//从start帧开始，播放到end帧（-1表示结尾），重复times次（0表示无限循环），循环结束后，停止在endAt帧（-1表示参数end）
	__proto.rewind=function(){
		this._frame=0;
		this._frameElapsed=0;
		this._reversed=false;
		this._repeatedCount=0;
		this.drawFrame();
	}

	__proto.syncStatus=function(anotherMc){
		this._frame=anotherMc._frame;
		this._frameElapsed=anotherMc._frameElapsed;
		this._reversed=anotherMc._reversed;
		this._repeatedCount=anotherMc._repeatedCount;
		this.drawFrame();
	}

	__proto.advance=function(timeInMiniseconds){
		var beginFrame=this._frame;
		var beginReversed=this._reversed;
		var backupTime=timeInMiniseconds;
		while (true){
			var tt=this.interval+this._frames[this._frame].addDelay;
			if (this._frame==0 && this._repeatedCount > 0)
				tt+=this.repeatDelay;
			if (timeInMiniseconds < tt){
				this._frameElapsed=0;
				break ;
			}
			timeInMiniseconds-=tt;
			if (this.swing){
				if (this._reversed){
					this._frame--;
					if (this._frame <=0){
						this._frame=0;
						this._repeatedCount++;
						this._reversed=!this._reversed;
					}
				}
				else{
					this._frame++;
					if (this._frame > this._frameCount-1){
						this._frame=Math.max(0,this._frameCount-2);
						this._repeatedCount++;
						this._reversed=!this._reversed;
					}
				}
			}
			else{
				this._frame++;
				if (this._frame > this._frameCount-1){
					this._frame=0;
					this._repeatedCount++;
				}
			}
			if (this._frame==beginFrame && this._reversed==beginReversed){
				var roundTime=backupTime-timeInMiniseconds;
				timeInMiniseconds-=Math.floor(timeInMiniseconds / roundTime)*roundTime;
			}
		}
		this.drawFrame();
	}

	//从start帧开始，播放到end帧（-1表示结尾），重复times次（0表示无限循环），循环结束后，停止在endAt帧（-1表示参数end）
	__proto.setPlaySettings=function(start,end,times,endAt,endHandler){
		(start===void 0)&& (start=0);
		(end===void 0)&& (end=-1);
		(times===void 0)&& (times=0);
		(endAt===void 0)&& (endAt=-1);
		this._start=start;
		this._end=end;
		if(this._end==-1 || this._end>this._frameCount-1)
			this._end=this._frameCount-1;
		this._times=times;
		this._endAt=endAt;
		if (this._endAt==-1)
			this._endAt=this._end;
		this._status=0;
		this._endHandler=endHandler;
		this.frame=start;
	}

	__proto.update=function(){
		if (!this._playing || this._frameCount==0 || this._status==3)
			return;
		var dt=Laya.timer.delta;
		if(dt>100)
			dt=100;
		if(this.timeScale!=1)
			dt *=this.timeScale;
		this._frameElapsed+=dt;
		var tt=this.interval+this._frames[this._frame].addDelay;
		if (this._frame==0 && this._repeatedCount > 0)
			tt+=this.repeatDelay;
		if (this._frameElapsed < tt)
			return;
		this._frameElapsed-=tt;
		if (this._frameElapsed > this.interval)
			this._frameElapsed=this.interval;
		if (this.swing){
			if (this._reversed){
				this._frame--;
				if (this._frame <=0){
					this._frame=0;
					this._repeatedCount++;
					this._reversed=!this._reversed;
				}
			}
			else{
				this._frame++;
				if (this._frame > this._frameCount-1){
					this._frame=Math.max(0,this._frameCount-2);
					this._repeatedCount++;
					this._reversed=!this._reversed;
				}
			}
		}
		else{
			this._frame++;
			if (this._frame > this._frameCount-1){
				this._frame=0;
				this._repeatedCount++;
			}
		}
		if (this._status==1){
			this._frame=this._start;
			this._frameElapsed=0;
			this._status=0;
		}
		else if (this._status==2){
			this._frame=this._endAt;
			this._frameElapsed=0;
			this._status=3;
			if(this._endHandler!=null){
				var handler=this._endHandler;
				this._endHandler=null;
				handler.run();
			}
		}
		else{
			if (this._frame==this._end){
				if (this._times > 0){
					this._times--;
					if (this._times==0)
						this._status=2;
					else
					this._status=1;
				}
				else if (this._start !=0)
				this._status=1;
			}
		}
		this.drawFrame();
	}

	__proto.drawFrame=function(){
		this.graphics.clear();
		if (this._frameCount>0 && this._frame < this._frames.length){
			var frame=this._frames[this._frame];
			this.graphics.drawTexture(frame.texture,frame.rect.x,frame.rect.y);
		}
	}

	__proto.checkTimer=function(){
		if (this._playing && this._frameCount>0 && this.stage!=null)
			Laya.timer.frameLoop(1,this,this.update);
		else
		Laya.timer.clear(this,this.update);
	}

	__proto.__addToStage=function(){
		if(this._playing && this._frameCount>0)
			Laya.timer.frameLoop(1,this,this.update);
	}

	__proto.__removeFromStage=function(){
		Laya.timer.clear(this,this.update);
	}

	__getset(0,__proto,'frames',function(){
		return this._frames;
		},function(value){
		this._frames=value;
		if (this._frames !=null)
			this._frameCount=this._frames.length;
		else
		this._frameCount=0;
		if(this._end==-1 || this._end > this._frameCount-1)
			this._end=this._frameCount-1;
		if(this._endAt==-1 || this._endAt > this._frameCount-1)
			this._endAt=this._frameCount-1;
		if(this._frame < 0 || this._frame > this._frameCount-1)
			this._frame=this._frameCount-1;
		this.drawFrame();
		this._frameElapsed=0;
		this._repeatedCount=0;
		this._reversed=false;
		this.checkTimer();
	});

	__getset(0,__proto,'playing',function(){
		return this._playing;
		},function(value){
		if(this._playing!=value){
			this._playing=value;
			this.checkTimer();
		}
	});

	__getset(0,__proto,'frameCount',function(){
		return this._frameCount;
	});

	__getset(0,__proto,'frame',function(){
		return this._frame;
		},function(value){
		if (this._frame !=value){
			if(this._frames!=null && value>=this._frameCount)
				value=this._frameCount-1;
			this._frame=value;
			this._frameElapsed=0;
			this.drawFrame();
		}
	});

	__getset(0,__proto,'boundsRect',function(){
		return this._boundsRect;
		},function(value){
		this._boundsRect=value;
	});

	return MovieClip;
})(Sprite)


	Laya.__init([GList,GearColor,GearAnimation,Transition,UIPackage,RelationItem,GBasicTextField,EaseManager,GearLook,GearSize]);
})(window,document,Laya);

if (typeof define === 'function' && define.amd){
	define('laya.core', ['require', "exports"], function(require, exports) {
        'use strict';
        Object.defineProperty(exports, '__esModule', { value: true });
        for (var i in Laya) {
			var o = Laya[i];
            o && o.__isclass && (exports[i] = o);
        }
    });
}
var WmyJs=(function(){
	function WmyJs(){}
	WmyJs.escape=function(str){
		var newStr=escape(str);
		return newStr;
	}
	WmyJs.unescape=function(str){
		var newStr=unescape(str);
		return newStr;
	}

	return WmyJs;
})()
/*!
 * VERSION: 1.19.0
 * DATE: 2016-07-14
 * UPDATES AND DOCS AT: http://greensock.com
 * 
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2016, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},e=function(a,b,c){var d,e,f=a.cycle;for(d in f)e=f[d],a[d]="function"==typeof e?e(c,b[c]):e[c%e.length];delete a.cycle},f=function(a,b,d){c.call(this,a,b,d),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=f.prototype.render},g=1e-10,h=c._internals,i=h.isSelector,j=h.isArray,k=f.prototype=c.to({},.1,{}),l=[];f.version="1.19.0",k.constructor=f,k.kill()._gc=!1,f.killTweensOf=f.killDelayedCallsTo=c.killTweensOf,f.getTweensOf=c.getTweensOf,f.lagSmoothing=c.lagSmoothing,f.ticker=c.ticker,f.render=c.render,k.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),c.prototype.invalidate.call(this)},k.updateTo=function(a,b){var d,e=this.ratio,f=this.vars.immediateRender||a.immediateRender;b&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(d in a)this.vars[d]=a[d];if(this._initted||f)if(b)this._initted=!1,f&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&c._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var g=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(g,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||f)for(var h,i=1/(1-e),j=this._firstPT;j;)h=j.s+j.c,j.c*=i,j.s=h-j.c,j=j._next;return this},k.render=function(a,b,c){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var d,e,f,i,j,k,l,m,n=this._dirty?this.totalDuration():this._totalDuration,o=this._time,p=this._totalTime,q=this._cycle,r=this._duration,s=this._rawPrevTime;if(a>=n-1e-7?(this._totalTime=n,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=r,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(d=!0,e="onComplete",c=c||this._timeline.autoRemoveChildren),0===r&&(this._initted||!this.vars.lazy||c)&&(this._startTime===this._timeline._duration&&(a=0),(0>s||0>=a&&a>=-1e-7||s===g&&"isPause"!==this.data)&&s!==a&&(c=!0,s>g&&(e="onReverseComplete")),this._rawPrevTime=m=!b||a||s===a?a:g)):1e-7>a?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==p||0===r&&s>0)&&(e="onReverseComplete",d=this._reversed),0>a&&(this._active=!1,0===r&&(this._initted||!this.vars.lazy||c)&&(s>=0&&(c=!0),this._rawPrevTime=m=!b||a||s===a?a:g)),this._initted||(c=!0)):(this._totalTime=this._time=a,0!==this._repeat&&(i=r+this._repeatDelay,this._cycle=this._totalTime/i>>0,0!==this._cycle&&this._cycle===this._totalTime/i&&a>=p&&this._cycle--,this._time=this._totalTime-this._cycle*i,this._yoyo&&0!==(1&this._cycle)&&(this._time=r-this._time),this._time>r?this._time=r:this._time<0&&(this._time=0)),this._easeType?(j=this._time/r,k=this._easeType,l=this._easePower,(1===k||3===k&&j>=.5)&&(j=1-j),3===k&&(j*=2),1===l?j*=j:2===l?j*=j*j:3===l?j*=j*j*j:4===l&&(j*=j*j*j*j),1===k?this.ratio=1-j:2===k?this.ratio=j:this._time/r<.5?this.ratio=j/2:this.ratio=1-j/2):this.ratio=this._ease.getRatio(this._time/r)),o===this._time&&!c&&q===this._cycle)return void(p!==this._totalTime&&this._onUpdate&&(b||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!c&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=o,this._totalTime=p,this._rawPrevTime=s,this._cycle=q,h.lazyTweens.push(this),void(this._lazy=[a,b]);this._time&&!d?this.ratio=this._ease.getRatio(this._time/r):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&a>=0&&(this._active=!0),0===p&&(2===this._initted&&a>0&&this._init(),this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===r)&&(b||this._callback("onStart"))),f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,c),b||(this._totalTime!==p||e)&&this._callback("onUpdate")),this._cycle!==q&&(b||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),e&&(!this._gc||c)&&(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this._callback(e),0===r&&this._rawPrevTime===g&&m!==g&&(this._rawPrevTime=0))},f.to=function(a,b,c){return new f(a,b,c)},f.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new f(a,b,c)},f.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new f(a,b,d)},f.staggerTo=f.allTo=function(a,b,g,h,k,m,n){h=h||0;var o,p,q,r,s=0,t=[],u=function(){g.onComplete&&g.onComplete.apply(g.onCompleteScope||this,arguments),k.apply(n||g.callbackScope||this,m||l)},v=g.cycle,w=g.startAt&&g.startAt.cycle;for(j(a)||("string"==typeof a&&(a=c.selector(a)||a),i(a)&&(a=d(a))),a=a||[],0>h&&(a=d(a),a.reverse(),h*=-1),o=a.length-1,q=0;o>=q;q++){p={};for(r in g)p[r]=g[r];if(v&&(e(p,a,q),null!=p.duration&&(b=p.duration,delete p.duration)),w){w=p.startAt={};for(r in g.startAt)w[r]=g.startAt[r];e(p.startAt,a,q)}p.delay=s+(p.delay||0),q===o&&k&&(p.onComplete=u),t[q]=new f(a[q],b,p),s+=h}return t},f.staggerFrom=f.allFrom=function(a,b,c,d,e,g,h){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,f.staggerTo(a,b,c,d,e,g,h)},f.staggerFromTo=f.allFromTo=function(a,b,c,d,e,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,f.staggerTo(a,b,d,e,g,h,i)},f.delayedCall=function(a,b,c,d,e){return new f(b,0,{delay:a,onComplete:b,onCompleteParams:c,callbackScope:d,onReverseComplete:b,onReverseCompleteParams:c,immediateRender:!1,useFrames:e,overwrite:0})},f.set=function(a,b){return new f(a,0,b)},f.isTweening=function(a){return c.getTweensOf(a,!0).length>0};var m=function(a,b){for(var d=[],e=0,f=a._first;f;)f instanceof c?d[e++]=f:(b&&(d[e++]=f),d=d.concat(m(f,b)),e=d.length),f=f._next;return d},n=f.getAllTweens=function(b){return m(a._rootTimeline,b).concat(m(a._rootFramesTimeline,b))};f.killAll=function(a,c,d,e){null==c&&(c=!0),null==d&&(d=!0);var f,g,h,i=n(0!=e),j=i.length,k=c&&d&&e;for(h=0;j>h;h++)g=i[h],(k||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&(a?g.totalTime(g._reversed?0:g.totalDuration()):g._enabled(!1,!1))},f.killChildTweensOf=function(a,b){if(null!=a){var e,g,k,l,m,n=h.tweenLookup;if("string"==typeof a&&(a=c.selector(a)||a),i(a)&&(a=d(a)),j(a))for(l=a.length;--l>-1;)f.killChildTweensOf(a[l],b);else{e=[];for(k in n)for(g=n[k].target.parentNode;g;)g===a&&(e=e.concat(n[k].tweens)),g=g.parentNode;for(m=e.length,l=0;m>l;l++)b&&e[l].totalTime(e[l].totalDuration()),e[l]._enabled(!1,!1)}}};var o=function(a,c,d,e){c=c!==!1,d=d!==!1,e=e!==!1;for(var f,g,h=n(e),i=c&&d&&e,j=h.length;--j>-1;)g=h[j],(i||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&g.paused(a)};return f.pauseAll=function(a,b,c){o(!0,a,b,c)},f.resumeAll=function(a,b,c){o(!1,a,b,c)},f.globalTimeScale=function(b){var d=a._rootTimeline,e=c.ticker.time;return arguments.length?(b=b||g,d._startTime=e-(e-d._startTime)*d._timeScale/b,d=a._rootFramesTimeline,e=c.ticker.frame,d._startTime=e-(e-d._startTime)*d._timeScale/b,d._timeScale=a._rootTimeline._timeScale=b,b):d._timeScale},k.progress=function(a,b){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),b):this._time/this.duration()},k.totalProgress=function(a,b){return arguments.length?this.totalTime(this.totalDuration()*a,b):this._totalTime/this.totalDuration()},k.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},k.duration=function(b){return arguments.length?a.prototype.duration.call(this,b):this._duration},k.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},k.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},k.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},k.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},f},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=function(a){b.call(this,a),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var c,d,e=this.vars;for(d in e)c=e[d],i(c)&&-1!==c.join("").indexOf("{self}")&&(e[d]=this._swapSelfInParams(c));i(e.tweens)&&this.add(e.tweens,0,e.align,e.stagger)},e=1e-10,f=c._internals,g=d._internals={},h=f.isSelector,i=f.isArray,j=f.lazyTweens,k=f.lazyRender,l=_gsScope._gsDefine.globals,m=function(a){var b,c={};for(b in a)c[b]=a[b];return c},n=function(a,b,c){var d,e,f=a.cycle;for(d in f)e=f[d],a[d]="function"==typeof e?e.call(b[c],c):e[c%e.length];delete a.cycle},o=g.pauseCallback=function(){},p=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},q=d.prototype=new b;return d.version="1.19.0",q.constructor=d,q.kill()._gc=q._forcingPlayhead=q._hasPause=!1,q.to=function(a,b,d,e){var f=d.repeat&&l.TweenMax||c;return b?this.add(new f(a,b,d),e):this.set(a,d,e)},q.from=function(a,b,d,e){return this.add((d.repeat&&l.TweenMax||c).from(a,b,d),e)},q.fromTo=function(a,b,d,e,f){var g=e.repeat&&l.TweenMax||c;return b?this.add(g.fromTo(a,b,d,e),f):this.set(a,e,f)},q.staggerTo=function(a,b,e,f,g,i,j,k){var l,o,q=new d({onComplete:i,onCompleteParams:j,callbackScope:k,smoothChildTiming:this.smoothChildTiming}),r=e.cycle;for("string"==typeof a&&(a=c.selector(a)||a),a=a||[],h(a)&&(a=p(a)),f=f||0,0>f&&(a=p(a),a.reverse(),f*=-1),o=0;o<a.length;o++)l=m(e),l.startAt&&(l.startAt=m(l.startAt),l.startAt.cycle&&n(l.startAt,a,o)),r&&(n(l,a,o),null!=l.duration&&(b=l.duration,delete l.duration)),q.to(a[o],b,l,o*f);return this.add(q,g)},q.staggerFrom=function(a,b,c,d,e,f,g,h){return c.immediateRender=0!=c.immediateRender,c.runBackwards=!0,this.staggerTo(a,b,c,d,e,f,g,h)},q.staggerFromTo=function(a,b,c,d,e,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,this.staggerTo(a,b,d,e,f,g,h,i)},q.call=function(a,b,d,e){return this.add(c.delayedCall(0,a,b,d),e)},q.set=function(a,b,d){return d=this._parseTimeOrLabel(d,0,!0),null==b.immediateRender&&(b.immediateRender=d===this._time&&!this._paused),this.add(new c(a,0,b),d)},d.exportRoot=function(a,b){a=a||{},null==a.smoothChildTiming&&(a.smoothChildTiming=!0);var e,f,g=new d(a),h=g._timeline;for(null==b&&(b=!0),h._remove(g,!0),g._startTime=0,g._rawPrevTime=g._time=g._totalTime=h._time,e=h._first;e;)f=e._next,b&&e instanceof c&&e.target===e.vars.onComplete||g.add(e,e._startTime-e._delay),e=f;return h.add(g,0),g},q.add=function(e,f,g,h){var j,k,l,m,n,o;if("number"!=typeof f&&(f=this._parseTimeOrLabel(f,0,!0,e)),!(e instanceof a)){if(e instanceof Array||e&&e.push&&i(e)){for(g=g||"normal",h=h||0,j=f,k=e.length,l=0;k>l;l++)i(m=e[l])&&(m=new d({tweens:m})),this.add(m,j),"string"!=typeof m&&"function"!=typeof m&&("sequence"===g?j=m._startTime+m.totalDuration()/m._timeScale:"start"===g&&(m._startTime-=m.delay())),j+=h;return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,f);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=c.delayedCall(0,e)}if(b.prototype.add.call(this,e,f),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(n=this,o=n.rawTime()>e._startTime;n._timeline;)o&&n._timeline.smoothChildTiming?n.totalTime(n._totalTime,!0):n._gc&&n._enabled(!0,!1),n=n._timeline;return this},q.remove=function(b){if(b instanceof a){this._remove(b,!1);var c=b._timeline=b.vars.useFrames?a._rootFramesTimeline:a._rootTimeline;return b._startTime=(b._paused?b._pauseTime:c._time)-(b._reversed?b.totalDuration()-b._totalTime:b._totalTime)/b._timeScale,this}if(b instanceof Array||b&&b.push&&i(b)){for(var d=b.length;--d>-1;)this.remove(b[d]);return this}return"string"==typeof b?this.removeLabel(b):this.kill(null,b)},q._remove=function(a,c){b.prototype._remove.call(this,a,c);var d=this._last;return d?this._time>d._startTime+d._totalDuration/d._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},q.append=function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},q.insert=q.insertMultiple=function(a,b,c,d){return this.add(a,b||0,c,d)},q.appendMultiple=function(a,b,c,d){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),c,d)},q.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),this},q.addPause=function(a,b,d,e){var f=c.delayedCall(0,o,d,e||this);return f.vars.onComplete=f.vars.onReverseComplete=b,f.data="isPause",this._hasPause=!0,this.add(f,a)},q.removeLabel=function(a){return delete this._labels[a],this},q.getLabelTime=function(a){return null!=this._labels[a]?this._labels[a]:-1},q._parseTimeOrLabel=function(b,c,d,e){var f;if(e instanceof a&&e.timeline===this)this.remove(e);else if(e&&(e instanceof Array||e.push&&i(e)))for(f=e.length;--f>-1;)e[f]instanceof a&&e[f].timeline===this&&this.remove(e[f]);if("string"==typeof c)return this._parseTimeOrLabel(c,d&&"number"==typeof b&&null==this._labels[c]?b-this.duration():0,d);if(c=c||0,"string"!=typeof b||!isNaN(b)&&null==this._labels[b])null==b&&(b=this.duration());else{if(f=b.indexOf("="),-1===f)return null==this._labels[b]?d?this._labels[b]=this.duration()+c:c:this._labels[b]+c;c=parseInt(b.charAt(f-1)+"1",10)*Number(b.substr(f+1)),b=f>1?this._parseTimeOrLabel(b.substr(0,f-1),0,d):this.duration()}return Number(b)+c},q.seek=function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),b!==!1)},q.stop=function(){return this.paused(!0)},q.gotoAndPlay=function(a,b){return this.play(a,b)},q.gotoAndStop=function(a,b){return this.pause(a,b)},q.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,f,g,h,i,l,m,n=this._dirty?this.totalDuration():this._totalDuration,o=this._time,p=this._startTime,q=this._timeScale,r=this._paused;if(a>=n-1e-7)this._totalTime=this._time=n,this._reversed||this._hasPausedChild()||(f=!0,h="onComplete",i=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=a&&a>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===e)&&this._rawPrevTime!==a&&this._first&&(i=!0,this._rawPrevTime>e&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:e,a=n+1e-4;else if(1e-7>a)if(this._totalTime=this._time=0,(0!==o||0===this._duration&&this._rawPrevTime!==e&&(this._rawPrevTime>0||0>a&&this._rawPrevTime>=0))&&(h="onReverseComplete",f=this._reversed),0>a)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(i=f=!0,h="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(i=!0),this._rawPrevTime=a;else{if(this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:e,0===a&&f)for(d=this._first;d&&0===d._startTime;)d._duration||(f=!1),d=d._next;a=0,this._initted||(i=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!b){if(a>=o)for(d=this._first;d&&d._startTime<=a&&!l;)d._duration||"isPause"!==d.data||d.ratio||0===d._startTime&&0===this._rawPrevTime||(l=d),d=d._next;else for(d=this._last;d&&d._startTime>=a&&!l;)d._duration||"isPause"===d.data&&d._rawPrevTime>0&&(l=d),d=d._prev;l&&(this._time=a=l._startTime,this._totalTime=a+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=a}if(this._time!==o&&this._first||c||i||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==o&&a>0&&(this._active=!0),0===o&&this.vars.onStart&&(0===this._time&&this._duration||b||this._callback("onStart")),m=this._time,m>=o)for(d=this._first;d&&(g=d._next,m===this._time&&(!this._paused||r));)(d._active||d._startTime<=m&&!d._paused&&!d._gc)&&(l===d&&this.pause(),d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;else for(d=this._last;d&&(g=d._prev,m===this._time&&(!this._paused||r));){if(d._active||d._startTime<=o&&!d._paused&&!d._gc){if(l===d){for(l=d._prev;l&&l.endTime()>this._time;)l.render(l._reversed?l.totalDuration()-(a-l._startTime)*l._timeScale:(a-l._startTime)*l._timeScale,b,c),l=l._prev;l=null,this.pause()}d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)}d=g}this._onUpdate&&(b||(j.length&&k(),this._callback("onUpdate"))),h&&(this._gc||(p===this._startTime||q!==this._timeScale)&&(0===this._time||n>=this.totalDuration())&&(f&&(j.length&&k(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[h]&&this._callback(h)))}},q._hasPausedChild=function(){for(var a=this._first;a;){if(a._paused||a instanceof d&&a._hasPausedChild())return!0;a=a._next}return!1},q.getChildren=function(a,b,d,e){e=e||-9999999999;for(var f=[],g=this._first,h=0;g;)g._startTime<e||(g instanceof c?b!==!1&&(f[h++]=g):(d!==!1&&(f[h++]=g),a!==!1&&(f=f.concat(g.getChildren(!0,b,d)),h=f.length))),g=g._next;return f},q.getTweensOf=function(a,b){var d,e,f=this._gc,g=[],h=0;for(f&&this._enabled(!0,!0),d=c.getTweensOf(a),e=d.length;--e>-1;)(d[e].timeline===this||b&&this._contains(d[e]))&&(g[h++]=d[e]);return f&&this._enabled(!1,!0),g},q.recent=function(){return this._recent},q._contains=function(a){for(var b=a.timeline;b;){if(b===this)return!0;b=b.timeline}return!1},q.shiftChildren=function(a,b,c){c=c||0;for(var d,e=this._first,f=this._labels;e;)e._startTime>=c&&(e._startTime+=a),e=e._next;if(b)for(d in f)f[d]>=c&&(f[d]+=a);return this._uncache(!0)},q._kill=function(a,b){if(!a&&!b)return this._enabled(!1,!1);for(var c=b?this.getTweensOf(b):this.getChildren(!0,!0,!1),d=c.length,e=!1;--d>-1;)c[d]._kill(a,b)&&(e=!0);return e},q.clear=function(a){var b=this.getChildren(!1,!0,!0),c=b.length;for(this._time=this._totalTime=0;--c>-1;)b[c]._enabled(!1,!1);return a!==!1&&(this._labels={}),this._uncache(!0)},q.invalidate=function(){for(var b=this._first;b;)b.invalidate(),b=b._next;return a.prototype.invalidate.call(this)},q._enabled=function(a,c){if(a===this._gc)for(var d=this._first;d;)d._enabled(a,!0),d=d._next;return b.prototype._enabled.call(this,a,c)},q.totalTime=function(b,c,d){this._forcingPlayhead=!0;var e=a.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,e},q.duration=function(a){return arguments.length?(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},q.totalDuration=function(a){if(!arguments.length){if(this._dirty){for(var b,c,d=0,e=this._last,f=999999999999;e;)b=e._prev,e._dirty&&e.totalDuration(),e._startTime>f&&this._sortChildren&&!e._paused?this.add(e,e._startTime-e._delay):f=e._startTime,e._startTime<0&&!e._paused&&(d-=e._startTime,this._timeline.smoothChildTiming&&(this._startTime+=e._startTime/this._timeScale),this.shiftChildren(-e._startTime,!1,-9999999999),f=0),c=e._startTime+e._totalDuration/e._timeScale,c>d&&(d=c),e=b;this._duration=this._totalDuration=d,this._dirty=!1}return this._totalDuration}return a&&this.totalDuration()?this.timeScale(this._totalDuration/a):this},q.paused=function(b){if(!b)for(var c=this._first,d=this._time;c;)c._startTime===d&&"isPause"===c.data&&(c._rawPrevTime=0),c=c._next;return a.prototype.paused.apply(this,arguments)},q.usesFrames=function(){for(var b=this._timeline;b._timeline;)b=b._timeline;return b===a._rootFramesTimeline},q.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},d},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(a,b,c){var d=function(b){a.call(this,b),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},e=1e-10,f=b._internals,g=f.lazyTweens,h=f.lazyRender,i=_gsScope._gsDefine.globals,j=new c(null,null,1,0),k=d.prototype=new a;return k.constructor=d,k.kill()._gc=!1,d.version="1.19.0",k.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),a.prototype.invalidate.call(this)},k.addCallback=function(a,c,d,e){return this.add(b.delayedCall(0,a,d,e),c)},k.removeCallback=function(a,b){if(a)if(null==b)this._kill(null,a);else for(var c=this.getTweensOf(a,!1),d=c.length,e=this._parseTimeOrLabel(b);--d>-1;)c[d]._startTime===e&&c[d]._enabled(!1,!1);return this},k.removePause=function(b){return this.removeCallback(a._internals.pauseCallback,b)},k.tweenTo=function(a,c){c=c||{};var d,e,f,g={ease:j,useFrames:this.usesFrames(),immediateRender:!1},h=c.repeat&&i.TweenMax||b;for(e in c)g[e]=c[e];return g.time=this._parseTimeOrLabel(a),d=Math.abs(Number(g.time)-this._time)/this._timeScale||.001,f=new h(this,d,g),g.onStart=function(){f.target.paused(!0),f.vars.time!==f.target.time()&&d===f.duration()&&f.duration(Math.abs(f.vars.time-f.target.time())/f.target._timeScale),c.onStart&&f._callback("onStart")},f},k.tweenFromTo=function(a,b,c){c=c||{},a=this._parseTimeOrLabel(a),c.startAt={onComplete:this.seek,onCompleteParams:[a],callbackScope:this},c.immediateRender=c.immediateRender!==!1;var d=this.tweenTo(b,c);return d.duration(Math.abs(d.vars.time-a)/this._timeScale||.001)},k.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,f,i,j,k,l,m,n,o=this._dirty?this.totalDuration():this._totalDuration,p=this._duration,q=this._time,r=this._totalTime,s=this._startTime,t=this._timeScale,u=this._rawPrevTime,v=this._paused,w=this._cycle;if(a>=o-1e-7)this._locked||(this._totalTime=o,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(f=!0,j="onComplete",k=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=a&&a>=-1e-7||0>u||u===e)&&u!==a&&this._first&&(k=!0,u>e&&(j="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:e,this._yoyo&&0!==(1&this._cycle)?this._time=a=0:(this._time=p,a=p+1e-4);else if(1e-7>a)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==q||0===p&&u!==e&&(u>0||0>a&&u>=0)&&!this._locked)&&(j="onReverseComplete",f=this._reversed),0>a)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(k=f=!0,j="onReverseComplete"):u>=0&&this._first&&(k=!0),this._rawPrevTime=a;else{if(this._rawPrevTime=p||!b||a||this._rawPrevTime===a?a:e,0===a&&f)for(d=this._first;d&&0===d._startTime;)d._duration||(f=!1),d=d._next;a=0,this._initted||(k=!0)}else if(0===p&&0>u&&(k=!0),this._time=this._rawPrevTime=a,this._locked||(this._totalTime=a,0!==this._repeat&&(l=p+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&a>=r&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!==(1&this._cycle)&&(this._time=p-this._time),this._time>p?(this._time=p,a=p+1e-4):this._time<0?this._time=a=0:a=this._time)),this._hasPause&&!this._forcingPlayhead&&!b){if(a=this._time,a>=q)for(d=this._first;d&&d._startTime<=a&&!m;)d._duration||"isPause"!==d.data||d.ratio||0===d._startTime&&0===this._rawPrevTime||(m=d),d=d._next;else for(d=this._last;d&&d._startTime>=a&&!m;)d._duration||"isPause"===d.data&&d._rawPrevTime>0&&(m=d),d=d._prev;m&&(this._time=a=m._startTime,this._totalTime=a+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==w&&!this._locked){var x=this._yoyo&&0!==(1&w),y=x===(this._yoyo&&0!==(1&this._cycle)),z=this._totalTime,A=this._cycle,B=this._rawPrevTime,C=this._time;if(this._totalTime=w*p,this._cycle<w?x=!x:this._totalTime+=p,this._time=q,this._rawPrevTime=0===p?u-1e-4:u,this._cycle=w,this._locked=!0,q=x?0:p,this.render(q,b,0===p),b||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),q!==this._time)return;if(y&&(q=x?p+1e-4:-1e-4,this.render(q,!0,!1)),this._locked=!1,this._paused&&!v)return;this._time=C,this._totalTime=z,this._cycle=A,this._rawPrevTime=B}if(!(this._time!==q&&this._first||c||k||m))return void(r!==this._totalTime&&this._onUpdate&&(b||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==r&&a>0&&(this._active=!0),0===r&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||b||this._callback("onStart")),n=this._time,n>=q)for(d=this._first;d&&(i=d._next,n===this._time&&(!this._paused||v));)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(m===d&&this.pause(),d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=i;else for(d=this._last;d&&(i=d._prev,n===this._time&&(!this._paused||v));){if(d._active||d._startTime<=q&&!d._paused&&!d._gc){if(m===d){for(m=d._prev;m&&m.endTime()>this._time;)m.render(m._reversed?m.totalDuration()-(a-m._startTime)*m._timeScale:(a-m._startTime)*m._timeScale,b,c),m=m._prev;m=null,this.pause()}d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)}d=i}this._onUpdate&&(b||(g.length&&h(),this._callback("onUpdate"))),j&&(this._locked||this._gc||(s===this._startTime||t!==this._timeScale)&&(0===this._time||o>=this.totalDuration())&&(f&&(g.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[j]&&this._callback(j)))},k.getActive=function(a,b,c){null==a&&(a=!0),null==b&&(b=!0),null==c&&(c=!1);var d,e,f=[],g=this.getChildren(a,b,c),h=0,i=g.length;for(d=0;i>d;d++)e=g[d],e.isActive()&&(f[h++]=e);return f},k.getLabelAfter=function(a){a||0!==a&&(a=this._time);var b,c=this.getLabelsArray(),d=c.length;for(b=0;d>b;b++)if(c[b].time>a)return c[b].name;return null},k.getLabelBefore=function(a){null==a&&(a=this._time);for(var b=this.getLabelsArray(),c=b.length;--c>-1;)if(b[c].time<a)return b[c].name;return null},k.getLabelsArray=function(){var a,b=[],c=0;for(a in this._labels)b[c++]={time:this._labels[a],name:a};return b.sort(function(a,b){return a.time-b.time}),b},k.progress=function(a,b){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),b):this._time/this.duration()},k.totalProgress=function(a,b){return arguments.length?this.totalTime(this.totalDuration()*a,b):this._totalTime/this.totalDuration()},k.totalDuration=function(b){return arguments.length?-1!==this._repeat&&b?this.timeScale(this.totalDuration()/b):this:(this._dirty&&(a.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},k.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},k.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},k.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},k.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},k.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.getLabelBefore(this._time+1e-8)},d},!0),function(){var a=180/Math.PI,b=[],c=[],d=[],e={},f=_gsScope._gsDefine.globals,g=function(a,b,c,d){c===d&&(c=d-(d-b)/1e6),a===b&&(b=a+(c-a)/1e6),this.a=a,this.b=b,this.c=c,this.d=d,this.da=d-a,this.ca=c-a,this.ba=b-a},h=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",i=function(a,b,c,d){var e={a:a},f={},g={},h={c:d},i=(a+b)/2,j=(b+c)/2,k=(c+d)/2,l=(i+j)/2,m=(j+k)/2,n=(m-l)/8;return e.b=i+(a-i)/4,f.b=l+n,e.c=f.a=(e.b+f.b)/2,f.c=g.a=(l+m)/2,g.b=m-n,h.b=k+(d-k)/4,g.c=h.a=(g.b+h.b)/2,[e,f,g,h]},j=function(a,e,f,g,h){var j,k,l,m,n,o,p,q,r,s,t,u,v,w=a.length-1,x=0,y=a[0].a;for(j=0;w>j;j++)n=a[x],k=n.a,l=n.d,m=a[x+1].d,h?(t=b[j],u=c[j],v=(u+t)*e*.25/(g?.5:d[j]||.5),o=l-(l-k)*(g?.5*e:0!==t?v/t:0),p=l+(m-l)*(g?.5*e:0!==u?v/u:0),q=l-(o+((p-o)*(3*t/(t+u)+.5)/4||0))):(o=l-(l-k)*e*.5,p=l+(m-l)*e*.5,q=l-(o+p)/2),o+=q,p+=q,n.c=r=o,0!==j?n.b=y:n.b=y=n.a+.6*(n.c-n.a),n.da=l-k,n.ca=r-k,n.ba=y-k,f?(s=i(k,y,r,l),a.splice(x,1,s[0],s[1],s[2],s[3]),x+=4):x++,y=p;n=a[x],n.b=y,n.c=y+.4*(n.d-y),n.da=n.d-n.a,n.ca=n.c-n.a,n.ba=y-n.a,f&&(s=i(n.a,y,n.c,n.d),a.splice(x,1,s[0],s[1],s[2],s[3]))},k=function(a,d,e,f){var h,i,j,k,l,m,n=[];if(f)for(a=[f].concat(a),i=a.length;--i>-1;)"string"==typeof(m=a[i][d])&&"="===m.charAt(1)&&(a[i][d]=f[d]+Number(m.charAt(0)+m.substr(2)));if(h=a.length-2,0>h)return n[0]=new g(a[0][d],0,0,a[-1>h?0:1][d]),n;for(i=0;h>i;i++)j=a[i][d],k=a[i+1][d],n[i]=new g(j,0,0,k),e&&(l=a[i+2][d],b[i]=(b[i]||0)+(k-j)*(k-j),c[i]=(c[i]||0)+(l-k)*(l-k));return n[i]=new g(a[i][d],0,0,a[i+1][d]),n},l=function(a,f,g,i,l,m){var n,o,p,q,r,s,t,u,v={},w=[],x=m||a[0];l="string"==typeof l?","+l+",":h,null==f&&(f=1);for(o in a[0])w.push(o);if(a.length>1){for(u=a[a.length-1],t=!0,n=w.length;--n>-1;)if(o=w[n],Math.abs(x[o]-u[o])>.05){t=!1;break}t&&(a=a.concat(),m&&a.unshift(m),a.push(a[1]),m=a[a.length-3])}for(b.length=c.length=d.length=0,n=w.length;--n>-1;)o=w[n],e[o]=-1!==l.indexOf(","+o+","),v[o]=k(a,o,e[o],m);for(n=b.length;--n>-1;)b[n]=Math.sqrt(b[n]),c[n]=Math.sqrt(c[n]);if(!i){for(n=w.length;--n>-1;)if(e[o])for(p=v[w[n]],s=p.length-1,q=0;s>q;q++)r=p[q+1].da/c[q]+p[q].da/b[q]||0,d[q]=(d[q]||0)+r*r;for(n=d.length;--n>-1;)d[n]=Math.sqrt(d[n])}for(n=w.length,q=g?4:1;--n>-1;)o=w[n],p=v[o],j(p,f,g,i,e[o]),t&&(p.splice(0,q),p.splice(p.length-q,q));return v},m=function(a,b,c){b=b||"soft";var d,e,f,h,i,j,k,l,m,n,o,p={},q="cubic"===b?3:2,r="soft"===b,s=[];if(r&&c&&(a=[c].concat(a)),null==a||a.length<q+1)throw"invalid Bezier data";for(m in a[0])s.push(m);for(j=s.length;--j>-1;){for(m=s[j],p[m]=i=[],n=0,l=a.length,k=0;l>k;k++)d=null==c?a[k][m]:"string"==typeof(o=a[k][m])&&"="===o.charAt(1)?c[m]+Number(o.charAt(0)+o.substr(2)):Number(o),r&&k>1&&l-1>k&&(i[n++]=(d+i[n-2])/2),i[n++]=d;for(l=n-q+1,n=0,k=0;l>k;k+=q)d=i[k],e=i[k+1],f=i[k+2],h=2===q?0:i[k+3],i[n++]=o=3===q?new g(d,e,f,h):new g(d,(2*e+d)/3,(2*e+f)/3,f);i.length=n}return p},n=function(a,b,c){for(var d,e,f,g,h,i,j,k,l,m,n,o=1/c,p=a.length;--p>-1;)for(m=a[p],f=m.a,g=m.d-f,h=m.c-f,i=m.b-f,d=e=0,k=1;c>=k;k++)j=o*k,l=1-j,d=e-(e=(j*j*g+3*l*(j*h+l*i))*j),n=p*c+k-1,b[n]=(b[n]||0)+d*d},o=function(a,b){b=b>>0||6;var c,d,e,f,g=[],h=[],i=0,j=0,k=b-1,l=[],m=[];for(c in a)n(a[c],g,b);for(e=g.length,d=0;e>d;d++)i+=Math.sqrt(g[d]),f=d%b,m[f]=i,f===k&&(j+=i,f=d/b>>0,l[f]=m,h[f]=j,i=0,m=[]);return{length:j,lengths:h,
segments:l}},p=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.7",API:2,global:!0,init:function(a,b,c){this._target=a,b instanceof Array&&(b={values:b}),this._func={},this._mod={},this._props=[],this._timeRes=null==b.timeResolution?6:parseInt(b.timeResolution,10);var d,e,f,g,h,i=b.values||[],j={},k=i[0],n=b.autoRotate||c.vars.orientToBezier;this._autoRotate=n?n instanceof Array?n:[["x","y","rotation",n===!0?0:Number(n)||0]]:null;for(d in k)this._props.push(d);for(f=this._props.length;--f>-1;)d=this._props[f],this._overwriteProps.push(d),e=this._func[d]="function"==typeof a[d],j[d]=e?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]():parseFloat(a[d]),h||j[d]!==i[0][d]&&(h=j);if(this._beziers="cubic"!==b.type&&"quadratic"!==b.type&&"soft"!==b.type?l(i,isNaN(b.curviness)?1:b.curviness,!1,"thruBasic"===b.type,b.correlate,h):m(i,b.type,j),this._segCount=this._beziers[d].length,this._timeRes){var p=o(this._beziers,this._timeRes);this._length=p.length,this._lengths=p.lengths,this._segments=p.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(n=this._autoRotate)for(this._initialRotations=[],n[0]instanceof Array||(this._autoRotate=n=[n]),f=n.length;--f>-1;){for(g=0;3>g;g++)d=n[f][g],this._func[d]="function"==typeof a[d]?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]:!1;d=n[f][2],this._initialRotations[f]=(this._func[d]?this._func[d].call(this._target):this._target[d])||0,this._overwriteProps.push(d)}return this._startRatio=c.vars.runBackwards?1:0,!0},set:function(b){var c,d,e,f,g,h,i,j,k,l,m=this._segCount,n=this._func,o=this._target,p=b!==this._startRatio;if(this._timeRes){if(k=this._lengths,l=this._curSeg,b*=this._length,e=this._li,b>this._l2&&m-1>e){for(j=m-1;j>e&&(this._l2=k[++e])<=b;);this._l1=k[e-1],this._li=e,this._curSeg=l=this._segments[e],this._s2=l[this._s1=this._si=0]}else if(b<this._l1&&e>0){for(;e>0&&(this._l1=k[--e])>=b;);0===e&&b<this._l1?this._l1=0:e++,this._l2=k[e],this._li=e,this._curSeg=l=this._segments[e],this._s1=l[(this._si=l.length-1)-1]||0,this._s2=l[this._si]}if(c=e,b-=this._l1,e=this._si,b>this._s2&&e<l.length-1){for(j=l.length-1;j>e&&(this._s2=l[++e])<=b;);this._s1=l[e-1],this._si=e}else if(b<this._s1&&e>0){for(;e>0&&(this._s1=l[--e])>=b;);0===e&&b<this._s1?this._s1=0:e++,this._s2=l[e],this._si=e}h=(e+(b-this._s1)/(this._s2-this._s1))*this._prec||0}else c=0>b?0:b>=1?m-1:m*b>>0,h=(b-c*(1/m))*m;for(d=1-h,e=this._props.length;--e>-1;)f=this._props[e],g=this._beziers[f][c],i=(h*h*g.da+3*d*(h*g.ca+d*g.ba))*h+g.a,this._mod[f]&&(i=this._mod[f](i,o)),n[f]?o[f](i):o[f]=i;if(this._autoRotate){var q,r,s,t,u,v,w,x=this._autoRotate;for(e=x.length;--e>-1;)f=x[e][2],v=x[e][3]||0,w=x[e][4]===!0?1:a,g=this._beziers[x[e][0]],q=this._beziers[x[e][1]],g&&q&&(g=g[c],q=q[c],r=g.a+(g.b-g.a)*h,t=g.b+(g.c-g.b)*h,r+=(t-r)*h,t+=(g.c+(g.d-g.c)*h-t)*h,s=q.a+(q.b-q.a)*h,u=q.b+(q.c-q.b)*h,s+=(u-s)*h,u+=(q.c+(q.d-q.c)*h-u)*h,i=p?Math.atan2(u-s,t-r)*w+v:this._initialRotations[e],this._mod[f]&&(i=this._mod[f](i,o)),n[f]?o[f](i):o[f]=i)}}}),q=p.prototype;p.bezierThrough=l,p.cubicToQuadratic=i,p._autoCSS=!0,p.quadraticToCubic=function(a,b,c){return new g(a,(2*b+a)/3,(2*b+c)/3,c)},p._cssRegister=function(){var a=f.CSSPlugin;if(a){var b=a._internals,c=b._parseToProxy,d=b._setPluginRatio,e=b.CSSPropTween;b._registerComplexSpecialProp("bezier",{parser:function(a,b,f,g,h,i){b instanceof Array&&(b={values:b}),i=new p;var j,k,l,m=b.values,n=m.length-1,o=[],q={};if(0>n)return h;for(j=0;n>=j;j++)l=c(a,m[j],g,h,i,n!==j),o[j]=l.end;for(k in b)q[k]=b[k];return q.values=o,h=new e(a,"bezier",0,0,l.pt,2),h.data=l,h.plugin=i,h.setRatio=d,0===q.autoRotate&&(q.autoRotate=!0),!q.autoRotate||q.autoRotate instanceof Array||(j=q.autoRotate===!0?0:Number(q.autoRotate),q.autoRotate=null!=l.end.left?[["left","top","rotation",j,!1]]:null!=l.end.x?[["x","y","rotation",j,!1]]:!1),q.autoRotate&&(g._transform||g._enableTransforms(!1),l.autoRotate=g._target._gsTransform,l.proxy.rotation=l.autoRotate.rotation||0,g._overwriteProps.push("rotation")),i._onInitTween(l.proxy,q,g._tween),h}})}},q._mod=function(a){for(var b,c=this._overwriteProps,d=c.length;--d>-1;)b=a[c[d]],b&&"function"==typeof b&&(this._mod[c[d]]=b)},q._kill=function(a){var b,c,d=this._props;for(b in this._beziers)if(b in a)for(delete this._beziers[b],delete this._func[b],c=d.length;--c>-1;)d[c]===b&&d.splice(c,1);if(d=this._autoRotate)for(c=d.length;--c>-1;)a[d[c][2]]&&d.splice(c,1);return this._super._kill.call(this,a)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,b){var c,d,e,f,g=function(){a.call(this,"css"),this._overwriteProps.length=0,this.setRatio=g.prototype.setRatio},h=_gsScope._gsDefine.globals,i={},j=g.prototype=new a("css");j.constructor=g,g.version="1.19.0",g.API=2,g.defaultTransformPerspective=0,g.defaultSkewType="compensated",g.defaultSmoothOrigin=!0,j="px",g.suffixMap={top:j,right:j,bottom:j,left:j,width:j,height:j,fontSize:j,padding:j,margin:j,perspective:j,lineHeight:""};var k,l,m,n,o,p,q,r,s=/(?:\-|\.|\b)(\d|\.|e\-)+/g,t=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,u=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,v=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,x=/opacity *= *([^)]*)/i,y=/opacity:([^;]*)/i,z=/alpha\(opacity *=.+?\)/i,A=/^(rgb|hsl)/,B=/([A-Z])/g,C=/-([a-z])/gi,D=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,E=function(a,b){return b.toUpperCase()},F=/(?:Left|Right|Width)/i,G=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,H=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,I=/,(?=[^\)]*(?:\(|$))/gi,J=/[\s,\(]/i,K=Math.PI/180,L=180/Math.PI,M={},N=document,O=function(a){return N.createElementNS?N.createElementNS("http://www.w3.org/1999/xhtml",a):N.createElement(a)},P=O("div"),Q=O("img"),R=g._internals={_specialProps:i},S=navigator.userAgent,T=function(){var a=S.indexOf("Android"),b=O("a");return m=-1!==S.indexOf("Safari")&&-1===S.indexOf("Chrome")&&(-1===a||Number(S.substr(a+8,1))>3),o=m&&Number(S.substr(S.indexOf("Version/")+8,1))<6,n=-1!==S.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(S)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(S))&&(p=parseFloat(RegExp.$1)),b?(b.style.cssText="top:1px;opacity:.55;",/^0.55/.test(b.style.opacity)):!1}(),U=function(a){return x.test("string"==typeof a?a:(a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100:1},V=function(a){window.console&&console.log(a)},W="",X="",Y=function(a,b){b=b||P;var c,d,e=b.style;if(void 0!==e[a])return a;for(a=a.charAt(0).toUpperCase()+a.substr(1),c=["O","Moz","ms","Ms","Webkit"],d=5;--d>-1&&void 0===e[c[d]+a];);return d>=0?(X=3===d?"ms":c[d],W="-"+X.toLowerCase()+"-",X+a):null},Z=N.defaultView?N.defaultView.getComputedStyle:function(){},$=g.getStyle=function(a,b,c,d,e){var f;return T||"opacity"!==b?(!d&&a.style[b]?f=a.style[b]:(c=c||Z(a))?f=c[b]||c.getPropertyValue(b)||c.getPropertyValue(b.replace(B,"-$1").toLowerCase()):a.currentStyle&&(f=a.currentStyle[b]),null==e||f&&"none"!==f&&"auto"!==f&&"auto auto"!==f?f:e):U(a)},_=R.convertToPixels=function(a,c,d,e,f){if("px"===e||!e)return d;if("auto"===e||!d)return 0;var h,i,j,k=F.test(c),l=a,m=P.style,n=0>d,o=1===d;if(n&&(d=-d),o&&(d*=100),"%"===e&&-1!==c.indexOf("border"))h=d/100*(k?a.clientWidth:a.clientHeight);else{if(m.cssText="border:0 solid red;position:"+$(a,"position")+";line-height:0;","%"!==e&&l.appendChild&&"v"!==e.charAt(0)&&"rem"!==e)m[k?"borderLeftWidth":"borderTopWidth"]=d+e;else{if(l=a.parentNode||N.body,i=l._gsCache,j=b.ticker.frame,i&&k&&i.time===j)return i.width*d/100;m[k?"width":"height"]=d+e}l.appendChild(P),h=parseFloat(P[k?"offsetWidth":"offsetHeight"]),l.removeChild(P),k&&"%"===e&&g.cacheWidths!==!1&&(i=l._gsCache=l._gsCache||{},i.time=j,i.width=h/d*100),0!==h||f||(h=_(a,c,d,e,!0))}return o&&(h/=100),n?-h:h},aa=R.calculateOffset=function(a,b,c){if("absolute"!==$(a,"position",c))return 0;var d="left"===b?"Left":"Top",e=$(a,"margin"+d,c);return a["offset"+d]-(_(a,b,parseFloat(e),e.replace(w,""))||0)},ba=function(a,b){var c,d,e,f={};if(b=b||Z(a,null))if(c=b.length)for(;--c>-1;)e=b[c],(-1===e.indexOf("-transform")||Ca===e)&&(f[e.replace(C,E)]=b.getPropertyValue(e));else for(c in b)(-1===c.indexOf("Transform")||Ba===c)&&(f[c]=b[c]);else if(b=a.currentStyle||a.style)for(c in b)"string"==typeof c&&void 0===f[c]&&(f[c.replace(C,E)]=b[c]);return T||(f.opacity=U(a)),d=Pa(a,b,!1),f.rotation=d.rotation,f.skewX=d.skewX,f.scaleX=d.scaleX,f.scaleY=d.scaleY,f.x=d.x,f.y=d.y,Ea&&(f.z=d.z,f.rotationX=d.rotationX,f.rotationY=d.rotationY,f.scaleZ=d.scaleZ),f.filters&&delete f.filters,f},ca=function(a,b,c,d,e){var f,g,h,i={},j=a.style;for(g in c)"cssText"!==g&&"length"!==g&&isNaN(g)&&(b[g]!==(f=c[g])||e&&e[g])&&-1===g.indexOf("Origin")&&("number"==typeof f||"string"==typeof f)&&(i[g]="auto"!==f||"left"!==g&&"top"!==g?""!==f&&"auto"!==f&&"none"!==f||"string"!=typeof b[g]||""===b[g].replace(v,"")?f:0:aa(a,g),void 0!==j[g]&&(h=new ra(j,g,j[g],h)));if(d)for(g in d)"className"!==g&&(i[g]=d[g]);return{difs:i,firstMPT:h}},da={width:["Left","Right"],height:["Top","Bottom"]},ea=["marginLeft","marginRight","marginTop","marginBottom"],fa=function(a,b,c){if("svg"===(a.nodeName+"").toLowerCase())return(c||Z(a))[b]||0;if(a.getBBox&&Ma(a))return a.getBBox()[b]||0;var d=parseFloat("width"===b?a.offsetWidth:a.offsetHeight),e=da[b],f=e.length;for(c=c||Z(a,null);--f>-1;)d-=parseFloat($(a,"padding"+e[f],c,!0))||0,d-=parseFloat($(a,"border"+e[f]+"Width",c,!0))||0;return d},ga=function(a,b){if("contain"===a||"auto"===a||"auto auto"===a)return a+" ";(null==a||""===a)&&(a="0 0");var c,d=a.split(" "),e=-1!==a.indexOf("left")?"0%":-1!==a.indexOf("right")?"100%":d[0],f=-1!==a.indexOf("top")?"0%":-1!==a.indexOf("bottom")?"100%":d[1];if(d.length>3&&!b){for(d=a.split(", ").join(",").split(","),a=[],c=0;c<d.length;c++)a.push(ga(d[c]));return a.join(",")}return null==f?f="center"===e?"50%":"0":"center"===f&&(f="50%"),("center"===e||isNaN(parseFloat(e))&&-1===(e+"").indexOf("="))&&(e="50%"),a=e+" "+f+(d.length>2?" "+d[2]:""),b&&(b.oxp=-1!==e.indexOf("%"),b.oyp=-1!==f.indexOf("%"),b.oxr="="===e.charAt(1),b.oyr="="===f.charAt(1),b.ox=parseFloat(e.replace(v,"")),b.oy=parseFloat(f.replace(v,"")),b.v=a),b||a},ha=function(a,b){return"function"==typeof a&&(a=a(r,q)),"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2)):parseFloat(a)-parseFloat(b)||0},ia=function(a,b){return"function"==typeof a&&(a=a(r,q)),null==a?b:"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2))+b:parseFloat(a)||0},ja=function(a,b,c,d){var e,f,g,h,i,j=1e-6;return"function"==typeof a&&(a=a(r,q)),null==a?h=b:"number"==typeof a?h=a:(e=360,f=a.split("_"),i="="===a.charAt(1),g=(i?parseInt(a.charAt(0)+"1",10)*parseFloat(f[0].substr(2)):parseFloat(f[0]))*(-1===a.indexOf("rad")?1:L)-(i?0:b),f.length&&(d&&(d[c]=b+g),-1!==a.indexOf("short")&&(g%=e,g!==g%(e/2)&&(g=0>g?g+e:g-e)),-1!==a.indexOf("_cw")&&0>g?g=(g+9999999999*e)%e-(g/e|0)*e:-1!==a.indexOf("ccw")&&g>0&&(g=(g-9999999999*e)%e-(g/e|0)*e)),h=b+g),j>h&&h>-j&&(h=0),h},ka={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},la=function(a,b,c){return a=0>a?a+1:a>1?a-1:a,255*(1>6*a?b+(c-b)*a*6:.5>a?c:2>3*a?b+(c-b)*(2/3-a)*6:b)+.5|0},ma=g.parseColor=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;if(a)if("number"==typeof a)c=[a>>16,a>>8&255,255&a];else{if(","===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),ka[a])c=ka[a];else if("#"===a.charAt(0))4===a.length&&(d=a.charAt(1),e=a.charAt(2),f=a.charAt(3),a="#"+d+d+e+e+f+f),a=parseInt(a.substr(1),16),c=[a>>16,a>>8&255,255&a];else if("hsl"===a.substr(0,3))if(c=m=a.match(s),b){if(-1!==a.indexOf("="))return a.match(t)}else g=Number(c[0])%360/360,h=Number(c[1])/100,i=Number(c[2])/100,e=.5>=i?i*(h+1):i+h-i*h,d=2*i-e,c.length>3&&(c[3]=Number(a[3])),c[0]=la(g+1/3,d,e),c[1]=la(g,d,e),c[2]=la(g-1/3,d,e);else c=a.match(s)||ka.transparent;c[0]=Number(c[0]),c[1]=Number(c[1]),c[2]=Number(c[2]),c.length>3&&(c[3]=Number(c[3]))}else c=ka.black;return b&&!m&&(d=c[0]/255,e=c[1]/255,f=c[2]/255,j=Math.max(d,e,f),k=Math.min(d,e,f),i=(j+k)/2,j===k?g=h=0:(l=j-k,h=i>.5?l/(2-j-k):l/(j+k),g=j===d?(e-f)/l+(f>e?6:0):j===e?(f-d)/l+2:(d-e)/l+4,g*=60),c[0]=g+.5|0,c[1]=100*h+.5|0,c[2]=100*i+.5|0),c},na=function(a,b){var c,d,e,f=a.match(oa)||[],g=0,h=f.length?"":a;for(c=0;c<f.length;c++)d=f[c],e=a.substr(g,a.indexOf(d,g)-g),g+=e.length+d.length,d=ma(d,b),3===d.length&&d.push(1),h+=e+(b?"hsla("+d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:"rgba("+d.join(","))+")";return h+a.substr(g)},oa="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(j in ka)oa+="|"+j+"\\b";oa=new RegExp(oa+")","gi"),g.colorStringFilter=function(a){var b,c=a[0]+a[1];oa.test(c)&&(b=-1!==c.indexOf("hsl(")||-1!==c.indexOf("hsla("),a[0]=na(a[0],b),a[1]=na(a[1],b)),oa.lastIndex=0},b.defaultStringFilter||(b.defaultStringFilter=g.colorStringFilter);var pa=function(a,b,c,d){if(null==a)return function(a){return a};var e,f=b?(a.match(oa)||[""])[0]:"",g=a.split(f).join("").match(u)||[],h=a.substr(0,a.indexOf(g[0])),i=")"===a.charAt(a.length-1)?")":"",j=-1!==a.indexOf(" ")?" ":",",k=g.length,l=k>0?g[0].replace(s,""):"";return k?e=b?function(a){var b,m,n,o;if("number"==typeof a)a+=l;else if(d&&I.test(a)){for(o=a.replace(I,"|").split("|"),n=0;n<o.length;n++)o[n]=e(o[n]);return o.join(",")}if(b=(a.match(oa)||[f])[0],m=a.split(b).join("").match(u)||[],n=m.length,k>n--)for(;++n<k;)m[n]=c?m[(n-1)/2|0]:g[n];return h+m.join(j)+j+b+i+(-1!==a.indexOf("inset")?" inset":"")}:function(a){var b,f,m;if("number"==typeof a)a+=l;else if(d&&I.test(a)){for(f=a.replace(I,"|").split("|"),m=0;m<f.length;m++)f[m]=e(f[m]);return f.join(",")}if(b=a.match(u)||[],m=b.length,k>m--)for(;++m<k;)b[m]=c?b[(m-1)/2|0]:g[m];return h+b.join(j)+i}:function(a){return a}},qa=function(a){return a=a.split(","),function(b,c,d,e,f,g,h){var i,j=(c+"").split(" ");for(h={},i=0;4>i;i++)h[a[i]]=j[i]=j[i]||j[(i-1)/2>>0];return e.parse(b,h,f,g)}},ra=(R._setPluginRatio=function(a){this.plugin.setRatio(a);for(var b,c,d,e,f,g=this.data,h=g.proxy,i=g.firstMPT,j=1e-6;i;)b=h[i.v],i.r?b=Math.round(b):j>b&&b>-j&&(b=0),i.t[i.p]=b,i=i._next;if(g.autoRotate&&(g.autoRotate.rotation=g.mod?g.mod(h.rotation,this.t):h.rotation),1===a||0===a)for(i=g.firstMPT,f=1===a?"e":"b";i;){if(c=i.t,c.type){if(1===c.type){for(e=c.xs0+c.s+c.xs1,d=1;d<c.l;d++)e+=c["xn"+d]+c["xs"+(d+1)];c[f]=e}}else c[f]=c.s+c.xs0;i=i._next}},function(a,b,c,d,e){this.t=a,this.p=b,this.v=c,this.r=e,d&&(d._prev=this,this._next=d)}),sa=(R._parseToProxy=function(a,b,c,d,e,f){var g,h,i,j,k,l=d,m={},n={},o=c._transform,p=M;for(c._transform=null,M=b,d=k=c.parse(a,b,d,e),M=p,f&&(c._transform=o,l&&(l._prev=null,l._prev&&(l._prev._next=null)));d&&d!==l;){if(d.type<=1&&(h=d.p,n[h]=d.s+d.c,m[h]=d.s,f||(j=new ra(d,"s",h,j,d.r),d.c=0),1===d.type))for(g=d.l;--g>0;)i="xn"+g,h=d.p+"_"+i,n[h]=d.data[i],m[h]=d[i],f||(j=new ra(d,i,h,j,d.rxp[i]));d=d._next}return{proxy:m,end:n,firstMPT:j,pt:k}},R.CSSPropTween=function(a,b,d,e,g,h,i,j,k,l,m){this.t=a,this.p=b,this.s=d,this.c=e,this.n=i||b,a instanceof sa||f.push(this.n),this.r=j,this.type=h||0,k&&(this.pr=k,c=!0),this.b=void 0===l?d:l,this.e=void 0===m?d+e:m,g&&(this._next=g,g._prev=this)}),ta=function(a,b,c,d,e,f){var g=new sa(a,b,c,d-c,e,-1,f);return g.b=c,g.e=g.xs0=d,g},ua=g.parseComplex=function(a,b,c,d,e,f,h,i,j,l){c=c||f||"","function"==typeof d&&(d=d(r,q)),h=new sa(a,b,0,0,h,l?2:1,null,!1,i,c,d),d+="",e&&oa.test(d+c)&&(d=[c,d],g.colorStringFilter(d),c=d[0],d=d[1]);var m,n,o,p,u,v,w,x,y,z,A,B,C,D=c.split(", ").join(",").split(" "),E=d.split(", ").join(",").split(" "),F=D.length,G=k!==!1;for((-1!==d.indexOf(",")||-1!==c.indexOf(","))&&(D=D.join(" ").replace(I,", ").split(" "),E=E.join(" ").replace(I,", ").split(" "),F=D.length),F!==E.length&&(D=(f||"").split(" "),F=D.length),h.plugin=j,h.setRatio=l,oa.lastIndex=0,m=0;F>m;m++)if(p=D[m],u=E[m],x=parseFloat(p),x||0===x)h.appendXtra("",x,ha(u,x),u.replace(t,""),G&&-1!==u.indexOf("px"),!0);else if(e&&oa.test(p))B=u.indexOf(")")+1,B=")"+(B?u.substr(B):""),C=-1!==u.indexOf("hsl")&&T,p=ma(p,C),u=ma(u,C),y=p.length+u.length>6,y&&!T&&0===u[3]?(h["xs"+h.l]+=h.l?" transparent":"transparent",h.e=h.e.split(E[m]).join("transparent")):(T||(y=!1),C?h.appendXtra(y?"hsla(":"hsl(",p[0],ha(u[0],p[0]),",",!1,!0).appendXtra("",p[1],ha(u[1],p[1]),"%,",!1).appendXtra("",p[2],ha(u[2],p[2]),y?"%,":"%"+B,!1):h.appendXtra(y?"rgba(":"rgb(",p[0],u[0]-p[0],",",!0,!0).appendXtra("",p[1],u[1]-p[1],",",!0).appendXtra("",p[2],u[2]-p[2],y?",":B,!0),y&&(p=p.length<4?1:p[3],h.appendXtra("",p,(u.length<4?1:u[3])-p,B,!1))),oa.lastIndex=0;else if(v=p.match(s)){if(w=u.match(t),!w||w.length!==v.length)return h;for(o=0,n=0;n<v.length;n++)A=v[n],z=p.indexOf(A,o),h.appendXtra(p.substr(o,z-o),Number(A),ha(w[n],A),"",G&&"px"===p.substr(z+A.length,2),0===n),o=z+A.length;h["xs"+h.l]+=p.substr(o)}else h["xs"+h.l]+=h.l||h["xs"+h.l]?" "+u:u;if(-1!==d.indexOf("=")&&h.data){for(B=h.xs0+h.data.s,m=1;m<h.l;m++)B+=h["xs"+m]+h.data["xn"+m];h.e=B+h["xs"+m]}return h.l||(h.type=-1,h.xs0=h.e),h.xfirst||h},va=9;for(j=sa.prototype,j.l=j.pr=0;--va>0;)j["xn"+va]=0,j["xs"+va]="";j.xs0="",j._next=j._prev=j.xfirst=j.data=j.plugin=j.setRatio=j.rxp=null,j.appendXtra=function(a,b,c,d,e,f){var g=this,h=g.l;return g["xs"+h]+=f&&(h||g["xs"+h])?" "+a:a||"",c||0===h||g.plugin?(g.l++,g.type=g.setRatio?2:1,g["xs"+g.l]=d||"",h>0?(g.data["xn"+h]=b+c,g.rxp["xn"+h]=e,g["xn"+h]=b,g.plugin||(g.xfirst=new sa(g,"xn"+h,b,c,g.xfirst||g,0,g.n,e,g.pr),g.xfirst.xs0=0),g):(g.data={s:b+c},g.rxp={},g.s=b,g.c=c,g.r=e,g)):(g["xs"+h]+=b+(d||""),g)};var wa=function(a,b){b=b||{},this.p=b.prefix?Y(a)||a:a,i[a]=i[this.p]=this,this.format=b.formatter||pa(b.defaultValue,b.color,b.collapsible,b.multi),b.parser&&(this.parse=b.parser),this.clrs=b.color,this.multi=b.multi,this.keyword=b.keyword,this.dflt=b.defaultValue,this.pr=b.priority||0},xa=R._registerComplexSpecialProp=function(a,b,c){"object"!=typeof b&&(b={parser:c});var d,e,f=a.split(","),g=b.defaultValue;for(c=c||[g],d=0;d<f.length;d++)b.prefix=0===d&&b.prefix,b.defaultValue=c[d]||g,e=new wa(f[d],b)},ya=R._registerPluginProp=function(a){if(!i[a]){var b=a.charAt(0).toUpperCase()+a.substr(1)+"Plugin";xa(a,{parser:function(a,c,d,e,f,g,j){var k=h.com.greensock.plugins[b];return k?(k._cssRegister(),i[d].parse(a,c,d,e,f,g,j)):(V("Error: "+b+" js file not loaded."),f)}})}};j=wa.prototype,j.parseComplex=function(a,b,c,d,e,f){var g,h,i,j,k,l,m=this.keyword;if(this.multi&&(I.test(c)||I.test(b)?(h=b.replace(I,"|").split("|"),i=c.replace(I,"|").split("|")):m&&(h=[b],i=[c])),i){for(j=i.length>h.length?i.length:h.length,g=0;j>g;g++)b=h[g]=h[g]||this.dflt,c=i[g]=i[g]||this.dflt,m&&(k=b.indexOf(m),l=c.indexOf(m),k!==l&&(-1===l?h[g]=h[g].split(m).join(""):-1===k&&(h[g]+=" "+m)));b=h.join(", "),c=i.join(", ")}return ua(a,this.p,b,c,this.clrs,this.dflt,d,this.pr,e,f)},j.parse=function(a,b,c,d,f,g,h){return this.parseComplex(a.style,this.format($(a,this.p,e,!1,this.dflt)),this.format(b),f,g)},g.registerSpecialProp=function(a,b,c){xa(a,{parser:function(a,d,e,f,g,h,i){var j=new sa(a,e,0,0,g,2,e,!1,c);return j.plugin=h,j.setRatio=b(a,d,f._tween,e),j},priority:c})},g.useSVGTransformAttr=m||n;var za,Aa="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Ba=Y("transform"),Ca=W+"transform",Da=Y("transformOrigin"),Ea=null!==Y("perspective"),Fa=R.Transform=function(){this.perspective=parseFloat(g.defaultTransformPerspective)||0,this.force3D=g.defaultForce3D!==!1&&Ea?g.defaultForce3D||"auto":!1},Ga=window.SVGElement,Ha=function(a,b,c){var d,e=N.createElementNS("http://www.w3.org/2000/svg",a),f=/([a-z])([A-Z])/g;for(d in c)e.setAttributeNS(null,d.replace(f,"$1-$2").toLowerCase(),c[d]);return b.appendChild(e),e},Ia=N.documentElement,Ja=function(){var a,b,c,d=p||/Android/i.test(S)&&!window.chrome;return N.createElementNS&&!d&&(a=Ha("svg",Ia),b=Ha("rect",a,{width:100,height:50,x:100}),c=b.getBoundingClientRect().width,b.style[Da]="50% 50%",b.style[Ba]="scaleX(0.5)",d=c===b.getBoundingClientRect().width&&!(n&&Ea),Ia.removeChild(a)),d}(),Ka=function(a,b,c,d,e,f){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=a._gsTransform,w=Oa(a,!0);v&&(t=v.xOrigin,u=v.yOrigin),(!d||(h=d.split(" ")).length<2)&&(n=a.getBBox(),b=ga(b).split(" "),h=[(-1!==b[0].indexOf("%")?parseFloat(b[0])/100*n.width:parseFloat(b[0]))+n.x,(-1!==b[1].indexOf("%")?parseFloat(b[1])/100*n.height:parseFloat(b[1]))+n.y]),c.xOrigin=k=parseFloat(h[0]),c.yOrigin=l=parseFloat(h[1]),d&&w!==Na&&(m=w[0],n=w[1],o=w[2],p=w[3],q=w[4],r=w[5],s=m*p-n*o,i=k*(p/s)+l*(-o/s)+(o*r-p*q)/s,j=k*(-n/s)+l*(m/s)-(m*r-n*q)/s,k=c.xOrigin=h[0]=i,l=c.yOrigin=h[1]=j),v&&(f&&(c.xOffset=v.xOffset,c.yOffset=v.yOffset,v=c),e||e!==!1&&g.defaultSmoothOrigin!==!1?(i=k-t,j=l-u,v.xOffset+=i*w[0]+j*w[2]-i,v.yOffset+=i*w[1]+j*w[3]-j):v.xOffset=v.yOffset=0),f||a.setAttribute("data-svg-origin",h.join(" "))},La=function(a){try{return a.getBBox()}catch(a){}},Ma=function(a){return!!(Ga&&a.getBBox&&a.getCTM&&La(a)&&(!a.parentNode||a.parentNode.getBBox&&a.parentNode.getCTM))},Na=[1,0,0,1,0,0],Oa=function(a,b){var c,d,e,f,g,h,i=a._gsTransform||new Fa,j=1e5,k=a.style;if(Ba?d=$(a,Ca,null,!0):a.currentStyle&&(d=a.currentStyle.filter.match(G),d=d&&4===d.length?[d[0].substr(4),Number(d[2].substr(4)),Number(d[1].substr(4)),d[3].substr(4),i.x||0,i.y||0].join(","):""),c=!d||"none"===d||"matrix(1, 0, 0, 1, 0, 0)"===d,c&&Ba&&((h="none"===Z(a).display)||!a.parentNode)&&(h&&(f=k.display,k.display="block"),a.parentNode||(g=1,Ia.appendChild(a)),d=$(a,Ca,null,!0),c=!d||"none"===d||"matrix(1, 0, 0, 1, 0, 0)"===d,f?k.display=f:h&&Ta(k,"display"),g&&Ia.removeChild(a)),(i.svg||a.getBBox&&Ma(a))&&(c&&-1!==(k[Ba]+"").indexOf("matrix")&&(d=k[Ba],c=0),e=a.getAttribute("transform"),c&&e&&(-1!==e.indexOf("matrix")?(d=e,c=0):-1!==e.indexOf("translate")&&(d="matrix(1,0,0,1,"+e.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",c=0))),c)return Na;for(e=(d||"").match(s)||[],va=e.length;--va>-1;)f=Number(e[va]),e[va]=(g=f-(f|=0))?(g*j+(0>g?-.5:.5)|0)/j+f:f;return b&&e.length>6?[e[0],e[1],e[4],e[5],e[12],e[13]]:e},Pa=R.getTransform=function(a,c,d,e){if(a._gsTransform&&d&&!e)return a._gsTransform;var f,h,i,j,k,l,m=d?a._gsTransform||new Fa:new Fa,n=m.scaleX<0,o=2e-5,p=1e5,q=Ea?parseFloat($(a,Da,c,!1,"0 0 0").split(" ")[2])||m.zOrigin||0:0,r=parseFloat(g.defaultTransformPerspective)||0;if(m.svg=!(!a.getBBox||!Ma(a)),m.svg&&(Ka(a,$(a,Da,c,!1,"50% 50%")+"",m,a.getAttribute("data-svg-origin")),za=g.useSVGTransformAttr||Ja),f=Oa(a),f!==Na){if(16===f.length){var s,t,u,v,w,x=f[0],y=f[1],z=f[2],A=f[3],B=f[4],C=f[5],D=f[6],E=f[7],F=f[8],G=f[9],H=f[10],I=f[12],J=f[13],K=f[14],M=f[11],N=Math.atan2(D,H);m.zOrigin&&(K=-m.zOrigin,I=F*K-f[12],J=G*K-f[13],K=H*K+m.zOrigin-f[14]),m.rotationX=N*L,N&&(v=Math.cos(-N),w=Math.sin(-N),s=B*v+F*w,t=C*v+G*w,u=D*v+H*w,F=B*-w+F*v,G=C*-w+G*v,H=D*-w+H*v,M=E*-w+M*v,B=s,C=t,D=u),N=Math.atan2(-z,H),m.rotationY=N*L,N&&(v=Math.cos(-N),w=Math.sin(-N),s=x*v-F*w,t=y*v-G*w,u=z*v-H*w,G=y*w+G*v,H=z*w+H*v,M=A*w+M*v,x=s,y=t,z=u),N=Math.atan2(y,x),m.rotation=N*L,N&&(v=Math.cos(-N),w=Math.sin(-N),x=x*v+B*w,t=y*v+C*w,C=y*-w+C*v,D=z*-w+D*v,y=t),m.rotationX&&Math.abs(m.rotationX)+Math.abs(m.rotation)>359.9&&(m.rotationX=m.rotation=0,m.rotationY=180-m.rotationY),m.scaleX=(Math.sqrt(x*x+y*y)*p+.5|0)/p,m.scaleY=(Math.sqrt(C*C+G*G)*p+.5|0)/p,m.scaleZ=(Math.sqrt(D*D+H*H)*p+.5|0)/p,m.rotationX||m.rotationY?m.skewX=0:(m.skewX=B||C?Math.atan2(B,C)*L+m.rotation:m.skewX||0,Math.abs(m.skewX)>90&&Math.abs(m.skewX)<270&&(n?(m.scaleX*=-1,m.skewX+=m.rotation<=0?180:-180,m.rotation+=m.rotation<=0?180:-180):(m.scaleY*=-1,m.skewX+=m.skewX<=0?180:-180))),m.perspective=M?1/(0>M?-M:M):0,m.x=I,m.y=J,m.z=K,m.svg&&(m.x-=m.xOrigin-(m.xOrigin*x-m.yOrigin*B),m.y-=m.yOrigin-(m.yOrigin*y-m.xOrigin*C))}else if(!Ea||e||!f.length||m.x!==f[4]||m.y!==f[5]||!m.rotationX&&!m.rotationY){var O=f.length>=6,P=O?f[0]:1,Q=f[1]||0,R=f[2]||0,S=O?f[3]:1;m.x=f[4]||0,m.y=f[5]||0,i=Math.sqrt(P*P+Q*Q),j=Math.sqrt(S*S+R*R),k=P||Q?Math.atan2(Q,P)*L:m.rotation||0,l=R||S?Math.atan2(R,S)*L+k:m.skewX||0,Math.abs(l)>90&&Math.abs(l)<270&&(n?(i*=-1,l+=0>=k?180:-180,k+=0>=k?180:-180):(j*=-1,l+=0>=l?180:-180)),m.scaleX=i,m.scaleY=j,m.rotation=k,m.skewX=l,Ea&&(m.rotationX=m.rotationY=m.z=0,m.perspective=r,m.scaleZ=1),m.svg&&(m.x-=m.xOrigin-(m.xOrigin*P+m.yOrigin*R),m.y-=m.yOrigin-(m.xOrigin*Q+m.yOrigin*S))}m.zOrigin=q;for(h in m)m[h]<o&&m[h]>-o&&(m[h]=0)}return d&&(a._gsTransform=m,m.svg&&(za&&a.style[Ba]?b.delayedCall(.001,function(){Ta(a.style,Ba)}):!za&&a.getAttribute("transform")&&b.delayedCall(.001,function(){a.removeAttribute("transform")}))),m},Qa=function(a){var b,c,d=this.data,e=-d.rotation*K,f=e+d.skewX*K,g=1e5,h=(Math.cos(e)*d.scaleX*g|0)/g,i=(Math.sin(e)*d.scaleX*g|0)/g,j=(Math.sin(f)*-d.scaleY*g|0)/g,k=(Math.cos(f)*d.scaleY*g|0)/g,l=this.t.style,m=this.t.currentStyle;if(m){c=i,i=-j,j=-c,b=m.filter,l.filter="";var n,o,q=this.t.offsetWidth,r=this.t.offsetHeight,s="absolute"!==m.position,t="progid:DXImageTransform.Microsoft.Matrix(M11="+h+", M12="+i+", M21="+j+", M22="+k,u=d.x+q*d.xPercent/100,v=d.y+r*d.yPercent/100;if(null!=d.ox&&(n=(d.oxp?q*d.ox*.01:d.ox)-q/2,o=(d.oyp?r*d.oy*.01:d.oy)-r/2,u+=n-(n*h+o*i),v+=o-(n*j+o*k)),s?(n=q/2,o=r/2,t+=", Dx="+(n-(n*h+o*i)+u)+", Dy="+(o-(n*j+o*k)+v)+")"):t+=", sizingMethod='auto expand')",-1!==b.indexOf("DXImageTransform.Microsoft.Matrix(")?l.filter=b.replace(H,t):l.filter=t+" "+b,(0===a||1===a)&&1===h&&0===i&&0===j&&1===k&&(s&&-1===t.indexOf("Dx=0, Dy=0")||x.test(b)&&100!==parseFloat(RegExp.$1)||-1===b.indexOf(b.indexOf("Alpha"))&&l.removeAttribute("filter")),!s){var y,z,A,B=8>p?1:-1;for(n=d.ieOffsetX||0,o=d.ieOffsetY||0,d.ieOffsetX=Math.round((q-((0>h?-h:h)*q+(0>i?-i:i)*r))/2+u),d.ieOffsetY=Math.round((r-((0>k?-k:k)*r+(0>j?-j:j)*q))/2+v),va=0;4>va;va++)z=ea[va],y=m[z],c=-1!==y.indexOf("px")?parseFloat(y):_(this.t,z,parseFloat(y),y.replace(w,""))||0,A=c!==d[z]?2>va?-d.ieOffsetX:-d.ieOffsetY:2>va?n-d.ieOffsetX:o-d.ieOffsetY,l[z]=(d[z]=Math.round(c-A*(0===va||2===va?1:B)))+"px"}}},Ra=R.set3DTransformRatio=R.setTransformRatio=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,o,p,q,r,s,t,u,v,w,x,y,z=this.data,A=this.t.style,B=z.rotation,C=z.rotationX,D=z.rotationY,E=z.scaleX,F=z.scaleY,G=z.scaleZ,H=z.x,I=z.y,J=z.z,L=z.svg,M=z.perspective,N=z.force3D;if(((1===a||0===a)&&"auto"===N&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!N)&&!J&&!M&&!D&&!C&&1===G||za&&L||!Ea)return void(B||z.skewX||L?(B*=K,x=z.skewX*K,y=1e5,b=Math.cos(B)*E,e=Math.sin(B)*E,c=Math.sin(B-x)*-F,f=Math.cos(B-x)*F,x&&"simple"===z.skewType&&(s=Math.tan(x-z.skewY*K),s=Math.sqrt(1+s*s),c*=s,f*=s,z.skewY&&(s=Math.tan(z.skewY*K),s=Math.sqrt(1+s*s),b*=s,e*=s)),L&&(H+=z.xOrigin-(z.xOrigin*b+z.yOrigin*c)+z.xOffset,I+=z.yOrigin-(z.xOrigin*e+z.yOrigin*f)+z.yOffset,za&&(z.xPercent||z.yPercent)&&(p=this.t.getBBox(),H+=.01*z.xPercent*p.width,I+=.01*z.yPercent*p.height),p=1e-6,p>H&&H>-p&&(H=0),p>I&&I>-p&&(I=0)),u=(b*y|0)/y+","+(e*y|0)/y+","+(c*y|0)/y+","+(f*y|0)/y+","+H+","+I+")",L&&za?this.t.setAttribute("transform","matrix("+u):A[Ba]=(z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) matrix(":"matrix(")+u):A[Ba]=(z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) matrix(":"matrix(")+E+",0,0,"+F+","+H+","+I+")");if(n&&(p=1e-4,p>E&&E>-p&&(E=G=2e-5),p>F&&F>-p&&(F=G=2e-5),!M||z.z||z.rotationX||z.rotationY||(M=0)),B||z.skewX)B*=K,q=b=Math.cos(B),r=e=Math.sin(B),z.skewX&&(B-=z.skewX*K,q=Math.cos(B),r=Math.sin(B),"simple"===z.skewType&&(s=Math.tan((z.skewX-z.skewY)*K),s=Math.sqrt(1+s*s),q*=s,r*=s,z.skewY&&(s=Math.tan(z.skewY*K),s=Math.sqrt(1+s*s),b*=s,e*=s))),c=-r,f=q;else{if(!(D||C||1!==G||M||L))return void(A[Ba]=(z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) translate3d(":"translate3d(")+H+"px,"+I+"px,"+J+"px)"+(1!==E||1!==F?" scale("+E+","+F+")":""));b=f=1,c=e=0}j=1,d=g=h=i=k=l=0,m=M?-1/M:0,o=z.zOrigin,p=1e-6,v=",",w="0",B=D*K,B&&(q=Math.cos(B),r=Math.sin(B),h=-r,k=m*-r,d=b*r,g=e*r,j=q,m*=q,b*=q,e*=q),B=C*K,B&&(q=Math.cos(B),r=Math.sin(B),s=c*q+d*r,t=f*q+g*r,i=j*r,l=m*r,d=c*-r+d*q,g=f*-r+g*q,j*=q,m*=q,c=s,f=t),1!==G&&(d*=G,g*=G,j*=G,m*=G),1!==F&&(c*=F,f*=F,i*=F,l*=F),1!==E&&(b*=E,e*=E,h*=E,k*=E),(o||L)&&(o&&(H+=d*-o,I+=g*-o,J+=j*-o+o),L&&(H+=z.xOrigin-(z.xOrigin*b+z.yOrigin*c)+z.xOffset,I+=z.yOrigin-(z.xOrigin*e+z.yOrigin*f)+z.yOffset),p>H&&H>-p&&(H=w),p>I&&I>-p&&(I=w),p>J&&J>-p&&(J=0)),u=z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) matrix3d(":"matrix3d(",u+=(p>b&&b>-p?w:b)+v+(p>e&&e>-p?w:e)+v+(p>h&&h>-p?w:h),u+=v+(p>k&&k>-p?w:k)+v+(p>c&&c>-p?w:c)+v+(p>f&&f>-p?w:f),C||D||1!==G?(u+=v+(p>i&&i>-p?w:i)+v+(p>l&&l>-p?w:l)+v+(p>d&&d>-p?w:d),u+=v+(p>g&&g>-p?w:g)+v+(p>j&&j>-p?w:j)+v+(p>m&&m>-p?w:m)+v):u+=",0,0,0,0,1,0,",u+=H+v+I+v+J+v+(M?1+-J/M:1)+")",A[Ba]=u};j=Fa.prototype,j.x=j.y=j.z=j.skewX=j.skewY=j.rotation=j.rotationX=j.rotationY=j.zOrigin=j.xPercent=j.yPercent=j.xOffset=j.yOffset=0,j.scaleX=j.scaleY=j.scaleZ=1,xa("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(a,b,c,d,f,h,i){if(d._lastParsedTransform===i)return f;d._lastParsedTransform=i;var j;"function"==typeof i[c]&&(j=i[c],i[c]=b);var k,l,m,n,o,p,s,t,u,v=a._gsTransform,w=a.style,x=1e-6,y=Aa.length,z=i,A={},B="transformOrigin",C=Pa(a,e,!0,z.parseTransform),D=z.transform&&("function"==typeof z.transform?z.transform(r,q):z.transform);if(d._transform=C,D&&"string"==typeof D&&Ba)l=P.style,l[Ba]=D,l.display="block",l.position="absolute",N.body.appendChild(P),k=Pa(P,null,!1),C.svg&&(p=C.xOrigin,s=C.yOrigin,k.x-=C.xOffset,k.y-=C.yOffset,(z.transformOrigin||z.svgOrigin)&&(D={},Ka(a,ga(z.transformOrigin),D,z.svgOrigin,z.smoothOrigin,!0),p=D.xOrigin,s=D.yOrigin,k.x-=D.xOffset-C.xOffset,k.y-=D.yOffset-C.yOffset),(p||s)&&(t=Oa(P,!0),k.x-=p-(p*t[0]+s*t[2]),k.y-=s-(p*t[1]+s*t[3]))),N.body.removeChild(P),k.perspective||(k.perspective=C.perspective),null!=z.xPercent&&(k.xPercent=ia(z.xPercent,C.xPercent)),null!=z.yPercent&&(k.yPercent=ia(z.yPercent,C.yPercent));else if("object"==typeof z){if(k={scaleX:ia(null!=z.scaleX?z.scaleX:z.scale,C.scaleX),scaleY:ia(null!=z.scaleY?z.scaleY:z.scale,C.scaleY),scaleZ:ia(z.scaleZ,C.scaleZ),x:ia(z.x,C.x),y:ia(z.y,C.y),z:ia(z.z,C.z),xPercent:ia(z.xPercent,C.xPercent),yPercent:ia(z.yPercent,C.yPercent),perspective:ia(z.transformPerspective,C.perspective)},o=z.directionalRotation,null!=o)if("object"==typeof o)for(l in o)z[l]=o[l];else z.rotation=o;"string"==typeof z.x&&-1!==z.x.indexOf("%")&&(k.x=0,k.xPercent=ia(z.x,C.xPercent)),"string"==typeof z.y&&-1!==z.y.indexOf("%")&&(k.y=0,k.yPercent=ia(z.y,C.yPercent)),k.rotation=ja("rotation"in z?z.rotation:"shortRotation"in z?z.shortRotation+"_short":"rotationZ"in z?z.rotationZ:C.rotation-C.skewY,C.rotation-C.skewY,"rotation",A),Ea&&(k.rotationX=ja("rotationX"in z?z.rotationX:"shortRotationX"in z?z.shortRotationX+"_short":C.rotationX||0,C.rotationX,"rotationX",A),k.rotationY=ja("rotationY"in z?z.rotationY:"shortRotationY"in z?z.shortRotationY+"_short":C.rotationY||0,C.rotationY,"rotationY",A)),k.skewX=ja(z.skewX,C.skewX-C.skewY),(k.skewY=ja(z.skewY,C.skewY))&&(k.skewX+=k.skewY,k.rotation+=k.skewY)}for(Ea&&null!=z.force3D&&(C.force3D=z.force3D,n=!0),C.skewType=z.skewType||C.skewType||g.defaultSkewType,m=C.force3D||C.z||C.rotationX||C.rotationY||k.z||k.rotationX||k.rotationY||k.perspective,m||null==z.scale||(k.scaleZ=1);--y>-1;)u=Aa[y],D=k[u]-C[u],(D>x||-x>D||null!=z[u]||null!=M[u])&&(n=!0,
f=new sa(C,u,C[u],D,f),u in A&&(f.e=A[u]),f.xs0=0,f.plugin=h,d._overwriteProps.push(f.n));return D=z.transformOrigin,C.svg&&(D||z.svgOrigin)&&(p=C.xOffset,s=C.yOffset,Ka(a,ga(D),k,z.svgOrigin,z.smoothOrigin),f=ta(C,"xOrigin",(v?C:k).xOrigin,k.xOrigin,f,B),f=ta(C,"yOrigin",(v?C:k).yOrigin,k.yOrigin,f,B),(p!==C.xOffset||s!==C.yOffset)&&(f=ta(C,"xOffset",v?p:C.xOffset,C.xOffset,f,B),f=ta(C,"yOffset",v?s:C.yOffset,C.yOffset,f,B)),D=za?null:"0px 0px"),(D||Ea&&m&&C.zOrigin)&&(Ba?(n=!0,u=Da,D=(D||$(a,u,e,!1,"50% 50%"))+"",f=new sa(w,u,0,0,f,-1,B),f.b=w[u],f.plugin=h,Ea?(l=C.zOrigin,D=D.split(" "),C.zOrigin=(D.length>2&&(0===l||"0px"!==D[2])?parseFloat(D[2]):l)||0,f.xs0=f.e=D[0]+" "+(D[1]||"50%")+" 0px",f=new sa(C,"zOrigin",0,0,f,-1,f.n),f.b=l,f.xs0=f.e=C.zOrigin):f.xs0=f.e=D):ga(D+"",C)),n&&(d._transformType=C.svg&&za||!m&&3!==this._transformType?2:3),j&&(i[c]=j),f},prefix:!0}),xa("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),xa("borderRadius",{defaultValue:"0px",parser:function(a,b,c,f,g,h){b=this.format(b);var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],z=a.style;for(q=parseFloat(a.offsetWidth),r=parseFloat(a.offsetHeight),i=b.split(" "),j=0;j<y.length;j++)this.p.indexOf("border")&&(y[j]=Y(y[j])),m=l=$(a,y[j],e,!1,"0px"),-1!==m.indexOf(" ")&&(l=m.split(" "),m=l[0],l=l[1]),n=k=i[j],o=parseFloat(m),t=m.substr((o+"").length),u="="===n.charAt(1),u?(p=parseInt(n.charAt(0)+"1",10),n=n.substr(2),p*=parseFloat(n),s=n.substr((p+"").length-(0>p?1:0))||""):(p=parseFloat(n),s=n.substr((p+"").length)),""===s&&(s=d[c]||t),s!==t&&(v=_(a,"borderLeft",o,t),w=_(a,"borderTop",o,t),"%"===s?(m=v/q*100+"%",l=w/r*100+"%"):"em"===s?(x=_(a,"borderLeft",1,"em"),m=v/x+"em",l=w/x+"em"):(m=v+"px",l=w+"px"),u&&(n=parseFloat(m)+p+s,k=parseFloat(l)+p+s)),g=ua(z,y[j],m+" "+l,n+" "+k,!1,"0px",g);return g},prefix:!0,formatter:pa("0px 0px 0px 0px",!1,!0)}),xa("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(a,b,c,d,f,g){return ua(a.style,c,this.format($(a,c,e,!1,"0px 0px")),this.format(b),!1,"0px",f)},prefix:!0,formatter:pa("0px 0px",!1,!0)}),xa("backgroundPosition",{defaultValue:"0 0",parser:function(a,b,c,d,f,g){var h,i,j,k,l,m,n="background-position",o=e||Z(a,null),q=this.format((o?p?o.getPropertyValue(n+"-x")+" "+o.getPropertyValue(n+"-y"):o.getPropertyValue(n):a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY)||"0 0"),r=this.format(b);if(-1!==q.indexOf("%")!=(-1!==r.indexOf("%"))&&r.split(",").length<2&&(m=$(a,"backgroundImage").replace(D,""),m&&"none"!==m)){for(h=q.split(" "),i=r.split(" "),Q.setAttribute("src",m),j=2;--j>-1;)q=h[j],k=-1!==q.indexOf("%"),k!==(-1!==i[j].indexOf("%"))&&(l=0===j?a.offsetWidth-Q.width:a.offsetHeight-Q.height,h[j]=k?parseFloat(q)/100*l+"px":parseFloat(q)/l*100+"%");q=h.join(" ")}return this.parseComplex(a.style,q,r,f,g)},formatter:ga}),xa("backgroundSize",{defaultValue:"0 0",formatter:function(a){return a+="",ga(-1===a.indexOf(" ")?a+" "+a:a)}}),xa("perspective",{defaultValue:"0px",prefix:!0}),xa("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),xa("transformStyle",{prefix:!0}),xa("backfaceVisibility",{prefix:!0}),xa("userSelect",{prefix:!0}),xa("margin",{parser:qa("marginTop,marginRight,marginBottom,marginLeft")}),xa("padding",{parser:qa("paddingTop,paddingRight,paddingBottom,paddingLeft")}),xa("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(a,b,c,d,f,g){var h,i,j;return 9>p?(i=a.currentStyle,j=8>p?" ":",",h="rect("+i.clipTop+j+i.clipRight+j+i.clipBottom+j+i.clipLeft+")",b=this.format(b).split(",").join(j)):(h=this.format($(a,this.p,e,!1,this.dflt)),b=this.format(b)),this.parseComplex(a.style,h,b,f,g)}}),xa("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),xa("autoRound,strictUnits",{parser:function(a,b,c,d,e){return e}}),xa("border",{defaultValue:"0px solid #000",parser:function(a,b,c,d,f,g){var h=$(a,"borderTopWidth",e,!1,"0px"),i=this.format(b).split(" "),j=i[0].replace(w,"");return"px"!==j&&(h=parseFloat(h)/_(a,"borderTopWidth",1,j)+j),this.parseComplex(a.style,this.format(h+" "+$(a,"borderTopStyle",e,!1,"solid")+" "+$(a,"borderTopColor",e,!1,"#000")),i.join(" "),f,g)},color:!0,formatter:function(a){var b=a.split(" ");return b[0]+" "+(b[1]||"solid")+" "+(a.match(oa)||["#000"])[0]}}),xa("borderWidth",{parser:qa("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),xa("float,cssFloat,styleFloat",{parser:function(a,b,c,d,e,f){var g=a.style,h="cssFloat"in g?"cssFloat":"styleFloat";return new sa(g,h,0,0,e,-1,c,!1,0,g[h],b)}});var Sa=function(a){var b,c=this.t,d=c.filter||$(this.data,"filter")||"",e=this.s+this.c*a|0;100===e&&(-1===d.indexOf("atrix(")&&-1===d.indexOf("radient(")&&-1===d.indexOf("oader(")?(c.removeAttribute("filter"),b=!$(this.data,"filter")):(c.filter=d.replace(z,""),b=!0)),b||(this.xn1&&(c.filter=d=d||"alpha(opacity="+e+")"),-1===d.indexOf("pacity")?0===e&&this.xn1||(c.filter=d+" alpha(opacity="+e+")"):c.filter=d.replace(x,"opacity="+e))};xa("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(a,b,c,d,f,g){var h=parseFloat($(a,"opacity",e,!1,"1")),i=a.style,j="autoAlpha"===c;return"string"==typeof b&&"="===b.charAt(1)&&(b=("-"===b.charAt(0)?-1:1)*parseFloat(b.substr(2))+h),j&&1===h&&"hidden"===$(a,"visibility",e)&&0!==b&&(h=0),T?f=new sa(i,"opacity",h,b-h,f):(f=new sa(i,"opacity",100*h,100*(b-h),f),f.xn1=j?1:0,i.zoom=1,f.type=2,f.b="alpha(opacity="+f.s+")",f.e="alpha(opacity="+(f.s+f.c)+")",f.data=a,f.plugin=g,f.setRatio=Sa),j&&(f=new sa(i,"visibility",0,0,f,-1,null,!1,0,0!==h?"inherit":"hidden",0===b?"hidden":"inherit"),f.xs0="inherit",d._overwriteProps.push(f.n),d._overwriteProps.push(c)),f}});var Ta=function(a,b){b&&(a.removeProperty?(("ms"===b.substr(0,2)||"webkit"===b.substr(0,6))&&(b="-"+b),a.removeProperty(b.replace(B,"-$1").toLowerCase())):a.removeAttribute(b))},Ua=function(a){if(this.t._gsClassPT=this,1===a||0===a){this.t.setAttribute("class",0===a?this.b:this.e);for(var b=this.data,c=this.t.style;b;)b.v?c[b.p]=b.v:Ta(c,b.p),b=b._next;1===a&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};xa("className",{parser:function(a,b,d,f,g,h,i){var j,k,l,m,n,o=a.getAttribute("class")||"",p=a.style.cssText;if(g=f._classNamePT=new sa(a,d,0,0,g,2),g.setRatio=Ua,g.pr=-11,c=!0,g.b=o,k=ba(a,e),l=a._gsClassPT){for(m={},n=l.data;n;)m[n.p]=1,n=n._next;l.setRatio(1)}return a._gsClassPT=g,g.e="="!==b.charAt(1)?b:o.replace(new RegExp("(?:\\s|^)"+b.substr(2)+"(?![\\w-])"),"")+("+"===b.charAt(0)?" "+b.substr(2):""),a.setAttribute("class",g.e),j=ca(a,k,ba(a),i,m),a.setAttribute("class",o),g.data=j.firstMPT,a.style.cssText=p,g=g.xfirst=f.parse(a,j.difs,g,h)}});var Va=function(a){if((1===a||0===a)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var b,c,d,e,f,g=this.t.style,h=i.transform.parse;if("all"===this.e)g.cssText="",e=!0;else for(b=this.e.split(" ").join("").split(","),d=b.length;--d>-1;)c=b[d],i[c]&&(i[c].parse===h?e=!0:c="transformOrigin"===c?Da:i[c].p),Ta(g,c);e&&(Ta(g,Ba),f=this.t._gsTransform,f&&(f.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(xa("clearProps",{parser:function(a,b,d,e,f){return f=new sa(a,d,0,0,f,2),f.setRatio=Va,f.e=b,f.pr=-10,f.data=e._tween,c=!0,f}}),j="bezier,throwProps,physicsProps,physics2D".split(","),va=j.length;va--;)ya(j[va]);j=g.prototype,j._firstPT=j._lastParsedTransform=j._transform=null,j._onInitTween=function(a,b,h,j){if(!a.nodeType)return!1;this._target=q=a,this._tween=h,this._vars=b,r=j,k=b.autoRound,c=!1,d=b.suffixMap||g.suffixMap,e=Z(a,""),f=this._overwriteProps;var n,p,s,t,u,v,w,x,z,A=a.style;if(l&&""===A.zIndex&&(n=$(a,"zIndex",e),("auto"===n||""===n)&&this._addLazySet(A,"zIndex",0)),"string"==typeof b&&(t=A.cssText,n=ba(a,e),A.cssText=t+";"+b,n=ca(a,n,ba(a)).difs,!T&&y.test(b)&&(n.opacity=parseFloat(RegExp.$1)),b=n,A.cssText=t),b.className?this._firstPT=p=i.className.parse(a,b.className,"className",this,null,null,b):this._firstPT=p=this.parse(a,b,null),this._transformType){for(z=3===this._transformType,Ba?m&&(l=!0,""===A.zIndex&&(w=$(a,"zIndex",e),("auto"===w||""===w)&&this._addLazySet(A,"zIndex",0)),o&&this._addLazySet(A,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(z?"visible":"hidden"))):A.zoom=1,s=p;s&&s._next;)s=s._next;x=new sa(a,"transform",0,0,null,2),this._linkCSSP(x,null,s),x.setRatio=Ba?Ra:Qa,x.data=this._transform||Pa(a,e,!0),x.tween=h,x.pr=-1,f.pop()}if(c){for(;p;){for(v=p._next,s=t;s&&s.pr>p.pr;)s=s._next;(p._prev=s?s._prev:u)?p._prev._next=p:t=p,(p._next=s)?s._prev=p:u=p,p=v}this._firstPT=t}return!0},j.parse=function(a,b,c,f){var g,h,j,l,m,n,o,p,s,t,u=a.style;for(g in b)n=b[g],"function"==typeof n&&(n=n(r,q)),h=i[g],h?c=h.parse(a,n,g,this,c,f,b):(m=$(a,g,e)+"",s="string"==typeof n,"color"===g||"fill"===g||"stroke"===g||-1!==g.indexOf("Color")||s&&A.test(n)?(s||(n=ma(n),n=(n.length>3?"rgba(":"rgb(")+n.join(",")+")"),c=ua(u,g,m,n,!0,"transparent",c,0,f)):s&&J.test(n)?c=ua(u,g,m,n,!0,null,c,0,f):(j=parseFloat(m),o=j||0===j?m.substr((j+"").length):"",(""===m||"auto"===m)&&("width"===g||"height"===g?(j=fa(a,g,e),o="px"):"left"===g||"top"===g?(j=aa(a,g,e),o="px"):(j="opacity"!==g?0:1,o="")),t=s&&"="===n.charAt(1),t?(l=parseInt(n.charAt(0)+"1",10),n=n.substr(2),l*=parseFloat(n),p=n.replace(w,"")):(l=parseFloat(n),p=s?n.replace(w,""):""),""===p&&(p=g in d?d[g]:o),n=l||0===l?(t?l+j:l)+p:b[g],o!==p&&""!==p&&(l||0===l)&&j&&(j=_(a,g,j,o),"%"===p?(j/=_(a,g,100,"%")/100,b.strictUnits!==!0&&(m=j+"%")):"em"===p||"rem"===p||"vw"===p||"vh"===p?j/=_(a,g,1,p):"px"!==p&&(l=_(a,g,l,p),p="px"),t&&(l||0===l)&&(n=l+j+p)),t&&(l+=j),!j&&0!==j||!l&&0!==l?void 0!==u[g]&&(n||n+""!="NaN"&&null!=n)?(c=new sa(u,g,l||j||0,0,c,-1,g,!1,0,m,n),c.xs0="none"!==n||"display"!==g&&-1===g.indexOf("Style")?n:m):V("invalid "+g+" tween value: "+b[g]):(c=new sa(u,g,j,l-j,c,0,g,k!==!1&&("px"===p||"zIndex"===g),0,m,n),c.xs0=p))),f&&c&&!c.plugin&&(c.plugin=f);return c},j.setRatio=function(a){var b,c,d,e=this._firstPT,f=1e-6;if(1!==a||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(a||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;e;){if(b=e.c*a+e.s,e.r?b=Math.round(b):f>b&&b>-f&&(b=0),e.type)if(1===e.type)if(d=e.l,2===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2;else if(3===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3;else if(4===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4;else if(5===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4+e.xn4+e.xs5;else{for(c=e.xs0+b+e.xs1,d=1;d<e.l;d++)c+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=c}else-1===e.type?e.t[e.p]=e.xs0:e.setRatio&&e.setRatio(a);else e.t[e.p]=b+e.xs0;e=e._next}else for(;e;)2!==e.type?e.t[e.p]=e.b:e.setRatio(a),e=e._next;else for(;e;){if(2!==e.type)if(e.r&&-1!==e.type)if(b=Math.round(e.s+e.c),e.type){if(1===e.type){for(d=e.l,c=e.xs0+b+e.xs1,d=1;d<e.l;d++)c+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=c}}else e.t[e.p]=b+e.xs0;else e.t[e.p]=e.e;else e.setRatio(a);e=e._next}},j._enableTransforms=function(a){this._transform=this._transform||Pa(this._target,e,!0),this._transformType=this._transform.svg&&za||!a&&3!==this._transformType?2:3};var Wa=function(a){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};j._addLazySet=function(a,b,c){var d=this._firstPT=new sa(a,b,0,0,this._firstPT,2);d.e=c,d.setRatio=Wa,d.data=this},j._linkCSSP=function(a,b,c,d){return a&&(b&&(b._prev=a),a._next&&(a._next._prev=a._prev),a._prev?a._prev._next=a._next:this._firstPT===a&&(this._firstPT=a._next,d=!0),c?c._next=a:d||null!==this._firstPT||(this._firstPT=a),a._next=b,a._prev=c),a},j._mod=function(a){for(var b=this._firstPT;b;)"function"==typeof a[b.p]&&a[b.p]===Math.round&&(b.r=1),b=b._next},j._kill=function(b){var c,d,e,f=b;if(b.autoAlpha||b.alpha){f={};for(d in b)f[d]=b[d];f.opacity=1,f.autoAlpha&&(f.visibility=1)}for(b.className&&(c=this._classNamePT)&&(e=c.xfirst,e&&e._prev?this._linkCSSP(e._prev,c._next,e._prev._prev):e===this._firstPT&&(this._firstPT=c._next),c._next&&this._linkCSSP(c._next,c._next._next,e._prev),this._classNamePT=null),c=this._firstPT;c;)c.plugin&&c.plugin!==d&&c.plugin._kill&&(c.plugin._kill(b),d=c.plugin),c=c._next;return a.prototype._kill.call(this,f)};var Xa=function(a,b,c){var d,e,f,g;if(a.slice)for(e=a.length;--e>-1;)Xa(a[e],b,c);else for(d=a.childNodes,e=d.length;--e>-1;)f=d[e],g=f.type,f.style&&(b.push(ba(f)),c&&c.push(f)),1!==g&&9!==g&&11!==g||!f.childNodes.length||Xa(f,b,c)};return g.cascadeTo=function(a,c,d){var e,f,g,h,i=b.to(a,c,d),j=[i],k=[],l=[],m=[],n=b._internals.reservedProps;for(a=i._targets||i.target,Xa(a,k,m),i.render(c,!0,!0),Xa(a,l),i.render(0,!0,!0),i._enabled(!0),e=m.length;--e>-1;)if(f=ca(m[e],k[e],l[e]),f.firstMPT){f=f.difs;for(g in d)n[g]&&(f[g]=d[g]);h={};for(g in f)h[g]=k[e][g];j.push(b.fromTo(m[e],c,h,f))}return j},a.activate([g]),g},!0),function(){var a=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(a,b,c){return this._tween=c,!0}}),b=function(a){for(;a;)a.f||a.blob||(a.m=Math.round),a=a._next},c=a.prototype;c._onInitAllProps=function(){for(var a,c,d,e=this._tween,f=e.vars.roundProps.join?e.vars.roundProps:e.vars.roundProps.split(","),g=f.length,h={},i=e._propLookup.roundProps;--g>-1;)h[f[g]]=Math.round;for(g=f.length;--g>-1;)for(a=f[g],c=e._firstPT;c;)d=c._next,c.pg?c.t._mod(h):c.n===a&&(2===c.f&&c.t?b(c.t._firstPT):(this._add(c.t,a,c.s,c.c),d&&(d._prev=c._prev),c._prev?c._prev._next=d:e._firstPT===c&&(e._firstPT=d),c._next=c._prev=null,e._propLookup[a]=i)),c=d;return!1},c._add=function(a,b,c,d){this._addTween(a,b,c,c+d,b,Math.round),this._overwriteProps.push(b)}}(),function(){_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.6.0",init:function(a,b,c,d){var e,f;if("function"!=typeof a.setAttribute)return!1;for(e in b)f=b[e],"function"==typeof f&&(f=f(d,a)),this._addTween(a,"setAttribute",a.getAttribute(e)+"",f+"",e,!1,e),this._overwriteProps.push(e);return!0}})}(),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.0",API:2,init:function(a,b,c,d){"object"!=typeof b&&(b={rotation:b}),this.finals={};var e,f,g,h,i,j,k=b.useRadians===!0?2*Math.PI:360,l=1e-6;for(e in b)"useRadians"!==e&&(h=b[e],"function"==typeof h&&(h=h(d,a)),j=(h+"").split("_"),f=j[0],g=parseFloat("function"!=typeof a[e]?a[e]:a[e.indexOf("set")||"function"!=typeof a["get"+e.substr(3)]?e:"get"+e.substr(3)]()),h=this.finals[e]="string"==typeof f&&"="===f.charAt(1)?g+parseInt(f.charAt(0)+"1",10)*Number(f.substr(2)):Number(f)||0,i=h-g,j.length&&(f=j.join("_"),-1!==f.indexOf("short")&&(i%=k,i!==i%(k/2)&&(i=0>i?i+k:i-k)),-1!==f.indexOf("_cw")&&0>i?i=(i+9999999999*k)%k-(i/k|0)*k:-1!==f.indexOf("ccw")&&i>0&&(i=(i-9999999999*k)%k-(i/k|0)*k)),(i>l||-l>i)&&(this._addTween(a,e,g,g+i,e),this._overwriteProps.push(e)));return!0},set:function(a){var b;if(1!==a)this._super.setRatio.call(this,a);else for(b=this._firstPT;b;)b.f?b.t[b.p](this.finals[b.p]):b.t[b.p]=this.finals[b.p],b=b._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(a){var b,c,d,e=_gsScope.GreenSockGlobals||_gsScope,f=e.com.greensock,g=2*Math.PI,h=Math.PI/2,i=f._class,j=function(b,c){var d=i("easing."+b,function(){},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,d},k=a.register||function(){},l=function(a,b,c,d,e){var f=i("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new d},!0);return k(f,a),f},m=function(a,b,c){this.t=a,this.v=b,c&&(this.next=c,c.prev=this,this.c=c.v-b,this.gap=c.t-a)},n=function(b,c){var d=i("easing."+b,function(a){this._p1=a||0===a?a:1.70158,this._p2=1.525*this._p1},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,e.config=function(a){return new d(a)},d},o=l("Back",n("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),n("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),n("BackInOut",function(a){return(a*=2)<1?.5*a*a*((this._p2+1)*a-this._p2):.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),p=i("easing.SlowMo",function(a,b,c){b=b||0===b?b:.7,null==a?a=.7:a>1&&(a=1),this._p=1!==a?b:0,this._p1=(1-a)/2,this._p2=a,this._p3=this._p1+this._p2,this._calcEnd=c===!0},!0),q=p.prototype=new a;return q.constructor=p,q.getRatio=function(a){var b=a+(.5-a)*this._p;return a<this._p1?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},p.ease=new p(.7,.7),q.config=p.config=function(a,b,c){return new p(a,b,c)},b=i("easing.SteppedEase",function(a){a=a||1,this._p1=1/a,this._p2=a+1},!0),q=b.prototype=new a,q.constructor=b,q.getRatio=function(a){return 0>a?a=0:a>=1&&(a=.999999999),(this._p2*a>>0)*this._p1},q.config=b.config=function(a){return new b(a)},c=i("easing.RoughEase",function(b){b=b||{};for(var c,d,e,f,g,h,i=b.taper||"none",j=[],k=0,l=0|(b.points||20),n=l,o=b.randomize!==!1,p=b.clamp===!0,q=b.template instanceof a?b.template:null,r="number"==typeof b.strength?.4*b.strength:.4;--n>-1;)c=o?Math.random():1/l*n,d=q?q.getRatio(c):c,"none"===i?e=r:"out"===i?(f=1-c,e=f*f*r):"in"===i?e=c*c*r:.5>c?(f=2*c,e=f*f*.5*r):(f=2*(1-c),e=f*f*.5*r),o?d+=Math.random()*e-.5*e:n%2?d+=.5*e:d-=.5*e,p&&(d>1?d=1:0>d&&(d=0)),j[k++]={x:c,y:d};for(j.sort(function(a,b){return a.x-b.x}),h=new m(1,1,null),n=l;--n>-1;)g=j[n],h=new m(g.x,g.y,h);this._prev=new m(0,0,0!==h.t?h:h.next)},!0),q=c.prototype=new a,q.constructor=c,q.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&a<=b.t;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},q.config=function(a){return new c(a)},c.ease=new c,l("Bounce",j("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),j("BounceIn",function(a){return(a=1-a)<1/2.75?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}),j("BounceInOut",function(a){var b=.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,b?.5*(1-a):.5*a+.5})),l("Circ",j("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),j("CircIn",function(a){return-(Math.sqrt(1-a*a)-1)}),j("CircInOut",function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)})),d=function(b,c,d){var e=i("easing."+b,function(a,b){this._p1=a>=1?a:1,this._p2=(b||d)/(1>a?a:1),this._p3=this._p2/g*(Math.asin(1/this._p1)||0),this._p2=g/this._p2},!0),f=e.prototype=new a;return f.constructor=e,f.getRatio=c,f.config=function(a,b){return new e(a,b)},e},l("Elastic",d("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*this._p2)+1},.3),d("ElasticIn",function(a){return-(this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*this._p2))},.3),d("ElasticInOut",function(a){return(a*=2)<1?-.5*(this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*this._p2)):this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*this._p2)*.5+1},.45)),l("Expo",j("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),j("ExpoIn",function(a){return Math.pow(2,10*(a-1))-.001}),j("ExpoInOut",function(a){return(a*=2)<1?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))})),l("Sine",j("SineOut",function(a){return Math.sin(a*h)}),j("SineIn",function(a){return-Math.cos(a*h)+1}),j("SineInOut",function(a){return-.5*(Math.cos(Math.PI*a)-1)})),i("easing.EaseLookup",{find:function(b){return a.map[b]}},!0),k(e.SlowMo,"SlowMo","ease,"),k(c,"RoughEase","ease,"),k(b,"SteppedEase","ease,"),o},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(a,b){"use strict";var c={},d=a.GreenSockGlobals=a.GreenSockGlobals||a;if(!d.TweenLite){var e,f,g,h,i,j=function(a){var b,c=a.split("."),e=d;for(b=0;b<c.length;b++)e[c[b]]=e=e[c[b]]||{};return e},k=j("com.greensock"),l=1e-10,m=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},n=function(){},o=function(){var a=Object.prototype.toString,b=a.call([]);return function(c){return null!=c&&(c instanceof Array||"object"==typeof c&&!!c.push&&a.call(c)===b)}}(),p={},q=function(e,f,g,h){this.sc=p[e]?p[e].sc:[],p[e]=this,this.gsClass=null,this.func=g;var i=[];this.check=function(k){for(var l,m,n,o,r,s=f.length,t=s;--s>-1;)(l=p[f[s]]||new q(f[s],[])).gsClass?(i[s]=l.gsClass,t--):k&&l.sc.push(this);if(0===t&&g){if(m=("com.greensock."+e).split("."),n=m.pop(),o=j(m.join("."))[n]=this.gsClass=g.apply(g,i),h)if(d[n]=c[n]=o,r="undefined"!=typeof module&&module.exports,!r&&"function"==typeof define&&define.amd)define((a.GreenSockAMDPath?a.GreenSockAMDPath+"/":"")+e.split(".").pop(),[],function(){return o});else if(r)if(e===b){module.exports=c[b]=o;for(s in c)o[s]=c[s]}else c[b]&&(c[b][n]=o);for(s=0;s<this.sc.length;s++)this.sc[s].check()}},this.check(!0)},r=a._gsDefine=function(a,b,c,d){return new q(a,b,c,d)},s=k._class=function(a,b,c){return b=b||function(){},r(a,[],function(){return b},c),b};r.globals=d;var t=[0,0,1,1],u=s("easing.Ease",function(a,b,c,d){this._func=a,this._type=c||0,this._power=d||0,this._params=b?t.concat(b):t},!0),v=u.map={},w=u.register=function(a,b,c,d){for(var e,f,g,h,i=b.split(","),j=i.length,l=(c||"easeIn,easeOut,easeInOut").split(",");--j>-1;)for(f=i[j],e=d?s("easing."+f,null,!0):k.easing[f]||{},g=l.length;--g>-1;)h=l[g],v[f+"."+h]=v[h+f]=e[h]=a.getRatio?a:a[h]||new a};for(g=u.prototype,g._calcEnd=!1,g.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,c=this._power,d=1===b?1-a:2===b?a:.5>a?2*a:2*(1-a);return 1===c?d*=d:2===c?d*=d*d:3===c?d*=d*d*d:4===c&&(d*=d*d*d*d),1===b?1-d:2===b?d:.5>a?d/2:1-d/2},e=["Linear","Quad","Cubic","Quart","Quint,Strong"],f=e.length;--f>-1;)g=e[f]+",Power"+f,w(new u(null,null,1,f),g,"easeOut",!0),w(new u(null,null,2,f),g,"easeIn"+(0===f?",easeNone":"")),w(new u(null,null,3,f),g,"easeInOut");v.linear=k.easing.Linear.easeIn,v.swing=k.easing.Quad.easeInOut;var x=s("events.EventDispatcher",function(a){this._listeners={},this._eventTarget=a||this});g=x.prototype,g.addEventListener=function(a,b,c,d,e){e=e||0;var f,g,j=this._listeners[a],k=0;for(this!==h||i||h.wake(),null==j&&(this._listeners[a]=j=[]),g=j.length;--g>-1;)f=j[g],f.c===b&&f.s===c?j.splice(g,1):0===k&&f.pr<e&&(k=g+1);j.splice(k,0,{c:b,s:c,up:d,pr:e})},g.removeEventListener=function(a,b){var c,d=this._listeners[a];if(d)for(c=d.length;--c>-1;)if(d[c].c===b)return void d.splice(c,1)},g.dispatchEvent=function(a){var b,c,d,e=this._listeners[a];if(e)for(b=e.length,b>1&&(e=e.slice(0)),c=this._eventTarget;--b>-1;)d=e[b],d&&(d.up?d.c.call(d.s||c,{type:a,target:c}):d.c.call(d.s||c))};var y=a.requestAnimationFrame,z=a.cancelAnimationFrame,A=Date.now||function(){return(new Date).getTime()},B=A();for(e=["ms","moz","webkit","o"],f=e.length;--f>-1&&!y;)y=a[e[f]+"RequestAnimationFrame"],z=a[e[f]+"CancelAnimationFrame"]||a[e[f]+"CancelRequestAnimationFrame"];s("Ticker",function(a,b){var c,d,e,f,g,j=this,k=A(),m=b!==!1&&y?"auto":!1,o=500,p=33,q="tick",r=function(a){var b,h,i=A()-B;i>o&&(k+=i-p),B+=i,j.time=(B-k)/1e3,b=j.time-g,(!c||b>0||a===!0)&&(j.frame++,g+=b+(b>=f?.004:f-b),h=!0),a!==!0&&(e=d(r)),h&&j.dispatchEvent(q)};x.call(j),j.time=j.frame=0,j.tick=function(){r(!0)},j.lagSmoothing=function(a,b){o=a||1/l,p=Math.min(b,o,0)},j.sleep=function(){null!=e&&(m&&z?z(e):clearTimeout(e),d=n,e=null,j===h&&(i=!1))},j.wake=function(a){null!==e?j.sleep():a?k+=-B+(B=A()):j.frame>10&&(B=A()-o+5),d=0===c?n:m&&y?y:function(a){return setTimeout(a,1e3*(g-j.time)+1|0)},j===h&&(i=!0),r(2)},j.fps=function(a){return arguments.length?(c=a,f=1/(c||60),g=this.time+f,void j.wake()):c},j.useRAF=function(a){return arguments.length?(j.sleep(),m=a,void j.fps(c)):m},j.fps(a),setTimeout(function(){"auto"===m&&j.frame<5&&"hidden"!==document.visibilityState&&j.useRAF(!1)},1500)}),g=k.Ticker.prototype=new k.events.EventDispatcher,g.constructor=k.Ticker;var C=s("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=b.immediateRender===!0,this.data=b.data,this._reversed=b.reversed===!0,V){i||h.wake();var c=this.vars.useFrames?U:V;c.add(this,c._time),this.vars.paused&&this.paused(!0)}});h=C.ticker=new k.Ticker,g=C.prototype,g._dirty=g._gc=g._initted=g._paused=!1,g._totalTime=g._time=0,g._rawPrevTime=-1,g._next=g._last=g._onUpdate=g._timeline=g.timeline=null,g._paused=!1;var D=function(){i&&A()-B>2e3&&h.wake(),setTimeout(D,2e3)};D(),g.play=function(a,b){return null!=a&&this.seek(a,b),this.reversed(!1).paused(!1)},g.pause=function(a,b){return null!=a&&this.seek(a,b),this.paused(!0)},g.resume=function(a,b){return null!=a&&this.seek(a,b),this.paused(!1)},g.seek=function(a,b){return this.totalTime(Number(a),b!==!1)},g.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:0,b!==!1,!0)},g.reverse=function(a,b){return null!=a&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)},g.render=function(a,b,c){},g.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},g.isActive=function(){var a,b=this._timeline,c=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime())>=c&&a<c+this.totalDuration()/this._timeScale},g._enabled=function(a,b){return i||h.wake(),this._gc=!a,this._active=this.isActive(),b!==!0&&(a&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1},g._kill=function(a,b){return this._enabled(!1,!1)},g.kill=function(a,b){return this._kill(a,b),this},g._uncache=function(a){for(var b=a?this:this.timeline;b;)b._dirty=!0,b=b.timeline;return this},g._swapSelfInParams=function(a){for(var b=a.length,c=a.concat();--b>-1;)"{self}"===a[b]&&(c[b]=this);return c},g._callback=function(a){var b=this.vars,c=b[a],d=b[a+"Params"],e=b[a+"Scope"]||b.callbackScope||this,f=d?d.length:0;switch(f){case 0:c.call(e);break;case 1:c.call(e,d[0]);break;case 2:c.call(e,d[0],d[1]);break;default:c.apply(e,d)}},g.eventCallback=function(a,b,c,d){if("on"===(a||"").substr(0,2)){var e=this.vars;if(1===arguments.length)return e[a];null==b?delete e[a]:(e[a]=b,e[a+"Params"]=o(c)&&-1!==c.join("").indexOf("{self}")?this._swapSelfInParams(c):c,e[a+"Scope"]=d),"onUpdate"===a&&(this._onUpdate=b)}return this},g.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay},g.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==a&&this.totalTime(this._totalTime*(a/this._duration),!0),this):(this._dirty=!1,this._duration)},g.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration},g.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time},g.totalTime=function(a,b,c){if(i||h.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!c&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var d=this._totalDuration,e=this._timeline;if(a>d&&!c&&(a=d),this._startTime=(this._paused?this._pauseTime:e._time)-(this._reversed?d-a:a)/this._timeScale,e._dirty||this._uncache(!1),e._timeline)for(;e._timeline;)e._timeline._time!==(e._startTime+e._totalTime)/e._timeScale&&e.totalTime(e._totalTime,!0),e=e._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==a||0===this._duration)&&(I.length&&X(),this.render(a,b,!1),I.length&&X())}return this},g.progress=g.totalProgress=function(a,b){var c=this.duration();return arguments.length?this.totalTime(c*a,b):c?this._time/c:this.ratio},g.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime},g.endTime=function(a){return this._startTime+(0!=a?this.totalDuration():this.duration())/this._timeScale},g.timeScale=function(a){if(!arguments.length)return this._timeScale;if(a=a||l,this._timeline&&this._timeline.smoothChildTiming){var b=this._pauseTime,c=b||0===b?b:this._timeline.totalTime();this._startTime=c-(c-this._startTime)*this._timeScale/a}return this._timeScale=a,this._uncache(!1)},g.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},g.paused=function(a){if(!arguments.length)return this._paused;var b,c,d=this._timeline;return a!=this._paused&&d&&(i||a||h.wake(),b=d.rawTime(),c=b-this._pauseTime,!a&&d.smoothChildTiming&&(this._startTime+=c,this._uncache(!1)),this._pauseTime=a?b:null,this._paused=a,this._active=this.isActive(),!a&&0!==c&&this._initted&&this.duration()&&(b=d.smoothChildTiming?this._totalTime:(b-this._startTime)/this._timeScale,this.render(b,b===this._totalTime,!0))),this._gc&&!a&&this._enabled(!0,!1),this};var E=s("core.SimpleTimeline",function(a){C.call(this,0,a),this.autoRemoveChildren=this.smoothChildTiming=!0});g=E.prototype=new C,g.constructor=E,g.kill()._gc=!1,g._first=g._last=g._recent=null,g._sortChildren=!1,g.add=g.insert=function(a,b,c,d){var e,f;if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),e=this._last,this._sortChildren)for(f=a._startTime;e&&e._startTime>f;)e=e._prev;return e?(a._next=e._next,e._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=e,this._recent=a,this._timeline&&this._uncache(!0),this},g._remove=function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),a._next=a._prev=a.timeline=null,a===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},g.render=function(a,b,c){var d,e=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;e;)d=e._next,(e._active||a>=e._startTime&&!e._paused)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,c):e.render((a-e._startTime)*e._timeScale,b,c)),e=d},g.rawTime=function(){return i||h.wake(),this._totalTime};var F=s("TweenLite",function(b,c,d){if(C.call(this,c,d),this.render=F.prototype.render,null==b)throw"Cannot tween a null target.";this.target=b="string"!=typeof b?b:F.selector(b)||b;var e,f,g,h=b.jquery||b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType),i=this.vars.overwrite;if(this._overwrite=i=null==i?T[F.defaultOverwrite]:"number"==typeof i?i>>0:T[i],(h||b instanceof Array||b.push&&o(b))&&"number"!=typeof b[0])for(this._targets=g=m(b),this._propLookup=[],this._siblings=[],e=0;e<g.length;e++)f=g[e],f?"string"!=typeof f?f.length&&f!==a&&f[0]&&(f[0]===a||f[0].nodeType&&f[0].style&&!f.nodeType)?(g.splice(e--,1),this._targets=g=g.concat(m(f))):(this._siblings[e]=Y(f,this,!1),1===i&&this._siblings[e].length>1&&$(f,this,null,1,this._siblings[e])):(f=g[e--]=F.selector(f),"string"==typeof f&&g.splice(e+1,1)):g.splice(e--,1);else this._propLookup={},this._siblings=Y(b,this,!1),1===i&&this._siblings.length>1&&$(b,this,null,1,this._siblings);(this.vars.immediateRender||0===c&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-l,this.render(Math.min(0,-this._delay)))},!0),G=function(b){return b&&b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType);
},H=function(a,b){var c,d={};for(c in a)S[c]||c in b&&"transform"!==c&&"x"!==c&&"y"!==c&&"width"!==c&&"height"!==c&&"className"!==c&&"border"!==c||!(!P[c]||P[c]&&P[c]._autoCSS)||(d[c]=a[c],delete a[c]);a.css=d};g=F.prototype=new C,g.constructor=F,g.kill()._gc=!1,g.ratio=0,g._firstPT=g._targets=g._overwrittenProps=g._startAt=null,g._notifyPluginsOfEnabled=g._lazy=!1,F.version="1.19.0",F.defaultEase=g._ease=new u(null,null,1,1),F.defaultOverwrite="auto",F.ticker=h,F.autoSleep=120,F.lagSmoothing=function(a,b){h.lagSmoothing(a,b)},F.selector=a.$||a.jQuery||function(b){var c=a.$||a.jQuery;return c?(F.selector=c,c(b)):"undefined"==typeof document?b:document.querySelectorAll?document.querySelectorAll(b):document.getElementById("#"===b.charAt(0)?b.substr(1):b)};var I=[],J={},K=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,L=function(a){for(var b,c=this._firstPT,d=1e-6;c;)b=c.blob?a?this.join(""):this.start:c.c*a+c.s,c.m?b=c.m(b,this._target||c.t):d>b&&b>-d&&(b=0),c.f?c.fp?c.t[c.p](c.fp,b):c.t[c.p](b):c.t[c.p]=b,c=c._next},M=function(a,b,c,d){var e,f,g,h,i,j,k,l=[a,b],m=0,n="",o=0;for(l.start=a,c&&(c(l),a=l[0],b=l[1]),l.length=0,e=a.match(K)||[],f=b.match(K)||[],d&&(d._next=null,d.blob=1,l._firstPT=l._applyPT=d),i=f.length,h=0;i>h;h++)k=f[h],j=b.substr(m,b.indexOf(k,m)-m),n+=j||!h?j:",",m+=j.length,o?o=(o+1)%5:"rgba("===j.substr(-5)&&(o=1),k===e[h]||e.length<=h?n+=k:(n&&(l.push(n),n=""),g=parseFloat(e[h]),l.push(g),l._firstPT={_next:l._firstPT,t:l,p:l.length-1,s:g,c:("="===k.charAt(1)?parseInt(k.charAt(0)+"1",10)*parseFloat(k.substr(2)):parseFloat(k)-g)||0,f:0,m:o&&4>o?Math.round:0}),m+=k.length;return n+=b.substr(m),n&&l.push(n),l.setRatio=L,l},N=function(a,b,c,d,e,f,g,h,i){"function"==typeof d&&(d=d(i||0,a));var j,k,l="get"===c?a[b]:c,m=typeof a[b],n="string"==typeof d&&"="===d.charAt(1),o={t:a,p:b,s:l,f:"function"===m,pg:0,n:e||b,m:f?"function"==typeof f?f:Math.round:0,pr:0,c:n?parseInt(d.charAt(0)+"1",10)*parseFloat(d.substr(2)):parseFloat(d)-l||0};return"number"!==m&&("function"===m&&"get"===c&&(k=b.indexOf("set")||"function"!=typeof a["get"+b.substr(3)]?b:"get"+b.substr(3),o.s=l=g?a[k](g):a[k]()),"string"==typeof l&&(g||isNaN(l))?(o.fp=g,j=M(l,d,h||F.defaultStringFilter,o),o={t:j,p:"setRatio",s:0,c:1,f:2,pg:0,n:e||b,pr:0,m:0}):n||(o.s=parseFloat(l),o.c=parseFloat(d)-o.s||0)),o.c?((o._next=this._firstPT)&&(o._next._prev=o),this._firstPT=o,o):void 0},O=F._internals={isArray:o,isSelector:G,lazyTweens:I,blobDif:M},P=F._plugins={},Q=O.tweenLookup={},R=0,S=O.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},T={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},U=C._rootFramesTimeline=new E,V=C._rootTimeline=new E,W=30,X=O.lazyRender=function(){var a,b=I.length;for(J={};--b>-1;)a=I[b],a&&a._lazy!==!1&&(a.render(a._lazy[0],a._lazy[1],!0),a._lazy=!1);I.length=0};V._startTime=h.time,U._startTime=h.frame,V._active=U._active=!0,setTimeout(X,1),C._updateRoot=F.render=function(){var a,b,c;if(I.length&&X(),V.render((h.time-V._startTime)*V._timeScale,!1,!1),U.render((h.frame-U._startTime)*U._timeScale,!1,!1),I.length&&X(),h.frame>=W){W=h.frame+(parseInt(F.autoSleep,10)||120);for(c in Q){for(b=Q[c].tweens,a=b.length;--a>-1;)b[a]._gc&&b.splice(a,1);0===b.length&&delete Q[c]}if(c=V._first,(!c||c._paused)&&F.autoSleep&&!U._first&&1===h._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||h.sleep()}}},h.addEventListener("tick",C._updateRoot);var Y=function(a,b,c){var d,e,f=a._gsTweenID;if(Q[f||(a._gsTweenID=f="t"+R++)]||(Q[f]={target:a,tweens:[]}),b&&(d=Q[f].tweens,d[e=d.length]=b,c))for(;--e>-1;)d[e]===b&&d.splice(e,1);return Q[f].tweens},Z=function(a,b,c,d){var e,f,g=a.vars.onOverwrite;return g&&(e=g(a,b,c,d)),g=F.onOverwrite,g&&(f=g(a,b,c,d)),e!==!1&&f!==!1},$=function(a,b,c,d,e){var f,g,h,i;if(1===d||d>=4){for(i=e.length,f=0;i>f;f++)if((h=e[f])!==b)h._gc||h._kill(null,a,b)&&(g=!0);else if(5===d)break;return g}var j,k=b._startTime+l,m=[],n=0,o=0===b._duration;for(f=e.length;--f>-1;)(h=e[f])===b||h._gc||h._paused||(h._timeline!==b._timeline?(j=j||_(b,0,o),0===_(h,j,o)&&(m[n++]=h)):h._startTime<=k&&h._startTime+h.totalDuration()/h._timeScale>k&&((o||!h._initted)&&k-h._startTime<=2e-10||(m[n++]=h)));for(f=n;--f>-1;)if(h=m[f],2===d&&h._kill(c,a,b)&&(g=!0),2!==d||!h._firstPT&&h._initted){if(2!==d&&!Z(h,b))continue;h._enabled(!1,!1)&&(g=!0)}return g},_=function(a,b,c){for(var d=a._timeline,e=d._timeScale,f=a._startTime;d._timeline;){if(f+=d._startTime,e*=d._timeScale,d._paused)return-100;d=d._timeline}return f/=e,f>b?f-b:c&&f===b||!a._initted&&2*l>f-b?l:(f+=a.totalDuration()/a._timeScale/e)>b+l?0:f-b-l};g._init=function(){var a,b,c,d,e,f,g=this.vars,h=this._overwrittenProps,i=this._duration,j=!!g.immediateRender,k=g.ease;if(g.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),e={};for(d in g.startAt)e[d]=g.startAt[d];if(e.overwrite=!1,e.immediateRender=!0,e.lazy=j&&g.lazy!==!1,e.startAt=e.delay=null,this._startAt=F.to(this.target,0,e),j)if(this._time>0)this._startAt=null;else if(0!==i)return}else if(g.runBackwards&&0!==i)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(j=!1),c={};for(d in g)S[d]&&"autoCSS"!==d||(c[d]=g[d]);if(c.overwrite=0,c.data="isFromStart",c.lazy=j&&g.lazy!==!1,c.immediateRender=j,this._startAt=F.to(this.target,0,c),j){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=k=k?k instanceof u?k:"function"==typeof k?new u(k,g.easeParams):v[k]||F.defaultEase:F.defaultEase,g.easeParams instanceof Array&&k.config&&(this._ease=k.config.apply(k,g.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(f=this._targets.length,a=0;f>a;a++)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],h?h[a]:null,a)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,h,0);if(b&&F._onPluginEvent("_onInitAllProps",this),h&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),g.runBackwards)for(c=this._firstPT;c;)c.s+=c.c,c.c=-c.c,c=c._next;this._onUpdate=g.onUpdate,this._initted=!0},g._initProps=function(b,c,d,e,f){var g,h,i,j,k,l;if(null==b)return!1;J[b._gsTweenID]&&X(),this.vars.css||b.style&&b!==a&&b.nodeType&&P.css&&this.vars.autoCSS!==!1&&H(this.vars,b);for(g in this.vars)if(l=this.vars[g],S[g])l&&(l instanceof Array||l.push&&o(l))&&-1!==l.join("").indexOf("{self}")&&(this.vars[g]=l=this._swapSelfInParams(l,this));else if(P[g]&&(j=new P[g])._onInitTween(b,this.vars[g],this,f)){for(this._firstPT=k={_next:this._firstPT,t:j,p:"setRatio",s:0,c:1,f:1,n:g,pg:1,pr:j._priority,m:0},h=j._overwriteProps.length;--h>-1;)c[j._overwriteProps[h]]=this._firstPT;(j._priority||j._onInitAllProps)&&(i=!0),(j._onDisable||j._onEnable)&&(this._notifyPluginsOfEnabled=!0),k._next&&(k._next._prev=k)}else c[g]=N.call(this,b,g,"get",l,g,0,null,this.vars.stringFilter,f);return e&&this._kill(e,b)?this._initProps(b,c,d,e,f):this._overwrite>1&&this._firstPT&&d.length>1&&$(b,this,c,this._overwrite,d)?(this._kill(c,b),this._initProps(b,c,d,e,f)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(J[b._gsTweenID]=!0),i)},g.render=function(a,b,c){var d,e,f,g,h=this._time,i=this._duration,j=this._rawPrevTime;if(a>=i-1e-7)this._totalTime=this._time=i,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(d=!0,e="onComplete",c=c||this._timeline.autoRemoveChildren),0===i&&(this._initted||!this.vars.lazy||c)&&(this._startTime===this._timeline._duration&&(a=0),(0>j||0>=a&&a>=-1e-7||j===l&&"isPause"!==this.data)&&j!==a&&(c=!0,j>l&&(e="onReverseComplete")),this._rawPrevTime=g=!b||a||j===a?a:l);else if(1e-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==h||0===i&&j>0)&&(e="onReverseComplete",d=this._reversed),0>a&&(this._active=!1,0===i&&(this._initted||!this.vars.lazy||c)&&(j>=0&&(j!==l||"isPause"!==this.data)&&(c=!0),this._rawPrevTime=g=!b||a||j===a?a:l)),this._initted||(c=!0);else if(this._totalTime=this._time=a,this._easeType){var k=a/i,m=this._easeType,n=this._easePower;(1===m||3===m&&k>=.5)&&(k=1-k),3===m&&(k*=2),1===n?k*=k:2===n?k*=k*k:3===n?k*=k*k*k:4===n&&(k*=k*k*k*k),1===m?this.ratio=1-k:2===m?this.ratio=k:.5>a/i?this.ratio=k/2:this.ratio=1-k/2}else this.ratio=this._ease.getRatio(a/i);if(this._time!==h||c){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!c&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=h,this._rawPrevTime=j,I.push(this),void(this._lazy=[a,b]);this._time&&!d?this.ratio=this._ease.getRatio(this._time/i):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==h&&a>=0&&(this._active=!0),0===h&&(this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._time||0===i)&&(b||this._callback("onStart"))),f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(0>a&&this._startAt&&a!==-1e-4&&this._startAt.render(a,b,c),b||(this._time!==h||d||c)&&this._callback("onUpdate")),e&&(!this._gc||c)&&(0>a&&this._startAt&&!this._onUpdate&&a!==-1e-4&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this._callback(e),0===i&&this._rawPrevTime===l&&g!==l&&(this._rawPrevTime=0))}},g._kill=function(a,b,c){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._lazy=!1,this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:F.selector(b)||b;var d,e,f,g,h,i,j,k,l,m=c&&this._time&&c._startTime===this._startTime&&this._timeline===c._timeline;if((o(b)||G(b))&&"number"!=typeof b[0])for(d=b.length;--d>-1;)this._kill(a,b[d],c)&&(i=!0);else{if(this._targets){for(d=this._targets.length;--d>-1;)if(b===this._targets[d]){h=this._propLookup[d]||{},this._overwrittenProps=this._overwrittenProps||[],e=this._overwrittenProps[d]=a?this._overwrittenProps[d]||{}:"all";break}}else{if(b!==this.target)return!1;h=this._propLookup,e=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(h){if(j=a||h,k=a!==e&&"all"!==e&&a!==h&&("object"!=typeof a||!a._tempKill),c&&(F.onOverwrite||this.vars.onOverwrite)){for(f in j)h[f]&&(l||(l=[]),l.push(f));if((l||!a)&&!Z(this,c,b,l))return!1}for(f in j)(g=h[f])&&(m&&(g.f?g.t[g.p](g.s):g.t[g.p]=g.s,i=!0),g.pg&&g.t._kill(j)&&(i=!0),g.pg&&0!==g.t._overwriteProps.length||(g._prev?g._prev._next=g._next:g===this._firstPT&&(this._firstPT=g._next),g._next&&(g._next._prev=g._prev),g._next=g._prev=null),delete h[f]),k&&(e[f]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return i},g.invalidate=function(){return this._notifyPluginsOfEnabled&&F._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],C.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-l,this.render(Math.min(0,-this._delay))),this},g._enabled=function(a,b){if(i||h.wake(),a&&this._gc){var c,d=this._targets;if(d)for(c=d.length;--c>-1;)this._siblings[c]=Y(d[c],this,!0);else this._siblings=Y(this.target,this,!0)}return C.prototype._enabled.call(this,a,b),this._notifyPluginsOfEnabled&&this._firstPT?F._onPluginEvent(a?"_onEnable":"_onDisable",this):!1},F.to=function(a,b,c){return new F(a,b,c)},F.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new F(a,b,c)},F.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new F(a,b,d)},F.delayedCall=function(a,b,c,d,e){return new F(b,0,{delay:a,onComplete:b,onCompleteParams:c,callbackScope:d,onReverseComplete:b,onReverseCompleteParams:c,immediateRender:!1,lazy:!1,useFrames:e,overwrite:0})},F.set=function(a,b){return new F(a,0,b)},F.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:F.selector(a)||a;var c,d,e,f;if((o(a)||G(a))&&"number"!=typeof a[0]){for(c=a.length,d=[];--c>-1;)d=d.concat(F.getTweensOf(a[c],b));for(c=d.length;--c>-1;)for(f=d[c],e=c;--e>-1;)f===d[e]&&d.splice(c,1)}else for(d=Y(a).concat(),c=d.length;--c>-1;)(d[c]._gc||b&&!d[c].isActive())&&d.splice(c,1);return d},F.killTweensOf=F.killDelayedCallsTo=function(a,b,c){"object"==typeof b&&(c=b,b=!1);for(var d=F.getTweensOf(a,b),e=d.length;--e>-1;)d[e]._kill(c,a)};var aa=s("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(","),this._propName=this._overwriteProps[0],this._priority=b||0,this._super=aa.prototype},!0);if(g=aa.prototype,aa.version="1.19.0",aa.API=2,g._firstPT=null,g._addTween=N,g.setRatio=L,g._kill=function(a){var b,c=this._overwriteProps,d=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=c.length;--b>-1;)null!=a[c[b]]&&c.splice(b,1);for(;d;)null!=a[d.n]&&(d._next&&(d._next._prev=d._prev),d._prev?(d._prev._next=d._next,d._prev=null):this._firstPT===d&&(this._firstPT=d._next)),d=d._next;return!1},g._mod=g._roundProps=function(a){for(var b,c=this._firstPT;c;)b=a[this._propName]||null!=c.n&&a[c.n.split(this._propName+"_").join("")],b&&"function"==typeof b&&(2===c.f?c.t._applyPT.m=b:c.m=b),c=c._next},F._onPluginEvent=function(a,b){var c,d,e,f,g,h=b._firstPT;if("_onInitAllProps"===a){for(;h;){for(g=h._next,d=e;d&&d.pr>h.pr;)d=d._next;(h._prev=d?d._prev:f)?h._prev._next=h:e=h,(h._next=d)?d._prev=h:f=h,h=g}h=b._firstPT=e}for(;h;)h.pg&&"function"==typeof h.t[a]&&h.t[a]()&&(c=!0),h=h._next;return c},aa.activate=function(a){for(var b=a.length;--b>-1;)a[b].API===aa.API&&(P[(new a[b])._propName]=a[b]);return!0},r.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,c=a.propName,d=a.priority||0,e=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},g=s("plugins."+c.charAt(0).toUpperCase()+c.substr(1)+"Plugin",function(){aa.call(this,c,d),this._overwriteProps=e||[]},a.global===!0),h=g.prototype=new aa(c);h.constructor=g,g.API=a.API;for(b in f)"function"==typeof a[b]&&(h[f[b]]=a[b]);return g.version=a.version,aa.activate([g]),g},e=a._gsQueue){for(f=0;f<e.length;f++)e[f]();for(g in p)p[g].func||a.console.log("GSAP encountered missing dependency: "+g)}i=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");
var Wmy_Load_Mag = /** @class */ (function () {
    function Wmy_Load_Mag() {
        this._wetData = {};
        this.resUrl = "";
        this._resDataArr = [];
        this._callbackOk = [];
        this._callbackProgress = [];
    }
    Object.defineProperty(Wmy_Load_Mag, "getThis", {
        get: function () {
            if (Wmy_Load_Mag._this == null) {
                Wmy_Load_Mag._this = new Wmy_Load_Mag();
            }
            return Wmy_Load_Mag._this;
        },
        enumerable: true,
        configurable: true
    });
    Wmy_Load_Mag.prototype.getWetData = function (url) {
        return this._wetData[url];
    };
    Wmy_Load_Mag.prototype.setWetData = function (obj, url) {
        if (this.resUrl == "") {
            this.resUrl = url;
            var V = null;
            try {
                var arr = JSON.parse(obj);
                V = arr[0]["V"];
            }
            catch (error) { }
            if (V != null) {
                if (fairygui.UIPackage["wObj"] == null) {
                    fairygui.UIPackage["wObj"] = {};
                }
                if (fairygui.UIPackage["wObj"].V == null || fairygui.UIPackage["wObj"].V == "") {
                    Wmy_Load_Mag.V = V;
                    fairygui.UIPackage["wObj"].V = Wmy_Load_Mag.V;
                }
                else {
                    Wmy_Load_Mag.V = fairygui.UIPackage["wObj"].V;
                }
            }
        }
        if (url == null) {
            url = this.resUrl;
        }
        this._wetData[url] = obj;
    };
    Wmy_Load_Mag.prototype.getResObj = function (resName, url) {
        var webData;
        if (url == null) {
            url = this.resUrl;
        }
        webData = this.getWetData(url);
        if (webData == null) {
            console.log("空数据");
            return null;
        }
        var arr = null;
        if (webData instanceof Array) {
            arr = webData;
        }
        if (arr == null) {
            try {
                arr = JSON.parse(webData);
            }
            catch (error) {
                console.log("加载材料数据错误", webData);
                return null;
            }
        }
        var resObj = null;
        for (var i = 0; i < arr.length; i++) {
            var obj = arr[i];
            if (obj["resName"] == resName) {
                resObj = obj;
                break;
            }
        }
        return resObj;
    };
    Wmy_Load_Mag.prototype.onLoadWetData = function (url, callbackOk) {
        if (url == "")
            return;
        if (this.getWetData(url) != null) {
            callbackOk.runWith([this.getWetData(url)]);
            return;
        }
        var load = Laya.loader.load(url, new Laya.Handler(this, function (obj) {
            this.setWetData(obj, url);
            callbackOk.runWith([this._wetData[url]]);
        }));
        return load;
    };
    Wmy_Load_Mag.prototype.onload = function (resObj, callbackOk, callbackProgress) {
        var resName = resObj["resName"];
        if (this._resDataArr[resName] != null) {
            this._resDataArr[resName].runWith([this._resDataArr[resName]]);
        }
        else {
            if (this._callbackOk[resName] != null) {
                this._callbackOk[resName].push(callbackOk);
                if (callbackProgress != null) {
                    this._callbackProgress[resName].push(callbackProgress);
                }
                return;
            }
            this._callbackOk[resName] = [];
            this._callbackOk[resName].push(callbackOk);
            this._callbackProgress[resName] = [];
            if (callbackProgress != null) {
                this._callbackProgress[resName].push(callbackProgress);
            }
            var Resres = resObj["Resres"];
            var data = {};
            var resData = resObj["resData"];
            if (resData != null && resData != "") {
                try {
                    data = JSON.parse(resData);
                }
                catch (error) {
                    console.log("加载材料数据错误", resData);
                }
            }
            var bName;
            var urlArr = [];
            var isCreate = false;
            for (var i = 0; i < Resres.length; i++) {
                var obj = Resres[i];
                var resUrl = obj["resUrl"];
                resUrl = WmyUtils.toCase(resUrl);
                var url = Wmy_Load_Mag.assetUrl + resUrl + Wmy_Load_Mag.V;
                if (resUrl.indexOf(".txt") >= 0) {
                    urlArr.push({ url: url, type: Laya.Loader.BUFFER });
                    bName = resUrl.split(".")[0];
                    bName = Wmy_Load_Mag.assetUrl + bName;
                }
                else if (resUrl.indexOf(".jpg") >= 0 || resUrl.indexOf(".png") >= 0) {
                    urlArr.push({ url: url, type: Laya.Loader.IMAGE });
                }
                else if (resUrl.indexOf(".mp3") >= 0) {
                    urlArr.push({ url: url, type: Laya.Loader.SOUND });
                }
                else {
                    urlArr.push({ url: url });
                }
            }
            Laya.loader.load(urlArr, Laya.Handler.create(this, this.onAssetConmplete, [resName, bName, data]), Laya.Handler.create(this, this.onAssetProgress, [resName], false));
        }
    };
    Wmy_Load_Mag.prototype.onload3d = function (resObj, callbackOk, callbackProgress) {
        var resName = resObj["resName"];
        if (this._resDataArr[resName] != null) {
            this._resDataArr[resName].runWith([this._resDataArr[resName]]);
        }
        else {
            if (this._callbackOk[resName] != null) {
                this._callbackOk[resName].push(callbackOk);
                if (callbackProgress != null) {
                    this._callbackProgress[resName].push(callbackProgress);
                }
                return;
            }
            this._callbackOk[resName] = [];
            this._callbackOk[resName].push(callbackOk);
            this._callbackProgress[resName] = [];
            if (callbackProgress != null) {
                this._callbackProgress[resName].push(callbackProgress);
            }
            var Resres = resObj["Resres"];
            var data = {};
            var resData = resObj["resData"];
            if (resData != null && resData != "") {
                try {
                    data = JSON.parse(resData);
                }
                catch (error) {
                    console.log("加载材料数据错误", resData);
                }
            }
            var bName;
            var urlArr = [];
            var urlList = [];
            for (var i = 0; i < Resres.length; i++) {
                var obj = Resres[i];
                var resUrl = obj["resUrl"];
                var url = Wmy_Load_Mag.assetUrl + resUrl + Wmy_Load_Mag.V;
                if (resUrl.indexOf(".ls") >= 0) {
                    urlArr.push({ url: url });
                    urlList.push(url);
                }
            }
            data.urlList = urlList;
            WmyLoad3d.getThis.onload3d(urlArr, Laya.Handler.create(this, this.onAssetConmplete, [resName, bName, data]), Laya.Handler.create(this, this.onAssetProgress, [resName], false));
        }
    };
    Wmy_Load_Mag.prototype.onAssetProgress = function (resName, progress) {
        var callbackProgressArr = this._callbackProgress[resName];
        for (var i = 0; i < callbackProgressArr.length; i++) {
            var callback = callbackProgressArr[i];
            callback.runWith([progress]);
        }
    };
    Wmy_Load_Mag.prototype.onAssetConmplete = function (resName, bName, data) {
        var callbackOkArr = this._callbackOk[resName];
        if (bName != null) {
            var bao = Laya.loader.getRes(bName + ".txt" + Wmy_Load_Mag.V);
            fairygui.UIPackage.addPackage(bName, bao);
            var bNameArr = bName.split("/");
            data.bName = bNameArr[bNameArr.length - 1];
            this._resDataArr[resName] = data;
        }
        for (var i = 0; i < callbackOkArr.length; i++) {
            var callbackOk = callbackOkArr[i];
            callbackOk.runWith([data]);
        }
        this._callbackOk[resName] = null;
        this._callbackProgress[resName] = null;
    };
    Wmy_Load_Mag.prototype.onAutoLoadAll = function (callbackOk, callbackProgress) {
        var webData = this.getWetData(this.resUrl);
        if (webData == null) {
            console.log("空数据");
            return null;
        }
        var arr = null;
        if (webData instanceof Array) {
            arr = webData;
        }
        if (arr == null) {
            try {
                arr = JSON.parse(webData);
            }
            catch (error) {
                console.log("加载材料数据错误", webData);
                return null;
            }
        }
        this._autoLoadrCallbackOk = callbackOk;
        this._autoLoadrCallbackProgress = callbackProgress;
        this._autoLoadInfoArr = {};
        this._autoLoadInfoArr["num"] = 0;
        this._autoLoadInfoArr["cNum"] = 0;
        this._autoLoadInfoArr["uiArr"] = [];
        this._autoLoadInfoArr["u3dArr"] = [];
        for (var i = 0; i < arr.length; i++) {
            var obj = arr[i];
            var resName = obj["resName"];
            var t = obj["type"];
            if (resName == null || resName == "" || t == null || t == "")
                continue;
            this.onAutoLoadObj(t, resName);
        }
    };
    Wmy_Load_Mag.prototype.onAutoLoadObj = function (type, resName) {
        var res = this.getResObj(resName);
        if (res == null)
            return;
        var resId = this._autoLoadInfoArr["num"];
        this._autoLoadInfoArr[resId] = {};
        this._autoLoadInfoArr[resId]["n"] = resName;
        this._autoLoadInfoArr[resId]["t"] = type;
        if (type == "ui") {
            this.onload(res, new Laya.Handler(this, this.onLoadOk, [resId]), new Laya.Handler(this, this.onLoading, [resId]));
            this._autoLoadInfoArr["num"] += 1;
        }
        else if (type == "mats") {
            var Resres = res["Resres"];
            var urlList = [];
            for (var i = 0; i < Resres.length; i++) {
                var obj = Resres[i];
                var resUrl = obj["resUrl"];
                var url = Wmy_Load_Mag.assetUrl + resUrl;
                urlList.push(url);
            }
            WmyLoadMats.getThis.onload3d(urlList, new Laya.Handler(this, this.onLoadOk, [resId]), new Laya.Handler(this, this.onLoading, [resId]));
            this._autoLoadInfoArr["num"] += 1;
        }
        else if (type == "cubeMap") {
            var Resres = res["Resres"];
            for (var i = 0; i < Resres.length; i++) {
                var obj = Resres[i];
                var resUrl = obj["resUrl"];
                var url = Wmy_Load_Mag.assetUrl + resUrl + Wmy_Load_Mag.V;
                Laya.TextureCube.load(url, null);
            }
        }
        else if (type == "u3d") {
            this.onload3d(res, new Laya.Handler(this, this.onLoadOk, [resId]), new Laya.Handler(this, this.onLoading, [resId]));
            this._autoLoadInfoArr["num"] += 1;
        }
    };
    Wmy_Load_Mag.prototype.getCube = function (resName, complete) {
        var res = this.getResObj(resName);
        if (res == null)
            return;
        var Resres = res["Resres"];
        var ResresObj = [];
        for (var i = 0; i < Resres.length; i++) {
            var obj = Resres[i];
            var resUrl = obj["resUrl"];
            var url = Wmy_Load_Mag.assetUrl + resUrl + Wmy_Load_Mag.V;
            Laya.TextureCube.load(url, new Laya.Handler(this, function (cube) {
                ResresObj[i] = cube;
                complete.runWith([cube, i]);
            }));
        }
        return ResresObj;
    };
    Wmy_Load_Mag.prototype.onLoading = function (resId, progress) {
        this._autoLoadInfoArr[resId]["p"] = progress;
        var num = this._autoLoadInfoArr["num"];
        var pNum = 0;
        for (var i = 0; i < num; i++) {
            var p = this._autoLoadInfoArr[i]["p"];
            if (p != null) {
                pNum += p;
            }
        }
        var pC = (pNum / this._autoLoadInfoArr["num"]) * 100;
        if (isNaN(pC))
            pC = 0;
        if (this._autoLoadrCallbackProgress != null) {
            this._autoLoadrCallbackProgress.runWith([pC]);
        }
    };
    Wmy_Load_Mag.prototype.onLoadOk = function (resId, data) {
        this._autoLoadInfoArr["cNum"] += 1;
        if (this._autoLoadInfoArr[resId]["t"] == "ui") {
            this._autoLoadInfoArr["uiArr"].push(data);
        }
        else if (this._autoLoadInfoArr[resId]["t"] == "u3d") {
            this._autoLoadInfoArr["u3dArr"].push(data);
        }
        if (this._autoLoadInfoArr["cNum"] >= this._autoLoadInfoArr["num"]) {
            if (this._autoLoadrCallbackOk != null) {
                this._autoLoadrCallbackOk.runWith([this._autoLoadInfoArr["uiArr"], this._autoLoadInfoArr["u3dArr"]]);
            }
        }
    };
    Wmy_Load_Mag.assetUrl = "";
    Wmy_Load_Mag.V = "";
    return Wmy_Load_Mag;
}());
//# sourceMappingURL=Wmy_Load_Mag.js.map
var V2 = /** @class */ (function () {
    function V2(_x, _y) {
        this.x = 0;
        this.y = 0;
        this.x = _x || 0;
        this.y = _y || 0;
    }
    //插值
    V2.Lerp = function (a, b, t) {
        var v2 = new V2();
        var vx = (b.x - a.x) * t + a.x;
        var vy = (b.y - a.y) * t + a.y;
        v2.x = vx;
        v2.y = vy;
        return v2;
    };
    //距离
    V2.Distance = function (a, b) {
        var dx = Math.abs(a.x - b.x);
        var dy = Math.abs(a.y - b.y);
        var d = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));
        d = parseFloat(d.toFixed(2));
        return d;
    };
    //减
    V2.Subtract = function (a, b) {
        var v2 = new V2();
        v2.x = a.x - b.x;
        v2.y = a.y - b.y;
        return v2;
    };
    //加
    V2.Add = function (a, b) {
        var v2 = new V2();
        v2.x = a.x + b.x;
        v2.y = a.y + b.y;
        return v2;
    };
    Object.defineProperty(V2.prototype, "length", {
        get: function () {
            var a = Math.pow(this.x * this.x + this.y * this.y, 0.5);
            return parseInt(a + "");
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(V2.prototype, "normalized", {
        get: function () {
            var length = this.length;
            var v2 = new V2();
            v2.x = this.x / length;
            v2.y = this.y / length;
            return v2;
        },
        enumerable: true,
        configurable: true
    });
    return V2;
}());
//# sourceMappingURL=V2.js.map
var ObjectUtils = /** @class */ (function () {
    function ObjectUtils() {
    }
    ObjectUtils.onGetInstanceName = function (name) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        try {
            var instance = Object.create(window[name].prototype);
            instance.constructor.apply(instance, args);
            return instance;
        }
        catch (error) {
            return null;
        }
    };
    ObjectUtils.onGetInstance = function (obj) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        var instance = Object.create(obj["prototype"]);
        instance.constructor.apply(instance, args);
        return instance;
    };
    ObjectUtils.onCreateObject = function (obj, values) {
        var instance = ObjectUtils.onGetInstance(obj);
        for (var key in values) {
            try {
                if (instance["set" + key] != null) {
                    instance["set" + key](values[key]);
                }
            }
            catch (error) {
            }
        }
        return instance;
    };
    return ObjectUtils;
}());
//# sourceMappingURL=ObjectUtils.js.map
var WmyUtils3D = /** @class */ (function () {
    function WmyUtils3D() {
    }
    WmyUtils3D.getObj3d = function (target, objName) {
        if (target == null) {
            return null;
        }
        if (target.name == objName) {
            return target;
        }
        for (var i = 0; i < target._children.length; i++) {
            var o = target._children[i];
            if (o._children.length <= 0) {
                if (o.name == objName) {
                    return o;
                }
            }
            else {
                var tempObj = this.getObj3d(o, objName);
                if (tempObj != null) {
                    return tempObj;
                }
            }
        }
        return null;
    };
    WmyUtils3D.setShaderAll = function (target, matsUrl, shadersUrl) {
        var _this = this;
        var assetUrl = Wmy_Load_Mag.assetUrl;
        var newMatsUrl = assetUrl + matsUrl + "wmyMats.txt";
        Laya.loader.load(newMatsUrl, Laya.Handler.create(this, function (assetUrl, matsUrl, shadersUrl, data) {
            var array = data["mats"];
            for (var i = 0; i < array.length; i++) {
                var obj = array[i];
                if (obj["targetName"] == "")
                    continue;
                var target3D = WmyUtils3D.getObj3d(target, obj["targetName"]);
                if (target3D == null)
                    continue;
                var matUrl = assetUrl + matsUrl + obj["matUrl"] + Wmy_Load_Mag.V;
                var shaderNameUrl = assetUrl + shadersUrl + obj["shaderName"] + ".xml" + Wmy_Load_Mag.V;
                Laya.BaseMaterial.load(matUrl, Laya.Handler.create(_this, function (target3D, shaderNameUrl, m) {
                    WmyShaderMsg.setShader(target3D, m, shaderNameUrl);
                }, [target3D, shaderNameUrl]));
            }
        }, [assetUrl, matsUrl, shadersUrl]), null, Laya.Loader.JSON);
    };
    WmyUtils3D.aniPlay = function (target, targetName, aniName) {
        var target3d = this.getObj3d(target, targetName);
        var target3d_ani = target3d.getComponent(Laya.Animator);
        target3d_ani.play(aniName);
        return target3d_ani;
    };
    WmyUtils3D.onShadow = function (directionLight, shadowResolution, shadowPCFType, shadowDistance, isShadow) {
        if (shadowResolution === void 0) { shadowResolution = 512; }
        if (shadowPCFType === void 0) { shadowPCFType = 1; }
        if (shadowDistance === void 0) { shadowDistance = 100; }
        if (isShadow === void 0) { isShadow = true; }
        //灯光开启阴影
        directionLight.shadow = isShadow;
        //可见阴影距离
        directionLight.shadowDistance = shadowDistance;
        //生成阴影贴图尺寸
        directionLight.shadowResolution = shadowResolution;
        //directionLight.shadowPSSMCount=1;
        //模糊等级,越大越高,更耗性能
        directionLight.shadowPCFType = shadowPCFType;
    };
    WmyUtils3D.onCastShadow = function (target, type, isShadow, isChildren) {
        if (type === void 0) { type = 0; }
        if (isShadow === void 0) { isShadow = true; }
        if (isChildren === void 0) { isChildren = true; }
        if (target instanceof Laya.MeshSprite3D) {
            var ms3D = target;
            if (type == 0) {
                //接收阴影
                ms3D.meshRenderer.receiveShadow = isShadow;
            }
            else if (type == 1) {
                //产生阴影
                ms3D.meshRenderer.castShadow = isShadow;
            }
            else if (type == 2) {
                //接收阴影
                ms3D.meshRenderer.receiveShadow = isShadow;
                //产生阴影
                ms3D.meshRenderer.castShadow = isShadow;
            }
        }
        if (target instanceof Laya.SkinnedMeshSprite3D) {
            var sms3d = target;
            if (type == 0) {
                sms3d.skinnedMeshRenderer.receiveShadow = isShadow;
            }
            else if (type == 1) {
                sms3d.skinnedMeshRenderer.castShadow = isShadow;
            }
        }
        if (isChildren) {
            for (var i = 0; i < target.numChildren; i++) {
                var obj = target.getChildAt(i);
                this.onCastShadow(obj, type, isShadow);
            }
        }
    };
    WmyUtils3D.rgb2hex = function (r, g, b) {
        var _hex = "#" + this.hex(r) + this.hex(g) + this.hex(b);
        return _hex.toUpperCase();
    };
    WmyUtils3D.hex = function (x) {
        x = this.onNumTo(x);
        return ("0" + parseInt(x).toString(16)).slice(-2);
    };
    WmyUtils3D.onNumTo = function (n) {
        if ((n + "").indexOf(".") >= 0) {
            n = parseFloat(n.toFixed(2));
        }
        return n;
    };
    WmyUtils3D.lerpF = function (a, b, s) {
        return (a + (b - a) * s);
    };
    return WmyUtils3D;
}());
//# sourceMappingURL=WmyUtils3D.js.map
var WmyShaderMsg = /** @class */ (function () {
    function WmyShaderMsg() {
    }
    /**
     * @param	target	对象
     * @param	mat	材质
     * @param	shaderUrl	shader的地址
     * @param	isNewMateria	是否新材质
     */
    WmyShaderMsg.setShader = function (target, mat, shaderUrl, isNewMateria, spriteDefines, materialDefines) {
        if (isNewMateria === void 0) { isNewMateria = false; }
        if (spriteDefines === void 0) { spriteDefines = "null"; }
        if (materialDefines === void 0) { materialDefines = "null"; }
        var renderer;
        var sharedMaterial;
        if (target instanceof Laya.SkinnedMeshSprite3D) {
            renderer = target.skinnedMeshRenderer;
            sharedMaterial = renderer.sharedMaterial;
        }
        else {
            renderer = target.meshRenderer;
            sharedMaterial = renderer.sharedMaterial;
        }
        if (isNewMateria) {
            sharedMaterial = sharedMaterial.clone();
            renderer.sharedMaterial = sharedMaterial;
        }
        for (var key in mat) {
            try {
                sharedMaterial[key] = mat[key];
            }
            catch (error) {
            }
        }
        Laya.loader.load(shaderUrl, Laya.Handler.create(this, this.shaderConmplete, [sharedMaterial, spriteDefines, materialDefines]), null, Laya.Loader.XML);
        return sharedMaterial;
    };
    WmyShaderMsg.shaderConmplete = function (sharedMaterial, spriteDefines, materialDefines, data) {
        if (data == null)
            return;
        var xmlNode = data.firstChild;
        var shaderName = this.getAttributesValue(xmlNode, "name");
        var i, o, oName, v0, v1, initV;
        var attributeMap = {};
        var attributeMapNode = this.getNode(xmlNode, "attributeMap");
        var attributeMapArr = this.getNodeArr(attributeMapNode, "data");
        for (i = 0; i < attributeMapArr.length; i++) {
            o = attributeMapArr[i];
            oName = this.getAttributesValue(o, "name");
            v0 = this.getAttributesValue(o, "v0");
            attributeMap[oName] = this.getV(v0, "int");
        }
        var uniformMap = {};
        var uniformMapNode = this.getNode(xmlNode, "uniformMap");
        var uniformMapArr = this.getNodeArr(uniformMapNode, "data");
        for (i = 0; i < uniformMapArr.length; i++) {
            initV = null;
            o = uniformMapArr[i];
            oName = this.getAttributesValue(o, "name");
            v0 = this.getAttributesValue(o, "v0");
            v1 = this.getAttributesValue(o, "v1");
            var vArr = [];
            vArr[0] = this.getV(v0, "int");
            vArr[1] = this.getV(v1, "int");
            uniformMap[oName] = vArr;
            if (sharedMaterial["wmyValues"] != null) {
                if (sharedMaterial["wmyValues"]["cube"] != null) {
                    var cubeName = sharedMaterial["wmyValues"]["cube"];
                    Wmy_Load_Mag.getThis.getCube(cubeName, new Laya.Handler(this, function (cube, i) {
                        if (i == 0) {
                            sharedMaterial._shaderValues.setTexture(Laya.Scene3D.REFLECTIONTEXTURE, cube);
                        }
                    }));
                }
                initV = sharedMaterial["wmyValues"][oName];
            }
            //initV=this.getAttributesValue(o,"initV");
            if (initV != null) {
                initV = initV.split(",");
                if (initV.length == 4) {
                    sharedMaterial._shaderValues.setVector(vArr[0], new Laya.Vector4(parseFloat(initV[0]), parseFloat(initV[1]), parseFloat(initV[2]), parseFloat(initV[3])));
                }
                else if (initV.length == 3) {
                    sharedMaterial._shaderValues.setVector(vArr[0], new Laya.Vector3(parseFloat(initV[0]), parseFloat(initV[1]), parseFloat(initV[2])));
                }
                else if (initV.length == 2) {
                    sharedMaterial._shaderValues.setVector(vArr[0], new Laya.Vector2(parseFloat(initV[0]), parseFloat(initV[1])));
                }
                else if (initV.length == 1) {
                    if (!isNaN(parseFloat(initV[0]))) {
                        sharedMaterial._shaderValues.setNumber(vArr[0], parseFloat(initV[0]));
                    }
                    else {
                        var strObj = initV[0] + "";
                        if (strObj == "tex") {
                            var tex = sharedMaterial[oName];
                            sharedMaterial._shaderValues.setTexture(vArr[0], tex);
                        }
                    }
                }
            }
        }
        if (spriteDefines == "null") {
            spriteDefines = Laya.SkinnedMeshSprite3D.shaderDefines;
        }
        if (materialDefines == "null") {
            materialDefines = Laya.BlinnPhongMaterial.shaderDefines;
        }
        var shader = Laya.Shader3D.add(shaderName, attributeMap, uniformMap, spriteDefines, materialDefines);
        var SubShaderNode = this.getNode(xmlNode, "SubShader");
        var renderModeNode = this.getNode(xmlNode, "renderMode");
        if (renderModeNode != null) {
            var renderMode = this.getAttributesValue(renderModeNode, "v");
            if (renderMode != null) {
                sharedMaterial["renderMode"] = this.getV(renderMode);
            }
        }
        var PassArr = this.getNodeArr(SubShaderNode, "Pass");
        for (i = 0; i < PassArr.length; i++) {
            var pass = PassArr[i];
            var vsNode = this.getNode(pass, "VERTEX");
            var vs = vsNode.textContent;
            vs = vs.replace(/(\r)/g, "");
            var psNode = this.getNode(pass, "FRAGMENT");
            var ps = psNode.textContent;
            ps = ps.replace(/(\r)/g, "");
            if (i > 0) {
                var rs = sharedMaterial.getRenderState(0).clone();
                sharedMaterial._renderStates.push(rs);
            }
            var cullNode = this.getNode(pass, "cull");
            if (cullNode != null) {
                var cull = this.getAttributesValue(cullNode, "v");
                if (cull != null) {
                    sharedMaterial.getRenderState(i).cull = this.getV(cull);
                }
            }
            shader._addShaderPass(vs, ps);
        }
        sharedMaterial._shader = shader;
    };
    WmyShaderMsg.getV = function (obj, backType) {
        if (backType === void 0) { backType = "null"; }
        var tempNameArr, tempObj, tempV, ii;
        tempNameArr = obj.split(".");
        if (tempNameArr[0] === "Laya") {
            tempV = Laya;
        }
        else if (tempNameArr[0] === "laya") {
            tempV = laya;
        }
        for (ii = 1; ii < tempNameArr.length; ii++) {
            tempV = tempV[tempNameArr[ii]];
        }
        if (tempV != null) {
            return tempV;
        }
        else if (backType != "null") {
            if (backType == "int") {
                return parseInt(obj);
            }
            else {
                return obj;
            }
        }
        return null;
    };
    /**
     * Converts a string in the format "#rrggbb" or "rrggbb" to the corresponding
     * uint representation.
     *
     * @param color The color in string format.
     * @return The color in uint format.
     */
    WmyShaderMsg.colorStringToUint = function (color) {
        return Number("0x" + color.replace("#", ""));
    };
    WmyShaderMsg.getAttributesValue = function (node, key) {
        return key in node.attributes ? node["attributes"][key]["nodeValue"] : null;
    };
    WmyShaderMsg.getNode = function (xml, key) {
        var childNodes = xml.childNodes;
        var node = null;
        for (var i = 0; i < childNodes.length; i++) {
            var obj = childNodes[i];
            if (obj["nodeName"] == key) {
                node = obj;
                break;
            }
        }
        return node;
    };
    WmyShaderMsg.getNodeArr = function (xml, key) {
        var childNodes = xml.childNodes;
        var nodeArr = [];
        for (var i = 0; i < childNodes.length; i++) {
            var obj = childNodes[i];
            if (obj["nodeName"] == key) {
                nodeArr.push(obj);
            }
        }
        return nodeArr;
    };
    return WmyShaderMsg;
}());
//# sourceMappingURL=WmyShaderMsg.js.map
var WmyLoadMats = /** @class */ (function () {
    function WmyLoadMats() {
        this._matsUrlArr = [];
        this._matOk = false;
        this._matNum = 0;
        this._matP = 0;
        this._matP2 = 0;
    }
    Object.defineProperty(WmyLoadMats, "getThis", {
        get: function () {
            if (WmyLoadMats._this == null) {
                WmyLoadMats._this = new WmyLoadMats();
            }
            return WmyLoadMats._this;
        },
        enumerable: true,
        configurable: true
    });
    WmyLoadMats.prototype.onload3d = function (urlList, callbackOk, callbackProgress) {
        this._callbackOk = callbackOk;
        this._callbackProgress = callbackProgress;
        Laya.loader.load(urlList, Laya.Handler.create(this, this.__onUrlArrOk, [urlList]));
    };
    WmyLoadMats.prototype.__onUrlArrOk = function (urlList) {
        for (var i = 0; i < urlList.length; i++) {
            var url = urlList[i];
            var txt = Laya.loader.getRes(url);
            var jsObj = JSON.parse(txt);
            var arr = url.split("/");
            var matsUrl = url.replace(arr[arr.length - 1], "");
            var array = jsObj["mats"];
            for (var j = 0; j < array.length; j++) {
                var obj = array[j];
                if (obj["targetName"] == "")
                    continue;
                var matUrl = Wmy_Load_Mag.assetUrl + matsUrl + obj["matUrl"] + Wmy_Load_Mag.V;
                this._matsUrlArr.push(matUrl);
            }
        }
        for (var i = 0; i < this._matsUrlArr.length; i++) {
            url = this._matsUrlArr[i];
            Laya.loader.create(url, Laya.Handler.create(this, this.__onMatArrOk), Laya.Handler.create(this, this.__onMatArrP));
        }
    };
    WmyLoadMats.prototype.__onMatArrP = function (p) {
        var pNum = p * (this._matNum + 1);
        if (pNum > this._matP)
            this._matP = pNum;
        this._matP2 = (this._matP / this._matsUrlArr.length);
        if (this._callbackProgress != null) {
            this._callbackProgress.runWith([this._matP2]);
        }
    };
    WmyLoadMats.prototype.__onMatArrOk = function () {
        this._matNum += 1;
        if (this._matNum >= this._matsUrlArr.length) {
            if (this._callbackOk != null) {
                this._callbackOk.run();
            }
        }
    };
    return WmyLoadMats;
}());
//# sourceMappingURL=WmyLoadMats.js.map
var WmyLoad3d = /** @class */ (function () {
    function WmyLoad3d() {
        this._meshArr = [];
        this._meshOk = false;
        this._meshNum = 0;
        this._meshP = 0;
        this._meshP2 = 0;
        this._matArr = [];
        this._matOk = false;
        this._matNum = 0;
        this._matP = 0;
        this._matP2 = 0;
    }
    Object.defineProperty(WmyLoad3d, "getThis", {
        get: function () {
            if (WmyLoad3d._this == null) {
                WmyLoad3d._this = new WmyLoad3d();
            }
            return WmyLoad3d._this;
        },
        enumerable: true,
        configurable: true
    });
    WmyLoad3d.prototype.onload3d = function (urlList, callbackOk, callbackProgress) {
        this._urlList = [];
        this._callbackOk = callbackOk;
        this._callbackProgress = callbackProgress;
        for (var i = 0; i < urlList.length; i++) {
            var obj = urlList[i];
            var obj1 = {};
            obj1.url = obj["url"];
            this._urlList.push(obj1);
            obj["url"] += "wmy";
            urlList[i] = obj;
        }
        Laya.loader.load(urlList, Laya.Handler.create(this, this.__onlsUrlArrOk, [urlList]));
    };
    WmyLoad3d.prototype.__onlsUrlArrOk = function (lsUrlArr) {
        for (var i = 0; i < lsUrlArr.length; i++) {
            var obj = lsUrlArr[i];
            var url = obj["url"];
            var s0 = url.split("/");
            var s1 = url.replace(s0[s0.length - 1], "");
            var rootUrl = s1;
            var txt = Laya.loader.getRes(url);
            var jsObj = JSON.parse(txt);
            this.__tiQuUrl(jsObj["data"], rootUrl);
        }
        for (var i = 0; i < this._meshArr.length; i++) {
            url = Wmy_Load_Mag.assetUrl + this._meshArr[i] + Wmy_Load_Mag.V;
            Laya.loader.create(url, Laya.Handler.create(this, this.__onMeshArrOk), Laya.Handler.create(this, this.__onMeshArrP));
        }
        for (var i = 0; i < this._matArr.length; i++) {
            url = Wmy_Load_Mag.assetUrl + this._matArr[i] + Wmy_Load_Mag.V;
            Laya.loader.create(url, Laya.Handler.create(this, this.__onMatArrOk), Laya.Handler.create(this, this.__onMatArrP));
        }
    };
    WmyLoad3d.prototype.__onMeshArrP = function (p) {
        var pNum = p * (this._meshNum + 1);
        if (pNum > this._meshP)
            this._meshP = pNum;
        this._meshP2 = (this._meshP / this._meshArr.length);
        this.__onLoadP();
    };
    WmyLoad3d.prototype.__onMeshArrOk = function () {
        this._meshNum += 1;
        if (this._meshNum >= this._meshArr.length) {
            this._meshOk = true;
            this.__onLoadOK();
        }
    };
    WmyLoad3d.prototype.__onMatArrP = function (p) {
        var pNum = p * (this._matNum + 1);
        if (pNum > this._matP)
            this._matP = pNum;
        this._matP2 = (this._matP / this._matArr.length);
        this.__onLoadP();
    };
    WmyLoad3d.prototype.__onMatArrOk = function () {
        this._matNum += 1;
        if (this._matNum >= this._matArr.length) {
            this._matOk = true;
            this.__onLoadOK();
        }
    };
    WmyLoad3d.prototype.__onLoadP = function () {
        var pNum = (this._meshP2 + this._matP2) / 2 * 0.92;
        if (this._callbackProgress != null) {
            this._callbackProgress.runWith([pNum]);
        }
    };
    WmyLoad3d.prototype.__onLoadOK = function () {
        var _this = this;
        if (this._meshOk && this._matOk) {
            Laya.loader.create(this._urlList, Laya.Handler.create(this, function () {
                if (_this._callbackOk != null) {
                    _this._callbackOk.run();
                }
            }));
        }
    };
    WmyLoad3d.prototype.__tiQuUrl = function (obj, url) {
        if (url === void 0) { url = ""; }
        if (obj["props"] != null && obj["props"]["meshPath"] != null) {
            var meshPath = url + obj["props"]["meshPath"];
            if (this._meshArr.indexOf(meshPath) < 0) {
                this._meshArr.push(meshPath);
            }
            var materials = obj["props"]["materials"];
            if (materials != null) {
                for (var ii = 0; ii < materials.length; ii++) {
                    var path = url + materials[ii]["path"];
                    if (this._matArr.indexOf(path) < 0) {
                        this._matArr.push(path);
                    }
                }
            }
        }
        var child = obj["child"];
        if (child != null && child.length > 0) {
            for (var i = 0; i < child.length; i++) {
                this.__tiQuUrl(child[i], url);
            }
        }
    };
    return WmyLoad3d;
}());
//# sourceMappingURL=WmyLoad3d.js.map
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
//角色控制
var PlayerKz = /** @class */ (function (_super) {
    __extends(PlayerKz, _super);
    function PlayerKz() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._aniId = 0;
        _this._dir = 0;
        return _this;
    }
    PlayerKz.prototype.onAwake = function () {
        this.mySprite3D = this.owner;
        this.scene3D = this.mySprite3D.scene;
        this._yy = this.mySprite3D.getChildByName("yy");
        this._role = this.mySprite3D.getChildByName("role");
        var GFX = this._role.getChildByName("GFX");
        this._animator = GFX.getComponent(Laya.Animator);
        this._character = this.mySprite3D.addComponent(WmyPhysicsWorld_Character);
    };
    /**键盘按下处理*/
    PlayerKz.prototype.onKeyDown = function (e) {
        var keyCode = e["keyCode"];
        if (keyCode == 32) {
            this._character.onJump(true);
        }
    };
    /**键盘抬起处理*/
    PlayerKz.prototype.onKeyUp = function (e) {
        var keyCode = e["keyCode"];
        if (keyCode == 32) {
            this._character.onJump(false);
        }
    };
    PlayerKz.prototype.onPreRender = function () {
        if (this._yy != null) {
            var yyPos = this._yy.transform.position;
            yyPos.y = 0.02;
            this._yy.transform.position = yyPos;
        }
        this._character.isU = Laya.KeyBoardManager.hasKeyDown(87);
        this._character.isD = Laya.KeyBoardManager.hasKeyDown(83);
        this._character.isL = Laya.KeyBoardManager.hasKeyDown(65);
        this._character.isR = Laya.KeyBoardManager.hasKeyDown(68);
        if (this._character.isL) {
            this.onTweenMaxRotation(-1);
        }
        else if (this._character.isR) {
            this.onTweenMaxRotation(1);
        }
        if (this._character.isU || this._character.isD || this._character.isL || this._character.isR) {
            this.onAnimator(1);
        }
        else {
            this.onAnimator(0);
        }
    };
    PlayerKz.prototype.onAnimator = function (aniId) {
        if (this._animator == null)
            return;
        if (this._aniId == aniId)
            return;
        this._aniId = aniId;
        switch (this._aniId) {
            case 0:
                this._animator.play("Idle");
                break;
            case 1:
                this._animator.play("Walk");
                break;
            default:
                break;
        }
    };
    PlayerKz.prototype.onTweenMaxRotation = function (dir) {
        var _this = this;
        if (dir === void 0) { dir = 1; }
        if (this._role == null)
            return;
        if (this._dir == dir)
            return;
        var r = dir == 1 ? 0 : -180;
        this["_rY"] = this._role.transform.localRotationEulerY;
        TweenMax.to(this, 0.25, { _rY: r, onUpdate: function () {
                _this._role.transform.localRotationEulerY = _this["_rY"];
            } });
    };
    return PlayerKz;
}(Laya.Script));
//# sourceMappingURL=PlayerKz.js.map
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var WmyCamera = /** @class */ (function (_super) {
    __extends(WmyCamera, _super);
    function WmyCamera() {
        var _this = _super.call(this) || this;
        _this._upNum = 0;
        _this._distance = 0;
        _this._angleNum = 0;
        _this._dx = 0;
        _this._dy = 0;
        _this.lastMouseX = 0;
        _this.lastMouseY = 0;
        _this._isMouseDown = false;
        //上次记录的两个触模点之间距离
        _this._lastDistance = 0;
        _this._lastX = 0;
        _this._lastZ = 0;
        _this._touchesNum = 0;
        _this._v3 = Laya.Vector3.ZERO;
        _this._rotaionSpeed = 0.01;
        if (WmyCamera._this == null) {
            WmyCamera._this = _this;
        }
        return _this;
    }
    Object.defineProperty(WmyCamera, "getThis", {
        get: function () {
            return WmyCamera._this;
        },
        enumerable: true,
        configurable: true
    });
    WmyCamera.prototype.onAwake = function () {
        this.cam = this.owner;
        this.scene3D = this.cam.scene;
        this._camBox = this.cam.parent;
        this._upNum = this.cam.transform.localPositionY;
        this._distance = this.cam.transform.localPositionZ;
    };
    WmyCamera.prototype.onAddEvent = function (target) {
        this._target = target || Laya.stage;
        this._target.on(Laya.Event.MOUSE_DOWN, this, this.stageMouseDown);
        this._target.on(Laya.Event.MOUSE_UP, this, this.stageMouseUp);
        this._target.on(Laya.Event.MOUSE_OUT, this, this.stageMouseUp);
        this._target.on(Laya.Event.MOUSE_MOVE, this, this.stageMouseMove);
        this._target.on(Laya.Event.MOUSE_WHEEL, this, this.stageMouseWheel);
    };
    WmyCamera.prototype.onSetTarget = function (targetPos) {
        TweenMax.killTweensOf(this);
        if (targetPos != null) {
            this._camBox.transform.position = targetPos;
        }
    };
    WmyCamera.prototype.onSetInfo = function (upNum, distance, angleNum, upNum1, upNum2, offXZ) {
        TweenMax.killTweensOf(this);
        this._upNum = upNum || this.cam.transform.localPositionY;
        this._upNum1 = upNum1;
        this._upNum2 = upNum2;
        this._distance = distance || this.cam.transform.localPositionZ;
        this._angleNum = angleNum || this._angleNum;
        this._dx = this.lastMouseX = 0;
        this._dy = this.lastMouseY = 0;
        if (offXZ != null) {
            this._offXZ = Laya.Vector4.ZERO;
            this._offXZ.x = this._camBox.transform.position.x - Math.abs(offXZ);
            this._offXZ.y = this._camBox.transform.position.x + Math.abs(offXZ);
            this._offXZ.z = this._camBox.transform.position.z - Math.abs(offXZ);
            this._offXZ.w = this._camBox.transform.position.z + Math.abs(offXZ);
        }
    };
    WmyCamera.prototype.stageMouseDown = function (e) {
        var touches = e.touches;
        if (touches)
            this._touchesNum = touches.length;
        if (e.currentTarget != this._target)
            return;
        this._isMouseDown = true;
        TweenMax.killTweensOf(this);
        if (touches && touches.length == 2) {
            this._lastDistance = this.getDistance(touches);
            this._lastX = touches[0].stageX;
            this._lastZ = touches[0].stageY;
        }
        else if (touches && touches.length == 1) {
            this._dx = this.lastMouseX = touches[0].stageX;
            this._dy = this.lastMouseY = touches[0].stageY;
        }
        else if (touches == null) {
            this._dx = this.lastMouseX = Laya.stage.mouseX;
            this._dy = this.lastMouseY = Laya.stage.mouseY;
        }
    };
    WmyCamera.prototype.stageMouseUp = function (e) {
        var touches = e.touches;
        if (touches)
            this._touchesNum = touches.length;
        if (e.currentTarget != this._target)
            return;
        if (touches && touches.length == 1) {
            this._dx = this.lastMouseX = touches[0].stageX;
            this._dy = this.lastMouseY = touches[0].stageY;
        }
        else if (touches == null || touches.length == 0) {
            this._isMouseDown = false;
        }
    };
    WmyCamera.prototype.stageMouseMove = function (e) {
        var touches = e.touches;
        if (touches)
            this._touchesNum = touches.length;
        if (e.currentTarget != this._target || !this._isMouseDown)
            return;
        if (touches && touches.length == 2) {
            var distance = this.getDistance(e.touches);
            //判断当前距离与上次距离变化，确定是放大还是缩小
            var factor = 0.05;
            this.cam.fieldOfView -= (distance - this._lastDistance) * factor;
            if (this.cam.fieldOfView < 40)
                this.cam.fieldOfView = 40;
            if (this.cam.fieldOfView > 70)
                this.cam.fieldOfView = 70;
            this._lastDistance = distance;
            //平移
            var d = V2.Distance(new V2(touches[0].stageX, touches[0].stageY), new V2(this._lastX, this._lastZ));
            if (d > 3) {
                var poff = 0.04;
                var dx = (touches[0].stageX - this._lastX);
                var dy = (touches[0].stageY - this._lastZ);
                var rad = Math.atan2(dx, dy);
                var degree = rad * 180 / Math.PI;
                var rn = Math.PI / 180 * (this._angleNum + degree);
                var speedX = Math.sin(rn) * d * poff;
                var speedZ = Math.cos(rn) * d * poff;
                this._camBox.transform.translate(new Laya.Vector3(speedX, 0, speedZ), false);
            }
            this._lastX = touches[0].stageX;
            this._lastZ = touches[0].stageY;
        }
        else if (touches && touches.length == 1) {
            this.lastMouseX = touches[0].stageX;
            this.lastMouseY = touches[0].stageY;
            TweenMax.to(this, 1.5, { _dx: this.lastMouseX, _dy: this.lastMouseY });
        }
        else if (touches == null) {
            this.lastMouseX = Laya.stage.mouseX;
            this.lastMouseY = Laya.stage.mouseY;
            TweenMax.to(this, 1.5, { _dx: this.lastMouseX, _dy: this.lastMouseY });
        }
    };
    WmyCamera.prototype.stageMouseWheel = function (e) {
        var factor = 1;
        this.cam.fieldOfView -= (e.delta) * factor;
        if (this.cam.fieldOfView < 40)
            this.cam.fieldOfView = 40;
        if (this.cam.fieldOfView > 70)
            this.cam.fieldOfView = 70;
    };
    WmyCamera.prototype.onUpdate = function () {
        if (this._touchesNum <= 1) {
            var offsetX = Math.abs(this.lastMouseX) - Math.abs(this._dx);
            var offsetY = Math.abs(this.lastMouseY) - Math.abs(this._dy);
            var dx = offsetX * this._rotaionSpeed;
            var dy = offsetY * this._rotaionSpeed * 0.4;
            this._angleNum -= dx;
            this._upNum += dy;
            if (this._upNum1 != null) {
                if (this._upNum < this._upNum1)
                    this._upNum = this._upNum1;
            }
            if (this._upNum2 != null) {
                if (this._upNum > this._upNum2)
                    this._upNum = this._upNum2;
            }
            this._v3.y = this._upNum;
            this._v3.x = Math.sin((this._angleNum) * Math.PI / 180) * this._distance;
            this._v3.z = Math.cos((this._angleNum) * Math.PI / 180) * this._distance;
            this.cam.transform.localPosition = this._v3;
            this.cam.transform.lookAt(this._camBox.transform.position, Laya.Vector3.UnitY);
        }
        if (this._offXZ != null) {
            var pos = this._camBox.transform.position;
            if (pos.x < this._offXZ.x) {
                pos.x = this._offXZ.x;
            }
            else if (pos.x > this._offXZ.y) {
                pos.x = this._offXZ.y;
            }
            if (pos.z < this._offXZ.z) {
                pos.z = this._offXZ.z;
            }
            else if (pos.z > this._offXZ.w) {
                pos.z = this._offXZ.w;
            }
            this._camBox.transform.position = pos;
        }
    };
    /**计算两个触摸点之间的距离*/
    WmyCamera.prototype.getDistance = function (points) {
        var distance = 0;
        if (points && points.length == 2) {
            var dx = points[0].stageX - points[1].stageX;
            var dy = points[0].stageY - points[1].stageY;
            distance = Math.sqrt(dx * dx + dy * dy);
        }
        return distance;
    };
    WmyCamera.prototype.onStageMouseDown = function (e) {
        var _outHitAllInfo = this.get3dClick();
        if (_outHitAllInfo.length > 0) {
            this._clickObj = _outHitAllInfo[0].collider.owner;
        }
    };
    WmyCamera.prototype.onStageMouseUp = function (e) {
        var _outHitAllInfo = this.get3dClick();
        var tempObj = null;
        if (_outHitAllInfo.length > 0) {
            tempObj = _outHitAllInfo[0].collider.owner;
            if (tempObj == this._clickObj) {
            }
        }
        this._clickObj = null;
    };
    WmyCamera.prototype.get3dClick = function (collisonGroup, collisionMask) {
        var _ray = new Laya.Ray(new Laya.Vector3(0, 0, 0), new Laya.Vector3(0, 0, 0));
        var _point = new Laya.Vector2();
        var _outHitAllInfo = new Array();
        //从屏幕空间生成射线
        _point.elements[0] = Laya.MouseManager.instance.mouseX;
        _point.elements[1] = Laya.MouseManager.instance.mouseY;
        this.cam.viewportPointToRay(_point, _ray);
        //射线检测获取所有检测碰撞到的物体
        if (this.scene3D.physicsSimulation != null) {
            this.scene3D.physicsSimulation.rayCastAll(_ray, _outHitAllInfo, 10000, collisonGroup, collisionMask);
        }
        return _outHitAllInfo;
    };
    return WmyCamera;
}(Laya.Script));
//# sourceMappingURL=WmyCamera.js.map
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var WmyLight = /** @class */ (function (_super) {
    __extends(WmyLight, _super);
    function WmyLight() {
        var _this = _super.call(this) || this;
        if (WmyLight._this == null) {
            WmyLight._this = _this;
        }
        return _this;
    }
    Object.defineProperty(WmyLight, "getThis", {
        get: function () {
            return WmyLight._this;
        },
        enumerable: true,
        configurable: true
    });
    WmyLight.prototype.onAwake = function () {
        this.light = this.owner;
        this._lightBox = this.light.parent;
        this._lightBoxTemp = new Laya.Sprite3D();
        this._lightBoxTemp.transform.localRotationEuler = this._lightBox.transform.localRotationEuler;
        this.scene3D = this.light.scene;
        WmyUtils3D.onShadow(this.light, 2000);
    };
    WmyLight.prototype.onUpdate = function () {
        this._lightBoxTemp.transform.localRotationEuler = this._lightBox.transform.localRotationEuler;
        if (WmyLight.dirX != null) {
            this._lightBoxTemp.transform.localRotationEulerX = WmyLight.dirX;
        }
        if (WmyLight.dirY != null) {
            this._lightBoxTemp.transform.localRotationEulerY = -WmyLight.dirY;
        }
        this._lightBox.transform.localRotationEuler = this._lightBoxTemp.transform.localRotationEuler;
    };
    return WmyLight;
}(Laya.Script));
//# sourceMappingURL=WmyLight.js.map
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var WmyPhysicsWorld_Character = /** @class */ (function (_super) {
    __extends(WmyPhysicsWorld_Character, _super);
    function WmyPhysicsWorld_Character() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.moveSpeed = 0.03;
        _this.jumpSpeed = 5;
        _this.isU = false;
        _this.isD = false;
        _this.isL = false;
        _this.isR = false;
        return _this;
    }
    Object.defineProperty(WmyPhysicsWorld_Character.prototype, "isGrounded", {
        get: function () {
            if (this.character == null)
                return false;
            return this.character.isGrounded;
        },
        enumerable: true,
        configurable: true
    });
    WmyPhysicsWorld_Character.prototype.onAwake = function () {
        this.mySprite3D = this.owner;
        this.scene3D = this.mySprite3D.scene;
        var physicsCollider = this.mySprite3D.getComponent(Laya.PhysicsCollider);
        physicsCollider.enabled = false;
        var sShape = physicsCollider.colliderShape;
        this.character = this.mySprite3D.addComponent(Laya.CharacterController);
        var sphereShape = new Laya.CapsuleColliderShape(sShape.radius, sShape.length, sShape.orientation);
        sphereShape.localOffset = sShape.localOffset;
        this.character.colliderShape = sphereShape;
    };
    WmyPhysicsWorld_Character.prototype.onJump = function (isJump) {
        this._keyJup = isJump;
        var isGrounded = this.character.isGrounded;
        if (!this._isJump && isJump && isGrounded) {
            this.character.jump();
        }
        this._isJump = isJump;
    };
    WmyPhysicsWorld_Character.prototype.onUpdate = function () {
        this.character.jumpSpeed = this.jumpSpeed;
        var speed = this.moveSpeed;
        var speedV3 = new Laya.Vector3(0, 0, 0);
        var isGrounded = this.character.isGrounded;
        if (!(this.isU && this.isD)) {
            if (isGrounded) {
                if (this.isU) {
                    speedV3.z = -speed;
                }
                else if (this.isD) {
                    speedV3.z = speed;
                }
            }
        }
        if (!(this.isL && this.isR)) {
            if (this.isL) {
                speedV3.x = -speed;
            }
            else if (this.isR) {
                speedV3.x = speed;
            }
        }
        this.character.move(speedV3);
    };
    return WmyPhysicsWorld_Character;
}(Laya.Script));
//# sourceMappingURL=WmyPhysicsWorld_Character.js.map
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var B = Laya.Browser;
var WmyUtils = /** @class */ (function (_super) {
    __extends(WmyUtils, _super);
    function WmyUtils() {
        var _this = _super.call(this) || this;
        _this._eventList = new Array();
        // Laya.timer.frameLoop(1,this,this.__loop);
        Laya.stage.on(laya.events.Event.MOUSE_DOWN, _this, _this.__onTouchDown);
        Laya.stage.on(laya.events.Event.MOUSE_UP, _this, _this.__onTouchUp);
        Laya.stage.on(laya.events.Event.MOUSE_MOVE, _this, _this.__OnMouseMOVE);
        Laya.stage.on(Laya.Event.RESIZE, _this, _this.__onResize);
        return _this;
    }
    Object.defineProperty(WmyUtils, "getThis", {
        get: function () {
            if (WmyUtils._this == null) {
                WmyUtils._this = new WmyUtils();
            }
            return WmyUtils._this;
        },
        enumerable: true,
        configurable: true
    });
    //转换颜色
    WmyUtils.prototype.convertColorToColorFiltersMatrix = function (r, g, b, a) {
        WmyUtils.COLOR_FILTERS_MATRIX[0] = r;
        WmyUtils.COLOR_FILTERS_MATRIX[6] = g;
        WmyUtils.COLOR_FILTERS_MATRIX[12] = b;
        WmyUtils.COLOR_FILTERS_MATRIX[18] = a || 1;
        return WmyUtils.COLOR_FILTERS_MATRIX;
    };
    //对对象改变颜色
    WmyUtils.prototype.applyColorFilters = function (target, color) {
        target.filters = null;
        if (color != 0xffffff) {
            target.filters = [new Laya.ColorFilter(this.convertColorToColorFiltersMatrix(((color >> 16) & 0xff) / 255, ((color >> 8) & 0xff) / 255, (color & 0xff) / 255))];
        }
    };
    //对对象改变颜色
    WmyUtils.prototype.applyColorFilters1 = function (target, r, g, b, a) {
        target.filters = null;
        if (r < 1 || g < 1 || b < 1 || a < 1) {
            target.filters = [new Laya.ColorFilter(this.convertColorToColorFiltersMatrix(r, g, b, a))];
        }
    };
    //判断手机或PC
    WmyUtils.prototype.isPc = function () {
        var isPc = false;
        if (this.versions().android || this.versions().iPhone || this.versions().ios) {
            isPc = false;
        }
        else if (this.versions().iPad) {
            isPc = true;
        }
        else {
            isPc = true;
        }
        return isPc;
    };
    WmyUtils.prototype.versions = function () {
        var u = navigator.userAgent, app = navigator.appVersion;
        return {
            //移动终端浏览器版本信息
            trident: u.indexOf('Trident') > -1,
            presto: u.indexOf('Presto') > -1,
            webKit: u.indexOf('AppleWebKit') > -1,
            gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1,
            mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/),
            ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
            android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1,
            iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1,
            iPad: u.indexOf('iPad') > -1,
            webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
        };
    };
    WmyUtils.getUrlV = function (key) {
        var reg = new RegExp("(^|&)" + key + "=([^&]*)(&|$)");
        var result = window.location.search.substr(1).match(reg);
        return result ? decodeURIComponent(result[2]) : null;
    };
    WmyUtils.prototype.onNavigate = function (url, isReplace) {
        if (isReplace === void 0) { isReplace = false; }
        if (isReplace) {
            window.location.replace(url);
        }
        else {
            window.location.href = url;
        }
    };
    WmyUtils.prototype.__onTouchDown = function (evt) {
        if (this._eventList.indexOf(evt) < 0) {
            this._eventList.push(evt);
        }
    };
    WmyUtils.prototype.__onTouchUp = function (evt) {
        if (this._eventList.indexOf(evt) >= 0) {
            this._eventList.splice(this._eventList.indexOf(evt), 1);
        }
    };
    WmyUtils.prototype.__onResize = function () {
        this._eventList.forEach(function (evt) {
            evt.type = Laya.Event.MOUSE_UP;
            Laya.stage.event(Laya.Event.MOUSE_UP, evt);
        });
        this._eventList = new Array();
    };
    WmyUtils.prototype.__OnMouseMOVE = function (evt) {
        var bNum = 10;
        if (evt.stageX <= bNum || evt.stageX >= Laya.stage.width - bNum ||
            evt.stageY <= bNum || evt.stageY >= Laya.stage.height - bNum) {
            evt.type = Laya.Event.MOUSE_UP;
            Laya.stage.event(Laya.Event.MOUSE_UP, evt);
        }
    };
    WmyUtils.onNumTo = function (n) {
        if ((n + "").indexOf(".") >= 0) {
            n = parseFloat(n.toFixed(2));
        }
        return n;
    };
    WmyUtils.getR_XY = function (d, r) {
        var radian = (r * Math.PI / 180);
        var cos = Math.cos(radian);
        var sin = Math.sin(radian);
        var dx = d * cos;
        var dy = d * sin;
        return new Laya.Point(dx, dy);
    };
    WmyUtils.string2buffer = function (str) {
        // 首先将字符串转为16进制
        var val = "";
        for (var i = 0; i < str.length; i++) {
            if (val === '') {
                val = str.charCodeAt(i).toString(16);
            }
            else {
                val += ',' + str.charCodeAt(i).toString(16);
            }
        }
        // 将16进制转化为ArrayBuffer
        return new Uint8Array(val.match(/[\da-f]{2}/gi).map(function (h) {
            return parseInt(h, 16);
        })).buffer;
    };
    WmyUtils.replaceAll = function (str, oldStr, newStr) {
        var temp = '';
        temp = str.replace(oldStr, newStr);
        if (temp.indexOf(oldStr) >= 0) {
            temp = this.replaceAll(temp, oldStr, newStr);
        }
        return temp;
    };
    //大小写转换
    WmyUtils.toCase = function (str, isDx) {
        if (isDx === void 0) { isDx = false; }
        var temp = '';
        if (!isDx) {
            //转换为小写字母
            temp = str.toLowerCase();
        }
        else {
            //转化为大写字母
            temp = str.toUpperCase();
        }
        return temp;
    };
    //距离
    WmyUtils.getDistance = function (a, b) {
        var dx = Math.abs(a.x - b.x);
        var dy = Math.abs(a.y - b.y);
        var d = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));
        d = parseFloat(d.toFixed(2));
        return d;
    };
    WmyUtils.getXyToR = function (y, x) {
        var radian = Math.atan2(y, x);
        var r = (180 / Math.PI * radian);
        r = this.onNumTo(r);
        return r;
    };
    WmyUtils.storage = function (key, value, isLocal) {
        if (value === void 0) { value = "?"; }
        if (isLocal === void 0) { isLocal = true; }
        var storage = isLocal ? localStorage : sessionStorage;
        if (value == "?") {
            var data = storage.getItem(key);
            return data;
        }
        else if (value == null) {
            storage.removeItem(key);
        }
        else {
            storage.setItem(key, value);
            return value;
        }
        return null;
    };
    WmyUtils.COLOR_FILTERS_MATRIX = [
        0, 0, 0, 0, 0,
        0, 0, 0, 0, 0,
        0, 0, 0, 0, 0,
        0, 0, 0, 1, 0,
    ];
    return WmyUtils;
}(laya.events.EventDispatcher));
//# sourceMappingURL=WmyUtils.js.map
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var Wmy_UiObj = /** @class */ (function (_super) {
    __extends(Wmy_UiObj, _super);
    function Wmy_UiObj() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Wmy_UiObj.prototype.dispose = function () {
        this.off(Laya.Event.DISPLAY, this, this.onShow);
        this.off(Laya.Event.UNDISPLAY, this, this.onHide);
        _super.prototype.dispose.call(this);
    };
    Wmy_UiObj.prototype.constructFromXML = function (xml) {
        _super.prototype.constructFromXML.call(this, xml);
        this.on(Laya.Event.DISPLAY, this, this.onShow);
        this.on(Laya.Event.UNDISPLAY, this, this.onHide);
        this.onInit();
    };
    Wmy_UiObj.prototype.onInit = function () {
    };
    Wmy_UiObj.prototype.onShow = function () {
    };
    Wmy_UiObj.prototype.onHide = function () {
    };
    return Wmy_UiObj;
}(fairygui.GComponent));
//# sourceMappingURL=Wmy_UiObj.js.map
// 程序入口
var LayaAir3D = /** @class */ (function () {
    function LayaAir3D() {
        LayaAir3D._this = this;
        //初始化引擎
        Laya3D.init(1136, 640);
        Laya.stage.bgColor = "#000000";
        // //适配模式
        //Laya.stage.scaleMode = Laya.Stage.SCALE_EXACTFIT;
        Laya.stage.scaleMode = Laya.Stage.SCALE_SHOWALL;
        //设置横竖屏
        Laya.stage.screenMode = Laya.Stage.SCREEN_HORIZONTAL;
        //设置水平对齐
        Laya.stage.alignH = "center";
        //设置垂直对齐
        Laya.stage.alignV = "middle";
        Laya.Stat.show();
        Laya.stage.addChild(fairygui.GRoot.inst.displayObject);
        Wmy_Load_Mag.getThis.onLoadWetData("res/loadInfo.txt?" + Date.now(), Laya.Handler.create(this, this.onLoadLoad));
    }
    LayaAir3D.prototype.onLoadLoad = function () {
        var resObj = Wmy_Load_Mag.getThis.getResObj("load");
        if (resObj != null) {
            Wmy_Load_Mag.getThis.onload(resObj, new Laya.Handler(this, this.onLoadMain));
        }
    };
    LayaAir3D.prototype.onLoadMain = function () {
        this._loadView = fairygui.UIPackage.createObject("load", "Load").asCom;
        fairygui.GRoot.inst.addChild(this._loadView);
        this._bar = this._loadView.getChild("bar").asProgress;
        this._bar.value = 1;
        Wmy_Load_Mag.getThis.onAutoLoadAll(new Laya.Handler(this, this.onLoadOk), new Laya.Handler(this, this.onLoading));
    };
    LayaAir3D.prototype.onLoading = function (progress) {
        this._bar.value = progress;
    };
    LayaAir3D.prototype.onLoadOk = function (uiArr, u3dArr) {
        var _this = this;
        if (u3dArr[0] != null) {
            this._urlList = u3dArr[0].urlList;
            //添加3D场景
            this.scene3D = Laya.loader.getRes(this._urlList[0]);
            WmyUtils3D.setShaderAll(this.scene3D, "res/mats/", "res/shaders/");
            Laya.timer.once(200, this, function () {
                _this.onMain();
                fairygui.GRoot.inst.removeChild(_this._loadView);
                _this._loadView = null;
                _this._bar = null;
            });
        }
    };
    LayaAir3D.prototype.onMain = function () {
        Laya.stage.addChildAt(this.scene3D, 0);
        var Camera = WmyUtils3D.getObj3d(this.scene3D, "Camera");
        var Player1 = WmyUtils3D.getObj3d(this.scene3D, "Player1");
        Player1.addComponent(PlayerKz);
        // var Mat_Player1_Clothing=WmyUtils3D.getObj3d(this.scene3D,"Mat_Player1_Clothing")as Laya.Sprite3D;
        // Laya.BaseMaterial.load("res/mat/Mat_Player1_Clothing/Mat_Player1_Clothing.lmat",Laya.Handler.create(this,m=>{
        //     WmyShaderMsg.setShader(Mat_Player1_Clothing,m,"res/shader/wmy_MatCapAdd_glsl.xml");
        // }))
        // var Mat_Player1_Skin=WmyUtils3D.getObj3d(this.scene3D,"Mat_Player1_Skin")as Laya.Sprite3D;
        // Laya.BaseMaterial.load("res/mat/Mat_Player1_Skin/Mat_Player1_Skin.lmat",Laya.Handler.create(this,m=>{
        //     WmyShaderMsg.setShader(Mat_Player1_Skin,m,"res/shader/wmy_MatCapAdd_glsl.xml");
        // }))
    };
    return LayaAir3D;
}());
new LayaAir3D();
//# sourceMappingURL=LayaAir3D.js.map