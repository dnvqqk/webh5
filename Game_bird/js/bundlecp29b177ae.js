var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function r(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)}}();!function(){function t(e,a,r){function n(o,s){if(!a[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=a[o]={exports:{}};e[o][0].call(h.exports,function(t){return n(e[o][1][t]||t)},h,h.exports,t,e,a,r)}return a[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}return t}()({1:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("./_wmyUtilsH5/Wmy_Load_Mag"),n=t("./_wmyUtilsH5/wmyTween/WTweenManager"),i=t("./ui/UI_Main"),o=t("./ui/UI_Game1"),s=function(){function t(){t._this=this,Laya3D.init(720,1280),Laya.Physics&&Laya.Physics.enable(),Laya.stage.scaleMode=Laya.Stage.SCALE_SHOWALL,Laya.stage.alignH="center",Laya.stage.alignV="middle",Laya.Stat.show(),Laya.alertGlobalError=!0;var e="";null!=window&&null!=window.wmyVTime&&(e=window.wmyVTime),Laya.ResourceVersion.enable("version.json"+e,Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}return t.prototype.onVersionLoaded=function(){Laya.stage.addChild(fairygui.GRoot.inst.displayObject);var t=Laya.ResourceVersion.addVersionPrefix("res/loadInfo.json");r.Wmy_Load_Mag.getThis.onLoadWetData(t,Laya.Handler.create(this,this.onLoadLoad))},t.prototype.onLoadLoad=function(){var t=r.Wmy_Load_Mag.getThis.getResObj("load");null!=t&&r.Wmy_Load_Mag.getThis.onload(t,new Laya.Handler(this,this.onLoadMain))},t.prototype.onLoadMain=function(){this._loadView=fairygui.UIPackage.createObject("load","Load").asCom,fairygui.GRoot.inst.addChild(this._loadView),this._img=this._loadView.getChild("img").asCom,this._bar=this._loadView.getChild("bar").asProgress,r.Wmy_Load_Mag.getThis.onAutoLoadAll(new Laya.Handler(this,this.onLoadOk),new Laya.Handler(this,this.onLoading))},t.prototype.onLoading=function(t){n.WTweenManager.killTweens(this);var e=n.WTweenManager.createTween();e.setTarget(this,Laya.Handler.create(this,this._onLoading,null,!1)),e._to(this._bar.value,t,.25)},t.prototype._onLoading=function(t,e){this._bar.value=e,this._img.alpha=.01*e},t.prototype.onLoadOk=function(t,e){var a=this;fairygui.UIObjectFactory.setPackageItemExtension("ui://main/Main",i.UI_Main),fairygui.UIObjectFactory.setPackageItemExtension("ui://main/Game1",o.UI_Game1),n.WTweenManager.killTweens(this);var r=n.WTweenManager.createTween();r.setTarget(this,Laya.Handler.create(this,this._onLoading,null,!1)),r.onComplete(function(){a.u3dArr=e,a.onMain(),fairygui.GRoot.inst.removeChild(a._loadView),a._loadView=null,a._bar=null},this),r._to(this._bar.value,100,1)},t.prototype.onMain=function(){this._mainView=fairygui.UIPackage.createObject("main","Main").asCom,null!=this._mainView&&fairygui.GRoot.inst.addChild(this._mainView)},t}();a.Main=s,new s},{"./_wmyUtilsH5/Wmy_Load_Mag":3,"./_wmyUtilsH5/wmyTween/WTweenManager":14,"./ui/UI_Game1":18,"./ui/UI_Main":19}],2:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e._eventList=new Array,Laya.stage.on(laya.events.Event.MOUSE_DOWN,e,e.__onTouchDown),Laya.stage.on(laya.events.Event.MOUSE_UP,e,e.__onTouchUp),Laya.stage.on(laya.events.Event.MOUSE_MOVE,e,e.__OnMouseMOVE),Laya.stage.on(Laya.Event.RESIZE,e,e.__onResize),e}return __extends(e,t),Object.defineProperty(e,"getThis",{get:function(){return null==e._this&&(e._this=new e),e._this},enumerable:!0,configurable:!0}),e.prototype.convertColorToColorFiltersMatrix=function(t,a,r,n){return e.COLOR_FILTERS_MATRIX[0]=t,e.COLOR_FILTERS_MATRIX[6]=a,e.COLOR_FILTERS_MATRIX[12]=r,e.COLOR_FILTERS_MATRIX[18]=n||1,e.COLOR_FILTERS_MATRIX},e.prototype.applyColorFilters=function(t,e){t.filters=null,16777215!=e&&(t.filters=[new Laya.ColorFilter(this.convertColorToColorFiltersMatrix((e>>16&255)/255,(e>>8&255)/255,(255&e)/255))])},e.prototype.applyColorFilters1=function(t,e,a,r,n){t.filters=null,(e<1||a<1||r<1||n<1)&&(t.filters=[new Laya.ColorFilter(this.convertColorToColorFiltersMatrix(e,a,r,n))])},e.prototype.isPc=function(){return!(this.versions().android||this.versions().iPhone||this.versions().ios)&&(this.versions().iPad,!0)},e.prototype.versions=function(){var t=navigator.userAgent;navigator.appVersion;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/)||!!t.match(/AppleWebKit/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari")}},e.getUrlV=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return a?decodeURIComponent(a[2]):null},e.prototype.onNavigate=function(t,e){void 0===e&&(e=!1),e?window.location.replace(t):window.location.href=t},e.prototype.__onTouchDown=function(t){this._eventList.indexOf(t)<0&&this._eventList.push(t)},e.prototype.__onTouchUp=function(t){this._eventList.indexOf(t)>=0&&this._eventList.splice(this._eventList.indexOf(t),1)},e.prototype.__onResize=function(){this._eventList.forEach(function(t){t.type=Laya.Event.MOUSE_UP,Laya.stage.event(Laya.Event.MOUSE_UP,t)}),this._eventList=new Array},e.prototype.__OnMouseMOVE=function(t){(t.stageX<=10||t.stageX>=Laya.stage.width-10||t.stageY<=10||t.stageY>=Laya.stage.height-10)&&(t.type=Laya.Event.MOUSE_UP,Laya.stage.event(Laya.Event.MOUSE_UP,t))},e.onNumTo=function(t,e){return void 0===e&&(e=2),(t+"").indexOf(".")>=0&&(t=parseFloat(t.toFixed(e))),t},e.getR_XY=function(t,e){var a=e*Math.PI/180,r=t*Math.cos(a),n=t*Math.sin(a);return new Laya.Point(r,n)},e.string2buffer=function(t){for(var e="",a=0;a<t.length;a++)""===e?e=t.charCodeAt(a).toString(16):e+=","+t.charCodeAt(a).toString(16);return new Uint8Array(e.match(/[\da-f]{2}/gi).map(function(t){return parseInt(t,16)})).buffer},e.replaceAll=function(t,e,a){var r="";return(r=t.replace(e,a)).indexOf(e)>=0&&(r=this.replaceAll(r,e,a)),r},e.toCase=function(t,e){void 0===e&&(e=!1);return e?t.toUpperCase():t.toLowerCase()},e.getDistance=function(t,e){var a=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y),n=Math.sqrt(Math.pow(a,2)+Math.pow(r,2));return n=parseFloat(n.toFixed(2))},e.getXyToR=function(t,e){var a=Math.atan2(t,e),r=180/Math.PI*a;return r=this.onNumTo(r)},e.storage=function(t,e,a){void 0===e&&(e="?"),void 0===a&&(a=!0);var r=a?localStorage:sessionStorage;if("?"==e){return r.getItem(t)}return null!=e?(r.setItem(t,e),e):(r.removeItem(t),null)},e.playFuiSound=function(t,e,a,r,n){if(void 0===e&&(e=.2),void 0===r&&(r=0),void 0===n&&(n=1),!(e<=0)){var i=fairygui.UIPackage.getItemByURL(t).file;Laya.SoundManager.playSound(i,n,a,null,r),Laya.SoundManager.setSoundVolume(e,i)}},e.COLOR_FILTERS_MATRIX=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],e}(laya.events.EventDispatcher);a.WmyUtils=r},{}],3:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("./WmyUtils"),n=t("./d3/WmyLoad3d"),i=t("./d3/WmyLoadMats"),o=function(){function t(){this._wetData={},this.resUrl="",this._resDataArr=[],this._callbackOk=[],this._callbackProgress=[]}return Object.defineProperty(t,"getThis",{get:function(){return null==t._this&&(t._this=new t),t._this},enumerable:!0,configurable:!0}),t.prototype.getWetData=function(t){return this._wetData[t]},t.prototype.setWetData=function(t,e){if(""==this.resUrl){this.resUrl=e;try{JSON.parse(t)}catch(t){}}null==e&&(e=this.resUrl),this._wetData[e]=t},t.prototype.getResObj=function(t,e){var a;if(null==e&&(e=this.resUrl),null==(a=this.getWetData(e)))return console.warn("空数据"),null;var r=null;if(a instanceof Array&&(r=a),null==r)try{r=JSON.parse(a)}catch(t){return console.warn("加载材料数据错误",a),null}for(var n=null,i=0;i<r.length;i++){var o=r[i];if(o.resName==t){n=o;break}}return n},t.prototype.onLoadWetData=function(t,e){if(""!=t){if(null==this.getWetData(t)){return Laya.loader.load(t,new Laya.Handler(this,function(a){this.setWetData(a,t),e.runWith([this._wetData[t]])}))}e.runWith([this.getWetData(t)])}},t.prototype.onload=function(t,e,a){var n=t.resName;if(null!=this._resDataArr[n])this._resDataArr[n].runWith([this._resDataArr[n]]);else{if(null!=this._callbackOk[n])return this._callbackOk[n].push(e),null!=a&&this._callbackProgress[n].push(a),!0;var i=t.Resres,o={},s=t.resData;if(null!=s&&""!=s)try{o=JSON.parse(s)}catch(t){console.warn("加载材料数据错误",s)}for(var l,u=[],h=0;h<i.length;h++){var c=i[h].resUrl;if(null!=c){var _=c=r.WmyUtils.toCase(c);_.indexOf(".txt")>=0?(u.push({url:_,type:Laya.Loader.BUFFER}),l=c):_.indexOf(".jpg")>=0||_.indexOf(".png")>=0?u.push({url:_,type:Laya.Loader.IMAGE}):_.indexOf(".mp3")>=0||_.indexOf(".wav")>=0?u.push({url:_,type:Laya.Loader.SOUND}):u.push({url:_})}}if(u.length<=0)return!1;this._callbackOk[n]=[],this._callbackOk[n].push(e),this._callbackProgress[n]=[],null!=a&&this._callbackProgress[n].push(a),Laya.loader.load(u,Laya.Handler.create(this,this.onAssetConmplete,[n,l,o]),Laya.Handler.create(this,this.onAssetProgress,[n],!1))}return!0},t.prototype.onload3d=function(t,e,a){var r=t.resName;if(null!=this._resDataArr[r])this._resDataArr[r].runWith([this._resDataArr[r]]);else{if(null!=this._callbackOk[r])return this._callbackOk[r].push(e),null!=a&&this._callbackProgress[r].push(a),!0;var i=t.Resres,o={},s=t.resData;if(null!=s&&""!=s)try{o=JSON.parse(s)}catch(t){console.warn("加载材料数据错误",s)}for(var l=[],u=[],h=0;h<i.length;h++){var c=i[h].resUrl;if(null!=c){var _=c;c.indexOf(".ls")>=0&&(l.push({url:_}),u.push(_))}}if(l.length<=0)return!1;this._callbackOk[r]=[],this._callbackOk[r].push(e),this._callbackProgress[r]=[],null!=a&&this._callbackProgress[r].push(a),o.urlList=u,n.WmyLoad3d.getThis.onload3d(l,Laya.Handler.create(this,this.onAssetConmplete,[r,void 0,o]),Laya.Handler.create(this,this.onAssetProgress,[r],!1))}return!0},t.prototype.onAssetProgress=function(t,e){for(var a=this._callbackProgress[t],r=0;r<a.length;r++){a[r].runWith([e])}},t.prototype.onAssetConmplete=function(t,e,a){var r=this._callbackOk[t];if(null!=e){var n=Laya.loader.getRes(e),i=e.replace(".txt","");try{fairygui.UIPackage.addPackage(i,n)}catch(t){console.warn("FUI-出错:",i)}var o=i.split("/");a.bName=o[o.length-1],this._resDataArr[t]=a}for(var s=0;s<r.length;s++){r[s].runWith([a])}this._callbackOk[t]=null,this._callbackProgress[t]=null},t.prototype.onAutoLoadAll=function(t,e){var a=this.getWetData(this.resUrl);if(null==a)return console.warn("空数据"),null;var r=null;if(a instanceof Array&&(r=a),null==r)try{r=JSON.parse(a)}catch(t){return console.warn("加载材料数据错误",a),null}this._autoLoadrCallbackOk=t,this._autoLoadrCallbackProgress=e,this._autoLoadInfoArr={},this._autoLoadInfoArr.num=0,this._autoLoadInfoArr.cNum=0,this._autoLoadInfoArr.uiArr=[],this._autoLoadInfoArr.u3dArr=[];for(var n=0;n<r.length;n++){var i=r[n],o=i.resName,s=i.type;null!=o&&""!=o&&null!=s&&""!=s&&this.onAutoLoadObj(s,o)}},t.prototype.onAutoLoadObj=function(t,e){var a=this,r=this.getResObj(e);if(null!=r){var n=this._autoLoadInfoArr.num;this._autoLoadInfoArr[n]={},this._autoLoadInfoArr[n].n=e,this._autoLoadInfoArr[n].t=t;var o=!1;if("ui"==t)o=this.onload(r,new Laya.Handler(this,this.onLoadOk,[n]),new Laya.Handler(this,this.onLoading,[n])),this._autoLoadInfoArr.num+=1,o||(console.warn("ui-出错:",e),Laya.timer.once(100,null,function(t){a.onLoadOk(t)},[n]));else if("u3d"==t)o=this.onload3d(r,new Laya.Handler(this,this.onLoadOk,[n]),new Laya.Handler(this,this.onLoading,[n])),this._autoLoadInfoArr.num+=1,o||(console.warn("u3d-出错:",e),Laya.timer.once(100,null,function(t){a.onLoadOk(t)},[n]));else if("mats"==t){for(var s=r.Resres,l=[],u=0;u<s.length;u++){h=(c=s[u]).resUrl;if(null!=(h=Laya.ResourceVersion.addVersionPrefix(h))){_=h;l.push(_)}}l.length>0&&(i.WmyLoadMats.getThis.onload3d(l,new Laya.Handler(this,this.onLoadOk,[n]),new Laya.Handler(this,this.onLoading,[n])),o=!0),this._autoLoadInfoArr.num+=1,o||(console.warn("mats-出错:",e),Laya.timer.once(100,null,function(t){a.onLoadOk(t)},[n]))}else if("cubeMap"==t)for(var s=r.Resres,u=0;u<s.length;u++){var h,c=s[u],_=h=c.resUrl;Laya.TextureCube.load(_,null)}else"audio"==t&&(o=this.onload(r,new Laya.Handler(this,this.onLoadOk,[n]),new Laya.Handler(this,this.onLoading,[n])),this._autoLoadInfoArr.num+=1,o||(console.warn("audio-出错:",e),Laya.timer.once(100,null,function(t){a.onLoadOk(t)},[n])))}},t.prototype.getCube=function(t,e){var a=this.getResObj(t);if(null!=a){for(var r=a.Resres,n=[],i=0;i<r.length;i++){var o=r[i].resUrl,s=o=Laya.ResourceVersion.addVersionPrefix(o);Laya.TextureCube.load(s,new Laya.Handler(this,function(t){n[i]=t,e.runWith([t,i])}))}return n}},t.prototype.onLoading=function(t,e){this._autoLoadInfoArr[t].p=e;for(var a=this._autoLoadInfoArr.num,r=0,n=0;n<a;n++){var i=this._autoLoadInfoArr[n].p;null!=i&&(r+=i)}var o=r/this._autoLoadInfoArr.num*100;isNaN(o)&&(o=0),null!=this._autoLoadrCallbackProgress&&this._autoLoadrCallbackProgress.runWith([o])},t.prototype.onLoadOk=function(t,e){this._autoLoadInfoArr.cNum+=1,"ui"==this._autoLoadInfoArr[t].t?this._autoLoadInfoArr.uiArr.push(e):"u3d"==this._autoLoadInfoArr[t].t&&this._autoLoadInfoArr.u3dArr.push(e),this._autoLoadInfoArr.cNum>=this._autoLoadInfoArr.num&&null!=this._autoLoadrCallbackOk&&this._autoLoadrCallbackOk.runWith([this._autoLoadInfoArr.uiArr,this._autoLoadInfoArr.u3dArr])},t}();a.Wmy_Load_Mag=o},{"./WmyUtils":2,"./d3/WmyLoad3d":4,"./d3/WmyLoadMats":5}],4:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(){this._mArr=[],this._mNum=0,this._mP=0,this._mP2=0}return Object.defineProperty(t,"getThis",{get:function(){return null==t._this&&(t._this=new t),t._this},enumerable:!0,configurable:!0}),t.prototype.onload3d=function(t,e,a){var r=this,n=[];this._callbackOk=e,this._callbackProgress=a;for(var i=0;i<t.length;i++){var o=t[i];o=Laya.ResourceVersion.addVersionPrefix(o),n.push(o)}var s=0;Laya.loader.create(n,new Laya.Handler(null,function(){null!=r._callbackOk&&r._callbackOk.run()}),Laya.Handler.create(null,function(t){(s+=.01)>1&&(s=1),null!=r._callbackProgress&&r._callbackProgress.runWith([s])},null,!1))},t.prototype.__onlsUrlArrOk=function(t){for(o=0;o<t.length;o++){var e=t[o].url,a=e.split("/"),r=e.replace(a[a.length-1],""),n=Laya.loader.getRes(e),i=JSON.parse(n);this.__tiQuUrl(i.data,r)}for(var o=0;o<this._mArr.length;o++)e=this._mArr[o],Laya.loader.create(e,Laya.Handler.create(this,this.__onArrOk),Laya.Handler.create(this,this.__onArrP))},t.prototype.__onArrP=function(t){(e=t*(this._mNum+1))>this._mP&&(this._mP=e),this._mP2=this._mP/this._mArr.length;var e=.98*this._mP2;null!=this._callbackProgress&&this._callbackProgress.runWith([e])},t.prototype.__onArrOk=function(){var t=this;this._mNum+=1,this._mNum>=this._mArr.length&&Laya.loader.create(this._urlList,Laya.Handler.create(this,function(){null!=t._callbackOk&&t._callbackOk.run()}))},t.prototype.__tiQuUrl=function(t,e){if(void 0===e&&(e=""),null!=t.props&&null!=t.props.meshPath){var a=e+t.props.meshPath;this._mArr.indexOf(a)<0&&this._mArr.push(a);var r=t.props.materials;if(null!=r)for(var n=0;n<r.length;n++){var i=e+r[n].path;this._mArr.indexOf(i)<0&&this._mArr.push(i)}}if(null!=t.components){var o=t.components;if(o.length>0)for(var s=0;s<o.length;s++){var l=o[s];if(null!=l.avatar){var u=e+l.avatar.path;this._mArr.indexOf(u)<0&&this._mArr.push(u)}if(null!=l.layers)for(var h=l.layers,c=0;c<h.length;c++)for(var _=h[c].states,d=0;d<_.length;d++){var p=e+_[d].clipPath;this._mArr.indexOf(p)<0&&this._mArr.push(p)}}}var f=t.child;if(null!=f&&f.length>0)for(var y=0;y<f.length;y++)this.__tiQuUrl(f[y],e)},t}();a.WmyLoad3d=r},{}],5:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(){this._matsUrlArr=[],this._matOk=!1,this._matNum=0,this._matP=0,this._matP2=0}return Object.defineProperty(t,"getThis",{get:function(){return null==t._this&&(t._this=new t),t._this},enumerable:!0,configurable:!0}),t.prototype.onload3d=function(t,e,a){this._callbackOk=e,this._callbackProgress=a,Laya.loader.load(t,Laya.Handler.create(this,this.__onUrlArrOk,[t]))},t.prototype.__onUrlArrOk=function(t){for(u=0;u<t.length;u++){var e=t[u],a=Laya.loader.getRes(e),r=e.split("/"),n=e.replace(r[r.length-1],""),i=[];try{i=a.mats}catch(t){}for(var o=0;o<i.length;o++){var s=i[o];if(""!=s.targetName){var l=n+s.matUrl;this._matsUrlArr.push(l)}}}for(var u=0;u<this._matsUrlArr.length;u++)e=this._matsUrlArr[u],Laya.loader.create(e,Laya.Handler.create(this,this.__onMatArrOk),Laya.Handler.create(this,this.__onMatArrP))},t.prototype.__onMatArrP=function(t){var e=t*(this._matNum+1);e>this._matP&&(this._matP=e),this._matP2=this._matP/this._matsUrlArr.length,null!=this._callbackProgress&&this._callbackProgress.runWith([this._matP2])},t.prototype.__onMatArrOk=function(){this._matNum+=1,this._matNum>=this._matsUrlArr.length&&null!=this._callbackOk&&this._callbackOk.run()},t}();a.WmyLoadMats=r},{}],6:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speedV3=new Laya.Vector3,e.gravity=new Laya.Vector3,e.isLockMove=!1,e}return __extends(e,t),e.prototype.onDel=function(){null!=this.character&&(this.character.destroy(),this.character=null)},Object.defineProperty(e.prototype,"isGrounded",{get:function(){return null!=this.character&&this.character.isGrounded},enumerable:!0,configurable:!0}),e.prototype.onAwake=function(){var t=this.owner3D.getComponent(Laya.PhysicsCollider);t.enabled=!1;var e=t.colliderShape;this._radius=e.radius,this._length=e.length,this._orientation=e.orientation,this._localOffset=e.localOffset.clone(),t.destroy(),this.character=this.owner3D.addComponent(Laya.CharacterController);var a=new Laya.CapsuleColliderShape(this._radius,this._length,this._orientation);a.localOffset=this._localOffset,this.character.colliderShape=a,this.character.gravity=this.gravity},e.prototype.onUpdate=function(){this.character.gravity=this.gravity,this.character.move(this.speedV3)},e.prototype.move=function(t,e){var a=this;void 0===e&&(e=0),this.isLockMove=!0,this.character.move(t),Laya.timer.once(1e3*e,this,function(){a.isLockMove=!1})},e.prototype._updatePhysicsTransform=function(){var t=this.character._nativeColliderObject.getWorldTransform();this.character._derivePhysicsTransformation(t,!0)},e}(t("./WmyScript3D").WmyScript3D);a.WmyPhysicsWorld_Character=r},{"./WmyScript3D":7}],7:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.del=function(t){void 0===t&&(t=!0),this.owner3D.destroy(t)},e.prototype.onDestroy=function(){this.owner3D=null,this.scene3D=null,this.onDel()},e.prototype.onDel=function(){},e.prototype._onAdded=function(){t.prototype._onAdded.call(this),this.owner3D=this.owner,this.scene3D=this.owner3D.scene},e}(Laya.Script3D);a.WmyScript3D=r},{}],8:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(){}return t.setShader=function(t,e,a,r,n){void 0===r&&(r=!1);var i,o;if(t instanceof Laya.SkinnedMeshSprite3D){if(null==(i=t.skinnedMeshRenderer))return;o=i.sharedMaterial}else{if(null==(i=t.meshRenderer))return;o=i.sharedMaterial}r&&(o=o.clone(),i.sharedMaterial=o);for(var s in e)try{o[s]=e[s]}catch(t){}return Laya.loader.load(a,Laya.Handler.create(this,this.shaderConmplete,[o,n])),o},t.shaderConmplete=function(t,e,a){if(null!=a){var r=null;try{r=Laya.Utils.parseXMLFromString(a)}catch(t){return}var n,i,o,s,l,u,h=r.documentElement,c=this.getAttributesValue(h,"name"),_={},d=this.getNode(h,"attributeMap"),p=this.getNodeArr(d,"data");for(n=0;n<p.length;n++)i=p[n],o=this.getAttributesValue(i,"name"),s=this.getAttributesValue(i,"v0"),_[o]=this.getV(s,"int");var f={},y=this.getNode(h,"uniformMap"),v=this.getNodeArr(y,"data"),g=t.wmyValues;if(null!=g&&null!=g.cube){var m=g.cube;null!=e&&null!=e.cubeFun&&e.cubeFun(t,m)}for(n=0;n<v.length;n++){u=null,i=v[n],o=this.getAttributesValue(i,"name"),s=this.getAttributesValue(i,"v0"),l=this.getAttributesValue(i,"v1");var w=[];if(w[0]=this.getV(s,"int"),w[1]=this.getV(l,"int"),f[o]=w,null!=g&&(u=g[o]),null!=u)if(4==(u=u.split(",")).length)t._shaderValues.setVector(w[0],new Laya.Vector4(parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])));else if(3==u.length)t._shaderValues.setVector(w[0],new Laya.Vector3(parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])));else if(2==u.length)t._shaderValues.setVector(w[0],new Laya.Vector2(parseFloat(u[0]),parseFloat(u[1])));else if(1==u.length)if(isNaN(parseFloat(u[0]))){if("tex"==u[0]+""){var L=t[o];t._shaderValues.setTexture(w[0],L)}}else t._shaderValues.setNumber(w[0],parseFloat(u[0]))}var b=Laya.SkinnedMeshSprite3D.shaderDefines,O=Laya.BlinnPhongMaterial.shaderDefines;null!=e&&(null!=e.spriteDefines&&(b=e.spriteDefines),null!=e.materialDefines&&(O=e.materialDefines));var T=Laya.Shader3D.add(c,_,f,b,O),M=this.getNode(h,"SubShader"),k=this.getNode(h,"renderMode");if(null!=k){var P=this.getAttributesValue(k,"v");null!=P&&(t.renderMode=this.getV(P))}var W=this.getNodeArr(M,"Pass");for(n=0;n<W.length;n++){var C=W[n],A=this.getNode(C,"VERTEX").textContent;A=A.replace(/(\r)/g,"");var S=this.getNode(C,"FRAGMENT").textContent;if(S=S.replace(/(\r)/g,""),n>0){var I=t.getRenderState(0).clone();t._renderStates.push(I)}var U=this.getNode(C,"cull");if(null!=U){var V=this.getAttributesValue(U,"v");null==V&&""==V||(t.getRenderState(n).cull=this.getV(V))}T.addShaderPass(A,S)}t._shader=T}},t.getV=function(t,e){void 0===e&&(e="null");var a,r,n;for("Laya"===(a=t.split("."))[0]?r=Laya:"laya"===a[0]&&(r=laya),n=1;n<a.length;n++)r=r[a[n]];return null!=r?r:"null"!=e?"int"==e?parseInt(t):t:null},t.colorStringToUint=function(t){return Number("0x"+t.replace("#",""))},t.getAttributesValue=function(t,e){for(var a=null,r=t.attributes,n=0;n<r.length;n++){var i=r[n];if(i.name==e){a=i.nodeValue;break}}return a},t.getNode=function(t,e){for(var a=t.childNodes,r=null,n=0;n<a.length;n++){var i=a[n];if(i.nodeName==e){r=i;break}}return r},t.getNodeArr=function(t,e){for(var a=t.childNodes,r=[],n=0;n<a.length;n++){var i=a[n];i.nodeName==e&&r.push(i)}return r},t}();a.WmyShaderMsg=r},{}],9:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("../Wmy_Load_Mag"),n=t("./WmyShaderMsg"),i=function(){function t(){}return t.getObj3d=function(t,e){if(null==t)return null;if(t.name==e)return t;for(var a=0;a<t._children.length;a++){var r=t._children[a];if(r._children.length<=0){if(r.name==e)return r}else{var n=this.getObj3d(r,e);if(null!=n)return n}}return null},t.getChildrenComponent=function(t,e,a){if(null==t)return null;null==a&&(a=[]);var r=t.getComponent(e);null==r&&t instanceof e&&(r=t),null!=r&&a.push(r);for(var n=0;n<t._children.length;n++){var i=t._children[n];this.getChildrenComponent(i,e,a)}return a},t.setShaderAll=function(e,a,i,o){var s=this,l=a+"wmyMats.json",u=i;Laya.loader.load(l,Laya.Handler.create(this,function(a,i,u){if(null!=u)for(var h=u.mats,c=0;c<h.length;c++){var _=h[c];if(""!=_.targetName){var d=t.getObj3d(e,_.targetName);if(null!=d){var p=a+_.matUrl,f=i+_.shaderName+".txt";Laya.BaseMaterial.load(p,Laya.Handler.create(s,function(t,e,a){var i={};i.cubeFun=function(t,e){r.Wmy_Load_Mag.getThis.getCube(e,new Laya.Handler(s,function(e,a){0==a&&t._shaderValues.setTexture(Laya.Scene3D.REFLECTIONTEXTURE,e)}))},n.WmyShaderMsg.setShader(t,a,e,!1,i),null!=t&&null!=t.parent&&t.parent.removeChild(t),null!=o&&o.run()},[d,f]))}}}else console.warn("wmyMats-出错:",l)},[a,u]),null,Laya.Loader.JSON)},t.aniPlay=function(t,e,a){var r=this.getObj3d(t,e).getComponent(Laya.Animator);return r.play(a),r},t.onShadow=function(t,e,a,r,n){void 0===e&&(e=512),void 0===a&&(a=1),void 0===r&&(r=100),void 0===n&&(n=!0),t.shadow=n,t.shadowDistance=r,t.shadowResolution=e,t.shadowPCFType=a},t.onCastShadow=function(t,e,a,r){if(void 0===e&&(e=0),void 0===a&&(a=!0),void 0===r&&(r=!0),t instanceof Laya.MeshSprite3D){var n=t;0==e?n.meshRenderer.receiveShadow=a:1==e?n.meshRenderer.castShadow=a:2==e&&(n.meshRenderer.receiveShadow=a,n.meshRenderer.castShadow=a)}if(t instanceof Laya.SkinnedMeshSprite3D){var i=t;0==e?i.skinnedMeshRenderer.receiveShadow=a:1==e&&(i.skinnedMeshRenderer.castShadow=a)}if(r)for(var o=0;o<t.numChildren;o++){var s=t.getChildAt(o);this.onCastShadow(s,e,a)}},t.rgb2hex=function(t,e,a){return("#"+this.hex(t)+this.hex(e)+this.hex(a)).toUpperCase()},t.hex=function(t){return t=this.onNumTo(t),("0"+parseInt(t).toString(16)).slice(-2)},t.onNumTo=function(t){return(t+"").indexOf(".")>=0&&(t=parseFloat(t.toFixed(2))),t},t.lerpF=function(t,e,a){return t+(e-t)*a},t}();a.WmyUtils3D=i},{"../Wmy_Load_Mag":3,"./WmyShaderMsg":8}],10:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dispose=function(){this.off(Laya.Event.DISPLAY,this,this.onShow),this.off(Laya.Event.UNDISPLAY,this,this.onHide),this.del(),t.prototype.dispose.call(this)},e.prototype.del=function(){},e.prototype.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.on(Laya.Event.DISPLAY,this,this.onShow),this.on(Laya.Event.UNDISPLAY,this,this.onHide),this.onInit()},e.prototype.onInit=function(){},e.prototype.onShow=function(){},e.prototype.onHide=function(){},e}(fairygui.GComponent);a.Wmy_UiObj=r},{}],11:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("./WEaseType"),n=function(){function t(){}return t.evaluate=function(e,a,n,o,s){switch(e){case r.WEaseType.Linear:return a/n;case r.WEaseType.SineIn:return 1-Math.cos(a/n*t._PiOver2);case r.WEaseType.SineOut:return Math.sin(a/n*t._PiOver2);case r.WEaseType.SineInOut:return-.5*(Math.cos(Math.PI*a/n)-1);case r.WEaseType.QuadIn:return(a/=n)*a;case r.WEaseType.QuadOut:return-(a/=n)*(a-2);case r.WEaseType.QuadInOut:return(a/=.5*n)<1?.5*a*a:-.5*(--a*(a-2)-1);case r.WEaseType.CubicIn:return(a/=n)*a*a;case r.WEaseType.CubicOut:return(a=a/n-1)*a*a+1;case r.WEaseType.CubicInOut:return(a/=.5*n)<1?.5*a*a*a:.5*((a-=2)*a*a+2);case r.WEaseType.QuartIn:return(a/=n)*a*a*a;case r.WEaseType.QuartOut:return-((a=a/n-1)*a*a*a-1);case r.WEaseType.QuartInOut:return(a/=.5*n)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2);case r.WEaseType.QuintIn:return(a/=n)*a*a*a*a;case r.WEaseType.QuintOut:return(a=a/n-1)*a*a*a*a+1;case r.WEaseType.QuintInOut:return(a/=.5*n)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2);case r.WEaseType.ExpoIn:return 0==a?0:Math.pow(2,10*(a/n-1));case r.WEaseType.ExpoOut:return a==n?1:1-Math.pow(2,-10*a/n);case r.WEaseType.ExpoInOut:return 0==a?0:a==n?1:(a/=.5*n)<1?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*--a));case r.WEaseType.CircIn:return-(Math.sqrt(1-(a/=n)*a)-1);case r.WEaseType.CircOut:return Math.sqrt(1-(a=a/n-1)*a);case r.WEaseType.CircInOut:return(a/=.5*n)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1);case r.WEaseType.ElasticIn:var l;return 0==a?0:1==(a/=n)?1:(0==s&&(s=.3*n),o<1?(o=1,l=s/4):l=s/t._TwoPi*Math.asin(1/o),-o*Math.pow(2,10*(a-=1))*Math.sin((a*n-l)*t._TwoPi/s));case r.WEaseType.ElasticOut:var u;return 0==a?0:1==(a/=n)?1:(0==s&&(s=.3*n),o<1?(o=1,u=s/4):u=s/t._TwoPi*Math.asin(1/o),o*Math.pow(2,-10*a)*Math.sin((a*n-u)*t._TwoPi/s)+1);case r.WEaseType.ElasticInOut:var h;return 0==a?0:2==(a/=.5*n)?1:(0==s&&(s=n*(.3*1.5)),o<1?(o=1,h=s/4):h=s/t._TwoPi*Math.asin(1/o),a<1?o*Math.pow(2,10*(a-=1))*Math.sin((a*n-h)*t._TwoPi/s)*-.5:o*Math.pow(2,-10*(a-=1))*Math.sin((a*n-h)*t._TwoPi/s)*.5+1);case r.WEaseType.BackIn:return(a/=n)*a*((o+1)*a-o);case r.WEaseType.BackOut:return(a=a/n-1)*a*((o+1)*a+o)+1;case r.WEaseType.BackInOut:return(a/=.5*n)<1?a*a*((1+(o*=1.525))*a-o)*.5:.5*((a-=2)*a*((1+(o*=1.525))*a+o)+2);case r.WEaseType.BounceIn:return i.easeIn(a,n);case r.WEaseType.BounceOut:return i.easeOut(a,n);case r.WEaseType.BounceInOut:return i.easeInOut(a,n);default:return-(a/=n)*(a-2)}},t._PiOver2=.5*Math.PI,t._TwoPi=2*Math.PI,t}();a.WEaseManager=n;var i=function(){function t(){}return t.easeIn=function(e,a){return 1-t.easeOut(a-e,a)},t.easeOut=function(t,e){return(t/=e)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.easeInOut=function(e,a){return e<.5*a?.5*t.easeIn(2*e,a):.5*t.easeOut(2*e-a,a)+.5},t}();a.Bounce=i},{"./WEaseType":12}],12:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(){}return t.Linear=0,t.SineIn=1,t.SineOut=2,t.SineInOut=3,t.QuadIn=4,t.QuadOut=5,t.QuadInOut=6,t.CubicIn=7,t.CubicOut=8,t.CubicInOut=9,t.QuartIn=10,t.QuartOut=11,t.QuartInOut=12,t.QuintIn=13,t.QuintOut=14,t.QuintInOut=15,t.ExpoIn=16,t.ExpoOut=17,t.ExpoInOut=18,t.CircIn=19,t.CircOut=20,t.CircInOut=21,t.ElasticIn=22,t.ElasticOut=23,t.ElasticInOut=24,t.BackIn=25,t.BackOut=26,t.BackInOut=27,t.BounceIn=28,t.BounceOut=29,t.BounceInOut=30,t.Custom=31,t}();a.WEaseType=r},{}],13:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("./WTweenManager"),n=function(){function t(){}return t.to=function(t,e,a){return r.WTweenManager.createTween()._to(t,e,a)},t.to2=function(t,e,a,n,i){return r.WTweenManager.createTween()._to2(t,e,a,n,i)},t.to3=function(t,e,a,n,i,o,s){return r.WTweenManager.createTween()._to3(t,e,a,n,i,o,s)},t.to4=function(t,e,a,n,i,o,s,l,u){return r.WTweenManager.createTween()._to4(t,e,a,n,i,o,s,l,u)},t.toColor=function(t,e,a){return r.WTweenManager.createTween()._toColor(t,e,a)},t.delayedCall=function(t){return r.WTweenManager.createTween().setDelay(t)},t.shake=function(t,e,a,n){return r.WTweenManager.createTween()._shake(t,e,a,n)},t.isTweening=function(t,e){return r.WTweenManager.isTweening(t,e)},t.kill=function(t,e,a){void 0===e&&(e=!1),void 0===a&&(a=null),r.WTweenManager.killTweens(t,!1,null)},t.getTween=function(t,e){return void 0===e&&(e=null),r.WTweenManager.getTween(t,e)},t.catchCallbackExceptions=!0,t}();a.WTween=n},{"./WTweenManager":14}],14:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("./WTweener"),n=function(){function t(){}return t.createTween=function(){t._inited||(Laya.timer.frameLoop(1,null,this.update),t._inited=!0);var e;return(e=t._tweenerPool.length>0?t._tweenerPool.pop():new r.WTweener)._init(),t._activeTweens[t._totalActiveTweens++]=e,t._totalActiveTweens==t._activeTweens.length&&(t._activeTweens.length=t._activeTweens.length+Math.ceil(.5*t._activeTweens.length)),e},t.isTweening=function(e,a){if(null==e)return!1;for(var r=null==a,n=0;n<t._totalActiveTweens;n++){var i=t._activeTweens[n];if(null!=i&&i.target==e&&!i._killed&&(r||i._propType==a))return!0}return!1},t.killTweens=function(e,a,r){if(void 0===a&&(a=!1),void 0===r&&(r=null),null==e)return!1;for(var n=!1,i=t._totalActiveTweens,o=null==r,s=0;s<i;s++){var l=t._activeTweens[s];null==l||l.target!=e||l._killed||!o&&l._propType!=r||(l.kill(a),n=!0)}return n},t.getTween=function(e,a){if(null==e)return null;for(var r=t._totalActiveTweens,n=null==a,i=0;i<r;i++){var o=t._activeTweens[i];if(null!=o&&o.target==e&&!o._killed&&(n||o._propType==a))return o}return null},t.update=function(){for(var e=Laya.timer.delta/1e3,a=t._totalActiveTweens,r=-1,n=0;n<a;n++){var i=t._activeTweens[n];null==i?(-1==r&&(r=n),0):i._killed?(i._reset(),t._tweenerPool.push(i),t._activeTweens[n]=null,-1==r&&(r=n),0):(i._paused||i._update(e),-1!=r&&(t._activeTweens[r]=i,t._activeTweens[n]=null,r++))}if(r>=0){if(t._totalActiveTweens!=a){var o=a;for(a=t._totalActiveTweens-a,n=0;n<a;n++)t._activeTweens[r++]=t._activeTweens[o++]}t._totalActiveTweens=r}},t._activeTweens=new Array(30),t._tweenerPool=[],t._totalActiveTweens=0,t._inited=!1,t}();a.WTweenManager=n},{"./WTweener":16}],15:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(){this.x=this.y=this.z=this.w=0}return Object.defineProperty(t.prototype,"color",{get:function(){return(this.w<<24)+(this.x<<16)+(this.y<<8)+this.z},set:function(t){this.x=(16711680&t)>>16,this.y=(65280&t)>>8,this.z=255&t,this.w=(4278190080&t)>>24},enumerable:!0,configurable:!0}),t.prototype.getField=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("Index out of bounds: "+t)}},t.prototype.setField=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("Index out of bounds: "+t)}},t.prototype.setZero=function(){this.x=this.y=this.z=this.w=0},t}();a.WTweenValue=r},{}],16:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("./WTweenValue"),n=t("./WEaseType"),i=t("./WTween"),o=t("./WEaseManager"),s=function(){function t(){this._startValue=new r.WTweenValue,this._endValue=new r.WTweenValue,this._value=new r.WTweenValue,this._deltaValue=new r.WTweenValue,this._reset()}return t.prototype.setDelay=function(t){return this._delay=t,this},Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},enumerable:!0,configurable:!0}),t.prototype.setDuration=function(t){return this._duration=t,this},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),t.prototype.setBreakpoint=function(t){return this._breakpoint=t,this},t.prototype.setEase=function(t){return this._easeType=t,this},t.prototype.setEasePeriod=function(t){return this._easePeriod=t,this},t.prototype.setEaseOvershootOrAmplitude=function(t){return this._easeOvershootOrAmplitude=t,this},t.prototype.setRepeat=function(t,e){return void 0===e&&(e=!1),this._repeat=this.repeat,this._yoyo=e,this},Object.defineProperty(t.prototype,"repeat",{get:function(){return this._repeat},enumerable:!0,configurable:!0}),t.prototype.setTimeScale=function(t){return this._timeScale=t,this},t.prototype.setSnapping=function(t){return this._snapping=t,this},t.prototype.setTarget=function(t,e){return void 0===e&&(e=null),this._target=this.value,this._propType=e,this},Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),t.prototype.setUserData=function(t){return this._userData=this.value,this},Object.defineProperty(t.prototype,"userData",{get:function(){return this._userData},enumerable:!0,configurable:!0}),t.prototype.onUpdate=function(t,e){return this._onUpdate=t,this._onUpdateCaller=e,this},t.prototype.onStart=function(t,e){return this._onStart=t,this._onStartCaller=e,this},t.prototype.onComplete=function(t,e){return this._onComplete=t,this._onCompleteCaller=e,this},Object.defineProperty(t.prototype,"startValue",{get:function(){return this._startValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endValue",{get:function(){return this._endValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deltaValue",{get:function(){return this._deltaValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"normalizedTime",{get:function(){return this._normalizedTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"completed",{get:function(){return 0!=this._ended},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allCompleted",{get:function(){return 1==this._ended},enumerable:!0,configurable:!0}),t.prototype.setPaused=function(t){return this._paused=t,this},t.prototype.seek=function(t){if(!this._killed){if(this._elapsedTime=t,this._elapsedTime<this._delay){if(!this._started)return;this._elapsedTime=this._delay}this.update()}},t.prototype.kill=function(t){void 0===t&&(t=!1),this._killed||(t&&(0==this._ended&&(this._breakpoint>=0?this._elapsedTime=this._delay+this._breakpoint:this._repeat>=0?this._elapsedTime=this._delay+this._duration*(this._repeat+1):this._elapsedTime=this._delay+2*this._duration,this.update()),this.callCompleteCallback()),this._killed=!0)},t.prototype._to=function(t,e,a){return this._valueSize=1,this._startValue.x=t,this._endValue.x=e,this._duration=a,this},t.prototype._to2=function(t,e,a,r,n){return this._valueSize=2,this._startValue.x=t,this._endValue.x=a,this._startValue.y=e,this._endValue.y=r,this._duration=n,this},t.prototype._to3=function(t,e,a,r,n,i,o){return this._valueSize=3,this._startValue.x=t,this._endValue.x=r,this._startValue.y=e,this._endValue.y=n,this._startValue.z=a,this._endValue.z=i,this._duration=o,this},t.prototype._to4=function(t,e,a,r,n,i,o,s,l){return this._valueSize=4,this._startValue.x=t,this._endValue.x=n,this._startValue.y=e,this._endValue.y=i,this._startValue.z=a,this._endValue.z=o,this._startValue.w=r,this._endValue.w=s,this._duration=l,this},t.prototype._toColor=function(t,e,a){return this._valueSize=4,this._startValue.color=t,this._endValue.color=e,this._duration=a,this},t.prototype._shake=function(t,e,a,r){return this._valueSize=5,this._startValue.x=t,this._startValue.y=e,this._startValue.w=a,this._duration=r,this._easeType=n.WEaseType.Linear,this},t.prototype._init=function(){this._delay=0,this._duration=0,this._breakpoint=-1,this._easeType=n.WEaseType.QuadOut,this._timeScale=1,this._easePeriod=0,this._easeOvershootOrAmplitude=1.70158,this._snapping=!1,this._repeat=0,this._yoyo=!1,this._valueSize=0,this._started=!1,this._paused=!1,this._killed=!1,this._elapsedTime=0,this._normalizedTime=0,this._ended=0},t.prototype._reset=function(){this._target=null,this._userData=null,this._onStart=this._onUpdate=this._onComplete=null,this._onStartCaller=this._onUpdateCaller=this._onCompleteCaller=null},t.prototype._update=function(t){if(1!=this._timeScale&&(t*=this._timeScale),0!=t){if(0!=this._ended)return this.callCompleteCallback(),void(this._killed=!0);this._elapsedTime+=t,this.update(),0!=this._ended&&(this._killed||(this.callCompleteCallback(),this._killed=!0))}},t.prototype.update=function(t){if(null!=t){if(1!=this._timeScale&&(t*=this._timeScale),0==t)return;this._elapsedTime+=t}this._ended=0;var e=this._duration;if(0!=this._valueSize){if(!this._started){if(this._elapsedTime<this._delay)return;if(this._started=!0,this.callStartCallback(),this._killed)return}var a=!1,r=this._elapsedTime-this._delay;if(this._breakpoint>=0&&r>=this._breakpoint&&(r=this._breakpoint,this._ended=2),0!=this._repeat){var n=Math.floor(r/e);r-=e*n,this._yoyo&&(a=n%2==1),this._repeat>0&&this._repeat-n<0&&(this._yoyo&&(a=this._repeat%2==1),r=e,this._ended=1)}else r>=e&&(r=e,this._ended=1);if(this._normalizedTime=o.WEaseManager.evaluate(this._easeType,a?e-r:r,e,this._easeOvershootOrAmplitude,this._easePeriod),this._value.setZero(),this._deltaValue.setZero(),5==this._valueSize)if(0==this._ended){var i=this._startValue.w*(1-this._normalizedTime),s=(2*Math.random()-1)*i,l=(2*Math.random()-1)*i;s=s>0?Math.ceil(s):Math.floor(s),l=l>0?Math.ceil(l):Math.floor(l),this._deltaValue.x=s,this._deltaValue.y=l,this._value.x=this._startValue.x+s,this._value.y=this._startValue.y+l}else this._value.x=this._startValue.x,this._value.y=this._startValue.y;else for(var u=0;u<this._valueSize;u++){var h=this._startValue.getField(u),c=h+(this._endValue.getField(u)-h)*this._normalizedTime;this._snapping&&(c=Math.round(c)),this._deltaValue.setField(u,c-this._value.getField(u)),this._value.setField(u,c)}if(null!=this._target&&null!=this._propType)if(this._propType instanceof Function)switch(this._valueSize){case 1:this._propType.call(this._target,this._value.x);break;case 2:this._propType.call(this._target,this._value.x,this._value.y);break;case 3:this._propType.call(this._target,this._value.x,this._value.y,this._value.z);break;case 4:this._propType.call(this._target,this._value.x,this._value.y,this._value.z,this._value.w);break;case 5:this._propType.call(this._target,this._value.color);break;case 6:this._propType.call(this._target,this._value.x,this._value.y)}else if(this._propType instanceof Laya.Handler){var _=[];switch(this._valueSize){case 1:_=[this._target,this._value.x];break;case 2:_=[this._target,this._value.x,this._value.y];break;case 3:_=[this._target,this._value.x,this._value.y,this._value.z];break;case 4:_=[this._target,this._value.x,this._value.y,this._value.z,this._value.w];break;case 5:_=[this._target,this._value.color];break;case 6:_=[this._target,this._value.x,this._value.y]}this._propType.runWith(_)}else 5==this._valueSize?this._target[this._propType]=this._value.color:this._target[this._propType]=this._value.x;this.callUpdateCallback()}else this._elapsedTime>=this._delay+e&&(this._ended=1)},t.prototype.callStartCallback=function(){if(null!=this._onStart)if(i.WTween.catchCallbackExceptions)try{this._onStart.call(this._onStartCaller,this)}catch(t){}else this._onStart.call(this._onStartCaller,this)},t.prototype.callUpdateCallback=function(){if(null!=this._onUpdate)if(i.WTween.catchCallbackExceptions)try{this._onUpdate.call(this._onUpdateCaller,this)}catch(t){}else this._onUpdate.call(this._onUpdateCaller,this)},t.prototype.callCompleteCallback=function(){if(null!=this._onComplete)if(i.WTween.catchCallbackExceptions)try{this._onComplete.call(this._onCompleteCaller,this)}catch(t){}else this._onComplete.call(this._onCompleteCaller,this)},t}();a.WTweener=s},{"./WEaseManager":11,"./WEaseType":12,"./WTween":13,"./WTweenValue":15}],17:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("../_wmyUtilsH5/d3/WmyScript3D"),n=t("../_wmyUtilsH5/d3/WmyPhysicsWorld_Character"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onDel=function(){},e.prototype.onAwake=function(){this._wCharacter=this.owner3D.addComponent(n.WmyPhysicsWorld_Character),this._wCharacter.character.restitution=0,this._wCharacter.character.friction=0,this._wCharacter._updatePhysicsTransform()},e.prototype.onStart=function(){},e.prototype.onGameGo=function(t){var e=this;this._wCharacter.gravity=new Laya.Vector3(0,-40,0),t._btn_mouseClick.onClick(this,function(){e._wCharacter.character.jump(new Laya.Vector3(0,16,0))})},e.prototype.onUpdate=function(){this.owner3D.transform.localPositionX=2.65,this.owner3D.transform.localPositionZ=0,this.owner3D.transform.localRotationEuler=Laya.Vector3.ZERO;var t=!1;this.owner3D.transform.localPositionY<0?(this.owner3D.transform.localPositionY=0,t=!0):this.owner3D.transform.localPositionY>18&&(this.owner3D.transform.localPositionY=18,t=!0),t&&this._wCharacter._updatePhysicsTransform()},e}(r.WmyScript3D);a.js_Bird=i},{"../_wmyUtilsH5/d3/WmyPhysicsWorld_Character":6,"../_wmyUtilsH5/d3/WmyScript3D":7}],18:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("../_wmyUtilsH5/ui/Wmy_UiObj"),n=t("../_wmyUtilsH5/d3/WmyUtils3D"),i=t("../game/js_Bird"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.del=function(){},e.prototype.onInit=function(){this._d3=this.getChild("d3").asCom,this._btn_mouseClick=this.getChild("btn_mouseClick").asCom},e.prototype.onGameGo=function(t){this._scene3D=t,this._d3.displayObject.addChild(this._scene3D),this._bird3d=n.WmyUtils3D.getObj3d(this._scene3D,"bird"),this.js_bird=this._bird3d.addComponent(i.js_Bird)},e.prototype.onShow=function(){this.js_bird.onGameGo(this)},e.prototype.onHide=function(){},e}(r.Wmy_UiObj);a.UI_Game1=o},{"../_wmyUtilsH5/d3/WmyUtils3D":9,"../_wmyUtilsH5/ui/Wmy_UiObj":10,"../game/js_Bird":17}],19:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("../_wmyUtilsH5/ui/Wmy_UiObj"),n=t("../Main"),i=t("../_wmyUtilsH5/d3/WmyUtils3D"),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isGame=!1,e}return __extends(e,t),e.prototype.del=function(){},e.prototype.onInit=function(){this._dl=this.getChild("登录").asCom,this.btn_start=this._dl.getChild("btn_start").asButton,this.btn_start.onClick(this,this.onGame)},e.prototype.onShow=function(){},e.prototype.onHide=function(){},e.prototype.onGame=function(){var t=this,e=n.Main._this.u3dArr;if(null!=e){this.btn_start.enabled=!1;var a=e[0].urlList[0],r=Laya.loader.getRes(a);i.WmyUtils3D.setShaderAll(r,"res/mats/","res/shaders/",new Laya.Handler(this,function(){t._dl.visible=!1,t._game1=fairygui.UIPackage.createObject("main","Game1"),t._game1.onGameGo(r),t.addChild(t._game1),t.btn_start.enabled=!0}))}},e}(r.Wmy_UiObj);a.UI_Main=o},{"../Main":1,"../_wmyUtilsH5/d3/WmyUtils3D":9,"../_wmyUtilsH5/ui/Wmy_UiObj":10}]},{},[1]);