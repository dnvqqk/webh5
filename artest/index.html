<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>AR</title>
</head>

<body>
    <script type="text/javascript" src="//res.imtt.qq.com/common/zepto.min.js"></script>
    <script type="text/javascript" src="//res.imtt.qq.com/webar/third_party/LayaAirJS_2.0/laya.core.js"></script>
    <script type="text/javascript" src="//res.imtt.qq.com/webar/third_party/LayaAirJS_2.0/laya.webgl.js"></script>
    <script type="text/javascript" src="//res.imtt.qq.com/webar/third_party/LayaAirJS_2.0/laya.ani.js"></script>
    <script type="text/javascript" src="//res.imtt.qq.com/webar/third_party/LayaAirJS_2.0/laya.d3.js"></script>
    <script type="text/javascript" src="./js/layaEngine.js"></script>
    <script type="text/javascript" src="./js/tar.js"></script>
    <script type="text/javascript" src="./js/task.js"></script>
    <script>
        function createScript(src) {
            const promise = new Promise((resolve) => {
                const script = document.createElement('script');
                script.type = 'text/javascript';
                script.src = src;
                script.async = false;
                script.onload = () => resolve();
                $('body').append(script);
            });
            return promise;
        }
        const IS_IOS_PLAT = !!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);
        if (IS_IOS_PLAT) {
            // WebARonARKit.js是将iOS下ARKit与Android做兼容，并将能力向QB的Android AR看齐
            createScript('//res.imtt.qq.com/webar/third_party/WebARonARKit.js').then(() => {
                createScript('./js/main.js');
            });
        } else {
            createScript('./js/main.js');
        }
    </script>
</body>

</html>