var WmyLoad3d=function(){function t(){this._meshArr=[],this._meshOk=!1,this._meshNum=0,this._meshP=0,this._meshP2=0,this._matArr=[],this._matOk=!1,this._matNum=0,this._matP=0,this._matP2=0}return Object.defineProperty(t,"getThis",{get:function(){return null==t._this&&(t._this=new t),t._this},enumerable:!0,configurable:!0}),t.prototype.onload3d=function(t,r,s){this._urlList=[],this._callbackOk=r,this._callbackProgress=s;for(var a=0;a<t.length;a++){var h=t[a],i={};i.url=h.url,this._urlList.push(i),h.url+="?wmy",t[a]=h}Laya.loader.load(t,Laya.Handler.create(this,this.__onlsUrlArrOk,[t]))},t.prototype.__onlsUrlArrOk=function(t){for(e=0;e<t.length;e++){var r=t[e].url,s=r.split("/"),a=r.replace(s[s.length-1],""),h=Laya.loader.getRes(r),i=JSON.parse(h);this.__tiQuUrl(i.data,a)}for(e=0;e<this._meshArr.length;e++)r=this._meshArr[e]+Wmy_Load_Mag.V,Laya.loader.create(r,Laya.Handler.create(this,this.__onMeshArrOk),Laya.Handler.create(this,this.__onMeshArrP));for(var e=0;e<this._matArr.length;e++)r=this._matArr[e]+Wmy_Load_Mag.V,Laya.loader.create(r,Laya.Handler.create(this,this.__onMatArrOk),Laya.Handler.create(this,this.__onMatArrP))},t.prototype.__onMeshArrP=function(t){var r=t*(this._meshNum+1);r>this._meshP&&(this._meshP=r),this._meshP2=this._meshP/this._meshArr.length,this.__onLoadP()},t.prototype.__onMeshArrOk=function(){this._meshNum+=1,this._meshNum>=this._meshArr.length&&(this._meshOk=!0,this.__onLoadOK())},t.prototype.__onMatArrP=function(t){var r=t*(this._matNum+1);r>this._matP&&(this._matP=r),this._matP2=this._matP/this._matArr.length,this.__onLoadP()},t.prototype.__onMatArrOk=function(){this._matNum+=1,this._matNum>=this._matArr.length&&(this._matOk=!0,this.__onLoadOK())},t.prototype.__onLoadP=function(){var t=(this._meshP2+this._matP2)/2*.92;null!=this._callbackProgress&&this._callbackProgress.runWith([t])},t.prototype.__onLoadOK=function(){var t=this;this._meshOk&&this._matOk&&Laya.loader.create(this._urlList,Laya.Handler.create(this,function(){null!=t._callbackOk&&t._callbackOk.run()}))},t.prototype.__tiQuUrl=function(t,r){if(void 0===r&&(r=""),null!=t.props&&null!=t.props.meshPath){var s=r+t.props.meshPath;this._meshArr.indexOf(s)<0&&this._meshArr.push(s);var a=t.props.materials;if(null!=a)for(var h=0;h<a.length;h++){var i=r+a[h].path;this._matArr.indexOf(i)<0&&this._matArr.push(i)}}var e=t.child;if(null!=e&&e.length>0)for(var _=0;_<e.length;_++)this.__tiQuUrl(e[_],r)},t}();