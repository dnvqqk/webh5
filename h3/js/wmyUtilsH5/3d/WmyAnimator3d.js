var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),WmyAnimator3d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._aniName="",e}return __extends(e,t),Object.defineProperty(e,"Event_playComplete",{get:function(){return"WmyAnimator3d.playComplete"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Event_playEvent",{get:function(){return"WmyAnimator3d.playEvent"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Event_playQh",{get:function(){return"WmyAnimator3d.playQh"},enumerable:!0,configurable:!0}),e.prototype.onPlayQh=function(t){return this._playQh=t,this},Object.defineProperty(e.prototype,"mySprite3D",{get:function(){return this._mySprite3D},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controllerLaye",{get:function(){return this._controllerLaye},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playState",{get:function(){return this._playState},enumerable:!0,configurable:!0}),e.prototype.onAwake=function(){this._mySprite3D=this.owner,this._animator=this.mySprite3D.getComponent(Laya.Animator),this._controllerLaye=this._animator.getControllerLayer(),this._playState=this._animator.getCurrentAnimatorPlayState();var t=this._animator.getDefaultState();this.onAnimator(t.name)},Object.defineProperty(e.prototype,"aniName",{get:function(){return this._aniName},enumerable:!0,configurable:!0}),e.prototype.onAnimator=function(t,n,r,i){if(void 0===n&&(n=!1),null!=this._animator&&(this._aniName!=t||n)){var o=this._aniName;if(this._aniName=t,""!=o&&""!=t&&t!=o){var a=[this.aniName,o];this.mySprite3D.event(e.Event_playQh,a),null!=this._playQh&&this._playQh.runWith(a),Laya.timer.clearAll(this)}n?this._animator.play(t,0,0):this._animator.crossFade(t,.05);var p=this._controllerLaye._statesMap[t];return this.onPlayCompleteEvent(p,r),this.onPlayEvent(p,i),this}},e.prototype.onPlayCompleteEvent=function(t,n){var r=this,i=t._clip.duration();i*=1/t.speed*1e3;var o=function(){var t=[r.aniName];r.mySprite3D.event(e.Event_playComplete,t),null!=n&&n.runWith([t])};t._clip.islooping?Laya.timer.loop(i,this,o):Laya.timer.once(i,this,o)},e.prototype.onPlayEvent=function(t,n){for(var r=this,i=1/t.speed*1e3,o=0;o<t._clip._events.length;o++){var a=t._clip._events[o],p=WmyUtils.onNumTo(a.time,2)*i,l=function(t){var i=[r.aniName,t];r.mySprite3D.event(e.Event_playEvent,i),null!=n&&n.runWith([i])};t._clip.islooping?Laya.timer.loop(p,this,l,[a]):Laya.timer.once(p,this,l,[a])}},e}(Laya.Script);