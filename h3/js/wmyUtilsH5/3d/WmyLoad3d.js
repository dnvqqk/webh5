var WmyLoad3d=function(){function r(){this._mArr=[],this._mNum=0,this._mP=0,this._mP2=0}return Object.defineProperty(r,"getThis",{get:function(){return null==r._this&&(r._this=new r),r._this},enumerable:!0,configurable:!0}),r.prototype.onload3d=function(r,t,a){this._urlList=[],this._callbackOk=t,this._callbackProgress=a;for(var i=0;i<r.length;i++){var l=r[i],s={};s.url=l.url,this._urlList.push(s),l.url+="?wmy",r[i]=l}Laya.loader.load(r,Laya.Handler.create(this,this.__onlsUrlArrOk,[r]))},r.prototype.__onlsUrlArrOk=function(r){for(h=0;h<r.length;h++){var t=r[h].url,a=t.split("/"),i=t.replace(a[a.length-1],""),l=Laya.loader.getRes(t),s=JSON.parse(l);this.__tiQuUrl(s.data,i)}for(var h=0;h<this._mArr.length;h++)t=this._mArr[h]+Wmy_Load_Mag.V,Laya.loader.create(t,Laya.Handler.create(this,this.__onArrOk),Laya.Handler.create(this,this.__onArrP))},r.prototype.__onArrP=function(r){(t=r*(this._mNum+1))>this._mP&&(this._mP=t),this._mP2=this._mP/this._mArr.length;var t=.98*this._mP2;null!=this._callbackProgress&&this._callbackProgress.runWith([t])},r.prototype.__onArrOk=function(){var r=this;this._mNum+=1,this._mNum>=this._mArr.length&&Laya.loader.create(this._urlList,Laya.Handler.create(this,function(){null!=r._callbackOk&&r._callbackOk.run()}))},r.prototype.__tiQuUrl=function(r,t){if(void 0===t&&(t=""),null!=r.props&&null!=r.props.meshPath){var a=t+r.props.meshPath;this._mArr.indexOf(a)<0&&this._mArr.push(a);var i=r.props.materials;if(null!=i)for(var l=0;l<i.length;l++){var s=t+i[l].path;this._mArr.indexOf(s)<0&&this._mArr.push(s)}}if(null!=r.components){var h=r.components;if(h.length>0)for(var e=0;e<h.length;e++){var n=h[e];if(null!=n.avatar){var o=t+n.avatar.path;this._mArr.indexOf(o)<0&&this._mArr.push(o)}if(null!=n.layers)for(var _=n.layers,u=0;u<_.length;u++)for(var m=_[u].states,c=0;c<m.length;c++){var p=t+m[c].clipPath;this._mArr.indexOf(p)<0&&this._mArr.push(p)}}}var f=r.child;if(null!=f&&f.length>0)for(var v=0;v<f.length;v++)this.__tiQuUrl(f[v],t)},r}();