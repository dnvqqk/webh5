var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a])};return function(i,a){function s(){this.constructor=i}t(i,a),i.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}(),PlayerKz=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._isLock=!1,i.keyArr={},i._jumpDown=!1,i._isCarom=!1,i._punchId=1,i._isAct=!1,i._jlNum=0,i._isLd=!1,i}return __extends(i,t),i.prototype.onInit=function(){this._hit.on(GameHit.Event_hit,this,this.oEvent_hit);this._animator.controllerLaye._statesMap.Walk.speed=1.2;this._animator.controllerLaye._statesMap.Punch1.speed=1.3;this._animator.controllerLaye._statesMap.Punch2.speed=1.2;this._animator.controllerLaye._statesMap.Punch3.speed=1;this._animator.controllerLaye._statesMap.JumpKick.speed=1.3},i.prototype.onKeyDown=function(t){var i=t.keyCode;this.keyArr[i]||(32==i&&(this._isLock||this.onJump()),74==i&&this.onPunch()),this.keyArr[i]||(this.keyArr[i]=!0)},i.prototype.onKeyUp=function(t){var i=t.keyCode;this.keyArr[i]&&(this.keyArr[i]=!1)},i.prototype.onJump=function(){var t=this;this._character.isGrounded&&(this._punchId=1,this._character.character.jump(),this._jumpDown=!1,this._animator.onAnimator("Jump1"),WmyUtils.playFuiSound("ui://audio/PlayerJump"),Laya.timer.once(550,this,function(){t._jumpDown=!0}),this.onAddEffect(this._DustEffectJump,this._yy.transform.position.clone()))},i.prototype.onPunch=function(){var t=this;if(!this._isAct||this._isCarom)if(this._character.isGrounded){WmyUtils.playFuiSound("ui://audio/Whoosh"),null==this.caromFun?this.caromFun=function(){t._isCarom=!1,t._punchId=1}:Laya.timer.clear(this,this.caromFun),this._isAct||this._isCarom||(this._punchId=1),this._isAct=!0,this._isLock=!0,this._isCarom=!1,null!=this._hitBox&&(this._hitBox.active=!1);var i=0;2==this._punchId&&(i=30),3==this._punchId&&(i=40),this._animator.onAnimator("Punch"+this._punchId,!0,i,Laya.Handler.create(this,function(){t._isAct=!1,t._isLock=!1;var i=50;2==t._punchId&&(i=120),3==t._punchId&&(i=150),Laya.timer.once(i,t,t.caromFun)}))}else"Jump1"==this._animator.aniName&&(WmyUtils.playFuiSound("ui://audio/Whoosh"),this._isAct=!0,this._animator.onAnimator("JumpKick"),Laya.timer.once(420,this,function(){t._isAct=!1}))},i.prototype.onEvent_playEvent=function(t,i){"carom"==i.eventName&&1==i.params[1]&&(this._isCarom=!0,"Punch1"==t?this._punchId=2:"Punch2"==t&&(this._punchId=3))},i.prototype.oEvent_hit=function(t){var i=.01;"Punch2"==this._animator.aniName?i=.02:"Punch3"==this._animator.aniName?i=.02:"JumpKick"==this._animator.aniName&&(i=.03),t.onHit(this,i)},i.prototype.onPreRender=function(){this._character.isL=Laya.KeyBoardManager.hasKeyDown(65),this._character.isR=Laya.KeyBoardManager.hasKeyDown(68),this._character.isU=Laya.KeyBoardManager.hasKeyDown(87),this._character.isD=Laya.KeyBoardManager.hasKeyDown(83),this._isLock&&(this._character.isL=!1,this._character.isR=!1,this._character.isU=!1,this._character.isD=!1),this._character.isL?this.onTweenMaxRotation(-1):this._character.isR&&this.onTweenMaxRotation(1),this._character.isGrounded?this._isAct||(this._character.isU||this._character.isD||this._character.isL||this._character.isR?this._animator.onAnimator("Walk"):this._animator.onAnimator("Idle")):(this._jumpDown&&!this._isAct&&(this._animator.onAnimator("Jump2"),this._jumpDown=!1),this.mySprite3D.transform.localPositionY<this._jlNum?!this._isLd&&this.mySprite3D.transform.localPositionY<.2&&(this._isLd=!0,this.onAddEffect(this._DustEffectLand,this._yy.transform.position.clone())):this.mySprite3D.transform.localPositionY>.2&&(this._isLd=!1),this._jlNum=this.mySprite3D.transform.localPositionY)},i}(BaseRoleKz);