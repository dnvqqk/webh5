var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a])};return function(i,a){function n(){this.constructor=i}t(i,a),i.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),PlayerKz=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._isLock=!1,i.keyArr={},i._jumpDown=!1,i._punchId=1,i._isAct=!1,i}return __extends(i,t),i.prototype.onInit=function(){this._hit.on(GameHit.Event_hit,this,this.oEvent_hit);this._animator.controllerLaye._statesMap.Walk.speed=1.2;this._animator.controllerLaye._statesMap.Punch1.speed=1.3;this._animator.controllerLaye._statesMap.Punch2.speed=1;this._animator.controllerLaye._statesMap.Punch3.speed=1;this._animator.controllerLaye._statesMap.JumpKick.speed=1.3},i.prototype.onKeyDown=function(t){var i=t.keyCode;this.keyArr[i]||(32==i&&(this._isLock||this.onJump()),74==i&&this.onPunch()),this.keyArr[i]||(this.keyArr[i]=!0)},i.prototype.onKeyUp=function(t){var i=t.keyCode;this.keyArr[i]&&(this.keyArr[i]=!1)},i.prototype.onJump=function(){var t=this;this._character.isGrounded&&(this._punchId=1,this._character.character.jump(),this._jumpDown=!1,this._animator.onAnimator("Jump1"),Laya.timer.once(500,this,function(){t._jumpDown=!0}))},i.prototype.onPunch=function(){var t=this;this._isAct||(this._character.isGrounded?(this._isAct=!0,this._isLock=!0,Laya.timer.clear(this,this.onPunchInit),this._animator.onAnimator("Punch"+this._punchId,!0,Laya.Handler.create(this,function(){t._punchId+=1,t._punchId>3&&(t._punchId=1),t._isAct=!1,t._isLock=!1,Laya.timer.once(400,t,t.onPunchInit)}))):"Jump1"==this._animator.aniName&&(this._isAct=!0,this._animator.onAnimator("JumpKick"),Laya.timer.once(420,this,function(){t._isAct=!1})))},i.prototype.onPunchInit=function(){this._punchId=1},i.prototype.oEvent_hit=function(t){var i=.01;"Punch2"==this._animator.aniName?i=.02:"Punch3"==this._animator.aniName?i=.03:"JumpKick"==this._animator.aniName&&(i=.05),t.onHit(this,i)},i.prototype.onPreRender=function(){this._character.isL=Laya.KeyBoardManager.hasKeyDown(65),this._character.isR=Laya.KeyBoardManager.hasKeyDown(68),this._character.isU=Laya.KeyBoardManager.hasKeyDown(87),this._character.isD=Laya.KeyBoardManager.hasKeyDown(83),this._isLock&&(this._character.isL=!1,this._character.isR=!1,this._character.isU=!1,this._character.isD=!1),this._character.isL?this.onTweenMaxRotation(-1):this._character.isR&&this.onTweenMaxRotation(1),this._character.isGrounded?this._isAct||(this._character.isU||this._character.isD||this._character.isL||this._character.isR?this._animator.onAnimator("Walk"):this._animator.onAnimator("Idle")):this._jumpDown&&!this._isAct&&(this._animator.onAnimator("Jump2"),this._jumpDown=!1)},i}(BaseRoleKz);