var WmyLoadMats=function(){function t(){this._matsUrlArr=[],this._matOk=!1,this._matNum=0,this._matP=0,this._matP2=0}return Object.defineProperty(t,"getThis",{get:function(){return null==t._this&&(t._this=new t),t._this},enumerable:!0,configurable:!0}),t.prototype.onload3d=function(t,a,r){this._callbackOk=a,this._callbackProgress=r,Laya.loader.load(t,Laya.Handler.create(this,this.__onUrlArrOk,[t]))},t.prototype.__onUrlArrOk=function(t){for(m=0;m<t.length;m++)for(var a=t[m],r=Laya.loader.getRes(a),s=JSON.parse(r),e=a.split("/"),i=a.replace(e[e.length-1],""),l=s.mats,h=0;h<l.length;h++){var n=l[h];if(""!=n.targetName){var _=Wmy_Load_Mag.V,o=i+n.matUrl+_;this._matsUrlArr.push(o)}}for(var m=0;m<this._matsUrlArr.length;m++)a=this._matsUrlArr[m],Laya.loader.create(a,Laya.Handler.create(this,this.__onMatArrOk),Laya.Handler.create(this,this.__onMatArrP))},t.prototype.__onMatArrP=function(t){var a=t*(this._matNum+1);a>this._matP&&(this._matP=a),this._matP2=this._matP/this._matsUrlArr.length,null!=this._callbackProgress&&this._callbackProgress.runWith([this._matP2])},t.prototype.__onMatArrOk=function(){this._matNum+=1,this._matNum>=this._matsUrlArr.length&&null!=this._callbackOk&&this._callbackOk.run()},t}();