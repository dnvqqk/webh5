var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),UnitAnimator=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._aniName="",e._eveInit=!0,e}return __extends(e,t),e.prototype.onAwake=function(){this.mySprite3D=this.owner,this._animator=this.mySprite3D.getComponent(Laya.Animator),this._controllerLaye=this._animator.getControllerLayer(),this._playState=this._animator.getCurrentAnimatorPlayState();this._controllerLaye._statesMap.Walk.speed=1.2;this._controllerLaye._statesMap.Punch1.speed=1.3;this._controllerLaye._statesMap.Punch2.speed=1;this._controllerLaye._statesMap.Punch3.speed=1;var t=this._animator.getDefaultState();this.onAnimator(t.name)},e.prototype.onAnimator=function(t,e){if(void 0===e&&(e=!1),null!=this._animator&&(this._aniName!=t&&(this._eveInit=!0),this._aniName!=t||e)){this._aniName=t;e?this._animator.play(t,0,0):this._animator.crossFade(t,.05),this._currentState=this._controllerLaye._statesMap[t],this._currentClip=this._currentState._clip}},e.prototype.onPreRender=function(){if(null!=this._animator){var t=1/this._currentClip._duration,e=this._playState._normalizedPlayTime;if(null!=e){for(var n=WmyUtils.onNumTo(e,2),i=0;i<this._currentClip._events.length;i++){var r=this._currentClip._events[i],a=WmyUtils.onNumTo(r.time,2)/this._currentClip._duration;a=WmyUtils.onNumTo(a,2),Math.abs(n-a)<.02*t&&this._eveInit&&(this._eveInit=!1,this.mySprite3D.event(r.eventName,[r.params]))}(e<=.1||1==e)&&(this._eveInit=!0)}}},e}(Laya.Script);